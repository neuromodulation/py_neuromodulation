function Ed(xl){return xl&&xl.__esModule&&Object.prototype.hasOwnProperty.call(xl,"default")?xl.default:xl}var Nh={exports:{}};(function(xl,Sd){/*! For license information please see plotly.min.js.LICENSE.txt */(function(of,Ou){xl.exports=Ou()})(self,function(){return function(){var of={79288:function(ee,R,e){var M=e(3400),k={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var s in k){var T=s.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");M.addStyleRule(T,k[s])}},86712:function(ee,R,e){ee.exports=e(84224)},37240:function(ee,R,e){ee.exports=e(51132)},29744:function(ee,R,e){ee.exports=e(94456)},29352:function(ee,R,e){ee.exports=e(67244)},96144:function(ee,R,e){ee.exports=e(97776)},53219:function(ee,R,e){ee.exports=e(61712)},4624:function(ee,R,e){ee.exports=e(95856)},54543:function(ee,R,e){ee.exports=e(54272)},45e3:function(ee,R,e){ee.exports=e(85404)},62300:function(ee,R,e){ee.exports=e(26048)},6920:function(ee,R,e){ee.exports=e(66240)},10264:function(ee,R,e){ee.exports=e(40448)},32016:function(ee,R,e){ee.exports=e(64884)},27528:function(ee,R,e){ee.exports=e(15088)},75556:function(ee,R,e){ee.exports=e(76744)},39204:function(ee,R,e){ee.exports=e(94704)},73996:function(ee,R,e){ee.exports=e(62396)},16489:function(ee,R,e){ee.exports=e(32028)},5e3:function(ee,R,e){ee.exports=e(81932)},77280:function(ee,R,e){ee.exports=e(45536)},33992:function(ee,R,e){ee.exports=e(42600)},17600:function(ee,R,e){ee.exports=e(21536)},49116:function(ee,R,e){ee.exports=e(65664)},46808:function(ee,R,e){ee.exports=e(29044)},36168:function(ee,R,e){ee.exports=e(48928)},13792:function(ee,R,e){var M=e(32016);M.register([e(37240),e(29352),e(5e3),e(33992),e(17600),e(49116),e(6920),e(67484),e(79440),e(39204),e(83096),e(36168),e(20260),e(63560),e(65832),e(46808),e(73996),e(48824),e(89904),e(25120),e(13752),e(4340),e(62300),e(29800),e(8363),e(54543),e(86636),e(42192),e(32140),e(77280),e(89296),e(56816),e(70192),e(45e3),e(27528),e(84764),e(3920),e(50248),e(4624),e(69967),e(10264),e(86152),e(53219),e(81604),e(63796),e(29744),e(89336),e(86712),e(75556),e(16489),e(97312),e(96144)]),ee.exports=M},3920:function(ee,R,e){ee.exports=e(43480)},25120:function(ee,R,e){ee.exports=e(6296)},4340:function(ee,R,e){ee.exports=e(7404)},86152:function(ee,R,e){ee.exports=e(65456)},56816:function(ee,R,e){ee.exports=e(22020)},89296:function(ee,R,e){ee.exports=e(29928)},20260:function(ee,R,e){ee.exports=e(75792)},32140:function(ee,R,e){ee.exports=e(156)},84764:function(ee,R,e){ee.exports=e(45499)},48824:function(ee,R,e){ee.exports=e(3296)},69967:function(ee,R,e){ee.exports=e(4184)},8363:function(ee,R,e){ee.exports=e(36952)},86636:function(ee,R,e){ee.exports=e(38983)},70192:function(ee,R,e){ee.exports=e(11572)},81604:function(ee,R,e){ee.exports=e(76924)},63796:function(ee,R,e){ee.exports=e(62944)},89336:function(ee,R,e){ee.exports=e(95443)},67484:function(ee,R,e){ee.exports=e(34864)},97312:function(ee,R,e){ee.exports=e(76272)},42192:function(ee,R,e){ee.exports=e(97924)},29800:function(ee,R,e){ee.exports=e(15436)},63560:function(ee,R,e){ee.exports=e(5621)},89904:function(ee,R,e){ee.exports=e(91304)},50248:function(ee,R,e){ee.exports=e(41724)},65832:function(ee,R,e){ee.exports=e(31991)},79440:function(ee,R,e){ee.exports=e(22869)},13752:function(ee,R,e){ee.exports=e(67776)},83096:function(ee,R,e){ee.exports=e(95952)},72196:function(ee){ee.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},13916:function(ee,R,e){var M=e(72196),k=e(25376),s=e(33816),T=e(31780).templatedArray;e(36208),ee.exports=T("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:k({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:M.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:M.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",s.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",s.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",s.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",s.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:k({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},90272:function(ee,R,e){var M=e(3400),k=e(54460),s=e(23816).draw;function T(f){var o=f._fullLayout;M.filterVisible(o.annotations).forEach(function(t){var i=k.getFromId(f,t.xref),n=k.getFromId(f,t.yref),r=k.getRefType(t.xref),a=k.getRefType(t.yref);t._extremes={},r==="range"&&b(t,i),a==="range"&&b(t,n)})}function b(f,o){var t,i=o._id,n=i.charAt(0),r=f[n],a=f["a"+n],l=f[n+"ref"],u=f["a"+n+"ref"],h=f["_"+n+"padplus"],c=f["_"+n+"padminus"],x={x:1,y:-1}[n]*f[n+"shift"],p=3*f.arrowsize*f.arrowwidth||0,v=p+x,g=p-x,y=3*f.startarrowsize*f.arrowwidth||0,m=y+x,_=y-x;if(u===l){var d=k.findExtremes(o,[o.r2c(r)],{ppadplus:v,ppadminus:g}),S=k.findExtremes(o,[o.r2c(a)],{ppadplus:Math.max(h,m),ppadminus:Math.max(c,_)});t={min:[d.min[0],S.min[0]],max:[d.max[0],S.max[0]]}}else m=a?m+a:m,_=a?_-a:_,t=k.findExtremes(o,[o.r2c(r)],{ppadplus:Math.max(h,v,m),ppadminus:Math.max(c,g,_)});f._extremes[i]=t}ee.exports=function(f){var o=f._fullLayout;if(M.filterVisible(o.annotations).length&&f._fullData.length)return M.syncOrAsync([s,T],f)}},42300:function(ee,R,e){var M=e(3400),k=e(24040),s=e(31780).arrayEditor;function T(f,o){var t,i,n,r,a,l,u,h=f._fullLayout.annotations,c=[],x=[],p=[],v=(o||[]).length;for(t=0;t<h.length;t++)if(r=(n=h[t]).clicktoshow){for(i=0;i<v;i++)if(l=(a=o[i]).xaxis,u=a.yaxis,l._id===n.xref&&u._id===n.yref&&l.d2r(a.x)===b(n._xclick,l)&&u.d2r(a.y)===b(n._yclick,u)){(n.visible?r==="onout"?x:p:c).push(t);break}i===v&&n.visible&&r==="onout"&&x.push(t)}return{on:c,off:x,explicitOff:p}}function b(f,o){return o.type==="log"?o.l2r(f):o.d2r(f)}ee.exports={hasClickToShow:function(f,o){var t=T(f,o);return t.on.length>0||t.explicitOff.length>0},onClick:function(f,o){var t,i,n=T(f,o),r=n.on,a=n.off.concat(n.explicitOff),l={},u=f._fullLayout.annotations;if(r.length||a.length){for(t=0;t<r.length;t++)(i=s(f.layout,"annotations",u[r[t]])).modifyItem("visible",!0),M.extendFlat(l,i.getUpdateObj());for(t=0;t<a.length;t++)(i=s(f.layout,"annotations",u[a[t]])).modifyItem("visible",!1),M.extendFlat(l,i.getUpdateObj());return k.call("update",f,{},l)}}}},87192:function(ee,R,e){var M=e(3400),k=e(76308);ee.exports=function(s,T,b,f){f("opacity");var o=f("bgcolor"),t=f("bordercolor"),i=k.opacity(t);f("borderpad");var n=f("borderwidth"),r=f("showarrow");if(f("text",r?" ":b._dfltTitle.annotation),f("textangle"),M.coerceFont(f,"font",b.font),f("width"),f("align"),f("height")&&f("valign"),r){var a,l,u=f("arrowside");u.indexOf("end")!==-1&&(a=f("arrowhead"),l=f("arrowsize")),u.indexOf("start")!==-1&&(f("startarrowhead",a),f("startarrowsize",l)),f("arrowcolor",i?T.bordercolor:k.defaultLine),f("arrowwidth",2*(i&&n||1)),f("standoff"),f("startstandoff")}var h=f("hovertext"),c=b.hoverlabel||{};if(h){var x=f("hoverlabel.bgcolor",c.bgcolor||(k.opacity(o)?k.rgb(o):k.defaultLine)),p=f("hoverlabel.bordercolor",c.bordercolor||k.contrast(x)),v=M.extendFlat({},c.font);v.color||(v.color=p),M.coerceFont(f,"hoverlabel.font",v)}f("captureevents",!!h)}},26828:function(ee,R,e){var M=e(38248),k=e(36896);ee.exports=function(s,T,b,f){T=T||{};var o=b==="log"&&T.type==="linear",t=b==="linear"&&T.type==="log";if(o||t)for(var i,n,r=s._fullLayout.annotations,a=T._id.charAt(0),l=0;l<r.length;l++)i=r[l],n="annotations["+l+"].",i[a+"ref"]===T._id&&u(a),i["a"+a+"ref"]===T._id&&u("a"+a);function u(h){var c=i[h],x=null;x=o?k(c,T.range):Math.pow(10,c),M(x)||(x=null),f(n+h,x)}}},45216:function(ee,R,e){var M=e(3400),k=e(54460),s=e(51272),T=e(87192),b=e(13916);function f(o,t,i){function n(S,w){return M.coerce(o,t,b,S,w)}var r=n("visible"),a=n("clicktoshow");if(r||a){T(o,t,i,n);for(var l=t.showarrow,u=["x","y"],h=[-10,-30],c={_fullLayout:i},x=0;x<2;x++){var p=u[x],v=k.coerceRef(o,t,c,p,"","paper");if(v!=="paper"&&k.getFromId(c,v)._annIndices.push(t._index),k.coercePosition(t,c,n,v,p,.5),l){var g="a"+p,y=k.coerceRef(o,t,c,g,"pixel",["pixel","paper"]);y!=="pixel"&&y!==v&&(y=t[g]="pixel");var m=y==="pixel"?h[x]:.4;k.coercePosition(t,c,n,y,g,m)}n(p+"anchor"),n(p+"shift")}if(M.noneOrAll(o,t,["x","y"]),l&&M.noneOrAll(o,t,["ax","ay"]),a){var _=n("xclick"),d=n("yclick");t._xclick=_===void 0?t.x:k.cleanPosition(_,c,t.xref),t._yclick=d===void 0?t.y:k.cleanPosition(d,c,t.yref)}}}ee.exports=function(o,t){s(o,t,{name:"annotations",handleItemDefaults:f})}},23816:function(ee,R,e){var M=e(33428),k=e(24040),s=e(7316),T=e(3400),b=T.strTranslate,f=e(54460),o=e(76308),t=e(43616),i=e(93024),n=e(72736),r=e(93972),a=e(86476),l=e(31780).arrayEditor,u=e(33652);function h(p,v){var g=p._fullLayout.annotations[v]||{},y=f.getFromId(p,g.xref),m=f.getFromId(p,g.yref);y&&y.setScale(),m&&m.setScale(),x(p,g,v,!1,y,m)}function c(p,v,g,y,m){var _=m[g],d=m[g+"ref"],S=g.indexOf("y")!==-1,w=f.getRefType(d)==="domain",E=S?y.h:y.w;return p?w?_+(S?-v:v)/p._length:p.p2r(p.r2p(_)+v):_+(S?-v:v)/E}function x(p,v,g,y,m,_){var d,S,w=p._fullLayout,E=p._fullLayout._size,C=p._context.edits;y?(d="annotation-"+y,S=y+".annotations"):(d="annotation",S="annotations");var O=l(p.layout,S,v),P=O.modifyBase,z=O.modifyItem,j=O.getUpdateObj;w._infolayer.selectAll("."+d+'[data-index="'+g+'"]').remove();var I="clip"+w._uid+"_ann"+g;if(v._input&&v.visible!==!1){var N={x:{},y:{}},W=+v.textangle||0,F=w._infolayer.append("g").classed(d,!0).attr("data-index",String(g)).style("opacity",v.opacity),U=F.append("g").classed("annotation-text-g",!0),H=C[v.showarrow?"annotationTail":"annotationPosition"],ne=v.captureevents||C.annotationText||H,$=U.append("g").style("pointer-events",ne?"all":null).call(r,"pointer").on("click",function(){p._dragging=!1,p.emit("plotly_clickannotation",pe(M.event))});v.hovertext&&$.on("mouseover",function(){var be=v.hoverlabel,ke=be.font,ze=this.getBoundingClientRect(),ve=p.getBoundingClientRect();i.loneHover({x0:ze.left-ve.left,x1:ze.right-ve.left,y:(ze.top+ze.bottom)/2-ve.top,text:v.hovertext,color:be.bgcolor,borderColor:be.bordercolor,fontFamily:ke.family,fontSize:ke.size,fontColor:ke.color,fontWeight:ke.weight,fontStyle:ke.style,fontVariant:ke.variant,fontShadow:ke.fontShadow,fontLineposition:ke.fontLineposition,fontTextcase:ke.fontTextcase},{container:w._hoverlayer.node(),outerContainer:w._paper.node(),gd:p})}).on("mouseout",function(){i.loneUnhover(w._hoverlayer.node())});var K=v.borderwidth,Q=v.borderpad,Z=K+Q,X=$.append("rect").attr("class","bg").style("stroke-width",K+"px").call(o.stroke,v.bordercolor).call(o.fill,v.bgcolor),te=v.width||v.height,ae=w._topclips.selectAll("#"+I).data(te?[0]:[]);ae.enter().append("clipPath").classed("annclip",!0).attr("id",I).append("rect"),ae.exit().remove();var se=v.font,ce=w._meta?T.templateString(v.text,w._meta):v.text,fe=$.append("text").classed("annotation-text",!0).text(ce);C.annotationText?fe.call(n.makeEditable,{delegate:$,gd:p}).call(ge).on("edit",function(be){v.text=be,this.call(ge),z("text",be),m&&m.autorange&&P(m._name+".autorange",!0),_&&_.autorange&&P(_._name+".autorange",!0),k.call("_guiRelayout",p,j())}):fe.call(ge)}else M.selectAll("#"+I).remove();function pe(be){var ke={index:g,annotation:v._input,fullAnnotation:v,event:be};return y&&(ke.subplotId=y),ke}function ge(be){return be.call(t.font,se).attr({"text-anchor":{left:"start",right:"end"}[v.align]||"middle"}),n.convertToTspans(be,p,me),be}function me(){var be=fe.selectAll("a");be.size()===1&&be.text()===fe.text()&&$.insert("a",":first-child").attr({"xlink:xlink:href":be.attr("xlink:href"),"xlink:xlink:show":be.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(X.node());var ke=$.select(".annotation-text-math-group"),ze=!ke.empty(),ve=t.bBox((ze?ke:fe).node()),oe=ve.width,ie=ve.height,he=v.width||oe,Se=v.height||ie,ye=Math.round(he+2*Z),we=Math.round(Se+2*Z);function Me(ut,et){return et==="auto"&&(et=ut<.3333333333333333?"left":ut>.6666666666666666?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[et]}for(var Oe=!1,Ie=["x","y"],de=0;de<Ie.length;de++){var _e,Ae,Pe,Ee,Fe,Ve=Ie[de],Ye=v[Ve+"ref"]||Ve,tt=v["a"+Ve+"ref"],nt={x:m,y:_}[Ve],ht=(W+(Ve==="x"?0:-90))*Math.PI/180,vt=ye*Math.cos(ht),pt=we*Math.sin(ht),Qe=Math.abs(vt)+Math.abs(pt),Ke=v[Ve+"anchor"],Mt=v[Ve+"shift"]*(Ve==="x"?1:-1),Ot=N[Ve],Pt=f.getRefType(Ye);if(nt&&Pt!=="domain"){var St=nt.r2fraction(v[Ve]);(St<0||St>1)&&(tt===Ye?((St=nt.r2fraction(v["a"+Ve]))<0||St>1)&&(Oe=!0):Oe=!0),_e=nt._offset+nt.r2p(v[Ve]),Ee=.5}else{var He=Pt==="domain";Ve==="x"?(Pe=v[Ve],_e=He?nt._offset+nt._length*Pe:_e=E.l+E.w*Pe):(Pe=1-v[Ve],_e=He?nt._offset+nt._length*Pe:_e=E.t+E.h*Pe),Ee=v.showarrow?.5:Pe}if(v.showarrow){Ot.head=_e;var We=v["a"+Ve];if(Fe=vt*Me(.5,v.xanchor)-pt*Me(.5,v.yanchor),tt===Ye){var Be=f.getRefType(tt);Be==="domain"?(Ve==="y"&&(We=1-We),Ot.tail=nt._offset+nt._length*We):Be==="paper"?Ve==="y"?(We=1-We,Ot.tail=E.t+E.h*We):Ot.tail=E.l+E.w*We:Ot.tail=nt._offset+nt.r2p(We),Ae=Fe}else Ot.tail=_e+We,Ae=Fe+We;Ot.text=Ot.tail+Fe;var Ge=w[Ve==="x"?"width":"height"];if(Ye==="paper"&&(Ot.head=T.constrain(Ot.head,1,Ge-1)),tt==="pixel"){var ot=-Math.max(Ot.tail-3,Ot.text),it=Math.min(Ot.tail+3,Ot.text)-Ge;ot>0?(Ot.tail+=ot,Ot.text+=ot):it>0&&(Ot.tail-=it,Ot.text-=it)}Ot.tail+=Mt,Ot.head+=Mt}else Ae=Fe=Qe*Me(Ee,Ke),Ot.text=_e+Fe;Ot.text+=Mt,Fe+=Mt,Ae+=Mt,v["_"+Ve+"padplus"]=Qe/2+Ae,v["_"+Ve+"padminus"]=Qe/2-Ae,v["_"+Ve+"size"]=Qe,v["_"+Ve+"shift"]=Fe}if(Oe)$.remove();else{var dt=0,gt=0;if(v.align!=="left"&&(dt=(he-oe)*(v.align==="center"?.5:1)),v.valign!=="top"&&(gt=(Se-ie)*(v.valign==="middle"?.5:1)),ze)ke.select("svg").attr({x:Z+dt-1,y:Z+gt}).call(t.setClipUrl,te?I:null,p);else{var je=Z+gt-ve.top,Re=Z+dt-ve.left;fe.call(n.positionText,Re,je).call(t.setClipUrl,te?I:null,p)}ae.select("rect").call(t.setRect,Z,Z,he,Se),X.call(t.setRect,K/2,K/2,ye-K,we-K),$.call(t.setTranslate,Math.round(N.x.text-ye/2),Math.round(N.y.text-we/2)),U.attr({transform:"rotate("+W+","+N.x.text+","+N.y.text+")"});var rt,ct=function(ut,et){F.selectAll(".annotation-arrow-g").remove();var xt=N.x.head,mt=N.y.head,Tt=N.x.tail+ut,yt=N.y.tail+et,bt=N.x.text+ut,zt=N.y.text+et,Ut=T.rotationXYMatrix(W,bt,zt),en=T.apply2DTransform(Ut),an=T.apply2DTransform2(Ut),rn=+X.attr("width"),qt=+X.attr("height"),Kt=bt-.5*rn,xn=Kt+rn,on=zt-.5*qt,Xt=on+qt,ln=[[Kt,on,Kt,Xt],[Kt,Xt,xn,Xt],[xn,Xt,xn,on],[xn,on,Kt,on]].map(an);if(!ln.reduce(function(Yn,Xn){return Yn^!!T.segmentsIntersect(xt,mt,xt+1e6,mt+1e6,Xn[0],Xn[1],Xn[2],Xn[3])},!1)){ln.forEach(function(Yn){var Xn=T.segmentsIntersect(Tt,yt,xt,mt,Yn[0],Yn[1],Yn[2],Yn[3]);Xn&&(Tt=Xn.x,yt=Xn.y)});var Jt=v.arrowwidth,tn=v.arrowcolor,wn=v.arrowside,mn=F.append("g").style({opacity:o.opacity(tn)}).classed("annotation-arrow-g",!0),Cn=mn.append("path").attr("d","M"+Tt+","+yt+"L"+xt+","+mt).style("stroke-width",Jt+"px").call(o.stroke,o.rgb(tn));if(u(Cn,wn,v),C.annotationPosition&&Cn.node().parentNode&&!y){var yn=xt,Mn=mt;if(v.standoff){var zn=Math.sqrt(Math.pow(xt-Tt,2)+Math.pow(mt-yt,2));yn+=v.standoff*(Tt-xt)/zn,Mn+=v.standoff*(yt-mt)/zn}var Wn,sr,Fn=mn.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Tt-yn)+","+(yt-Mn),transform:b(yn,Mn)}).style("stroke-width",Jt+6+"px").call(o.stroke,"rgba(0,0,0,0)").call(o.fill,"rgba(0,0,0,0)");a.init({element:Fn.node(),gd:p,prepFn:function(){var Yn=t.getTranslate($);Wn=Yn.x,sr=Yn.y,m&&m.autorange&&P(m._name+".autorange",!0),_&&_.autorange&&P(_._name+".autorange",!0)},moveFn:function(Yn,Xn){var rr=en(Wn,sr),Yt=rr[0]+Yn,$t=rr[1]+Xn;$.call(t.setTranslate,Yt,$t),z("x",c(m,Yn,"x",E,v)),z("y",c(_,Xn,"y",E,v)),v.axref===v.xref&&z("ax",c(m,Yn,"ax",E,v)),v.ayref===v.yref&&z("ay",c(_,Xn,"ay",E,v)),mn.attr("transform",b(Yn,Xn)),U.attr({transform:"rotate("+W+","+Yt+","+$t+")"})},doneFn:function(){k.call("_guiRelayout",p,j());var Yn=document.querySelector(".js-notes-box-panel");Yn&&Yn.redraw(Yn.selectedObj)}})}}};v.showarrow&&ct(0,0),H&&a.init({element:$.node(),gd:p,prepFn:function(){rt=U.attr("transform")},moveFn:function(ut,et){var xt="pointer";if(v.showarrow)v.axref===v.xref?z("ax",c(m,ut,"ax",E,v)):z("ax",v.ax+ut),v.ayref===v.yref?z("ay",c(_,et,"ay",E.w,v)):z("ay",v.ay+et),ct(ut,et);else{if(y)return;var mt,Tt;if(m)mt=c(m,ut,"x",E,v);else{var yt=v._xsize/E.w,bt=v.x+(v._xshift-v.xshift)/E.w-yt/2;mt=a.align(bt+ut/E.w,yt,0,1,v.xanchor)}if(_)Tt=c(_,et,"y",E,v);else{var zt=v._ysize/E.h,Ut=v.y-(v._yshift+v.yshift)/E.h-zt/2;Tt=a.align(Ut-et/E.h,zt,0,1,v.yanchor)}z("x",mt),z("y",Tt),m&&_||(xt=a.getCursor(m?.5:mt,_?.5:Tt,v.xanchor,v.yanchor))}U.attr({transform:b(ut,et)+rt}),r($,xt)},clickFn:function(ut,et){v.captureevents&&p.emit("plotly_clickannotation",pe(et))},doneFn:function(){r($),k.call("_guiRelayout",p,j());var ut=document.querySelector(".js-notes-box-panel");ut&&ut.redraw(ut.selectedObj)}})}}}ee.exports={draw:function(p){var v=p._fullLayout;v._infolayer.selectAll(".annotation").remove();for(var g=0;g<v.annotations.length;g++)v.annotations[g].visible&&h(p,g);return s.previousPromises(p)},drawOne:h,drawRaw:x}},33652:function(ee,R,e){var M=e(33428),k=e(76308),s=e(72196),T=e(3400),b=T.strScale,f=T.strRotate,o=T.strTranslate;ee.exports=function(t,i,n){var r,a,l,u,h=t.node(),c=s[n.arrowhead||0],x=s[n.startarrowhead||0],p=(n.arrowwidth||1)*(n.arrowsize||1),v=(n.arrowwidth||1)*(n.startarrowsize||1),g=i.indexOf("start")>=0,y=i.indexOf("end")>=0,m=c.backoff*p+n.standoff,_=x.backoff*v+n.startstandoff;if(h.nodeName==="line"){r={x:+t.attr("x1"),y:+t.attr("y1")},a={x:+t.attr("x2"),y:+t.attr("y2")};var d=r.x-a.x,S=r.y-a.y;if(u=(l=Math.atan2(S,d))+Math.PI,m&&_&&m+_>Math.sqrt(d*d+S*S))return void F();if(m){if(m*m>d*d+S*S)return void F();var w=m*Math.cos(l),E=m*Math.sin(l);a.x+=w,a.y+=E,t.attr({x2:a.x,y2:a.y})}if(_){if(_*_>d*d+S*S)return void F();var C=_*Math.cos(l),O=_*Math.sin(l);r.x-=C,r.y-=O,t.attr({x1:r.x,y1:r.y})}}else if(h.nodeName==="path"){var P=h.getTotalLength(),z="";if(P<m+_)return void F();var j=h.getPointAtLength(0),I=h.getPointAtLength(.1);l=Math.atan2(j.y-I.y,j.x-I.x),r=h.getPointAtLength(Math.min(_,P)),z="0px,"+_+"px,";var N=h.getPointAtLength(P),W=h.getPointAtLength(P-.1);u=Math.atan2(N.y-W.y,N.x-W.x),a=h.getPointAtLength(Math.max(0,P-m)),z+=P-(z?_+m:m)+"px,"+P+"px",t.style("stroke-dasharray",z)}function F(){t.style("stroke-dasharray","0px,100px")}function U(H,ne,$,K){H.path&&(H.noRotate&&($=0),M.select(h.parentNode).append("path").attr({class:t.attr("class"),d:H.path,transform:o(ne.x,ne.y)+f(180*$/Math.PI)+b(K)}).style({fill:k.rgb(n.arrowcolor),"stroke-width":0}))}g&&U(x,r,l,v),y&&U(c,a,u,p)}},79180:function(ee,R,e){var M=e(23816),k=e(42300);ee.exports={moduleType:"component",name:"annotations",layoutAttributes:e(13916),supplyLayoutDefaults:e(45216),includeBasePlot:e(36632)("annotations"),calcAutorange:e(90272),draw:M.draw,drawOne:M.drawOne,drawRaw:M.drawRaw,hasClickToShow:k.hasClickToShow,onClick:k.onClick,convertCoords:e(26828)}},45899:function(ee,R,e){var M=e(13916),k=e(67824).overrideAll,s=e(31780).templatedArray;ee.exports=k(s("annotation",{visible:M.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:M.xanchor,xshift:M.xshift,yanchor:M.yanchor,yshift:M.yshift,text:M.text,textangle:M.textangle,font:M.font,width:M.width,height:M.height,opacity:M.opacity,align:M.align,valign:M.valign,bgcolor:M.bgcolor,bordercolor:M.bordercolor,borderpad:M.borderpad,borderwidth:M.borderwidth,showarrow:M.showarrow,arrowcolor:M.arrowcolor,arrowhead:M.arrowhead,startarrowhead:M.startarrowhead,arrowside:M.arrowside,arrowsize:M.arrowsize,startarrowsize:M.startarrowsize,arrowwidth:M.arrowwidth,standoff:M.standoff,startstandoff:M.startstandoff,hovertext:M.hovertext,hoverlabel:M.hoverlabel,captureevents:M.captureevents}),"calc","from-root")},42456:function(ee,R,e){var M=e(3400),k=e(54460);function s(T,b){var f=b.fullSceneLayout.domain,o=b.fullLayout._size,t={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};T._xa={},M.extendFlat(T._xa,t),k.setConvert(T._xa),T._xa._offset=o.l+f.x[0]*o.w,T._xa.l2p=function(){return .5*(1+T._pdata[0]/T._pdata[3])*o.w*(f.x[1]-f.x[0])},T._ya={},M.extendFlat(T._ya,t),k.setConvert(T._ya),T._ya._offset=o.t+(1-f.y[1])*o.h,T._ya.l2p=function(){return .5*(1-T._pdata[1]/T._pdata[3])*o.h*(f.y[1]-f.y[0])}}ee.exports=function(T){for(var b=T.fullSceneLayout.annotations,f=0;f<b.length;f++)s(b[f],T);T.fullLayout._infolayer.selectAll(".annotation-"+T.id).remove()}},52808:function(ee,R,e){var M=e(3400),k=e(54460),s=e(51272),T=e(87192),b=e(45899);function f(o,t,i,n){function r(l,u){return M.coerce(o,t,b,l,u)}function a(l){var u=l+"axis",h={_fullLayout:{}};return h._fullLayout[u]=i[u],k.coercePosition(t,h,r,l,l,.5)}r("visible")&&(T(o,t,n.fullLayout,r),a("x"),a("y"),a("z"),M.noneOrAll(o,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",r("xanchor"),r("yanchor"),r("xshift"),r("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",r("ax",-10),r("ay",-30),M.noneOrAll(o,t,["ax","ay"])))}ee.exports=function(o,t,i){s(o,t,{name:"annotations",handleItemDefaults:f,fullLayout:i.fullLayout})}},71836:function(ee,R,e){var M=e(23816).drawRaw,k=e(94424),s=["x","y","z"];ee.exports=function(T){for(var b=T.fullSceneLayout,f=T.dataScale,o=b.annotations,t=0;t<o.length;t++){for(var i=o[t],n=!1,r=0;r<3;r++){var a=s[r],l=i[a],u=b[a+"axis"].r2fraction(l);if(u<0||u>1){n=!0;break}}n?T.fullLayout._infolayer.select(".annotation-"+T.id+'[data-index="'+t+'"]').remove():(i._pdata=k(T.glplot.cameraParams,[b.xaxis.r2l(i.x)*f[0],b.yaxis.r2l(i.y)*f[1],b.zaxis.r2l(i.z)*f[2]]),M(T.graphDiv,i,t,T.id,i._xa,i._ya))}}},56864:function(ee,R,e){var M=e(24040),k=e(3400);ee.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e(45899)}}},layoutAttributes:e(45899),handleDefaults:e(52808),includeBasePlot:function(s,T){var b=M.subplotsRegistry.gl3d;if(b)for(var f=b.attrRegex,o=Object.keys(s),t=0;t<o.length;t++){var i=o[t];f.test(i)&&(s[i].annotations||[]).length&&(k.pushUnique(T._basePlotModules,b),k.pushUnique(T._subplots.gl3d,i))}},convert:e(42456),draw:e(71836)}},54976:function(ee,R,e){ee.exports=e(38700),e(15168),e(67020),e(89792),e(55668),e(65168),e(2084),e(26368),e(24747),e(65616),e(30632),e(73040),e(1104),e(51456),e(4592),e(45348)},97776:function(ee,R,e){var M=e(54976),k=e(3400),s=e(39032),T=s.EPOCHJD,b=s.ONEDAY,f={valType:"enumerated",values:k.sortObjectKeys(M.calendars),editType:"calc",dflt:"gregorian"},o=function(p,v,g,y){var m={};return m[g]=f,k.coerce(p,v,m,g,y)},t="##",i={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:t,w:t,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},n={};function r(p){var v=n[p];return v||(n[p]=M.instance(p))}function a(p){return k.extendFlat({},f,{description:p})}function l(p){return"Sets the calendar system to use with `"+p+"` date data."}var u={xcalendar:a(l("x"))},h=k.extendFlat({},u,{ycalendar:a(l("y"))}),c=k.extendFlat({},h,{zcalendar:a(l("z"))}),x=a(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));ee.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:h,bar:h,box:h,heatmap:h,contour:h,histogram:h,histogram2d:h,histogram2dcontour:h,scatter3d:c,surface:c,mesh3d:c,scattergl:h,ohlc:u,candlestick:u},layout:{calendar:a(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:x},yaxis:{calendar:x},scene:{xaxis:{calendar:x},yaxis:{calendar:x},zaxis:{calendar:x}},polar:{radialaxis:{calendar:x}}},transforms:{filter:{valuecalendar:a(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:a(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:f,handleDefaults:o,handleTraceDefaults:function(p,v,g,y){for(var m=0;m<g.length;m++)o(p,v,g[m]+"calendar",y.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:r,worldCalFmt:function(p,v,g){for(var y,m,_,d,S,w=Math.floor((v+.05)/b)+T,E=r(g).fromJD(w),C=0;(C=p.indexOf("%",C))!==-1;)(y=p.charAt(C+1))==="0"||y==="-"||y==="_"?(_=3,m=p.charAt(C+2),y==="_"&&(y="-")):(m=y,y="0",_=2),(d=i[m])?(S=d===t?t:E.formatDate(d[y]),p=p.substr(0,C)+S+p.substr(C+_),C+=S.length):C+=_;return p}}},22548:function(ee,R){R.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],R.defaultLine="#444",R.lightLine="#eee",R.background="#fff",R.borderLine="#BEC8D9",R.lightFraction=90.9090909090909},76308:function(ee,R,e){var M=e(49760),k=e(38248),s=e(38116).isTypedArray,T=ee.exports={},b=e(22548);T.defaults=b.defaults;var f=T.defaultLine=b.defaultLine;T.lightLine=b.lightLine;var o=T.background=b.background;function t(i){if(k(i)||typeof i!="string")return i;var n=i.trim();if(n.substr(0,3)!=="rgb")return i;var r=n.match(/^rgba?\s*\(([^()]*)\)$/);if(!r)return i;var a=r[1].trim().split(/\s*[\s,]\s*/),l=n.charAt(3)==="a"&&a.length===4;if(!l&&a.length!==3)return i;for(var u=0;u<a.length;u++){if(!a[u].length||(a[u]=Number(a[u]),!(a[u]>=0)))return i;if(u===3)a[u]>1&&(a[u]=1);else if(a[u]>=1)return i}var h=Math.round(255*a[0])+", "+Math.round(255*a[1])+", "+Math.round(255*a[2]);return l?"rgba("+h+", "+a[3]+")":"rgb("+h+")"}T.tinyRGB=function(i){var n=i.toRgb();return"rgb("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+")"},T.rgb=function(i){return T.tinyRGB(M(i))},T.opacity=function(i){return i?M(i).getAlpha():0},T.addOpacity=function(i,n){var r=M(i).toRgb();return"rgba("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+", "+n+")"},T.combine=function(i,n){var r=M(i).toRgb();if(r.a===1)return M(i).toRgbString();var a=M(n||o).toRgb(),l=a.a===1?a:{r:255*(1-a.a)+a.r*a.a,g:255*(1-a.a)+a.g*a.a,b:255*(1-a.a)+a.b*a.a},u={r:l.r*(1-r.a)+r.r*r.a,g:l.g*(1-r.a)+r.g*r.a,b:l.b*(1-r.a)+r.b*r.a};return M(u).toRgbString()},T.interpolate=function(i,n,r){var a=M(i).toRgb(),l=M(n).toRgb(),u={r:r*a.r+(1-r)*l.r,g:r*a.g+(1-r)*l.g,b:r*a.b+(1-r)*l.b};return M(u).toRgbString()},T.contrast=function(i,n,r){var a=M(i);return a.getAlpha()!==1&&(a=M(T.combine(i,o))),(a.isDark()?n?a.lighten(n):o:r?a.darken(r):f).toString()},T.stroke=function(i,n){var r=M(n);i.style({stroke:T.tinyRGB(r),"stroke-opacity":r.getAlpha()})},T.fill=function(i,n){var r=M(n);i.style({fill:T.tinyRGB(r),"fill-opacity":r.getAlpha()})},T.clean=function(i){if(i&&typeof i=="object"){var n,r,a,l,u=Object.keys(i);for(n=0;n<u.length;n++)if(l=i[a=u[n]],a.substr(a.length-5)==="color")if(Array.isArray(l))for(r=0;r<l.length;r++)l[r]=t(l[r]);else i[a]=t(l);else if(a.substr(a.length-10)==="colorscale"&&Array.isArray(l))for(r=0;r<l.length;r++)Array.isArray(l[r])&&(l[r][1]=t(l[r][1]));else if(Array.isArray(l)){var h=l[0];if(!Array.isArray(h)&&h&&typeof h=="object")for(r=0;r<l.length;r++)T.clean(l[r])}else l&&typeof l=="object"&&!s(l)&&T.clean(l)}}},42996:function(ee,R,e){var M=e(94724),k=e(25376),s=e(92880).extendFlat,T=e(67824).overrideAll;ee.exports=T({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:M.linecolor,outlinewidth:M.linewidth,bordercolor:M.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:M.minor.tickmode,nticks:M.nticks,tick0:M.tick0,dtick:M.dtick,tickvals:M.tickvals,ticktext:M.ticktext,ticks:s({},M.ticks,{dflt:""}),ticklabeloverflow:s({},M.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:M.ticklen,tickwidth:M.tickwidth,tickcolor:M.tickcolor,ticklabelstep:M.ticklabelstep,showticklabels:M.showticklabels,labelalias:M.labelalias,tickfont:k({}),tickangle:M.tickangle,tickformat:M.tickformat,tickformatstops:M.tickformatstops,tickprefix:M.tickprefix,showtickprefix:M.showtickprefix,ticksuffix:M.ticksuffix,showticksuffix:M.showticksuffix,separatethousands:M.separatethousands,exponentformat:M.exponentformat,minexponent:M.minexponent,showexponent:M.showexponent,title:{text:{valType:"string"},font:k({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:k({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},63964:function(ee){ee.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},64013:function(ee,R,e){var M=e(3400),k=e(31780),s=e(26332),T=e(25404),b=e(95936),f=e(42568),o=e(42996);ee.exports=function(t,i,n){var r=k.newContainer(i,"colorbar"),a=t.colorbar||{};function l(z,j){return M.coerce(a,r,o,z,j)}var u=n.margin||{t:0,b:0,l:0,r:0},h=n.width-u.l-u.r,c=n.height-u.t-u.b,x=l("orientation")==="v",p=l("thicknessmode");l("thickness",p==="fraction"?30/(x?h:c):30);var v=l("lenmode");l("len",v==="fraction"?1:x?c:h);var g,y,m,_=l("yref")==="paper",d=l("xref")==="paper",S="left";x?(m="middle",S=d?"left":"right",g=d?1.02:1,y=.5):(m=_?"bottom":"top",S="center",g=.5,y=_?1.02:1),M.coerce(a,r,{x:{valType:"number",min:d?-2:0,max:d?3:1,dflt:g}},"x"),M.coerce(a,r,{y:{valType:"number",min:_?-2:0,max:_?3:1,dflt:y}},"y"),l("xanchor",S),l("xpad"),l("yanchor",m),l("ypad"),M.noneOrAll(a,r,["x","y"]),l("outlinecolor"),l("outlinewidth"),l("bordercolor"),l("borderwidth"),l("bgcolor");var w=M.coerce(a,r,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:x?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");l("ticklabeloverflow",w.indexOf("inside")!==-1?"hide past domain":"hide past div"),s(a,r,l,"linear");var E=n.font,C={noAutotickangles:!0,noTicklabelshift:!0,noTicklabelstandoff:!0,outerTicks:!1,font:E};w.indexOf("inside")!==-1&&(C.bgColor="black"),f(a,r,l,"linear",C),b(a,r,l,"linear",C),T(a,r,l,"linear",C),l("title.text",n._dfltTitle.colorbar);var O=r.showticklabels?r.tickfont:E,P=M.extendFlat({},E,{family:O.family,size:M.bigFont(O.size)});M.coerceFont(l,"title.font",P),l("title.side",x?"top":"right")}},37848:function(ee,R,e){var M=e(33428),k=e(49760),s=e(7316),T=e(24040),b=e(54460),f=e(86476),o=e(3400),t=o.strTranslate,i=e(92880).extendFlat,n=e(93972),r=e(43616),a=e(76308),l=e(81668),u=e(72736),h=e(94288).flipScale,c=e(28336),x=e(37668),p=e(94724),v=e(84284),g=v.LINE_SPACING,y=v.FROM_TL,m=v.FROM_BR,_=e(63964).cn;ee.exports={draw:function(d){var S=d._fullLayout._infolayer.selectAll("g."+_.colorbar).data(function(w){var E,C,O,P,z=w._fullLayout,j=w.calcdata,I=[];function N(te){return i(te,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function W(){typeof P.calc=="function"?P.calc(w,O,E):(E._fillgradient=C.reversescale?h(C.colorscale):C.colorscale,E._zrange=[C[P.min],C[P.max]])}for(var F=0;F<j.length;F++){var U=j[F];if((O=U[0].trace)._module){var H=O._module.colorbar;if(O.visible===!0&&H)for(var ne=Array.isArray(H),$=ne?H:[H],K=0;K<$.length;K++){var Q=(P=$[K]).container;(C=Q?O[Q]:O)&&C.showscale&&((E=N(C.colorbar))._id="cb"+O.uid+(ne&&Q?"-"+Q:""),E._traceIndex=O.index,E._propPrefix=(Q?Q+".":"")+"colorbar.",E._meta=O._meta,W(),I.push(E))}}}for(var Z in z._colorAxes)if((C=z[Z]).showscale){var X=z._colorAxes[Z];(E=N(C.colorbar))._id="cb"+Z,E._propPrefix=Z+".colorbar.",E._meta=z._meta,P={min:"cmin",max:"cmax"},X[0]!=="heatmap"&&(O=X[1],P.calc=O._module.colorbar.calc),W(),I.push(E)}return I}(d),function(w){return w._id});S.enter().append("g").attr("class",function(w){return w._id}).classed(_.colorbar,!0),S.each(function(w){var E=M.select(this);o.ensureSingle(E,"rect",_.cbbg),o.ensureSingle(E,"g",_.cbfills),o.ensureSingle(E,"g",_.cblines),o.ensureSingle(E,"g",_.cbaxis,function(O){O.classed(_.crisp,!0)}),o.ensureSingle(E,"g",_.cbtitleunshift,function(O){O.append("g").classed(_.cbtitle,!0)}),o.ensureSingle(E,"rect",_.cboutline);var C=function(O,P,z){var j=P.orientation==="v",I=P.len,N=P.lenmode,W=P.thickness,F=P.thicknessmode,U=P.outlinewidth,H=P.borderwidth,ne=P.bgcolor,$=P.xanchor,K=P.yanchor,Q=P.xpad,Z=P.ypad,X=P.x,te=j?P.y:1-P.y,ae=P.yref==="paper",se=P.xref==="paper",ce=z._fullLayout,fe=ce._size,pe=P._fillcolor,ge=P._line,me=P.title,be=me.side,ke=P._zrange||M.extent((typeof pe=="function"?pe:ge.color).domain()),ze=typeof ge.color=="function"?ge.color:function(){return ge.color},ve=typeof pe=="function"?pe:function(){return pe},oe=P._levels,ie=function(Be,Ge,ot){var it,dt,gt=Ge._levels,je=[],Re=[],rt=gt.end+gt.size/100,ct=gt.size,ut=1.001*ot[0]-.001*ot[1],et=1.001*ot[1]-.001*ot[0];for(dt=0;dt<1e5&&(it=gt.start+dt*ct,!(ct>0?it>=rt:it<=rt));dt++)it>ut&&it<et&&je.push(it);if(Ge._fillgradient)Re=[0];else if(typeof Ge._fillcolor=="function"){var xt=Ge._filllevels;if(xt)for(rt=xt.end+xt.size/100,ct=xt.size,dt=0;dt<1e5&&(it=xt.start+dt*ct,!(ct>0?it>=rt:it<=rt));dt++)it>ot[0]&&it<ot[1]&&Re.push(it);else(Re=je.map(function(mt){return mt-gt.size/2})).push(Re[Re.length-1]+gt.size)}else Ge._fillcolor&&typeof Ge._fillcolor=="string"&&(Re=[0]);return gt.size<0&&(je.reverse(),Re.reverse()),{line:je,fill:Re}}(0,P,ke),he=ie.fill,Se=ie.line,ye=Math.round(W*(F==="fraction"?j?fe.w:fe.h:1)),we=ye/(j?fe.w:fe.h),Me=Math.round(I*(N==="fraction"?j?fe.h:fe.w:1)),Oe=Me/(j?fe.h:fe.w),Ie=se?fe.w:z._fullLayout.width,de=ae?fe.h:z._fullLayout.height,_e=Math.round(j?X*Ie+Q:te*de+Z),Ae={center:.5,right:1}[$]||0,Pe={top:1,middle:.5}[K]||0,Ee=j?X-Ae*we:te-Pe*we,Fe=j?te-Pe*Oe:X-Ae*Oe,Ve=Math.round(j?de*(1-Fe):Ie*Fe);P._lenFrac=Oe,P._thickFrac=we,P._uFrac=Ee,P._vFrac=Fe;var Ye=P._axis=function(Be,Ge,ot){var it=Be._fullLayout,dt=Ge.orientation==="v",gt={type:"linear",range:ot,tickmode:Ge.tickmode,nticks:Ge.nticks,tick0:Ge.tick0,dtick:Ge.dtick,tickvals:Ge.tickvals,ticktext:Ge.ticktext,ticks:Ge.ticks,ticklen:Ge.ticklen,tickwidth:Ge.tickwidth,tickcolor:Ge.tickcolor,showticklabels:Ge.showticklabels,labelalias:Ge.labelalias,ticklabelposition:Ge.ticklabelposition,ticklabeloverflow:Ge.ticklabeloverflow,ticklabelstep:Ge.ticklabelstep,tickfont:Ge.tickfont,tickangle:Ge.tickangle,tickformat:Ge.tickformat,exponentformat:Ge.exponentformat,minexponent:Ge.minexponent,separatethousands:Ge.separatethousands,showexponent:Ge.showexponent,showtickprefix:Ge.showtickprefix,tickprefix:Ge.tickprefix,showticksuffix:Ge.showticksuffix,ticksuffix:Ge.ticksuffix,title:Ge.title,showline:!0,anchor:"free",side:dt?"right":"bottom",position:1},je=dt?"y":"x",Re={type:"linear",_id:je+Ge._id},rt={letter:je,font:it.font,noAutotickangles:je==="y",noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:it.calendar};function ct(ut,et){return o.coerce(gt,Re,p,ut,et)}return c(gt,Re,ct,rt,it),x(gt,Re,ct,rt),Re}(z,P,ke);Ye.position=we+(j?X+Q/fe.w:te+Z/fe.h);var tt=["top","bottom"].indexOf(be)!==-1;if(j&&tt&&(Ye.title.side=be,Ye.titlex=X+Q/fe.w,Ye.titley=Fe+(me.side==="top"?Oe-Z/fe.h:Z/fe.h)),j||tt||(Ye.title.side=be,Ye.titley=te+Z/fe.h,Ye.titlex=Fe+Q/fe.w),ge.color&&P.tickmode==="auto"){Ye.tickmode="linear",Ye.tick0=oe.start;var nt=oe.size,ht=o.constrain(Me/50,4,15)+1,vt=(ke[1]-ke[0])/((P.nticks||ht)*nt);if(vt>1){var pt=Math.pow(10,Math.floor(Math.log(vt)/Math.LN10));nt*=pt*o.roundUp(vt/pt,[2,5,10]),(Math.abs(oe.start)/oe.size+1e-6)%1<2e-6&&(Ye.tick0=0)}Ye.dtick=nt}Ye.domain=j?[Fe+Z/fe.h,Fe+Oe-Z/fe.h]:[Fe+Q/fe.w,Fe+Oe-Q/fe.w],Ye.setScale(),O.attr("transform",t(Math.round(fe.l),Math.round(fe.t)));var Qe,Ke=O.select("."+_.cbtitleunshift).attr("transform",t(-Math.round(fe.l),-Math.round(fe.t))),Mt=Ye.ticklabelposition,Ot=Ye.title.font.size,Pt=O.select("."+_.cbaxis),St=0,He=0;function We(Be,Ge){var ot={propContainer:Ye,propName:P._propPrefix+"title",traceIndex:P._traceIndex,_meta:P._meta,placeholder:ce._dfltTitle.colorbar,containerGroup:O.select("."+_.cbtitle)},it=Be.charAt(0)==="h"?Be.substr(1):"h"+Be;O.selectAll("."+it+",."+it+"-math-group").remove(),l.draw(z,Be,i(ot,Ge||{}))}return o.syncOrAsync([s.previousPromises,function(){var Be,Ge;(j&&tt||!j&&!tt)&&(be==="top"&&(Be=Q+fe.l+Ie*X,Ge=Z+fe.t+de*(1-Fe-Oe)+3+.75*Ot),be==="bottom"&&(Be=Q+fe.l+Ie*X,Ge=Z+fe.t+de*(1-Fe)-3-.25*Ot),be==="right"&&(Ge=Z+fe.t+de*te+3+.75*Ot,Be=Q+fe.l+Ie*Fe),We(Ye._id+"title",{attributes:{x:Be,y:Ge,"text-anchor":j?"start":"middle"}}))},function(){if(!j&&!tt||j&&tt){var Be,Ge=O.select("."+_.cbtitle),ot=Ge.select("text"),it=[-U/2,U/2],dt=Ge.select(".h"+Ye._id+"title-math-group").node(),gt=15.6;if(ot.node()&&(gt=parseInt(ot.node().style.fontSize,10)*g),dt?(Be=r.bBox(dt),He=Be.width,(St=Be.height)>gt&&(it[1]-=(St-gt)/2)):ot.node()&&!ot.classed(_.jsPlaceholder)&&(Be=r.bBox(ot.node()),He=Be.width,St=Be.height),j){if(St){if(St+=5,be==="top")Ye.domain[1]-=St/fe.h,it[1]*=-1;else{Ye.domain[0]+=St/fe.h;var je=u.lineCount(ot);it[1]+=(1-je)*gt}Ge.attr("transform",t(it[0],it[1])),Ye.setScale()}}else He&&(be==="right"&&(Ye.domain[0]+=(He+Ot/2)/fe.w),Ge.attr("transform",t(it[0],it[1])),Ye.setScale())}O.selectAll("."+_.cbfills+",."+_.cblines).attr("transform",j?t(0,Math.round(fe.h*(1-Ye.domain[1]))):t(Math.round(fe.w*Ye.domain[0]),0)),Pt.attr("transform",j?t(0,Math.round(-fe.t)):t(Math.round(-fe.l),0));var Re=O.select("."+_.cbfills).selectAll("rect."+_.cbfill).attr("style","").data(he);Re.enter().append("rect").classed(_.cbfill,!0).attr("style",""),Re.exit().remove();var rt=ke.map(Ye.c2p).map(Math.round).sort(function(mt,Tt){return mt-Tt});Re.each(function(mt,Tt){var yt=[Tt===0?ke[0]:(he[Tt]+he[Tt-1])/2,Tt===he.length-1?ke[1]:(he[Tt]+he[Tt+1])/2].map(Ye.c2p).map(Math.round);j&&(yt[1]=o.constrain(yt[1]+(yt[1]>yt[0])?1:-1,rt[0],rt[1]));var bt=M.select(this).attr(j?"x":"y",_e).attr(j?"y":"x",M.min(yt)).attr(j?"width":"height",Math.max(ye,2)).attr(j?"height":"width",Math.max(M.max(yt)-M.min(yt),2));if(P._fillgradient)r.gradient(bt,z,P._id,j?"vertical":"horizontalreversed",P._fillgradient,"fill");else{var zt=ve(mt).replace("e-","");bt.attr("fill",k(zt).toHexString())}});var ct=O.select("."+_.cblines).selectAll("path."+_.cbline).data(ge.color&&ge.width?Se:[]);ct.enter().append("path").classed(_.cbline,!0),ct.exit().remove(),ct.each(function(mt){var Tt=_e,yt=Math.round(Ye.c2p(mt))+ge.width/2%1;M.select(this).attr("d","M"+(j?Tt+","+yt:yt+","+Tt)+(j?"h":"v")+ye).call(r.lineGroupStyle,ge.width,ze(mt),ge.dash)}),Pt.selectAll("g."+Ye._id+"tick,path").remove();var ut=_e+ye+(U||0)/2-(P.ticks==="outside"?1:0),et=b.calcTicks(Ye),xt=b.getTickSigns(Ye)[2];return b.drawTicks(z,Ye,{vals:Ye.ticks==="inside"?b.clipEnds(Ye,et):et,layer:Pt,path:b.makeTickPath(Ye,ut,xt),transFn:b.makeTransTickFn(Ye)}),b.drawLabels(z,Ye,{vals:et,layer:Pt,transFn:b.makeTransTickLabelFn(Ye),labelFns:b.makeLabelFns(Ye,ut)})},function(){if(j&&!tt||!j&&tt){var Be,Ge,ot=Ye.position||0,it=Ye._offset+Ye._length/2;if(be==="right")Ge=it,Be=fe.l+Ie*ot+10+Ot*(Ye.showticklabels?1:.5);else if(Be=it,be==="bottom"&&(Ge=fe.t+de*ot+10+(Mt.indexOf("inside")===-1?Ye.tickfont.size:0)+(Ye.ticks!=="intside"&&P.ticklen||0)),be==="top"){var dt=me.text.split("<br>").length;Ge=fe.t+de*ot+10-ye-g*Ot*dt}We((j?"h":"v")+Ye._id+"title",{avoid:{selection:M.select(z).selectAll("g."+Ye._id+"tick"),side:be,offsetTop:j?0:fe.t,offsetLeft:j?fe.l:0,maxShift:j?ce.width:ce.height},attributes:{x:Be,y:Ge,"text-anchor":"middle"},transform:{rotate:j?-90:0,offset:0}})}},s.previousPromises,function(){var Be,Ge=ye+U/2;Mt.indexOf("inside")===-1&&(Be=r.bBox(Pt.node()),Ge+=j?Be.width:Be.height),Qe=Ke.select("text");var ot=0,it=j&&be==="top",dt=!j&&be==="right",gt=0;if(Qe.node()&&!Qe.classed(_.jsPlaceholder)){var je,Re=Ke.select(".h"+Ye._id+"title-math-group").node();Re&&(j&&tt||!j&&!tt)?(ot=(Be=r.bBox(Re)).width,je=Be.height):(ot=(Be=r.bBox(Ke.node())).right-fe.l-(j?_e:Ve),je=Be.bottom-fe.t-(j?Ve:_e),j||be!=="top"||(Ge+=Be.height,gt=Be.height)),dt&&(Qe.attr("transform",t(ot/2+Ot/2,0)),ot*=2),Ge=Math.max(Ge,j?ot:je)}var rt=2*(j?Q:Z)+Ge+H+U/2,ct=0;!j&&me.text&&K==="bottom"&&te<=0&&(rt+=ct=rt/2,gt+=ct),ce._hColorbarMoveTitle=ct,ce._hColorbarMoveCBTitle=gt;var ut=H+U,et=(j?_e:Ve)-ut/2-(j?Q:0),xt=(j?Ve:_e)-(j?Me:Z+gt-ct);O.select("."+_.cbbg).attr("x",et).attr("y",xt).attr(j?"width":"height",Math.max(rt-ct,2)).attr(j?"height":"width",Math.max(Me+ut,2)).call(a.fill,ne).call(a.stroke,P.bordercolor).style("stroke-width",H);var mt=dt?Math.max(ot-10,0):0;O.selectAll("."+_.cboutline).attr("x",(j?_e:Ve+Q)+mt).attr("y",(j?Ve+Z-Me:_e)+(it?St:0)).attr(j?"width":"height",Math.max(ye,2)).attr(j?"height":"width",Math.max(Me-(j?2*Z+St:2*Q+mt),2)).call(a.stroke,P.outlinecolor).style({fill:"none","stroke-width":U});var Tt=j?Ae*rt:0,yt=j?0:(1-Pe)*rt-gt;if(Tt=se?fe.l-Tt:-Tt,yt=ae?fe.t-yt:-yt,O.attr("transform",t(Tt,yt)),!j&&(H||k(ne).getAlpha()&&!k.equals(ce.paper_bgcolor,ne))){var bt=Pt.selectAll("text"),zt=bt[0].length,Ut=O.select("."+_.cbbg).node(),en=r.bBox(Ut),an=r.getTranslate(O);bt.each(function(wn,mn){var Cn=zt-1;if(mn===0||mn===Cn){var yn,Mn=r.bBox(this),zn=r.getTranslate(this);if(mn===Cn){var Wn=Mn.right+zn.x;(yn=en.right+an.x+Ve-H-2+X-Wn)>0&&(yn=0)}else if(mn===0){var sr=Mn.left+zn.x;(yn=en.left+an.x+Ve+H+2-sr)<0&&(yn=0)}yn&&(zt<3?this.setAttribute("transform","translate("+yn+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var rn={},qt=y[$],Kt=m[$],xn=y[K],on=m[K],Xt=rt-ye;j?(N==="pixels"?(rn.y=te,rn.t=Me*xn,rn.b=Me*on):(rn.t=rn.b=0,rn.yt=te+I*xn,rn.yb=te-I*on),F==="pixels"?(rn.x=X,rn.l=rt*qt,rn.r=rt*Kt):(rn.l=Xt*qt,rn.r=Xt*Kt,rn.xl=X-W*qt,rn.xr=X+W*Kt)):(N==="pixels"?(rn.x=X,rn.l=Me*qt,rn.r=Me*Kt):(rn.l=rn.r=0,rn.xl=X+I*qt,rn.xr=X-I*Kt),F==="pixels"?(rn.y=1-te,rn.t=rt*xn,rn.b=rt*on):(rn.t=Xt*xn,rn.b=Xt*on,rn.yt=te-W*xn,rn.yb=te+W*on));var ln=P.y<.5?"b":"t",Jt=P.x<.5?"l":"r";z._fullLayout._reservedMargin[P._id]={};var tn={r:ce.width-et-Tt,l:et+rn.r,b:ce.height-xt-yt,t:xt+rn.b};se&&ae?s.autoMargin(z,P._id,rn):se?z._fullLayout._reservedMargin[P._id][ln]=tn[ln]:ae||j?z._fullLayout._reservedMargin[P._id][Jt]=tn[Jt]:z._fullLayout._reservedMargin[P._id][ln]=tn[ln]}],z)}(E,w,d);C&&C.then&&(d._promises||[]).push(C),d._context.edits.colorbarPosition&&function(O,P,z){var j,I,N,W=P.orientation==="v",F=z._fullLayout._size;f.init({element:O.node(),gd:z,prepFn:function(){j=O.attr("transform"),n(O)},moveFn:function(U,H){O.attr("transform",j+t(U,H)),I=f.align((W?P._uFrac:P._vFrac)+U/F.w,W?P._thickFrac:P._lenFrac,0,1,P.xanchor),N=f.align((W?P._vFrac:1-P._uFrac)-H/F.h,W?P._lenFrac:P._thickFrac,0,1,P.yanchor);var ne=f.getCursor(I,N,P.xanchor,P.yanchor);n(O,ne)},doneFn:function(){if(n(O),I!==void 0&&N!==void 0){var U={};U[P._propPrefix+"x"]=I,U[P._propPrefix+"y"]=N,P._traceIndex!==void 0?T.call("_guiRestyle",z,U,P._traceIndex):T.call("_guiRelayout",z,U)}}})}(E,w,d)}),S.exit().each(function(w){s.autoMargin(d,w._id)}).remove(),S.order()}}},90553:function(ee,R,e){var M=e(3400);ee.exports=function(k){return M.isPlainObject(k.colorbar)}},55080:function(ee,R,e){ee.exports={moduleType:"component",name:"colorbar",attributes:e(42996),supplyDefaults:e(64013),draw:e(37848).draw,hasColorbar:e(90553)}},49084:function(ee,R,e){var M=e(42996),k=e(53756).counter,s=e(95376),T=e(88304).scales;function b(f){return"`"+f+"`"}s(T),ee.exports=function(f,o){f=f||"";var t,i=(o=o||{}).cLetter||"c",n=("onlyIfNumerical"in o&&o.onlyIfNumerical,"noScale"in o?o.noScale:f==="marker.line"),r="showScaleDflt"in o?o.showScaleDflt:i==="z",a=typeof o.colorscaleDflt=="string"?T[o.colorscaleDflt]:null,l=o.editTypeOverride||"",u=f?f+".":"";"colorAttr"in o?(t=o.colorAttr,o.colorAttr):b(u+(t={z:"z",c:"color"}[i]));var h=i+"auto",c=i+"min",x=i+"max",p=i+"mid",v={};v[c]=v[x]=void 0;var g={};g[h]=!1;var y={};return t==="color"&&(y.color={valType:"color",arrayOk:!0,editType:l||"style"},o.anim&&(y.color.anim=!0)),y[h]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:v},y[c]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:g},y[x]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:g},y[p]={valType:"number",dflt:null,editType:"calc",impliedEdits:v},y.colorscale={valType:"colorscale",editType:"calc",dflt:a,impliedEdits:{autocolorscale:!1}},y.autocolorscale={valType:"boolean",dflt:o.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},y.reversescale={valType:"boolean",dflt:!1,editType:"plot"},n||(y.showscale={valType:"boolean",dflt:r,editType:"calc"},y.colorbar=M),o.noColorAxis||(y.coloraxis={valType:"subplotid",regex:k("coloraxis"),dflt:null,editType:"calc"}),y}},47128:function(ee,R,e){var M=e(38248),k=e(3400),s=e(94288).extractOpts;ee.exports=function(T,b,f){var o,t=T._fullLayout,i=f.vals,n=f.containerStr,r=n?k.nestedProperty(b,n).get():b,a=s(r),l=a.auto!==!1,u=a.min,h=a.max,c=a.mid,x=function(){return k.aggNums(Math.min,null,i)},p=function(){return k.aggNums(Math.max,null,i)};u===void 0?u=x():l&&(u=r._colorAx&&M(u)?Math.min(u,x()):x()),h===void 0?h=p():l&&(h=r._colorAx&&M(h)?Math.max(h,p()):p()),l&&c!==void 0&&(h-c>c-u?u=c-(h-c):h-c<c-u&&(h=c+(c-u))),u===h&&(u-=.5,h+=.5),a._sync("min",u),a._sync("max",h),a.autocolorscale&&(o=u*h<0?t.colorscale.diverging:u>=0?t.colorscale.sequential:t.colorscale.sequentialminus,a._sync("colorscale",o))}},95504:function(ee,R,e){var M=e(3400),k=e(94288).hasColorscale,s=e(94288).extractOpts;ee.exports=function(T,b){function f(l,u){var h=l["_"+u];h!==void 0&&(l[u]=h)}function o(l,u){var h=u.container?M.nestedProperty(l,u.container).get():l;if(h)if(h.coloraxis)h._colorAx=b[h.coloraxis];else{var c=s(h),x=c.auto;(x||c.min===void 0)&&f(h,u.min),(x||c.max===void 0)&&f(h,u.max),c.autocolorscale&&f(h,"colorscale")}}for(var t=0;t<T.length;t++){var i=T[t],n=i._module.colorbar;if(n)if(Array.isArray(n))for(var r=0;r<n.length;r++)o(i,n[r]);else o(i,n);k(i,"marker.line")&&o(i,{container:"marker.line",min:"cmin",max:"cmax"})}for(var a in b._colorAxes)o(b[a],{min:"cmin",max:"cmax"})}},27260:function(ee,R,e){var M=e(38248),k=e(3400),s=e(90553),T=e(64013),b=e(88304).isValid,f=e(24040).traceIs;function o(t,i){var n=i.slice(0,i.length-1);return i?k.nestedProperty(t,n).get()||{}:t}ee.exports=function t(i,n,r,a,l){var u=l.prefix,h=l.cLetter,c="_module"in n,x=o(i,u),p=o(n,u),v=o(n._template||{},u)||{},g=function(){return delete i.coloraxis,delete n.coloraxis,t(i,n,r,a,l)};if(c){var y=r._colorAxes||{},m=a(u+"coloraxis");if(m){var _=f(n,"contour")&&k.nestedProperty(n,"contours.coloring").get()||"heatmap",d=y[m];return void(d?(d[2].push(g),d[0]!==_&&(d[0]=!1,k.warn(["Ignoring coloraxis:",m,"setting","as it is linked to incompatible colorscales."].join(" ")))):y[m]=[_,n,[g]])}}var S=x[h+"min"],w=x[h+"max"],E=M(S)&&M(w)&&S<w;a(u+h+"auto",!E)?a(u+h+"mid"):(a(u+h+"min"),a(u+h+"max"));var C,O,P=x.colorscale,z=v.colorscale;P!==void 0&&(C=!b(P)),z!==void 0&&(C=!b(z)),a(u+"autocolorscale",C),a(u+"colorscale"),a(u+"reversescale"),u!=="marker.line."&&(u&&c&&(O=s(x)),a(u+"showscale",O)&&(u&&v&&(p._template=v),T(x,p,r)))}},94288:function(ee,R,e){var M=e(33428),k=e(49760),s=e(38248),T=e(3400),b=e(76308),f=e(88304).isValid,o=["showscale","autocolorscale","colorscale","reversescale","colorbar"],t=["min","max","mid","auto"];function i(u){var h,c,x,p=u._colorAx,v=p||u,g={};for(c=0;c<o.length;c++)g[x=o[c]]=v[x];if(p)for(h="c",c=0;c<t.length;c++)g[x=t[c]]=v["c"+x];else{var y;for(c=0;c<t.length;c++)((y="c"+(x=t[c]))in v||(y="z"+x)in v)&&(g[x]=v[y]);h=y.charAt(0)}return g._sync=function(m,_){var d=t.indexOf(m)!==-1?h+m:m;v[d]=v["_"+d]=_},g}function n(u){for(var h=i(u),c=h.min,x=h.max,p=h.reversescale?r(h.colorscale):h.colorscale,v=p.length,g=new Array(v),y=new Array(v),m=0;m<v;m++){var _=p[m];g[m]=c+_[0]*(x-c),y[m]=_[1]}return{domain:g,range:y}}function r(u){for(var h=u.length,c=new Array(h),x=h-1,p=0;x>=0;x--,p++){var v=u[x];c[p]=[1-v[0],v[1]]}return c}function a(u,h){h=h||{};for(var c=u.domain,x=u.range,p=x.length,v=new Array(p),g=0;g<p;g++){var y=k(x[g]).toRgb();v[g]=[y.r,y.g,y.b,y.a]}var m,_=M.scale.linear().domain(c).range(v).clamp(!0),d=h.noNumericCheck,S=h.returnArray;return(m=d&&S?_:d?function(w){return l(_(w))}:S?function(w){return s(w)?_(w):k(w).isValid()?w:b.defaultLine}:function(w){return s(w)?l(_(w)):k(w).isValid()?w:b.defaultLine}).domain=_.domain,m.range=function(){return x},m}function l(u){var h={r:u[0],g:u[1],b:u[2],a:u[3]};return k(h).toRgbString()}ee.exports={hasColorscale:function(u,h,c){var x=h?T.nestedProperty(u,h).get()||{}:u,p=x[c||"color"];p&&p._inputArray&&(p=p._inputArray);var v=!1;if(T.isArrayOrTypedArray(p)){for(var g=0;g<p.length;g++)if(s(p[g])){v=!0;break}}return T.isPlainObject(x)&&(v||x.showscale===!0||s(x.cmin)&&s(x.cmax)||f(x.colorscale)||T.isPlainObject(x.colorbar))},extractOpts:i,extractScale:n,flipScale:r,makeColorScaleFunc:a,makeColorScaleFuncFromTrace:function(u,h){return a(n(u),h)}}},8932:function(ee,R,e){var M=e(88304),k=e(94288);ee.exports={moduleType:"component",name:"colorscale",attributes:e(49084),layoutAttributes:e(92332),supplyLayoutDefaults:e(51608),handleDefaults:e(27260),crossTraceDefaults:e(95504),calc:e(47128),scales:M.scales,defaultScale:M.defaultScale,getScale:M.get,isValidScale:M.isValid,hasColorscale:k.hasColorscale,extractOpts:k.extractOpts,extractScale:k.extractScale,flipScale:k.flipScale,makeColorScaleFunc:k.makeColorScaleFunc,makeColorScaleFuncFromTrace:k.makeColorScaleFuncFromTrace}},92332:function(ee,R,e){var M=e(92880).extendFlat,k=e(49084),s=e(88304).scales;ee.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:s.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:s.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:s.RdBu,editType:"calc"}},coloraxis:M({_isSubplotObj:!0,editType:"calc"},k("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},51608:function(ee,R,e){var M=e(3400),k=e(31780),s=e(92332),T=e(27260);ee.exports=function(b,f){function o(h,c){return M.coerce(b,f,s,h,c)}o("colorscale.sequential"),o("colorscale.sequentialminus"),o("colorscale.diverging");var t,i,n=f._colorAxes;function r(h,c){return M.coerce(t,i,s.coloraxis,h,c)}for(var a in n){var l=n[a];if(l[0])t=b[a]||{},(i=k.newContainer(f,a,"coloraxis"))._name=a,T(t,i,f,r,{prefix:"",cLetter:"c"});else{for(var u=0;u<l[2].length;u++)l[2][u]();delete f._colorAxes[a]}}}},88304:function(ee,R,e){var M=e(49760),k={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},s=k.RdBu;function T(b){var f=0;if(!Array.isArray(b)||b.length<2||!b[0]||!b[b.length-1]||+b[0][0]!=0||+b[b.length-1][0]!=1)return!1;for(var o=0;o<b.length;o++){var t=b[o];if(t.length!==2||+t[0]<f||!M(t[1]).isValid())return!1;f=+t[0]}return!0}ee.exports={scales:k,defaultScale:s,get:function(b,f){if(f||(f=s),!b)return f;function o(){try{b=k[b]||JSON.parse(b)}catch{b=f}}return typeof b=="string"&&(o(),typeof b=="string"&&o()),T(b)?b:f},isValid:function(b){return k[b]!==void 0||T(b)}}},78316:function(ee){ee.exports=function(R,e,M,k,s){var T=(R-M)/(k-M),b=T+e/(k-M),f=(T+b)/2;return s==="left"||s==="bottom"?T:s==="center"||s==="middle"?f:s==="right"||s==="top"?b:T<.6666666666666666-f?T:b>1.3333333333333333-f?b:f}},67416:function(ee,R,e){var M=e(3400),k=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];ee.exports=function(s,T,b,f){return s=b==="left"?0:b==="center"?1:b==="right"?2:M.constrain(Math.floor(3*s),0,2),T=f==="bottom"?0:f==="middle"?1:f==="top"?2:M.constrain(Math.floor(3*T),0,2),k[T][s]}},72760:function(ee,R){R.selectMode=function(e){return e==="lasso"||e==="select"},R.drawMode=function(e){return e==="drawclosedpath"||e==="drawopenpath"||e==="drawline"||e==="drawrect"||e==="drawcircle"},R.openMode=function(e){return e==="drawline"||e==="drawopenpath"},R.rectMode=function(e){return e==="select"||e==="drawline"||e==="drawrect"||e==="drawcircle"},R.freeMode=function(e){return e==="lasso"||e==="drawclosedpath"||e==="drawopenpath"},R.selectingOrDrawing=function(e){return R.freeMode(e)||R.rectMode(e)}},86476:function(ee,R,e){var M=e(29128),k=e(52264),s=e(89184),T=e(3400).removeElement,b=e(33816),f=ee.exports={};f.align=e(78316),f.getCursor=e(67416);var o=e(2616);function t(){var n=document.createElement("div");n.className="dragcover";var r=n.style;return r.position="fixed",r.left=0,r.right=0,r.top=0,r.bottom=0,r.zIndex=999999999,r.background="none",document.body.appendChild(n),n}function i(n){return M(n.changedTouches?n.changedTouches[0]:n,document.body)}f.unhover=o.wrapped,f.unhoverRaw=o.raw,f.init=function(n){var r,a,l,u,h,c,x,p,v=n.gd,g=1,y=v._context.doubleClickDelay,m=n.element;v._mouseDownTime||(v._mouseDownTime=0),m.style.pointerEvents="all",m.onmousedown=d,s?(m._ontouchstart&&m.removeEventListener("touchstart",m._ontouchstart),m._ontouchstart=d,m.addEventListener("touchstart",d,{passive:!1})):m.ontouchstart=d;var _=n.clampFn||function(E,C,O){return Math.abs(E)<O&&(E=0),Math.abs(C)<O&&(C=0),[E,C]};function d(E){v._dragged=!1,v._dragging=!0;var C=i(E);r=C[0],a=C[1],x=E.target,c=E,p=E.buttons===2||E.ctrlKey,E.clientX===void 0&&E.clientY===void 0&&(E.clientX=r,E.clientY=a),(l=new Date().getTime())-v._mouseDownTime<y?g+=1:(g=1,v._mouseDownTime=l),n.prepFn&&n.prepFn(E,r,a),k&&!p?(h=t()).style.cursor=window.getComputedStyle(m).cursor:k||(h=document,u=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(m).cursor),document.addEventListener("mouseup",w),document.addEventListener("touchend",w),n.dragmode!==!1&&(E.preventDefault(),document.addEventListener("mousemove",S),document.addEventListener("touchmove",S,{passive:!1}))}function S(E){E.preventDefault();var C=i(E),O=n.minDrag||b.MINDRAG,P=_(C[0]-r,C[1]-a,O),z=P[0],j=P[1];(z||j)&&(v._dragged=!0,f.unhover(v,E)),v._dragged&&n.moveFn&&!p&&(v._dragdata={element:m,dx:z,dy:j},n.moveFn(z,j))}function w(E){if(delete v._dragdata,n.dragmode!==!1&&(E.preventDefault(),document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S)),document.removeEventListener("mouseup",w),document.removeEventListener("touchend",w),k?T(h):u&&(h.documentElement.style.cursor=u,u=null),v._dragging){if(v._dragging=!1,new Date().getTime()-v._mouseDownTime>y&&(g=Math.max(g-1,1)),v._dragged)n.doneFn&&n.doneFn();else if(n.clickFn&&n.clickFn(g,c),!p){var C;try{C=new MouseEvent("click",E)}catch{var O=i(E);(C=document.createEvent("MouseEvents")).initMouseEvent("click",E.bubbles,E.cancelable,E.view,E.detail,E.screenX,E.screenY,O[0],O[1],E.ctrlKey,E.altKey,E.shiftKey,E.metaKey,E.button,E.relatedTarget)}x.dispatchEvent(C)}v._dragging=!1,v._dragged=!1}else v._dragged=!1}},f.coverSlip=t},2616:function(ee,R,e){var M=e(95924),k=e(91200),s=e(52200).getGraphDiv,T=e(92456),b=ee.exports={};b.wrapped=function(f,o,t){(f=s(f))._fullLayout&&k.clear(f._fullLayout._uid+T.HOVERID),b.raw(f,o,t)},b.raw=function(f,o){var t=f._fullLayout,i=f._hoverdata;o||(o={}),o.target&&!f._dragged&&M.triggerHandler(f,"plotly_beforehover",o)===!1||(t._hoverlayer.selectAll("g").remove(),t._hoverlayer.selectAll("line").remove(),t._hoverlayer.selectAll("circle").remove(),f._hoverdata=void 0,o.target&&i&&f.emit("plotly_unhover",{event:o,points:i}))}},98192:function(ee,R){R.u={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},R.c={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},43616:function(ee,R,e){var M=e(33428),k=e(3400),s=k.numberFormat,T=e(38248),b=e(49760),f=e(24040),o=e(76308),t=e(8932),i=k.strTranslate,n=e(72736),r=e(9616),a=e(84284).LINE_SPACING,l=e(13448).DESELECTDIM,u=e(43028),h=e(7152),c=e(10624).appendArrayPointValue,x=ee.exports={};function p(ve){return ve==="none"?void 0:ve}x.font=function(ve,oe){var ie=oe.variant,he=oe.style,Se=oe.weight,ye=oe.color,we=oe.size,Me=oe.family,Oe=oe.shadow,Ie=oe.lineposition,de=oe.textcase;Me&&ve.style("font-family",Me),we+1&&ve.style("font-size",we+"px"),ye&&ve.call(o.fill,ye),Se&&ve.style("font-weight",Se),he&&ve.style("font-style",he),ie&&ve.style("font-variant",ie),de&&ve.style("text-transform",p(function(_e){return v[_e]}(de))),Oe&&ve.style("text-shadow",Oe==="auto"?n.makeTextShadow(o.contrast(ye)):p(Oe)),Ie&&ve.style("text-decoration-line",p(function(_e){return _e.replace("under","underline").replace("over","overline").replace("through","line-through").split("+").join(" ")}(Ie)))};var v={normal:"none",lower:"lowercase",upper:"uppercase","word caps":"capitalize"};function g(ve,oe,ie,he){var Se=oe.fillpattern,ye=oe.fillgradient,we=Se&&x.getPatternAttr(Se.shape,0,"");if(we){var Me=x.getPatternAttr(Se.bgcolor,0,null),Oe=x.getPatternAttr(Se.fgcolor,0,null),Ie=Se.fgopacity,de=x.getPatternAttr(Se.size,0,8),_e=x.getPatternAttr(Se.solidity,0,.3),Ae=oe.uid;x.pattern(ve,"point",ie,Ae,we,de,_e,void 0,Se.fillmode,Me,Oe,Ie)}else if(ye&&ye.type!=="none"){var Pe,Ee,Fe=ye.type,Ve="scatterfill-"+oe.uid;he&&(Ve="legendfill-"+oe.uid),he||ye.start===void 0&&ye.stop===void 0?(Fe==="horizontal"&&(Fe+="reversed"),ve.call(x.gradient,ie,Ve,Fe,ye.colorscale,"fill")):(Fe==="horizontal"?(Pe={x:ye.start,y:0},Ee={x:ye.stop,y:0}):Fe==="vertical"&&(Pe={x:0,y:ye.start},Ee={x:0,y:ye.stop}),Pe.x=oe._xA.c2p(Pe.x===void 0?oe._extremes.x.min[0].val:Pe.x,!0),Pe.y=oe._yA.c2p(Pe.y===void 0?oe._extremes.y.min[0].val:Pe.y,!0),Ee.x=oe._xA.c2p(Ee.x===void 0?oe._extremes.x.max[0].val:Ee.x,!0),Ee.y=oe._yA.c2p(Ee.y===void 0?oe._extremes.y.max[0].val:Ee.y,!0),ve.call(w,ie,Ve,"linear",ye.colorscale,"fill",Pe,Ee,!0,!1))}else oe.fillcolor&&ve.call(o.fill,oe.fillcolor)}x.setPosition=function(ve,oe,ie){ve.attr("x",oe).attr("y",ie)},x.setSize=function(ve,oe,ie){ve.attr("width",oe).attr("height",ie)},x.setRect=function(ve,oe,ie,he,Se){ve.call(x.setPosition,oe,ie).call(x.setSize,he,Se)},x.translatePoint=function(ve,oe,ie,he){var Se=ie.c2p(ve.x),ye=he.c2p(ve.y);return!!(T(Se)&&T(ye)&&oe.node())&&(oe.node().nodeName==="text"?oe.attr("x",Se).attr("y",ye):oe.attr("transform",i(Se,ye)),!0)},x.translatePoints=function(ve,oe,ie){ve.each(function(he){var Se=M.select(this);x.translatePoint(he,Se,oe,ie)})},x.hideOutsideRangePoint=function(ve,oe,ie,he,Se,ye){oe.attr("display",ie.isPtWithinRange(ve,Se)&&he.isPtWithinRange(ve,ye)?null:"none")},x.hideOutsideRangePoints=function(ve,oe){if(oe._hasClipOnAxisFalse){var ie=oe.xaxis,he=oe.yaxis;ve.each(function(Se){var ye=Se[0].trace,we=ye.xcalendar,Me=ye.ycalendar,Oe=f.traceIs(ye,"bar-like")?".bartext":".point,.textpoint";ve.selectAll(Oe).each(function(Ie){x.hideOutsideRangePoint(Ie,M.select(this),ie,he,we,Me)})})}},x.crispRound=function(ve,oe,ie){return oe&&T(oe)?ve._context.staticPlot?oe:oe<1?1:Math.round(oe):ie||0},x.singleLineStyle=function(ve,oe,ie,he,Se){oe.style("fill","none");var ye=(((ve||[])[0]||{}).trace||{}).line||{},we=ie||ye.width||0,Me=Se||ye.dash||"";o.stroke(oe,he||ye.color),x.dashLine(oe,Me,we)},x.lineGroupStyle=function(ve,oe,ie,he){ve.style("fill","none").each(function(Se){var ye=(((Se||[])[0]||{}).trace||{}).line||{},we=oe||ye.width||0,Me=he||ye.dash||"";M.select(this).call(o.stroke,ie||ye.color).call(x.dashLine,Me,we)})},x.dashLine=function(ve,oe,ie){ie=+ie||0,oe=x.dashStyle(oe,ie),ve.style({"stroke-dasharray":oe,"stroke-width":ie+"px"})},x.dashStyle=function(ve,oe){oe=+oe||1;var ie=Math.max(oe,3);return ve==="solid"?ve="":ve==="dot"?ve=ie+"px,"+ie+"px":ve==="dash"?ve=3*ie+"px,"+3*ie+"px":ve==="longdash"?ve=5*ie+"px,"+5*ie+"px":ve==="dashdot"?ve=3*ie+"px,"+ie+"px,"+ie+"px,"+ie+"px":ve==="longdashdot"&&(ve=5*ie+"px,"+2*ie+"px,"+ie+"px,"+2*ie+"px"),ve},x.singleFillStyle=function(ve,oe){var ie=M.select(ve.node());g(ve,((ie.data()[0]||[])[0]||{}).trace||{},oe,!1)},x.fillGroupStyle=function(ve,oe,ie){ve.style("stroke-width",0).each(function(he){var Se=M.select(this);he[0].trace&&g(Se,he[0].trace,oe,ie)})};var y=e(71984);x.symbolNames=[],x.symbolFuncs=[],x.symbolBackOffs=[],x.symbolNeedLines={},x.symbolNoDot={},x.symbolNoFill={},x.symbolList=[],Object.keys(y).forEach(function(ve){var oe=y[ve],ie=oe.n;x.symbolList.push(ie,String(ie),ve,ie+100,String(ie+100),ve+"-open"),x.symbolNames[ie]=ve,x.symbolFuncs[ie]=oe.f,x.symbolBackOffs[ie]=oe.backoff||0,oe.needLine&&(x.symbolNeedLines[ie]=!0),oe.noDot?x.symbolNoDot[ie]=!0:x.symbolList.push(ie+200,String(ie+200),ve+"-dot",ie+300,String(ie+300),ve+"-open-dot"),oe.noFill&&(x.symbolNoFill[ie]=!0)});var m=x.symbolNames.length;function _(ve,oe,ie,he){var Se=ve%100;return x.symbolFuncs[Se](oe,ie,he)+(ve>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}x.symbolNumber=function(ve){if(T(ve))ve=+ve;else if(typeof ve=="string"){var oe=0;ve.indexOf("-open")>0&&(oe=100,ve=ve.replace("-open","")),ve.indexOf("-dot")>0&&(oe+=200,ve=ve.replace("-dot","")),(ve=x.symbolNames.indexOf(ve))>=0&&(ve+=oe)}return ve%100>=m||ve>=400?0:Math.floor(Math.max(ve,0))};var d=s("~f"),S={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};function w(ve,oe,ie,he,Se,ye,we,Me,Oe,Ie){var de,_e=Se.length;he==="linear"?de={node:"linearGradient",attrs:{x1:we.x,y1:we.y,x2:Me.x,y2:Me.y,gradientUnits:Oe?"userSpaceOnUse":"objectBoundingBox"},reversed:Ie}:he==="radial"&&(de={node:"radialGradient",reversed:Ie});for(var Ae=new Array(_e),Pe=0;Pe<_e;Pe++)de.reversed?Ae[_e-1-Pe]=[d(100*(1-Se[Pe][0])),Se[Pe][1]]:Ae[Pe]=[d(100*Se[Pe][0]),Se[Pe][1]];var Ee=oe._fullLayout,Fe="g"+Ee._uid+"-"+ie,Ve=Ee._defs.select(".gradients").selectAll("#"+Fe).data([he+Ae.join(";")],k.identity);Ve.exit().remove(),Ve.enter().append(de.node).each(function(){var Ye=M.select(this);de.attrs&&Ye.attr(de.attrs),Ye.attr("id",Fe);var tt=Ye.selectAll("stop").data(Ae);tt.exit().remove(),tt.enter().append("stop"),tt.each(function(nt){var ht=b(nt[1]);M.select(this).attr({offset:nt[0]+"%","stop-color":o.tinyRGB(ht),"stop-opacity":ht.getAlpha()})})}),ve.style(ye,K(Fe,oe)).style(ye+"-opacity",null),ve.classed("gradient_filled",!0)}x.gradient=function(ve,oe,ie,he,Se,ye){var we=S[he];return w(ve,oe,ie,we.type,Se,ye,we.start,we.stop,!1,we.reversed)},x.pattern=function(ve,oe,ie,he,Se,ye,we,Me,Oe,Ie,de,_e){var Ae=oe==="legend";Me&&(Oe==="overlay"?(Ie=Me,de=o.contrast(Ie)):(Ie=void 0,de=Me));var Pe,Ee,Fe,Ve,Ye,tt,nt,ht,vt,pt=ie._fullLayout,Qe="p"+pt._uid+"-"+he,Ke={},Mt=b(de),Ot=o.tinyRGB(Mt),Pt=_e*Mt.getAlpha();switch(Se){case"/":Pe=ye*Math.sqrt(2),Ee=ye*Math.sqrt(2),tt="path",Ke={d:Fe="M-"+Pe/4+","+Ee/4+"l"+Pe/2+",-"+Ee/2+"M0,"+Ee+"L"+Pe+",0M"+Pe/4*3+","+Ee/4*5+"l"+Pe/2+",-"+Ee/2,opacity:Pt,stroke:Ot,"stroke-width":(Ve=we*ye)+"px"};break;case"\\":Pe=ye*Math.sqrt(2),Ee=ye*Math.sqrt(2),tt="path",Ke={d:Fe="M"+Pe/4*3+",-"+Ee/4+"l"+Pe/2+","+Ee/2+"M0,0L"+Pe+","+Ee+"M-"+Pe/4+","+Ee/4*3+"l"+Pe/2+","+Ee/2,opacity:Pt,stroke:Ot,"stroke-width":(Ve=we*ye)+"px"};break;case"x":Pe=ye*Math.sqrt(2),Ee=ye*Math.sqrt(2),Fe="M-"+Pe/4+","+Ee/4+"l"+Pe/2+",-"+Ee/2+"M0,"+Ee+"L"+Pe+",0M"+Pe/4*3+","+Ee/4*5+"l"+Pe/2+",-"+Ee/2+"M"+Pe/4*3+",-"+Ee/4+"l"+Pe/2+","+Ee/2+"M0,0L"+Pe+","+Ee+"M-"+Pe/4+","+Ee/4*3+"l"+Pe/2+","+Ee/2,Ve=ye-ye*Math.sqrt(1-we),tt="path",Ke={d:Fe,opacity:Pt,stroke:Ot,"stroke-width":Ve+"px"};break;case"|":tt="path",tt="path",Ke={d:Fe="M"+(Pe=ye)/2+",0L"+Pe/2+","+(Ee=ye),opacity:Pt,stroke:Ot,"stroke-width":(Ve=we*ye)+"px"};break;case"-":tt="path",tt="path",Ke={d:Fe="M0,"+(Ee=ye)/2+"L"+(Pe=ye)+","+Ee/2,opacity:Pt,stroke:Ot,"stroke-width":(Ve=we*ye)+"px"};break;case"+":tt="path",Fe="M"+(Pe=ye)/2+",0L"+Pe/2+","+(Ee=ye)+"M0,"+Ee/2+"L"+Pe+","+Ee/2,Ve=ye-ye*Math.sqrt(1-we),tt="path",Ke={d:Fe,opacity:Pt,stroke:Ot,"stroke-width":Ve+"px"};break;case".":Pe=ye,Ee=ye,we<Math.PI/4?Ye=Math.sqrt(we*ye*ye/Math.PI):(nt=we,ht=Math.PI/4,Ye=(vt=ye/2)+(ye/Math.sqrt(2)-vt)*(nt-ht)/(1-ht)),tt="circle",Ke={cx:Pe/2,cy:Ee/2,r:Ye,opacity:Pt,fill:Ot}}var St=[Se||"noSh",Ie||"noBg",de||"noFg",ye,we].join(";"),He=pt._defs.select(".patterns").selectAll("#"+Qe).data([St],k.identity);He.exit().remove(),He.enter().append("pattern").each(function(){var We=M.select(this);if(We.attr({id:Qe,width:Pe+"px",height:Ee+"px",patternUnits:"userSpaceOnUse",patternTransform:Ae?"scale(0.8)":""}),Ie){var Be=b(Ie),Ge=o.tinyRGB(Be),ot=Be.getAlpha(),it=We.selectAll("rect").data([0]);it.exit().remove(),it.enter().append("rect").attr({width:Pe+"px",height:Ee+"px",fill:Ge,"fill-opacity":ot})}var dt=We.selectAll(tt).data([0]);dt.exit().remove(),dt.enter().append(tt).attr(Ke)}),ve.style("fill",K(Qe,ie)).style("fill-opacity",null),ve.classed("pattern_filled",!0)},x.initGradients=function(ve){var oe=ve._fullLayout;k.ensureSingle(oe._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),M.select(ve).selectAll(".gradient_filled").classed("gradient_filled",!1)},x.initPatterns=function(ve){var oe=ve._fullLayout;k.ensureSingle(oe._defs,"g","patterns").selectAll("pattern").remove(),M.select(ve).selectAll(".pattern_filled").classed("pattern_filled",!1)},x.getPatternAttr=function(ve,oe,ie){return ve&&k.isArrayOrTypedArray(ve)?oe<ve.length?ve[oe]:ie:ve},x.pointStyle=function(ve,oe,ie,he){if(ve.size()){var Se=x.makePointStyleFns(oe);ve.each(function(ye){x.singlePointStyle(ye,M.select(this),oe,Se,ie,he)})}},x.singlePointStyle=function(ve,oe,ie,he,Se,ye){var we=ie.marker,Me=we.line;if(ye&&ye.i>=0&&ve.i===void 0&&(ve.i=ye.i),oe.style("opacity",he.selectedOpacityFn?he.selectedOpacityFn(ve):ve.mo===void 0?we.opacity:ve.mo),he.ms2mrc){var Oe;Oe=ve.ms==="various"||we.size==="various"?3:he.ms2mrc(ve.ms),ve.mrc=Oe,he.selectedSizeFn&&(Oe=ve.mrc=he.selectedSizeFn(ve));var Ie=x.symbolNumber(ve.mx||we.symbol)||0;ve.om=Ie%200>=100;var de=ze(ve,ie),_e=X(ve,ie);oe.attr("d",_(Ie,Oe,de,_e))}var Ae,Pe,Ee,Fe=!1;if(ve.so)Ee=Me.outlierwidth,Pe=Me.outliercolor,Ae=we.outliercolor;else{var Ve=(Me||{}).width;Ee=(ve.mlw+1||Ve+1||(ve.trace?(ve.trace.marker.line||{}).width:0)+1)-1||0,Pe="mlc"in ve?ve.mlcc=he.lineScale(ve.mlc):k.isArrayOrTypedArray(Me.color)?o.defaultLine:Me.color,k.isArrayOrTypedArray(we.color)&&(Ae=o.defaultLine,Fe=!0),Ae="mc"in ve?ve.mcc=he.markerScale(ve.mc):we.color||we.colors||"rgba(0,0,0,0)",he.selectedColorFn&&(Ae=he.selectedColorFn(ve))}if(ve.om)oe.call(o.stroke,Ae).style({"stroke-width":(Ee||1)+"px",fill:"none"});else{oe.style("stroke-width",(ve.isBlank?0:Ee)+"px");var Ye=we.gradient,tt=ve.mgt;tt?Fe=!0:tt=Ye&&Ye.type,k.isArrayOrTypedArray(tt)&&(tt=tt[0],S[tt]||(tt=0));var nt=we.pattern,ht=nt&&x.getPatternAttr(nt.shape,ve.i,"");if(tt&&tt!=="none"){var vt=ve.mgc;vt?Fe=!0:vt=Ye.color;var pt=ie.uid;Fe&&(pt+="-"+ve.i),x.gradient(oe,Se,pt,tt,[[0,vt],[1,Ae]],"fill")}else if(ht){var Qe=!1,Ke=nt.fgcolor;!Ke&&ye&&ye.color&&(Ke=ye.color,Qe=!0);var Mt=x.getPatternAttr(Ke,ve.i,ye&&ye.color||null),Ot=x.getPatternAttr(nt.bgcolor,ve.i,null),Pt=nt.fgopacity,St=x.getPatternAttr(nt.size,ve.i,8),He=x.getPatternAttr(nt.solidity,ve.i,.3);Qe=Qe||ve.mcc||k.isArrayOrTypedArray(nt.shape)||k.isArrayOrTypedArray(nt.bgcolor)||k.isArrayOrTypedArray(nt.fgcolor)||k.isArrayOrTypedArray(nt.size)||k.isArrayOrTypedArray(nt.solidity);var We=ie.uid;Qe&&(We+="-"+ve.i),x.pattern(oe,"point",Se,We,ht,St,He,ve.mcc,nt.fillmode,Ot,Mt,Pt)}else k.isArrayOrTypedArray(Ae)?o.fill(oe,Ae[ve.i]):o.fill(oe,Ae);Ee&&o.stroke(oe,Pe)}},x.makePointStyleFns=function(ve){var oe={},ie=ve.marker;return oe.markerScale=x.tryColorscale(ie,""),oe.lineScale=x.tryColorscale(ie,"line"),f.traceIs(ve,"symbols")&&(oe.ms2mrc=u.isBubble(ve)?h(ve):function(){return(ie.size||6)/2}),ve.selectedpoints&&k.extendFlat(oe,x.makeSelectedPointStyleFns(ve)),oe},x.makeSelectedPointStyleFns=function(ve){var oe={},ie=ve.selected||{},he=ve.unselected||{},Se=ve.marker||{},ye=ie.marker||{},we=he.marker||{},Me=Se.opacity,Oe=ye.opacity,Ie=we.opacity,de=Oe!==void 0,_e=Ie!==void 0;(k.isArrayOrTypedArray(Me)||de||_e)&&(oe.selectedOpacityFn=function(ht){var vt=ht.mo===void 0?Se.opacity:ht.mo;return ht.selected?de?Oe:vt:_e?Ie:l*vt});var Ae=Se.color,Pe=ye.color,Ee=we.color;(Pe||Ee)&&(oe.selectedColorFn=function(ht){var vt=ht.mcc||Ae;return ht.selected?Pe||vt:Ee||vt});var Fe=Se.size,Ve=ye.size,Ye=we.size,tt=Ve!==void 0,nt=Ye!==void 0;return f.traceIs(ve,"symbols")&&(tt||nt)&&(oe.selectedSizeFn=function(ht){var vt=ht.mrc||Fe/2;return ht.selected?tt?Ve/2:vt:nt?Ye/2:vt}),oe},x.makeSelectedTextStyleFns=function(ve){var oe={},ie=ve.selected||{},he=ve.unselected||{},Se=ve.textfont||{},ye=ie.textfont||{},we=he.textfont||{},Me=Se.color,Oe=ye.color,Ie=we.color;return oe.selectedTextColorFn=function(de){var _e=de.tc||Me;return de.selected?Oe||_e:Ie||(Oe?_e:o.addOpacity(_e,l))},oe},x.selectedPointStyle=function(ve,oe){if(ve.size()&&oe.selectedpoints){var ie=x.makeSelectedPointStyleFns(oe),he=oe.marker||{},Se=[];ie.selectedOpacityFn&&Se.push(function(ye,we){ye.style("opacity",ie.selectedOpacityFn(we))}),ie.selectedColorFn&&Se.push(function(ye,we){o.fill(ye,ie.selectedColorFn(we))}),ie.selectedSizeFn&&Se.push(function(ye,we){var Me=we.mx||he.symbol||0,Oe=ie.selectedSizeFn(we);ye.attr("d",_(x.symbolNumber(Me),Oe,ze(we,oe),X(we,oe))),we.mrc2=Oe}),Se.length&&ve.each(function(ye){for(var we=M.select(this),Me=0;Me<Se.length;Me++)Se[Me](we,ye)})}},x.tryColorscale=function(ve,oe){var ie=oe?k.nestedProperty(ve,oe).get():ve;if(ie){var he=ie.color;if((ie.colorscale||ie._colorAx)&&k.isArrayOrTypedArray(he))return t.makeColorScaleFuncFromTrace(ie)}return k.identity};var E,C,O={start:1,end:-1,middle:0,bottom:1,top:-1};function P(ve,oe,ie,he,Se){var ye=M.select(ve.node().parentNode),we=oe.indexOf("top")!==-1?"top":oe.indexOf("bottom")!==-1?"bottom":"middle",Me=oe.indexOf("left")!==-1?"end":oe.indexOf("right")!==-1?"start":"middle",Oe=he?he/.8+1:0,Ie=(n.lineCount(ve)-1)*a+1,de=O[Me]*Oe,_e=.75*ie+O[we]*Oe+(O[we]-1)*Ie*ie/2;ve.attr("text-anchor",Me),Se||ye.attr("transform",i(de,_e))}function z(ve,oe){var ie=ve.ts||oe.textfont.size;return T(ie)&&ie>0?ie:0}function j(ve,oe,ie){return ie&&(ve=H(ve)),oe?N(ve[1]):I(ve[0])}function I(ve){var oe=M.round(ve,2);return E=oe,oe}function N(ve){var oe=M.round(ve,2);return C=oe,oe}function W(ve,oe,ie,he){var Se=ve[0]-oe[0],ye=ve[1]-oe[1],we=ie[0]-oe[0],Me=ie[1]-oe[1],Oe=Math.pow(Se*Se+ye*ye,.25),Ie=Math.pow(we*we+Me*Me,.25),de=(Ie*Ie*Se-Oe*Oe*we)*he,_e=(Ie*Ie*ye-Oe*Oe*Me)*he,Ae=3*Ie*(Oe+Ie),Pe=3*Oe*(Oe+Ie);return[[I(oe[0]+(Ae&&de/Ae)),N(oe[1]+(Ae&&_e/Ae))],[I(oe[0]-(Pe&&de/Pe)),N(oe[1]-(Pe&&_e/Pe))]]}x.textPointStyle=function(ve,oe,ie){if(ve.size()){var he;if(oe.selectedpoints){var Se=x.makeSelectedTextStyleFns(oe);he=Se.selectedTextColorFn}var ye=oe.texttemplate,we=ie._fullLayout;ve.each(function(Me){var Oe=M.select(this),Ie=ye?k.extractOption(Me,oe,"txt","texttemplate"):k.extractOption(Me,oe,"tx","text");if(Ie||Ie===0){if(ye){var de=oe._module.formatLabels,_e=de?de(Me,oe,we):{},Ae={};c(Ae,oe,Me.i);var Pe=oe._meta||{};Ie=k.texttemplateString(Ie,_e,we._d3locale,Ae,Me,Pe)}var Ee=Me.tp||oe.textposition,Fe=z(Me,oe),Ve=he?he(Me):Me.tc||oe.textfont.color;Oe.call(x.font,{family:Me.tf||oe.textfont.family,weight:Me.tw||oe.textfont.weight,style:Me.ty||oe.textfont.style,variant:Me.tv||oe.textfont.variant,textcase:Me.tC||oe.textfont.textcase,lineposition:Me.tE||oe.textfont.lineposition,shadow:Me.tS||oe.textfont.shadow,size:Fe,color:Ve}).text(Ie).call(n.convertToTspans,ie).call(P,Ee,Fe,Me.mrc)}else Oe.remove()})}},x.selectedTextStyle=function(ve,oe){if(ve.size()&&oe.selectedpoints){var ie=x.makeSelectedTextStyleFns(oe);ve.each(function(he){var Se=M.select(this),ye=ie.selectedTextColorFn(he),we=he.tp||oe.textposition,Me=z(he,oe);o.fill(Se,ye);var Oe=f.traceIs(oe,"bar-like");P(Se,we,Me,he.mrc2||he.mrc,Oe)})}},x.smoothopen=function(ve,oe){if(ve.length<3)return"M"+ve.join("L");var ie,he="M"+ve[0],Se=[];for(ie=1;ie<ve.length-1;ie++)Se.push(W(ve[ie-1],ve[ie],ve[ie+1],oe));for(he+="Q"+Se[0][0]+" "+ve[1],ie=2;ie<ve.length-1;ie++)he+="C"+Se[ie-2][1]+" "+Se[ie-1][0]+" "+ve[ie];return he+"Q"+Se[ve.length-3][1]+" "+ve[ve.length-1]},x.smoothclosed=function(ve,oe){if(ve.length<3)return"M"+ve.join("L")+"Z";var ie,he="M"+ve[0],Se=ve.length-1,ye=[W(ve[Se],ve[0],ve[1],oe)];for(ie=1;ie<Se;ie++)ye.push(W(ve[ie-1],ve[ie],ve[ie+1],oe));for(ye.push(W(ve[Se-1],ve[Se],ve[0],oe)),ie=1;ie<=Se;ie++)he+="C"+ye[ie-1][1]+" "+ye[ie][0]+" "+ve[ie];return he+"C"+ye[Se][1]+" "+ye[0][0]+" "+ve[0]+"Z"};var F={hv:function(ve,oe,ie){return"H"+I(oe[0])+"V"+j(oe,1,ie)},vh:function(ve,oe,ie){return"V"+N(oe[1])+"H"+j(oe,0,ie)},hvh:function(ve,oe,ie){return"H"+I((ve[0]+oe[0])/2)+"V"+N(oe[1])+"H"+j(oe,0,ie)},vhv:function(ve,oe,ie){return"V"+N((ve[1]+oe[1])/2)+"H"+I(oe[0])+"V"+j(oe,1,ie)}},U=function(ve,oe,ie){return"L"+j(oe,0,ie)+","+j(oe,1,ie)};function H(ve,oe){var ie=ve.backoff,he=ve.trace,Se=ve.d,ye=ve.i;if(ie&&he&&he.marker&&he.marker.angle%360==0&&he.line&&he.line.shape!=="spline"){var we=k.isArrayOrTypedArray(ie),Me=ve,Oe=oe?oe[0]:E||0,Ie=oe?oe[1]:C||0,de=Me[0],_e=Me[1],Ae=de-Oe,Pe=_e-Ie,Ee=Math.atan2(Pe,Ae),Fe=we?ie[ye]:ie;if(Fe==="auto"){var Ve=Me.i;he.type==="scatter"&&Ve--;var Ye=Me.marker,tt=Ye.symbol;k.isArrayOrTypedArray(tt)&&(tt=tt[Ve]);var nt=Ye.size;k.isArrayOrTypedArray(nt)&&(nt=nt[Ve]),Fe=Ye?x.symbolBackOffs[x.symbolNumber(tt)]*nt:0,Fe+=x.getMarkerStandoff(Se[Ve],he)||0}var ht=de-Fe*Math.cos(Ee),vt=_e-Fe*Math.sin(Ee);(ht<=de&&ht>=Oe||ht>=de&&ht<=Oe)&&(vt<=_e&&vt>=Ie||vt>=_e&&vt<=Ie)&&(ve=[ht,vt])}return ve}x.steps=function(ve){var oe=F[ve]||U;return function(ie){for(var he="M"+I(ie[0][0])+","+N(ie[0][1]),Se=ie.length,ye=1;ye<Se;ye++)he+=oe(ie[ye-1],ie[ye],ye===Se-1);return he}},x.applyBackoff=H,x.makeTester=function(){var ve=k.ensureSingleById(M.select("body"),"svg","js-plotly-tester",function(ie){ie.attr(r.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),oe=k.ensureSingle(ve,"path","js-reference-point",function(ie){ie.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});x.tester=ve,x.testref=oe},x.savedBBoxes={};var ne=0;function $(ve){var oe=ve.getAttribute("data-unformatted");if(oe!==null)return oe+ve.getAttribute("data-math")+ve.getAttribute("text-anchor")+ve.getAttribute("style")}function K(ve,oe){if(!ve)return null;var ie=oe._context,he=ie._exportedPlot?"":ie._baseUrl||"";return he?"url('"+he+"#"+ve+"')":"url(#"+ve+")"}x.bBox=function(ve,oe,ie){var he,Se,ye;if(ie||(ie=$(ve)),ie){if(he=x.savedBBoxes[ie])return k.extendFlat({},he)}else if(ve.childNodes.length===1){var we=ve.childNodes[0];if(ie=$(we)){var Me=+we.getAttribute("x")||0,Oe=+we.getAttribute("y")||0,Ie=we.getAttribute("transform");if(!Ie){var de=x.bBox(we,!1,ie);return Me&&(de.left+=Me,de.right+=Me),Oe&&(de.top+=Oe,de.bottom+=Oe),de}if(ie+="~"+Me+"~"+Oe+"~"+Ie,he=x.savedBBoxes[ie])return k.extendFlat({},he)}}oe?Se=ve:(ye=x.tester.node(),Se=ve.cloneNode(!0),ye.appendChild(Se)),M.select(Se).attr("transform",null).call(n.positionText,0,0);var _e=Se.getBoundingClientRect(),Ae=x.testref.node().getBoundingClientRect();oe||ye.removeChild(Se);var Pe={height:_e.height,width:_e.width,left:_e.left-Ae.left,top:_e.top-Ae.top,right:_e.right-Ae.left,bottom:_e.bottom-Ae.top};return ne>=1e4&&(x.savedBBoxes={},ne=0),ie&&(x.savedBBoxes[ie]=Pe),ne++,k.extendFlat({},Pe)},x.setClipUrl=function(ve,oe,ie){ve.attr("clip-path",K(oe,ie))},x.getTranslate=function(ve){var oe=(ve[ve.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(ie,he,Se){return[he,Se].join(" ")}).split(" ");return{x:+oe[0]||0,y:+oe[1]||0}},x.setTranslate=function(ve,oe,ie){var he=ve.attr?"attr":"getAttribute",Se=ve.attr?"attr":"setAttribute",ye=ve[he]("transform")||"";return oe=oe||0,ie=ie||0,ye=ye.replace(/(\btranslate\(.*?\);?)/,"").trim(),ye=(ye+=i(oe,ie)).trim(),ve[Se]("transform",ye),ye},x.getScale=function(ve){var oe=(ve[ve.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(ie,he,Se){return[he,Se].join(" ")}).split(" ");return{x:+oe[0]||1,y:+oe[1]||1}},x.setScale=function(ve,oe,ie){var he=ve.attr?"attr":"getAttribute",Se=ve.attr?"attr":"setAttribute",ye=ve[he]("transform")||"";return oe=oe||1,ie=ie||1,ye=ye.replace(/(\bscale\(.*?\);?)/,"").trim(),ye=(ye+="scale("+oe+","+ie+")").trim(),ve[Se]("transform",ye),ye};var Q=/\s*sc.*/;x.setPointGroupScale=function(ve,oe,ie){if(oe=oe||1,ie=ie||1,ve){var he=oe===1&&ie===1?"":"scale("+oe+","+ie+")";ve.each(function(){var Se=(this.getAttribute("transform")||"").replace(Q,"");Se=(Se+=he).trim(),this.setAttribute("transform",Se)})}};var Z=/translate\([^)]*\)\s*$/;function X(ve,oe){var ie;return ve&&(ie=ve.mf),ie===void 0&&(ie=oe.marker&&oe.marker.standoff||0),oe._geo||oe._xA?ie:-ie}x.setTextPointsScale=function(ve,oe,ie){ve&&ve.each(function(){var he,Se=M.select(this),ye=Se.select("text");if(ye.node()){var we=parseFloat(ye.attr("x")||0),Me=parseFloat(ye.attr("y")||0),Oe=(Se.attr("transform")||"").match(Z);he=oe===1&&ie===1?[]:[i(we,Me),"scale("+oe+","+ie+")",i(-we,-Me)],Oe&&he.push(Oe),Se.attr("transform",he.join(""))}})},x.getMarkerStandoff=X;var te,ae,se,ce,fe,pe,ge=Math.atan2,me=Math.cos,be=Math.sin;function ke(ve,oe){var ie=oe[0],he=oe[1];return[ie*me(ve)-he*be(ve),ie*be(ve)+he*me(ve)]}function ze(ve,oe){var ie,he,Se=ve.ma;Se===void 0&&((Se=oe.marker.angle)&&!k.isArrayOrTypedArray(Se)||(Se=0));var ye=oe.marker.angleref;if(ye==="previous"||ye==="north"){if(oe._geo){var we=oe._geo.project(ve.lonlat);ie=we[0],he=we[1]}else{var Me=oe._xA,Oe=oe._yA;if(!Me||!Oe)return 90;ie=Me.c2p(ve.x),he=Oe.c2p(ve.y)}if(oe._geo){var Ie,de=ve.lonlat[0],_e=ve.lonlat[1],Ae=oe._geo.project([de,_e+1e-5]),Pe=oe._geo.project([de+1e-5,_e]),Ee=ge(Pe[1]-he,Pe[0]-ie),Fe=ge(Ae[1]-he,Ae[0]-ie);if(ye==="north")Ie=Se/180*Math.PI;else if(ye==="previous"){var Ve=de/180*Math.PI,Ye=_e/180*Math.PI,tt=te/180*Math.PI,nt=ae/180*Math.PI,ht=tt-Ve,vt=me(nt)*be(ht),pt=be(nt)*me(Ye)-me(nt)*be(Ye)*me(ht);Ie=-ge(vt,pt)-Math.PI,te=de,ae=_e}var Qe=ke(Ee,[me(Ie),0]),Ke=ke(Fe,[be(Ie),0]);Se=ge(Qe[1]+Ke[1],Qe[0]+Ke[0])/Math.PI*180,ye!=="previous"||pe===oe.uid&&ve.i===fe+1||(Se=null)}if(ye==="previous"&&!oe._geo)if(pe===oe.uid&&ve.i===fe+1&&T(ie)&&T(he)){var Mt=ie-se,Ot=he-ce,Pt=oe.line&&oe.line.shape||"",St=Pt.slice(Pt.length-1);St==="h"&&(Ot=0),St==="v"&&(Mt=0),Se+=ge(Ot,Mt)/Math.PI*180+90}else Se=null}return se=ie,ce=he,fe=ve.i,pe=oe.uid,Se}x.getMarkerAngle=ze},71984:function(ee,R,e){var M,k,s,T,b=e(21984),f=e(33428).round,o="M0,0Z",t=Math.sqrt(2),i=Math.sqrt(3),n=Math.PI,r=Math.cos,a=Math.sin;function l(h){return h===null}function u(h,c,x){if(!(h&&h%360!=0||c))return x;if(s===h&&T===c&&M===x)return k;function p(z,j){var I=r(z),N=a(z),W=j[0],F=j[1]+(c||0);return[W*I-F*N,W*N+F*I]}s=h,T=c,M=x;for(var v=h/180*n,g=0,y=0,m=b(x),_="",d=0;d<m.length;d++){var S=m[d],w=S[0],E=g,C=y;if(w==="M"||w==="L")g=+S[1],y=+S[2];else if(w==="m"||w==="l")g+=+S[1],y+=+S[2];else if(w==="H")g=+S[1];else if(w==="h")g+=+S[1];else if(w==="V")y=+S[1];else if(w==="v")y+=+S[1];else if(w==="A"){g=+S[1],y=+S[2];var O=p(v,[+S[6],+S[7]]);S[6]=O[0],S[7]=O[1],S[3]=+S[3]+h}w!=="H"&&w!=="V"||(w="L"),w!=="h"&&w!=="v"||(w="l"),w!=="m"&&w!=="l"||(g-=E,y-=C);var P=p(v,[g,y]);w!=="H"&&w!=="V"||(w="L"),w!=="M"&&w!=="L"&&w!=="m"&&w!=="l"||(S[1]=P[0],S[2]=P[1]),S[0]=w,_+=S[0]+S.slice(1).join(",")}return k=_,_}ee.exports={circle:{n:0,f:function(h,c,x){if(l(c))return o;var p=f(h,2),v="M"+p+",0A"+p+","+p+" 0 1,1 0,-"+p+"A"+p+","+p+" 0 0,1 "+p+",0Z";return x?u(c,x,v):v}},square:{n:1,f:function(h,c,x){if(l(c))return o;var p=f(h,2);return u(c,x,"M"+p+","+p+"H-"+p+"V-"+p+"H"+p+"Z")}},diamond:{n:2,f:function(h,c,x){if(l(c))return o;var p=f(1.3*h,2);return u(c,x,"M"+p+",0L0,"+p+"L-"+p+",0L0,-"+p+"Z")}},cross:{n:3,f:function(h,c,x){if(l(c))return o;var p=f(.4*h,2),v=f(1.2*h,2);return u(c,x,"M"+v+","+p+"H"+p+"V"+v+"H-"+p+"V"+p+"H-"+v+"V-"+p+"H-"+p+"V-"+v+"H"+p+"V-"+p+"H"+v+"Z")}},x:{n:4,f:function(h,c,x){if(l(c))return o;var p=f(.8*h/t,2),v="l"+p+","+p,g="l"+p+",-"+p,y="l-"+p+",-"+p,m="l-"+p+","+p;return u(c,x,"M0,"+p+v+g+y+g+y+m+y+m+v+m+v+"Z")}},"triangle-up":{n:5,f:function(h,c,x){if(l(c))return o;var p=f(2*h/i,2);return u(c,x,"M-"+p+","+f(h/2,2)+"H"+p+"L0,-"+f(h,2)+"Z")}},"triangle-down":{n:6,f:function(h,c,x){if(l(c))return o;var p=f(2*h/i,2);return u(c,x,"M-"+p+",-"+f(h/2,2)+"H"+p+"L0,"+f(h,2)+"Z")}},"triangle-left":{n:7,f:function(h,c,x){if(l(c))return o;var p=f(2*h/i,2);return u(c,x,"M"+f(h/2,2)+",-"+p+"V"+p+"L-"+f(h,2)+",0Z")}},"triangle-right":{n:8,f:function(h,c,x){if(l(c))return o;var p=f(2*h/i,2);return u(c,x,"M-"+f(h/2,2)+",-"+p+"V"+p+"L"+f(h,2)+",0Z")}},"triangle-ne":{n:9,f:function(h,c,x){if(l(c))return o;var p=f(.6*h,2),v=f(1.2*h,2);return u(c,x,"M-"+v+",-"+p+"H"+p+"V"+v+"Z")}},"triangle-se":{n:10,f:function(h,c,x){if(l(c))return o;var p=f(.6*h,2),v=f(1.2*h,2);return u(c,x,"M"+p+",-"+v+"V"+p+"H-"+v+"Z")}},"triangle-sw":{n:11,f:function(h,c,x){if(l(c))return o;var p=f(.6*h,2),v=f(1.2*h,2);return u(c,x,"M"+v+","+p+"H-"+p+"V-"+v+"Z")}},"triangle-nw":{n:12,f:function(h,c,x){if(l(c))return o;var p=f(.6*h,2),v=f(1.2*h,2);return u(c,x,"M-"+p+","+v+"V-"+p+"H"+v+"Z")}},pentagon:{n:13,f:function(h,c,x){if(l(c))return o;var p=f(.951*h,2),v=f(.588*h,2),g=f(-h,2),y=f(-.309*h,2);return u(c,x,"M"+p+","+y+"L"+v+","+f(.809*h,2)+"H-"+v+"L-"+p+","+y+"L0,"+g+"Z")}},hexagon:{n:14,f:function(h,c,x){if(l(c))return o;var p=f(h,2),v=f(h/2,2),g=f(h*i/2,2);return u(c,x,"M"+g+",-"+v+"V"+v+"L0,"+p+"L-"+g+","+v+"V-"+v+"L0,-"+p+"Z")}},hexagon2:{n:15,f:function(h,c,x){if(l(c))return o;var p=f(h,2),v=f(h/2,2),g=f(h*i/2,2);return u(c,x,"M-"+v+","+g+"H"+v+"L"+p+",0L"+v+",-"+g+"H-"+v+"L-"+p+",0Z")}},octagon:{n:16,f:function(h,c,x){if(l(c))return o;var p=f(.924*h,2),v=f(.383*h,2);return u(c,x,"M-"+v+",-"+p+"H"+v+"L"+p+",-"+v+"V"+v+"L"+v+","+p+"H-"+v+"L-"+p+","+v+"V-"+v+"Z")}},star:{n:17,f:function(h,c,x){if(l(c))return o;var p=1.4*h,v=f(.225*p,2),g=f(.951*p,2),y=f(.363*p,2),m=f(.588*p,2),_=f(-p,2),d=f(-.309*p,2),S=f(.118*p,2),w=f(.809*p,2);return u(c,x,"M"+v+","+d+"H"+g+"L"+y+","+S+"L"+m+","+w+"L0,"+f(.382*p,2)+"L-"+m+","+w+"L-"+y+","+S+"L-"+g+","+d+"H-"+v+"L0,"+_+"Z")}},hexagram:{n:18,f:function(h,c,x){if(l(c))return o;var p=f(.66*h,2),v=f(.38*h,2),g=f(.76*h,2);return u(c,x,"M-"+g+",0l-"+v+",-"+p+"h"+g+"l"+v+",-"+p+"l"+v+","+p+"h"+g+"l-"+v+","+p+"l"+v+","+p+"h-"+g+"l-"+v+","+p+"l-"+v+",-"+p+"h-"+g+"Z")}},"star-triangle-up":{n:19,f:function(h,c,x){if(l(c))return o;var p=f(h*i*.8,2),v=f(.8*h,2),g=f(1.6*h,2),y=f(4*h,2),m="A "+y+","+y+" 0 0 1 ";return u(c,x,"M-"+p+","+v+m+p+","+v+m+"0,-"+g+m+"-"+p+","+v+"Z")}},"star-triangle-down":{n:20,f:function(h,c,x){if(l(c))return o;var p=f(h*i*.8,2),v=f(.8*h,2),g=f(1.6*h,2),y=f(4*h,2),m="A "+y+","+y+" 0 0 1 ";return u(c,x,"M"+p+",-"+v+m+"-"+p+",-"+v+m+"0,"+g+m+p+",-"+v+"Z")}},"star-square":{n:21,f:function(h,c,x){if(l(c))return o;var p=f(1.1*h,2),v=f(2*h,2),g="A "+v+","+v+" 0 0 1 ";return u(c,x,"M-"+p+",-"+p+g+"-"+p+","+p+g+p+","+p+g+p+",-"+p+g+"-"+p+",-"+p+"Z")}},"star-diamond":{n:22,f:function(h,c,x){if(l(c))return o;var p=f(1.4*h,2),v=f(1.9*h,2),g="A "+v+","+v+" 0 0 1 ";return u(c,x,"M-"+p+",0"+g+"0,"+p+g+p+",0"+g+"0,-"+p+g+"-"+p+",0Z")}},"diamond-tall":{n:23,f:function(h,c,x){if(l(c))return o;var p=f(.7*h,2),v=f(1.4*h,2);return u(c,x,"M0,"+v+"L"+p+",0L0,-"+v+"L-"+p+",0Z")}},"diamond-wide":{n:24,f:function(h,c,x){if(l(c))return o;var p=f(1.4*h,2),v=f(.7*h,2);return u(c,x,"M0,"+v+"L"+p+",0L0,-"+v+"L-"+p+",0Z")}},hourglass:{n:25,f:function(h,c,x){if(l(c))return o;var p=f(h,2);return u(c,x,"M"+p+","+p+"H-"+p+"L"+p+",-"+p+"H-"+p+"Z")},noDot:!0},bowtie:{n:26,f:function(h,c,x){if(l(c))return o;var p=f(h,2);return u(c,x,"M"+p+","+p+"V-"+p+"L-"+p+","+p+"V-"+p+"Z")},noDot:!0},"circle-cross":{n:27,f:function(h,c,x){if(l(c))return o;var p=f(h,2);return u(c,x,"M0,"+p+"V-"+p+"M"+p+",0H-"+p+"M"+p+",0A"+p+","+p+" 0 1,1 0,-"+p+"A"+p+","+p+" 0 0,1 "+p+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(h,c,x){if(l(c))return o;var p=f(h,2),v=f(h/t,2);return u(c,x,"M"+v+","+v+"L-"+v+",-"+v+"M"+v+",-"+v+"L-"+v+","+v+"M"+p+",0A"+p+","+p+" 0 1,1 0,-"+p+"A"+p+","+p+" 0 0,1 "+p+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(h,c,x){if(l(c))return o;var p=f(h,2);return u(c,x,"M0,"+p+"V-"+p+"M"+p+",0H-"+p+"M"+p+","+p+"H-"+p+"V-"+p+"H"+p+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(h,c,x){if(l(c))return o;var p=f(h,2);return u(c,x,"M"+p+","+p+"L-"+p+",-"+p+"M"+p+",-"+p+"L-"+p+","+p+"M"+p+","+p+"H-"+p+"V-"+p+"H"+p+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(h,c,x){if(l(c))return o;var p=f(1.3*h,2);return u(c,x,"M"+p+",0L0,"+p+"L-"+p+",0L0,-"+p+"ZM0,-"+p+"V"+p+"M-"+p+",0H"+p)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(h,c,x){if(l(c))return o;var p=f(1.3*h,2),v=f(.65*h,2);return u(c,x,"M"+p+",0L0,"+p+"L-"+p+",0L0,-"+p+"ZM-"+v+",-"+v+"L"+v+","+v+"M-"+v+","+v+"L"+v+",-"+v)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(h,c,x){if(l(c))return o;var p=f(1.4*h,2);return u(c,x,"M0,"+p+"V-"+p+"M"+p+",0H-"+p)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(h,c,x){if(l(c))return o;var p=f(h,2);return u(c,x,"M"+p+","+p+"L-"+p+",-"+p+"M"+p+",-"+p+"L-"+p+","+p)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(h,c,x){if(l(c))return o;var p=f(1.2*h,2),v=f(.85*h,2);return u(c,x,"M0,"+p+"V-"+p+"M"+p+",0H-"+p+"M"+v+","+v+"L-"+v+",-"+v+"M"+v+",-"+v+"L-"+v+","+v)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(h,c,x){if(l(c))return o;var p=f(h/2,2),v=f(h,2);return u(c,x,"M"+p+","+v+"V-"+v+"M"+(p-v)+",-"+v+"V"+v+"M"+v+","+p+"H-"+v+"M-"+v+","+(p-v)+"H"+v)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(h,c,x){if(l(c))return o;var p=f(1.2*h,2),v=f(1.6*h,2),g=f(.8*h,2);return u(c,x,"M-"+p+","+g+"L0,0M"+p+","+g+"L0,0M0,-"+v+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(h,c,x){if(l(c))return o;var p=f(1.2*h,2),v=f(1.6*h,2),g=f(.8*h,2);return u(c,x,"M-"+p+",-"+g+"L0,0M"+p+",-"+g+"L0,0M0,"+v+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(h,c,x){if(l(c))return o;var p=f(1.2*h,2),v=f(1.6*h,2),g=f(.8*h,2);return u(c,x,"M"+g+","+p+"L0,0M"+g+",-"+p+"L0,0M-"+v+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(h,c,x){if(l(c))return o;var p=f(1.2*h,2),v=f(1.6*h,2),g=f(.8*h,2);return u(c,x,"M-"+g+","+p+"L0,0M-"+g+",-"+p+"L0,0M"+v+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(h,c,x){if(l(c))return o;var p=f(1.4*h,2);return u(c,x,"M"+p+",0H-"+p)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(h,c,x){if(l(c))return o;var p=f(1.4*h,2);return u(c,x,"M0,"+p+"V-"+p)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(h,c,x){if(l(c))return o;var p=f(h,2);return u(c,x,"M"+p+",-"+p+"L-"+p+","+p)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(h,c,x){if(l(c))return o;var p=f(h,2);return u(c,x,"M"+p+","+p+"L-"+p+",-"+p)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(h,c,x){if(l(c))return o;var p=f(h,2);return u(c,x,"M0,0L-"+p+","+f(2*h,2)+"H"+p+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(h,c,x){if(l(c))return o;var p=f(h,2);return u(c,x,"M0,0L-"+p+",-"+f(2*h,2)+"H"+p+"Z")},noDot:!0},"arrow-left":{n:47,f:function(h,c,x){if(l(c))return o;var p=f(2*h,2),v=f(h,2);return u(c,x,"M0,0L"+p+",-"+v+"V"+v+"Z")},noDot:!0},"arrow-right":{n:48,f:function(h,c,x){if(l(c))return o;var p=f(2*h,2),v=f(h,2);return u(c,x,"M0,0L-"+p+",-"+v+"V"+v+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(h,c,x){if(l(c))return o;var p=f(h,2);return u(c,x,"M-"+p+",0H"+p+"M0,0L-"+p+","+f(2*h,2)+"H"+p+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(h,c,x){if(l(c))return o;var p=f(h,2);return u(c,x,"M-"+p+",0H"+p+"M0,0L-"+p+",-"+f(2*h,2)+"H"+p+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(h,c,x){if(l(c))return o;var p=f(2*h,2),v=f(h,2);return u(c,x,"M0,-"+v+"V"+v+"M0,0L"+p+",-"+v+"V"+v+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(h,c,x){if(l(c))return o;var p=f(2*h,2),v=f(h,2);return u(c,x,"M0,-"+v+"V"+v+"M0,0L-"+p+",-"+v+"V"+v+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(h,c,x){if(l(c))return o;var p=n/2.5,v=2*h*r(p),g=2*h*a(p);return u(c,x,"M0,0L"+-v+","+g+"L"+v+","+g+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(h,c,x){if(l(c))return o;var p=n/4,v=2*h*r(p),g=2*h*a(p);return u(c,x,"M0,0L"+-v+","+g+"A "+2*h+","+2*h+" 0 0 1 "+v+","+g+"Z")},backoff:.4,noDot:!0}}},97644:function(ee){ee.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},14880:function(ee,R,e){var M=e(38248),k=e(24040),s=e(54460),T=e(3400),b=e(93792);function f(o,t,i,n){var r=t["error_"+n]||{},a=[];if(r.visible&&["linear","log"].indexOf(i.type)!==-1){for(var l=b(r),u=0;u<o.length;u++){var h=o[u],c=h.i;if(c===void 0)c=u;else if(c===null)continue;var x=h[n];if(M(i.c2l(x))){var p=l(x,c);if(M(p[0])&&M(p[1])){var v=h[n+"s"]=x-p[0],g=h[n+"h"]=x+p[1];a.push(v,g)}}}var y=i._id,m=t._extremes[y],_=s.findExtremes(i,a,T.extendFlat({tozero:m.opts.tozero},{padded:!0}));m.min=m.min.concat(_.min),m.max=m.max.concat(_.max)}}ee.exports=function(o){for(var t=o.calcdata,i=0;i<t.length;i++){var n=t[i],r=n[0].trace;if(r.visible===!0&&k.traceIs(r,"errorBarsOK")){var a=s.getFromId(o,r.xaxis),l=s.getFromId(o,r.yaxis);f(n,r,a,"x"),f(n,r,l,"y")}}}},93792:function(ee){function R(e,M){return e==="percent"?function(k){return Math.abs(k*M/100)}:e==="constant"?function(){return Math.abs(M)}:e==="sqrt"?function(k){return Math.sqrt(Math.abs(k))}:void 0}ee.exports=function(e){var M=e.type,k=e.symmetric;if(M==="data"){var s=e.array||[];if(k)return function(o,t){var i=+s[t];return[i,i]};var T=e.arrayminus||[];return function(o,t){var i=+s[t],n=+T[t];return isNaN(i)&&isNaN(n)?[NaN,NaN]:[n||0,i||0]}}var b=R(M,e.value),f=R(M,e.valueminus);return k||e.valueminus===void 0?function(o){var t=b(o);return[t,t]}:function(o){return[f(o),b(o)]}}},65200:function(ee,R,e){var M=e(38248),k=e(24040),s=e(3400),T=e(31780),b=e(97644);ee.exports=function(f,o,t,i){var n="error_"+i.axis,r=T.newContainer(o,n),a=f[n]||{};function l(x,p){return s.coerce(a,r,b,x,p)}if(l("visible",a.array!==void 0||a.value!==void 0||a.type==="sqrt")!==!1){var u=l("type","array"in a?"data":"percent"),h=!0;u!=="sqrt"&&(h=l("symmetric",!((u==="data"?"arrayminus":"valueminus")in a))),u==="data"?(l("array"),l("traceref"),h||(l("arrayminus"),l("tracerefminus"))):u!=="percent"&&u!=="constant"||(l("value"),h||l("valueminus"));var c="copy_"+i.inherit+"style";i.inherit&&(o["error_"+i.inherit]||{}).visible&&l(c,!(a.color||M(a.thickness)||M(a.width))),i.inherit&&r[c]||(l("color",t),l("thickness"),l("width",k.traceIs(o,"gl3d")?0:4))}}},64968:function(ee,R,e){var M=e(3400),k=e(67824).overrideAll,s=e(97644),T={error_x:M.extendFlat({},s),error_y:M.extendFlat({},s)};delete T.error_x.copy_zstyle,delete T.error_y.copy_zstyle,delete T.error_y.copy_ystyle;var b={error_x:M.extendFlat({},s),error_y:M.extendFlat({},s),error_z:M.extendFlat({},s)};delete b.error_x.copy_ystyle,delete b.error_y.copy_ystyle,delete b.error_z.copy_ystyle,delete b.error_z.copy_zstyle,ee.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:T,bar:T,histogram:T,scatter3d:k(b,"calc","nested"),scattergl:k(T,"calc","nested")}},supplyDefaults:e(65200),calc:e(14880),makeComputeError:e(93792),plot:e(78512),style:e(92036),hoverInfo:function(f,o,t){(o.error_y||{}).visible&&(t.yerr=f.yh-f.y,o.error_y.symmetric||(t.yerrneg=f.y-f.ys)),(o.error_x||{}).visible&&(t.xerr=f.xh-f.x,o.error_x.symmetric||(t.xerrneg=f.x-f.xs))}}},78512:function(ee,R,e){var M=e(33428),k=e(38248),s=e(43616),T=e(43028);ee.exports=function(b,f,o,t){var i=o.xaxis,n=o.yaxis,r=t&&t.duration>0,a=b._context.staticPlot;f.each(function(l){var u,h=l[0].trace,c=h.error_x||{},x=h.error_y||{};h.ids&&(u=function(y){return y.id});var p=T.hasMarkers(h)&&h.marker.maxdisplayed>0;x.visible||c.visible||(l=[]);var v=M.select(this).selectAll("g.errorbar").data(l,u);if(v.exit().remove(),l.length){c.visible||v.selectAll("path.xerror").remove(),x.visible||v.selectAll("path.yerror").remove(),v.style("opacity",1);var g=v.enter().append("g").classed("errorbar",!0);r&&g.style("opacity",0).transition().duration(t.duration).style("opacity",1),s.setClipUrl(v,o.layerClipId,b),v.each(function(y){var m=M.select(this),_=function(O,P,z){var j={x:P.c2p(O.x),y:z.c2p(O.y)};return O.yh!==void 0&&(j.yh=z.c2p(O.yh),j.ys=z.c2p(O.ys),k(j.ys)||(j.noYS=!0,j.ys=z.c2p(O.ys,!0))),O.xh!==void 0&&(j.xh=P.c2p(O.xh),j.xs=P.c2p(O.xs),k(j.xs)||(j.noXS=!0,j.xs=P.c2p(O.xs,!0))),j}(y,i,n);if(!p||y.vis){var d,S=m.select("path.yerror");if(x.visible&&k(_.x)&&k(_.yh)&&k(_.ys)){var w=x.width;d="M"+(_.x-w)+","+_.yh+"h"+2*w+"m-"+w+",0V"+_.ys,_.noYS||(d+="m-"+w+",0h"+2*w),S.size()?r&&(S=S.transition().duration(t.duration).ease(t.easing)):S=m.append("path").style("vector-effect",a?"none":"non-scaling-stroke").classed("yerror",!0),S.attr("d",d)}else S.remove();var E=m.select("path.xerror");if(c.visible&&k(_.y)&&k(_.xh)&&k(_.xs)){var C=(c.copy_ystyle?x:c).width;d="M"+_.xh+","+(_.y-C)+"v"+2*C+"m0,-"+C+"H"+_.xs,_.noXS||(d+="m0,-"+C+"v"+2*C),E.size()?r&&(E=E.transition().duration(t.duration).ease(t.easing)):E=m.append("path").style("vector-effect",a?"none":"non-scaling-stroke").classed("xerror",!0),E.attr("d",d)}else E.remove()}})}})}},92036:function(ee,R,e){var M=e(33428),k=e(76308);ee.exports=function(s){s.each(function(T){var b=T[0].trace,f=b.error_y||{},o=b.error_x||{},t=M.select(this);t.selectAll("path.yerror").style("stroke-width",f.thickness+"px").call(k.stroke,f.color),o.copy_ystyle&&(o=f),t.selectAll("path.xerror").style("stroke-width",o.thickness+"px").call(k.stroke,o.color)})}},55756:function(ee,R,e){var M=e(25376),k=e(65460).hoverlabel,s=e(92880).extendFlat;ee.exports={hoverlabel:{bgcolor:s({},k.bgcolor,{arrayOk:!0}),bordercolor:s({},k.bordercolor,{arrayOk:!0}),font:M({arrayOk:!0,editType:"none"}),align:s({},k.align,{arrayOk:!0}),namelength:s({},k.namelength,{arrayOk:!0}),editType:"none"}}},55056:function(ee,R,e){var M=e(3400),k=e(24040);function s(T,b,f,o){o=o||M.identity,Array.isArray(T)&&(b[0][f]=o(T))}ee.exports=function(T){var b=T.calcdata,f=T._fullLayout;function o(a){return function(l){return M.coerceHoverinfo({hoverinfo:l},{_module:a._module},f)}}for(var t=0;t<b.length;t++){var i=b[t],n=i[0].trace;if(!k.traceIs(n,"pie-like")){var r=k.traceIs(n,"2dMap")?s:M.fillArray;r(n.hoverinfo,i,"hi",o(n)),n.hovertemplate&&r(n.hovertemplate,i,"ht"),n.hoverlabel&&(r(n.hoverlabel.bgcolor,i,"hbg"),r(n.hoverlabel.bordercolor,i,"hbc"),r(n.hoverlabel.font.size,i,"hts"),r(n.hoverlabel.font.color,i,"htc"),r(n.hoverlabel.font.family,i,"htf"),r(n.hoverlabel.font.weight,i,"htw"),r(n.hoverlabel.font.style,i,"hty"),r(n.hoverlabel.font.variant,i,"htv"),r(n.hoverlabel.namelength,i,"hnl"),r(n.hoverlabel.align,i,"hta"))}}}},62376:function(ee,R,e){var M=e(24040),k=e(83292).hover;ee.exports=function(s,T,b){var f=M.getComponentMethod("annotations","onClick")(s,s._hoverdata);function o(){s.emit("plotly_click",{points:s._hoverdata,event:T})}b!==void 0&&k(s,T,b,!0),s._hoverdata&&T&&T.target&&(f&&f.then?f.then(o):o(),T.stopImmediatePropagation&&T.stopImmediatePropagation())}},92456:function(ee){ee.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},95448:function(ee,R,e){var M=e(3400),k=e(55756),s=e(16132);ee.exports=function(T,b,f,o){var t=M.extendFlat({},o.hoverlabel);b.hovertemplate&&(t.namelength=-1),s(T,b,function(i,n){return M.coerce(T,b,k,i,n)},t)}},10624:function(ee,R,e){var M=e(3400);R.getSubplot=function(o){return o.subplot||o.xaxis+o.yaxis||o.geo},R.isTraceInSubplots=function(o,t){if(o.type==="splom"){for(var i=o.xaxes||[],n=o.yaxes||[],r=0;r<i.length;r++)for(var a=0;a<n.length;a++)if(t.indexOf(i[r]+n[a])!==-1)return!0;return!1}return t.indexOf(R.getSubplot(o))!==-1},R.flat=function(o,t){for(var i=new Array(o.length),n=0;n<o.length;n++)i[n]=t;return i},R.p2c=function(o,t){for(var i=new Array(o.length),n=0;n<o.length;n++)i[n]=o[n].p2c(t);return i},R.getDistanceFunction=function(o,t,i,n){return o==="closest"?n||R.quadrature(t,i):o.charAt(0)==="x"?t:i},R.getClosest=function(o,t,i){if(i.index!==!1)i.index>=0&&i.index<o.length?i.distance=0:i.index=!1;else for(var n=0;n<o.length;n++){var r=t(o[n]);r<=i.distance&&(i.index=n,i.distance=r)}return i},R.inbox=function(o,t,i){return o*t<0||o===0?i:1/0},R.quadrature=function(o,t){return function(i){var n=o(i),r=t(i);return Math.sqrt(n*n+r*r)}},R.makeEventData=function(o,t,i){var n="index"in o?o.index:o.pointNumber,r={data:t._input,fullData:t,curveNumber:t.index,pointNumber:n};if(t._indexToPoints){var a=t._indexToPoints[n];a.length===1?r.pointIndex=a[0]:r.pointIndices=a}else r.pointIndex=n;return t._module.eventData?r=t._module.eventData(r,o,t,i,n):("xVal"in o?r.x=o.xVal:"x"in o&&(r.x=o.x),"yVal"in o?r.y=o.yVal:"y"in o&&(r.y=o.y),o.xa&&(r.xaxis=o.xa),o.ya&&(r.yaxis=o.ya),o.zLabelVal!==void 0&&(r.z=o.zLabelVal)),R.appendArrayPointValue(r,t,n),r},R.appendArrayPointValue=function(o,t,i){var n=t._arrayAttrs;if(n)for(var r=0;r<n.length;r++){var a=n[r],l=s(a);if(o[l]===void 0){var u=T(M.nestedProperty(t,a).get(),i);u!==void 0&&(o[l]=u)}}},R.appendArrayMultiPointValues=function(o,t,i){var n=t._arrayAttrs;if(n)for(var r=0;r<n.length;r++){var a=n[r],l=s(a);if(o[l]===void 0){for(var u=M.nestedProperty(t,a).get(),h=new Array(i.length),c=0;c<i.length;c++)h[c]=T(u,i[c]);o[l]=h}}};var k={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function s(o){return k[o]||o}function T(o,t){return Array.isArray(t)?Array.isArray(o)&&Array.isArray(o[t[0]])?o[t[0]][t[1]]:void 0:o[t]}var b={x:!0,y:!0},f={"x unified":!0,"y unified":!0};R.isUnifiedHover=function(o){return typeof o=="string"&&!!f[o]},R.isXYhover=function(o){return typeof o=="string"&&!!b[o]}},83292:function(ee,R,e){var M=e(33428),k=e(38248),s=e(49760),T=e(3400),b=T.pushUnique,f=T.strTranslate,o=T.strRotate,t=e(95924),i=e(72736),n=e(72213),r=e(43616),a=e(76308),l=e(86476),u=e(54460),h=e(33816).zindexSeparator,c=e(24040),x=e(10624),p=e(92456),v=e(77864),g=e(31140),y=p.YANGLE,m=Math.PI*y/180,_=1/Math.sin(m),d=Math.cos(m),S=Math.sin(m),w=p.HOVERARROWSIZE,E=p.HOVERTEXTPAD,C={box:!0,ohlc:!0,violin:!0,candlestick:!0},O={scatter:!0,scattergl:!0,splom:!0};function P(te,ae){return te.distance-ae.distance}function z(te){return[te.trace.index,te.index,te.x0,te.y0,te.name,te.attr,te.xa?te.xa._id:"",te.ya?te.ya._id:""].join(",")}R.hover=function(te,ae,se,ce){te=T.getGraphDiv(te);var fe=ae.target;T.throttle(te._fullLayout._uid+p.HOVERID,p.HOVERMINTIME,function(){(function(pe,ge,me,be,ke){me||(me="xy"),typeof me=="string"&&(me=me.split(h)[0]);var ze,ve,oe,ie=Array.isArray(me)?me:[me],he=pe._fullLayout,Se=he.hoversubplots,ye=he._plots||[],we=ye[me],Me=he._has("cartesian"),Oe=ge.hovermode||he.hovermode,Ie=(Oe||"").charAt(0)==="x",de=(Oe||"").charAt(0)==="y";if(Me&&(Ie||de)&&Se==="axis"){for(var _e=ie.length,Ae=0;Ae<_e;Ae++)if(ye[ze=ie[Ae]]){ve=u.getFromId(pe,ze,"x"),oe=u.getFromId(pe,ze,"y");var Pe=(Ie?ve:oe)._subplotsWith;if(Pe&&Pe.length)for(var Ee=0;Ee<Pe.length;Ee++)b(ie,Pe[Ee])}}if(we&&Se!=="single"){var Fe=we.overlays.map(function(Rt){return Rt.id});ie=ie.concat(Fe)}for(var Ve=ie.length,Ye=new Array(Ve),tt=new Array(Ve),nt=!1,ht=0;ht<Ve;ht++)if(ye[ze=ie[ht]])nt=!0,Ye[ht]=ye[ze].xaxis,tt[ht]=ye[ze].yaxis;else{if(!he[ze]||!he[ze]._subplot)return void T.warn("Unrecognized subplot: "+ze);var vt=he[ze]._subplot;Ye[ht]=vt.xaxis,tt[ht]=vt.yaxis}if(Oe&&!nt&&(Oe="closest"),["x","y","closest","x unified","y unified"].indexOf(Oe)===-1||!pe.calcdata||pe.querySelector(".zoombox")||pe._dragging)return l.unhoverRaw(pe,ge);var pt=he.hoverdistance;pt===-1&&(pt=1/0);var Qe=he.spikedistance;Qe===-1&&(Qe=1/0);var Ke,Mt,Ot,Pt,St,He,We,Be,Ge,ot,it,dt,gt,je=[],Re=[],rt={hLinePoint:null,vLinePoint:null},ct=!1;if(Array.isArray(ge))for(Oe="array",Ot=0;Ot<ge.length;Ot++)(St=pe.calcdata[ge[Ot].curveNumber||0])&&(He=St[0].trace,St[0].trace.hoverinfo!=="skip"&&(Re.push(St),He.orientation==="h"&&(ct=!0)));else{var ut,et,xt=pe.calcdata.slice();for(xt.sort(function(Rt,Zt){return(Rt[0].trace.zorder||0)-(Zt[0].trace.zorder||0)}),Pt=0;Pt<xt.length;Pt++)St=xt[Pt],(He=St[0].trace).hoverinfo!=="skip"&&x.isTraceInSubplots(He,ie)&&(Re.push(St),He.orientation==="h"&&(ct=!0));if(ke){if(t.triggerHandler(pe,"plotly_beforehover",ge)===!1)return;var mt=ke.getBoundingClientRect();ut=ge.clientX-mt.left,et=ge.clientY-mt.top,he._calcInverseTransform(pe);var Tt=T.apply3DTransform(he._invTransform)(ut,et);if(ut=Tt[0],et=Tt[1],ut<0||ut>Ye[0]._length||et<0||et>tt[0]._length)return l.unhoverRaw(pe,ge)}else ut="xpx"in ge?ge.xpx:Ye[0]._length/2,et="ypx"in ge?ge.ypx:tt[0]._length/2;if(ge.pointerX=ut+Ye[0]._offset,ge.pointerY=et+tt[0]._offset,Ke="xval"in ge?x.flat(ie,ge.xval):x.p2c(Ye,ut),Mt="yval"in ge?x.flat(ie,ge.yval):x.p2c(tt,et),!k(Ke[0])||!k(Mt[0]))return T.warn("Fx.hover failed",ge,pe),l.unhoverRaw(pe,ge)}var yt=1/0;function bt(Rt,Zt){for(Pt=0;Pt<Re.length;Pt++)if((St=Re[Pt])&&St[0]&&St[0].trace&&(He=St[0].trace).visible===!0&&He._length!==0&&["carpet","contourcarpet"].indexOf(He._module.name)===-1){if(Ge=Oe,x.isUnifiedHover(Ge)&&(Ge=Ge.charAt(0)),He.type==="splom"?We=ie[Be=0]:(We=x.getSubplot(He),Be=ie.indexOf(We)),dt={cd:St,trace:He,xa:Ye[Be],ya:tt[Be],maxHoverDistance:pt,maxSpikeDistance:Qe,index:!1,distance:Math.min(yt,pt),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:a.defaultLine,name:He.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},he[We]&&(dt.subplot=he[We]._subplot),he._splomScenes&&he._splomScenes[He.uid]&&(dt.scene=he._splomScenes[He.uid]),Ge==="array"){var cn=ge[Pt];"pointNumber"in cn?(dt.index=cn.pointNumber,Ge="closest"):(Ge="","xval"in cn&&(ot=cn.xval,Ge="x"),"yval"in cn&&(it=cn.yval,Ge=Ge?"closest":"y"))}else Rt!==void 0&&Zt!==void 0?(ot=Rt,it=Zt):(ot=Ke[Be],it=Mt[Be]);if(gt=je.length,pt!==0)if(He._module&&He._module.hoverPoints){var fn=He._module.hoverPoints(dt,ot,it,Ge,{finiteRange:!0,hoverLayer:he._hoverlayer,hoversubplots:Se,gd:pe});if(fn)for(var _n,pn=0;pn<fn.length;pn++)_n=fn[pn],k(_n.x0)&&k(_n.y0)&&je.push(U(_n,Oe))}else T.log("Unrecognized trace type in hover:",He);if(Oe==="closest"&&je.length>gt&&(je.splice(0,gt),yt=je[0].distance),Me&&Qe!==0&&je.length===0){dt.distance=Qe,dt.index=!1;var sn=He._module.hoverPoints(dt,ot,it,"closest",{hoverLayer:he._hoverlayer});if(sn&&(sn=sn.filter(function(On){return On.spikeDistance<=Qe})),sn&&sn.length){var Nt,Ft=sn.filter(function(On){return On.xa.showspikes&&On.xa.spikesnap!=="hovered data"});if(Ft.length){var Qt=Ft[0];k(Qt.x0)&&k(Qt.y0)&&(Nt=Ut(Qt),(!rt.vLinePoint||rt.vLinePoint.spikeDistance>Nt.spikeDistance)&&(rt.vLinePoint=Nt))}var Tn=sn.filter(function(On){return On.ya.showspikes&&On.ya.spikesnap!=="hovered data"});if(Tn.length){var Pn=Tn[0];k(Pn.x0)&&k(Pn.y0)&&(Nt=Ut(Pn),(!rt.hLinePoint||rt.hLinePoint.spikeDistance>Nt.spikeDistance)&&(rt.hLinePoint=Nt))}}}}}function zt(Rt,Zt,cn){for(var fn,_n=null,pn=1/0,sn=0;sn<Rt.length;sn++)ve&&ve._id!==Rt[sn].xa._id||oe&&oe._id!==Rt[sn].ya._id||(fn=Rt[sn].spikeDistance,cn&&sn===0&&(fn=-1/0),fn<=pn&&fn<=Zt&&(_n=Rt[sn],pn=fn));return _n}function Ut(Rt){return Rt?{xa:Rt.xa,ya:Rt.ya,x:Rt.xSpike!==void 0?Rt.xSpike:(Rt.x0+Rt.x1)/2,y:Rt.ySpike!==void 0?Rt.ySpike:(Rt.y0+Rt.y1)/2,distance:Rt.distance,spikeDistance:Rt.spikeDistance,curveNumber:Rt.trace.index,color:Rt.color,pointNumber:Rt.index}:null}bt();var en={fullLayout:he,container:he._hoverlayer,event:ge};pe._spikepoints;var an={vLinePoint:rt.vLinePoint,hLinePoint:rt.hLinePoint};pe._spikepoints=an;var rn=function(){var Rt=je.filter(function(cn){return ve&&ve._id===cn.xa._id&&oe&&oe._id===cn.ya._id}),Zt=je.filter(function(cn){return!(ve&&ve._id===cn.xa._id&&oe&&oe._id===cn.ya._id)});Rt.sort(P),Zt.sort(P),je=function(cn,fn){for(var _n=fn.charAt(0),pn=[],sn=[],Nt=[],Ft=0;Ft<cn.length;Ft++){var Qt=cn[Ft];c.traceIs(Qt.trace,"bar-like")||c.traceIs(Qt.trace,"box-violin")?Nt.push(Qt):Qt.trace[_n+"period"]?sn.push(Qt):pn.push(Qt)}return pn.concat(sn).concat(Nt)}(je=Rt.concat(Zt),Oe)};rn();var qt=Oe.charAt(0),Kt=(qt==="x"||qt==="y")&&je[0]&&O[je[0].trace.type];if(Me&&Qe!==0&&je.length!==0){var xn=zt(je.filter(function(Rt){return Rt.ya.showspikes}),Qe,Kt);rt.hLinePoint=Ut(xn);var on=zt(je.filter(function(Rt){return Rt.xa.showspikes}),Qe,Kt);rt.vLinePoint=Ut(on)}if(je.length===0){var Xt=l.unhoverRaw(pe,ge);return!Me||rt.hLinePoint===null&&rt.vLinePoint===null||H(pe,rt,en),Xt}if(Me&&ne()&&H(pe,rt,en),x.isXYhover(Ge)&&je[0].length!==0&&je[0].trace.type!=="splom"){var ln=je[0],Jt=(je=C[ln.trace.type]?je.filter(function(Rt){return Rt.trace.index===ln.trace.index}):[ln]).length;bt(K("x",ln,he),K("y",ln,he));var tn,wn=[],mn={},Cn=0,yn=function(Rt){var Zt=C[Rt.trace.type]?z(Rt):Rt.trace.index;if(mn[Zt]){var cn=mn[Zt]-1,fn=wn[cn];cn>0&&Math.abs(Rt.distance)<Math.abs(fn.distance)&&(wn[cn]=Rt)}else Cn++,mn[Zt]=Cn,wn.push(Rt)};for(tn=0;tn<Jt;tn++)yn(je[tn]);for(tn=je.length-1;tn>Jt-1;tn--)yn(je[tn]);je=wn,rn()}var Mn=pe._hoverdata,zn=[],Wn=Q(pe),sr=Z(pe);for(Ot=0;Ot<je.length;Ot++){var Fn=je[Ot],Yn=x.makeEventData(Fn,Fn.trace,Fn.cd);if(Fn.hovertemplate!==!1){var Xn=!1;Fn.cd[Fn.index]&&Fn.cd[Fn.index].ht&&(Xn=Fn.cd[Fn.index].ht),Fn.hovertemplate=Xn||Fn.trace.hovertemplate||!1}if(Fn.xa&&Fn.ya){var rr=Fn.x0+Fn.xa._offset,Yt=Fn.x1+Fn.xa._offset,$t=Fn.y0+Fn.ya._offset,Sn=Fn.y1+Fn.ya._offset,dn=Math.min(rr,Yt),En=Math.max(rr,Yt),Nn=Math.min($t,Sn),Bn=Math.max($t,Sn);Yn.bbox={x0:dn+sr,x1:En+sr,y0:Nn+Wn,y1:Bn+Wn}}Fn.eventData=[Yn],zn.push(Yn)}pe._hoverdata=zn;var $n=Oe==="y"&&(Re.length>1||je.length>1)||Oe==="closest"&&ct&&je.length>1,lr=a.combine(he.plot_bgcolor||a.background,he.paper_bgcolor),Gt=I(je,{gd:pe,hovermode:Oe,rotateLabels:$n,bgColor:lr,container:he._hoverlayer,outerContainer:he._paper.node(),commonLabelOpts:he.hoverlabel,hoverdistance:he.hoverdistance}),gn=Gt.hoverLabels;if(x.isUnifiedHover(Oe)||(function(Rt,Zt,cn,fn){var _n,pn,sn,Nt,Ft,Qt,Tn,Pn=Zt?"xa":"ya",On=Zt?"ya":"xa",Dn=0,Zn=1,qn=Rt.size(),Kn=new Array(qn),Un=0,Gn=fn.minX,ir=fn.maxX,mr=fn.minY,ur=fn.maxY,Qn=function(Pr){return Pr*cn._invScaleX},pr=function(Pr){return Pr*cn._invScaleY};function Tr(Pr){var Ri=Pr[0],Ma=Pr[Pr.length-1];if(pn=Ri.pmin-Ri.pos-Ri.dp+Ri.size,sn=Ma.pos+Ma.dp+Ma.size-Ri.pmax,pn>.01){for(Ft=Pr.length-1;Ft>=0;Ft--)Pr[Ft].dp+=pn;_n=!1}if(!(sn<.01)){if(pn<-.01){for(Ft=Pr.length-1;Ft>=0;Ft--)Pr[Ft].dp-=sn;_n=!1}if(_n){var Pi=0;for(Nt=0;Nt<Pr.length;Nt++)(Qt=Pr[Nt]).pos+Qt.dp+Qt.size>Ri.pmax&&Pi++;for(Nt=Pr.length-1;Nt>=0&&!(Pi<=0);Nt--)(Qt=Pr[Nt]).pos>Ri.pmax-1&&(Qt.del=!0,Pi--);for(Nt=0;Nt<Pr.length&&!(Pi<=0);Nt++)if((Qt=Pr[Nt]).pos<Ri.pmin+1)for(Qt.del=!0,Pi--,sn=2*Qt.size,Ft=Pr.length-1;Ft>=0;Ft--)Pr[Ft].dp-=sn;for(Nt=Pr.length-1;Nt>=0&&!(Pi<=0);Nt--)(Qt=Pr[Nt]).pos+Qt.dp+Qt.size>Ri.pmax&&(Qt.del=!0,Pi--)}}}for(Rt.each(function(Pr){var Ri=Pr[Pn],Ma=Pr[On],Pi=Ri._id.charAt(0)==="x",uo=Ri.range;Un===0&&uo&&uo[0]>uo[1]!==Pi&&(Zn=-1);var ko=0,Xi=Pi?cn.width:cn.height;if(cn.hovermode==="x"||cn.hovermode==="y"){var Ka,Ja,Ao=W(Pr,Zt),Sa=Pr.anchor,Ra=Sa==="end"?-1:1;if(Sa==="middle")Ja=(Ka=Pr.crossPos+(Pi?pr(Ao.y-Pr.by/2):Qn(Pr.bx/2+Pr.tx2width/2)))+(Pi?pr(Pr.by):Qn(Pr.bx));else if(Pi)Ja=(Ka=Pr.crossPos+pr(w+Ao.y)-pr(Pr.by/2-w))+pr(Pr.by);else{var Fa=Qn(Ra*w+Ao.x),ti=Fa+Qn(Ra*Pr.bx);Ka=Pr.crossPos+Math.min(Fa,ti),Ja=Pr.crossPos+Math.max(Fa,ti)}Pi?mr!==void 0&&ur!==void 0&&Math.min(Ja,ur)-Math.max(Ka,mr)>1&&(Ma.side==="left"?(ko=Ma._mainLinePosition,Xi=cn.width):Xi=Ma._mainLinePosition):Gn!==void 0&&ir!==void 0&&Math.min(Ja,ir)-Math.max(Ka,Gn)>1&&(Ma.side==="top"?(ko=Ma._mainLinePosition,Xi=cn.height):Xi=Ma._mainLinePosition)}Kn[Un++]=[{datum:Pr,traceIndex:Pr.trace.index,dp:0,pos:Pr.pos,posref:Pr.posref,size:Pr.by*(Pi?_:1)/2,pmin:ko,pmax:Xi}]}),Kn.sort(function(Pr,Ri){return Pr[0].posref-Ri[0].posref||Zn*(Ri[0].traceIndex-Pr[0].traceIndex)});!_n&&Dn<=qn;){for(Dn++,_n=!0,Nt=0;Nt<Kn.length-1;){var Or=Kn[Nt],oi=Kn[Nt+1],gi=Or[Or.length-1],Di=oi[0];if((pn=gi.pos+gi.dp+gi.size-Di.pos-Di.dp+Di.size)>.01){for(Ft=oi.length-1;Ft>=0;Ft--)oi[Ft].dp+=pn;for(Or.push.apply(Or,oi),Kn.splice(Nt+1,1),Tn=0,Ft=Or.length-1;Ft>=0;Ft--)Tn+=Or[Ft].dp;for(sn=Tn/Or.length,Ft=Or.length-1;Ft>=0;Ft--)Or[Ft].dp-=sn;_n=!1}else Nt++}Kn.forEach(Tr)}for(Nt=Kn.length-1;Nt>=0;Nt--){var ii=Kn[Nt];for(Ft=ii.length-1;Ft>=0;Ft--){var yi=ii[Ft],oa=yi.datum;oa.offset=yi.dp,oa.del=yi.del}}}(gn,$n,he,Gt.commonLabelBoundingBox),F(gn,$n,he._invScaleX,he._invScaleY)),ke&&ke.tagName){var Ct=c.getComponentMethod("annotations","hasClickToShow")(pe,zn);n(M.select(ke),Ct?"pointer":"")}ke&&!be&&function(Rt,Zt,cn){if(!cn||cn.length!==Rt._hoverdata.length)return!0;for(var fn=cn.length-1;fn>=0;fn--){var _n=cn[fn],pn=Rt._hoverdata[fn];if(_n.curveNumber!==pn.curveNumber||String(_n.pointNumber)!==String(pn.pointNumber)||String(_n.pointNumbers)!==String(pn.pointNumbers))return!0}return!1}(pe,0,Mn)&&(Mn&&pe.emit("plotly_unhover",{event:ge,points:Mn}),pe.emit("plotly_hover",{event:ge,points:pe._hoverdata,xaxes:Ye,yaxes:tt,xvals:Ke,yvals:Mt}))})(te,ae,se,ce,fe)})},R.loneHover=function(te,ae){var se=!0;Array.isArray(te)||(se=!1,te=[te]);var ce=ae.gd,fe=Q(ce),pe=Z(ce),ge=I(te.map(function(ke){var ze=ke._x0||ke.x0||ke.x||0,ve=ke._x1||ke.x1||ke.x||0,oe=ke._y0||ke.y0||ke.y||0,ie=ke._y1||ke.y1||ke.y||0,he=ke.eventData;if(he){var Se=Math.min(ze,ve),ye=Math.max(ze,ve),we=Math.min(oe,ie),Me=Math.max(oe,ie),Oe=ke.trace;if(c.traceIs(Oe,"gl3d")){var Ie=ce._fullLayout[Oe.scene]._scene.container,de=Ie.offsetLeft,_e=Ie.offsetTop;Se+=de,ye+=de,we+=_e,Me+=_e}he.bbox={x0:Se+pe,x1:ye+pe,y0:we+fe,y1:Me+fe},ae.inOut_bbox&&ae.inOut_bbox.push(he.bbox)}else he=!1;return{color:ke.color||a.defaultLine,x0:ke.x0||ke.x||0,x1:ke.x1||ke.x||0,y0:ke.y0||ke.y||0,y1:ke.y1||ke.y||0,xLabel:ke.xLabel,yLabel:ke.yLabel,zLabel:ke.zLabel,text:ke.text,name:ke.name,idealAlign:ke.idealAlign,borderColor:ke.borderColor,fontFamily:ke.fontFamily,fontSize:ke.fontSize,fontColor:ke.fontColor,fontWeight:ke.fontWeight,fontStyle:ke.fontStyle,fontVariant:ke.fontVariant,nameLength:ke.nameLength,textAlign:ke.textAlign,trace:ke.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:ke.hovertemplate||!1,hovertemplateLabels:ke.hovertemplateLabels||!1,eventData:he}}),{gd:ce,hovermode:"closest",rotateLabels:!1,bgColor:ae.bgColor||a.background,container:M.select(ae.container),outerContainer:ae.outerContainer||ae.container}).hoverLabels,me=0,be=0;return ge.sort(function(ke,ze){return ke.y0-ze.y0}).each(function(ke,ze){var ve=ke.y0-ke.by/2;ke.offset=ve-5<me?me-ve+5:0,me=ve+ke.by+ke.offset,ze===ae.anchorIndex&&(be=ke.offset)}).each(function(ke){ke.offset-=be}),F(ge,!1,ce._fullLayout._invScaleX,ce._fullLayout._invScaleY),se?ge:ge.node()};var j=/<extra>([\s\S]*)<\/extra>/;function I(te,ae){var se=ae.gd,ce=se._fullLayout,fe=ae.hovermode,pe=ae.rotateLabels,ge=ae.bgColor,me=ae.container,be=ae.outerContainer,ke=ae.commonLabelOpts||{};if(te.length===0)return[[]];var ze=ae.fontFamily||p.HOVERFONT,ve=ae.fontSize||p.HOVERFONTSIZE,oe=ae.fontWeight||ce.font.weight,ie=ae.fontStyle||ce.font.style,he=ae.fontVariant||ce.font.variant,Se=ae.fontTextcase||ce.font.textcase,ye=ae.fontLineposition||ce.font.lineposition,we=ae.fontShadow||ce.font.shadow,Me=te[0],Oe=Me.xa,Ie=Me.ya,de=fe.charAt(0),_e=de+"Label",Ae=Me[_e];if(Ae===void 0&&Oe.type==="multicategory")for(var Pe=0;Pe<te.length&&(Ae=te[Pe][_e])===void 0;Pe++);var Ee=X(se,be),Fe=Ee.top,Ve=Ee.width,Ye=Ee.height,tt=Ae!==void 0&&Me.distance<=ae.hoverdistance&&(fe==="x"||fe==="y");if(tt){var nt,ht,vt=!0;for(nt=0;nt<te.length;nt++)if(vt&&te[nt].zLabel===void 0&&(vt=!1),ht=te[nt].hoverinfo||te[nt].trace.hoverinfo){var pt=Array.isArray(ht)?ht:ht.split("+");if(pt.indexOf("all")===-1&&pt.indexOf(fe)===-1){tt=!1;break}}vt&&(tt=!1)}var Qe=me.selectAll("g.axistext").data(tt?[0]:[]);Qe.enter().append("g").classed("axistext",!0),Qe.exit().remove();var Ke={minX:0,maxX:0,minY:0,maxY:0};if(Qe.each(function(){var Kt=M.select(this),xn=T.ensureSingle(Kt,"path","",function(En){En.style({"stroke-width":"1px"})}),on=T.ensureSingle(Kt,"text","",function(En){En.attr("data-notex",1)}),Xt=ke.bgcolor||a.defaultLine,ln=ke.bordercolor||a.contrast(Xt),Jt=a.contrast(Xt),tn=ke.font,wn={weight:tn.weight||oe,style:tn.style||ie,variant:tn.variant||he,textcase:tn.textcase||Se,lineposition:tn.lineposition||ye,shadow:tn.shadow||we,family:tn.family||ze,size:tn.size||ve,color:tn.color||Jt};xn.style({fill:Xt,stroke:ln}),on.text(Ae).call(r.font,wn).call(i.positionText,0,0).call(i.convertToTspans,se),Kt.attr("transform","");var mn,Cn,yn=X(se,on.node());if(fe==="x"){var Mn=Oe.side==="top"?"-":"";on.attr("text-anchor","middle").call(i.positionText,0,Oe.side==="top"?Fe-yn.bottom-w-E:Fe-yn.top+w+E),mn=Oe._offset+(Me.x0+Me.x1)/2,Cn=Ie._offset+(Oe.side==="top"?0:Ie._length);var zn=yn.width/2+E,Wn=mn;mn<zn?Wn=zn:mn>ce.width-zn&&(Wn=ce.width-zn),xn.attr("d","M"+(mn-Wn)+",0L"+(mn-Wn+w)+","+Mn+w+"H"+zn+"v"+Mn+(2*E+yn.height)+"H"+-zn+"V"+Mn+w+"H"+(mn-Wn-w)+"Z"),mn=Wn,Ke.minX=mn-zn,Ke.maxX=mn+zn,Oe.side==="top"?(Ke.minY=Cn-(2*E+yn.height),Ke.maxY=Cn-E):(Ke.minY=Cn+E,Ke.maxY=Cn+(2*E+yn.height))}else{var sr,Fn,Yn;Ie.side==="right"?(sr="start",Fn=1,Yn="",mn=Oe._offset+Oe._length):(sr="end",Fn=-1,Yn="-",mn=Oe._offset),Cn=Ie._offset+(Me.y0+Me.y1)/2,on.attr("text-anchor",sr),xn.attr("d","M0,0L"+Yn+w+","+w+"V"+(E+yn.height/2)+"h"+Yn+(2*E+yn.width)+"V-"+(E+yn.height/2)+"H"+Yn+w+"V-"+w+"Z"),Ke.minY=Cn-(E+yn.height/2),Ke.maxY=Cn+(E+yn.height/2),Ie.side==="right"?(Ke.minX=mn+w,Ke.maxX=mn+w+(2*E+yn.width)):(Ke.minX=mn-w-(2*E+yn.width),Ke.maxX=mn-w);var Xn,rr=yn.height/2,Yt=Fe-yn.top-rr,$t="clip"+ce._uid+"commonlabel"+Ie._id;if(mn<yn.width+2*E+w){Xn="M-"+(w+E)+"-"+rr+"h-"+(yn.width-E)+"V"+rr+"h"+(yn.width-E)+"Z";var Sn=yn.width-mn+E;i.positionText(on,Sn,Yt),sr==="end"&&on.selectAll("tspan").each(function(){var En=M.select(this),Nn=r.tester.append("text").text(En.text()).call(r.font,wn),Bn=X(se,Nn.node());Math.round(Bn.width)<Math.round(yn.width)&&En.attr("x",Sn-Bn.width),Nn.remove()})}else i.positionText(on,Fn*(E+w),Yt),Xn=null;var dn=ce._topclips.selectAll("#"+$t).data(Xn?[0]:[]);dn.enter().append("clipPath").attr("id",$t).append("path"),dn.exit().remove(),dn.select("path").attr("d",Xn),r.setClipUrl(on,Xn?$t:null,se)}Kt.attr("transform",f(mn,Cn))}),x.isUnifiedHover(fe)){me.selectAll("g.hovertext").remove();var Mt=te.filter(function(Kt){return Kt.hoverinfo!=="none"});if(Mt.length===0)return[];var Ot=ce.hoverlabel,Pt=Ot.font,St={showlegend:!0,legend:{title:{text:Ae,font:Pt},font:Pt,bgcolor:Ot.bgcolor,bordercolor:Ot.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:ce.legend?ce.legend.traceorder:void 0,orientation:"v"}},He={font:Pt};v(St,He,se._fullData);var We=He.legend;We.entries=[];for(var Be=0;Be<Mt.length;Be++){var Ge=Mt[Be];if(Ge.hoverinfo!=="none"){var ot=N(Ge,!0,fe,ce,Ae),it=ot[0],dt=ot[1];Ge.name=dt,Ge.text=dt!==""?dt+" : "+it:it;var gt=Ge.cd[Ge.index];gt&&(gt.mc&&(Ge.mc=gt.mc),gt.mcc&&(Ge.mc=gt.mcc),gt.mlc&&(Ge.mlc=gt.mlc),gt.mlcc&&(Ge.mlc=gt.mlcc),gt.mlw&&(Ge.mlw=gt.mlw),gt.mrc&&(Ge.mrc=gt.mrc),gt.dir&&(Ge.dir=gt.dir)),Ge._distinct=!0,We.entries.push([Ge])}}We.entries.sort(function(Kt,xn){return Kt[0].trace.index-xn[0].trace.index}),We.layer=me,We._inHover=!0,We._groupTitleFont=Ot.grouptitlefont,g(se,We);var je,Re,rt,ct,ut=me.select("g.legend"),et=X(se,ut.node()),xt=et.width+2*E,mt=et.height+2*E,Tt=Mt[0],yt=(Tt.x0+Tt.x1)/2,bt=(Tt.y0+Tt.y1)/2,zt=!(c.traceIs(Tt.trace,"bar-like")||c.traceIs(Tt.trace,"box-violin"));de==="y"?zt?(Re=bt-E,je=bt+E):(Re=Math.min.apply(null,Mt.map(function(Kt){return Math.min(Kt.y0,Kt.y1)})),je=Math.max.apply(null,Mt.map(function(Kt){return Math.max(Kt.y0,Kt.y1)}))):Re=je=T.mean(Mt.map(function(Kt){return(Kt.y0+Kt.y1)/2}))-mt/2,de==="x"?zt?(rt=yt+E,ct=yt-E):(rt=Math.max.apply(null,Mt.map(function(Kt){return Math.max(Kt.x0,Kt.x1)})),ct=Math.min.apply(null,Mt.map(function(Kt){return Math.min(Kt.x0,Kt.x1)}))):rt=ct=T.mean(Mt.map(function(Kt){return(Kt.x0+Kt.x1)/2}))-xt/2;var Ut,en,an=Oe._offset,rn=Ie._offset;return ct+=an-xt,Re+=rn-mt,Ut=(rt+=an)+xt<Ve&&rt>=0?rt:ct+xt<Ve&&ct>=0?ct:an+xt<Ve?an:rt-yt<yt-ct+xt?Ve-xt:0,Ut+=E,en=(je+=rn)+mt<Ye&&je>=0?je:Re+mt<Ye&&Re>=0?Re:rn+mt<Ye?rn:je-bt<bt-Re+mt?Ye-mt:0,en+=E,ut.attr("transform",f(Ut-1,en-1)),ut}var qt=me.selectAll("g.hovertext").data(te,function(Kt){return z(Kt)});return qt.enter().append("g").classed("hovertext",!0).each(function(){var Kt=M.select(this);Kt.append("rect").call(a.fill,a.addOpacity(ge,.8)),Kt.append("text").classed("name",!0),Kt.append("path").style("stroke-width","1px"),Kt.append("text").classed("nums",!0).call(r.font,{weight:oe,style:ie,variant:he,textcase:Se,lineposition:ye,shadow:we,family:ze,size:ve})}),qt.exit().remove(),qt.each(function(Kt){var xn=M.select(this).attr("transform",""),on=Kt.color;Array.isArray(on)&&(on=on[Kt.eventData[0].pointNumber]);var Xt=Kt.bgcolor||on,ln=a.combine(a.opacity(Xt)?Xt:a.defaultLine,ge),Jt=a.combine(a.opacity(on)?on:a.defaultLine,ge),tn=Kt.borderColor||a.contrast(ln),wn=N(Kt,tt,fe,ce,Ae,xn),mn=wn[0],Cn=wn[1],yn=xn.select("text.nums").call(r.font,{family:Kt.fontFamily||ze,size:Kt.fontSize||ve,color:Kt.fontColor||tn,weight:Kt.fontWeight||oe,style:Kt.fontStyle||ie,variant:Kt.fontVariant||he,textcase:Kt.fontTextcase||Se,lineposition:Kt.fontLineposition||ye,shadow:Kt.fontShadow||we}).text(mn).attr("data-notex",1).call(i.positionText,0,0).call(i.convertToTspans,se),Mn=xn.select("text.name"),zn=0,Wn=0;if(Cn&&Cn!==mn){Mn.call(r.font,{family:Kt.fontFamily||ze,size:Kt.fontSize||ve,color:Jt,weight:Kt.fontWeight||oe,style:Kt.fontStyle||ie,variant:Kt.fontVariant||he,textcase:Kt.fontTextcase||Se,lineposition:Kt.fontLineposition||ye,shadow:Kt.fontShadow||we}).text(Cn).attr("data-notex",1).call(i.positionText,0,0).call(i.convertToTspans,se);var sr=X(se,Mn.node());zn=sr.width+2*E,Wn=sr.height+2*E}else Mn.remove(),xn.select("rect").remove();xn.select("path").style({fill:ln,stroke:tn});var Fn=Kt.xa._offset+(Kt.x0+Kt.x1)/2,Yn=Kt.ya._offset+(Kt.y0+Kt.y1)/2,Xn=Math.abs(Kt.x1-Kt.x0),rr=Math.abs(Kt.y1-Kt.y0),Yt=X(se,yn.node()),$t=Yt.width/ce._invScaleX,Sn=Yt.height/ce._invScaleY;Kt.ty0=(Fe-Yt.top)/ce._invScaleY,Kt.bx=$t+2*E,Kt.by=Math.max(Sn+2*E,Wn),Kt.anchor="start",Kt.txwidth=$t,Kt.tx2width=zn,Kt.offset=0;var dn,En,Nn=($t+w+E+zn)*ce._invScaleX;if(pe)Kt.pos=Fn,dn=Yn+rr/2+Nn<=Ye,En=Yn-rr/2-Nn>=0,Kt.idealAlign!=="top"&&dn||!En?dn?(Yn+=rr/2,Kt.anchor="start"):Kt.anchor="middle":(Yn-=rr/2,Kt.anchor="end"),Kt.crossPos=Yn;else{if(Kt.pos=Yn,dn=Fn+Xn/2+Nn<=Ve,En=Fn-Xn/2-Nn>=0,Kt.idealAlign!=="left"&&dn||!En)if(dn)Fn+=Xn/2,Kt.anchor="start";else{Kt.anchor="middle";var Bn=Nn/2,$n=Fn+Bn-Ve,lr=Fn-Bn;$n>0&&(Fn-=$n),lr<0&&(Fn+=-lr)}else Fn-=Xn/2,Kt.anchor="end";Kt.crossPos=Fn}yn.attr("text-anchor",Kt.anchor),zn&&Mn.attr("text-anchor",Kt.anchor),xn.attr("transform",f(Fn,Yn)+(pe?o(y):""))}),{hoverLabels:qt,commonLabelBoundingBox:Ke}}function N(te,ae,se,ce,fe,pe){var ge="",me="";te.nameOverride!==void 0&&(te.name=te.nameOverride),te.name&&(te.trace._meta&&(te.name=T.templateString(te.name,te.trace._meta)),ge=$(te.name,te.nameLength));var be=se.charAt(0),ke=be==="x"?"y":"x";te.zLabel!==void 0?(te.xLabel!==void 0&&(me+="x: "+te.xLabel+"<br>"),te.yLabel!==void 0&&(me+="y: "+te.yLabel+"<br>"),te.trace.type!=="choropleth"&&te.trace.type!=="choroplethmapbox"&&(me+=(me?"z: ":"")+te.zLabel)):ae&&te[be+"Label"]===fe?me=te[ke+"Label"]||"":te.xLabel===void 0?te.yLabel!==void 0&&te.trace.type!=="scattercarpet"&&(me=te.yLabel):me=te.yLabel===void 0?te.xLabel:"("+te.xLabel+", "+te.yLabel+")",!te.text&&te.text!==0||Array.isArray(te.text)||(me+=(me?"<br>":"")+te.text),te.extraText!==void 0&&(me+=(me?"<br>":"")+te.extraText),pe&&me===""&&!te.hovertemplate&&(ge===""&&pe.remove(),me=ge);var ze=te.hovertemplate||!1;if(ze){var ve=te.hovertemplateLabels||te;te[be+"Label"]!==fe&&(ve[be+"other"]=ve[be+"Val"],ve[be+"otherLabel"]=ve[be+"Label"]),me=(me=T.hovertemplateString(ze,ve,ce._d3locale,te.eventData[0]||{},te.trace._meta)).replace(j,function(oe,ie){return ge=$(ie,te.nameLength),""})}return[me,ge]}function W(te,ae){var se=0,ce=te.offset;return ae&&(ce*=-S,se=te.offset*d),{x:se,y:ce}}function F(te,ae,se,ce){var fe=function(ge){return ge*se},pe=function(ge){return ge*ce};te.each(function(ge){var me=M.select(this);if(ge.del)return me.remove();var be,ke,ze,ve,oe=me.select("text.nums"),ie=ge.anchor,he=ie==="end"?-1:1,Se=(ve=(ze=(ke={start:1,end:-1,middle:0}[(be=ge).anchor])*(w+E))+ke*(be.txwidth+E),be.anchor==="middle"&&(ze-=be.tx2width/2,ve+=be.txwidth/2+E),{alignShift:ke,textShiftX:ze,text2ShiftX:ve}),ye=W(ge,ae),we=ye.x,Me=ye.y,Oe=ie==="middle";me.select("path").attr("d",Oe?"M-"+fe(ge.bx/2+ge.tx2width/2)+","+pe(Me-ge.by/2)+"h"+fe(ge.bx)+"v"+pe(ge.by)+"h-"+fe(ge.bx)+"Z":"M0,0L"+fe(he*w+we)+","+pe(w+Me)+"v"+pe(ge.by/2-w)+"h"+fe(he*ge.bx)+"v-"+pe(ge.by)+"H"+fe(he*w+we)+"V"+pe(Me-w)+"Z");var Ie=we+Se.textShiftX,de=Me+ge.ty0-ge.by/2+E,_e=ge.textAlign||"auto";_e!=="auto"&&(_e==="left"&&ie!=="start"?(oe.attr("text-anchor","start"),Ie=Oe?-ge.bx/2-ge.tx2width/2+E:-ge.bx-E):_e==="right"&&ie!=="end"&&(oe.attr("text-anchor","end"),Ie=Oe?ge.bx/2-ge.tx2width/2-E:ge.bx+E)),oe.call(i.positionText,fe(Ie),pe(de)),ge.tx2width&&(me.select("text.name").call(i.positionText,fe(Se.text2ShiftX+Se.alignShift*E+we),pe(Me+ge.ty0-ge.by/2+E)),me.select("rect").call(r.setRect,fe(Se.text2ShiftX+(Se.alignShift-1)*ge.tx2width/2+we),pe(Me-ge.by/2-1),fe(ge.tx2width),pe(ge.by+2)))})}function U(te,ae){var se=te.index,ce=te.trace||{},fe=te.cd[0],pe=te.cd[se]||{};function ge(oe){return oe||k(oe)&&oe===0}var me=Array.isArray(se)?function(oe,ie){var he=T.castOption(fe,se,oe);return ge(he)?he:T.extractOption({},ce,"",ie)}:function(oe,ie){return T.extractOption(pe,ce,oe,ie)};function be(oe,ie,he){var Se=me(ie,he);ge(Se)&&(te[oe]=Se)}if(be("hoverinfo","hi","hoverinfo"),be("bgcolor","hbg","hoverlabel.bgcolor"),be("borderColor","hbc","hoverlabel.bordercolor"),be("fontFamily","htf","hoverlabel.font.family"),be("fontSize","hts","hoverlabel.font.size"),be("fontColor","htc","hoverlabel.font.color"),be("fontWeight","htw","hoverlabel.font.weight"),be("fontStyle","hty","hoverlabel.font.style"),be("fontVariant","htv","hoverlabel.font.variant"),be("nameLength","hnl","hoverlabel.namelength"),be("textAlign","hta","hoverlabel.align"),te.posref=ae==="y"||ae==="closest"&&ce.orientation==="h"?te.xa._offset+(te.x0+te.x1)/2:te.ya._offset+(te.y0+te.y1)/2,te.x0=T.constrain(te.x0,0,te.xa._length),te.x1=T.constrain(te.x1,0,te.xa._length),te.y0=T.constrain(te.y0,0,te.ya._length),te.y1=T.constrain(te.y1,0,te.ya._length),te.xLabelVal!==void 0&&(te.xLabel="xLabel"in te?te.xLabel:u.hoverLabelText(te.xa,te.xLabelVal,ce.xhoverformat),te.xVal=te.xa.c2d(te.xLabelVal)),te.yLabelVal!==void 0&&(te.yLabel="yLabel"in te?te.yLabel:u.hoverLabelText(te.ya,te.yLabelVal,ce.yhoverformat),te.yVal=te.ya.c2d(te.yLabelVal)),te.zLabelVal!==void 0&&te.zLabel===void 0&&(te.zLabel=String(te.zLabelVal)),!(isNaN(te.xerr)||te.xa.type==="log"&&te.xerr<=0)){var ke=u.tickText(te.xa,te.xa.c2l(te.xerr),"hover").text;te.xerrneg!==void 0?te.xLabel+=" +"+ke+" / -"+u.tickText(te.xa,te.xa.c2l(te.xerrneg),"hover").text:te.xLabel+="  "+ke,ae==="x"&&(te.distance+=1)}if(!(isNaN(te.yerr)||te.ya.type==="log"&&te.yerr<=0)){var ze=u.tickText(te.ya,te.ya.c2l(te.yerr),"hover").text;te.yerrneg!==void 0?te.yLabel+=" +"+ze+" / -"+u.tickText(te.ya,te.ya.c2l(te.yerrneg),"hover").text:te.yLabel+="  "+ze,ae==="y"&&(te.distance+=1)}var ve=te.hoverinfo||te.trace.hoverinfo;return ve&&ve!=="all"&&((ve=Array.isArray(ve)?ve:ve.split("+")).indexOf("x")===-1&&(te.xLabel=void 0),ve.indexOf("y")===-1&&(te.yLabel=void 0),ve.indexOf("z")===-1&&(te.zLabel=void 0),ve.indexOf("text")===-1&&(te.text=void 0),ve.indexOf("name")===-1&&(te.name=void 0)),te}function H(te,ae,se){var ce,fe,pe=se.container,ge=se.fullLayout,me=ge._size,be=se.event,ke=!!ae.hLinePoint,ze=!!ae.vLinePoint;if(pe.selectAll(".spikeline").remove(),ze||ke){var ve=a.combine(ge.plot_bgcolor,ge.paper_bgcolor);if(ke){var oe,ie,he=ae.hLinePoint;ce=he&&he.xa,(fe=he&&he.ya).spikesnap==="cursor"?(oe=be.pointerX,ie=be.pointerY):(oe=ce._offset+he.x,ie=fe._offset+he.y);var Se,ye,we=s.readability(he.color,ve)<1.5?a.contrast(ve):he.color,Me=fe.spikemode,Oe=fe.spikethickness,Ie=fe.spikecolor||we,de=u.getPxPosition(te,fe);if(Me.indexOf("toaxis")!==-1||Me.indexOf("across")!==-1){if(Me.indexOf("toaxis")!==-1&&(Se=de,ye=oe),Me.indexOf("across")!==-1){var _e=fe._counterDomainMin,Ae=fe._counterDomainMax;fe.anchor==="free"&&(_e=Math.min(_e,fe.position),Ae=Math.max(Ae,fe.position)),Se=me.l+_e*me.w,ye=me.l+Ae*me.w}pe.insert("line",":first-child").attr({x1:Se,x2:ye,y1:ie,y2:ie,"stroke-width":Oe,stroke:Ie,"stroke-dasharray":r.dashStyle(fe.spikedash,Oe)}).classed("spikeline",!0).classed("crisp",!0),pe.insert("line",":first-child").attr({x1:Se,x2:ye,y1:ie,y2:ie,"stroke-width":Oe+2,stroke:ve}).classed("spikeline",!0).classed("crisp",!0)}Me.indexOf("marker")!==-1&&pe.insert("circle",":first-child").attr({cx:de+(fe.side!=="right"?Oe:-Oe),cy:ie,r:Oe,fill:Ie}).classed("spikeline",!0)}if(ze){var Pe,Ee,Fe=ae.vLinePoint;ce=Fe&&Fe.xa,fe=Fe&&Fe.ya,ce.spikesnap==="cursor"?(Pe=be.pointerX,Ee=be.pointerY):(Pe=ce._offset+Fe.x,Ee=fe._offset+Fe.y);var Ve,Ye,tt=s.readability(Fe.color,ve)<1.5?a.contrast(ve):Fe.color,nt=ce.spikemode,ht=ce.spikethickness,vt=ce.spikecolor||tt,pt=u.getPxPosition(te,ce);if(nt.indexOf("toaxis")!==-1||nt.indexOf("across")!==-1){if(nt.indexOf("toaxis")!==-1&&(Ve=pt,Ye=Ee),nt.indexOf("across")!==-1){var Qe=ce._counterDomainMin,Ke=ce._counterDomainMax;ce.anchor==="free"&&(Qe=Math.min(Qe,ce.position),Ke=Math.max(Ke,ce.position)),Ve=me.t+(1-Ke)*me.h,Ye=me.t+(1-Qe)*me.h}pe.insert("line",":first-child").attr({x1:Pe,x2:Pe,y1:Ve,y2:Ye,"stroke-width":ht,stroke:vt,"stroke-dasharray":r.dashStyle(ce.spikedash,ht)}).classed("spikeline",!0).classed("crisp",!0),pe.insert("line",":first-child").attr({x1:Pe,x2:Pe,y1:Ve,y2:Ye,"stroke-width":ht+2,stroke:ve}).classed("spikeline",!0).classed("crisp",!0)}nt.indexOf("marker")!==-1&&pe.insert("circle",":first-child").attr({cx:Pe,cy:pt-(ce.side!=="top"?ht:-ht),r:ht,fill:vt}).classed("spikeline",!0)}}}function ne(te,ae){return!ae}function $(te,ae){return i.plainText(te||"",{len:ae,allowedTags:["br","sub","sup","b","i","em","s","u"]})}function K(te,ae,se){var ce=ae[te+"a"],fe=ae[te+"Val"],pe=ae.cd[0];if(ce.type==="category"||ce.type==="multicategory")fe=ce._categoriesMap[fe];else if(ce.type==="date"){var ge=ae.trace[te+"periodalignment"];if(ge){var me=ae.cd[ae.index],be=me[te+"Start"];be===void 0&&(be=me[te]);var ke=me[te+"End"];ke===void 0&&(ke=me[te]);var ze=ke-be;ge==="end"?fe+=ze:ge==="middle"&&(fe+=ze/2)}fe=ce.d2c(fe)}return pe&&pe.t&&pe.t.posLetter===ce._id&&(se.boxmode!=="group"&&se.violinmode!=="group"||(fe+=pe.t.dPos)),fe}function Q(te){return te.offsetTop+te.clientTop}function Z(te){return te.offsetLeft+te.clientLeft}function X(te,ae){var se=te._fullLayout,ce=ae.getBoundingClientRect(),fe=ce.left,pe=ce.top,ge=fe+ce.width,me=pe+ce.height,be=T.apply3DTransform(se._invTransform)(fe,pe),ke=T.apply3DTransform(se._invTransform)(ge,me),ze=be[0],ve=be[1],oe=ke[0],ie=ke[1];return{x:ze,y:ve,width:oe-ze,height:ie-ve,top:Math.min(ve,ie),left:Math.min(ze,oe),right:Math.max(ze,oe),bottom:Math.max(ve,ie)}}},16132:function(ee,R,e){var M=e(3400),k=e(76308),s=e(10624).isUnifiedHover;ee.exports=function(T,b,f,o){o=o||{};var t=b.legend;function i(n){o.font[n]||(o.font[n]=t?b.legend.font[n]:b.font[n])}b&&s(b.hovermode)&&(o.font||(o.font={}),i("size"),i("family"),i("color"),i("weight"),i("style"),i("variant"),t?(o.bgcolor||(o.bgcolor=k.combine(b.legend.bgcolor,b.paper_bgcolor)),o.bordercolor||(o.bordercolor=b.legend.bordercolor)):o.bgcolor||(o.bgcolor=b.paper_bgcolor)),f("hoverlabel.bgcolor",o.bgcolor),f("hoverlabel.bordercolor",o.bordercolor),f("hoverlabel.namelength",o.namelength),M.coerceFont(f,"hoverlabel.font",o.font),f("hoverlabel.align",o.align)}},41008:function(ee,R,e){var M=e(3400),k=e(65460);ee.exports=function(s,T){function b(f,o){return T[f]!==void 0?T[f]:M.coerce(s,T,k,f,o)}return b("clickmode"),b("hoversubplots"),b("hovermode")}},93024:function(ee,R,e){var M=e(33428),k=e(3400),s=e(86476),T=e(10624),b=e(65460),f=e(83292);ee.exports={moduleType:"component",name:"fx",constants:e(92456),schema:{layout:b},attributes:e(55756),layoutAttributes:b,supplyLayoutGlobalDefaults:e(81976),supplyDefaults:e(95448),supplyLayoutDefaults:e(88336),calc:e(55056),getDistanceFunction:T.getDistanceFunction,getClosest:T.getClosest,inbox:T.inbox,quadrature:T.quadrature,appendArrayPointValue:T.appendArrayPointValue,castHoverOption:function(o,t,i){return k.castOption(o,t,"hoverlabel."+i)},castHoverinfo:function(o,t,i){return k.castOption(o,i,"hoverinfo",function(n){return k.coerceHoverinfo({hoverinfo:n},{_module:o._module},t)})},hover:f.hover,unhover:s.unhover,loneHover:f.loneHover,loneUnhover:function(o){var t=k.isD3Selection(o)?o:M.select(o);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()},click:e(62376)}},65460:function(ee,R,e){var M=e(92456),k=e(25376),s=k({editType:"none"});s.family.dflt=M.HOVERFONT,s.size.dflt=M.HOVERFONTSIZE,ee.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoversubplots:{valType:"enumerated",values:["single","overlaying","axis"],dflt:"overlaying",editType:"none"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:s,grouptitlefont:k({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},88336:function(ee,R,e){var M=e(3400),k=e(65460),s=e(41008),T=e(16132);ee.exports=function(b,f){function o(r,a){return M.coerce(b,f,k,r,a)}s(b,f)&&(o("hoverdistance"),o("spikedistance")),o("dragmode")==="select"&&o("selectdirection");var t=f._has("mapbox"),i=f._has("geo"),n=f._basePlotModules.length;f.dragmode==="zoom"&&((t||i)&&n===1||t&&i&&n===2)&&(f.dragmode="pan"),T(b,f,o),M.coerceFont(o,"hoverlabel.grouptitlefont",f.hoverlabel.font)}},81976:function(ee,R,e){var M=e(3400),k=e(16132),s=e(65460);ee.exports=function(T,b){k(T,b,function(f,o){return M.coerce(T,b,s,f,o)})}},12704:function(ee,R,e){var M=e(3400),k=e(53756).counter,s=e(86968).u,T=e(33816).idRegex,b=e(31780),f={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[k("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:s({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function o(n,r,a){var l=r[a+"axes"],u=Object.keys((n._splomAxes||{})[a]||{});return Array.isArray(l)?l:u.length?u:void 0}function t(n,r,a,l,u,h){var c=r(n+"gap",a),x=r("domain."+n);r(n+"side",l);for(var p=new Array(u),v=x[0],g=(x[1]-v)/(u-c),y=g*(1-c),m=0;m<u;m++){var _=v+g*m;p[h?u-1-m:m]=[_,_+y]}return p}function i(n,r,a,l,u){var h,c=new Array(a);function x(p,v){r.indexOf(v)!==-1&&l[v]===void 0?(c[p]=v,l[v]=p):c[p]=""}if(Array.isArray(n))for(h=0;h<a;h++)x(h,n[h]);else for(x(0,u),h=1;h<a;h++)x(h,u+(h+1));return c}ee.exports={moduleType:"component",name:"grid",schema:{layout:{grid:f}},layoutAttributes:f,sizeDefaults:function(n,r){var a=n.grid||{},l=o(r,a,"x"),u=o(r,a,"y");if(n.grid||l||u){var h,c,x=Array.isArray(a.subplots)&&Array.isArray(a.subplots[0]),p=Array.isArray(l),v=Array.isArray(u),g=p&&l!==a.xaxes&&v&&u!==a.yaxes;x?(h=a.subplots.length,c=a.subplots[0].length):(v&&(h=u.length),p&&(c=l.length));var y=b.newContainer(r,"grid"),m=O("rows",h),_=O("columns",c);if(m*_>1){x||p||v||O("pattern")==="independent"&&(x=!0),y._hasSubplotGrid=x;var d,S,w=O("roworder")==="top to bottom",E=x?.2:.1,C=x?.3:.1;g&&r._splomGridDflt&&(d=r._splomGridDflt.xside,S=r._splomGridDflt.yside),y._domains={x:t("x",O,E,d,_),y:t("y",O,C,S,m,w)}}else delete r.grid}function O(P,z){return M.coerce(a,y,f,P,z)}},contentDefaults:function(n,r){var a=r.grid;if(a&&a._domains){var l,u,h,c,x,p,v,g=n.grid||{},y=r._subplots,m=a._hasSubplotGrid,_=a.rows,d=a.columns,S=a.pattern==="independent",w=a._axisMap={};if(m){var E=g.subplots||[];p=a.subplots=new Array(_);var C=1;for(l=0;l<_;l++){var O=p[l]=new Array(d),P=E[l]||[];for(u=0;u<d;u++)if(S?(x=C===1?"xy":"x"+C+"y"+C,C++):x=P[u],O[u]="",y.cartesian.indexOf(x)!==-1){if(v=x.indexOf("y"),h=x.slice(0,v),c=x.slice(v),w[h]!==void 0&&w[h]!==u||w[c]!==void 0&&w[c]!==l)continue;O[u]=x,w[h]=u,w[c]=l}}}else{var z=o(r,g,"x"),j=o(r,g,"y");a.xaxes=i(z,y.xaxis,d,w,"x"),a.yaxes=i(j,y.yaxis,_,w,"y")}var I=a._anchors={},N=a.roworder==="top to bottom";for(var W in w){var F,U,H,ne=W.charAt(0),$=a[ne+"side"];if($.length<8)I[W]="free";else if(ne==="x"){if($.charAt(0)==="t"===N?(F=0,U=1,H=_):(F=_-1,U=-1,H=-1),m){var K=w[W];for(l=F;l!==H;l+=U)if((x=p[l][K])&&(v=x.indexOf("y"),x.slice(0,v)===W)){I[W]=x.slice(v);break}}else for(l=F;l!==H;l+=U)if(c=a.yaxes[l],y.cartesian.indexOf(W+c)!==-1){I[W]=c;break}}else if($.charAt(0)==="l"?(F=0,U=1,H=d):(F=d-1,U=-1,H=-1),m){var Q=w[W];for(l=F;l!==H;l+=U)if((x=p[Q][l])&&(v=x.indexOf("y"),x.slice(v)===W)){I[W]=x.slice(0,v);break}}else for(l=F;l!==H;l+=U)if(h=a.xaxes[l],y.cartesian.indexOf(h+W)!==-1){I[W]=h;break}}}}}},65760:function(ee,R,e){var M=e(33816),k=e(31780).templatedArray;e(36208),ee.exports=k("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",M.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",M.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},63556:function(ee,R,e){var M=e(38248),k=e(36896);ee.exports=function(s,T,b,f){T=T||{};var o=b==="log"&&T.type==="linear",t=b==="linear"&&T.type==="log";if(o||t){for(var i,n,r=s._fullLayout.images,a=T._id.charAt(0),l=0;l<r.length;l++)if(n="images["+l+"].",(i=r[l])[a+"ref"]===T._id){var u=i[a],h=i["size"+a],c=null,x=null;if(o){c=k(u,T.range);var p=h/Math.pow(10,c)/2;x=2*Math.log(p+Math.sqrt(1+p*p))/Math.LN10}else x=(c=Math.pow(10,u))*(Math.pow(10,h/2)-Math.pow(10,-h/2));M(c)?M(x)||(x=null):(c=null,x=null),f(n+a,c),f(n+"size"+a,x)}}}},25024:function(ee,R,e){var M=e(3400),k=e(54460),s=e(51272),T=e(65760);function b(f,o,t){function i(c,x){return M.coerce(f,o,T,c,x)}var n=i("source");if(!i("visible",!!n))return o;i("layer"),i("xanchor"),i("yanchor"),i("sizex"),i("sizey"),i("sizing"),i("opacity");for(var r={_fullLayout:t},a=["x","y"],l=0;l<2;l++){var u=a[l],h=k.coerceRef(f,o,r,u,"paper",void 0);h!=="paper"&&k.getFromId(r,h)._imgIndices.push(o._index),k.coercePosition(o,r,i,h,u,0)}return o}ee.exports=function(f,o){s(f,o,{name:"images",handleItemDefaults:b})}},60963:function(ee,R,e){var M=e(33428),k=e(43616),s=e(54460),T=e(79811),b=e(9616);ee.exports=function(f){var o,t,i=f._fullLayout,n=[],r={},a=[];for(t=0;t<i.images.length;t++){var l=i.images[t];if(l.visible)if(l.layer==="below"&&l.xref!=="paper"&&l.yref!=="paper"){o=T.ref2id(l.xref)+T.ref2id(l.yref);var u=i._plots[o];if(!u){a.push(l);continue}u.mainplot&&(o=u.mainplot.id),r[o]||(r[o]=[]),r[o].push(l)}else l.layer==="above"?n.push(l):a.push(l)}var h={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},c={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function x(d){var S=M.select(this);if(this._imgSrc!==d.source)if(S.attr("xmlns",b.svg),d.source&&d.source.slice(0,5)==="data:")S.attr("xlink:href",d.source),this._imgSrc=d.source;else{var w=new Promise((function(E){var C=new Image;function O(){S.remove(),E()}this.img=C,C.setAttribute("crossOrigin","anonymous"),C.onerror=O,C.onload=function(){var P=document.createElement("canvas");P.width=this.width,P.height=this.height,P.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var z=P.toDataURL("image/png");S.attr("xlink:href",z),E()},S.on("error",O),C.src=d.source,this._imgSrc=d.source}).bind(this));f._promises.push(w)}}function p(d){var S,w,E=M.select(this),C=s.getFromId(f,d.xref),O=s.getFromId(f,d.yref),P=s.getRefType(d.xref)==="domain",z=s.getRefType(d.yref)==="domain",j=i._size;S=C!==void 0?typeof d.xref=="string"&&P?C._length*d.sizex:Math.abs(C.l2p(d.sizex)-C.l2p(0)):d.sizex*j.w,w=O!==void 0?typeof d.yref=="string"&&z?O._length*d.sizey:Math.abs(O.l2p(d.sizey)-O.l2p(0)):d.sizey*j.h;var I,N,W=S*h[d.xanchor].offset,F=w*c[d.yanchor].offset,U=h[d.xanchor].sizing+c[d.yanchor].sizing;switch(I=C!==void 0?typeof d.xref=="string"&&P?C._length*d.x+C._offset:C.r2p(d.x)+C._offset:d.x*j.w+j.l,I+=W,N=O!==void 0?typeof d.yref=="string"&&z?O._length*(1-d.y)+O._offset:O.r2p(d.y)+O._offset:j.h-d.y*j.h+j.t,N+=F,d.sizing){case"fill":U+=" slice";break;case"stretch":U="none"}E.attr({x:I,y:N,width:S,height:w,preserveAspectRatio:U,opacity:d.opacity});var H=(C&&s.getRefType(d.xref)!=="domain"?C._id:"")+(O&&s.getRefType(d.yref)!=="domain"?O._id:"");k.setClipUrl(E,H?"clip"+i._uid+H:null,f)}var v=i._imageLowerLayer.selectAll("image").data(a),g=i._imageUpperLayer.selectAll("image").data(n);v.enter().append("image"),g.enter().append("image"),v.exit().remove(),g.exit().remove(),v.each(function(d){x.bind(this)(d),p.bind(this)(d)}),g.each(function(d){x.bind(this)(d),p.bind(this)(d)});var y=Object.keys(i._plots);for(t=0;t<y.length;t++){o=y[t];var m=i._plots[o];if(m.imagelayer){var _=m.imagelayer.selectAll("image").data(r[o]||[]);_.enter().append("image"),_.exit().remove(),_.each(function(d){x.bind(this)(d),p.bind(this)(d)})}}}},7402:function(ee,R,e){ee.exports={moduleType:"component",name:"images",layoutAttributes:e(65760),supplyLayoutDefaults:e(25024),includeBasePlot:e(36632)("images"),draw:e(60963),convertCoords:e(63556)}},3800:function(ee,R,e){var M=e(25376),k=e(22548);ee.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:M({editType:"legend"}),grouptitlefont:M({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},indentation:{valType:"number",min:-15,dflt:0,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:M({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}},65196:function(ee){ee.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},77864:function(ee,R,e){var M=e(24040),k=e(3400),s=e(31780),T=e(45464),b=e(3800),f=e(64859),o=e(42451);function t(i,n,r,a){var l=n[i]||{},u=s.newContainer(r,i);function h(U,H){return k.coerce(l,u,b,U,H)}var c=k.coerceFont(h,"font",r.font);if(h("bgcolor",r.paper_bgcolor),h("bordercolor"),h("visible")){for(var x,p=function(U,H){var ne=x._input,$=x;return k.coerce(ne,$,T,U,H)},v=r.font||{},g=k.coerceFont(h,"grouptitlefont",v,{overrideDflt:{size:Math.round(1.1*v.size)}}),y=0,m=!1,_="normal",d=(r.shapes||[]).filter(function(U){return U.showlegend}),S=a.concat(d).filter(function(U){return i===(U.legend||"legend")}),w=0;w<S.length;w++)if((x=S[w]).visible){var E=x._isShape;(x.showlegend||x._dfltShowLegend&&!(x._module&&x._module.attributes&&x._module.attributes.showlegend&&x._module.attributes.showlegend.dflt===!1))&&(y++,x.showlegend&&(m=!0,(!E&&M.traceIs(x,"pie-like")||x._input.showlegend===!0)&&y++),k.coerceFont(p,"legendgrouptitle.font",g)),(!E&&M.traceIs(x,"bar")&&r.barmode==="stack"||["tonextx","tonexty"].indexOf(x.fill)!==-1)&&(_=o.isGrouped({traceorder:_})?"grouped+reversed":"reversed"),x.legendgroup!==void 0&&x.legendgroup!==""&&(_=o.isReversed({traceorder:_})?"reversed+grouped":"grouped")}var C=k.coerce(n,r,f,"showlegend",m&&y>(i==="legend"?1:0));if(C===!1&&(r[i]=void 0),(C!==!1||l.uirevision)&&(h("uirevision",r.uirevision),C!==!1)){h("borderwidth");var O,P,z,j=h("orientation")==="h",I=h("yref")==="paper",N=h("xref")==="paper",W="left";if(j?(O=0,M.getComponentMethod("rangeslider","isVisible")(n.xaxis)?I?(P=1.1,z="bottom"):(P=1,z="top"):I?(P=-.1,z="top"):(P=0,z="bottom")):(P=1,z="auto",N?O=1.02:(O=1,W="right")),k.coerce(l,u,{x:{valType:"number",editType:"legend",min:N?-2:0,max:N?3:1,dflt:O}},"x"),k.coerce(l,u,{y:{valType:"number",editType:"legend",min:I?-2:0,max:I?3:1,dflt:P}},"y"),h("traceorder",_),o.isGrouped(r[i])&&h("tracegroupgap"),h("entrywidth"),h("entrywidthmode"),h("indentation"),h("itemsizing"),h("itemwidth"),h("itemclick"),h("itemdoubleclick"),h("groupclick"),h("xanchor",W),h("yanchor",z),h("valign"),k.noneOrAll(l,u,["x","y"]),h("title.text")){h("title.side",j?"left":"top");var F=k.extendFlat({},c,{size:k.bigFont(c.size)});k.coerceFont(h,"title.font",F)}}}}ee.exports=function(i,n,r){var a,l=r.slice(),u=n.shapes;if(u)for(a=0;a<u.length;a++){var h=u[a];if(h.showlegend){var c={_input:h._input,visible:h.visible,showlegend:h.showlegend,legend:h.legend};l.push(c)}}var x=["legend"];for(a=0;a<l.length;a++)k.pushUnique(x,l[a].legend);for(n._legends=[],a=0;a<x.length;a++){var p=x[a];t(p,i,n,l),n[p]&&n[p].visible&&(n[p]._id=p),n._legends.push(p)}}},31140:function(ee,R,e){var M=e(33428),k=e(3400),s=e(7316),T=e(24040),b=e(95924),f=e(86476),o=e(43616),t=e(76308),i=e(72736),n=e(33048),r=e(65196),a=e(84284),l=a.LINE_SPACING,u=a.FROM_TL,h=a.FROM_BR,c=e(35456),x=e(2012),p=e(42451),v=1,g=/^legend[0-9]*$/;function y(z,j){var I,N,W=j||{},F=z._fullLayout,U=P(W),H=W._inHover;if(H?(N=W.layer,I="hover"):(N=F._infolayer,I=U),N){var ne;if(I+=F._uid,z._legendMouseDownTime||(z._legendMouseDownTime=0),H){if(!W.entries)return;ne=c(W.entries,W)}else{for(var $=(z.calcdata||[]).slice(),K=F.shapes,Q=0;Q<K.length;Q++){var Z=K[Q];if(Z.showlegend){var X={_isShape:!0,_fullInput:Z,index:Z._index,name:Z.name||Z.label.text||"shape "+Z._index,legend:Z.legend,legendgroup:Z.legendgroup,legendgrouptitle:Z.legendgrouptitle,legendrank:Z.legendrank,legendwidth:Z.legendwidth,showlegend:Z.showlegend,visible:Z.visible,opacity:Z.opacity,mode:Z.type==="line"?"lines":"markers",line:Z.line,marker:{line:Z.line,color:Z.fillcolor,size:12,symbol:Z.type==="rect"?"square":Z.type==="circle"?"circle":"hexagon2"}};$.push([{trace:X}])}}ne=F.showlegend&&c($,W,F._legends.length>1)}var te=F.hiddenlabels||[];if(!(H||F.showlegend&&ne.length))return N.selectAll("."+U).remove(),F._topdefs.select("#"+I).remove(),s.autoMargin(z,U);var ae=k.ensureSingle(N,"g",U,function(ze){H||ze.attr("pointer-events","all")}),se=k.ensureSingleById(F._topdefs,"clipPath",I,function(ze){ze.append("rect")}),ce=k.ensureSingle(ae,"rect","bg",function(ze){ze.attr("shape-rendering","crispEdges")});ce.call(t.stroke,W.bordercolor).call(t.fill,W.bgcolor).style("stroke-width",W.borderwidth+"px");var fe,pe=k.ensureSingle(ae,"g","scrollbox"),ge=W.title;W._titleWidth=0,W._titleHeight=0,ge.text?((fe=k.ensureSingle(pe,"text",U+"titletext")).attr("text-anchor","start").call(o.font,ge.font).text(ge.text),E(fe,pe,z,W,v)):pe.selectAll("."+U+"titletext").remove();var me=k.ensureSingle(ae,"rect","scrollbar",function(ze){ze.attr(r.scrollBarEnterAttrs).call(t.fill,r.scrollBarColor)}),be=pe.selectAll("g.groups").data(ne);be.enter().append("g").attr("class","groups"),be.exit().remove();var ke=be.selectAll("g.traces").data(k.identity);ke.enter().append("g").attr("class","traces"),ke.exit().remove(),ke.style("opacity",function(ze){var ve=ze[0].trace;return T.traceIs(ve,"pie-like")?te.indexOf(ze[0].label)!==-1?.5:1:ve.visible==="legendonly"?.5:1}).each(function(){M.select(this).call(d,z,W)}).call(x,z,W).each(function(){H||M.select(this).call(w,z,U)}),k.syncOrAsync([s.previousPromises,function(){return function(ze,ve,oe,ie){var he=ze._fullLayout,Se=P(ie);ie||(ie=he[Se]);var ye=he._size,we=p.isVertical(ie),Me=p.isGrouped(ie),Oe=ie.entrywidthmode==="fraction",Ie=ie.borderwidth,de=2*Ie,_e=r.itemGap,Ae=ie.indentation+ie.itemwidth+2*_e,Pe=2*(Ie+_e),Ee=O(ie),Fe=ie.y<0||ie.y===0&&Ee==="top",Ve=ie.y>1||ie.y===1&&Ee==="bottom",Ye=ie.tracegroupgap,tt={};ie._maxHeight=Math.max(Fe||Ve?he.height/2:ye.h,30);var nt=0;ie._width=0,ie._height=0;var ht=function(ct){var ut=0,et=0,xt=ct.title.side;return xt&&(xt.indexOf("left")!==-1&&(ut=ct._titleWidth),xt.indexOf("top")!==-1&&(et=ct._titleHeight)),[ut,et]}(ie);if(we)oe.each(function(ct){var ut=ct[0].height;o.setTranslate(this,Ie+ht[0],Ie+ht[1]+ie._height+ut/2+_e),ie._height+=ut,ie._width=Math.max(ie._width,ct[0].width)}),nt=Ae+ie._width,ie._width+=_e+Ae+de,ie._height+=Pe,Me&&(ve.each(function(ct,ut){o.setTranslate(this,0,ut*ie.tracegroupgap)}),ie._height+=(ie._lgroupsLength-1)*ie.tracegroupgap);else{var vt=C(ie),pt=ie.x<0||ie.x===0&&vt==="right",Qe=ie.x>1||ie.x===1&&vt==="left",Ke=Ve||Fe,Mt=he.width/2;ie._maxWidth=Math.max(pt?Ke&&vt==="left"?ye.l+ye.w:Mt:Qe?Ke&&vt==="right"?ye.r+ye.w:Mt:ye.w,2*Ae);var Ot=0,Pt=0;oe.each(function(ct){var ut=m(ct,ie,Ae);Ot=Math.max(Ot,ut),Pt+=ut}),nt=null;var St=0;if(Me){var He=0,We=0,Be=0;ve.each(function(){var ct=0,ut=0;M.select(this).selectAll("g.traces").each(function(xt){var mt=m(xt,ie,Ae),Tt=xt[0].height;o.setTranslate(this,ht[0],ht[1]+Ie+_e+Tt/2+ut),ut+=Tt,ct=Math.max(ct,mt),tt[xt[0].trace.legendgroup]=ct});var et=ct+_e;We>0&&et+Ie+We>ie._maxWidth?(St=Math.max(St,We),We=0,Be+=He+Ye,He=ut):He=Math.max(He,ut),o.setTranslate(this,We,Be),We+=et}),ie._width=Math.max(St,We)+Ie,ie._height=Be+He+Pe}else{var Ge=oe.size(),ot=Pt+de+(Ge-1)*_e<ie._maxWidth,it=0,dt=0,gt=0,je=0;oe.each(function(ct){var ut=ct[0].height,et=m(ct,ie,Ae),xt=ot?et:Ot;Oe||(xt+=_e),xt+Ie+dt-_e>=ie._maxWidth&&(St=Math.max(St,je),dt=0,gt+=it,ie._height+=it,it=0),o.setTranslate(this,ht[0]+Ie+dt,ht[1]+Ie+gt+ut/2+_e),je=dt+et+_e,dt+=xt,it=Math.max(it,ut)}),ot?(ie._width=dt+de,ie._height=it+Pe):(ie._width=Math.max(St,je)+de,ie._height+=it+Pe)}}ie._width=Math.ceil(Math.max(ie._width+ht[0],ie._titleWidth+2*(Ie+r.titlePad))),ie._height=Math.ceil(Math.max(ie._height+ht[1],ie._titleHeight+2*(Ie+r.itemGap))),ie._effHeight=Math.min(ie._height,ie._maxHeight);var Re=ze._context.edits,rt=Re.legendText||Re.legendPosition;oe.each(function(ct){var ut=M.select(this).select("."+Se+"toggle"),et=ct[0].height,xt=ct[0].trace.legendgroup,mt=m(ct,ie,Ae);Me&&xt!==""&&(mt=tt[xt]);var Tt=rt?Ae:nt||mt;we||Oe||(Tt+=_e/2),o.setRect(ut,0,-et/2,Tt,et)})}(z,be,ke,W)},function(){var ze,ve,oe,ie,he=F._size,Se=W.borderwidth,ye=W.xref==="paper",we=W.yref==="paper";if(ge.text&&function(Ke,Mt,Ot){if(Mt.title.side==="top center"||Mt.title.side==="top right"){var Pt=Mt.title.font.size*l,St=0,He=Ke.node(),We=o.bBox(He).width;Mt.title.side==="top center"?St=.5*(Mt._width-2*Ot-2*r.titlePad-We):Mt.title.side==="top right"&&(St=Mt._width-2*Ot-2*r.titlePad-We),i.positionText(Ke,Ot+r.titlePad+St,Ot+Pt)}}(fe,W,Se),!H){var Me,Oe;Me=ye?he.l+he.w*W.x-u[C(W)]*W._width:F.width*W.x-u[C(W)]*W._width,Oe=we?he.t+he.h*(1-W.y)-u[O(W)]*W._effHeight:F.height*(1-W.y)-u[O(W)]*W._effHeight;var Ie=function(Ke,Mt,Ot,Pt){var St=Ke._fullLayout,He=St[Mt],We=C(He),Be=O(He),Ge=He.xref==="paper",ot=He.yref==="paper";Ke._fullLayout._reservedMargin[Mt]={};var it=He.y<.5?"b":"t",dt=He.x<.5?"l":"r",gt={r:St.width-Ot,l:Ot+He._width,b:St.height-Pt,t:Pt+He._effHeight};if(Ge&&ot)return s.autoMargin(Ke,Mt,{x:He.x,y:He.y,l:He._width*u[We],r:He._width*h[We],b:He._effHeight*h[Be],t:He._effHeight*u[Be]});Ge?Ke._fullLayout._reservedMargin[Mt][it]=gt[it]:ot||He.orientation==="v"?Ke._fullLayout._reservedMargin[Mt][dt]=gt[dt]:Ke._fullLayout._reservedMargin[Mt][it]=gt[it]}(z,U,Me,Oe);if(Ie)return;if(F.margin.autoexpand){var de=Me,_e=Oe;Me=ye?k.constrain(Me,0,F.width-W._width):de,Oe=we?k.constrain(Oe,0,F.height-W._effHeight):_e,Me!==de&&k.log("Constrain "+U+".x to make legend fit inside graph"),Oe!==_e&&k.log("Constrain "+U+".y to make legend fit inside graph")}o.setTranslate(ae,Me,Oe)}if(me.on(".drag",null),ae.on("wheel",null),H||W._height<=W._maxHeight||z._context.staticPlot){var Ae=W._effHeight;H&&(Ae=W._height),ce.attr({width:W._width-Se,height:Ae-Se,x:Se/2,y:Se/2}),o.setTranslate(pe,0,0),se.select("rect").attr({width:W._width-2*Se,height:Ae-2*Se,x:Se,y:Se}),o.setClipUrl(pe,I,z),o.setRect(me,0,0,0,0),delete W._scrollY}else{var Pe,Ee,Fe,Ve=Math.max(r.scrollBarMinHeight,W._effHeight*W._effHeight/W._height),Ye=W._effHeight-Ve-2*r.scrollBarMargin,tt=W._height-W._effHeight,nt=Ye/tt,ht=Math.min(W._scrollY||0,tt);ce.attr({width:W._width-2*Se+r.scrollBarWidth+r.scrollBarMargin,height:W._effHeight-Se,x:Se/2,y:Se/2}),se.select("rect").attr({width:W._width-2*Se+r.scrollBarWidth+r.scrollBarMargin,height:W._effHeight-2*Se,x:Se,y:Se+ht}),o.setClipUrl(pe,I,z),Qe(ht,Ve,nt),ae.on("wheel",function(){Qe(ht=k.constrain(W._scrollY+M.event.deltaY/Ye*tt,0,tt),Ve,nt),ht!==0&&ht!==tt&&M.event.preventDefault()});var vt=M.behavior.drag().on("dragstart",function(){var Ke=M.event.sourceEvent;Pe=Ke.type==="touchstart"?Ke.changedTouches[0].clientY:Ke.clientY,Fe=ht}).on("drag",function(){var Ke=M.event.sourceEvent;Ke.buttons===2||Ke.ctrlKey||(Ee=Ke.type==="touchmove"?Ke.changedTouches[0].clientY:Ke.clientY,ht=function(Mt,Ot,Pt){var St=(Pt-Ot)/nt+Mt;return k.constrain(St,0,tt)}(Fe,Pe,Ee),Qe(ht,Ve,nt))});me.call(vt);var pt=M.behavior.drag().on("dragstart",function(){var Ke=M.event.sourceEvent;Ke.type==="touchstart"&&(Pe=Ke.changedTouches[0].clientY,Fe=ht)}).on("drag",function(){var Ke=M.event.sourceEvent;Ke.type==="touchmove"&&(Ee=Ke.changedTouches[0].clientY,ht=function(Mt,Ot,Pt){var St=(Ot-Pt)/nt+Mt;return k.constrain(St,0,tt)}(Fe,Pe,Ee),Qe(ht,Ve,nt))});pe.call(pt)}function Qe(Ke,Mt,Ot){W._scrollY=z._fullLayout[U]._scrollY=Ke,o.setTranslate(pe,0,-Ke),o.setRect(me,W._width,r.scrollBarMargin+Ke*Ot,r.scrollBarWidth,Mt),se.select("rect").attr("y",Se+Ke)}z._context.edits.legendPosition&&(ae.classed("cursor-move",!0),f.init({element:ae.node(),gd:z,prepFn:function(Ke){if(Ke.target!==me.node()){var Mt=o.getTranslate(ae);oe=Mt.x,ie=Mt.y}},moveFn:function(Ke,Mt){if(oe!==void 0&&ie!==void 0){var Ot=oe+Ke,Pt=ie+Mt;o.setTranslate(ae,Ot,Pt),ze=f.align(Ot,W._width,he.l,he.l+he.w,W.xanchor),ve=f.align(Pt+W._height,-W._height,he.t+he.h,he.t,W.yanchor)}},doneFn:function(){if(ze!==void 0&&ve!==void 0){var Ke={};Ke[U+".x"]=ze,Ke[U+".y"]=ve,T.call("_guiRelayout",z,Ke)}},clickFn:function(Ke,Mt){var Ot=N.selectAll("g.traces").filter(function(){var Pt=this.getBoundingClientRect();return Mt.clientX>=Pt.left&&Mt.clientX<=Pt.right&&Mt.clientY>=Pt.top&&Mt.clientY<=Pt.bottom});Ot.size()>0&&_(z,ae,Ot,Ke,Mt)}}))}],z)}}function m(z,j,I){var N=z[0],W=N.width,F=j.entrywidthmode,U=N.trace.legendwidth||j.entrywidth;return F==="fraction"?j._maxWidth*U:I+(U||W)}function _(z,j,I,N,W){var F=I.data()[0][0].trace,U={event:W,node:I.node(),curveNumber:F.index,expandedIndex:F._expandedIndex,data:z.data,layout:z.layout,frames:z._transitionData._frames,config:z._context,fullData:z._fullData,fullLayout:z._fullLayout};F._group&&(U.group=F._group),T.traceIs(F,"pie-like")&&(U.label=I.datum()[0].label);var H=b.triggerHandler(z,"plotly_legendclick",U);if(N===1){if(H===!1)return;j._clickTimeout=setTimeout(function(){z._fullLayout&&n(I,z,N)},z._context.doubleClickDelay)}else N===2&&(j._clickTimeout&&clearTimeout(j._clickTimeout),z._legendMouseDownTime=0,b.triggerHandler(z,"plotly_legenddoubleclick",U)!==!1&&H!==!1&&n(I,z,N))}function d(z,j,I){var N,W,F=P(I),U=z.data()[0][0],H=U.trace,ne=T.traceIs(H,"pie-like"),$=!I._inHover&&j._context.edits.legendText&&!ne,K=I._maxNameLength;U.groupTitle?(N=U.groupTitle.text,W=U.groupTitle.font):(W=I.font,I.entries?N=U.text:(N=ne?U.label:H.name,H._meta&&(N=k.templateString(N,H._meta))));var Q=k.ensureSingle(z,"text",F+"text");Q.attr("text-anchor","start").call(o.font,W).text($?S(N,K):N);var Z=I.indentation+I.itemwidth+2*r.itemGap;i.positionText(Q,Z,0),$?Q.call(i.makeEditable,{gd:j,text:N}).call(E,z,j,I).on("edit",function(X){this.text(S(X,K)).call(E,z,j,I);var te=U.trace._fullInput||{},ae={};if(T.hasTransform(te,"groupby")){var se=T.getTransformIndices(te,"groupby"),ce=se[se.length-1],fe=k.keyedContainer(te,"transforms["+ce+"].styles","target","value.name");fe.set(U.trace._group,X),ae=fe.constructUpdate()}else ae.name=X;return te._isShape?T.call("_guiRelayout",j,"shapes["+H.index+"].name",ae.name):T.call("_guiRestyle",j,ae,H.index)}):E(Q,z,j,I)}function S(z,j){var I=Math.max(4,j);if(z&&z.trim().length>=I/2)return z;for(var N=I-(z=z||"").length;N>0;N--)z+=" ";return z}function w(z,j,I){var N,W=j._context.doubleClickDelay,F=1,U=k.ensureSingle(z,"rect",I+"toggle",function(H){j._context.staticPlot||H.style("cursor","pointer").attr("pointer-events","all"),H.call(t.fill,"rgba(0,0,0,0)")});j._context.staticPlot||(U.on("mousedown",function(){(N=new Date().getTime())-j._legendMouseDownTime<W?F+=1:(F=1,j._legendMouseDownTime=N)}),U.on("mouseup",function(){if(!j._dragged&&!j._editing){var H=j._fullLayout[I];new Date().getTime()-j._legendMouseDownTime>W&&(F=Math.max(F-1,1)),_(j,H,z,F,M.event)}}))}function E(z,j,I,N,W){N._inHover&&z.attr("data-notex",!0),i.convertToTspans(z,I,function(){(function(F,U,H,ne){var $=F.data()[0][0];if(H._inHover||!$||$.trace.showlegend){var K=F.select("g[class*=math-group]"),Q=K.node(),Z=P(H);H||(H=U._fullLayout[Z]);var X,te,ae=H.borderwidth,se=(ne===v?H.title.font:$.groupTitle?$.groupTitle.font:H.font).size*l;if(Q){var ce=o.bBox(Q);X=ce.height,te=ce.width,ne===v?o.setTranslate(K,ae,ae+.75*X):o.setTranslate(K,0,.25*X)}else{var fe="."+Z+(ne===v?"title":"")+"text",pe=F.select(fe),ge=i.lineCount(pe),me=pe.node();if(X=se*ge,te=me?o.bBox(me).width:0,ne===v)H.title.side==="left"&&(te+=2*r.itemGap),i.positionText(pe,ae+r.titlePad,ae+se);else{var be=2*r.itemGap+H.indentation+H.itemwidth;$.groupTitle&&(be=r.itemGap,te-=H.indentation+H.itemwidth),i.positionText(pe,be,-se*((ge-1)/2-.3))}}ne===v?(H._titleWidth=te,H._titleHeight=X):($.lineHeight=se,$.height=Math.max(X,16)+3,$.width=te)}else F.remove()})(j,I,N,W)})}function C(z){return k.isRightAnchor(z)?"right":k.isCenterAnchor(z)?"center":"left"}function O(z){return k.isBottomAnchor(z)?"bottom":k.isMiddleAnchor(z)?"middle":"top"}function P(z){return z._id||"legend"}ee.exports=function(z,j){if(j)y(z,j);else{var I=z._fullLayout,N=I._legends;I._infolayer.selectAll('[class^="legend"]').each(function(){var U=M.select(this),H=U.attr("class").split(" ")[0];H.match(g)&&N.indexOf(H)===-1&&U.remove()});for(var W=0;W<N.length;W++){var F=N[W];y(z,z._fullLayout[F])}}}},35456:function(ee,R,e){var M=e(24040),k=e(42451);ee.exports=function(s,T,b){var f,o,t=T._inHover,i=k.isGrouped(T),n=k.isReversed(T),r={},a=[],l=!1,u={},h=0,c=0;function x(N,W,F){if(T.visible!==!1&&(!b||N===T._id))if(W!==""&&k.isGrouped(T))a.indexOf(W)===-1?(a.push(W),l=!0,r[W]=[F]):r[W].push(F);else{var U="~~i"+h;a.push(U),r[U]=[F],h++}}for(f=0;f<s.length;f++){var p=s[f],v=p[0],g=v.trace,y=g.legend,m=g.legendgroup;if(t||g.visible&&g.showlegend)if(M.traceIs(g,"pie-like"))for(u[m]||(u[m]={}),o=0;o<p.length;o++){var _=p[o].label;u[m][_]||(x(y,m,{label:_,color:p[o].color,i:p[o].i,trace:g,pts:p[o].pts}),u[m][_]=!0,c=Math.max(c,(_||"").length))}else x(y,m,v),c=Math.max(c,(g.name||"").length)}if(!a.length)return[];var d=!l||!i,S=[];for(f=0;f<a.length;f++){var w=r[a[f]];d?S.push(w[0]):S.push(w)}for(d&&(S=[S]),f=0;f<S.length;f++){var E=1/0;for(o=0;o<S[f].length;o++){var C=S[f][o].trace.legendrank;E>C&&(E=C)}S[f][0]._groupMinRank=E,S[f][0]._preGroupSort=f}var O=function(N,W){return N.trace.legendrank-W.trace.legendrank||N._preSort-W._preSort};for(S.forEach(function(N,W){N[0]._preGroupSort=W}),S.sort(function(N,W){return N[0]._groupMinRank-W[0]._groupMinRank||N[0]._preGroupSort-W[0]._preGroupSort}),f=0;f<S.length;f++){S[f].forEach(function(N,W){N._preSort=W}),S[f].sort(O);var P=S[f][0].trace,z=null;for(o=0;o<S[f].length;o++){var j=S[f][o].trace.legendgrouptitle;if(j&&j.text){z=j,t&&(j.font=T._groupTitleFont);break}}if(n&&S[f].reverse(),z){var I=!1;for(o=0;o<S[f].length;o++)if(M.traceIs(S[f][o].trace,"pie-like")){I=!0;break}S[f].unshift({i:-1,groupTitle:z,noClick:I,trace:{showlegend:P.showlegend,legendgroup:P.legendgroup,visible:T.groupclick==="toggleitem"||P.visible}})}for(o=0;o<S[f].length;o++)S[f][o]=[S[f][o]]}return T._lgroupsLength=S.length,T._maxNameLength=c,S}},33048:function(ee,R,e){var M=e(24040),k=e(3400),s=k.pushUnique,T=!0;ee.exports=function(b,f,o){var t=f._fullLayout;if(!f._dragged&&!f._editing){var i,n=t.legend.itemclick,r=t.legend.itemdoubleclick,a=t.legend.groupclick;if(o===1&&n==="toggle"&&r==="toggleothers"&&T&&f.data&&f._context.showTips&&k.notifier(k._(f,"Double-click on legend to isolate one trace"),"long"),T=!1,o===1?i=n:o===2&&(i=r),i){var l=a==="togglegroup",u=t.hiddenlabels?t.hiddenlabels.slice():[],h=b.data()[0][0];if(!h.groupTitle||!h.noClick){var c=f._fullData,x=(t.shapes||[]).filter(function(ve){return ve.showlegend}),p=c.concat(x),v=h.trace;v._isShape&&(v=v._fullInput);var g,y,m,_,d,S=v.legendgroup,w={},E=[],C=[],O=[],P=(t.shapes||[]).map(function(ve){return ve._input}),z=!1,j=v.legend,I=v._fullInput;if(I&&I._isShape||!M.traceIs(v,"pie-like")){var N,W=S&&S.length,F=[];if(W)for(g=0;g<p.length;g++)(N=p[g]).visible&&N.legendgroup===S&&F.push(g);if(i==="toggle"){var U;switch(v.visible){case!0:U="legendonly";break;case!1:U=!1;break;case"legendonly":U=!0}if(W)if(l)for(g=0;g<p.length;g++){var H=p[g];H.visible!==!1&&H.legendgroup===S&&ze(H,U)}else ze(v,U);else ze(v,U)}else if(i==="toggleothers"){var ne,$,K,Q,Z=!0;for(g=0;g<p.length;g++)if(ne=(Q=p[g])===v,$=Q.showlegend!==!0,!(ne||$||W&&Q.legendgroup===S||Q.legend!==j||Q.visible!==!0||M.traceIs(Q,"notLegendIsolatable"))){Z=!1;break}for(g=0;g<p.length;g++)if((Q=p[g]).visible!==!1&&Q.legend===j&&!M.traceIs(Q,"notLegendIsolatable"))switch(v.visible){case"legendonly":ze(Q,!0);break;case!0:K=!!Z||"legendonly",ne=Q===v,$=Q.showlegend!==!0&&!Q.legendgroup,ze(Q,!!(ne||W&&Q.legendgroup===S||$)||K)}}for(g=0;g<C.length;g++)if(m=C[g]){var X=m.constructUpdate(),te=Object.keys(X);for(y=0;y<te.length;y++)_=te[y],(w[_]=w[_]||[])[O[g]]=X[_]}for(d=Object.keys(w),g=0;g<d.length;g++)for(_=d[g],y=0;y<E.length;y++)w[_].hasOwnProperty(y)||(w[_][y]=void 0);z?M.call("_guiUpdate",f,w,{shapes:P},E):M.call("_guiRestyle",f,w,E)}else{var ae=h.label,se=u.indexOf(ae);if(i==="toggle")se===-1?u.push(ae):u.splice(se,1);else if(i==="toggleothers"){var ce=se!==-1,fe=[];for(g=0;g<f.calcdata.length;g++){var pe=f.calcdata[g];for(y=0;y<pe.length;y++){var ge=pe[y].label;j===pe[0].trace.legend&&ae!==ge&&(u.indexOf(ge)===-1&&(ce=!0),s(u,ge),fe.push(ge))}}if(!ce)for(var me=0;me<fe.length;me++){var be=u.indexOf(fe[me]);be!==-1&&u.splice(be,1)}}M.call("_guiRelayout",f,"hiddenlabels",u)}}}}function ke(ve,oe){var ie=E.indexOf(ve),he=w.visible;return he||(he=w.visible=[]),E.indexOf(ve)===-1&&(E.push(ve),ie=E.length-1),he[ie]=oe,ie}function ze(ve,oe){if(!h.groupTitle||l){var ie,he=ve._fullInput||ve,Se=he._isShape,ye=he.index;if(ye===void 0&&(ye=he._index),M.hasTransform(he,"groupby")){var we=C[ye];if(!we){var Me=M.getTransformIndices(he,"groupby"),Oe=Me[Me.length-1];we=k.keyedContainer(he,"transforms["+Oe+"].styles","target","value.visible"),C[ye]=we}var Ie=we.get(ve._group);Ie===void 0&&(Ie=!0),Ie!==!1&&we.set(ve._group,oe),O[ye]=ke(ye,he.visible!==!1)}else{var de=he.visible!==!1&&oe;Se?(ie=de,P[ye].visible=ie,z=!0):ke(ye,de)}}}}},42451:function(ee,R){R.isGrouped=function(e){return(e.traceorder||"").indexOf("grouped")!==-1},R.isVertical=function(e){return e.orientation!=="h"},R.isReversed=function(e){return(e.traceorder||"").indexOf("reversed")!==-1}},2780:function(ee,R,e){ee.exports={moduleType:"component",name:"legend",layoutAttributes:e(3800),supplyLayoutDefaults:e(77864),draw:e(31140),style:e(2012)}},2012:function(ee,R,e){var M=e(33428),k=e(24040),s=e(3400),T=s.strTranslate,b=e(43616),f=e(76308),o=e(94288).extractOpts,t=e(43028),i=e(10528),n=e(69656).castOption,r=e(65196);function a(h,c){return(c?"radial":"horizontal")+(h?"":"reversed")}function l(h){var c=h[0].trace,x=c.contours,p=t.hasLines(c),v=t.hasMarkers(c),g=c.visible&&c.fill&&c.fill!=="none",y=!1,m=!1;if(x){var _=x.coloring;_==="lines"?y=!0:p=_==="none"||_==="heatmap"||x.showlines,x.type==="constraint"?g=x._operation!=="=":_!=="fill"&&_!=="heatmap"||(m=!0)}return{showMarker:v,showLine:p,showFill:g,showGradientLine:y,showGradientFill:m,anyLine:p||y,anyFill:g||m}}function u(h,c,x){return h&&s.isArrayOrTypedArray(h)?c:h>x?x:h}ee.exports=function(h,c,x){var p=c._fullLayout;x||(x=p.legend);var v=x.itemsizing==="constant",g=x.itemwidth,y=(g+2*r.itemGap)/2,m=T(y,0),_=function(w,E,C,O){var P;if(w+1)P=w;else{if(!(E&&E.width>0))return 0;P=E.width}return v?O:Math.min(P,C)};function d(w,E,C){var O=w[0].trace,P=O.marker||{},z=P.line||{},j=P.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",I=C?O.visible&&O.type===C:k.traceIs(O,"bar"),N=M.select(E).select("g.legendpoints").selectAll("path.legend"+C).data(I?[w]:[]);N.enter().append("path").classed("legend"+C,!0).attr("d",j).attr("transform",m),N.exit().remove(),N.each(function(W){var F=M.select(this),U=W[0],H=_(U.mlw,P.line,5,2);F.style("stroke-width",H+"px");var ne=U.mcc;if(!x._inHover&&"mc"in U){var $=o(P),K=$.mid;K===void 0&&(K=($.max+$.min)/2),ne=b.tryColorscale(P,"")(K)}var Q=ne||U.mc||P.color,Z=P.pattern,X=Z&&b.getPatternAttr(Z.shape,0,"");if(X){var te=b.getPatternAttr(Z.bgcolor,0,null),ae=b.getPatternAttr(Z.fgcolor,0,null),se=Z.fgopacity,ce=u(Z.size,8,10),fe=u(Z.solidity,.5,1),pe="legend-"+O.uid;F.call(b.pattern,"legend",c,pe,X,ce,fe,ne,Z.fillmode,te,ae,se)}else F.call(f.fill,Q);H&&f.stroke(F,U.mlc||z.color)})}function S(w,E,C){var O=w[0],P=O.trace,z=C?P.visible&&P.type===C:k.traceIs(P,C),j=M.select(E).select("g.legendpoints").selectAll("path.legend"+C).data(z?[w]:[]);if(j.enter().append("path").classed("legend"+C,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",m),j.exit().remove(),j.size()){var I=P.marker||{},N=_(n(I.line.width,O.pts),I.line,5,2),W="pieLike",F=s.minExtend(P,{marker:{line:{width:N}}},W),U=s.minExtend(O,{trace:F},W);i(j,U,F,c)}}h.each(function(w){var E=M.select(this),C=s.ensureSingle(E,"g","layers");C.style("opacity",w[0].trace.opacity);var O=x.indentation,P=x.valign,z=w[0].lineHeight,j=w[0].height;if(P==="middle"&&O===0||!z||!j)C.attr("transform",null);else{var I={top:1,bottom:-1}[P]*(.5*(z-j+3))||0,N=x.indentation;C.attr("transform",T(N,I))}C.selectAll("g.legendfill").data([w]).enter().append("g").classed("legendfill",!0),C.selectAll("g.legendlines").data([w]).enter().append("g").classed("legendlines",!0);var W=C.selectAll("g.legendsymbols").data([w]);W.enter().append("g").classed("legendsymbols",!0),W.selectAll("g.legendpoints").data([w]).enter().append("g").classed("legendpoints",!0)}).each(function(w){var E,C=w[0].trace,O=[];if(C.visible)switch(C.type){case"histogram2d":case"heatmap":O=[["M-15,-2V4H15V-2Z"]],E=!0;break;case"choropleth":case"choroplethmapbox":O=[["M-6,-6V6H6V-6Z"]],E=!0;break;case"densitymapbox":O=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],E="radial";break;case"cone":O=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],E=!1;break;case"streamtube":O=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],E=!1;break;case"surface":O=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],E=!0;break;case"mesh3d":O=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!1;break;case"volume":O=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!0;break;case"isosurface":O=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],E=!1}var P=M.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(O);P.enter().append("path").classed("legend3dandfriends",!0).attr("transform",m).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(z,j){var I,N=M.select(this),W=o(C),F=W.colorscale,U=W.reversescale;if(F){if(!E){var H=F.length;I=j===0?F[U?H-1:0][1]:j===1?F[U?0:H-1][1]:F[Math.floor((H-1)/2)][1]}}else{var ne=C.vertexcolor||C.facecolor||C.color;I=s.isArrayOrTypedArray(ne)?ne[j]||ne[0]:ne}N.attr("d",z[0]),I?N.call(f.fill,I):N.call(function($){if($.size()){var K="legendfill-"+C.uid;b.gradient($,c,K,a(U,E==="radial"),F,"fill")}})})}).each(function(w){var E=w[0].trace,C=E.type==="waterfall";if(w[0]._distinct&&C){var O=w[0].trace[w[0].dir].marker;return w[0].mc=O.color,w[0].mlw=O.line.width,w[0].mlc=O.line.color,d(w,this,"waterfall")}var P=[];E.visible&&C&&(P=w[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var z=M.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(P);z.enter().append("path").classed("legendwaterfall",!0).attr("transform",m).style("stroke-miterlimit",1),z.exit().remove(),z.each(function(j){var I=M.select(this),N=E[j[0]].marker,W=_(void 0,N.line,5,2);I.attr("d",j[1]).style("stroke-width",W+"px").call(f.fill,N.color),W&&I.call(f.stroke,N.line.color)})}).each(function(w){d(w,this,"funnel")}).each(function(w){d(w,this)}).each(function(w){var E=w[0].trace,C=M.select(this).select("g.legendpoints").selectAll("path.legendbox").data(E.visible&&k.traceIs(E,"box-violin")?[w]:[]);C.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",m),C.exit().remove(),C.each(function(){var O=M.select(this);if(E.boxpoints!=="all"&&E.points!=="all"||f.opacity(E.fillcolor)!==0||f.opacity((E.line||{}).color)!==0){var P=_(void 0,E.line,5,2);O.style("stroke-width",P+"px").call(f.fill,E.fillcolor),P&&f.stroke(O,E.line.color)}else{var z=s.minExtend(E,{marker:{size:v?12:s.constrain(E.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});C.call(b.pointStyle,z,c)}})}).each(function(w){S(w,this,"funnelarea")}).each(function(w){S(w,this,"pie")}).each(function(w){var E,C,O=l(w),P=O.showFill,z=O.showLine,j=O.showGradientLine,I=O.showGradientFill,N=O.anyFill,W=O.anyLine,F=w[0],U=F.trace,H=o(U),ne=H.colorscale,$=H.reversescale,K=t.hasMarkers(U)||!N?"M5,0":W?"M5,-2":"M5,-3",Q=M.select(this),Z=Q.select(".legendfill").selectAll("path").data(P||I?[w]:[]);if(Z.enter().append("path").classed("js-fill",!0),Z.exit().remove(),Z.attr("d",K+"h"+g+"v6h-"+g+"z").call(function(ae){if(ae.size())if(P)b.fillGroupStyle(ae,c,!0);else{var se="legendfill-"+U.uid;b.gradient(ae,c,se,a($),ne,"fill")}}),z||j){var X=_(void 0,U.line,10,5);C=s.minExtend(U,{line:{width:X}}),E=[s.minExtend(F,{trace:C})]}var te=Q.select(".legendlines").selectAll("path").data(z||j?[E]:[]);te.enter().append("path").classed("js-line",!0),te.exit().remove(),te.attr("d",K+(j?"l"+g+",0.0001":"h"+g)).call(z?b.lineGroupStyle:function(ae){if(ae.size()){var se="legendline-"+U.uid;b.lineGroupStyle(ae),b.gradient(ae,c,se,a($),ne,"stroke")}})}).each(function(w){var E,C,O=l(w),P=O.anyFill,z=O.anyLine,j=O.showLine,I=O.showMarker,N=w[0],W=N.trace,F=!I&&!z&&!P&&t.hasText(W);function U(te,ae,se,ce){var fe=s.nestedProperty(W,te).get(),pe=s.isArrayOrTypedArray(fe)&&ae?ae(fe):fe;if(v&&pe&&ce!==void 0&&(pe=ce),se){if(pe<se[0])return se[0];if(pe>se[1])return se[1]}return pe}function H(te){return N._distinct&&N.index&&te[N.index]?te[N.index]:te[0]}if(I||F||j){var ne={},$={};if(I){ne.mc=U("marker.color",H),ne.mx=U("marker.symbol",H),ne.mo=U("marker.opacity",s.mean,[.2,1]),ne.mlc=U("marker.line.color",H),ne.mlw=U("marker.line.width",s.mean,[0,5],2),$.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var K=U("marker.size",s.mean,[2,16],12);ne.ms=K,$.marker.size=K}j&&($.line={width:U("line.width",H,[0,10],5)}),F&&(ne.tx="Aa",ne.tp=U("textposition",H),ne.ts=10,ne.tc=U("textfont.color",H),ne.tf=U("textfont.family",H),ne.tw=U("textfont.weight",H),ne.ty=U("textfont.style",H),ne.tv=U("textfont.variant",H),ne.tC=U("textfont.textcase",H),ne.tE=U("textfont.lineposition",H),ne.tS=U("textfont.shadow",H)),E=[s.minExtend(N,ne)],(C=s.minExtend(W,$)).selectedpoints=null,C.texttemplate=null}var Q=M.select(this).select("g.legendpoints"),Z=Q.selectAll("path.scatterpts").data(I?E:[]);Z.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",m),Z.exit().remove(),Z.call(b.pointStyle,C,c),I&&(E[0].mrc=3);var X=Q.selectAll("g.pointtext").data(F?E:[]);X.enter().append("g").classed("pointtext",!0).append("text").attr("transform",m),X.exit().remove(),X.selectAll("text").call(b.textPointStyle,C,c)}).each(function(w){var E=w[0].trace,C=M.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(E.visible&&E.type==="candlestick"?[w,w]:[]);C.enter().append("path").classed("legendcandle",!0).attr("d",function(O,P){return P?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",m).style("stroke-miterlimit",1),C.exit().remove(),C.each(function(O,P){var z=M.select(this),j=E[P?"increasing":"decreasing"],I=_(void 0,j.line,5,2);z.style("stroke-width",I+"px").call(f.fill,j.fillcolor),I&&f.stroke(z,j.line.color)})}).each(function(w){var E=w[0].trace,C=M.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(E.visible&&E.type==="ohlc"?[w,w]:[]);C.enter().append("path").classed("legendohlc",!0).attr("d",function(O,P){return P?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",m).style("stroke-miterlimit",1),C.exit().remove(),C.each(function(O,P){var z=M.select(this),j=E[P?"increasing":"decreasing"],I=_(void 0,j.line,5,2);z.style("fill","none").call(b.dashLine,j.line.dash,I),I&&f.stroke(z,j.line.color)})})}},66540:function(ee,R,e){e(76052),ee.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},44248:function(ee,R,e){var M=e(24040),k=e(7316),s=e(79811),T=e(9224),b=e(4016).eraseActiveShape,f=e(3400),o=f._,t=ee.exports={};function i(p,v){var g,y,m=v.currentTarget,_=m.getAttribute("data-attr"),d=m.getAttribute("data-val")||!0,S=p._fullLayout,w={},E=s.list(p,null,!0),C=S._cartesianSpikesEnabled;if(_==="zoom"){var O,P=d==="in"?.5:2,z=(1+P)/2,j=(1-P)/2;for(y=0;y<E.length;y++)if(!(g=E[y]).fixedrange)if(O=g._name,d==="auto")w[O+".autorange"]=!0;else if(d==="reset")g._rangeInitial0===void 0&&g._rangeInitial1===void 0?w[O+".autorange"]=!0:g._rangeInitial0===void 0?(w[O+".autorange"]=g._autorangeInitial,w[O+".range"]=[null,g._rangeInitial1]):g._rangeInitial1===void 0?(w[O+".range"]=[g._rangeInitial0,null],w[O+".autorange"]=g._autorangeInitial):w[O+".range"]=[g._rangeInitial0,g._rangeInitial1],g._showSpikeInitial!==void 0&&(w[O+".showspikes"]=g._showSpikeInitial,C!=="on"||g._showSpikeInitial||(C="off"));else{var I=[g.r2l(g.range[0]),g.r2l(g.range[1])],N=[z*I[0]+j*I[1],z*I[1]+j*I[0]];w[O+".range[0]"]=g.l2r(N[0]),w[O+".range[1]"]=g.l2r(N[1])}}else _!=="hovermode"||d!=="x"&&d!=="y"||(d=S._isHoriz?"y":"x",m.setAttribute("data-val",d)),w[_]=d;S._cartesianSpikesEnabled=C,M.call("_guiRelayout",p,w)}function n(p,v){for(var g=v.currentTarget,y=g.getAttribute("data-attr"),m=g.getAttribute("data-val")||!0,_=p._fullLayout._subplots.gl3d||[],d={},S=y.split("."),w=0;w<_.length;w++)d[_[w]+"."+S[1]]=m;var E=m==="pan"?m:"zoom";d.dragmode=E,M.call("_guiRelayout",p,d)}function r(p,v){for(var g=v.currentTarget.getAttribute("data-attr"),y=g==="resetLastSave",m=g==="resetDefault",_=p._fullLayout,d=_._subplots.gl3d||[],S={},w=0;w<d.length;w++){var E,C=d[w],O=C+".camera",P=C+".aspectratio",z=C+".aspectmode",j=_[C]._scene;y?(S[O+".up"]=j.viewInitial.up,S[O+".eye"]=j.viewInitial.eye,S[O+".center"]=j.viewInitial.center,E=!0):m&&(S[O+".up"]=null,S[O+".eye"]=null,S[O+".center"]=null,E=!0),E&&(S[P+".x"]=j.viewInitial.aspectratio.x,S[P+".y"]=j.viewInitial.aspectratio.y,S[P+".z"]=j.viewInitial.aspectratio.z,S[z]=j.viewInitial.aspectmode)}M.call("_guiRelayout",p,S)}function a(p,v){var g=v.currentTarget,y=g._previousVal,m=p._fullLayout,_=m._subplots.gl3d||[],d=["xaxis","yaxis","zaxis"],S={},w={};if(y)w=y,g._previousVal=null;else{for(var E=0;E<_.length;E++){var C=_[E],O=m[C],P=C+".hovermode";S[P]=O.hovermode,w[P]=!1;for(var z=0;z<3;z++){var j=d[z],I=C+"."+j+".showspikes";w[I]=!1,S[I]=O[j].showspikes}}g._previousVal=S}return w}function l(p,v){for(var g=v.currentTarget,y=g.getAttribute("data-attr"),m=g.getAttribute("data-val")||!0,_=p._fullLayout,d=_._subplots.geo||[],S=0;S<d.length;S++){var w=d[S],E=_[w];if(y==="zoom"){var C=E.projection.scale,O=m==="in"?2*C:.5*C;M.call("_guiRelayout",p,w+".projection.scale",O)}}y==="reset"&&x(p,"geo")}function u(p){var v=p._fullLayout;return!v.hovermode&&(v._has("cartesian")?v._isHoriz?"y":"x":"closest")}function h(p){var v=u(p);M.call("_guiRelayout",p,"hovermode",v)}function c(p,v){for(var g=v.currentTarget.getAttribute("data-val"),y=p._fullLayout,m=y._subplots.mapbox||[],_={},d=0;d<m.length;d++){var S=m[d],w=y[S].zoom,E=g==="in"?1.05*w:w/1.05;_[S+".zoom"]=E}M.call("_guiRelayout",p,_)}function x(p,v){for(var g=p._fullLayout,y=g._subplots[v]||[],m={},_=0;_<y.length;_++)for(var d=y[_],S=g[d]._subplot.viewInitial,w=Object.keys(S),E=0;E<w.length;E++){var C=w[E];m[d+"."+C]=S[C]}M.call("_guiRelayout",p,m)}t.toImage={name:"toImage",title:function(p){var v=(p._context.toImageButtonOptions||{}).format||"png";return o(p,v==="png"?"Download plot as a png":"Download plot")},icon:T.camera,click:function(p){var v=p._context.toImageButtonOptions,g={format:v.format||"png"};f.notifier(o(p,"Taking snapshot - this may take a few seconds"),"long"),g.format!=="svg"&&f.isIE()&&(f.notifier(o(p,"IE only supports svg.  Changing format to svg."),"long"),g.format="svg"),["filename","width","height","scale"].forEach(function(y){y in v&&(g[y]=v[y])}),M.call("downloadImage",p,g).then(function(y){f.notifier(o(p,"Snapshot succeeded")+" - "+y,"long")}).catch(function(){f.notifier(o(p,"Sorry, there was a problem downloading your snapshot!"),"long")})}},t.sendDataToCloud={name:"sendDataToCloud",title:function(p){return o(p,"Edit in Chart Studio")},icon:T.disk,click:function(p){k.sendDataToCloud(p)}},t.editInChartStudio={name:"editInChartStudio",title:function(p){return o(p,"Edit in Chart Studio")},icon:T.pencil,click:function(p){k.sendDataToCloud(p)}},t.zoom2d={name:"zoom2d",_cat:"zoom",title:function(p){return o(p,"Zoom")},attr:"dragmode",val:"zoom",icon:T.zoombox,click:i},t.pan2d={name:"pan2d",_cat:"pan",title:function(p){return o(p,"Pan")},attr:"dragmode",val:"pan",icon:T.pan,click:i},t.select2d={name:"select2d",_cat:"select",title:function(p){return o(p,"Box Select")},attr:"dragmode",val:"select",icon:T.selectbox,click:i},t.lasso2d={name:"lasso2d",_cat:"lasso",title:function(p){return o(p,"Lasso Select")},attr:"dragmode",val:"lasso",icon:T.lasso,click:i},t.drawclosedpath={name:"drawclosedpath",title:function(p){return o(p,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:T.drawclosedpath,click:i},t.drawopenpath={name:"drawopenpath",title:function(p){return o(p,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:T.drawopenpath,click:i},t.drawline={name:"drawline",title:function(p){return o(p,"Draw line")},attr:"dragmode",val:"drawline",icon:T.drawline,click:i},t.drawrect={name:"drawrect",title:function(p){return o(p,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:T.drawrect,click:i},t.drawcircle={name:"drawcircle",title:function(p){return o(p,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:T.drawcircle,click:i},t.eraseshape={name:"eraseshape",title:function(p){return o(p,"Erase active shape")},icon:T.eraseshape,click:b},t.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(p){return o(p,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:i},t.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(p){return o(p,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:i},t.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(p){return o(p,"Autoscale")},attr:"zoom",val:"auto",icon:T.autoscale,click:i},t.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(p){return o(p,"Reset axes")},attr:"zoom",val:"reset",icon:T.home,click:i},t.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(p){return o(p,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:i},t.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(p){return o(p,"Compare data on hover")},attr:"hovermode",val:function(p){return p._fullLayout._isHoriz?"y":"x"},icon:T.tooltip_compare,gravity:"ne",click:i},t.zoom3d={name:"zoom3d",_cat:"zoom",title:function(p){return o(p,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:T.zoombox,click:n},t.pan3d={name:"pan3d",_cat:"pan",title:function(p){return o(p,"Pan")},attr:"scene.dragmode",val:"pan",icon:T.pan,click:n},t.orbitRotation={name:"orbitRotation",title:function(p){return o(p,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:T["3d_rotate"],click:n},t.tableRotation={name:"tableRotation",title:function(p){return o(p,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:T["z-axis"],click:n},t.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(p){return o(p,"Reset camera to default")},attr:"resetDefault",icon:T.home,click:r},t.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(p){return o(p,"Reset camera to last save")},attr:"resetLastSave",icon:T.movie,click:r},t.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(p){return o(p,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(p,v){var g=a(p,v);M.call("_guiRelayout",p,g)}},t.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(p){return o(p,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:l},t.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(p){return o(p,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:l},t.resetGeo={name:"resetGeo",_cat:"reset",title:function(p){return o(p,"Reset")},attr:"reset",val:null,icon:T.autoscale,click:l},t.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(p){return o(p,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:h},t.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(p){return o(p,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:h},t.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(p){return o(p,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:h},t.resetViewSankey={name:"resetSankeyGroup",title:function(p){return o(p,"Reset view")},icon:T.home,click:function(p){for(var v={"node.groups":[],"node.x":[],"node.y":[]},g=0;g<p._fullData.length;g++){var y=p._fullData[g]._viewInitial;v["node.groups"].push(y.node.groups.slice()),v["node.x"].push(y.node.x.slice()),v["node.y"].push(y.node.y.slice())}M.call("restyle",p,v)}},t.toggleHover={name:"toggleHover",title:function(p){return o(p,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(p,v){var g=a(p,v);g.hovermode=u(p),M.call("_guiRelayout",p,g)}},t.resetViews={name:"resetViews",title:function(p){return o(p,"Reset views")},icon:T.home,click:function(p,v){var g=v.currentTarget;g.setAttribute("data-attr","zoom"),g.setAttribute("data-val","reset"),i(p,v),g.setAttribute("data-attr","resetLastSave"),r(p,v),x(p,"geo"),x(p,"mapbox")}},t.toggleSpikelines={name:"toggleSpikelines",title:function(p){return o(p,"Toggle Spike Lines")},icon:T.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(p){var v=p._fullLayout,g=v._cartesianSpikesEnabled;v._cartesianSpikesEnabled=g==="on"?"off":"on",M.call("_guiRelayout",p,function(y){for(var m=y._fullLayout._cartesianSpikesEnabled==="on",_=s.list(y,null,!0),d={},S=0;S<_.length;S++){var w=_[S];d[w._name+".showspikes"]=!!m||w._showSpikeInitial}return d}(p))}},t.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(p){return o(p,"Reset view")},attr:"reset",icon:T.home,click:function(p){x(p,"mapbox")}},t.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(p){return o(p,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:c},t.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(p){return o(p,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:c}},76052:function(ee,R,e){var M=e(44248),k=Object.keys(M),s=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],T=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(s),b=[];k.forEach(function(f){(function(o){if(T.indexOf(o._cat||o.name)===-1){var t=o.name,i=(o._cat||o.name).toLowerCase();b.indexOf(t)===-1&&b.push(t),b.indexOf(i)===-1&&b.push(i)}})(M[f])}),b.sort(),ee.exports={DRAW_MODES:s,backButtons:T,foreButtons:b}},90824:function(ee,R,e){var M=e(3400),k=e(76308),s=e(31780),T=e(66540);ee.exports=function(b,f){var o=b.modebar||{},t=s.newContainer(f,"modebar");function i(r,a){return M.coerce(o,t,T,r,a)}i("orientation"),i("bgcolor",k.addOpacity(f.paper_bgcolor,.5));var n=k.contrast(k.rgb(f.modebar.bgcolor));i("color",k.addOpacity(n,.3)),i("activecolor",k.addOpacity(n,.7)),i("uirevision",f.uirevision),i("add"),i("remove")}},45460:function(ee,R,e){ee.exports={moduleType:"component",name:"modebar",layoutAttributes:e(66540),supplyLayoutDefaults:e(90824),manage:e(18816)}},18816:function(ee,R,e){var M=e(79811),k=e(43028),s=e(24040),T=e(10624).isUnifiedHover,b=e(66400),f=e(44248),o=e(76052).DRAW_MODES,t=e(3400).extendDeep;ee.exports=function(i){var n=i._fullLayout,r=i._context,a=n._modeBar;if(r.displayModeBar||r.watermark){if(!Array.isArray(r.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(r.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var l,u=r.modeBarButtons;l=Array.isArray(u)&&u.length?function(h){for(var c=t([],h),x=0;x<c.length;x++)for(var p=c[x],v=0;v<p.length;v++){var g=p[v];if(typeof g=="string"){if(f[g]===void 0)throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));c[x][v]=f[g]}}return c}(u):!r.displayModeBar&&r.watermark?[]:function(h){var c=h._fullLayout,x=h._fullData,p=h._context;function v(fe,pe){if(typeof pe=="string"){if(pe.toLowerCase()===fe.toLowerCase())return!0}else{var ge=pe.name,me=pe._cat||pe.name;if(ge===fe||me===fe.toLowerCase())return!0}return!1}var g=c.modebar.add;typeof g=="string"&&(g=[g]);var y=c.modebar.remove;typeof y=="string"&&(y=[y]);var m=p.modeBarButtonsToAdd.concat(g.filter(function(fe){for(var pe=0;pe<p.modeBarButtonsToRemove.length;pe++)if(v(fe,p.modeBarButtonsToRemove[pe]))return!1;return!0})),_=p.modeBarButtonsToRemove.concat(y.filter(function(fe){for(var pe=0;pe<p.modeBarButtonsToAdd.length;pe++)if(v(fe,p.modeBarButtonsToAdd[pe]))return!1;return!0})),d=c._has("cartesian"),S=c._has("gl3d"),w=c._has("geo"),E=c._has("pie"),C=c._has("funnelarea"),O=c._has("gl2d"),P=c._has("ternary"),z=c._has("mapbox"),j=c._has("polar"),I=c._has("smith"),N=c._has("sankey"),W=function(fe){for(var pe=M.list({_fullLayout:fe},null,!0),ge=0;ge<pe.length;ge++)if(!pe[ge].fixedrange)return!1;return!0}(c),F=T(c.hovermode),U=[];function H(fe){if(fe.length){for(var pe=[],ge=0;ge<fe.length;ge++){for(var me=fe[ge],be=f[me],ke=be.name.toLowerCase(),ze=(be._cat||be.name).toLowerCase(),ve=!1,oe=0;oe<_.length;oe++){var ie=_[oe].toLowerCase();if(ie===ke||ie===ze){ve=!0;break}}ve||pe.push(f[me])}U.push(pe)}}var ne=["toImage"];p.showEditInChartStudio?ne.push("editInChartStudio"):p.showSendToCloud&&ne.push("sendDataToCloud"),H(ne);var $=[],K=[],Q=[],Z=[];(d||O||E||C||P)+w+S+z+j+I>1?(K=["toggleHover"],Q=["resetViews"]):w?($=["zoomInGeo","zoomOutGeo"],K=["hoverClosestGeo"],Q=["resetGeo"]):S?(K=["hoverClosest3d"],Q=["resetCameraDefault3d","resetCameraLastSave3d"]):z?($=["zoomInMapbox","zoomOutMapbox"],K=["toggleHover"],Q=["resetViewMapbox"]):O?K=["hoverClosestGl2d"]:E?K=["hoverClosestPie"]:N?(K=["hoverClosestCartesian","hoverCompareCartesian"],Q=["resetViewSankey"]):K=["toggleHover"],d&&K.push("toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"),(function(fe){for(var pe=0;pe<fe.length;pe++)if(!s.traceIs(fe[pe],"noHover"))return!1;return!0}(x)||F)&&(K=[]),!d&&!O||W||($=["zoomIn2d","zoomOut2d","autoScale2d"],Q[0]!=="resetViews"&&(Q=["resetScale2d"])),S?Z=["zoom3d","pan3d","orbitRotation","tableRotation"]:(d||O)&&!W||P?Z=["zoom2d","pan2d"]:z||w?Z=["pan2d"]:j&&(Z=["zoom2d"]),function(fe){for(var pe=!1,ge=0;ge<fe.length&&!pe;ge++){var me=fe[ge];me._module&&me._module.selectPoints&&(s.traceIs(me,"scatter-like")?(k.hasMarkers(me)||k.hasText(me))&&(pe=!0):s.traceIs(me,"box-violin")&&me.boxpoints!=="all"&&me.points!=="all"||(pe=!0))}return pe}(x)&&Z.push("select2d","lasso2d");var X=[],te=function(fe){X.indexOf(fe)===-1&&K.indexOf(fe)!==-1&&X.push(fe)};if(Array.isArray(m)){for(var ae=[],se=0;se<m.length;se++){var ce=m[se];typeof ce=="string"?(ce=ce.toLowerCase(),o.indexOf(ce)!==-1?(c._has("mapbox")||c._has("cartesian"))&&Z.push(ce):ce==="togglespikelines"?te("toggleSpikelines"):ce==="togglehover"?te("toggleHover"):ce==="hovercompare"?te("hoverCompareCartesian"):ce==="hoverclosest"?(te("hoverClosestCartesian"),te("hoverClosestGeo"),te("hoverClosest3d"),te("hoverClosestGl2d"),te("hoverClosestPie")):ce==="v1hovermode"&&(te("hoverClosestCartesian"),te("hoverCompareCartesian"),te("hoverClosestGeo"),te("hoverClosest3d"),te("hoverClosestGl2d"),te("hoverClosestPie"))):ae.push(ce)}m=ae}return H(Z),H($.concat(Q)),H(X),function(fe,pe){if(pe.length)if(Array.isArray(pe[0]))for(var ge=0;ge<pe.length;ge++)fe.push(pe[ge]);else fe.push(pe);return fe}(U,m)}(i),a?a.update(i,l):n._modeBar=b(i,l)}else a&&(a.destroy(),delete n._modeBar)}},66400:function(ee,R,e){var M=e(33428),k=e(38248),s=e(3400),T=e(9224),b=e(25788).version,f=new DOMParser;function o(i){this.container=i.container,this.element=document.createElement("div"),this.update(i.graphInfo,i.buttons),this.container.appendChild(this.element)}var t=o.prototype;t.update=function(i,n){this.graphInfo=i;var r=this.graphInfo._context,a=this.graphInfo._fullLayout,l="modebar-"+a._uid;this.element.setAttribute("id",l),this._uid=l,this.element.className="modebar",r.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),a.modebar.orientation==="v"&&(this.element.className+=" vertical",n=n.reverse());var u=a.modebar,h=r.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";s.deleteRelatedStyleRule(l),s.addRelatedStyleRule(l,h+"#"+l+" .modebar-group","background-color: "+u.bgcolor),s.addRelatedStyleRule(l,"#"+l+" .modebar-btn .icon path","fill: "+u.color),s.addRelatedStyleRule(l,"#"+l+" .modebar-btn:hover .icon path","fill: "+u.activecolor),s.addRelatedStyleRule(l,"#"+l+" .modebar-btn.active .icon path","fill: "+u.activecolor);var c=!this.hasButtons(n),x=this.hasLogo!==r.displaylogo,p=this.locale!==r.locale;if(this.locale=r.locale,(c||x||p)&&(this.removeAllButtons(),this.updateButtons(n),r.watermark||r.displaylogo)){var v=this.getLogo();r.watermark&&(v.className=v.className+" watermark"),a.modebar.orientation==="v"?this.element.insertBefore(v,this.element.childNodes[0]):this.element.appendChild(v),this.hasLogo=!0}this.updateActiveButton()},t.updateButtons=function(i){var n=this;this.buttons=i,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(r){var a=n.createGroup();r.forEach(function(l){var u=l.name;if(!u)throw new Error("must provide button 'name' in button config");if(n.buttonsNames.indexOf(u)!==-1)throw new Error("button name '"+u+"' is taken");n.buttonsNames.push(u);var h=n.createButton(l);n.buttonElements.push(h),a.appendChild(h)}),n.element.appendChild(a)})},t.createGroup=function(){var i=document.createElement("div");return i.className="modebar-group",i},t.createButton=function(i){var n=this,r=document.createElement("a");r.setAttribute("rel","tooltip"),r.className="modebar-btn";var a=i.title;a===void 0?a=i.name:typeof a=="function"&&(a=a(this.graphInfo)),(a||a===0)&&r.setAttribute("data-title",a),i.attr!==void 0&&r.setAttribute("data-attr",i.attr);var l=i.val;if(l!==void 0&&(typeof l=="function"&&(l=l(this.graphInfo)),r.setAttribute("data-val",l)),typeof i.click!="function")throw new Error("must provide button 'click' function in button config");r.addEventListener("click",function(h){i.click(n.graphInfo,h),n.updateActiveButton(h.currentTarget)}),r.setAttribute("data-toggle",i.toggle||!1),i.toggle&&M.select(r).classed("active",!0);var u=i.icon;return typeof u=="function"?r.appendChild(u()):r.appendChild(this.createIcon(u||T.question)),r.setAttribute("data-gravity",i.gravity||"n"),r},t.createIcon=function(i){var n,r=k(i.height)?Number(i.height):i.ascent-i.descent,a="http://www.w3.org/2000/svg";if(i.path){(n=document.createElementNS(a,"svg")).setAttribute("viewBox",[0,0,i.width,r].join(" ")),n.setAttribute("class","icon");var l=document.createElementNS(a,"path");l.setAttribute("d",i.path),i.transform?l.setAttribute("transform",i.transform):i.ascent!==void 0&&l.setAttribute("transform","matrix(1 0 0 -1 0 "+i.ascent+")"),n.appendChild(l)}return i.svg&&(n=f.parseFromString(i.svg,"application/xml").childNodes[0]),n.setAttribute("height","1em"),n.setAttribute("width","1em"),n},t.updateActiveButton=function(i){var n=this.graphInfo._fullLayout,r=i!==void 0?i.getAttribute("data-attr"):null;this.buttonElements.forEach(function(a){var l=a.getAttribute("data-val")||!0,u=a.getAttribute("data-attr"),h=a.getAttribute("data-toggle")==="true",c=M.select(a);if(h)u===r&&c.classed("active",!c.classed("active"));else{var x=u===null?u:s.nestedProperty(n,u).get();c.classed("active",x===l)}})},t.hasButtons=function(i){var n=this.buttons;if(!n||i.length!==n.length)return!1;for(var r=0;r<i.length;++r){if(i[r].length!==n[r].length)return!1;for(var a=0;a<i[r].length;a++)if(i[r][a].name!==n[r][a].name)return!1}return!0},t.getLogo=function(){var i=this.createGroup(),n=document.createElement("a");return n.href="https://plotly.com/",n.target="_blank",n.setAttribute("data-title",s._(this.graphInfo,"Produced with Plotly.js")+" (v"+b+")"),n.className="modebar-btn plotlyjsicon modebar-btn--logo",n.appendChild(this.createIcon(T.newplotlylogo)),i.appendChild(n),i},t.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},t.destroy=function(){s.removeElement(this.container.querySelector(".modebar")),s.deleteRelatedStyleRule(this._uid)},ee.exports=function(i,n){var r=i._fullLayout,a=new o({graphInfo:i,container:r._modebardiv.node(),buttons:n});return r._privateplot&&M.select(a.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),a}},26680:function(ee,R,e){var M=e(25376),k=e(22548),s=(0,e(31780).templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});ee.exports={visible:{valType:"boolean",editType:"plot"},buttons:s,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:M({editType:"plot"}),bgcolor:{valType:"color",dflt:k.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},85984:function(ee){ee.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},22148:function(ee,R,e){var M=e(3400),k=e(76308),s=e(31780),T=e(51272),b=e(26680),f=e(85984);function o(t,i,n,r){var a=r.calendar;function l(h,c){return M.coerce(t,i,b.buttons,h,c)}if(l("visible")){var u=l("step");u!=="all"&&(!a||a==="gregorian"||u!=="month"&&u!=="year"?l("stepmode"):i.stepmode="backward",l("count")),l("label")}}ee.exports=function(t,i,n,r,a){var l=t.rangeselector||{},u=s.newContainer(i,"rangeselector");function h(p,v){return M.coerce(l,u,b,p,v)}if(h("visible",T(l,u,{name:"buttons",handleItemDefaults:o,calendar:a}).length>0)){var c=function(p,v,g){for(var y=g.filter(function(S){return v[S].anchor===p._id}),m=0,_=0;_<y.length;_++){var d=v[y[_]].domain;d&&(m=Math.max(d[1],m))}return[p.domain[0],m+f.yPad]}(i,n,r);h("x",c[0]),h("y",c[1]),M.noneOrAll(t,i,["x","y"]),h("xanchor"),h("yanchor"),M.coerceFont(h,"font",n.font);var x=h("bgcolor");h("activecolor",k.contrast(x,f.lightAmount,f.darkAmount)),h("bordercolor"),h("borderwidth")}}},50216:function(ee,R,e){var M=e(33428),k=e(24040),s=e(7316),T=e(76308),b=e(43616),f=e(3400),o=f.strTranslate,t=e(72736),i=e(79811),n=e(84284),r=n.LINE_SPACING,a=n.FROM_TL,l=n.FROM_BR,u=e(85984),h=e(48040);function c(v){return v._id}function x(v,g,y){var m=f.ensureSingle(v,"rect","selector-rect",function(_){_.attr("shape-rendering","crispEdges")});m.attr({rx:u.rx,ry:u.ry}),m.call(T.stroke,g.bordercolor).call(T.fill,function(_,d){return d._isActive||d._isHovered?_.activecolor:_.bgcolor}(g,y)).style("stroke-width",g.borderwidth+"px")}function p(v,g,y,m){var _,d;f.ensureSingle(v,"text","selector-text",function(S){S.attr("text-anchor","middle")}).call(b.font,g.font).text((_=y,d=m._fullLayout._meta,_.label?d?f.templateString(_.label,d):_.label:_.step==="all"?"all":_.count+_.step.charAt(0))).call(function(S){t.convertToTspans(S,m)})}ee.exports=function(v){var g=v._fullLayout._infolayer.selectAll(".rangeselector").data(function(y){for(var m=i.list(y,"x",!0),_=[],d=0;d<m.length;d++){var S=m[d];S.rangeselector&&S.rangeselector.visible&&_.push(S)}return _}(v),c);g.enter().append("g").classed("rangeselector",!0),g.exit().remove(),g.style({cursor:"pointer","pointer-events":"all"}),g.each(function(y){var m=M.select(this),_=y,d=_.rangeselector,S=m.selectAll("g.button").data(f.filterVisible(d.buttons));S.enter().append("g").classed("button",!0),S.exit().remove(),S.each(function(w){var E=M.select(this),C=h(_,w);w._isActive=function(O,P,z){if(P.step==="all")return O.autorange===!0;var j=Object.keys(z);return O.range[0]===z[j[0]]&&O.range[1]===z[j[1]]}(_,w,C),E.call(x,d,w),E.call(p,d,w,v),E.on("click",function(){v._dragged||k.call("_guiRelayout",v,C)}),E.on("mouseover",function(){w._isHovered=!0,E.call(x,d,w)}),E.on("mouseout",function(){w._isHovered=!1,E.call(x,d,w)})}),function(w,E,C,O,P){var z=0,j=0,I=C.borderwidth;E.each(function(){var ne=M.select(this).select(".selector-text"),$=C.font.size*r,K=Math.max($*t.lineCount(ne),16)+3;j=Math.max(j,K)}),E.each(function(){var ne=M.select(this),$=ne.select(".selector-rect"),K=ne.select(".selector-text"),Q=K.node()&&b.bBox(K.node()).width,Z=C.font.size*r,X=t.lineCount(K),te=Math.max(Q+10,u.minButtonWidth);ne.attr("transform",o(I+z,I)),$.attr({x:0,y:0,width:te,height:j}),t.positionText(K,te/2,j/2-(X-1)*Z/2+3),z+=te+5});var N=w._fullLayout._size,W=N.l+N.w*C.x,F=N.t+N.h*(1-C.y),U="left";f.isRightAnchor(C)&&(W-=z,U="right"),f.isCenterAnchor(C)&&(W-=z/2,U="center");var H="top";f.isBottomAnchor(C)&&(F-=j,H="bottom"),f.isMiddleAnchor(C)&&(F-=j/2,H="middle"),z=Math.ceil(z),j=Math.ceil(j),W=Math.round(W),F=Math.round(F),s.autoMargin(w,O+"-range-selector",{x:C.x,y:C.y,l:z*a[U],r:z*l[U],b:j*l[H],t:j*a[H]}),P.attr("transform",o(W,F))}(v,S,d,_._name,m)})}},48040:function(ee,R,e){var M=e(73220),k=e(3400).titleCase;ee.exports=function(s,T){var b=s._name,f={};if(T.step==="all")f[b+".autorange"]=!0;else{var o=function(t,i){var n,r=t.range,a=new Date(t.r2l(r[1])),l=i.step,u=M["utc"+k(l)],h=i.count;switch(i.stepmode){case"backward":n=t.l2r(+u.offset(a,-h));break;case"todate":var c=u.offset(a,-h);n=t.l2r(+u.ceil(c))}return[n,r[1]]}(s,T);f[b+".range[0]"]=o[0],f[b+".range[1]"]=o[1]}return f}},41152:function(ee,R,e){ee.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e(26680)}}},layoutAttributes:e(26680),handleDefaults:e(22148),draw:e(50216)}},11200:function(ee,R,e){var M=e(22548);ee.exports={bgcolor:{valType:"color",dflt:M.background,editType:"plot"},bordercolor:{valType:"color",dflt:M.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},26652:function(ee,R,e){var M=e(79811).list,k=e(19280).getAutoRange,s=e(74636);ee.exports=function(T){for(var b=M(T,"x",!0),f=0;f<b.length;f++){var o=b[f],t=o[s.name];t&&t.visible&&t.autorange&&(t._input.autorange=!0,t._input.range=t.range=k(T,o))}}},74636:function(ee){ee.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},94040:function(ee,R,e){var M=e(3400),k=e(31780),s=e(79811),T=e(11200),b=e(10936);ee.exports=function(f,o,t){var i=f[t],n=o[t];if(i.rangeslider||o._requestRangeslider[n._id]){M.isPlainObject(i.rangeslider)||(i.rangeslider={});var r,a,l=i.rangeslider,u=k.newContainer(n,"rangeslider");if(m("visible")){m("bgcolor",o.plot_bgcolor),m("bordercolor"),m("borderwidth"),m("thickness"),m("autorange",!n.isValidRange(l.range)),m("range");var h=o._subplots;if(h)for(var c=h.cartesian.filter(function(d){return d.substr(0,d.indexOf("y"))===s.name2id(t)}).map(function(d){return d.substr(d.indexOf("y"),d.length)}),x=M.simpleMap(c,s.id2name),p=0;p<x.length;p++){var v=x[p];r=l[v]||{},a=k.newContainer(u,v,"yaxis");var g,y=o[v];r.range&&y.isValidRange(r.range)&&(g="fixed"),_("rangemode",g)!=="match"&&_("range",y.range.slice())}u._input=l}}function m(d,S){return M.coerce(l,u,T,d,S)}function _(d,S){return M.coerce(r,a,b,d,S)}}},20060:function(ee,R,e){var M=e(33428),k=e(24040),s=e(7316),T=e(3400),b=T.strTranslate,f=e(43616),o=e(76308),t=e(81668),i=e(57952),n=e(79811),r=e(86476),a=e(93972),l=e(74636);function u(y){return typeof y.clientX=="number"?y.clientX:y.touches&&y.touches.length>0?y.touches[0].clientX:0}function h(y,m,_,d){var S=T.ensureSingle(y,"rect",l.bgClassName,function(O){O.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),w=d.borderwidth%2==0?d.borderwidth:d.borderwidth-1,E=-d._offsetShift,C=f.crispRound(m,d.borderwidth);S.attr({width:d._width+w,height:d._height+w,transform:b(E,E),"stroke-width":C}).call(o.stroke,d.bordercolor).call(o.fill,d.bgcolor)}function c(y,m,_,d){var S=m._fullLayout;T.ensureSingleById(S._topdefs,"clipPath",d._clipId,function(w){w.append("rect").attr({x:0,y:0})}).select("rect").attr({width:d._width,height:d._height})}function x(y,m,_,d){var S,w=m.calcdata,E=y.selectAll("g."+l.rangePlotClassName).data(_._subplotsWith,T.identity);E.enter().append("g").attr("class",function(C){return l.rangePlotClassName+" "+C}).call(f.setClipUrl,d._clipId,m),E.order(),E.exit().remove(),E.each(function(C,O){var P=M.select(this),z=O===0,j=n.getFromId(m,C,"y"),I=j._name,N=d[I],W={data:[],layout:{xaxis:{type:_.type,domain:[0,1],range:d.range.slice(),calendar:_.calendar},width:d._width,height:d._height,margin:{t:0,b:0,l:0,r:0}},_context:m._context};_.rangebreaks&&(W.layout.xaxis.rangebreaks=_.rangebreaks),W.layout[I]={type:j.type,domain:[0,1],range:N.rangemode!=="match"?N.range.slice():j.range.slice(),calendar:j.calendar},j.rangebreaks&&(W.layout[I].rangebreaks=j.rangebreaks),s.supplyDefaults(W);var F=W._fullLayout.xaxis,U=W._fullLayout[I];F.clearCalc(),F.setScale(),U.clearCalc(),U.setScale();var H={id:C,plotgroup:P,xaxis:F,yaxis:U,isRangePlot:!0};z?S=H:(H.mainplot="xy",H.mainplotinfo=S),i.rangePlot(m,H,function(ne,$){for(var K=[],Q=0;Q<ne.length;Q++){var Z=ne[Q],X=Z[0].trace;X.xaxis+X.yaxis===$&&K.push(Z)}return K}(w,C))})}function p(y,m,_,d,S){T.ensureSingle(y,"rect",l.maskMinClassName,function(w){w.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",d._height).call(o.fill,l.maskColor),T.ensureSingle(y,"rect",l.maskMaxClassName,function(w){w.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",d._height).call(o.fill,l.maskColor),S.rangemode!=="match"&&(T.ensureSingle(y,"rect",l.maskMinOppAxisClassName,function(w){w.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",d._width).call(o.fill,l.maskOppAxisColor),T.ensureSingle(y,"rect",l.maskMaxOppAxisClassName,function(w){w.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",d._width).style("border-top",l.maskOppBorder).call(o.fill,l.maskOppAxisColor))}function v(y,m,_,d){m._context.staticPlot||T.ensureSingle(y,"rect",l.slideBoxClassName,function(S){S.attr({y:0,cursor:l.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:d._height,fill:l.slideBoxFill})}function g(y,m,_,d){var S=T.ensureSingle(y,"g",l.grabberMinClassName),w=T.ensureSingle(y,"g",l.grabberMaxClassName),E={x:0,width:l.handleWidth,rx:l.handleRadius,fill:o.background,stroke:o.defaultLine,"stroke-width":l.handleStrokeWidth,"shape-rendering":"crispEdges"},C={y:Math.round(d._height/4),height:Math.round(d._height/2)};T.ensureSingle(S,"rect",l.handleMinClassName,function(P){P.attr(E)}).attr(C),T.ensureSingle(w,"rect",l.handleMaxClassName,function(P){P.attr(E)}).attr(C);var O={width:l.grabAreaWidth,x:0,y:0,fill:l.grabAreaFill,cursor:m._context.staticPlot?void 0:l.grabAreaCursor};T.ensureSingle(S,"rect",l.grabAreaMinClassName,function(P){P.attr(O)}).attr("height",d._height),T.ensureSingle(w,"rect",l.grabAreaMaxClassName,function(P){P.attr(O)}).attr("height",d._height)}ee.exports=function(y){for(var m=y._fullLayout,_=m._rangeSliderData,d=0;d<_.length;d++){var S=_[d][l.name];S._clipId=S._id+"-"+m._uid}var w=m._infolayer.selectAll("g."+l.containerClassName).data(_,function(E){return E._name});w.exit().each(function(E){var C=E[l.name];m._topdefs.select("#"+C._clipId).remove()}).remove(),_.length!==0&&(w.enter().append("g").classed(l.containerClassName,!0).attr("pointer-events","all"),w.each(function(E){var C=M.select(this),O=E[l.name],P=m[n.id2name(E.anchor)],z=O[n.id2name(E.anchor)];if(O.range){var j,I=T.simpleMap(O.range,E.r2l),N=T.simpleMap(E.range,E.r2l);j=N[0]<N[1]?[Math.min(I[0],N[0]),Math.max(I[1],N[1])]:[Math.max(I[0],N[0]),Math.min(I[1],N[1])],O.range=O._input.range=T.simpleMap(j,E.l2r)}E.cleanRange("rangeslider.range");var W=m._size,F=E.domain;O._width=W.w*(F[1]-F[0]);var U=Math.round(W.l+W.w*F[0]),H=Math.round(W.t+W.h*(1-E._counterDomainMin)+(E.side==="bottom"?E._depth:0)+O._offsetShift+l.extraPad);C.attr("transform",b(U,H)),O._rl=T.simpleMap(O.range,E.r2l);var ne=O._rl[0],$=O._rl[1],K=$-ne;if(O.p2d=function(pe){return pe/O._width*K+ne},O.d2p=function(pe){return(pe-ne)/K*O._width},E.rangebreaks){var Q=E.locateBreaks(ne,$);if(Q.length){var Z,X,te=0;for(Z=0;Z<Q.length;Z++)te+=(X=Q[Z]).max-X.min;var ae=O._width/($-ne-te),se=[-ae*ne];for(Z=0;Z<Q.length;Z++)X=Q[Z],se.push(se[se.length-1]-ae*(X.max-X.min));for(O.d2p=function(pe){for(var ge=se[0],me=0;me<Q.length;me++){var be=Q[me];if(pe>=be.max)ge=se[me+1];else if(pe<be.min)break}return ge+ae*pe},Z=0;Z<Q.length;Z++)(X=Q[Z]).pmin=O.d2p(X.min),X.pmax=O.d2p(X.max);O.p2d=function(pe){for(var ge=se[0],me=0;me<Q.length;me++){var be=Q[me];if(pe>=be.pmax)ge=se[me+1];else if(pe<be.pmin)break}return(pe-ge)/ae}}}if(z.rangemode!=="match"){var ce=P.r2l(z.range[0]),fe=P.r2l(z.range[1])-ce;O.d2pOppAxis=function(pe){return(pe-ce)/fe*O._height}}C.call(h,y,E,O).call(c,y,E,O).call(x,y,E,O).call(p,y,E,O,z).call(v,y,E,O).call(g,y,E,O),function(pe,ge,me,be){if(!ge._context.staticPlot){var ke=pe.select("rect."+l.slideBoxClassName).node(),ze=pe.select("rect."+l.grabAreaMinClassName).node(),ve=pe.select("rect."+l.grabAreaMaxClassName).node();pe.on("mousedown",oe),pe.on("touchstart",oe)}function oe(){var ie=M.event,he=ie.target,Se=u(ie),ye=Se-pe.node().getBoundingClientRect().left,we=be.d2p(me._rl[0]),Me=be.d2p(me._rl[1]),Oe=r.coverSlip();function Ie(_e){var Ae,Pe,Ee,Fe=+u(_e)-Se;switch(he){case ke:if(Ee="ew-resize",we+Fe>me._length||Me+Fe<0)return;Ae=we+Fe,Pe=Me+Fe;break;case ze:if(Ee="col-resize",we+Fe>me._length)return;Ae=we+Fe,Pe=Me;break;case ve:if(Ee="col-resize",Me+Fe<0)return;Ae=we,Pe=Me+Fe;break;default:Ee="ew-resize",Ae=ye,Pe=ye+Fe}if(Pe<Ae){var Ve=Pe;Pe=Ae,Ae=Ve}be._pixelMin=Ae,be._pixelMax=Pe,a(M.select(Oe),Ee),function(Ye,tt,nt,ht){function vt(Ke){return nt.l2r(T.constrain(Ke,ht._rl[0],ht._rl[1]))}var pt=vt(ht.p2d(ht._pixelMin)),Qe=vt(ht.p2d(ht._pixelMax));window.requestAnimationFrame(function(){k.call("_guiRelayout",tt,nt._name+".range",[pt,Qe])})}(0,ge,me,be)}function de(){Oe.removeEventListener("mousemove",Ie),Oe.removeEventListener("mouseup",de),this.removeEventListener("touchmove",Ie),this.removeEventListener("touchend",de),T.removeElement(Oe)}this.addEventListener("touchmove",Ie),this.addEventListener("touchend",de),Oe.addEventListener("mousemove",Ie),Oe.addEventListener("mouseup",de)}}(C,y,E,O),function(pe,ge,me,be,ke,ze){var ve=l.handleWidth/2;function oe(_e){return T.constrain(_e,0,be._width)}function ie(_e){return T.constrain(_e,0,be._height)}function he(_e){return T.constrain(_e,-ve,be._width+ve)}var Se=oe(be.d2p(me._rl[0])),ye=oe(be.d2p(me._rl[1]));if(pe.select("rect."+l.slideBoxClassName).attr("x",Se).attr("width",ye-Se),pe.select("rect."+l.maskMinClassName).attr("width",Se),pe.select("rect."+l.maskMaxClassName).attr("x",ye).attr("width",be._width-ye),ze.rangemode!=="match"){var we=be._height-ie(be.d2pOppAxis(ke._rl[1])),Me=be._height-ie(be.d2pOppAxis(ke._rl[0]));pe.select("rect."+l.maskMinOppAxisClassName).attr("x",Se).attr("height",we).attr("width",ye-Se),pe.select("rect."+l.maskMaxOppAxisClassName).attr("x",Se).attr("y",Me).attr("height",be._height-Me).attr("width",ye-Se),pe.select("rect."+l.slideBoxClassName).attr("y",we).attr("height",Me-we)}var Oe=.5,Ie=Math.round(he(Se-ve))-Oe,de=Math.round(he(ye-ve))+Oe;pe.select("g."+l.grabberMinClassName).attr("transform",b(Ie,Oe)),pe.select("g."+l.grabberMaxClassName).attr("transform",b(de,Oe))}(C,0,E,O,P,z),E.side==="bottom"&&t.draw(y,E._id+"title",{propContainer:E,propName:E._name+".title",placeholder:m._dfltTitle.x,attributes:{x:E._offset+E._length/2,y:H+O._height+O._offsetShift+10+1.5*E.title.font.size,"text-anchor":"middle"}})}))}},97944:function(ee,R,e){var M=e(79811),k=e(72736),s=e(74636),T=e(84284).LINE_SPACING,b=s.name;function f(o){var t=o&&o[b];return t&&t.visible}R.isVisible=f,R.makeData=function(o){var t=M.list({_fullLayout:o},"x",!0),i=o.margin,n=[];if(!o._has("gl2d"))for(var r=0;r<t.length;r++){var a=t[r];if(f(a)){n.push(a);var l=a[b];l._id=b+a._id,l._height=(o.height-i.b-i.t)*l.thickness,l._offsetShift=Math.floor(l.borderwidth/2)}}o._rangeSliderData=n},R.autoMarginOpts=function(o,t){var i=o._fullLayout,n=t[b],r=t._id.charAt(0),a=0,l=0;return t.side==="bottom"&&(a=t._depth,t.title.text!==i._dfltTitle[r]&&(l=1.5*t.title.font.size+10+n._offsetShift,l+=(t.title.text.match(k.BR_TAG_ALL)||[]).length*t.title.font.size*T)),{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:n._height+a+Math.max(i.margin.b,l),pad:s.extraPad+2*n._offsetShift}}},49692:function(ee,R,e){var M=e(3400),k=e(11200),s=e(10936),T=e(97944);ee.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:M.extendFlat({},k,{yaxis:s})}}},layoutAttributes:e(11200),handleDefaults:e(94040),calcAutorange:e(26652),draw:e(20060),isVisible:T.isVisible,makeData:T.makeData,autoMarginOpts:T.autoMarginOpts}},10936:function(ee){ee.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},93956:function(ee,R,e){var M=e(13916),k=e(52904).line,s=e(98192).u,T=e(92880).extendFlat,b=e(67824).overrideAll,f=e(31780).templatedArray;e(36208),ee.exports=b(f("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:T({},M.xref,{}),yref:T({},M.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:k.color,width:T({},k.width,{min:1,dflt:1}),dash:T({},s,{dflt:"dot"})}}),"arraydraw","from-root")},83280:function(ee){ee.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},74224:function(ee,R,e){var M=e(3400),k=e(54460),s=e(51272),T=e(93956),b=e(65152);function f(o,t,i){function n(E,C){return M.coerce(o,t,T,E,C)}var r=n("path"),a=n("type",r?"path":"rect")!=="path";a&&delete t.path,n("opacity"),n("line.color"),n("line.width"),n("line.dash");for(var l=["x","y"],u=0;u<2;u++){var h,c,x,p=l[u],v={_fullLayout:i},g=k.coerceRef(o,t,v,p);if((h=k.getFromId(v,g))._selectionIndices.push(t._index),x=b.rangeToShapePosition(h),c=b.shapePositionToRange(h),a){var y=p+"0",m=p+"1",_=o[y],d=o[m];o[y]=c(o[y],!0),o[m]=c(o[m],!0),k.coercePosition(t,v,n,g,y),k.coercePosition(t,v,n,g,m);var S=t[y],w=t[m];S!==void 0&&w!==void 0&&(t[y]=x(S),t[m]=x(w),o[y]=_,o[m]=d)}}a&&M.noneOrAll(o,t,["x0","x1","y0","y1"])}ee.exports=function(o,t){s(o,t,{name:"selections",handleItemDefaults:f});for(var i=t.selections,n=0;n<i.length;n++){var r=i[n];r&&r.path===void 0&&(r.x0!==void 0&&r.x1!==void 0&&r.y0!==void 0&&r.y1!==void 0||(t.selections[n]=null))}}},23640:function(ee,R,e){var M=e(9856).readPaths,k=e(55496),s=e(1936).clearOutlineControllers,T=e(76308),b=e(43616),f=e(31780).arrayEditor,o=e(65152),t=o.getPathString;function i(u){var h=u._fullLayout;for(var c in s(u),h._selectionLayer.selectAll("path").remove(),h._plots){var x=h._plots[c].selectionLayer;x&&x.selectAll("path").remove()}for(var p=0;p<h.selections.length;p++)r(u,p)}function n(u){return u._context.editSelection}function r(u,h){u._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+h+'"]').remove();var c=o.makeSelectionsOptionsAndPlotinfo(u,h),x=c.options,p=c.plotinfo;x._input&&function(v){var g=t(u,x),y={"data-index":h,"fill-rule":"evenodd",d:g},m=x.opacity,_="rgba(0,0,0,0)",d=x.line.color||T.contrast(u._fullLayout.plot_bgcolor),S=x.line.width,w=x.line.dash;S||(S=5,w="solid");var E=n(u)&&u._fullLayout._activeSelectionIndex===h;E&&(_=u._fullLayout.activeselection.fillcolor,m=u._fullLayout.activeselection.opacity);for(var C=[],O=1;O>=0;O--){var P=v.append("path").attr(y).style("opacity",O?.1:m).call(T.stroke,d).call(T.fill,_).call(b.dashLine,O?"solid":w,O?4+S:S);if(a(P,u,x),E){var z=f(u.layout,"selections",x);P.style({cursor:"move"});var j={element:P.node(),plotinfo:p,gd:u,editHelpers:z,isActiveSelection:!0},I=M(g,u);k(I,P,j)}else P.style("pointer-events",O?"all":"none");C[O]=P}var N=C[0];C[1].node().addEventListener("click",function(){return function(W,F){if(n(W)){var U=+F.node().getAttribute("data-index");if(U>=0){if(U===W._fullLayout._activeSelectionIndex)return void l(W);W._fullLayout._activeSelectionIndex=U,W._fullLayout._deactivateSelection=l,i(W)}}}(u,N)})}(u._fullLayout._selectionLayer)}function a(u,h,c){var x=c.xref+c.yref;b.setClipUrl(u,"clip"+h._fullLayout._uid+x,h)}function l(u){n(u)&&u._fullLayout._activeSelectionIndex>=0&&(s(u),delete u._fullLayout._activeSelectionIndex,i(u))}ee.exports={draw:i,drawOne:r,activateLastSelection:function(u){if(n(u)){var h=u._fullLayout.selections.length-1;u._fullLayout._activeSelectionIndex=h,u._fullLayout._deactivateSelection=l,i(u)}}}},34200:function(ee,R,e){var M=e(98192).u,k=e(92880).extendFlat;ee.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:k({},M,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},81004:function(ee){ee.exports=function(R,e,M){M("newselection.mode"),M("newselection.line.width")&&(M("newselection.line.color"),M("newselection.line.dash")),M("activeselection.fillcolor"),M("activeselection.opacity")}},5968:function(ee,R,e){var M=e(72760).selectMode,k=e(1936).clearOutline,s=e(9856),T=s.readPaths,b=s.writePaths,f=s.fixDatesForPaths;ee.exports=function(o,t){if(o.length){var i=o[0][0];if(i){var n=i.getAttribute("d"),r=t.gd,a=r._fullLayout.newselection,l=t.plotinfo,u=l.xaxis,h=l.yaxis,c=t.isActiveSelection,x=t.dragmode,p=(r.layout||{}).selections||[];if(!M(x)&&c!==void 0){var v=r._fullLayout._activeSelectionIndex;if(v<p.length)switch(r._fullLayout.selections[v].type){case"rect":x="select";break;case"path":x="lasso"}}var g,y=T(n,r,l,c),m={xref:u._id,yref:h._id,opacity:a.opacity,line:{color:a.line.color,width:a.line.width,dash:a.line.dash}};y.length===1&&(g=y[0]),g&&g.length===5&&x==="select"?(m.type="rect",m.x0=g[0][1],m.y0=g[0][2],m.x1=g[2][1],m.y1=g[2][2]):(m.type="path",u&&h&&f(y,u,h),m.path=b(y),g=null),k(r);for(var _=t.editHelpers,d=(_||{}).modifyItem,S=[],w=0;w<p.length;w++){var E=r._fullLayout.selections[w];if(E){if(S[w]=E._input,c!==void 0&&w===r._fullLayout._activeSelectionIndex){var C=m;switch(E.type){case"rect":d("x0",C.x0),d("x1",C.x1),d("y0",C.y0),d("y1",C.y1);break;case"path":d("path",C.path)}}}else S[w]=E}return c===void 0?(S.push(m),S):_?_.getUpdateObj():{}}}}},5840:function(ee,R,e){var M=e(3400).strTranslate;function k(s,T){switch(s.type){case"log":return s.p2d(T);case"date":return s.p2r(T,0,s.calendar);default:return s.p2r(T)}}ee.exports={p2r:k,r2p:function(s,T){switch(s.type){case"log":return s.d2p(T);case"date":return s.r2p(T,0,s.calendar);default:return s.r2p(T)}},axValue:function(s){var T=s._id.charAt(0)==="y"?1:0;return function(b){return k(s,b[T])}},getTransform:function(s){return M(s.xaxis._offset,s.yaxis._offset)}}},22676:function(ee,R,e){var M=e(23640),k=e(43156);ee.exports={moduleType:"component",name:"selections",layoutAttributes:e(93956),supplyLayoutDefaults:e(74224),supplyDrawNewSelectionDefaults:e(81004),includeBasePlot:e(36632)("selections"),draw:M.draw,drawOne:M.drawOne,reselect:k.reselect,prepSelect:k.prepSelect,clearOutline:k.clearOutline,clearSelectionsCache:k.clearSelectionsCache,selectOnClick:k.selectOnClick}},43156:function(ee,R,e){var M=e(14756),k=e(61456),s=e(24040),T=e(43616).dashStyle,b=e(76308),f=e(93024),o=e(10624).makeEventData,t=e(72760),i=t.freeMode,n=t.rectMode,r=t.drawMode,a=t.openMode,l=t.selectMode,u=e(65152),h=e(85448),c=e(55496),x=e(1936).clearOutline,p=e(9856),v=p.handleEllipse,g=p.readPaths,y=e(93940).newShapes,m=e(5968),_=e(23640).activateLastSelection,d=e(3400),S=d.sorterAsc,w=e(92065),E=e(91200),C=e(79811).getFromId,O=e(73696),P=e(39172).redrawReglTraces,z=e(83280),j=z.MINSELECT,I=w.filter,N=w.tester,W=e(5840),F=W.p2r,U=W.axValue,H=W.getTransform;function ne(Ie){return Ie.subplot!==void 0}function $(Ie,de,_e,Ae,Pe,Ee,Fe){var Ve,Ye,tt,nt,ht,vt,pt,Qe,Ke,Mt=de._hoverdata,Ot=de._fullLayout.clickmode.indexOf("event")>-1,Pt=[];if(function(Ge){return Ge&&Array.isArray(Ge)&&Ge[0].hoverOnBox!==!0}(Mt)){X(Ie,de,Ee);var St=function(Ge,ot){var it,dt,gt=Ge[0],je=-1,Re=[];for(dt=0;dt<ot.length;dt++)if(it=ot[dt],gt.fullData._expandedIndex===it.cd[0].trace._expandedIndex){if(gt.hoverOnBox===!0)break;gt.pointNumber!==void 0?je=gt.pointNumber:gt.binNumber!==void 0&&(je=gt.binNumber,Re=gt.pointNumbers);break}return{pointNumber:je,pointNumbers:Re,searchInfo:it}}(Mt,Ve=se(de,_e,Ae,Pe));if(St.pointNumbers.length>0?function(Ge,ot){var it,dt,gt,je=[];for(gt=0;gt<Ge.length;gt++)(it=Ge[gt]).cd[0].trace.selectedpoints&&it.cd[0].trace.selectedpoints.length>0&&je.push(it);if(je.length===1&&je[0]===ot.searchInfo&&(dt=ot.searchInfo.cd[0].trace).selectedpoints.length===ot.pointNumbers.length){for(gt=0;gt<ot.pointNumbers.length;gt++)if(dt.selectedpoints.indexOf(ot.pointNumbers[gt])<0)return!1;return!0}return!1}(Ve,St):function(Ge){var ot,it,dt=0;for(it=0;it<Ge.length;it++)if((ot=Ge[it].cd[0].trace).selectedpoints&&(ot.selectedpoints.length>1||(dt+=ot.selectedpoints.length)>1))return!1;return dt===1}(Ve)&&(vt=fe(St))){for(Fe&&Fe.remove(),Ke=0;Ke<Ve.length;Ke++)(Ye=Ve[Ke])._module.selectPoints(Ye,!1);pe(de,Ve),te(Ee),Ot&&Oe(de)}else{for(pt=Ie.shiftKey&&(vt!==void 0?vt:fe(St)),tt=function(Ge,ot,it){return{pointNumber:Ge,searchInfo:ot,subtract:!!it}}(St.pointNumber,St.searchInfo,pt),nt=Z(Ee.selectionDefs.concat([tt])),Ke=0;Ke<Ve.length;Ke++)if(ht=me(Ve[Ke]._module.selectPoints(Ve[Ke],nt),Ve[Ke]),Pt.length)for(var He=0;He<ht.length;He++)Pt.push(ht[He]);else Pt=ht;if(pe(de,Ve,Qe={points:Pt}),tt&&Ee&&Ee.selectionDefs.push(tt),Fe){var We=Ee.mergedPolygons,Be=a(Ee.dragmode);c(be(We,Be),Fe,Ee)}Ot&&Me(de,Qe)}}}function K(Ie){return"pointNumber"in Ie&&"searchInfo"in Ie}function Q(Ie){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(de,_e,Ae,Pe){var Ee=Ie.searchInfo.cd[0].trace._expandedIndex;return Pe.cd[0].trace._expandedIndex===Ee&&Ae===Ie.pointNumber},isRect:!1,degenerate:!1,subtract:!!Ie.subtract}}function Z(Ie){if(Ie.length){for(var de=[],_e=K(Ie[0])?0:Ie[0][0][0],Ae=_e,Pe=K(Ie[0])?0:Ie[0][0][1],Ee=Pe,Fe=0;Fe<Ie.length;Fe++)if(K(Ie[Fe]))de.push(Q(Ie[Fe]));else{var Ve=N(Ie[Fe]);Ve.subtract=!!Ie[Fe].subtract,de.push(Ve),_e=Math.min(_e,Ve.xmin),Ae=Math.max(Ae,Ve.xmax),Pe=Math.min(Pe,Ve.ymin),Ee=Math.max(Ee,Ve.ymax)}return{xmin:_e,xmax:Ae,ymin:Pe,ymax:Ee,pts:[],contains:function(Ye,tt,nt,ht){for(var vt=!1,pt=0;pt<de.length;pt++)de[pt].contains(Ye,tt,nt,ht)&&(vt=!de[pt].subtract);return vt},isRect:!1,degenerate:!1}}}function X(Ie,de,_e){var Ae=de._fullLayout,Pe=_e.plotinfo,Ee=_e.dragmode,Fe=Ae._lastSelectedSubplot&&Ae._lastSelectedSubplot===Pe.id,Ve=(Ie.shiftKey||Ie.altKey)&&!(r(Ee)&&a(Ee));Fe&&Ve&&Pe.selection&&Pe.selection.selectionDefs&&!_e.selectionDefs?(_e.selectionDefs=Pe.selection.selectionDefs,_e.mergedPolygons=Pe.selection.mergedPolygons):Ve&&Pe.selection||te(_e),Fe||(x(de),Ae._lastSelectedSubplot=Pe.id)}function te(Ie,de){var _e=Ie.dragmode,Ae=Ie.plotinfo,Pe=Ie.gd;(function(ht){return ht._fullLayout._activeShapeIndex>=0})(Pe)&&Pe._fullLayout._deactivateShape(Pe),function(ht){return ht._fullLayout._activeSelectionIndex>=0}(Pe)&&Pe._fullLayout._deactivateSelection(Pe);var Ee=Pe._fullLayout._zoomlayer,Fe=r(_e),Ve=l(_e);if(Fe||Ve){var Ye,tt,nt=Ee.selectAll(".select-outline-"+Ae.id);nt&&Pe._fullLayout._outlining&&(Fe&&(Ye=y(nt,Ie)),Ye&&s.call("_guiRelayout",Pe,{shapes:Ye}),Ve&&!ne(Ie)&&(tt=m(nt,Ie)),tt&&(Pe._fullLayout._noEmitSelectedAtStart=!0,s.call("_guiRelayout",Pe,{selections:tt}).then(function(){de&&_(Pe)})),Pe._fullLayout._outlining=!1)}Ae.selection={},Ae.selection.selectionDefs=Ie.selectionDefs=[],Ae.selection.mergedPolygons=Ie.mergedPolygons=[]}function ae(Ie){return Ie._id}function se(Ie,de,_e,Ae){if(!Ie.calcdata)return[];var Pe,Ee,Fe,Ve=[],Ye=de.map(ae),tt=_e.map(ae);for(Fe=0;Fe<Ie.calcdata.length;Fe++)if((Ee=(Pe=Ie.calcdata[Fe])[0].trace).visible===!0&&Ee._module&&Ee._module.selectPoints)if(!ne({subplot:Ae})||Ee.subplot!==Ae&&Ee.geo!==Ae)if(Ee.type==="splom"){if(Ee._xaxes[Ye[0]]&&Ee._yaxes[tt[0]]){var nt=ce(Ee._module,Pe,de[0],_e[0]);nt.scene=Ie._fullLayout._splomScenes[Ee.uid],Ve.push(nt)}}else if(Ee.type==="sankey"){var ht=ce(Ee._module,Pe,de[0],_e[0]);Ve.push(ht)}else{if(!(Ye.indexOf(Ee.xaxis)!==-1||Ee._xA&&Ee._xA.overlaying)||!(tt.indexOf(Ee.yaxis)!==-1||Ee._yA&&Ee._yA.overlaying))continue;Ve.push(ce(Ee._module,Pe,C(Ie,Ee.xaxis),C(Ie,Ee.yaxis)))}else Ve.push(ce(Ee._module,Pe,de[0],_e[0]));return Ve}function ce(Ie,de,_e,Ae){return{_module:Ie,cd:de,xaxis:_e,yaxis:Ae}}function fe(Ie){var de=Ie.searchInfo.cd[0].trace,_e=Ie.pointNumber,Ae=Ie.pointNumbers,Pe=Ae.length>0?Ae[0]:_e;return!!de.selectedpoints&&de.selectedpoints.indexOf(Pe)>-1}function pe(Ie,de,_e){var Ae,Pe;for(Ae=0;Ae<de.length;Ae++){var Ee=de[Ae].cd[0].trace._fullInput,Fe=Ie._fullLayout._tracePreGUI[Ee.uid]||{};Fe.selectedpoints===void 0&&(Fe.selectedpoints=Ee._input.selectedpoints||null)}if(_e){var Ve=_e.points||[];for(Ae=0;Ae<de.length;Ae++)(Pe=de[Ae].cd[0].trace)._input.selectedpoints=Pe._fullInput.selectedpoints=[],Pe._fullInput!==Pe&&(Pe.selectedpoints=[]);for(var Ye=0;Ye<Ve.length;Ye++){var tt=Ve[Ye],nt=tt.data,ht=tt.fullData,vt=tt.pointIndex,pt=tt.pointIndices;pt?([].push.apply(nt.selectedpoints,pt),Pe._fullInput!==Pe&&[].push.apply(ht.selectedpoints,pt)):(nt.selectedpoints.push(vt),Pe._fullInput!==Pe&&ht.selectedpoints.push(vt))}}else for(Ae=0;Ae<de.length;Ae++)delete(Pe=de[Ae].cd[0].trace).selectedpoints,delete Pe._input.selectedpoints,Pe._fullInput!==Pe&&delete Pe._fullInput.selectedpoints;(function(Qe,Ke){for(var Mt=!1,Ot=0;Ot<Ke.length;Ot++){var Pt=Ke[Ot],St=Pt.cd;s.traceIs(St[0].trace,"regl")&&(Mt=!0);var He=Pt._module,We=He.styleOnSelect||He.style;We&&(We(Qe,St,St[0].node3),St[0].nodeRangePlot3&&We(Qe,St,St[0].nodeRangePlot3))}Mt&&(O(Qe),P(Qe))})(Ie,de)}function ge(Ie,de,_e){for(var Ae=(_e?M.difference:M.union)({regions:Ie},{regions:[de]}).regions.reverse(),Pe=0;Pe<Ae.length;Pe++){var Ee=Ae[Pe];Ee.subtract=he(Ee,Ae.slice(0,Pe))}return Ae}function me(Ie,de){if(Array.isArray(Ie))for(var _e=de.cd,Ae=de.cd[0].trace,Pe=0;Pe<Ie.length;Pe++)Ie[Pe]=o(Ie[Pe],Ae,_e);return Ie}function be(Ie,de){for(var _e=[],Ae=0;Ae<Ie.length;Ae++){_e[Ae]=[];for(var Pe=0;Pe<Ie[Ae].length;Pe++){_e[Ae][Pe]=[],_e[Ae][Pe][0]=Pe?"L":"M";for(var Ee=0;Ee<Ie[Ae][Pe].length;Ee++)_e[Ae][Pe].push(Ie[Ae][Pe][Ee])}de||_e[Ae].push(["Z",_e[Ae][0][1],_e[Ae][0][2]])}return _e}function ke(Ie,de){for(var _e,Ae,Pe=[],Ee=[],Fe=0;Fe<de.length;Fe++){var Ve=de[Fe];Ae=Ve._module.selectPoints(Ve,Ie),Ee.push(Ae),_e=me(Ae,Ve),Pe=Pe.concat(_e)}return Pe}function ze(Ie,de,_e,Ae,Pe){var Ee,Fe,Ve,Ye=!!Ae;Pe&&(Ee=Pe.plotinfo,Fe=Pe.xaxes[0]._id,Ve=Pe.yaxes[0]._id);var tt=[],nt=[],ht=ie(Ie),vt=Ie._fullLayout;if(Ee){var pt=vt._zoomlayer,Qe=vt.dragmode,Ke=r(Qe),Mt=l(Qe);if(Ke||Mt){var Ot=C(Ie,Fe,"x"),Pt=C(Ie,Ve,"y");if(Ot&&Pt){var St=pt.selectAll(".select-outline-"+Ee.id);if(St&&Ie._fullLayout._outlining&&St.length){for(var He=St[0][0].getAttribute("d"),We=g(He,Ie,Ee),Be=[],Ge=0;Ge<We.length;Ge++){for(var ot=We[Ge],it=[],dt=0;dt<ot.length;dt++)it.push([Se(Ot,ot[dt][1]),Se(Pt,ot[dt][2])]);it.xref=Fe,it.yref=Ve,it.subtract=he(it,Be),Be.push(it)}ht=ht.concat(Be)}}}}var gt=Fe&&Ve?[Fe+Ve]:vt._subplots.cartesian;(function(Cn){var yn=Cn.calcdata;if(yn)for(var Mn=0;Mn<yn.length;Mn++){var zn=yn[Mn][0].trace,Wn=Cn._fullLayout._splomScenes;if(Wn){var sr=Wn[zn.uid];sr&&(sr.selectBatch=[])}}})(Ie);for(var je={},Re=0;Re<gt.length;Re++){var rt=gt[Re],ct=rt.indexOf("y"),ut=rt.slice(0,ct),et=rt.slice(ct),xt=Fe&&Ve?_e:void 0;if(xt=oe(ht,ut,et,xt)){var mt=Ae;if(!Ye){var Tt=C(Ie,ut,"x"),yt=C(Ie,et,"y");mt=se(Ie,[Tt],[yt],rt);for(var bt=0;bt<mt.length;bt++){var zt=mt[bt],Ut=zt.cd[0],en=Ut.trace;if(zt._module.name==="scattergl"&&!Ut.t.xpx){var an=en.x,rn=en.y,qt=en._length;Ut.t.xpx=[],Ut.t.ypx=[];for(var Kt=0;Kt<qt;Kt++)Ut.t.xpx[Kt]=Tt.c2p(an[Kt]),Ut.t.ypx[Kt]=yt.c2p(rn[Kt])}zt._module.name==="splom"&&(je[en.uid]||(je[en.uid]=!0))}}var xn=ke(xt,mt);tt=tt.concat(xn),nt=nt.concat(mt)}}var on={points:tt};pe(Ie,nt,on);var Xt=vt.clickmode.indexOf("event")>-1&&de;if(!Ee&&de){var ln=ie(Ie,!0);if(ln.length){var Jt=ln[0].xref,tn=ln[0].yref;if(Jt&&tn){var wn=ye(ln);we([C(Ie,Jt,"x"),C(Ie,tn,"y")])(on,wn)}}Ie._fullLayout._noEmitSelectedAtStart?Ie._fullLayout._noEmitSelectedAtStart=!1:Xt&&Me(Ie,on),vt._reselect=!1}if(!Ee&&vt._deselect){var mn=vt._deselect;(function(Cn,yn,Mn){for(var zn=0;zn<Mn.length;zn++){var Wn=Mn[zn];if(Wn.xaxis&&Wn.xaxis._id===Cn&&Wn.yaxis&&Wn.yaxis._id===yn)return!0}return!1})(Fe=mn.xref,Ve=mn.yref,nt)||ve(Ie,Fe,Ve,Ae),Xt&&(on.points.length?Me(Ie,on):Oe(Ie)),vt._deselect=!1}return{eventData:on,selectionTesters:_e}}function ve(Ie,de,_e,Ae){Ae=se(Ie,[C(Ie,de,"x")],[C(Ie,_e,"y")],de+_e);for(var Pe=0;Pe<Ae.length;Pe++){var Ee=Ae[Pe];Ee._module.selectPoints(Ee,!1)}pe(Ie,Ae)}function oe(Ie,de,_e,Ae){for(var Pe,Ee=0;Ee<Ie.length;Ee++){var Fe=Ie[Ee];de===Fe.xref&&_e===Fe.yref&&(Pe?Ae=Z(Pe=ge(Pe,Fe,!!Fe.subtract)):(Pe=[Fe],Ae=N(Fe)))}return Ae}function ie(Ie,de){for(var _e=[],Ae=Ie._fullLayout,Pe=Ae.selections,Ee=Pe.length,Fe=0;Fe<Ee;Fe++)if(!de||Fe===Ae._activeSelectionIndex){var Ve=Pe[Fe];if(Ve){var Ye,tt,nt,ht,vt,pt=Ve.xref,Qe=Ve.yref,Ke=C(Ie,pt,"x"),Mt=C(Ie,Qe,"y");if(Ve.type==="rect"){vt=[];var Ot=Se(Ke,Ve.x0),Pt=Se(Ke,Ve.x1),St=Se(Mt,Ve.y0),He=Se(Mt,Ve.y1);vt=[[Ot,St],[Ot,He],[Pt,He],[Pt,St]],Ye=Math.min(Ot,Pt),tt=Math.max(Ot,Pt),nt=Math.min(St,He),ht=Math.max(St,He),vt.xmin=Ye,vt.xmax=tt,vt.ymin=nt,vt.ymax=ht,vt.xref=pt,vt.yref=Qe,vt.subtract=!1,vt.isRect=!0,_e.push(vt)}else if(Ve.type==="path")for(var We=Ve.path.split("Z"),Be=[],Ge=0;Ge<We.length;Ge++){var ot=We[Ge];if(ot){ot+="Z";var it=u.extractPathCoords(ot,h.paramIsX,"raw"),dt=u.extractPathCoords(ot,h.paramIsY,"raw");Ye=1/0,tt=-1/0,nt=1/0,ht=-1/0,vt=[];for(var gt=0;gt<it.length;gt++){var je=Se(Ke,it[gt]),Re=Se(Mt,dt[gt]);vt.push([je,Re]),Ye=Math.min(je,Ye),tt=Math.max(je,tt),nt=Math.min(Re,nt),ht=Math.max(Re,ht)}vt.xmin=Ye,vt.xmax=tt,vt.ymin=nt,vt.ymax=ht,vt.xref=pt,vt.yref=Qe,vt.subtract=he(vt,Be),Be.push(vt),_e.push(vt)}}}}return _e}function he(Ie,de){for(var _e=!1,Ae=0;Ae<de.length;Ae++)for(var Pe=de[Ae],Ee=0;Ee<Ie.length;Ee++)if(k(Ie[Ee],Pe)){_e=!_e;break}return _e}function Se(Ie,de){return Ie.type==="date"&&(de=de.replace("_"," ")),Ie.type==="log"?Ie.c2p(de):Ie.r2p(de,null,Ie.calendar)}function ye(Ie){for(var de=Ie.length,_e=[],Ae=0;Ae<de;Ae++){var Pe=Ie[Ae];_e=(_e=_e.concat(Pe)).concat([Pe[0]])}return(Ee=_e).isRect=Ee.length===5&&Ee[0][0]===Ee[4][0]&&Ee[0][1]===Ee[4][1]&&Ee[0][0]===Ee[1][0]&&Ee[2][0]===Ee[3][0]&&Ee[0][1]===Ee[3][1]&&Ee[1][1]===Ee[2][1]||Ee[0][1]===Ee[1][1]&&Ee[2][1]===Ee[3][1]&&Ee[0][0]===Ee[3][0]&&Ee[1][0]===Ee[2][0],Ee.isRect&&(Ee.xmin=Math.min(Ee[0][0],Ee[2][0]),Ee.xmax=Math.max(Ee[0][0],Ee[2][0]),Ee.ymin=Math.min(Ee[0][1],Ee[2][1]),Ee.ymax=Math.max(Ee[0][1],Ee[2][1])),Ee;var Ee}function we(Ie){return function(de,_e){for(var Ae,Pe,Ee=0;Ee<Ie.length;Ee++){var Fe=Ie[Ee],Ve=Fe._id,Ye=Ve.charAt(0);if(_e.isRect){Ae||(Ae={});var tt=_e[Ye+"min"],nt=_e[Ye+"max"];tt!==void 0&&nt!==void 0&&(Ae[Ve]=[F(Fe,tt),F(Fe,nt)].sort(S))}else Pe||(Pe={}),Pe[Ve]=_e.map(U(Fe))}Ae&&(de.range=Ae),Pe&&(de.lassoPoints=Pe)}}function Me(Ie,de){de&&(de.selections=(Ie.layout||{}).selections||[]),Ie.emit("plotly_selected",de)}function Oe(Ie){Ie.emit("plotly_deselect",null)}ee.exports={reselect:ze,prepSelect:function(Ie,de,_e,Ae,Pe){var Ee=!ne(Ae),Fe=i(Pe),Ve=n(Pe),Ye=a(Pe),tt=r(Pe),nt=l(Pe),ht=Pe==="drawcircle",vt=Pe==="drawline"||ht,pt=Ae.gd,Qe=pt._fullLayout,Ke=nt&&Qe.newselection.mode==="immediate"&&Ee,Mt=Qe._zoomlayer,Ot=Ae.element.getBoundingClientRect(),Pt=Ae.plotinfo,St=H(Pt),He=de-Ot.left,We=_e-Ot.top;Qe._calcInverseTransform(pt);var Be=d.apply3DTransform(Qe._invTransform)(He,We);He=Be[0],We=Be[1];var Ge,ot,it,dt,gt,je,Re,rt=Qe._invScaleX,ct=Qe._invScaleY,ut=He,et=We,xt="M"+He+","+We,mt=Ae.xaxes[0],Tt=Ae.yaxes[0],yt=mt._length,bt=Tt._length,zt=Ie.altKey&&!(r(Pe)&&Ye);X(Ie,pt,Ae),Fe&&(Ge=I([[He,We]],z.BENDPX));var Ut=Mt.selectAll("path.select-outline-"+Pt.id).data([1]),en=tt?Qe.newshape:Qe.newselection;tt&&(Ae.hasText=en.label.text||en.label.texttemplate);var an=tt&&!Ye?en.fillcolor:"rgba(0,0,0,0)",rn=en.line.color||(Ee?b.contrast(pt._fullLayout.plot_bgcolor):"#7f7f7f");Ut.enter().append("path").attr("class","select-outline select-outline-"+Pt.id).style({opacity:tt?en.opacity/2:1,"stroke-dasharray":T(en.line.dash,en.line.width),"stroke-width":en.line.width+"px","shape-rendering":"crispEdges"}).call(b.stroke,rn).call(b.fill,an).attr("fill-rule","evenodd").classed("cursor-move",!!tt).attr("transform",St).attr("d",xt+"Z");var qt=Mt.append("path").attr("class","zoombox-corners").style({fill:b.background,stroke:b.defaultLine,"stroke-width":1}).attr("transform",St).attr("d","M0,0Z");if(tt&&Ae.hasText){var Kt=Mt.select(".label-temp");Kt.empty()&&(Kt=Mt.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var xn=Qe._uid+z.SELECTID,on=[],Xt=se(pt,Ae.xaxes,Ae.yaxes,Ae.subplot);Ke&&!Ie.shiftKey&&(Ae._clearSubplotSelections=function(){if(Ee){var Jt=mt._id,tn=Tt._id;ve(pt,Jt,tn,Xt);for(var wn=(pt.layout||{}).selections||[],mn=[],Cn=!1,yn=0;yn<wn.length;yn++){var Mn=Qe.selections[yn];Mn.xref!==Jt||Mn.yref!==tn?mn.push(wn[yn]):Cn=!0}Cn&&(pt._fullLayout._noEmitSelectedAtStart=!0,s.call("_guiRelayout",pt,{selections:mn}))}});var ln=function(Jt){return Jt.plotinfo.fillRangeItems||we(Jt.xaxes.concat(Jt.yaxes))}(Ae);Ae.moveFn=function(Jt,tn){Ae._clearSubplotSelections&&(Ae._clearSubplotSelections(),Ae._clearSubplotSelections=void 0),ut=Math.max(0,Math.min(yt,rt*Jt+He)),et=Math.max(0,Math.min(bt,ct*tn+We));var wn=Math.abs(ut-He),mn=Math.abs(et-We);if(Ve){var Cn,yn,Mn;if(nt){var zn=Qe.selectdirection;switch(Cn=zn==="any"?mn<Math.min(.6*wn,j)?"h":wn<Math.min(.6*mn,j)?"v":"d":zn){case"h":yn=ht?bt/2:0,Mn=bt;break;case"v":yn=ht?yt/2:0,Mn=yt}}if(tt)switch(Qe.newshape.drawdirection){case"vertical":Cn="h",yn=ht?bt/2:0,Mn=bt;break;case"horizontal":Cn="v",yn=ht?yt/2:0,Mn=yt;break;case"ortho":wn<mn?(Cn="h",yn=We,Mn=et):(Cn="v",yn=He,Mn=ut);break;default:Cn="d"}Cn==="h"?((dt=vt?v(ht,[ut,yn],[ut,Mn]):[[He,yn],[He,Mn],[ut,Mn],[ut,yn]]).xmin=vt?ut:Math.min(He,ut),dt.xmax=vt?ut:Math.max(He,ut),dt.ymin=Math.min(yn,Mn),dt.ymax=Math.max(yn,Mn),qt.attr("d","M"+dt.xmin+","+(We-j)+"h-4v"+2*j+"h4ZM"+(dt.xmax-1)+","+(We-j)+"h4v"+2*j+"h-4Z")):Cn==="v"?((dt=vt?v(ht,[yn,et],[Mn,et]):[[yn,We],[yn,et],[Mn,et],[Mn,We]]).xmin=Math.min(yn,Mn),dt.xmax=Math.max(yn,Mn),dt.ymin=vt?et:Math.min(We,et),dt.ymax=vt?et:Math.max(We,et),qt.attr("d","M"+(He-j)+","+dt.ymin+"v-4h"+2*j+"v4ZM"+(He-j)+","+(dt.ymax-1)+"v4h"+2*j+"v-4Z")):Cn==="d"&&((dt=vt?v(ht,[He,We],[ut,et]):[[He,We],[He,et],[ut,et],[ut,We]]).xmin=Math.min(He,ut),dt.xmax=Math.max(He,ut),dt.ymin=Math.min(We,et),dt.ymax=Math.max(We,et),qt.attr("d","M0,0Z"))}else Fe&&(Ge.addPt([ut,et]),dt=Ge.filtered);if(Ae.selectionDefs&&Ae.selectionDefs.length?(it=ge(Ae.mergedPolygons,dt,zt),dt.subtract=zt,ot=Z(Ae.selectionDefs.concat([dt]))):(it=[dt],ot=N(dt)),c(be(it,Ye),Ut,Ae),nt){var Wn,sr=ze(pt,!1),Fn=sr.eventData?sr.eventData.points.slice():[];sr=ze(pt,!1,ot,Xt,Ae),ot=sr.selectionTesters,Re=sr.eventData,Wn=Ge?Ge.filtered:ye(it),E.throttle(xn,z.SELECTDELAY,function(){for(var Yn=(on=ke(ot,Xt)).slice(),Xn=0;Xn<Fn.length;Xn++){for(var rr=Fn[Xn],Yt=!1,$t=0;$t<Yn.length;$t++)if(Yn[$t].curveNumber===rr.curveNumber&&Yn[$t].pointNumber===rr.pointNumber){Yt=!0;break}Yt||Yn.push(rr)}Yn.length&&(Re||(Re={}),Re.points=Yn),ln(Re,Wn),function(Sn,dn){Sn.emit("plotly_selecting",dn)}(pt,Re)})}},Ae.clickFn=function(Jt,tn){if(qt.remove(),pt._fullLayout._activeShapeIndex>=0)pt._fullLayout._deactivateShape(pt);else if(!tt){var wn=Qe.clickmode;E.done(xn).then(function(){if(E.clear(xn),Jt===2){for(Ut.remove(),gt=0;gt<Xt.length;gt++)(je=Xt[gt])._module.selectPoints(je,!1);if(pe(pt,Xt),te(Ae),Oe(pt),Xt.length){var mn=Xt[0].xaxis,Cn=Xt[0].yaxis;if(mn&&Cn){for(var yn=[],Mn=pt._fullLayout.selections,zn=0;zn<Mn.length;zn++){var Wn=Mn[zn];Wn&&(Wn.xref===mn._id&&Wn.yref===Cn._id||yn.push(Wn))}yn.length<Mn.length&&(pt._fullLayout._noEmitSelectedAtStart=!0,s.call("_guiRelayout",pt,{selections:yn}))}}}else wn.indexOf("select")>-1&&$(tn,pt,Ae.xaxes,Ae.yaxes,Ae.subplot,Ae,Ut),wn==="event"&&Me(pt,void 0);f.click(pt,tn,Pt.id)}).catch(d.error)}},Ae.doneFn=function(){qt.remove(),E.done(xn).then(function(){E.clear(xn),!Ke&&dt&&Ae.selectionDefs&&(dt.subtract=zt,Ae.selectionDefs.push(dt),Ae.mergedPolygons.length=0,[].push.apply(Ae.mergedPolygons,it)),(Ke||tt)&&te(Ae,Ke),Ae.doneFnCompleted&&Ae.doneFnCompleted(on),nt&&Me(pt,Re)}).catch(d.error)}},clearOutline:x,clearSelectionsCache:te,selectOnClick:$}},46056:function(ee,R,e){var M=e(13916),k=e(25376),s=e(52904).line,T=e(98192).u,b=e(92880).extendFlat,f=e(31780).templatedArray,o=(e(36208),e(45464)),t=e(21776).ye,i=e(97728);ee.exports=f("shape",{visible:b({},o.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:b({},o.legend,{editType:"calc+arraydraw"}),legendgroup:b({},o.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:b({},o.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:k({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:b({},o.legendrank,{editType:"calc+arraydraw"}),legendwidth:b({},o.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",editType:"arraydraw"},xref:b({},M.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},x0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},x1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},yref:b({},M.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},y0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},y1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:b({},s.color,{editType:"arraydraw"}),width:b({},s.width,{editType:"calc+arraydraw"}),dash:b({},T,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:t({},{keys:Object.keys(i)}),font:k({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})},96084:function(ee,R,e){var M=e(3400),k=e(54460),s=e(85448),T=e(65152);function b(i){return o(i.line.width,i.xsizemode,i.x0,i.x1,i.path,!1)}function f(i){return o(i.line.width,i.ysizemode,i.y0,i.y1,i.path,!0)}function o(i,n,r,a,l,u){var h=i/2,c=u;if(n==="pixel"){var x=l?T.extractPathCoords(l,u?s.paramIsY:s.paramIsX):[r,a],p=M.aggNums(Math.max,null,x),v=M.aggNums(Math.min,null,x),g=v<0?Math.abs(v)+h:h,y=p>0?p+h:h;return{ppad:h,ppadplus:c?g:y,ppadminus:c?y:g}}return{ppad:h}}function t(i,n,r){var a,l,u=i._id.charAt(0)==="x"?"x":"y",h=i.type==="category"||i.type==="multicategory",c=0,x=0,p=h?i.r2c:i.d2c;if(n[u+"sizemode"]==="scaled"?(a=n[u+"0"],l=n[u+"1"],h&&(c=n[u+"0shift"],x=n[u+"1shift"])):(a=n[u+"anchor"],l=n[u+"anchor"]),a!==void 0)return[p(a)+c,p(l)+x];if(n.path){var v,g,y,m,_=1/0,d=-1/0,S=n.path.match(s.segmentRE);for(i.type==="date"&&(p=T.decodeDate(p)),v=0;v<S.length;v++)(g=r[S[v].charAt(0)].drawn)!==void 0&&(!(y=S[v].substr(1).match(s.paramRE))||y.length<g||((m=p(y[g]))<_&&(_=m),m>d&&(d=m)));return d>=_?[_,d]:void 0}}ee.exports=function(i){var n=i._fullLayout,r=M.filterVisible(n.shapes);if(r.length&&i._fullData.length)for(var a=0;a<r.length;a++){var l,u,h=r[a];h._extremes={};var c=k.getRefType(h.xref),x=k.getRefType(h.yref);h.xref!=="paper"&&c!=="domain"&&(u=t(l=k.getFromId(i,h.xref),h,s.paramIsX))&&(h._extremes[l._id]=k.findExtremes(l,u,b(h))),h.yref!=="paper"&&x!=="domain"&&(u=t(l=k.getFromId(i,h.yref),h,s.paramIsY))&&(h._extremes[l._id]=k.findExtremes(l,u,f(h)))}}},85448:function(ee){ee.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},43712:function(ee,R,e){var M=e(3400),k=e(54460),s=e(51272),T=e(46056),b=e(65152);function f(o,t,i){function n(W,F){return M.coerce(o,t,T,W,F)}if(t._isShape=!0,n("visible")){n("showlegend")&&(n("legend"),n("legendwidth"),n("legendgroup"),n("legendgrouptitle.text"),M.coerceFont(n,"legendgrouptitle.font"),n("legendrank"));var r=n("path"),a=n("type",r?"path":"rect"),l=a!=="path";l&&delete t.path,n("editable"),n("layer"),n("opacity"),n("fillcolor"),n("fillrule"),n("line.width")&&(n("line.color"),n("line.dash"));for(var u=n("xsizemode"),h=n("ysizemode"),c=["x","y"],x=0;x<2;x++){var p,v,g,y=c[x],m=y+"anchor",_=y==="x"?u:h,d={_fullLayout:i},S=k.coerceRef(o,t,d,y,void 0,"paper");if(k.getRefType(S)==="range"?((p=k.getFromId(d,S))._shapeIndices.push(t._index),g=b.rangeToShapePosition(p),v=b.shapePositionToRange(p),p.type!=="category"&&p.type!=="multicategory"||(n(y+"0shift"),n(y+"1shift"))):v=g=M.identity,l){var w=y+"0",E=y+"1",C=o[w],O=o[E];o[w]=v(o[w],!0),o[E]=v(o[E],!0),_==="pixel"?(n(w,0),n(E,10)):(k.coercePosition(t,d,n,S,w,.25),k.coercePosition(t,d,n,S,E,.75)),t[w]=g(t[w]),t[E]=g(t[E]),o[w]=C,o[E]=O}if(_==="pixel"){var P=o[m];o[m]=v(o[m],!0),k.coercePosition(t,d,n,S,m,.25),t[m]=g(t[m]),o[m]=P}}l&&M.noneOrAll(o,t,["x0","x1","y0","y1"]);var z,j,I=a==="line";if(l&&(z=n("label.texttemplate")),z||(j=n("label.text")),j||z){n("label.textangle");var N=n("label.textposition",I?"middle":"middle center");n("label.xanchor"),n("label.yanchor",function(W,F){return W?"bottom":F.indexOf("top")!==-1?"top":F.indexOf("bottom")!==-1?"bottom":"middle"}(I,N)),n("label.padding"),M.coerceFont(n,"label.font",i.font)}}}ee.exports=function(o,t){s(o,t,{name:"shapes",handleItemDefaults:f})}},60728:function(ee,R,e){var M=e(3400),k=e(54460),s=e(72736),T=e(43616),b=e(9856).readPaths,f=e(65152),o=f.getPathString,t=e(97728),i=e(84284).FROM_TL;ee.exports=function(n,r,a,l){if(l.selectAll(".shape-label").remove(),a.label.text||a.label.texttemplate){var u;if(a.label.texttemplate){var h={};if(a.type!=="path"){var c=k.getFromId(n,a.xref),x=k.getFromId(n,a.yref);for(var p in t){var v=t[p](a,c,x);v!==void 0&&(h[p]=v)}}u=M.texttemplateStringForShapes(a.label.texttemplate,{},n._fullLayout._d3locale,h)}else u=a.label.text;var g,y,m,_,d={"data-index":r},S=a.label.font,w=l.append("g").attr(d).classed("shape-label",!0).append("text").attr({"data-notex":1}).classed("shape-label-text",!0).text(u);if(a.path){var E=o(n,a),C=b(E,n);g=1/0,m=1/0,y=-1/0,_=-1/0;for(var O=0;O<C.length;O++)for(var P=0;P<C[O].length;P++)for(var z=C[O][P],j=1;j<z.length;j+=2){var I=z[j],N=z[j+1];g=Math.min(g,I),y=Math.max(y,I),m=Math.min(m,N),_=Math.max(_,N)}}else{var W=k.getFromId(n,a.xref),F=a.x0shift,U=a.x1shift,H=k.getRefType(a.xref),ne=k.getFromId(n,a.yref),$=a.y0shift,K=a.y1shift,Q=k.getRefType(a.yref),Z=function(pe,ge){return f.getDataToPixel(n,W,ge,!1,H)(pe)},X=function(pe,ge){return f.getDataToPixel(n,ne,ge,!0,Q)(pe)};g=Z(a.x0,F),y=Z(a.x1,U),m=X(a.y0,$),_=X(a.y1,K)}var te=a.label.textangle;te==="auto"&&(te=a.type==="line"?function(pe,ge,me,be){var ke,ze;return ze=Math.abs(me-pe),ke=me>=pe?ge-be:be-ge,-180/Math.PI*Math.atan2(ke,ze)}(g,m,y,_):0),w.call(function(pe){return pe.call(T.font,S).attr({}),s.convertToTspans(pe,n),pe});var ae=function(pe,ge,me,be,ke,ze,ve){var oe,ie,he,Se,ye=ke.label.textposition,we=ke.label.textangle,Me=ke.label.padding,Oe=ke.type,Ie=Math.PI/180*ze,de=Math.sin(Ie),_e=Math.cos(Ie),Ae=ke.label.xanchor,Pe=ke.label.yanchor;if(Oe==="line"){ye==="start"?(oe=pe,ie=ge):ye==="end"?(oe=me,ie=be):(oe=(pe+me)/2,ie=(ge+be)/2),Ae==="auto"&&(Ae=ye==="start"?we==="auto"?me>pe?"left":me<pe?"right":"center":me>pe?"right":me<pe?"left":"center":ye==="end"?we==="auto"?me>pe?"right":me<pe?"left":"center":me>pe?"left":me<pe?"right":"center":"center");var Ee={bottom:-1,middle:0,top:1};if(we==="auto"){var Fe=Ee[Pe];he=-Me*de*Fe,Se=Me*_e*Fe}else he=Me*{left:1,center:0,right:-1}[Ae],Se=Me*Ee[Pe];oe+=he,ie+=Se}else he=Me+3,ye.indexOf("right")!==-1?(oe=Math.max(pe,me)-he,Ae==="auto"&&(Ae="right")):ye.indexOf("left")!==-1?(oe=Math.min(pe,me)+he,Ae==="auto"&&(Ae="left")):(oe=(pe+me)/2,Ae==="auto"&&(Ae="center")),ie=ye.indexOf("top")!==-1?Math.min(ge,be):ye.indexOf("bottom")!==-1?Math.max(ge,be):(ge+be)/2,Se=Me,Pe==="bottom"?ie-=Se:Pe==="top"&&(ie+=Se);var Ve=i[Pe],Ye=ke.label.font.size,tt=ve.height;return{textx:oe+(tt*Ve-Ye)*de,texty:ie+-(tt*Ve-Ye)*_e,xanchor:Ae}}(g,m,y,_,a,te,T.bBox(w.node())),se=ae.textx,ce=ae.texty,fe=ae.xanchor;w.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[fe],y:ce,x:se,transform:"rotate("+te+","+se+","+ce+")"}).call(s.positionText,se,ce)}}},55496:function(ee,R,e){var M=e(3400).strTranslate,k=e(86476),s=e(72760),T=s.drawMode,b=s.selectMode,f=e(24040),o=e(76308),t=e(7e3),i=t.i000,n=t.i090,r=t.i180,a=t.i270,l=e(1936).clearOutlineControllers,u=e(9856),h=u.pointsOnRectangle,c=u.pointsOnEllipse,x=u.writePaths,p=e(93940).newShapes,v=e(93940).createShapeObj,g=e(5968),y=e(60728);function m(_,d){var S,w,E,C=_[d][1],O=_[d][2],P=_.length;return w=_[S=(d+1)%P][1],E=_[S][2],w===C&&E===O&&(w=_[S=(d+2)%P][1],E=_[S][2]),[S,w,E]}ee.exports=function _(d,S,w,E){E||(E=0);var C=w.gd;function O(){_(d,S,w,E++),(c(d[0])||w.hasText)&&P({redrawing:!0})}function P(pe){var ge={};w.isActiveShape!==void 0&&(w.isActiveShape=!1,ge=p(S,w)),w.isActiveSelection!==void 0&&(w.isActiveSelection=!1,ge=g(S,w),C._fullLayout._reselect=!0),Object.keys(ge).length&&f.call((pe||{}).redrawing?"relayout":"_guiRelayout",C,ge)}var z,j,I,N,W,F=C._fullLayout._zoomlayer,U=w.dragmode,H=T(U),ne=b(U);if((H||ne)&&(C._fullLayout._outlining=!0),l(C),S.attr("d",x(d)),E||!w.isActiveShape&&!w.isActiveSelection||(W=function(pe,ge){for(var me=0;me<ge.length;me++){var be=ge[me];pe[me]=[];for(var ke=0;ke<be.length;ke++){pe[me][ke]=[];for(var ze=0;ze<be[ke].length;ze++)pe[me][ke][ze]=be[ke][ze]}}return pe}([],d),function(pe){z=[];for(var ge=0;ge<d.length;ge++){var me=d[ge],be=h(me),ke=!be&&c(me);z[ge]=[];for(var ze=me.length,ve=0;ve<ze;ve++)if(me[ve][0]!=="Z"&&(!ke||ve===i||ve===n||ve===r||ve===a)){var oe,ie=be&&w.isActiveSelection;ie&&(oe=m(me,ve));var he=me[ve][1],Se=me[ve][2],ye=pe.append(ie?"rect":"circle").attr("data-i",ge).attr("data-j",ve).style({fill:o.background,stroke:o.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(ie){var we=oe[1]-he,Me=oe[2]-Se,Oe=Me?5:Math.max(Math.min(25,Math.abs(we)-5),5),Ie=we?5:Math.max(Math.min(25,Math.abs(Me)-5),5);ye.classed(Me?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",Oe).attr("height",Ie).attr("x",he-Oe/2).attr("y",Se-Ie/2).attr("transform",M(we/2,Me/2))}else ye.classed("cursor-grab",!0).attr("r",5).attr("cx",he).attr("cy",Se);z[ge][ve]={element:ye.node(),gd:C,prepFn:Q,doneFn:X,clickFn:te},k.init(z[ge][ve])}}}(F.append("g").attr("class","outline-controllers")),function(){j=[],d.length&&(j[0]={element:S[0][0],gd:C,prepFn:se,doneFn:ce,clickFn:fe},k.init(j[0]))}()),H&&w.hasText){var $=F.select(".label-temp"),K=v(S,w,w.dragmode);y(C,"label-temp",K,$)}function Q(pe){I=+pe.srcElement.getAttribute("data-i"),N=+pe.srcElement.getAttribute("data-j"),z[I][N].moveFn=Z}function Z(pe,ge){if(d.length){var me=W[I][N][1],be=W[I][N][2],ke=d[I],ze=ke.length;if(h(ke)){var ve=pe,oe=ge;w.isActiveSelection&&(m(ke,N)[1]===ke[N][1]?oe=0:ve=0);for(var ie=0;ie<ze;ie++)if(ie!==N){var he=ke[ie];he[1]===ke[N][1]&&(he[1]=me+ve),he[2]===ke[N][2]&&(he[2]=be+oe)}if(ke[N][1]=me+ve,ke[N][2]=be+oe,!h(ke))for(var Se=0;Se<ze;Se++)for(var ye=0;ye<ke[Se].length;ye++)ke[Se][ye]=W[I][Se][ye]}else ke[N][1]=me+pe,ke[N][2]=be+ge;O()}}function X(){P()}function te(pe,ge){if(pe===2){I=+ge.srcElement.getAttribute("data-i"),N=+ge.srcElement.getAttribute("data-j");var me=d[I];h(me)||c(me)||function(){if(d.length&&d[I]&&d[I].length){for(var be=[],ke=0;ke<d[I].length;ke++)ke!==N&&be.push(d[I][ke]);be.length>1&&(be.length!==2||be[1][0]!=="Z")&&(N===0&&(be[0][0]="M"),d[I]=be,O(),P())}}()}}function ae(pe,ge){(function(me,be){if(d.length)for(var ke=0;ke<d.length;ke++)for(var ze=0;ze<d[ke].length;ze++)for(var ve=0;ve+2<d[ke][ze].length;ve+=2)d[ke][ze][ve+1]=W[ke][ze][ve+1]+me,d[ke][ze][ve+2]=W[ke][ze][ve+2]+be})(pe,ge),O()}function se(pe){(I=+pe.srcElement.getAttribute("data-i"))||(I=0),j[I].moveFn=ae}function ce(){P()}function fe(pe){pe===2&&function(ge){if(b(ge._fullLayout.dragmode)){l(ge);var me=ge._fullLayout._activeSelectionIndex,be=(ge.layout||{}).selections||[];if(me<be.length){for(var ke=[],ze=0;ze<be.length;ze++)ze!==me&&ke.push(be[ze]);delete ge._fullLayout._activeSelectionIndex;var ve=ge._fullLayout.selections[me];ge._fullLayout._deselect={xref:ve.xref,yref:ve.yref},f.call("_guiRelayout",ge,{selections:ke})}}}(C)}}},4016:function(ee,R,e){var M=e(33428),k=e(24040),s=e(3400),T=e(54460),b=e(9856).readPaths,f=e(55496),o=e(60728),t=e(1936).clearOutlineControllers,i=e(76308),n=e(43616),r=e(31780).arrayEditor,a=e(86476),l=e(93972),u=e(85448),h=e(65152),c=h.getPathString;function x(d){var S=d._fullLayout;for(var w in S._shapeUpperLayer.selectAll("path").remove(),S._shapeLowerLayer.selectAll("path").remove(),S._shapeUpperLayer.selectAll("text").remove(),S._shapeLowerLayer.selectAll("text").remove(),S._plots){var E=S._plots[w].shapelayer;E&&(E.selectAll("path").remove(),E.selectAll("text").remove())}for(var C=0;C<S.shapes.length;C++)S.shapes[C].visible===!0&&g(d,C)}function p(d){return!!d._fullLayout._outlining}function v(d){return!d._context.edits.shapePosition}function g(d,S){d._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+S+'"]').remove();var w=h.makeShapesOptionsAndPlotinfo(d,S),E=w.options,C=w.plotinfo;function O(P){var z=c(d,E),j={"data-index":S,"fill-rule":E.fillrule,d:z},I=E.opacity,N=E.fillcolor,W=E.line.width?E.line.color:"rgba(0,0,0,0)",F=E.line.width,U=E.line.dash;F||E.editable!==!0||(F=5,U="solid");var H=z[z.length-1]!=="Z",ne=v(d)&&E.editable&&d._fullLayout._activeShapeIndex===S;ne&&(N=H?"rgba(0,0,0,0)":d._fullLayout.activeshape.fillcolor,I=d._fullLayout.activeshape.opacity);var $,K=P.append("g").classed("shape-group",!0).attr({"data-index":S}),Q=K.append("path").attr(j).style("opacity",I).call(i.stroke,W).call(i.fill,N).call(n.dashLine,U,F);if(y(K,d,E),o(d,S,E,K),(ne||d._context.edits.shapePosition)&&($=r(d.layout,"shapes",E)),ne){Q.style({cursor:"move"});var Z={element:Q.node(),plotinfo:C,gd:d,editHelpers:$,hasText:E.label.text||E.label.texttemplate,isActiveShape:!0},X=b(z,d);f(X,Q,Z)}else d._context.edits.shapePosition?function(te,ae,se,ce,fe,pe){var ge,me,be,ke,ze,ve,oe,ie,he,Se,ye,we,Me,Oe,Ie,de,_e=10,Ae=10,Pe=se.xsizemode==="pixel",Ee=se.ysizemode==="pixel",Fe=se.type==="line",Ve=se.type==="path",Ye=pe.modifyItem,tt=M.select(ae.node().parentNode),nt=T.getFromId(te,se.xref),ht=T.getRefType(se.xref),vt=T.getFromId(te,se.yref),pt=T.getRefType(se.yref),Qe=se.x0shift,Ke=se.x1shift,Mt=se.y0shift,Ot=se.y1shift,Pt=function(Re,rt){return h.getDataToPixel(te,nt,rt,!1,ht)(Re)},St=function(Re,rt){return h.getDataToPixel(te,vt,rt,!0,pt)(Re)},He=h.getPixelToData(te,nt,!1,ht),We=h.getPixelToData(te,vt,!0,pt),Be=Fe?function(){var Re=10,rt=Math.max(se.line.width,Re),ct=fe.append("g").attr("data-index",ce).attr("drag-helper",!0);ct.append("path").attr("d",ae.attr("d")).style({cursor:"move","stroke-width":rt,"stroke-opacity":"0"});var ut={"fill-opacity":"0"},et=Math.max(rt/2,Re);return ct.append("circle").attr({"data-line-point":"start-point",cx:Pe?Pt(se.xanchor)+se.x0:Pt(se.x0,Qe),cy:Ee?St(se.yanchor)-se.y0:St(se.y0,Mt),r:et}).style(ut).classed("cursor-grab",!0),ct.append("circle").attr({"data-line-point":"end-point",cx:Pe?Pt(se.xanchor)+se.x1:Pt(se.x1,Ke),cy:Ee?St(se.yanchor)-se.y1:St(se.y1,Ot),r:et}).style(ut).classed("cursor-grab",!0),ct}():ae,Ge={element:Be.node(),gd:te,prepFn:function(Re){p(te)||(Pe&&(ze=Pt(se.xanchor)),Ee&&(ve=St(se.yanchor)),se.type==="path"?Ie=se.path:(ge=Pe?se.x0:Pt(se.x0),me=Ee?se.y0:St(se.y0),be=Pe?se.x1:Pt(se.x1),ke=Ee?se.y1:St(se.y1)),ge<be?(he=ge,Me="x0",Se=be,Oe="x1"):(he=be,Me="x1",Se=ge,Oe="x0"),!Ee&&me<ke||Ee&&me>ke?(oe=me,ye="y0",ie=ke,we="y1"):(oe=ke,ye="y1",ie=me,we="y0"),ot(Re),gt(fe,se),function(rt,ct,ut){var et=ct.xref,xt=ct.yref,mt=T.getFromId(ut,et),Tt=T.getFromId(ut,xt),yt="";et==="paper"||mt.autorange||(yt+=et),xt==="paper"||Tt.autorange||(yt+=xt),n.setClipUrl(rt,yt?"clip"+ut._fullLayout._uid+yt:null,ut)}(ae,se,te),Ge.moveFn=de==="move"?it:dt,Ge.altKey=Re.altKey)},doneFn:function(){p(te)||(l(ae),je(fe),y(ae,te,se),k.call("_guiRelayout",te,pe.getUpdateObj()))},clickFn:function(){p(te)||je(fe)}};function ot(Re){if(p(te))de=null;else if(Fe)de=Re.target.tagName==="path"?"move":Re.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var rt=Ge.element.getBoundingClientRect(),ct=rt.right-rt.left,ut=rt.bottom-rt.top,et=Re.clientX-rt.left,xt=Re.clientY-rt.top,mt=!Ve&&ct>_e&&ut>Ae&&!Re.shiftKey?a.getCursor(et/ct,1-xt/ut):"move";l(ae,mt),de=mt.split("-")[0]}}function it(Re,rt){if(se.type==="path"){var ct=function(xt){return xt},ut=ct,et=ct;Pe?Ye("xanchor",se.xanchor=He(ze+Re)):(ut=function(xt){return He(Pt(xt)+Re)},nt&&nt.type==="date"&&(ut=h.encodeDate(ut))),Ee?Ye("yanchor",se.yanchor=We(ve+rt)):(et=function(xt){return We(St(xt)+rt)},vt&&vt.type==="date"&&(et=h.encodeDate(et))),Ye("path",se.path=m(Ie,ut,et))}else Pe?Ye("xanchor",se.xanchor=He(ze+Re)):(Ye("x0",se.x0=He(ge+Re)),Ye("x1",se.x1=He(be+Re))),Ee?Ye("yanchor",se.yanchor=We(ve+rt)):(Ye("y0",se.y0=We(me+rt)),Ye("y1",se.y1=We(ke+rt)));ae.attr("d",c(te,se)),gt(fe,se),o(te,ce,se,tt)}function dt(Re,rt){if(Ve){var ct=function(on){return on},ut=ct,et=ct;Pe?Ye("xanchor",se.xanchor=He(ze+Re)):(ut=function(on){return He(Pt(on)+Re)},nt&&nt.type==="date"&&(ut=h.encodeDate(ut))),Ee?Ye("yanchor",se.yanchor=We(ve+rt)):(et=function(on){return We(St(on)+rt)},vt&&vt.type==="date"&&(et=h.encodeDate(et))),Ye("path",se.path=m(Ie,ut,et))}else if(Fe){if(de==="resize-over-start-point"){var xt=ge+Re,mt=Ee?me-rt:me+rt;Ye("x0",se.x0=Pe?xt:He(xt)),Ye("y0",se.y0=Ee?mt:We(mt))}else if(de==="resize-over-end-point"){var Tt=be+Re,yt=Ee?ke-rt:ke+rt;Ye("x1",se.x1=Pe?Tt:He(Tt)),Ye("y1",se.y1=Ee?yt:We(yt))}}else{var bt=function(on){return de.indexOf(on)!==-1},zt=bt("n"),Ut=bt("s"),en=bt("w"),an=bt("e"),rn=zt?oe+rt:oe,qt=Ut?ie+rt:ie,Kt=en?he+Re:he,xn=an?Se+Re:Se;Ee&&(zt&&(rn=oe-rt),Ut&&(qt=ie-rt)),(!Ee&&qt-rn>Ae||Ee&&rn-qt>Ae)&&(Ye(ye,se[ye]=Ee?rn:We(rn)),Ye(we,se[we]=Ee?qt:We(qt))),xn-Kt>_e&&(Ye(Me,se[Me]=Pe?Kt:He(Kt)),Ye(Oe,se[Oe]=Pe?xn:He(xn)))}ae.attr("d",c(te,se)),gt(fe,se),o(te,ce,se,tt)}function gt(Re,rt){(Pe||Ee)&&function(){var ct=rt.type!=="path",ut=Re.selectAll(".visual-cue").data([0]);ut.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var et=Pt(Pe?rt.xanchor:s.midRange(ct?[rt.x0,rt.x1]:h.extractPathCoords(rt.path,u.paramIsX))),xt=St(Ee?rt.yanchor:s.midRange(ct?[rt.y0,rt.y1]:h.extractPathCoords(rt.path,u.paramIsY)));if(et=h.roundPositionForSharpStrokeRendering(et,1),xt=h.roundPositionForSharpStrokeRendering(xt,1),Pe&&Ee){var mt="M"+(et-1-1)+","+(xt-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";ut.attr("d",mt)}else if(Pe){var Tt="M"+(et-1-1)+","+(xt-9-1)+"v18 h2 v-18 Z";ut.attr("d",Tt)}else{var yt="M"+(et-9-1)+","+(xt-1-1)+"h18 v2 h-18 Z";ut.attr("d",yt)}}()}function je(Re){Re.selectAll(".visual-cue").remove()}a.init(Ge),Be.node().onmousemove=ot}(d,Q,E,S,P,$):E.editable===!0&&Q.style("pointer-events",H||i.opacity(N)*I<=.5?"stroke":"all");Q.node().addEventListener("click",function(){return function(te,ae){if(v(te)){var se=+ae.node().getAttribute("data-index");if(se>=0){if(se===te._fullLayout._activeShapeIndex)return void _(te);te._fullLayout._activeShapeIndex=se,te._fullLayout._deactivateShape=_,x(te)}}}(d,Q)})}E._input&&E.visible===!0&&(E.layer==="above"?O(d._fullLayout._shapeUpperLayer):E.xref==="paper"||E.yref==="paper"?O(d._fullLayout._shapeLowerLayer):E.layer==="between"?O(C.shapelayerBetween):C._hadPlotinfo?O((C.mainplotinfo||C).shapelayer):O(d._fullLayout._shapeLowerLayer))}function y(d,S,w){var E=(w.xref+w.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");n.setClipUrl(d,E?"clip"+S._fullLayout._uid+E:null,S)}function m(d,S,w){return d.replace(u.segmentRE,function(E){var C=0,O=E.charAt(0),P=u.paramIsX[O],z=u.paramIsY[O],j=u.numParams[O];return O+E.substr(1).replace(u.paramRE,function(I){return C>=j||(P[C]?I=S(I):z[C]&&(I=w(I)),C++),I})})}function _(d){v(d)&&d._fullLayout._activeShapeIndex>=0&&(t(d),delete d._fullLayout._activeShapeIndex,x(d))}ee.exports={draw:x,drawOne:g,eraseActiveShape:function(d){if(v(d)){t(d);var S=d._fullLayout._activeShapeIndex,w=(d.layout||{}).shapes||[];if(S<w.length){for(var E=[],C=0;C<w.length;C++)C!==S&&E.push(w[C]);return delete d._fullLayout._activeShapeIndex,k.call("_guiRelayout",d,{shapes:E})}}},drawLabel:o}},92872:function(ee,R,e){var M=e(67824).overrideAll,k=e(45464),s=e(25376),T=e(98192).u,b=e(92880).extendFlat,f=e(21776).ye,o=e(97728);ee.exports=M({newshape:{visible:b({},k.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:b({},k.legend,{}),legendgroup:b({},k.legendgroup,{}),legendgrouptitle:{text:b({},k.legendgrouptitle.text,{}),font:s({})},legendrank:b({},k.legendrank,{}),legendwidth:b({},k.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:b({},T,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:b({},k.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:f({newshape:!0},{keys:Object.keys(o)}),font:s({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")},7e3:function(ee){ee.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},65144:function(ee,R,e){var M=e(76308),k=e(3400);ee.exports=function(s,T,b){if(b("newshape.visible"),b("newshape.name"),b("newshape.showlegend"),b("newshape.legend"),b("newshape.legendwidth"),b("newshape.legendgroup"),b("newshape.legendgrouptitle.text"),k.coerceFont(b,"newshape.legendgrouptitle.font"),b("newshape.legendrank"),b("newshape.drawdirection"),b("newshape.layer"),b("newshape.fillcolor"),b("newshape.fillrule"),b("newshape.opacity"),b("newshape.line.width")){var f=(s||{}).plot_bgcolor||"#FFF";b("newshape.line.color",M.contrast(f)),b("newshape.line.dash")}var o=s.dragmode==="drawline",t=b("newshape.label.text"),i=b("newshape.label.texttemplate");if(t||i){b("newshape.label.textangle");var n=b("newshape.label.textposition",o?"middle":"middle center");b("newshape.label.xanchor"),b("newshape.label.yanchor",function(r,a){return r?"bottom":a.indexOf("top")!==-1?"top":a.indexOf("bottom")!==-1?"bottom":"middle"}(o,n)),b("newshape.label.padding"),k.coerceFont(b,"newshape.label.font",T.font)}b("activeshape.fillcolor"),b("activeshape.opacity")}},9856:function(ee,R,e){var M=e(21984),k=e(7e3),s=k.CIRCLE_SIDES,T=k.SQRT2,b=e(5840),f=b.p2r,o=b.r2p,t=[0,3,4,5,6,1,2],i=[0,3,4,1,2];function n(a,l){return Math.abs(a-l)<=1e-6}function r(a,l){var u=l[1]-a[1],h=l[2]-a[2];return Math.sqrt(u*u+h*h)}R.writePaths=function(a){var l=a.length;if(!l)return"M0,0Z";for(var u="",h=0;h<l;h++)for(var c=a[h].length,x=0;x<c;x++){var p=a[h][x][0];if(p==="Z")u+="Z";else for(var v=a[h][x].length,g=0;g<v;g++){var y=g;p==="Q"||p==="S"?y=i[g]:p==="C"&&(y=t[g]),u+=a[h][x][y],g>0&&g<v-1&&(u+=",")}}return u},R.readPaths=function(a,l,u,h){var c,x,p,v=M(a),g=[],y=-1,m=0,_=0,d=function(){x=m,p=_};d();for(var S=0;S<v.length;S++){var w,E,C,O,P=[],z=v[S][0],j=z;switch(z){case"M":g[++y]=[],m=+v[S][1],_=+v[S][2],P.push([j,m,_]),d();break;case"Q":case"S":w=+v[S][1],C=+v[S][2],m=+v[S][3],_=+v[S][4],P.push([j,m,_,w,C]);break;case"C":w=+v[S][1],C=+v[S][2],E=+v[S][3],O=+v[S][4],m=+v[S][5],_=+v[S][6],P.push([j,m,_,w,C,E,O]);break;case"T":case"L":m=+v[S][1],_=+v[S][2],P.push([j,m,_]);break;case"H":j="L",m=+v[S][1],P.push([j,m,_]);break;case"V":j="L",_=+v[S][1],P.push([j,m,_]);break;case"A":j="L";var I=+v[S][1],N=+v[S][2];+v[S][4]||(I=-I,N=-N);var W=m-I,F=_;for(c=1;c<=s/2;c++){var U=2*Math.PI*c/s;P.push([j,W+I*Math.cos(U),F+N*Math.sin(U)])}break;case"Z":m===x&&_===p||(m=x,_=p,P.push([j,m,_]))}for(var H=(u||{}).domain,ne=l._fullLayout._size,$=u&&u.xsizemode==="pixel",K=u&&u.ysizemode==="pixel",Q=h===!1,Z=0;Z<P.length;Z++){for(c=0;c+2<7;c+=2){var X=P[Z][c+1],te=P[Z][c+2];X!==void 0&&te!==void 0&&(m=X,_=te,u&&(u.xaxis&&u.xaxis.p2r?(Q&&(X-=u.xaxis._offset),X=$?o(u.xaxis,u.xanchor)+X:f(u.xaxis,X)):(Q&&(X-=ne.l),H?X=H.x[0]+X/ne.w:X/=ne.w),u.yaxis&&u.yaxis.p2r?(Q&&(te-=u.yaxis._offset),te=K?o(u.yaxis,u.yanchor)-te:f(u.yaxis,te)):(Q&&(te-=ne.t),te=H?H.y[1]-te/ne.h:1-te/ne.h)),P[Z][c+1]=X,P[Z][c+2]=te)}g[y].push(P[Z].slice())}}return g},R.pointsOnRectangle=function(a){if(a.length!==5)return!1;for(var l=1;l<3;l++)if(!n(a[0][l]-a[1][l],a[3][l]-a[2][l])||!n(a[0][l]-a[3][l],a[1][l]-a[2][l]))return!1;return!(!n(a[0][1],a[1][1])&&!n(a[0][1],a[3][1])||!(r(a[0],a[1])*r(a[0],a[3])))},R.pointsOnEllipse=function(a){var l=a.length;if(l!==s+1)return!1;l=s;for(var u=0;u<l;u++){var h=(2*l-u)%l,c=(l/2+h)%l,x=(l/2+u)%l;if(!n(r(a[u],a[x]),r(a[h],a[c])))return!1}return!0},R.handleEllipse=function(a,l,u){if(!a)return[l,u];var h=R.ellipseOver({x0:l[0],y0:l[1],x1:u[0],y1:u[1]}),c=(h.x1+h.x0)/2,x=(h.y1+h.y0)/2,p=(h.x1-h.x0)/2,v=(h.y1-h.y0)/2;p||(p=v/=T),v||(v=p/=T);for(var g=[],y=0;y<s;y++){var m=2*y*Math.PI/s;g.push([c+p*Math.cos(m),x+v*Math.sin(m)])}return g},R.ellipseOver=function(a){var l=a.x0,u=a.y0,h=a.x1,c=a.y1,x=h-l,p=c-u,v=((l-=x)+h)/2,g=((u-=p)+c)/2;return{x0:v-(x*=T),y0:g-(p*=T),x1:v+x,y1:g+p}},R.fixDatesForPaths=function(a,l,u){var h=l.type==="date",c=u.type==="date";if(!h&&!c)return a;for(var x=0;x<a.length;x++)for(var p=0;p<a[x].length;p++)for(var v=0;v+2<a[x][p].length;v+=2)h&&(a[x][p][v+1]=a[x][p][v+1].replace(" ","_")),c&&(a[x][p][v+2]=a[x][p][v+2].replace(" ","_"));return a}},93940:function(ee,R,e){var M=e(72760),k=M.drawMode,s=M.openMode,T=e(7e3),b=T.i000,f=T.i090,o=T.i180,t=T.i270,i=T.cos45,n=T.sin45,r=e(5840),a=r.p2r,l=r.r2p,u=e(1936).clearOutline,h=e(9856),c=h.readPaths,x=h.writePaths,p=h.ellipseOver,v=h.fixDatesForPaths;function g(y,m,_){var d,S=y[0][0],w=m.gd,E=S.getAttribute("d"),C=w._fullLayout.newshape,O=m.plotinfo,P=m.isActiveShape,z=O.xaxis,j=O.yaxis,I=!!O.domain||!O.xaxis,N=!!O.domain||!O.yaxis,W=s(_),F=c(E,w,O,P),U={editable:!0,visible:C.visible,name:C.name,showlegend:C.showlegend,legend:C.legend,legendwidth:C.legendwidth,legendgroup:C.legendgroup,legendgrouptitle:{text:C.legendgrouptitle.text,font:C.legendgrouptitle.font},legendrank:C.legendrank,label:C.label,xref:I?"paper":z._id,yref:N?"paper":j._id,layer:C.layer,opacity:C.opacity,line:{color:C.line.color,width:C.line.width,dash:C.line.dash}};if(W||(U.fillcolor=C.fillcolor,U.fillrule=C.fillrule),F.length===1&&(d=F[0]),d&&d.length===5&&_==="drawrect")U.type="rect",U.x0=d[0][1],U.y0=d[0][2],U.x1=d[2][1],U.y1=d[2][2];else if(d&&_==="drawline")U.type="line",U.x0=d[0][1],U.y0=d[0][2],U.x1=d[1][1],U.y1=d[1][2];else if(d&&_==="drawcircle"){U.type="circle";var H=d[b][1],ne=d[f][1],$=d[o][1],K=d[t][1],Q=d[b][2],Z=d[f][2],X=d[o][2],te=d[t][2],ae=O.xaxis&&(O.xaxis.type==="date"||O.xaxis.type==="log"),se=O.yaxis&&(O.yaxis.type==="date"||O.yaxis.type==="log");ae&&(H=l(O.xaxis,H),ne=l(O.xaxis,ne),$=l(O.xaxis,$),K=l(O.xaxis,K)),se&&(Q=l(O.yaxis,Q),Z=l(O.yaxis,Z),X=l(O.yaxis,X),te=l(O.yaxis,te));var ce=(ne+K)/2,fe=(Q+X)/2,pe=p({x0:ce,y0:fe,x1:ce+(K-ne+$-H)/2*i,y1:fe+(te-Z+X-Q)/2*n});ae&&(pe.x0=a(O.xaxis,pe.x0),pe.x1=a(O.xaxis,pe.x1)),se&&(pe.y0=a(O.yaxis,pe.y0),pe.y1=a(O.yaxis,pe.y1)),U.x0=pe.x0,U.y0=pe.y0,U.x1=pe.x1,U.y1=pe.y1}else U.type="path",z&&j&&v(F,z,j),U.path=x(F),d=null;return U}ee.exports={newShapes:function(y,m){if(y.length&&y[0][0]){var _=m.gd,d=m.isActiveShape,S=m.dragmode,w=(_.layout||{}).shapes||[];if(!k(S)&&d!==void 0){var E=_._fullLayout._activeShapeIndex;if(E<w.length)switch(_._fullLayout.shapes[E].type){case"rect":S="drawrect";break;case"circle":S="drawcircle";break;case"line":S="drawline";break;case"path":var C=w[E].path||"";S=C[C.length-1]==="Z"?"drawclosedpath":"drawopenpath"}}var O=g(y,m,S);u(_);for(var P=m.editHelpers,z=(P||{}).modifyItem,j=[],I=0;I<w.length;I++){var N=_._fullLayout.shapes[I];if(j[I]=N._input,d!==void 0&&I===_._fullLayout._activeShapeIndex){var W=O;switch(N.type){case"line":case"rect":case"circle":z("x0",W.x0-(N.x0shift||0)),z("x1",W.x1-(N.x1shift||0)),z("y0",W.y0-(N.y0shift||0)),z("y1",W.y1-(N.y1shift||0));break;case"path":z("path",W.path)}}}return d===void 0?(j.push(O),j):P?P.getUpdateObj():{}}},createShapeObj:g}},1936:function(ee){ee.exports={clearOutlineControllers:function(R){var e=R._fullLayout._zoomlayer;e&&e.selectAll(".outline-controllers").remove()},clearOutline:function(R){var e=R._fullLayout._zoomlayer;e&&e.selectAll(".select-outline").remove(),R._fullLayout._outlining=!1}}},65152:function(ee,R,e){var M=e(85448),k=e(3400),s=e(54460);function T(b,f){var o=0;return(f=f||0)&&b&&(b.type==="category"||b.type==="multicategory")&&(o=(b.r2p(1)-b.r2p(0))*f),o}R.rangeToShapePosition=function(b){return b.type==="log"?b.r2d:function(f){return f}},R.shapePositionToRange=function(b){return b.type==="log"?b.d2r:function(f){return f}},R.decodeDate=function(b){return function(f){return f.replace&&(f=f.replace("_"," ")),b(f)}},R.encodeDate=function(b){return function(f){return b(f).replace(" ","_")}},R.extractPathCoords=function(b,f,o){var t=[];return b.match(M.segmentRE).forEach(function(i){var n=f[i.charAt(0)].drawn;if(n!==void 0){var r=i.substr(1).match(M.paramRE);if(r&&!(r.length<n)){var a=r[n],l=o?a:k.cleanNumber(a);t.push(l)}}}),t},R.getDataToPixel=function(b,f,o,t,i){var n,r=b._fullLayout._size;if(f)if(i==="domain")n=function(l){return f._length*(t?1-l:l)+f._offset};else{var a=R.shapePositionToRange(f);n=function(l){var u=T(f,o);return f._offset+f.r2p(a(l,!0))+u},f.type==="date"&&(n=R.decodeDate(n))}else n=t?function(l){return r.t+r.h*(1-l)}:function(l){return r.l+r.w*l};return n},R.getPixelToData=function(b,f,o,t){var i,n=b._fullLayout._size;if(f)if(t==="domain")i=function(a){var l=(a-f._offset)/f._length;return o?1-l:l};else{var r=R.rangeToShapePosition(f);i=function(a){return r(f.p2r(a-f._offset))}}else i=o?function(a){return 1-(a-n.t)/n.h}:function(a){return(a-n.l)/n.w};return i},R.roundPositionForSharpStrokeRendering=function(b,f){var o=Math.round(f%2)===1,t=Math.round(b);return o?t+.5:t},R.makeShapesOptionsAndPlotinfo=function(b,f){var o=b._fullLayout.shapes[f]||{},t=b._fullLayout._plots[o.xref+o.yref];return t?t._hadPlotinfo=!0:(t={},o.xref&&o.xref!=="paper"&&(t.xaxis=b._fullLayout[o.xref+"axis"]),o.yref&&o.yref!=="paper"&&(t.yaxis=b._fullLayout[o.yref+"axis"])),t.xsizemode=o.xsizemode,t.ysizemode=o.ysizemode,t.xanchor=o.xanchor,t.yanchor=o.yanchor,{options:o,plotinfo:t}},R.makeSelectionsOptionsAndPlotinfo=function(b,f){var o=b._fullLayout.selections[f]||{},t=b._fullLayout._plots[o.xref+o.yref];return t?t._hadPlotinfo=!0:(t={},o.xref&&(t.xaxis=b._fullLayout[o.xref+"axis"]),o.yref&&(t.yaxis=b._fullLayout[o.yref+"axis"])),{options:o,plotinfo:t}},R.getPathString=function(b,f){var o,t,i,n,r,a,l,u,h=f.type,c=s.getRefType(f.xref),x=s.getRefType(f.yref),p=s.getFromId(b,f.xref),v=s.getFromId(b,f.yref),g=b._fullLayout._size,y=T(p,f.x0shift),m=T(p,f.x1shift),_=T(v,f.y0shift),d=T(v,f.y1shift);if(p?c==="domain"?t=function(I){return p._offset+p._length*I}:(o=R.shapePositionToRange(p),t=function(I){return p._offset+p.r2p(o(I,!0))}):t=function(I){return g.l+g.w*I},v?x==="domain"?n=function(I){return v._offset+v._length*(1-I)}:(i=R.shapePositionToRange(v),n=function(I){return v._offset+v.r2p(i(I,!0))}):n=function(I){return g.t+g.h*(1-I)},h==="path")return p&&p.type==="date"&&(t=R.decodeDate(t)),v&&v.type==="date"&&(n=R.decodeDate(n)),function(I,N,W){var F=I.path,U=I.xsizemode,H=I.ysizemode,ne=I.xanchor,$=I.yanchor;return F.replace(M.segmentRE,function(K){var Q=0,Z=K.charAt(0),X=M.paramIsX[Z],te=M.paramIsY[Z],ae=M.numParams[Z],se=K.substr(1).replace(M.paramRE,function(ce){return X[Q]?ce=U==="pixel"?N(ne)+Number(ce):N(ce):te[Q]&&(ce=H==="pixel"?W($)-Number(ce):W(ce)),++Q>ae&&(ce="X"),ce});return Q>ae&&(se=se.replace(/[\s,]*X.*/,""),k.log("Ignoring extra params in segment "+K)),Z+se})}(f,t,n);if(f.xsizemode==="pixel"){var S=t(f.xanchor);r=S+f.x0+y,a=S+f.x1+m}else r=t(f.x0)+y,a=t(f.x1)+m;if(f.ysizemode==="pixel"){var w=n(f.yanchor);l=w-f.y0+_,u=w-f.y1+d}else l=n(f.y0)+_,u=n(f.y1)+d;if(h==="line")return"M"+r+","+l+"L"+a+","+u;if(h==="rect")return"M"+r+","+l+"H"+a+"V"+u+"H"+r+"Z";var E=(r+a)/2,C=(l+u)/2,O=Math.abs(E-r),P=Math.abs(C-l),z="A"+O+","+P,j=E+O+","+C;return"M"+j+z+" 0 1,1 "+E+","+(C-P)+z+" 0 0,1 "+j+"Z"}},41592:function(ee,R,e){var M=e(4016);ee.exports={moduleType:"component",name:"shapes",layoutAttributes:e(46056),supplyLayoutDefaults:e(43712),supplyDrawNewShapeDefaults:e(65144),includeBasePlot:e(36632)("shapes"),calcAutorange:e(96084),draw:M.draw,drawOne:M.drawOne}},97728:function(ee){function R(o,t){return t?t.d2l(o):o}function e(o,t){return t?t.l2d(o):o}function M(o){return o.x0shift||0}function k(o){return o.x1shift||0}function s(o){return o.y0shift||0}function T(o){return o.y1shift||0}function b(o,t){return R(o.x1,t)+k(o)-R(o.x0,t)-M(o)}function f(o,t,i){return R(o.y1,i)+T(o)-R(o.y0,i)-s(o)}ee.exports={x0:function(o){return o.x0},x1:function(o){return o.x1},y0:function(o){return o.y0},y1:function(o){return o.y1},slope:function(o,t,i){return o.type!=="line"?void 0:f(o,0,i)/b(o,t)},dx:b,dy:f,width:function(o,t){return Math.abs(b(o,t))},height:function(o,t,i){return Math.abs(f(o,0,i))},length:function(o,t,i){return o.type!=="line"?void 0:Math.sqrt(Math.pow(b(o,t),2)+Math.pow(f(o,0,i),2))},xcenter:function(o,t){return e((R(o.x1,t)+k(o)+R(o.x0,t)+M(o))/2,t)},ycenter:function(o,t,i){return e((R(o.y1,i)+T(o)+R(o.y0,i)+s(o))/2,i)}}},89861:function(ee,R,e){var M=e(25376),k=e(66741),s=e(92880).extendDeepAll,T=e(67824).overrideAll,b=e(85656),f=e(31780).templatedArray,o=e(60876),t=f("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});ee.exports=T(f("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:t,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:s(k({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:b.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:M({})},font:M({}),activebgcolor:{valType:"color",dflt:o.gripBgActiveColor},bgcolor:{valType:"color",dflt:o.railBgColor},bordercolor:{valType:"color",dflt:o.railBorderColor},borderwidth:{valType:"number",min:0,dflt:o.railBorderWidth},ticklen:{valType:"number",min:0,dflt:o.tickLength},tickcolor:{valType:"color",dflt:o.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:o.minorTickLength}}),"arraydraw","from-root")},60876:function(ee){ee.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},8132:function(ee,R,e){var M=e(3400),k=e(51272),s=e(89861),T=e(60876).name,b=s.steps;function f(t,i,n){function r(c,x){return M.coerce(t,i,s,c,x)}for(var a=k(t,i,{name:"steps",handleItemDefaults:o}),l=0,u=0;u<a.length;u++)a[u].visible&&l++;if(l<2?i.visible=!1:r("visible")){i._stepCount=l;var h=i._visibleSteps=M.filterVisible(a);(a[r("active")]||{}).visible||(i.active=h[0]._index),r("x"),r("y"),M.noneOrAll(t,i,["x","y"]),r("xanchor"),r("yanchor"),r("len"),r("lenmode"),r("pad.t"),r("pad.r"),r("pad.b"),r("pad.l"),M.coerceFont(r,"font",n.font),r("currentvalue.visible")&&(r("currentvalue.xanchor"),r("currentvalue.prefix"),r("currentvalue.suffix"),r("currentvalue.offset"),M.coerceFont(r,"currentvalue.font",i.font)),r("transition.duration"),r("transition.easing"),r("bgcolor"),r("activebgcolor"),r("bordercolor"),r("borderwidth"),r("ticklen"),r("tickwidth"),r("tickcolor"),r("minorticklen")}}function o(t,i){function n(a,l){return M.coerce(t,i,b,a,l)}if(t.method==="skip"||Array.isArray(t.args)?n("visible"):i.visible=!1){n("method"),n("args");var r=n("label","step-"+i._index);n("value",r),n("execute")}}ee.exports=function(t,i){k(t,i,{name:T,handleItemDefaults:f})}},79664:function(ee,R,e){var M=e(33428),k=e(7316),s=e(76308),T=e(43616),b=e(3400),f=b.strTranslate,o=e(72736),t=e(31780).arrayEditor,i=e(60876),n=e(84284),r=n.LINE_SPACING,a=n.FROM_TL,l=n.FROM_BR;function u(P){return i.autoMarginIdRoot+P._index}function h(P){return P._index}function c(P,z){var j=T.tester.selectAll("g."+i.labelGroupClass).data(z._visibleSteps);j.enter().append("g").classed(i.labelGroupClass,!0);var I=0,N=0;j.each(function(Z){var X=v(M.select(this),{step:Z},z).node();if(X){var te=T.bBox(X);N=Math.max(N,te.height),I=Math.max(I,te.width)}}),j.remove();var W=z._dims={};W.inputAreaWidth=Math.max(i.railWidth,i.gripHeight);var F=P._fullLayout._size;W.lx=F.l+F.w*z.x,W.ly=F.t+F.h*(1-z.y),z.lenmode==="fraction"?W.outerLength=Math.round(F.w*z.len):W.outerLength=z.len,W.inputAreaStart=0,W.inputAreaLength=Math.round(W.outerLength-z.pad.l-z.pad.r);var U=(W.inputAreaLength-2*i.stepInset)/(z._stepCount-1),H=I+i.labelPadding;if(W.labelStride=Math.max(1,Math.ceil(H/U)),W.labelHeight=N,W.currentValueMaxWidth=0,W.currentValueHeight=0,W.currentValueTotalHeight=0,W.currentValueMaxLines=1,z.currentvalue.visible){var ne=T.tester.append("g");j.each(function(Z){var X=x(ne,z,Z.label),te=X.node()&&T.bBox(X.node())||{width:0,height:0},ae=o.lineCount(X);W.currentValueMaxWidth=Math.max(W.currentValueMaxWidth,Math.ceil(te.width)),W.currentValueHeight=Math.max(W.currentValueHeight,Math.ceil(te.height)),W.currentValueMaxLines=Math.max(W.currentValueMaxLines,ae)}),W.currentValueTotalHeight=W.currentValueHeight+z.currentvalue.offset,ne.remove()}W.height=W.currentValueTotalHeight+i.tickOffset+z.ticklen+i.labelOffset+W.labelHeight+z.pad.t+z.pad.b;var $="left";b.isRightAnchor(z)&&(W.lx-=W.outerLength,$="right"),b.isCenterAnchor(z)&&(W.lx-=W.outerLength/2,$="center");var K="top";b.isBottomAnchor(z)&&(W.ly-=W.height,K="bottom"),b.isMiddleAnchor(z)&&(W.ly-=W.height/2,K="middle"),W.outerLength=Math.ceil(W.outerLength),W.height=Math.ceil(W.height),W.lx=Math.round(W.lx),W.ly=Math.round(W.ly);var Q={y:z.y,b:W.height*l[K],t:W.height*a[K]};z.lenmode==="fraction"?(Q.l=0,Q.xl=z.x-z.len*a[$],Q.r=0,Q.xr=z.x+z.len*l[$]):(Q.x=z.x,Q.l=W.outerLength*a[$],Q.r=W.outerLength*l[$]),k.autoMargin(P,u(z),Q)}function x(P,z,j){if(z.currentvalue.visible){var I,N,W=z._dims;switch(z.currentvalue.xanchor){case"right":I=W.inputAreaLength-i.currentValueInset-W.currentValueMaxWidth,N="left";break;case"center":I=.5*W.inputAreaLength,N="middle";break;default:I=i.currentValueInset,N="left"}var F=b.ensureSingle(P,"text",i.labelClass,function(Q){Q.attr({"text-anchor":N,"data-notex":1})}),U=z.currentvalue.prefix?z.currentvalue.prefix:"";if(typeof j=="string")U+=j;else{var H=z.steps[z.active].label,ne=z._gd._fullLayout._meta;ne&&(H=b.templateString(H,ne)),U+=H}z.currentvalue.suffix&&(U+=z.currentvalue.suffix),F.call(T.font,z.currentvalue.font).text(U).call(o.convertToTspans,z._gd);var $=o.lineCount(F),K=(W.currentValueMaxLines+1-$)*z.currentvalue.font.size*r;return o.positionText(F,I,K),F}}function p(P,z,j){b.ensureSingle(P,"rect",i.gripRectClass,function(I){I.call(_,z,P,j).style("pointer-events","all")}).attr({width:i.gripWidth,height:i.gripHeight,rx:i.gripRadius,ry:i.gripRadius}).call(s.stroke,j.bordercolor).call(s.fill,j.bgcolor).style("stroke-width",j.borderwidth+"px")}function v(P,z,j){var I=b.ensureSingle(P,"text",i.labelClass,function(F){F.attr({"text-anchor":"middle","data-notex":1})}),N=z.step.label,W=j._gd._fullLayout._meta;return W&&(N=b.templateString(N,W)),I.call(T.font,j.font).text(N).call(o.convertToTspans,j._gd),I}function g(P,z){var j=b.ensureSingle(P,"g",i.labelsClass),I=z._dims,N=j.selectAll("g."+i.labelGroupClass).data(I.labelSteps);N.enter().append("g").classed(i.labelGroupClass,!0),N.exit().remove(),N.each(function(W){var F=M.select(this);F.call(v,W,z),T.setTranslate(F,w(z,W.fraction),i.tickOffset+z.ticklen+z.font.size*r+i.labelOffset+I.currentValueTotalHeight)})}function y(P,z,j,I,N){var W=Math.round(I*(j._stepCount-1)),F=j._visibleSteps[W]._index;F!==j.active&&m(P,z,j,F,!0,N)}function m(P,z,j,I,N,W){var F=j.active;j.active=I,t(P.layout,i.name,j).applyUpdate("active",I);var U=j.steps[j.active];z.call(S,j,W),z.call(x,j),P.emit("plotly_sliderchange",{slider:j,step:j.steps[j.active],interaction:N,previousActive:F}),U&&U.method&&N&&(z._nextMethod?(z._nextMethod.step=U,z._nextMethod.doCallback=N,z._nextMethod.doTransition=W):(z._nextMethod={step:U,doCallback:N,doTransition:W},z._nextMethodRaf=window.requestAnimationFrame(function(){var H=z._nextMethod.step;H.method&&(H.execute&&k.executeAPICommand(P,H.method,H.args),z._nextMethod=null,z._nextMethodRaf=null)})))}function _(P,z,j){if(!z._context.staticPlot){var I=j.node(),N=M.select(z);P.on("mousedown",F),P.on("touchstart",F)}function W(){return j.data()[0]}function F(){var U=W();z.emit("plotly_sliderstart",{slider:U});var H=j.select("."+i.gripRectClass);M.event.stopPropagation(),M.event.preventDefault(),H.call(s.fill,U.activebgcolor);var ne=E(U,M.mouse(I)[0]);function $(){var Q=W(),Z=E(Q,M.mouse(I)[0]);y(z,j,Q,Z,!1)}function K(){var Q=W();Q._dragging=!1,H.call(s.fill,Q.bgcolor),N.on("mouseup",null),N.on("mousemove",null),N.on("touchend",null),N.on("touchmove",null),z.emit("plotly_sliderend",{slider:Q,step:Q.steps[Q.active]})}y(z,j,U,ne,!0),U._dragging=!0,N.on("mousemove",$),N.on("touchmove",$),N.on("mouseup",K),N.on("touchend",K)}}function d(P,z){var j=P.selectAll("rect."+i.tickRectClass).data(z._visibleSteps),I=z._dims;j.enter().append("rect").classed(i.tickRectClass,!0),j.exit().remove(),j.attr({width:z.tickwidth+"px","shape-rendering":"crispEdges"}),j.each(function(N,W){var F=W%I.labelStride==0,U=M.select(this);U.attr({height:F?z.ticklen:z.minorticklen}).call(s.fill,z.tickcolor),T.setTranslate(U,w(z,W/(z._stepCount-1))-.5*z.tickwidth,(F?i.tickOffset:i.minorTickOffset)+I.currentValueTotalHeight)})}function S(P,z,j){for(var I=P.select("rect."+i.gripRectClass),N=0,W=0;W<z._stepCount;W++)if(z._visibleSteps[W]._index===z.active){N=W;break}var F=w(z,N/(z._stepCount-1));if(!z._invokingCommand){var U=I;j&&z.transition.duration>0&&(U=U.transition().duration(z.transition.duration).ease(z.transition.easing)),U.attr("transform",f(F-.5*i.gripWidth,z._dims.currentValueTotalHeight))}}function w(P,z){var j=P._dims;return j.inputAreaStart+i.stepInset+(j.inputAreaLength-2*i.stepInset)*Math.min(1,Math.max(0,z))}function E(P,z){var j=P._dims;return Math.min(1,Math.max(0,(z-i.stepInset-j.inputAreaStart)/(j.inputAreaLength-2*i.stepInset-2*j.inputAreaStart)))}function C(P,z,j){var I=j._dims,N=b.ensureSingle(P,"rect",i.railTouchRectClass,function(W){W.call(_,z,P,j).style("pointer-events","all")});N.attr({width:I.inputAreaLength,height:Math.max(I.inputAreaWidth,i.tickOffset+j.ticklen+I.labelHeight)}).call(s.fill,j.bgcolor).attr("opacity",0),T.setTranslate(N,0,I.currentValueTotalHeight)}function O(P,z){var j=z._dims,I=j.inputAreaLength-2*i.railInset,N=b.ensureSingle(P,"rect",i.railRectClass);N.attr({width:I,height:i.railWidth,rx:i.railRadius,ry:i.railRadius,"shape-rendering":"crispEdges"}).call(s.stroke,z.bordercolor).call(s.fill,z.bgcolor).style("stroke-width",z.borderwidth+"px"),T.setTranslate(N,i.railInset,.5*(j.inputAreaWidth-i.railWidth)+j.currentValueTotalHeight)}ee.exports=function(P){var z=P._context.staticPlot,j=P._fullLayout,I=function(ne,$){for(var K=ne[i.name],Q=[],Z=0;Z<K.length;Z++){var X=K[Z];X.visible&&(X._gd=$,Q.push(X))}return Q}(j,P),N=j._infolayer.selectAll("g."+i.containerClassName).data(I.length>0?[0]:[]);function W(ne){ne._commandObserver&&(ne._commandObserver.remove(),delete ne._commandObserver),k.autoMargin(P,u(ne))}if(N.enter().append("g").classed(i.containerClassName,!0).style("cursor",z?null:"ew-resize"),N.exit().each(function(){M.select(this).selectAll("g."+i.groupClassName).each(W)}).remove(),I.length!==0){var F=N.selectAll("g."+i.groupClassName).data(I,h);F.enter().append("g").classed(i.groupClassName,!0),F.exit().each(W).remove();for(var U=0;U<I.length;U++){var H=I[U];c(P,H)}F.each(function(ne){var $=M.select(this);(function(K){var Q=K._dims;Q.labelSteps=[];for(var Z=K._stepCount,X=0;X<Z;X+=Q.labelStride)Q.labelSteps.push({fraction:X/(Z-1),step:K._visibleSteps[X]})})(ne),k.manageCommandObserver(P,ne,ne._visibleSteps,function(K){var Q=$.data()[0];Q.active!==K.index&&(Q._dragging||m(P,$,Q,K.index,!1,!0))}),function(K,Q,Z){(Z.steps[Z.active]||{}).visible||(Z.active=Z._visibleSteps[0]._index),Q.call(x,Z).call(O,Z).call(g,Z).call(d,Z).call(C,K,Z).call(p,K,Z);var X=Z._dims;T.setTranslate(Q,X.lx+Z.pad.l,X.ly+Z.pad.t),Q.call(S,Z,!1),Q.call(x,Z)}(P,M.select(this),ne)})}}},97544:function(ee,R,e){var M=e(60876);ee.exports={moduleType:"component",name:M.name,layoutAttributes:e(89861),supplyLayoutDefaults:e(8132),draw:e(79664)}},81668:function(ee,R,e){var M=e(33428),k=e(38248),s=e(7316),T=e(24040),b=e(3400),f=b.strTranslate,o=e(43616),t=e(76308),i=e(72736),n=e(13448),r=e(84284).OPPOSITE_SIDE,a=/ [XY][0-9]* /;ee.exports={draw:function(l,u,h){var c,x=l._fullLayout,p=h.propContainer,v=h.propName,g=h.placeholder,y=h.traceIndex,m=h.avoid||{},_=h.attributes,d=h.transform,S=h.containerGroup,w=1,E=p.title,C=(E&&E.text?E.text:"").trim(),O=!1,P=E&&E.font?E.font:{},z=P.family,j=P.size,I=P.color,N=P.weight,W=P.style,F=P.variant,U=P.textcase,H=P.lineposition,ne=P.shadow,$=!!h.subtitlePropName,K=h.subtitlePlaceholder,Q=(p.title||{}).subtitle||{text:"",font:{}},Z=Q.text.trim(),X=!1,te=1,ae=Q.font,se=ae.family,ce=ae.size,fe=ae.color,pe=ae.weight,ge=ae.style,me=ae.variant,be=ae.textcase,ke=ae.lineposition,ze=ae.shadow;v==="title.text"?c="titleText":v.indexOf("axis")!==-1?c="axisTitleText":v.indexOf(!0)&&(c="colorbarTitleText");var ve=l._context.edits[c];function oe(Ee,Fe){return Ee!==void 0&&Fe!==void 0&&Ee.replace(a," % ")===Fe.replace(a," % ")}C===""?w=0:oe(C,g)&&(ve||(C=""),w=.2,O=!0),$&&(Z===""?te=0:oe(Z,K)&&(ve||(Z=""),te=.2,X=!0)),h._meta?C=b.templateString(C,h._meta):x._meta&&(C=b.templateString(C,x._meta));var ie,he=C||Z||ve;S||(S=b.ensureSingle(x._infolayer,"g","g-"+u),ie=x._hColorbarMoveTitle);var Se=S.selectAll("text."+u).data(he?[0]:[]);Se.enter().append("text"),Se.text(C).attr("class",u),Se.exit().remove();var ye=null,we=u+"-subtitle",Me=Z||ve;if($&&Me&&((ye=S.selectAll("text."+we).data(Me?[0]:[])).enter().append("text"),ye.text(Z).attr("class",we),ye.exit().remove()),!he)return S;function Oe(Ee,Fe){b.syncOrAsync([Ie,de],{title:Ee,subtitle:Fe})}function Ie(Ee){var Fe,Ve=Ee.title,Ye=Ee.subtitle;if(!d&&ie&&(d={}),d?(Fe="",d.rotate&&(Fe+="rotate("+[d.rotate,_.x,_.y]+")"),(d.offset||ie)&&(Fe+=f(0,(d.offset||0)-(ie||0)))):Fe=null,Ve.attr("transform",Fe),Ve.style("opacity",w*t.opacity(I)).call(o.font,{color:t.rgb(I),size:M.round(j,2),family:z,weight:N,style:W,variant:F,textcase:U,shadow:ne,lineposition:H}).attr(_).call(i.convertToTspans,l,function(Qe){if(Qe){var Ke=M.select(Qe.node().parentNode).select("."+we);if(!Ke.empty()){var Mt=Qe.node().getBBox();if(Mt.height){var Ot=Mt.y+Mt.height+1.6*ce;Ke.attr("y",Ot)}}}}),Ye){var tt=S.select("."+u+"-math-group"),nt=Ve.node().getBBox(),ht=tt.node()?tt.node().getBBox():void 0,vt=ht?ht.y+ht.height+1.6*ce:nt.y+nt.height+1.6*ce,pt=b.extendFlat({},_,{y:vt});Ye.attr("transform",Fe),Ye.style("opacity",te*t.opacity(fe)).call(o.font,{color:t.rgb(fe),size:M.round(ce,2),family:se,weight:pe,style:ge,variant:me,textcase:be,shadow:ze,lineposition:ke}).attr(pt).call(i.convertToTspans,l)}return s.previousPromises(l)}function de(Ee){var Fe=Ee.title,Ve=M.select(Fe.node().parentNode);if(m&&m.selection&&m.side&&C){Ve.attr("transform",null);var Ye=r[m.side],tt=m.side==="left"||m.side==="top"?-1:1,nt=k(m.pad)?m.pad:2,ht=o.bBox(Ve.node()),vt={t:0,b:0,l:0,r:0},pt=l._fullLayout._reservedMargin;for(var Qe in pt)for(var Ke in pt[Qe]){var Mt=pt[Qe][Ke];vt[Ke]=Math.max(vt[Ke],Mt)}var Ot={left:vt.l,top:vt.t,right:x.width-vt.r,bottom:x.height-vt.b},Pt=m.maxShift||tt*(Ot[m.side]-ht[m.side]),St=0;if(Pt<0)St=Pt;else{var He=m.offsetLeft||0,We=m.offsetTop||0;ht.left-=He,ht.right-=He,ht.top-=We,ht.bottom-=We,m.selection.each(function(){var Ge=o.bBox(this);b.bBoxIntersect(ht,Ge,nt)&&(St=Math.max(St,tt*(Ge[m.side]-ht[Ye])+nt))}),St=Math.min(Pt,St),p._titleScoot=Math.abs(St)}if(St>0||Pt<0){var Be={left:[-St,0],right:[St,0],top:[0,-St],bottom:[0,St]}[m.side];Ve.attr("transform",f(Be[0],Be[1]))}}}function _e(Ee,Fe){Ee.text(Fe).on("mouseover.opacity",function(){M.select(this).transition().duration(n.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){M.select(this).transition().duration(n.HIDE_PLACEHOLDER).style("opacity",0)})}if(Se.call(Oe,ye),ve&&(C?Se.on(".opacity",null):(_e(Se,g),O=!0),Se.call(i.makeEditable,{gd:l}).on("edit",function(Ee){y!==void 0?T.call("_guiRestyle",l,v,Ee,y):T.call("_guiRelayout",l,v,Ee)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(Oe)}).on("input",function(Ee){this.text(Ee||" ").call(i.positionText,_.x,_.y)}),$)){if($&&!C){var Ae=Se.node().getBBox(),Pe=Ae.y+Ae.height+1.6*ce;ye.attr("y",Pe)}Z?ye.on(".opacity",null):(_e(ye,K),X=!0),ye.call(i.makeEditable,{gd:l}).on("edit",function(Ee){T.call("_guiRelayout",l,"title.subtitle.text",Ee)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(Oe)}).on("input",function(Ee){this.text(Ee||" ").call(i.positionText,ye.attr("x"),ye.attr("y"))})}return Se.classed("js-placeholder",O),ye&&ye.classed("js-placeholder",X),S},SUBTITLE_PADDING_EM:1.6,SUBTITLE_PADDING_MATHJAX_EM:1.6}},88444:function(ee,R,e){var M=e(25376),k=e(22548),s=e(92880).extendFlat,T=e(67824).overrideAll,b=e(66741),f=e(31780).templatedArray,o=f("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});ee.exports=T(f("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:o,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:s(b({editType:"arraydraw"}),{}),font:M({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:k.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},73712:function(ee){ee.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}},91384:function(ee,R,e){var M=e(3400),k=e(51272),s=e(88444),T=e(73712).name,b=s.buttons;function f(t,i,n){function r(a,l){return M.coerce(t,i,s,a,l)}r("visible",k(t,i,{name:"buttons",handleItemDefaults:o}).length>0)&&(r("active"),r("direction"),r("type"),r("showactive"),r("x"),r("y"),M.noneOrAll(t,i,["x","y"]),r("xanchor"),r("yanchor"),r("pad.t"),r("pad.r"),r("pad.b"),r("pad.l"),M.coerceFont(r,"font",n.font),r("bgcolor",n.paper_bgcolor),r("bordercolor"),r("borderwidth"))}function o(t,i){function n(r,a){return M.coerce(t,i,b,r,a)}n("visible",t.method==="skip"||Array.isArray(t.args))&&(n("method"),n("args"),n("args2"),n("label"),n("execute"))}ee.exports=function(t,i){k(t,i,{name:T,handleItemDefaults:f})}},14420:function(ee,R,e){var M=e(33428),k=e(7316),s=e(76308),T=e(43616),b=e(3400),f=e(72736),o=e(31780).arrayEditor,t=e(84284).LINE_SPACING,i=e(73712),n=e(37400);function r(w){return w._index}function a(w,E){return+w.attr(i.menuIndexAttrName)===E._index}function l(w,E,C,O,P,z,j,I){E.active=j,o(w.layout,i.name,E).applyUpdate("active",j),E.type==="buttons"?h(w,O,null,null,E):E.type==="dropdown"&&(P.attr(i.menuIndexAttrName,"-1"),u(w,O,P,z,E),I||h(w,O,P,z,E))}function u(w,E,C,O,P){var z=b.ensureSingle(E,"g",i.headerClassName,function(U){U.style("pointer-events","all")}),j=P._dims,I=P.active,N=P.buttons[I]||i.blankHeaderOpts,W={y:P.pad.t,yPad:0,x:P.pad.l,xPad:0,index:0},F={width:j.headerWidth,height:j.headerHeight};z.call(c,P,N,w).call(d,P,W,F),b.ensureSingle(E,"text",i.headerArrowClassName,function(U){U.attr("text-anchor","end").call(T.font,P.font).text(i.arrowSymbol[P.direction])}).attr({x:j.headerWidth-i.arrowOffsetX+P.pad.l,y:j.headerHeight/2+i.textOffsetY+P.pad.t}),z.on("click",function(){C.call(S,String(a(C,P)?-1:P._index)),h(w,E,C,O,P)}),z.on("mouseover",function(){z.call(g)}),z.on("mouseout",function(){z.call(y,P)}),T.setTranslate(E,j.lx,j.ly)}function h(w,E,C,O,P){C||(C=E).attr("pointer-events","all");var z=function(Q){return+Q.attr(i.menuIndexAttrName)==-1}(C)&&P.type!=="buttons"?[]:P.buttons,j=P.type==="dropdown"?i.dropdownButtonClassName:i.buttonClassName,I=C.selectAll("g."+j).data(b.filterVisible(z)),N=I.enter().append("g").classed(j,!0),W=I.exit();P.type==="dropdown"?(N.attr("opacity","0").transition().attr("opacity","1"),W.transition().attr("opacity","0").remove()):W.remove();var F=0,U=0,H=P._dims,ne=["up","down"].indexOf(P.direction)!==-1;P.type==="dropdown"&&(ne?U=H.headerHeight+i.gapButtonHeader:F=H.headerWidth+i.gapButtonHeader),P.type==="dropdown"&&P.direction==="up"&&(U=-i.gapButtonHeader+i.gapButton-H.openHeight),P.type==="dropdown"&&P.direction==="left"&&(F=-i.gapButtonHeader+i.gapButton-H.openWidth);var $={x:H.lx+F+P.pad.l,y:H.ly+U+P.pad.t,yPad:i.gapButton,xPad:i.gapButton,index:0},K={l:$.x+P.borderwidth,t:$.y+P.borderwidth};I.each(function(Q,Z){var X=M.select(this);X.call(c,P,Q,w).call(d,P,$),X.on("click",function(){M.event.defaultPrevented||(Q.execute&&(Q.args2&&P.active===Z?(l(w,P,0,E,C,O,-1),k.executeAPICommand(w,Q.method,Q.args2)):(l(w,P,0,E,C,O,Z),k.executeAPICommand(w,Q.method,Q.args))),w.emit("plotly_buttonclicked",{menu:P,button:Q,active:P.active}))}),X.on("mouseover",function(){X.call(g)}),X.on("mouseout",function(){X.call(y,P),I.call(v,P)})}),I.call(v,P),ne?(K.w=Math.max(H.openWidth,H.headerWidth),K.h=$.y-K.t):(K.w=$.x-K.l,K.h=Math.max(H.openHeight,H.headerHeight)),K.direction=P.direction,O&&(I.size()?function(Q,Z,X,te,ae,se){var ce,fe,pe,ge=ae.direction,me=ge==="up"||ge==="down",be=ae._dims,ke=ae.active;if(me)for(fe=0,pe=0;pe<ke;pe++)fe+=be.heights[pe]+i.gapButton;else for(ce=0,pe=0;pe<ke;pe++)ce+=be.widths[pe]+i.gapButton;te.enable(se,ce,fe),te.hbar&&te.hbar.attr("opacity","0").transition().attr("opacity","1"),te.vbar&&te.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,O,P,K):function(Q){var Z=!!Q.hbar,X=!!Q.vbar;Z&&Q.hbar.transition().attr("opacity","0").each("end",function(){Z=!1,X||Q.disable()}),X&&Q.vbar.transition().attr("opacity","0").each("end",function(){X=!1,Z||Q.disable()})}(O))}function c(w,E,C,O){w.call(x,E).call(p,E,C,O)}function x(w,E){b.ensureSingle(w,"rect",i.itemRectClassName,function(C){C.attr({rx:i.rx,ry:i.ry,"shape-rendering":"crispEdges"})}).call(s.stroke,E.bordercolor).call(s.fill,E.bgcolor).style("stroke-width",E.borderwidth+"px")}function p(w,E,C,O){var P=b.ensureSingle(w,"text",i.itemTextClassName,function(I){I.attr({"text-anchor":"start","data-notex":1})}),z=C.label,j=O._fullLayout._meta;j&&(z=b.templateString(z,j)),P.call(T.font,E.font).text(z).call(f.convertToTspans,O)}function v(w,E){var C=E.active;w.each(function(O,P){var z=M.select(this);P===C&&E.showactive&&z.select("rect."+i.itemRectClassName).call(s.fill,i.activeColor)})}function g(w){w.select("rect."+i.itemRectClassName).call(s.fill,i.hoverColor)}function y(w,E){w.select("rect."+i.itemRectClassName).call(s.fill,E.bgcolor)}function m(w,E){var C=E._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},O=T.tester.selectAll("g."+i.dropdownButtonClassName).data(b.filterVisible(E.buttons));O.enter().append("g").classed(i.dropdownButtonClassName,!0);var P=["up","down"].indexOf(E.direction)!==-1;O.each(function(F,U){var H=M.select(this);H.call(c,E,F,w);var ne=H.select("."+i.itemTextClassName),$=ne.node()&&T.bBox(ne.node()).width,K=Math.max($+i.textPadX,i.minWidth),Q=E.font.size*t,Z=f.lineCount(ne),X=Math.max(Q*Z,i.minHeight)+i.textOffsetY;X=Math.ceil(X),K=Math.ceil(K),C.widths[U]=K,C.heights[U]=X,C.height1=Math.max(C.height1,X),C.width1=Math.max(C.width1,K),P?(C.totalWidth=Math.max(C.totalWidth,K),C.openWidth=C.totalWidth,C.totalHeight+=X+i.gapButton,C.openHeight+=X+i.gapButton):(C.totalWidth+=K+i.gapButton,C.openWidth+=K+i.gapButton,C.totalHeight=Math.max(C.totalHeight,X),C.openHeight=C.totalHeight)}),P?C.totalHeight-=i.gapButton:C.totalWidth-=i.gapButton,C.headerWidth=C.width1+i.arrowPadX,C.headerHeight=C.height1,E.type==="dropdown"&&(P?(C.width1+=i.arrowPadX,C.totalHeight=C.height1):C.totalWidth=C.width1,C.totalWidth+=i.arrowPadX),O.remove();var z=C.totalWidth+E.pad.l+E.pad.r,j=C.totalHeight+E.pad.t+E.pad.b,I=w._fullLayout._size;C.lx=I.l+I.w*E.x,C.ly=I.t+I.h*(1-E.y);var N="left";b.isRightAnchor(E)&&(C.lx-=z,N="right"),b.isCenterAnchor(E)&&(C.lx-=z/2,N="center");var W="top";b.isBottomAnchor(E)&&(C.ly-=j,W="bottom"),b.isMiddleAnchor(E)&&(C.ly-=j/2,W="middle"),C.totalWidth=Math.ceil(C.totalWidth),C.totalHeight=Math.ceil(C.totalHeight),C.lx=Math.round(C.lx),C.ly=Math.round(C.ly),k.autoMargin(w,_(E),{x:E.x,y:E.y,l:z*({right:1,center:.5}[N]||0),r:z*({left:1,center:.5}[N]||0),b:j*({top:1,middle:.5}[W]||0),t:j*({bottom:1,middle:.5}[W]||0)})}function _(w){return i.autoMarginIdRoot+w._index}function d(w,E,C,O){O=O||{};var P=w.select("."+i.itemRectClassName),z=w.select("."+i.itemTextClassName),j=E.borderwidth,I=C.index,N=E._dims;T.setTranslate(w,j+C.x,j+C.y);var W=["up","down"].indexOf(E.direction)!==-1,F=O.height||(W?N.heights[I]:N.height1);P.attr({x:0,y:0,width:O.width||(W?N.width1:N.widths[I]),height:F});var U=E.font.size*t,H=(f.lineCount(z)-1)*U/2;f.positionText(z,i.textOffsetX,F/2-H+i.textOffsetY),W?C.y+=N.heights[I]+C.yPad:C.x+=N.widths[I]+C.xPad,C.index++}function S(w,E){w.attr(i.menuIndexAttrName,E||"-1").selectAll("g."+i.dropdownButtonClassName).remove()}ee.exports=function(w){var E=w._fullLayout,C=b.filterVisible(E[i.name]);function O(U){k.autoMargin(w,_(U))}var P=E._menulayer.selectAll("g."+i.containerClassName).data(C.length>0?[0]:[]);if(P.enter().append("g").classed(i.containerClassName,!0).style("cursor","pointer"),P.exit().each(function(){M.select(this).selectAll("g."+i.headerGroupClassName).each(O)}).remove(),C.length!==0){var z=P.selectAll("g."+i.headerGroupClassName).data(C,r);z.enter().append("g").classed(i.headerGroupClassName,!0);for(var j=b.ensureSingle(P,"g",i.dropdownButtonGroupClassName,function(U){U.style("pointer-events","all")}),I=0;I<C.length;I++){var N=C[I];m(w,N)}var W="updatemenus"+E._uid,F=new n(w,j,W);z.enter().size()&&(j.node().parentNode.appendChild(j.node()),j.call(S)),z.exit().each(function(U){j.call(S),O(U)}).remove(),z.each(function(U){var H=M.select(this),ne=U.type==="dropdown"?j:null;k.manageCommandObserver(w,U,U.buttons,function($){l(w,U,U.buttons[$.index],H,ne,F,$.index,!0)}),U.type==="dropdown"?(u(w,H,j,F,U),a(j,U)&&h(w,H,j,F,U)):h(w,H,null,null,U)})}}},76908:function(ee,R,e){var M=e(73712);ee.exports={moduleType:"component",name:M.name,layoutAttributes:e(88444),supplyLayoutDefaults:e(91384),draw:e(14420)}},37400:function(ee,R,e){ee.exports=b;var M=e(33428),k=e(76308),s=e(43616),T=e(3400);function b(f,o,t){this.gd=f,this.container=o,this.id=t,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}b.barWidth=2,b.barLength=20,b.barRadius=2,b.barPad=1,b.barColor="#808BA4",b.prototype.enable=function(f,o,t){var i=this.gd._fullLayout,n=i.width,r=i.height;this.position=f;var a,l,u,h,c=this.position.l,x=this.position.w,p=this.position.t,v=this.position.h,g=this.position.direction,y=g==="down",m=g==="left",_=g==="up",d=x,S=v;y||m||g==="right"||_||(this.position.direction="down",y=!0),y||_?(l=(a=c)+d,y?(u=p,S=(h=Math.min(u+S,r))-u):S=(h=p+S)-(u=Math.max(h-S,0))):(h=(u=p)+S,m?d=(l=c+d)-(a=Math.max(l-d,0)):(a=c,d=(l=Math.min(a+d,n))-a)),this._box={l:a,t:u,w:d,h:S};var w=x>d,E=b.barLength+2*b.barPad,C=b.barWidth+2*b.barPad,O=c,P=p+v;P+C>r&&(P=r-C);var z=this.container.selectAll("rect.scrollbar-horizontal").data(w?[0]:[]);z.exit().on(".drag",null).remove(),z.enter().append("rect").classed("scrollbar-horizontal",!0).call(k.fill,b.barColor),w?(this.hbar=z.attr({rx:b.barRadius,ry:b.barRadius,x:O,y:P,width:E,height:C}),this._hbarXMin=O+E/2,this._hbarTranslateMax=d-E):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var j=v>S,I=b.barWidth+2*b.barPad,N=b.barLength+2*b.barPad,W=c+x,F=p;W+I>n&&(W=n-I);var U=this.container.selectAll("rect.scrollbar-vertical").data(j?[0]:[]);U.exit().on(".drag",null).remove(),U.enter().append("rect").classed("scrollbar-vertical",!0).call(k.fill,b.barColor),j?(this.vbar=U.attr({rx:b.barRadius,ry:b.barRadius,x:W,y:F,width:I,height:N}),this._vbarYMin=F+N/2,this._vbarTranslateMax=S-N):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var H=this.id,ne=a-.5,$=j?l+I+.5:l+.5,K=u-.5,Q=w?h+C+.5:h+.5,Z=i._topdefs.selectAll("#"+H).data(w||j?[0]:[]);if(Z.exit().remove(),Z.enter().append("clipPath").attr("id",H).append("rect"),w||j?(this._clipRect=Z.select("rect").attr({x:Math.floor(ne),y:Math.floor(K),width:Math.ceil($)-Math.floor(ne),height:Math.ceil(Q)-Math.floor(K)}),this.container.call(s.setClipUrl,H,this.gd),this.bg.attr({x:c,y:p,width:x,height:v})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(s.setClipUrl,null),delete this._clipRect),w||j){var X=M.behavior.drag().on("dragstart",function(){M.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(X);var te=M.behavior.drag().on("dragstart",function(){M.event.sourceEvent.preventDefault(),M.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));w&&this.hbar.on(".drag",null).call(te),j&&this.vbar.on(".drag",null).call(te)}this.setTranslate(o,t)},b.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(s.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},b.prototype._onBoxDrag=function(){var f=this.translateX,o=this.translateY;this.hbar&&(f-=M.event.dx),this.vbar&&(o-=M.event.dy),this.setTranslate(f,o)},b.prototype._onBoxWheel=function(){var f=this.translateX,o=this.translateY;this.hbar&&(f+=M.event.deltaY),this.vbar&&(o+=M.event.deltaY),this.setTranslate(f,o)},b.prototype._onBarDrag=function(){var f=this.translateX,o=this.translateY;if(this.hbar){var t=f+this._hbarXMin,i=t+this._hbarTranslateMax;f=(T.constrain(M.event.x,t,i)-t)/(i-t)*(this.position.w-this._box.w)}if(this.vbar){var n=o+this._vbarYMin,r=n+this._vbarTranslateMax;o=(T.constrain(M.event.y,n,r)-n)/(r-n)*(this.position.h-this._box.h)}this.setTranslate(f,o)},b.prototype.setTranslate=function(f,o){var t=this.position.w-this._box.w,i=this.position.h-this._box.h;if(f=T.constrain(f||0,0,t),o=T.constrain(o||0,0,i),this.translateX=f,this.translateY=o,this.container.call(s.setTranslate,this._box.l-this.position.l-f,this._box.t-this.position.t-o),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+f-.5),y:Math.floor(this.position.t+o-.5)}),this.hbar){var n=f/t;this.hbar.call(s.setTranslate,f+n*this._hbarTranslateMax,o)}if(this.vbar){var r=o/i;this.vbar.call(s.setTranslate,f,o+r*this._vbarTranslateMax)}}},84284:function(ee){ee.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},36208:function(ee){ee.exports={axisRefDescription:function(R,e,M){return["If set to a",R,"axis id (e.g. *"+R+"* or","*"+R+"2*), the `"+R+"` position refers to a",R,"coordinate. If set to *paper*, the `"+R+"`","position refers to the distance from the",e,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",e,"("+M+"). If set to a",R,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",e,"of the domain of that axis: e.g.,","*"+R+"2 domain* refers to the domain of the second",R," axis and a",R,"position of 0.5 refers to the","point between the",e,"and the",M,"of the domain of the","second",R,"axis."].join(" ")}}},48164:function(ee){ee.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:""},DECREASING:{COLOR:"#FF4136",SYMBOL:""}}},26880:function(ee){ee.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},69104:function(ee){ee.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},99168:function(ee){ee.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87792:function(ee){ee.exports={circle:"","circle-open":"",square:"","square-open":"",diamond:"","diamond-open":"",cross:"+",x:""}},13448:function(ee){ee.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},39032:function(ee){ee.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,ONEMILLI:1,ONEMICROSEC:.001,EPOCHJD:24405875e-1,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:""}},2264:function(ee,R){R.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]],R.STYLE=R.CSS_DECLARATIONS.map(function(e){return e.join(": ")+"; "}).join("")},9616:function(ee,R){R.xmlns="http://www.w3.org/2000/xmlns/",R.svg="http://www.w3.org/2000/svg",R.xlink="http://www.w3.org/1999/xlink",R.svgAttrs={xmlns:R.svg,"xmlns:xlink":R.xlink}},64884:function(ee,R,e){R.version=e(25788).version,e(88324),e(79288);for(var M=e(24040),k=R.register=M.register,s=e(22448),T=Object.keys(s),b=0;b<T.length;b++){var f=T[b];f.charAt(0)!=="_"&&(R[f]=s[f]),k({moduleType:"apiMethod",name:f,fn:s[f]})}k(e(65875)),k([e(79180),e(56864),e(22676),e(41592),e(7402),e(76908),e(97544),e(49692),e(41152),e(12704),e(64968),e(8932),e(55080),e(2780),e(93024),e(45460)]),k([e(6580),e(11680)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(k(window.PlotlyLocales),delete window.PlotlyLocales),R.Icons=e(9224);var o=e(93024),t=e(7316);R.Plots={resize:t.resize,graphJson:t.graphJson,sendDataToCloud:t.sendDataToCloud},R.Fx={hover:o.hover,unhover:o.unhover,loneHover:o.loneHover,loneUnhover:o.loneUnhover},R.Snapshot=e(78904),R.PlotSchema=e(73060)},9224:function(ee){ee.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},98308:function(ee,R){R.isLeftAnchor=function(e){return e.xanchor==="left"||e.xanchor==="auto"&&e.x<=.3333333333333333},R.isCenterAnchor=function(e){return e.xanchor==="center"||e.xanchor==="auto"&&e.x>.3333333333333333&&e.x<.6666666666666666},R.isRightAnchor=function(e){return e.xanchor==="right"||e.xanchor==="auto"&&e.x>=.6666666666666666},R.isTopAnchor=function(e){return e.yanchor==="top"||e.yanchor==="auto"&&e.y>=.6666666666666666},R.isMiddleAnchor=function(e){return e.yanchor==="middle"||e.yanchor==="auto"&&e.y>.3333333333333333&&e.y<.6666666666666666},R.isBottomAnchor=function(e){return e.yanchor==="bottom"||e.yanchor==="auto"&&e.y<=.3333333333333333}},11864:function(ee,R,e){var M=e(20435),k=M.mod,s=M.modHalf,T=Math.PI,b=2*T;function f(n){return Math.abs(n[1]-n[0])>b-1e-14}function o(n,r){return s(r-n,b)}function t(n,r){if(f(r))return!0;var a,l;r[0]<r[1]?(a=r[0],l=r[1]):(a=r[1],l=r[0]),(a=k(a,b))>(l=k(l,b))&&(l+=b);var u=k(n,b),h=u+b;return u>=a&&u<=l||h>=a&&h<=l}function i(n,r,a,l,u,h,c){u=u||0,h=h||0;var x,p,v,g,y,m=f([a,l]);function _(E,C){return[E*Math.cos(C)+u,h-E*Math.sin(C)]}m?(x=0,p=T,v=b):a<l?(x=a,v=l):(x=l,v=a),n<r?(g=n,y=r):(g=r,y=n);var d,S=Math.abs(v-x)<=T?0:1;function w(E,C,O){return"A"+[E,E]+" "+[0,S,O]+" "+_(E,C)}return m?d=g===null?"M"+_(y,x)+w(y,p,0)+w(y,v,0)+"Z":"M"+_(g,x)+w(g,p,0)+w(g,v,0)+"ZM"+_(y,x)+w(y,p,1)+w(y,v,1)+"Z":g===null?(d="M"+_(y,x)+w(y,v,0),c&&(d+="L0,0Z")):d="M"+_(g,x)+"L"+_(y,x)+w(y,v,0)+"L"+_(g,v)+w(g,x,1)+"Z",d}ee.exports={deg2rad:function(n){return n/180*T},rad2deg:function(n){return n/T*180},angleDelta:o,angleDist:function(n,r){return Math.abs(o(n,r))},isFullCircle:f,isAngleInsideSector:t,isPtInsideSector:function(n,r,a,l){return!!t(r,l)&&(a[0]<a[1]?(u=a[0],h=a[1]):(u=a[1],h=a[0]),n>=u&&n<=h);var u,h},pathArc:function(n,r,a,l,u){return i(null,n,r,a,l,u,0)},pathSector:function(n,r,a,l,u){return i(null,n,r,a,l,u,1)},pathAnnulus:function(n,r,a,l,u,h){return i(n,r,a,l,u,h,1)}}},38116:function(ee,R,e){var M=e(83160).decode,k=e(63620),s=Array.isArray,T=ArrayBuffer,b=DataView;function f(r){return T.isView(r)&&!(r instanceof b)}function o(r){return s(r)||f(r)}R.isTypedArray=f,R.isArrayOrTypedArray=o,R.isArray1D=function(r){return!o(r[0])},R.ensureArray=function(r,a){return s(r)||(r=[]),r.length=a,r};var t={u1c:typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray,i1:typeof Int8Array>"u"?void 0:Int8Array,u1:typeof Uint8Array>"u"?void 0:Uint8Array,i2:typeof Int16Array>"u"?void 0:Int16Array,u2:typeof Uint16Array>"u"?void 0:Uint16Array,i4:typeof Int32Array>"u"?void 0:Int32Array,u4:typeof Uint32Array>"u"?void 0:Uint32Array,f4:typeof Float32Array>"u"?void 0:Float32Array,f8:typeof Float64Array>"u"?void 0:Float64Array};function i(r){return r.constructor===ArrayBuffer}function n(r,a,l){if(o(r)){if(o(r[0])){for(var u=l,h=0;h<r.length;h++)u=a(u,r[h].length);return u}return r.length}return 0}t.uint8c=t.u1c,t.uint8=t.u1,t.int8=t.i1,t.uint16=t.u2,t.int16=t.i2,t.uint32=t.u4,t.int32=t.i4,t.float32=t.f4,t.float64=t.f8,R.isArrayBuffer=i,R.decodeTypedArraySpec=function(r){var a=[],l=function(E){return{bdata:E.bdata,dtype:E.dtype,shape:E.shape}}(r),u=l.dtype,h=t[u];if(!h)throw new Error('Error in dtype: "'+u+'"');var c=h.BYTES_PER_ELEMENT,x=l.bdata;i(x)||(x=M(x));var p=l.shape===void 0?[x.byteLength/c]:(""+l.shape).split(",");p.reverse();var v,g,y=p.length,m=+p[0],_=c*m,d=0;if(y===1)a=new h(x);else if(y===2)for(v=+p[1],g=0;g<v;g++)a[g]=new h(x,d,m),d+=_;else{if(y!==3)throw new Error("ndim: "+y+'is not supported with the shape:"'+l.shape+'"');v=+p[1];for(var S=+p[2],w=0;w<S;w++)for(a[w]=[],g=0;g<v;g++)a[w][g]=new h(x,d,m),d+=_}return a.bdata=l.bdata,a.dtype=l.dtype,a.shape=p.reverse().join(","),r._inputArray=a,a},R.isTypedArraySpec=function(r){return k(r)&&r.hasOwnProperty("dtype")&&typeof r.dtype=="string"&&r.hasOwnProperty("bdata")&&(typeof r.bdata=="string"||i(r.bdata))&&(r.shape===void 0||r.hasOwnProperty("shape")&&(typeof r.shape=="string"||typeof r.shape=="number"))},R.concat=function(){var r,a,l,u,h,c,x,p,v=[],g=!0,y=0;for(l=0;l<arguments.length;l++)(c=(u=arguments[l]).length)&&(a?v.push(u):(a=u,h=c),s(u)?r=!1:(g=!1,y?r!==u.constructor&&(r=!1):r=u.constructor),y+=c);if(!y)return[];if(!v.length)return a;if(g)return a.concat.apply(a,v);if(r){for((x=new r(y)).set(a),l=0;l<v.length;l++)u=v[l],x.set(u,h),h+=u.length;return x}for(x=new Array(y),p=0;p<a.length;p++)x[p]=a[p];for(l=0;l<v.length;l++){for(u=v[l],p=0;p<u.length;p++)x[h+p]=u[p];h+=p}return x},R.maxRowLength=function(r){return n(r,Math.max,0)},R.minRowLength=function(r){return n(r,Math.min,1/0)}},54037:function(ee,R,e){var M=e(38248),k=e(39032).BADNUM,s=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;ee.exports=function(T){return typeof T=="string"&&(T=T.replace(s,"")),M(T)?Number(T):k}},73696:function(ee){ee.exports=function(R){var e=R._fullLayout;e._glcanvas&&e._glcanvas.size()&&e._glcanvas.each(function(M){M.regl&&M.regl.clear({color:!0,depth:!0})})}},75352:function(ee){ee.exports=function(R){R._responsiveChartHandler&&(window.removeEventListener("resize",R._responsiveChartHandler),delete R._responsiveChartHandler)}},63064:function(ee,R,e){var M=e(38248),k=e(49760),s=e(92880).extendFlat,T=e(45464),b=e(88304),f=e(76308),o=e(13448).DESELECTDIM,t=e(22296),i=e(53756).counter,n=e(20435).modHalf,r=e(38116).isArrayOrTypedArray,a=e(38116).isTypedArraySpec,l=e(38116).decodeTypedArraySpec;function u(h,c){var x=R.valObjectMeta[c.valType];if(c.arrayOk&&r(h))return!0;if(x.validateFunction)return x.validateFunction(h,c);var p={},v=p,g={set:function(y){v=y}};return x.coerceFunction(h,g,p,c),v!==p}R.valObjectMeta={data_array:{coerceFunction:function(h,c,x){c.set(r(h)?h:a(h)?l(h):x)}},enumerated:{coerceFunction:function(h,c,x,p){p.coerceNumber&&(h=+h),p.values.indexOf(h)===-1?c.set(x):c.set(h)},validateFunction:function(h,c){c.coerceNumber&&(h=+h);for(var x=c.values,p=0;p<x.length;p++){var v=String(x[p]);if(v.charAt(0)==="/"&&v.charAt(v.length-1)==="/"){if(new RegExp(v.substr(1,v.length-2)).test(h))return!0}else if(h===x[p])return!0}return!1}},boolean:{coerceFunction:function(h,c,x){h===!0||h===!1?c.set(h):c.set(x)}},number:{coerceFunction:function(h,c,x,p){a(h)&&(h=l(h)),!M(h)||p.min!==void 0&&h<p.min||p.max!==void 0&&h>p.max?c.set(x):c.set(+h)}},integer:{coerceFunction:function(h,c,x,p){(p.extras||[]).indexOf(h)===-1?(a(h)&&(h=l(h)),h%1||!M(h)||p.min!==void 0&&h<p.min||p.max!==void 0&&h>p.max?c.set(x):c.set(+h)):c.set(h)}},string:{coerceFunction:function(h,c,x,p){if(typeof h!="string"){var v=typeof h=="number";p.strict!==!0&&v?c.set(String(h)):c.set(x)}else p.noBlank&&!h?c.set(x):c.set(h)}},color:{coerceFunction:function(h,c,x){a(h)&&(h=l(h)),k(h).isValid()?c.set(h):c.set(x)}},colorlist:{coerceFunction:function(h,c,x){Array.isArray(h)&&h.length&&h.every(function(p){return k(p).isValid()})?c.set(h):c.set(x)}},colorscale:{coerceFunction:function(h,c,x){c.set(b.get(h,x))}},angle:{coerceFunction:function(h,c,x){a(h)&&(h=l(h)),h==="auto"?c.set("auto"):M(h)?c.set(n(+h,360)):c.set(x)}},subplotid:{coerceFunction:function(h,c,x,p){var v=p.regex||i(x);typeof h=="string"&&v.test(h)?c.set(h):c.set(x)},validateFunction:function(h,c){var x=c.dflt;return h===x||typeof h=="string"&&!!i(x).test(h)}},flaglist:{coerceFunction:function(h,c,x,p){if((p.extras||[]).indexOf(h)===-1)if(typeof h=="string"){for(var v=h.split("+"),g=0;g<v.length;){var y=v[g];p.flags.indexOf(y)===-1||v.indexOf(y)<g?v.splice(g,1):g++}v.length?c.set(v.join("+")):c.set(x)}else c.set(x);else c.set(h)}},any:{coerceFunction:function(h,c,x){h===void 0?c.set(x):c.set(a(h)?l(h):h)}},info_array:{coerceFunction:function(h,c,x,p){function v(I,N,W){var F,U={set:function(H){F=H}};return W===void 0&&(W=N.dflt),R.valObjectMeta[N.valType].coerceFunction(I,U,W,N),F}if(a(h)&&(h=l(h)),r(h)){var g,y,m,_,d,S,w=p.dimensions===2||p.dimensions==="1-2"&&Array.isArray(h)&&r(h[0]),E=p.items,C=[],O=Array.isArray(E),P=O&&w&&r(E[0]),z=w&&O&&!P,j=O&&!z?E.length:h.length;if(x=Array.isArray(x)?x:[],w)for(g=0;g<j;g++)for(C[g]=[],m=r(h[g])?h[g]:[],d=z?E.length:O?E[g].length:m.length,y=0;y<d;y++)_=z?E[y]:O?E[g][y]:E,(S=v(m[y],_,(x[g]||[])[y]))!==void 0&&(C[g][y]=S);else for(g=0;g<j;g++)(S=v(h[g],O?E[g]:E,x[g]))!==void 0&&(C[g]=S);c.set(C)}else c.set(x)},validateFunction:function(h,c){if(!r(h))return!1;var x=c.items,p=Array.isArray(x),v=c.dimensions===2;if(!c.freeLength&&h.length!==x.length)return!1;for(var g=0;g<h.length;g++)if(v){if(!r(h[g])||!c.freeLength&&h[g].length!==x[g].length)return!1;for(var y=0;y<h[g].length;y++)if(!u(h[g][y],p?x[g][y]:x))return!1}else if(!u(h[g],p?x[g]:x))return!1;return!0}}},R.coerce=function(h,c,x,p,v){var g=t(x,p).get(),y=t(h,p),m=t(c,p),_=y.get(),d=c._template;if(_===void 0&&d&&(_=t(d,p).get(),d=0),v===void 0&&(v=g.dflt),g.arrayOk){if(r(_))return m.set(_),_;if(a(_))return _=l(_),m.set(_),_}var S=R.valObjectMeta[g.valType].coerceFunction;S(_,m,v,g);var w=m.get();return d&&w===v&&!u(_,g)&&(S(_=t(d,p).get(),m,v,g),w=m.get()),w},R.coerce2=function(h,c,x,p,v){var g=t(h,p),y=R.coerce(h,c,x,p,v);return g.get()!=null&&y},R.coerceFont=function(h,c,x,p){p||(p={}),x=s({},x);var v={family:h(c+".family",(x=s(x,p.overrideDflt||{})).family),size:h(c+".size",x.size),color:h(c+".color",x.color),weight:h(c+".weight",x.weight),style:h(c+".style",x.style)};if(p.noFontVariant||(v.variant=h(c+".variant",x.variant)),p.noFontLineposition||(v.lineposition=h(c+".lineposition",x.lineposition)),p.noFontTextcase||(v.textcase=h(c+".textcase",x.textcase)),!p.noFontShadow){var g=x.shadow;g==="none"&&p.autoShadowDflt&&(g="auto"),v.shadow=h(c+".shadow",g)}return v},R.coercePattern=function(h,c,x,p){if(h(c+".shape")){h(c+".solidity"),h(c+".size");var v=h(c+".fillmode")==="overlay";if(!p){var g=h(c+".bgcolor",v?x:void 0);h(c+".fgcolor",v?f.contrast(g):x)}h(c+".fgopacity",v?.5:1)}},R.coerceHoverinfo=function(h,c,x){var p,v=c._module.attributes,g=v.hoverinfo?v:T,y=g.hoverinfo;if(x._dataLength===1){var m=y.dflt==="all"?y.flags.slice():y.dflt.split("+");m.splice(m.indexOf("name"),1),p=m.join("+")}return R.coerce(h,c,g,"hoverinfo",p)},R.coerceSelectionMarkerOpacity=function(h,c){if(h.marker){var x,p,v=h.marker.opacity;v!==void 0&&(r(v)||h.selected||h.unselected||(x=v,p=o*v),c("selected.marker.opacity",x),c("unselected.marker.opacity",p))}},R.validate=u},67555:function(ee,R,e){var M,k,s=e(94336).Yn,T=e(38248),b=e(24248),f=e(20435).mod,o=e(39032),t=o.BADNUM,i=o.ONEDAY,n=o.ONEHOUR,r=o.ONEMIN,a=o.ONESEC,l=o.EPOCHJD,u=e(24040),h=e(94336).E9,c=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,x=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,p=new Date().getFullYear()-70;function v(z){return z&&u.componentsRegistry.calendars&&typeof z=="string"&&z!=="gregorian"}function g(z,j){return String(z+Math.pow(10,j)).substr(1)}R.dateTick0=function(z,j){var I=function(W,F){return v(W)?F?u.getComponentMethod("calendars","CANONICAL_SUNDAY")[W]:u.getComponentMethod("calendars","CANONICAL_TICK")[W]:F?"2000-01-02":"2000-01-01"}(z,!!j);if(j<2)return I;var N=R.dateTime2ms(I,z);return N+=i*(j-1),R.ms2DateTime(N,0,z)},R.dfltRange=function(z){return v(z)?u.getComponentMethod("calendars","DFLTRANGE")[z]:["2000-01-01","2001-01-01"]},R.isJSDate=function(z){return typeof z=="object"&&z!==null&&typeof z.getTime=="function"},R.dateTime2ms=function(z,j){if(R.isJSDate(z)){var I=z.getTimezoneOffset()*r,N=(z.getUTCMinutes()-z.getMinutes())*r+(z.getUTCSeconds()-z.getSeconds())*a+(z.getUTCMilliseconds()-z.getMilliseconds());if(N){var W=3*r;I=I-W/2+f(N-I+W/2,W)}return(z=Number(z)-I)>=M&&z<=k?z:t}if(typeof z!="string"&&typeof z!="number")return t;z=String(z);var F=v(j),U=z.charAt(0);!F||U!=="G"&&U!=="g"||(z=z.substr(1),j="");var H=F&&j.substr(0,7)==="chinese",ne=z.match(H?x:c);if(!ne)return t;var $=ne[1],K=ne[3]||"1",Q=Number(ne[5]||1),Z=Number(ne[7]||0),X=Number(ne[9]||0),te=Number(ne[11]||0);if(F){if($.length===2)return t;var ae;$=Number($);try{var se=u.getComponentMethod("calendars","getCal")(j);if(H){var ce=K.charAt(K.length-1)==="i";K=parseInt(K,10),ae=se.newDate($,se.toMonthIndex($,K,ce),Q)}else ae=se.newDate($,Number(K),Q)}catch{return t}return ae?(ae.toJD()-l)*i+Z*n+X*r+te*a:t}$=$.length===2?(Number($)+2e3-p)%100+p:Number($),K-=1;var fe=new Date(Date.UTC(2e3,K,Q,Z,X));return fe.setUTCFullYear($),fe.getUTCMonth()!==K||fe.getUTCDate()!==Q?t:fe.getTime()+te*a},M=R.MIN_MS=R.dateTime2ms("-9999"),k=R.MAX_MS=R.dateTime2ms("9999-12-31 23:59:59.9999"),R.isDateTime=function(z,j){return R.dateTime2ms(z,j)!==t};var y=90*i,m=3*n,_=5*r;function d(z,j,I,N,W){if((j||I||N||W)&&(z+=" "+g(j,2)+":"+g(I,2),(N||W)&&(z+=":"+g(N,2),W))){for(var F=4;W%10==0;)F-=1,W/=10;z+="."+g(W,F)}return z}R.ms2DateTime=function(z,j,I){if(typeof z!="number"||!(z>=M&&z<=k))return t;j||(j=0);var N,W,F,U,H,ne,$=Math.floor(10*f(z+.05,1)),K=Math.round(z-$/10);if(v(I)){var Q=Math.floor(K/i)+l,Z=Math.floor(f(z,i));try{N=u.getComponentMethod("calendars","getCal")(I).fromJD(Q).formatDate("yyyy-mm-dd")}catch{N=h("G%Y-%m-%d")(new Date(K))}if(N.charAt(0)==="-")for(;N.length<11;)N="-0"+N.substr(1);else for(;N.length<10;)N="0"+N;W=j<y?Math.floor(Z/n):0,F=j<y?Math.floor(Z%n/r):0,U=j<m?Math.floor(Z%r/a):0,H=j<_?Z%a*10+$:0}else ne=new Date(K),N=h("%Y-%m-%d")(ne),W=j<y?ne.getUTCHours():0,F=j<y?ne.getUTCMinutes():0,U=j<m?ne.getUTCSeconds():0,H=j<_?10*ne.getUTCMilliseconds()+$:0;return d(N,W,F,U,H)},R.ms2DateTimeLocal=function(z){if(!(z>=M+i&&z<=k-i))return t;var j=Math.floor(10*f(z+.05,1)),I=new Date(Math.round(z-j/10));return d(s("%Y-%m-%d")(I),I.getHours(),I.getMinutes(),I.getSeconds(),10*I.getUTCMilliseconds()+j)},R.cleanDate=function(z,j,I){if(z===t)return j;if(R.isJSDate(z)||typeof z=="number"&&isFinite(z)){if(v(I))return b.error("JS Dates and milliseconds are incompatible with world calendars",z),j;if(!(z=R.ms2DateTimeLocal(+z))&&j!==void 0)return j}else if(!R.isDateTime(z,I))return b.error("unrecognized date",z),j;return z};var S=/%\d?f/g,w=/%h/g,E={1:"1",2:"1",3:"2",4:"2"};function C(z,j,I,N){z=z.replace(S,function(F){var U=Math.min(+F.charAt(1)||6,6);return(j/1e3%1+2).toFixed(U).substr(2).replace(/0+$/,"")||"0"});var W=new Date(Math.floor(j+.05));if(z=z.replace(w,function(){return E[I("%q")(W)]}),v(N))try{z=u.getComponentMethod("calendars","worldCalFmt")(z,j,N)}catch{return"Invalid"}return I(z)(W)}var O=[59,59.9,59.99,59.999,59.9999];R.formatDate=function(z,j,I,N,W,F){if(W=v(W)&&W,!j)if(I==="y")j=F.year;else if(I==="m")j=F.month;else{if(I!=="d")return function(U,H){var ne=f(U+.05,i),$=g(Math.floor(ne/n),2)+":"+g(f(Math.floor(ne/r),60),2);if(H!=="M"){T(H)||(H=0);var K=(100+Math.min(f(U/a,60),O[H])).toFixed(H).substr(1);H>0&&(K=K.replace(/0+$/,"").replace(/[\.]$/,"")),$+=":"+K}return $}(z,I)+`
`+C(F.dayMonthYear,z,N,W);j=F.dayMonth+`
`+F.year}return C(j,z,N,W)};var P=3*i;R.incrementMonth=function(z,j,I){I=v(I)&&I;var N=f(z,i);if(z=Math.round(z-N),I)try{var W=Math.round(z/i)+l,F=u.getComponentMethod("calendars","getCal")(I),U=F.fromJD(W);return j%12?F.add(U,j,"m"):F.add(U,j/12,"y"),(U.toJD()-l)*i+N}catch{b.error("invalid ms "+z+" in calendar "+I)}var H=new Date(z+P);return H.setUTCMonth(H.getUTCMonth()+j)+N-P},R.findExactDates=function(z,j){for(var I,N,W=0,F=0,U=0,H=0,ne=v(j)&&u.getComponentMethod("calendars","getCal")(j),$=0;$<z.length;$++)if(N=z[$],T(N)){if(!(N%i))if(ne)try{(I=ne.fromJD(N/i+l)).day()===1?I.month()===1?W++:F++:U++}catch{}else(I=new Date(N)).getUTCDate()===1?I.getUTCMonth()===0?W++:F++:U++}else H++;U+=F+=W;var K=z.length-H;return{exactYears:W/K,exactMonths:F/K,exactDays:U/K}}},52200:function(ee,R,e){var M=e(33428),k=e(24248),s=e(52248),T=e(36524);function b(n){var r=n&&n.parentNode;r&&r.removeChild(n)}function f(n,r,a){var l="plotly.js-style-"+n,u=document.getElementById(l);u||((u=document.createElement("style")).setAttribute("id",l),u.appendChild(document.createTextNode("")),document.head.appendChild(u));var h=u.sheet;h.insertRule?h.insertRule(r+"{"+a+"}",0):h.addRule?h.addRule(r,a,0):k.warn("addStyleRule failed")}function o(n){var r=window.getComputedStyle(n,null),a=r.getPropertyValue("-webkit-transform")||r.getPropertyValue("-moz-transform")||r.getPropertyValue("-ms-transform")||r.getPropertyValue("-o-transform")||r.getPropertyValue("transform");return a==="none"?null:a.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(l){return+l})}function t(n){for(var r=[];i(n);)r.push(n),n=n.parentNode,typeof ShadowRoot=="function"&&n instanceof ShadowRoot&&(n=n.host);return r}function i(n){return n&&(n instanceof Element||n instanceof HTMLElement)}ee.exports={getGraphDiv:function(n){var r;if(typeof n=="string"){if((r=document.getElementById(n))===null)throw new Error("No DOM element with id '"+n+"' exists on the page.");return r}if(n==null)throw new Error("DOM element provided is null or undefined");return n},isPlotDiv:function(n){var r=M.select(n);return r.node()instanceof HTMLElement&&r.size()&&r.classed("js-plotly-plot")},removeElement:b,addStyleRule:function(n,r){f("global",n,r)},addRelatedStyleRule:f,deleteRelatedStyleRule:function(n){var r="plotly.js-style-"+n,a=document.getElementById(r);a&&b(a)},getFullTransformMatrix:function(n){var r=t(n),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return r.forEach(function(l){var u=o(l);if(u){var h=s.convertCssMatrix(u);a=T.multiply(a,a,h)}}),a},getElementTransformMatrix:o,getElementAndAncestors:t,equalDomRects:function(n,r){return n&&r&&n.top===r.top&&n.left===r.left&&n.right===r.right&&n.bottom===r.bottom}}},95924:function(ee,R,e){var M=e(61252).EventEmitter,k={init:function(s){if(s._ev instanceof M)return s;var T=new M,b=new M;return s._ev=T,s._internalEv=b,s.on=T.on.bind(T),s.once=T.once.bind(T),s.removeListener=T.removeListener.bind(T),s.removeAllListeners=T.removeAllListeners.bind(T),s._internalOn=b.on.bind(b),s._internalOnce=b.once.bind(b),s._removeInternalListener=b.removeListener.bind(b),s._removeAllInternalListeners=b.removeAllListeners.bind(b),s.emit=function(f,o){typeof jQuery<"u"&&jQuery(s).trigger(f,o),T.emit(f,o),b.emit(f,o)},s},triggerHandler:function(s,T,b){var f,o;typeof jQuery<"u"&&(f=jQuery(s).triggerHandler(T,b));var t=s._ev;if(!t)return f;var i,n=t._events[T];if(!n)return f;function r(a){return a.listener?(t.removeListener(T,a.listener),a.fired?void 0:(a.fired=!0,a.listener.apply(t,[b]))):a.apply(t,[b])}for(n=Array.isArray(n)?n:[n],i=0;i<n.length-1;i++)r(n[i]);return o=r(n[i]),f!==void 0?f:o},purge:function(s){return delete s._ev,delete s.on,delete s.once,delete s.removeListener,delete s.removeAllListeners,delete s.emit,delete s._ev,delete s._internalEv,delete s._internalOn,delete s._internalOnce,delete s._removeInternalListener,delete s._removeAllInternalListeners,s}};ee.exports=k},92880:function(ee,R,e){var M=e(63620),k=Array.isArray;function s(T,b,f,o){var t,i,n,r,a,l,u,h=T[0],c=T.length;if(c===2&&k(h)&&k(T[1])&&h.length===0){if(u=function(p,v){var g,y;for(g=0;g<p.length;g++){if((y=p[g])!==null&&typeof y=="object")return!1;y!==void 0&&(v[g]=y)}return!0}(T[1],h),u)return h;h.splice(0,h.length)}for(var x=1;x<c;x++)for(i in t=T[x])n=h[i],r=t[i],o&&k(r)?h[i]=r:b&&r&&(M(r)||(a=k(r)))?(a?(a=!1,l=n&&k(n)?n:[]):l=n&&M(n)?n:{},h[i]=s([l,r],b,f,o)):(r!==void 0||f)&&(h[i]=r);return h}R.extendFlat=function(){return s(arguments,!1,!1,!1)},R.extendDeep=function(){return s(arguments,!0,!1,!1)},R.extendDeepAll=function(){return s(arguments,!0,!0,!1)},R.extendDeepNoArrays=function(){return s(arguments,!0,!1,!0)}},68944:function(ee){ee.exports=function(R){for(var e={},M=[],k=0,s=0;s<R.length;s++){var T=R[s];e[T]!==1&&(e[T]=1,M[k++]=T)}return M}},43880:function(ee){function R(M){return M.visible===!0}function e(M){var k=M[0].trace;return k.visible===!0&&k._length!==0}ee.exports=function(M){for(var k,s=(k=M,Array.isArray(k)&&Array.isArray(k[0])&&k[0][0]&&k[0][0].trace?e:R),T=[],b=0;b<M.length;b++){var f=M[b];s(f)&&T.push(f)}return T}},27144:function(ee,R,e){var M=e(33428),k=e(36116),s=e(40440),T=e(77844),b=e(42428),f=e(35536),o=e(24248),t=e(63620),i=e(22296),n=e(92065),r=Object.keys(k),a={"ISO-3":f,"USA-states":f,"country names":function(u){for(var h=0;h<r.length;h++){var c=r[h];if(new RegExp(k[c]).test(u.trim().toLowerCase()))return c}return o.log("Unrecognized country name: "+u+"."),!1}};function l(u){var h=u.geojson,c=window.PlotlyGeoAssets||{},x=typeof h=="string"?c[h]:h;return t(x)?x:(o.error("Oops ... something went wrong when fetching "+h),!1)}ee.exports={locationToFeature:function(u,h,c){if(!h||typeof h!="string")return!1;var x,p,v,g=a[u](h);if(g){if(u==="USA-states")for(x=[],v=0;v<c.length;v++)(p=c[v]).properties&&p.properties.gu&&p.properties.gu==="USA"&&x.push(p);else x=c;for(v=0;v<x.length;v++)if((p=x[v]).id===g)return p;o.log(["Location with id",g,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(u){var h,c,x,p,v=u.geometry,g=v.coordinates,y=u.id,m=[];function _(d){for(var S=0;S<d.length-1;S++)if(d[S][0]>0&&d[S+1][0]<0)return S;return null}switch(h=y==="RUS"||y==="FJI"?function(d){var S;if(_(d)===null)S=d;else for(S=new Array(d.length),p=0;p<d.length;p++)S[p]=[d[p][0]<0?d[p][0]+360:d[p][0],d[p][1]];m.push(n.tester(S))}:y==="ATA"?function(d){var S=_(d);if(S===null)return m.push(n.tester(d));var w=new Array(d.length+1),E=0;for(p=0;p<d.length;p++)p>S?w[E++]=[d[p][0]+360,d[p][1]]:p===S?(w[E++]=d[p],w[E++]=[d[p][0],-90]):w[E++]=d[p];var C=n.tester(w);C.pts.pop(),m.push(C)}:function(d){m.push(n.tester(d))},v.type){case"MultiPolygon":for(c=0;c<g.length;c++)for(x=0;x<g[c].length;x++)h(g[c][x]);break;case"Polygon":for(c=0;c<g.length;c++)h(g[c])}return m},getTraceGeojson:l,extractTraceFeature:function(u){var h=u[0].trace,c=l(h);if(!c)return!1;var x,p={},v=[];for(x=0;x<h._length;x++){var g=u[x];(g.loc||g.loc===0)&&(p[g.loc]=g)}function y(d){var S=i(d,h.featureidkey||"id").get(),w=p[S];if(w){var E=d.geometry;if(E.type==="Polygon"||E.type==="MultiPolygon"){var C={type:"Feature",id:S,geometry:E,properties:{}};C.properties.ct=function(O){var P,z=O.geometry;if(z.type==="MultiPolygon")for(var j=z.coordinates,I=0,N=0;N<j.length;N++){var W={type:"Polygon",coordinates:j[N]},F=s.default(W);F>I&&(I=F,P=W)}else P=z;return T.default(P).geometry.coordinates}(C),w.fIn=d,w.fOut=C,v.push(C)}else o.log(["Location",w.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete p[S]}switch(c.type){case"FeatureCollection":var m=c.features;for(x=0;x<m.length;x++)y(m[x]);break;case"Feature":y(c);break;default:return o.warn(["Invalid GeoJSON type",(c.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var _ in p)o.log(["Location *"+_+"*","does not have a matching feature with id-key","*"+h.featureidkey+"*."].join(" "));return v},fetchTraceGeoData:function(u){var h=window.PlotlyGeoAssets||{},c=[];function x(y){return new Promise(function(m,_){M.json(y,function(d,S){if(d){delete h[y];var w=d.status===404?'GeoJSON at URL "'+y+'" does not exist.':"Unexpected error while fetching from "+y;return _(new Error(w))}return h[y]=S,m(S)})})}function p(y){return new Promise(function(m,_){var d=0,S=setInterval(function(){return h[y]&&h[y]!=="pending"?(clearInterval(S),m(h[y])):d>100?(clearInterval(S),_("Unexpected error while fetching from "+y)):void d++},50)})}for(var v=0;v<u.length;v++){var g=u[v][0].trace.geojson;typeof g=="string"&&(h[g]?h[g]==="pending"&&c.push(p(g)):(h[g]="pending",c.push(x(g))))}return c},computeBbox:function(u){return b.default(u)}}},44808:function(ee,R,e){var M=e(39032).BADNUM;R.calcTraceToLineCoords=function(k){for(var s=k[0].trace.connectgaps,T=[],b=[],f=0;f<k.length;f++){var o=k[f].lonlat;o[0]!==M?b.push(o):!s&&b.length>0&&(T.push(b),b=[])}return b.length>0&&T.push(b),T},R.makeLine=function(k){return k.length===1?{type:"LineString",coordinates:k[0]}:{type:"MultiLineString",coordinates:k}},R.makePolygon=function(k){if(k.length===1)return{type:"Polygon",coordinates:k};for(var s=new Array(k.length),T=0;T<k.length;T++)s[T]=[k[T]];return{type:"MultiPolygon",coordinates:s}},R.makeBlank=function(){return{type:"Point",coordinates:[]}}},92348:function(ee,R,e){var M,k,s,T=e(20435).mod;function b(o,t,i,n,r,a,l,u){var h=i-o,c=r-o,x=l-r,p=n-t,v=a-t,g=u-a,y=h*g-x*p;if(y===0)return null;var m=(c*g-x*v)/y,_=(c*p-h*v)/y;return _<0||_>1||m<0||m>1?null:{x:o+h*m,y:t+p*m}}function f(o,t,i,n,r){var a=n*o+r*t;if(a<0)return n*n+r*r;if(a>i){var l=n-o,u=r-t;return l*l+u*u}var h=n*t-r*o;return h*h/i}R.segmentsIntersect=b,R.segmentDistance=function(o,t,i,n,r,a,l,u){if(b(o,t,i,n,r,a,l,u))return 0;var h=i-o,c=n-t,x=l-r,p=u-a,v=h*h+c*c,g=x*x+p*p,y=Math.min(f(h,c,v,r-o,a-t),f(h,c,v,l-o,u-t),f(x,p,g,o-r,t-a),f(x,p,g,i-r,n-a));return Math.sqrt(y)},R.getTextLocation=function(o,t,i,n){if(o===k&&n===s||(M={},k=o,s=n),M[i])return M[i];var r=o.getPointAtLength(T(i-n/2,t)),a=o.getPointAtLength(T(i+n/2,t)),l=Math.atan((a.y-r.y)/(a.x-r.x)),u=o.getPointAtLength(T(i,t)),h={x:(4*u.x+r.x+a.x)/6,y:(4*u.y+r.y+a.y)/6,theta:l};return M[i]=h,h},R.clearLocationCache=function(){k=null},R.getVisibleSegment=function(o,t,i){var n,r,a=t.left,l=t.right,u=t.top,h=t.bottom,c=0,x=o.getTotalLength(),p=x;function v(y){var m=o.getPointAtLength(y);y===0?n=m:y===x&&(r=m);var _=m.x<a?a-m.x:m.x>l?m.x-l:0,d=m.y<u?u-m.y:m.y>h?m.y-h:0;return Math.sqrt(_*_+d*d)}for(var g=v(c);g;){if((c+=g+i)>p)return;g=v(c)}for(g=v(p);g;){if(c>(p-=g+i))return;g=v(p)}return{min:c,max:p,len:p-c,total:x,isClosed:c===0&&p===x&&Math.abs(n.x-r.x)<.1&&Math.abs(n.y-r.y)<.1}},R.findPointOnPath=function(o,t,i,n){for(var r,a,l,u=(n=n||{}).pathLength||o.getTotalLength(),h=n.tolerance||.001,c=n.iterationLimit||30,x=o.getPointAtLength(0)[i]>o.getPointAtLength(u)[i]?-1:1,p=0,v=0,g=u;p<c;){if(r=(v+g)/2,l=(a=o.getPointAtLength(r))[i]-t,Math.abs(l)<h)return a;x*l>0?g=r:v=r,p++}return a}},33040:function(ee,R,e){var M=e(38248),k=e(49760),s=e(72160),T=e(8932),b=e(22548).defaultLine,f=e(38116).isArrayOrTypedArray,o=s(b);function t(r,a){var l=r;return l[3]*=a,l}function i(r){if(M(r))return o;var a=s(r);return a.length?a:o}function n(r){return M(r)?r:1}ee.exports={formatColor:function(r,a,l){var u=r.color;u&&u._inputArray&&(u=u._inputArray);var h,c,x,p,v,g=f(u),y=f(a),m=T.extractOpts(r),_=[];if(h=m.colorscale!==void 0?T.makeColorScaleFuncFromTrace(r):i,c=g?function(S,w){return S[w]===void 0?o:s(h(S[w]))}:i,x=y?function(S,w){return S[w]===void 0?1:n(S[w])}:n,g||y)for(var d=0;d<l;d++)p=c(u,d),v=x(a,d),_[d]=t(p,v);else _=t(s(u),a);return _},parseColorScale:function(r){var a=T.extractOpts(r),l=a.colorscale;return a.reversescale&&(l=T.flipScale(a.colorscale)),l.map(function(u){var h=u[0],c=k(u[1]).toRgb();return{index:h,rgb:[c.r,c.g,c.b,c.a]}})}}},71688:function(ee,R,e){var M=e(35536);function k(s){return[s]}ee.exports={keyFun:function(s){return s.key},repeat:k,descend:M,wrap:k,unwrap:function(s){return s[0]}}},35536:function(ee){ee.exports=function(R){return R}},1396:function(ee){ee.exports=function(R,e){if(!e)return R;var M=1/Math.abs(e),k=M>1?(M*R+M*e)/M:R+e,s=String(k).length;if(s>16){var T=String(e).length;if(s>=String(R).length+T){var b=parseFloat(k).toPrecision(12);b.indexOf("e+")===-1&&(k=+b)}}return k}},3400:function(ee,R,e){var M=e(33428),k=e(94336).E9,s=e(57624).E9,T=e(38248),b=e(39032),f=b.FP_SAFE,o=-f,t=b.BADNUM,i=ee.exports={};i.adjustFormat=function(Z){return!Z||/^\d[.]\df/.test(Z)||/[.]\d%/.test(Z)?Z:Z==="0.f"?"~f":/^\d%/.test(Z)?"~%":/^\ds/.test(Z)?"~s":!/^[~,.0$]/.test(Z)&&/[&fps]/.test(Z)?"~"+Z:Z};var n={};i.warnBadFormat=function(Z){var X=String(Z);n[X]||(n[X]=1,i.warn('encountered bad format: "'+X+'"'))},i.noFormat=function(Z){return String(Z)},i.numberFormat=function(Z){var X;try{X=s(i.adjustFormat(Z))}catch{return i.warnBadFormat(Z),i.noFormat}return X},i.nestedProperty=e(22296),i.keyedContainer=e(37804),i.relativeAttr=e(23193),i.isPlainObject=e(63620),i.toLogRange=e(36896),i.relinkPrivateKeys=e(51528);var r=e(38116);i.isArrayBuffer=r.isArrayBuffer,i.isTypedArray=r.isTypedArray,i.isArrayOrTypedArray=r.isArrayOrTypedArray,i.isArray1D=r.isArray1D,i.ensureArray=r.ensureArray,i.concat=r.concat,i.maxRowLength=r.maxRowLength,i.minRowLength=r.minRowLength;var a=e(20435);i.mod=a.mod,i.modHalf=a.modHalf;var l=e(63064);i.valObjectMeta=l.valObjectMeta,i.coerce=l.coerce,i.coerce2=l.coerce2,i.coerceFont=l.coerceFont,i.coercePattern=l.coercePattern,i.coerceHoverinfo=l.coerceHoverinfo,i.coerceSelectionMarkerOpacity=l.coerceSelectionMarkerOpacity,i.validate=l.validate;var u=e(67555);i.dateTime2ms=u.dateTime2ms,i.isDateTime=u.isDateTime,i.ms2DateTime=u.ms2DateTime,i.ms2DateTimeLocal=u.ms2DateTimeLocal,i.cleanDate=u.cleanDate,i.isJSDate=u.isJSDate,i.formatDate=u.formatDate,i.incrementMonth=u.incrementMonth,i.dateTick0=u.dateTick0,i.dfltRange=u.dfltRange,i.findExactDates=u.findExactDates,i.MIN_MS=u.MIN_MS,i.MAX_MS=u.MAX_MS;var h=e(14952);i.findBin=h.findBin,i.sorterAsc=h.sorterAsc,i.sorterDes=h.sorterDes,i.distinctVals=h.distinctVals,i.roundUp=h.roundUp,i.sort=h.sort,i.findIndexOfMin=h.findIndexOfMin,i.sortObjectKeys=e(95376);var c=e(63084);i.aggNums=c.aggNums,i.len=c.len,i.mean=c.mean,i.geometricMean=c.geometricMean,i.median=c.median,i.midRange=c.midRange,i.variance=c.variance,i.stdev=c.stdev,i.interp=c.interp;var x=e(52248);i.init2dArray=x.init2dArray,i.transposeRagged=x.transposeRagged,i.dot=x.dot,i.translationMatrix=x.translationMatrix,i.rotationMatrix=x.rotationMatrix,i.rotationXYMatrix=x.rotationXYMatrix,i.apply3DTransform=x.apply3DTransform,i.apply2DTransform=x.apply2DTransform,i.apply2DTransform2=x.apply2DTransform2,i.convertCssMatrix=x.convertCssMatrix,i.inverseTransformMatrix=x.inverseTransformMatrix;var p=e(11864);i.deg2rad=p.deg2rad,i.rad2deg=p.rad2deg,i.angleDelta=p.angleDelta,i.angleDist=p.angleDist,i.isFullCircle=p.isFullCircle,i.isAngleInsideSector=p.isAngleInsideSector,i.isPtInsideSector=p.isPtInsideSector,i.pathArc=p.pathArc,i.pathSector=p.pathSector,i.pathAnnulus=p.pathAnnulus;var v=e(98308);i.isLeftAnchor=v.isLeftAnchor,i.isCenterAnchor=v.isCenterAnchor,i.isRightAnchor=v.isRightAnchor,i.isTopAnchor=v.isTopAnchor,i.isMiddleAnchor=v.isMiddleAnchor,i.isBottomAnchor=v.isBottomAnchor;var g=e(92348);i.segmentsIntersect=g.segmentsIntersect,i.segmentDistance=g.segmentDistance,i.getTextLocation=g.getTextLocation,i.clearLocationCache=g.clearLocationCache,i.getVisibleSegment=g.getVisibleSegment,i.findPointOnPath=g.findPointOnPath;var y=e(92880);i.extendFlat=y.extendFlat,i.extendDeep=y.extendDeep,i.extendDeepAll=y.extendDeepAll,i.extendDeepNoArrays=y.extendDeepNoArrays;var m=e(24248);i.log=m.log,i.warn=m.warn,i.error=m.error;var _=e(53756);i.counterRegex=_.counter;var d=e(91200);i.throttle=d.throttle,i.throttleDone=d.done,i.clearThrottle=d.clear;var S=e(52200);function w(Z){var X={};for(var te in Z)for(var ae=Z[te],se=0;se<ae.length;se++)X[ae[se]]=+te;return X}i.getGraphDiv=S.getGraphDiv,i.isPlotDiv=S.isPlotDiv,i.removeElement=S.removeElement,i.addStyleRule=S.addStyleRule,i.addRelatedStyleRule=S.addRelatedStyleRule,i.deleteRelatedStyleRule=S.deleteRelatedStyleRule,i.getFullTransformMatrix=S.getFullTransformMatrix,i.getElementTransformMatrix=S.getElementTransformMatrix,i.getElementAndAncestors=S.getElementAndAncestors,i.equalDomRects=S.equalDomRects,i.clearResponsive=e(75352),i.preserveDrawingBuffer=e(34296),i.makeTraceGroups=e(30988),i._=e(98356),i.notifier=e(41792),i.filterUnique=e(68944),i.filterVisible=e(43880),i.pushUnique=e(52416),i.increment=e(1396),i.cleanNumber=e(54037),i.ensureNumber=function(Z){return T(Z)?(Z=Number(Z))>f||Z<o?t:Z:t},i.isIndex=function(Z,X){return!(X!==void 0&&Z>=X)&&T(Z)&&Z>=0&&Z%1==0},i.noop=e(16628),i.identity=e(35536),i.repeat=function(Z,X){for(var te=new Array(X),ae=0;ae<X;ae++)te[ae]=Z;return te},i.swapAttrs=function(Z,X,te,ae){te||(te="x"),ae||(ae="y");for(var se=0;se<X.length;se++){var ce=X[se],fe=i.nestedProperty(Z,ce.replace("?",te)),pe=i.nestedProperty(Z,ce.replace("?",ae)),ge=fe.get();fe.set(pe.get()),pe.set(ge)}},i.raiseToTop=function(Z){Z.parentNode.appendChild(Z)},i.cancelTransition=function(Z){return Z.transition().duration(0)},i.constrain=function(Z,X,te){return X>te?Math.max(te,Math.min(X,Z)):Math.max(X,Math.min(te,Z))},i.bBoxIntersect=function(Z,X,te){return te=te||0,Z.left<=X.right+te&&X.left<=Z.right+te&&Z.top<=X.bottom+te&&X.top<=Z.bottom+te},i.simpleMap=function(Z,X,te,ae,se){for(var ce=Z.length,fe=new Array(ce),pe=0;pe<ce;pe++)fe[pe]=X(Z[pe],te,ae,se);return fe},i.randstr=function Z(X,te,ae,se){if(ae||(ae=16),te===void 0&&(te=24),te<=0)return"0";var ce,fe,pe=Math.log(Math.pow(2,te))/Math.log(ae),ge="";for(ce=2;pe===1/0;ce*=2)pe=Math.log(Math.pow(2,te/ce))/Math.log(ae)*ce;var me=pe-Math.floor(pe);for(ce=0;ce<Math.floor(pe);ce++)ge=Math.floor(Math.random()*ae).toString(ae)+ge;me&&(fe=Math.pow(ae,me),ge=Math.floor(Math.random()*fe).toString(ae)+ge);var be=parseInt(ge,ae);return X&&X[ge]||be!==1/0&&be>=Math.pow(2,te)?se>10?(i.warn("randstr failed uniqueness"),ge):Z(X,te,ae,(se||0)+1):ge},i.OptionControl=function(Z,X){Z||(Z={}),X||(X="opt");var te={optionList:[],_newoption:function(ae){ae[X]=Z,te[ae.name]=ae,te.optionList.push(ae)}};return te["_"+X]=Z,te},i.smooth=function(Z,X){if((X=Math.round(X)||0)<2)return Z;var te,ae,se,ce,fe=Z.length,pe=2*fe,ge=2*X-1,me=new Array(ge),be=new Array(fe);for(te=0;te<ge;te++)me[te]=(1-Math.cos(Math.PI*(te+1)/X))/(2*X);for(te=0;te<fe;te++){for(ce=0,ae=0;ae<ge;ae++)(se=te+ae+1-X)<-fe?se-=pe*Math.round(se/pe):se>=pe&&(se-=pe*Math.floor(se/pe)),se<0?se=-1-se:se>=fe&&(se=pe-1-se),ce+=Z[se]*me[ae];be[te]=ce}return be},i.syncOrAsync=function(Z,X,te){var ae;function se(){return i.syncOrAsync(Z,X,te)}for(;Z.length;)if((ae=(0,Z.splice(0,1)[0])(X))&&ae.then)return ae.then(se);return te&&te(X)},i.stripTrailingSlash=function(Z){return Z.substr(-1)==="/"?Z.substr(0,Z.length-1):Z},i.noneOrAll=function(Z,X,te){if(Z){var ae,se=!1,ce=!0;for(ae=0;ae<te.length;ae++)Z[te[ae]]!=null?se=!0:ce=!1;if(se&&!ce)for(ae=0;ae<te.length;ae++)Z[te[ae]]=X[te[ae]]}},i.mergeArray=function(Z,X,te,ae){var se=typeof ae=="function";if(i.isArrayOrTypedArray(Z))for(var ce=Math.min(Z.length,X.length),fe=0;fe<ce;fe++){var pe=Z[fe];X[fe][te]=se?ae(pe):pe}},i.mergeArrayCastPositive=function(Z,X,te){return i.mergeArray(Z,X,te,function(ae){var se=+ae;return isFinite(se)&&se>0?se:0})},i.fillArray=function(Z,X,te,ae){if(ae=ae||i.identity,i.isArrayOrTypedArray(Z))for(var se=0;se<X.length;se++)X[se][te]=ae(Z[se])},i.castOption=function(Z,X,te,ae){ae=ae||i.identity;var se=i.nestedProperty(Z,te).get();return i.isArrayOrTypedArray(se)?Array.isArray(X)&&i.isArrayOrTypedArray(se[X[0]])?ae(se[X[0]][X[1]]):ae(se[X]):se},i.extractOption=function(Z,X,te,ae){if(te in Z)return Z[te];var se=i.nestedProperty(X,ae).get();return Array.isArray(se)?void 0:se},i.tagSelected=function(Z,X,te){var ae,se,ce=X.selectedpoints,fe=X._indexToPoints;fe&&(ae=w(fe));for(var pe=0;pe<ce.length;pe++){var ge=ce[pe];if(i.isIndex(ge)||i.isArrayOrTypedArray(ge)&&i.isIndex(ge[0])&&i.isIndex(ge[1])){var me=ae?ae[ge]:ge,be=te?te[me]:me;(se=be)!==void 0&&se<Z.length&&(Z[be].selected=1)}}},i.selIndices2selPoints=function(Z){var X=Z.selectedpoints,te=Z._indexToPoints;if(te){for(var ae=w(te),se=[],ce=0;ce<X.length;ce++){var fe=X[ce];if(i.isIndex(fe)){var pe=ae[fe];i.isIndex(pe)&&se.push(pe)}}return se}return X},i.getTargetArray=function(Z,X){var te=X.target;if(typeof te=="string"&&te){var ae=i.nestedProperty(Z,te).get();return!!i.isArrayOrTypedArray(ae)&&ae}return!!i.isArrayOrTypedArray(te)&&te},i.minExtend=function Z(X,te,ae){var se={};typeof te!="object"&&(te={});var ce,fe,pe,ge=ae==="pieLike"?-1:3,me=Object.keys(X);for(ce=0;ce<me.length;ce++)pe=X[fe=me[ce]],fe.charAt(0)!=="_"&&typeof pe!="function"&&(fe==="module"?se[fe]=pe:Array.isArray(pe)?se[fe]=fe==="colorscale"||ge===-1?pe.slice():pe.slice(0,ge):i.isTypedArray(pe)?se[fe]=ge===-1?pe.subarray():pe.subarray(0,ge):se[fe]=pe&&typeof pe=="object"?Z(X[fe],te[fe],ae):pe);for(me=Object.keys(te),ce=0;ce<me.length;ce++)typeof(pe=te[fe=me[ce]])=="object"&&fe in se&&typeof se[fe]=="object"||(se[fe]=pe);return se},i.titleCase=function(Z){return Z.charAt(0).toUpperCase()+Z.substr(1)},i.containsAny=function(Z,X){for(var te=0;te<X.length;te++)if(Z.indexOf(X[te])!==-1)return!0;return!1},i.isIE=function(){return window.navigator.msSaveBlob!==void 0};var E=/Version\/[\d\.]+.*Safari/;i.isSafari=function(){return E.test(window.navigator.userAgent)};var C=/iPad|iPhone|iPod/;i.isIOS=function(){return C.test(window.navigator.userAgent)};var O=/Firefox\/(\d+)\.\d+/;i.getFirefoxVersion=function(){var Z=O.exec(window.navigator.userAgent);if(Z&&Z.length===2){var X=parseInt(Z[1]);if(!isNaN(X))return X}return null},i.isD3Selection=function(Z){return Z instanceof M.selection},i.ensureSingle=function(Z,X,te,ae){var se=Z.select(X+(te?"."+te:""));if(se.size())return se;var ce=Z.append(X);return te&&ce.classed(te,!0),ae&&ce.call(ae),ce},i.ensureSingleById=function(Z,X,te,ae){var se=Z.select(X+"#"+te);if(se.size())return se;var ce=Z.append(X).attr("id",te);return ae&&ce.call(ae),ce},i.objectFromPath=function(Z,X){for(var te,ae=Z.split("."),se=te={},ce=0;ce<ae.length;ce++){var fe=ae[ce],pe=null,ge=ae[ce].match(/(.*)\[([0-9]+)\]/);ge?(fe=ge[1],pe=ge[2],te=te[fe]=[],ce===ae.length-1?te[pe]=X:te[pe]={},te=te[pe]):(ce===ae.length-1?te[fe]=X:te[fe]={},te=te[fe])}return se};var P=/^([^\[\.]+)\.(.+)?/,z=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function j(Z){return Z.slice(0,2)==="__"}i.expandObjectPaths=function(Z){var X,te,ae,se,ce,fe,pe;if(typeof Z=="object"&&!Array.isArray(Z)){for(te in Z)if(Z.hasOwnProperty(te))if(X=te.match(P)){if(se=Z[te],j(ae=X[1]))continue;delete Z[te],Z[ae]=i.extendDeepNoArrays(Z[ae]||{},i.objectFromPath(te,i.expandObjectPaths(se))[ae])}else if(X=te.match(z)){if(se=Z[te],j(ae=X[1]))continue;if(ce=parseInt(X[2]),delete Z[te],Z[ae]=Z[ae]||[],X[3]===".")pe=X[4],fe=Z[ae][ce]=Z[ae][ce]||{},i.extendDeepNoArrays(fe,i.objectFromPath(pe,i.expandObjectPaths(se)));else{if(j(ae))continue;Z[ae][ce]=i.expandObjectPaths(se)}}else{if(j(te))continue;Z[te]=i.expandObjectPaths(Z[te])}}return Z},i.numSeparate=function(Z,X,te){if(te||(te=!1),typeof X!="string"||X.length===0)throw new Error("Separator string required for formatting!");typeof Z=="number"&&(Z=String(Z));var ae=/(\d+)(\d{3})/,se=X.charAt(0),ce=X.charAt(1),fe=Z.split("."),pe=fe[0],ge=fe.length>1?se+fe[1]:"";if(ce&&(fe.length>1||pe.length>4||te))for(;ae.test(pe);)pe=pe.replace(ae,"$1"+ce+"$2");return pe+ge},i.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var I=/^\w*$/;i.templateString=function(Z,X){var te={};return Z.replace(i.TEMPLATE_STRING_REGEX,function(ae,se){var ce;return I.test(se)?ce=X[se]:(te[se]=te[se]||i.nestedProperty(X,se).get,ce=te[se]()),i.isValidTextValue(ce)?ce:""})};var N={max:10,count:0,name:"hovertemplate"};i.hovertemplateString=function(){return ne.apply(N,arguments)};var W={max:10,count:0,name:"texttemplate"};i.texttemplateString=function(){return ne.apply(W,arguments)};var F=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/,U={max:10,count:0,name:"texttemplate",parseMultDiv:!0};i.texttemplateStringForShapes=function(){return ne.apply(U,arguments)};var H=/^[:|\|]/;function ne(Z,X,te){var ae=this,se=arguments;X||(X={});var ce={};return Z.replace(i.TEMPLATE_STRING_REGEX,function(fe,pe,ge){var me=pe==="_xother"||pe==="_yother",be=pe==="_xother_"||pe==="_yother_",ke=pe==="xother_"||pe==="yother_",ze=pe==="xother"||pe==="yother"||me||ke||be,ve=pe;(me||be)&&(ve=ve.substring(1)),(ke||be)&&(ve=ve.substring(0,ve.length-1));var oe,ie,he,Se=null,ye=null;if(ae.parseMultDiv){var we=function(de){var _e=de.match(F);return _e?{key:_e[1],op:_e[2],number:Number(_e[3])}:{key:de,op:null,number:null}}(ve);ve=we.key,Se=we.op,ye=we.number}if(ze){if((oe=X[ve])===void 0)return""}else for(he=3;he<se.length;he++)if(ie=se[he]){if(ie.hasOwnProperty(ve)){oe=ie[ve];break}if(I.test(ve)||(oe=i.nestedProperty(ie,ve).get(),(oe=ce[ve]||i.nestedProperty(ie,ve).get())&&(ce[ve]=oe)),oe!==void 0)break}if(oe!==void 0&&(Se==="*"&&(oe*=ye),Se==="/"&&(oe/=ye)),oe===void 0&&ae)return ae.count<ae.max&&(i.warn("Variable '"+ve+"' in "+ae.name+" could not be found!"),oe=fe),ae.count===ae.max&&i.warn("Too many "+ae.name+" warnings - additional warnings will be suppressed"),ae.count++,fe;if(ge){var Me;if(ge[0]===":"&&(Me=te?te.numberFormat:i.numberFormat,oe!==""&&(oe=Me(ge.replace(H,""))(oe))),ge[0]==="|"){Me=te?te.timeFormat:k;var Oe=i.dateTime2ms(oe);oe=i.formatDate(Oe,ge.replace(H,""),!1,Me)}}else{var Ie=ve+"Label";X.hasOwnProperty(Ie)&&(oe=X[Ie])}return ze&&(oe="("+oe+")",(me||be)&&(oe=" "+oe),(ke||be)&&(oe+=" ")),oe})}i.subplotSort=function(Z,X){for(var te=Math.min(Z.length,X.length)+1,ae=0,se=0,ce=0;ce<te;ce++){var fe=Z.charCodeAt(ce)||0,pe=X.charCodeAt(ce)||0,ge=fe>=48&&fe<=57,me=pe>=48&&pe<=57;if(ge&&(ae=10*ae+fe-48),me&&(se=10*se+pe-48),!ge||!me){if(ae!==se)return ae-se;if(fe!==pe)return fe-pe}}return se-ae};var $=2e9;i.seedPseudoRandom=function(){$=2e9},i.pseudoRandom=function(){var Z=$;return $=(69069*$+1)%4294967296,Math.abs($-Z)<429496729?i.pseudoRandom():$/4294967296},i.fillText=function(Z,X,te){var ae=Array.isArray(te)?function(fe){te.push(fe)}:function(fe){te.text=fe},se=i.extractOption(Z,X,"htx","hovertext");if(i.isValidTextValue(se))return ae(se);var ce=i.extractOption(Z,X,"tx","text");return i.isValidTextValue(ce)?ae(ce):void 0},i.isValidTextValue=function(Z){return Z||Z===0},i.formatPercent=function(Z,X){X=X||0;for(var te=(Math.round(100*Z*Math.pow(10,X))*Math.pow(.1,X)).toFixed(X)+"%",ae=0;ae<X;ae++)te.indexOf(".")!==-1&&(te=(te=te.replace("0%","%")).replace(".%","%"));return te},i.isHidden=function(Z){var X=window.getComputedStyle(Z).display;return!X||X==="none"},i.strTranslate=function(Z,X){return Z||X?"translate("+Z+","+X+")":""},i.strRotate=function(Z){return Z?"rotate("+Z+")":""},i.strScale=function(Z){return Z!==1?"scale("+Z+")":""},i.getTextTransform=function(Z){var X=Z.noCenter,te=Z.textX,ae=Z.textY,se=Z.targetX,ce=Z.targetY,fe=Z.anchorX||0,pe=Z.anchorY||0,ge=Z.rotate,me=Z.scale;return me?me>1&&(me=1):me=0,i.strTranslate(se-me*(te+fe),ce-me*(ae+pe))+i.strScale(me)+(ge?"rotate("+ge+(X?"":" "+te+" "+ae)+")":"")},i.setTransormAndDisplay=function(Z,X){Z.attr("transform",i.getTextTransform(X)),Z.style("display",X.scale?null:"none")},i.ensureUniformFontSize=function(Z,X){var te=i.extendFlat({},X);return te.size=Math.max(X.size,Z._fullLayout.uniformtext.minsize||0),te},i.join2=function(Z,X,te){var ae=Z.length;return ae>1?Z.slice(0,-1).join(X)+te+Z[ae-1]:Z.join(X)},i.bigFont=function(Z){return Math.round(1.2*Z)};var K=i.getFirefoxVersion(),Q=K!==null&&K<86;i.getPositionFromD3Event=function(){return Q?[M.event.layerX,M.event.layerY]:[M.event.offsetX,M.event.offsetY]}},63620:function(ee){ee.exports=function(R){return window&&window.process&&window.process.versions?Object.prototype.toString.call(R)==="[object Object]":Object.prototype.toString.call(R)==="[object Object]"&&Object.getPrototypeOf(R).hasOwnProperty("hasOwnProperty")}},37804:function(ee,R,e){var M=e(22296),k=/^\w*$/;ee.exports=function(s,T,b,f){var o,t,i;b=b||"name",f=f||"value";var n={};T&&T.length?(i=M(s,T),t=i.get()):t=s,T=T||"";var r={};if(t)for(o=0;o<t.length;o++)r[t[o][b]]=o;var a=k.test(f),l={set:function(u,h){var c=h===null?4:0;if(!t){if(!i||c===4)return;t=[],i.set(t)}var x=r[u];if(x===void 0){if(c===4)return;c|=3,x=t.length,r[u]=x}else h!==(a?t[x][f]:M(t[x],f).get())&&(c|=2);var p=t[x]=t[x]||{};return p[b]=u,a?p[f]=h:M(p,f).set(h),h!==null&&(c&=-5),n[x]=n[x]|c,l},get:function(u){if(t){var h=r[u];return h===void 0?void 0:a?t[h][f]:M(t[h],f).get()}},rename:function(u,h){var c=r[u];return c===void 0||(n[c]=1|n[c],r[h]=c,delete r[u],t[c][b]=h),l},remove:function(u){var h=r[u];if(h===void 0)return l;var c=t[h];if(Object.keys(c).length>2)return n[h]=2|n[h],l.set(u,null);if(a){for(o=h;o<t.length;o++)n[o]=3|n[o];for(o=h;o<t.length;o++)r[t[o][b]]--;t.splice(h,1),delete r[u]}else M(c,f).set(null),n[h]=6|n[h];return l},constructUpdate:function(){for(var u,h,c={},x=Object.keys(n),p=0;p<x.length;p++)h=x[p],u=T+"["+h+"]",t[h]?(1&n[h]&&(c[u+"."+b]=t[h][b]),2&n[h]&&(c[u+"."+f]=a?4&n[h]?null:t[h][f]:4&n[h]?null:M(t[h],f).get())):c[u]=null;return c}};return l}},98356:function(ee,R,e){var M=e(24040);ee.exports=function(k,s){for(var T=k._context.locale,b=0;b<2;b++){for(var f=k._context.locales,o=0;o<2;o++){var t=(f[T]||{}).dictionary;if(t){var i=t[s];if(i)return i}f=M.localeRegistry}var n=T.split("-")[0];if(n===T)break;T=n}return s}},24248:function(ee,R,e){var M=e(20556).dfltConfig,k=e(41792),s=ee.exports={};s.log=function(){var T;if(M.logging>1){var b=["LOG:"];for(T=0;T<arguments.length;T++)b.push(arguments[T]);console.trace.apply(console,b)}if(M.notifyOnLogging>1){var f=[];for(T=0;T<arguments.length;T++)f.push(arguments[T]);k(f.join("<br>"),"long")}},s.warn=function(){var T;if(M.logging>0){var b=["WARN:"];for(T=0;T<arguments.length;T++)b.push(arguments[T]);console.trace.apply(console,b)}if(M.notifyOnLogging>0){var f=[];for(T=0;T<arguments.length;T++)f.push(arguments[T]);k(f.join("<br>"),"stick")}},s.error=function(){var T;if(M.logging>0){var b=["ERROR:"];for(T=0;T<arguments.length;T++)b.push(arguments[T]);console.error.apply(console,b)}if(M.notifyOnLogging>0){var f=[];for(T=0;T<arguments.length;T++)f.push(arguments[T]);k(f.join("<br>"),"stick")}}},30988:function(ee,R,e){var M=e(33428);ee.exports=function(k,s,T){var b=k.selectAll("g."+T.replace(/\s/g,".")).data(s,function(o){return o[0].trace.uid});b.exit().remove(),b.enter().append("g").attr("class",T),b.order();var f=k.classed("rangeplot")?"nodeRangePlot3":"node3";return b.each(function(o){o[0][f]=M.select(this)}),b}},52248:function(ee,R,e){var M=e(36524);R.init2dArray=function(k,s){for(var T=new Array(k),b=0;b<k;b++)T[b]=new Array(s);return T},R.transposeRagged=function(k){var s,T,b=0,f=k.length;for(s=0;s<f;s++)b=Math.max(b,k[s].length);var o=new Array(b);for(s=0;s<b;s++)for(o[s]=new Array(f),T=0;T<f;T++)o[s][T]=k[T][s];return o},R.dot=function(k,s){if(!k.length||!s.length||k.length!==s.length)return null;var T,b,f=k.length;if(k[0].length)for(T=new Array(f),b=0;b<f;b++)T[b]=R.dot(k[b],s);else if(s[0].length){var o=R.transposeRagged(s);for(T=new Array(o.length),b=0;b<o.length;b++)T[b]=R.dot(k,o[b])}else for(T=0,b=0;b<f;b++)T+=k[b]*s[b];return T},R.translationMatrix=function(k,s){return[[1,0,k],[0,1,s],[0,0,1]]},R.rotationMatrix=function(k){var s=k*Math.PI/180;return[[Math.cos(s),-Math.sin(s),0],[Math.sin(s),Math.cos(s),0],[0,0,1]]},R.rotationXYMatrix=function(k,s,T){return R.dot(R.dot(R.translationMatrix(s,T),R.rotationMatrix(k)),R.translationMatrix(-s,-T))},R.apply3DTransform=function(k){return function(){var s=arguments,T=arguments.length===1?s[0]:[s[0],s[1],s[2]||0];return R.dot(k,[T[0],T[1],T[2],1]).slice(0,3)}},R.apply2DTransform=function(k){return function(){var s=arguments;s.length===3&&(s=s[0]);var T=arguments.length===1?s[0]:[s[0],s[1]];return R.dot(k,[T[0],T[1],1]).slice(0,2)}},R.apply2DTransform2=function(k){var s=R.apply2DTransform(k);return function(T){return s(T.slice(0,2)).concat(s(T.slice(2,4)))}},R.convertCssMatrix=function(k){if(k){var s=k.length;if(s===16)return k;if(s===6)return[k[0],k[1],0,0,k[2],k[3],0,0,0,0,1,0,k[4],k[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},R.inverseTransformMatrix=function(k){var s=[];return M.invert(s,k),[[s[0],s[1],s[2],s[3]],[s[4],s[5],s[6],s[7]],[s[8],s[9],s[10],s[11]],[s[12],s[13],s[14],s[15]]]}},20435:function(ee){ee.exports={mod:function(R,e){var M=R%e;return M<0?M+e:M},modHalf:function(R,e){return Math.abs(R)>e/2?R-Math.round(R/e)*e:R}}},22296:function(ee,R,e){var M=e(38248),k=e(38116).isArrayOrTypedArray;function s(n,r){return function(){var a,l,u,h,c,x=n;for(h=0;h<r.length-1;h++){if((a=r[h])===-1){for(l=!0,u=[],c=0;c<x.length;c++)u[c]=s(x[c],r.slice(h+1))(),u[c]!==u[0]&&(l=!1);return l?u[0]:u}if(typeof a=="number"&&!k(x)||typeof(x=x[a])!="object"||x===null)return}if(typeof x=="object"&&x!==null&&(u=x[r[h]])!==null)return u}}ee.exports=function(n,r){if(M(r))r=String(r);else if(typeof r!="string"||r.substr(r.length-4)==="[-1]")throw"bad property string";var a,l,u,h,c=r.split(".");for(h=0;h<c.length;h++)if(String(c[h]).slice(0,2)==="__")throw"bad property string";for(h=0;h<c.length;){if(a=String(c[h]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(a[1])c[h]=a[1];else{if(h!==0)throw"bad property string";c.splice(0,1)}for(l=a[2].substr(1,a[2].length-2).split("]["),u=0;u<l.length;u++)h++,c.splice(h,0,Number(l[u]))}h++}return typeof n!="object"?function(x,p,v){return{set:function(){throw"bad container"},get:function(){},astr:p,parts:v,obj:x}}(n,r,c):{set:f(n,c,r),get:s(n,c),astr:r,parts:c,obj:n}};var T=/(^|\.)args\[/;function b(n,r){return n===void 0||n===null&&!r.match(T)}function f(n,r,a){return function(l){var u,h,c=n,x="",p=b(l,a);for(h=0;h<r.length-1;h++){if(typeof(u=r[h])=="number"&&!k(c))throw"array index but container is not an array";if(u===-1){if(p=!t(c,r.slice(h+1),l,a))break;return}if(!i(c,u,r[h+1],p))break;if(typeof(c=c[u])!="object"||c===null)throw"container is not an object";x=o(x,u)}if(p){if(h===r.length-1&&(delete c[r[h]],Array.isArray(c)&&+r[h]==c.length-1))for(;c.length&&c[c.length-1]===void 0;)c.pop()}else c[r[h]]=l}}function o(n,r){var a=r;return M(r)?a="["+r+"]":n&&(a="."+r),n+a}function t(n,r,a,l){var u,h=k(a),c=!0,x=a,p=l.replace("-1",0),v=!h&&b(a,p),g=r[0];for(u=0;u<n.length;u++)p=l.replace("-1",u),h&&(v=b(x=a[u%a.length],p)),v&&(c=!1),i(n,u,g,v)&&f(n[u],r,l.replace("-1",u))(x);return c}function i(n,r,a,l){if(n[r]===void 0){if(l)return!1;n[r]=typeof a=="number"?[]:{}}return!0}},16628:function(ee){ee.exports=function(){}},41792:function(ee,R,e){var M=e(33428),k=e(38248),s=[];ee.exports=function(T,b){if(s.indexOf(T)===-1){s.push(T);var f=1e3;k(b)?f=b:b==="long"&&(f=3e3);var o=M.select("body").selectAll(".plotly-notifier").data([0]);o.enter().append("div").classed("plotly-notifier",!0),o.selectAll(".notifier-note").data(s).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(i){var n=M.select(this);n.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){n.transition().call(t)});for(var r=n.append("p"),a=i.split(/<br\s*\/?>/g),l=0;l<a.length;l++)l&&r.append("br"),r.append("span").text(a[l]);b==="stick"?n.transition().duration(350).style("opacity",1):n.transition().duration(700).style("opacity",1).transition().delay(f).call(t)})}function t(i){i.duration(700).style("opacity",0).each("end",function(n){var r=s.indexOf(n);r!==-1&&s.splice(r,1),M.select(this).remove()})}}},72213:function(ee,R,e){var M=e(93972),k="data-savedcursor";ee.exports=function(s,T){var b=s.attr(k);if(T){if(!b){for(var f=(s.attr("class")||"").split(" "),o=0;o<f.length;o++){var t=f[o];t.indexOf("cursor-")===0&&s.attr(k,t.substr(7)).classed(t,!1)}s.attr(k)||s.attr(k,"!!")}M(s,T)}else b&&(s.attr(k,null),b==="!!"?M(s):M(s,b))}},92065:function(ee,R,e){var M=e(52248).dot,k=e(39032).BADNUM,s=ee.exports={};s.tester=function(T){var b,f=T.slice(),o=f[0][0],t=o,i=f[0][1],n=i;for(f[f.length-1][0]===f[0][0]&&f[f.length-1][1]===f[0][1]||f.push(f[0]),b=1;b<f.length;b++)o=Math.min(o,f[b][0]),t=Math.max(t,f[b][0]),i=Math.min(i,f[b][1]),n=Math.max(n,f[b][1]);var r,a=!1;f.length===5&&(f[0][0]===f[1][0]?f[2][0]===f[3][0]&&f[0][1]===f[3][1]&&f[1][1]===f[2][1]&&(a=!0,r=function(h){return h[0]===f[0][0]}):f[0][1]===f[1][1]&&f[2][1]===f[3][1]&&f[0][0]===f[3][0]&&f[1][0]===f[2][0]&&(a=!0,r=function(h){return h[1]===f[0][1]}));var l=!0,u=f[0];for(b=1;b<f.length;b++)if(u[0]!==f[b][0]||u[1]!==f[b][1]){l=!1;break}return{xmin:o,xmax:t,ymin:i,ymax:n,pts:f,contains:a?function(h,c){var x=h[0],p=h[1];return!(x===k||x<o||x>t||p===k||p<i||p>n||c&&r(h))}:function(h,c){var x=h[0],p=h[1];if(x===k||x<o||x>t||p===k||p<i||p>n)return!1;var v,g,y,m,_,d=f.length,S=f[0][0],w=f[0][1],E=0;for(v=1;v<d;v++)if(g=S,y=w,S=f[v][0],w=f[v][1],!(x<(m=Math.min(g,S))||x>Math.max(g,S)||p>Math.max(y,w)))if(p<Math.min(y,w))x!==m&&E++;else{if(p===(_=S===g?p:y+(x-g)*(w-y)/(S-g)))return v!==1||!c;p<=_&&x!==m&&E++}return E%2==1},isRect:a,degenerate:l}},s.isSegmentBent=function(T,b,f,o){var t,i,n,r=T[b],a=[T[f][0]-r[0],T[f][1]-r[1]],l=M(a,a),u=Math.sqrt(l),h=[-a[1]/u,a[0]/u];for(t=b+1;t<f;t++)if(i=[T[t][0]-r[0],T[t][1]-r[1]],(n=M(i,a))<0||n>l||Math.abs(M(i,h))>o)return!0;return!1},s.filter=function(T,b){var f=[T[0]],o=0,t=0;function i(n){T.push(n);var r=f.length,a=o;f.splice(t+1);for(var l=a+1;l<T.length;l++)(l===T.length-1||s.isSegmentBent(T,a,l+1,b))&&(f.push(T[l]),f.length<r-2&&(o=l,t=f.length-1),a=l)}return T.length>1&&i(T.pop()),{addPt:i,raw:T,filtered:f}}},5048:function(ee,R,e){var M=e(16576),k=e(28624);ee.exports=function(s,T,b){var f=s._fullLayout,o=!0;return f._glcanvas.each(function(t){if(t.regl)t.regl.preloadCachedCode(b);else if(!t.pick||f._has("parcoords")){try{t.regl=k({canvas:this,attributes:{antialias:!t.pick,preserveDrawingBuffer:!0},pixelRatio:s._context.plotGlPixelRatio||e.g.devicePixelRatio,extensions:T||[],cachedCode:b||{}})}catch{o=!1}t.regl||(o=!1),o&&this.addEventListener("webglcontextlost",function(i){s&&s.emit&&s.emit("plotly_webglcontextlost",{event:i,layer:t.key})},!1)}}),o||M({container:f._glcontainer.node()}),o}},34296:function(ee,R,e){var M=e(38248),k=e(25928);ee.exports=function(s){var T;if(typeof(T=s&&s.hasOwnProperty("userAgent")?s.userAgent:function(){var r;return typeof navigator<"u"&&(r=navigator.userAgent),r&&r.headers&&typeof r.headers["user-agent"]=="string"&&(r=r.headers["user-agent"]),r}())!="string")return!0;var b=k({ua:{headers:{"user-agent":T}},tablet:!0,featureDetect:!1});if(!b){for(var f=T.split(" "),o=1;o<f.length;o++)if(f[o].indexOf("Safari")!==-1)for(var t=o-1;t>-1;t--){var i=f[t];if(i.substr(0,8)==="Version/"){var n=i.substr(8).split(".")[0];if(M(n)&&(n=+n),n>=13)return!0}}}return b}},52416:function(ee){ee.exports=function(R,e){if(e instanceof RegExp){for(var M=e.toString(),k=0;k<R.length;k++)if(R[k]instanceof RegExp&&R[k].toString()===M)return R;R.push(e)}else!e&&e!==0||R.indexOf(e)!==-1||R.push(e);return R}},94552:function(ee,R,e){var M=e(3400),k=e(20556).dfltConfig,s={add:function(T,b,f,o,t){var i,n;T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},n=T.undoQueue.index,T.autoplay?T.undoQueue.inSequence||(T.autoplay=!1):(!T.undoQueue.sequence||T.undoQueue.beginSequence?(i={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},T.undoQueue.queue.splice(n,T.undoQueue.queue.length-n,i),T.undoQueue.index+=1):i=T.undoQueue.queue[n-1],T.undoQueue.beginSequence=!1,i&&(i.undo.calls.unshift(b),i.undo.args.unshift(f),i.redo.calls.push(o),i.redo.args.push(t)),T.undoQueue.queue.length>k.queueLength&&(T.undoQueue.queue.shift(),T.undoQueue.index--))},startSequence:function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!0,T.undoQueue.beginSequence=!0},stopSequence:function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!1,T.undoQueue.beginSequence=!1},undo:function(T){var b,f;if(!(T.undoQueue===void 0||isNaN(T.undoQueue.index)||T.undoQueue.index<=0)){for(T.undoQueue.index--,b=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,f=0;f<b.undo.calls.length;f++)s.plotDo(T,b.undo.calls[f],b.undo.args[f]);T.undoQueue.inSequence=!1,T.autoplay=!1}},redo:function(T){var b,f;if(!(T.undoQueue===void 0||isNaN(T.undoQueue.index)||T.undoQueue.index>=T.undoQueue.queue.length)){for(b=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,f=0;f<b.redo.calls.length;f++)s.plotDo(T,b.redo.calls[f],b.redo.args[f]);T.undoQueue.inSequence=!1,T.autoplay=!1,T.undoQueue.index++}},plotDo:function(T,b,f){T.autoplay=!0,f=function(o,t){for(var i,n=[],r=0;r<t.length;r++)i=t[r],n[r]=i===o?i:typeof i=="object"?Array.isArray(i)?M.extendDeep([],i):M.extendDeepAll({},i):i;return n}(T,f),b.apply(null,f)}};ee.exports=s},53756:function(ee,R){R.counter=function(e,M,k,s){var T=(M||"")+(k?"":"$"),b=s===!1?"":"^";return e==="xy"?new RegExp(b+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+T):new RegExp(b+e+"([2-9]|[1-9][0-9]+)?"+T)}},23193:function(ee){var R=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,e=/^[^\.\[\]]+$/;ee.exports=function(M,k){for(;k;){var s=M.match(R);if(s)M=s[1];else{if(!M.match(e))throw new Error("bad relativeAttr call:"+[M,k]);M=""}if(k.charAt(0)!=="^")break;k=k.slice(1)}return M&&k.charAt(0)!=="["?M+"."+k:M+k}},51528:function(ee,R,e){var M=e(38116).isArrayOrTypedArray,k=e(63620);ee.exports=function s(T,b){for(var f in b){var o=b[f],t=T[f];if(t!==o)if(f.charAt(0)==="_"||typeof o=="function"){if(f in T)continue;T[f]=o}else if(M(o)&&M(t)&&k(o[0])){if(f==="customdata"||f==="ids")continue;for(var i=Math.min(o.length,t.length),n=0;n<i;n++)t[n]!==o[n]&&k(o[n])&&k(t[n])&&s(t[n],o[n])}else k(o)&&k(t)&&(s(t,o),Object.keys(t).length||delete T[f])}}},14952:function(ee,R,e){var M=e(38248),k=e(24248),s=e(35536),T=e(39032).BADNUM,b=1e-9;function f(n,r){return n<r}function o(n,r){return n<=r}function t(n,r){return n>r}function i(n,r){return n>=r}R.findBin=function(n,r,a){if(M(r.start))return a?Math.ceil((n-r.start)/r.size-b)-1:Math.floor((n-r.start)/r.size+b);var l,u,h=0,c=r.length,x=0,p=c>1?(r[c-1]-r[0])/(c-1):1;for(u=p>=0?a?f:o:a?i:t,n+=p*b*(a?-1:1)*(p>=0?1:-1);h<c&&x++<100;)u(r[l=Math.floor((h+c)/2)],n)?h=l+1:c=l;return x>90&&k.log("Long binary search..."),h-1},R.sorterAsc=function(n,r){return n-r},R.sorterDes=function(n,r){return r-n},R.distinctVals=function(n){var r,a=n.slice();for(a.sort(R.sorterAsc),r=a.length-1;r>-1&&a[r]===T;r--);for(var l,u=a[r]-a[0]||1,h=u/(r||1)/1e4,c=[],x=0;x<=r;x++){var p=a[x],v=p-l;l===void 0?(c.push(p),l=p):v>h&&(u=Math.min(u,v),c.push(p),l=p)}return{vals:c,minDiff:u}},R.roundUp=function(n,r,a){for(var l,u=0,h=r.length-1,c=0,x=a?0:1,p=a?1:0,v=a?Math.ceil:Math.floor;u<h&&c++<100;)r[l=v((u+h)/2)]<=n?u=l+x:h=l-p;return r[u]},R.sort=function(n,r){for(var a=0,l=0,u=1;u<n.length;u++){var h=r(n[u],n[u-1]);if(h<0?a=1:h>0&&(l=1),a&&l)return n.sort(r)}return l?n:n.reverse()},R.findIndexOfMin=function(n,r){r=r||s;for(var a,l=1/0,u=0;u<n.length;u++){var h=r(n[u]);h<l&&(l=h,a=u)}return a}},93972:function(ee){ee.exports=function(R,e){(R.attr("class")||"").split(" ").forEach(function(M){M.indexOf("cursor-")===0&&R.classed(M,!1)}),e&&R.classed("cursor-"+e,!0)}},16576:function(ee,R,e){var M=e(76308),k=function(){};ee.exports=function(s){for(var T in s)typeof s[T]=="function"&&(s[T]=k);s.destroy=function(){s.container.parentNode.removeChild(s.container)};var b=document.createElement("div");b.className="no-webgl",b.style.cursor="pointer",b.style.fontSize="24px",b.style.color=M.defaults[0],b.style.position="absolute",b.style.left=b.style.top="0px",b.style.width=b.style.height="100%",b.style["background-color"]=M.lightLine,b.style["z-index"]=30;var f=document.createElement("p");return f.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",f.style.position="relative",f.style.top="50%",f.style.left="50%",f.style.height="30%",f.style.width="50%",f.style.margin="-15% 0 0 -25%",b.appendChild(f),s.container.appendChild(b),s.container.style.background="#FFFFFF",s.container.onclick=function(){window.open("https://get.webgl.org")},!1}},95376:function(ee){ee.exports=function(R){return Object.keys(R).sort()}},63084:function(ee,R,e){var M=e(38248),k=e(38116).isArrayOrTypedArray;R.aggNums=function(s,T,b,f){var o,t;if((!f||f>b.length)&&(f=b.length),M(T)||(T=!1),k(b[0])){for(t=new Array(f),o=0;o<f;o++)t[o]=R.aggNums(s,T,b[o]);b=t}for(o=0;o<f;o++)M(T)?M(b[o])&&(T=s(+T,+b[o])):T=b[o];return T},R.len=function(s){return R.aggNums(function(T){return T+1},0,s)},R.mean=function(s,T){return T||(T=R.len(s)),R.aggNums(function(b,f){return b+f},0,s)/T},R.geometricMean=function(s,T){return T||(T=R.len(s)),Math.pow(R.aggNums(function(b,f){return b*f},1,s),1/T)},R.midRange=function(s){if(s!==void 0&&s.length!==0)return(R.aggNums(Math.max,null,s)+R.aggNums(Math.min,null,s))/2},R.variance=function(s,T,b){return T||(T=R.len(s)),M(b)||(b=R.mean(s,T)),R.aggNums(function(f,o){return f+Math.pow(o-b,2)},0,s)/T},R.stdev=function(s,T,b){return Math.sqrt(R.variance(s,T,b))},R.median=function(s){var T=s.slice().sort();return R.interp(T,.5)},R.interp=function(s,T){if(!M(T))throw"n should be a finite number";if((T=T*s.length-.5)<0)return s[0];if(T>s.length-1)return s[s.length-1];var b=T%1;return b*s[Math.ceil(T)]+(1-b)*s[Math.floor(T)]}},43080:function(ee,R,e){var M=e(72160);ee.exports=function(k){return k?M(k):[0,0,0,1]}},9188:function(ee,R,e){var M=e(2264),k=e(43616),s=e(3400),T=null;ee.exports=function(){if(T!==null)return T;T=!1;var b=s.isIE()||s.isSafari()||s.isIOS();if(window.navigator.userAgent&&!b){var f=Array.from(M.CSS_DECLARATIONS).reverse(),o=window.CSS&&window.CSS.supports||window.supportsCSS;if(typeof o=="function")T=f.some(function(n){return o.apply(null,n)});else{var t=k.tester.append("image").attr("style",M.STYLE),i=window.getComputedStyle(t.node()).imageRendering;T=f.some(function(n){var r=n[1];return i===r||i===r.toLowerCase()}),t.remove()}}return T}},72736:function(ee,R,e){var M=e(33428),k=e(3400),s=k.strTranslate,T=e(9616),b=e(84284).LINE_SPACING,f=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;R.convertToTspans=function(z,j,I){var N=z.text(),W=!z.attr("data-notex")&&j&&j._context.typesetMath&&typeof MathJax<"u"&&N.match(f),F=M.select(z.node().parentNode);if(!F.empty()){var U=z.attr("class")?z.attr("class").split(" ")[0]:"text";return U+="-math",F.selectAll("svg."+U).remove(),F.selectAll("g."+U+"-group").remove(),z.style("display",null).attr({"data-unformatted":N,"data-math":"N"}),W?(j&&j._promises||[]).push(new Promise(function(ne){z.style("display","none");var $=parseInt(z.node().style.fontSize,10),K={fontSize:$};(function(Q,Z,X){var te,ae,se,ce,fe=parseInt((MathJax.version||"").split(".")[0]);if(fe===2||fe===3){var pe=function(){var me="math-output-"+k.randstr({},64),be=(ce=M.select("body").append("div").attr({id:me}).style({visibility:"hidden",position:"absolute","font-size":Z.fontSize+"px"}).text(Q.replace(o,"\\lt ").replace(t,"\\gt "))).node();return fe===2?MathJax.Hub.Typeset(be):MathJax.typeset([be])},ge=function(){var me=ce.select(fe===2?".MathJax_SVG":".MathJax"),be=!me.empty()&&ce.select("svg").node();if(be){var ke,ze=be.getBoundingClientRect();ke=fe===2?M.select("body").select("#MathJax_SVG_glyphs"):me.select("defs"),X(me,ke,ze)}else k.log("There was an error in the tex syntax.",Q),X();ce.remove()};fe===2?MathJax.Hub.Queue(function(){return ae=k.extendDeepAll({},MathJax.Hub.config),se=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:i},displayAlign:"left"})},function(){if((te=MathJax.Hub.config.menuSettings.renderer)!=="SVG")return MathJax.Hub.setRenderer("SVG")},pe,ge,function(){if(te!=="SVG")return MathJax.Hub.setRenderer(te)},function(){return se!==void 0&&(MathJax.Hub.processSectionDelay=se),MathJax.Hub.Config(ae)}):fe===3&&(ae=k.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=i,(te=MathJax.config.startup.output)!=="svg"&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){pe(),ge(),te!=="svg"&&(MathJax.config.startup.output=te),MathJax.config=ae}))}else k.warn("No MathJax version:",MathJax.version)})(W[2],K,function(Q,Z,X){F.selectAll("svg."+U).remove(),F.selectAll("g."+U+"-group").remove();var te=Q&&Q.select("svg");if(!te||!te.node())return H(),void ne();var ae=F.append("g").classed(U+"-group",!0).attr({"pointer-events":"none","data-unformatted":N,"data-math":"Y"});ae.node().appendChild(te.node()),Z&&Z.node()&&te.node().insertBefore(Z.node().cloneNode(!0),te.node().firstChild);var se=X.width,ce=X.height;te.attr({class:U,height:ce,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var fe=z.node().style.fill||"black",pe=te.select("g");pe.attr({fill:fe,stroke:fe});var ge=pe.node().getBoundingClientRect(),me=ge.width,be=ge.height;(me>se||be>ce)&&(te.style("overflow","hidden"),me=(ge=te.node().getBoundingClientRect()).width,be=ge.height);var ke=+z.attr("x"),ze=+z.attr("y"),ve=-($||z.node().getBoundingClientRect().height)/4;if(U[0]==="y")ae.attr({transform:"rotate("+[-90,ke,ze]+")"+s(-me/2,ve-be/2)});else if(U[0]==="l")ze=ve-be/2;else if(U[0]==="a"&&U.indexOf("atitle")!==0)ke=0,ze=ve;else{var oe=z.attr("text-anchor");ke-=me*(oe==="middle"?.5:oe==="end"?1:0),ze=ze+ve-be/2}te.attr({x:ke,y:ze}),I&&I.call(z,ae),ne(ae)})})):H(),z}function H(){F.empty()||(U=z.attr("class")+"-math",F.select("svg."+U).remove()),z.text("").style("white-space","pre");var ne=function($,K){K=K.replace(h," ");var Q,Z=!1,X=[],te=-1;function ae(){te++;var ye=document.createElementNS(T.svg,"tspan");M.select(ye).attr({class:"line",dy:te*b+"em"}),$.appendChild(ye),Q=ye;var we=X;if(X=[{node:ye}],we.length>1)for(var Me=1;Me<we.length;Me++)se(we[Me])}function se(ye){var we,Me=ye.type,Oe={};if(Me==="a"){we="a";var Ie=ye.target,de=ye.href,_e=ye.popup;de&&(Oe={"xlink:xlink:show":Ie==="_blank"||Ie.charAt(0)!=="_"?"new":"replace",target:Ie,"xlink:xlink:href":de},_e&&(Oe.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+_e+'");return false;'))}else we="tspan";ye.style&&(Oe.style=ye.style);var Ae=document.createElementNS(T.svg,we);if(Me==="sup"||Me==="sub"){ce(Q,l),Q.appendChild(Ae);var Pe=document.createElementNS(T.svg,"tspan");ce(Pe,l),M.select(Pe).attr("dy",a[Me]),Oe.dy=r[Me],Q.appendChild(Ae),Q.appendChild(Pe)}else Q.appendChild(Ae);M.select(Ae).attr(Oe),Q=ye.node=Ae,X.push(ye)}function ce(ye,we){ye.appendChild(document.createTextNode(we))}function fe(ye){if(X.length!==1){var we=X.pop();ye!==we.type&&k.log("Start tag <"+we.type+"> doesnt match end tag <"+ye+">. Pretending it did match.",K),Q=X[X.length-1].node}else k.log("Ignoring unexpected end tag </"+ye+">.",K)}p.test(K)?ae():(Q=$,X=[{node:$}]);for(var pe=K.split(c),ge=0;ge<pe.length;ge++){var me=pe[ge],be=me.match(x),ke=be&&be[2].toLowerCase(),ze=n[ke];if(ke==="br")ae();else if(ze===void 0)ce(Q,E(me));else if(be[1])fe(ke);else{var ve=be[4],oe={type:ke},ie=_(ve,v);if(ie?(ie=ie.replace(d,"$1 fill:"),ze&&(ie+=";"+ze)):ze&&(ie=ze),ie&&(oe.style=ie),ke==="a"){Z=!0;var he=_(ve,g);if(he){var Se=C(he);Se&&(oe.href=Se,oe.target=_(ve,y)||"_blank",oe.popup=_(ve,m))}}se(oe)}}return Z}(z.node(),N);ne&&z.style("pointer-events","all"),R.positionText(z),I&&I.call(z)}};var o=/(<|&lt;|&#60;)/g,t=/(>|&gt;|&#62;)/g,i=[["$","$"],["\\(","\\)"]],n={sup:"font-size:70%",sub:"font-size:70%",s:"text-decoration:line-through",u:"text-decoration:underline",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},r={sub:"0.3em",sup:"-0.6em"},a={sub:"-0.21em",sup:"0.42em"},l="",u=["http:","https:","mailto:","",void 0,":"],h=R.NEWLINES=/(\r\n?|\n)/g,c=/(<[^<>]*>)/,x=/<(\/?)([^ >]*)(\s+(.*))?>/i,p=/<br(\s+.*)?>/i;R.BR_TAG_ALL=/<br(\s+.*)?>/gi;var v=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,g=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,y=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,m=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function _(z,j){if(!z)return null;var I=z.match(j),N=I&&(I[3]||I[4]);return N&&E(N)}var d=/(^|;)\s*color:/;R.plainText=function(z,j){for(var I=(j=j||{}).len!==void 0&&j.len!==-1?j.len:1/0,N=j.allowedTags!==void 0?j.allowedTags:["br"],W=z.split(c),F=[],U="",H=0,ne=0;ne<W.length;ne++){var $=W[ne],K=$.match(x),Q=K&&K[2].toLowerCase();if(Q)N.indexOf(Q)!==-1&&(F.push($),U=Q);else{var Z=$.length;if(H+Z<I)F.push($),H+=Z;else if(H<I){var X=I-H;U&&(U!=="br"||X<=3||Z<=3)&&F.pop(),I>3?F.push($.substr(0,X-3)+"..."):F.push($.substr(0,X));break}U=""}}return F.join("")};var S={mu:"",amp:"&",lt:"<",gt:">",nbsp:"",times:"",plusmn:"",deg:""},w=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function E(z){return z.replace(w,function(j,I){return(I.charAt(0)==="#"?function(N){if(!(N>1114111)){var W=String.fromCodePoint;if(W)return W(N);var F=String.fromCharCode;return N<=65535?F(N):F(55232+(N>>10),N%1024+56320)}}(I.charAt(1)==="x"?parseInt(I.substr(2),16):parseInt(I.substr(1),10)):S[I])||j})}function C(z){var j=encodeURI(decodeURI(z)),I=document.createElement("a"),N=document.createElement("a");I.href=z,N.href=j;var W=I.protocol,F=N.protocol;return u.indexOf(W)!==-1&&u.indexOf(F)!==-1?j:""}function O(z,j,I){var N,W,F,U=I.horizontalAlign,H=I.verticalAlign||"top",ne=z.node().getBoundingClientRect(),$=j.node().getBoundingClientRect();return W=H==="bottom"?function(){return ne.bottom-N.height}:H==="middle"?function(){return ne.top+(ne.height-N.height)/2}:function(){return ne.top},F=U==="right"?function(){return ne.right-N.width}:U==="center"?function(){return ne.left+(ne.width-N.width)/2}:function(){return ne.left},function(){N=this.node().getBoundingClientRect();var K=F()-$.left,Q=W()-$.top,Z=I.gd||{};if(I.gd){Z._fullLayout._calcInverseTransform(Z);var X=k.apply3DTransform(Z._fullLayout._invTransform)(K,Q);K=X[0],Q=X[1]}return this.style({top:Q+"px",left:K+"px","z-index":1e3}),this}}R.convertEntities=E,R.sanitizeHTML=function(z){z=z.replace(h," ");for(var j=document.createElement("p"),I=j,N=[],W=z.split(c),F=0;F<W.length;F++){var U=W[F],H=U.match(x),ne=H&&H[2].toLowerCase();if(ne in n)if(H[1])N.length&&(I=N.pop());else{var $=H[4],K=_($,v),Q=K?{style:K}:{};if(ne==="a"){var Z=_($,g);if(Z){var X=C(Z);if(X){Q.href=X;var te=_($,y);te&&(Q.target=te)}}}var ae=document.createElement(ne);I.appendChild(ae),M.select(ae).attr(Q),I=ae,N.push(ae)}else I.appendChild(document.createTextNode(E(U)))}return j.innerHTML},R.lineCount=function(z){return z.selectAll("tspan.line").size()||1},R.positionText=function(z,j,I){return z.each(function(){var N=M.select(this);function W(H,ne){return ne===void 0?(ne=N.attr(H))===null&&(N.attr(H,0),ne=0):N.attr(H,ne),ne}var F=W("x",j),U=W("y",I);this.nodeName==="text"&&N.selectAll("tspan.line").attr({x:F,y:U})})};var P="1px ";R.makeTextShadow=function(z){return P+P+P+z+", -"+P+"-"+P+P+z+", "+P+"-"+P+P+z+", -"+P+P+P+z},R.makeEditable=function(z,j){var I=j.gd,N=j.delegate,W=M.dispatch("edit","input","cancel"),F=N||z;if(z.style({"pointer-events":N?"none":"all"}),z.size()!==1)throw new Error("boo");function U(){var ne,$,K,Q,Z;ne=M.select(I).select(".svg-container"),$=ne.append("div"),K=z.node().style,Q=parseFloat(K.fontSize||12),(Z=j.text)===void 0&&(Z=z.attr("data-unformatted")),$.classed("plugin-editable editable",!0).style({position:"absolute","font-family":K.fontFamily||"Arial","font-size":Q,color:j.fill||K.fill||"black",opacity:1,"background-color":j.background||"transparent",outline:"#ffffff33 1px solid",margin:[-Q/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(Z).call(O(z,ne,j)).on("blur",function(){I._editing=!1,z.text(this.textContent).style({opacity:1});var ae,se=M.select(this).attr("class");(ae=se?"."+se.split(" ")[0]+"-math-group":"[class*=-math-group]")&&M.select(z.node().parentNode).select(ae).style({opacity:0});var ce=this.textContent;M.select(this).transition().duration(0).remove(),M.select(document).on("mouseup",null),W.edit.call(z,ce)}).on("focus",function(){var ae=this;I._editing=!0,M.select(document).on("mouseup",function(){if(M.event.target===ae)return!1;document.activeElement===$.node()&&$.node().blur()})}).on("keyup",function(){M.event.which===27?(I._editing=!1,z.style({opacity:1}),M.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),W.cancel.call(z,this.textContent)):(W.input.call(z,this.textContent),M.select(this).call(O(z,ne,j)))}).on("keydown",function(){M.event.which===13&&this.blur()}).call(H),z.style({opacity:0});var X,te=F.attr("class");(X=te?"."+te.split(" ")[0]+"-math-group":"[class*=-math-group]")&&M.select(z.node().parentNode).select(X).style({opacity:0})}function H(ne){var $=ne.node(),K=document.createRange();K.selectNodeContents($);var Q=window.getSelection();Q.removeAllRanges(),Q.addRange(K),$.focus()}return j.immediate?U():F.on("click",U),M.rebind(z,W,"on")}},91200:function(ee,R){var e={};function M(k){k&&k.timer!==null&&(clearTimeout(k.timer),k.timer=null)}R.throttle=function(k,s,T){var b=e[k],f=Date.now();if(!b){for(var o in e)e[o].ts<f-6e4&&delete e[o];b=e[k]={ts:0,timer:null}}function t(){T(),b.ts=Date.now(),b.onDone&&(b.onDone(),b.onDone=null)}M(b),f>b.ts+s?t():b.timer=setTimeout(function(){t(),b.timer=null},s)},R.done=function(k){var s=e[k];return s&&s.timer?new Promise(function(T){var b=s.onDone;s.onDone=function(){b&&b(),T(),s.onDone=null}}):Promise.resolve()},R.clear=function(k){if(k)M(e[k]),delete e[k];else for(var s in e)R.clear(s)}},36896:function(ee,R,e){var M=e(38248);ee.exports=function(k,s){if(k>0)return Math.log(k)/Math.LN10;var T=Math.log(Math.min(s[0],s[1]))/Math.LN10;return M(T)||(T=Math.log(Math.max(s[0],s[1]))/Math.LN10-6),T}},59972:function(ee,R,e){var M=ee.exports={},k=e(79552).locationmodeToLayer,s=e(55712).NO;M.getTopojsonName=function(T){return[T.scope.replace(/ /g,"-"),"_",T.resolution.toString(),"m"].join("")},M.getTopojsonPath=function(T,b){return T+b+".json"},M.getTopojsonFeatures=function(T,b){var f=k[T.locationmode],o=b.objects[f];return s(b,o).features}},11680:function(ee){ee.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},6580:function(ee){ee.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},69820:function(ee,R,e){var M=e(24040);ee.exports=function(k){for(var s,T,b=M.layoutArrayContainers,f=M.layoutArrayRegexes,o=k.split("[")[0],t=0;t<f.length;t++)if((T=k.match(f[t]))&&T.index===0){s=T[0];break}if(s||(s=b[b.indexOf(o)]),!s)return!1;var i=k.substr(s.length);return i?!!(T=i.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:s,index:Number(T[1]),property:T[3]||""}:{array:s,index:"",property:""}}},67824:function(ee,R,e){var M=e(92880).extendFlat,k=e(63620),s={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},T={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},b=s.flags.slice().concat(["fullReplot"]),f=T.flags.slice().concat("layoutReplot");function o(n){for(var r={},a=0;a<n.length;a++)r[n[a]]=!1;return r}function t(n,r,a){var l=M({},n);for(var u in l){var h=l[u];k(h)&&(l[u]=i(h,r,0,u))}return a==="from-root"&&(l.editType=r),l}function i(n,r,a,l){if(n.valType){var u=M({},n);if(u.editType=r,Array.isArray(n.items)){u.items=new Array(n.items.length);for(var h=0;h<n.items.length;h++)u.items[h]=i(n.items[h],r)}return u}return t(n,r,l.charAt(0)==="_"?"nested":"from-root")}ee.exports={traces:s,layout:T,traceFlags:function(){return o(b)},layoutFlags:function(){return o(f)},update:function(n,r){var a=r.editType;if(a&&a!=="none")for(var l=a.split("+"),u=0;u<l.length;u++)n[l[u]]=!0},overrideAll:t}},93404:function(ee,R,e){var M=e(38248),k=e(61784),s=e(24040),T=e(3400),b=e(7316),f=e(79811),o=e(76308),t=f.cleanId,i=f.getFromTrace,n=s.traceIs;function r(g,y){var m=g[y],_=y.charAt(0);m&&m!=="paper"&&(g[y]=t(m,_,!0))}function a(g){function y(m,_){var d=g[m],S=g.title&&g.title[_];d&&!S&&(g.title||(g.title={}),g.title[_]=g[m],delete g[m])}g&&(typeof g.title!="string"&&typeof g.title!="number"||(g.title={text:g.title}),y("titlefont","font"),y("titleposition","position"),y("titleside","side"),y("titleoffset","offset"))}function l(g){if(!T.isPlainObject(g))return!1;var y=g.name;return delete g.name,delete g.showlegend,(typeof y=="string"||typeof y=="number")&&String(y)}function u(g,y,m,_){if(m&&!_)return g;if(_&&!m||!g.trim())return y;if(!y.trim())return g;var d,S=Math.min(g.length,y.length);for(d=0;d<S&&g.charAt(d)===y.charAt(d);d++);return g.substr(0,d).trim()}function h(g){var y="middle",m="center";return typeof g=="string"&&(g.indexOf("top")!==-1?y="top":g.indexOf("bottom")!==-1&&(y="bottom"),g.indexOf("left")!==-1?m="left":g.indexOf("right")!==-1&&(m="right")),y+" "+m}function c(g,y){return y in g&&typeof g[y]=="object"&&Object.keys(g[y]).length===0}R.clearPromiseQueue=function(g){Array.isArray(g._promises)&&g._promises.length>0&&T.log("Clearing previous rejected promises from queue."),g._promises=[]},R.cleanLayout=function(g){var y,m;g||(g={}),g.xaxis1&&(g.xaxis||(g.xaxis=g.xaxis1),delete g.xaxis1),g.yaxis1&&(g.yaxis||(g.yaxis=g.yaxis1),delete g.yaxis1),g.scene1&&(g.scene||(g.scene=g.scene1),delete g.scene1);var _=(b.subplotsRegistry.cartesian||{}).attrRegex,d=(b.subplotsRegistry.polar||{}).attrRegex,S=(b.subplotsRegistry.ternary||{}).attrRegex,w=(b.subplotsRegistry.gl3d||{}).attrRegex,E=Object.keys(g);for(y=0;y<E.length;y++){var C=E[y];if(_&&_.test(C)){var O=g[C];O.anchor&&O.anchor!=="free"&&(O.anchor=t(O.anchor)),O.overlaying&&(O.overlaying=t(O.overlaying)),O.type||(O.isdate?O.type="date":O.islog?O.type="log":O.isdate===!1&&O.islog===!1&&(O.type="linear")),O.autorange!=="withzero"&&O.autorange!=="tozero"||(O.autorange=!0,O.rangemode="tozero"),O.insiderange&&delete O.range,delete O.islog,delete O.isdate,delete O.categories,c(O,"domain")&&delete O.domain,O.autotick!==void 0&&(O.tickmode===void 0&&(O.tickmode=O.autotick?"auto":"linear"),delete O.autotick),a(O)}else if(d&&d.test(C))a(g[C].radialaxis);else if(S&&S.test(C)){var P=g[C];a(P.aaxis),a(P.baxis),a(P.caxis)}else if(w&&w.test(C)){var z=g[C],j=z.cameraposition;if(Array.isArray(j)&&j[0].length===4){var I=j[0],N=j[1],W=j[2],F=k([],I),U=[];for(m=0;m<3;++m)U[m]=N[m]+W*F[2+4*m];z.camera={eye:{x:U[0],y:U[1],z:U[2]},center:{x:N[0],y:N[1],z:N[2]},up:{x:0,y:0,z:1}},delete z.cameraposition}a(z.xaxis),a(z.yaxis),a(z.zaxis)}}var H=Array.isArray(g.annotations)?g.annotations.length:0;for(y=0;y<H;y++){var ne=g.annotations[y];T.isPlainObject(ne)&&(ne.ref&&(ne.ref==="paper"?(ne.xref="paper",ne.yref="paper"):ne.ref==="data"&&(ne.xref="x",ne.yref="y"),delete ne.ref),r(ne,"xref"),r(ne,"yref"))}var $=Array.isArray(g.shapes)?g.shapes.length:0;for(y=0;y<$;y++){var K=g.shapes[y];T.isPlainObject(K)&&(r(K,"xref"),r(K,"yref"))}var Q=Array.isArray(g.images)?g.images.length:0;for(y=0;y<Q;y++){var Z=g.images[y];T.isPlainObject(Z)&&(r(Z,"xref"),r(Z,"yref"))}var X=g.legend;return X&&(X.x>3?(X.x=1.02,X.xanchor="left"):X.x<-2&&(X.x=-.02,X.xanchor="right"),X.y>3?(X.y=1.02,X.yanchor="bottom"):X.y<-2&&(X.y=-.02,X.yanchor="top")),a(g),g.dragmode==="rotate"&&(g.dragmode="orbit"),o.clean(g),g.template&&g.template.layout&&R.cleanLayout(g.template.layout),g},R.cleanData=function(g){for(var y=0;y<g.length;y++){var m,_=g[y];if(_.type==="histogramy"&&"xbins"in _&&!("ybins"in _)&&(_.ybins=_.xbins,delete _.xbins),_.error_y&&"opacity"in _.error_y){var d=o.defaults,S=_.error_y.color||(n(_,"bar")?o.defaultLine:d[y%d.length]);_.error_y.color=o.addOpacity(o.rgb(S),o.opacity(S)*_.error_y.opacity),delete _.error_y.opacity}if("bardir"in _&&(_.bardir!=="h"||!n(_,"bar")&&_.type.substr(0,9)!=="histogram"||(_.orientation="h",R.swapXYData(_)),delete _.bardir),_.type==="histogramy"&&R.swapXYData(_),_.type!=="histogramx"&&_.type!=="histogramy"||(_.type="histogram"),"scl"in _&&!("colorscale"in _)&&(_.colorscale=_.scl,delete _.scl),"reversescl"in _&&!("reversescale"in _)&&(_.reversescale=_.reversescl,delete _.reversescl),_.xaxis&&(_.xaxis=t(_.xaxis,"x")),_.yaxis&&(_.yaxis=t(_.yaxis,"y")),n(_,"gl3d")&&_.scene&&(_.scene=b.subplotsRegistry.gl3d.cleanId(_.scene)),!n(_,"pie-like")&&!n(_,"bar-like"))if(Array.isArray(_.textposition))for(m=0;m<_.textposition.length;m++)_.textposition[m]=h(_.textposition[m]);else _.textposition&&(_.textposition=h(_.textposition));var w=s.getModule(_);if(w&&w.colorbar){var E=w.colorbar.container,C=E?_[E]:_;C&&C.colorscale&&(C.colorscale==="YIGnBu"&&(C.colorscale="YlGnBu"),C.colorscale==="YIOrRd"&&(C.colorscale="YlOrRd"))}if(_.type==="surface"&&T.isPlainObject(_.contours)){var O=["x","y","z"];for(m=0;m<O.length;m++){var P=_.contours[O[m]];T.isPlainObject(P)&&(P.highlightColor&&(P.highlightcolor=P.highlightColor,delete P.highlightColor),P.highlightWidth&&(P.highlightwidth=P.highlightWidth,delete P.highlightWidth))}}if(_.type==="candlestick"||_.type==="ohlc"){var z=(_.increasing||{}).showlegend!==!1,j=(_.decreasing||{}).showlegend!==!1,I=l(_.increasing),N=l(_.decreasing);if(I!==!1&&N!==!1){var W=u(I,N,z,j);W&&(_.name=W)}else!I&&!N||_.name||(_.name=I||N)}if(Array.isArray(_.transforms)){var F=_.transforms;for(m=0;m<F.length;m++){var U=F[m];if(T.isPlainObject(U))switch(U.type){case"filter":U.filtersrc&&(U.target=U.filtersrc,delete U.filtersrc),U.calendar&&(U.valuecalendar||(U.valuecalendar=U.calendar),delete U.calendar);break;case"groupby":if(U.styles=U.styles||U.style,U.styles&&!Array.isArray(U.styles)){var H=U.styles,ne=Object.keys(H);U.styles=[];for(var $=0;$<ne.length;$++)U.styles.push({target:ne[$],value:H[ne[$]]})}}}}c(_,"line")&&delete _.line,"marker"in _&&(c(_.marker,"line")&&delete _.marker.line,c(_,"marker")&&delete _.marker),o.clean(_),_.autobinx&&(delete _.autobinx,delete _.xbins),_.autobiny&&(delete _.autobiny,delete _.ybins),a(_),_.colorbar&&a(_.colorbar),_.marker&&_.marker.colorbar&&a(_.marker.colorbar),_.line&&_.line.colorbar&&a(_.line.colorbar),_.aaxis&&a(_.aaxis),_.baxis&&a(_.baxis)}},R.swapXYData=function(g){var y;if(T.swapAttrs(g,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(g.z)&&Array.isArray(g.z[0])&&(g.transpose?delete g.transpose:g.transpose=!0),g.error_x&&g.error_y){var m=g.error_y,_="copy_ystyle"in m?m.copy_ystyle:!(m.color||m.thickness||m.width);T.swapAttrs(g,["error_?.copy_ystyle"]),_&&T.swapAttrs(g,["error_?.color","error_?.thickness","error_?.width"])}if(typeof g.hoverinfo=="string"){var d=g.hoverinfo.split("+");for(y=0;y<d.length;y++)d[y]==="x"?d[y]="y":d[y]==="y"&&(d[y]="x");g.hoverinfo=d.join("+")}},R.coerceTraceIndices=function(g,y){if(M(y))return[y];if(!Array.isArray(y)||!y.length)return g.data.map(function(d,S){return S});if(Array.isArray(y)){for(var m=[],_=0;_<y.length;_++)T.isIndex(y[_],g.data.length)?m.push(y[_]):T.warn("trace index (",y[_],") is not a number or is out of bounds");return m}return y},R.manageArrayContainers=function(g,y,m){var _=g.obj,d=g.parts,S=d.length,w=d[S-1],E=M(w);if(E&&y===null){var C=d.slice(0,S-1).join(".");T.nestedProperty(_,C).get().splice(w,1)}else E&&g.get()===void 0&&g.get()===void 0&&(m[g.astr]=null),g.set(y)};var x=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function p(g){var y=g.search(x);if(y>0)return g.substr(0,y)}R.hasParent=function(g,y){for(var m=p(y);m;){if(m in g)return!0;m=p(m)}return!1};var v=["x","y","z"];R.clearAxisTypes=function(g,y,m){for(var _=0;_<y.length;_++)for(var d=g._fullData[_],S=0;S<3;S++){var w=i(g,d,v[S]);if(w&&w.type!=="log"){var E=w._name,C=w._id.substr(1);if(C.substr(0,5)==="scene"){if(m[C]!==void 0)continue;E=C+"."+E}var O=E+".type";m[E]===void 0&&m[O]===void 0&&T.nestedProperty(g.layout,O).set(null)}}}},22448:function(ee,R,e){var M=e(36424);R._doPlot=M._doPlot,R.newPlot=M.newPlot,R.restyle=M.restyle,R.relayout=M.relayout,R.redraw=M.redraw,R.update=M.update,R._guiRestyle=M._guiRestyle,R._guiRelayout=M._guiRelayout,R._guiUpdate=M._guiUpdate,R._storeDirectGUIEdit=M._storeDirectGUIEdit,R.react=M.react,R.extendTraces=M.extendTraces,R.prependTraces=M.prependTraces,R.addTraces=M.addTraces,R.deleteTraces=M.deleteTraces,R.moveTraces=M.moveTraces,R.purge=M.purge,R.addFrames=M.addFrames,R.deleteFrames=M.deleteFrames,R.animate=M.animate,R.setPlotConfig=M.setPlotConfig;var k=e(52200).getGraphDiv,s=e(4016).eraseActiveShape;R.deleteActiveShape=function(b){return s(k(b))},R.toImage=e(67024),R.validate=e(21480),R.downloadImage=e(39792);var T=e(94828);R.makeTemplate=T.makeTemplate,R.validateTemplate=T.validateTemplate},17680:function(ee,R,e){var M=e(63620),k=e(16628),s=e(24248),T=e(14952).sorterAsc,b=e(24040);R.containerArrayMatch=e(69820);var f=R.isAddVal=function(t){return t==="add"||M(t)},o=R.isRemoveVal=function(t){return t===null||t==="remove"};R.applyContainerArrayChanges=function(t,i,n,r,a){var l=i.astr,u=b.getComponentMethod(l,"supplyLayoutDefaults"),h=b.getComponentMethod(l,"draw"),c=b.getComponentMethod(l,"drawOne"),x=r.replot||r.recalc||u===k||h===k,p=t.layout,v=t._fullLayout;if(n[""]){Object.keys(n).length>1&&s.warn("Full array edits are incompatible with other edits",l);var g=n[""][""];if(o(g))i.set(null);else{if(!Array.isArray(g))return s.warn("Unrecognized full array edit value",l,g),!0;i.set(g)}return!x&&(u(p,v),h(t),!0)}var y,m,_,d,S,w,E,C,O=Object.keys(n).map(Number).sort(T),P=i.get(),z=P||[],j=a(v,l).get(),I=[],N=-1,W=z.length;for(y=0;y<O.length;y++)if(d=n[_=O[y]],S=Object.keys(d),w=d[""],E=f(w),_<0||_>z.length-(E?0:1))s.warn("index out of range",l,_);else if(w!==void 0)S.length>1&&s.warn("Insertion & removal are incompatible with edits to the same index.",l,_),o(w)?I.push(_):E?(w==="add"&&(w={}),z.splice(_,0,w),j&&j.splice(_,0,{})):s.warn("Unrecognized full object edit value",l,_,w),N===-1&&(N=_);else for(m=0;m<S.length;m++)C=l+"["+_+"].",a(z[_],S[m],C).set(d[S[m]]);for(y=I.length-1;y>=0;y--)z.splice(I[y],1),j&&j.splice(I[y],1);if(z.length?P||i.set(z):i.set(null),x)return!1;if(u(p,v),c!==k){var F;if(N===-1)F=O;else{for(W=Math.max(z.length,W),F=[],y=0;y<O.length&&!((_=O[y])>=N);y++)F.push(_);for(y=N;y<W;y++)F.push(y)}for(y=0;y<F.length;y++)c(t,F[y])}else h(t);return!0}},36424:function(ee,R,e){var M=e(33428),k=e(38248),s=e(52264),T=e(3400),b=T.nestedProperty,f=e(95924),o=e(94552),t=e(24040),i=e(73060),n=e(7316),r=e(54460),a=e(96312),l=e(94724),u=e(43616),h=e(76308),c=e(42464).initInteractions,x=e(9616),p=e(22676).clearOutline,v=e(20556).dfltConfig,g=e(17680),y=e(93404),m=e(39172),_=e(67824),d=e(33816).AX_NAME_PATTERN,S=0;function w(ye){var we=ye._fullLayout;we._redrawFromAutoMarginCount?we._redrawFromAutoMarginCount--:ye.emit("plotly_afterplot")}function E(ye,we){try{ye._fullLayout._paper.style("background",we)}catch(Me){T.error(Me)}}function C(ye,we){E(ye,h.combine(we,"white"))}function O(ye,we){if(!ye._context){ye._context=T.extendDeep({},v);var Me=M.select("base");ye._context._baseUrl=Me.size()&&Me.attr("href")?window.location.href.split("#")[0]:""}var Oe,Ie,de,_e=ye._context;if(we){for(Ie=Object.keys(we),Oe=0;Oe<Ie.length;Oe++)(de=Ie[Oe])!=="editable"&&de!=="edits"&&de in _e&&(de==="setBackground"&&we[de]==="opaque"?_e[de]=C:_e[de]=we[de]);we.plot3dPixelRatio&&!_e.plotGlPixelRatio&&(_e.plotGlPixelRatio=_e.plot3dPixelRatio);var Ae=we.editable;if(Ae!==void 0)for(_e.editable=Ae,Ie=Object.keys(_e.edits),Oe=0;Oe<Ie.length;Oe++)_e.edits[Ie[Oe]]=Ae;if(we.edits)for(Ie=Object.keys(we.edits),Oe=0;Oe<Ie.length;Oe++)(de=Ie[Oe])in _e.edits&&(_e.edits[de]=we.edits[de]);_e._exportedPlot=we._exportedPlot}_e.staticPlot&&(_e.editable=!1,_e.edits={},_e.autosizable=!1,_e.scrollZoom=!1,_e.doubleClick=!1,_e.showTips=!1,_e.showLink=!1,_e.displayModeBar=!1),_e.displayModeBar!=="hover"||s||(_e.displayModeBar=!0),_e.setBackground!=="transparent"&&typeof _e.setBackground=="function"||(_e.setBackground=E),_e._hasZeroHeight=_e._hasZeroHeight||ye.clientHeight===0,_e._hasZeroWidth=_e._hasZeroWidth||ye.clientWidth===0;var Pe=_e.scrollZoom,Ee=_e._scrollZoom={};if(Pe===!0)Ee.cartesian=1,Ee.gl3d=1,Ee.geo=1,Ee.mapbox=1;else if(typeof Pe=="string"){var Fe=Pe.split("+");for(Oe=0;Oe<Fe.length;Oe++)Ee[Fe[Oe]]=1}else Pe!==!1&&(Ee.gl3d=1,Ee.geo=1,Ee.mapbox=1)}function P(ye,we){var Me,Oe,Ie=we+1,de=[];for(Me=0;Me<ye.length;Me++)(Oe=ye[Me])<0?de.push(Ie+Oe):de.push(Oe);return de}function z(ye,we,Me){var Oe,Ie;for(Oe=0;Oe<we.length;Oe++){if((Ie=we[Oe])!==parseInt(Ie,10))throw new Error("all values in "+Me+" must be integers");if(Ie>=ye.data.length||Ie<-ye.data.length)throw new Error(Me+" must be valid indices for gd.data.");if(we.indexOf(Ie,Oe+1)>-1||Ie>=0&&we.indexOf(-ye.data.length+Ie)>-1||Ie<0&&we.indexOf(ye.data.length+Ie)>-1)throw new Error("each index in "+Me+" must be unique.")}}function j(ye,we,Me){if(!Array.isArray(ye.data))throw new Error("gd.data must be an array.");if(we===void 0)throw new Error("currentIndices is a required argument.");if(Array.isArray(we)||(we=[we]),z(ye,we,"currentIndices"),Me===void 0||Array.isArray(Me)||(Me=[Me]),Me!==void 0&&z(ye,Me,"newIndices"),Me!==void 0&&we.length!==Me.length)throw new Error("current and new indices must be of equal length.")}function I(ye,we,Me,Oe,Ie){(function(Ye,tt,nt,ht){var vt=T.isPlainObject(ht);if(!Array.isArray(Ye.data))throw new Error("gd.data must be an array");if(!T.isPlainObject(tt))throw new Error("update must be a key:value object");if(nt===void 0)throw new Error("indices must be an integer or array of integers");for(var pt in z(Ye,nt,"indices"),tt){if(!Array.isArray(tt[pt])||tt[pt].length!==nt.length)throw new Error("attribute "+pt+" must be an array of length equal to indices array length");if(vt&&(!(pt in ht)||!Array.isArray(ht[pt])||ht[pt].length!==tt[pt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}})(ye,we,Me,Oe);for(var de=function(Ye,tt,nt,ht){var vt,pt,Qe,Ke,Mt,Ot=T.isPlainObject(ht),Pt=[];for(var St in Array.isArray(nt)||(nt=[nt]),nt=P(nt,Ye.data.length-1),tt)for(var He=0;He<nt.length;He++){if(vt=Ye.data[nt[He]],pt=(Qe=b(vt,St)).get(),Ke=tt[St][He],!T.isArrayOrTypedArray(Ke))throw new Error("attribute: "+St+" index: "+He+" must be an array");if(!T.isArrayOrTypedArray(pt))throw new Error("cannot extend missing or non-array attribute: "+St);if(pt.constructor!==Ke.constructor)throw new Error("cannot extend array with an array of a different type: "+St);Mt=Ot?ht[St][He]:ht,k(Mt)||(Mt=-1),Pt.push({prop:Qe,target:pt,insert:Ke,maxp:Math.floor(Mt)})}return Pt}(ye,we,Me,Oe),_e={},Ae={},Pe=0;Pe<de.length;Pe++){var Ee=de[Pe].prop,Fe=de[Pe].maxp,Ve=Ie(de[Pe].target,de[Pe].insert,Fe);Ee.set(Ve[0]),Array.isArray(_e[Ee.astr])||(_e[Ee.astr]=[]),_e[Ee.astr].push(Ve[1]),Array.isArray(Ae[Ee.astr])||(Ae[Ee.astr]=[]),Ae[Ee.astr].push(de[Pe].target.length)}return{update:_e,maxPoints:Ae}}function N(ye,we){var Me=new ye.constructor(ye.length+we.length);return Me.set(ye),Me.set(we,ye.length),Me}function W(ye,we,Me,Oe){ye=T.getGraphDiv(ye),y.clearPromiseQueue(ye);var Ie={};if(typeof we=="string")Ie[we]=Me;else{if(!T.isPlainObject(we))return T.warn("Restyle fail.",we,Me,Oe),Promise.reject();Ie=T.extendFlat({},we),Oe===void 0&&(Oe=Me)}Object.keys(Ie).length&&(ye.changed=!0);var de=y.coerceTraceIndices(ye,Oe),_e=ne(ye,Ie,de),Ae=_e.flags;Ae.calc&&(ye.calcdata=void 0),Ae.clearAxisTypes&&y.clearAxisTypes(ye,de,{});var Pe=[];Ae.fullReplot?Pe.push(R._doPlot):(Pe.push(n.previousPromises),n.supplyDefaults(ye),Ae.markerSize&&(n.doCalcdata(ye),Z(Pe)),Ae.style&&Pe.push(m.doTraceStyle),Ae.colorbars&&Pe.push(m.doColorBars),Pe.push(w)),Pe.push(n.rehover,n.redrag,n.reselect),o.add(ye,W,[ye,_e.undoit,_e.traces],W,[ye,_e.redoit,_e.traces]);var Ee=T.syncOrAsync(Pe,ye);return Ee&&Ee.then||(Ee=Promise.resolve()),Ee.then(function(){return ye.emit("plotly_restyle",_e.eventData),ye})}function F(ye){return ye===void 0?null:ye}function U(ye,we){return we?function(Me,Oe,Ie){var de=b(Me,Oe),_e=de.set;return de.set=function(Ae){H((Ie||"")+Oe,de.get(),Ae,ye),_e(Ae)},de}:b}function H(ye,we,Me,Oe){if(Array.isArray(we)||Array.isArray(Me))for(var Ie=Array.isArray(we)?we:[],de=Array.isArray(Me)?Me:[],_e=Math.max(Ie.length,de.length),Ae=0;Ae<_e;Ae++)H(ye+"["+Ae+"]",Ie[Ae],de[Ae],Oe);else if(T.isPlainObject(we)||T.isPlainObject(Me)){var Pe=T.isPlainObject(we)?we:{},Ee=T.isPlainObject(Me)?Me:{},Fe=T.extendFlat({},Pe,Ee);for(var Ve in Fe)H(ye+"."+Ve,Pe[Ve],Ee[Ve],Oe)}else Oe[ye]===void 0&&(Oe[ye]=F(we))}function ne(ye,we,Me){var Oe,Ie=ye._fullLayout,de=ye._fullData,_e=ye.data,Ae=Ie._guiEditing,Pe=U(Ie._preGUI,Ae),Ee=T.extendDeepAll({},we);$(we);var Fe,Ve=_.traceFlags(),Ye={},tt={};function nt(){return Me.map(function(){})}function ht(an){var rn=r.id2name(an);Fe.indexOf(rn)===-1&&Fe.push(rn)}function vt(an){return"LAYOUT"+an+".autorange"}function pt(an){return"LAYOUT"+an+".range"}function Qe(an){for(var rn=an;rn<de.length;rn++)if(de[rn]._input===_e[an])return de[rn]}function Ke(an,rn,qt){if(Array.isArray(an))an.forEach(function(on){Ke(on,rn,qt)});else if(!(an in we)&&!y.hasParent(we,an)){var Kt;if(an.substr(0,6)==="LAYOUT")Kt=Pe(ye.layout,an.replace("LAYOUT",""));else{var xn=Me[qt];Kt=U(Ie._tracePreGUI[Qe(xn)._fullInput.uid],Ae)(_e[xn],an)}an in tt||(tt[an]=nt()),tt[an][qt]===void 0&&(tt[an][qt]=F(Kt.get())),rn!==void 0&&Kt.set(rn)}}function Mt(an){return function(rn){return de[rn][an]}}function Ot(an){return function(rn,qt){return rn===!1?de[Me[qt]][an]:null}}for(var Pt in we){if(y.hasParent(we,Pt))throw new Error("cannot set "+Pt+" and a parent attribute simultaneously");var St,He,We,Be,Ge,ot,it=we[Pt];if(Pt!=="autobinx"&&Pt!=="autobiny"||(Pt=Pt.charAt(Pt.length-1)+"bins",it=Array.isArray(it)?it.map(Ot(Pt)):it===!1?Me.map(Mt(Pt)):null),Ye[Pt]=it,Pt.substr(0,6)!=="LAYOUT"){for(tt[Pt]=nt(),Oe=0;Oe<Me.length;Oe++)if(St=_e[Me[Oe]],He=Qe(Me[Oe]),Be=(We=U(Ie._tracePreGUI[He._fullInput.uid],Ae)(St,Pt)).get(),(Ge=Array.isArray(it)?it[Oe%it.length]:it)!==void 0){var dt=We.parts[We.parts.length-1],gt=Pt.substr(0,Pt.length-dt.length-1),je=gt?gt+".":"",Re=gt?b(He,gt).get():He;if((ot=i.getTraceValObject(He,We.parts))&&ot.impliedEdits&&Ge!==null)for(var rt in ot.impliedEdits)Ke(T.relativeAttr(Pt,rt),ot.impliedEdits[rt],Oe);else if(dt!=="thicknessmode"&&dt!=="lenmode"||Be===Ge||Ge!=="fraction"&&Ge!=="pixels"||!Re){if(Pt==="type"&&(Ge==="pie"!=(Be==="pie")||Ge==="funnelarea"!=(Be==="funnelarea"))){var ct="x",ut="y";Ge!=="bar"&&Be!=="bar"||St.orientation!=="h"||(ct="y",ut="x"),T.swapAttrs(St,["?","?src"],"labels",ct),T.swapAttrs(St,["d?","?0"],"label",ct),T.swapAttrs(St,["?","?src"],"values",ut),Be==="pie"||Be==="funnelarea"?(b(St,"marker.color").set(b(St,"marker.colors").get()),Ie._pielayer.selectAll("g.trace").remove()):t.traceIs(St,"cartesian")&&b(St,"marker.colors").set(b(St,"marker.color").get())}}else{var et=Ie._size,xt=Re.orient,mt=xt==="top"||xt==="bottom";if(dt==="thicknessmode"){var Tt=mt?et.h:et.w;Ke(je+"thickness",Re.thickness*(Ge==="fraction"?1/Tt:Tt),Oe)}else{var yt=mt?et.w:et.h;Ke(je+"len",Re.len*(Ge==="fraction"?1/yt:yt),Oe)}}if(tt[Pt][Oe]=F(Be),["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(Pt)!==-1){if(Pt==="orientation"){We.set(Ge);var bt=St.x&&!St.y?"h":"v";if((We.get()||bt)===He.orientation)continue}else Pt==="orientationaxes"&&(St.orientation={v:"h",h:"v"}[He.orientation]);y.swapXYData(St),Ve.calc=Ve.clearAxisTypes=!0}else n.dataArrayContainers.indexOf(We.parts[0])!==-1?(y.manageArrayContainers(We,Ge,tt),Ve.calc=!0):(ot?ot.arrayOk&&!t.traceIs(He,"regl")&&(T.isArrayOrTypedArray(Ge)||T.isArrayOrTypedArray(Be))?Ve.calc=!0:_.update(Ve,ot):Ve.calc=!0,We.set(Ge))}if(["swapxyaxes","orientationaxes"].indexOf(Pt)!==-1&&r.swap(ye,Me),Pt==="orientationaxes"){var zt=b(ye.layout,"hovermode"),Ut=zt.get();Ut==="x"?zt.set("y"):Ut==="y"?zt.set("x"):Ut==="x unified"?zt.set("y unified"):Ut==="y unified"&&zt.set("x unified")}if(["orientation","type"].indexOf(Pt)!==-1){for(Fe=[],Oe=0;Oe<Me.length;Oe++){var en=_e[Me[Oe]];t.traceIs(en,"cartesian")&&(ht(en.xaxis||"x"),ht(en.yaxis||"y"))}Ke(Fe.map(vt),!0,0),Ke(Fe.map(pt),[0,1],0)}}else We=Pe(ye.layout,Pt.replace("LAYOUT","")),tt[Pt]=[F(We.get())],We.set(Array.isArray(it)?it[0]:it),Ve.calc=!0}return(Ve.calc||Ve.plot)&&(Ve.fullReplot=!0),{flags:Ve,undoit:tt,redoit:Ye,traces:Me,eventData:T.extendDeepNoArrays([],[Ee,Me])}}function $(ye){var we,Me,Oe,Ie=T.counterRegex("axis",".title",!1,!1),de=/colorbar\.title$/,_e=Object.keys(ye);for(we=0;we<_e.length;we++)Me=_e[we],Oe=ye[Me],Me!=="title"&&!Ie.test(Me)&&!de.test(Me)||typeof Oe!="string"&&typeof Oe!="number"?Me.indexOf("titlefont")>-1&&Me.indexOf("grouptitlefont")===-1?Ae(Me,Me.replace("titlefont","title.font")):Me.indexOf("titleposition")>-1?Ae(Me,Me.replace("titleposition","title.position")):Me.indexOf("titleside")>-1?Ae(Me,Me.replace("titleside","title.side")):Me.indexOf("titleoffset")>-1&&Ae(Me,Me.replace("titleoffset","title.offset")):Ae(Me,Me.replace("title","title.text"));function Ae(Pe,Ee){ye[Ee]=ye[Pe],delete ye[Pe]}}function K(ye,we,Me){ye=T.getGraphDiv(ye),y.clearPromiseQueue(ye);var Oe={};if(typeof we=="string")Oe[we]=Me;else{if(!T.isPlainObject(we))return T.warn("Relayout fail.",we,Me),Promise.reject();Oe=T.extendFlat({},we)}Object.keys(Oe).length&&(ye.changed=!0);var Ie=se(ye,Oe),de=Ie.flags;de.calc&&(ye.calcdata=void 0);var _e=[n.previousPromises];de.layoutReplot?_e.push(m.layoutReplot):Object.keys(Oe).length&&(Q(ye,de,Ie)||n.supplyDefaults(ye),de.legend&&_e.push(m.doLegend),de.layoutstyle&&_e.push(m.layoutStyles),de.axrange&&Z(_e,Ie.rangesAltered),de.ticks&&_e.push(m.doTicksRelayout),de.modebar&&_e.push(m.doModeBar),de.camera&&_e.push(m.doCamera),de.colorbars&&_e.push(m.doColorBars),_e.push(w)),_e.push(n.rehover,n.redrag,n.reselect),o.add(ye,K,[ye,Ie.undoit],K,[ye,Ie.redoit]);var Ae=T.syncOrAsync(_e,ye);return Ae&&Ae.then||(Ae=Promise.resolve(ye)),Ae.then(function(){return ye.emit("plotly_relayout",Ie.eventData),ye})}function Q(ye,we,Me){var Oe,Ie,de=ye._fullLayout;if(!we.axrange)return!1;for(var _e in we)if(_e!=="axrange"&&we[_e])return!1;var Ae=function(tt,nt){return T.coerce(Oe,Ie,l,tt,nt)},Pe={};for(var Ee in Me.rangesAltered){var Fe=r.id2name(Ee);if(Oe=ye.layout[Fe],Ie=de[Fe],a(Oe,Ie,Ae,Pe),Ie._matchGroup){for(var Ve in Ie._matchGroup)if(Ve!==Ee){var Ye=de[r.id2name(Ve)];Ye.autorange=Ie.autorange,Ye.range=Ie.range.slice(),Ye._input.range=Ie.range.slice()}}}return!0}function Z(ye,we){var Me=we?function(Oe){var Ie=[];for(var de in we){var _e=r.getFromId(Oe,de);if(Ie.push(de),(_e.ticklabelposition||"").indexOf("inside")!==-1&&_e._anchorAxis&&Ie.push(_e._anchorAxis._id),_e._matchGroup)for(var Ae in _e._matchGroup)we[Ae]||Ie.push(Ae)}return r.draw(Oe,Ie,{skipTitle:!0})}:function(Oe){return r.draw(Oe,"redraw")};ye.push(p,m.doAutoRangeAndConstraints,Me,m.drawData,m.finalDraw)}var X=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,te=/^[xyz]axis[0-9]*\.autorange$/,ae=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function se(ye,we){var Me,Oe,Ie,de=ye.layout,_e=ye._fullLayout,Ae=_e._guiEditing,Pe=U(_e._preGUI,Ae),Ee=Object.keys(we),Fe=r.list(ye),Ve=T.extendDeepAll({},we),Ye={};for($(we),Ee=Object.keys(we),Oe=0;Oe<Ee.length;Oe++)if(Ee[Oe].indexOf("allaxes")===0){for(Ie=0;Ie<Fe.length;Ie++){var tt=Fe[Ie]._id.substr(1),nt=tt.indexOf("scene")!==-1?tt+".":"",ht=Ee[Oe].replace("allaxes",nt+Fe[Ie]._name);we[ht]||(we[ht]=we[Ee[Oe]])}delete we[Ee[Oe]]}var vt=_.layoutFlags(),pt={},Qe={};function Ke(on,Xt){if(Array.isArray(on))on.forEach(function(Jt){Ke(Jt,Xt)});else if(!(on in we)&&!y.hasParent(we,on)){var ln=Pe(de,on);on in Qe||(Qe[on]=F(ln.get())),Xt!==void 0&&ln.set(Xt)}}var Mt,Ot={};function Pt(on){var Xt=r.name2id(on.split(".")[0]);return Ot[Xt]=1,Xt}for(var St in we){if(y.hasParent(we,St))throw new Error("cannot set "+St+" and a parent attribute simultaneously");for(var He=Pe(de,St),We=we[St],Be=He.parts.length-1;Be>0&&typeof He.parts[Be]!="string";)Be--;var Ge=He.parts[Be],ot=He.parts[Be-1]+"."+Ge,it=He.parts.slice(0,Be).join("."),dt=b(ye.layout,it).get(),gt=b(_e,it).get(),je=He.get();if(We!==void 0){pt[St]=We,Qe[St]=Ge==="reverse"?We:F(je);var Re=i.getLayoutValObject(_e,He.parts);if(Re&&Re.impliedEdits&&We!==null)for(var rt in Re.impliedEdits)Ke(T.relativeAttr(St,rt),Re.impliedEdits[rt]);if(["width","height"].indexOf(St)!==-1)if(We){Ke("autosize",null);var ct=St==="height"?"width":"height";Ke(ct,_e[ct])}else _e[St]=ye._initialAutoSize[St];else if(St==="autosize")Ke("width",We?null:_e.width),Ke("height",We?null:_e.height);else if(ot.match(X))Pt(ot),b(_e,it+"._inputRange").set(null);else if(ot.match(te)){Pt(ot),b(_e,it+"._inputRange").set(null);var ut=b(_e,it).get();ut._inputDomain&&(ut._input.domain=ut._inputDomain.slice())}else ot.match(ae)&&b(_e,it+"._inputDomain").set(null);if(Ge==="type"){Mt=dt;var et=gt.type==="linear"&&We==="log",xt=gt.type==="log"&&We==="linear";if(et||xt){if(Mt&&Mt.range)if(gt.autorange)et&&(Mt.range=Mt.range[1]>Mt.range[0]?[1,2]:[2,1]);else{var mt=Mt.range[0],Tt=Mt.range[1];et?(mt<=0&&Tt<=0&&Ke(it+".autorange",!0),mt<=0?mt=Tt/1e6:Tt<=0&&(Tt=mt/1e6),Ke(it+".range[0]",Math.log(mt)/Math.LN10),Ke(it+".range[1]",Math.log(Tt)/Math.LN10)):(Ke(it+".range[0]",Math.pow(10,mt)),Ke(it+".range[1]",Math.pow(10,Tt)))}else Ke(it+".autorange",!0);Array.isArray(_e._subplots.polar)&&_e._subplots.polar.length&&_e[He.parts[0]]&&He.parts[1]==="radialaxis"&&delete _e[He.parts[0]]._subplot.viewInitial["radialaxis.range"],t.getComponentMethod("annotations","convertCoords")(ye,gt,We,Ke),t.getComponentMethod("images","convertCoords")(ye,gt,We,Ke)}else Ke(it+".autorange",!0),Ke(it+".range",null);b(_e,it+"._inputRange").set(null)}else if(Ge.match(d)){var yt=b(_e,St).get(),bt=(We||{}).type;bt&&bt!=="-"||(bt="linear"),t.getComponentMethod("annotations","convertCoords")(ye,yt,bt,Ke),t.getComponentMethod("images","convertCoords")(ye,yt,bt,Ke)}var zt=g.containerArrayMatch(St);if(zt){Me=zt.array,Oe=zt.index;var Ut=zt.property,en=Re||{editType:"calc"};Oe!==""&&Ut===""&&(g.isAddVal(We)?Qe[St]=null:g.isRemoveVal(We)?Qe[St]=(b(de,Me).get()||[])[Oe]:T.warn("unrecognized full object value",we)),_.update(vt,en),Ye[Me]||(Ye[Me]={});var an=Ye[Me][Oe];an||(an=Ye[Me][Oe]={}),an[Ut]=We,delete we[St]}else Ge==="reverse"?(dt.range?dt.range.reverse():(Ke(it+".autorange",!0),dt.range=[1,0]),gt.autorange?vt.calc=!0:vt.plot=!0):(St==="dragmode"&&(We===!1&&je!==!1||We!==!1&&je===!1)||_e._has("scatter-like")&&_e._has("regl")&&St==="dragmode"&&(We==="lasso"||We==="select")&&je!=="lasso"&&je!=="select"||_e._has("gl2d")?vt.plot=!0:Re?_.update(vt,Re):vt.calc=!0,He.set(We))}}for(Me in Ye)g.applyContainerArrayChanges(ye,Pe(de,Me),Ye[Me],vt,Pe)||(vt.plot=!0);for(var rn in Ot){var qt=(Mt=r.getFromId(ye,rn))&&Mt._constraintGroup;if(qt)for(var Kt in vt.calc=!0,qt)Ot[Kt]||(r.getFromId(ye,Kt)._constraintShrinkable=!0)}(ce(ye)||we.height||we.width)&&(vt.plot=!0);var xn=_e.shapes;for(Oe=0;Oe<xn.length;Oe++)if(xn[Oe].showlegend){vt.calc=!0;break}return(vt.plot||vt.calc)&&(vt.layoutReplot=!0),{flags:vt,rangesAltered:Ot,undoit:Qe,redoit:pt,eventData:Ve}}function ce(ye){var we=ye._fullLayout,Me=we.width,Oe=we.height;return ye.layout.autosize&&n.plotAutoSize(ye,ye.layout,we),we.width!==Me||we.height!==Oe}function fe(ye,we,Me,Oe){ye=T.getGraphDiv(ye),y.clearPromiseQueue(ye),T.isPlainObject(we)||(we={}),T.isPlainObject(Me)||(Me={}),Object.keys(we).length&&(ye.changed=!0),Object.keys(Me).length&&(ye.changed=!0);var Ie=y.coerceTraceIndices(ye,Oe),de=ne(ye,T.extendFlat({},we),Ie),_e=de.flags,Ae=se(ye,T.extendFlat({},Me)),Pe=Ae.flags;(_e.calc||Pe.calc)&&(ye.calcdata=void 0),_e.clearAxisTypes&&y.clearAxisTypes(ye,Ie,Me);var Ee=[];Pe.layoutReplot?Ee.push(m.layoutReplot):_e.fullReplot?Ee.push(R._doPlot):(Ee.push(n.previousPromises),Q(ye,Pe,Ae)||n.supplyDefaults(ye),_e.style&&Ee.push(m.doTraceStyle),(_e.colorbars||Pe.colorbars)&&Ee.push(m.doColorBars),Pe.legend&&Ee.push(m.doLegend),Pe.layoutstyle&&Ee.push(m.layoutStyles),Pe.axrange&&Z(Ee,Ae.rangesAltered),Pe.ticks&&Ee.push(m.doTicksRelayout),Pe.modebar&&Ee.push(m.doModeBar),Pe.camera&&Ee.push(m.doCamera),Ee.push(w)),Ee.push(n.rehover,n.redrag,n.reselect),o.add(ye,fe,[ye,de.undoit,Ae.undoit,de.traces],fe,[ye,de.redoit,Ae.redoit,de.traces]);var Fe=T.syncOrAsync(Ee,ye);return Fe&&Fe.then||(Fe=Promise.resolve(ye)),Fe.then(function(){return ye.emit("plotly_update",{data:de.eventData,layout:Ae.eventData}),ye})}function pe(ye){return function(we){we._fullLayout._guiEditing=!0;var Me=ye.apply(null,arguments);return we._fullLayout._guiEditing=!1,Me}}var ge=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],me=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function be(ye,we){for(var Me=0;Me<we.length;Me++){var Oe=we[Me],Ie=ye.match(Oe.pattern);if(Ie){var de=Ie[1]||"";return{head:de,tail:ye.substr(de.length+1),attr:Oe.attr}}}}function ke(ye,we){var Me=b(we,ye).get();if(Me!==void 0)return Me;var Oe=ye.split(".");for(Oe.pop();Oe.length>1;)if(Oe.pop(),(Me=b(we,Oe.join(".")+".uirevision").get())!==void 0)return Me;return we.uirevision}function ze(ye,we){for(var Me=0;Me<we.length;Me++)if(we[Me]._fullInput.uid===ye)return Me;return-1}function ve(ye,we,Me){for(var Oe=0;Oe<we.length;Oe++)if(we[Oe].uid===ye)return Oe;return!we[Me]||we[Me].uid?-1:Me}function oe(ye,we){var Me=T.isPlainObject(ye),Oe=Array.isArray(ye);return Me||Oe?(Me&&T.isPlainObject(we)||Oe&&Array.isArray(we))&&JSON.stringify(ye)===JSON.stringify(we):ye===we}function ie(ye,we,Me,Oe){var Ie,de,_e,Ae=Oe.getValObject,Pe=Oe.flags,Ee=Oe.immutable,Fe=Oe.inArray,Ve=Oe.arrayIndex;function Ye(){var dt=Ie.editType;Fe&&dt.indexOf("arraydraw")!==-1?T.pushUnique(Pe.arrays[Fe],Ve):(_.update(Pe,Ie),dt!=="none"&&Pe.nChanges++,Oe.transition&&Ie.anim&&Pe.nChangesAnim++,(X.test(_e)||te.test(_e))&&(Pe.rangesAltered[Me[0]]=1),ae.test(_e)&&b(we,"_inputDomain").set(null),de==="datarevision"&&(Pe.newDataRevision=1))}function tt(dt){return dt.valType==="data_array"||dt.arrayOk}for(de in ye){if(Pe.calc&&!Oe.transition)return;var nt=ye[de],ht=we[de],vt=Me.concat(de);if(_e=vt.join("."),de.charAt(0)!=="_"&&typeof nt!="function"&&nt!==ht){if((de==="tick0"||de==="dtick")&&Me[0]!=="geo"){var pt=we.tickmode;if(pt==="auto"||pt==="array"||!pt)continue}if((de!=="range"||!we.autorange)&&(de!=="zmin"&&de!=="zmax"||we.type!=="contourcarpet")&&(Ie=Ae(vt))&&(!Ie._compareAsJSON||JSON.stringify(nt)!==JSON.stringify(ht))){var Qe,Ke=Ie.valType,Mt=tt(Ie),Ot=Array.isArray(nt),Pt=Array.isArray(ht);if(Ot&&Pt){var St="_input_"+de,He=ye[St],We=we[St];if(Array.isArray(He)&&He===We)continue}if(ht===void 0)Mt&&Ot?Pe.calc=!0:Ye();else if(Ie._isLinkedToArray){var Be=[],Ge=!1;Fe||(Pe.arrays[de]=Be);var ot=Math.min(nt.length,ht.length),it=Math.max(nt.length,ht.length);if(ot!==it){if(Ie.editType!=="arraydraw"){Ye();continue}Ge=!0}for(Qe=0;Qe<ot;Qe++)ie(nt[Qe],ht[Qe],vt.concat(Qe),T.extendFlat({inArray:de,arrayIndex:Qe},Oe));if(Ge)for(Qe=ot;Qe<it;Qe++)Be.push(Qe)}else!Ke&&T.isPlainObject(nt)?ie(nt,ht,vt,Oe):Mt?Ot&&Pt?(Ee&&(Pe.calc=!0),(Ee||Oe.newDataRevision)&&Ye()):Ot!==Pt?Pe.calc=!0:Ye():Ot&&Pt&&nt.length===ht.length&&String(nt)===String(ht)||Ye()}}}for(de in we)if(!(de in ye)&&de.charAt(0)!=="_"&&typeof we[de]!="function"){if(tt(Ie=Ae(Me.concat(de)))&&Array.isArray(we[de]))return void(Pe.calc=!0);Ye()}}function he(ye,we){var Me;for(Me in ye)if(Me.charAt(0)!=="_"){var Oe=ye[Me],Ie=we[Me];if(Oe!==Ie)if(T.isPlainObject(Oe)&&T.isPlainObject(Ie)){if(he(Oe,Ie))return!0}else{if(!Array.isArray(Oe)||!Array.isArray(Ie)||Oe.length!==Ie.length)return!0;for(var de=0;de<Oe.length;de++)if(Oe[de]!==Ie[de]&&(!T.isPlainObject(Oe[de])||!T.isPlainObject(Ie[de])||he(Oe[de],Ie[de])))return!0}}}function Se(ye){var we=ye._fullLayout,Me=ye.getBoundingClientRect();if(!T.equalDomRects(Me,we._lastBBox)){var Oe=we._invTransform=T.inverseTransformMatrix(T.getFullTransformMatrix(ye));we._invScaleX=Math.sqrt(Oe[0][0]*Oe[0][0]+Oe[0][1]*Oe[0][1]+Oe[0][2]*Oe[0][2]),we._invScaleY=Math.sqrt(Oe[1][0]*Oe[1][0]+Oe[1][1]*Oe[1][1]+Oe[1][2]*Oe[1][2]),we._lastBBox=Me}}R.animate=function(ye,we,Me){if(ye=T.getGraphDiv(ye),!T.isPlotDiv(ye))throw new Error("This element is not a Plotly plot: "+ye+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Oe=ye._transitionData;Oe._frameQueue||(Oe._frameQueue=[]);var Ie=(Me=n.supplyAnimationDefaults(Me)).transition,de=Me.frame;function _e(Ee){return Array.isArray(Ie)?Ee>=Ie.length?Ie[0]:Ie[Ee]:Ie}function Ae(Ee){return Array.isArray(de)?Ee>=de.length?de[0]:de[Ee]:de}function Pe(Ee,Fe){var Ve=0;return function(){if(Ee&&++Ve===Fe)return Ee()}}return Oe._frameWaitingCnt===void 0&&(Oe._frameWaitingCnt=0),new Promise(function(Ee,Fe){function Ve(){ye.emit("plotly_animating"),Oe._lastFrameAt=-1/0,Oe._timeToNext=0,Oe._runningTransitions=0,Oe._currentFrame=null;var St=function(){Oe._animationRaf=window.requestAnimationFrame(St),Date.now()-Oe._lastFrameAt>Oe._timeToNext&&function(){Oe._currentFrame&&Oe._currentFrame.onComplete&&Oe._currentFrame.onComplete();var He=Oe._currentFrame=Oe._frameQueue.shift();if(He){var We=He.name?He.name.toString():null;ye._fullLayout._currentFrame=We,Oe._lastFrameAt=Date.now(),Oe._timeToNext=He.frameOpts.duration,n.transition(ye,He.frame.data,He.frame.layout,y.coerceTraceIndices(ye,He.frame.traces),He.frameOpts,He.transitionOpts).then(function(){He.onComplete&&He.onComplete()}),ye.emit("plotly_animatingframe",{name:We,frame:He.frame,animation:{frame:He.frameOpts,transition:He.transitionOpts}})}else ye.emit("plotly_animated"),window.cancelAnimationFrame(Oe._animationRaf),Oe._animationRaf=null}()};St()}var Ye,tt,nt=0;function ht(St){return Array.isArray(Ie)?nt>=Ie.length?St.transitionOpts=Ie[nt]:St.transitionOpts=Ie[0]:St.transitionOpts=Ie,nt++,St}var vt=[],pt=we==null,Qe=Array.isArray(we);if(pt||Qe||!T.isPlainObject(we)){if(pt||["string","number"].indexOf(typeof we)!==-1)for(Ye=0;Ye<Oe._frames.length;Ye++)(tt=Oe._frames[Ye])&&(pt||String(tt.group)===String(we))&&vt.push({type:"byname",name:String(tt.name),data:ht({name:tt.name})});else if(Qe)for(Ye=0;Ye<we.length;Ye++){var Ke=we[Ye];["number","string"].indexOf(typeof Ke)!==-1?(Ke=String(Ke),vt.push({type:"byname",name:Ke,data:ht({name:Ke})})):T.isPlainObject(Ke)&&vt.push({type:"object",data:ht(T.extendFlat({},Ke))})}}else vt.push({type:"object",data:ht(T.extendFlat({},we))});for(Ye=0;Ye<vt.length;Ye++)if((tt=vt[Ye]).type==="byname"&&!Oe._frameHash[tt.data.name])return T.warn('animate failure: frame not found: "'+tt.data.name+'"'),void Fe();["next","immediate"].indexOf(Me.mode)!==-1&&function(){if(Oe._frameQueue.length!==0){for(;Oe._frameQueue.length;){var St=Oe._frameQueue.pop();St.onInterrupt&&St.onInterrupt()}ye.emit("plotly_animationinterrupted",[])}}(),Me.direction==="reverse"&&vt.reverse();var Mt=ye._fullLayout._currentFrame;if(Mt&&Me.fromcurrent){var Ot=-1;for(Ye=0;Ye<vt.length;Ye++)if((tt=vt[Ye]).type==="byname"&&tt.name===Mt){Ot=Ye;break}if(Ot>0&&Ot<vt.length-1){var Pt=[];for(Ye=0;Ye<vt.length;Ye++)tt=vt[Ye],(vt[Ye].type!=="byname"||Ye>Ot)&&Pt.push(tt);vt=Pt}}vt.length>0?function(St){if(St.length!==0){for(var He=0;He<St.length;He++){var We;We=St[He].type==="byname"?n.computeFrame(ye,St[He].name):St[He].data;var Be=Ae(He),Ge=_e(He);Ge.duration=Math.min(Ge.duration,Be.duration);var ot={frame:We,name:St[He].name,frameOpts:Be,transitionOpts:Ge};He===St.length-1&&(ot.onComplete=Pe(Ee,2),ot.onInterrupt=Fe),Oe._frameQueue.push(ot)}Me.mode==="immediate"&&(Oe._lastFrameAt=-1/0),Oe._animationRaf||Ve()}}(vt):(ye.emit("plotly_animated"),Ee())})},R.addFrames=function(ye,we,Me){if(ye=T.getGraphDiv(ye),we==null)return Promise.resolve();if(!T.isPlotDiv(ye))throw new Error("This element is not a Plotly plot: "+ye+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Oe,Ie,de,_e,Ae=ye._transitionData._frames,Pe=ye._transitionData._frameHash;if(!Array.isArray(we))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+we);var Ee=Ae.length+2*we.length,Fe=[],Ve={};for(Oe=we.length-1;Oe>=0;Oe--)if(T.isPlainObject(we[Oe])){var Ye=we[Oe].name,tt=(Pe[Ye]||Ve[Ye]||{}).name,nt=we[Oe].name,ht=Pe[tt]||Ve[tt];tt&&nt&&typeof nt=="number"&&ht&&S<5&&(S++,T.warn('addFrames: overwriting frame "'+(Pe[tt]||Ve[tt]).name+'" with a frame whose name of type "number" also equates to "'+tt+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),S===5&&T.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Ve[Ye]={name:Ye},Fe.push({frame:n.supplyFrameDefaults(we[Oe]),index:Me&&Me[Oe]!==void 0&&Me[Oe]!==null?Me[Oe]:Ee+Oe})}Fe.sort(function(St,He){return St.index>He.index?-1:St.index<He.index?1:0});var vt=[],pt=[],Qe=Ae.length;for(Oe=Fe.length-1;Oe>=0;Oe--){if(typeof(Ie=Fe[Oe].frame).name=="number"&&T.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Ie.name)for(;Pe[Ie.name="frame "+ye._transitionData._counter++];);if(Pe[Ie.name]){for(de=0;de<Ae.length&&(Ae[de]||{}).name!==Ie.name;de++);vt.push({type:"replace",index:de,value:Ie}),pt.unshift({type:"replace",index:de,value:Ae[de]})}else _e=Math.max(0,Math.min(Fe[Oe].index,Qe)),vt.push({type:"insert",index:_e,value:Ie}),pt.unshift({type:"delete",index:_e}),Qe++}var Ke=n.modifyFrames,Mt=n.modifyFrames,Ot=[ye,pt],Pt=[ye,vt];return o&&o.add(ye,Ke,Ot,Mt,Pt),n.modifyFrames(ye,vt)},R.deleteFrames=function(ye,we){if(ye=T.getGraphDiv(ye),!T.isPlotDiv(ye))throw new Error("This element is not a Plotly plot: "+ye);var Me,Oe,Ie=ye._transitionData._frames,de=[],_e=[];if(!we)for(we=[],Me=0;Me<Ie.length;Me++)we.push(Me);for((we=we.slice()).sort(),Me=we.length-1;Me>=0;Me--)Oe=we[Me],de.push({type:"delete",index:Oe}),_e.unshift({type:"insert",index:Oe,value:Ie[Oe]});var Ae=n.modifyFrames,Pe=n.modifyFrames,Ee=[ye,_e],Fe=[ye,de];return o&&o.add(ye,Ae,Ee,Pe,Fe),n.modifyFrames(ye,de)},R.addTraces=function ye(we,Me,Oe){we=T.getGraphDiv(we);var Ie,de,_e=[],Ae=R.deleteTraces,Pe=ye,Ee=[we,_e],Fe=[we,Me];for(function(Ve,Ye,tt){var nt,ht;if(!Array.isArray(Ve.data))throw new Error("gd.data must be an array.");if(Ye===void 0)throw new Error("traces must be defined.");for(Array.isArray(Ye)||(Ye=[Ye]),nt=0;nt<Ye.length;nt++)if(typeof(ht=Ye[nt])!="object"||Array.isArray(ht)||ht===null)throw new Error("all values in traces array must be non-array objects");if(tt===void 0||Array.isArray(tt)||(tt=[tt]),tt!==void 0&&tt.length!==Ye.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(we,Me,Oe),Array.isArray(Me)||(Me=[Me]),Me=Me.map(function(Ve){return T.extendFlat({},Ve)}),y.cleanData(Me),Ie=0;Ie<Me.length;Ie++)we.data.push(Me[Ie]);for(Ie=0;Ie<Me.length;Ie++)_e.push(-Me.length+Ie);if(Oe===void 0)return de=R.redraw(we),o.add(we,Ae,Ee,Pe,Fe),de;Array.isArray(Oe)||(Oe=[Oe]);try{j(we,_e,Oe)}catch(Ve){throw we.data.splice(we.data.length-Me.length,Me.length),Ve}return o.startSequence(we),o.add(we,Ae,Ee,Pe,Fe),de=R.moveTraces(we,_e,Oe),o.stopSequence(we),de},R.deleteTraces=function ye(we,Me){we=T.getGraphDiv(we);var Oe,Ie,de=[],_e=R.addTraces,Ae=ye,Pe=[we,de,Me],Ee=[we,Me];if(Me===void 0)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Me)||(Me=[Me]),z(we,Me,"indices"),(Me=P(Me,we.data.length-1)).sort(T.sorterDes),Oe=0;Oe<Me.length;Oe+=1)Ie=we.data.splice(Me[Oe],1)[0],de.push(Ie);var Fe=R.redraw(we);return o.add(we,_e,Pe,Ae,Ee),Fe},R.extendTraces=function ye(we,Me,Oe,Ie){var de=I(we=T.getGraphDiv(we),Me,Oe,Ie,function(Pe,Ee,Fe){var Ve,Ye;if(T.isTypedArray(Pe))if(Fe<0){var tt=new Pe.constructor(0),nt=N(Pe,Ee);Fe<0?(Ve=nt,Ye=tt):(Ve=tt,Ye=nt)}else if(Ve=new Pe.constructor(Fe),Ye=new Pe.constructor(Pe.length+Ee.length-Fe),Fe===Ee.length)Ve.set(Ee),Ye.set(Pe);else if(Fe<Ee.length){var ht=Ee.length-Fe;Ve.set(Ee.subarray(ht)),Ye.set(Pe),Ye.set(Ee.subarray(0,ht),Pe.length)}else{var vt=Fe-Ee.length,pt=Pe.length-vt;Ve.set(Pe.subarray(pt)),Ve.set(Ee,vt),Ye.set(Pe.subarray(0,pt))}else Ve=Pe.concat(Ee),Ye=Fe>=0&&Fe<Ve.length?Ve.splice(0,Ve.length-Fe):[];return[Ve,Ye]}),_e=R.redraw(we),Ae=[we,de.update,Oe,de.maxPoints];return o.add(we,R.prependTraces,Ae,ye,arguments),_e},R.moveTraces=function ye(we,Me,Oe){var Ie,de=[],_e=[],Ae=ye,Pe=ye,Ee=[we=T.getGraphDiv(we),Oe,Me],Fe=[we,Me,Oe];if(j(we,Me,Oe),Me=Array.isArray(Me)?Me:[Me],Oe===void 0)for(Oe=[],Ie=0;Ie<Me.length;Ie++)Oe.push(-Me.length+Ie);for(Oe=Array.isArray(Oe)?Oe:[Oe],Me=P(Me,we.data.length-1),Oe=P(Oe,we.data.length-1),Ie=0;Ie<we.data.length;Ie++)Me.indexOf(Ie)===-1&&de.push(we.data[Ie]);for(Ie=0;Ie<Me.length;Ie++)_e.push({newIndex:Oe[Ie],trace:we.data[Me[Ie]]});for(_e.sort(function(Ye,tt){return Ye.newIndex-tt.newIndex}),Ie=0;Ie<_e.length;Ie+=1)de.splice(_e[Ie].newIndex,0,_e[Ie].trace);we.data=de;var Ve=R.redraw(we);return o.add(we,Ae,Ee,Pe,Fe),Ve},R.prependTraces=function ye(we,Me,Oe,Ie){var de=I(we=T.getGraphDiv(we),Me,Oe,Ie,function(Pe,Ee,Fe){var Ve,Ye;if(T.isTypedArray(Pe))if(Fe<=0){var tt=new Pe.constructor(0),nt=N(Ee,Pe);Fe<0?(Ve=nt,Ye=tt):(Ve=tt,Ye=nt)}else if(Ve=new Pe.constructor(Fe),Ye=new Pe.constructor(Pe.length+Ee.length-Fe),Fe===Ee.length)Ve.set(Ee),Ye.set(Pe);else if(Fe<Ee.length){var ht=Ee.length-Fe;Ve.set(Ee.subarray(0,ht)),Ye.set(Ee.subarray(ht)),Ye.set(Pe,ht)}else{var vt=Fe-Ee.length;Ve.set(Ee),Ve.set(Pe.subarray(0,vt),Ee.length),Ye.set(Pe.subarray(vt))}else Ve=Ee.concat(Pe),Ye=Fe>=0&&Fe<Ve.length?Ve.splice(Fe,Ve.length):[];return[Ve,Ye]}),_e=R.redraw(we),Ae=[we,de.update,Oe,de.maxPoints];return o.add(we,R.extendTraces,Ae,ye,arguments),_e},R.newPlot=function(ye,we,Me,Oe){return ye=T.getGraphDiv(ye),n.cleanPlot([],{},ye._fullData||[],ye._fullLayout||{}),n.purge(ye),R._doPlot(ye,we,Me,Oe)},R._doPlot=function(ye,we,Me,Oe){var Ie;if(ye=T.getGraphDiv(ye),f.init(ye),T.isPlainObject(we)){var de=we;we=de.data,Me=de.layout,Oe=de.config,Ie=de.frames}if(f.triggerHandler(ye,"plotly_beforeplot",[we,Me,Oe])===!1)return Promise.reject();we||Me||T.isPlotDiv(ye)||T.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",ye),O(ye,Oe),Me||(Me={}),M.select(ye).classed("js-plotly-plot",!0),u.makeTester(),Array.isArray(ye._promises)||(ye._promises=[]);var _e=(ye.data||[]).length===0&&Array.isArray(we);Array.isArray(we)&&(y.cleanData(we),_e?ye.data=we:ye.data.push.apply(ye.data,we),ye.empty=!1),ye.layout&&!_e||(ye.layout=y.cleanLayout(Me)),n.supplyDefaults(ye);var Ae=ye._fullLayout,Pe=Ae._has("cartesian");Ae._replotting=!0,(_e||Ae._shouldCreateBgLayer)&&(function(pt){var Qe=M.select(pt),Ke=pt._fullLayout;if(Ke._calcInverseTransform=Se,Ke._calcInverseTransform(pt),Ke._container=Qe.selectAll(".plot-container").data([0]),Ke._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),Ke._paperdiv=Ke._container.selectAll(".svg-container").data([0]),Ke._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),Ke._glcontainer=Ke._paperdiv.selectAll(".gl-container").data([{}]),Ke._glcontainer.enter().append("div").classed("gl-container",!0),Ke._paperdiv.selectAll(".main-svg").remove(),Ke._paperdiv.select(".modebar-container").remove(),Ke._paper=Ke._paperdiv.insert("svg",":first-child").classed("main-svg",!0),Ke._toppaper=Ke._paperdiv.append("svg").classed("main-svg",!0),Ke._modebardiv=Ke._paperdiv.append("div"),delete Ke._modeBar,Ke._hoverpaper=Ke._paperdiv.append("svg").classed("main-svg",!0),!Ke._uid){var Mt={};M.selectAll("defs").each(function(){this.id&&(Mt[this.id.split("-")[1]]=1)}),Ke._uid=T.randstr(Mt)}Ke._paperdiv.selectAll(".main-svg").attr(x.svgAttrs),Ke._defs=Ke._paper.append("defs").attr("id","defs-"+Ke._uid),Ke._clips=Ke._defs.append("g").classed("clips",!0),Ke._topdefs=Ke._toppaper.append("defs").attr("id","topdefs-"+Ke._uid),Ke._topclips=Ke._topdefs.append("g").classed("clips",!0),Ke._bgLayer=Ke._paper.append("g").classed("bglayer",!0),Ke._draggers=Ke._paper.append("g").classed("draglayer",!0);var Ot=Ke._paper.append("g").classed("layer-below",!0);Ke._imageLowerLayer=Ot.append("g").classed("imagelayer",!0),Ke._shapeLowerLayer=Ot.append("g").classed("shapelayer",!0),Ke._cartesianlayer=Ke._paper.append("g").classed("cartesianlayer",!0),Ke._polarlayer=Ke._paper.append("g").classed("polarlayer",!0),Ke._smithlayer=Ke._paper.append("g").classed("smithlayer",!0),Ke._ternarylayer=Ke._paper.append("g").classed("ternarylayer",!0),Ke._geolayer=Ke._paper.append("g").classed("geolayer",!0),Ke._funnelarealayer=Ke._paper.append("g").classed("funnelarealayer",!0),Ke._pielayer=Ke._paper.append("g").classed("pielayer",!0),Ke._iciclelayer=Ke._paper.append("g").classed("iciclelayer",!0),Ke._treemaplayer=Ke._paper.append("g").classed("treemaplayer",!0),Ke._sunburstlayer=Ke._paper.append("g").classed("sunburstlayer",!0),Ke._indicatorlayer=Ke._toppaper.append("g").classed("indicatorlayer",!0),Ke._glimages=Ke._paper.append("g").classed("glimages",!0);var Pt=Ke._toppaper.append("g").classed("layer-above",!0);Ke._imageUpperLayer=Pt.append("g").classed("imagelayer",!0),Ke._shapeUpperLayer=Pt.append("g").classed("shapelayer",!0),Ke._selectionLayer=Ke._toppaper.append("g").classed("selectionlayer",!0),Ke._infolayer=Ke._toppaper.append("g").classed("infolayer",!0),Ke._menulayer=Ke._toppaper.append("g").classed("menulayer",!0),Ke._zoomlayer=Ke._toppaper.append("g").classed("zoomlayer",!0),Ke._hoverlayer=Ke._hoverpaper.append("g").classed("hoverlayer",!0),Ke._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),pt.emit("plotly_framework")}(ye),Ae._shouldCreateBgLayer&&delete Ae._shouldCreateBgLayer),u.initGradients(ye),u.initPatterns(ye),_e&&r.saveShowSpikeInitial(ye);var Ee=!ye.calcdata||ye.calcdata.length!==(ye._fullData||[]).length;Ee&&n.doCalcdata(ye);for(var Fe=0;Fe<ye.calcdata.length;Fe++)ye.calcdata[Fe][0].trace=ye._fullData[Fe];ye._context.responsive?ye._responsiveChartHandler||(ye._responsiveChartHandler=function(){T.isHidden(ye)||n.resize(ye)},window.addEventListener("resize",ye._responsiveChartHandler)):T.clearResponsive(ye);var Ve=T.extendFlat({},Ae._size),Ye=0;function tt(){if(n.clearAutoMarginIds(ye),m.drawMarginPushers(ye),r.allowAutoMargin(ye),ye._fullLayout.title.text&&ye._fullLayout.title.automargin&&n.allowAutoMargin(ye,"title.automargin"),Ae._has("pie"))for(var pt=ye._fullData,Qe=0;Qe<pt.length;Qe++){var Ke=pt[Qe];Ke.type==="pie"&&Ke.automargin&&n.allowAutoMargin(ye,"pie."+Ke.uid+".automargin")}return n.doAutoMargin(ye),n.previousPromises(ye)}function nt(){ye._transitioning||(m.doAutoRangeAndConstraints(ye),_e&&r.saveRangeInitial(ye),t.getComponentMethod("rangeslider","calcAutorange")(ye))}var ht=[n.previousPromises,function(){if(Ie)return R.addFrames(ye,Ie)},function pt(){for(var Qe=Ae._basePlotModules,Ke=0;Ke<Qe.length;Ke++)Qe[Ke].drawFramework&&Qe[Ke].drawFramework(ye);!Ae._glcanvas&&Ae._has("gl")&&(Ae._glcanvas=Ae._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(St){return St.key}),Ae._glcanvas.enter().append("canvas").attr("class",function(St){return"gl-canvas gl-canvas-"+St.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Mt=ye._context.plotGlPixelRatio;if(Ae._glcanvas){Ae._glcanvas.attr("width",Ae.width*Mt).attr("height",Ae.height*Mt).style("width",Ae.width+"px").style("height",Ae.height+"px");var Ot=Ae._glcanvas.data()[0].regl;if(Ot&&(Math.floor(Ae.width*Mt)!==Ot._gl.drawingBufferWidth||Math.floor(Ae.height*Mt)!==Ot._gl.drawingBufferHeight)){var Pt="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!Ye)return T.log(Pt+" Clearing graph and plotting again."),n.cleanPlot([],{},ye._fullData,Ae),n.supplyDefaults(ye),Ae=ye._fullLayout,n.doCalcdata(ye),Ye++,pt();T.error(Pt)}}return Ae.modebar.orientation==="h"?Ae._modebardiv.style("height",null).style("width","100%"):Ae._modebardiv.style("width",null).style("height",Ae.height+"px"),n.previousPromises(ye)},tt,function(){if(n.didMarginChange(Ve,Ae._size))return T.syncOrAsync([tt,m.layoutStyles],ye)}];Pe&&ht.push(function(){if(Ee)return T.syncOrAsync([t.getComponentMethod("shapes","calcAutorange"),t.getComponentMethod("annotations","calcAutorange"),nt],ye);nt()}),ht.push(m.layoutStyles),Pe&&ht.push(function(){return r.draw(ye,_e?"":"redraw")},function(pt){var Qe=pt._fullLayout._insideTickLabelsUpdaterange;if(Qe)return pt._fullLayout._insideTickLabelsUpdaterange=void 0,K(pt,Qe).then(function(){r.saveRangeInitial(pt,!0)})}),ht.push(m.drawData,m.finalDraw,c,n.addLinks,n.rehover,n.redrag,n.reselect,n.doAutoMargin,n.previousPromises);var vt=T.syncOrAsync(ht,ye);return vt&&vt.then||(vt=Promise.resolve()),vt.then(function(){return w(ye),ye})},R.purge=function(ye){var we=(ye=T.getGraphDiv(ye))._fullLayout||{},Me=ye._fullData||[];return n.cleanPlot([],{},Me,we),n.purge(ye),f.purge(ye),we._container&&we._container.remove(),delete ye._context,ye},R.react=function(ye,we,Me,Oe){var Ie,de;ye=T.getGraphDiv(ye),y.clearPromiseQueue(ye);var _e=ye._fullData,Ae=ye._fullLayout;if(T.isPlotDiv(ye)&&_e&&Ae){if(T.isPlainObject(we)){var Pe=we;we=Pe.data,Me=Pe.layout,Oe=Pe.config,Ie=Pe.frames}var Ee=!1;if(Oe){var Fe=T.extendDeep({},ye._context);ye._context=void 0,O(ye,Oe),Ee=he(Fe,ye._context)}ye.data=we||[],y.cleanData(ye.data),ye.layout=Me||{},y.cleanLayout(ye.layout),function(it,dt,gt,je){var Re,rt,ct,ut,et,xt,mt,Tt,yt,bt,zt=je._preGUI,Ut=[],en={},an={};for(Re in zt){if(et=be(Re,ge)){if(yt=et.head,bt=et.tail,rt=et.attr||yt+".uirevision",(ut=(ct=b(je,rt).get())&&ke(rt,dt))&&ut===ct){if((xt=zt[Re])===null&&(xt=void 0),oe(Tt=(mt=b(dt,Re)).get(),xt)){Tt===void 0&&bt==="autorange"&&Ut.push(yt),mt.set(F(b(je,Re).get()));continue}if(bt==="autorange"||bt.substr(0,6)==="range["){var rn=zt[yt+".range[0]"],qt=zt[yt+".range[1]"],Kt=zt[yt+".autorange"];if(Kt||Kt===null&&rn===null&&qt===null){if(!(yt in en)){var xn=b(dt,yt).get();en[yt]=xn&&(xn.autorange||xn.autorange!==!1&&(!xn.range||xn.range.length!==2))}if(en[yt]){mt.set(F(b(je,Re).get()));continue}}}}}else T.warn("unrecognized GUI edit: "+Re);delete zt[Re],et&&et.tail.substr(0,6)==="range["&&(an[et.head]=1)}for(var on=0;on<Ut.length;on++){var Xt=Ut[on];if(an[Xt]){var ln=b(dt,Xt).get();ln&&delete ln.autorange}}var Jt=je._tracePreGUI;for(var tn in Jt){var wn,mn=Jt[tn],Cn=null;for(Re in mn){if(!Cn){var yn=ze(tn,gt);if(yn<0){delete Jt[tn];break}var Mn=ve(tn,it,(wn=gt[yn]._fullInput).index);if(Mn<0){delete Jt[tn];break}Cn=it[Mn]}if(et=be(Re,me)){if(et.attr?ut=(ct=b(je,et.attr).get())&&ke(et.attr,dt):(ct=wn.uirevision,(ut=Cn.uirevision)===void 0&&(ut=dt.uirevision)),ut&&ut===ct&&((xt=mn[Re])===null&&(xt=void 0),oe(Tt=(mt=b(Cn,Re)).get(),xt))){mt.set(F(b(wn,Re).get()));continue}}else T.warn("unrecognized GUI edit: "+Re+" in trace uid "+tn);delete mn[Re]}}}(ye.data,ye.layout,_e,Ae),n.supplyDefaults(ye,{skipUpdateCalc:!0});var Ve=ye._fullData,Ye=ye._fullLayout,tt=Ye.datarevision===void 0,nt=Ye.transition,ht=function(it,dt,gt,je,Re){var rt=_.layoutFlags();return rt.arrays={},rt.rangesAltered={},rt.nChanges=0,rt.nChangesAnim=0,ie(dt,gt,[],{getValObject:function(ct){return i.getLayoutValObject(gt,ct)},flags:rt,immutable:je,transition:Re,gd:it}),(rt.plot||rt.calc)&&(rt.layoutReplot=!0),Re&&rt.nChanges&&rt.nChangesAnim&&(rt.anim=rt.nChanges===rt.nChangesAnim?"all":"some"),rt}(ye,Ae,Ye,tt,nt),vt=ht.newDataRevision,pt=function(it,dt,gt,je,Re,rt){var ct=dt.length===gt.length;if(!Re&&!ct)return{fullReplot:!0,calc:!0};var ut,et,xt=_.traceFlags();xt.arrays={},xt.nChanges=0,xt.nChangesAnim=0;var mt={getValObject:function(yt){var bt=i.getTraceValObject(et,yt);return!et._module.animatable&&bt.anim&&(bt.anim=!1),bt},flags:xt,immutable:je,transition:Re,newDataRevision:rt,gd:it},Tt={};for(ut=0;ut<dt.length;ut++)if(gt[ut]){if(et=gt[ut]._fullInput,n.hasMakesDataTransform(et)&&(et=gt[ut]),Tt[et.uid])continue;Tt[et.uid]=1,ie(dt[ut]._fullInput,et,[],mt)}return(xt.calc||xt.plot)&&(xt.fullReplot=!0),Re&&xt.nChanges&&xt.nChangesAnim&&(xt.anim=xt.nChanges===xt.nChangesAnim&&ct?"all":"some"),xt}(ye,_e,Ve,tt,nt,vt);if(ce(ye)&&(ht.layoutReplot=!0),pt.calc||ht.calc){ye.calcdata=void 0;for(var Qe=Object.getOwnPropertyNames(Ye),Ke=0;Ke<Qe.length;Ke++){var Mt=Qe[Ke],Ot=Mt.substring(0,5);if(Ot==="xaxis"||Ot==="yaxis"){var Pt=Ye[Mt]._emptyCategories;Pt&&Pt()}}}else n.supplyDefaultsUpdateCalc(ye.calcdata,Ve);var St=[];if(Ie&&(ye._transitionData={},n.createTransitionData(ye),St.push(function(){return R.addFrames(ye,Ie)})),Ye.transition&&!Ee&&(pt.anim||ht.anim))ht.ticks&&St.push(m.doTicksRelayout),n.doCalcdata(ye),m.doAutoRangeAndConstraints(ye),St.push(function(){return n.transitionFromReact(ye,pt,ht,Ae)});else if(pt.fullReplot||ht.layoutReplot||Ee)ye._fullLayout._skipDefaults=!0,St.push(R._doPlot);else{for(var He in ht.arrays){var We=ht.arrays[He];if(We.length){var Be=t.getComponentMethod(He,"drawOne");if(Be!==T.noop)for(var Ge=0;Ge<We.length;Ge++)Be(ye,We[Ge]);else{var ot=t.getComponentMethod(He,"draw");if(ot===T.noop)throw new Error("cannot draw components: "+He);ot(ye)}}}St.push(n.previousPromises),pt.style&&St.push(m.doTraceStyle),(pt.colorbars||ht.colorbars)&&St.push(m.doColorBars),ht.legend&&St.push(m.doLegend),ht.layoutstyle&&St.push(m.layoutStyles),ht.axrange&&Z(St),ht.ticks&&St.push(m.doTicksRelayout),ht.modebar&&St.push(m.doModeBar),ht.camera&&St.push(m.doCamera),St.push(w)}St.push(n.rehover,n.redrag,n.reselect),(de=T.syncOrAsync(St,ye))&&de.then||(de=Promise.resolve(ye))}else de=R.newPlot(ye,we,Me,Oe);return de.then(function(){return ye.emit("plotly_react",{data:we,layout:Me}),ye})},R.redraw=function(ye){if(ye=T.getGraphDiv(ye),!T.isPlotDiv(ye))throw new Error("This element is not a Plotly plot: "+ye);return y.cleanData(ye.data),y.cleanLayout(ye.layout),ye.calcdata=void 0,R._doPlot(ye).then(function(){return ye.emit("plotly_redraw"),ye})},R.relayout=K,R.restyle=W,R.setPlotConfig=function(ye){return T.extendFlat(v,ye)},R.update=fe,R._guiRelayout=pe(K),R._guiRestyle=pe(W),R._guiUpdate=pe(fe),R._storeDirectGUIEdit=function(ye,we,Me){for(var Oe in Me)H(Oe,b(ye,Oe).get(),Me[Oe],we)}},20556:function(ee){var R={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},e={};(function M(k,s){for(var T in k){var b=k[T];b.valType?s[T]=b.dflt:(s[T]||(s[T]={}),M(b,s[T]))}})(R,e),ee.exports={configAttributes:R,dfltConfig:e}},73060:function(ee,R,e){var M=e(24040),k=e(3400),s=e(45464),T=e(64859),b=e(16672),f=e(85656),o=e(20556).configAttributes,t=e(67824),i=k.extendDeepAll,n=k.isPlainObject,r=k.isArrayOrTypedArray,a=k.nestedProperty,l=k.valObjectMeta,u="_isSubplotObj",h="_isLinkedToArray",c="_deprecated",x=[u,h,"_arrayAttrRegexps",c];function p(d,S,w){if(!d)return!1;if(d._isLinkedToArray){if(v(S[w]))w++;else if(w<S.length)return!1}for(;w<S.length;w++){var E=d[S[w]];if(!n(E)||(d=E,w===S.length-1))break;if(d._isLinkedToArray){if(!v(S[++w]))return!1}else if(d.valType==="info_array"){var C=S[++w];if(!v(C))return!1;var O=d.items;if(Array.isArray(O)){if(C>=O.length)return!1;if(d.dimensions===2){if(w++,S.length===w)return d;var P=S[w];if(!v(P))return!1;d=O[C][P]}else d=O[C]}else d=O}}return d}function v(d){return d===Math.round(d)&&d>=0}function g(){var d,S,w={};for(d in i(w,T),M.subplotsRegistry)if((S=M.subplotsRegistry[d]).layoutAttributes)if(Array.isArray(S.attr))for(var E=0;E<S.attr.length;E++)m(w,S,S.attr[E]);else m(w,S,S.attr==="subplot"?S.name:S.attr);for(d in M.componentsRegistry){var C=(S=M.componentsRegistry[d]).schema;if(C&&(C.subplots||C.layout)){var O=C.subplots;if(O&&O.xaxis&&!O.yaxis)for(var P in O.xaxis)delete w.yaxis[P];delete w.xaxis.shift,delete w.xaxis.autoshift}else S.name==="colorscale"?i(w,S.layoutAttributes):S.layoutAttributes&&_(w,S.layoutAttributes,S.name)}return{layoutAttributes:y(w)}}function y(d){return function(S){R.crawl(S,function(w,E,C){R.isValObject(w)?w.arrayOk!==!0&&w.valType!=="data_array"||(C[E+"src"]={valType:"string",editType:"none"}):n(w)&&(w.role="object")})}(d),function(S){R.crawl(S,function(w,E,C){if(w){var O=w[h];O&&(delete w[h],C[E]={items:{}},C[E].items[O]=w,C[E].role="object")}})}(d),function(S){(function w(E){for(var C in E)if(n(E[C]))w(E[C]);else if(Array.isArray(E[C]))for(var O=0;O<E[C].length;O++)w(E[C][O]);else E[C]instanceof RegExp&&(E[C]=E[C].toString())})(S)}(d),d}function m(d,S,w){var E=a(d,w),C=i({},S.layoutAttributes);C[u]=!0,E.set(C)}function _(d,S,w){var E=a(d,w);E.set(i(E.get()||{},S))}R.IS_SUBPLOT_OBJ=u,R.IS_LINKED_TO_ARRAY=h,R.DEPRECATED=c,R.UNDERSCORE_ATTRS=x,R.get=function(){var d={};M.allTypes.forEach(function(E){d[E]=function(C){var O,P;P=(O=M.modules[C]._module).basePlotModule;var z={type:null},j=i({},s),I=i({},O.attributes);R.crawl(I,function(F,U,H,ne,$){a(j,$).set(void 0),F===void 0&&a(I,$).set(void 0)}),i(z,j),M.traceIs(C,"noOpacity")&&delete z.opacity,M.traceIs(C,"showLegend")||(delete z.showlegend,delete z.legendgroup),M.traceIs(C,"noHover")&&(delete z.hoverinfo,delete z.hoverlabel),O.selectPoints||delete z.selectedpoints,i(z,I),P.attributes&&i(z,P.attributes),z.type=C;var N={meta:O.meta||{},categories:O.categories||{},animatable:!!O.animatable,type:C,attributes:y(z)};if(O.layoutAttributes){var W={};i(W,O.layoutAttributes),N.layoutAttributes=y(W)}return O.animatable||R.crawl(N,function(F){R.isValObject(F)&&"anim"in F&&delete F.anim}),N}(E)});var S,w={};return Object.keys(M.transformsRegistry).forEach(function(E){w[E]=function(C){var O=M.transformsRegistry[C],P=i({},O.attributes);return Object.keys(M.componentsRegistry).forEach(function(z){var j=M.componentsRegistry[z];j.schema&&j.schema.transforms&&j.schema.transforms[C]&&Object.keys(j.schema.transforms[C]).forEach(function(I){_(P,j.schema.transforms[C][I],I)})}),{attributes:y(P)}}(E)}),{defs:{valObjects:l,metaKeys:x.concat(["description","role","editType","impliedEdits"]),editType:{traces:t.traces,layout:t.layout},impliedEdits:{}},traces:d,layout:g(),transforms:w,frames:(S={frames:i({},b)},y(S),S.frames),animation:y(f),config:y(o)}},R.crawl=function(d,S,w,E){var C=w||0;E=E||"",Object.keys(d).forEach(function(O){var P=d[O];if(x.indexOf(O)===-1){var z=(E?E+".":"")+O;S(P,O,d,C,z),R.isValObject(P)||n(P)&&O!=="impliedEdits"&&R.crawl(P,S,C+1,z)}})},R.isValObject=function(d){return d&&d.valType!==void 0},R.findArrayAttributes=function(d){var S,w,E=[],C=[],O=[];function P(F,U,H,ne){C=C.slice(0,ne).concat([U]),O=O.slice(0,ne).concat([F&&F._isLinkedToArray]),F&&(F.valType==="data_array"||F.arrayOk===!0)&&(C[ne-1]!=="colorbar"||U!=="ticktext"&&U!=="tickvals")&&z(S,0,"")}function z(F,U,H){var ne=F[C[U]],$=H+C[U];if(U===C.length-1)r(ne)&&E.push(w+$);else if(O[U]){if(Array.isArray(ne))for(var K=0;K<ne.length;K++)n(ne[K])&&z(ne[K],U+1,$+"["+K+"].")}else n(ne)&&z(ne,U+1,$+".")}S=d,w="",R.crawl(s,P),d._module&&d._module.attributes&&R.crawl(d._module.attributes,P);var j=d.transforms;if(j)for(var I=0;I<j.length;I++){var N=j[I],W=N._module;W&&(w="transforms["+I+"].",S=N,R.crawl(W.attributes,P))}return E},R.getTraceValObject=function(d,S){var w,E,C=S[0],O=1;if(C==="transforms"){if(S.length===1)return s.transforms;var P=d.transforms;if(!Array.isArray(P)||!P.length)return!1;var z=S[1];if(!v(z)||z>=P.length)return!1;E=(w=(M.transformsRegistry[P[z].type]||{}).attributes)&&w[S[2]],O=3}else{var j=d._module;if(j||(j=(M.modules[d.type||s.type.dflt]||{})._module),!j)return!1;if(!(E=(w=j.attributes)&&w[C])){var I=j.basePlotModule;I&&I.attributes&&(E=I.attributes[C])}E||(E=s[C])}return p(E,S,O)},R.getLayoutValObject=function(d,S){var w=function(E,C){var O,P,z,j,I=E._basePlotModules;if(I){var N;for(O=0;O<I.length;O++){if((z=I[O]).attrRegex&&z.attrRegex.test(C)){if(z.layoutAttrOverrides)return z.layoutAttrOverrides;!N&&z.layoutAttributes&&(N=z.layoutAttributes)}var W=z.baseLayoutAttrOverrides;if(W&&C in W)return W[C]}if(N)return N}var F=E._modules;if(F){for(O=0;O<F.length;O++)if((j=F[O].layoutAttributes)&&C in j)return j[C]}for(P in M.componentsRegistry){if((z=M.componentsRegistry[P]).name==="colorscale"&&C.indexOf("coloraxis")===0)return z.layoutAttributes[C];if(!z.schema&&C===z.name)return z.layoutAttributes}return C in T&&T[C]}(d,S[0]);return p(w,S,1)}},31780:function(ee,R,e){var M=e(3400),k=e(45464),s="templateitemname",T={name:{valType:"string",editType:"none"}};function b(o){return o&&typeof o=="string"}function f(o){var t=o.length-1;return o.charAt(t)!=="s"&&M.warn("bad argument to arrayDefaultKey: "+o),o.substr(0,o.length-1)+"defaults"}T[s]={valType:"string",editType:"calc"},R.templatedArray=function(o,t){return t._isLinkedToArray=o,t.name=T.name,t[s]=T[s],t},R.traceTemplater=function(o){var t,i,n={};for(t in o)i=o[t],Array.isArray(i)&&i.length&&(n[t]=0);return{newTrace:function(r){var a={type:t=M.coerce(r,{},k,"type"),_template:null};if(t in n){i=o[t];var l=n[t]%i.length;n[t]++,a._template=i[l]}return a}}},R.newContainer=function(o,t,i){var n=o._template,r=n&&(n[t]||i&&n[i]);return M.isPlainObject(r)||(r=null),o[t]={_template:r}},R.arrayTemplater=function(o,t,i){var n=o._template,r=n&&n[f(t)],a=n&&n[t];Array.isArray(a)&&a.length||(a=[]);var l={};return{newItem:function(u){var h={name:u.name,_input:u},c=h[s]=u[s];if(!b(c))return h._template=r,h;for(var x=0;x<a.length;x++){var p=a[x];if(p.name===c)return l[c]=1,h._template=p,h}return h[i]=u[i]||!1,h._template=!1,h},defaultItems:function(){for(var u=[],h=0;h<a.length;h++){var c=a[h],x=c.name;if(b(x)&&!l[x]){var p={_template:c,name:x,_input:{_templateitemname:x}};p[s]=c[s],u.push(p),l[x]=1}}return u}}},R.arrayDefaultKey=f,R.arrayEditor=function(o,t,i){var n=(M.nestedProperty(o,t).get()||[]).length,r=i._index,a=r>=n&&(i._input||{})._templateitemname;a&&(r=n);var l,u=t+"["+r+"]";function h(){l={},a&&(l[u]={},l[u][s]=a)}function c(p,v){a?M.nestedProperty(l[u],p).set(v):l[u+"."+p]=v}function x(){var p=l;return h(),p}return h(),{modifyBase:function(p,v){l[p]=v},modifyItem:c,getUpdateObj:x,applyUpdate:function(p,v){p&&c(p,v);var g=x();for(var y in g)M.nestedProperty(o,y).set(g[y])}}}},39172:function(ee,R,e){var M=e(33428),k=e(24040),s=e(7316),T=e(3400),b=e(72736),f=e(73696),o=e(76308),t=e(43616),i=e(81668),n=e(45460),r=e(54460),a=e(84284),l=e(71888),u=l.enforce,h=l.clean,c=e(19280).doAutoRange,x="start",p=e(33816).zindexSeparator;function v(S,w,E){for(var C=0;C<E.length;C++){var O=E[C][0],P=E[C][1];if(!(O[0]>=S[1]||O[1]<=S[0])&&P[0]<w[1]&&P[1]>w[0])return!0}return!1}function g(S){var w,E,C,O,P,z,j=S._fullLayout,I=j._size,N=I.p,W=r.list(S,"",!0);if(j._paperdiv.style({width:S._context.responsive&&j.autosize&&!S._context._hasZeroWidth&&!S.layout.width?"100%":j.width+"px",height:S._context.responsive&&j.autosize&&!S._context._hasZeroHeight&&!S.layout.height?"100%":j.height+"px"}).selectAll(".main-svg").call(t.setSize,j.width,j.height),S._context.setBackground(S,j.paper_bgcolor),R.drawMainTitle(S),n.manage(S),!j._has("cartesian"))return s.previousPromises(S);function F(Ve,Ye,tt){var nt=Ve._lw/2;return Ve._id.charAt(0)==="x"?Ye?tt==="top"?Ye._offset-N-nt:Ye._offset+Ye._length+N+nt:I.t+I.h*(1-(Ve.position||0))+nt%1:Ye?tt==="right"?Ye._offset+Ye._length+N+nt:Ye._offset-N-nt:I.l+I.w*(Ve.position||0)+nt%1}for(w=0;w<W.length;w++){var U=(O=W[w])._anchorAxis;O._linepositions={},O._lw=t.crispRound(S,O.linewidth,1),O._mainLinePosition=F(O,U,O.side),O._mainMirrorPosition=O.mirror&&U?F(O,U,a.OPPOSITE_SIDE[O.side]):null}var H=[],ne=[],$=[],K=o.opacity(j.paper_bgcolor)===1&&o.opacity(j.plot_bgcolor)===1&&j.paper_bgcolor===j.plot_bgcolor;for(E in j._plots)if((C=j._plots[E]).mainplot)C.bg&&C.bg.remove(),C.bg=void 0;else{var Q=C.xaxis.domain,Z=C.yaxis.domain,X=C.plotgroup;if(v(Q,Z,$)&&E.indexOf(p)===-1){var te=X.node(),ae=C.bg=T.ensureSingle(X,"rect","bg");te.insertBefore(ae.node(),te.childNodes[0]),ne.push(E)}else X.select("rect.bg").remove(),$.push([Q,Z]),K||(H.push(E),ne.push(E))}var se,ce,fe,pe,ge,me,be,ke,ze,ve,oe,ie,he,Se=j._bgLayer.selectAll(".bg").data(H);for(Se.enter().append("rect").classed("bg",!0),Se.exit().remove(),Se.each(function(Ve){j._plots[Ve].bg=M.select(this)}),w=0;w<ne.length;w++)C=j._plots[ne[w]],P=C.xaxis,z=C.yaxis,C.bg&&P._offset!==void 0&&z._offset!==void 0&&C.bg.call(t.setRect,P._offset-N,z._offset-N,P._length+2*N,z._length+2*N).call(o.fill,j.plot_bgcolor).style("stroke-width",0);if(!j._hasOnlyLargeSploms)for(E in j._plots){C=j._plots[E],P=C.xaxis,z=C.yaxis;var ye,we,Me=C.clipId="clip"+j._uid+E+"plot",Oe=T.ensureSingleById(j._clips,"clipPath",Me,function(Ve){Ve.classed("plotclip",!0).append("rect")});C.clipRect=Oe.select("rect").attr({width:P._length,height:z._length}),t.setTranslate(C.plot,P._offset,z._offset),C._hasClipOnAxisFalse?(ye=null,we=Me):(ye=Me,we=null),t.setClipUrl(C.plot,ye,S),C.layerClipId=we}function Ie(Ve){return"M"+se+","+Ve+"H"+ce}function de(Ve){return"M"+P._offset+","+Ve+"h"+P._length}function _e(Ve){return"M"+Ve+","+ke+"V"+be}function Ae(Ve){return z._shift!==void 0&&(Ve+=z._shift),"M"+Ve+","+z._offset+"v"+z._length}function Pe(Ve,Ye,tt){if(!Ve.showline||E!==Ve._mainSubplot)return"";if(!Ve._anchorAxis)return tt(Ve._mainLinePosition);var nt=Ye(Ve._mainLinePosition);return Ve.mirror&&(nt+=Ye(Ve._mainMirrorPosition)),nt}for(E in j._plots){C=j._plots[E],P=C.xaxis,z=C.yaxis;var Ee="M0,0";y(P,E)&&(ge=_(P,"left",z,W),se=P._offset-(ge?N+ge:0),me=_(P,"right",z,W),ce=P._offset+P._length+(me?N+me:0),fe=F(P,z,"bottom"),pe=F(P,z,"top"),!(he=!P._anchorAxis||E!==P._mainSubplot)||P.mirror!=="allticks"&&P.mirror!=="all"||(P._linepositions[E]=[fe,pe]),Ee=Pe(P,Ie,de),he&&P.showline&&(P.mirror==="all"||P.mirror==="allticks")&&(Ee+=Ie(fe)+Ie(pe)),C.xlines.style("stroke-width",P._lw+"px").call(o.stroke,P.showline?P.linecolor:"rgba(0,0,0,0)")),C.xlines.attr("d",Ee);var Fe="M0,0";y(z,E)&&(oe=_(z,"bottom",P,W),be=z._offset+z._length+(oe?N:0),ie=_(z,"top",P,W),ke=z._offset-(ie?N:0),ze=F(z,P,"left"),ve=F(z,P,"right"),!(he=!z._anchorAxis||E!==z._mainSubplot)||z.mirror!=="allticks"&&z.mirror!=="all"||(z._linepositions[E]=[ze,ve]),Fe=Pe(z,_e,Ae),he&&z.showline&&(z.mirror==="all"||z.mirror==="allticks")&&(Fe+=_e(ze)+_e(ve)),C.ylines.style("stroke-width",z._lw+"px").call(o.stroke,z.showline?z.linecolor:"rgba(0,0,0,0)")),C.ylines.attr("d",Fe)}return r.makeClipPaths(S),s.previousPromises(S)}function y(S,w){return(S.ticks||S.showline)&&(w===S._mainSubplot||S.mirror==="all"||S.mirror==="allticks")}function m(S,w,E){if(!E.showline||!E._lw)return!1;if(E.mirror==="all"||E.mirror==="allticks")return!0;var C=E._anchorAxis;if(!C)return!1;var O=a.FROM_BL[w];return E.side===w?C.domain[O]===S.domain[O]:E.mirror&&C.domain[1-O]===S.domain[1-O]}function _(S,w,E,C){if(m(S,w,E))return E._lw;for(var O=0;O<C.length;O++){var P=C[O];if(P._mainAxis===E._mainAxis&&m(S,w,P))return P._lw}return 0}function d(S){return S==="top"?a.CAP_SHIFT+.3+"em":S==="bottom"?"-0.3em":a.MID_SHIFT+"em"}R.layoutStyles=function(S){return T.syncOrAsync([s.doAutoMargin,g],S)},R.drawMainTitle=function(S){var w=S._fullLayout.title,E=S._fullLayout,C=function($){var K=$.title,Q="middle";return T.isRightAnchor(K)?Q="end":T.isLeftAnchor(K)&&(Q=x),Q}(E),O=function($){var K=$.title,Q="0em";return T.isTopAnchor(K)?Q=a.CAP_SHIFT+"em":T.isMiddleAnchor(K)&&(Q=a.MID_SHIFT+"em"),Q}(E),P=function($,K){var Q=$.title,Z=$._size,X=0;return K!=="0em"&&K?K===a.CAP_SHIFT+"em"&&(X=Q.pad.t):X=-Q.pad.b,Q.y==="auto"?Z.t/2:Q.yref==="paper"?Z.t+Z.h-Z.h*Q.y+X:$.height-$.height*Q.y+X}(E,O),z=function($,K){var Q=$.title,Z=$._size,X=0;return K===x?X=Q.pad.l:K==="end"&&(X=-Q.pad.r),Q.xref==="paper"?Z.l+Z.w*Q.x+X:$.width*Q.x+X}(E,C);if(i.draw(S,"gtitle",{propContainer:E,propName:"title.text",subtitlePropName:"title.subtitle.text",placeholder:E._dfltTitle.plot,subtitlePlaceholder:E._dfltTitle.subtitle,attributes:{x:z,y:P,"text-anchor":C,dy:O}}),w.text&&w.automargin){var j=M.selectAll(".gtitle"),I=t.bBox(M.selectAll(".g-gtitle").node()).height,N=function($,K,Q){var Z=K.y,X=K.yanchor,te=Z>.5?"t":"b",ae=$._fullLayout.margin[te],se=0;return K.yref==="paper"?se=Q+K.pad.t+K.pad.b:K.yref==="container"&&(se=function(ce,fe,pe,ge,me){var be=0;return pe==="middle"&&(be+=me/2),ce==="t"?(pe==="top"&&(be+=me),be+=ge-fe*ge):(pe==="bottom"&&(be+=me),be+=fe*ge),be}(te,Z,X,$._fullLayout.height,Q)+K.pad.t+K.pad.b),se>ae?se:0}(S,w,I);if(N>0){(function($,K,Q,Z){var X="title.automargin",te=$._fullLayout.title,ae=te.y>.5?"t":"b",se={x:te.x,y:te.y,t:0,b:0},ce={};te.yref==="paper"&&function(fe,pe,ge,me,be){var ke=pe.yref==="paper"?fe._fullLayout._size.h:fe._fullLayout.height,ze=T.isTopAnchor(pe)?me:me-be,ve=ge==="b"?ke-ze:ze;return!(T.isTopAnchor(pe)&&ge==="t"||T.isBottomAnchor(pe)&&ge==="b")&&ve<be}($,te,ae,K,Z)?se[ae]=Q:te.yref==="container"&&(ce[ae]=Q,$._fullLayout._reservedMargin[X]=ce),s.allowAutoMargin($,X),s.autoMargin($,X,se)})(S,P,N,I),j.attr({x:z,y:P,"text-anchor":C,dy:d(w.yanchor)}).call(b.positionText,z,P);var W=(w.text.match(b.BR_TAG_ALL)||[]).length;if(W){var F=a.LINE_SPACING*W+a.MID_SHIFT;w.y===0&&(F=-F),j.selectAll(".line").each(function(){var $=+this.getAttribute("dy").slice(0,-2)-F+"em";this.setAttribute("dy",$)})}var U=M.selectAll(".gtitle-subtitle");if(U.node()){var H=j.node().getBBox(),ne=H.y+H.height+i.SUBTITLE_PADDING_EM*w.subtitle.font.size;U.attr({x:z,y:ne,"text-anchor":C,dy:d(w.yanchor)}).call(b.positionText,z,ne)}}}},R.doTraceStyle=function(S){var w,E=S.calcdata,C=[];for(w=0;w<E.length;w++){var O=E[w],P=O[0]||{},z=P.trace||{},j=z._module||{},I=j.arraysToCalcdata;I&&I(O,z);var N=j.editStyle;N&&C.push({fn:N,cd0:P})}if(C.length){for(w=0;w<C.length;w++){var W=C[w];W.fn(S,W.cd0)}f(S),R.redrawReglTraces(S)}return s.style(S),k.getComponentMethod("legend","draw")(S),s.previousPromises(S)},R.doColorBars=function(S){return k.getComponentMethod("colorbar","draw")(S),s.previousPromises(S)},R.layoutReplot=function(S){var w=S.layout;return S.layout=void 0,k.call("_doPlot",S,"",w)},R.doLegend=function(S){return k.getComponentMethod("legend","draw")(S),s.previousPromises(S)},R.doTicksRelayout=function(S){return r.draw(S,"redraw"),S._fullLayout._hasOnlyLargeSploms&&(k.subplotsRegistry.splom.updateGrid(S),f(S),R.redrawReglTraces(S)),R.drawMainTitle(S),s.previousPromises(S)},R.doModeBar=function(S){var w=S._fullLayout;n.manage(S);for(var E=0;E<w._basePlotModules.length;E++){var C=w._basePlotModules[E].updateFx;C&&C(S)}return s.previousPromises(S)},R.doCamera=function(S){for(var w=S._fullLayout,E=w._subplots.gl3d,C=0;C<E.length;C++){var O=w[E[C]];O._scene.setViewport(O)}},R.drawData=function(S){var w=S._fullLayout;f(S);for(var E=w._basePlotModules,C=0;C<E.length;C++)E[C].plot(S);return R.redrawReglTraces(S),s.style(S),k.getComponentMethod("selections","draw")(S),k.getComponentMethod("shapes","draw")(S),k.getComponentMethod("annotations","draw")(S),k.getComponentMethod("images","draw")(S),w._replotting=!1,s.previousPromises(S)},R.redrawReglTraces=function(S){var w=S._fullLayout;if(w._has("regl")){var E,C,O=S._fullData,P=[],z=[];for(w._hasOnlyLargeSploms&&w._splomGrid.draw(),E=0;E<O.length;E++){var j=O[E];j.visible===!0&&j._length!==0&&(j.type==="splom"?w._splomScenes[j.uid].draw():j.type==="scattergl"?T.pushUnique(P,j.xaxis+j.yaxis):j.type==="scatterpolargl"&&T.pushUnique(z,j.subplot))}for(E=0;E<P.length;E++)(C=w._plots[P[E]])._scene&&C._scene.draw();for(E=0;E<z.length;E++)(C=w[z[E]]._subplot)._scene&&C._scene.draw()}},R.doAutoRangeAndConstraints=function(S){for(var w,E=r.list(S,"",!0),C={},O=0;O<E.length;O++)if(!C[(w=E[O])._id]){C[w._id]=1,h(S,w),c(S,w);var P=w._matchGroup;if(P)for(var z in P){var j=r.getFromId(S,z);c(S,j,w.range),C[z]=1}}u(S)},R.finalDraw=function(S){k.getComponentMethod("rangeslider","draw")(S),k.getComponentMethod("rangeselector","draw")(S)},R.drawMarginPushers=function(S){k.getComponentMethod("legend","draw")(S),k.getComponentMethod("rangeselector","draw")(S),k.getComponentMethod("sliders","draw")(S),k.getComponentMethod("updatemenus","draw")(S),k.getComponentMethod("colorbar","draw")(S)}},94828:function(ee,R,e){var M=e(3400),k=M.isPlainObject,s=e(73060),T=e(7316),b=e(45464),f=e(31780),o=e(20556).dfltConfig;function t(c,x){c=M.extendDeep({},c);var p,v,g=Object.keys(c).sort();function y(w,E,C){if(k(E)&&k(w))t(w,E);else if(Array.isArray(E)&&Array.isArray(w)){var O=f.arrayTemplater({_template:c},C);for(v=0;v<E.length;v++){var P=E[v],z=O.newItem(P)._template;z&&t(z,P)}var j=O.defaultItems();for(v=0;v<j.length;v++)E.push(j[v]._template);for(v=0;v<E.length;v++)delete E[v].templateitemname}}for(p=0;p<g.length;p++){var m=g[p],_=c[m];if(m in x?y(_,x[m],m):x[m]=_,i(m)===m)for(var d in x){var S=i(d);d===S||S!==m||d in c||y(_,x[d],m)}}}function i(c){return c.replace(/[0-9]+$/,"")}function n(c,x,p,v,g){var y=g&&p(g);for(var m in c){var _=c[m],d=l(c,m,v),S=l(c,m,g),w=p(S);if(!w){var E=i(m);E!==m&&(w=p(S=l(c,E,g)))}if(!(y&&y===w||!w||w._noTemplating||w.valType==="data_array"||w.arrayOk&&Array.isArray(_)))if(!w.valType&&k(_))n(_,x,p,d,S);else if(w._isLinkedToArray&&Array.isArray(_))for(var C=!1,O=0,P={},z=0;z<_.length;z++){var j=_[z];if(k(j)){var I=j.name;if(I)P[I]||(n(j,x,p,l(_,O,d),l(_,O,S)),O++,P[I]=1);else if(!C){var N=l(c,f.arrayDefaultKey(m),v),W=l(_,O,d);n(j,x,p,W,l(_,O,S));var F=M.nestedProperty(x,W);M.nestedProperty(x,N).set(F.get()),F.set(null),C=!0}}}else M.nestedProperty(x,d).set(_)}}function r(c,x){return s.getLayoutValObject(c,M.nestedProperty({},x).parts)}function a(c,x){return s.getTraceValObject(c,M.nestedProperty({},x).parts)}function l(c,x,p){return p?Array.isArray(c)?p+"["+x+"]":p+"."+x:x}function u(c){for(var x=0;x<c.length;x++)if(k(c[x]))return!0}function h(c){var x;switch(c.code){case"data":x="The template has no key data.";break;case"layout":x="The template has no key layout.";break;case"missing":x=c.path?"There are no templates for item "+c.path+" with name "+c.templateitemname:"There are no templates for trace "+c.index+", of type "+c.traceType+".";break;case"unused":x=c.path?"The template item at "+c.path+" was not used in constructing the plot.":c.dataCount?"Some of the templates of type "+c.traceType+" were not used. The template has "+c.templateCount+" traces, the data only has "+c.dataCount+" of this type.":"The template has "+c.templateCount+" traces of type "+c.traceType+" but there are none in the data.";break;case"reused":x="Some of the templates of type "+c.traceType+" were used more than once. The template has "+c.templateCount+" traces, the data has "+c.dataCount+" of this type."}return c.msg=x,c}R.makeTemplate=function(c){c=M.isPlainObject(c)?c:M.getGraphDiv(c),c=M.extendDeep({_context:o},{data:c.data,layout:c.layout}),T.supplyDefaults(c);var x=c.data||[],p=c.layout||{};p._basePlotModules=c._fullLayout._basePlotModules,p._modules=c._fullLayout._modules;var v={data:{},layout:{}};x.forEach(function(O){var P={};n(O,P,a.bind(null,O));var z=M.coerce(O,{},b,"type"),j=v.data[z];j||(j=v.data[z]=[]),j.push(P)}),n(p,v.layout,r.bind(null,p)),delete v.layout.template;var g=p.template;if(k(g)){var y,m,_,d,S,w,E=g.layout;k(E)&&t(E,v.layout);var C=g.data;if(k(C)){for(m in v.data)if(_=C[m],Array.isArray(_)){for(w=(S=v.data[m]).length,d=_.length,y=0;y<w;y++)t(_[y%d],S[y]);for(y=w;y<d;y++)S.push(M.extendDeep({},_[y]))}for(m in C)m in v.data||(v.data[m]=M.extendDeep([],C[m]))}}return v},R.validateTemplate=function(c,x){var p=M.extendDeep({},{_context:o,data:c.data,layout:c.layout}),v=p.layout||{};k(x)||(x=v.template||{});var g=x.layout,y=x.data,m=[];p.layout=v,p.layout.template=x,T.supplyDefaults(p);var _=p._fullLayout,d=p._fullData,S={};if(k(g)?(function j(I,N){for(var W in I)if(W.charAt(0)!=="_"&&k(I[W])){var F,U=i(W),H=[];for(F=0;F<N.length;F++)H.push(l(I,W,N[F])),U!==W&&H.push(l(I,U,N[F]));for(F=0;F<H.length;F++)S[H[F]]=1;j(I[W],H)}}(_,["layout"]),function j(I,N){for(var W in I)if(W.indexOf("defaults")===-1&&k(I[W])){var F=l(I,W,N);S[F]?j(I[W],F):m.push({code:"unused",path:F})}}(g,"layout")):m.push({code:"layout"}),k(y)){for(var w,E={},C=0;C<d.length;C++){var O=d[C];E[w=O.type]=(E[w]||0)+1,O._fullInput._template||m.push({code:"missing",index:O._fullInput.index,traceType:w})}for(w in y){var P=y[w].length,z=E[w]||0;P>z?m.push({code:"unused",traceType:w,templateCount:P,dataCount:z}):z>P&&m.push({code:"reused",traceType:w,templateCount:P,dataCount:z})}}else m.push({code:"data"});if(function j(I,N){for(var W in I)if(W.charAt(0)!=="_"){var F=I[W],U=l(I,W,N);k(F)?(Array.isArray(I)&&F._template===!1&&F.templateitemname&&m.push({code:"missing",path:U,templateitemname:F.templateitemname}),j(F,U)):Array.isArray(F)&&u(F)&&j(F,U)}}({data:d,layout:_},""),m.length)return m.map(h)}},67024:function(ee,R,e){var M=e(38248),k=e(36424),s=e(7316),T=e(3400),b=e(81792),f=e(37164),o=e(63268),t=e(25788).version,i={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};ee.exports=function(n,r){var a,l,u,h;function c(z){return!(z in r)||T.validate(r[z],i[z])}if(r=r||{},T.isPlainObject(n)?(a=n.data||[],l=n.layout||{},u=n.config||{},h={}):(n=T.getGraphDiv(n),a=T.extendDeep([],n.data),l=T.extendDeep({},n.layout),u=n._context,h=n._fullLayout||{}),!c("width")&&r.width!==null||!c("height")&&r.height!==null)throw new Error("Height and width should be pixel values.");if(!c("format"))throw new Error("Export format is not "+T.join2(i.format.values,", "," or ")+".");var x={};function p(z,j){return T.coerce(r,x,i,z,j)}var v=p("format"),g=p("width"),y=p("height"),m=p("scale"),_=p("setBackground"),d=p("imageDataOnly"),S=document.createElement("div");S.style.position="absolute",S.style.left="-5000px",document.body.appendChild(S);var w=T.extendFlat({},l);g?w.width=g:r.width===null&&M(h.width)&&(w.width=h.width),y?w.height=y:r.height===null&&M(h.height)&&(w.height=h.height);var E=T.extendFlat({},u,{_exportedPlot:!0,staticPlot:!0,setBackground:_}),C=b.getRedrawFunc(S);function O(){return new Promise(function(z){setTimeout(z,b.getDelay(S._fullLayout))})}function P(){return new Promise(function(z,j){var I=f(S,v,m),N=S._fullLayout.width,W=S._fullLayout.height;function F(){k.purge(S),document.body.removeChild(S)}if(v==="full-json"){var U=s.graphJson(S,!1,"keepdata","object",!0,!0);return U.version=t,U=JSON.stringify(U),F(),z(d?U:b.encodeJSON(U))}if(F(),v==="svg")return z(d?I:b.encodeSVG(I));var H=document.createElement("canvas");H.id=T.randstr(),o({format:v,width:N,height:W,scale:m,canvas:H,svg:I,promise:!0}).then(z).catch(j)})}return new Promise(function(z,j){k.newPlot(S,a,w,E).then(C).then(O).then(P).then(function(I){z(function(N){return d?N.replace(b.IMAGE_URL_PREFIX,""):N}(I))}).catch(function(I){j(I)})})}},21480:function(ee,R,e){var M=e(3400),k=e(7316),s=e(73060),T=e(20556).dfltConfig,b=M.isPlainObject,f=Array.isArray,o=M.isArrayOrTypedArray;function t(c,x,p,v,g,y){y=y||[];for(var m=Object.keys(c),_=0;_<m.length;_++){var d=m[_];if(d!=="transforms"){var S=y.slice();S.push(d);var w=c[d],E=x[d],C=l(p,d),O=(C||{}).valType,P=O==="info_array",z=O==="colorscale",j=(C||{}).items;if(a(p,d))if(b(w)&&b(E)&&O!=="any")t(w,E,C,v,g,S);else if(P&&f(w)){w.length>E.length&&v.push(r("unused",g,S.concat(E.length)));var I,N,W,F,U,H=E.length,ne=Array.isArray(j);if(ne&&(H=Math.min(H,j.length)),C.dimensions===2)for(N=0;N<H;N++)if(f(w[N])){w[N].length>E[N].length&&v.push(r("unused",g,S.concat(N,E[N].length)));var $=E[N].length;for(I=0;I<(ne?Math.min($,j[N].length):$);I++)W=ne?j[N][I]:j,F=w[N][I],U=E[N][I],M.validate(F,W)?U!==F&&U!==+F&&v.push(r("dynamic",g,S.concat(N,I),F,U)):v.push(r("value",g,S.concat(N,I),F))}else v.push(r("array",g,S.concat(N),w[N]));else for(N=0;N<H;N++)W=ne?j[N]:j,F=w[N],U=E[N],M.validate(F,W)?U!==F&&U!==+F&&v.push(r("dynamic",g,S.concat(N),F,U)):v.push(r("value",g,S.concat(N),F))}else if(C.items&&!P&&f(w)){var K,Q,Z=j[Object.keys(j)[0]],X=[];for(K=0;K<E.length;K++){var te=E[K]._index||K;if((Q=S.slice()).push(te),b(w[te])&&b(E[K])){X.push(te);var ae=w[te],se=E[K];b(ae)&&ae.visible!==!1&&se.visible===!1?v.push(r("invisible",g,Q)):t(ae,se,Z,v,g,Q)}}for(K=0;K<w.length;K++)(Q=S.slice()).push(K),b(w[K])?X.indexOf(K)===-1&&v.push(r("unused",g,Q)):v.push(r("object",g,Q,w[K]))}else!b(w)&&b(E)?v.push(r("object",g,S,w)):o(w)||!o(E)||P||z?d in x?M.validate(w,C)?C.valType==="enumerated"&&(C.coerceNumber&&w!==+E||w!==E)&&v.push(r("dynamic",g,S,w,E)):v.push(r("value",g,S,w)):v.push(r("unused",g,S,w)):v.push(r("array",g,S,w));else v.push(r("schema",g,S))}}return v}ee.exports=function(c,x){c===void 0&&(c=[]),x===void 0&&(x={});var p,v,g=s.get(),y=[],m={_context:M.extendFlat({},T)};f(c)?(m.data=M.extendDeep([],c),p=c):(m.data=[],p=[],y.push(r("array","data"))),b(x)?(m.layout=M.extendDeep({},x),v=x):(m.layout={},v={},arguments.length>1&&y.push(r("object","layout"))),k.supplyDefaults(m);for(var _=m._fullData,d=p.length,S=0;S<d;S++){var w=p[S],E=["data",S];if(b(w)){var C=_[S],O=C.type,P=g.traces[O].attributes;P.type={valType:"enumerated",values:[O]},C.visible===!1&&w.visible!==!1&&y.push(r("invisible",E)),t(w,C,P,y,E);var z=w.transforms,j=C.transforms;if(z){f(z)||y.push(r("array",E,["transforms"])),E.push("transforms");for(var I=0;I<z.length;I++){var N=["transforms",I],W=z[I].type;if(b(z[I])){var F=g.transforms[W]?g.transforms[W].attributes:{};F.type={valType:"enumerated",values:Object.keys(g.transforms)},t(z[I],j[I],F,y,E,N)}else y.push(r("object",E,N))}}}else y.push(r("object",E))}var U=m._fullLayout,H=function(ne,$){for(var K=ne.layout.layoutAttributes,Q=0;Q<$.length;Q++){var Z=$[Q],X=ne.traces[Z.type],te=X.layoutAttributes;te&&(Z.subplot?M.extendFlat(K[X.attributes.subplot.dflt],te):M.extendFlat(K,te))}return K}(g,_);return t(v,U,H,y,"layout"),y.length===0?void 0:y};var i={object:function(c,x){return(c==="layout"&&x===""?"The layout argument":c[0]==="data"&&x===""?"Trace "+c[1]+" in the data argument":n(c)+"key "+x)+" must be linked to an object container"},array:function(c,x){return(c==="data"?"The data argument":n(c)+"key "+x)+" must be linked to an array container"},schema:function(c,x){return n(c)+"key "+x+" is not part of the schema"},unused:function(c,x,p){var v=b(p)?"container":"key";return n(c)+v+" "+x+" did not get coerced"},dynamic:function(c,x,p,v){return[n(c)+"key",x,"(set to '"+p+"')","got reset to","'"+v+"'","during defaults."].join(" ")},invisible:function(c,x){return(x?n(c)+"item "+x:"Trace "+c[1])+" got defaulted to be not visible"},value:function(c,x,p){return[n(c)+"key "+x,"is set to an invalid value ("+p+")"].join(" ")}};function n(c){return f(c)?"In data trace "+c[1]+", ":"In "+c+", "}function r(c,x,p,v,g){var y,m;p=p||"",f(x)?(y=x[0],m=x[1]):(y=x,m=null);var _=function(S){if(!f(S))return String(S);for(var w="",E=0;E<S.length;E++){var C=S[E];typeof C=="number"?w=w.substr(0,w.length-1)+"["+C+"]":w+=C,E<S.length-1&&(w+=".")}return w}(p),d=i[c](x,_,v,g);return M.log(d),{code:c,container:y,trace:m,path:p,astr:_,msg:d}}function a(c,x){var p=h(x),v=p.keyMinusId,g=p.id;return!!(v in c&&c[v]._isSubplotObj&&g)||x in c}function l(c,x){return x in c?c[x]:c[h(x).keyMinusId]}var u=M.counterRegex("([a-z]+)");function h(c){var x=c.match(u);return{keyMinusId:x&&x[1],id:x&&x[2]}}},85656:function(ee){ee.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},51272:function(ee,R,e){var M=e(3400),k=e(31780);ee.exports=function(s,T,b){var f,o,t=b.name,i=b.inclusionAttr||"visible",n=T[t],r=M.isArrayOrTypedArray(s[t])?s[t]:[],a=T[t]=[],l=k.arrayTemplater(T,t,i);for(f=0;f<r.length;f++){var u=r[f];M.isPlainObject(u)?o=l.newItem(u):(o=l.newItem({}))[i]=!1,o._index=f,o[i]!==!1&&b.handleItemDefaults(u,o,T,b),a.push(o)}var h=l.defaultItems();for(f=0;f<h.length;f++)(o=h[f])._index=a.length,b.handleItemDefaults({},o,T,b,{}),a.push(o);if(M.isArrayOrTypedArray(n)){var c=Math.min(n.length,a.length);for(f=0;f<c;f++)M.relinkPrivateKeys(a[f],n[f])}return a}},45464:function(ee,R,e){var M=e(25376),k=e(55756);ee.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:M({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:k.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},1220:function(ee,R,e){var M=e(38248),k=e(3400),s=k.dateTime2ms,T=k.incrementMonth,b=e(39032).ONEAVGMONTH;ee.exports=function(f,o,t,i){if(o.type!=="date")return{vals:i};var n=f[t+"periodalignment"];if(!n)return{vals:i};var r,a=f[t+"period"];if(M(a)){if((a=+a)<=0)return{vals:i}}else if(typeof a=="string"&&a.charAt(0)==="M"){var l=+a.substring(1);if(!(l>0&&Math.round(l)===l))return{vals:i};r=l}for(var u=o.calendar,h=n==="start",c=n==="end",x=f[t+"period0"],p=s(x,u)||0,v=[],g=[],y=[],m=i.length,_=0;_<m;_++){var d,S,w,E=i[_];if(r){for(d=Math.round((E-p)/(r*b)),w=T(p,r*d,u);w>E;)w=T(w,-r,u);for(;w<=E;)w=T(w,r,u);S=T(w,-r,u)}else{for(w=p+(d=Math.round((E-p)/a))*a;w>E;)w-=a;for(;w<=E;)w+=a;S=w-a}v[_]=h?S:c?w:(S+w)/2,g[_]=S,y[_]=w}return{vals:v,starts:g,ends:y}}},26720:function(ee){ee.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},19280:function(ee,R,e){var M=e(33428),k=e(38248),s=e(3400),T=e(39032).FP_SAFE,b=e(24040),f=e(43616),o=e(79811),t=o.getFromId,i=o.isLinked;function n(_,d){var S,w,E=[],C=_._fullLayout,O=a(C,d,0),P=a(C,d,1),z=u(_,d),j=z.min,I=z.max;if(j.length===0||I.length===0)return s.simpleMap(d.range,d.r2l);var N=j[0].val,W=I[0].val;for(S=1;S<j.length&&N===W;S++)N=Math.min(N,j[S].val);for(S=1;S<I.length&&N===W;S++)W=Math.max(W,I[S].val);var F=d.autorange,U=F==="reversed"||F==="min reversed"||F==="max reversed";if(!U&&d.range){var H=s.simpleMap(d.range,d.r2l);U=H[1]<H[0]}d.autorange==="reversed"&&(d.autorange=!0);var ne,$,K,Q,Z,X,te=d.rangemode,ae=te==="tozero",se=te==="nonnegative",ce=d._length,fe=ce/10,pe=0;for(S=0;S<j.length;S++)for(ne=j[S],w=0;w<I.length;w++)(X=($=I[w]).val-ne.val-r(d,ne.val,$.val))>0&&((Z=ce-O(ne)-P($))>fe?X/Z>pe&&(K=ne,Q=$,pe=X/Z):X/ce>pe&&(K={val:ne.val,nopad:1},Q={val:$.val,nopad:1},pe=X/ce));if(N===W){var ge=N-1,me=N+1;if(ae)if(N===0)E=[0,1];else{var be=(N>0?I:j).reduce(function(ze,ve){return Math.max(ze,P(ve))},0),ke=N/(1-Math.min(.5,be/ce));E=N>0?[0,ke]:[ke,0]}else E=se?[Math.max(0,ge),Math.max(1,me)]:[ge,me]}else ae?(K.val>=0&&(K={val:0,nopad:1}),Q.val<=0&&(Q={val:0,nopad:1})):se&&(K.val-pe*O(K)<0&&(K={val:0,nopad:1}),Q.val<=0&&(Q={val:1,nopad:1})),pe=(Q.val-K.val-r(d,ne.val,$.val))/(ce-O(K)-P(Q)),E=[K.val-pe*O(K),Q.val+pe*P(Q)];return E=m(E,d),d.limitRange&&d.limitRange(),U&&E.reverse(),s.simpleMap(E,d.l2r||Number)}function r(_,d,S){var w=0;if(_.rangebreaks)for(var E=_.locateBreaks(d,S),C=0;C<E.length;C++){var O=E[C];w+=O.max-O.min}return w}function a(_,d,S){var w=.05*d._length,E=d._anchorAxis||{};if((d.ticklabelposition||"").indexOf("inside")!==-1||(E.ticklabelposition||"").indexOf("inside")!==-1){var C=d.isReversed();if(!C){var O=s.simpleMap(d.range,d.r2l);C=O[1]<O[0]}C&&(S=!S)}var P=0;return i(_,d._id)||(P=function(z,j,I){var N=0,W=j._id.charAt(0)==="x";for(var F in z._plots){var U=z._plots[F];if(j._id===U.xaxis._id||j._id===U.yaxis._id){var H=(W?U.yaxis:U.xaxis)||{};if((H.ticklabelposition||"").indexOf("inside")!==-1&&(!I&&(H.side==="left"||H.side==="bottom")||I&&(H.side==="top"||H.side==="right"))){if(H._vals){var ne=s.deg2rad(H._tickAngles[H._id+"tick"]||0),$=Math.abs(Math.cos(ne)),K=Math.abs(Math.sin(ne));if(!H._vals[0].bb){var Q=H._id+"tick";H._selections[Q].each(function(se){var ce=M.select(this);ce.select(".text-math-group").empty()&&(se.bb=f.bBox(ce.node()))})}for(var Z=0;Z<H._vals.length;Z++){var X=H._vals[Z].bb;if(X){var te=2*l+X.width,ae=2*l+X.height;N=Math.max(N,W?Math.max(te*$,ae*K):Math.max(ae*$,te*K))}}}H.ticks==="inside"&&H.ticklabelposition==="inside"&&(N+=H.ticklen||0)}}}return N}(_,d,S)),w=Math.max(P,w),d.constrain==="domain"&&d._inputDomain&&(w*=(d._inputDomain[1]-d._inputDomain[0])/(d.domain[1]-d.domain[0])),function(z){return z.nopad?0:z.pad+(z.extrapad?w:P)}}ee.exports={applyAutorangeOptions:m,getAutoRange:n,makePadFn:a,doAutoRange:function(_,d,S){if(d.setScale(),d.autorange){d.range=S?S.slice():n(_,d),d._r=d.range.slice(),d._rl=s.simpleMap(d._r,d.r2l);var w=d._input,E={};E[d._attr+".range"]=d.range,E[d._attr+".autorange"]=d.autorange,b.call("_storeDirectGUIEdit",_.layout,_._fullLayout._preGUI,E),w.range=d.range.slice(),w.autorange=d.autorange}var C=d._anchorAxis;if(C&&C.rangeslider){var O=C.rangeslider[d._name];O&&O.rangemode==="auto"&&(O.range=n(_,d)),C._input.rangeslider[d._name]=s.extendFlat({},O)}},findExtremes:function(_,d,S){S||(S={}),_._m||_.setScale();var w,E,C,O,P,z,j,I,N,W=[],F=[],U=d.length,H=S.padded||!1,ne=S.tozero&&(_.type==="linear"||_.type==="-"),$=_.type==="log",K=!1,Q=S.vpadLinearized||!1;function Z(ge){if(Array.isArray(ge))return K=!0,function(be){return Math.max(Number(ge[be]||0),0)};var me=Math.max(Number(ge||0),0);return function(){return me}}var X=Z((_._m>0?S.ppadplus:S.ppadminus)||S.ppad||0),te=Z((_._m>0?S.ppadminus:S.ppadplus)||S.ppad||0),ae=Z(S.vpadplus||S.vpad),se=Z(S.vpadminus||S.vpad);if(!K){if(I=1/0,N=-1/0,$)for(w=0;w<U;w++)(E=d[w])<I&&E>0&&(I=E),E>N&&E<T&&(N=E);else for(w=0;w<U;w++)(E=d[w])<I&&E>-T&&(I=E),E>N&&E<T&&(N=E);d=[I,N],U=2}var ce={tozero:ne,extrapad:H};function fe(ge){C=d[ge],k(C)&&(z=X(ge),j=te(ge),Q?(O=_.c2l(C)-se(ge),P=_.c2l(C)+ae(ge)):(I=C-se(ge),N=C+ae(ge),$&&I<N/10&&(I=N/10),O=_.c2l(I),P=_.c2l(N)),ne&&(O=Math.min(0,O),P=Math.max(0,P)),p(O)&&h(W,O,j,ce),p(P)&&c(F,P,z,ce))}var pe=Math.min(6,U);for(w=0;w<pe;w++)fe(w);for(w=U-1;w>=pe;w--)fe(w);return{min:W,max:F,opts:S}},concatExtremes:u};var l=3;function u(_,d,S){var w,E,C,O=d._id,P=_._fullData,z=_._fullLayout,j=[],I=[];function N(ne,$){for(w=0;w<$.length;w++){var K=ne[$[w]],Q=(K._extremes||{})[O];if(K.visible===!0&&Q){for(E=0;E<Q.min.length;E++)C=Q.min[E],h(j,C.val,C.pad,{extrapad:C.extrapad});for(E=0;E<Q.max.length;E++)C=Q.max[E],c(I,C.val,C.pad,{extrapad:C.extrapad})}}}if(N(P,d._traceIndices),N(z.annotations||[],d._annIndices||[]),N(z.shapes||[],d._shapeIndices||[]),d._matchGroup&&!S){for(var W in d._matchGroup)if(W!==d._id){var F=t(_,W),U=u(_,F,!0),H=d._length/F._length;for(E=0;E<U.min.length;E++)C=U.min[E],h(j,C.val,C.pad*H,{extrapad:C.extrapad});for(E=0;E<U.max.length;E++)C=U.max[E],c(I,C.val,C.pad*H,{extrapad:C.extrapad})}}return{min:j,max:I}}function h(_,d,S,w){x(_,d,S,w,v)}function c(_,d,S,w){x(_,d,S,w,g)}function x(_,d,S,w,E){for(var C=w.tozero,O=w.extrapad,P=!0,z=0;z<_.length&&P;z++){var j=_[z];if(E(j.val,d)&&j.pad>=S&&(j.extrapad||!O)){P=!1;break}E(d,j.val)&&j.pad<=S&&(O||!j.extrapad)&&(_.splice(z,1),z--)}if(P){var I=C&&d===0;_.push({val:d,pad:I?0:S,extrapad:!I&&O})}}function p(_){return k(_)&&Math.abs(_)<T}function v(_,d){return _<=d}function g(_,d){return _>=d}function y(_,d,S){return d===void 0||S===void 0||(d=_.d2l(d))<_.d2l(S)}function m(_,d){if(!d||!d.autorangeoptions)return _;var S=_[0],w=_[1],E=d.autorangeoptions.include;if(E!==void 0){var C=d.d2l(S),O=d.d2l(w);s.isArrayOrTypedArray(E)||(E=[E]);for(var P=0;P<E.length;P++){var z=d.d2l(E[P]);C>=z&&(C=z,S=z),O<=z&&(O=z,w=z)}}return S=function(j,I){var N=I.autorangeoptions;return N&&N.minallowed!==void 0&&y(I,N.minallowed,N.maxallowed)?N.minallowed:N&&N.clipmin!==void 0&&y(I,N.clipmin,N.clipmax)?Math.max(j,I.d2l(N.clipmin)):j}(S,d),w=function(j,I){var N=I.autorangeoptions;return N&&N.maxallowed!==void 0&&y(I,N.minallowed,N.maxallowed)?N.maxallowed:N&&N.clipmax!==void 0&&y(I,N.clipmin,N.clipmax)?Math.min(j,I.d2l(N.clipmax)):j}(w,d),[S,w]}},76808:function(ee){ee.exports=function(R,e,M){var k,s;if(M){var T=e==="reversed"||e==="min reversed"||e==="max reversed";k=M[T?1:0],s=M[T?0:1]}var b=R("autorangeoptions.minallowed",s===null?k:void 0),f=R("autorangeoptions.maxallowed",k===null?s:void 0);b===void 0&&R("autorangeoptions.clipmin"),f===void 0&&R("autorangeoptions.clipmax"),R("autorangeoptions.include")}},54460:function(ee,R,e){var M=e(33428),k=e(38248),s=e(7316),T=e(24040),b=e(3400),f=b.strTranslate,o=e(72736),t=e(81668),i=e(76308),n=e(43616),r=e(94724),a=e(98728),l=e(39032),u=l.ONEMAXYEAR,h=l.ONEAVGYEAR,c=l.ONEMINYEAR,x=l.ONEMAXQUARTER,p=l.ONEAVGQUARTER,v=l.ONEMINQUARTER,g=l.ONEMAXMONTH,y=l.ONEAVGMONTH,m=l.ONEMINMONTH,_=l.ONEWEEK,d=l.ONEDAY,S=d/2,w=l.ONEHOUR,E=l.ONEMIN,C=l.ONESEC,O=l.ONEMILLI,P=l.ONEMICROSEC,z=l.MINUS_SIGN,j=l.BADNUM,I={K:"zeroline"},N={K:"gridline",L:"path"},W={K:"minor-gridline",L:"path"},F={K:"tick",L:"path"},U={K:"tick",L:"text"},H={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},ne=e(84284),$=ne.MID_SHIFT,K=ne.CAP_SHIFT,Q=ne.LINE_SPACING,Z=ne.OPPOSITE_SIDE,X=ee.exports={};X.setConvert=e(78344);var te=e(52976),ae=e(79811),se=ae.idSort,ce=ae.isLinked;X.id2name=ae.id2name,X.name2id=ae.name2id,X.cleanId=ae.cleanId,X.list=ae.list,X.listIds=ae.listIds,X.getFromId=ae.getFromId,X.getFromTrace=ae.getFromTrace;var fe=e(19280);X.getAutoRange=fe.getAutoRange,X.findExtremes=fe.findExtremes;var pe=1e-4;function ge(je){var Re=(je[1]-je[0])*pe;return[je[0]-Re,je[1]+Re]}X.coerceRef=function(je,Re,rt,ct,ut,et){var xt=ct.charAt(ct.length-1),mt=rt._fullLayout._subplots[xt+"axis"],Tt=ct+"ref",yt={};return ut||(ut=mt[0]||(typeof et=="string"?et:et[0])),et||(et=ut),mt=mt.concat(mt.map(function(bt){return bt+" domain"})),yt[Tt]={valType:"enumerated",values:mt.concat(et?typeof et=="string"?[et]:et:[]),dflt:ut},b.coerce(je,Re,yt,Tt)},X.getRefType=function(je){return je===void 0?je:je==="paper"?"paper":je==="pixel"?"pixel":/( domain)$/.test(je)?"domain":"range"},X.coercePosition=function(je,Re,rt,ct,ut,et){var xt,mt;if(X.getRefType(ct)!=="range")xt=b.ensureNumber,mt=rt(ut,et);else{var Tt=X.getFromId(Re,ct);mt=rt(ut,et=Tt.fraction2r(et)),xt=Tt.cleanPos}je[ut]=xt(mt)},X.cleanPosition=function(je,Re,rt){return(rt==="paper"||rt==="pixel"?b.ensureNumber:X.getFromId(Re,rt).cleanPos)(je)},X.redrawComponents=function(je,Re){Re=Re||X.listIds(je);var rt=je._fullLayout;function ct(ut,et,xt,mt){for(var Tt=T.getComponentMethod(ut,et),yt={},bt=0;bt<Re.length;bt++)for(var zt=rt[X.id2name(Re[bt])][xt],Ut=0;Ut<zt.length;Ut++){var en=zt[Ut];if(!yt[en]&&(Tt(je,en),yt[en]=1,mt))return}}ct("annotations","drawOne","_annIndices"),ct("shapes","drawOne","_shapeIndices"),ct("images","draw","_imgIndices",!0),ct("selections","drawOne","_selectionIndices")};var me=X.getDataConversions=function(je,Re,rt,ct){var ut,et=rt==="x"||rt==="y"||rt==="z"?rt:ct;if(b.isArrayOrTypedArray(et)){if(ut={type:te(ct,void 0,{autotypenumbers:je._fullLayout.autotypenumbers}),_categories:[]},X.setConvert(ut),ut.type==="category")for(var xt=0;xt<ct.length;xt++)ut.d2c(ct[xt])}else ut=X.getFromTrace(je,Re,et);return ut?{d2c:ut.d2c,c2d:ut.c2d}:et==="ids"?{d2c:ke,c2d:ke}:{d2c:be,c2d:be}};function be(je){return+je}function ke(je){return String(je)}function ze(je,Re){return Math.abs((je/Re+.5)%1-.5)<.001}function ve(je,Re){return Math.abs(je/Re-1)<.001}function oe(je){return+je.substring(1)}function ie(je,Re){return je.rangebreaks&&(Re=Re.filter(function(rt){return je.maskBreaks(rt.x)!==j})),Re}function he(je){var Re=je._mainAxis,rt=[];if(Re._vals){for(var ct=0;ct<Re._vals.length;ct++)if(!Re._vals[ct].noTick){var ut=Re.l2p(Re._vals[ct].x),et=je.p2l(ut),xt=X.tickText(je,et);Re._vals[ct].minor&&(xt.minor=!0,xt.text=""),rt.push(xt)}}return ie(je,rt)}function Se(je,Re){var rt=ge(b.simpleMap(je.range,je.r2l)),ct=Math.min(rt[0],rt[1]),ut=Math.max(rt[0],rt[1]),et=je.type==="category"?je.d2l_noadd:je.d2l;je.type==="log"&&String(je.dtick).charAt(0)!=="L"&&(je.dtick="L"+Math.pow(10,Math.floor(Math.min(je.range[0],je.range[1]))-1));for(var xt=[],mt=0;mt<=1;mt++)if((Re===void 0||!(Re&&mt||Re===!1&&!mt))&&(!mt||je.minor)){var Tt=mt?je.minor.tickvals:je.tickvals,yt=mt?[]:je.ticktext;if(Tt){b.isArrayOrTypedArray(yt)||(yt=[]);for(var bt=0;bt<Tt.length;bt++){var zt=et(Tt[bt]);if(zt>ct&&zt<ut){var Ut=X.tickText(je,zt,!1,String(yt[bt]));mt&&(Ut.minor=!0,Ut.text=""),xt.push(Ut)}}}}return ie(je,xt)}X.getDataToCoordFunc=function(je,Re,rt,ct){return me(je,Re,rt,ct).d2c},X.counterLetter=function(je){var Re=je.charAt(0);return Re==="x"?"y":Re==="y"?"x":void 0},X.minDtick=function(je,Re,rt,ct){["log","category","multicategory"].indexOf(je.type)===-1&&ct?je._minDtick===void 0?(je._minDtick=Re,je._forceTick0=rt):je._minDtick&&((je._minDtick/Re+1e-6)%1<2e-6&&((rt-je._forceTick0)/Re%1+1.000001)%1<2e-6?(je._minDtick=Re,je._forceTick0=rt):((Re/je._minDtick+1e-6)%1>2e-6||((rt-je._forceTick0)/je._minDtick%1+1.000001)%1>2e-6)&&(je._minDtick=0)):je._minDtick=0},X.saveRangeInitial=function(je,Re){for(var rt=X.list(je,"",!0),ct=!1,ut=0;ut<rt.length;ut++){var et=rt[ut],xt=et._rangeInitial0===void 0&&et._rangeInitial1===void 0,mt=xt||et.range[0]!==et._rangeInitial0||et.range[1]!==et._rangeInitial1,Tt=et.autorange;(xt&&Tt!==!0||Re&&mt)&&(et._rangeInitial0=Tt==="min"||Tt==="max reversed"?void 0:et.range[0],et._rangeInitial1=Tt==="max"||Tt==="min reversed"?void 0:et.range[1],et._autorangeInitial=Tt,ct=!0)}return ct},X.saveShowSpikeInitial=function(je,Re){for(var rt=X.list(je,"",!0),ct=!1,ut="on",et=0;et<rt.length;et++){var xt=rt[et],mt=xt._showSpikeInitial===void 0,Tt=mt||xt.showspikes!==xt._showspikes;(mt||Re&&Tt)&&(xt._showSpikeInitial=xt.showspikes,ct=!0),ut!=="on"||xt.showspikes||(ut="off")}return je._fullLayout._cartesianSpikesEnabled=ut,ct},X.autoBin=function(je,Re,rt,ct,ut,et){var xt,mt=b.aggNums(Math.min,null,je),Tt=b.aggNums(Math.max,null,je);if(Re.type==="category"||Re.type==="multicategory")return{start:mt-.5,end:Tt+.5,size:Math.max(1,Math.round(et)||1),_dataSpan:Tt-mt};if(ut||(ut=Re.calendar),xt=Re.type==="log"?{type:"linear",range:[mt,Tt]}:{type:Re.type,range:b.simpleMap([mt,Tt],Re.c2r,0,ut),calendar:ut},X.setConvert(xt),et=et&&a.dtick(et,xt.type))xt.dtick=et,xt.tick0=a.tick0(void 0,xt.type,ut);else{var yt;if(rt)yt=(Tt-mt)/rt;else{var bt=b.distinctVals(je),zt=Math.pow(10,Math.floor(Math.log(bt.minDiff)/Math.LN10)),Ut=zt*b.roundUp(bt.minDiff/zt,[.9,1.9,4.9,9.9],!0);yt=Math.max(Ut,2*b.stdev(je)/Math.pow(je.length,ct?.25:.4)),k(yt)||(yt=1)}X.autoTicks(xt,yt)}var en,an=xt.dtick,rn=X.tickIncrement(X.tickFirst(xt),an,"reverse",ut);if(typeof an=="number")rn=function(qt,Kt,xn,on,Xt){var ln=0,Jt=0,tn=0,wn=0;function mn(zn){return(1+100*(zn-qt)/xn.dtick)%100<2}for(var Cn=0;Cn<Kt.length;Cn++)Kt[Cn]%1==0?tn++:k(Kt[Cn])||wn++,mn(Kt[Cn])&&ln++,mn(Kt[Cn]+xn.dtick/2)&&Jt++;var yn=Kt.length-wn;if(tn===yn&&xn.type!=="date")xn.dtick<1?qt=on-.5*xn.dtick:(qt-=.5)+xn.dtick<on&&(qt+=xn.dtick);else if(Jt<.1*yn&&(ln>.3*yn||mn(on)||mn(Xt))){var Mn=xn.dtick/2;qt+=qt+Mn<on?Mn:-Mn}return qt}(rn,je,xt,mt,Tt),en=rn+(1+Math.floor((Tt-rn)/an))*an;else for(xt.dtick.charAt(0)==="M"&&(rn=function(qt,Kt,xn,on,Xt){var ln=b.findExactDates(Kt,Xt);if(ln.exactDays>.8){var Jt=Number(xn.substr(1));ln.exactYears>.8&&Jt%12==0?qt=X.tickIncrement(qt,"M6","reverse")+1.5*d:ln.exactMonths>.8?qt=X.tickIncrement(qt,"M1","reverse")+15.5*d:qt-=S;var tn=X.tickIncrement(qt,xn);if(tn<=on)return tn}return qt}(rn,je,an,mt,ut)),en=rn;en<=Tt;)en=X.tickIncrement(en,an,!1,ut);return{start:Re.c2r(rn,0,ut),end:Re.c2r(en,0,ut),size:an,_dataSpan:Tt-mt}},X.prepMinorTicks=function(je,Re,rt){if(!Re.minor.dtick){delete je.dtick;var ct,ut=Re.dtick&&k(Re._tmin);if(ut){var et=X.tickIncrement(Re._tmin,Re.dtick,!0);ct=[Re._tmin,.99*et+.01*Re._tmin]}else{var xt=b.simpleMap(Re.range,Re.r2l);ct=[xt[0],.8*xt[0]+.2*xt[1]]}if(je.range=b.simpleMap(ct,Re.l2r),je._isMinor=!0,X.prepTicks(je,rt),ut){var mt=k(Re.dtick),Tt=k(je.dtick),yt=mt?Re.dtick:+Re.dtick.substring(1),bt=Tt?je.dtick:+je.dtick.substring(1);mt&&Tt?ze(yt,bt)?yt===2*_&&bt===2*d&&(je.dtick=_):yt===2*_&&bt===3*d?je.dtick=_:yt!==_||(Re._input.minor||{}).nticks?ve(yt/bt,2.5)?je.dtick=yt/2:je.dtick=yt:je.dtick=d:String(Re.dtick).charAt(0)==="M"?Tt?je.dtick="M1":ze(yt,bt)?yt>=12&&bt===2&&(je.dtick="M3"):je.dtick=Re.dtick:String(je.dtick).charAt(0)==="L"?String(Re.dtick).charAt(0)==="L"?ze(yt,bt)||(je.dtick=ve(yt/bt,2.5)?Re.dtick/2:Re.dtick):je.dtick="D1":je.dtick==="D2"&&+Re.dtick>1&&(je.dtick=1)}je.range=Re.range}Re.minor._tick0Init===void 0&&(je.tick0=Re.tick0)},X.prepTicks=function(je,Re){var rt=b.simpleMap(je.range,je.r2l,void 0,void 0,Re);if(je.tickmode==="auto"||!je.dtick){var ct,ut=je.nticks;ut||(je.type==="category"||je.type==="multicategory"?(ct=je.tickfont?b.bigFont(je.tickfont.size||12):15,ut=je._length/ct):(ct=je._id.charAt(0)==="y"?40:80,ut=b.constrain(je._length/ct,4,9)+1),je._name==="radialaxis"&&(ut*=2)),je.minor&&je.minor.tickmode!=="array"||je.tickmode==="array"&&(ut*=100),je._roughDTick=Math.abs(rt[1]-rt[0])/ut,X.autoTicks(je,je._roughDTick),je._minDtick>0&&je.dtick<2*je._minDtick&&(je.dtick=je._minDtick,je.tick0=je.l2r(je._forceTick0))}je.ticklabelmode==="period"&&function(et){var xt;function mt(){return!(k(et.dtick)||et.dtick.charAt(0)!=="M")}var Tt=mt(),yt=X.getTickFormat(et);if(yt){var bt=et._dtickInit!==et.dtick;/%[fLQsSMX]/.test(yt)||(/%[HI]/.test(yt)?(xt=w,bt&&!Tt&&et.dtick<w&&(et.dtick=w)):/%p/.test(yt)?(xt=S,bt&&!Tt&&et.dtick<S&&(et.dtick=S)):/%[Aadejuwx]/.test(yt)?(xt=d,bt&&!Tt&&et.dtick<d&&(et.dtick=d)):/%[UVW]/.test(yt)?(xt=_,bt&&!Tt&&et.dtick<_&&(et.dtick=_)):/%[Bbm]/.test(yt)?(xt=y,bt&&(Tt?oe(et.dtick)<1:et.dtick<m)&&(et.dtick="M1")):/%[q]/.test(yt)?(xt=p,bt&&(Tt?oe(et.dtick)<3:et.dtick<v)&&(et.dtick="M3")):/%[Yy]/.test(yt)&&(xt=h,bt&&(Tt?oe(et.dtick)<12:et.dtick<c)&&(et.dtick="M12")))}(Tt=mt())&&et.tick0===et._dowTick0&&(et.tick0=et._rawTick0),et._definedDelta=xt}(je),je.tick0||(je.tick0=je.type==="date"?"2000-01-01":0),je.type==="date"&&je.dtick<.1&&(je.dtick=.1),Pe(je)},X.calcTicks=function(je,Re){for(var rt,ct,ut,et,xt=je.type,mt=je.calendar,Tt=je.ticklabelstep,yt=je.ticklabelmode==="period",bt=je.range[0]>je.range[1],zt=!je.ticklabelindex||b.isArrayOrTypedArray(je.ticklabelindex)?je.ticklabelindex:[je.ticklabelindex],Ut=b.simpleMap(je.range,je.r2l,void 0,void 0,Re),en=Ut[1]<Ut[0],an=Math.min(Ut[0],Ut[1]),rn=Math.max(Ut[0],Ut[1]),qt=Math.max(1e3,je._length||0),Kt=[],xn=[],on=[],Xt=[],ln=[],Jt=je.minor&&(je.minor.ticks||je.minor.showgrid),tn=1;tn>=(Jt?0:1);tn--){var wn=!tn;tn?(je._dtickInit=je.dtick,je._tick0Init=je.tick0):(je.minor._dtickInit=je.minor.dtick,je.minor._tick0Init=je.minor.tick0);var mn=tn?je:b.extendFlat({},je,je.minor);if(wn?X.prepMinorTicks(mn,je,Re):X.prepTicks(mn,Re),mn.tickmode!=="array")if(mn.tickmode!=="sync"){var Cn=ge(Ut),yn=Cn[0],Mn=Cn[1],zn=k(mn.dtick),Wn=xt==="log"&&!(zn||mn.dtick.charAt(0)==="L"),sr=X.tickFirst(mn,Re);if(tn){if(je._tmin=sr,sr<yn!==en)break;xt!=="category"&&xt!=="multicategory"||(Mn=en?Math.max(-.5,Mn):Math.min(je._categories.length-.5,Mn))}var Fn,Yn,Xn=null,rr=sr;tn&&(zn?Yn=je.dtick:xt==="date"?typeof je.dtick=="string"&&je.dtick.charAt(0)==="M"&&(Yn=y*je.dtick.substring(1)):Yn=je._roughDTick,Fn=Math.round((je.r2l(rr)-je.r2l(je.tick0))/Yn)-1);var Yt=mn.dtick;for(mn.rangebreaks&&mn._tick0Init!==mn.tick0&&(rr=ot(rr,je),en||(rr=X.tickIncrement(rr,Yt,!en,mt))),tn&&yt&&(rr=X.tickIncrement(rr,Yt,!en,mt),Fn--);en?rr>=Mn:rr<=Mn;rr=X.tickIncrement(rr,Yt,en,mt)){if(tn&&Fn++,mn.rangebreaks&&!en){if(rr<yn)continue;if(mn.maskBreaks(rr)===j&&ot(rr,mn)>=rn)break}if(on.length>qt||rr===Xn)break;Xn=rr;var $t={value:rr};tn?(Wn&&rr!==(0|rr)&&($t.simpleLabel=!0),Tt>1&&Fn%Tt&&($t.skipLabel=!0),on.push($t)):($t.minor=!0,Xt.push($t))}}else on=[],Kt=he(je);else tn?(on=[],Kt=Se(je,!wn)):(Xt=[],xn=Se(je,!wn))}if(!Xt||Xt.length<2?zt=!1:(rt=(Xt[1].value-Xt[0].value)*(bt?-1:1),ct=je.tickformat,(/%f/.test(ct)?rt>=P:/%L/.test(ct)?rt>=O:/%[SX]/.test(ct)?rt>=C:/%M/.test(ct)?rt>=E:/%[HI]/.test(ct)?rt>=w:/%p/.test(ct)?rt>=S:/%[Aadejuwx]/.test(ct)?rt>=d:/%[UVW]/.test(ct)?rt>=_:/%[Bbm]/.test(ct)?rt>=m:/%[q]/.test(ct)?rt>=v:!/%[Yy]/.test(ct)||rt>=c)||(zt=!1)),zt){var Sn=on.concat(Xt);yt&&on.length&&(Sn=Sn.slice(1)),(Sn=Sn.sort(function(Nt,Ft){return Nt.value-Ft.value}).filter(function(Nt,Ft,Qt){return Ft===0||Nt.value!==Qt[Ft-1].value})).map(function(Nt,Ft){return Nt.minor!==void 0||Nt.skipLabel?null:Ft}).filter(function(Nt){return Nt!==null}).forEach(function(Nt){zt.map(function(Ft){var Qt=Nt+Ft;Qt>=0&&Qt<Sn.length&&b.pushUnique(ln,Sn[Qt])})})}else ln=on;if(Jt&&!(je.minor.ticks==="inside"&&je.ticks==="outside"||je.minor.ticks==="outside"&&je.ticks==="inside")){for(var dn=on.map(function(Nt){return Nt.value}),En=[],Nn=0;Nn<Xt.length;Nn++){var Bn=Xt[Nn],$n=Bn.value;if(dn.indexOf($n)===-1){for(var lr=!1,Gt=0;!lr&&Gt<on.length;Gt++)1e7+on[Gt].value===1e7+$n&&(lr=!0);lr||En.push(Bn)}}Xt=En}if(yt&&function(Nt,Ft,Qt){for(var Tn=0;Tn<Nt.length;Tn++){var Pn=Nt[Tn].value,On=Tn,Dn=Tn+1;Tn<Nt.length-1?(On=Tn,Dn=Tn+1):Tn>0?(On=Tn-1,Dn=Tn):(On=Tn,Dn=Tn);var Zn,qn=Nt[On].value,Kn=Nt[Dn].value,Un=Math.abs(Kn-qn),Gn=Qt||Un,ir=0;Gn>=c?ir=Un>=c&&Un<=u?Un:h:Qt===p&&Gn>=v?ir=Un>=v&&Un<=x?Un:p:Gn>=m?ir=Un>=m&&Un<=g?Un:y:Qt===_&&Gn>=_?ir=_:Gn>=d?ir=d:Qt===S&&Gn>=S?ir=S:Qt===w&&Gn>=w&&(ir=w),ir>=Un&&(ir=Un,Zn=!0);var mr=Pn+ir;if(Ft.rangebreaks&&ir>0){for(var ur=0,Qn=0;Qn<84;Qn++){var pr=(Qn+.5)/84;Ft.maskBreaks(Pn*(1-pr)+pr*mr)!==j&&ur++}(ir*=ur/84)||(Nt[Tn].drop=!0),Zn&&Un>_&&(ir=Un)}(ir>0||Tn===0)&&(Nt[Tn].periodX=Pn+ir/2)}}(ln,je,je._definedDelta),je.rangebreaks){var gn=je._id.charAt(0)==="y",Ct=1;je.tickmode==="auto"&&(Ct=je.tickfont?je.tickfont.size:12);var Rt=NaN;for(ut=on.length-1;ut>-1;ut--)if(on[ut].drop)on.splice(ut,1);else{on[ut].value=ot(on[ut].value,je);var Zt=je.c2p(on[ut].value);(gn?Rt>Zt-Ct:Rt<Zt+Ct)?on.splice(en?ut+1:ut,1):Rt=Zt}}Ge(je)&&Math.abs(Ut[1]-Ut[0])===360&&on.pop(),je._tmax=(on[on.length-1]||{}).value,je._prevDateHead="",je._inCalcTicks=!0;var cn,fn=function(Nt){Nt.text="",je._prevDateHead=et};function _n(Nt,Ft){var Qt=X.tickText(Nt,Ft.value,!1,Ft.simpleLabel),Tn=Ft.periodX;return Tn!==void 0&&(Qt.periodX=Tn,(Tn>rn||Tn<an)&&(Tn>rn&&(Qt.periodX=rn),Tn<an&&(Qt.periodX=an),fn(Qt))),Qt}for(on=on.concat(Xt),ut=0;ut<on.length;ut++){var pn=on[ut].minor,sn=on[ut].value;pn?((cn=zt&&ln.indexOf(on[ut])!==-1?_n(je,on[ut]):{x:sn}).minor=!0,xn.push(cn)):(et=je._prevDateHead,cn=_n(je,on[ut]),(on[ut].skipLabel||zt&&ln.indexOf(on[ut])===-1)&&fn(cn),Kt.push(cn))}return Kt=Kt.concat(xn),je._inCalcTicks=!1,yt&&Kt.length&&(Kt[0].noTick=!0),Kt};var ye=[2,5,10],we=[1,2,3,6,12],Me=[1,2,5,10,15,30],Oe=[1,2,3,7,14],Ie=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],de=[-.301,0,.301,.699,1],_e=[15,30,45,90,180];function Ae(je,Re,rt){return Re*b.roundUp(je/Re,rt)}function Pe(je){var Re=je.dtick;if(je._tickexponent=0,k(Re)||typeof Re=="string"||(Re=1),je.type!=="category"&&je.type!=="multicategory"||(je._tickround=null),je.type==="date"){var rt=je.r2l(je.tick0),ct=je.l2r(rt).replace(/(^-|i)/g,""),ut=ct.length;if(String(Re).charAt(0)==="M")ut>10||ct.substr(5)!=="01-01"?je._tickround="d":je._tickround=+Re.substr(1)%12==0?"y":"m";else if(Re>=d&&ut<=10||Re>=15*d)je._tickround="d";else if(Re>=E&&ut<=16||Re>=w)je._tickround="M";else if(Re>=C&&ut<=19||Re>=E)je._tickround="S";else{var et=je.l2r(rt+Re).replace(/^-/,"").length;je._tickround=Math.max(ut,et)-20,je._tickround<0&&(je._tickround=4)}}else if(k(Re)||Re.charAt(0)==="L"){var xt=je.range.map(je.r2d||Number);k(Re)||(Re=Number(Re.substr(1))),je._tickround=2-Math.floor(Math.log(Re)/Math.LN10+.01);var mt=Math.max(Math.abs(xt[0]),Math.abs(xt[1])),Tt=Math.floor(Math.log(mt)/Math.LN10+.01),yt=je.minexponent===void 0?3:je.minexponent;Math.abs(Tt)>yt&&(Ve(je.exponentformat)&&!Ye(Tt)?je._tickexponent=3*Math.round((Tt-1)/3):je._tickexponent=Tt)}else je._tickround=null}function Ee(je,Re,rt){var ct=je.tickfont||{};return{x:Re,dx:0,dy:0,text:rt||"",fontSize:ct.size,font:ct.family,fontWeight:ct.weight,fontStyle:ct.style,fontVariant:ct.variant,fontTextcase:ct.textcase,fontLineposition:ct.lineposition,fontShadow:ct.shadow,fontColor:ct.color}}X.autoTicks=function(je,Re,rt){var ct;function ut(zt){return Math.pow(zt,Math.floor(Math.log(Re)/Math.LN10))}if(je.type==="date"){je.tick0=b.dateTick0(je.calendar,0);var et=2*Re;if(et>h)Re/=h,ct=ut(10),je.dtick="M"+12*Ae(Re,ct,ye);else if(et>y)Re/=y,je.dtick="M"+Ae(Re,1,we);else if(et>d){if(je.dtick=Ae(Re,d,je._hasDayOfWeekBreaks?[1,2,7,14]:Oe),!rt){var xt=X.getTickFormat(je),mt=je.ticklabelmode==="period";mt&&(je._rawTick0=je.tick0),/%[uVW]/.test(xt)?je.tick0=b.dateTick0(je.calendar,2):je.tick0=b.dateTick0(je.calendar,1),mt&&(je._dowTick0=je.tick0)}}else et>w?je.dtick=Ae(Re,w,we):et>E?je.dtick=Ae(Re,E,Me):et>C?je.dtick=Ae(Re,C,Me):(ct=ut(10),je.dtick=Ae(Re,ct,ye))}else if(je.type==="log"){je.tick0=0;var Tt=b.simpleMap(je.range,je.r2l);if(je._isMinor&&(Re*=1.5),Re>.7)je.dtick=Math.ceil(Re);else if(Math.abs(Tt[1]-Tt[0])<1){var yt=1.5*Math.abs((Tt[1]-Tt[0])/Re);Re=Math.abs(Math.pow(10,Tt[1])-Math.pow(10,Tt[0]))/yt,ct=ut(10),je.dtick="L"+Ae(Re,ct,ye)}else je.dtick=Re>.3?"D2":"D1"}else je.type==="category"||je.type==="multicategory"?(je.tick0=0,je.dtick=Math.ceil(Math.max(Re,1))):Ge(je)?(je.tick0=0,ct=1,je.dtick=Ae(Re,ct,_e)):(je.tick0=0,ct=ut(10),je.dtick=Ae(Re,ct,ye));if(je.dtick===0&&(je.dtick=1),!k(je.dtick)&&typeof je.dtick!="string"){var bt=je.dtick;throw je.dtick=1,"ax.dtick error: "+String(bt)}},X.tickIncrement=function(je,Re,rt,ct){var ut=rt?-1:1;if(k(Re))return b.increment(je,ut*Re);var et=Re.charAt(0),xt=ut*Number(Re.substr(1));if(et==="M")return b.incrementMonth(je,xt,ct);if(et==="L")return Math.log(Math.pow(10,je)+xt)/Math.LN10;if(et==="D"){var mt=Re==="D2"?de:Ie,Tt=je+.01*ut,yt=b.roundUp(b.mod(Tt,1),mt,rt);return Math.floor(Tt)+Math.log(M.round(Math.pow(10,yt),1))/Math.LN10}throw"unrecognized dtick "+String(Re)},X.tickFirst=function(je,Re){var rt=je.r2l||Number,ct=b.simpleMap(je.range,rt,void 0,void 0,Re),ut=ct[1]<ct[0],et=ut?Math.floor:Math.ceil,xt=ge(ct)[0],mt=je.dtick,Tt=rt(je.tick0);if(k(mt)){var yt=et((xt-Tt)/mt)*mt+Tt;return je.type!=="category"&&je.type!=="multicategory"||(yt=b.constrain(yt,0,je._categories.length-1)),yt}var bt=mt.charAt(0),zt=Number(mt.substr(1));if(bt==="M"){for(var Ut,en,an,rn=0,qt=Tt;rn<10;){if(((Ut=X.tickIncrement(qt,mt,ut,je.calendar))-xt)*(qt-xt)<=0)return ut?Math.min(qt,Ut):Math.max(qt,Ut);en=(xt-(qt+Ut)/2)/(Ut-qt),an=bt+(Math.abs(Math.round(en))||1)*zt,qt=X.tickIncrement(qt,an,en<0?!ut:ut,je.calendar),rn++}return b.error("tickFirst did not converge",je),qt}if(bt==="L")return Math.log(et((Math.pow(10,xt)-Tt)/zt)*zt+Tt)/Math.LN10;if(bt==="D"){var Kt=mt==="D2"?de:Ie,xn=b.roundUp(b.mod(xt,1),Kt,ut);return Math.floor(xt)+Math.log(M.round(Math.pow(10,xn),1))/Math.LN10}throw"unrecognized dtick "+String(mt)},X.tickText=function(je,Re,rt,ct){var ut,et=Ee(je,Re),xt=je.tickmode==="array",mt=rt||xt,Tt=je.type,yt=Tt==="category"?je.d2l_noadd:je.d2l,bt=function(qt){var Kt=je.l2p(qt);return Kt>=0&&Kt<=je._length?qt:null};if(xt&&b.isArrayOrTypedArray(je.ticktext)){var zt=b.simpleMap(je.range,je.r2l),Ut=(Math.abs(zt[1]-zt[0])-(je._lBreaks||0))/1e4;for(ut=0;ut<je.ticktext.length&&!(Math.abs(Re-yt(je.tickvals[ut]))<Ut);ut++);if(ut<je.ticktext.length)return et.text=String(je.ticktext[ut]),et.xbnd=[bt(et.x-.5),bt(et.x+je.dtick-.5)],et}function en(qt){if(qt===void 0)return!0;if(rt)return qt==="none";var Kt={first:je._tmin,last:je._tmax}[qt];return qt!=="all"&&Re!==Kt}var an=rt?"never":je.exponentformat!=="none"&&en(je.showexponent)?"hide":"";if(Tt==="date"?function(qt,Kt,xn,on){var Xt=qt._tickround,ln=xn&&qt.hoverformat||X.getTickFormat(qt);(on=!ln&&on)&&(Xt=k(Xt)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[Xt]);var Jt,tn=b.formatDate(Kt.x,ln,Xt,qt._dateFormat,qt.calendar,qt._extraFormat),wn=tn.indexOf(`
`);if(wn!==-1&&(Jt=tn.substr(wn+1),tn=tn.substr(0,wn)),on&&(Jt===void 0||tn!=="00:00:00"&&tn!=="00:00"?tn.length===8&&(tn=tn.replace(/:00$/,"")):(tn=Jt,Jt="")),Jt)if(xn)Xt==="d"?tn+=", "+Jt:tn=Jt+(tn?", "+tn:"");else if(qt._inCalcTicks&&qt._prevDateHead===Jt){var mn=it(qt),Cn=qt._trueSide||qt.side;(!mn&&Cn==="top"||mn&&Cn==="bottom")&&(tn+="<br> ")}else qt._prevDateHead=Jt,tn+="<br>"+Jt;Kt.text=tn}(je,et,rt,mt):Tt==="log"?function(qt,Kt,xn,on,Xt){var ln=qt.dtick,Jt=Kt.x,tn=qt.tickformat,wn=typeof ln=="string"&&ln.charAt(0);if(Xt==="never"&&(Xt=""),on&&wn!=="L"&&(ln="L3",wn="L"),tn||wn==="L")Kt.text=tt(Math.pow(10,Jt),qt,Xt,on);else if(k(ln)||wn==="D"&&b.mod(Jt+.01,1)<.1){var mn=Math.round(Jt),Cn=Math.abs(mn),yn=qt.exponentformat;yn==="power"||Ve(yn)&&Ye(mn)?(Kt.text=mn===0?1:mn===1?"10":"10<sup>"+(mn>1?"":z)+Cn+"</sup>",Kt.fontSize*=1.25):(yn==="e"||yn==="E")&&Cn>2?Kt.text="1"+yn+(mn>0?"+":z)+Cn:(Kt.text=tt(Math.pow(10,Jt),qt,"","fakehover"),ln==="D1"&&qt._id.charAt(0)==="y"&&(Kt.dy-=Kt.fontSize/6))}else{if(wn!=="D")throw"unrecognized dtick "+String(ln);Kt.text=String(Math.round(Math.pow(10,b.mod(Jt,1)))),Kt.fontSize*=.75}if(qt.dtick==="D1"){var Mn=String(Kt.text).charAt(0);Mn!=="0"&&Mn!=="1"||(qt._id.charAt(0)==="y"?Kt.dx-=Kt.fontSize/4:(Kt.dy+=Kt.fontSize/2,Kt.dx+=(qt.range[1]>qt.range[0]?1:-1)*Kt.fontSize*(Jt<0?.5:.25)))}}(je,et,0,mt,an):Tt==="category"?function(qt,Kt){var xn=qt._categories[Math.round(Kt.x)];xn===void 0&&(xn=""),Kt.text=String(xn)}(je,et):Tt==="multicategory"?function(qt,Kt,xn){var on=Math.round(Kt.x),Xt=qt._categories[on]||[],ln=Xt[1]===void 0?"":String(Xt[1]),Jt=Xt[0]===void 0?"":String(Xt[0]);xn?Kt.text=Jt+" - "+ln:(Kt.text=ln,Kt.text2=Jt)}(je,et,rt):Ge(je)?function(qt,Kt,xn,on,Xt){if(qt.thetaunit!=="radians"||xn)Kt.text=tt(Kt.x,qt,Xt,on);else{var ln=Kt.x/180;if(ln===0)Kt.text="0";else{var Jt=function(wn){function mn(zn,Wn){return Math.abs(zn-Wn)<=1e-6}var Cn=function(zn){for(var Wn=1;!mn(Math.round(zn*Wn)/Wn,zn);)Wn*=10;return Wn}(wn),yn=wn*Cn,Mn=Math.abs(function zn(Wn,sr){return mn(sr,0)?Wn:zn(sr,Wn%sr)}(yn,Cn));return[Math.round(yn/Mn),Math.round(Cn/Mn)]}(ln);if(Jt[1]>=100)Kt.text=tt(b.deg2rad(Kt.x),qt,Xt,on);else{var tn=Kt.x<0;Jt[1]===1?Jt[0]===1?Kt.text="":Kt.text=Jt[0]+"":Kt.text=["<sup>",Jt[0],"</sup>","","<sub>",Jt[1],"</sub>",""].join(""),tn&&(Kt.text=z+Kt.text)}}}}(je,et,rt,mt,an):function(qt,Kt,xn,on,Xt){Xt==="never"?Xt="":qt.showexponent==="all"&&Math.abs(Kt.x/qt.dtick)<1e-6&&(Xt="hide"),Kt.text=tt(Kt.x,qt,Xt,on)}(je,et,0,mt,an),ct||(je.tickprefix&&!en(je.showtickprefix)&&(et.text=je.tickprefix+et.text),je.ticksuffix&&!en(je.showticksuffix)&&(et.text+=je.ticksuffix)),je.labelalias&&je.labelalias.hasOwnProperty(et.text)){var rn=je.labelalias[et.text];typeof rn=="string"&&(et.text=rn)}return(je.tickson==="boundaries"||je.showdividers)&&(et.xbnd=[bt(et.x-.5),bt(et.x+je.dtick-.5)]),et},X.hoverLabelText=function(je,Re,rt){rt&&(je=b.extendFlat({},je,{hoverformat:rt}));var ct=b.isArrayOrTypedArray(Re)?Re[0]:Re,ut=b.isArrayOrTypedArray(Re)?Re[1]:void 0;if(ut!==void 0&&ut!==ct)return X.hoverLabelText(je,ct,rt)+" - "+X.hoverLabelText(je,ut,rt);var et=je.type==="log"&&ct<=0,xt=X.tickText(je,je.c2l(et?-ct:ct),"hover").text;return et?ct===0?"0":z+xt:xt};var Fe=["f","p","n","","m","","k","M","G","T"];function Ve(je){return je==="SI"||je==="B"}function Ye(je){return je>14||je<-15}function tt(je,Re,rt,ct){var ut=je<0,et=Re._tickround,xt=rt||Re.exponentformat||"B",mt=Re._tickexponent,Tt=X.getTickFormat(Re),yt=Re.separatethousands;if(ct){var bt={exponentformat:xt,minexponent:Re.minexponent,dtick:Re.showexponent==="none"?Re.dtick:k(je)&&Math.abs(je)||1,range:Re.showexponent==="none"?Re.range.map(Re.r2d):[0,je||1]};Pe(bt),et=(Number(bt._tickround)||0)+4,mt=bt._tickexponent,Re.hoverformat&&(Tt=Re.hoverformat)}if(Tt)return Re._numFormat(Tt)(je).replace(/-/g,z);var zt,Ut=Math.pow(10,-et)/2;if(xt==="none"&&(mt=0),(je=Math.abs(je))<Ut)je="0",ut=!1;else{if(je+=Ut,mt&&(je*=Math.pow(10,-mt),et+=mt),et===0)je=String(Math.floor(je));else if(et<0){je=(je=String(Math.round(je))).substr(0,je.length+et);for(var en=et;en<0;en++)je+="0"}else{var an=(je=String(je)).indexOf(".")+1;an&&(je=je.substr(0,an+et).replace(/\.?0+$/,""))}je=b.numSeparate(je,Re._separators,yt)}return mt&&xt!=="hide"&&(Ve(xt)&&Ye(mt)&&(xt="power"),zt=mt<0?z+-mt:xt!=="power"?"+"+mt:String(mt),xt==="e"||xt==="E"?je+=xt+zt:xt==="power"?je+="10<sup>"+zt+"</sup>":xt==="B"&&mt===9?je+="B":Ve(xt)&&(je+=Fe[mt/3+5])),ut?z+je:je}function nt(je,Re){if(je){var rt=Object.keys(H).reduce(function(ct,ut){return Re.indexOf(ut)!==-1&&H[ut].forEach(function(et){ct[et]=1}),ct},{});Object.keys(je).forEach(function(ct){rt[ct]||(ct.length===1?je[ct]=0:delete je[ct])})}}function ht(je,Re){for(var rt=[],ct={},ut=0;ut<Re.length;ut++){var et=Re[ut];ct[et.text2]?ct[et.text2].push(et.x):ct[et.text2]=[et.x]}for(var xt in ct)rt.push(Ee(je,b.interp(ct[xt],.5),xt));return rt}function vt(je){return je.periodX!==void 0?je.periodX:je.x}function pt(je){return[je.text,je.x,je.axInfo,je.font,je.fontSize,je.fontColor].join("_")}function Qe(je){var Re=je.title.font.size,rt=(je.title.text.match(o.BR_TAG_ALL)||[]).length;return je.title.hasOwnProperty("standoff")?Re*(K+rt*Q):rt?Re*(rt+1)*Q:Re}function Ke(je,Re){var rt=je.l2p(Re);return rt>1&&rt<je._length-1}function Mt(je){var Re=M.select(je),rt=Re.select(".text-math-group");return rt.empty()?Re.select("text"):rt}function Ot(je){return je._id+".automargin"}function Pt(je){return Ot(je)+".mirror"}function St(je){return je._id+".rangeslider"}function He(je,Re){for(var rt=0;rt<Re.length;rt++)je.indexOf(Re[rt])===-1&&je.push(Re[rt])}function We(je,Re,rt){var ct,ut,et=[],xt=[],mt=je.layout;for(ct=0;ct<Re.length;ct++)et.push(X.getFromId(je,Re[ct]));for(ct=0;ct<rt.length;ct++)xt.push(X.getFromId(je,rt[ct]));var Tt=Object.keys(r),yt=["anchor","domain","overlaying","position","side","tickangle","editType"],bt=["linear","log"];for(ct=0;ct<Tt.length;ct++){var zt=Tt[ct],Ut=et[0][zt],en=xt[0][zt],an=!0,rn=!1,qt=!1;if(zt.charAt(0)!=="_"&&typeof Ut!="function"&&yt.indexOf(zt)===-1){for(ut=1;ut<et.length&&an;ut++){var Kt=et[ut][zt];zt==="type"&&bt.indexOf(Ut)!==-1&&bt.indexOf(Kt)!==-1&&Ut!==Kt?rn=!0:Kt!==Ut&&(an=!1)}for(ut=1;ut<xt.length&&an;ut++){var xn=xt[ut][zt];zt==="type"&&bt.indexOf(en)!==-1&&bt.indexOf(xn)!==-1&&en!==xn?qt=!0:xt[ut][zt]!==en&&(an=!1)}an&&(rn&&(mt[et[0]._name].type="linear"),qt&&(mt[xt[0]._name].type="linear"),Be(mt,zt,et,xt,je._fullLayout._dfltTitle))}}for(ct=0;ct<je._fullLayout.annotations.length;ct++){var on=je._fullLayout.annotations[ct];Re.indexOf(on.xref)!==-1&&rt.indexOf(on.yref)!==-1&&b.swapAttrs(mt.annotations[ct],["?"])}}function Be(je,Re,rt,ct,ut){var et,xt=b.nestedProperty,mt=xt(je[rt[0]._name],Re).get(),Tt=xt(je[ct[0]._name],Re).get();for(Re==="title"&&(mt&&mt.text===ut.x&&(mt.text=ut.y),Tt&&Tt.text===ut.y&&(Tt.text=ut.x)),et=0;et<rt.length;et++)xt(je,rt[et]._name+"."+Re).set(Tt);for(et=0;et<ct.length;et++)xt(je,ct[et]._name+"."+Re).set(mt)}function Ge(je){return je._id==="angularaxis"}function ot(je,Re){for(var rt=Re._rangebreaks.length,ct=0;ct<rt;ct++){var ut=Re._rangebreaks[ct];if(je>=ut.min&&je<ut.max)return ut.max}return je}function it(je){return(je.ticklabelposition||"").indexOf("inside")!==-1}function dt(je,Re){it(je._anchorAxis||{})&&je._hideCounterAxisInsideTickLabels&&je._hideCounterAxisInsideTickLabels(Re)}function gt(je,Re,rt,ct){var ut,et=je.anchor==="free"||je.overlaying!==void 0&&je.overlaying!==!1?je.overlaying:je._id;ut=ct?je.side==="right"?Re:-Re:Re,et in rt||(rt[et]={}),je.side in rt[et]||(rt[et][je.side]=0),rt[et][je.side]+=ut}X.getTickFormat=function(je){var Re,rt,ct,ut,et,xt,mt,Tt;function yt(Ut){return typeof Ut!="string"?Ut:Number(Ut.replace("M",""))*y}function bt(Ut,en){var an=["L","D"];if(typeof Ut==typeof en){if(typeof Ut=="number")return Ut-en;var rn=an.indexOf(Ut.charAt(0)),qt=an.indexOf(en.charAt(0));return rn===qt?Number(Ut.replace(/(L|D)/g,""))-Number(en.replace(/(L|D)/g,"")):rn-qt}return typeof Ut=="number"?1:-1}function zt(Ut,en){var an=en[0]===null,rn=en[1]===null,qt=bt(Ut,en[0])>=0,Kt=bt(Ut,en[1])<=0;return(an||qt)&&(rn||Kt)}if(je.tickformatstops&&je.tickformatstops.length>0)switch(je.type){case"date":case"linear":for(Re=0;Re<je.tickformatstops.length;Re++)if((ct=je.tickformatstops[Re]).enabled&&(ut=je.dtick,et=ct.dtickrange,xt=void 0,mt=void 0,Tt=void 0,xt=yt||function(Ut){return Ut},mt=et[0],Tt=et[1],(!mt&&typeof mt!="number"||xt(mt)<=xt(ut))&&(!Tt&&typeof Tt!="number"||xt(Tt)>=xt(ut)))){rt=ct;break}break;case"log":for(Re=0;Re<je.tickformatstops.length;Re++)if((ct=je.tickformatstops[Re]).enabled&&zt(je.dtick,ct.dtickrange)){rt=ct;break}}return rt?rt.value:je.tickformat},X.getSubplots=function(je,Re){var rt=je._fullLayout._subplots,ct=rt.cartesian.concat(rt.gl2d||[]),ut=Re?X.findSubplotsWithAxis(ct,Re):ct;return ut.sort(function(et,xt){var mt=et.substr(1).split("y"),Tt=xt.substr(1).split("y");return mt[0]===Tt[0]?+mt[1]-+Tt[1]:+mt[0]-+Tt[0]}),ut},X.findSubplotsWithAxis=function(je,Re){for(var rt=new RegExp(Re._id.charAt(0)==="x"?"^"+Re._id+"y":Re._id+"$"),ct=[],ut=0;ut<je.length;ut++){var et=je[ut];rt.test(et)&&ct.push(et)}return ct},X.makeClipPaths=function(je){var Re=je._fullLayout;if(!Re._hasOnlyLargeSploms){var rt,ct,ut={_offset:0,_length:Re.width,_id:""},et={_offset:0,_length:Re.height,_id:""},xt=X.list(je,"x",!0),mt=X.list(je,"y",!0),Tt=[];for(rt=0;rt<xt.length;rt++)for(Tt.push({x:xt[rt],y:et}),ct=0;ct<mt.length;ct++)rt===0&&Tt.push({x:ut,y:mt[ct]}),Tt.push({x:xt[rt],y:mt[ct]});var yt=Re._clips.selectAll(".axesclip").data(Tt,function(bt){return bt.x._id+bt.y._id});yt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(bt){return"clip"+Re._uid+bt.x._id+bt.y._id}).append("rect"),yt.exit().remove(),yt.each(function(bt){M.select(this).select("rect").attr({x:bt.x._offset||0,y:bt.y._offset||0,width:bt.x._length||1,height:bt.y._length||1})})}},X.draw=function(je,Re,rt){var ct=je._fullLayout;Re==="redraw"&&ct._paper.selectAll("g.subplot").each(function(mt){var Tt=mt[0],yt=ct._plots[Tt];if(yt){var bt=yt.xaxis,zt=yt.yaxis;yt.xaxislayer.selectAll("."+bt._id+"tick").remove(),yt.yaxislayer.selectAll("."+zt._id+"tick").remove(),yt.xaxislayer.selectAll("."+bt._id+"tick2").remove(),yt.yaxislayer.selectAll("."+zt._id+"tick2").remove(),yt.xaxislayer.selectAll("."+bt._id+"divider").remove(),yt.yaxislayer.selectAll("."+zt._id+"divider").remove(),yt.minorGridlayer&&yt.minorGridlayer.selectAll("path").remove(),yt.gridlayer&&yt.gridlayer.selectAll("path").remove(),yt.zerolinelayer&&yt.zerolinelayer.selectAll("path").remove(),ct._infolayer.select(".g-"+bt._id+"title").remove(),ct._infolayer.select(".g-"+zt._id+"title").remove()}});var ut=Re&&Re!=="redraw"?Re:X.listIds(je),et=X.list(je).filter(function(mt){return mt.autoshift}).map(function(mt){return mt.overlaying});ut.map(function(mt){var Tt=X.getFromId(je,mt);if(Tt.tickmode==="sync"&&Tt.overlaying){var yt=ut.findIndex(function(bt){return bt===Tt.overlaying});yt>=0&&ut.unshift(ut.splice(yt,1).shift())}});var xt={false:{left:0,right:0}};return b.syncOrAsync(ut.map(function(mt){return function(){if(mt){var Tt=X.getFromId(je,mt);rt||(rt={}),rt.axShifts=xt,rt.overlayingShiftedAx=et;var yt=X.drawOne(je,Tt,rt);return Tt._shiftPusher&&gt(Tt,Tt._fullDepth||0,xt,!0),Tt._r=Tt.range.slice(),Tt._rl=b.simpleMap(Tt._r,Tt.r2l),yt}}}))},X.drawOne=function(je,Re,rt){var ct,ut,et,xt=(rt=rt||{}).axShifts||{},mt=rt.overlayingShiftedAx||[];Re.setScale();var Tt=je._fullLayout,yt=Re._id,bt=yt.charAt(0),zt=X.counterLetter(yt),Ut=Tt._plots[Re._mainSubplot];if(Ut){if(Re._shiftPusher=Re.autoshift||mt.indexOf(Re._id)!==-1||mt.indexOf(Re.overlaying)!==-1,Re._shiftPusher&Re.anchor==="free"){var en=Re.linewidth/2||0;Re.ticks==="inside"&&(en+=Re.ticklen),gt(Re,en,xt,!0),gt(Re,Re.shift||0,xt,!1)}rt.skipTitle===!0&&Re._shift!==void 0||(Re._shift=function(Nt,Ft){return Nt.autoshift?Ft[Nt.overlaying][Nt.side]:Nt.shift||0}(Re,xt));var an=Ut[bt+"axislayer"],rn=Re._mainLinePosition,qt=rn+=Re._shift,Kt=Re._mainMirrorPosition,xn=Re._vals=X.calcTicks(Re),on=[Re.mirror,qt,Kt].join("_");for(ct=0;ct<xn.length;ct++)xn[ct].axInfo=on;Re._selections={},Re._tickAngles&&(Re._prevTickAngles=Re._tickAngles),Re._tickAngles={},Re._depth=null;var Xt={};if(Re.visible){var ln,Jt,tn=X.makeTransTickFn(Re),wn=X.makeTransTickLabelFn(Re),mn=Re.ticks==="inside",Cn=Re.ticks==="outside";if(Re.tickson==="boundaries"){var yn=function(Nt,Ft){var Qt,Tn=[],Pn=function(On,Dn){var Zn=On.xbnd[Dn];Zn!==null&&Tn.push(b.extendFlat({},On,{x:Zn}))};if(Ft.length){for(Qt=0;Qt<Ft.length;Qt++)Pn(Ft[Qt],0);Pn(Ft[Qt-1],1)}return Tn}(0,xn);Jt=X.clipEnds(Re,yn),ln=mn?Jt:yn}else Jt=X.clipEnds(Re,xn),ln=mn&&Re.ticklabelmode!=="period"?Jt:xn;var Mn,zn=Re._gridVals=Jt,Wn=function(Nt,Ft){var Qt,Tn,Pn=[],On=Ft.length&&Ft[Ft.length-1].x<Ft[0].x,Dn=function(qn,Kn){var Un=qn.xbnd[Kn];Un!==null&&Pn.push(b.extendFlat({},qn,{x:Un}))};if(Nt.showdividers&&Ft.length){for(Qt=0;Qt<Ft.length;Qt++){var Zn=Ft[Qt];Zn.text2!==Tn&&Dn(Zn,On?1:0),Tn=Zn.text2}Dn(Ft[Qt-1],On?0:1)}return Pn}(Re,xn);if(!Tt._hasOnlyLargeSploms){var sr=Re._subplotsWith,Fn={};for(ct=0;ct<sr.length;ct++){ut=sr[ct];var Yn=(et=Tt._plots[ut])[zt+"axis"],Xn=Yn._mainAxis._id;if(!Fn[Xn]){Fn[Xn]=1;var rr=bt==="x"?"M0,"+Yn._offset+"v"+Yn._length:"M"+Yn._offset+",0h"+Yn._length;X.drawGrid(je,Re,{vals:zn,counterAxis:Yn,layer:et.gridlayer.select("."+yt),minorLayer:et.minorGridlayer.select("."+yt),path:rr,transFn:tn}),X.drawZeroLine(je,Re,{counterAxis:Yn,layer:et.zerolinelayer,path:rr,transFn:tn})}}}var Yt=X.getTickSigns(Re),$t=X.getTickSigns(Re,"minor");if(Re.ticks||Re.minor&&Re.minor.ticks){var Sn,dn,En,Nn,Bn=X.makeTickPath(Re,qt,Yt[2]),$n=X.makeTickPath(Re,qt,$t[2],{minor:!0});if(Re._anchorAxis&&Re.mirror&&Re.mirror!==!0?(Sn=X.makeTickPath(Re,Kt,Yt[3]),dn=X.makeTickPath(Re,Kt,$t[3],{minor:!0}),En=Bn+Sn,Nn=$n+dn):(Sn="",dn="",En=Bn,Nn=$n),Re.showdividers&&Cn&&Re.tickson==="boundaries"){var lr={};for(ct=0;ct<Wn.length;ct++)lr[Wn[ct].x]=1;Mn=function(Nt){return lr[Nt.x]?Sn:En}}else Mn=function(Nt){return Nt.minor?Nn:En}}if(X.drawTicks(je,Re,{vals:ln,layer:an,path:Mn,transFn:tn}),Re.mirror==="allticks"){var Gt=Object.keys(Re._linepositions||{});for(ct=0;ct<Gt.length;ct++){ut=Gt[ct],et=Tt._plots[ut];var gn=Re._linepositions[ut]||[],Ct=gn[0],Rt=gn[1],Zt=gn[2],cn=X.makeTickPath(Re,Ct,Zt?Yt[0]:$t[0],{minor:Zt})+X.makeTickPath(Re,Rt,Zt?Yt[1]:$t[1],{minor:Zt});X.drawTicks(je,Re,{vals:ln,layer:et[bt+"axislayer"],path:cn,transFn:tn})}}var fn=[];if(fn.push(function(){return X.drawLabels(je,Re,{vals:xn,layer:an,plotinfo:et,transFn:wn,labelFns:X.makeLabelFns(Re,qt)})}),Re.type==="multicategory"){var _n={x:2,y:10}[bt];fn.push(function(){var Nt={x:"height",y:"width"}[bt],Ft=sn()[Nt]+_n+(Re._tickAngles[yt+"tick"]?Re.tickfont.size*Q:0);return X.drawLabels(je,Re,{vals:ht(Re,xn),layer:an,cls:yt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:tn,labelFns:X.makeLabelFns(Re,qt+Ft*Yt[4])})}),fn.push(function(){return Re._depth=Yt[4]*(sn("tick2")[Re.side]-qt),function(Nt,Ft,Qt){var Tn=Ft._id+"divider",Pn=Qt.vals,On=Qt.layer.selectAll("path."+Tn).data(Pn,pt);On.exit().remove(),On.enter().insert("path",":first-child").classed(Tn,1).classed("crisp",1).call(i.stroke,Ft.dividercolor).style("stroke-width",n.crispRound(Nt,Ft.dividerwidth,1)+"px"),On.attr("transform",Qt.transFn).attr("d",Qt.path)}(je,Re,{vals:Wn,layer:an,path:X.makeTickPath(Re,qt,Yt[4],{len:Re._depth}),transFn:tn})})}else Re.title.hasOwnProperty("standoff")&&fn.push(function(){Re._depth=Yt[4]*(sn()[Re.side]-qt)});var pn=T.getComponentMethod("rangeslider","isVisible")(Re);return rt.skipTitle||pn&&Re.side==="bottom"||fn.push(function(){return function(Nt,Ft){var Qt,Tn=Nt._fullLayout,Pn=Ft._id,On=Pn.charAt(0),Dn=Ft.title.font.size,Zn=(Ft.title.text.match(o.BR_TAG_ALL)||[]).length;if(Ft.title.hasOwnProperty("standoff"))Ft.side==="bottom"||Ft.side==="right"?Qt=Ft._depth+Ft.title.standoff+Dn*K:Ft.side!=="top"&&Ft.side!=="left"||(Qt=Ft._depth+Ft.title.standoff+Dn*($+Zn*Q));else{var qn=it(Ft);if(Ft.type==="multicategory")Qt=Ft._depth;else{var Kn=1.5*Dn;qn&&(Kn=.5*Dn,Ft.ticks==="outside"&&(Kn+=Ft.ticklen)),Qt=10+Kn+(Ft.linewidth?Ft.linewidth-1:0)}qn||(Qt+=On==="x"?Ft.side==="top"?Dn*(Ft.showticklabels?1:0):Dn*(Ft.showticklabels?1.5:.5):Ft.side==="right"?Dn*(Ft.showticklabels?1:.5):Dn*(Ft.showticklabels?.5:0))}var Un,Gn,ir,mr,ur=X.getPxPosition(Nt,Ft);if(On==="x"?(Gn=Ft._offset+Ft._length/2,ir=Ft.side==="top"?ur-Qt:ur+Qt):(ir=Ft._offset+Ft._length/2,Gn=Ft.side==="right"?ur+Qt:ur-Qt,Un={rotate:"-90",offset:0}),Ft.type!=="multicategory"){var Qn=Ft._selections[Ft._id+"tick"];if(mr={selection:Qn,side:Ft.side},Qn&&Qn.node()&&Qn.node().parentNode){var pr=n.getTranslate(Qn.node().parentNode);mr.offsetLeft=pr.x,mr.offsetTop=pr.y}Ft.title.hasOwnProperty("standoff")&&(mr.pad=0)}return Ft._titleStandoff=Qt,t.draw(Nt,Pn+"title",{propContainer:Ft,propName:Ft._name+".title.text",placeholder:Tn._dfltTitle[On],avoid:mr,transform:Un,attributes:{x:Gn,y:ir,"text-anchor":"middle"}})}(je,Re)}),fn.push(function(){var Nt,Ft,Qt,Tn,Pn=Re.side.charAt(0),On=Z[Re.side].charAt(0),Dn=X.getPxPosition(je,Re),Zn=Cn?Re.ticklen:0;(Re.automargin||pn||Re._shiftPusher)&&(Re.type==="multicategory"?Nt=sn("tick2"):(Nt=sn(),bt==="x"&&Pn==="b"&&(Re._depth=Math.max(Nt.width>0?Nt.bottom-Dn:0,Zn))));var qn=0,Kn=0;if(Re._shiftPusher&&(qn=Math.max(Zn,Nt.height>0?Pn==="l"?Dn-Nt.left:Nt.right-Dn:0),Re.title.text!==Tt._dfltTitle[bt]&&(Kn=(Re._titleStandoff||0)+(Re._titleScoot||0),Pn==="l"&&(Kn+=Qe(Re))),Re._fullDepth=Math.max(qn,Kn)),Re.automargin){Ft={x:0,y:0,r:0,l:0,t:0,b:0};var Un=[0,1],Gn=typeof Re._shift=="number"?Re._shift:0;if(bt==="x"){if(Pn==="b"?Ft[Pn]=Re._depth:(Ft[Pn]=Re._depth=Math.max(Nt.width>0?Dn-Nt.top:0,Zn),Un.reverse()),Nt.width>0){var ir=Nt.right-(Re._offset+Re._length);ir>0&&(Ft.xr=1,Ft.r=ir);var mr=Re._offset-Nt.left;mr>0&&(Ft.xl=0,Ft.l=mr)}}else if(Pn==="l"?(Re._depth=Math.max(Nt.height>0?Dn-Nt.left:0,Zn),Ft[Pn]=Re._depth-Gn):(Re._depth=Math.max(Nt.height>0?Nt.right-Dn:0,Zn),Ft[Pn]=Re._depth+Gn,Un.reverse()),Nt.height>0){var ur=Nt.bottom-(Re._offset+Re._length);ur>0&&(Ft.yb=0,Ft.b=ur);var Qn=Re._offset-Nt.top;Qn>0&&(Ft.yt=1,Ft.t=Qn)}Ft[zt]=Re.anchor==="free"?Re.position:Re._anchorAxis.domain[Un[0]],Re.title.text!==Tt._dfltTitle[bt]&&(Ft[Pn]+=Qe(Re)+(Re.title.standoff||0)),Re.mirror&&Re.anchor!=="free"&&((Qt={x:0,y:0,r:0,l:0,t:0,b:0})[On]=Re.linewidth,Re.mirror&&Re.mirror!==!0&&(Qt[On]+=Zn),Re.mirror===!0||Re.mirror==="ticks"?Qt[zt]=Re._anchorAxis.domain[Un[1]]:Re.mirror!=="all"&&Re.mirror!=="allticks"||(Qt[zt]=[Re._counterDomainMin,Re._counterDomainMax][Un[1]]))}pn&&(Tn=T.getComponentMethod("rangeslider","autoMarginOpts")(je,Re)),typeof Re.automargin=="string"&&(nt(Ft,Re.automargin),nt(Qt,Re.automargin)),s.autoMargin(je,Ot(Re),Ft),s.autoMargin(je,Pt(Re),Qt),s.autoMargin(je,St(Re),Tn)}),b.syncOrAsync(fn)}}function sn(Nt){var Ft=yt+(Nt||"tick");return Xt[Ft]||(Xt[Ft]=function(Qt,Tn,Pn){var On,Dn,Zn,qn;if(Qt._selections[Tn].size())On=1/0,Dn=-1/0,Zn=1/0,qn=-1/0,Qt._selections[Tn].each(function(){var Un=Mt(this),Gn=n.bBox(Un.node().parentNode);On=Math.min(On,Gn.top),Dn=Math.max(Dn,Gn.bottom),Zn=Math.min(Zn,Gn.left),qn=Math.max(qn,Gn.right)});else{var Kn=X.makeLabelFns(Qt,Pn);On=Dn=Kn.yFn({dx:0,dy:0,fontSize:0}),Zn=qn=Kn.xFn({dx:0,dy:0,fontSize:0})}return{top:On,bottom:Dn,left:Zn,right:qn,height:Dn-On,width:qn-Zn}}(Re,Ft,qt)),Xt[Ft]}},X.getTickSigns=function(je,Re){var rt=je._id.charAt(0),ct={x:"top",y:"right"}[rt],ut=je.side===ct?1:-1,et=[-1,1,ut,-ut];return(Re?(je.minor||{}).ticks:je.ticks)!=="inside"==(rt==="x")&&(et=et.map(function(xt){return-xt})),je.side&&et.push({l:-1,t:-1,r:1,b:1}[je.side.charAt(0)]),et},X.makeTransTickFn=function(je){return je._id.charAt(0)==="x"?function(Re){return f(je._offset+je.l2p(Re.x),0)}:function(Re){return f(0,je._offset+je.l2p(Re.x))}},X.makeTransTickLabelFn=function(je){var Re=function(bt){var zt=bt.ticklabelposition||"",Ut=function(tn){return zt.indexOf(tn)!==-1},en=Ut("top"),an=Ut("left"),rn=Ut("right"),qt=Ut("bottom"),Kt=Ut("inside"),xn=qt||an||en||rn;if(!xn&&!Kt)return[0,0];var on=bt.side,Xt=xn?(bt.tickwidth||0)/2:0,ln=3,Jt=bt.tickfont?bt.tickfont.size:12;return(qt||en)&&(Xt+=Jt*K,ln+=(bt.linewidth||0)/2),(an||rn)&&(Xt+=(bt.linewidth||0)/2,ln+=3),Kt&&on==="top"&&(ln-=Jt*(1-K)),(an||en)&&(Xt=-Xt),on!=="bottom"&&on!=="right"||(ln=-ln),[xn?Xt:0,Kt?ln:0]}(je),rt=je.ticklabelshift||0,ct=je.ticklabelstandoff||0,ut=Re[0],et=Re[1],xt=je.range[0]>je.range[1],mt=je.ticklabelposition&&je.ticklabelposition.indexOf("inside")!==-1,Tt=!mt;if(rt&&(rt*=xt?-1:1),ct){var yt=je.side;ct*=mt&&(yt==="top"||yt==="left")||Tt&&(yt==="bottom"||yt==="right")?1:-1}return je._id.charAt(0)==="x"?function(bt){return f(ut+je._offset+je.l2p(vt(bt))+rt,et+ct)}:function(bt){return f(et+ct,ut+je._offset+je.l2p(vt(bt))+rt)}},X.makeTickPath=function(je,Re,rt,ct){ct||(ct={});var ut=ct.minor;if(ut&&!je.minor)return"";var et=ct.len!==void 0?ct.len:ut?je.minor.ticklen:je.ticklen,xt=je._id.charAt(0),mt=(je.linewidth||1)/2;return xt==="x"?"M0,"+(Re+mt*rt)+"v"+et*rt:"M"+(Re+mt*rt)+",0h"+et*rt},X.makeLabelFns=function(je,Re,rt){var ct=je.ticklabelposition||"",ut=function(yn){return ct.indexOf(yn)!==-1},et=ut("top"),xt=ut("left"),mt=ut("right"),Tt=ut("bottom")||xt||et||mt,yt=ut("inside"),bt=ct==="inside"&&je.ticks==="inside"||!yt&&je.ticks==="outside"&&je.tickson!=="boundaries",zt=0,Ut=0,en=bt?je.ticklen:0;if(yt?en*=-1:Tt&&(en=0),bt&&(zt+=en,rt)){var an=b.deg2rad(rt);zt=en*Math.cos(an)+1,Ut=en*Math.sin(an)}je.showticklabels&&(bt||je.showline)&&(zt+=.2*je.tickfont.size);var rn,qt,Kt,xn,on,Xt={labelStandoff:zt+=(je.linewidth||1)/2*(yt?-1:1),labelShift:Ut},ln=0,Jt=je.side,tn=je._id.charAt(0),wn=je.tickangle;if(tn==="x")xn=(on=!yt&&Jt==="bottom"||yt&&Jt==="top")?1:-1,yt&&(xn*=-1),rn=Ut*xn,qt=Re+zt*xn,Kt=on?1:-.2,Math.abs(wn)===90&&(yt?Kt+=$:Kt=wn===-90&&Jt==="bottom"?K:wn===90&&Jt==="top"?$:.5,ln=$/2*(wn/90)),Xt.xFn=function(yn){return yn.dx+rn+ln*yn.fontSize},Xt.yFn=function(yn){return yn.dy+qt+yn.fontSize*Kt},Xt.anchorFn=function(yn,Mn){if(Tt){if(xt)return"end";if(mt)return"start"}return k(Mn)&&Mn!==0&&Mn!==180?Mn*xn<0!==yt?"end":"start":"middle"},Xt.heightFn=function(yn,Mn,zn){return Mn<-60||Mn>60?-.5*zn:je.side==="top"!==yt?-zn:0};else if(tn==="y"){if(xn=(on=!yt&&Jt==="left"||yt&&Jt==="right")?1:-1,yt&&(xn*=-1),rn=zt,qt=Ut*xn,Kt=0,yt||Math.abs(wn)!==90||(Kt=wn===-90&&Jt==="left"||wn===90&&Jt==="right"?K:.5),yt){var mn=k(wn)?+wn:0;if(mn!==0){var Cn=b.deg2rad(mn);ln=Math.abs(Math.sin(Cn))*K*xn,Kt=0}}Xt.xFn=function(yn){return yn.dx+Re-(rn+yn.fontSize*Kt)*xn+ln*yn.fontSize},Xt.yFn=function(yn){return yn.dy+qt+yn.fontSize*$},Xt.anchorFn=function(yn,Mn){return k(Mn)&&Math.abs(Mn)===90?"middle":on?"end":"start"},Xt.heightFn=function(yn,Mn,zn){return je.side==="right"&&(Mn*=-1),Mn<-30?-zn:Mn<30?-.5*zn:0}}return Xt},X.drawTicks=function(je,Re,rt){rt=rt||{};var ct=Re._id+"tick",ut=[].concat(Re.minor&&Re.minor.ticks?rt.vals.filter(function(xt){return xt.minor&&!xt.noTick}):[]).concat(Re.ticks?rt.vals.filter(function(xt){return!xt.minor&&!xt.noTick}):[]),et=rt.layer.selectAll("path."+ct).data(ut,pt);et.exit().remove(),et.enter().append("path").classed(ct,1).classed("ticks",1).classed("crisp",rt.crisp!==!1).each(function(xt){return i.stroke(M.select(this),xt.minor?Re.minor.tickcolor:Re.tickcolor)}).style("stroke-width",function(xt){return n.crispRound(je,xt.minor?Re.minor.tickwidth:Re.tickwidth,1)+"px"}).attr("d",rt.path).style("display",null),dt(Re,[F]),et.attr("transform",rt.transFn)},X.drawGrid=function(je,Re,rt){if(rt=rt||{},Re.tickmode!=="sync"){var ct=Re._id+"grid",ut=Re.minor&&Re.minor.showgrid,et=ut?rt.vals.filter(function(Kt){return Kt.minor}):[],xt=Re.showgrid?rt.vals.filter(function(Kt){return!Kt.minor}):[],mt=rt.counterAxis;if(mt&&X.shouldShowZeroLine(je,Re,mt))for(var Tt=Re.tickmode==="array",yt=0;yt<xt.length;yt++){var bt=xt[yt].x;if(Tt?!bt:Math.abs(bt)<Re.dtick/100){if(xt=xt.slice(0,yt).concat(xt.slice(yt+1)),!Tt)break;yt--}}Re._gw=n.crispRound(je,Re.gridwidth,1);for(var zt=ut?n.crispRound(je,Re.minor.gridwidth,1):0,Ut=rt.layer,en=rt.minorLayer,an=1;an>=0;an--){var rn=an?Ut:en;if(rn){var qt=rn.selectAll("path."+ct).data(an?xt:et,pt);qt.exit().remove(),qt.enter().append("path").classed(ct,1).classed("crisp",rt.crisp!==!1),qt.attr("transform",rt.transFn).attr("d",rt.path).each(function(Kt){return i.stroke(M.select(this),Kt.minor?Re.minor.gridcolor:Re.gridcolor||"#ddd")}).style("stroke-dasharray",function(Kt){return n.dashStyle(Kt.minor?Re.minor.griddash:Re.griddash,Kt.minor?Re.minor.gridwidth:Re.gridwidth)}).style("stroke-width",function(Kt){return(Kt.minor?zt:Re._gw)+"px"}).style("display",null),typeof rt.path=="function"&&qt.attr("d",rt.path)}}dt(Re,[N,W])}},X.drawZeroLine=function(je,Re,rt){rt=rt||rt;var ct=Re._id+"zl",ut=X.shouldShowZeroLine(je,Re,rt.counterAxis),et=rt.layer.selectAll("path."+ct).data(ut?[{x:0,id:Re._id}]:[]);et.exit().remove(),et.enter().append("path").classed(ct,1).classed("zl",1).classed("crisp",rt.crisp!==!1).each(function(){rt.layer.selectAll("path").sort(function(xt,mt){return se(xt.id,mt.id)})}),et.attr("transform",rt.transFn).attr("d",rt.path).call(i.stroke,Re.zerolinecolor||i.defaultLine).style("stroke-width",n.crispRound(je,Re.zerolinewidth,Re._gw||1)+"px").style("display",null),dt(Re,[I])},X.drawLabels=function(je,Re,rt){rt=rt||{};var ct=je._fullLayout,ut=Re._id,et=rt.cls||ut+"tick",xt=rt.vals.filter(function(Fn){return Fn.text}),mt=rt.labelFns,Tt=rt.secondary?0:Re.tickangle,yt=(Re._prevTickAngles||{})[et],bt=rt.layer.selectAll("g."+et).data(Re.showticklabels?xt:[],pt),zt=[];function Ut(Fn,Yn){Fn.each(function(Xn){var rr=M.select(this),Yt=rr.select(".text-math-group"),$t=mt.anchorFn(Xn,Yn),Sn=rt.transFn.call(rr.node(),Xn)+(k(Yn)&&+Yn!=0?" rotate("+Yn+","+mt.xFn(Xn)+","+(mt.yFn(Xn)-Xn.fontSize/2)+")":""),dn=o.lineCount(rr),En=Q*Xn.fontSize,Nn=mt.heightFn(Xn,k(Yn)?+Yn:0,(dn-1)*En);if(Nn&&(Sn+=f(0,Nn)),Yt.empty()){var Bn=rr.select("text");Bn.attr({transform:Sn,"text-anchor":$t}),Bn.style("opacity",1),Re._adjustTickLabelsOverflow&&Re._adjustTickLabelsOverflow()}else{var $n=n.bBox(Yt.node()).width*{end:-.5,start:.5}[$t];Yt.attr("transform",Sn+f($n,0))}})}bt.enter().append("g").classed(et,1).append("text").attr("text-anchor","middle").each(function(Fn){var Yn=M.select(this),Xn=je._promises.length;Yn.call(o.positionText,mt.xFn(Fn),mt.yFn(Fn)).call(n.font,{family:Fn.font,size:Fn.fontSize,color:Fn.fontColor,weight:Fn.fontWeight,style:Fn.fontStyle,variant:Fn.fontVariant,textcase:Fn.fontTextcase,lineposition:Fn.fontLineposition,shadow:Fn.fontShadow}).text(Fn.text).call(o.convertToTspans,je),je._promises[Xn]?zt.push(je._promises.pop().then(function(){Ut(Yn,Tt)})):Ut(Yn,Tt)}),dt(Re,[U]),bt.exit().remove(),rt.repositionOnUpdate&&bt.each(function(Fn){M.select(this).select("text").call(o.positionText,mt.xFn(Fn),mt.yFn(Fn))}),Re._adjustTickLabelsOverflow=function(){var Fn=Re.ticklabeloverflow;if(Fn&&Fn!=="allow"){var Yn=Fn.indexOf("hide")!==-1,Xn=Re._id.charAt(0)==="x",rr=0,Yt=Xn?je._fullLayout.width:je._fullLayout.height;if(Fn.indexOf("domain")!==-1){var $t=b.simpleMap(Re.range,Re.r2l);rr=Re.l2p($t[0])+Re._offset,Yt=Re.l2p($t[1])+Re._offset}var Sn=Math.min(rr,Yt),dn=Math.max(rr,Yt),En=Re.side,Nn=1/0,Bn=-1/0;for(var $n in bt.each(function(gn){var Ct=M.select(this);if(Ct.select(".text-math-group").empty()){var Rt=n.bBox(Ct.node()),Zt=0;Xn?(Rt.right>dn||Rt.left<Sn)&&(Zt=1):(Rt.bottom>dn||Rt.top+(Re.tickangle?0:gn.fontSize/4)<Sn)&&(Zt=1);var cn=Ct.select("text");Zt?Yn&&cn.style("opacity",0):(cn.style("opacity",1),Nn=En==="bottom"||En==="right"?Math.min(Nn,Xn?Rt.top:Rt.left):-1/0,Bn=En==="top"||En==="left"?Math.max(Bn,Xn?Rt.bottom:Rt.right):1/0)}}),ct._plots){var lr=ct._plots[$n];if(Re._id===lr.xaxis._id||Re._id===lr.yaxis._id){var Gt=Xn?lr.yaxis:lr.xaxis;Gt&&(Gt["_visibleLabelMin_"+Re._id]=Nn,Gt["_visibleLabelMax_"+Re._id]=Bn)}}}},Re._hideCounterAxisInsideTickLabels=function(Fn){var Yn=Re._id.charAt(0)==="x",Xn=[];for(var rr in ct._plots){var Yt=ct._plots[rr];Re._id!==Yt.xaxis._id&&Re._id!==Yt.yaxis._id||Xn.push(Yn?Yt.yaxis:Yt.xaxis)}Xn.forEach(function($t,Sn){$t&&it($t)&&(Fn||[I,W,N,F,U]).forEach(function(dn){var En=dn.K==="tick"&&dn.L==="text"&&Re.ticklabelmode==="period",Nn=ct._plots[Re._mainSubplot];(dn.K===I.K?Nn.zerolinelayer.selectAll("."+Re._id+"zl"):dn.K===W.K?Nn.minorGridlayer.selectAll("."+Re._id):dn.K===N.K?Nn.gridlayer.selectAll("."+Re._id):Nn[Re._id.charAt(0)+"axislayer"]).each(function(){var Bn=M.select(this);dn.L&&(Bn=Bn.selectAll(dn.L)),Bn.each(function($n){var lr=Re.l2p(En?vt($n):$n.x)+Re._offset,Gt=M.select(this);lr<Re["_visibleLabelMax_"+$t._id]&&lr>Re["_visibleLabelMin_"+$t._id]?Gt.style("display","none"):dn.K!=="tick"||Sn||Gt.style("display",null)})})})})},Ut(bt,yt+1?yt:Tt);var en=null;Re._selections&&(Re._selections[et]=bt);var an=[function(){return zt.length&&Promise.all(zt)}];Re.automargin&&ct._redrawFromAutoMarginCount&&yt===90?(en=yt,an.push(function(){Ut(bt,yt)})):an.push(function(){if(Ut(bt,Tt),xt.length&&Re.autotickangles&&(Re.type!=="log"||String(Re.dtick).charAt(0)!=="D")){en=Re.autotickangles[0];var Fn,Yn=0,Xn=[],rr=1;bt.each(function(sn){Yn=Math.max(Yn,sn.fontSize);var Nt=Re.l2p(sn.x),Ft=Mt(this),Qt=n.bBox(Ft.node());rr=Math.max(rr,o.lineCount(Ft)),Xn.push({top:0,bottom:10,height:10,left:Nt-Qt.width/2,right:Nt+Qt.width/2+2,width:Qt.width+2})});var Yt=(Re.tickson==="boundaries"||Re.showdividers)&&!rt.secondary,$t=xt.length,Sn=Math.abs((xt[$t-1].x-xt[0].x)*Re._m)/($t-1),dn=Yt?Sn/2:Sn,En=Yt?Re.ticklen:1.25*Yn*rr,Nn=dn/Math.sqrt(Math.pow(dn,2)+Math.pow(En,2)),Bn=Re.autotickangles.map(function(sn){return sn*Math.PI/180}),$n=Bn.find(function(sn){return Math.abs(Math.cos(sn))<=Nn});$n===void 0&&($n=Bn.reduce(function(sn,Nt){return Math.abs(Math.cos(sn))<Math.abs(Math.cos(Nt))?sn:Nt},Bn[0]));var lr=$n*(180/Math.PI);if(Yt){var Gt=2;for(Re.ticks&&(Gt+=Re.tickwidth/2),Fn=0;Fn<Xn.length;Fn++){var gn=xt[Fn].xbnd,Ct=Xn[Fn];if(gn[0]!==null&&Ct.left-Re.l2p(gn[0])<Gt||gn[1]!==null&&Re.l2p(gn[1])-Ct.right<Gt){en=lr;break}}}else{var Rt=Re.ticklabelposition||"",Zt=function(sn){return Rt.indexOf(sn)!==-1},cn=Zt("top"),fn=Zt("left"),_n=Zt("right"),pn=Zt("bottom")||fn||cn||_n?(Re.tickwidth||0)+6:0;for(Fn=0;Fn<Xn.length-1;Fn++)if(b.bBoxIntersect(Xn[Fn],Xn[Fn+1],pn)){en=lr;break}}en&&Ut(bt,en)}}),Re._tickAngles&&an.push(function(){Re._tickAngles[et]=en===null?k(Tt)?Tt:0:en});var rn=function(){var Fn=0,Yn=0;return bt.each(function(Xn,rr){var Yt,$t=Mt(this);$t.select(".text-math-group").empty()&&(Re._vals[rr]&&(Yt=Re._vals[rr].bb||n.bBox($t.node()),Re._vals[rr].bb=Yt),Fn=Math.max(Fn,Yt.width),Yn=Math.max(Yn,Yt.height))}),{labelsMaxW:Fn,labelsMaxH:Yn}},qt=Re._anchorAxis;if(qt&&(qt.autorange||qt.insiderange)&&it(Re)&&!ce(ct,Re._id)&&(ct._insideTickLabelsUpdaterange||(ct._insideTickLabelsUpdaterange={}),qt.autorange&&(ct._insideTickLabelsUpdaterange[qt._name+".autorange"]=qt.autorange,an.push(rn)),qt.insiderange)){var Kt=rn(),xn=Re._id.charAt(0)==="y"?Kt.labelsMaxW:Kt.labelsMaxH;xn+=6,Re.ticklabelposition==="inside"&&(xn+=Re.ticklen||0);var on=Re.side==="right"||Re.side==="top"?1:-1,Xt=on===1?1:0,ln=on===1?0:1,Jt=[];Jt[ln]=qt.range[ln];var tn=qt.range,wn=qt.r2p(tn[Xt]),mn=qt.r2p(tn[ln]),Cn=ct._insideTickLabelsUpdaterange[qt._name+".range"];if(Cn){var yn=qt.r2p(Cn[Xt]),Mn=qt.r2p(Cn[ln]),zn=on*(Re._id.charAt(0)==="y"?1:-1);zn*wn<zn*yn&&(wn=yn,Jt[Xt]=tn[Xt]=Cn[Xt]),zn*mn>zn*Mn&&(mn=Mn,Jt[ln]=tn[ln]=Cn[ln])}var Wn=Math.abs(mn-wn);Wn-xn>0?xn*=1+xn/(Wn-=xn):xn=0,Re._id.charAt(0)!=="y"&&(xn=-xn),Jt[Xt]=qt.p2r(qt.r2p(tn[Xt])+on*xn),qt.autorange==="min"||qt.autorange==="max reversed"?(Jt[0]=null,qt._rangeInitial0=void 0,qt._rangeInitial1=void 0):qt.autorange!=="max"&&qt.autorange!=="min reversed"||(Jt[1]=null,qt._rangeInitial0=void 0,qt._rangeInitial1=void 0),ct._insideTickLabelsUpdaterange[qt._name+".range"]=Jt}var sr=b.syncOrAsync(an);return sr&&sr.then&&je._promises.push(sr),sr},X.getPxPosition=function(je,Re){var rt,ct=je._fullLayout._size,ut=Re._id.charAt(0),et=Re.side;return Re.anchor!=="free"?rt=Re._anchorAxis:ut==="x"?rt={_offset:ct.t+(1-(Re.position||0))*ct.h,_length:0}:ut==="y"&&(rt={_offset:ct.l+(Re.position||0)*ct.w+Re._shift,_length:0}),et==="top"||et==="left"?rt._offset:et==="bottom"||et==="right"?rt._offset+rt._length:void 0},X.shouldShowZeroLine=function(je,Re,rt){var ct=b.simpleMap(Re.range,Re.r2l);return ct[0]*ct[1]<=0&&Re.zeroline&&(Re.type==="linear"||Re.type==="-")&&!(Re.rangebreaks&&Re.maskBreaks(0)===j)&&(Ke(Re,0)||!function(ut,et,xt,mt){var Tt=xt._mainAxis;if(Tt){var yt=ut._fullLayout,bt=et._id.charAt(0),zt=X.counterLetter(et._id),Ut=et._offset+(Math.abs(mt[0])<Math.abs(mt[1])==(bt==="x")?0:et._length),en=yt._plots[xt._mainSubplot];if(!(en.mainplotinfo||en).overlays.length)return Kt(xt);for(var an=X.list(ut,zt),rn=0;rn<an.length;rn++){var qt=an[rn];if(qt._mainAxis===Tt&&Kt(qt))return!0}}function Kt(xn){if(!xn.showline||!xn.linewidth)return!1;var on=Math.max((xn.linewidth+et.zerolinewidth)/2,1);function Xt(tn){return typeof tn=="number"&&Math.abs(tn-Ut)<on}if(Xt(xn._mainLinePosition)||Xt(xn._mainMirrorPosition))return!0;var ln=xn._linepositions||{};for(var Jt in ln)if(Xt(ln[Jt][0])||Xt(ln[Jt][1]))return!0}}(je,Re,rt,ct)||function(ut,et){for(var xt=ut._fullData,mt=et._mainSubplot,Tt=et._id.charAt(0),yt=0;yt<xt.length;yt++){var bt=xt[yt];if(bt.visible===!0&&bt.xaxis+bt.yaxis===mt&&(T.traceIs(bt,"bar-like")&&bt.orientation==={x:"h",y:"v"}[Tt]||bt.fill&&bt.fill.charAt(bt.fill.length-1)===Tt))return!0}return!1}(je,Re))},X.clipEnds=function(je,Re){return Re.filter(function(rt){return Ke(je,rt.x)})},X.allowAutoMargin=function(je){for(var Re=X.list(je,"",!0),rt=0;rt<Re.length;rt++){var ct=Re[rt];ct.automargin&&(s.allowAutoMargin(je,Ot(ct)),ct.mirror&&s.allowAutoMargin(je,Pt(ct))),T.getComponentMethod("rangeslider","isVisible")(ct)&&s.allowAutoMargin(je,St(ct))}},X.swap=function(je,Re){for(var rt=function(ut,et){var xt,mt,Tt=[];for(xt=0;xt<et.length;xt++){var yt=[],bt=ut._fullData[et[xt]].xaxis,zt=ut._fullData[et[xt]].yaxis;if(bt&&zt){for(mt=0;mt<Tt.length;mt++)Tt[mt].x.indexOf(bt)===-1&&Tt[mt].y.indexOf(zt)===-1||yt.push(mt);if(yt.length){var Ut,en=Tt[yt[0]];if(yt.length>1)for(mt=1;mt<yt.length;mt++)Ut=Tt[yt[mt]],He(en.x,Ut.x),He(en.y,Ut.y);He(en.x,[bt]),He(en.y,[zt])}else Tt.push({x:[bt],y:[zt]})}}return Tt}(je,Re),ct=0;ct<rt.length;ct++)We(je,rt[ct].x,rt[ct].y)}},52976:function(ee,R,e){var M=e(38248),k=e(3400),s=e(39032).BADNUM,T=k.isArrayOrTypedArray,b=k.isDateTime,f=k.cleanNumber,o=Math.round;function t(n,r){return r?M(n):typeof n=="number"}function i(n){return Math.max(1,(n-1)/1e3)}ee.exports=function(n,r,a){var l=n,u=a.noMultiCategory;if(T(l)&&!l.length)return"-";if(!u&&function(v){return T(v[0])&&T(v[1])}(l))return"multicategory";if(u&&Array.isArray(l[0])){for(var h=[],c=0;c<l.length;c++)if(T(l[c]))for(var x=0;x<l[c].length;x++)h.push(l[c][x]);l=h}if(function(v,g){for(var y=v.length,m=i(y),_=0,d=0,S={},w=0;w<y;w+=m){var E=v[o(w)],C=String(E);S[C]||(S[C]=1,b(E,g)&&_++,M(E)&&d++)}return _>2*d}(l,r))return"date";var p=a.autotypenumbers!=="strict";return function(v,g){for(var y=v.length,m=i(y),_=0,d=0,S={},w=0;w<y;w+=m){var E=v[o(w)],C=String(E);if(!S[C]){S[C]=1;var O=typeof E;O==="boolean"?d++:(g?f(E)!==s:O==="number")?_++:O==="string"&&d++}}return d>2*_}(l,p)?"category":function(v,g){for(var y=v.length,m=0;m<y;m++)if(t(v[m],g))return!0;return!1}(l,p)?"linear":"-"}},28336:function(ee,R,e){var M=e(38248),k=e(24040),s=e(3400),T=e(31780),b=e(51272),f=e(94724),o=e(26332),t=e(25404),i=e(95936),n=e(42568),r=e(22416),a=e(42136),l=e(96312),u=e(78344),h=e(33816).WEEKDAY_PATTERN,c=e(33816).HOUR_PATTERN;function x(g,y,m){function _(z,j){return s.coerce(g,y,f.rangebreaks,z,j)}if(_("enabled")){var d=_("bounds");if(d&&d.length>=2){var S,w,E="";if(d.length===2){for(S=0;S<2;S++)if(w=v(d[S])){E=h;break}}var C=_("pattern",E);if(C===h)for(S=0;S<2;S++)(w=v(d[S]))&&(y.bounds[S]=d[S]=w-1);if(C)for(S=0;S<2;S++)switch(w=d[S],C){case h:if(!M(w)||(w=+w)!==Math.floor(w)||w<0||w>=7)return void(y.enabled=!1);y.bounds[S]=d[S]=w;break;case c:if(!M(w)||(w=+w)<0||w>24)return void(y.enabled=!1);y.bounds[S]=d[S]=w}if(m.autorange===!1){var O=m.range;if(O[0]<O[1]){if(d[0]<O[0]&&d[1]>O[1])return void(y.enabled=!1)}else if(d[0]>O[0]&&d[1]<O[1])return void(y.enabled=!1)}}else{var P=_("values");if(!P||!P.length)return void(y.enabled=!1);_("dvalue")}}}ee.exports=function(g,y,m,_,d){var S,w=_.letter,E=_.font||{},C=_.splomStash||{},O=m("visible",!_.visibleDflt),P=y._template||{},z=y.type||P.type||"-";z==="date"&&(k.getComponentMethod("calendars","handleDefaults")(g,y,"calendar",_.calendar),_.noTicklabelmode||(S=m("ticklabelmode"))),_.noTicklabelindex||z!=="date"&&z!=="linear"||m("ticklabelindex");var j="";_.noTicklabelposition&&z!=="multicategory"||(j=s.coerce(g,y,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:S==="period"?["outside","inside"]:w==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),_.noTicklabeloverflow||m("ticklabeloverflow",j.indexOf("inside")!==-1?"hide past domain":z==="category"||z==="multicategory"?"allow":"hide past div"),u(y,d),l(g,y,m,_),r(g,y,m,_),z==="category"||_.noHover||m("hoverformat");var I=m("color"),N=I!==f.color.dflt?I:E.color,W=C.label||d._dfltTitle[w];if(n(g,y,m,z,_),!O)return y;m("title.text",W),s.coerceFont(m,"title.font",E,{overrideDflt:{size:s.bigFont(E.size),color:N}}),o(g,y,m,z);var F=_.hasMinor;if(F&&(T.newContainer(y,"minor"),o(g,y,m,z,{isMinor:!0})),i(g,y,m,z,_),t(g,y,m,_),F){var U=_.isMinor;_.isMinor=!0,t(g,y,m,_),_.isMinor=U}a(g,y,m,{dfltColor:I,bgColor:_.bgColor,showGrid:_.showGrid,hasMinor:F,attributes:f}),!F||y.minor.ticks||y.minor.showgrid||delete y.minor,(y.showline||y.ticks)&&m("mirror");var H,ne=z==="multicategory";if(_.noTickson||z!=="category"&&!ne||!y.ticks&&!y.showgrid||(ne&&(H="boundaries"),m("tickson",H)==="boundaries"&&delete y.ticklabelposition),ne&&m("showdividers")&&(m("dividercolor"),m("dividerwidth")),z==="date")if(b(g,y,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:x}),y.rangebreaks.length){for(var $=0;$<y.rangebreaks.length;$++)if(y.rangebreaks[$].pattern===h){y._hasDayOfWeekBreaks=!0;break}if(u(y,d),d._has("scattergl")||d._has("splom"))for(var K=0;K<_.data.length;K++){var Q=_.data[K];Q.type!=="scattergl"&&Q.type!=="splom"||(Q.visible=!1,s.warn(Q.type+" traces do not work on axes with rangebreaks. Setting trace "+Q.index+" to `visible: false`."))}}else delete y.rangebreaks;return y};var p={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function v(g){if(typeof g=="string")return p[g.substr(0,3).toLowerCase()]}},29736:function(ee,R,e){var M=e(26880),k=M.FORMAT_LINK,s=M.DATE_FORMAT_LINK;function T(f,o){return["Sets the "+f+" formatting rule"+(o?"for `"+o+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+k+"."].join(" ")}function b(f,o){return T(f,o)+[" And for dates see: "+s+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}ee.exports={axisHoverFormat:function(f,o){return{valType:"string",dflt:"",editType:"none",description:(o?T:b)("hover text",f)+["By default the values are formatted using "+(o?"generic number format":"`"+f+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:T,descriptionWithDates:b}},79811:function(ee,R,e){var M=e(24040),k=e(33816);function s(T,b){if(b&&b.length){for(var f=0;f<b.length;f++)if(b[f][T])return!0}return!1}R.id2name=function(T){if(typeof T=="string"&&T.match(k.AX_ID_PATTERN)){var b=T.split(" ")[0].substr(1);return b==="1"&&(b=""),T.charAt(0)+"axis"+b}},R.name2id=function(T){if(T.match(k.AX_NAME_PATTERN)){var b=T.substr(5);return b==="1"&&(b=""),T.charAt(0)+b}},R.cleanId=function(T,b,f){var o=/( domain)$/.test(T);if(typeof T=="string"&&T.match(k.AX_ID_PATTERN)&&(!b||T.charAt(0)===b)&&(!o||f)){var t=T.split(" ")[0].substr(1).replace(/^0+/,"");return t==="1"&&(t=""),T.charAt(0)+t+(o&&f?" domain":"")}},R.list=function(T,b,f){var o=T._fullLayout;if(!o)return[];var t,i=R.listIds(T,b),n=new Array(i.length);for(t=0;t<i.length;t++){var r=i[t];n[t]=o[r.charAt(0)+"axis"+r.substr(1)]}if(!f){var a=o._subplots.gl3d||[];for(t=0;t<a.length;t++){var l=o[a[t]];b?n.push(l[b+"axis"]):n.push(l.xaxis,l.yaxis,l.zaxis)}}return n},R.listIds=function(T,b){var f=T._fullLayout;if(!f)return[];var o=f._subplots;return b?o[b+"axis"]:o.xaxis.concat(o.yaxis)},R.getFromId=function(T,b,f){var o=T._fullLayout;return b=b===void 0||typeof b!="string"?b:b.replace(" domain",""),f==="x"?b=b.replace(/y[0-9]*/,""):f==="y"&&(b=b.replace(/x[0-9]*/,"")),o[R.id2name(b)]},R.getFromTrace=function(T,b,f){var o=T._fullLayout,t=null;if(M.traceIs(b,"gl3d")){var i=b.scene;i.substr(0,5)==="scene"&&(t=o[i][f+"axis"])}else t=R.getFromId(T,b[f+"axis"]||f);return t},R.idSort=function(T,b){var f=T.charAt(0),o=b.charAt(0);return f!==o?f>o?1:-1:+(T.substr(1)||1)-+(b.substr(1)||1)},R.ref2id=function(T){return!!/^[xyz]/.test(T)&&T.split(" ")[0]},R.isLinked=function(T,b){return s(b,T._axisMatchGroups)||s(b,T._axisConstraintGroups)}},22416:function(ee,R,e){var M=e(38116).isTypedArraySpec;ee.exports=function(k,s,T,b){if(s.type==="category"){var f,o=k.categoryarray,t=Array.isArray(o)&&o.length>0||M(o);t&&(f="array");var i,n=T("categoryorder",f);n==="array"&&(i=T("categoryarray")),t||n!=="array"||(n=s.categoryorder="trace"),n==="trace"?s._initialCategories=[]:n==="array"?s._initialCategories=i.slice():(i=function(r,a){var l,u,h,c=a.dataAttr||r._id.charAt(0),x={};if(a.axData)l=a.axData;else for(l=[],u=0;u<a.data.length;u++){var p=a.data[u];p[c+"axis"]===r._id&&l.push(p)}for(u=0;u<l.length;u++){var v=l[u][c];for(h=0;h<v.length;h++){var g=v[h];g!=null&&(x[g]=1)}}return Object.keys(x)}(s,b).sort(),n==="category ascending"?s._initialCategories=i:n==="category descending"&&(s._initialCategories=i.reverse()))}}},98728:function(ee,R,e){var M=e(38248),k=e(3400),s=e(39032),T=s.ONEDAY,b=s.ONEWEEK;R.dtick=function(f,o){var t=o==="log",i=o==="date",n=o==="category",r=i?T:1;if(!f)return r;if(M(f))return(f=Number(f))<=0?r:n?Math.max(1,Math.round(f)):i?Math.max(.1,f):f;if(typeof f!="string"||!i&&!t)return r;var a=f.charAt(0),l=f.substr(1);return(l=M(l)?Number(l):0)<=0||!(i&&a==="M"&&l===Math.round(l)||t&&a==="L"||t&&a==="D"&&(l===1||l===2))?r:f},R.tick0=function(f,o,t,i){return o==="date"?k.cleanDate(f,k.dateTick0(t,i%b==0?1:0)):i!=="D1"&&i!=="D2"?M(f)?Number(f):0:void 0}},33816:function(ee,R,e){var M=e(53756).counter;ee.exports={idRegex:{x:M("x","( domain)?"),y:M("y","( domain)?")},attrRegex:M("[xy]axis"),xAxisMatch:M("xaxis"),yAxisMatch:M("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"},zindexSeparator:"z"}},71888:function(ee,R,e){var M=e(3400),k=e(19280),s=e(79811).id2name,T=e(94724),b=e(21160),f=e(78344),o=e(39032).ALMOST_EQUAL,t=e(84284).FROM_BL;function i(c,x,p){var v=p.axIds,g=p.layoutOut,y=p.hasImage,m=g._axisConstraintGroups,_=g._axisMatchGroups,d=x._id,S=d.charAt(0),w=((g._splomAxes||{})[S]||{})[d]||{},E=x._id,C=E.charAt(0)==="x";function O(Z,X){return M.coerce(c,x,T,Z,X)}x._matchGroup=null,x._constraintGroup=null,O("constrain",y?"domain":"range"),M.coerce(c,x,{constraintoward:{valType:"enumerated",values:C?["left","center","right"]:["bottom","middle","top"],dflt:C?"center":"middle"}},"constraintoward");var P,z,j=x.type,I=[];for(P=0;P<v.length;P++)(z=v[P])!==E&&g[s(z)].type===j&&I.push(z);var N=r(m,E);if(N){var W=[];for(P=0;P<I.length;P++)N[z=I[P]]||W.push(z);I=W}var F,U,H=I.length;H&&(c.matches||w.matches)&&(F=M.coerce(c,x,{matches:{valType:"enumerated",values:I,dflt:I.indexOf(w.matches)!==-1?w.matches:void 0}},"matches"));var ne=y&&!C?x.anchor:void 0;if(H&&!F&&(c.scaleanchor||ne)&&(U=M.coerce(c,x,{scaleanchor:{valType:"enumerated",values:I.concat([!1])}},"scaleanchor",ne)),F){x._matchGroup=a(_,E,F,1);var $=g[s(F)],K=n(g,x)/n(g,$);C!==(F.charAt(0)==="x")&&(K=(C?"x":"y")+K),a(m,E,F,K)}else c.matches&&v.indexOf(c.matches)!==-1&&M.warn("ignored "+x._name+'.matches: "'+c.matches+'" to avoid an infinite loop');if(U){var Q=O("scaleratio");Q||(Q=x.scaleratio=1),a(m,E,U,Q)}else c.scaleanchor&&v.indexOf(c.scaleanchor)!==-1&&M.warn("ignored "+x._name+'.scaleanchor: "'+c.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function n(c,x){var p=x.domain;return p||(p=c[s(x.overlaying)].domain),p[1]-p[0]}function r(c,x){for(var p=0;p<c.length;p++)if(c[p][x])return c[p];return null}function a(c,x,p,v){var g,y,m,_,d,S=r(c,x);S===null?((S={})[x]=1,d=c.length,c.push(S)):d=c.indexOf(S);var w=Object.keys(S);for(g=0;g<c.length;g++)if(m=c[g],g!==d&&m[p]){var E=m[p];for(y=0;y<w.length;y++)m[_=w[y]]=l(E,l(v,S[_]));return void c.splice(d,1)}if(v!==1)for(y=0;y<w.length;y++){var C=w[y];S[C]=l(v,S[C])}S[p]=1}function l(c,x){var p,v,g="",y="";typeof c=="string"&&(p=(g=c.match(/^[xy]*/)[0]).length,c=+c.substr(p)),typeof x=="string"&&(v=(y=x.match(/^[xy]*/)[0]).length,x=+x.substr(v));var m=c*x;return p||v?p&&v&&g.charAt(0)!==y.charAt(0)?p===v?m:(p>v?g.substr(v):y.substr(p))+m:g+y+c*x:m}function u(c,x){for(var p=x._size,v=p.h/p.w,g={},y=Object.keys(c),m=0;m<y.length;m++){var _=y[m],d=c[_];if(typeof d=="string"){var S=d.match(/^[xy]*/)[0],w=S.length;d=+d.substr(w);for(var E=S.charAt(0)==="y"?v:1/v,C=0;C<w;C++)d*=E}g[_]=d}return g}function h(c,x){var p=c._inputDomain,v=t[c.constraintoward],g=p[0]+(p[1]-p[0])*v;c.domain=c._input.domain=[g+(p[0]-g)/x,g+(p[1]-g)/x],c.setScale()}R.handleDefaults=function(c,x,p){var v,g,y,m,_,d,S,w,E=p.axIds,C=p.axHasImage,O=x._axisConstraintGroups=[],P=x._axisMatchGroups=[];for(v=0;v<E.length;v++)i(_=c[m=s(E[v])],d=x[m],{axIds:E,layoutOut:x,hasImage:C[m]});function z($,K){for(v=0;v<$.length;v++)for(y in g=$[v])x[s(y)][K]=g}for(z(P,"_matchGroup"),v=0;v<O.length;v++)for(y in g=O[v])if((d=x[s(y)]).fixedrange){for(var j in g){var I=s(j);(c[I]||{}).fixedrange===!1&&M.warn("fixedrange was specified as false for axis "+I+" but was overridden because another axis in its constraint group has fixedrange true"),x[I].fixedrange=!0}break}for(v=0;v<O.length;){for(y in g=O[v]){(d=x[s(y)])._matchGroup&&Object.keys(d._matchGroup).length===Object.keys(g).length&&(O.splice(v,1),v--);break}v++}z(O,"_constraintGroup");var N=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],W=!1,F=!1;function U(){w=d[S],S==="rangebreaks"&&(F=d._hasDayOfWeekBreaks)}for(v=0;v<P.length;v++){g=P[v];for(var H=0;H<N.length;H++){var ne;for(y in S=N[H],w=null,g)if(_=c[m=s(y)],d=x[m],S in d){if(!d.matches&&(ne=d,S in _)){U();break}w===null&&S in _&&U()}if(S==="range"&&w&&_.range&&_.range.length===2&&_.range[0]!==null&&_.range[1]!==null&&(W=!0),S==="autorange"&&w===null&&W&&(w=!1),w===null&&S in ne&&(w=ne[S]),w!==null)for(y in g)(d=x[s(y)])[S]=S==="range"?w.slice():w,S==="rangebreaks"&&(d._hasDayOfWeekBreaks=F,f(d,x))}}},R.enforce=function(c){var x,p,v,g,y,m,_,d,S=c._fullLayout,w=S._axisConstraintGroups||[];for(x=0;x<w.length;x++){v=u(w[x],S);var E=Object.keys(v),C=1/0,O=0,P=1/0,z={},j={},I=!1;for(p=0;p<E.length;p++)j[g=E[p]]=y=S[s(g)],y._inputDomain?y.domain=y._inputDomain.slice():y._inputDomain=y.domain.slice(),y._inputRange||(y._inputRange=y.range.slice()),y.setScale(),z[g]=m=Math.abs(y._m)/v[g],C=Math.min(C,m),y.constrain!=="domain"&&y._constraintShrinkable||(P=Math.min(P,m)),delete y._constraintShrinkable,O=Math.max(O,m),y.constrain==="domain"&&(I=!0);if(!(C>o*O)||I){for(p=0;p<E.length;p++)if(m=z[g=E[p]],_=(y=j[g]).constrain,m!==P||_==="domain")if(d=m/P,_==="range")b(y,d);else{var N=y._inputDomain,W=(y.domain[1]-y.domain[0])/(N[1]-N[0]),F=(y.r2l(y.range[1])-y.r2l(y.range[0]))/(y.r2l(y._inputRange[1])-y.r2l(y._inputRange[0]));if((d/=W)*F<1){y.domain=y._input.domain=N.slice(),b(y,d);continue}if(F<1&&(y.range=y._input.range=y._inputRange.slice(),d*=F),y.autorange){var U=y.r2l(y.range[0]),H=y.r2l(y.range[1]),ne=(U+H)/2,$=ne,K=ne,Q=Math.abs(H-ne),Z=ne-Q*d*1.0001,X=ne+Q*d*1.0001,te=k.makePadFn(S,y,0),ae=k.makePadFn(S,y,1);h(y,d);var se,ce,fe=Math.abs(y._m),pe=k.concatExtremes(c,y),ge=pe.min,me=pe.max;for(ce=0;ce<ge.length;ce++)(se=ge[ce].val-te(ge[ce])/fe)>Z&&se<$&&($=se);for(ce=0;ce<me.length;ce++)(se=me[ce].val+ae(me[ce])/fe)<X&&se>K&&(K=se);d/=(K-$)/(2*Q),$=y.l2r($),K=y.l2r(K),y.range=y._input.range=U<H?[$,K]:[K,$]}h(y,d)}}}},R.getAxisGroup=function(c,x){for(var p=c._axisMatchGroups,v=0;v<p.length;v++)if(p[v][x])return"g"+v;return x},R.clean=function(c,x){if(x._inputDomain){for(var p=!1,v=x._id,g=c._fullLayout._axisConstraintGroups,y=0;y<g.length;y++)if(g[y][v]){p=!0;break}p&&x.constrain==="domain"||(x._input.domain=x.domain=x._inputDomain,delete x._inputDomain)}}},51184:function(ee,R,e){var M=e(33428),k=e(3400),s=k.numberFormat,T=e(49760),b=e(89184),f=e(24040),o=k.strTranslate,t=e(72736),i=e(76308),n=e(43616),r=e(93024),a=e(54460),l=e(93972),u=e(86476),h=e(72760),c=h.selectingOrDrawing,x=h.freeMode,p=e(84284).FROM_TL,v=e(73696),g=e(39172).redrawReglTraces,y=e(7316),m=e(79811).getFromId,_=e(22676).prepSelect,d=e(22676).clearOutline,S=e(22676).selectOnClick,w=e(21160),E=e(33816),C=E.MINDRAG,O=E.MINZOOM,P=!0;function z(se,ce,fe,pe){var ge=k.ensureSingle(se.draglayer,ce,fe,function(me){me.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",se.id)});return ge.call(l,pe),ge.node()}function j(se,ce,fe,pe,ge,me,be){var ke=z(se,"rect",ce,fe);return M.select(ke).call(n.setRect,pe,ge,me,be),ke}function I(se,ce){for(var fe=0;fe<se.length;fe++)if(!se[fe].fixedrange)return ce;return""}function N(se,ce,fe,pe,ge){for(var me=0;me<se.length;me++){var be=se[me];if(!be.fixedrange)if(be.rangebreaks){var ke=be._id.charAt(0)==="y",ze=ke?1-ce:ce,ve=ke?1-fe:fe;pe[be._name+".range[0]"]=be.l2r(be.p2l(ze*be._length)),pe[be._name+".range[1]"]=be.l2r(be.p2l(ve*be._length))}else{var oe=be._rl[0],ie=be._rl[1]-oe;pe[be._name+".range[0]"]=be.l2r(oe+ie*ce),pe[be._name+".range[1]"]=be.l2r(oe+ie*fe)}}if(ge&&ge.length){var he=(ce+(1-fe))/2;N(ge,he,1-he,pe,[])}}function W(se,ce){for(var fe=0;fe<se.length;fe++){var pe=se[fe];if(!pe.fixedrange){if(pe.rangebreaks){var ge=pe._length,me=(pe.p2l(0+ce)-pe.p2l(0)+(pe.p2l(ge+ce)-pe.p2l(ge)))/2;pe.range=[pe.l2r(pe._rl[0]-me),pe.l2r(pe._rl[1]-me)]}else pe.range=[pe.l2r(pe._rl[0]-ce/pe._m),pe.l2r(pe._rl[1]-ce/pe._m)];pe.limitRange&&pe.limitRange()}}}function F(se){return 1-(se>=0?Math.min(se,.9):1/(1/Math.max(se,-.3)+3.222))}function U(se,ce,fe,pe,ge){return se.append("path").attr("class","zoombox").style({fill:ce>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",o(fe,pe)).attr("d",ge+"Z")}function H(se,ce,fe){return se.append("path").attr("class","zoombox-corners").style({fill:i.background,stroke:i.defaultLine,"stroke-width":1,opacity:0}).attr("transform",o(ce,fe)).attr("d","M0,0Z")}function ne(se,ce,fe,pe,ge,me){se.attr("d",pe+"M"+fe.l+","+fe.t+"v"+fe.h+"h"+fe.w+"v-"+fe.h+"h-"+fe.w+"Z"),$(se,ce,ge,me)}function $(se,ce,fe,pe){fe||(se.transition().style("fill",pe>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ce.transition().style("opacity",1).duration(200))}function K(se){M.select(se).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function Q(se){P&&se.data&&se._context.showTips&&(k.notifier(k._(se,"Double-click to zoom back out"),"long"),P=!1)}function Z(se){var ce=Math.floor(Math.min(se.b-se.t,se.r-se.l,O)/2);return"M"+(se.l-3.5)+","+(se.t-.5+ce)+"h3v"+-ce+"h"+ce+"v-3h-"+(ce+3)+"ZM"+(se.r+3.5)+","+(se.t-.5+ce)+"h-3v"+-ce+"h"+-ce+"v-3h"+(ce+3)+"ZM"+(se.r+3.5)+","+(se.b+.5-ce)+"h-3v"+ce+"h"+-ce+"v3h"+(ce+3)+"ZM"+(se.l-3.5)+","+(se.b+.5-ce)+"h3v"+ce+"h"+ce+"v3h-"+(ce+3)+"Z"}function X(se,ce,fe,pe,ge){for(var me,be,ke,ze,ve=!1,oe={},ie={},he=(ge||{}).xaHash,Se=(ge||{}).yaHash,ye=0;ye<ce.length;ye++){var we=ce[ye];for(me in fe)if(we[me]){for(ke in we)ge&&(he[ke]||Se[ke])||(ke.charAt(0)==="x"?fe:pe)[ke]||(oe[ke]=me);for(be in pe)ge&&(he[be]||Se[be])||!we[be]||(ve=!0)}for(be in pe)if(we[be])for(ze in we)ge&&(he[ze]||Se[ze])||(ze.charAt(0)==="x"?fe:pe)[ze]||(ie[ze]=be)}ve&&(k.extendFlat(oe,ie),ie={});var Me={},Oe=[];for(ke in oe){var Ie=m(se,ke);Oe.push(Ie),Me[Ie._id]=Ie}var de={},_e=[];for(ze in ie){var Ae=m(se,ze);_e.push(Ae),de[Ae._id]=Ae}return{xaHash:Me,yaHash:de,xaxes:Oe,yaxes:_e,xLinks:oe,yLinks:ie,isSubplotConstrained:ve}}function te(se,ce){if(b){var fe=se.onwheel!==void 0?"wheel":"mousewheel";se._onwheel&&se.removeEventListener(fe,se._onwheel),se._onwheel=ce,se.addEventListener(fe,ce,{passive:!1})}else se.onwheel!==void 0?se.onwheel=ce:se.onmousewheel!==void 0?se.onmousewheel=ce:se.isAddedWheelEvent||(se.isAddedWheelEvent=!0,se.addEventListener("wheel",ce,{passive:!1}))}function ae(se){var ce=[];for(var fe in se)ce.push(se[fe]);return ce}ee.exports={makeDragBox:function(se,ce,fe,pe,ge,me,be,ke){var ze,ve,oe,ie,he,Se,ye,we,Me,Oe,Ie,de,_e,Ae,Pe,Ee,Fe,Ve,Ye,tt,nt,ht,vt,pt=se._fullLayout._zoomlayer,Qe=be+ke==="nsew",Ke=(be+ke).length===1;function Mt(){if(ze=ce.xaxis,ve=ce.yaxis,Me=ze._length,Oe=ve._length,ye=ze._offset,we=ve._offset,(oe={})[ze._id]=ze,(ie={})[ve._id]=ve,be&&ke)for(var Xt=ce.overlays,ln=0;ln<Xt.length;ln++){var Jt=Xt[ln].xaxis;oe[Jt._id]=Jt;var tn=Xt[ln].yaxis;ie[tn._id]=tn}he=ae(oe),Se=ae(ie),_e=I(he,ke),Ae=I(Se,be),Pe=!Ae&&!_e,de=X(se,se._fullLayout._axisMatchGroups,oe,ie);var wn=(Ie=X(se,se._fullLayout._axisConstraintGroups,oe,ie,de)).isSubplotConstrained||de.isSubplotConstrained;Ee=ke||wn,Fe=be||wn;var mn=se._fullLayout;Ve=mn._has("scattergl"),Ye=mn._has("splom"),tt=mn._has("svg")}fe+=ce.yaxis._shift,Mt();var Ot=function(Xt,ln,Jt){return Xt?Xt==="nsew"?Jt?"":ln==="pan"?"move":"crosshair":Xt.toLowerCase()+"-resize":"pointer"}(Ae+_e,se._fullLayout.dragmode,Qe),Pt=j(ce,be+ke+"drag",Ot,fe,pe,ge,me);if(Pe&&!Qe)return Pt.onmousedown=null,Pt.style.pointerEvents="none",Pt;var St,He,We,Be,Ge,ot,it,dt,gt,je,Re={element:Pt,gd:se,plotinfo:ce};function rt(){Re.plotinfo.selection=!1,d(se)}function ct(Xt,ln){var Jt=Re.gd;if(Jt._fullLayout._activeShapeIndex>=0)Jt._fullLayout._deactivateShape(Jt);else{var tn=Jt._fullLayout.clickmode;if(K(Jt),Xt!==2||Ke||an(),Qe)tn.indexOf("select")>-1&&S(ln,Jt,he,Se,ce.id,Re),tn.indexOf("event")>-1&&r.click(Jt,ln,ce.id);else if(Xt===1&&Ke){var wn=be?ve:ze,mn=be==="s"||ke==="w"?0:1,Cn=wn._name+".range["+mn+"]",yn=function(Wn,sr){var Fn,Yn=Wn.range[sr],Xn=Math.abs(Yn-Wn.range[1-sr]);return Wn.type==="date"?Yn:Wn.type==="log"?(Fn=Math.ceil(Math.max(0,-Math.log(Xn)/Math.LN10))+3,s("."+Fn+"g")(Math.pow(10,Yn))):(Fn=Math.floor(Math.log(Math.abs(Yn))/Math.LN10)-Math.floor(Math.log(Xn)/Math.LN10)+4,s("."+String(Fn)+"g")(Yn))}(wn,mn),Mn="left",zn="middle";if(wn.fixedrange)return;be?(zn=be==="n"?"top":"bottom",wn.side==="right"&&(Mn="right")):ke==="e"&&(Mn="right"),Jt._context.showAxisRangeEntryBoxes&&M.select(Pt).call(t.makeEditable,{gd:Jt,immediate:!0,background:Jt._fullLayout.paper_bgcolor,text:String(yn),fill:wn.tickfont?wn.tickfont.color:"#444",horizontalAlign:Mn,verticalAlign:zn}).on("edit",function(Wn){var sr=wn.d2r(Wn);sr!==void 0&&f.call("_guiRelayout",Jt,Cn,sr)})}}}function ut(Xt,ln){if(se._transitioningWithDuration)return!1;var Jt=Math.max(0,Math.min(Me,ht*Xt+St)),tn=Math.max(0,Math.min(Oe,vt*ln+He)),wn=Math.abs(Jt-St),mn=Math.abs(tn-He);function Cn(){it="",We.r=We.l,We.t=We.b,gt.attr("d","M0,0Z")}if(We.l=Math.min(St,Jt),We.r=Math.max(St,Jt),We.t=Math.min(He,tn),We.b=Math.max(He,tn),Ie.isSubplotConstrained)wn>O||mn>O?(it="xy",wn/Me>mn/Oe?(mn=wn*Oe/Me,He>tn?We.t=He-mn:We.b=He+mn):(wn=mn*Me/Oe,St>Jt?We.l=St-wn:We.r=St+wn),gt.attr("d",Z(We))):Cn();else if(de.isSubplotConstrained)if(wn>O||mn>O){it="xy";var yn=Math.min(We.l/Me,(Oe-We.b)/Oe),Mn=Math.max(We.r/Me,(Oe-We.t)/Oe);We.l=yn*Me,We.r=Mn*Me,We.b=(1-yn)*Oe,We.t=(1-Mn)*Oe,gt.attr("d",Z(We))}else Cn();else!Ae||mn<Math.min(Math.max(.6*wn,C),O)?wn<C||!_e?Cn():(We.t=0,We.b=Oe,it="x",gt.attr("d",function(zn,Wn){return"M"+(zn.l-.5)+","+(Wn-O-.5)+"h-3v"+(2*O+1)+"h3ZM"+(zn.r+.5)+","+(Wn-O-.5)+"h3v"+(2*O+1)+"h-3Z"}(We,He))):!_e||wn<Math.min(.6*mn,O)?(We.l=0,We.r=Me,it="y",gt.attr("d",function(zn,Wn){return"M"+(Wn-O-.5)+","+(zn.t-.5)+"v-3h"+(2*O+1)+"v3ZM"+(Wn-O-.5)+","+(zn.b+.5)+"v3h"+(2*O+1)+"v-3Z"}(We,St))):(it="xy",gt.attr("d",Z(We)));We.w=We.r-We.l,We.h=We.b-We.t,it&&(je=!0),se._dragged=je,ne(dt,gt,We,Ge,ot,Be),et(),se.emit("plotly_relayouting",nt),ot=!0}function et(){nt={},it!=="xy"&&it!=="x"||(N(he,We.l/Me,We.r/Me,nt,Ie.xaxes),Ut("x",nt)),it!=="xy"&&it!=="y"||(N(Se,(Oe-We.b)/Oe,(Oe-We.t)/Oe,nt,Ie.yaxes),Ut("y",nt))}function xt(){et(),K(se),rn(),Q(se)}Re.prepFn=function(Xt,ln,Jt){var tn=Re.dragmode,wn=se._fullLayout.dragmode;wn!==tn&&(Re.dragmode=wn),Mt(),ht=se._fullLayout._invScaleX,vt=se._fullLayout._invScaleY,Pe||(Qe?Xt.shiftKey?wn==="pan"?wn="zoom":c(wn)||(wn="pan"):Xt.ctrlKey&&(wn="pan"):wn="pan"),x(wn)?Re.minDrag=1:Re.minDrag=void 0,c(wn)?(Re.xaxes=he,Re.yaxes=Se,_(Xt,ln,Jt,Re,wn)):(Re.clickFn=ct,c(tn)&&rt(),Pe||(wn==="zoom"?(Re.moveFn=ut,Re.doneFn=xt,Re.minDrag=1,function(mn,Cn,yn){var Mn=Pt.getBoundingClientRect();St=Cn-Mn.left,He=yn-Mn.top,se._fullLayout._calcInverseTransform(se);var zn=k.apply3DTransform(se._fullLayout._invTransform)(St,He);St=zn[0],He=zn[1],We={l:St,r:St,w:0,t:He,b:He,h:0},Be=se._hmpixcount?se._hmlumcount/se._hmpixcount:T(se._fullLayout.plot_bgcolor).getLuminance(),ot=!1,it="xy",je=!1,dt=U(pt,Be,ye,we,Ge="M0,0H"+Me+"V"+Oe+"H0V0"),gt=H(pt,ye,we)}(0,ln,Jt)):wn==="pan"&&(Re.moveFn=zt,Re.doneFn=rn))),se._fullLayout._redrag=function(){var mn=se._dragdata;if(mn&&mn.element===Pt){var Cn=se._fullLayout.dragmode;c(Cn)||(Mt(),qt([0,0,Me,Oe]),Re.moveFn(mn.dx,mn.dy))}}},u.init(Re);var mt=[0,0,Me,Oe],Tt=null,yt=E.REDRAWDELAY,bt=ce.mainplot?se._fullLayout._plots[ce.mainplot]:ce;function zt(Xt,ln){if(Xt*=ht,ln*=vt,!se._transitioningWithDuration){if(se._fullLayout._replotting=!0,_e==="ew"||Ae==="ns"){var Jt=_e?-Xt:0,tn=Ae?-ln:0;if(de.isSubplotConstrained){if(_e&&Ae){var wn=(Xt/Me-ln/Oe)/2;Jt=-(Xt=wn*Me),tn=-(ln=-wn*Oe)}Ae?Jt=-tn*Me/Oe:tn=-Jt*Oe/Me}return _e&&(W(he,Xt),Ut("x")),Ae&&(W(Se,ln),Ut("y")),qt([Jt,tn,Me,Oe]),en(),void se.emit("plotly_relayouting",nt)}var mn,Cn,yn=_e==="w"==(Ae==="n")?1:-1;if(_e&&Ae&&(Ie.isSubplotConstrained||de.isSubplotConstrained)){var Mn=(Xt/Me+yn*ln/Oe)/2;Xt=Mn*Me,ln=yn*Mn*Oe}if(_e==="w"?Xt=Fn(he,0,Xt):_e==="e"?Xt=Fn(he,1,-Xt):_e||(Xt=0),Ae==="n"?ln=Fn(Se,1,ln):Ae==="s"?ln=Fn(Se,0,-ln):Ae||(ln=0),mn=_e==="w"?Xt:0,Cn=Ae==="n"?ln:0,Ie.isSubplotConstrained&&!de.isSubplotConstrained||de.isSubplotConstrained&&_e&&Ae&&yn>0){var zn;if(de.isSubplotConstrained||!_e&&Ae.length===1){for(zn=0;zn<he.length;zn++)he[zn].range=he[zn]._r.slice(),w(he[zn],1-ln/Oe);mn=(Xt=ln*Me/Oe)/2}if(de.isSubplotConstrained||!Ae&&_e.length===1){for(zn=0;zn<Se.length;zn++)Se[zn].range=Se[zn]._r.slice(),w(Se[zn],1-Xt/Me);Cn=(ln=Xt*Oe/Me)/2}}de.isSubplotConstrained&&Ae||Ut("x"),de.isSubplotConstrained&&_e||Ut("y");var Wn=Me-Xt,sr=Oe-ln;!de.isSubplotConstrained||_e&&Ae||(_e?(Cn=mn?0:Xt*Oe/Me,sr=Wn*Oe/Me):(mn=Cn?0:ln*Me/Oe,Wn=sr*Me/Oe)),qt([mn,Cn,Wn,sr]),en(),se.emit("plotly_relayouting",nt)}function Fn(Yn,Xn,rr){for(var Yt,$t,Sn=1-Xn,dn=0;dn<Yn.length;dn++){var En=Yn[dn];if(!En.fixedrange){Yt=En,$t=En._rl[Sn]+(En._rl[Xn]-En._rl[Sn])/F(rr/En._length);var Nn=En.l2r($t);Nn!==!1&&Nn!==void 0&&(En.range[Xn]=Nn)}}return Yt._length*(Yt._rl[Xn]-$t)/(Yt._rl[Xn]-Yt._rl[Sn])}}function Ut(Xt,ln){for(var Jt=de.isSubplotConstrained?{x:Se,y:he}[Xt]:de[Xt+"axes"],tn=de.isSubplotConstrained?{x:he,y:Se}[Xt]:[],wn=0;wn<Jt.length;wn++){var mn=Jt[wn],Cn=mn._id,yn=de.xLinks[Cn]||de.yLinks[Cn],Mn=tn[0]||oe[yn]||ie[yn];Mn&&(ln?(ln[mn._name+".range[0]"]=ln[Mn._name+".range[0]"],ln[mn._name+".range[1]"]=ln[Mn._name+".range[1]"]):mn.range=Mn.range.slice())}}function en(){var Xt,ln=[];function Jt(Cn){for(Xt=0;Xt<Cn.length;Xt++)Cn[Xt].fixedrange||ln.push(Cn[Xt]._id)}function tn(Cn,yn){for(Xt=0;Xt<Cn.length;Xt++){var Mn=Cn[Xt],zn=Mn[yn];Mn.fixedrange||zn.tickmode!=="sync"||ln.push(zn._id)}}for(Ee&&(Jt(he),Jt(Ie.xaxes),Jt(de.xaxes),tn(ce.overlays,"xaxis")),Fe&&(Jt(Se),Jt(Ie.yaxes),Jt(de.yaxes),tn(ce.overlays,"yaxis")),nt={},Xt=0;Xt<ln.length;Xt++){var wn=ln[Xt],mn=m(se,wn);a.drawOne(se,mn,{skipTitle:!0}),nt[mn._name+".range[0]"]=mn.range[0],nt[mn._name+".range[1]"]=mn.range[1]}a.redrawComponents(se,ln)}function an(){if(!se._transitioningWithDuration){var Xt=se._context.doubleClick,ln=[];_e&&(ln=ln.concat(he)),Ae&&(ln=ln.concat(Se)),de.xaxes&&(ln=ln.concat(de.xaxes)),de.yaxes&&(ln=ln.concat(de.yaxes));var Jt,tn,wn={};if(Xt==="reset+autosize")for(Xt="autosize",tn=0;tn<ln.length;tn++){var mn=(Jt=ln[tn])._rangeInitial0,Cn=Jt._rangeInitial1,yn=mn!==void 0||Cn!==void 0;if(yn&&(mn!==void 0&&mn!==Jt.range[0]||Cn!==void 0&&Cn!==Jt.range[1])||!yn&&Jt.autorange!==!0){Xt="reset";break}}if(Xt==="autosize")for(tn=0;tn<ln.length;tn++)(Jt=ln[tn]).fixedrange||(wn[Jt._name+".autorange"]=!0);else if(Xt==="reset"){for((_e||Ie.isSubplotConstrained)&&(ln=ln.concat(Ie.xaxes)),Ae&&!Ie.isSubplotConstrained&&(ln=ln.concat(Ie.yaxes)),Ie.isSubplotConstrained&&(_e?Ae||(ln=ln.concat(Se)):ln=ln.concat(he)),tn=0;tn<ln.length;tn++)if(!(Jt=ln[tn]).fixedrange){var Mn=Jt._name,zn=Jt._autorangeInitial;Jt._rangeInitial0===void 0&&Jt._rangeInitial1===void 0?wn[Mn+".autorange"]=!0:Jt._rangeInitial0===void 0?(wn[Mn+".autorange"]=zn,wn[Mn+".range"]=[null,Jt._rangeInitial1]):Jt._rangeInitial1===void 0?(wn[Mn+".range"]=[Jt._rangeInitial0,null],wn[Mn+".autorange"]=zn):wn[Mn+".range"]=[Jt._rangeInitial0,Jt._rangeInitial1]}}se.emit("plotly_doubleclick",null),f.call("_guiRelayout",se,wn)}}function rn(){qt([0,0,Me,Oe]),k.syncOrAsync([y.previousPromises,function(){se._fullLayout._replotting=!1,f.call("_guiRelayout",se,nt)}],se)}function qt(Xt){var ln,Jt,tn,wn,mn=se._fullLayout,Cn=mn._plots,yn=mn._subplots.cartesian;if(Ye&&f.subplotsRegistry.splom.drag(se),Ve){for(ln=0;ln<yn.length;ln++)if(tn=(Jt=Cn[yn[ln]]).xaxis,wn=Jt.yaxis,Jt._scene){tn.limitRange&&tn.limitRange(),wn.limitRange&&wn.limitRange();var Mn=k.simpleMap(tn.range,tn.r2l),zn=k.simpleMap(wn.range,wn.r2l);Jt._scene.update({range:[Mn[0],zn[0],Mn[1],zn[1]]})}}if((Ye||Ve)&&(v(se),g(se)),tt){var Wn=Xt[2]/ze._length,sr=Xt[3]/ve._length;for(ln=0;ln<yn.length;ln++){tn=(Jt=Cn[yn[ln]]).xaxis,wn=Jt.yaxis;var Fn,Yn,Xn,rr,Yt=(Ee||de.isSubplotConstrained)&&!tn.fixedrange&&oe[tn._id],$t=(Fe||de.isSubplotConstrained)&&!wn.fixedrange&&ie[wn._id];if(Yt?(Fn=Wn,Xn=ke||de.isSubplotConstrained?Xt[0]:on(tn,Fn)):de.xaHash[tn._id]?(Fn=Wn,Xn=Xt[0]*tn._length/ze._length):de.yaHash[tn._id]?(Fn=sr,Xn=Ae==="ns"?-Xt[1]*tn._length/ve._length:on(tn,Fn,{n:"top",s:"bottom"}[Ae])):Xn=xn(tn,Fn=Kt(tn,Wn,sr)),Fn>1&&(tn.maxallowed!==void 0&&Ee===(tn.range[0]<tn.range[1]?"e":"w")||tn.minallowed!==void 0&&Ee===(tn.range[0]<tn.range[1]?"w":"e"))&&(Fn=1,Xn=0),$t?(Yn=sr,rr=be||de.isSubplotConstrained?Xt[1]:on(wn,Yn)):de.yaHash[wn._id]?(Yn=sr,rr=Xt[1]*wn._length/ve._length):de.xaHash[wn._id]?(Yn=Wn,rr=_e==="ew"?-Xt[0]*wn._length/ze._length:on(wn,Yn,{e:"right",w:"left"}[_e])):rr=xn(wn,Yn=Kt(wn,Wn,sr)),Yn>1&&(wn.maxallowed!==void 0&&Fe===(wn.range[0]<wn.range[1]?"n":"s")||wn.minallowed!==void 0&&Fe===(wn.range[0]<wn.range[1]?"s":"n"))&&(Yn=1,rr=0),Fn||Yn){Fn||(Fn=1),Yn||(Yn=1);var Sn=tn._offset-Xn/Fn,dn=wn._offset-rr/Yn;Jt.clipRect.call(n.setTranslate,Xn,rr).call(n.setScale,Fn,Yn),Jt.plot.call(n.setTranslate,Sn,dn).call(n.setScale,1/Fn,1/Yn),Fn===Jt.xScaleFactor&&Yn===Jt.yScaleFactor||(n.setPointGroupScale(Jt.zoomScalePts,Fn,Yn),n.setTextPointsScale(Jt.zoomScaleTxt,Fn,Yn)),n.hideOutsideRangePoints(Jt.clipOnAxisFalseTraces,Jt),Jt.xScaleFactor=Fn,Jt.yScaleFactor=Yn}}}}function Kt(Xt,ln,Jt){return Xt.fixedrange?0:Ee&&Ie.xaHash[Xt._id]?ln:Fe&&(Ie.isSubplotConstrained?Ie.xaHash:Ie.yaHash)[Xt._id]?Jt:0}function xn(Xt,ln){return ln?(Xt.range=Xt._r.slice(),w(Xt,ln),on(Xt,ln)):0}function on(Xt,ln,Jt){return Xt._length*(1-ln)*p[Jt||Xt.constraintoward||"middle"]}return be.length*ke.length!=1&&te(Pt,function(Xt){if(se._context._scrollZoom.cartesian||se._fullLayout._enablescrollzoom){if(rt(),se._transitioningWithDuration)return Xt.preventDefault(),void Xt.stopPropagation();Mt(),clearTimeout(Tt);var ln=-Xt.deltaY;if(isFinite(ln)||(ln=Xt.wheelDelta/10),isFinite(ln)){var Jt,tn=Math.exp(-Math.min(Math.max(ln,-20),20)/200),wn=bt.draglayer.select(".nsewdrag").node().getBoundingClientRect(),mn=(Xt.clientX-wn.left)/wn.width,Cn=(wn.bottom-Xt.clientY)/wn.height;if(Ee){for(ke||(mn=.5),Jt=0;Jt<he.length;Jt++)yn(he[Jt],mn,tn);Ut("x"),mt[2]*=tn,mt[0]+=mt[2]*mn*(1/tn-1)}if(Fe){for(be||(Cn=.5),Jt=0;Jt<Se.length;Jt++)yn(Se[Jt],Cn,tn);Ut("y"),mt[3]*=tn,mt[1]+=mt[3]*(1-Cn)*(1/tn-1)}qt(mt),en(),se.emit("plotly_relayouting",nt),Tt=setTimeout(function(){se._fullLayout&&(mt=[0,0,Me,Oe],rn())},yt),Xt.preventDefault()}else k.log("Did not find wheel motion attributes: ",Xt)}function yn(Mn,zn,Wn){if(!Mn.fixedrange){var sr=k.simpleMap(Mn.range,Mn.r2l),Fn=sr[0]+(sr[1]-sr[0])*zn;Mn.range=sr.map(function(Yn){return Mn.l2r(Fn+(Yn-Fn)*Wn)})}}}),Pt},makeDragger:z,makeRectDragger:j,makeZoombox:U,makeCorners:H,updateZoombox:ne,xyCorners:Z,transitionZoombox:$,removeZoombox:K,showDoubleClickNotifier:Q,attachWheelEventHandler:te}},42464:function(ee,R,e){var M=e(33428),k=e(93024),s=e(86476),T=e(93972),b=e(51184).makeDragBox,f=e(33816).DRAGGERSIZE;R.initInteractions=function(o){var t=o._fullLayout;if(o._context.staticPlot)M.select(o).selectAll(".drag").remove();else if(t._has("cartesian")||t._has("splom")){Object.keys(t._plots||{}).sort(function(n,r){if((t._plots[n].mainplot&&!0)===(t._plots[r].mainplot&&!0)){var a=n.split("y"),l=r.split("y");return a[0]===l[0]?Number(a[1]||1)-Number(l[1]||1):Number(a[0]||1)-Number(l[0]||1)}return t._plots[n].mainplot?1:-1}).forEach(function(n){var r=t._plots[n],a=r.xaxis,l=r.yaxis;if(!r.mainplot){var u=b(o,r,a._offset,l._offset,a._length,l._length,"ns","ew");u.onmousemove=function(x){o._fullLayout._rehover=function(){o._fullLayout._hoversubplot===n&&o._fullLayout._plots[n]&&k.hover(o,x,n)},k.hover(o,x,n),o._fullLayout._lasthover=u,o._fullLayout._hoversubplot=n},u.onmouseout=function(x){o._dragging||(o._fullLayout._hoversubplot=null,s.unhover(o,x))},o._context.showAxisDragHandles&&(b(o,r,a._offset-f,l._offset-f,f,f,"n","w"),b(o,r,a._offset+a._length,l._offset-f,f,f,"n","e"),b(o,r,a._offset-f,l._offset+l._length,f,f,"s","w"),b(o,r,a._offset+a._length,l._offset+l._length,f,f,"s","e"))}if(o._context.showAxisDragHandles){if(n===a._mainSubplot){var h=a._mainLinePosition;a.side==="top"&&(h-=f),b(o,r,a._offset+.1*a._length,h,.8*a._length,f,"","ew"),b(o,r,a._offset,h,.1*a._length,f,"","w"),b(o,r,a._offset+.9*a._length,h,.1*a._length,f,"","e")}if(n===l._mainSubplot){var c=l._mainLinePosition;l.side!=="right"&&(c-=f),b(o,r,c,l._offset+.1*l._length,f,.8*l._length,"ns",""),b(o,r,c,l._offset+.9*l._length,f,.1*l._length,"s",""),b(o,r,c,l._offset,f,.1*l._length,"n","")}}});var i=t._hoverlayer.node();i.onmousemove=function(n){n.target=o._fullLayout._lasthover,k.hover(o,n,t._hoversubplot)},i.onclick=function(n){n.target=o._fullLayout._lasthover,k.click(o,n)},i.onmousedown=function(n){o._fullLayout._lasthover.onmousedown(n)},R.updateFx(o)}},R.updateFx=function(o){var t=o._fullLayout,i=t.dragmode==="pan"?"move":"crosshair";T(t._draggers,i)}},36632:function(ee,R,e){var M=e(24040),k=e(3400),s=e(79811);ee.exports=function(T){return function(b,f){var o=b[T];if(Array.isArray(o))for(var t=M.subplotsRegistry.cartesian,i=t.idRegex,n=f._subplots,r=n.xaxis,a=n.yaxis,l=n.cartesian,u=f._has("cartesian")||f._has("gl2d"),h=0;h<o.length;h++){var c=o[h];if(k.isPlainObject(c)){var x=s.cleanId(c.xref,"x",!1),p=s.cleanId(c.yref,"y",!1),v=i.x.test(x),g=i.y.test(p);if(v||g){u||k.pushUnique(f._basePlotModules,t);var y=!1;v&&r.indexOf(x)===-1&&(r.push(x),y=!0),g&&a.indexOf(p)===-1&&(a.push(p),y=!0),y&&v&&g&&l.push(x+p)}}}}}},57952:function(ee,R,e){var M=e(33428),k=e(24040),s=e(3400),T=e(7316),b=e(43616),f=e(84888)._M,o=e(79811),t=e(33816),i=e(9616),n=s.ensureSingle;function r(x,p,v){return s.ensureSingle(x,p,v,function(g){g.datum(v)})}var a=t.zindexSeparator;function l(x,p,v,g,y){for(var m,_,d,S=t.traceLayerClasses,w=x._fullLayout,E=w._zindices,C=w._modules,O=[],P=[],z=0;z<E.length;z++)for(var j=E[z],I=0;I<C.length;I++){var N=(m=C[I]).name,W=k.modules[N].categories;if(W.svg){var F=m.layerName||N+"layer",U=F+(z?Number(z)+1:""),H=m.plot;d=(_=f(v,H,j))[0],v=_[1],d.length&&O.push({i:S.indexOf(F),zorder:z,className:U,plotMethod:H,cdModule:d}),W.zoomScale&&P.push("."+U)}}O.sort(function(K,Q){return(K.zorder||0)-(Q.zorder||0)||K.i-Q.i});var ne=p.plot.selectAll("g.mlayer").data(O,function(K){return K.className});if(ne.enter().append("g").attr("class",function(K){return K.className}).classed("mlayer",!0).classed("rangeplot",p.isRangePlot),ne.exit().remove(),ne.order(),ne.each(function(K){var Q=M.select(this),Z=K.className;K.plotMethod(x,p,K.cdModule,Q,g,y),t.clipOnAxisFalseQuery.indexOf("."+Z)===-1&&b.setClipUrl(Q,p.layerClipId,x)}),w._has("scattergl")&&(m=k.getModule("scattergl"),d=f(v,m)[0],m.plot(x,p,d)),!x._context.staticPlot&&(p._hasClipOnAxisFalse&&(p.clipOnAxisFalseTraces=p.plot.selectAll(t.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),P.length)){var $=p.plot.selectAll(P.join(",")).selectAll(".trace");p.zoomScalePts=$.selectAll("path.point"),p.zoomScaleTxt=$.selectAll(".textpoint")}}function u(x,p){var v=p.plotgroup,g=p.id,y=g.indexOf(a)!==-1,m=t.layerValue2layerClass[p.xaxis.layer],_=t.layerValue2layerClass[p.yaxis.layer],d=x._fullLayout._hasOnlyLargeSploms;if(p.mainplot){var S=p.mainplotinfo,w=S.plotgroup,E=g+"-x",C=g+"-y";p.minorGridlayer=S.minorGridlayer,p.gridlayer=S.gridlayer,p.zerolinelayer=S.zerolinelayer,n(S.overlinesBelow,"path",E),n(S.overlinesBelow,"path",C),n(S.overaxesBelow,"g",E),n(S.overaxesBelow,"g",C),p.plot=n(S.overplot,"g",g),n(S.overlinesAbove,"path",E),n(S.overlinesAbove,"path",C),n(S.overaxesAbove,"g",E),n(S.overaxesAbove,"g",C),p.xlines=w.select(".overlines-"+m).select("."+E),p.ylines=w.select(".overlines-"+_).select("."+C),p.xaxislayer=w.select(".overaxes-"+m).select("."+E),p.yaxislayer=w.select(".overaxes-"+_).select("."+C)}else if(d)p.xlines=n(v,"path","xlines-above"),p.ylines=n(v,"path","ylines-above"),p.xaxislayer=n(v,"g","xaxislayer-above"),p.yaxislayer=n(v,"g","yaxislayer-above");else{if(!y){var O=n(v,"g","layer-subplot");p.shapelayer=n(O,"g","shapelayer"),p.imagelayer=n(O,"g","imagelayer"),p.minorGridlayer=n(v,"g","minor-gridlayer"),p.gridlayer=n(v,"g","gridlayer"),p.zerolinelayer=n(v,"g","zerolinelayer");var P=n(v,"g","layer-between");p.shapelayerBetween=n(P,"g","shapelayer"),p.imagelayerBetween=n(P,"g","imagelayer"),n(v,"path","xlines-below"),n(v,"path","ylines-below"),p.overlinesBelow=n(v,"g","overlines-below"),n(v,"g","xaxislayer-below"),n(v,"g","yaxislayer-below"),p.overaxesBelow=n(v,"g","overaxes-below")}p.overplot=n(v,"g","overplot"),p.plot=n(p.overplot,"g",g),y||(p.xlines=n(v,"path","xlines-above"),p.ylines=n(v,"path","ylines-above"),p.overlinesAbove=n(v,"g","overlines-above"),n(v,"g","xaxislayer-above"),n(v,"g","yaxislayer-above"),p.overaxesAbove=n(v,"g","overaxes-above"),p.xlines=v.select(".xlines-"+m),p.ylines=v.select(".ylines-"+_),p.xaxislayer=v.select(".xaxislayer-"+m),p.yaxislayer=v.select(".yaxislayer-"+_))}y||(d||(r(p.minorGridlayer,"g",p.xaxis._id),r(p.minorGridlayer,"g",p.yaxis._id),p.minorGridlayer.selectAll("g").map(function(z){return z[0]}).sort(o.idSort),r(p.gridlayer,"g",p.xaxis._id),r(p.gridlayer,"g",p.yaxis._id),p.gridlayer.selectAll("g").map(function(z){return z[0]}).sort(o.idSort)),p.xlines.style("fill","none").classed("crisp",!0),p.ylines.style("fill","none").classed("crisp",!0))}function h(x,p){if(x){var v={};for(var g in x.each(function(d){var S=d[0];M.select(this).remove(),c(S,p),v[S]=!0}),p._plots)for(var y=p._plots[g].overlays||[],m=0;m<y.length;m++){var _=y[m];v[_.id]&&_.plot.selectAll(".trace").remove()}}}function c(x,p){p._draggers.selectAll("g."+x).remove(),p._defs.select("#clip"+p._uid+x+"plot").remove()}R.name="cartesian",R.attr=["xaxis","yaxis"],R.idRoot=["x","y"],R.idRegex=t.idRegex,R.attrRegex=t.attrRegex,R.attributes=e(26720),R.layoutAttributes=e(94724),R.supplyLayoutDefaults=e(67352),R.transitionAxes=e(73736),R.finalizeSubplots=function(x,p){var v,g,y,m=p._subplots,_=m.xaxis,d=m.yaxis,S=m.cartesian,w=S.concat(m.gl2d||[]),E={},C={};for(v=0;v<w.length;v++){var O=w[v].split("y");E[O[0]]=1,C["y"+O[1]]=1}for(v=0;v<_.length;v++)E[g=_[v]]||(y=(x[o.id2name(g)]||{}).anchor,t.idRegex.y.test(y)||(y="y"),S.push(g+y),w.push(g+y),C[y]||(C[y]=1,s.pushUnique(d,y)));for(v=0;v<d.length;v++)C[y=d[v]]||(g=(x[o.id2name(y)]||{}).anchor,t.idRegex.x.test(g)||(g="x"),S.push(g+y),w.push(g+y),E[g]||(E[g]=1,s.pushUnique(_,g)));if(!w.length){for(var P in g="",y="",x)t.attrRegex.test(P)&&(P.charAt(0)==="x"?(!g||+P.substr(5)<+g.substr(5))&&(g=P):(!y||+P.substr(5)<+y.substr(5))&&(y=P));g=g?o.name2id(g):"x",y=y?o.name2id(y):"y",_.push(g),d.push(y),S.push(g+y)}},R.plot=function(x,p,v,g){var y,m=x._fullLayout,_=m._subplots.cartesian,d=x.calcdata;if(!Array.isArray(p))for(p=[],y=0;y<d.length;y++)p.push(y);for(var S=m._zindices,w=0;w<S.length;w++){var E=S[w];for(y=0;y<_.length;y++){var C=_[y],O=m._plots[C];if(w>0){var P=O.id;if(P.indexOf(a)!==-1)continue;P+=a+(w+1),O=s.extendFlat({},O,{id:P,plot:m._cartesianlayer.selectAll(".subplot").select("."+P)})}for(var z,j=[],I=0;I<d.length;I++){var N=d[I],W=N[0].trace;E===(W.zorder||0)&&W.xaxis+W.yaxis===C&&((p.indexOf(W.index)!==-1||W.carpet)&&(z&&z[0].trace.xaxis+z[0].trace.yaxis===C&&["tonextx","tonexty","tonext"].indexOf(W.fill)!==-1&&j.indexOf(z)===-1&&j.push(z),j.push(N)),z=N)}l(x,O,j,v,g)}}},R.clean=function(x,p,v,g){var y,m,_,d=g._plots||{},S=p._plots||{},w=g._subplots||{};if(g._hasOnlyLargeSploms&&!p._hasOnlyLargeSploms)for(_ in d)(y=d[_]).plotgroup&&y.plotgroup.remove();var E=g._has&&g._has("gl"),C=p._has&&p._has("gl");if(E&&!C)for(_ in d)(y=d[_])._scene&&y._scene.destroy();if(w.xaxis&&w.yaxis){var O=o.listIds({_fullLayout:g});for(m=0;m<O.length;m++){var P=O[m];p[o.id2name(P)]||g._infolayer.selectAll(".g-"+P+"title").remove()}}var z=g._has&&g._has("cartesian"),j=p._has&&p._has("cartesian");if(z&&!j)h(g._cartesianlayer.selectAll(".subplot"),g),g._defs.selectAll(".axesclip").remove(),delete g._axisConstraintGroups,delete g._axisMatchGroups;else if(w.cartesian)for(m=0;m<w.cartesian.length;m++){var I=w.cartesian[m];if(I.indexOf(a)===-1&&!S[I]){var N="."+I+",."+I+"-x,."+I+"-y";g._cartesianlayer.selectAll(N).remove(),c(I,g)}}},R.drawFramework=function(x){var p,v=x._fullLayout,g=x.calcdata,y={};for(p=0;p<g.length;p++){var m=g[p][0],_=m.trace.zorder||0;y[_]||(y[_]=[]),y[_].push(m)}var d=Object.keys(y).map(Number).sort(s.sorterAsc);d.length||(d=[0]),v._zindices=d;var S=function(z){var j,I,N,W,F,U,H=z._fullLayout,ne=H._zindices.length,$=H._subplots.cartesian,K=$.length,Q=[],Z=[];for(j=0;j<K;j++){N=$[j],F=(W=H._plots[N]).xaxis,U=W.yaxis;var X=F._mainAxis,te=U._mainAxis,ae=X._id+te._id,se=H._plots[ae];W.overlays=[],ae!==N&&se?(W.mainplot=ae,W.mainplotinfo=se,Z.push(N)):(W.mainplot=void 0,W.mainplotinfo=void 0,Q.push(N))}for(j=0;j<Z.length;j++)N=Z[j],(W=H._plots[N]).mainplotinfo.overlays.push(W);var ce=Q.concat(Z),fe=[];for(j=0;j<K;j++){N=ce[j],F=(W=H._plots[N]).xaxis,U=W.yaxis;for(var pe=[],ge=1;ge<=ne;ge++){var me="";for(ge>1&&(me+=a+ge),pe.push(N+me),I=0;I<W.overlays.length;I++)pe.push(W.overlays[I].id+me)}pe=pe.concat([F.layer,U.layer,F.overlaying||"",U.overlaying||""]),fe.push(pe)}return fe}(x),w=S.length,E=[];for(p=0;p<w;p++)E[p]=S[p].slice();for(var C=1;C<d.length;C++){var O=[];for(p=0;p<w;p++)O[p]=S[p].slice(),O[p][0]+=a+(C+1);E=E.concat(O)}var P=v._cartesianlayer.selectAll(".subplot").data(E,String);P.enter().append("g").attr("class",function(z){return"subplot "+z[0]}),P.order(),P.exit().call(h,v),P.each(function(z){var j=z[0],I=j.indexOf(a),N=I!==-1,W=N?j.slice(0,I):j,F=v._plots[j];F||(F=s.extendFlat({},v._plots[W]))&&(F.id=j,v._plots[j]=F,v._subplots.cartesian.push(j)),F&&(F.plotgroup=M.select(this),u(x,F),N||(F.draglayer=n(v._draggers,"g",j)))})},R.rangePlot=function(x,p,v){u(x,p),l(x,p,v),T.style(x)},R.toSVG=function(x){var p=x._fullLayout._glimages,v=M.select(x).selectAll(".svg-container");v.filter(function(g,y){return y===v.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var g=this,y=g.toDataURL("image/png");p.append("svg:image").attr({xmlns:i.svg,"xlink:href":y,preserveAspectRatio:"none",x:0,y:0,width:g.style.width,height:g.style.height})})},R.updateFx=e(42464).updateFx},94724:function(ee,R,e){var M=e(25376),k=e(22548),s=e(98192).u,T=e(92880).extendFlat,b=e(31780).templatedArray,f=e(29736).descriptionWithDates,o=e(39032).ONEDAY,t=e(33816),i=t.HOUR_PATTERN,n=t.WEEKDAY_PATTERN,r={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},a=T({},r,{values:r.values.slice().concat(["sync"])});function l(S){return{valType:"integer",min:0,dflt:S?5:0,editType:"ticks"}}var u={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},h={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},c={valType:"data_array",editType:"ticks"},x={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function p(S){var w={valType:"number",min:0,editType:"ticks"};return S||(w.dflt=5),w}function v(S){var w={valType:"number",min:0,editType:"ticks"};return S||(w.dflt=1),w}var g={valType:"color",dflt:k.defaultLine,editType:"ticks"},y={valType:"color",dflt:k.lightLine,editType:"ticks"};function m(S){var w={valType:"number",min:0,editType:"ticks"};return S||(w.dflt=1),w}var _=T({},s,{editType:"ticks"}),d={valType:"boolean",editType:"ticks"};ee.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:k.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:M({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"calc"},rangebreaks:b("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[n,i,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:o},editType:"calc"}),tickmode:a,nticks:l(),tick0:u,dtick:h,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:c,ticktext:{valType:"data_array",editType:"ticks"},ticks:x,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},ticklabelshift:{valType:"integer",dflt:0,editType:"ticks"},ticklabelstandoff:{valType:"integer",dflt:0,editType:"ticks"},ticklabelindex:{valType:"integer",arrayOk:!0,editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:p(),tickwidth:v(),tickcolor:g,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:T({},s,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:M({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:f("tick label")},tickformatstops:b("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:f("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:k.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:d,gridcolor:y,gridwidth:m(),griddash:_,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:k.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:k.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},minor:{tickmode:r,nticks:l("minor"),tick0:u,dtick:h,tickvals:c,ticks:x,ticklen:p("minor"),tickwidth:v("minor"),tickcolor:g,gridcolor:y,gridwidth:m("minor"),griddash:_,showgrid:d,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","geometric mean ascending","geometric mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:M({editType:"ticks"})}}},67352:function(ee,R,e){var M=e(3400),k=e(76308),s=e(10624).isUnifiedHover,T=e(41008),b=e(31780),f=e(64859),o=e(94724),t=e(14944),i=e(28336),n=e(71888),r=e(37668),a=e(79811),l=a.id2name,u=a.name2id,h=e(33816).AX_ID_PATTERN,c=e(24040),x=c.traceIs,p=c.getComponentMethod;function v(g,y,m){Array.isArray(g[y])?g[y].push(m):g[y]=[m]}ee.exports=function(g,y,m){var _,d,S=y.autotypenumbers,w={},E={},C={},O={},P={},z={},j={},I={},N={},W={};for(_=0;_<m.length;_++){var F=m[_];if(x(F,"cartesian")||x(F,"gl2d")){var U,H;if(F.xaxis)U=l(F.xaxis),v(w,U,F);else if(F.xaxes)for(d=0;d<F.xaxes.length;d++)v(w,l(F.xaxes[d]),F);if(F.yaxis)H=l(F.yaxis),v(w,H,F);else if(F.yaxes)for(d=0;d<F.yaxes.length;d++)v(w,l(F.yaxes[d]),F);F.type==="funnel"?F.orientation==="h"?(U&&(E[U]=!0),H&&(j[H]=!0)):H&&(C[H]=!0):F.type==="image"?(H&&(I[H]=!0),U&&(I[U]=!0)):(H&&(P[H]=!0,z[H]=!0),x(F,"carpet")&&(F.type!=="carpet"||F._cheater)||U&&(O[U]=!0)),F.type==="carpet"&&F._cheater&&U&&(E[U]=!0),x(F,"2dMap")&&(N[U]=!0,N[H]=!0),x(F,"oriented")&&(W[F.orientation==="h"?H:U]=!0)}}var ne=y._subplots,$=ne.xaxis,K=ne.yaxis,Q=M.simpleMap($,l),Z=M.simpleMap(K,l),X=Q.concat(Z),te=k.background;$.length&&K.length&&(te=M.coerce(g,y,f,"plot_bgcolor"));var ae,se,ce,fe,pe,ge=k.combine(te,y.paper_bgcolor);function me(){var Ke=w[ae]||[];pe._traceIndices=Ke.map(function(Mt){return Mt._expandedIndex}),pe._annIndices=[],pe._shapeIndices=[],pe._selectionIndices=[],pe._imgIndices=[],pe._subplotsWith=[],pe._counterAxes=[],pe._name=pe._attr=ae,pe._id=se}function be(Ke,Mt){return M.coerce(fe,pe,o,Ke,Mt)}function ke(Ke,Mt){return M.coerce2(fe,pe,o,Ke,Mt)}function ze(Ke){return Ke==="x"?K:$}function ve(Ke,Mt){for(var Ot=Ke==="x"?Q:Z,Pt=[],St=0;St<Ot.length;St++){var He=Ot[St];He===Mt||(g[He]||{}).overlaying||Pt.push(u(He))}return Pt}var oe={x:ze("x"),y:ze("y")},ie=oe.x.concat(oe.y),he={},Se=[];function ye(){var Ke=fe.matches;h.test(Ke)&&ie.indexOf(Ke)===-1&&(he[Ke]=fe.type,Se=Object.keys(he))}var we=T(g,y),Me=s(we);for(_=0;_<X.length;_++){ae=X[_],se=u(ae),ce=ae.charAt(0),M.isPlainObject(g[ae])||(g[ae]={}),fe=g[ae],pe=b.newContainer(y,ae,ce+"axis"),me();var Oe=ce==="x"&&!O[ae]&&E[ae]||ce==="y"&&!P[ae]&&C[ae],Ie=ce==="y"&&(!z[ae]&&j[ae]||I[ae]),de={hasMinor:!0,letter:ce,font:y.font,outerTicks:N[ae],showGrid:!W[ae],data:w[ae]||[],bgColor:ge,calendar:y.calendar,automargin:!0,visibleDflt:Oe,reverseDflt:Ie,autotypenumbersDflt:S,splomStash:((y._splomAxes||{})[ce]||{})[se],noAutotickangles:ce==="y"};be("uirevision",y.uirevision),t(fe,pe,be,de),i(fe,pe,be,de,y);var _e=Me&&ce===we.charAt(0),Ae=ke("spikecolor",Me?pe.color:void 0),Pe=ke("spikethickness",Me?1.5:void 0),Ee=ke("spikedash",Me?"dot":void 0),Fe=ke("spikemode",Me?"across":void 0),Ve=ke("spikesnap");be("showspikes",!!(_e||Ae||Pe||Ee||Fe||Ve))||(delete pe.spikecolor,delete pe.spikethickness,delete pe.spikedash,delete pe.spikemode,delete pe.spikesnap);var Ye=l(fe.overlaying),tt=[0,1];if(y[Ye]!==void 0){var nt=l(y[Ye].anchor);y[nt]!==void 0&&(tt=y[nt].domain)}r(fe,pe,be,{letter:ce,counterAxes:oe[ce],overlayableAxes:ve(ce,ae),grid:y.grid,overlayingDomain:tt}),be("title.standoff"),ye(),pe._input=fe}for(_=0;_<Se.length;){se=Se[_++],ce=(ae=l(se)).charAt(0),M.isPlainObject(g[ae])||(g[ae]={}),fe=g[ae],pe=b.newContainer(y,ae,ce+"axis"),me();var ht={letter:ce,font:y.font,outerTicks:N[ae],showGrid:!W[ae],data:[],bgColor:ge,calendar:y.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:S,splomStash:((y._splomAxes||{})[ce]||{})[se]};be("uirevision",y.uirevision),pe.type=he[se]||"linear",i(fe,pe,be,ht,y),r(fe,pe,be,{letter:ce,counterAxes:oe[ce],overlayableAxes:ve(ce,ae),grid:y.grid}),be("fixedrange"),ye(),pe._input=fe}var vt=p("rangeslider","handleDefaults"),pt=p("rangeselector","handleDefaults");for(_=0;_<Q.length;_++)ae=Q[_],fe=g[ae],pe=y[ae],vt(g,y,ae),pe.type==="date"&&pt(fe,pe,y,Z,pe.calendar),be("fixedrange");for(_=0;_<Z.length;_++){ae=Z[_],fe=g[ae],pe=y[ae];var Qe=y[l(pe.anchor)];be("fixedrange",p("rangeslider","isVisible")(Qe))}n.handleDefaults(g,y,{axIds:ie.concat(Se).sort(a.idSort),axHasImage:I})}},42136:function(ee,R,e){var M=e(49760).mix,k=e(22548),s=e(3400);ee.exports=function(T,b,f,o){var t=(o=o||{}).dfltColor;function i(g,y){return s.coerce2(T,b,o.attributes,g,y)}var n=i("linecolor",t),r=i("linewidth");f("showline",o.showLine||!!n||!!r)||(delete b.linecolor,delete b.linewidth);var a=i("gridcolor",M(t,o.bgColor,o.blend||k.lightFraction).toRgbString()),l=i("gridwidth"),u=i("griddash");if(f("showgrid",o.showGrid||!!a||!!l||!!u)||(delete b.gridcolor,delete b.gridwidth,delete b.griddash),o.hasMinor){var h=i("minor.gridcolor",M(b.gridcolor,o.bgColor,67).toRgbString()),c=i("minor.gridwidth",b.gridwidth||1),x=i("minor.griddash",b.griddash||"solid");f("minor.showgrid",!!h||!!c||!!x)||(delete b.minor.gridcolor,delete b.minor.gridwidth,delete b.minor.griddash)}if(!o.noZeroLine){var p=i("zerolinecolor",t),v=i("zerolinewidth");f("zeroline",o.showGrid||!!p||!!v)||(delete b.zerolinecolor,delete b.zerolinewidth)}}},37668:function(ee,R,e){var M=e(38248),k=e(3400);ee.exports=function(s,T,b,f){var o,t,i,n,r,a,l=f.counterAxes||[],u=f.overlayableAxes||[],h=f.letter,c=f.grid,x=f.overlayingDomain;c&&(t=c._domains[h][c._axisMap[T._id]],o=c._anchors[T._id],t&&(i=c[h+"side"].split(" ")[0],n=c.domain[h][i==="right"||i==="top"?1:0])),t=t||[0,1],o=o||(M(s.position)?"free":l[0]||"free"),i=i||(h==="x"?"bottom":"left"),n=n||0,r=0,a=!1;var p=k.coerce(s,T,{anchor:{valType:"enumerated",values:["free"].concat(l),dflt:o}},"anchor"),v=k.coerce(s,T,{side:{valType:"enumerated",values:h==="x"?["bottom","top"]:["left","right"],dflt:i}},"side");p==="free"&&(h==="y"&&(b("autoshift")&&(n=v==="left"?x[0]:x[1],a=!T.automargin||T.automargin,r=v==="left"?-3:3),b("shift",r)),b("position",n)),b("automargin",a);var g=!1;if(u.length&&(g=k.coerce(s,T,{overlaying:{valType:"enumerated",values:[!1].concat(u),dflt:!1}},"overlaying")),!g){var y=b("domain",t);y[0]>y[1]-.000244140625&&(T.domain=t),k.noneOrAll(s.domain,T.domain,t),T.tickmode==="sync"&&(T.tickmode="auto")}return b("layer"),T}},42568:function(ee,R,e){var M=e(85024);ee.exports=function(k,s,T,b,f){f||(f={});var o=f.tickSuffixDflt,t=M(k);T("tickprefix")&&T("showtickprefix",t),T("ticksuffix",o)&&T("showticksuffix",t)}},96312:function(ee,R,e){var M=e(76808);ee.exports=function(k,s,T,b){var f=s._template||{},o=s.type||f.type||"-";T("minallowed"),T("maxallowed");var t,i=T("range");i||b.noInsiderange||o==="log"||(!(t=T("insiderange"))||t[0]!==null&&t[1]!==null||(s.insiderange=!1,t=void 0),t&&(i=T("range",t)));var n,r=s.getAutorangeDflt(i,b),a=T("autorange",r);!i||(i[0]!==null||i[1]!==null)&&(i[0]!==null&&i[1]!==null||a!=="reversed"&&a!==!0)&&(i[0]===null||a!=="min"&&a!=="max reversed")&&(i[1]===null||a!=="max"&&a!=="min reversed")||(i=void 0,delete s.range,s.autorange=!0,n=!0),n||(a=T("autorange",r=s.getAutorangeDflt(i,b))),a&&(M(T,a,i),o!=="linear"&&o!=="-"||T("rangemode")),s.cleanRange()}},21160:function(ee,R,e){var M=e(84284).FROM_BL;ee.exports=function(k,s,T){T===void 0&&(T=M[k.constraintoward||"center"]);var b=[k.r2l(k.range[0]),k.r2l(k.range[1])],f=b[0]+(b[1]-b[0])*T;k.range=k._input.range=[k.l2r(f+(b[0]-f)*s),k.l2r(f+(b[1]-f)*s)],k.setScale()}},78344:function(ee,R,e){var M=e(33428),k=e(94336).E9,s=e(3400),T=s.numberFormat,b=e(38248),f=s.cleanNumber,o=s.ms2DateTime,t=s.dateTime2ms,i=s.ensureNumber,n=s.isArrayOrTypedArray,r=e(39032),a=r.FP_SAFE,l=r.BADNUM,u=r.LOG_CLIP,h=r.ONEWEEK,c=r.ONEDAY,x=r.ONEHOUR,p=r.ONEMIN,v=r.ONESEC,g=e(79811),y=e(33816),m=y.HOUR_PATTERN,_=y.WEEKDAY_PATTERN;function d(w){return Math.pow(10,w)}function S(w){return w!=null}ee.exports=function(w,E){E=E||{};var C=w._id||"x",O=C.charAt(0);function P(X,te){if(X>0)return Math.log(X)/Math.LN10;if(X<=0&&te&&w.range&&w.range.length===2){var ae=w.range[0],se=w.range[1];return .5*(ae+se-2*u*Math.abs(ae-se))}return l}function z(X,te,ae,se){if((se||{}).msUTC&&b(X))return+X;var ce=t(X,ae||w.calendar);if(ce===l){if(!b(X))return l;X=+X;var fe=Math.floor(10*s.mod(X+.05,1)),pe=Math.round(X-fe/10);ce=t(new Date(pe))+fe/10}return ce}function j(X,te,ae){return o(X,te,ae||w.calendar)}function I(X){return w._categories[Math.round(X)]}function N(X){if(S(X)){if(w._categoriesMap===void 0&&(w._categoriesMap={}),w._categoriesMap[X]!==void 0)return w._categoriesMap[X];w._categories.push(typeof X=="number"?String(X):X);var te=w._categories.length-1;return w._categoriesMap[X]=te,te}return l}function W(X){if(w._categoriesMap)return w._categoriesMap[X]}function F(X){var te=W(X);return te!==void 0?te:b(X)?+X:void 0}function U(X){return b(X)?+X:W(X)}function H(X,te,ae){return M.round(ae+te*X,2)}function ne(X,te,ae){return(X-ae)/te}var $=function(X){return b(X)?H(X,w._m,w._b):l},K=function(X){return ne(X,w._m,w._b)};if(w.rangebreaks){var Q=O==="y";$=function(X){if(!b(X))return l;var te=w._rangebreaks.length;if(!te)return H(X,w._m,w._b);var ae=Q;w.range[0]>w.range[1]&&(ae=!ae);for(var se=ae?-1:1,ce=se*X,fe=0,pe=0;pe<te;pe++){var ge=se*w._rangebreaks[pe].min,me=se*w._rangebreaks[pe].max;if(ce<ge)break;if(!(ce>me)){fe=ce<(ge+me)/2?pe:pe+1;break}fe=pe+1}var be=w._B[fe]||0;return isFinite(be)?H(X,w._m2,be):0},K=function(X){var te=w._rangebreaks.length;if(!te)return ne(X,w._m,w._b);for(var ae=0,se=0;se<te&&!(X<w._rangebreaks[se].pmin);se++)X>w._rangebreaks[se].pmax&&(ae=se+1);return ne(X,w._m2,w._B[ae])}}w.c2l=w.type==="log"?P:i,w.l2c=w.type==="log"?d:i,w.l2p=$,w.p2l=K,w.c2p=w.type==="log"?function(X,te){return $(P(X,te))}:$,w.p2c=w.type==="log"?function(X){return d(K(X))}:K,["linear","-"].indexOf(w.type)!==-1?(w.d2r=w.r2d=w.d2c=w.r2c=w.d2l=w.r2l=f,w.c2d=w.c2r=w.l2d=w.l2r=i,w.d2p=w.r2p=function(X){return w.l2p(f(X))},w.p2d=w.p2r=K,w.cleanPos=i):w.type==="log"?(w.d2r=w.d2l=function(X,te){return P(f(X),te)},w.r2d=w.r2c=function(X){return d(f(X))},w.d2c=w.r2l=f,w.c2d=w.l2r=i,w.c2r=P,w.l2d=d,w.d2p=function(X,te){return w.l2p(w.d2r(X,te))},w.p2d=function(X){return d(K(X))},w.r2p=function(X){return w.l2p(f(X))},w.p2r=K,w.cleanPos=i):w.type==="date"?(w.d2r=w.r2d=s.identity,w.d2c=w.r2c=w.d2l=w.r2l=z,w.c2d=w.c2r=w.l2d=w.l2r=j,w.d2p=w.r2p=function(X,te,ae){return w.l2p(z(X,0,ae))},w.p2d=w.p2r=function(X,te,ae){return j(K(X),te,ae)},w.cleanPos=function(X){return s.cleanDate(X,l,w.calendar)}):w.type==="category"?(w.d2c=w.d2l=N,w.r2d=w.c2d=w.l2d=I,w.d2r=w.d2l_noadd=F,w.r2c=function(X){var te=U(X);return te!==void 0?te:w.fraction2r(.5)},w.l2r=w.c2r=i,w.r2l=U,w.d2p=function(X){return w.l2p(w.r2c(X))},w.p2d=function(X){return I(K(X))},w.r2p=w.d2p,w.p2r=K,w.cleanPos=function(X){return typeof X=="string"&&X!==""?X:i(X)}):w.type==="multicategory"&&(w.r2d=w.c2d=w.l2d=I,w.d2r=w.d2l_noadd=F,w.r2c=function(X){var te=F(X);return te!==void 0?te:w.fraction2r(.5)},w.r2c_just_indices=W,w.l2r=w.c2r=i,w.r2l=F,w.d2p=function(X){return w.l2p(w.r2c(X))},w.p2d=function(X){return I(K(X))},w.r2p=w.d2p,w.p2r=K,w.cleanPos=function(X){return Array.isArray(X)||typeof X=="string"&&X!==""?X:i(X)},w.setupMultiCategory=function(X){var te,ae,se=w._traceIndices,ce=w._matchGroup;if(ce&&w._categories.length===0){for(var fe in ce)if(fe!==C){var pe=E[g.id2name(fe)];se=se.concat(pe._traceIndices)}}var ge=[[0,{}],[0,{}]],me=[];for(te=0;te<se.length;te++){var be=X[se[te]];if(O in be){var ke=be[O],ze=be._length||s.minRowLength(ke);if(n(ke[0])&&n(ke[1]))for(ae=0;ae<ze;ae++){var ve=ke[0][ae],oe=ke[1][ae];S(ve)&&S(oe)&&(me.push([ve,oe]),ve in ge[0][1]||(ge[0][1][ve]=ge[0][0]++),oe in ge[1][1]||(ge[1][1][oe]=ge[1][0]++))}}}for(me.sort(function(ie,he){var Se=ge[0][1],ye=Se[ie[0]]-Se[he[0]];if(ye)return ye;var we=ge[1][1];return we[ie[1]]-we[he[1]]}),te=0;te<me.length;te++)N(me[te])}),w.fraction2r=function(X){var te=w.r2l(w.range[0]),ae=w.r2l(w.range[1]);return w.l2r(te+X*(ae-te))},w.r2fraction=function(X){var te=w.r2l(w.range[0]),ae=w.r2l(w.range[1]);return(w.r2l(X)-te)/(ae-te)},w.limitRange=function(X){var te=w.minallowed,ae=w.maxallowed;if(te!==void 0||ae!==void 0){X||(X="range");var se=s.nestedProperty(w,X).get(),ce=s.simpleMap(se,w.r2l),fe=ce[1]<ce[0];fe&&ce.reverse();var pe=s.simpleMap([te,ae],w.r2l);if(te!==void 0&&ce[0]<pe[0]&&(se[fe?1:0]=te),ae!==void 0&&ce[1]>pe[1]&&(se[fe?0:1]=ae),se[0]===se[1]){var ge=w.l2r(te),me=w.l2r(ae);if(te!==void 0){var be=ge+1;ae!==void 0&&(be=Math.min(be,me)),se[fe?1:0]=be}if(ae!==void 0){var ke=me+1;te!==void 0&&(ke=Math.max(ke,ge)),se[fe?0:1]=ke}}}},w.cleanRange=function(X,te){w._cleanRange(X,te),w.limitRange(X)},w._cleanRange=function(X,te){te||(te={}),X||(X="range");var ae,se,ce=s.nestedProperty(w,X).get();if(se=(se=w.type==="date"?s.dfltRange(w.calendar):O==="y"?y.DFLTRANGEY:w._name==="realaxis"?[0,1]:te.dfltRange||y.DFLTRANGEX).slice(),w.rangemode!=="tozero"&&w.rangemode!=="nonnegative"||(se[0]=0),ce&&ce.length===2){var fe=ce[0]===null,pe=ce[1]===null;for(w.type!=="date"||w.autorange||(ce[0]=s.cleanDate(ce[0],l,w.calendar),ce[1]=s.cleanDate(ce[1],l,w.calendar)),ae=0;ae<2;ae++)if(w.type==="date"){if(!s.isDateTime(ce[ae],w.calendar)){w[X]=se;break}if(w.r2l(ce[0])===w.r2l(ce[1])){var ge=s.constrain(w.r2l(ce[0]),s.MIN_MS+1e3,s.MAX_MS-1e3);ce[0]=w.l2r(ge-1e3),ce[1]=w.l2r(ge+1e3);break}}else{if(!b(ce[ae])){if(fe||pe||!b(ce[1-ae])){w[X]=se;break}ce[ae]=ce[1-ae]*(ae?10:.1)}if(ce[ae]<-a?ce[ae]=-a:ce[ae]>a&&(ce[ae]=a),ce[0]===ce[1]){var me=Math.max(1,Math.abs(1e-6*ce[0]));ce[0]-=me,ce[1]+=me}}}else s.nestedProperty(w,X).set(se)},w.setScale=function(X){var te=E._size;if(w.overlaying){var ae=g.getFromId({_fullLayout:E},w.overlaying);w.domain=ae.domain}var se=X&&w._r?"_r":"range",ce=w.calendar;w.cleanRange(se);var fe,pe,ge=w.r2l(w[se][0],ce),me=w.r2l(w[se][1],ce),be=O==="y";if(be?(w._offset=te.t+(1-w.domain[1])*te.h,w._length=te.h*(w.domain[1]-w.domain[0]),w._m=w._length/(ge-me),w._b=-w._m*me):(w._offset=te.l+w.domain[0]*te.w,w._length=te.w*(w.domain[1]-w.domain[0]),w._m=w._length/(me-ge),w._b=-w._m*ge),w._rangebreaks=[],w._lBreaks=0,w._m2=0,w._B=[],w.rangebreaks&&(w._rangebreaks=w.locateBreaks(Math.min(ge,me),Math.max(ge,me)),w._rangebreaks.length)){for(fe=0;fe<w._rangebreaks.length;fe++)pe=w._rangebreaks[fe],w._lBreaks+=Math.abs(pe.max-pe.min);var ke=be;ge>me&&(ke=!ke),ke&&w._rangebreaks.reverse();var ze=ke?-1:1;for(w._m2=ze*w._length/(Math.abs(me-ge)-w._lBreaks),w._B.push(-w._m2*(be?me:ge)),fe=0;fe<w._rangebreaks.length;fe++)pe=w._rangebreaks[fe],w._B.push(w._B[w._B.length-1]-ze*w._m2*(pe.max-pe.min));for(fe=0;fe<w._rangebreaks.length;fe++)(pe=w._rangebreaks[fe]).pmin=$(pe.min),pe.pmax=$(pe.max)}if(!isFinite(w._m)||!isFinite(w._b)||w._length<0)throw E._replotting=!1,new Error("Something went wrong with axis scaling")},w.maskBreaks=function(X){var te,ae,se,ce,fe,pe=w.rangebreaks||[];pe._cachedPatterns||(pe._cachedPatterns=pe.map(function(ve){return ve.enabled&&ve.bounds?s.simpleMap(ve.bounds,ve.pattern?f:w.d2c):null})),pe._cachedValues||(pe._cachedValues=pe.map(function(ve){return ve.enabled&&ve.values?s.simpleMap(ve.values,w.d2c).sort(s.sorterAsc):null}));for(var ge=0;ge<pe.length;ge++){var me=pe[ge];if(me.enabled){if(me.bounds){var be=me.pattern;switch(ae=(te=pe._cachedPatterns[ge])[0],se=te[1],be){case _:ce=(fe=new Date(X)).getUTCDay(),ae>se&&(se+=7,ce<ae&&(ce+=7));break;case m:ce=(fe=new Date(X)).getUTCHours()+(fe.getUTCMinutes()/60+fe.getUTCSeconds()/3600+fe.getUTCMilliseconds()/36e5),ae>se&&(se+=24,ce<ae&&(ce+=24));break;case"":ce=X}if(ce>=ae&&ce<se)return l}else for(var ke=pe._cachedValues[ge],ze=0;ze<ke.length;ze++)if(se=(ae=ke[ze])+me.dvalue,X>=ae&&X<se)return l}}return X},w.locateBreaks=function(X,te){var ae,se,ce,fe,pe=[];if(!w.rangebreaks)return pe;var ge=w.rangebreaks.slice().sort(function(we,Me){return we.pattern===_&&Me.pattern===m?-1:Me.pattern===_&&we.pattern===m?1:0}),me=function(we,Me){if((we=s.constrain(we,X,te))!==(Me=s.constrain(Me,X,te))){for(var Oe=!0,Ie=0;Ie<pe.length;Ie++){var de=pe[Ie];we<de.max&&Me>=de.min&&(we<de.min&&(de.min=we),Me>de.max&&(de.max=Me),Oe=!1)}Oe&&pe.push({min:we,max:Me})}};for(ae=0;ae<ge.length;ae++){var be=ge[ae];if(be.enabled)if(be.bounds){var ke=X,ze=te;be.pattern&&(ke=Math.floor(ke)),ce=(se=s.simpleMap(be.bounds,be.pattern?f:w.r2l))[0],fe=se[1];var ve,oe,ie=new Date(ke);switch(be.pattern){case _:oe=h,ve=(fe-ce+(fe<ce?7:0))*c,ke+=ce*c-(ie.getUTCDay()*c+ie.getUTCHours()*x+ie.getUTCMinutes()*p+ie.getUTCSeconds()*v+ie.getUTCMilliseconds());break;case m:oe=c,ve=(fe-ce+(fe<ce?24:0))*x,ke+=ce*x-(ie.getUTCHours()*x+ie.getUTCMinutes()*p+ie.getUTCSeconds()*v+ie.getUTCMilliseconds());break;default:ke=Math.min(se[0],se[1]),ve=oe=(ze=Math.max(se[0],se[1]))-ke}for(var he=ke;he<ze;he+=oe)me(he,he+ve)}else for(var Se=s.simpleMap(be.values,w.d2c),ye=0;ye<Se.length;ye++)me(ce=Se[ye],fe=ce+be.dvalue)}return pe.sort(function(we,Me){return we.min-Me.min}),pe},w.makeCalcdata=function(X,te,ae){var se,ce,fe,pe,ge=w.type,me=ge==="date"&&X[te+"calendar"];if(te in X){if(se=X[te],pe=X._length||s.minRowLength(se),s.isTypedArray(se)&&(ge==="linear"||ge==="log")){if(pe===se.length)return se;if(se.subarray)return se.subarray(0,pe)}if(ge==="multicategory")return function(ze,ve){for(var oe=new Array(ve),ie=0;ie<ve;ie++){var he=(ze[0]||[])[ie],Se=(ze[1]||[])[ie];oe[ie]=W([he,Se])}return oe}(se,pe);for(ce=new Array(pe),fe=0;fe<pe;fe++)ce[fe]=w.d2c(se[fe],0,me,ae)}else{var be=te+"0"in X?w.d2c(X[te+"0"],0,me):0,ke=X["d"+te]?Number(X["d"+te]):1;for(se=X[{x:"y",y:"x"}[te]],pe=X._length||se.length,ce=new Array(pe),fe=0;fe<pe;fe++)ce[fe]=be+fe*ke}if(w.rangebreaks)for(fe=0;fe<pe;fe++)ce[fe]=w.maskBreaks(ce[fe]);return ce},w.isValidRange=function(X,te){return Array.isArray(X)&&X.length===2&&(te&&X[0]===null||b(w.r2l(X[0])))&&(te&&X[1]===null||b(w.r2l(X[1])))},w.getAutorangeDflt=function(X,te){var ae=!w.isValidRange(X,"nullOk");return ae&&te&&te.reverseDflt?ae="reversed":X&&(X[0]===null&&X[1]===null?ae=!0:X[0]===null&&X[1]!==null?ae="min":X[0]!==null&&X[1]===null&&(ae="max")),ae},w.isReversed=function(){var X=w.autorange;return X==="reversed"||X==="min reversed"||X==="max reversed"},w.isPtWithinRange=function(X,te){var ae=w.c2l(X[O],null,te),se=w.r2l(w.range[0]),ce=w.r2l(w.range[1]);return se<ce?se<=ae&&ae<=ce:ce<=ae&&ae<=se},w._emptyCategories=function(){w._categories=[],w._categoriesMap={}},w.clearCalc=function(){var X=w._matchGroup;if(X){var te=null,ae=null;for(var se in X){var ce=E[g.id2name(se)];if(ce._categories){te=ce._categories,ae=ce._categoriesMap;break}}te&&ae?(w._categories=te,w._categoriesMap=ae):w._emptyCategories()}else w._emptyCategories();if(w._initialCategories)for(var fe=0;fe<w._initialCategories.length;fe++)N(w._initialCategories[fe])},w.sortByInitialCategories=function(){var X=[];if(w._emptyCategories(),w._initialCategories)for(var te=0;te<w._initialCategories.length;te++)N(w._initialCategories[te]);X=X.concat(w._traceIndices);var ae=w._matchGroup;for(var se in ae)if(C!==se){var ce=E[g.id2name(se)];ce._categories=w._categories,ce._categoriesMap=w._categoriesMap,X=X.concat(ce._traceIndices)}return X};var Z=E._d3locale;w.type==="date"&&(w._dateFormat=Z?Z.timeFormat:k,w._extraFormat=E._extraFormat),w._separators=E.separators,w._numFormat=Z?Z.numberFormat:T,delete w._minDtick,delete w._forceTick0}},85024:function(ee){ee.exports=function(R){var e=["showexponent","showtickprefix","showticksuffix"].filter(function(M){return R[M]!==void 0});if(e.every(function(M){return R[M]===R[e[0]]})||e.length===1)return R[e[0]]}},95936:function(ee,R,e){var M=e(3400),k=e(76308).contrast,s=e(94724),T=e(85024),b=e(51272);function f(o,t){function i(n,r){return M.coerce(o,t,s.tickformatstops,n,r)}i("enabled")&&(i("dtickrange"),i("value"))}ee.exports=function(o,t,i,n,r){r||(r={});var a=i("labelalias");M.isPlainObject(a)||delete t.labelalias;var l=T(o);if(i("showticklabels")){r.noTicklabelshift||i("ticklabelshift"),r.noTicklabelstandoff||i("ticklabelstandoff");var u=r.font||{},h=t.color,c=(t.ticklabelposition||"").indexOf("inside")!==-1?k(r.bgColor):h&&h!==s.color.dflt?h:u.color;if(M.coerceFont(i,"tickfont",u,{overrideDflt:{color:c}}),r.noTicklabelstep||n==="multicategory"||n==="log"||i("ticklabelstep"),!r.noAng){var x=i("tickangle");r.noAutotickangles||x!=="auto"||i("autotickangles")}if(n!=="category"){var p=i("tickformat");b(o,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:f}),t.tickformatstops.length||delete t.tickformatstops,r.noExp||p||n==="date"||(i("showexponent",l),i("exponentformat"),i("minexponent"),i("separatethousands"))}}}},25404:function(ee,R,e){var M=e(3400),k=e(94724);ee.exports=function(s,T,b,f){var o=f.isMinor,t=o?s.minor||{}:s,i=o?T.minor:T,n=o?k.minor:k,r=o?"minor.":"",a=M.coerce2(t,i,n,"ticklen",o?.6*(T.ticklen||5):void 0),l=M.coerce2(t,i,n,"tickwidth",o?T.tickwidth||1:void 0),u=M.coerce2(t,i,n,"tickcolor",(o?T.tickcolor:void 0)||i.color);b(r+"ticks",!o&&f.outerTicks||a||l||u?"outside":"")||(delete i.ticklen,delete i.tickwidth,delete i.tickcolor)}},26332:function(ee,R,e){var M=e(98728),k=e(3400).isArrayOrTypedArray,s=e(38116).isTypedArraySpec,T=e(38116).decodeTypedArraySpec;ee.exports=function(b,f,o,t,i){i||(i={});var n=i.isMinor,r=n?b.minor||{}:b,a=n?f.minor:f,l=n?"minor.":"";function u(g){var y=r[g];return s(y)&&(y=T(y)),y!==void 0?y:(a._template||{})[g]}var h=u("tick0"),c=u("dtick"),x=u("tickvals"),p=o(l+"tickmode",k(x)?"array":c?"linear":"auto");if(p==="auto"||p==="sync")o(l+"nticks");else if(p==="linear"){var v=a.dtick=M.dtick(c,t);a.tick0=M.tick0(h,t,f.calendar,v)}else t!=="multicategory"&&(o(l+"tickvals")===void 0?a.tickmode="auto":n||o("ticktext"))}},73736:function(ee,R,e){var M=e(33428),k=e(24040),s=e(3400),T=e(43616),b=e(54460);ee.exports=function(f,o,t,i){var n=f._fullLayout;if(o.length!==0){var r,a,l,u;i&&(r=i());var h=M.ease(t.easing);return f._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(u),u=null,function(){for(var p={},v=0;v<o.length;v++){var g=o[v],y=g.plotinfo.xaxis,m=g.plotinfo.yaxis;g.xr0&&(p[y._name+".range"]=g.xr0.slice()),g.yr0&&(p[m._name+".range"]=g.yr0.slice())}return k.call("relayout",f,p).then(function(){for(var _=0;_<o.length;_++)c(o[_].plotinfo)})}()}),a=Date.now(),u=window.requestAnimationFrame(function p(){l=Date.now();for(var v=Math.min(1,(l-a)/t.duration),g=h(v),y=0;y<o.length;y++)x(o[y],g);l-a>t.duration?(function(){for(var m={},_=0;_<o.length;_++){var d=o[_],S=d.plotinfo.xaxis,w=d.plotinfo.yaxis;d.xr1&&(m[S._name+".range"]=d.xr1.slice()),d.yr1&&(m[w._name+".range"]=d.yr1.slice())}r&&r(),k.call("relayout",f,m).then(function(){for(var E=0;E<o.length;E++)c(o[E].plotinfo)})}(),u=window.cancelAnimationFrame(p)):u=window.requestAnimationFrame(p)}),Promise.resolve()}function c(p){var v=p.xaxis,g=p.yaxis;n._defs.select("#"+p.clipId+"> rect").call(T.setTranslate,0,0).call(T.setScale,1,1),p.plot.call(T.setTranslate,v._offset,g._offset).call(T.setScale,1,1);var y=p.plot.selectAll(".scatterlayer .trace");y.selectAll(".point").call(T.setPointGroupScale,1,1),y.selectAll(".textpoint").call(T.setTextPointsScale,1,1),y.call(T.hideOutsideRangePoints,p)}function x(p,v){var g=p.plotinfo,y=g.xaxis,m=g.yaxis,_=y._length,d=m._length,S=!!p.xr1,w=!!p.yr1,E=[];if(S){var C=s.simpleMap(p.xr0,y.r2l),O=s.simpleMap(p.xr1,y.r2l),P=C[1]-C[0],z=O[1]-O[0];E[0]=(C[0]*(1-v)+v*O[0]-C[0])/(C[1]-C[0])*_,E[2]=_*(1-v+v*z/P),y.range[0]=y.l2r(C[0]*(1-v)+v*O[0]),y.range[1]=y.l2r(C[1]*(1-v)+v*O[1])}else E[0]=0,E[2]=_;if(w){var j=s.simpleMap(p.yr0,m.r2l),I=s.simpleMap(p.yr1,m.r2l),N=j[1]-j[0],W=I[1]-I[0];E[1]=(j[1]*(1-v)+v*I[1]-j[1])/(j[0]-j[1])*d,E[3]=d*(1-v+v*W/N),m.range[0]=y.l2r(j[0]*(1-v)+v*I[0]),m.range[1]=m.l2r(j[1]*(1-v)+v*I[1])}else E[1]=0,E[3]=d;b.drawOne(f,y,{skipTitle:!0}),b.drawOne(f,m,{skipTitle:!0}),b.redrawComponents(f,[y._id,m._id]);var F=S?_/E[2]:1,U=w?d/E[3]:1,H=S?E[0]:0,ne=w?E[1]:0,$=S?E[0]/E[2]*_:0,K=w?E[1]/E[3]*d:0,Q=y._offset-$,Z=m._offset-K;g.clipRect.call(T.setTranslate,H,ne).call(T.setScale,1/F,1/U),g.plot.call(T.setTranslate,Q,Z).call(T.setScale,F,U),T.setPointGroupScale(g.zoomScalePts,1/F,1/U),T.setTextPointsScale(g.zoomScaleTxt,1/F,1/U)}b.redrawComponents(f)}},14944:function(ee,R,e){var M=e(24040).traceIs,k=e(52976);function s(b){return{v:"x",h:"y"}[b.orientation||"v"]}function T(b,f){var o=s(b),t=M(b,"box-violin"),i=M(b._fullInput||{},"candlestick");return t&&!i&&f===o&&b[o]===void 0&&b[o+"0"]===void 0}ee.exports=function(b,f,o,t){o("autotypenumbers",t.autotypenumbersDflt),o("type",(t.splomStash||{}).type)==="-"&&(function(i,n){if(i.type==="-"){var r,a=i._id,l=a.charAt(0);a.indexOf("scene")!==-1&&(a=l);var u=function(m,_,d){for(var S=0;S<m.length;S++){var w=m[S];if(w.type==="splom"&&w._length>0&&(w["_"+d+"axes"]||{})[_]||(w[d+"axis"]||d)===_&&(T(w,d)||(w[d]||[]).length||w[d+"0"]))return w}}(n,a,l);if(u)if(u.type!=="histogram"||l!=={v:"y",h:"x"}[u.orientation||"v"]){var h=l+"calendar",c=u[h],x={noMultiCategory:!M(u,"cartesian")||M(u,"noMultiCategory")};if(u.type==="box"&&u._hasPreCompStats&&l==={h:"x",v:"y"}[u.orientation||"v"]&&(x.noMultiCategory=!0),x.autotypenumbers=i.autotypenumbers,T(u,l)){var p=s(u),v=[];for(r=0;r<n.length;r++){var g=n[r];M(g,"box-violin")&&(g[l+"axis"]||l)===a&&(g[p]!==void 0?v.push(g[p][0]):g.name!==void 0?v.push(g.name):v.push("text"),g[h]!==c&&(c=void 0))}i.type=k(v,c,x)}else if(u.type==="splom"){var y=u.dimensions[u._axesDim[a]];y.visible&&(i.type=k(y.values,c,x))}else i.type=k(u[l]||[u[l+"0"]],c,x)}else i.type="linear"}}(f,t.data),f.type==="-"?f.type="linear":b.type=f.type)}},62460:function(ee,R,e){var M=e(24040),k=e(3400);function s(o,t,i){var n,r,a,l=!1;if(t.type==="data")n=o._fullData[t.traces!==null?t.traces[0]:0];else{if(t.type!=="layout")return!1;n=o._fullLayout}return r=k.nestedProperty(n,t.prop).get(),(a=i[t.type]=i[t.type]||{}).hasOwnProperty(t.prop)&&a[t.prop]!==r&&(l=!0),a[t.prop]=r,{changed:l,value:r}}function T(o,t){var i=[],n=t[0],r={};if(typeof n=="string")r[n]=t[1];else{if(!k.isPlainObject(n))return i;r=n}return f(r,function(a,l,u){i.push({type:"layout",prop:a,value:u})},"",0),i}function b(o,t){var i,n,r,a,l=[];if(n=t[0],r=t[1],i=t[2],a={},typeof n=="string")a[n]=r;else{if(!k.isPlainObject(n))return l;a=n,i===void 0&&(i=r)}return i===void 0&&(i=null),f(a,function(u,h,c){var x,p;if(Array.isArray(c)){p=c.slice();var v=Math.min(p.length,o.data.length);i&&(v=Math.min(v,i.length)),x=[];for(var g=0;g<v;g++)x[g]=i?i[g]:g}else p=c,x=i?i.slice():null;if(x===null)Array.isArray(p)&&(p=p[0]);else if(Array.isArray(x)){if(!Array.isArray(p)){var y=p;p=[];for(var m=0;m<x.length;m++)p[m]=y}p.length=Math.min(x.length,p.length)}l.push({type:"data",prop:u,traces:x,value:p})},"",0),l}function f(o,t,i,n){Object.keys(o).forEach(function(r){var a=o[r];if(r[0]!=="_"){var l=i+(n>0?".":"")+r;k.isPlainObject(a)?f(a,t,l,n+1):t(l,r,a)}})}R.manageCommandObserver=function(o,t,i,n){var r={},a=!0;t&&t._commandObserver&&(r=t._commandObserver),r.cache||(r.cache={}),r.lookupTable={};var l=R.hasSimpleAPICommandBindings(o,i,r.lookupTable);if(t&&t._commandObserver){if(l)return r;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,r}if(l){s(o,l,r.cache),r.check=function(){if(a){var c=s(o,l,r.cache);return c.changed&&n&&r.lookupTable[c.value]!==void 0&&(r.disable(),Promise.resolve(n({value:c.value,type:l.type,prop:l.prop,traces:l.traces,index:r.lookupTable[c.value]})).then(r.enable,r.enable)),c.changed}};for(var u=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],h=0;h<u.length;h++)o._internalOn(u[h],r.check);r.remove=function(){for(var c=0;c<u.length;c++)o._removeInternalListener(u[c],r.check)}}else k.log("Unable to automatically bind plot updates to API command"),r.lookupTable={},r.remove=function(){};return r.disable=function(){a=!1},r.enable=function(){a=!0},t&&(t._commandObserver=r),r},R.hasSimpleAPICommandBindings=function(o,t,i){var n,r,a=t.length;for(n=0;n<a;n++){var l,u=t[n],h=u.method,c=u.args;if(Array.isArray(c)||(c=[]),!h)return!1;var x=R.computeAPICommandBindings(o,h,c);if(x.length!==1)return!1;if(r){if((l=x[0]).type!==r.type||l.prop!==r.prop)return!1;if(Array.isArray(r.traces)){if(!Array.isArray(l.traces))return!1;l.traces.sort();for(var p=0;p<r.traces.length;p++)if(r.traces[p]!==l.traces[p])return!1}else if(l.prop!==r.prop)return!1}else r=x[0],Array.isArray(r.traces)&&r.traces.sort();var v=(l=x[0]).value;if(Array.isArray(v)){if(v.length!==1)return!1;v=v[0]}i&&(i[v]=n)}return r},R.executeAPICommand=function(o,t,i){if(t==="skip")return Promise.resolve();var n=M.apiMethodRegistry[t],r=[o];Array.isArray(i)||(i=[]);for(var a=0;a<i.length;a++)r.push(i[a]);return n.apply(null,r).catch(function(l){return k.warn("API call to Plotly."+t+" rejected.",l),Promise.reject(l)})},R.computeAPICommandBindings=function(o,t,i){var n;switch(Array.isArray(i)||(i=[]),t){case"restyle":n=b(o,i);break;case"relayout":n=T(0,i);break;case"update":n=b(o,[i[0],i[2]]).concat(T(0,[i[1]]));break;case"animate":n=function(r,a){return Array.isArray(a[0])&&a[0].length===1&&["string","number"].indexOf(typeof a[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:a[0][0].toString()}]:[]}(0,i);break;default:n=[]}return n}},86968:function(ee,R,e){var M=e(92880).extendFlat;R.u=function(k,s){s=s||{};var T={valType:"info_array",editType:(k=k||{}).editType,items:[{valType:"number",min:0,max:1,editType:k.editType},{valType:"number",min:0,max:1,editType:k.editType}],dflt:[0,1]},b=(k.name&&k.name,k.trace,s.description&&s.description,{x:M({},T,{}),y:M({},T,{}),editType:k.editType});return k.noGridCell||(b.row={valType:"integer",min:0,dflt:0,editType:k.editType},b.column={valType:"integer",min:0,dflt:0,editType:k.editType}),b},R.Q=function(k,s,T,b){var f=b&&b.x||[0,1],o=b&&b.y||[0,1],t=s.grid;if(t){var i=T("domain.column");i!==void 0&&(i<t.columns?f=t._domains.x[i]:delete k.domain.column);var n=T("domain.row");n!==void 0&&(n<t.rows?o=t._domains.y[n]:delete k.domain.row)}var r=T("domain.x",f),a=T("domain.y",o);r[0]<r[1]||(k.domain.x=f.slice()),a[0]<a[1]||(k.domain.y=o.slice())}},25376:function(ee){ee.exports=function(R){var e=R.variantValues,M=R.editType,k=R.colorEditType;k===void 0&&(k=M);var s={editType:M,valType:"integer",min:1,max:1e3,extras:["normal","bold"],dflt:"normal"};R.noNumericWeightValues&&(s.valType="enumerated",s.values=s.extras,s.extras=void 0,s.min=void 0,s.max=void 0);var T={family:{valType:"string",noBlank:!0,strict:!0,editType:M},size:{valType:"number",min:1,editType:M},color:{valType:"color",editType:k},weight:s,style:{editType:M,valType:"enumerated",values:["normal","italic"],dflt:"normal"},variant:R.noFontVariant?void 0:{editType:M,valType:"enumerated",values:e||["normal","small-caps","all-small-caps","all-petite-caps","petite-caps","unicase"],dflt:"normal"},textcase:R.noFontTextcase?void 0:{editType:M,valType:"enumerated",values:["normal","word caps","upper","lower"],dflt:"normal"},lineposition:R.noFontLineposition?void 0:{editType:M,valType:"flaglist",flags:["under","over","through"],extras:["none"],dflt:"none"},shadow:R.noFontShadow?void 0:{editType:M,valType:"string",dflt:R.autoShadowDflt?"auto":"none"},editType:M};return R.autoSize&&(T.size.dflt="auto"),R.autoColor&&(T.color.dflt="auto"),R.arrayOk&&(T.family.arrayOk=!0,T.weight.arrayOk=!0,T.style.arrayOk=!0,R.noFontVariant||(T.variant.arrayOk=!0),R.noFontTextcase||(T.textcase.arrayOk=!0),R.noFontLineposition||(T.lineposition.arrayOk=!0),R.noFontShadow||(T.shadow.arrayOk=!0),T.size.arrayOk=!0,T.color.arrayOk=!0),T}},16672:function(ee){ee.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},79552:function(ee,R){R.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr","equal earth":"equalEarth",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},R.axesNames=["lonaxis","lataxis"],R.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},R.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},R.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},R.clipPad=.001,R.precision=.1,R.landColor="#F0DC82",R.waterColor="#3399FF",R.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},R.sphereSVG={type:"Sphere"},R.fillLayers={ocean:1,land:1,lakes:1},R.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},R.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],R.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],R.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},43520:function(ee,R,e){var M=e(33428),k=e(83356),s=k.geoPath,T=k.geoDistance,b=e(87108),f=e(24040),o=e(3400),t=o.strTranslate,i=e(76308),n=e(43616),r=e(93024),a=e(7316),l=e(54460),u=e(19280).getAutoRange,h=e(86476),c=e(22676).prepSelect,x=e(22676).clearOutline,p=e(22676).selectOnClick,v=e(79248),g=e(79552),y=e(27144),m=e(59972),_=e(55712).NO;function d(E){this.id=E.id,this.graphDiv=E.graphDiv,this.container=E.container,this.topojsonURL=E.topojsonURL,this.isStatic=E.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var S=d.prototype;function w(E,C){var O=g.clipPad,P=E[0]+O,z=E[1]-O,j=C[0]+O,I=C[1]-O;P>0&&z<0&&(z+=360);var N=(z-P)/4;return{type:"Polygon",coordinates:[[[P,j],[P,I],[P+N,I],[P+2*N,I],[P+3*N,I],[z,I],[z,j],[z-N,j],[z-2*N,j],[z-3*N,j],[P,j]]]}}ee.exports=function(E){return new d(E)},S.plot=function(E,C,O,P){var z=this;if(P)return z.update(E,C,!0);z._geoCalcData=E,z._fullLayout=C;var j=C[this.id],I=[],N=!1;for(var W in g.layerNameToAdjective)if(W!=="frame"&&j["show"+W]){N=!0;break}for(var F=!1,U=0;U<E.length;U++){var H=E[0][0].trace;H._geo=z,H.locationmode&&(N=!0);var ne=H.marker;if(ne){var $=ne.angle,K=ne.angleref;($||K==="north"||K==="previous")&&(F=!0)}}if(this._hasMarkerAngles=F,N){var Q=m.getTopojsonName(j);z.topojson!==null&&Q===z.topojsonName||(z.topojsonName=Q,PlotlyGeoAssets.topojson[z.topojsonName]===void 0&&I.push(z.fetchTopojson()))}I=I.concat(y.fetchTraceGeoData(E)),O.push(new Promise(function(Z,X){Promise.all(I).then(function(){z.topojson=PlotlyGeoAssets.topojson[z.topojsonName],z.update(E,C),Z()}).catch(X)}))},S.fetchTopojson=function(){var E=this,C=m.getTopojsonPath(E.topojsonURL,E.topojsonName);return new Promise(function(O,P){M.json(C,function(z,j){if(z)return z.status===404?P(new Error(["plotly.js could not find topojson file at",C+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):P(new Error(["unexpected error while fetching topojson file at",C].join(" ")));PlotlyGeoAssets.topojson[E.topojsonName]=j,O()})})},S.update=function(E,C,O){var P=C[this.id];this.hasChoropleth=!1;for(var z=0;z<E.length;z++){var j=E[z],I=j[0].trace;I.type==="choropleth"&&(this.hasChoropleth=!0),I.visible===!0&&I._length>0&&I._module.calcGeoJSON(j,C)}if(!O){if(this.updateProjection(E,C))return;this.viewInitial&&this.scope===P.scope||this.saveViewInitial(P)}this.scope=P.scope,this.updateBaseLayers(C,P),this.updateDims(C,P),this.updateFx(C,P),a.generalUpdatePerTraceModule(this.graphDiv,this,E,P);var N=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=N.selectAll(".point"),this.dataPoints.text=N.selectAll("text"),this.dataPaths.line=N.selectAll(".js-line");var W=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=W.selectAll("path"),this._render()},S.updateProjection=function(E,C){var O=this.graphDiv,P=C[this.id],z=C._size,j=P.domain,I=P.projection,N=P.lonaxis,W=P.lataxis,F=N._ax,U=W._ax,H=this.projection=function(ie){var he=ie.projection,Se=he.type,ye=g.projNames[Se];ye="geo"+o.titleCase(ye);for(var we=(k[ye]||b[ye])(),Me=ie._isSatellite?180*Math.acos(1/he.distance)/Math.PI:ie._isClipped?g.lonaxisSpan[Se]/2:null,Oe=["center","rotate","parallels","clipExtent"],Ie=function(Ae){return Ae?we:[]},de=0;de<Oe.length;de++){var _e=Oe[de];typeof we[_e]!="function"&&(we[_e]=Ie)}return we.isLonLatOverEdges=function(Ae){if(we(Ae)===null)return!0;if(Me){var Pe=we.rotate();return T(Ae,[-Pe[0],-Pe[1]])>Me*Math.PI/180}return!1},we.getPath=function(){return s().projection(we)},we.getBounds=function(Ae){return we.getPath().bounds(Ae)},we.precision(g.precision),ie._isSatellite&&we.tilt(he.tilt).distance(he.distance),Me&&we.clipAngle(Me-g.clipPad),we}(P),ne=[[z.l+z.w*j.x[0],z.t+z.h*(1-j.y[1])],[z.l+z.w*j.x[1],z.t+z.h*(1-j.y[0])]],$=P.center||{},K=I.rotation||{},Q=N.range||[],Z=W.range||[];if(P.fitbounds){F._length=ne[1][0]-ne[0][0],U._length=ne[1][1]-ne[0][1],F.range=u(O,F),U.range=u(O,U);var X=(F.range[0]+F.range[1])/2,te=(U.range[0]+U.range[1])/2;if(P._isScoped)$={lon:X,lat:te};else if(P._isClipped){$={lon:X,lat:te},K={lon:X,lat:te,roll:K.roll};var ae=I.type,se=g.lonaxisSpan[ae]/2||180,ce=g.lataxisSpan[ae]/2||90;Q=[X-se,X+se],Z=[te-ce,te+ce]}else $={lon:X,lat:te},K={lon:X,lat:K.lat,roll:K.roll}}H.center([$.lon-K.lon,$.lat-K.lat]).rotate([-K.lon,-K.lat,K.roll]).parallels(I.parallels);var fe=w(Q,Z);H.fitExtent(ne,fe);var pe=this.bounds=H.getBounds(fe),ge=this.fitScale=H.scale(),me=H.translate();if(P.fitbounds){var be=H.getBounds(w(F.range,U.range)),ke=Math.min((pe[1][0]-pe[0][0])/(be[1][0]-be[0][0]),(pe[1][1]-pe[0][1])/(be[1][1]-be[0][1]));isFinite(ke)?H.scale(ke*ge):o.warn("Something went wrong during"+this.id+"fitbounds computations.")}else H.scale(I.scale*ge);var ze=this.midPt=[(pe[0][0]+pe[1][0])/2,(pe[0][1]+pe[1][1])/2];if(H.translate([me[0]+(ze[0]-me[0]),me[1]+(ze[1]-me[1])]).clipExtent(pe),P._isAlbersUsa){var ve=H([$.lon,$.lat]),oe=H.translate();H.translate([oe[0]-(ve[0]-oe[0]),oe[1]-(ve[1]-oe[1])])}},S.updateBaseLayers=function(E,C){var O=this,P=O.topojson,z=O.layers,j=O.basePaths;function I(H){return H==="lonaxis"||H==="lataxis"}function N(H){return!!g.lineLayers[H]}function W(H){return!!g.fillLayers[H]}var F=(this.hasChoropleth?g.layersForChoropleth:g.layers).filter(function(H){return N(H)||W(H)?C["show"+H]:!I(H)||C[H].showgrid}),U=O.framework.selectAll(".layer").data(F,String);U.exit().each(function(H){delete z[H],delete j[H],M.select(this).remove()}),U.enter().append("g").attr("class",function(H){return"layer "+H}).each(function(H){var ne=z[H]=M.select(this);H==="bg"?O.bgRect=ne.append("rect").style("pointer-events","all"):I(H)?j[H]=ne.append("path").style("fill","none"):H==="backplot"?ne.append("g").classed("choroplethlayer",!0):H==="frontplot"?ne.append("g").classed("scatterlayer",!0):N(H)?j[H]=ne.append("path").style("fill","none").style("stroke-miterlimit",2):W(H)&&(j[H]=ne.append("path").style("stroke","none"))}),U.order(),U.each(function(H){var ne=j[H],$=g.layerNameToAdjective[H];H==="frame"?ne.datum(g.sphereSVG):N(H)||W(H)?ne.datum(_(P,P.objects[H])):I(H)&&ne.datum(function(K,Q,Z){var X,te,ae,se=Q[K],ce=g.scopeDefaults[Q.scope];K==="lonaxis"?(X=ce.lonaxisRange,te=ce.lataxisRange,ae=function(oe,ie){return[oe,ie]}):K==="lataxis"&&(X=ce.lataxisRange,te=ce.lonaxisRange,ae=function(oe,ie){return[ie,oe]});var fe={type:"linear",range:[X[0],X[1]-1e-6],tick0:se.tick0,dtick:se.dtick};l.setConvert(fe,Z);var pe=l.calcTicks(fe);Q.isScoped||K!=="lonaxis"||pe.pop();for(var ge=pe.length,me=new Array(ge),be=0;be<ge;be++)for(var ke=pe[be].x,ze=me[be]=[],ve=te[0];ve<te[1]+2.5;ve+=2.5)ze.push(ae(ke,ve));return{type:"MultiLineString",coordinates:me}}(H,C,E)).call(i.stroke,C[H].gridcolor).call(n.dashLine,C[H].griddash,C[H].gridwidth),N(H)?ne.call(i.stroke,C[$+"color"]).call(n.dashLine,"",C[$+"width"]):W(H)&&ne.call(i.fill,C[$+"color"])})},S.updateDims=function(E,C){var O=this.bounds,P=(C.framewidth||0)/2,z=O[0][0]-P,j=O[0][1]-P,I=O[1][0]-z+P,N=O[1][1]-j+P;n.setRect(this.clipRect,z,j,I,N),this.bgRect.call(n.setRect,z,j,I,N).call(i.fill,C.bgcolor),this.xaxis._offset=z,this.xaxis._length=I,this.yaxis._offset=j,this.yaxis._length=N},S.updateFx=function(E,C){var O=this,P=O.graphDiv,z=O.bgRect,j=E.dragmode,I=E.clickmode;if(!O.isStatic){var N={element:O.bgRect.node(),gd:P,plotinfo:{id:O.id,xaxis:O.xaxis,yaxis:O.yaxis,fillRangeItems:function(F,U){U.isRect?(F.range={})[O.id]=[W([U.xmin,U.ymin]),W([U.xmax,U.ymax])]:(F.lassoPoints={})[O.id]=U.map(W)}},xaxes:[O.xaxis],yaxes:[O.yaxis],subplot:O.id,clickFn:function(F){F===2&&x(P)}};j==="pan"?(z.node().onmousedown=null,z.call(v(O,C)),z.on("dblclick.zoom",function(){var F=O.viewInitial,U={};for(var H in F)U[O.id+"."+H]=F[H];f.call("_guiRelayout",P,U),P.emit("plotly_doubleclick",null)}),P._context._scrollZoom.geo||z.on("wheel.zoom",null)):j!=="select"&&j!=="lasso"||(z.on(".zoom",null),N.prepFn=function(F,U,H){c(F,U,H,N,j)},h.init(N)),z.on("mousemove",function(){var F=O.projection.invert(o.getPositionFromD3Event());if(!F)return h.unhover(P,M.event);O.xaxis.p2c=function(){return F[0]},O.yaxis.p2c=function(){return F[1]},r.hover(P,M.event,O.id)}),z.on("mouseout",function(){P._dragging||h.unhover(P,M.event)}),z.on("click",function(){j!=="select"&&j!=="lasso"&&(I.indexOf("select")>-1&&p(M.event,P,[O.xaxis],[O.yaxis],O.id,N),I.indexOf("event")>-1&&r.click(P,M.event))})}function W(F){return O.projection.invert([F[0]+O.xaxis._offset,F[1]+O.yaxis._offset])}},S.makeFramework=function(){var E=this,C=E.graphDiv,O=C._fullLayout,P="clip"+O._uid+E.id;E.clipDef=O._clips.append("clipPath").attr("id",P),E.clipRect=E.clipDef.append("rect"),E.framework=M.select(E.container).append("g").attr("class","geo "+E.id).call(n.setClipUrl,P,C),E.project=function(z){var j=E.projection(z);return j?[j[0]-E.xaxis._offset,j[1]-E.yaxis._offset]:[null,null]},E.xaxis={_id:"x",c2p:function(z){return E.project(z)[0]}},E.yaxis={_id:"y",c2p:function(z){return E.project(z)[1]}},E.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},l.setConvert(E.mockAxis,O)},S.saveViewInitial=function(E){var C,O=E.center||{},P=E.projection,z=P.rotation||{};this.viewInitial={fitbounds:E.fitbounds,"projection.scale":P.scale},C=E._isScoped?{"center.lon":O.lon,"center.lat":O.lat}:E._isClipped?{"projection.rotation.lon":z.lon,"projection.rotation.lat":z.lat}:{"center.lon":O.lon,"center.lat":O.lat,"projection.rotation.lon":z.lon},o.extendFlat(this.viewInitial,C)},S.render=function(E){this._hasMarkerAngles&&E?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},S._render=function(){var E,C=this.projection,O=C.getPath();function P(j){var I=C(j.lonlat);return I?t(I[0],I[1]):null}function z(j){return C.isLonLatOverEdges(j.lonlat)?"none":null}for(E in this.basePaths)this.basePaths[E].attr("d",O);for(E in this.dataPaths)this.dataPaths[E].attr("d",function(j){return O(j.geojson)});for(E in this.dataPoints)this.dataPoints[E].attr("display",z).attr("transform",P)}},10816:function(ee,R,e){var M=e(84888).KY,k=e(3400).counterRegex,s=e(43520),T="geo",b=k(T),f={};f[T]={valType:"subplotid",dflt:T,editType:"calc"},ee.exports={attr:T,name:T,idRoot:T,idRegex:b,attrRegex:b,attributes:f,layoutAttributes:e(40384),supplyLayoutDefaults:e(86920),plot:function(o){for(var t=o._fullLayout,i=o.calcdata,n=t._subplots[T],r=0;r<n.length;r++){var a=n[r],l=M(i,T,a),u=t[a]._subplot;u||(u=s({id:a,graphDiv:o,container:t._geolayer.node(),topojsonURL:o._context.topojsonURL,staticPlot:o._context.staticPlot}),t[a]._subplot=u),u.plot(l,t,o._promises)}},updateFx:function(o){for(var t=o._fullLayout,i=t._subplots[T],n=0;n<i.length;n++){var r=t[i[n]];r._subplot.updateFx(t,r)}},clean:function(o,t,i,n){for(var r=n._subplots[T]||[],a=0;a<r.length;a++){var l=r[a],u=n[l]._subplot;!t[l]&&u&&(u.framework.remove(),u.clipDef.remove())}}}},40384:function(ee,R,e){var M=e(22548),k=e(86968).u,s=e(98192).u,T=e(79552),b=e(67824).overrideAll,f=e(95376),o={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:M.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:s};(ee.exports=b({domain:k({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:f(T.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:f(T.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:M.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:T.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:T.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:T.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:T.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:M.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:M.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:M.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:M.background},lonaxis:o,lataxis:o},"plot","from-root")).uirevision={valType:"any",editType:"none"}},86920:function(ee,R,e){var M=e(3400),k=e(168),s=e(84888).op,T=e(79552),b=e(40384),f=T.axesNames;function o(t,i,n,r){var a=s(r.fullData,"geo",r.id).map(function(K){return K._expandedIndex}),l=n("resolution"),u=n("scope"),h=T.scopeDefaults[u],c=n("projection.type",h.projType),x=i._isAlbersUsa=c==="albers usa";x&&(u=i.scope="usa");var p=i._isScoped=u!=="world",v=i._isSatellite=c==="satellite",g=i._isConic=c.indexOf("conic")!==-1||c==="albers",y=i._isClipped=!!T.lonaxisSpan[c];if(t.visible===!1){var m=M.extendDeep({},i._template);m.showcoastlines=!1,m.showcountries=!1,m.showframe=!1,m.showlakes=!1,m.showland=!1,m.showocean=!1,m.showrivers=!1,m.showsubunits=!1,m.lonaxis&&(m.lonaxis.showgrid=!1),m.lataxis&&(m.lataxis.showgrid=!1),i._template=m}for(var _=n("visible"),d=0;d<f.length;d++){var S,w=f[d],E=[30,10][d];if(p)S=h[w+"Range"];else{var C=T[w+"Span"],O=(C[c]||C["*"])/2,P=n("projection.rotation."+w.substr(0,3),h.projRotate[d]);S=[P-O,P+O]}var z=n(w+".range",S);n(w+".tick0"),n(w+".dtick",E),n(w+".showgrid",!!_&&void 0)&&(n(w+".gridcolor"),n(w+".gridwidth"),n(w+".griddash")),i[w]._ax={type:"linear",_id:w.slice(0,3),_traceIndices:a,setScale:M.identity,c2l:M.identity,r2l:M.identity,autorange:!0,range:z.slice(),_m:1,_input:{}}}var j=i.lonaxis.range,I=i.lataxis.range,N=j[0],W=j[1];N>0&&W<0&&(W+=360);var F,U,H,ne=(N+W)/2;if(!x){var $=p?h.projRotate:[ne,0,0];F=n("projection.rotation.lon",$[0]),n("projection.rotation.lat",$[1]),n("projection.rotation.roll",$[2]),n("showcoastlines",!p&&_)&&(n("coastlinecolor"),n("coastlinewidth")),n("showocean",!!_&&void 0)&&n("oceancolor")}x?(U=-96.6,H=38.7):(U=p?ne:F,H=(I[0]+I[1])/2),n("center.lon",U),n("center.lat",H),v&&(n("projection.tilt"),n("projection.distance")),g&&n("projection.parallels",h.projParallels||[0,60]),n("projection.scale"),n("showland",!!_&&void 0)&&n("landcolor"),n("showlakes",!!_&&void 0)&&n("lakecolor"),n("showrivers",!!_&&void 0)&&(n("rivercolor"),n("riverwidth")),n("showcountries",p&&u!=="usa"&&_)&&(n("countrycolor"),n("countrywidth")),(u==="usa"||u==="north america"&&l===50)&&(n("showsubunits",_),n("subunitcolor"),n("subunitwidth")),p||n("showframe",_)&&(n("framecolor"),n("framewidth")),n("bgcolor"),n("fitbounds")&&(delete i.projection.scale,p?(delete i.center.lon,delete i.center.lat):y?(delete i.center.lon,delete i.center.lat,delete i.projection.rotation.lon,delete i.projection.rotation.lat,delete i.lonaxis.range,delete i.lataxis.range):(delete i.center.lon,delete i.center.lat,delete i.projection.rotation.lon))}ee.exports=function(t,i,n){k(t,i,n,{type:"geo",attributes:b,handleDefaults:o,fullData:n,partition:"y"})}},79248:function(ee,R,e){var M=e(33428),k=e(3400),s=e(24040),T=Math.PI/180,b=180/Math.PI,f={cursor:"pointer"},o={cursor:"auto"};function t(p,v){return M.behavior.zoom().translate(v.translate()).scale(v.scale())}function i(p,v,g){var y=p.id,m=p.graphDiv,_=m.layout,d=_[y],S=m._fullLayout,w=S[y],E={},C={};function O(P,z){E[y+"."+P]=k.nestedProperty(d,P).get(),s.call("_storeDirectGUIEdit",_,S._preGUI,E);var j=k.nestedProperty(w,P);j.get()!==z&&(j.set(z),k.nestedProperty(d,P).set(z),C[y+"."+P]=z)}g(O),O("projection.scale",v.scale()/p.fitScale),O("fitbounds",!1),m.emit("plotly_relayout",C)}function n(p,v){var g=t(0,v);function y(m){var _=v.invert(p.midPt);m("center.lon",_[0]),m("center.lat",_[1])}return g.on("zoomstart",function(){M.select(this).style(f)}).on("zoom",function(){v.scale(M.event.scale).translate(M.event.translate),p.render(!0);var m=v.invert(p.midPt);p.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":v.scale()/p.fitScale,"geo.center.lon":m[0],"geo.center.lat":m[1]})}).on("zoomend",function(){M.select(this).style(o),i(p,v,y)}),g}function r(p,v){var g,y,m,_,d,S,w,E,C,O=t(0,v);function P(j){return v.invert(j)}function z(j){var I=v.rotate(),N=v.invert(p.midPt);j("projection.rotation.lon",-I[0]),j("center.lon",N[0]),j("center.lat",N[1])}return O.on("zoomstart",function(){M.select(this).style(f),g=M.mouse(this),y=v.rotate(),m=v.translate(),_=y,d=P(g)}).on("zoom",function(){if(S=M.mouse(this),function(N){var W=P(N);if(!W)return!0;var F=v(W);return Math.abs(F[0]-N[0])>2||Math.abs(F[1]-N[1])>2}(g))return O.scale(v.scale()),void O.translate(v.translate());v.scale(M.event.scale),v.translate([m[0],M.event.translate[1]]),d?P(S)&&(E=P(S),w=[_[0]+(E[0]-d[0]),y[1],y[2]],v.rotate(w),_=w):d=P(g=S),C=!0,p.render(!0);var j=v.rotate(),I=v.invert(p.midPt);p.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":v.scale()/p.fitScale,"geo.center.lon":I[0],"geo.center.lat":I[1],"geo.projection.rotation.lon":-j[0]})}).on("zoomend",function(){M.select(this).style(o),C&&i(p,v,z)}),O}function a(p,v){var g;v.rotate(),v.scale();var y=t(0,v),m=function(w){for(var E=0,C=arguments.length,O=[];++E<C;)O.push(arguments[E]);var P=M.dispatch.apply(null,O);return P.of=function(z,j){return function(I){var N;try{N=I.sourceEvent=M.event,I.target=w,M.event=I,P[I.type].apply(z,j)}finally{M.event=N}}},P}(y,"zoomstart","zoom","zoomend"),_=0,d=y.on;function S(w){var E=v.rotate();w("projection.rotation.lon",-E[0]),w("projection.rotation.lat",-E[1])}return y.on("zoomstart",function(){M.select(this).style(f);var w,E,C,O,P,z,j,I,N,W,F,U=M.mouse(this),H=v.rotate(),ne=H,$=v.translate(),K=(E=.5*(w=H)[0]*T,C=.5*w[1]*T,O=.5*w[2]*T,P=Math.sin(E),z=Math.cos(E),j=Math.sin(C),I=Math.cos(C),N=Math.sin(O),[z*I*(W=Math.cos(O))+P*j*N,P*I*W-z*j*N,z*j*W+P*I*N,z*I*N-P*j*W]);g=l(v,U),d.call(y,"zoom",function(){var Q,Z,X,te,ae,se,ce,fe,pe,ge,me=M.mouse(this);if(v.scale(M.event.scale),g){if(l(v,me)){v.rotate(H).translate($);var be=l(v,me),ke=function(oe,ie){if(oe&&ie){var he=function(Me,Oe){return[Me[1]*Oe[2]-Me[2]*Oe[1],Me[2]*Oe[0]-Me[0]*Oe[2],Me[0]*Oe[1]-Me[1]*Oe[0]]}(oe,ie),Se=Math.sqrt(x(he,he)),ye=.5*Math.acos(Math.max(-1,Math.min(1,x(oe,ie)))),we=Math.sin(ye)/Se;return Se&&[Math.cos(ye),he[2]*we,-he[1]*we,he[0]*we]}}(g,be),ze=function(oe){return[Math.atan2(2*(oe[0]*oe[1]+oe[2]*oe[3]),1-2*(oe[1]*oe[1]+oe[2]*oe[2]))*b,Math.asin(Math.max(-1,Math.min(1,2*(oe[0]*oe[2]-oe[3]*oe[1]))))*b,Math.atan2(2*(oe[0]*oe[3]+oe[1]*oe[2]),1-2*(oe[2]*oe[2]+oe[3]*oe[3]))*b]}((X=(Q=K)[0],te=Q[1],ae=Q[2],se=Q[3],[X*(ce=(Z=ke)[0])-te*(fe=Z[1])-ae*(pe=Z[2])-se*(ge=Z[3]),X*fe+te*ce+ae*ge-se*pe,X*pe-te*ge+ae*ce+se*fe,X*ge+te*pe-ae*fe+se*ce])),ve=function(oe,ie,he){var Se=c(ie,2,oe[0]);Se=c(Se,1,oe[1]),Se=c(Se,0,oe[2]-he[2]);var ye,we,Me=ie[0],Oe=ie[1],Ie=ie[2],de=Se[0],_e=Se[1],Ae=Se[2],Pe=Math.atan2(Oe,Me)*b,Ee=Math.sqrt(Me*Me+Oe*Oe);Math.abs(_e)>Ee?(we=(_e>0?90:-90)-Pe,ye=0):(we=Math.asin(_e/Ee)*b-Pe,ye=Math.sqrt(Ee*Ee-_e*_e));var Fe=180-we-2*Pe,Ve=(Math.atan2(Ae,de)-Math.atan2(Ie,ye))*b,Ye=(Math.atan2(Ae,de)-Math.atan2(Ie,-ye))*b;return u(he[0],he[1],we,Ve)<=u(he[0],he[1],Fe,Ye)?[we,Ve,he[2]]:[Fe,Ye,he[2]]}(ze,g,ne);isFinite(ve[0])&&isFinite(ve[1])&&isFinite(ve[2])||(ve=ne),v.rotate(ve),ne=ve}}else g=l(v,U=me);m.of(this,arguments)({type:"zoom"})}),F=m.of(this,arguments),_++||F({type:"zoomstart"})}).on("zoomend",function(){var w;M.select(this).style(o),d.call(y,"zoom",null),w=m.of(this,arguments),--_||w({type:"zoomend"}),i(p,v,S)}).on("zoom.redraw",function(){p.render(!0);var w=v.rotate();p.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":v.scale()/p.fitScale,"geo.projection.rotation.lon":-w[0],"geo.projection.rotation.lat":-w[1]})}),M.rebind(y,m,"on")}function l(p,v){var g=p.invert(v);return g&&isFinite(g[0])&&isFinite(g[1])&&function(y){var m=y[0]*T,_=y[1]*T,d=Math.cos(_);return[d*Math.cos(m),d*Math.sin(m),Math.sin(_)]}(g)}function u(p,v,g,y){var m=h(g-p),_=h(y-v);return Math.sqrt(m*m+_*_)}function h(p){return(p%360+540)%360-180}function c(p,v,g){var y=g*T,m=p.slice(),_=v===0?1:0,d=v===2?1:2,S=Math.cos(y),w=Math.sin(y);return m[_]=p[_]*S-p[d]*w,m[d]=p[d]*S+p[_]*w,m}function x(p,v){for(var g=0,y=0,m=p.length;y<m;++y)g+=p[y]*v[y];return g}ee.exports=function(p,v){var g=p.projection;return(v._isScoped?n:v._isClipped?a:r)(p,g)}},84888:function(ee,R,e){var M=e(24040),k=e(33816).SUBPLOT_PATTERN;R.KY=function(s,T,b){var f=M.subplotsRegistry[T];if(!f)return[];for(var o=f.attr,t=[],i=0;i<s.length;i++){var n=s[i];n[0].trace[o]===b&&t.push(n)}return t},R._M=function(s,T,b){var f,o=[],t=[];if(!(f=typeof T=="string"?M.getModule(T).plot:typeof T=="function"?T:T.plot))return[o,s];for(var i=b,n=0;n<s.length;n++){var r=s[n],a=r[0].trace,l=a.zorder!==void 0;a.visible===!0&&a._length!==0&&(!a._module||a._module.plot!==f||l&&a.zorder!==i?t.push(r):o.push(r))}return[o,t]},R.op=function(s,T,b){if(!M.subplotsRegistry[T])return[];var f,o,t,i=M.subplotsRegistry[T].attr,n=[];if(T==="gl2d"){var r=b.match(k);o="x"+r[1],t="y"+r[2]}for(var a=0;a<s.length;a++)f=s[a],T==="gl2d"&&M.traceIs(f,"gl2d")?f[i[0]]===o&&f[i[1]]===t&&n.push(f):f[i]===b&&n.push(f);return n}},2428:function(ee,R,e){var M=e(62644),k=e(97264),s=e(29128),T=e(33816),b=e(89184);function f(o,t){this.element=o,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}ee.exports=function(o){var t=o.mouseContainer,i=o.glplot,n=new f(t,i);function r(){o.xaxis.autorange=!1,o.yaxis.autorange=!1}function a(l,u,h){var c,x,p=o.calcDataBox(),v=i.viewBox,g=n.lastPos[0],y=n.lastPos[1],m=T.MINDRAG*i.pixelRatio,_=T.MINZOOM*i.pixelRatio;function d(P,z,j){var I=Math.min(z,j),N=Math.max(z,j);I!==N?(p[P]=I,p[P+2]=N,n.dataBox=p,o.setRanges(p)):(o.selectBox.selectBox=[0,0,1,1],o.glplot.setDirty())}switch(u*=i.pixelRatio,h*=i.pixelRatio,h=v[3]-v[1]-h,o.fullLayout.dragmode){case"zoom":if(l){var S=u/(v[2]-v[0])*(p[2]-p[0])+p[0],w=h/(v[3]-v[1])*(p[3]-p[1])+p[1];n.boxInited||(n.boxStart[0]=S,n.boxStart[1]=w,n.dragStart[0]=u,n.dragStart[1]=h),n.boxEnd[0]=S,n.boxEnd[1]=w,n.boxInited=!0,n.boxEnabled||n.boxStart[0]===n.boxEnd[0]&&n.boxStart[1]===n.boxEnd[1]||(n.boxEnabled=!0);var E=Math.abs(n.dragStart[0]-u)<_,C=Math.abs(n.dragStart[1]-h)<_;if(!function(){for(var P=o.graphDiv._fullLayout._axisConstraintGroups,z=o.xaxis._id,j=o.yaxis._id,I=0;I<P.length;I++)if(P[I][z]!==-1){if(P[I][j]!==-1)return!0;break}return!1}()||E&&C)E&&(n.boxEnd[0]=n.boxStart[0]),C&&(n.boxEnd[1]=n.boxStart[1]);else{c=n.boxEnd[0]-n.boxStart[0],x=n.boxEnd[1]-n.boxStart[1];var O=(p[3]-p[1])/(p[2]-p[0]);Math.abs(c*O)>Math.abs(x)?(n.boxEnd[1]=n.boxStart[1]+Math.abs(c)*O*(x>=0?1:-1),n.boxEnd[1]<p[1]?(n.boxEnd[1]=p[1],n.boxEnd[0]=n.boxStart[0]+(p[1]-n.boxStart[1])/Math.abs(O)):n.boxEnd[1]>p[3]&&(n.boxEnd[1]=p[3],n.boxEnd[0]=n.boxStart[0]+(p[3]-n.boxStart[1])/Math.abs(O))):(n.boxEnd[0]=n.boxStart[0]+Math.abs(x)/O*(c>=0?1:-1),n.boxEnd[0]<p[0]?(n.boxEnd[0]=p[0],n.boxEnd[1]=n.boxStart[1]+(p[0]-n.boxStart[0])*Math.abs(O)):n.boxEnd[0]>p[2]&&(n.boxEnd[0]=p[2],n.boxEnd[1]=n.boxStart[1]+(p[2]-n.boxStart[0])*Math.abs(O)))}}else n.boxEnabled?(c=n.boxStart[0]!==n.boxEnd[0],x=n.boxStart[1]!==n.boxEnd[1],c||x?(c&&(d(0,n.boxStart[0],n.boxEnd[0]),o.xaxis.autorange=!1),x&&(d(1,n.boxStart[1],n.boxEnd[1]),o.yaxis.autorange=!1),o.relayoutCallback()):o.glplot.setDirty(),n.boxEnabled=!1,n.boxInited=!1):n.boxInited&&(n.boxInited=!1);break;case"pan":n.boxEnabled=!1,n.boxInited=!1,l?(n.panning||(n.dragStart[0]=u,n.dragStart[1]=h),Math.abs(n.dragStart[0]-u)<m&&(u=n.dragStart[0]),Math.abs(n.dragStart[1]-h)<m&&(h=n.dragStart[1]),c=(g-u)*(p[2]-p[0])/(i.viewBox[2]-i.viewBox[0]),x=(y-h)*(p[3]-p[1])/(i.viewBox[3]-i.viewBox[1]),p[0]+=c,p[2]+=c,p[1]+=x,p[3]+=x,o.setRanges(p),n.panning=!0,n.lastInputTime=Date.now(),r(),o.cameraChanged(),o.handleAnnotations()):n.panning&&(n.panning=!1,o.relayoutCallback())}n.lastPos[0]=u,n.lastPos[1]=h}return n.mouseListener=M(t,a),t.addEventListener("touchstart",function(l){var u=s(l.changedTouches[0],t);a(0,u[0],u[1]),a(1,u[0],u[1]),l.preventDefault()},!!b&&{passive:!1}),t.addEventListener("touchmove",function(l){l.preventDefault();var u=s(l.changedTouches[0],t);a(1,u[0],u[1]),l.preventDefault()},!!b&&{passive:!1}),t.addEventListener("touchend",function(l){a(0,n.lastPos[0],n.lastPos[1]),l.preventDefault()},!!b&&{passive:!1}),n.wheelListener=k(t,function(l,u){if(!o.scrollZoom)return!1;var h=o.calcDataBox(),c=i.viewBox,x=n.lastPos[0],p=n.lastPos[1],v=Math.exp(5*u/(c[3]-c[1])),g=x/(c[2]-c[0])*(h[2]-h[0])+h[0],y=p/(c[3]-c[1])*(h[3]-h[1])+h[1];return h[0]=(h[0]-g)*v+g,h[2]=(h[2]-g)*v+g,h[1]=(h[1]-y)*v+y,h[3]=(h[3]-y)*v+y,o.setRanges(h),n.lastInputTime=Date.now(),r(),o.cameraChanged(),o.handleAnnotations(),o.relayoutCallback(),!0},!0),n}},92568:function(ee,R,e){var M=e(54460),k=e(43080);function s(f){this.scene=f,this.gl=f.gl,this.pixelRatio=f.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var T=s.prototype,b=["xaxis","yaxis"];T.merge=function(f){var o,t,i,n,r,a,l,u,h,c,x;for(this.titleEnable=!1,this.backgroundColor=k(f.plot_bgcolor),c=0;c<2;++c){var p=(o=b[c]).charAt(0);for(i=(t=f[this.scene[o]._name]).title.text===this.scene.fullLayout._dfltTitle[p]?"":t.title.text,x=0;x<=2;x+=2)this.labelEnable[c+x]=!1,this.labels[c+x]=i,this.labelColor[c+x]=k(t.title.font.color),this.labelFont[c+x]=t.title.font.family,this.labelSize[c+x]=t.title.font.size,this.labelPad[c+x]=this.getLabelPad(o,t),this.tickEnable[c+x]=!1,this.tickColor[c+x]=k((t.tickfont||{}).color),this.tickAngle[c+x]=t.tickangle==="auto"?0:Math.PI*-t.tickangle/180,this.tickPad[c+x]=this.getTickPad(t),this.tickMarkLength[c+x]=0,this.tickMarkWidth[c+x]=t.tickwidth||0,this.tickMarkColor[c+x]=k(t.tickcolor),this.borderLineEnable[c+x]=!1,this.borderLineColor[c+x]=k(t.linecolor),this.borderLineWidth[c+x]=t.linewidth||0;l=this.hasSharedAxis(t),r=this.hasAxisInDfltPos(o,t)&&!l,a=this.hasAxisInAltrPos(o,t)&&!l,n=t.mirror||!1,u=l?String(n).indexOf("all")!==-1:!!n,h=l?n==="allticks":String(n).indexOf("ticks")!==-1,r?this.labelEnable[c]=!0:a&&(this.labelEnable[c+2]=!0),r?this.tickEnable[c]=t.showticklabels:a&&(this.tickEnable[c+2]=t.showticklabels),(r||u)&&(this.borderLineEnable[c]=t.showline),(a||u)&&(this.borderLineEnable[c+2]=t.showline),(r||h)&&(this.tickMarkLength[c]=this.getTickMarkLength(t)),(a||h)&&(this.tickMarkLength[c+2]=this.getTickMarkLength(t)),this.gridLineEnable[c]=t.showgrid,this.gridLineColor[c]=k(t.gridcolor),this.gridLineWidth[c]=t.gridwidth,this.zeroLineEnable[c]=t.zeroline,this.zeroLineColor[c]=k(t.zerolinecolor),this.zeroLineWidth[c]=t.zerolinewidth}},T.hasSharedAxis=function(f){var o=this.scene,t=o.fullLayout._subplots.gl2d;return M.findSubplotsWithAxis(t,f).indexOf(o.id)!==0},T.hasAxisInDfltPos=function(f,o){var t=o.side;return f==="xaxis"?t==="bottom":f==="yaxis"?t==="left":void 0},T.hasAxisInAltrPos=function(f,o){var t=o.side;return f==="xaxis"?t==="top":f==="yaxis"?t==="right":void 0},T.getLabelPad=function(f,o){var t=1.5,i=o.title.font.size,n=o.showticklabels;return f==="xaxis"?o.side==="top"?i*(t+(n?1:0))-10:i*(t+(n?.5:0))-10:f==="yaxis"?o.side==="right"?10+i*(t+(n?1:.5)):10+i*(t+(n?.5:0)):void 0},T.getTickPad=function(f){return f.ticks==="outside"?10+f.ticklen:15},T.getTickMarkLength=function(f){if(!f.ticks)return 0;var o=f.ticklen;return f.ticks==="inside"?-o:o},ee.exports=function(f){return new s(f)}},39952:function(ee,R,e){var M=e(67824).overrideAll,k=e(17188),s=e(64859),T=e(9616),b=e(33816),f=e(57952),o=e(65460),t=e(84888).op;R.name="gl2d",R.attr=["xaxis","yaxis"],R.idRoot=["x","y"],R.idRegex=b.idRegex,R.attrRegex=b.attrRegex,R.attributes=e(26720),R.supplyLayoutDefaults=function(i,n,r){n._has("cartesian")||f.supplyLayoutDefaults(i,n,r)},R.layoutAttrOverrides=M(f.layoutAttributes,"plot","from-root"),R.baseLayoutAttrOverrides=M({plot_bgcolor:s.plot_bgcolor,hoverlabel:o.hoverlabel},"plot","nested"),R.plot=function(i){for(var n=i._fullLayout,r=i._fullData,a=n._subplots.gl2d,l=0;l<a.length;l++){var u=a[l],h=n._plots[u],c=t(r,"gl2d",u),x=h._scene2d;x===void 0&&(x=new k({id:u,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio},n),h._scene2d=x),x.plot(c,i.calcdata,n,i.layout)}},R.clean=function(i,n,r,a){for(var l=a._subplots.gl2d||[],u=0;u<l.length;u++){var h=l[u],c=a._plots[h];c._scene2d&&t(i,"gl2d",h).length===0&&(c._scene2d.destroy(),delete a._plots[h])}f.clean.apply(this,arguments)},R.drawFramework=function(i){i._context.staticPlot||f.drawFramework(i)},R.toSVG=function(i){for(var n=i._fullLayout,r=n._subplots.gl2d,a=0;a<r.length;a++){var l=n._plots[r[a]]._scene2d,u=l.toImage("png");n._glimages.append("svg:image").attr({xmlns:T.svg,"xlink:href":u,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),l.destroy()}},R.updateFx=function(i){for(var n=i._fullLayout,r=n._subplots.gl2d,a=0;a<r.length;a++)n._plots[r[a]]._scene2d.updateFx(n.dragmode)}},17188:function(ee,R,e){var M,k,s=e(24040),T=e(54460),b=e(93024),f=e(67792).gl_plot2d,o=e(67792).gl_spikes2d,t=e(67792).gl_select_box,i=e(5408),n=e(92568),r=e(2428),a=e(16576),l=e(71888),u=l.enforce,h=l.clean,c=e(19280).doAutoRange,x=e(72760),p=x.drawMode,v=x.selectMode,g=["xaxis","yaxis"],y=e(33816).SUBPLOT_PATTERN;function m(d,S){this.container=d.container,this.graphDiv=d.graphDiv,this.pixelRatio=d.plotGlPixelRatio||window.devicePixelRatio,this.id=d.id,this.staticPlot=!!d.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(S),this.makeFramework(),this.stopped||(this.glplotOptions=n(this),this.glplotOptions.merge(S),this.glplot=f(this.glplotOptions),this.camera=r(this),this.traces={},this.spikes=o(this.glplot),this.selectBox=t(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}ee.exports=m;var _=m.prototype;_.makeFramework=function(){if(this.staticPlot){if(!(k||(M=document.createElement("canvas"),k=i({canvas:M,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=M,this.gl=k}else{var d=this.container.querySelector(".gl-canvas-focus"),S=i({canvas:d,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!S)return a(this),void(this.stopped=!0);this.canvas=d,this.gl=S}var w=this.canvas;w.style.width="100%",w.style.height="100%",w.style.position="absolute",w.style.top="0px",w.style.left="0px",w.style["pointer-events"]="none",this.updateSize(w);var E=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");E.style.position="absolute",E.style.top=E.style.left="0px",E.style.width=E.style.height="100%",E.style["z-index"]=20,E.style["pointer-events"]="none";var C=this.mouseContainer=document.createElement("div");C.style.position="absolute",C.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var O=this.container;O.appendChild(E),O.appendChild(C);var P=this;C.addEventListener("mouseout",function(){P.isMouseOver=!1,P.unhover()}),C.addEventListener("mouseover",function(){P.isMouseOver=!0})},_.toImage=function(d){d||(d="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(M),this.updateSize(this.canvas);var S=this.glplot.gl,w=S.drawingBufferWidth,E=S.drawingBufferHeight;S.clearColor(1,1,1,0),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),S.bindFramebuffer(S.FRAMEBUFFER,null);var C=new Uint8Array(w*E*4);S.readPixels(0,0,w,E,S.RGBA,S.UNSIGNED_BYTE,C);for(var O=0,P=E-1;O<P;++O,--P)for(var z=0;z<w;++z)for(var j=0;j<4;++j){var I=C[4*(w*O+z)+j];C[4*(w*O+z)+j]=C[4*(w*P+z)+j],C[4*(w*P+z)+j]=I}var N=document.createElement("canvas");N.width=w,N.height=E;var W,F=N.getContext("2d",{willReadFrequently:!0}),U=F.createImageData(w,E);switch(U.data.set(C),F.putImageData(U,0,0),d){case"jpeg":W=N.toDataURL("image/jpeg");break;case"webp":W=N.toDataURL("image/webp");break;default:W=N.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(M),W},_.updateSize=function(d){d||(d=this.canvas);var S=this.pixelRatio,w=this.fullLayout,E=w.width,C=w.height,O=0|Math.ceil(S*E),P=0|Math.ceil(S*C);return d.width===O&&d.height===P||(d.width=O,d.height=P),d},_.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var d=[T.calcTicks(this.xaxis),T.calcTicks(this.yaxis)],S=0;S<2;++S)for(var w=0;w<d[S].length;++w)d[S][w].text=d[S][w].text+"";return d},_.updateRefs=function(d){this.fullLayout=d;var S=this.id.match(y),w="xaxis"+S[1],E="yaxis"+S[2];this.xaxis=this.fullLayout[w],this.yaxis=this.fullLayout[E]},_.relayoutCallback=function(){var d=this.graphDiv,S=this.xaxis,w=this.yaxis,E=d.layout,C={},O=C[S._name+".range"]=S.range.slice(),P=C[w._name+".range"]=w.range.slice();C[S._name+".autorange"]=S.autorange,C[w._name+".autorange"]=w.autorange,s.call("_storeDirectGUIEdit",d.layout,d._fullLayout._preGUI,C);var z=E[S._name];z.range=O,z.autorange=S.autorange;var j=E[w._name];j.range=P,j.autorange=w.autorange,C.lastInputTime=this.camera.lastInputTime,d.emit("plotly_relayout",C)},_.cameraChanged=function(){var d=this.camera;this.glplot.setDataBox(this.calcDataBox());var S=this.computeTickMarks();(function(w,E){for(var C=0;C<2;++C){var O=w[C],P=E[C];if(O.length!==P.length)return!0;for(var z=0;z<O.length;++z)if(O[z].x!==P[z].x)return!0}return!1})(S,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=S,this.glplotOptions.dataBox=d.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},_.handleAnnotations=function(){for(var d=this.graphDiv,S=this.fullLayout.annotations,w=0;w<S.length;w++){var E=S[w];E.xref===this.xaxis._id&&E.yref===this.yaxis._id&&s.getComponentMethod("annotations","drawOne")(d,w)}},_.destroy=function(){if(this.glplot){var d=this.traces;d&&Object.keys(d).map(function(S){d[S].dispose(),delete d[S]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},_.plot=function(d,S,w){var E=this.glplot;this.updateRefs(w),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(d,S),this.updateFx(w.dragmode);var C=w.width,O=w.height;this.updateSize(this.canvas);var P=this.glplotOptions;P.merge(w),P.screenBox=[0,0,C,O];var z={_fullLayout:{_axisConstraintGroups:w._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:w._size}};h(z,this.xaxis),h(z,this.yaxis);var j,I,N=w._size,W=this.xaxis.domain,F=this.yaxis.domain;for(P.viewBox=[N.l+W[0]*N.w,N.b+F[0]*N.h,C-N.r-(1-W[1])*N.w,O-N.t-(1-F[1])*N.h],this.mouseContainer.style.width=N.w*(W[1]-W[0])+"px",this.mouseContainer.style.height=N.h*(F[1]-F[0])+"px",this.mouseContainer.height=N.h*(F[1]-F[0]),this.mouseContainer.style.left=N.l+W[0]*N.w+"px",this.mouseContainer.style.top=N.t+(1-F[1])*N.h+"px",I=0;I<2;++I)(j=this[g[I]])._length=P.viewBox[I+2]-P.viewBox[I],c(this.graphDiv,j),j.setScale();u(z),P.ticks=this.computeTickMarks(),P.dataBox=this.calcDataBox(),P.merge(w),E.update(P),this.glplot.draw()},_.calcDataBox=function(){var d=this.xaxis,S=this.yaxis,w=d.range,E=S.range,C=d.r2l,O=S.r2l;return[C(w[0]),O(E[0]),C(w[1]),O(E[1])]},_.setRanges=function(d){var S=this.xaxis,w=this.yaxis,E=S.l2r,C=w.l2r;S.range=[E(d[0]),E(d[2])],w.range=[C(d[1]),C(d[3])]},_.updateTraces=function(d,S){var w,E,C,O=Object.keys(this.traces);this.fullData=d;e:for(w=0;w<O.length;w++){var P=O[w],z=this.traces[P];for(E=0;E<d.length;E++)if((C=d[E]).uid===P&&C.type===z.type)continue e;z.dispose(),delete this.traces[P]}for(w=0;w<d.length;w++){C=d[w];var j=S[w],I=this.traces[C.uid];I?I.update(C,j):(I=C._module.plot(this,C,j),this.traces[C.uid]=I)}this.glplot.objects.sort(function(N,W){return N._trace.index-W._trace.index})},_.updateFx=function(d){v(d)||p(d)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor=d==="pan"?"move":d==="zoom"?"crosshair":null},_.emitPointAction=function(d,S){for(var w,E=d.trace.uid,C=d.pointIndex,O=0;O<this.fullData.length;O++)this.fullData[O].uid===E&&(w=this.fullData[O]);var P={x:d.traceCoord[0],y:d.traceCoord[1],curveNumber:w.index,pointNumber:C,data:w._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};b.appendArrayPointValue(P,w,C),this.graphDiv.emit(S,{points:[P]})},_.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var d=this.glplot,S=this.camera,w=S.mouseListener,E=this.lastButtonState===1&&w.buttons===0,C=this.fullLayout;this.lastButtonState=w.buttons,this.cameraChanged();var O,P=w.x*d.pixelRatio,z=this.canvas.height-d.pixelRatio*w.y;if(S.boxEnabled&&C.dragmode==="zoom"){this.selectBox.enabled=!0;for(var j=this.selectBox.selectBox=[Math.min(S.boxStart[0],S.boxEnd[0]),Math.min(S.boxStart[1],S.boxEnd[1]),Math.max(S.boxStart[0],S.boxEnd[0]),Math.max(S.boxStart[1],S.boxEnd[1])],I=0;I<2;I++)S.boxStart[I]===S.boxEnd[I]&&(j[I]=d.dataBox[I],j[I+2]=d.dataBox[I+2]);d.setDirty()}else if(!S.panning&&this.isMouseOver){this.selectBox.enabled=!1;var N=C._size,W=this.xaxis.domain,F=this.yaxis.domain,U=(O=d.pick(P/d.pixelRatio+N.l+W[0]*N.w,z/d.pixelRatio-(N.t+(1-F[1])*N.h)))&&O.object._trace.handlePick(O);if(U&&E&&this.emitPointAction(U,"plotly_click"),O&&O.object._trace.hoverinfo!=="skip"&&C.hovermode&&U&&(!this.lastPickResult||this.lastPickResult.traceUid!==U.trace.uid||this.lastPickResult.dataCoord[0]!==U.dataCoord[0]||this.lastPickResult.dataCoord[1]!==U.dataCoord[1])){var H=U;this.lastPickResult={traceUid:U.trace?U.trace.uid:null,dataCoord:U.dataCoord.slice()},this.spikes.update({center:O.dataCoord}),H.screenCoord=[((d.viewBox[2]-d.viewBox[0])*(O.dataCoord[0]-d.dataBox[0])/(d.dataBox[2]-d.dataBox[0])+d.viewBox[0])/d.pixelRatio,(this.canvas.height-(d.viewBox[3]-d.viewBox[1])*(O.dataCoord[1]-d.dataBox[1])/(d.dataBox[3]-d.dataBox[1])-d.viewBox[1])/d.pixelRatio],this.emitPointAction(U,"plotly_hover");var ne=this.fullData[H.trace.index]||{},$=H.pointIndex,K=b.castHoverinfo(ne,C,$);if(K&&K!=="all"){var Q=K.split("+");Q.indexOf("x")===-1&&(H.traceCoord[0]=void 0),Q.indexOf("y")===-1&&(H.traceCoord[1]=void 0),Q.indexOf("z")===-1&&(H.traceCoord[2]=void 0),Q.indexOf("text")===-1&&(H.textLabel=void 0),Q.indexOf("name")===-1&&(H.name=void 0)}b.loneHover({x:H.screenCoord[0],y:H.screenCoord[1],xLabel:this.hoverFormatter("xaxis",H.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",H.traceCoord[1]),zLabel:H.traceCoord[2],text:H.textLabel,name:H.name,color:b.castHoverOption(ne,$,"bgcolor")||H.color,borderColor:b.castHoverOption(ne,$,"bordercolor"),fontFamily:b.castHoverOption(ne,$,"font.family"),fontSize:b.castHoverOption(ne,$,"font.size"),fontColor:b.castHoverOption(ne,$,"font.color"),nameLength:b.castHoverOption(ne,$,"namelength"),textAlign:b.castHoverOption(ne,$,"align")},{container:this.svgContainer,gd:this.graphDiv})}}O||this.unhover(),d.draw()}},_.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),b.loneUnhover(this.svgContainer))},_.hoverFormatter=function(d,S){if(S!==void 0){var w=this[d];return T.tickText(w,w.c2l(S),"hover").text}}},12536:function(ee,R,e){var M=e(67824).overrideAll,k=e(65460),s=e(98432),T=e(84888).op,b=e(3400),f=e(9616),o="gl3d",t="scene";R.name=o,R.attr=t,R.idRoot=t,R.idRegex=R.attrRegex=b.counterRegex("scene"),R.attributes=e(6636),R.layoutAttributes=e(346),R.baseLayoutAttrOverrides=M({hoverlabel:k.hoverlabel},"plot","nested"),R.supplyLayoutDefaults=e(5208),R.plot=function(i){for(var n=i._fullLayout,r=i._fullData,a=n._subplots[o],l=0;l<a.length;l++){var u=a[l],h=T(r,o,u),c=n[u],x=c.camera,p=c._scene;p||(p=new s({id:u,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio,camera:x},n),c._scene=p),p.viewInitial||(p.viewInitial={up:{x:x.up.x,y:x.up.y,z:x.up.z},eye:{x:x.eye.x,y:x.eye.y,z:x.eye.z},center:{x:x.center.x,y:x.center.y,z:x.center.z}}),p.plot(h,n,i.layout)}},R.clean=function(i,n,r,a){for(var l=a._subplots[o]||[],u=0;u<l.length;u++){var h=l[u];!n[h]&&a[h]._scene&&(a[h]._scene.destroy(),a._infolayer&&a._infolayer.selectAll(".annotation-"+h).remove())}},R.toSVG=function(i){for(var n=i._fullLayout,r=n._subplots[o],a=n._size,l=0;l<r.length;l++){var u=n[r[l]],h=u.domain,c=u._scene,x=c.toImage("png");n._glimages.append("svg:image").attr({xmlns:f.svg,"xlink:href":x,x:a.l+a.w*h.x[0],y:a.t+a.h*(1-h.y[1]),width:a.w*(h.x[1]-h.x[0]),height:a.h*(h.y[1]-h.y[0]),preserveAspectRatio:"none"}),c.destroy()}},R.cleanId=function(i){if(i.match(/^scene[0-9]*$/)){var n=i.substr(5);return n==="1"&&(n=""),t+n}},R.updateFx=function(i){for(var n=i._fullLayout,r=n._subplots[o],a=0;a<r.length;a++)n[r[a]]._scene.updateFx(n.dragmode,n.hovermode)}},6636:function(ee){ee.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},86140:function(ee,R,e){var M=e(76308),k=e(94724),s=e(92880).extendFlat,T=e(67824).overrideAll;ee.exports=T({visible:k.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:M.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:k.color,categoryorder:k.categoryorder,categoryarray:k.categoryarray,title:{text:k.title.text,font:k.title.font},type:s({},k.type,{values:["-","linear","log","date","category"]}),autotypenumbers:k.autotypenumbers,autorange:k.autorange,autorangeoptions:{minallowed:k.autorangeoptions.minallowed,maxallowed:k.autorangeoptions.maxallowed,clipmin:k.autorangeoptions.clipmin,clipmax:k.autorangeoptions.clipmax,include:k.autorangeoptions.include,editType:"plot"},rangemode:k.rangemode,minallowed:k.minallowed,maxallowed:k.maxallowed,range:s({},k.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:k.minor.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,mirror:k.mirror,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,showticklabels:k.showticklabels,labelalias:k.labelalias,tickfont:k.tickfont,tickangle:k.tickangle,tickprefix:k.tickprefix,showtickprefix:k.showtickprefix,ticksuffix:k.ticksuffix,showticksuffix:k.showticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,minexponent:k.minexponent,separatethousands:k.separatethousands,tickformat:k.tickformat,tickformatstops:k.tickformatstops,hoverformat:k.hoverformat,showline:k.showline,linecolor:k.linecolor,linewidth:k.linewidth,showgrid:k.showgrid,gridcolor:s({},k.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:k.gridwidth,zeroline:k.zeroline,zerolinecolor:k.zerolinecolor,zerolinewidth:k.zerolinewidth,_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}},"plot","from-root")},64380:function(ee,R,e){var M=e(49760).mix,k=e(3400),s=e(31780),T=e(86140),b=e(14944),f=e(28336),o=["xaxis","yaxis","zaxis"];ee.exports=function(t,i,n){var r,a;function l(c,x){return k.coerce(r,a,T,c,x)}for(var u=0;u<o.length;u++){var h=o[u];r=t[h]||{},(a=s.newContainer(i,h))._id=h[0]+n.scene,a._name=h,b(r,a,l,n),f(r,a,l,{font:n.font,letter:h[0],data:n.data,showGrid:!0,noAutotickangles:!0,noTicklabelindex:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelshift:!0,noTicklabelstandoff:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,noInsiderange:!0,bgColor:n.bgColor,calendar:n.calendar},n.fullLayout),l("gridcolor",M(a.color,n.bgColor,72.72727272727273).toRgbString()),l("title.text",h[0]),a.setScale=k.noop,l("showspikes")&&(l("spikesides"),l("spikethickness"),l("spikecolor",a.color)),l("showaxeslabels"),l("showbackground")&&l("backgroundcolor")}}},44728:function(ee,R,e){var M=e(43080),k=e(3400),s=["xaxis","yaxis","zaxis"];function T(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickFontWeight=["normal","normal","normal","normal"],this.tickFontStyle=["normal","normal","normal","normal"],this.tickFontVariant=["normal","normal","normal","normal"],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelFontWeight=["normal","normal","normal","normal"],this.labelFontStyle=["normal","normal","normal","normal"],this.labelFontVariant=["normal","normal","normal","normal"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}T.prototype.merge=function(b,f){for(var o=this,t=0;t<3;++t){var i=f[s[t]];i.visible?(o.labels[t]=b._meta?k.templateString(i.title.text,b._meta):i.title.text,"font"in i.title&&(i.title.font.color&&(o.labelColor[t]=M(i.title.font.color)),i.title.font.family&&(o.labelFont[t]=i.title.font.family),i.title.font.size&&(o.labelSize[t]=i.title.font.size),i.title.font.weight&&(o.labelFontWeight[t]=i.title.font.weight),i.title.font.style&&(o.labelFontStyle[t]=i.title.font.style),i.title.font.variant&&(o.labelFontVariant[t]=i.title.font.variant)),"showline"in i&&(o.lineEnable[t]=i.showline),"linecolor"in i&&(o.lineColor[t]=M(i.linecolor)),"linewidth"in i&&(o.lineWidth[t]=i.linewidth),"showgrid"in i&&(o.gridEnable[t]=i.showgrid),"gridcolor"in i&&(o.gridColor[t]=M(i.gridcolor)),"gridwidth"in i&&(o.gridWidth[t]=i.gridwidth),i.type==="log"?o.zeroEnable[t]=!1:"zeroline"in i&&(o.zeroEnable[t]=i.zeroline),"zerolinecolor"in i&&(o.zeroLineColor[t]=M(i.zerolinecolor)),"zerolinewidth"in i&&(o.zeroLineWidth[t]=i.zerolinewidth),"ticks"in i&&i.ticks?o.lineTickEnable[t]=!0:o.lineTickEnable[t]=!1,"ticklen"in i&&(o.lineTickLength[t]=o._defaultLineTickLength[t]=i.ticklen),"tickcolor"in i&&(o.lineTickColor[t]=M(i.tickcolor)),"tickwidth"in i&&(o.lineTickWidth[t]=i.tickwidth),"tickangle"in i&&(o.tickAngle[t]=i.tickangle==="auto"?-3600:Math.PI*-i.tickangle/180),"showticklabels"in i&&(o.tickEnable[t]=i.showticklabels),"tickfont"in i&&(i.tickfont.color&&(o.tickColor[t]=M(i.tickfont.color)),i.tickfont.family&&(o.tickFont[t]=i.tickfont.family),i.tickfont.size&&(o.tickSize[t]=i.tickfont.size),i.tickfont.weight&&(o.tickFontWeight[t]=i.tickfont.weight),i.tickfont.style&&(o.tickFontStyle[t]=i.tickfont.style),i.tickfont.variant&&(o.tickFontVariant[t]=i.tickfont.variant)),"mirror"in i?["ticks","all","allticks"].indexOf(i.mirror)!==-1?(o.lineTickMirror[t]=!0,o.lineMirror[t]=!0):i.mirror===!0?(o.lineTickMirror[t]=!1,o.lineMirror[t]=!0):(o.lineTickMirror[t]=!1,o.lineMirror[t]=!1):o.lineMirror[t]=!1,"showbackground"in i&&i.showbackground!==!1?(o.backgroundEnable[t]=!0,o.backgroundColor[t]=M(i.backgroundcolor)):o.backgroundEnable[t]=!1):(o.tickEnable[t]=!1,o.labelEnable[t]=!1,o.lineEnable[t]=!1,o.lineTickEnable[t]=!1,o.gridEnable[t]=!1,o.zeroEnable[t]=!1,o.backgroundEnable[t]=!1)}},ee.exports=function(b,f){var o=new T;return o.merge(b,f),o}},5208:function(ee,R,e){var M=e(3400),k=e(76308),s=e(24040),T=e(168),b=e(64380),f=e(346),o=e(84888).op,t="gl3d";function i(n,r,a,l){for(var u=a("bgcolor"),h=k.combine(u,l.paper_bgcolor),c=["up","center","eye"],x=0;x<c.length;x++)a("camera."+c[x]+".x"),a("camera."+c[x]+".y"),a("camera."+c[x]+".z");a("camera.projection.type");var p=!!a("aspectratio.x")&&!!a("aspectratio.y")&&!!a("aspectratio.z"),v=a("aspectmode",p?"manual":"auto");p||(n.aspectratio=r.aspectratio={x:1,y:1,z:1},v==="manual"&&(r.aspectmode="auto"),n.aspectmode=r.aspectmode);var g=o(l.fullData,t,l.id);b(n,r,{font:l.font,scene:l.id,data:g,bgColor:h,calendar:l.calendar,autotypenumbersDflt:l.autotypenumbersDflt,fullLayout:l.fullLayout}),s.getComponentMethod("annotations3d","handleDefaults")(n,r,l);var y=l.getDfltFromLayout("dragmode");if(y!==!1&&!y)if(y="orbit",n.camera&&n.camera.up){var m=n.camera.up.x,_=n.camera.up.y,d=n.camera.up.z;d!==0&&(m&&_&&d?d/Math.sqrt(m*m+_*_+d*d)>.999&&(y="turntable"):y="turntable")}else y="turntable";a("dragmode",y),a("hovermode",l.getDfltFromLayout("hovermode"))}ee.exports=function(n,r,a){var l=r._basePlotModules.length>1;T(n,r,a,{type:t,attributes:f,handleDefaults:i,fullLayout:r,font:r.font,fullData:a,getDfltFromLayout:function(u){if(!l)return M.validate(n[u],f[u])?n[u]:void 0},autotypenumbersDflt:r.autotypenumbers,paper_bgcolor:r.paper_bgcolor,calendar:r.calendar})}},346:function(ee,R,e){var M=e(86140),k=e(86968).u,s=e(92880).extendFlat,T=e(3400).counterRegex;function b(f,o,t){return{x:{valType:"number",dflt:f,editType:"camera"},y:{valType:"number",dflt:o,editType:"camera"},z:{valType:"number",dflt:t,editType:"camera"},editType:"camera"}}ee.exports={_arrayAttrRegexps:[T("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:s(b(0,0,1),{}),center:s(b(0,0,0),{}),eye:s(b(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:k({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:M,yaxis:M,zaxis:M,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},9020:function(ee,R,e){var M=e(43080),k=["xaxis","yaxis","zaxis"];function s(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}s.prototype.merge=function(T){for(var b=0;b<3;++b){var f=T[k[b]];f.visible?(this.enabled[b]=f.showspikes,this.colors[b]=M(f.spikecolor),this.drawSides[b]=f.spikesides,this.lineWidth[b]=f.spikethickness):(this.enabled[b]=!1,this.drawSides[b]=!1)}},ee.exports=function(T){var b=new s;return b.merge(T),b}},87152:function(ee,R,e){ee.exports=function(b){for(var f=b.axesOptions,o=b.glplot.axesPixels,t=b.fullSceneLayout,i=[[],[],[]],n=0;n<3;++n){var r=t[s[n]];if(r._length=(o[n].hi-o[n].lo)*o[n].pixelsPerDataUnit/b.dataScale[n],Math.abs(r._length)===1/0||isNaN(r._length))i[n]=[];else{r._input_range=r.range.slice(),r.range[0]=o[n].lo/b.dataScale[n],r.range[1]=o[n].hi/b.dataScale[n],r._m=1/(b.dataScale[n]*o[n].pixelsPerDataUnit),r.range[0]===r.range[1]&&(r.range[0]-=1,r.range[1]+=1);var a=r.tickmode;if(r.tickmode==="auto"){r.tickmode="linear";var l=r.nticks||k.constrain(r._length/40,4,9);M.autoTicks(r,Math.abs(r.range[1]-r.range[0])/l)}for(var u=M.calcTicks(r,{msUTC:!0}),h=0;h<u.length;++h)u[h].x=u[h].x*b.dataScale[n],r.type==="date"&&(u[h].text=u[h].text.replace(/\<br\>/g," "));i[n]=u,r.tickmode=a}}for(f.ticks=i,n=0;n<3;++n)for(T[n]=.5*(b.glplot.bounds[0][n]+b.glplot.bounds[1][n]),h=0;h<2;++h)f.bounds[h][n]=b.glplot.bounds[h][n];b.contourLevels=function(c){for(var x=new Array(3),p=0;p<3;++p){for(var v=c[p],g=new Array(v.length),y=0;y<v.length;++y)g[y]=v[y].x;x[p]=g}return x}(i)};var M=e(54460),k=e(3400),s=["xaxis","yaxis","zaxis"],T=[0,0,0]},94424:function(ee){function R(e,M){var k,s,T=[0,0,0,0];for(k=0;k<4;++k)for(s=0;s<4;++s)T[s]+=e[4*k+s]*M[k];return T}ee.exports=function(e,M){return R(e.projection,R(e.view,R(e.model,[M[0],M[1],M[2],1])))}},98432:function(ee,R,e){var M,k,s=e(67792).gl_plot3d,T=s.createCamera,b=s.createScene,f=e(5408),o=e(89184),t=e(24040),i=e(3400),n=i.preserveDrawingBuffer(),r=e(54460),a=e(93024),l=e(43080),u=e(16576),h=e(94424),c=e(44728),x=e(9020),p=e(87152),v=e(19280).applyAutorangeOptions,g=!1;function y(w,E){var C=document.createElement("div"),O=w.container;this.graphDiv=w.graphDiv;var P=document.createElementNS("http://www.w3.org/2000/svg","svg");P.style.position="absolute",P.style.top=P.style.left="0px",P.style.width=P.style.height="100%",P.style["z-index"]=20,P.style["pointer-events"]="none",C.appendChild(P),this.svgContainer=P,C.id=w.id,C.style.position="absolute",C.style.top=C.style.left="0px",C.style.width=C.style.height="100%",O.appendChild(C),this.fullLayout=E,this.id=w.id||"scene",this.fullSceneLayout=E[this.id],this.plotArgs=[[],{},{}],this.axesOptions=c(E,E[this.id]),this.spikeOptions=x(E[this.id]),this.container=C,this.staticMode=!!w.staticPlot,this.pixelRatio=this.pixelRatio||w.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=t.getComponentMethod("annotations3d","convert"),this.drawAnnotations=t.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var m=y.prototype;m.prepareOptions=function(){var w=this,E={canvas:w.canvas,gl:w.gl,glOptions:{preserveDrawingBuffer:n,premultipliedAlpha:!0,antialias:!0},container:w.container,axes:w.axesOptions,spikes:w.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:w.camera,pixelRatio:w.pixelRatio};if(w.staticMode){if(!(k||(M=document.createElement("canvas"),k=f({canvas:M,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");E.gl=k,E.canvas=M}return E};var _=!0;m.tryCreatePlot=function(){var w=this,E=w.prepareOptions(),C=!0;try{w.glplot=b(E)}catch{if(w.staticMode||!_||n)C=!1;else{i.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{n=E.glOptions.preserveDrawingBuffer=!0,w.glplot=b(E)}catch{n=E.glOptions.preserveDrawingBuffer=!1,C=!1}}}return _=!1,C},m.initializeGLCamera=function(){var w=this,E=w.fullSceneLayout.camera,C=E.projection.type==="orthographic";w.camera=T(w.container,{center:[E.center.x,E.center.y,E.center.z],eye:[E.eye.x,E.eye.y,E.eye.z],up:[E.up.x,E.up.y,E.up.z],_ortho:C,zoomMin:.01,zoomMax:100,mode:"orbit"})},m.initializeGLPlot=function(){var w=this;if(w.initializeGLCamera(),!w.tryCreatePlot())return u(w);w.traces={},w.make4thDimension();var E=w.graphDiv,C=E.layout,O=function(){var z={};return w.isCameraChanged(C)&&(z[w.id+".camera"]=w.getCamera()),w.isAspectChanged(C)&&(z[w.id+".aspectratio"]=w.glplot.getAspectratio(),C[w.id].aspectmode!=="manual"&&(w.fullSceneLayout.aspectmode=C[w.id].aspectmode=z[w.id+".aspectmode"]="manual")),z},P=function(z){if(z.fullSceneLayout.dragmode!==!1){var j=O();z.saveLayout(C),z.graphDiv.emit("plotly_relayout",j)}};return w.glplot.canvas&&(w.glplot.canvas.addEventListener("mouseup",function(){P(w)}),w.glplot.canvas.addEventListener("touchstart",function(){g=!0}),w.glplot.canvas.addEventListener("wheel",function(z){if(E._context._scrollZoom.gl3d){if(w.camera._ortho){var j=z.deltaX>z.deltaY?1.1:.9090909090909091,I=w.glplot.getAspectratio();w.glplot.setAspectratio({x:j*I.x,y:j*I.y,z:j*I.z})}P(w)}},!!o&&{passive:!1}),w.glplot.canvas.addEventListener("mousemove",function(){if(w.fullSceneLayout.dragmode!==!1&&w.camera.mouseListener.buttons!==0){var z=O();w.graphDiv.emit("plotly_relayouting",z)}}),w.staticMode||w.glplot.canvas.addEventListener("webglcontextlost",function(z){E&&E.emit&&E.emit("plotly_webglcontextlost",{event:z,layer:w.id})},!1)),w.glplot.oncontextloss=function(){w.recoverContext()},w.glplot.onrender=function(){w.render()},!0},m.render=function(){var w,E=this,C=E.graphDiv,O=E.svgContainer,P=E.container.getBoundingClientRect();C._fullLayout._calcInverseTransform(C);var z=C._fullLayout._invScaleX,j=C._fullLayout._invScaleY,I=P.width*z,N=P.height*j;O.setAttributeNS(null,"viewBox","0 0 "+I+" "+N),O.setAttributeNS(null,"width",I),O.setAttributeNS(null,"height",N),p(E),E.glplot.axes.update(E.axesOptions);for(var W=Object.keys(E.traces),F=null,U=E.glplot.selection,H=0;H<W.length;++H)(w=E.traces[W[H]]).data.hoverinfo!=="skip"&&w.handlePick(U)&&(F=w),w.setContourLevels&&w.setContourLevels();function ne(me,be,ke){var ze=E.fullSceneLayout[me+"axis"];return ze.type!=="log"&&(be=ze.d2l(be)),r.hoverLabelText(ze,be,ke)}if(F!==null){var $=h(E.glplot.cameraParams,U.dataCoordinate);w=F.data;var K,Q=C._fullData[w.index],Z=U.index,X={xLabel:ne("x",U.traceCoordinate[0],w.xhoverformat),yLabel:ne("y",U.traceCoordinate[1],w.yhoverformat),zLabel:ne("z",U.traceCoordinate[2],w.zhoverformat)},te=a.castHoverinfo(Q,E.fullLayout,Z),ae=(te||"").split("+"),se=te&&te==="all";Q.hovertemplate||se||(ae.indexOf("x")===-1&&(X.xLabel=void 0),ae.indexOf("y")===-1&&(X.yLabel=void 0),ae.indexOf("z")===-1&&(X.zLabel=void 0),ae.indexOf("text")===-1&&(U.textLabel=void 0),ae.indexOf("name")===-1&&(F.name=void 0));var ce=[];w.type==="cone"||w.type==="streamtube"?(X.uLabel=ne("x",U.traceCoordinate[3],w.uhoverformat),(se||ae.indexOf("u")!==-1)&&ce.push("u: "+X.uLabel),X.vLabel=ne("y",U.traceCoordinate[4],w.vhoverformat),(se||ae.indexOf("v")!==-1)&&ce.push("v: "+X.vLabel),X.wLabel=ne("z",U.traceCoordinate[5],w.whoverformat),(se||ae.indexOf("w")!==-1)&&ce.push("w: "+X.wLabel),X.normLabel=U.traceCoordinate[6].toPrecision(3),(se||ae.indexOf("norm")!==-1)&&ce.push("norm: "+X.normLabel),w.type==="streamtube"&&(X.divergenceLabel=U.traceCoordinate[7].toPrecision(3),(se||ae.indexOf("divergence")!==-1)&&ce.push("divergence: "+X.divergenceLabel)),U.textLabel&&ce.push(U.textLabel),K=ce.join("<br>")):w.type==="isosurface"||w.type==="volume"?(X.valueLabel=r.hoverLabelText(E._mockAxis,E._mockAxis.d2l(U.traceCoordinate[3]),w.valuehoverformat),ce.push("value: "+X.valueLabel),U.textLabel&&ce.push(U.textLabel),K=ce.join("<br>")):K=U.textLabel;var fe={x:U.traceCoordinate[0],y:U.traceCoordinate[1],z:U.traceCoordinate[2],data:Q._input,fullData:Q,curveNumber:Q.index,pointNumber:Z};a.appendArrayPointValue(fe,Q,Z),w._module.eventData&&(fe=Q._module.eventData(fe,U,Q,{},Z));var pe={points:[fe]};if(E.fullSceneLayout.hovermode){var ge=[];a.loneHover({trace:Q,x:(.5+.5*$[0]/$[3])*I,y:(.5-.5*$[1]/$[3])*N,xLabel:X.xLabel,yLabel:X.yLabel,zLabel:X.zLabel,text:K,name:F.name,color:a.castHoverOption(Q,Z,"bgcolor")||F.color,borderColor:a.castHoverOption(Q,Z,"bordercolor"),fontFamily:a.castHoverOption(Q,Z,"font.family"),fontSize:a.castHoverOption(Q,Z,"font.size"),fontColor:a.castHoverOption(Q,Z,"font.color"),nameLength:a.castHoverOption(Q,Z,"namelength"),textAlign:a.castHoverOption(Q,Z,"align"),hovertemplate:i.castOption(Q,Z,"hovertemplate"),hovertemplateLabels:i.extendFlat({},fe,X),eventData:[fe]},{container:O,gd:C,inOut_bbox:ge}),fe.bbox=ge[0]}U.distance<5&&(U.buttons||g)?C.emit("plotly_click",pe):C.emit("plotly_hover",pe),this.oldEventData=pe}else a.loneUnhover(O),this.oldEventData&&C.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;E.drawAnnotations(E)},m.recoverContext=function(){var w=this;w.glplot.dispose();var E=function(){w.glplot.gl.isContextLost()?requestAnimationFrame(E):w.initializeGLPlot()?w.plot.apply(w,w.plotArgs):i.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(E)};var d=["xaxis","yaxis","zaxis"];function S(w,E,C){for(var O=w.fullSceneLayout,P=0;P<3;P++){var z=d[P],j=z.charAt(0),I=O[z],N=E[j],W=E[j+"calendar"],F=E["_"+j+"length"];if(i.isArrayOrTypedArray(N))for(var U,H=0;H<(F||N.length);H++)if(i.isArrayOrTypedArray(N[H]))for(var ne=0;ne<N[H].length;++ne)U=I.d2l(N[H][ne],0,W),!isNaN(U)&&isFinite(U)&&(C[0][P]=Math.min(C[0][P],U),C[1][P]=Math.max(C[1][P],U));else U=I.d2l(N[H],0,W),!isNaN(U)&&isFinite(U)&&(C[0][P]=Math.min(C[0][P],U),C[1][P]=Math.max(C[1][P],U));else C[0][P]=Math.min(C[0][P],0),C[1][P]=Math.max(C[1][P],F-1)}}m.plot=function(w,E,C){var O=this;if(O.plotArgs=[w,E,C],!O.glplot.contextLost){var P,z,j,I,N,W,F=E[O.id],U=C[O.id];O.fullLayout=E,O.fullSceneLayout=F,O.axesOptions.merge(E,F),O.spikeOptions.merge(F),O.setViewport(F),O.updateFx(F.dragmode,F.hovermode),O.camera.enableWheel=O.graphDiv._context._scrollZoom.gl3d,O.glplot.setClearColor(l(F.bgcolor)),O.setConvert(N),w?Array.isArray(w)||(w=[w]):w=[];var H=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(j=0;j<w.length;++j)(P=w[j]).visible===!0&&P._length!==0&&S(this,P,H);(function(Me,Oe){for(var Ie=Me.fullSceneLayout,de=Ie.annotations||[],_e=0;_e<3;_e++)for(var Ae=d[_e],Pe=Ae.charAt(0),Ee=Ie[Ae],Fe=0;Fe<de.length;Fe++){var Ve=de[Fe];if(Ve.visible){var Ye=Ee.r2l(Ve[Pe]);!isNaN(Ye)&&isFinite(Ye)&&(Oe[0][_e]=Math.min(Oe[0][_e],Ye),Oe[1][_e]=Math.max(Oe[1][_e],Ye))}}})(this,H);var ne=[1,1,1];for(I=0;I<3;++I)H[1][I]===H[0][I]?ne[I]=1:ne[I]=1/(H[1][I]-H[0][I]);for(O.dataScale=ne,O.convertAnnotations(this),j=0;j<w.length;++j)(P=w[j]).visible===!0&&P._length!==0&&((z=O.traces[P.uid])?z.data.type===P.type?z.update(P):(z.dispose(),z=P._module.plot(this,P),O.traces[P.uid]=z):(z=P._module.plot(this,P),O.traces[P.uid]=z),z.name=P.name);var $=Object.keys(O.traces);e:for(j=0;j<$.length;++j){for(I=0;I<w.length;++I)if(w[I].uid===$[j]&&w[I].visible===!0&&w[I]._length!==0)continue e;(z=O.traces[$[j]]).dispose(),delete O.traces[$[j]]}O.glplot.objects.sort(function(Me,Oe){return Me._trace.data.index-Oe._trace.data.index});var K,Q=[[0,0,0],[0,0,0]],Z=[],X={};for(j=0;j<3;++j){var te;if((W=(N=F[d[j]]).type)in X?(X[W].acc*=ne[j],X[W].count+=1):X[W]={acc:ne[j],count:1},N.autorange){Q[0][j]=1/0,Q[1][j]=-1/0;var ae=O.glplot.objects,se=O.fullSceneLayout.annotations||[],ce=N._name.charAt(0);for(I=0;I<ae.length;I++){var fe=ae[I],pe=fe.bounds,ge=fe._trace.data._pad||0;fe.constructor.name==="ErrorBars"&&N._lowerLogErrorBound?Q[0][j]=Math.min(Q[0][j],N._lowerLogErrorBound):Q[0][j]=Math.min(Q[0][j],pe[0][j]/ne[j]-ge),Q[1][j]=Math.max(Q[1][j],pe[1][j]/ne[j]+ge)}for(I=0;I<se.length;I++){var me=se[I];if(me.visible){var be=N.r2l(me[ce]);Q[0][j]=Math.min(Q[0][j],be),Q[1][j]=Math.max(Q[1][j],be)}}if("rangemode"in N&&N.rangemode==="tozero"&&(Q[0][j]=Math.min(Q[0][j],0),Q[1][j]=Math.max(Q[1][j],0)),Q[0][j]>Q[1][j])Q[0][j]=-1,Q[1][j]=1;else{var ke=Q[1][j]-Q[0][j];Q[0][j]-=ke/32,Q[1][j]+=ke/32}if(te=[Q[0][j],Q[1][j]],te=v(te,N),Q[0][j]=te[0],Q[1][j]=te[1],N.isReversed()){var ze=Q[0][j];Q[0][j]=Q[1][j],Q[1][j]=ze}}else te=N.range,Q[0][j]=N.r2l(te[0]),Q[1][j]=N.r2l(te[1]);Q[0][j]===Q[1][j]&&(Q[0][j]-=1,Q[1][j]+=1),Z[j]=Q[1][j]-Q[0][j],N.range=[Q[0][j],Q[1][j]],N.limitRange(),O.glplot.setBounds(j,{min:N.range[0]*ne[j],max:N.range[1]*ne[j]})}var ve=F.aspectmode;if(ve==="cube")K=[1,1,1];else if(ve==="manual"){var oe=F.aspectratio;K=[oe.x,oe.y,oe.z]}else{if(ve!=="auto"&&ve!=="data")throw new Error("scene.js aspectRatio was not one of the enumerated types");var ie=[1,1,1];for(j=0;j<3;++j){var he=X[W=(N=F[d[j]]).type];ie[j]=Math.pow(he.acc,1/he.count)/ne[j]}K=ve==="data"||Math.max.apply(null,ie)/Math.min.apply(null,ie)<=4?ie:[1,1,1]}F.aspectratio.x=U.aspectratio.x=K[0],F.aspectratio.y=U.aspectratio.y=K[1],F.aspectratio.z=U.aspectratio.z=K[2],O.glplot.setAspectratio(F.aspectratio),O.viewInitial.aspectratio||(O.viewInitial.aspectratio={x:F.aspectratio.x,y:F.aspectratio.y,z:F.aspectratio.z}),O.viewInitial.aspectmode||(O.viewInitial.aspectmode=F.aspectmode);var Se=F.domain||null,ye=E._size||null;if(Se&&ye){var we=O.container.style;we.position="absolute",we.left=ye.l+Se.x[0]*ye.w+"px",we.top=ye.t+(1-Se.y[1])*ye.h+"px",we.width=ye.w*(Se.x[1]-Se.x[0])+"px",we.height=ye.h*(Se.y[1]-Se.y[0])+"px"}O.glplot.redraw()}},m.destroy=function(){var w=this;w.glplot&&(w.camera.mouseListener.enabled=!1,w.container.removeEventListener("wheel",w.camera.wheelListener),w.camera=null,w.glplot.dispose(),w.container.parentNode.removeChild(w.container),w.glplot=null)},m.getCamera=function(){var w,E=this;return E.camera.view.recalcMatrix(E.camera.view.lastT()),{up:{x:(w=E.camera).up[0],y:w.up[1],z:w.up[2]},center:{x:w.center[0],y:w.center[1],z:w.center[2]},eye:{x:w.eye[0],y:w.eye[1],z:w.eye[2]},projection:{type:w._ortho===!0?"orthographic":"perspective"}}},m.setViewport=function(w){var E,C=this,O=w.camera;C.camera.lookAt.apply(this,[[(E=O).eye.x,E.eye.y,E.eye.z],[E.center.x,E.center.y,E.center.z],[E.up.x,E.up.y,E.up.z]]),C.glplot.setAspectratio(w.aspectratio),O.projection.type==="orthographic"!==C.camera._ortho&&(C.glplot.redraw(),C.glplot.clearRGBA(),C.glplot.dispose(),C.initializeGLPlot())},m.isCameraChanged=function(w){var E=this.getCamera(),C=i.nestedProperty(w,this.id+".camera").get();function O(I,N,W,F){var U=["up","center","eye"],H=["x","y","z"];return N[U[W]]&&I[U[W]][H[F]]===N[U[W]][H[F]]}var P=!1;if(C===void 0)P=!0;else{for(var z=0;z<3;z++)for(var j=0;j<3;j++)if(!O(E,C,z,j)){P=!0;break}(!C.projection||E.projection&&E.projection.type!==C.projection.type)&&(P=!0)}return P},m.isAspectChanged=function(w){var E=this.glplot.getAspectratio(),C=i.nestedProperty(w,this.id+".aspectratio").get();return C===void 0||C.x!==E.x||C.y!==E.y||C.z!==E.z},m.saveLayout=function(w){var E,C,O,P,z,j,I=this,N=I.fullLayout,W=I.isCameraChanged(w),F=I.isAspectChanged(w),U=W||F;if(U){var H={};W&&(E=I.getCamera(),O=(C=i.nestedProperty(w,I.id+".camera")).get(),H[I.id+".camera"]=O),F&&(P=I.glplot.getAspectratio(),j=(z=i.nestedProperty(w,I.id+".aspectratio")).get(),H[I.id+".aspectratio"]=j),t.call("_storeDirectGUIEdit",w,N._preGUI,H),W&&(C.set(E),i.nestedProperty(N,I.id+".camera").set(E)),F&&(z.set(P),i.nestedProperty(N,I.id+".aspectratio").set(P),I.glplot.redraw())}return U},m.updateFx=function(w,E){var C=this,O=C.camera;if(O)if(w==="orbit")O.mode="orbit",O.keyBindingMode="rotate";else if(w==="turntable"){O.up=[0,0,1],O.mode="turntable",O.keyBindingMode="rotate";var P=C.graphDiv,z=P._fullLayout,j=C.fullSceneLayout.camera,I=j.up.x,N=j.up.y,W=j.up.z;if(W/Math.sqrt(I*I+N*N+W*W)<.999){var F=C.id+".camera.up",U={x:0,y:0,z:1},H={};H[F]=U;var ne=P.layout;t.call("_storeDirectGUIEdit",ne,z._preGUI,H),j.up=U,i.nestedProperty(ne,F).set(U)}}else O.keyBindingMode=w;C.fullSceneLayout.hovermode=E},m.toImage=function(w){var E=this;w||(w="png"),E.staticMode&&E.container.appendChild(M),E.glplot.redraw();var C=E.glplot.gl,O=C.drawingBufferWidth,P=C.drawingBufferHeight;C.bindFramebuffer(C.FRAMEBUFFER,null);var z=new Uint8Array(O*P*4);C.readPixels(0,0,O,P,C.RGBA,C.UNSIGNED_BYTE,z),function(F,U,H){for(var ne=0,$=H-1;ne<$;++ne,--$)for(var K=0;K<U;++K)for(var Q=0;Q<4;++Q){var Z=4*(U*ne+K)+Q,X=4*(U*$+K)+Q,te=F[Z];F[Z]=F[X],F[X]=te}}(z,O,P),function(F,U,H){for(var ne=0;ne<H;++ne)for(var $=0;$<U;++$){var K=4*(U*ne+$),Q=F[K+3];if(Q>0)for(var Z=255/Q,X=0;X<3;++X)F[K+X]=Math.min(Z*F[K+X],255)}}(z,O,P);var j=document.createElement("canvas");j.width=O,j.height=P;var I,N=j.getContext("2d",{willReadFrequently:!0}),W=N.createImageData(O,P);switch(W.data.set(z),N.putImageData(W,0,0),w){case"jpeg":I=j.toDataURL("image/jpeg");break;case"webp":I=j.toDataURL("image/webp");break;default:I=j.toDataURL("image/png")}return E.staticMode&&E.container.removeChild(M),I},m.setConvert=function(){for(var w=0;w<3;w++){var E=this.fullSceneLayout[d[w]];r.setConvert(E,this.fullLayout),E.setScale=i.noop}},m.make4thDimension=function(){var w=this,E=w.graphDiv._fullLayout;w._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},r.setConvert(w._mockAxis,E)},ee.exports=y},52094:function(ee){ee.exports=function(R,e,M,k){k=k||R.length;for(var s=new Array(k),T=0;T<k;T++)s[T]=[R[T],e[T],M[T]];return s}},64859:function(ee,R,e){var M=e(25376),k=e(85656),s=e(22548),T=e(92872),b=e(34200),f=e(66741),o=e(92880).extendFlat,t=M({editType:"calc"});t.family.dflt='"Open Sans", verdana, arial, sans-serif',t.size.dflt=12,t.color.dflt=s.defaultLine,ee.exports={font:t,title:{text:{valType:"string",editType:"layoutstyle"},font:M({editType:"layoutstyle"}),subtitle:{text:{valType:"string",editType:"layoutstyle"},font:M({editType:"layoutstyle"}),editType:"layoutstyle"},xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:o(f({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:s.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:s.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:s.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:T.newshape,activeshape:T.activeshape,newselection:b.newselection,activeselection:b.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:o({},k.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:M({editType:"layoutstyle"})}}},47552:function(ee,R,e){var M=e(95376),k="1.13.4",s=' <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',T=[' <a target="_blank" href="https://carto.com/">Carto</a>',s].join(" "),b=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),f={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:s,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:b,tiles:["https://tiles.stadiamaps.com/tiles/stamen_terrain/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:b,tiles:["https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://tiles.stadiamaps.com/tiles/stamen_watercolor/{z}/{x}/{y}.jpg?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},o=M(f);ee.exports={requiredVersion:k,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:f,styleValuesNonMapbox:o,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install @plotly/mapbox-gl@"+k+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",o.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},89032:function(ee,R,e){var M=e(3400);ee.exports=function(k,s){var T=k.split(" "),b=T[0],f=T[1],o=M.isArrayOrTypedArray(s)?M.mean(s):s,t=.5+o/100,i=1.5+o/100,n=["",""],r=[0,0];switch(b){case"top":n[0]="top",r[1]=-i;break;case"bottom":n[0]="bottom",r[1]=i}switch(f){case"left":n[1]="right",r[0]=-t;break;case"right":n[1]="left",r[0]=t}return{anchor:n[0]&&n[1]?n.join("-"):n[0]?n[0]:n[1]?n[1]:"center",offset:r}}},33688:function(ee,R,e){var M=e(3480),k=e(3400),s=k.strTranslate,T=k.strScale,b=e(84888).KY,f=e(9616),o=e(33428),t=e(43616),i=e(72736),n=e(14440),r="mapbox",a=R.constants=e(47552);function l(u){return typeof u=="string"&&(a.styleValuesMapbox.indexOf(u)!==-1||u.indexOf("mapbox://")===0||u.indexOf("stamen")===0)}R.name=r,R.attr="subplot",R.idRoot=r,R.idRegex=R.attrRegex=k.counterRegex(r),R.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},R.layoutAttributes=e(5232),R.supplyLayoutDefaults=e(5976),R.plot=function(u){var h=u._fullLayout,c=u.calcdata,x=h._subplots[r];if(M.version!==a.requiredVersion)throw new Error(a.wrongVersionErrorMsg);var p=function(d,S){var w=d._fullLayout;if(d._context.mapboxAccessToken==="")return"";for(var E=[],C=[],O=!1,P=!1,z=0;z<S.length;z++){var j=w[S[z]],I=j.accesstoken;l(j.style)&&(I?k.pushUnique(E,I):(l(j._input.style)&&(k.error("Uses Mapbox map style, but did not set an access token."),O=!0),P=!0)),I&&k.pushUnique(C,I)}if(P){var N=O?a.noAccessTokenErrorMsg:a.missingStyleErrorMsg;throw k.error(N),new Error(N)}return E.length?(E.length>1&&k.warn(a.multipleTokensErrorMsg),E[0]):(C.length&&k.log(["Listed mapbox access token(s)",C.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(u,x);M.accessToken=p;for(var v=0;v<x.length;v++){var g=x[v],y=b(c,r,g),m=h[g],_=m._subplot;_||(_=new n(u,g),h[g]._subplot=_),_.viewInitial||(_.viewInitial={center:k.extendFlat({},m.center),zoom:m.zoom,bearing:m.bearing,pitch:m.pitch}),_.plot(y,h,u._promises)}},R.clean=function(u,h,c,x){for(var p=x._subplots[r]||[],v=0;v<p.length;v++){var g=p[v];!h[g]&&x[g]._subplot&&x[g]._subplot.destroy()}},R.toSVG=function(u){for(var h=u._fullLayout,c=h._subplots[r],x=h._size,p=0;p<c.length;p++){var v=h[c[p]],g=v.domain,y=v._subplot.toImage("png");h._glimages.append("svg:image").attr({xmlns:f.svg,"xlink:href":y,x:x.l+x.w*g.x[0],y:x.t+x.h*(1-g.y[1]),width:x.w*(g.x[1]-g.x[0]),height:x.h*(g.y[1]-g.y[0]),preserveAspectRatio:"none"});var m=o.select(v._subplot.div);if(m.select(".mapboxgl-ctrl-logo").node().offsetParent!==null){var _=h._glimages.append("g");_.attr("transform",s(x.l+x.w*g.x[0]+10,x.t+x.h*(1-g.y[0])-31)),_.append("path").attr("d",a.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),_.append("path").attr("d",a.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),_.append("path").attr("d",a.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),_.append("polygon").attr("points",a.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var d=m.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),S=h._glimages.append("g"),w=S.append("text");w.text(d).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":d});var E=t.bBox(w.node()),C=x.w*(g.x[1]-g.x[0]);if(E.width>C/2){var O=d.split("|").join("<br>");w.text(O).attr("data-unformatted",O).call(i.convertToTspans,u),E=t.bBox(w.node())}w.attr("transform",s(-3,8-E.height)),S.insert("rect",".static-attribution").attr({x:-E.width-6,y:-E.height-3,width:E.width+6,height:E.height+3,fill:"rgba(255, 255, 255, 0.75)"});var P=1;E.width+6>C&&(P=C/(E.width+6));var z=[x.l+x.w*g.x[1],x.t+x.h*(1-g.y[0])];S.attr("transform",s(z[0],z[1])+T(P))}},R.updateFx=function(u){for(var h=u._fullLayout,c=h._subplots[r],x=0;x<c.length;x++)h[c[x]]._subplot.updateFx(h)}},22360:function(ee,R,e){var M=e(3400),k=e(72736).sanitizeHTML,s=e(89032),T=e(47552);function b(i,n){this.subplot=i,this.uid=i.uid+"-"+n,this.index=n,this.idSource="source-"+this.uid,this.idLayer=T.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var f=b.prototype;function o(i){if(!i.visible)return!1;var n=i.source;if(Array.isArray(n)&&n.length>0){for(var r=0;r<n.length;r++)if(typeof n[r]!="string"||n[r].length===0)return!1;return!0}return M.isPlainObject(n)||typeof n=="string"&&n.length>0}function t(i){var n={},r={};switch(i.type){case"circle":M.extendFlat(r,{"circle-radius":i.circle.radius,"circle-color":i.color,"circle-opacity":i.opacity});break;case"line":M.extendFlat(r,{"line-width":i.line.width,"line-color":i.color,"line-opacity":i.opacity,"line-dasharray":i.line.dash});break;case"fill":M.extendFlat(r,{"fill-color":i.color,"fill-outline-color":i.fill.outlinecolor,"fill-opacity":i.opacity});break;case"symbol":var a=i.symbol,l=s(a.textposition,a.iconsize);M.extendFlat(n,{"icon-image":a.icon+"-15","icon-size":a.iconsize/10,"text-field":a.text,"text-size":a.textfont.size,"text-anchor":l.anchor,"text-offset":l.offset,"symbol-placement":a.placement}),M.extendFlat(r,{"icon-color":i.color,"text-color":a.textfont.color,"text-opacity":i.opacity});break;case"raster":M.extendFlat(r,{"raster-fade-duration":0,"raster-opacity":i.opacity})}return{layout:n,paint:r}}f.update=function(i){this.visible?this.needsNewImage(i)?this.updateImage(i):this.needsNewSource(i)?(this.removeLayer(),this.updateSource(i),this.updateLayer(i)):this.needsNewLayer(i)?this.updateLayer(i):this.updateStyle(i):(this.updateSource(i),this.updateLayer(i)),this.visible=o(i)},f.needsNewImage=function(i){return this.subplot.map.getSource(this.idSource)&&this.sourceType==="image"&&i.sourcetype==="image"&&(this.source!==i.source||JSON.stringify(this.coordinates)!==JSON.stringify(i.coordinates))},f.needsNewSource=function(i){return this.sourceType!==i.sourcetype||JSON.stringify(this.source)!==JSON.stringify(i.source)||this.layerType!==i.type},f.needsNewLayer=function(i){return this.layerType!==i.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},f.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},f.updateImage=function(i){this.subplot.map.getSource(this.idSource).updateImage({url:i.source,coordinates:i.coordinates});var n=this.findFollowingMapboxLayerId(this.lookupBelow());n!==null&&this.subplot.map.moveLayer(this.idLayer,n)},f.updateSource=function(i){var n=this.subplot.map;if(n.getSource(this.idSource)&&n.removeSource(this.idSource),this.sourceType=i.sourcetype,this.source=i.source,o(i)){var r=function(a){var l,u=a.sourcetype,h=a.source,c={type:u};return u==="geojson"?l="data":u==="vector"?l=typeof h=="string"?"url":"tiles":u==="raster"?(l="tiles",c.tileSize=256):u==="image"&&(l="url",c.coordinates=a.coordinates),c[l]=h,a.sourceattribution&&(c.attribution=k(a.sourceattribution)),c}(i);n.addSource(this.idSource,r)}},f.findFollowingMapboxLayerId=function(i){if(i==="traces")for(var n=this.subplot.getMapLayers(),r=0;r<n.length;r++){var a=n[r].id;if(typeof a=="string"&&a.indexOf(T.traceLayerPrefix)===0){i=a;break}}return i},f.updateLayer=function(i){var n=this.subplot,r=t(i),a=this.lookupBelow(),l=this.findFollowingMapboxLayerId(a);this.removeLayer(),o(i)&&n.addLayer({id:this.idLayer,source:this.idSource,"source-layer":i.sourcelayer||"",type:i.type,minzoom:i.minzoom,maxzoom:i.maxzoom,layout:r.layout,paint:r.paint},l),this.layerType=i.type,this.below=a},f.updateStyle=function(i){if(o(i)){var n=t(i);this.subplot.setOptions(this.idLayer,"setLayoutProperty",n.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",n.paint)}},f.removeLayer=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer)},f.dispose=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer),i.getSource(this.idSource)&&i.removeSource(this.idSource)},ee.exports=function(i,n,r){var a=new b(i,n);return a.update(r),a}},5232:function(ee,R,e){var M=e(3400),k=e(76308).defaultLine,s=e(86968).u,T=e(25376),b=e(52904).textposition,f=e(67824).overrideAll,o=e(31780).templatedArray,t=e(47552),i=T({noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0});i.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(ee.exports=f({_arrayAttrRegexps:[M.counterRegex("mapbox",".layers",!0)],domain:s({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:t.styleValuesMapbox.concat(t.styleValuesNonMapbox),dflt:t.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:o("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:k},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:k}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:i,textposition:M.extendFlat({},b,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},5976:function(ee,R,e){var M=e(3400),k=e(168),s=e(51272),T=e(5232);function b(o,t,i,n){i("accesstoken",n.accessToken),i("style"),i("center.lon"),i("center.lat"),i("zoom"),i("bearing"),i("pitch");var r=i("bounds.west"),a=i("bounds.east"),l=i("bounds.south"),u=i("bounds.north");r!==void 0&&a!==void 0&&l!==void 0&&u!==void 0||delete t.bounds,s(o,t,{name:"layers",handleItemDefaults:f}),t._input=o}function f(o,t){function i(u,h){return M.coerce(o,t,T.layers,u,h)}if(i("visible")){var n,r=i("sourcetype"),a=r==="raster"||r==="image";i("source"),i("sourceattribution"),r==="vector"&&i("sourcelayer"),r==="image"&&i("coordinates"),a&&(n="raster");var l=i("type",n);a&&l!=="raster"&&(l=t.type="raster",M.log("Source types *raster* and *image* must drawn *raster* layer type.")),i("below"),i("color"),i("opacity"),i("minzoom"),i("maxzoom"),l==="circle"&&i("circle.radius"),l==="line"&&(i("line.width"),i("line.dash")),l==="fill"&&i("fill.outlinecolor"),l==="symbol"&&(i("symbol.icon"),i("symbol.iconsize"),i("symbol.text"),M.coerceFont(i,"symbol.textfont",void 0,{noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}),i("symbol.textposition"),i("symbol.placement"))}}ee.exports=function(o,t,i){k(o,t,i,{type:"mapbox",attributes:T,handleDefaults:b,partition:"y",accessToken:t._mapboxAccessToken})}},14440:function(ee,R,e){var M=e(3480),k=e(3400),s=e(27144),T=e(24040),b=e(54460),f=e(86476),o=e(93024),t=e(72760),i=t.drawMode,n=t.selectMode,r=e(22676).prepSelect,a=e(22676).clearOutline,l=e(22676).clearSelectionsCache,u=e(22676).selectOnClick,h=e(47552),c=e(22360);function x(_,d){this.id=d,this.gd=_;var S=_._fullLayout,w=_._context;this.container=S._glcontainer.node(),this.isStatic=w.staticPlot,this.uid=S._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(S),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var p=x.prototype;p.plot=function(_,d,S){var w,E=this,C=d[E.id];E.map&&C.accesstoken!==E.accessToken&&(E.map.remove(),E.map=null,E.styleObj=null,E.traceHash={},E.layerList=[]),w=E.map?new Promise(function(O,P){E.updateMap(_,d,O,P)}):new Promise(function(O,P){E.createMap(_,d,O,P)}),S.push(w)},p.createMap=function(_,d,S,w){var E=this,C=d[E.id],O=E.styleObj=g(C.style,d);E.accessToken=C.accesstoken;var P=C.bounds,z=P?[[P.west,P.south],[P.east,P.north]]:null,j=E.map=new M.Map({container:E.div,style:O.style,center:m(C.center),zoom:C.zoom,bearing:C.bearing,pitch:C.pitch,maxBounds:z,interactive:!E.isStatic,preserveDrawingBuffer:E.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new M.AttributionControl({compact:!0}));j._canvas.style.left="0px",j._canvas.style.top="0px",E.rejectOnError(w),E.isStatic||E.initFx(_,d);var I=[];I.push(new Promise(function(N){j.once("load",N)})),I=I.concat(s.fetchTraceGeoData(_)),Promise.all(I).then(function(){E.fillBelowLookup(_,d),E.updateData(_),E.updateLayout(d),E.resolveOnRender(S)}).catch(w)},p.updateMap=function(_,d,S,w){var E=this,C=E.map,O=d[this.id];E.rejectOnError(w);var P=[],z=g(O.style,d);JSON.stringify(E.styleObj)!==JSON.stringify(z)&&(E.styleObj=z,C.setStyle(z.style),E.traceHash={},P.push(new Promise(function(j){C.once("styledata",j)}))),P=P.concat(s.fetchTraceGeoData(_)),Promise.all(P).then(function(){E.fillBelowLookup(_,d),E.updateData(_),E.updateLayout(d),E.resolveOnRender(S)}).catch(w)},p.fillBelowLookup=function(_,d){var S,w,E=d[this.id].layers,C=this.belowLookup={},O=!1;for(S=0;S<_.length;S++){var P=_[S][0].trace,z=P._module;typeof P.below=="string"?w=P.below:z.getBelow&&(w=z.getBelow(P,this)),w===""&&(O=!0),C["trace-"+P.uid]=w||""}for(S=0;S<E.length;S++){var j=E[S];w=typeof j.below=="string"?j.below:O?"traces":"",C["layout-"+S]=w}var I,N,W={};for(I in C)W[w=C[I]]?W[w].push(I):W[w]=[I];for(w in W){var F=W[w];if(F.length>1)for(S=0;S<F.length;S++)(I=F[S]).indexOf("trace-")===0?(N=I.split("trace-")[1],this.traceHash[N]&&(this.traceHash[N].below=null)):I.indexOf("layout-")===0&&(N=I.split("layout-")[1],this.layerList[N]&&(this.layerList[N].below=null))}};var v={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function g(_,d){var S={};if(k.isPlainObject(_))S.id=_.id,S.style=_;else if(typeof _=="string")if(S.id=_,h.styleValuesMapbox.indexOf(_)!==-1)S.style=y(_);else if(h.stylesNonMapbox[_]){S.style=h.stylesNonMapbox[_];var w=S.style.sources["plotly-"+_],E=w?w.tiles:void 0;E&&E[0]&&E[0].slice(-9)==="?api_key="&&(E[0]+=d._mapboxAccessToken)}else S.style=_;else S.id=h.styleValueDflt,S.style=y(h.styleValueDflt);return S.transition={duration:0,delay:0},S}function y(_){return h.styleUrlPrefix+_+"-"+h.styleUrlSuffix}function m(_){return[_.lon,_.lat]}p.updateData=function(_){var d,S,w,E,C=this.traceHash,O=_.slice().sort(function(N,W){return v[N[0].trace.type]-v[W[0].trace.type]});for(w=0;w<O.length;w++){var P=O[w],z=!1;(d=C[(S=P[0].trace).uid])&&(d.type===S.type?(d.update(P),z=!0):d.dispose()),!z&&S._module&&(C[S.uid]=S._module.plot(this,P))}var j=Object.keys(C);e:for(w=0;w<j.length;w++){var I=j[w];for(E=0;E<_.length;E++)if(I===(S=_[E][0].trace).uid)continue e;(d=C[I]).dispose(),delete C[I]}},p.updateLayout=function(_){var d=this.map,S=_[this.id];this.dragging||this.wheeling||(d.setCenter(m(S.center)),d.setZoom(S.zoom),d.setBearing(S.bearing),d.setPitch(S.pitch)),this.updateLayers(_),this.updateFramework(_),this.updateFx(_),this.map.resize(),this.gd._context._scrollZoom.mapbox?d.scrollZoom.enable():d.scrollZoom.disable()},p.resolveOnRender=function(_){var d=this.map;d.on("render",function S(){d.loaded()&&(d.off("render",S),setTimeout(_,10))})},p.rejectOnError=function(_){var d=this.map;function S(){_(new Error(h.mapOnErrorMsg))}d.once("error",S),d.once("style.error",S),d.once("source.error",S),d.once("tile.error",S),d.once("layer.error",S)},p.createFramework=function(_){var d=this,S=d.div=document.createElement("div");S.id=d.uid,S.style.position="absolute",d.container.appendChild(S),d.xaxis={_id:"x",c2p:function(w){return d.project(w).x}},d.yaxis={_id:"y",c2p:function(w){return d.project(w).y}},d.updateFramework(_),d.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},b.setConvert(d.mockAxis,_)},p.initFx=function(_,d){var S=this,w=S.gd,E=S.map;function C(){o.loneUnhover(d._hoverlayer)}function O(){var P=S.getView();w.emit("plotly_relayouting",S.getViewEditsWithDerived(P))}E.on("moveend",function(P){if(S.map){var z=w._fullLayout;if(P.originalEvent||S.wheeling){var j=z[S.id];T.call("_storeDirectGUIEdit",w.layout,z._preGUI,S.getViewEdits(j));var I=S.getView();j._input.center=j.center=I.center,j._input.zoom=j.zoom=I.zoom,j._input.bearing=j.bearing=I.bearing,j._input.pitch=j.pitch=I.pitch,w.emit("plotly_relayout",S.getViewEditsWithDerived(I))}P.originalEvent&&P.originalEvent.type==="mouseup"?S.dragging=!1:S.wheeling&&(S.wheeling=!1),z._rehover&&z._rehover()}}),E.on("wheel",function(){S.wheeling=!0}),E.on("mousemove",function(P){var z=S.div.getBoundingClientRect(),j=[P.originalEvent.offsetX,P.originalEvent.offsetY];P.target.getBoundingClientRect=function(){return z},S.xaxis.p2c=function(){return E.unproject(j).lng},S.yaxis.p2c=function(){return E.unproject(j).lat},w._fullLayout._rehover=function(){w._fullLayout._hoversubplot===S.id&&w._fullLayout[S.id]&&o.hover(w,P,S.id)},o.hover(w,P,S.id),w._fullLayout._hoversubplot=S.id}),E.on("dragstart",function(){S.dragging=!0,C()}),E.on("zoomstart",C),E.on("mouseout",function(){w._fullLayout._hoversubplot=null}),E.on("drag",O),E.on("zoom",O),E.on("dblclick",function(){var P=w._fullLayout[S.id];T.call("_storeDirectGUIEdit",w.layout,w._fullLayout._preGUI,S.getViewEdits(P));var z=S.viewInitial;E.setCenter(m(z.center)),E.setZoom(z.zoom),E.setBearing(z.bearing),E.setPitch(z.pitch);var j=S.getView();P._input.center=P.center=j.center,P._input.zoom=P.zoom=j.zoom,P._input.bearing=P.bearing=j.bearing,P._input.pitch=P.pitch=j.pitch,w.emit("plotly_doubleclick",null),w.emit("plotly_relayout",S.getViewEditsWithDerived(j))}),S.clearOutline=function(){l(S.dragOptions),a(S.dragOptions.gd)},S.onClickInPanFn=function(P){return function(z){var j=w._fullLayout.clickmode;j.indexOf("select")>-1&&u(z.originalEvent,w,[S.xaxis],[S.yaxis],S.id,P),j.indexOf("event")>-1&&o.click(w,z.originalEvent)}}},p.updateFx=function(_){var d=this,S=d.map,w=d.gd;if(!d.isStatic){var E,C=_.dragmode;E=function(z,j){j.isRect?(z.range={})[d.id]=[P([j.xmin,j.ymin]),P([j.xmax,j.ymax])]:(z.lassoPoints={})[d.id]=j.map(P)};var O=d.dragOptions;d.dragOptions=k.extendDeep(O||{},{dragmode:_.dragmode,element:d.div,gd:w,plotinfo:{id:d.id,domain:_[d.id].domain,xaxis:d.xaxis,yaxis:d.yaxis,fillRangeItems:E},xaxes:[d.xaxis],yaxes:[d.yaxis],subplot:d.id}),S.off("click",d.onClickInPanHandler),n(C)||i(C)?(S.dragPan.disable(),S.on("zoomstart",d.clearOutline),d.dragOptions.prepFn=function(z,j,I){r(z,j,I,d.dragOptions,C)},f.init(d.dragOptions)):(S.dragPan.enable(),S.off("zoomstart",d.clearOutline),d.div.onmousedown=null,d.div.ontouchstart=null,d.div.removeEventListener("touchstart",d.div._ontouchstart),d.onClickInPanHandler=d.onClickInPanFn(d.dragOptions),S.on("click",d.onClickInPanHandler))}function P(z){var j=d.map.unproject(z);return[j.lng,j.lat]}},p.updateFramework=function(_){var d=_[this.id].domain,S=_._size,w=this.div.style;w.width=S.w*(d.x[1]-d.x[0])+"px",w.height=S.h*(d.y[1]-d.y[0])+"px",w.left=S.l+d.x[0]*S.w+"px",w.top=S.t+(1-d.y[1])*S.h+"px",this.xaxis._offset=S.l+d.x[0]*S.w,this.xaxis._length=S.w*(d.x[1]-d.x[0]),this.yaxis._offset=S.t+(1-d.y[1])*S.h,this.yaxis._length=S.h*(d.y[1]-d.y[0])},p.updateLayers=function(_){var d,S=_[this.id].layers,w=this.layerList;if(S.length!==w.length){for(d=0;d<w.length;d++)w[d].dispose();for(w=this.layerList=[],d=0;d<S.length;d++)w.push(c(this,d,S[d]))}else for(d=0;d<S.length;d++)w[d].update(S[d])},p.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},p.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},p.setOptions=function(_,d,S){for(var w in S)this.map[d](_,w,S[w])},p.getMapLayers=function(){return this.map.getStyle().layers},p.addLayer=function(_,d){var S=this.map;if(typeof d=="string"){if(d==="")return void S.addLayer(_,d);for(var w=this.getMapLayers(),E=0;E<w.length;E++)if(d===w[E].id)return void S.addLayer(_,d);k.warn(["Trying to add layer with *below* value",d,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}S.addLayer(_)},p.project=function(_){return this.map.project(new M.LngLat(_[0],_[1]))},p.getView=function(){var _=this.map,d=_.getCenter(),S={lon:d.lng,lat:d.lat},w=_.getCanvas(),E=parseInt(w.style.width),C=parseInt(w.style.height);return{center:S,zoom:_.getZoom(),bearing:_.getBearing(),pitch:_.getPitch(),_derived:{coordinates:[_.unproject([0,0]).toArray(),_.unproject([E,0]).toArray(),_.unproject([E,C]).toArray(),_.unproject([0,C]).toArray()]}}},p.getViewEdits=function(_){for(var d=this.id,S=["center","zoom","bearing","pitch"],w={},E=0;E<S.length;E++){var C=S[E];w[d+"."+C]=_[C]}return w},p.getViewEditsWithDerived=function(_){var d=this.id,S=this.getViewEdits(_);return S[d+"._derived"]=_._derived,S},ee.exports=x},66741:function(ee){ee.exports=function(R){var e=R.editType;return{t:{valType:"number",dflt:0,editType:e},r:{valType:"number",dflt:0,editType:e},b:{valType:"number",dflt:0,editType:e},l:{valType:"number",dflt:0,editType:e},editType:e}}},7316:function(ee,R,e){var M=e(33428),k=e(94336).m_,s=e(57624).SO,T=e(38248),b=e(83160),f=e(24040),o=e(73060),t=e(31780),i=e(3400),n=e(76308),r=e(39032).BADNUM,a=e(79811),l=e(1936).clearOutline,u=e(55308),h=e(85656),c=e(16672),x=e(84888)._M,p=i.relinkPrivateKeys,v=i._,g=ee.exports={};i.extendFlat(g,f),g.attributes=e(45464),g.attributes.type.values=g.allTypes,g.fontAttrs=e(25376),g.layoutAttributes=e(64859);var y=g.transformsRegistry,m=e(62460);g.executeAPICommand=m.executeAPICommand,g.computeAPICommandBindings=m.computeAPICommandBindings,g.manageCommandObserver=m.manageCommandObserver,g.hasSimpleAPICommandBindings=m.hasSimpleAPICommandBindings,g.redrawText=function(F){return F=i.getGraphDiv(F),new Promise(function(U){setTimeout(function(){F._fullLayout&&(f.getComponentMethod("annotations","draw")(F),f.getComponentMethod("legend","draw")(F),f.getComponentMethod("colorbar","draw")(F),U(g.previousPromises(F)))},300)})},g.resize=function(F){var U;F=i.getGraphDiv(F);var H=new Promise(function(ne,$){F&&!i.isHidden(F)||$(new Error("Resize must be passed a displayed plot div element.")),F._redrawTimer&&clearTimeout(F._redrawTimer),F._resolveResize&&(U=F._resolveResize),F._resolveResize=ne,F._redrawTimer=setTimeout(function(){if(!F.layout||F.layout.width&&F.layout.height||i.isHidden(F))ne(F);else{delete F.layout.width,delete F.layout.height;var K=F.changed;F.autoplay=!0,f.call("relayout",F,{autosize:!0}).then(function(){F.changed=K,F._resolveResize===ne&&(delete F._resolveResize,ne(F))})}},100)});return U&&U(H),H},g.previousPromises=function(F){if((F._promises||[]).length)return Promise.all(F._promises).then(function(){F._promises=[]})},g.addLinks=function(F){if(F._context.showLink||F._context.showSources){var U=F._fullLayout,H=i.ensureSingle(U._paper,"text","js-plot-link-container",function(X){X.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:n.defaultLine,"pointer-events":"all"}).each(function(){var te=M.select(this);te.append("tspan").classed("js-link-to-tool",!0),te.append("tspan").classed("js-link-spacer",!0),te.append("tspan").classed("js-sourcelinks",!0)})}),ne=H.node(),$={y:U._paper.attr("height")-9};document.body.contains(ne)&&ne.getComputedTextLength()>=U.width-20?($["text-anchor"]="start",$.x=5):($["text-anchor"]="end",$.x=U._paper.attr("width")-7),H.attr($);var K=H.select(".js-link-to-tool"),Q=H.select(".js-link-spacer"),Z=H.select(".js-sourcelinks");F._context.showSources&&F._context.showSources(F),F._context.showLink&&function(X,te){te.text("");var ae=te.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(X._context.linkText+" ");if(X._context.sendData)ae.on("click",function(){g.sendDataToCloud(X)});else{var se=window.location.pathname.split("/"),ce=window.location.search;ae.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+se[2].split(".")[0]+"/"+se[1]+ce})}}(F,K),Q.text(K.text()&&Z.text()?" - ":"")}},g.sendDataToCloud=function(F){var U=(window.PLOTLYENV||{}).BASE_URL||F._context.plotlyServerURL;if(U){F.emit("plotly_beforeexport");var H=M.select(F).append("div").attr("id","hiddenform").style("display","none"),ne=H.append("form").attr({action:U+"/external",method:"post",target:"_blank"});return ne.append("input").attr({type:"text",name:"data"}).node().value=g.graphJson(F,!1,"keepdata"),ne.node().submit(),H.remove(),F.emit("plotly_afterexport"),!1}};var _=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],d=["year","month","dayMonth","dayMonthYear"];function S(F,U){var H=F._context.locale;H||(H="en-US");var ne=!1,$={};function K(se){for(var ce=!0,fe=0;fe<U.length;fe++){var pe=U[fe];$[pe]||(se[pe]?$[pe]=se[pe]:ce=!1)}ce&&(ne=!0)}for(var Q=0;Q<2;Q++){for(var Z=F._context.locales,X=0;X<2;X++){var te=(Z[H]||{}).format;if(te&&(K(te),ne))break;Z=f.localeRegistry}var ae=H.split("-")[0];if(ne||ae===H)break;H=ae}return ne||K(f.localeRegistry.en.format),$}function w(F,U){var H={_fullLayout:U},ne=F._id.charAt(0)==="x",$=F._mainAxis._anchorAxis,K="",Q="",Z="";if($&&(Z=$._mainAxis._id,K=ne?F._id+Z:Z+F._id),!K||!U._plots[K]){K="";for(var X=F._counterAxes,te=0;te<X.length;te++){var ae=X[te],se=ne?F._id+ae:ae+F._id;Q||(Q=se);var ce=a.getFromId(H,ae);if(Z&&ce.overlaying===Z){K=se;break}}}return K||Q}function E(F){var U=F.transforms;if(Array.isArray(U)&&U.length)for(var H=0;H<U.length;H++){var ne=U[H],$=ne._module||y[ne.type];if($&&$.makesData)return!0}return!1}function C(F,U,H,ne){for(var $=F.transforms,K=[F],Q=0;Q<$.length;Q++){var Z=$[Q],X=y[Z.type];X&&X.transform&&(K=X.transform(K,{transform:Z,fullTrace:F,fullData:U,layout:H,fullLayout:ne,transformIndex:Q}))}return K}function O(F){return typeof F=="string"&&F.substr(F.length-2)==="px"&&parseFloat(F)}function P(F){var U=F.margin;if(!F._size){var H=F._size={l:Math.round(U.l),r:Math.round(U.r),t:Math.round(U.t),b:Math.round(U.b),p:Math.round(U.pad)};H.w=Math.round(F.width)-H.l-H.r,H.h=Math.round(F.height)-H.t-H.b}F._pushmargin||(F._pushmargin={}),F._pushmarginIds||(F._pushmarginIds={}),F._reservedMargin||(F._reservedMargin={})}g.supplyDefaults=function(F,U){var H=U&&U.skipUpdateCalc,ne=F._fullLayout||{};if(ne._skipDefaults)delete ne._skipDefaults;else{var $,K=F._fullLayout={},Q=F.layout||{},Z=F._fullData||[],X=F._fullData=[],te=F.data||[],ae=F.calcdata||[],se=F._context||{};F._transitionData||g.createTransitionData(F),K._dfltTitle={plot:v(F,"Click to enter Plot title"),subtitle:v(F,"Click to enter Plot subtitle"),x:v(F,"Click to enter X axis title"),y:v(F,"Click to enter Y axis title"),colorbar:v(F,"Click to enter Colorscale title"),annotation:v(F,"new text")},K._traceWord=v(F,"trace");var ce=S(F,_);if(K._mapboxAccessToken=se.mapboxAccessToken,ne._initialAutoSizeIsDone){var fe=ne.width,pe=ne.height;g.supplyLayoutGlobalDefaults(Q,K,ce),Q.width||(K.width=fe),Q.height||(K.height=pe),g.sanitizeMargins(K)}else{g.supplyLayoutGlobalDefaults(Q,K,ce);var ge=!Q.width||!Q.height,me=K.autosize,be=se.autosizable;ge&&(me||be)?g.plotAutoSize(F,Q,K):ge&&g.sanitizeMargins(K),!me&&ge&&(Q.width=K.width,Q.height=K.height)}K._d3locale=function(Ee,Fe){return Ee.decimal=Fe.charAt(0),Ee.thousands=Fe.charAt(1),{numberFormat:function(Ve){try{Ve=s(Ee).format(i.adjustFormat(Ve))}catch{return i.warnBadFormat(Ve),i.noFormat}return Ve},timeFormat:k(Ee).utcFormat}}(ce,K.separators),K._extraFormat=S(F,d),K._initialAutoSizeIsDone=!0,K._dataLength=te.length,K._modules=[],K._visibleModules=[],K._basePlotModules=[];var ke=K._subplots=function(){var Ee,Fe,Ve=f.collectableSubplotTypes,Ye={};if(!Ve){Ve=[];var tt=f.subplotsRegistry;for(var nt in tt){var ht=tt[nt].attr;if(ht&&(Ve.push(nt),Array.isArray(ht)))for(Fe=0;Fe<ht.length;Fe++)i.pushUnique(Ve,ht[Fe])}}for(Ee=0;Ee<Ve.length;Ee++)Ye[Ve[Ee]]=[];return Ye}(),ze=K._splomAxes={x:{},y:{}},ve=K._splomSubplots={};K._splomGridDflt={},K._scatterStackOpts={},K._firstScatter={},K._alignmentOpts={},K._colorAxes={},K._requestRangeslider={},K._traceUids=function(Ee,Fe){var Ve,Ye,tt=Fe.length,nt=[];for(Ve=0;Ve<Ee.length;Ve++){var ht=Ee[Ve]._fullInput;ht!==Ye&&nt.push(ht),Ye=ht}var vt=nt.length,pt=new Array(tt),Qe={};function Ke(Pt,St){pt[St]=Pt,Qe[Pt]=1}function Mt(Pt,St){if(Pt&&typeof Pt=="string"&&!Qe[Pt])return Ke(Pt,St),!0}for(Ve=0;Ve<tt;Ve++){var Ot=Fe[Ve].uid;typeof Ot=="number"&&(Ot=String(Ot)),Mt(Ot,Ve)||Ve<vt&&Mt(nt[Ve].uid,Ve)||Ke(i.randstr(Qe),Ve)}return pt}(Z,te),K._globalTransforms=(F._context||{}).globalTransforms,g.supplyDataDefaults(te,X,Q,K);var oe=Object.keys(ze.x),ie=Object.keys(ze.y);if(oe.length>1&&ie.length>1){for(f.getComponentMethod("grid","sizeDefaults")(Q,K),$=0;$<oe.length;$++)i.pushUnique(ke.xaxis,oe[$]);for($=0;$<ie.length;$++)i.pushUnique(ke.yaxis,ie[$]);for(var he in ve)i.pushUnique(ke.cartesian,he)}if(K._has=g._hasPlotType.bind(K),Z.length===X.length)for($=0;$<X.length;$++)p(X[$],Z[$]);g.supplyLayoutModuleDefaults(Q,K,X,F._transitionData);var Se=K._visibleModules,ye=[];for($=0;$<Se.length;$++){var we=Se[$].crossTraceDefaults;we&&i.pushUnique(ye,we)}for($=0;$<ye.length;$++)ye[$](X,K);K._hasOnlyLargeSploms=K._basePlotModules.length===1&&K._basePlotModules[0].name==="splom"&&oe.length>15&&ie.length>15&&K.shapes.length===0&&K.images.length===0,g.linkSubplots(X,K,Z,ne),g.cleanPlot(X,K,Z,ne);var Me=!(!ne._has||!ne._has("gl2d")),Oe=!(!K._has||!K._has("gl2d")),Ie=!(!ne._has||!ne._has("cartesian"))||Me,de=!(!K._has||!K._has("cartesian"))||Oe;Ie&&!de?ne._bgLayer.remove():de&&!Ie&&(K._shouldCreateBgLayer=!0),ne._zoomlayer&&!F._dragging&&l({_fullLayout:ne}),function(Ee,Fe){var Ve,Ye=[];Fe.meta&&(Ve=Fe._meta={meta:Fe.meta,layout:{meta:Fe.meta}});for(var tt=0;tt<Ee.length;tt++){var nt=Ee[tt];nt.meta?Ye[nt.index]=nt._meta={meta:nt.meta}:Fe.meta&&(nt._meta={meta:Fe.meta}),Fe.meta&&(nt._meta.layout={meta:Fe.meta})}Ye.length&&(Ve||(Ve=Fe._meta={}),Ve.data=Ye)}(X,K),p(K,ne),f.getComponentMethod("colorscale","crossTraceDefaults")(X,K),K._preGUI||(K._preGUI={}),K._tracePreGUI||(K._tracePreGUI={});var _e,Ae=K._tracePreGUI,Pe={};for(_e in Ae)Pe[_e]="old";for($=0;$<X.length;$++)Pe[_e=X[$]._fullInput.uid]||(Ae[_e]={}),Pe[_e]="new";for(_e in Pe)Pe[_e]==="old"&&delete Ae[_e];P(K),f.getComponentMethod("rangeslider","makeData")(K),H||ae.length!==X.length||g.supplyDefaultsUpdateCalc(ae,X)}},g.supplyDefaultsUpdateCalc=function(F,U){for(var H=0;H<U.length;H++){var ne=U[H],$=(F[H]||[])[0];if($&&$.trace){var K=$.trace;if(K._hasCalcTransform){var Q,Z,X,te=K._arrayAttrs;for(Q=0;Q<te.length;Q++)Z=te[Q],X=i.nestedProperty(K,Z).get().slice(),i.nestedProperty(ne,Z).set(X)}$.trace=ne}}},g.createTransitionData=function(F){F._transitionData||(F._transitionData={}),F._transitionData._frames||(F._transitionData._frames=[]),F._transitionData._frameHash||(F._transitionData._frameHash={}),F._transitionData._counter||(F._transitionData._counter=0),F._transitionData._interruptCallbacks||(F._transitionData._interruptCallbacks=[])},g._hasPlotType=function(F){var U,H=this._basePlotModules||[];for(U=0;U<H.length;U++)if(H[U].name===F)return!0;var ne=this._modules||[];for(U=0;U<ne.length;U++){var $=ne[U].name;if($===F)return!0;var K=f.modules[$];if(K&&K.categories[F])return!0}return!1},g.cleanPlot=function(F,U,H,ne){var $,K,Q=ne._basePlotModules||[];for($=0;$<Q.length;$++){var Z=Q[$];Z.clean&&Z.clean(F,U,H,ne)}var X=ne._has&&ne._has("gl"),te=U._has&&U._has("gl");X&&!te&&ne._glcontainer!==void 0&&(ne._glcontainer.selectAll(".gl-canvas").remove(),ne._glcontainer.selectAll(".no-webgl").remove(),ne._glcanvas=null);var ae=!!ne._infolayer;e:for($=0;$<H.length;$++){var se=H[$].uid;for(K=0;K<F.length;K++)if(se===F[K].uid)continue e;ae&&ne._infolayer.select(".cb"+se).remove()}},g.linkSubplots=function(F,U,H,ne){var $,K,Q=ne._plots||{},Z=U._plots={},X=U._subplots,te={_fullData:F,_fullLayout:U},ae=X.cartesian.concat(X.gl2d||[]);for($=0;$<ae.length;$++){var se,ce=ae[$],fe=Q[ce],pe=a.getFromId(te,ce,"x"),ge=a.getFromId(te,ce,"y");for(fe?se=Z[ce]=fe:(se=Z[ce]={}).id=ce,pe._counterAxes.push(ge._id),ge._counterAxes.push(pe._id),pe._subplotsWith.push(ce),ge._subplotsWith.push(ce),se.xaxis=pe,se.yaxis=ge,se._hasClipOnAxisFalse=!1,K=0;K<F.length;K++){var me=F[K];if(me.xaxis===se.xaxis._id&&me.yaxis===se.yaxis._id&&me.cliponaxis===!1){se._hasClipOnAxisFalse=!0;break}}}var be,ke=a.list(te,null,!0);for($=0;$<ke.length;$++){var ze=null;(be=ke[$]).overlaying&&(ze=a.getFromId(te,be.overlaying))&&ze.overlaying&&(be.overlaying=!1,ze=null),be._mainAxis=ze||be,ze&&(be.domain=ze.domain.slice()),be._anchorAxis=be.anchor==="free"?null:a.getFromId(te,be.anchor)}for($=0;$<ke.length;$++)if((be=ke[$])._counterAxes.sort(a.idSort),be._subplotsWith.sort(i.subplotSort),be._mainSubplot=w(be,U),be._counterAxes.length&&(be.spikemode&&be.spikemode.indexOf("across")!==-1||be.automargin&&be.mirror&&be.anchor!=="free"||f.getComponentMethod("rangeslider","isVisible")(be))){var ve=1,oe=0;for(K=0;K<be._counterAxes.length;K++){var ie=a.getFromId(te,be._counterAxes[K]);ve=Math.min(ve,ie.domain[0]),oe=Math.max(oe,ie.domain[1])}ve<oe&&(be._counterDomainMin=ve,be._counterDomainMax=oe)}},g.clearExpandedTraceDefaultColors=function(F){var U,H,ne;for(H=[],(U=F._module._colorAttrs)||(F._module._colorAttrs=U=[],o.crawl(F._module.attributes,function($,K,Q,Z){H[Z]=K,H.length=Z+1,$.valType==="color"&&$.dflt===void 0&&U.push(H.join("."))})),ne=0;ne<U.length;ne++)i.nestedProperty(F,"_input."+U[ne]).get()||i.nestedProperty(F,U[ne]).set(null)},g.supplyDataDefaults=function(F,U,H,ne){var $,K,Q,Z=ne._modules,X=ne._visibleModules,te=ne._basePlotModules,ae=0,se=0;function ce(he){U.push(he);var Se=he._module;Se&&(i.pushUnique(Z,Se),he.visible===!0&&i.pushUnique(X,Se),i.pushUnique(te,he._module.basePlotModule),ae++,he._input.visible!==!1&&se++)}ne._transformModules=[];var fe={},pe=[],ge=(H.template||{}).data||{},me=t.traceTemplater(ge);for($=0;$<F.length;$++){if(Q=F[$],(K=me.newTrace(Q)).uid=ne._traceUids[$],g.supplyTraceDefaults(Q,K,se,ne,$),K.index=$,K._input=Q,K._expandedIndex=ae,K.transforms&&K.transforms.length)for(var be=Q.visible!==!1&&K.visible===!1,ke=C(K,U,H,ne),ze=0;ze<ke.length;ze++){var ve=ke[ze],oe={_template:K._template,type:K.type,uid:K.uid+ze};be&&ve.visible===!1&&delete ve.visible,g.supplyTraceDefaults(ve,oe,ae,ne,$),p(oe,ve),oe.index=$,oe._input=Q,oe._fullInput=K,oe._expandedIndex=ae,oe._expandedInput=ve,ce(oe)}else K._fullInput=K,K._expandedInput=K,ce(K);f.traceIs(K,"carpetAxis")&&(fe[K.carpet]=K),f.traceIs(K,"carpetDependent")&&pe.push($)}for($=0;$<pe.length;$++)if((K=U[pe[$]]).visible){var ie=fe[K.carpet];K._carpet=ie,ie&&ie.visible?(K.xaxis=ie.xaxis,K.yaxis=ie.yaxis):K.visible=!1}},g.supplyAnimationDefaults=function(F){var U;F=F||{};var H={};function ne($,K){return i.coerce(F||{},H,h,$,K)}if(ne("mode"),ne("direction"),ne("fromcurrent"),Array.isArray(F.frame))for(H.frame=[],U=0;U<F.frame.length;U++)H.frame[U]=g.supplyAnimationFrameDefaults(F.frame[U]||{});else H.frame=g.supplyAnimationFrameDefaults(F.frame||{});if(Array.isArray(F.transition))for(H.transition=[],U=0;U<F.transition.length;U++)H.transition[U]=g.supplyAnimationTransitionDefaults(F.transition[U]||{});else H.transition=g.supplyAnimationTransitionDefaults(F.transition||{});return H},g.supplyAnimationFrameDefaults=function(F){var U={};function H(ne,$){return i.coerce(F||{},U,h.frame,ne,$)}return H("duration"),H("redraw"),U},g.supplyAnimationTransitionDefaults=function(F){var U={};function H(ne,$){return i.coerce(F||{},U,h.transition,ne,$)}return H("duration"),H("easing"),U},g.supplyFrameDefaults=function(F){var U={};function H(ne,$){return i.coerce(F,U,c,ne,$)}return H("group"),H("name"),H("traces"),H("baseframe"),H("data"),H("layout"),U},g.supplyTraceDefaults=function(F,U,H,ne,$){var K,Q=ne.colorway||n.defaults,Z=Q[H%Q.length];function X(ze,ve){return i.coerce(F,U,g.attributes,ze,ve)}var te=X("visible");X("type"),X("name",ne._traceWord+" "+$),X("uirevision",ne.uirevision);var ae=g.getModule(U);if(U._module=ae,ae){var se=ae.basePlotModule,ce=se.attr,fe=se.attributes;if(ce&&fe){var pe=ne._subplots,ge="";if(te||se.name!=="gl2d"){if(Array.isArray(ce))for(K=0;K<ce.length;K++){var me=ce[K],be=i.coerce(F,U,fe,me);pe[me]&&i.pushUnique(pe[me],be),ge+=be}else ge=i.coerce(F,U,fe,ce);pe[se.name]&&i.pushUnique(pe[se.name],ge)}}}if(te){if(X("customdata"),X("ids"),X("meta"),f.traceIs(U,"showLegend")?(i.coerce(F,U,ae.attributes.showlegend?ae.attributes:g.attributes,"showlegend"),X("legend"),X("legendwidth"),X("legendgroup"),X("legendgrouptitle.text"),X("legendrank"),U._dfltShowLegend=!0):U._dfltShowLegend=!1,ae&&ae.supplyDefaults(F,U,Z,ne),f.traceIs(U,"noOpacity")||X("opacity"),f.traceIs(U,"notLegendIsolatable")&&(U.visible=!!U.visible),f.traceIs(U,"noHover")||(U.hovertemplate||i.coerceHoverinfo(F,U,ne),U.type!=="parcats"&&f.getComponentMethod("fx","supplyDefaults")(F,U,Z,ne)),ae&&ae.selectPoints){var ke=X("selectedpoints");i.isTypedArray(ke)&&(U.selectedpoints=Array.from(ke))}g.supplyTransformDefaults(F,U,ne)}return U},g.hasMakesDataTransform=E,g.supplyTransformDefaults=function(F,U,H){if(U._length||E(F)){var ne=H._globalTransforms||[],$=H._transformModules||[];if(Array.isArray(F.transforms)||ne.length!==0)for(var K=F.transforms||[],Q=ne.concat(K),Z=U.transforms=[],X=0;X<Q.length;X++){var te,ae=Q[X],se=ae.type,ce=y[se],fe=!(ae._module&&ae._module===ce),pe=ce&&typeof ce.transform=="function";ce||i.warn("Unrecognized transform type "+se+"."),ce&&ce.supplyDefaults&&(fe||pe)?((te=ce.supplyDefaults(ae,U,H,F)).type=se,te._module=ce,i.pushUnique($,ce)):te=i.extendFlat({},ae),Z.push(te)}}},g.supplyLayoutGlobalDefaults=function(F,U,H){function ne(ae,se){return i.coerce(F,U,g.layoutAttributes,ae,se)}var $=F.template;i.isPlainObject($)&&(U.template=$,U._template=$.layout,U._dataTemplate=$.data),ne("autotypenumbers");var K=i.coerceFont(ne,"font"),Q=K.size;i.coerceFont(ne,"title.font",K,{overrideDflt:{size:Math.round(1.4*Q)}}),ne("title.text",U._dfltTitle.plot),ne("title.xref");var Z=ne("title.yref");ne("title.pad.t"),ne("title.pad.r"),ne("title.pad.b"),ne("title.pad.l");var X=ne("title.automargin");ne("title.x"),ne("title.xanchor"),ne("title.y"),ne("title.yanchor"),ne("title.subtitle.text",U._dfltTitle.subtitle),i.coerceFont(ne,"title.subtitle.font",K,{overrideDflt:{size:Math.round(.7*U.title.font.size)}}),X&&(Z==="paper"&&(U.title.y!==0&&(U.title.y=1),U.title.yanchor==="auto"&&(U.title.yanchor=U.title.y===0?"top":"bottom")),Z==="container"&&(U.title.y==="auto"&&(U.title.y=1),U.title.yanchor==="auto"&&(U.title.yanchor=U.title.y<.5?"bottom":"top"))),ne("uniformtext.mode")&&ne("uniformtext.minsize"),ne("autosize",!(F.width&&F.height)),ne("width"),ne("height"),ne("minreducedwidth"),ne("minreducedheight"),ne("margin.l"),ne("margin.r"),ne("margin.t"),ne("margin.b"),ne("margin.pad"),ne("margin.autoexpand"),F.width&&F.height&&g.sanitizeMargins(U),f.getComponentMethod("grid","sizeDefaults")(F,U),ne("paper_bgcolor"),ne("separators",H.decimal+H.thousands),ne("hidesources"),ne("colorway"),ne("datarevision");var te=ne("uirevision");ne("editrevision",te),ne("selectionrevision",te),f.getComponentMethod("modebar","supplyLayoutDefaults")(F,U),f.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(F,U,ne),f.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(F,U,ne),ne("meta"),i.isPlainObject(F.transition)&&(ne("transition.duration"),ne("transition.easing"),ne("transition.ordering")),f.getComponentMethod("calendars","handleDefaults")(F,U,"calendar"),f.getComponentMethod("fx","supplyLayoutGlobalDefaults")(F,U,ne),i.coerce(F,U,u,"scattermode")},g.plotAutoSize=function(F,U,H){var ne,$,K=F._context||{},Q=K.frameMargins,Z=i.isPlotDiv(F);if(Z&&F.emit("plotly_autosize"),K.fillFrame)ne=window.innerWidth,$=window.innerHeight,document.body.style.overflow="hidden";else{var X=Z?window.getComputedStyle(F):{};if(ne=O(X.width)||O(X.maxWidth)||H.width,$=O(X.height)||O(X.maxHeight)||H.height,T(Q)&&Q>0){var te=1-2*Q;ne=Math.round(te*ne),$=Math.round(te*$)}}var ae=g.layoutAttributes.width.min,se=g.layoutAttributes.height.min;ne<ae&&(ne=ae),$<se&&($=se);var ce=!U.width&&Math.abs(H.width-ne)>1,fe=!U.height&&Math.abs(H.height-$)>1;(fe||ce)&&(ce&&(H.width=ne),fe&&(H.height=$)),F._initialAutoSize||(F._initialAutoSize={width:ne,height:$}),g.sanitizeMargins(H)},g.supplyLayoutModuleDefaults=function(F,U,H,ne){var $,K,Q,Z=f.componentsRegistry,X=U._basePlotModules,te=f.subplotsRegistry.cartesian;for($ in Z)(Q=Z[$]).includeBasePlot&&Q.includeBasePlot(F,U);for(var ae in X.length||X.push(te),U._has("cartesian")&&(f.getComponentMethod("grid","contentDefaults")(F,U),te.finalizeSubplots(F,U)),U._subplots)U._subplots[ae].sort(i.subplotSort);for(K=0;K<X.length;K++)(Q=X[K]).supplyLayoutDefaults&&Q.supplyLayoutDefaults(F,U,H);var se=U._modules;for(K=0;K<se.length;K++)(Q=se[K]).supplyLayoutDefaults&&Q.supplyLayoutDefaults(F,U,H);var ce=U._transformModules;for(K=0;K<ce.length;K++)(Q=ce[K]).supplyLayoutDefaults&&Q.supplyLayoutDefaults(F,U,H,ne);for($ in Z)(Q=Z[$]).supplyLayoutDefaults&&Q.supplyLayoutDefaults(F,U,H)},g.purge=function(F){var U=F._fullLayout||{};U._glcontainer!==void 0&&(U._glcontainer.selectAll(".gl-canvas").remove(),U._glcontainer.remove(),U._glcanvas=null),U._modeBar&&U._modeBar.destroy(),F._transitionData&&(F._transitionData._interruptCallbacks&&(F._transitionData._interruptCallbacks.length=0),F._transitionData._animationRaf&&window.cancelAnimationFrame(F._transitionData._animationRaf)),i.clearThrottle(),i.clearResponsive(F),delete F.data,delete F.layout,delete F._fullData,delete F._fullLayout,delete F.calcdata,delete F.empty,delete F.fid,delete F.undoqueue,delete F.undonum,delete F.autoplay,delete F.changed,delete F._promises,delete F._redrawTimer,delete F._hmlumcount,delete F._hmpixcount,delete F._transitionData,delete F._transitioning,delete F._initialAutoSize,delete F._transitioningWithDuration,delete F._dragging,delete F._dragged,delete F._dragdata,delete F._hoverdata,delete F._snapshotInProgress,delete F._editing,delete F._mouseDownTime,delete F._legendMouseDownTime,F.removeAllListeners&&F.removeAllListeners()},g.style=function(F){var U,H=F._fullLayout._visibleModules,ne=[];for(U=0;U<H.length;U++){var $=H[U];$.style&&i.pushUnique(ne,$.style)}for(U=0;U<ne.length;U++)ne[U](F)},g.sanitizeMargins=function(F){if(F&&F.margin){var U,H=F.width,ne=F.height,$=F.margin,K=H-($.l+$.r),Q=ne-($.t+$.b);K<0&&(U=(H-1)/($.l+$.r),$.l=Math.floor(U*$.l),$.r=Math.floor(U*$.r)),Q<0&&(U=(ne-1)/($.t+$.b),$.t=Math.floor(U*$.t),$.b=Math.floor(U*$.b))}},g.clearAutoMarginIds=function(F){F._fullLayout._pushmarginIds={}},g.allowAutoMargin=function(F,U){F._fullLayout._pushmarginIds[U]=1},g.autoMargin=function(F,U,H){var ne=F._fullLayout,$=ne.width,K=ne.height,Q=ne.margin,Z=ne.minreducedwidth,X=ne.minreducedheight,te=i.constrain($-Q.l-Q.r,2,Z),ae=i.constrain(K-Q.t-Q.b,2,X),se=Math.max(0,$-te),ce=Math.max(0,K-ae),fe=ne._pushmargin,pe=ne._pushmarginIds;if(Q.autoexpand!==!1){if(H){var ge=H.pad;if(ge===void 0&&(ge=Math.min(12,Q.l,Q.r,Q.t,Q.b)),se){var me=(H.l+H.r)/se;me>1&&(H.l/=me,H.r/=me)}if(ce){var be=(H.t+H.b)/ce;be>1&&(H.t/=be,H.b/=be)}var ke=H.xl!==void 0?H.xl:H.x,ze=H.xr!==void 0?H.xr:H.x,ve=H.yt!==void 0?H.yt:H.y,oe=H.yb!==void 0?H.yb:H.y;fe[U]={l:{val:ke,size:H.l+ge},r:{val:ze,size:H.r+ge},b:{val:oe,size:H.b+ge},t:{val:ve,size:H.t+ge}},pe[U]=1}else delete fe[U],delete pe[U];if(!ne._replotting)return g.doAutoMargin(F)}},g.doAutoMargin=function(F){var U=F._fullLayout,H=U.width,ne=U.height;U._size||(U._size={}),P(U);var $=U._size,K=U.margin,Q={t:0,b:0,l:0,r:0},Z=i.extendFlat({},$),X=K.l,te=K.r,ae=K.t,se=K.b,ce=U._pushmargin,fe=U._pushmarginIds,pe=U.minreducedwidth,ge=U.minreducedheight;if(K.autoexpand!==!1){for(var me in ce)fe[me]||delete ce[me];var be=F._fullLayout._reservedMargin;for(var ke in be)for(var ze in be[ke]){var ve=be[ke][ze];Q[ze]=Math.max(Q[ze],ve)}for(var oe in ce.base={l:{val:0,size:X},r:{val:1,size:te},t:{val:1,size:ae},b:{val:0,size:se}},Q){var ie=0;for(var he in ce)he!=="base"&&T(ce[he][oe].size)&&(ie=ce[he][oe].size>ie?ce[he][oe].size:ie);var Se=Math.max(0,K[oe]-ie);Q[oe]=Math.max(0,Q[oe]-Se)}for(var ye in ce){var we=ce[ye].l||{},Me=ce[ye].b||{},Oe=we.val,Ie=we.size,de=Me.val,_e=Me.size,Ae=H-Q.r-Q.l,Pe=ne-Q.t-Q.b;for(var Ee in ce){if(T(Ie)&&ce[Ee].r){var Fe=ce[Ee].r.val,Ve=ce[Ee].r.size;if(Fe>Oe){var Ye=(Ie*Fe+(Ve-Ae)*Oe)/(Fe-Oe),tt=(Ve*(1-Oe)+(Ie-Ae)*(1-Fe))/(Fe-Oe);Ye+tt>X+te&&(X=Ye,te=tt)}}if(T(_e)&&ce[Ee].t){var nt=ce[Ee].t.val,ht=ce[Ee].t.size;if(nt>de){var vt=(_e*nt+(ht-Pe)*de)/(nt-de),pt=(ht*(1-de)+(_e-Pe)*(1-nt))/(nt-de);vt+pt>se+ae&&(se=vt,ae=pt)}}}}}var Qe=i.constrain(H-K.l-K.r,2,pe),Ke=i.constrain(ne-K.t-K.b,2,ge),Mt=Math.max(0,H-Qe),Ot=Math.max(0,ne-Ke);if(Mt){var Pt=(X+te)/Mt;Pt>1&&(X/=Pt,te/=Pt)}if(Ot){var St=(se+ae)/Ot;St>1&&(se/=St,ae/=St)}if($.l=Math.round(X)+Q.l,$.r=Math.round(te)+Q.r,$.t=Math.round(ae)+Q.t,$.b=Math.round(se)+Q.b,$.p=Math.round(K.pad),$.w=Math.round(H)-$.l-$.r,$.h=Math.round(ne)-$.t-$.b,!U._replotting&&(g.didMarginChange(Z,$)||function(We){if("_redrawFromAutoMarginCount"in We._fullLayout)return!1;var Be=a.list(We,"",!0);for(var Ge in Be)if(Be[Ge].autoshift||Be[Ge].shift)return!0;return!1}(F))){"_redrawFromAutoMarginCount"in U?U._redrawFromAutoMarginCount++:U._redrawFromAutoMarginCount=1;var He=3*(1+Object.keys(fe).length);if(U._redrawFromAutoMarginCount<He)return f.call("_doPlot",F);U._size=Z,i.warn("Too many auto-margin redraws.")}(function(We){var Be=a.list(We,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(Ge){for(var ot=0;ot<Be.length;ot++){var it=Be[ot][Ge];it&&it()}})})(F)};var z=["l","r","t","b","p","w","h"];function j(F,U,H){var ne=!1,$=[g.previousPromises,function(){if(F._transitionData)return F._transitioning=!1,function(Q){var Z=Promise.resolve();if(!Q)return Z;for(;Q.length;)Z=Z.then(Q.shift());return Z}(F._transitionData._interruptCallbacks)},H.prepareFn,g.rehover,g.reselect,function(){return F.emit("plotly_transitioning",[]),new Promise(function(Q){F._transitioning=!0,U.duration>0&&(F._transitioningWithDuration=!0),F._transitionData._interruptCallbacks.push(function(){ne=!0}),H.redraw&&F._transitionData._interruptCallbacks.push(function(){return f.call("redraw",F)}),F._transitionData._interruptCallbacks.push(function(){F.emit("plotly_transitioninterrupted",[])});var Z=0,X=0;function te(){return Z++,function(){var ae;X++,ne||X!==Z||(ae=Q,F._transitionData&&(function(se){if(se)for(;se.length;)se.shift()}(F._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(H.redraw)return f.call("redraw",F)}).then(function(){F._transitioning=!1,F._transitioningWithDuration=!1,F.emit("plotly_transitioned",[])}).then(ae)))}}H.runFn(te),setTimeout(te())})}],K=i.syncOrAsync($,F);return K&&K.then||(K=Promise.resolve()),K.then(function(){return F})}g.didMarginChange=function(F,U){for(var H=0;H<z.length;H++){var ne=z[H],$=F[ne],K=U[ne];if(!T($)||Math.abs(K-$)>1)return!0}return!1},g.graphJson=function(F,U,H,ne,$,K){($&&U&&!F._fullData||$&&!U&&!F._fullLayout)&&g.supplyDefaults(F);var Q=$?F._fullData:F.data,Z=$?F._fullLayout:F.layout,X=(F._transitionData||{})._frames;function te(ce,fe){if(typeof ce=="function")return fe?"_function_":null;if(i.isPlainObject(ce)){var pe,ge={};return Object.keys(ce).sort().forEach(function(ze){if(["_","["].indexOf(ze.charAt(0))===-1)if(typeof ce[ze]!="function"){if(H==="keepdata"){if(ze.substr(ze.length-3)==="src")return}else if(H==="keepstream"){if(typeof(pe=ce[ze+"src"])=="string"&&pe.indexOf(":")>0&&!i.isPlainObject(ce.stream))return}else if(H!=="keepall"&&typeof(pe=ce[ze+"src"])=="string"&&pe.indexOf(":")>0)return;ge[ze]=te(ce[ze],fe)}else fe&&(ge[ze]="_function")}),ge}var me=Array.isArray(ce),be=i.isTypedArray(ce);if((me||be)&&ce.dtype&&ce.shape){var ke=ce.bdata;return te({dtype:ce.dtype,shape:ce.shape,bdata:i.isArrayBuffer(ke)?b.encode(ke):ke},fe)}return me?ce.map(function(ze){return te(ze,fe)}):be?i.simpleMap(ce,i.identity):i.isJSDate(ce)?i.ms2DateTimeLocal(+ce):ce}var ae={data:(Q||[]).map(function(ce){var fe=te(ce);return U&&delete fe.fit,fe})};if(!U&&(ae.layout=te(Z),$)){var se=Z._size;ae.layout.computed={margin:{b:se.b,l:se.l,r:se.r,t:se.t}}}return X&&(ae.frames=te(X)),K&&(ae.config=te(F._context,!0)),ne==="object"?ae:JSON.stringify(ae)},g.modifyFrames=function(F,U){var H,ne,$,K=F._transitionData._frames,Q=F._transitionData._frameHash;for(H=0;H<U.length;H++)switch((ne=U[H]).type){case"replace":$=ne.value;var Z=(K[ne.index]||{}).name,X=$.name;K[ne.index]=Q[X]=$,X!==Z&&(delete Q[Z],Q[X]=$);break;case"insert":Q[($=ne.value).name]=$,K.splice(ne.index,0,$);break;case"delete":delete Q[($=K[ne.index]).name],K.splice(ne.index,1)}return Promise.resolve()},g.computeFrame=function(F,U){var H,ne,$,K,Q=F._transitionData._frameHash;if(!U)throw new Error("computeFrame must be given a string frame name");var Z=Q[U.toString()];if(!Z)return!1;for(var X=[Z],te=[Z.name];Z.baseframe&&(Z=Q[Z.baseframe.toString()])&&te.indexOf(Z.name)===-1;)X.push(Z),te.push(Z.name);for(var ae={};Z=X.pop();)if(Z.layout&&(ae.layout=g.extendLayout(ae.layout,Z.layout)),Z.data){if(ae.data||(ae.data=[]),!(ne=Z.traces))for(ne=[],H=0;H<Z.data.length;H++)ne[H]=H;for(ae.traces||(ae.traces=[]),H=0;H<Z.data.length;H++)($=ne[H])!=null&&((K=ae.traces.indexOf($))===-1&&(K=ae.data.length,ae.traces[K]=$),ae.data[K]=g.extendTrace(ae.data[K],Z.data[H]))}return ae},g.recomputeFrameHash=function(F){for(var U=F._transitionData._frameHash={},H=F._transitionData._frames,ne=0;ne<H.length;ne++){var $=H[ne];$&&$.name&&(U[$.name]=$)}},g.extendObjectWithContainers=function(F,U,H){var ne,$,K,Q,Z,X,te,ae=i.extendDeepNoArrays({},U||{}),se=i.expandObjectPaths(ae),ce={};if(H&&H.length)for(K=0;K<H.length;K++)($=(ne=i.nestedProperty(se,H[K])).get())===void 0?i.nestedProperty(ce,H[K]).set(null):(ne.set(null),i.nestedProperty(ce,H[K]).set($));if(F=i.extendDeepNoArrays(F||{},se),H&&H.length){for(K=0;K<H.length;K++)if(X=i.nestedProperty(ce,H[K]).get()){for(te=(Z=i.nestedProperty(F,H[K])).get(),Array.isArray(te)||(te=[],Z.set(te)),Q=0;Q<X.length;Q++){var fe=X[Q];te[Q]=fe===null?null:g.extendObjectWithContainers(te[Q],fe)}Z.set(te)}}return F},g.dataArrayContainers=["transforms","dimensions"],g.layoutArrayContainers=f.layoutArrayContainers,g.extendTrace=function(F,U){return g.extendObjectWithContainers(F,U,g.dataArrayContainers)},g.extendLayout=function(F,U){return g.extendObjectWithContainers(F,U,g.layoutArrayContainers)},g.transition=function(F,U,H,ne,$,K){var Q={redraw:$.redraw},Z={},X=[];return Q.prepareFn=function(){for(var te=Array.isArray(U)?U.length:0,ae=ne.slice(0,te),se=0;se<ae.length;se++){var ce=ae[se],fe=F._fullData[ce]._module;if(fe){if(fe.animatable){var pe=fe.basePlotModule.name;Z[pe]||(Z[pe]=[]),Z[pe].push(ce)}F.data[ae[se]]=g.extendTrace(F.data[ae[se]],U[se])}}var ge=i.expandObjectPaths(i.extendDeepNoArrays({},H)),me=/^[xy]axis[0-9]*$/;for(var be in ge)me.test(be)&&delete ge[be].range;g.extendLayout(F.layout,ge),delete F.calcdata,g.supplyDefaults(F),g.doCalcdata(F);var ke=i.expandObjectPaths(H);if(ke){var ze=F._fullLayout._plots;for(var ve in ze){var oe=ze[ve],ie=oe.xaxis,he=oe.yaxis,Se=ie.range.slice(),ye=he.range.slice(),we=null,Me=null,Oe=null,Ie=null;Array.isArray(ke[ie._name+".range"])?we=ke[ie._name+".range"].slice():Array.isArray((ke[ie._name]||{}).range)&&(we=ke[ie._name].range.slice()),Array.isArray(ke[he._name+".range"])?Me=ke[he._name+".range"].slice():Array.isArray((ke[he._name]||{}).range)&&(Me=ke[he._name].range.slice()),Se&&we&&(ie.r2l(Se[0])!==ie.r2l(we[0])||ie.r2l(Se[1])!==ie.r2l(we[1]))&&(Oe={xr0:Se,xr1:we}),ye&&Me&&(he.r2l(ye[0])!==he.r2l(Me[0])||he.r2l(ye[1])!==he.r2l(Me[1]))&&(Ie={yr0:ye,yr1:Me}),(Oe||Ie)&&X.push(i.extendFlat({plotinfo:oe},Oe,Ie))}}return Promise.resolve()},Q.runFn=function(te){var ae,se,ce=F._fullLayout._basePlotModules,fe=X.length;if(H)for(se=0;se<ce.length;se++)ce[se].transitionAxes&&ce[se].transitionAxes(F,X,K,te);for(var pe in fe?((ae=i.extendFlat({},K)).duration=0,delete Z.cartesian):ae=K,Z){var ge=Z[pe];F._fullData[ge[0]]._module.basePlotModule.plot(F,ge,ae,te)}},j(F,K,Q)},g.transitionFromReact=function(F,U,H,ne){var $=F._fullLayout,K=$.transition,Q={},Z=[];return Q.prepareFn=function(){var X=$._plots;for(var te in Q.redraw=!1,U.anim==="some"&&(Q.redraw=!0),H.anim==="some"&&(Q.redraw=!0),X){var ae=X[te],se=ae.xaxis,ce=ae.yaxis,fe=ne[se._name].range.slice(),pe=ne[ce._name].range.slice(),ge=se.range.slice(),me=ce.range.slice();se.setScale(),ce.setScale();var be=null,ke=null;se.r2l(fe[0])===se.r2l(ge[0])&&se.r2l(fe[1])===se.r2l(ge[1])||(be={xr0:fe,xr1:ge}),ce.r2l(pe[0])===ce.r2l(me[0])&&ce.r2l(pe[1])===ce.r2l(me[1])||(ke={yr0:pe,yr1:me}),(be||ke)&&Z.push(i.extendFlat({plotinfo:ae},be,ke))}return Promise.resolve()},Q.runFn=function(X){for(var te,ae,se,ce=F._fullData,fe=F._fullLayout._basePlotModules,pe=[],ge=0;ge<ce.length;ge++)pe.push(ge);function me(){if(F._fullLayout)for(var ke=0;ke<fe.length;ke++)fe[ke].transitionAxes&&fe[ke].transitionAxes(F,Z,te,X)}function be(){if(F._fullLayout)for(var ke=0;ke<fe.length;ke++)fe[ke].plot(F,se,ae,X)}Z.length&&U.anim?K.ordering==="traces first"?(te=i.extendFlat({},K,{duration:0}),se=pe,ae=K,setTimeout(me,K.duration),be()):(te=K,se=null,ae=i.extendFlat({},K,{duration:0}),setTimeout(be,te.duration),me()):Z.length?(te=K,me()):U.anim&&(se=pe,ae=K,be())},j(F,K,Q)},g.doCalcdata=function(F,U){var H,ne,$,K,Q=a.list(F),Z=F._fullData,X=F._fullLayout,te=new Array(Z.length),ae=(F.calcdata||[]).slice();for(F.calcdata=te,X._numBoxes=0,X._numViolins=0,X._violinScaleGroupStats={},F._hmpixcount=0,F._hmlumcount=0,X._piecolormap={},X._sunburstcolormap={},X._treemapcolormap={},X._iciclecolormap={},X._funnelareacolormap={},$=0;$<Z.length;$++)Array.isArray(U)&&U.indexOf($)===-1&&(te[$]=ae[$]);for($=0;$<Z.length;$++)(H=Z[$])._arrayAttrs=o.findArrayAttributes(H),H._extremes={};var se=X._subplots.polar||[];for($=0;$<se.length;$++)Q.push(X[se[$]].radialaxis,X[se[$]].angularaxis);for(var ce in X._colorAxes){var fe=X[ce];fe.cauto!==!1&&(delete fe.cmin,delete fe.cmax)}var pe=!1;function ge(ke){if(H=Z[ke],ne=H._module,H.visible===!0&&H.transforms){if(ne&&ne.calc){var ze=ne.calc(F,H);ze[0]&&ze[0].t&&ze[0].t._scene&&delete ze[0].t._scene.dirty}for(K=0;K<H.transforms.length;K++){var ve=H.transforms[K];(ne=y[ve.type])&&ne.calcTransform&&(H._hasCalcTransform=!0,pe=!0,ne.calcTransform(F,H,ve))}}}function me(ke,ze){if(H=Z[ke],!!(ne=H._module).isContainer===ze){var ve=[];if(H.visible===!0&&H._length!==0){delete H._indexToPoints;var oe=H.transforms||[];for(K=oe.length-1;K>=0;K--)if(oe[K].enabled){H._indexToPoints=oe[K]._indexToPoints;break}ne&&ne.calc&&(ve=ne.calc(F,H))}Array.isArray(ve)&&ve[0]||(ve=[{x:r,y:r}]),ve[0].t||(ve[0].t={}),ve[0].trace=H,te[ke]=ve}}for(N(Q,Z,X),$=0;$<Z.length;$++)me($,!0);for($=0;$<Z.length;$++)ge($);for(pe&&N(Q,Z,X),$=0;$<Z.length;$++)me($,!0);for($=0;$<Z.length;$++)me($,!1);W(F);var be=function(ke,ze){var ve,oe,ie,he,Se,ye=[];function we(Ge,ot,it){var dt=ot._id.charAt(0);if(Ge==="histogram2dcontour"){var gt=ot._counterAxes[0],je=a.getFromId(ze,gt),Re=dt==="x"||gt==="x"&&je.type==="category",rt=dt==="y"||gt==="y"&&je.type==="category";return function(ct,ut){return ct===0||ut===0||Re&&ct===it[ut].length-1||rt&&ut===it.length-1?-1:(dt==="y"?ut:ct)-1}}return function(ct,ut){return dt==="y"?ut:ct}}var Me={min:function(Ge){return i.aggNums(Math.min,null,Ge)},max:function(Ge){return i.aggNums(Math.max,null,Ge)},sum:function(Ge){return i.aggNums(function(ot,it){return ot+it},null,Ge)},total:function(Ge){return i.aggNums(function(ot,it){return ot+it},null,Ge)},mean:function(Ge){return i.mean(Ge)},"geometric mean":function(Ge){return i.geometricMean(Ge)},median:function(Ge){return i.median(Ge)}};function Oe(Ge,ot){return Ge[1]-ot[1]}function Ie(Ge,ot){return ot[1]-Ge[1]}for(ve=0;ve<ke.length;ve++){var de=ke[ve];if(de.type==="category"){var _e=de.categoryorder.match(I);if(_e){var Ae=_e[1],Pe=_e[2],Ee=de._id.charAt(0),Fe=Ee==="x",Ve=[];for(oe=0;oe<de._categories.length;oe++)Ve.push([de._categories[oe],[]]);for(oe=0;oe<de._traceIndices.length;oe++){var Ye=de._traceIndices[oe],tt=ze._fullData[Ye];if(tt.visible===!0){var nt=tt.type;f.traceIs(tt,"histogram")&&(delete tt._xautoBinFinished,delete tt._yautoBinFinished);var ht=nt==="splom",vt=nt==="scattergl",pt=ze.calcdata[Ye];for(ie=0;ie<pt.length;ie++){var Qe,Ke,Mt=pt[ie];if(ht){var Ot=tt._axesDim[de._id];if(!Fe){var Pt=tt._diag[Ot][0];Pt&&(de=ze._fullLayout[a.id2name(Pt)])}var St=Mt.trace.dimensions[Ot].values;for(he=0;he<St.length;he++)for(Qe=de._categoriesMap[St[he]],Se=0;Se<Mt.trace.dimensions.length;Se++)if(Se!==Ot){var He=Mt.trace.dimensions[Se];Ve[Qe][1].push(He.values[he])}}else if(vt){for(he=0;he<Mt.t.x.length;he++)Fe?(Qe=Mt.t.x[he],Ke=Mt.t.y[he]):(Qe=Mt.t.y[he],Ke=Mt.t.x[he]),Ve[Qe][1].push(Ke);Mt.t&&Mt.t._scene&&delete Mt.t._scene.dirty}else if(Mt.hasOwnProperty("z")){Ke=Mt.z;var We=we(tt.type,de,Ke);for(he=0;he<Ke.length;he++)for(Se=0;Se<Ke[he].length;Se++)(Qe=We(Se,he))+1&&Ve[Qe][1].push(Ke[he][Se])}else for((Qe=Mt.p)===void 0&&(Qe=Mt[Ee]),(Ke=Mt.s)===void 0&&(Ke=Mt.v),Ke===void 0&&(Ke=Fe?Mt.y:Mt.x),Array.isArray(Ke)||(Ke=Ke===void 0?[]:[Ke]),he=0;he<Ke.length;he++)Ve[Qe][1].push(Ke[he])}}}de._categoriesValue=Ve;var Be=[];for(oe=0;oe<Ve.length;oe++)Be.push([Ve[oe][0],Me[Ae](Ve[oe][1])]);Be.sort(Pe==="descending"?Ie:Oe),de._categoriesAggregatedValue=Be,de._initialCategories=Be.map(function(Ge){return Ge[0]}),ye=ye.concat(de.sortByInitialCategories())}}}return ye}(Q,F);if(be.length){for(X._numBoxes=0,X._numViolins=0,$=0;$<be.length;$++)me(be[$],!0);for($=0;$<be.length;$++)me(be[$],!1);W(F)}f.getComponentMethod("fx","calc")(F),f.getComponentMethod("errorbars","calc")(F)};var I=/(total|sum|min|max|mean|geometric mean|median) (ascending|descending)/;function N(F,U,H){var ne={};function $(X){X.clearCalc(),X.type==="multicategory"&&X.setupMultiCategory(U),ne[X._id]=1}i.simpleMap(F,$);for(var K=H._axisMatchGroups||[],Q=0;Q<K.length;Q++)for(var Z in K[Q])ne[Z]||$(H[a.id2name(Z)])}function W(F){var U,H,ne,$=F._fullLayout,K=$._visibleModules,Q={};for(H=0;H<K.length;H++){var Z=K[H],X=Z.crossTraceCalc;if(X){var te=Z.basePlotModule.name;Q[te]?i.pushUnique(Q[te],X):Q[te]=[X]}}for(ne in Q){var ae=Q[ne],se=$._subplots[ne];if(Array.isArray(se))for(U=0;U<se.length;U++){var ce=se[U],fe=ne==="cartesian"?$._plots[ce]:$[ce];for(H=0;H<ae.length;H++)ae[H](F,fe,ce)}else for(H=0;H<ae.length;H++)ae[H](F)}}g.rehover=function(F){F._fullLayout._rehover&&F._fullLayout._rehover()},g.redrag=function(F){F._fullLayout._redrag&&F._fullLayout._redrag()},g.reselect=function(F){var U=F._fullLayout,H=(F.layout||{}).selections,ne=U._previousSelections;U._previousSelections=H;var $=U._reselect||JSON.stringify(H)!==JSON.stringify(ne);f.getComponentMethod("selections","reselect")(F,$)},g.generalUpdatePerTraceModule=function(F,U,H,ne){var $,K=U.traceHash,Q={};for($=0;$<H.length;$++){var Z=H[$],X=Z[0].trace;X.visible&&(Q[X.type]=Q[X.type]||[],Q[X.type].push(Z))}for(var te in K)if(!Q[te]){var ae=K[te][0];ae[0].trace.visible=!1,Q[te]=[ae]}for(var se in Q){var ce=Q[se];ce[0][0].trace._module.plot(F,U,i.filterVisible(ce),ne)}U.traceHash=Q},g.plotBasePlot=function(F,U,H,ne,$){var K=f.getModule(F),Q=x(U.calcdata,K)[0];K.plot(U,Q,ne,$)},g.cleanBasePlot=function(F,U,H,ne,$){var K=$._has&&$._has(F),Q=H._has&&H._has(F);K&&!Q&&$["_"+F+"layer"].selectAll("g.trace").remove()}},39360:function(ee){ee.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},57384:function(ee,R,e){var M=e(3400),k=e(92065).tester,s=M.findIndexOfMin,T=M.isAngleInsideSector,b=M.angleDelta,f=M.angleDist;function o(r,a,l,u){var h,c,x=u[0],p=u[1],v=i(Math.sin(a)-Math.sin(r)),g=i(Math.cos(a)-Math.cos(r)),y=Math.tan(l),m=i(1/y),_=v/g,d=p-_*x;return m?v&&g?c=y*(h=d/(y-_)):g?(h=p*m,c=p):(h=x,c=x*y):v&&g?(h=0,c=d):g?(h=0,c=p):h=c=NaN,[h,c]}function t(r,a,l,u){return M.isFullCircle([a,l])?function(h,c){var x,p=c.length,v=new Array(p+1);for(x=0;x<p;x++){var g=c[x];v[x]=[h*Math.cos(g),h*Math.sin(g)]}return v[x]=v[0].slice(),v}(r,u):function(h,c,x,p){var v,g,y=p.length,m=[];function _(j){return[h*Math.cos(j),h*Math.sin(j)]}function d(j,I,N){return o(j,I,N,_(j))}function S(j){return M.mod(j,y)}function w(j){return T(j,[c,x])}var E=s(p,function(j){return w(j)?f(j,c):1/0}),C=d(p[E],p[S(E-1)],c);for(m.push(C),v=E,g=0;g<y;v++,g++){var O=p[S(v)];if(!w(O))break;m.push(_(O))}var P=s(p,function(j){return w(j)?f(j,x):1/0}),z=d(p[P],p[S(P+1)],x);return m.push(z),m.push([0,0]),m.push(m[0].slice()),m}(r,a,l,u)}function i(r){return Math.abs(r)>1e-10?r:0}function n(r,a,l){a=a||0,l=l||0;for(var u=r.length,h=new Array(u),c=0;c<u;c++){var x=r[c];h[c]=[a+x[0],l-x[1]]}return h}ee.exports={isPtInsidePolygon:function(r,a,l,u,h){if(!T(a,u))return!1;var c,x;l[0]<l[1]?(c=l[0],x=l[1]):(c=l[1],x=l[0]);var p=k(t(c,u[0],u[1],h)),v=k(t(x,u[0],u[1],h)),g=[r*Math.cos(a),r*Math.sin(a)];return v.contains(g)&&!p.contains(g)},findPolygonOffset:function(r,a,l,u){for(var h=1/0,c=1/0,x=t(r,a,l,u),p=0;p<x.length;p++){var v=x[p];h=Math.min(h,v[0]),c=Math.min(c,-v[1])}return[h,c]},findEnclosingVertexAngles:function(r,a){var l=s(a,function(h){var c=b(h,r);return c>0?c:1/0}),u=M.mod(l+1,a.length);return[a[l],a[u]]},findIntersectionXY:o,findXYatLength:function(r,a,l,u){var h=-a*l,c=a*a+1,x=2*(a*h-l),p=h*h+l*l-r*r,v=Math.sqrt(x*x-4*c*p),g=(-x+v)/(2*c),y=(-x-v)/(2*c);return[[g,a*g+h+u],[y,a*y+h+u]]},clampTiny:i,pathPolygon:function(r,a,l,u,h,c){return"M"+n(t(r,a,l,u),h,c).join("L")},pathPolygonAnnulus:function(r,a,l,u,h,c,x){var p,v;r<a?(p=r,v=a):(p=a,v=r);var g=n(t(p,l,u,h),c,x);return"M"+n(t(v,l,u,h),c,x).reverse().join("L")+"M"+g.join("L")}}},40872:function(ee,R,e){var M=e(84888).KY,k=e(3400).counterRegex,s=e(62400),T=e(39360),b=T.attr,f=T.name,o=k(f),t={};t[b]={valType:"subplotid",dflt:f,editType:"calc"},ee.exports={attr:b,name:f,idRoot:f,idRegex:o,attrRegex:o,attributes:t,layoutAttributes:e(95300),supplyLayoutDefaults:e(84380),plot:function(i){for(var n=i._fullLayout,r=i.calcdata,a=n._subplots[f],l=0;l<a.length;l++){var u=a[l],h=M(r,f,u),c=n[u]._subplot;c||(c=s(i,u),n[u]._subplot=c),c.plot(h,n,i._promises)}},clean:function(i,n,r,a){for(var l=a._subplots[f]||[],u=a._has&&a._has("gl"),h=n._has&&n._has("gl"),c=u&&!h,x=0;x<l.length;x++){var p=l[x],v=a[p]._subplot;if(!n[p]&&v)for(var g in v.framework.remove(),v.layers["radial-axis-title"].remove(),v.clipPaths)v.clipPaths[g].remove();c&&v._scene&&(v._scene.destroy(),v._scene=null)}},toSVG:e(57952).toSVG}},95300:function(ee,R,e){var M=e(22548),k=e(94724),s=e(86968).u,T=e(3400).extendFlat,b=e(67824).overrideAll,f=b({color:k.color,showline:T({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:T({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,griddash:k.griddash},"plot","from-root"),o=b({tickmode:k.minor.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,ticklabelstep:k.ticklabelstep,showticklabels:k.showticklabels,labelalias:k.labelalias,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,minexponent:k.minexponent,separatethousands:k.separatethousands,tickfont:k.tickfont,tickangle:k.tickangle,tickformat:k.tickformat,tickformatstops:k.tickformatstops,layer:k.layer},"plot","from-root"),t={visible:T({},k.visible,{dflt:!0}),type:T({},k.type,{values:["-","linear","log","date","category"]}),autotypenumbers:k.autotypenumbers,autorangeoptions:{minallowed:k.autorangeoptions.minallowed,maxallowed:k.autorangeoptions.maxallowed,clipmin:k.autorangeoptions.clipmin,clipmax:k.autorangeoptions.clipmax,include:k.autorangeoptions.include,editType:"plot"},autorange:T({},k.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},minallowed:T({},k.minallowed,{editType:"plot"}),maxallowed:T({},k.maxallowed,{editType:"plot"}),range:T({},k.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:k.categoryorder,categoryarray:k.categoryarray,angle:{valType:"angle",editType:"plot"},autotickangles:k.autotickangles,side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:T({},k.title.text,{editType:"plot",dflt:""}),font:T({},k.title.font,{editType:"plot"}),editType:"plot"},hoverformat:k.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}};T(t,f,o);var i={visible:T({},k.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:k.autotypenumbers,categoryorder:k.categoryorder,categoryarray:k.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:k.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};T(i,f,o),ee.exports={domain:s({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:M.background},radialaxis:t,angularaxis:i,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},84380:function(ee,R,e){var M=e(3400),k=e(76308),s=e(31780),T=e(168),b=e(84888).op,f=e(26332),o=e(25404),t=e(95936),i=e(42568),n=e(22416),r=e(42136),a=e(76808),l=e(52976),u=e(95300),h=e(57696),c=e(39360),x=c.axisNames;function p(g,y,m,_){var d=m("bgcolor");_.bgColor=k.combine(d,_.paper_bgcolor);var S=m("sector");m("hole");var w,E=b(_.fullData,c.name,_.id),C=_.layoutOut;function O(be,ke){return m(w+"."+be,ke)}for(var P=0;P<x.length;P++){w=x[P],M.isPlainObject(g[w])||(g[w]={});var z=g[w],j=s.newContainer(y,w);j._id=j._name=w,j._attr=_.id+"."+w,j._traceIndices=E.map(function(be){return be._expandedIndex});var I=c.axisName2dataArray[w],N=v(z,j,O,E,I,_);n(z,j,O,{axData:E,dataAttr:I});var W=O("visible");switch(h(j,y,C),O("uirevision",y.uirevision),j._m=1,w){case"radialaxis":O("minallowed"),O("maxallowed");var F,U=O("range"),H=j.getAutorangeDflt(U),ne=O("autorange",H);!U||(U[0]!==null||U[1]!==null)&&(U[0]!==null&&U[1]!==null||ne!=="reversed"&&ne!==!0)&&(U[0]===null||ne!=="min"&&ne!=="max reversed")&&(U[1]===null||ne!=="max"&&ne!=="min reversed")||(U=void 0,delete j.range,j.autorange=!0,F=!0),F||(ne=O("autorange",H=j.getAutorangeDflt(U))),z.autorange=ne,ne&&(a(O,ne,U),N!=="linear"&&N!=="-"||O("rangemode"),j.isReversed()&&(j._m=-1)),j.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(N==="date"){M.log("Polar plots do not support date angular axes yet.");for(var $=0;$<E.length;$++)E[$].visible=!1;N=z.type=j.type="linear"}O(N==="linear"?"thetaunit":"period");var K=O("direction");O("rotation",{counterclockwise:0,clockwise:90}[K])}if(i(z,j,O,j.type,{tickSuffixDflt:j.thetaunit==="degrees"?"":void 0}),W){var Q,Z,X,te,ae,se,ce,fe,pe,ge,me=_.font||{};Z=(Q=O("color"))===z.color?Q:me.color,X=me.size,te=me.family,ae=me.weight,se=me.style,ce=me.variant,fe=me.textcase,pe=me.lineposition,ge=me.shadow,f(z,j,O,j.type),t(z,j,O,j.type,{font:{weight:ae,style:se,variant:ce,textcase:fe,lineposition:pe,shadow:ge,color:Z,size:X,family:te},noAutotickangles:w==="angularaxis",noTicklabelshift:!0,noTicklabelstandoff:!0}),o(z,j,O,{outerTicks:!0}),r(z,j,O,{dfltColor:Q,bgColor:_.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:u[w]}),O("layer"),w==="radialaxis"&&(O("side"),O("angle",S[0]),O("title.text"),M.coerceFont(O,"title.font",{weight:ae,style:se,variant:ce,textcase:fe,lineposition:pe,shadow:ge,color:Z,size:M.bigFont(X),family:te}))}N!=="category"&&O("hoverformat"),j._input=z}y.angularaxis.type==="category"&&m("gridshape")}function v(g,y,m,_,d,S){var w=m("autotypenumbers",S.autotypenumbersDflt);if(m("type")==="-"){for(var E,C=0;C<_.length;C++)if(_[C].visible){E=_[C];break}E&&E[d]&&(y.type=l(E[d],"gregorian",{noMultiCategory:!0,autotypenumbers:w})),y.type==="-"?y.type="linear":g.type=y.type}return y.type}ee.exports=function(g,y,m){T(g,y,m,{type:c.name,attributes:u,handleDefaults:p,font:y.font,autotypenumbersDflt:y.autotypenumbers,paper_bgcolor:y.paper_bgcolor,fullData:m,layoutOut:y})}},62400:function(ee,R,e){var M=e(33428),k=e(49760),s=e(24040),T=e(3400),b=T.strRotate,f=T.strTranslate,o=e(76308),t=e(43616),i=e(7316),n=e(54460),r=e(78344),a=e(57696),l=e(19280).doAutoRange,u=e(51184),h=e(86476),c=e(93024),x=e(81668),p=e(22676).prepSelect,v=e(22676).selectOnClick,g=e(22676).clearOutline,y=e(93972),m=e(73696),_=e(39172).redrawReglTraces,d=e(84284).MID_SHIFT,S=e(39360),w=e(57384),E=e(36416),C=E.smith,O=E.reactanceArc,P=E.resistanceArc,z=E.smithTransform,j=T._,I=T.mod,N=T.deg2rad,W=T.rad2deg;function F(K,Q,Z){this.isSmith=Z||!1,this.id=Q,this.gd=K,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var X=K._fullLayout,te="clip"+X._uid+Q;this.clipIds.forTraces=te+"-for-traces",this.clipPaths.forTraces=X._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=X["_"+(Z?"smith":"polar")+"layer"].append("g").attr("class",Q),this.getHole=function(ae){return this.isSmith?0:ae.hole},this.getSector=function(ae){return this.isSmith?[0,360]:ae.sector},this.getRadial=function(ae){return this.isSmith?ae.realaxis:ae.radialaxis},this.getAngular=function(ae){return this.isSmith?ae.imaginaryaxis:ae.angularaxis},Z||(this.radialTickLayout=null,this.angularTickLayout=null)}var U=F.prototype;function H(K){var Q=K.ticks+String(K.ticklen)+String(K.showticklabels);return"side"in K&&(Q+=K.side),Q}function ne(K,Q){return Q[T.findIndexOfMin(Q,function(Z){return T.angleDist(K,Z)})]}function $(K,Q,Z){return Q?(K.attr("display",null),K.attr(Z)):K&&K.attr("display","none"),K}ee.exports=function(K,Q,Z){return new F(K,Q,Z)},U.plot=function(K,Q){for(var Z=this,X=Q[Z.id],te=!1,ae=0;ae<K.length;ae++)if(K[ae][0].trace.cliponaxis===!1){te=!0;break}Z._hasClipOnAxisFalse=te,Z.updateLayers(Q,X),Z.updateLayout(Q,X),i.generalUpdatePerTraceModule(Z.gd,Z,K,X),Z.updateFx(Q,X),Z.isSmith&&(delete X.realaxis.range,delete X.imaginaryaxis.range)},U.updateLayers=function(K,Q){var Z=this,X=Z.isSmith,te=Z.layers,ae=Z.getRadial(Q),se=Z.getAngular(Q),ce=S.layerNames,fe=ce.indexOf("frontplot"),pe=ce.slice(0,fe),ge=se.layer==="below traces",me=ae.layer==="below traces";ge&&pe.push("angular-line"),me&&pe.push("radial-line"),ge&&pe.push("angular-axis"),me&&pe.push("radial-axis"),pe.push("frontplot"),ge||pe.push("angular-line"),me||pe.push("radial-line"),ge||pe.push("angular-axis"),me||pe.push("radial-axis");var be=(X?"smith":"polar")+"sublayer",ke=Z.framework.selectAll("."+be).data(pe,String);ke.enter().append("g").attr("class",function(ze){return be+" "+ze}).each(function(ze){var ve=te[ze]=M.select(this);switch(ze){case"frontplot":X||ve.append("g").classed("barlayer",!0),ve.append("g").classed("scatterlayer",!0);break;case"backplot":ve.append("g").classed("maplayer",!0);break;case"plotbg":te.bg=ve.append("path");break;case"radial-grid":case"angular-grid":ve.style("fill","none");break;case"radial-line":ve.append("line").style("fill","none");break;case"angular-line":ve.append("path").style("fill","none")}}),ke.order()},U.updateLayout=function(K,Q){var Z=this,X=Z.layers,te=K._size,ae=Z.getRadial(Q),se=Z.getAngular(Q),ce=Q.domain.x,fe=Q.domain.y;Z.xOffset=te.l+te.w*ce[0],Z.yOffset=te.t+te.h*(1-fe[1]);var pe=Z.xLength=te.w*(ce[1]-ce[0]),ge=Z.yLength=te.h*(fe[1]-fe[0]),me=Z.getSector(Q);Z.sectorInRad=me.map(N);var be,ke,ze,ve,oe,ie=Z.sectorBBox=function(tt){var nt,ht=tt[0],vt=tt[1]-ht,pt=I(ht,360),Qe=pt+vt,Ke=Math.cos(N(pt)),Mt=Math.sin(N(pt)),Ot=Math.cos(N(Qe)),Pt=Math.sin(N(Qe));return nt=pt<=90&&Qe>=90||pt>90&&Qe>=450?1:Mt<=0&&Pt<=0?0:Math.max(Mt,Pt),[pt<=180&&Qe>=180||pt>180&&Qe>=540?-1:Ke>=0&&Ot>=0?0:Math.min(Ke,Ot),pt<=270&&Qe>=270||pt>270&&Qe>=630?-1:Mt>=0&&Pt>=0?0:Math.min(Mt,Pt),Qe>=360?1:Ke<=0&&Ot<=0?0:Math.max(Ke,Ot),nt]}(me),he=ie[2]-ie[0],Se=ie[3]-ie[1],ye=ge/pe,we=Math.abs(Se/he);ye>we?(be=pe,oe=(ge-(ke=pe*we))/te.h/2,ze=[ce[0],ce[1]],ve=[fe[0]+oe,fe[1]-oe]):(ke=ge,oe=(pe-(be=ge/we))/te.w/2,ze=[ce[0]+oe,ce[1]-oe],ve=[fe[0],fe[1]]),Z.xLength2=be,Z.yLength2=ke,Z.xDomain2=ze,Z.yDomain2=ve;var Me,Oe=Z.xOffset2=te.l+te.w*ze[0],Ie=Z.yOffset2=te.t+te.h*(1-ve[1]),de=Z.radius=be/he,_e=Z.innerRadius=Z.getHole(Q)*de,Ae=Z.cx=Oe-de*ie[0],Pe=Z.cy=Ie+de*ie[3],Ee=Z.cxx=Ae-Oe,Fe=Z.cyy=Pe-Ie,Ve=ae.side;Ve==="counterclockwise"?(Me=Ve,Ve="top"):Ve==="clockwise"&&(Me=Ve,Ve="bottom"),Z.radialAxis=Z.mockAxis(K,Q,ae,{_id:"x",side:Ve,_trueSide:Me,domain:[_e/te.w,de/te.w]}),Z.angularAxis=Z.mockAxis(K,Q,se,{side:"right",domain:[0,Math.PI],autorange:!1}),Z.doAutoRange(K,Q),Z.updateAngularAxis(K,Q),Z.updateRadialAxis(K,Q),Z.updateRadialAxisTitle(K,Q),Z.xaxis=Z.mockCartesianAxis(K,Q,{_id:"x",domain:ze}),Z.yaxis=Z.mockCartesianAxis(K,Q,{_id:"y",domain:ve});var Ye=Z.pathSubplot();Z.clipPaths.forTraces.select("path").attr("d",Ye).attr("transform",f(Ee,Fe)),X.frontplot.attr("transform",f(Oe,Ie)).call(t.setClipUrl,Z._hasClipOnAxisFalse?null:Z.clipIds.forTraces,Z.gd),X.bg.attr("d",Ye).attr("transform",f(Ae,Pe)).call(o.fill,Q.bgcolor)},U.mockAxis=function(K,Q,Z,X){var te=T.extendFlat({},Z,X);return a(te,Q,K),te},U.mockCartesianAxis=function(K,Q,Z){var X=this,te=X.isSmith,ae=Z._id,se=T.extendFlat({type:"linear"},Z);r(se,K);var ce={x:[0,2],y:[1,3]};return se.setRange=function(){var fe=X.sectorBBox,pe=ce[ae],ge=X.radialAxis._rl,me=(ge[1]-ge[0])/(1-X.getHole(Q));se.range=[fe[pe[0]]*me,fe[pe[1]]*me]},se.isPtWithinRange=ae!=="x"||te?function(){return!0}:function(fe){return X.isPtInside(fe)},se.setRange(),se.setScale(),se},U.doAutoRange=function(K,Q){var Z=this,X=Z.gd,te=Z.radialAxis,ae=Z.getRadial(Q);l(X,te);var se=te.range;if(ae.range=se.slice(),ae._input.range=se.slice(),te._rl=[te.r2l(se[0],null,"gregorian"),te.r2l(se[1],null,"gregorian")],te.minallowed!==void 0){var ce=te.r2l(te.minallowed);te._rl[0]>te._rl[1]?te._rl[1]=Math.max(te._rl[1],ce):te._rl[0]=Math.max(te._rl[0],ce)}if(te.maxallowed!==void 0){var fe=te.r2l(te.maxallowed);te._rl[0]<te._rl[1]?te._rl[1]=Math.min(te._rl[1],fe):te._rl[0]=Math.min(te._rl[0],fe)}},U.updateRadialAxis=function(K,Q){var Z=this,X=Z.gd,te=Z.layers,ae=Z.radius,se=Z.innerRadius,ce=Z.cx,fe=Z.cy,pe=Z.getRadial(Q),ge=I(Z.getSector(Q)[0],360),me=Z.radialAxis,be=se<ae,ke=Z.isSmith;ke||(Z.fillViewInitialKey("radialaxis.angle",pe.angle),Z.fillViewInitialKey("radialaxis.range",me.range.slice()),me.setGeometry()),me.tickangle==="auto"&&ge>90&&ge<=270&&(me.tickangle=180);var ze=ke?function(Ie){var de=z(Z,C([Ie.x,0]));return f(de[0]-ce,de[1]-fe)}:function(Ie){return f(me.l2p(Ie.x)+se,0)},ve=ke?function(Ie){return P(Z,Ie.x,-1/0,1/0)}:function(Ie){return Z.pathArc(me.r2p(Ie.x)+se)},oe=H(pe);if(Z.radialTickLayout!==oe&&(te["radial-axis"].selectAll(".xtick").remove(),Z.radialTickLayout=oe),be){me.setScale();var ie=0,he=ke?(me.tickvals||[]).filter(function(Ie){return Ie>=0}).map(function(Ie){return n.tickText(me,Ie,!0,!1)}):n.calcTicks(me),Se=ke?he:n.clipEnds(me,he),ye=n.getTickSigns(me)[2];ke&&((me.ticks==="top"&&me.side==="bottom"||me.ticks==="bottom"&&me.side==="top")&&(ye=-ye),me.ticks==="top"&&me.side==="top"&&(ie=-me.ticklen),me.ticks==="bottom"&&me.side==="bottom"&&(ie=me.ticklen)),n.drawTicks(X,me,{vals:he,layer:te["radial-axis"],path:n.makeTickPath(me,0,ye),transFn:ze,crisp:!1}),n.drawGrid(X,me,{vals:Se,layer:te["radial-grid"],path:ve,transFn:T.noop,crisp:!1}),n.drawLabels(X,me,{vals:he,layer:te["radial-axis"],transFn:ze,labelFns:n.makeLabelFns(me,ie)})}var we=Z.radialAxisAngle=Z.vangles?W(ne(N(pe.angle),Z.vangles)):pe.angle,Me=f(ce,fe),Oe=Me+b(-we);$(te["radial-axis"],be&&(pe.showticklabels||pe.ticks),{transform:Oe}),$(te["radial-grid"],be&&pe.showgrid,{transform:ke?"":Me}),$(te["radial-line"].select("line"),be&&pe.showline,{x1:ke?-ae:se,y1:0,x2:ae,y2:0,transform:Oe}).attr("stroke-width",pe.linewidth).call(o.stroke,pe.linecolor)},U.updateRadialAxisTitle=function(K,Q,Z){if(!this.isSmith){var X=this,te=X.gd,ae=X.radius,se=X.cx,ce=X.cy,fe=X.getRadial(Q),pe=X.id+"title",ge=0;if(fe.title){var me=t.bBox(X.layers["radial-axis"].node()).height,be=fe.title.font.size,ke=fe.side;ge=ke==="top"?be:ke==="counterclockwise"?-(me+.4*be):me+.8*be}var ze=Z!==void 0?Z:X.radialAxisAngle,ve=N(ze),oe=Math.cos(ve),ie=Math.sin(ve),he=se+ae/2*oe+ge*ie,Se=ce-ae/2*ie+ge*oe;X.layers["radial-axis-title"]=x.draw(te,pe,{propContainer:fe,propName:X.id+".radialaxis.title",placeholder:j(te,"Click to enter radial axis title"),attributes:{x:he,y:Se,"text-anchor":"middle"},transform:{rotate:-ze}})}},U.updateAngularAxis=function(K,Q){var Z=this,X=Z.gd,te=Z.layers,ae=Z.radius,se=Z.innerRadius,ce=Z.cx,fe=Z.cy,pe=Z.getAngular(Q),ge=Z.angularAxis,me=Z.isSmith;me||(Z.fillViewInitialKey("angularaxis.rotation",pe.rotation),ge.setGeometry(),ge.setScale());var be=me?function(Ie){var de=z(Z,C([0,Ie.x]));return Math.atan2(de[0]-ce,de[1]-fe)-Math.PI/2}:function(Ie){return ge.t2g(Ie.x)};ge.type==="linear"&&ge.thetaunit==="radians"&&(ge.tick0=W(ge.tick0),ge.dtick=W(ge.dtick));var ke=function(Ie){return f(ce+ae*Math.cos(Ie),fe-ae*Math.sin(Ie))},ze=me?function(Ie){var de=z(Z,C([0,Ie.x]));return f(de[0],de[1])}:function(Ie){return ke(be(Ie))},ve=me?function(Ie){var de=z(Z,C([0,Ie.x])),_e=Math.atan2(de[0]-ce,de[1]-fe)-Math.PI/2;return f(de[0],de[1])+b(-W(_e))}:function(Ie){var de=be(Ie);return ke(de)+b(-W(de))},oe=me?function(Ie){return O(Z,Ie.x,0,1/0)}:function(Ie){var de=be(Ie),_e=Math.cos(de),Ae=Math.sin(de);return"M"+[ce+se*_e,fe-se*Ae]+"L"+[ce+ae*_e,fe-ae*Ae]},ie=n.makeLabelFns(ge,0).labelStandoff,he={xFn:function(Ie){var de=be(Ie);return Math.cos(de)*ie},yFn:function(Ie){var de=be(Ie),_e=Math.sin(de)>0?.2:1;return-Math.sin(de)*(ie+Ie.fontSize*_e)+Math.abs(Math.cos(de))*(Ie.fontSize*d)},anchorFn:function(Ie){var de=be(Ie),_e=Math.cos(de);return Math.abs(_e)<.1?"middle":_e>0?"start":"end"},heightFn:function(Ie,de,_e){var Ae=be(Ie);return-.5*(1+Math.sin(Ae))*_e}},Se=H(pe);Z.angularTickLayout!==Se&&(te["angular-axis"].selectAll("."+ge._id+"tick").remove(),Z.angularTickLayout=Se);var ye,we=me?[1/0].concat(ge.tickvals||[]).map(function(Ie){return n.tickText(ge,Ie,!0,!1)}):n.calcTicks(ge);if(me&&(we[0].text="",we[0].fontSize*=1.75),Q.gridshape==="linear"?(ye=we.map(be),T.angleDelta(ye[0],ye[1])<0&&(ye=ye.slice().reverse())):ye=null,Z.vangles=ye,ge.type==="category"&&(we=we.filter(function(Ie){return T.isAngleInsideSector(be(Ie),Z.sectorInRad)})),ge.visible){var Me=ge.ticks==="inside"?-1:1,Oe=(ge.linewidth||1)/2;n.drawTicks(X,ge,{vals:we,layer:te["angular-axis"],path:"M"+Me*Oe+",0h"+Me*ge.ticklen,transFn:ve,crisp:!1}),n.drawGrid(X,ge,{vals:we,layer:te["angular-grid"],path:oe,transFn:T.noop,crisp:!1}),n.drawLabels(X,ge,{vals:we,layer:te["angular-axis"],repositionOnUpdate:!0,transFn:ze,labelFns:he})}$(te["angular-line"].select("path"),pe.showline,{d:Z.pathSubplot(),transform:f(ce,fe)}).attr("stroke-width",pe.linewidth).call(o.stroke,pe.linecolor)},U.updateFx=function(K,Q){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(K),this.updateRadialDrag(K,Q,0),this.updateRadialDrag(K,Q,1)),this.updateHoverAndMainDrag(K))},U.updateHoverAndMainDrag=function(K){var Q,Z,X=this,te=X.isSmith,ae=X.gd,se=X.layers,ce=K._zoomlayer,fe=S.MINZOOM,pe=S.OFFEDGE,ge=X.radius,me=X.innerRadius,be=X.cx,ke=X.cy,ze=X.cxx,ve=X.cyy,oe=X.sectorInRad,ie=X.vangles,he=X.radialAxis,Se=w.clampTiny,ye=w.findXYatLength,we=w.findEnclosingVertexAngles,Me=S.cornerHalfWidth,Oe=S.cornerLen/2,Ie=u.makeDragger(se,"path","maindrag",K.dragmode===!1?"none":"crosshair");M.select(Ie).attr("d",X.pathSubplot()).attr("transform",f(be,ke)),Ie.onmousemove=function(it){c.hover(ae,it,X.id),ae._fullLayout._lasthover=Ie,ae._fullLayout._hoversubplot=X.id},Ie.onmouseout=function(it){ae._dragging||h.unhover(ae,it)};var de,_e,Ae,Pe,Ee,Fe,Ve,Ye,tt,nt={element:Ie,gd:ae,subplot:X.id,plotinfo:{id:X.id,xaxis:X.xaxis,yaxis:X.yaxis},xaxes:[X.xaxis],yaxes:[X.yaxis]};function ht(it,dt){return Math.sqrt(it*it+dt*dt)}function vt(it,dt){return ht(it-ze,dt-ve)}function pt(it,dt){return Math.atan2(ve-dt,it-ze)}function Qe(it,dt){return[it*Math.cos(dt),it*Math.sin(-dt)]}function Ke(it,dt){if(it===0)return X.pathSector(2*Me);var gt=Oe/it,je=dt-gt,Re=dt+gt,rt=Math.max(0,Math.min(it,ge)),ct=rt-Me,ut=rt+Me;return"M"+Qe(ct,je)+"A"+[ct,ct]+" 0,0,0 "+Qe(ct,Re)+"L"+Qe(ut,Re)+"A"+[ut,ut]+" 0,0,1 "+Qe(ut,je)+"Z"}function Mt(it,dt,gt){if(it===0)return X.pathSector(2*Me);var je,Re,rt=Qe(it,dt),ct=Qe(it,gt),ut=Se((rt[0]+ct[0])/2),et=Se((rt[1]+ct[1])/2);if(ut&&et){var xt=et/ut,mt=-1/xt,Tt=ye(Me,xt,ut,et);je=ye(Oe,mt,Tt[0][0],Tt[0][1]),Re=ye(Oe,mt,Tt[1][0],Tt[1][1])}else{var yt,bt;et?(yt=Oe,bt=Me):(yt=Me,bt=Oe),je=[[ut-yt,et-bt],[ut+yt,et-bt]],Re=[[ut-yt,et+bt],[ut+yt,et+bt]]}return"M"+je.join("L")+"L"+Re.reverse().join("L")+"Z"}function Ot(it,dt){return dt=Math.max(Math.min(dt,ge),me),it<pe?it=0:ge-it<pe?it=ge:dt<pe?dt=0:ge-dt<pe&&(dt=ge),Math.abs(dt-it)>fe?(it<dt?(Ae=it,Pe=dt):(Ae=dt,Pe=it),!0):(Ae=null,Pe=null,!1)}function Pt(it,dt){it=it||Ee,dt=dt||"M0,0Z",Ye.attr("d",it),tt.attr("d",dt),u.transitionZoombox(Ye,tt,Fe,Ve),Fe=!0;var gt={};Ge(gt),ae.emit("plotly_relayouting",gt)}function St(it,dt){var gt,je,Re=de+(it*=Q),rt=_e+(dt*=Z),ct=vt(de,_e),ut=Math.min(vt(Re,rt),ge),et=pt(de,_e);Ot(ct,ut)&&(gt=Ee+X.pathSector(Pe),Ae&&(gt+=X.pathSector(Ae)),je=Ke(Ae,et)+Ke(Pe,et)),Pt(gt,je)}function He(it,dt,gt,je){var Re=w.findIntersectionXY(gt,je,gt,[it-ze,ve-dt]);return ht(Re[0],Re[1])}function We(it,dt){var gt,je,Re=de+it,rt=_e+dt,ct=pt(de,_e),ut=pt(Re,rt),et=we(ct,ie),xt=we(ut,ie);Ot(He(de,_e,et[0],et[1]),Math.min(He(Re,rt,xt[0],xt[1]),ge))&&(gt=Ee+X.pathSector(Pe),Ae&&(gt+=X.pathSector(Ae)),je=[Mt(Ae,et[0],et[1]),Mt(Pe,et[0],et[1])].join(" ")),Pt(gt,je)}function Be(){if(u.removeZoombox(ae),Ae!==null&&Pe!==null){var it={};Ge(it),u.showDoubleClickNotifier(ae),s.call("_guiRelayout",ae,it)}}function Ge(it){var dt=he._rl,gt=(dt[1]-dt[0])/(1-me/ge)/ge,je=[dt[0]+(Ae-me)*gt,dt[0]+(Pe-me)*gt];it[X.id+".radialaxis.range"]=je}function ot(it,dt){var gt=ae._fullLayout.clickmode;if(u.removeZoombox(ae),it===2){var je={};for(var Re in X.viewInitial)je[X.id+"."+Re]=X.viewInitial[Re];ae.emit("plotly_doubleclick",null),s.call("_guiRelayout",ae,je)}gt.indexOf("select")>-1&&it===1&&v(dt,ae,[X.xaxis],[X.yaxis],X.id,nt),gt.indexOf("event")>-1&&c.click(ae,dt,X.id)}nt.prepFn=function(it,dt,gt){var je=ae._fullLayout.dragmode,Re=Ie.getBoundingClientRect();ae._fullLayout._calcInverseTransform(ae);var rt=ae._fullLayout._invTransform;Q=ae._fullLayout._invScaleX,Z=ae._fullLayout._invScaleY;var ct=T.apply3DTransform(rt)(dt-Re.left,gt-Re.top);if(de=ct[0],_e=ct[1],ie){var ut=w.findPolygonOffset(ge,oe[0],oe[1],ie);de+=ze+ut[0],_e+=ve+ut[1]}switch(je){case"zoom":nt.clickFn=ot,te||(nt.moveFn=ie?We:St,nt.doneFn=Be,function(){Ae=null,Pe=null,Ee=X.pathSubplot(),Fe=!1;var et=ae._fullLayout[X.id];Ve=k(et.bgcolor).getLuminance(),(Ye=u.makeZoombox(ce,Ve,be,ke,Ee)).attr("fill-rule","evenodd"),tt=u.makeCorners(ce,be,ke),g(ae)}());break;case"select":case"lasso":p(it,dt,gt,nt,je)}},h.init(nt)},U.updateRadialDrag=function(K,Q,Z){var X=this,te=X.gd,ae=X.layers,se=X.radius,ce=X.innerRadius,fe=X.cx,pe=X.cy,ge=X.radialAxis,me=S.radialDragBoxSize,be=me/2;if(ge.visible){var ke,ze,ve,oe=N(X.radialAxisAngle),ie=ge._rl,he=ie[0],Se=ie[1],ye=ie[Z],we=.75*(ie[1]-ie[0])/(1-X.getHole(Q))/se;Z?(ke=fe+(se+be)*Math.cos(oe),ze=pe-(se+be)*Math.sin(oe),ve="radialdrag"):(ke=fe+(ce-be)*Math.cos(oe),ze=pe-(ce-be)*Math.sin(oe),ve="radialdrag-inner");var Me,Oe,Ie,de=u.makeRectDragger(ae,ve,"crosshair",-be,-be,me,me),_e={element:de,gd:te};K.dragmode===!1&&(_e.dragmode=!1),$(M.select(de),ge.visible&&ce<se,{transform:f(ke,ze)}),_e.prepFn=function(){Me=null,Oe=null,Ie=null,_e.moveFn=Ae,_e.doneFn=Pe,g(te)},_e.clampFn=function(Ve,Ye){return Math.sqrt(Ve*Ve+Ye*Ye)<S.MINDRAG&&(Ve=0,Ye=0),[Ve,Ye]},h.init(_e)}function Ae(Ve,Ye){if(Me)Me(Ve,Ye);else{var tt=[Ve,-Ye],nt=[Math.cos(oe),Math.sin(oe)],ht=Math.abs(T.dot(tt,nt)/Math.sqrt(T.dot(tt,tt)));isNaN(ht)||(Me=ht<.5?Ee:Fe)}var vt={};(function(pt){Oe!==null?pt[X.id+".radialaxis.angle"]=Oe:Ie!==null&&(pt[X.id+".radialaxis.range["+Z+"]"]=Ie)})(vt),te.emit("plotly_relayouting",vt)}function Pe(){Oe!==null?s.call("_guiRelayout",te,X.id+".radialaxis.angle",Oe):Ie!==null&&s.call("_guiRelayout",te,X.id+".radialaxis.range["+Z+"]",Ie)}function Ee(Ve,Ye){if(Z!==0){var tt=ke+Ve,nt=ze+Ye;Oe=Math.atan2(pe-nt,tt-fe),X.vangles&&(Oe=ne(Oe,X.vangles)),Oe=W(Oe);var ht=f(fe,pe)+b(-Oe);ae["radial-axis"].attr("transform",ht),ae["radial-line"].select("line").attr("transform",ht);var vt=X.gd._fullLayout,pt=vt[X.id];X.updateRadialAxisTitle(vt,pt,Oe)}}function Fe(Ve,Ye){var tt=T.dot([Ve,-Ye],[Math.cos(oe),Math.sin(oe)]);if(Ie=ye-we*tt,we>0==(Z?Ie>he:Ie<Se)){var nt=te._fullLayout,ht=nt[X.id];ge.range[Z]=Ie,ge._rl[Z]=Ie,X.updateRadialAxis(nt,ht),X.xaxis.setRange(),X.xaxis.setScale(),X.yaxis.setRange(),X.yaxis.setScale();var vt=!1;for(var pt in X.traceHash){var Qe=X.traceHash[pt],Ke=T.filterVisible(Qe);Qe[0][0].trace._module.plot(te,X,Ke,ht),s.traceIs(pt,"gl")&&Ke.length&&(vt=!0)}vt&&(m(te),_(te))}else Ie=null}},U.updateAngularDrag=function(K){var Q=this,Z=Q.gd,X=Q.layers,te=Q.radius,ae=Q.angularAxis,se=Q.cx,ce=Q.cy,fe=Q.cxx,pe=Q.cyy,ge=S.angularDragBoxSize,me=u.makeDragger(X,"path","angulardrag",K.dragmode===!1?"none":"move"),be={element:me,gd:Z};function ke(_e,Ae){return Math.atan2(pe+ge-Ae,_e-fe-ge)}K.dragmode===!1?be.dragmode=!1:M.select(me).attr("d",Q.pathAnnulus(te,te+ge)).attr("transform",f(se,ce)).call(y,"move");var ze,ve,oe,ie,he,Se,ye=X.frontplot.select(".scatterlayer").selectAll(".trace"),we=ye.selectAll(".point"),Me=ye.selectAll(".textpoint");function Oe(_e,Ae){var Pe=Q.gd._fullLayout,Ee=Pe[Q.id],Fe=ke(ze+_e*K._invScaleX,ve+Ae*K._invScaleY),Ve=W(Fe-Se);if(ie=oe+Ve,X.frontplot.attr("transform",f(Q.xOffset2,Q.yOffset2)+b([-Ve,fe,pe])),Q.vangles){he=Q.radialAxisAngle+Ve;var Ye=f(se,ce)+b(-Ve),tt=f(se,ce)+b(-he);X.bg.attr("transform",Ye),X["radial-grid"].attr("transform",Ye),X["radial-axis"].attr("transform",tt),X["radial-line"].select("line").attr("transform",tt),Q.updateRadialAxisTitle(Pe,Ee,he)}else Q.clipPaths.forTraces.select("path").attr("transform",f(fe,pe)+b(Ve));we.each(function(){var Ke=M.select(this),Mt=t.getTranslate(Ke);Ke.attr("transform",f(Mt.x,Mt.y)+b([Ve]))}),Me.each(function(){var Ke=M.select(this),Mt=Ke.select("text"),Ot=t.getTranslate(Ke);Ke.attr("transform",b([Ve,Mt.attr("x"),Mt.attr("y")])+f(Ot.x,Ot.y))}),ae.rotation=T.modHalf(ie,360),Q.updateAngularAxis(Pe,Ee),Q._hasClipOnAxisFalse&&!T.isFullCircle(Q.sectorInRad)&&ye.call(t.hideOutsideRangePoints,Q);var nt=!1;for(var ht in Q.traceHash)if(s.traceIs(ht,"gl")){var vt=Q.traceHash[ht],pt=T.filterVisible(vt);vt[0][0].trace._module.plot(Z,Q,pt,Ee),pt.length&&(nt=!0)}nt&&(m(Z),_(Z));var Qe={};Ie(Qe),Z.emit("plotly_relayouting",Qe)}function Ie(_e){_e[Q.id+".angularaxis.rotation"]=ie,Q.vangles&&(_e[Q.id+".radialaxis.angle"]=he)}function de(){Me.select("text").attr("transform",null);var _e={};Ie(_e),s.call("_guiRelayout",Z,_e)}be.prepFn=function(_e,Ae,Pe){var Ee=K[Q.id];oe=Ee.angularaxis.rotation;var Fe=me.getBoundingClientRect();ze=Ae-Fe.left,ve=Pe-Fe.top,Z._fullLayout._calcInverseTransform(Z);var Ve=T.apply3DTransform(K._invTransform)(ze,ve);ze=Ve[0],ve=Ve[1],Se=ke(ze,ve),be.moveFn=Oe,be.doneFn=de,g(Z)},Q.vangles&&!T.isFullCircle(Q.sectorInRad)&&(be.prepFn=T.noop,y(M.select(me),null)),h.init(be)},U.isPtInside=function(K){if(this.isSmith)return!0;var Q=this.sectorInRad,Z=this.vangles,X=this.angularAxis.c2g(K.theta),te=this.radialAxis,ae=te.c2l(K.r),se=te._rl;return(Z?w.isPtInsidePolygon:T.isPtInsideSector)(ae,X,se,Q,Z)},U.pathArc=function(K){var Q=this.sectorInRad,Z=this.vangles;return(Z?w.pathPolygon:T.pathArc)(K,Q[0],Q[1],Z)},U.pathSector=function(K){var Q=this.sectorInRad,Z=this.vangles;return(Z?w.pathPolygon:T.pathSector)(K,Q[0],Q[1],Z)},U.pathAnnulus=function(K,Q){var Z=this.sectorInRad,X=this.vangles;return(X?w.pathPolygonAnnulus:T.pathAnnulus)(K,Q,Z[0],Z[1],X)},U.pathSubplot=function(){var K=this.innerRadius,Q=this.radius;return K?this.pathAnnulus(K,Q):this.pathSector(Q)},U.fillViewInitialKey=function(K,Q){K in this.viewInitial||(this.viewInitial[K]=Q)}},57696:function(ee,R,e){var M=e(3400),k=e(78344),s=M.deg2rad,T=M.rad2deg;ee.exports=function(b,f,o){switch(k(b,o),b._id){case"x":case"radialaxis":(function(t,i){var n=i._subplot;t.setGeometry=function(){var r=t._rl[0],a=t._rl[1],l=n.innerRadius,u=(n.radius-l)/(a-r),h=l/u,c=r>a?function(x){return x<=0}:function(x){return x>=0};t.c2g=function(x){var p=t.c2l(x)-r;return(c(p)?p:0)+h},t.g2c=function(x){return t.l2c(x+r-h)},t.g2p=function(x){return x*u},t.c2p=function(x){return t.g2p(t.c2g(x))}}})(b,f);break;case"angularaxis":(function(t,i){var n=t.type;if(n==="linear"){var r=t.d2c,a=t.c2d;t.d2c=function(l,u){return function(h,c){return c==="degrees"?s(h):h}(r(l),u)},t.c2d=function(l,u){return a(function(h,c){return c==="degrees"?T(h):h}(l,u))}}t.makeCalcdata=function(l,u){var h,c,x=l[u],p=l._length,v=function(d){return t.d2c(d,l.thetaunit)};if(x)for(h=new Array(p),c=0;c<p;c++)h[c]=v(x[c]);else{var g=u+"0",y="d"+u,m=g in l?v(l[g]):0,_=l[y]?v(l[y]):(t.period||2*Math.PI)/p;for(h=new Array(p),c=0;c<p;c++)h[c]=m+c*_}return h},t.setGeometry=function(){var l,u,h,c,x=i.sector,p=x.map(s),v={clockwise:-1,counterclockwise:1}[t.direction],g=s(t.rotation),y=function(S){return v*S+g},m=function(S){return(S-g)/v};switch(n){case"linear":u=l=M.identity,c=s,h=T,t.range=M.isFullCircle(p)?[x[0],x[0]+360]:p.map(m).map(T);break;case"category":var _=t._categories.length,d=t.period?Math.max(t.period,_):_;d===0&&(d=1),u=c=function(S){return 2*S*Math.PI/d},l=h=function(S){return S*d/Math.PI/2},t.range=[0,d]}t.c2g=function(S){return y(u(S))},t.g2c=function(S){return l(m(S))},t.t2g=function(S){return y(c(S))},t.g2t=function(S){return h(m(S))}}})(b,f)}}},55012:function(ee){ee.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},36416:function(ee){function R(s){return s<0?-1:s>0?1:0}function e(s){var T=s[0],b=s[1];if(!isFinite(T)||!isFinite(b))return[1,0];var f=(T+1)*(T+1)+b*b;return[(T*T+b*b-1)/f,2*b/f]}function M(s,T){var b=T[0],f=T[1];return[b*s.radius+s.cx,-f*s.radius+s.cy]}function k(s,T){return T*s.radius}ee.exports={smith:e,reactanceArc:function(s,T,b,f){var o=M(s,e([b,T])),t=o[0],i=o[1],n=M(s,e([f,T])),r=n[0],a=n[1];if(T===0)return["M"+t+","+i,"L"+r+","+a].join(" ");var l=k(s,1/Math.abs(T));return["M"+t+","+i,"A"+l+","+l+" 0 0,"+(T<0?1:0)+" "+r+","+a].join(" ")},resistanceArc:function(s,T,b,f){var o=k(s,1/(T+1)),t=M(s,e([T,b])),i=t[0],n=t[1],r=M(s,e([T,f])),a=r[0],l=r[1];if(R(b)!==R(f)){var u=M(s,e([T,0]));return["M"+i+","+n,"A"+o+","+o+" 0 0,"+(0<b?0:1)+" "+u[0]+","+u[1],"A"+o+","+o+" 0 0,"+(f<0?0:1)+a+","+l].join(" ")}return["M"+i+","+n,"A"+o+","+o+" 0 0,"+(f<b?0:1)+" "+a+","+l].join(" ")},smithTransform:M}},47788:function(ee,R,e){var M=e(84888).KY,k=e(3400).counterRegex,s=e(62400),T=e(55012),b=T.attr,f=T.name,o=k(f),t={};t[b]={valType:"subplotid",dflt:f,editType:"calc"},ee.exports={attr:b,name:f,idRoot:f,idRegex:o,attrRegex:o,attributes:t,layoutAttributes:e(6183),supplyLayoutDefaults:e(22836),plot:function(i){for(var n=i._fullLayout,r=i.calcdata,a=n._subplots[f],l=0;l<a.length;l++){var u=a[l],h=M(r,f,u),c=n[u]._subplot;c||(c=s(i,u,!0),n[u]._subplot=c),c.plot(h,n,i._promises)}},clean:function(i,n,r,a){for(var l=a._subplots[f]||[],u=0;u<l.length;u++){var h=l[u],c=a[h]._subplot;if(!n[h]&&c)for(var x in c.framework.remove(),c.clipPaths)c.clipPaths[x].remove()}},toSVG:e(57952).toSVG}},6183:function(ee,R,e){var M=e(22548),k=e(94724),s=e(86968).u,T=e(3400).extendFlat,b=e(67824).overrideAll,f=b({color:k.color,showline:T({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:T({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,griddash:k.griddash},"plot","from-root"),o=b({ticklen:k.ticklen,tickwidth:T({},k.tickwidth,{dflt:2}),tickcolor:k.tickcolor,showticklabels:k.showticklabels,labelalias:k.labelalias,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,tickfont:k.tickfont,tickformat:k.tickformat,hoverformat:k.hoverformat,layer:k.layer},"plot","from-root"),t=T({visible:T({},k.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:T({},k.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},f,o),i=T({visible:T({},k.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:k.ticks,editType:"calc"},f,o);ee.exports={domain:s({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:M.background},realaxis:t,imaginaryaxis:i,editType:"calc"}},22836:function(ee,R,e){var M,k,s,T=e(3400),b=e(76308),f=e(31780),o=e(168),t=e(84888).op,i=e(42568),n=e(95936),r=e(42136),a=e(78344),l=e(6183),u=e(55012),h=u.axisNames,c=(M=function(p){return T.isTypedArray(p)&&(p=Array.from(p)),p.slice().reverse().map(function(v){return-v}).concat([0]).concat(p)},k=String,s={},function(p){var v=k?k(p):p;if(v in s)return s[v];var g=M(p);return s[v]=g,g});function x(p,v,g,y){var m=g("bgcolor");y.bgColor=b.combine(m,y.paper_bgcolor);var _,d=t(y.fullData,u.name,y.id),S=y.layoutOut;function w(U,H){return g(_+"."+U,H)}for(var E=0;E<h.length;E++){_=h[E],T.isPlainObject(p[_])||(p[_]={});var C=p[_],O=f.newContainer(v,_);O._id=O._name=_,O._attr=y.id+"."+_,O._traceIndices=d.map(function(U){return U._expandedIndex});var P=w("visible");if(O.type="linear",a(O,S),i(C,O,w,O.type),P){var z,j,I,N,W=_==="realaxis";W&&w("side"),W?w("tickvals"):w("tickvals",c(v.realaxis.tickvals||l.realaxis.tickvals.dflt)),T.isTypedArray(O.tickvals)&&(O.tickvals=Array.from(O.tickvals));var F=y.font||{};P&&(j=(z=w("color"))===C.color?z:F.color,I=F.size,N=F.family),n(C,O,w,O.type,{noAutotickangles:!0,noTicklabelshift:!0,noTicklabelstandoff:!0,noTicklabelstep:!0,noAng:!W,noExp:!0,font:{color:j,size:I,family:N}}),T.coerce2(p,v,l,_+".ticklen"),T.coerce2(p,v,l,_+".tickwidth"),T.coerce2(p,v,l,_+".tickcolor",v.color),w("ticks")||(delete v[_].ticklen,delete v[_].tickwidth,delete v[_].tickcolor),r(C,O,w,{dfltColor:z,bgColor:y.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:l[_]}),w("layer")}w("hoverformat"),delete O.type,O._input=C}}ee.exports=function(p,v,g){o(p,v,g,{noUirevision:!0,type:u.name,attributes:l,handleDefaults:x,font:v.font,paper_bgcolor:v.paper_bgcolor,fullData:g,layoutOut:v})}},168:function(ee,R,e){var M=e(3400),k=e(31780),s=e(86968).Q;ee.exports=function(T,b,f,o){var t,i,n=o.type,r=o.attributes,a=o.handleDefaults,l=o.partition||"x",u=b._subplots[n],h=u.length,c=h&&u[0].replace(/\d+$/,"");function x(y,m){return M.coerce(t,i,r,y,m)}for(var p=0;p<h;p++){var v=u[p];t=T[v]?T[v]:T[v]={},i=k.newContainer(b,v,c),o.noUirevision||x("uirevision",b.uirevision);var g={};g[l]=[p/h,(p+1)/h],s(i,b,x,g),o.id=v,a(t,i,x,o)}}},21776:function(ee,R,e){var M=e(26880);function k(s){var T=s.description?" "+s.description:"",b=s.keys||[];if(b.length>0){for(var f=[],o=0;o<b.length;o++)f[o]="`"+b[o]+"`";T+="Finally, the template string has access to ",T=b.length===1?T+"variable "+f[0]:T+"variables "+f.slice(0,-1).join(", ")+" and "+f.slice(-1)+"."}return T}M.FORMAT_LINK,M.DATE_FORMAT_LINK,R.Ks=function(s,T){s=s||{},k(T=T||{});var b={valType:"string",dflt:"",editType:s.editType||"none"};return s.arrayOk!==!1&&(b.arrayOk=!0),b},R.Gw=function(s,T){s=s||{},k(T=T||{});var b={valType:"string",dflt:"",editType:s.editType||"calc"};return s.arrayOk!==!1&&(b.arrayOk=!0),b},R.ye=function(s,T){return T=T||{},(s=s||{}).newshape,k(T),{valType:"string",dflt:"",editType:s.editType||"arraydraw"}}},19352:function(ee,R,e){var M=e(24696),k=e(84888).KY,s=e(3400).counterRegex,T="ternary";R.name=T;var b=R.attr="subplot";R.idRoot=T,R.idRegex=R.attrRegex=s(T),(R.attributes={})[b]={valType:"subplotid",dflt:"ternary",editType:"calc"},R.layoutAttributes=e(86379),R.supplyLayoutDefaults=e(38536),R.plot=function(f){for(var o=f._fullLayout,t=f.calcdata,i=o._subplots[T],n=0;n<i.length;n++){var r=i[n],a=k(t,T,r),l=o[r]._subplot;l||(l=new M({id:r,graphDiv:f,container:o._ternarylayer.node()},o),o[r]._subplot=l),l.plot(a,o,f._promises)}},R.clean=function(f,o,t,i){for(var n=i._subplots[T]||[],r=0;r<n.length;r++){var a=n[r],l=i[a]._subplot;!o[a]&&l&&(l.plotContainer.remove(),l.clipDef.remove(),l.clipDefRelative.remove(),l.layers["a-title"].remove(),l.layers["b-title"].remove(),l.layers["c-title"].remove())}}},86379:function(ee,R,e){var M=e(22548),k=e(86968).u,s=e(94724),T=e(67824).overrideAll,b=e(92880).extendFlat,f={title:{text:s.title.text,font:s.title.font},color:s.color,tickmode:s.minor.tickmode,nticks:b({},s.nticks,{dflt:6,min:1}),tick0:s.tick0,dtick:s.dtick,tickvals:s.tickvals,ticktext:s.ticktext,ticks:s.ticks,ticklen:s.ticklen,tickwidth:s.tickwidth,tickcolor:s.tickcolor,ticklabelstep:s.ticklabelstep,showticklabels:s.showticklabels,labelalias:s.labelalias,showtickprefix:s.showtickprefix,tickprefix:s.tickprefix,showticksuffix:s.showticksuffix,ticksuffix:s.ticksuffix,showexponent:s.showexponent,exponentformat:s.exponentformat,minexponent:s.minexponent,separatethousands:s.separatethousands,tickfont:s.tickfont,tickangle:s.tickangle,tickformat:s.tickformat,tickformatstops:s.tickformatstops,hoverformat:s.hoverformat,showline:b({},s.showline,{dflt:!0}),linecolor:s.linecolor,linewidth:s.linewidth,showgrid:b({},s.showgrid,{dflt:!0}),gridcolor:s.gridcolor,gridwidth:s.gridwidth,griddash:s.griddash,layer:s.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:s._deprecated.title,titlefont:s._deprecated.titlefont}},o=ee.exports=T({domain:k({name:"ternary"}),bgcolor:{valType:"color",dflt:M.background},sum:{valType:"number",dflt:1,min:0},aaxis:f,baxis:f,caxis:f},"plot","from-root");o.uirevision={valType:"any",editType:"none"},o.aaxis.uirevision=o.baxis.uirevision=o.caxis.uirevision={valType:"any",editType:"none"}},38536:function(ee,R,e){var M=e(76308),k=e(31780),s=e(3400),T=e(168),b=e(95936),f=e(42568),o=e(25404),t=e(26332),i=e(42136),n=e(86379),r=["aaxis","baxis","caxis"];function a(u,h,c,x){var p,v,g,y=c("bgcolor"),m=c("sum");x.bgColor=M.combine(y,x.paper_bgcolor);for(var _=0;_<r.length;_++)v=u[p=r[_]]||{},(g=k.newContainer(h,p))._name=p,l(v,g,x,h);var d=h.aaxis,S=h.baxis,w=h.caxis;d.min+S.min+w.min>=m&&(d.min=0,S.min=0,w.min=0,u.aaxis&&delete u.aaxis.min,u.baxis&&delete u.baxis.min,u.caxis&&delete u.caxis.min)}function l(u,h,c,x){var p=n[h._name];function v(S,w){return s.coerce(u,h,p,S,w)}v("uirevision",x.uirevision),h.type="linear";var g=v("color"),y=g!==p.color.dflt?g:c.font.color,m=h._name.charAt(0).toUpperCase(),_="Component "+m,d=v("title.text",_);h._hovertitle=d===_?d:m,s.coerceFont(v,"title.font",c.font,{overrideDflt:{size:s.bigFont(c.font.size),color:y}}),v("min"),t(u,h,v,"linear"),f(u,h,v,"linear"),b(u,h,v,"linear",{noAutotickangles:!0,noTicklabelshift:!0,noTicklabelstandoff:!0}),o(u,h,v,{outerTicks:!0}),v("showticklabels")&&(s.coerceFont(v,"tickfont",c.font,{overrideDflt:{color:y}}),v("tickangle"),v("tickformat")),i(u,h,v,{dfltColor:g,bgColor:c.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:p}),v("hoverformat"),v("layer")}ee.exports=function(u,h,c){T(u,h,c,{type:"ternary",attributes:n,handleDefaults:a,font:h.font,paper_bgcolor:h.paper_bgcolor})}},24696:function(ee,R,e){var M=e(33428),k=e(49760),s=e(24040),T=e(3400),b=T.strTranslate,f=T._,o=e(76308),t=e(43616),i=e(78344),n=e(92880).extendFlat,r=e(7316),a=e(54460),l=e(86476),u=e(93024),h=e(72760),c=h.freeMode,x=h.rectMode,p=e(81668),v=e(22676).prepSelect,g=e(22676).selectOnClick,y=e(22676).clearOutline,m=e(22676).clearSelectionsCache,_=e(33816);function d(I,N){this.id=I.id,this.graphDiv=I.graphDiv,this.init(N),this.makeFramework(N),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}ee.exports=d;var S=d.prototype;S.init=function(I){this.container=I._ternarylayer,this.defs=I._defs,this.layoutId=I._uid,this.traceHash={},this.layers={}},S.plot=function(I,N){var W=this,F=N[W.id],U=N._size;W._hasClipOnAxisFalse=!1;for(var H=0;H<I.length;H++)if(I[H][0].trace.cliponaxis===!1){W._hasClipOnAxisFalse=!0;break}W.updateLayers(F),W.adjustLayout(F,U),r.generalUpdatePerTraceModule(W.graphDiv,W,I,F),W.layers.plotbg.select("path").call(o.fill,F.bgcolor)},S.makeFramework=function(I){var N=this,W=N.graphDiv,F=I[N.id],U=N.clipId="clip"+N.layoutId+N.id,H=N.clipIdRelative="clip-relative"+N.layoutId+N.id;N.clipDef=T.ensureSingleById(I._clips,"clipPath",U,function(ne){ne.append("path").attr("d","M0,0Z")}),N.clipDefRelative=T.ensureSingleById(I._clips,"clipPath",H,function(ne){ne.append("path").attr("d","M0,0Z")}),N.plotContainer=T.ensureSingle(N.container,"g",N.id),N.updateLayers(F),t.setClipUrl(N.layers.backplot,U,W),t.setClipUrl(N.layers.grids,U,W)},S.updateLayers=function(I){var N=this.layers,W=["draglayer","plotbg","backplot","grids"];I.aaxis.layer==="below traces"&&W.push("aaxis","aline"),I.baxis.layer==="below traces"&&W.push("baxis","bline"),I.caxis.layer==="below traces"&&W.push("caxis","cline"),W.push("frontplot"),I.aaxis.layer==="above traces"&&W.push("aaxis","aline"),I.baxis.layer==="above traces"&&W.push("baxis","bline"),I.caxis.layer==="above traces"&&W.push("caxis","cline");var F=this.plotContainer.selectAll("g.toplevel").data(W,String),U=["agrid","bgrid","cgrid"];F.enter().append("g").attr("class",function(H){return"toplevel "+H}).each(function(H){var ne=M.select(this);N[H]=ne,H==="frontplot"?ne.append("g").classed("scatterlayer",!0):H==="backplot"?ne.append("g").classed("maplayer",!0):H==="plotbg"?ne.append("path").attr("d","M0,0Z"):H==="aline"||H==="bline"||H==="cline"?ne.append("path"):H==="grids"&&U.forEach(function($){N[$]=ne.append("g").classed("grid "+$,!0)})}),F.order()};var w=Math.sqrt(4/3);S.adjustLayout=function(I,N){var W,F,U,H,ne,$,K=this,Q=I.domain,Z=(Q.x[0]+Q.x[1])/2,X=(Q.y[0]+Q.y[1])/2,te=Q.x[1]-Q.x[0],ae=Q.y[1]-Q.y[0],se=te*N.w,ce=ae*N.h,fe=I.sum,pe=I.aaxis.min,ge=I.baxis.min,me=I.caxis.min;se>w*ce?U=(H=ce)*w:H=(U=se)/w,ne=te*U/se,$=ae*H/ce,W=N.l+N.w*Z-U/2,F=N.t+N.h*(1-X)-H/2,K.x0=W,K.y0=F,K.w=U,K.h=H,K.sum=fe,K.xaxis={type:"linear",range:[pe+2*me-fe,fe-pe-2*ge],domain:[Z-ne/2,Z+ne/2],_id:"x"},i(K.xaxis,K.graphDiv._fullLayout),K.xaxis.setScale(),K.xaxis.isPtWithinRange=function(Me){return Me.a>=K.aaxis.range[0]&&Me.a<=K.aaxis.range[1]&&Me.b>=K.baxis.range[1]&&Me.b<=K.baxis.range[0]&&Me.c>=K.caxis.range[1]&&Me.c<=K.caxis.range[0]},K.yaxis={type:"linear",range:[pe,fe-ge-me],domain:[X-$/2,X+$/2],_id:"y"},i(K.yaxis,K.graphDiv._fullLayout),K.yaxis.setScale(),K.yaxis.isPtWithinRange=function(){return!0};var be=K.yaxis.domain[0],ke=K.aaxis=n({},I.aaxis,{range:[pe,fe-ge-me],side:"left",tickangle:(+I.aaxis.tickangle||0)-30,domain:[be,be+$*w],anchor:"free",position:0,_id:"y",_length:U});i(ke,K.graphDiv._fullLayout),ke.setScale();var ze=K.baxis=n({},I.baxis,{range:[fe-pe-me,ge],side:"bottom",domain:K.xaxis.domain,anchor:"free",position:0,_id:"x",_length:U});i(ze,K.graphDiv._fullLayout),ze.setScale();var ve=K.caxis=n({},I.caxis,{range:[fe-pe-ge,me],side:"right",tickangle:(+I.caxis.tickangle||0)+30,domain:[be,be+$*w],anchor:"free",position:0,_id:"y",_length:U});i(ve,K.graphDiv._fullLayout),ve.setScale();var oe="M"+W+","+(F+H)+"h"+U+"l-"+U/2+",-"+H+"Z";K.clipDef.select("path").attr("d",oe),K.layers.plotbg.select("path").attr("d",oe);var ie="M0,"+H+"h"+U+"l-"+U/2+",-"+H+"Z";K.clipDefRelative.select("path").attr("d",ie);var he=b(W,F);K.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",he),K.clipDefRelative.select("path").attr("transform",null);var Se=b(W-ze._offset,F+H);K.layers.baxis.attr("transform",Se),K.layers.bgrid.attr("transform",Se);var ye=b(W+U/2,F)+"rotate(30)"+b(0,-ke._offset);K.layers.aaxis.attr("transform",ye),K.layers.agrid.attr("transform",ye);var we=b(W+U/2,F)+"rotate(-30)"+b(0,-ve._offset);K.layers.caxis.attr("transform",we),K.layers.cgrid.attr("transform",we),K.drawAxes(!0),K.layers.aline.select("path").attr("d",ke.showline?"M"+W+","+(F+H)+"l"+U/2+",-"+H:"M0,0").call(o.stroke,ke.linecolor||"#000").style("stroke-width",(ke.linewidth||0)+"px"),K.layers.bline.select("path").attr("d",ze.showline?"M"+W+","+(F+H)+"h"+U:"M0,0").call(o.stroke,ze.linecolor||"#000").style("stroke-width",(ze.linewidth||0)+"px"),K.layers.cline.select("path").attr("d",ve.showline?"M"+(W+U/2)+","+F+"l"+U/2+","+H:"M0,0").call(o.stroke,ve.linecolor||"#000").style("stroke-width",(ve.linewidth||0)+"px"),K.graphDiv._context.staticPlot||K.initInteractions(),t.setClipUrl(K.layers.frontplot,K._hasClipOnAxisFalse?null:K.clipId,K.graphDiv)},S.drawAxes=function(I){var N=this,W=N.graphDiv,F=N.id.substr(7)+"title",U=N.layers,H=N.aaxis,ne=N.baxis,$=N.caxis;if(N.drawAx(H),N.drawAx(ne),N.drawAx($),I){var K=Math.max(H.showticklabels?H.tickfont.size/2:0,($.showticklabels?.75*$.tickfont.size:0)+($.ticks==="outside"?.87*$.ticklen:0)),Q=(ne.showticklabels?ne.tickfont.size:0)+(ne.ticks==="outside"?ne.ticklen:0)+3;U["a-title"]=p.draw(W,"a"+F,{propContainer:H,propName:N.id+".aaxis.title",placeholder:f(W,"Click to enter Component A title"),attributes:{x:N.x0+N.w/2,y:N.y0-H.title.font.size/3-K,"text-anchor":"middle"}}),U["b-title"]=p.draw(W,"b"+F,{propContainer:ne,propName:N.id+".baxis.title",placeholder:f(W,"Click to enter Component B title"),attributes:{x:N.x0-Q,y:N.y0+N.h+.83*ne.title.font.size+Q,"text-anchor":"middle"}}),U["c-title"]=p.draw(W,"c"+F,{propContainer:$,propName:N.id+".caxis.title",placeholder:f(W,"Click to enter Component C title"),attributes:{x:N.x0+N.w+Q,y:N.y0+N.h+.83*$.title.font.size+Q,"text-anchor":"middle"}})}},S.drawAx=function(I){var N,W=this,F=W.graphDiv,U=I._name,H=U.charAt(0),ne=I._id,$=W.layers[U],K=H+"tickLayout",Q=(N=I).ticks+String(N.ticklen)+String(N.showticklabels);W[K]!==Q&&($.selectAll("."+ne+"tick").remove(),W[K]=Q),I.setScale();var Z=a.calcTicks(I),X=a.clipEnds(I,Z),te=a.makeTransTickFn(I),ae=a.getTickSigns(I)[2],se=T.deg2rad(30),ce=ae*(I.linewidth||1)/2,fe=ae*I.ticklen,pe=W.w,ge=W.h,me=H==="b"?"M0,"+ce+"l"+Math.sin(se)*fe+","+Math.cos(se)*fe:"M"+ce+",0l"+Math.cos(se)*fe+","+-Math.sin(se)*fe,be={a:"M0,0l"+ge+",-"+pe/2,b:"M0,0l-"+pe/2+",-"+ge,c:"M0,0l-"+ge+","+pe/2}[H];a.drawTicks(F,I,{vals:I.ticks==="inside"?X:Z,layer:$,path:me,transFn:te,crisp:!1}),a.drawGrid(F,I,{vals:X,layer:W.layers[H+"grid"],path:be,transFn:te,crisp:!1}),a.drawLabels(F,I,{vals:Z,layer:$,transFn:te,labelFns:a.makeLabelFns(I,0,30)})};var E=_.MINZOOM/2+.87,C="m-0.87,.5h"+E+"v3h-"+(E+5.2)+"l"+(E/2+2.6)+",-"+(.87*E+4.5)+"l2.6,1.5l-"+E/2+","+.87*E+"Z",O="m0.87,.5h-"+E+"v3h"+(E+5.2)+"l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-2.6,1.5l"+E/2+","+.87*E+"Z",P="m0,1l"+E/2+","+.87*E+"l2.6,-1.5l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-"+(E/2+2.6)+","+(.87*E+4.5)+"l2.6,1.5l"+E/2+",-"+.87*E+"Z",z=!0;function j(I){M.select(I).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}S.clearOutline=function(){m(this.dragOptions),y(this.dragOptions.gd)},S.initInteractions=function(){var I,N,W,F,U,H,ne,$,K,Q,Z,X,te=this,ae=te.layers.plotbg.select("path").node(),se=te.graphDiv,ce=se._fullLayout._zoomlayer;function fe(ie){var he={};return he[te.id+".aaxis.min"]=ie.a,he[te.id+".baxis.min"]=ie.b,he[te.id+".caxis.min"]=ie.c,he}function pe(ie,he){var Se=se._fullLayout.clickmode;j(se),ie===2&&(se.emit("plotly_doubleclick",null),s.call("_guiRelayout",se,fe({a:0,b:0,c:0}))),Se.indexOf("select")>-1&&ie===1&&g(he,se,[te.xaxis],[te.yaxis],te.id,te.dragOptions),Se.indexOf("event")>-1&&u.click(se,he,te.id)}function ge(ie,he){return 1-he/te.h}function me(ie,he){return 1-(ie+(te.h-he)/Math.sqrt(3))/te.w}function be(ie,he){return(ie-(te.h-he)/Math.sqrt(3))/te.w}function ke(ie,he){var Se=W+ie*I,ye=F+he*N,we=Math.max(0,Math.min(1,ge(0,F),ge(0,ye))),Me=Math.max(0,Math.min(1,me(W,F),me(Se,ye))),Oe=Math.max(0,Math.min(1,be(W,F),be(Se,ye))),Ie=(we/2+Oe)*te.w,de=(1-we/2-Me)*te.w,_e=(Ie+de)/2,Ae=de-Ie,Pe=(1-we)*te.h,Ee=Pe-Ae/w;Ae<_.MINZOOM?(ne=U,Z.attr("d",K),X.attr("d","M0,0Z")):(ne={a:U.a+we*H,b:U.b+Me*H,c:U.c+Oe*H},Z.attr("d",K+"M"+Ie+","+Pe+"H"+de+"L"+_e+","+Ee+"L"+Ie+","+Pe+"Z"),X.attr("d","M"+W+","+F+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+Ie+","+Pe+C+"M"+de+","+Pe+O+"M"+_e+","+Ee+P)),Q||(Z.transition().style("fill",$>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),X.transition().style("opacity",1).duration(200),Q=!0),se.emit("plotly_relayouting",fe(ne))}function ze(){j(se),ne!==U&&(s.call("_guiRelayout",se,fe(ne)),z&&se.data&&se._context.showTips&&(T.notifier(f(se,"Double-click to zoom back out"),"long"),z=!1))}function ve(ie,he){var Se=ie/te.xaxis._m,ye=he/te.yaxis._m,we=[(ne={a:U.a-ye,b:U.b+(Se+ye)/2,c:U.c-(Se-ye)/2}).a,ne.b,ne.c].sort(T.sorterAsc),Me=we.indexOf(ne.a),Oe=we.indexOf(ne.b),Ie=we.indexOf(ne.c);we[0]<0&&(we[1]+we[0]/2<0?(we[2]+=we[0]+we[1],we[0]=we[1]=0):(we[2]+=we[0]/2,we[1]+=we[0]/2,we[0]=0),ne={a:we[Me],b:we[Oe],c:we[Ie]},he=(U.a-ne.a)*te.yaxis._m,ie=(U.c-ne.c-U.b+ne.b)*te.xaxis._m);var de=b(te.x0+ie,te.y0+he);te.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",de);var _e=b(-ie,-he);te.clipDefRelative.select("path").attr("transform",_e),te.aaxis.range=[ne.a,te.sum-ne.b-ne.c],te.baxis.range=[te.sum-ne.a-ne.c,ne.b],te.caxis.range=[te.sum-ne.a-ne.b,ne.c],te.drawAxes(!1),te._hasClipOnAxisFalse&&te.plotContainer.select(".scatterlayer").selectAll(".trace").call(t.hideOutsideRangePoints,te),se.emit("plotly_relayouting",fe(ne))}function oe(){s.call("_guiRelayout",se,fe(ne))}this.dragOptions={element:ae,gd:se,plotinfo:{id:te.id,domain:se._fullLayout[te.id].domain,xaxis:te.xaxis,yaxis:te.yaxis},subplot:te.id,prepFn:function(ie,he,Se){te.dragOptions.xaxes=[te.xaxis],te.dragOptions.yaxes=[te.yaxis],I=se._fullLayout._invScaleX,N=se._fullLayout._invScaleY;var ye=te.dragOptions.dragmode=se._fullLayout.dragmode;c(ye)?te.dragOptions.minDrag=1:te.dragOptions.minDrag=void 0,ye==="zoom"?(te.dragOptions.moveFn=ke,te.dragOptions.clickFn=pe,te.dragOptions.doneFn=ze,function(we,Me,Oe){var Ie=ae.getBoundingClientRect();W=Me-Ie.left,F=Oe-Ie.top,se._fullLayout._calcInverseTransform(se);var de=se._fullLayout._invTransform,_e=T.apply3DTransform(de)(W,F);W=_e[0],F=_e[1],U={a:te.aaxis.range[0],b:te.baxis.range[1],c:te.caxis.range[1]},ne=U,H=te.aaxis.range[1]-U.a,$=k(te.graphDiv._fullLayout[te.id].bgcolor).getLuminance(),K="M0,"+te.h+"L"+te.w/2+", 0L"+te.w+","+te.h+"Z",Q=!1,Z=ce.append("path").attr("class","zoombox").attr("transform",b(te.x0,te.y0)).style({fill:$>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",K),X=ce.append("path").attr("class","zoombox-corners").attr("transform",b(te.x0,te.y0)).style({fill:o.background,stroke:o.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),te.clearOutline(se)}(0,he,Se)):ye==="pan"?(te.dragOptions.moveFn=ve,te.dragOptions.clickFn=pe,te.dragOptions.doneFn=oe,U={a:te.aaxis.range[0],b:te.baxis.range[1],c:te.caxis.range[1]},ne=U,te.clearOutline(se)):(x(ye)||c(ye))&&v(ie,he,Se,te.dragOptions,ye)}},ae.onmousemove=function(ie){u.hover(se,ie,te.id),se._fullLayout._lasthover=ae,se._fullLayout._hoversubplot=te.id},ae.onmouseout=function(ie){se._dragging||l.unhover(se,ie)},l.init(this.dragOptions)}},24040:function(ee,R,e){var M=e(24248),k=e(16628),s=e(52416),T=e(63620),b=e(52200).addStyleRule,f=e(92880),o=e(45464),t=e(64859),i=f.extendFlat,n=f.extendDeepAll;function r(g){var y=g.name,m=g.categories,_=g.meta;if(R.modules[y])M.log("Type "+y+" already registered");else{R.subplotsRegistry[g.basePlotModule.name]||function(z){var j=z.name;if(R.subplotsRegistry[j])M.log("Plot type "+j+" already registered.");else for(var I in h(z),R.subplotsRegistry[j]=z,R.componentsRegistry)p(I,z.name)}(g.basePlotModule);for(var d={},S=0;S<m.length;S++)d[m[S]]=!0,R.allCategories[m[S]]=!0;for(var w in R.modules[y]={_module:g,categories:d},_&&Object.keys(_).length&&(R.modules[y].meta=_),R.allTypes.push(y),R.componentsRegistry)c(w,y);g.layoutAttributes&&i(R.traceLayoutAttributes,g.layoutAttributes);var E=g.basePlotModule,C=E.name;if(C==="mapbox"){var O=E.constants.styleRules;for(var P in O)b(".js-plotly-plot .plotly .mapboxgl-"+P,O[P])}C!=="geo"&&C!=="mapbox"||window.PlotlyGeoAssets!==void 0||(window.PlotlyGeoAssets={topojson:{}})}}function a(g){if(typeof g.name!="string")throw new Error("Component module *name* must be a string.");var y=g.name;for(var m in R.componentsRegistry[y]=g,g.layoutAttributes&&(g.layoutAttributes._isLinkedToArray&&s(R.layoutArrayContainers,y),h(g)),R.modules)c(y,m);for(var _ in R.subplotsRegistry)p(y,_);for(var d in R.transformsRegistry)x(y,d);g.schema&&g.schema.layout&&n(t,g.schema.layout)}function l(g){if(typeof g.name!="string")throw new Error("Transform module *name* must be a string.");var y="Transform module "+g.name,m=typeof g.transform=="function",_=typeof g.calcTransform=="function";if(!m&&!_)throw new Error(y+" is missing a *transform* or *calcTransform* method.");for(var d in m&&_&&M.log([y+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),T(g.attributes)||M.log(y+" registered without an *attributes* object."),typeof g.supplyDefaults!="function"&&M.log(y+" registered without a *supplyDefaults* method."),R.transformsRegistry[g.name]=g,R.componentsRegistry)x(d,g.name)}function u(g){var y=g.name,m=y.split("-")[0],_=g.dictionary,d=g.format,S=_&&Object.keys(_).length,w=d&&Object.keys(d).length,E=R.localeRegistry,C=E[y];if(C||(E[y]=C={}),m!==y){var O=E[m];O||(E[m]=O={}),S&&O.dictionary===C.dictionary&&(O.dictionary=_),w&&O.format===C.format&&(O.format=d)}S&&(C.dictionary=_),w&&(C.format=d)}function h(g){if(g.layoutAttributes){var y=g.layoutAttributes._arrayAttrRegexps;if(y)for(var m=0;m<y.length;m++)s(R.layoutArrayRegexes,y[m])}}function c(g,y){var m=R.componentsRegistry[g].schema;if(m&&m.traces){var _=m.traces[y];_&&n(R.modules[y]._module.attributes,_)}}function x(g,y){var m=R.componentsRegistry[g].schema;if(m&&m.transforms){var _=m.transforms[y];_&&n(R.transformsRegistry[y].attributes,_)}}function p(g,y){var m=R.componentsRegistry[g].schema;if(m&&m.subplots){var _=R.subplotsRegistry[y],d=_.layoutAttributes,S=_.attr==="subplot"?_.name:_.attr;Array.isArray(S)&&(S=S[0]);var w=m.subplots[S];d&&w&&n(d,w)}}function v(g){return typeof g=="object"&&(g=g.type),g}R.modules={},R.allCategories={},R.allTypes=[],R.subplotsRegistry={},R.transformsRegistry={},R.componentsRegistry={},R.layoutArrayContainers=[],R.layoutArrayRegexes=[],R.traceLayoutAttributes={},R.localeRegistry={},R.apiMethodRegistry={},R.collectableSubplotTypes=null,R.register=function(g){if(R.collectableSubplotTypes=null,!g)throw new Error("No argument passed to Plotly.register.");g&&!Array.isArray(g)&&(g=[g]);for(var y=0;y<g.length;y++){var m=g[y];if(!m)throw new Error("Invalid module was attempted to be registered!");switch(m.moduleType){case"trace":r(m);break;case"transform":l(m);break;case"component":a(m);break;case"locale":u(m);break;case"apiMethod":var _=m.name;R.apiMethodRegistry[_]=m.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},R.getModule=function(g){var y=R.modules[v(g)];return!!y&&y._module},R.traceIs=function(g,y){if((g=v(g))==="various")return!1;var m=R.modules[g];return m||(g&&M.log("Unrecognized trace type "+g+"."),m=R.modules[o.type.dflt]),!!m.categories[y]},R.getTransformIndices=function(g,y){for(var m=[],_=g.transforms||[],d=0;d<_.length;d++)_[d].type===y&&m.push(d);return m},R.hasTransform=function(g,y){for(var m=g.transforms||[],_=0;_<m.length;_++)if(m[_].type===y)return!0;return!1},R.getComponentMethod=function(g,y){var m=R.componentsRegistry[g];return m&&m[y]||k},R.call=function(){var g=arguments[0],y=[].slice.call(arguments,1);return R.apiMethodRegistry[g].apply(null,y)}},91536:function(ee,R,e){var M=e(24040),k=e(3400),s=k.extendFlat,T=k.extendDeep;function b(f){var o;switch(f){case"themes__thumb":o={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":o={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:o={}}return o}ee.exports=function(f,o){var t,i,n=f.data,r=f.layout,a=T([],n),l=T({},r,b(o.tileClass)),u=f._context||{};if(o.width&&(l.width=o.width),o.height&&(l.height=o.height),o.tileClass==="thumbnail"||o.tileClass==="themes__thumb"){l.annotations=[];var h=Object.keys(l);for(t=0;t<h.length;t++)i=h[t],["xaxis","yaxis","zaxis"].indexOf(i.slice(0,5))>-1&&(l[h[t]].title={text:""});for(t=0;t<a.length;t++){var c=a[t];c.showscale=!1,c.marker&&(c.marker.showscale=!1),M.traceIs(c,"pie-like")&&(c.textposition="none")}}if(Array.isArray(o.annotations))for(t=0;t<o.annotations.length;t++)l.annotations.push(o.annotations[t]);var x=Object.keys(l).filter(function(m){return m.match(/^scene\d*$/)});if(x.length){var p={};for(o.tileClass==="thumbnail"&&(p={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),t=0;t<x.length;t++){var v=l[x[t]];v.xaxis||(v.xaxis={}),v.yaxis||(v.yaxis={}),v.zaxis||(v.zaxis={}),s(v.xaxis,p),s(v.yaxis,p),s(v.zaxis,p),v._scene=null}}var g=document.createElement("div");o.tileClass&&(g.className=o.tileClass);var y={gd:g,td:g,layout:l,data:a,config:{staticPlot:o.staticPlot===void 0||o.staticPlot,plotGlPixelRatio:o.plotGlPixelRatio===void 0?2:o.plotGlPixelRatio,displaylogo:o.displaylogo||!1,showLink:o.showLink||!1,showTips:o.showTips||!1,mapboxAccessToken:u.mapboxAccessToken}};return o.setBackground!=="transparent"&&(y.config.setBackground=o.setBackground||"opaque"),y.gd.defaultLayout=b(o.tileClass),y}},39792:function(ee,R,e){var M=e(3400),k=e(67024),s=e(48616),T=e(81792);ee.exports=function(b,f){var o;return M.isPlainObject(b)||(o=M.getGraphDiv(b)),(f=f||{}).format=f.format||"png",f.width=f.width||null,f.height=f.height||null,f.imageDataOnly=!0,new Promise(function(t,i){o&&o._snapshotInProgress&&i(new Error("Snapshotting already in progress.")),M.isIE()&&f.format!=="svg"&&i(new Error(T.MSG_IE_BAD_FORMAT)),o&&(o._snapshotInProgress=!0);var n=k(b,f),r=f.filename||b.fn||"newplot";r+="."+f.format.replace("-","."),n.then(function(a){return o&&(o._snapshotInProgress=!1),s(a,r,f.format)}).then(function(a){t(a)}).catch(function(a){o&&(o._snapshotInProgress=!1),i(a)})})}},48616:function(ee,R,e){var M=e(3400),k=e(81792);ee.exports=function(s,T,b){var f=document.createElement("a"),o="download"in f;return new Promise(function(t,i){var n,r;if(M.isIE())return n=k.createBlob(s,"svg"),window.navigator.msSaveBlob(n,T),n=null,t(T);if(o)return n=k.createBlob(s,b),r=k.createObjectURL(n),f.href=r,f.download=T,document.body.appendChild(f),f.click(),document.body.removeChild(f),k.revokeObjectURL(r),n=null,t(T);if(M.isSafari()){var a=b==="svg"?",":";base64,";return k.octetStream(a+encodeURIComponent(s)),t(T)}i(new Error("download error"))})}},81792:function(ee,R,e){var M=e(24040);R.getDelay=function(s){return s._has&&(s._has("gl3d")||s._has("gl2d")||s._has("mapbox"))?500:0},R.getRedrawFunc=function(s){return function(){M.getComponentMethod("colorbar","draw")(s)}},R.encodeSVG=function(s){return"data:image/svg+xml,"+encodeURIComponent(s)},R.encodeJSON=function(s){return"data:application/json,"+encodeURIComponent(s)};var k=window.URL||window.webkitURL;R.createObjectURL=function(s){return k.createObjectURL(s)},R.revokeObjectURL=function(s){return k.revokeObjectURL(s)},R.createBlob=function(s,T){if(T==="svg")return new window.Blob([s],{type:"image/svg+xml;charset=utf-8"});if(T==="full-json")return new window.Blob([s],{type:"application/json;charset=utf-8"});var b=function(f){for(var o=f.length,t=new ArrayBuffer(o),i=new Uint8Array(t),n=0;n<o;n++)i[n]=f.charCodeAt(n);return t}(window.atob(s));return new window.Blob([b],{type:"image/"+T})},R.octetStream=function(s){document.location.href="data:application/octet-stream"+s},R.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,R.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},78904:function(ee,R,e){var M=e(81792),k={getDelay:M.getDelay,getRedrawFunc:M.getRedrawFunc,clone:e(91536),toSVG:e(37164),svgToImg:e(63268),toImage:e(61808),downloadImage:e(39792)};ee.exports=k},63268:function(ee,R,e){var M=e(3400),k=e(61252).EventEmitter,s=e(81792);ee.exports=function(T){var b=T.emitter||new k,f=new Promise(function(o,t){var i=window.Image,n=T.svg,r=T.format||"png";if(M.isIE()&&r!=="svg"){var a=new Error(s.MSG_IE_BAD_FORMAT);return t(a),T.promise?f:b.emit("error",a)}var l,u,h=T.canvas,c=T.scale||1,x=T.width||300,p=T.height||150,v=c*x,g=c*p,y=h.getContext("2d",{willReadFrequently:!0}),m=new i;r==="svg"||M.isSafari()?u=s.encodeSVG(n):(l=s.createBlob(n,"svg"),u=s.createObjectURL(l)),h.width=v,h.height=g,m.onload=function(){var _;switch(l=null,s.revokeObjectURL(u),r!=="svg"&&y.drawImage(m,0,0,v,g),r){case"jpeg":_=h.toDataURL("image/jpeg");break;case"png":_=h.toDataURL("image/png");break;case"webp":_=h.toDataURL("image/webp");break;case"svg":_=u;break;default:var d="Image format is not jpeg, png, svg or webp.";if(t(new Error(d)),!T.promise)return b.emit("error",d)}o(_),T.promise||b.emit("success",_)},m.onerror=function(_){if(l=null,s.revokeObjectURL(u),t(_),!T.promise)return b.emit("error",_)},m.src=u});return T.promise?f:b}},61808:function(ee,R,e){var M=e(61252).EventEmitter,k=e(24040),s=e(3400),T=e(81792),b=e(91536),f=e(37164),o=e(63268);ee.exports=function(t,i){var n=new M,r=b(t,{format:"png"}),a=r.gd;a.style.position="absolute",a.style.left="-5000px",document.body.appendChild(a);var l=T.getRedrawFunc(a);return k.call("_doPlot",a,r.data,r.layout,r.config).then(l).then(function(){var u=T.getDelay(a._fullLayout);setTimeout(function(){var h=f(a),c=document.createElement("canvas");c.id=s.randstr(),(n=o({format:i.format,width:a._fullLayout.width,height:a._fullLayout.height,canvas:c,emitter:n,svg:h})).clean=function(){a&&document.body.removeChild(a)}},u)}).catch(function(u){n.emit("error",u)}),n}},37164:function(ee,R,e){var M=e(33428),k=e(3400),s=e(43616),T=e(76308),b=e(9616),f=/"/g,o="TOBESTRIPPED",t=new RegExp('("'+o+")|("+o+'")',"g");ee.exports=function(i,n,r){var a,l=i._fullLayout,u=l._paper,h=l._toppaper,c=l.width,x=l.height;u.insert("rect",":first-child").call(s.setRect,0,0,c,x).call(T.fill,l.paper_bgcolor);var p=l._basePlotModules||[];for(a=0;a<p.length;a++){var v=p[a];v.toSVG&&v.toSVG(i)}if(h){var g=h.node().childNodes,y=Array.prototype.slice.call(g);for(a=0;a<y.length;a++){var m=y[a];m.childNodes.length&&u.node().appendChild(m)}}l._draggers&&l._draggers.remove(),u.node().style.background="",u.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var d=M.select(this);if(this.style.visibility!=="hidden"&&this.style.display!=="none"){d.style({visibility:null,display:null});var S=this.style.fontFamily;S&&S.indexOf('"')!==-1&&d.style("font-family",S.replace(f,o));var w=this.style.fontWeight;!w||w!=="normal"&&w!=="400"||d.style("font-weight",void 0);var E=this.style.fontStyle;E&&E==="normal"&&d.style("font-style",void 0);var C=this.style.fontVariant;C&&C==="normal"&&d.style("font-variant",void 0)}else d.remove()}),u.selectAll(".gradient_filled,.pattern_filled").each(function(){var d=M.select(this),S=this.style.fill;S&&S.indexOf("url(")!==-1&&d.style("fill",S.replace(f,o));var w=this.style.stroke;w&&w.indexOf("url(")!==-1&&d.style("stroke",w.replace(f,o))}),n!=="pdf"&&n!=="eps"||u.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),u.node().setAttributeNS(b.xmlns,"xmlns",b.svg),u.node().setAttributeNS(b.xmlns,"xmlns:xlink",b.xlink),n==="svg"&&r&&(u.attr("width",r*c),u.attr("height",r*x),u.attr("viewBox","0 0 "+c+" "+x));var _=new window.XMLSerializer().serializeToString(u.node());return _=(_=(_=function(d){var S=M.select("body").append("div").style({display:"none"}).html(""),w=d.replace(/(&[^;]*;)/gi,function(E){return E==="&lt;"?"&#60;":E==="&rt;"?"&#62;":E.indexOf("<")!==-1||E.indexOf(">")!==-1?"":S.html(E).text()});return S.remove(),w}(_)).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(t,"'"),k.isIE()&&(_=(_=(_=_.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),_}},84664:function(ee,R,e){var M=e(3400);ee.exports=function(k,s){for(var T=0;T<k.length;T++)k[T].i=T;M.mergeArray(s.text,k,"tx"),M.mergeArray(s.hovertext,k,"htx");var b=s.marker;if(b){M.mergeArray(b.opacity,k,"mo",!0),M.mergeArray(b.color,k,"mc");var f=b.line;f&&(M.mergeArray(f.color,k,"mlc"),M.mergeArrayCastPositive(f.width,k,"mlw"))}}},20832:function(ee,R,e){var M=e(52904),k=e(29736).axisHoverFormat,s=e(21776).Ks,T=e(21776).Gw,b=e(49084),f=e(25376),o=e(78048),t=e(98192).c,i=e(92880).extendFlat,n=f({editType:"calc",arrayOk:!0,colorEditType:"style"}),r=i({},M.marker.line.width,{dflt:0}),a=i({width:r,editType:"calc"},b("marker.line")),l=i({line:a,editType:"calc"},b("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:t,cornerradius:{valType:"any",editType:"calc"}});ee.exports={x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),text:M.text,texttemplate:T({editType:"plot"},{keys:o.eventDataKeys}),hovertext:M.hovertext,hovertemplate:s({},{keys:o.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:i({},n,{}),insidetextfont:i({},n,{}),outsidetextfont:i({},n,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:i({},M.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:l,offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:{marker:{opacity:M.selected.marker.opacity,color:M.selected.marker.color,editType:"style"},textfont:M.selected.textfont,editType:"style"},unselected:{marker:{opacity:M.unselected.marker.opacity,color:M.unselected.marker.color,editType:"style"},textfont:M.unselected.textfont,editType:"style"},zorder:M.zorder,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},71820:function(ee,R,e){var M=e(54460),k=e(1220),s=e(94288).hasColorscale,T=e(47128),b=e(84664),f=e(4500);ee.exports=function(o,t){var i,n,r,a,l,u,h=M.getFromId(o,t.xaxis||"x"),c=M.getFromId(o,t.yaxis||"y"),x={msUTC:!(!t.base&&t.base!==0)};t.orientation==="h"?(i=h.makeCalcdata(t,"x",x),r=c.makeCalcdata(t,"y"),a=k(t,c,"y",r),l=!!t.yperiodalignment,u="y"):(i=c.makeCalcdata(t,"y",x),r=h.makeCalcdata(t,"x"),a=k(t,h,"x",r),l=!!t.xperiodalignment,u="x"),n=a.vals;for(var p=Math.min(n.length,i.length),v=new Array(p),g=0;g<p;g++)v[g]={p:n[g],s:i[g]},l&&(v[g].orig_p=r[g],v[g][u+"End"]=a.ends[g],v[g][u+"Start"]=a.starts[g]),t.ids&&(v[g].id=String(t.ids[g]));return s(t,"marker")&&T(o,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),s(t,"marker.line")&&T(o,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),b(v,t),f(v,t),v}},78048:function(ee){ee.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},96376:function(ee,R,e){var M=e(38248),k=e(3400).isArrayOrTypedArray,s=e(39032).BADNUM,T=e(24040),b=e(54460),f=e(71888).getAxisGroup,o=e(72592);function t(p,v,g,y,m){if(y.length){var _,d,S,w;switch(function(E,C){var O,P;for(O=0;O<C.length;O++){var z,j=C[O],I=j[0].trace,N=I.type==="funnel"?I._base:I.base,W=I.orientation==="h"?I.xcalendar:I.ycalendar,F=E.type==="category"||E.type==="multicategory"?function(){return null}:E.d2c;if(k(N)){for(P=0;P<Math.min(N.length,j.length);P++)z=F(N[P],0,W),M(z)?(j[P].b=+z,j[P].hasB=1):j[P].b=0;for(;P<j.length;P++)j[P].b=0}else{z=F(N,0,W);var U=M(z);for(z=U?z:0,P=0;P<j.length;P++)j[P].b=z,U&&(j[P].hasB=1)}}}(g,y),m.mode){case"overlay":i(v,g,y,m);break;case"group":for(_=[],d=[],S=0;S<y.length;S++)(w=y[S])[0].trace.offset===void 0?d.push(w):_.push(w);d.length&&function(E,C,O,P,z){var j=new o(P,{posAxis:C,sepNegVal:!1,overlapNoMerge:!z.norm});(function(I,N,W,F){for(var U=I._fullLayout,H=W.positions,ne=W.distinctPositions,$=W.minDiff,K=W.traces,Q=K.length,Z=H.length!==ne.length,X=$*(1-F.gap),te=f(U,N._id)+K[0][0].trace.orientation,ae=U._alignmentOpts[te]||{},se=0;se<Q;se++){var ce,fe,pe=K[se],ge=pe[0].trace,me=ae[ge.alignmentgroup]||{},be=Object.keys(me.offsetGroups||{}).length,ke=(ce=be?X/be:Z?X/Q:X)*(1-(F.groupgap||0));fe=be?((2*ge._offsetIndex+1-be)*ce-ke)/2:Z?((2*se+1-Q)*ce-ke)/2:-ke/2;var ze=pe[0].t;ze.barwidth=ke,ze.poffset=fe,ze.bargroupwidth=X,ze.bardelta=$}W.binWidth=K[0][0].t.barwidth/100,r(W),a(N,W),l(N,W,Z)})(E,C,j,z),function(I,N){for(var W=I.traces,F=0;F<W.length;F++){var U=W[F];if(U[0].trace.base===void 0)for(var H=new o([U],{posAxis:N,sepNegVal:!0,overlapNoMerge:!0}),ne=0;ne<U.length;ne++){var $=U[ne];if($.p!==s){var K=H.put($.p,$.b+$.s);K&&($.b=K)}}}}(j,C),z.norm?(h(j),c(O,j,z)):u(O,j)}(p,v,g,d,m),_.length&&i(v,g,_,m);break;case"stack":case"relative":for(_=[],d=[],S=0;S<y.length;S++)(w=y[S])[0].trace.base===void 0?d.push(w):_.push(w);(function(E){if(!(E.length<2)){var C,O,P,z,j,I;for(C=0;C<E.length&&(z=(O=E[C][0].trace).marker?O.marker.cornerradius:void 0)===void 0;C++);if(z!==void 0)for(j=M(z)?+z:+z.slice(0,-1),I=M(z)?"px":"%",C=0;C<E.length;C++)(P=E[C][0].t).cornerradiusvalue=j,P.cornerradiusform=I}})(d),d.length&&function(E,C,O,P,z){var j=new o(P,{posAxis:C,sepNegVal:z.mode==="relative",overlapNoMerge:!(z.norm||z.mode==="stack"||z.mode==="relative")});n(C,j,z),function(U,H,ne){var $,K,Q,Z,X,te,ae=x(U),se=H.traces;for(Z=0;Z<se.length;Z++)if((K=($=se[Z])[0].trace).type==="funnel")for(X=0;X<$.length;X++)(te=$[X]).s!==s&&H.put(te.p,-.5*te.s);for(Z=0;Z<se.length;Z++){Q=(K=($=se[Z])[0].trace).type==="funnel";var ce=[];for(X=0;X<$.length;X++)if((te=$[X]).s!==s){var fe;fe=Q?te.s:te.s+te.b;var pe=H.put(te.p,fe),ge=pe+fe;te.b=pe,te[ae]=ge,ne.norm||(ce.push(ge),te.hasB&&ce.push(pe))}ne.norm||(K._extremes[U._id]=b.findExtremes(U,ce,{tozero:!0,padded:!0}))}}(O,j,z);for(var I=0;I<P.length;I++)for(var N=P[I],W=0;W<N.length;W++){var F=N[W];F.s!==s&&F.b+F.s===j.get(F.p,F.s)&&(F._outmost=!0)}z.norm&&c(O,j,z)}(0,v,g,d,m),_.length&&i(v,g,_,m)}(function(E){var C,O,P,z,j,I,N;for(C=0;C<E.length;C++)P=(O=E[C])[0].trace,(z=O[0].t).cornerradiusvalue===void 0&&(j=P.marker?P.marker.cornerradius:void 0)!==void 0&&(I=M(j)?+j:+j.slice(0,-1),N=M(j)?"px":"%",z.cornerradiusvalue=I,z.cornerradiusform=N)})(y),function(E,C){var O,P,z,j=x(C),I={},N=1/0,W=-1/0;for(O=0;O<E.length;O++)for(z=E[O],P=0;P<z.length;P++){var F=z[P].p;M(F)&&(N=Math.min(N,F),W=Math.max(W,F))}var U=1e4/(W-N),H=I.round=function(ge){return String(Math.round(U*(ge-N)))},ne={},$={},K=E.some(function(ge){var me=ge[0].trace;return"marker"in me&&me.marker.cornerradius});for(O=0;O<E.length;O++){(z=E[O])[0].t.extents=I;var Q=z[0].t.poffset,Z=k(Q);for(P=0;P<z.length;P++){var X=z[P],te=X[j]-X.w/2;if(M(te)){var ae=X[j]+X.w/2,se=H(X.p);I[se]?I[se]=[Math.min(te,I[se][0]),Math.max(ae,I[se][1])]:I[se]=[te,ae]}if(X.p0=X.p+(Z?Q[P]:Q),X.p1=X.p0+X.w,X.s0=X.b,X.s1=X.s0+X.s,K){var ce=Math.min(X.s0,X.s1)||0,fe=Math.max(X.s0,X.s1)||0,pe=X[j];ne[pe]=pe in ne?Math.min(ne[pe],ce):ce,$[pe]=pe in $?Math.max($[pe],fe):fe}}}K&&function(ge,me,be,ke){for(var ze=x(ke),ve=0;ve<ge.length;ve++)for(var oe=ge[ve],ie=0;ie<oe.length;ie++){var he=oe[ie],Se=he[ze];he._sMin=me[Se],he._sMax=be[Se]}}(E,ne,$,C)}(y,v)}}function i(p,v,g,y){for(var m=0;m<g.length;m++){var _=g[m],d=new o([_],{posAxis:p,sepNegVal:!1,overlapNoMerge:!y.norm});n(p,d,y),y.norm?(h(d),c(v,d,y)):u(v,d)}}function n(p,v,g){for(var y=v.minDiff,m=v.traces,_=y*(1-g.gap),d=_*(1-(g.groupgap||0)),S=-d/2,w=0;w<m.length;w++){var E=m[w][0].t;E.barwidth=d,E.poffset=S,E.bargroupwidth=_,E.bardelta=y}v.binWidth=m[0][0].t.barwidth/100,r(v),a(p,v),l(p,v)}function r(p){var v,g,y=p.traces;for(v=0;v<y.length;v++){var m,_=y[v],d=_[0],S=d.trace,w=d.t,E=S._offset||S.offset,C=w.poffset;if(k(E)){for(m=Array.prototype.slice.call(E,0,_.length),g=0;g<m.length;g++)M(m[g])||(m[g]=C);for(g=m.length;g<_.length;g++)m.push(C);w.poffset=m}else E!==void 0&&(w.poffset=E);var O=S._width||S.width,P=w.barwidth;if(k(O)){var z=Array.prototype.slice.call(O,0,_.length);for(g=0;g<z.length;g++)M(z[g])||(z[g]=P);for(g=z.length;g<_.length;g++)z.push(P);if(w.barwidth=z,E===void 0){for(m=[],g=0;g<_.length;g++)m.push(C+(P-z[g])/2);w.poffset=m}}else O!==void 0&&(w.barwidth=O,E===void 0&&(w.poffset=C+(P-O)/2))}}function a(p,v){for(var g=v.traces,y=x(p),m=0;m<g.length;m++)for(var _=g[m],d=_[0].t,S=d.poffset,w=k(S),E=d.barwidth,C=k(E),O=0;O<_.length;O++){var P=_[O],z=P.w=C?E[O]:E;P.p===void 0&&(P.p=P[y],P["orig_"+y]=P[y]);var j=(w?S[O]:S)+z/2;P[y]=P.p+j}}function l(p,v,g){var y=v.traces,m=v.minDiff/2;b.minDtick(p,v.minDiff,v.distinctPositions[0],g);for(var _=0;_<y.length;_++){var d,S,w,E,C=y[_],O=C[0],P=O.trace,z=[];for(E=0;E<C.length;E++)S=(d=C[E]).p-m,w=d.p+m,z.push(S,w);if(P.width||P.offset){var j=O.t,I=j.poffset,N=j.barwidth,W=k(I),F=k(N);for(E=0;E<C.length;E++){d=C[E];var U=W?I[E]:I,H=F?N[E]:N;w=(S=d.p+U)+H,z.push(S,w)}}P._extremes[p._id]=b.findExtremes(p,z,{padded:!1})}}function u(p,v){for(var g=v.traces,y=x(p),m=0;m<g.length;m++){for(var _=g[m],d=_[0].trace,S=d.type==="scatter",w=d.orientation==="v",E=[],C=!1,O=0;O<_.length;O++){var P=_[O],z=S?0:P.b,j=S?w?P.y:P.x:z+P.s;P[y]=j,E.push(j),P.hasB&&E.push(z),P.hasB&&P.b||(C=!0)}d._extremes[p._id]=b.findExtremes(p,E,{tozero:C,padded:!0})}}function h(p){for(var v=p.traces,g=0;g<v.length;g++)for(var y=v[g],m=0;m<y.length;m++){var _=y[m];_.s!==s&&p.put(_.p,_.b+_.s)}}function c(p,v,g){var y=v.traces,m=x(p),_=g.norm==="fraction"?1:100,d=_/1e9,S=p.l2c(p.c2l(0)),w=g.mode==="stack"?_:S;function E(ne){return M(p.c2l(ne))&&(ne<S-d||ne>w+d||!M(S))}for(var C=0;C<y.length;C++){for(var O=y[C],P=O[0].trace,z=[],j=!1,I=!1,N=0;N<O.length;N++){var W=O[N];if(W.s!==s){var F=Math.abs(_/v.get(W.p,W.s));W.b*=F,W.s*=F;var U=W.b,H=U+W.s;W[m]=H,z.push(H),I=I||E(H),W.hasB&&(z.push(U),I=I||E(U)),W.hasB&&W.b||(j=!0)}}P._extremes[p._id]=b.findExtremes(p,z,{tozero:j,padded:I})}}function x(p){return p._id.charAt(0)}ee.exports={crossTraceCalc:function(p,v){for(var g=v.xaxis,y=v.yaxis,m=p._fullLayout,_=p._fullData,d=p.calcdata,S=[],w=[],E=0;E<_.length;E++){var C=_[E];if(C.visible===!0&&T.traceIs(C,"bar")&&C.xaxis===g._id&&C.yaxis===y._id&&(C.orientation==="h"?S.push(d[E]):w.push(d[E]),C._computePh))for(var O=p.calcdata[E],P=0;P<O.length;P++)typeof O[P].ph0=="function"&&(O[P].ph0=O[P].ph0()),typeof O[P].ph1=="function"&&(O[P].ph1=O[P].ph1())}var z={xCat:g.type==="category"||g.type==="multicategory",yCat:y.type==="category"||y.type==="multicategory",mode:m.barmode,norm:m.barnorm,gap:m.bargap,groupgap:m.bargroupgap};t(p,g,y,w,z),t(p,y,g,S,z)},setGroupPositions:t}},31508:function(ee,R,e){var M=e(38248),k=e(3400),s=e(76308),T=e(24040),b=e(43980),f=e(31147),o=e(55592),t=e(20011),i=e(20832),n=k.coerceFont;function r(l){if(M(l)){if((l=+l)>=0)return l}else if(typeof l=="string"&&(l=l.trim()).slice(-1)==="%"&&M(l.slice(0,-1))&&(l=+l.slice(0,-1))>=0)return l+"%"}function a(l,u,h,c,x,p){var v=(p=p||{}).moduleHasSelected!==!1,g=p.moduleHasUnselected!==!1,y=p.moduleHasConstrain!==!1,m=p.moduleHasCliponaxis!==!1,_=p.moduleHasTextangle!==!1,d=p.moduleHasInsideanchor!==!1,S=!!p.hasPathbar,w=Array.isArray(x)||x==="auto",E=w||x==="inside",C=w||x==="outside";if(E||C){var O=n(c,"textfont",h.font),P=k.extendFlat({},O),z=!(l.textfont&&l.textfont.color);if(z&&delete P.color,n(c,"insidetextfont",P),S){var j=k.extendFlat({},O);z&&delete j.color,n(c,"pathbar.textfont",j)}C&&n(c,"outsidetextfont",O),v&&c("selected.textfont.color"),g&&c("unselected.textfont.color"),y&&c("constraintext"),m&&c("cliponaxis"),_&&c("textangle"),c("texttemplate")}E&&d&&c("insidetextanchor")}ee.exports={supplyDefaults:function(l,u,h,c){function x(y,m){return k.coerce(l,u,i,y,m)}if(b(l,u,c,x)){f(l,u,c,x),x("xhoverformat"),x("yhoverformat"),x("zorder"),x("orientation",u.x&&!u.y?"h":"v"),x("base"),x("offset"),x("width"),x("text"),x("hovertext"),x("hovertemplate");var p=x("textposition");a(l,0,c,x,p,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o(l,u,x,h,c);var v=(u.marker.line||{}).color,g=T.getComponentMethod("errorbars","supplyDefaults");g(l,u,v||s.defaultLine,{axis:"y"}),g(l,u,v||s.defaultLine,{axis:"x",inherit:"y"}),k.coerceSelectionMarkerOpacity(u,x)}else u.visible=!1},crossTraceDefaults:function(l,u){var h,c;function x(g,y){return k.coerce(c._input,c,i,g,y)}for(var p=0;p<l.length;p++)if((c=l[p]).type==="bar"){h=c._input;var v=x("marker.cornerradius",u.barcornerradius);c.marker&&(c.marker.cornerradius=r(v)),u.barmode==="group"&&t(h,c,u,x)}},handleText:a,validateCornerradius:r}},52160:function(ee){ee.exports=function(R,e,M){return R.x="xVal"in e?e.xVal:e.x,R.y="yVal"in e?e.yVal:e.y,e.xa&&(R.xaxis=e.xa),e.ya&&(R.yaxis=e.ya),M.orientation==="h"?(R.label=R.y,R.value=R.x):(R.label=R.x,R.value=R.y),R}},60444:function(ee,R,e){var M=e(38248),k=e(49760),s=e(3400).isArrayOrTypedArray;R.coerceString=function(T,b,f){if(typeof b=="string"){if(b||!T.noBlank)return b}else if((typeof b=="number"||b===!0)&&!T.strict)return String(b);return f!==void 0?f:T.dflt},R.coerceNumber=function(T,b,f){if(M(b)){b=+b;var o=T.min,t=T.max;if(!(o!==void 0&&b<o||t!==void 0&&b>t))return b}return f!==void 0?f:T.dflt},R.coerceColor=function(T,b,f){return k(b).isValid()?b:f!==void 0?f:T.dflt},R.coerceEnumerated=function(T,b,f){return T.coerceNumber&&(b=+b),T.values.indexOf(b)!==-1?b:f!==void 0?f:T.dflt},R.getValue=function(T,b){var f;return s(T)?b<T.length&&(f=T[b]):f=T,f},R.getLineWidth=function(T,b){return 0<b.mlw?b.mlw:s(T.marker.line.width)?0:T.marker.line.width}},63400:function(ee,R,e){var M=e(93024),k=e(24040),s=e(76308),T=e(3400).fillText,b=e(60444).getLineWidth,f=e(54460).hoverLabelText,o=e(39032).BADNUM;function t(n,r,a,l,u){var h,c,x,p,v,g,y,m=n.cd,_=m[0].trace,d=m[0].t,S=l==="closest",w=_.type==="waterfall",E=n.maxHoverDistance,C=n.maxSpikeDistance;_.orientation==="h"?(h=a,c=r,x="y",p="x",v=$,g=H):(h=r,c=a,x="x",p="y",g=$,v=H);var O=_[x+"period"],P=S||O;function z(ce){return I(ce,-1)}function j(ce){return I(ce,1)}function I(ce,fe){var pe=ce.w;return ce[x]+fe*pe/2}function N(ce){return ce[x+"End"]-ce[x+"Start"]}var W=S?z:O?function(ce){return ce.p-N(ce)/2}:function(ce){return Math.min(z(ce),ce.p-d.bardelta/2)},F=S?j:O?function(ce){return ce.p+N(ce)/2}:function(ce){return Math.max(j(ce),ce.p+d.bardelta/2)};function U(ce,fe,pe){return u.finiteRange&&(pe=0),M.inbox(ce-h,fe-h,pe+Math.min(1,Math.abs(fe-ce)/y)-1)}function H(ce){return U(W(ce),F(ce),E)}function ne(ce){var fe=ce[p];if(w){var pe=Math.abs(ce.rawS)||0;c>0?fe+=pe:c<0&&(fe-=pe)}return fe}function $(ce){var fe=c,pe=ce.b,ge=ne(ce);return M.inbox(pe-fe,ge-fe,E+(ge-fe)/(ge-pe)-1)}var K=n[x+"a"],Q=n[p+"a"];y=Math.abs(K.r2c(K.range[1])-K.r2c(K.range[0]));var Z=M.getDistanceFunction(l,v,g,function(ce){return(v(ce)+g(ce))/2});if(M.getClosest(m,Z,n),n.index!==!1&&m[n.index].p!==o){P||(W=function(ce){return Math.min(z(ce),ce.p-d.bargroupwidth/2)},F=function(ce){return Math.max(j(ce),ce.p+d.bargroupwidth/2)});var X=m[n.index],te=_.base?X.b+X.s:X.s;n[p+"0"]=n[p+"1"]=Q.c2p(X[p],!0),n[p+"LabelVal"]=te;var ae=d.extents[d.extents.round(X.p)];n[x+"0"]=K.c2p(S?W(X):ae[0],!0),n[x+"1"]=K.c2p(S?F(X):ae[1],!0);var se=X.orig_p!==void 0;return n[x+"LabelVal"]=se?X.orig_p:X.p,n.labelLabel=f(K,n[x+"LabelVal"],_[x+"hoverformat"]),n.valueLabel=f(Q,n[p+"LabelVal"],_[p+"hoverformat"]),n.baseLabel=f(Q,X.b,_[p+"hoverformat"]),n.spikeDistance=(function(ce){var fe=c,pe=ce.b,ge=ne(ce);return M.inbox(pe-fe,ge-fe,C+(ge-fe)/(ge-pe)-1)}(X)+function(ce){return U(z(ce),j(ce),C)}(X))/2,n[x+"Spike"]=K.c2p(X.p,!0),T(X,_,n),n.hovertemplate=_.hovertemplate,n}}function i(n,r){var a=r.mcc||n.marker.color,l=r.mlcc||n.marker.line.color,u=b(n,r);return s.opacity(a)?a:s.opacity(l)&&u?l:void 0}ee.exports={hoverPoints:function(n,r,a,l,u){var h=t(n,r,a,l,u);if(h){var c=h.cd,x=c[0].trace,p=c[h.index];return h.color=i(x,p),k.getComponentMethod("errorbars","hoverInfo")(p,x,h),[h]}},hoverOnBars:t,getTraceColor:i}},51132:function(ee,R,e){ee.exports={attributes:e(20832),layoutAttributes:e(39324),supplyDefaults:e(31508).supplyDefaults,crossTraceDefaults:e(31508).crossTraceDefaults,supplyLayoutDefaults:e(37156),calc:e(71820),crossTraceCalc:e(96376).crossTraceCalc,colorbar:e(5528),arraysToCalcdata:e(84664),plot:e(98184).plot,style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,hoverPoints:e(63400).hoverPoints,eventData:e(52160),selectPoints:e(45784),moduleType:"trace",name:"bar",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},39324:function(ee){ee.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},barcornerradius:{valType:"any",editType:"calc"}}},37156:function(ee,R,e){var M=e(24040),k=e(54460),s=e(3400),T=e(39324),b=e(31508).validateCornerradius;ee.exports=function(f,o,t){function i(v,g){return s.coerce(f,o,T,v,g)}for(var n=!1,r=!1,a=!1,l={},u=i("barmode"),h=0;h<t.length;h++){var c=t[h];if(M.traceIs(c,"bar")&&c.visible){if(n=!0,u==="group"){var x=c.xaxis+c.yaxis;l[x]&&(a=!0),l[x]=!0}c.visible&&c.type==="histogram"&&k.getFromId({_fullLayout:o},c[c.orientation==="v"?"xaxis":"yaxis"]).type!=="category"&&(r=!0)}}if(n){u!=="overlay"&&i("barnorm"),i("bargap",r&&!a?0:.2),i("bargroupgap");var p=i("barcornerradius");o.barcornerradius=b(p)}else delete o.barmode}},98184:function(ee,R,e){var M=e(33428),k=e(38248),s=e(3400),T=e(72736),b=e(76308),f=e(43616),o=e(24040),t=e(54460).tickText,i=e(82744),n=i.recordMinTextSize,r=i.clearMinTextSize,a=e(60100),l=e(60444),u=e(78048),h=e(20832),c=h.text,x=h.textposition,p=e(10624).appendArrayPointValue,v=u.TEXTPAD;function g(P){return P.id}function y(P){if(P.ids)return g}function m(P){return(P>0)-(P<0)}function _(P,z){return P<z?1:-1}function d(P,z,j,I){var N;return!z.uniformtext.mode&&S(j)?(I&&(N=I()),P.transition().duration(j.duration).ease(j.easing).each("end",function(){N&&N()}).each("interrupt",function(){N&&N()})):P}function S(P){return P&&P.duration>0}function w(P,z,j,I,N){return!(P<0||z<0)&&(j<=P&&I<=z||j<=z&&I<=P||(N?P>=j*(z/I):z>=I*(P/j)))}function E(P){return P==="auto"?0:P}function C(P,z){var j=Math.PI/180*z,I=Math.abs(Math.sin(j)),N=Math.abs(Math.cos(j));return{x:P.width*N+P.height*I,y:P.width*I+P.height*N}}function O(P,z,j,I,N,W){var F=!!W.isHorizontal,U=!!W.constrained,H=W.angle||0,ne=W.anchor,$=ne==="end",K=ne==="start",Q=((W.leftToRight||0)+1)/2,Z=1-Q,X=W.hasB,te=W.r,ae=W.overhead,se=N.width,ce=N.height,fe=Math.abs(z-P),pe=Math.abs(I-j),ge=fe>2*v&&pe>2*v?v:0;fe-=2*ge,pe-=2*ge;var me=E(H);H!=="auto"||se<=fe&&ce<=pe||!(se>fe||ce>pe)||(se>pe||ce>fe)&&se<ce==fe<pe||(me+=90);var be,ke,ze=C(N,me);if(te&&te-ae>v){var ve=function(Ie,de,_e,Ae,Pe,Ee,Fe,Ve,Ye){var tt,nt,ht,vt,pt=Math.max(0,Math.abs(de-Ie)-2*v),Qe=Math.max(0,Math.abs(Ae-_e)-2*v),Ke=Ee-v,Mt=Fe?Ke-Math.sqrt(Ke*Ke-(Ke-Fe)*(Ke-Fe)):Ke,Ot=Ye?2*Ke:Ve?Ke-Fe:2*Mt,Pt=Ye?2*Ke:Ve?2*Mt:Ke-Fe;return Pe.y/Pe.x>=Qe/(pt-Ot)?vt=Qe/Pe.y:Pe.y/Pe.x<=(Qe-Pt)/pt?vt=pt/Pe.x:!Ye&&Ve?(tt=Pe.x*Pe.x+Pe.y*Pe.y/4,ht=(pt-Ke)*(pt-Ke)+(Qe/2-Ke)*(Qe/2-Ke)-Ke*Ke,vt=(-(nt=-2*Pe.x*(pt-Ke)-Pe.y*(Qe/2-Ke))+Math.sqrt(nt*nt-4*tt*ht))/(2*tt)):Ye?(tt=(Pe.x*Pe.x+Pe.y*Pe.y)/4,ht=(pt/2-Ke)*(pt/2-Ke)+(Qe/2-Ke)*(Qe/2-Ke)-Ke*Ke,vt=(-(nt=-Pe.x*(pt/2-Ke)-Pe.y*(Qe/2-Ke))+Math.sqrt(nt*nt-4*tt*ht))/(2*tt)):(tt=Pe.x*Pe.x/4+Pe.y*Pe.y,ht=(pt/2-Ke)*(pt/2-Ke)+(Qe-Ke)*(Qe-Ke)-Ke*Ke,vt=(-(nt=-Pe.x*(pt/2-Ke)-2*Pe.y*(Qe-Ke))+Math.sqrt(nt*nt-4*tt*ht))/(2*tt)),{scale:vt=Math.min(1,vt),pad:Ve?Math.max(0,Ke-Math.sqrt(Math.max(0,Ke*Ke-(Ke-(Qe-Pe.y*vt)/2)*(Ke-(Qe-Pe.y*vt)/2)))-Fe):Math.max(0,Ke-Math.sqrt(Math.max(0,Ke*Ke-(Ke-(pt-Pe.x*vt)/2)*(Ke-(pt-Pe.x*vt)/2)))-Fe)}}(P,z,j,I,ze,te,ae,F,X);be=ve.scale,ke=ve.pad}else be=1,U&&(be=Math.min(1,fe/ze.x,pe/ze.y)),ke=0;var oe=N.left*Z+N.right*Q,ie=(N.top+N.bottom)/2,he=(P+v)*Z+(z-v)*Q,Se=(j+I)/2,ye=0,we=0;if(K||$){var Me=(F?ze.x:ze.y)/2;te&&($||X)&&(ge+=ke);var Oe=F?_(P,z):_(j,I);F?K?(he=P+Oe*ge,ye=-Oe*Me):(he=z-Oe*ge,ye=Oe*Me):K?(Se=j+Oe*ge,we=-Oe*Me):(Se=I-Oe*ge,we=Oe*Me)}return{textX:oe,textY:ie,targetX:he,targetY:Se,anchorX:ye,anchorY:we,scale:be,rotate:me}}ee.exports={plot:function(P,z,j,I,N,W){var F=z.xaxis,U=z.yaxis,H=P._fullLayout,ne=P._context.staticPlot;N||(N={mode:H.barmode,norm:H.barmode,gap:H.bargap,groupgap:H.bargroupgap},r("bar",H));var $=s.makeTraceGroups(I,j,"trace bars").each(function(K){var Q=M.select(this),Z=K[0].trace,X=K[0].t,te=Z.type==="waterfall",ae=Z.type==="funnel",se=Z.type==="histogram",ce=Z.type==="bar",fe=ce||ae,pe=0;te&&Z.connector.visible&&Z.connector.mode==="between"&&(pe=Z.connector.line.width/2);var ge=Z.orientation==="h",me=S(N),be=s.ensureSingle(Q,"g","points"),ke=y(Z),ze=be.selectAll("g.point").data(s.identity,ke);ze.enter().append("g").classed("point",!0),ze.exit().remove(),ze.each(function(oe,ie){var he,Se,ye=M.select(this),we=function(it,dt,gt,je){var Re=[],rt=[],ct=je?dt:gt,ut=je?gt:dt;return Re[0]=ct.c2p(it.s0,!0),rt[0]=ut.c2p(it.p0,!0),Re[1]=ct.c2p(it.s1,!0),rt[1]=ut.c2p(it.p1,!0),je?[Re,rt]:[rt,Re]}(oe,F,U,ge),Me=we[0][0],Oe=we[0][1],Ie=we[1][0],de=we[1][1],_e=(ge?Oe-Me:de-Ie)==0;if(_e&&fe&&l.getLineWidth(Z,oe)&&(_e=!1),_e||(_e=!(k(Me)&&k(Oe)&&k(Ie)&&k(de))),oe.isBlank=_e,_e&&(ge?Oe=Me:de=Ie),pe&&!_e&&(ge?(Me-=_(Me,Oe)*pe,Oe+=_(Me,Oe)*pe):(Ie-=_(Ie,de)*pe,de+=_(Ie,de)*pe)),Z.type==="waterfall"){if(!_e){var Ae=Z[oe.dir].marker;he=Ae.line.width,Se=Ae.color}}else he=l.getLineWidth(Z,oe),Se=oe.mc||Z.marker.color;function Pe(it){var dt=M.round(he/2%1,2);return N.gap===0&&N.groupgap===0?M.round(Math.round(it)-dt,2):it}var Ee=b.opacity(Se)<1||he>.01?Pe:function(it,dt,gt){return gt&&it===dt?it:Math.abs(it-dt)>=2?Pe(it):it>dt?Math.ceil(it):Math.floor(it)};P._context.staticPlot||(Me=Ee(Me,Oe,ge),Oe=Ee(Oe,Me,ge),Ie=Ee(Ie,de,!ge),de=Ee(de,Ie,!ge));var Fe,Ve=ge?F.c2p:U.c2p;Fe=oe.s0>0?oe._sMax:oe.s0<0?oe._sMin:oe.s1>0?oe._sMax:oe._sMin;var Ye,tt,nt=ce||se?function(it,dt){if(!it)return 0;var gt,je=Math.abs(ge?de-Ie:Oe-Me),Re=Math.abs(ge?Oe-Me:de-Ie),rt=Ee(Math.abs(Ve(Fe,!0)-Ve(0,!0))),ct=oe.hasB?Math.min(je/2,Re/2):Math.min(je/2,rt);return gt=dt==="%"?je*(Math.min(50,it)/100):it,Ee(Math.max(Math.min(gt,ct),0))}(X.cornerradiusvalue,X.cornerradiusform):0,ht="M"+Me+","+Ie+"V"+de+"H"+Oe+"V"+Ie+"Z",vt=0;if(nt&&oe.s){var pt=m(oe.s0)===0||m(oe.s)===m(oe.s0)?oe.s1:oe.s0;if((vt=Ee(oe.hasB?0:Math.abs(Ve(Fe,!0)-Ve(pt,!0))))<nt){var Qe=_(Me,Oe),Ke=_(Ie,de),Mt=Qe===-Ke?1:0;if(ge)if(oe.hasB)Ye="M"+(Me+nt*Qe)+","+Ie+"A "+nt+","+nt+" 0 0 "+Mt+" "+Me+","+(Ie+nt*Ke)+"V"+(de-nt*Ke)+"A "+nt+","+nt+" 0 0 "+Mt+" "+(Me+nt*Qe)+","+de+"H"+(Oe-nt*Qe)+"A "+nt+","+nt+" 0 0 "+Mt+" "+Oe+","+(de-nt*Ke)+"V"+(Ie+nt*Ke)+"A "+nt+","+nt+" 0 0 "+Mt+" "+(Oe-nt*Qe)+","+Ie+"Z";else{var Ot=(tt=Math.abs(Oe-Me)+vt)<nt?nt-Math.sqrt(tt*(2*nt-tt)):0,Pt=vt>0?Math.sqrt(vt*(2*nt-vt)):0,St=Qe>0?Math.max:Math.min;Ye="M"+Me+","+Ie+"V"+(de-Ot*Ke)+"H"+St(Oe-(nt-vt)*Qe,Me)+"A "+nt+","+nt+" 0 0 "+Mt+" "+Oe+","+(de-nt*Ke-Pt)+"V"+(Ie+nt*Ke+Pt)+"A "+nt+","+nt+" 0 0 "+Mt+" "+St(Oe-(nt-vt)*Qe,Me)+","+(Ie+Ot*Ke)+"Z"}else if(oe.hasB)Ye="M"+(Me+nt*Qe)+","+Ie+"A "+nt+","+nt+" 0 0 "+Mt+" "+Me+","+(Ie+nt*Ke)+"V"+(de-nt*Ke)+"A "+nt+","+nt+" 0 0 "+Mt+" "+(Me+nt*Qe)+","+de+"H"+(Oe-nt*Qe)+"A "+nt+","+nt+" 0 0 "+Mt+" "+Oe+","+(de-nt*Ke)+"V"+(Ie+nt*Ke)+"A "+nt+","+nt+" 0 0 "+Mt+" "+(Oe-nt*Qe)+","+Ie+"Z";else{var He=(tt=Math.abs(de-Ie)+vt)<nt?nt-Math.sqrt(tt*(2*nt-tt)):0,We=vt>0?Math.sqrt(vt*(2*nt-vt)):0,Be=Ke>0?Math.max:Math.min;Ye="M"+(Me+He*Qe)+","+Ie+"V"+Be(de-(nt-vt)*Ke,Ie)+"A "+nt+","+nt+" 0 0 "+Mt+" "+(Me+nt*Qe-We)+","+de+"H"+(Oe-nt*Qe+We)+"A "+nt+","+nt+" 0 0 "+Mt+" "+(Oe-He*Qe)+","+Be(de-(nt-vt)*Ke,Ie)+"V"+Ie+"Z"}}else Ye=ht}else Ye=ht;var Ge=d(s.ensureSingle(ye,"path"),H,N,W);if(Ge.style("vector-effect",ne?"none":"non-scaling-stroke").attr("d",isNaN((Oe-Me)*(de-Ie))||_e&&P._context.staticPlot?"M0,0Z":Ye).call(f.setClipUrl,z.layerClipId,P),!H.uniformtext.mode&&me){var ot=f.makePointStyleFns(Z);f.singlePointStyle(oe,Ge,Z,ot,P)}(function(it,dt,gt,je,Re,rt,ct,ut,et,xt,mt,Tt,yt){var bt,zt=dt.xaxis,Ut=dt.yaxis,en=it._fullLayout;function an(lr,Gt,gn){return s.ensureSingle(lr,"text").text(Gt).attr({class:"bartext bartext-"+bt,"text-anchor":"middle","data-notex":1}).call(f.font,gn).call(T.convertToTspans,it)}var rn=je[0].trace,qt=rn.orientation==="h",Kt=function(lr,Gt,gn,Ct,Rt){var Zt,cn=Gt[0].trace;return Zt=cn.texttemplate?function(fn,_n,pn,sn,Nt){var Ft=_n[0].trace,Qt=s.castOption(Ft,pn,"texttemplate");if(!Qt)return"";var Tn,Pn,On,Dn,Zn=Ft.type==="histogram",qn=Ft.type==="waterfall",Kn=Ft.type==="funnel",Un=Ft.orientation==="h";function Gn(Or){return t(Dn,Dn.c2l(Or),!0).text}Un?(Tn="y",Pn=Nt,On="x",Dn=sn):(Tn="x",Pn=sn,On="y",Dn=Nt);var ir,mr=_n[pn],ur={};ur.label=mr.p,ur.labelLabel=ur[Tn+"Label"]=(ir=mr.p,t(Pn,Pn.c2l(ir),!0).text);var Qn=s.castOption(Ft,mr.i,"text");(Qn===0||Qn)&&(ur.text=Qn),ur.value=mr.s,ur.valueLabel=ur[On+"Label"]=Gn(mr.s);var pr={};p(pr,Ft,mr.i),(Zn||pr.x===void 0)&&(pr.x=Un?ur.value:ur.label),(Zn||pr.y===void 0)&&(pr.y=Un?ur.label:ur.value),(Zn||pr.xLabel===void 0)&&(pr.xLabel=Un?ur.valueLabel:ur.labelLabel),(Zn||pr.yLabel===void 0)&&(pr.yLabel=Un?ur.labelLabel:ur.valueLabel),qn&&(ur.delta=+mr.rawS||mr.s,ur.deltaLabel=Gn(ur.delta),ur.final=mr.v,ur.finalLabel=Gn(ur.final),ur.initial=ur.final-ur.delta,ur.initialLabel=Gn(ur.initial)),Kn&&(ur.value=mr.s,ur.valueLabel=Gn(ur.value),ur.percentInitial=mr.begR,ur.percentInitialLabel=s.formatPercent(mr.begR),ur.percentPrevious=mr.difR,ur.percentPreviousLabel=s.formatPercent(mr.difR),ur.percentTotal=mr.sumR,ur.percenTotalLabel=s.formatPercent(mr.sumR));var Tr=s.castOption(Ft,mr.i,"customdata");return Tr&&(ur.customdata=Tr),s.texttemplateString(Qt,ur,fn._d3locale,pr,ur,Ft._meta||{})}(lr,Gt,gn,Ct,Rt):cn.textinfo?function(fn,_n,pn,sn){var Nt=fn[0].trace,Ft=Nt.orientation==="h",Qt=Nt.type==="waterfall",Tn=Nt.type==="funnel";function Pn(Tr){return t(Ft?pn:sn,+Tr,!0).text}var On,Dn,Zn=Nt.textinfo,qn=fn[_n],Kn=Zn.split("+"),Un=[],Gn=function(Tr){return Kn.indexOf(Tr)!==-1};if(Gn("label")&&Un.push((Dn=fn[_n].p,t(Ft?sn:pn,Dn,!0).text)),Gn("text")&&((On=s.castOption(Nt,qn.i,"text"))===0||On)&&Un.push(On),Qt){var ir=+qn.rawS||qn.s,mr=qn.v,ur=mr-ir;Gn("initial")&&Un.push(Pn(ur)),Gn("delta")&&Un.push(Pn(ir)),Gn("final")&&Un.push(Pn(mr))}if(Tn){Gn("value")&&Un.push(Pn(qn.s));var Qn=0;Gn("percent initial")&&Qn++,Gn("percent previous")&&Qn++,Gn("percent total")&&Qn++;var pr=Qn>1;Gn("percent initial")&&(On=s.formatPercent(qn.begR),pr&&(On+=" of initial"),Un.push(On)),Gn("percent previous")&&(On=s.formatPercent(qn.difR),pr&&(On+=" of previous"),Un.push(On)),Gn("percent total")&&(On=s.formatPercent(qn.sumR),pr&&(On+=" of total"),Un.push(On))}return Un.join("<br>")}(Gt,gn,Ct,Rt):l.getValue(cn.text,gn),l.coerceString(c,Zt)}(en,je,Re,zt,Ut);bt=function(lr,Gt){var gn=l.getValue(lr.textposition,Gt);return l.coerceEnumerated(x,gn)}(rn,Re);var xn=Tt.mode==="stack"||Tt.mode==="relative",on=je[Re],Xt=!xn||on._outmost,ln=on.hasB,Jt=xt&&xt-mt>v;if(Kt&&bt!=="none"&&(!on.isBlank&&rt!==ct&&ut!==et||bt!=="auto"&&bt!=="inside")){var tn=en.font,wn=a.getBarColor(je[Re],rn),mn=a.getInsideTextFont(rn,Re,tn,wn),Cn=a.getOutsideTextFont(rn,Re,tn),yn=rn.insidetextanchor||"end",Mn=gt.datum();qt?zt.type==="log"&&Mn.s0<=0&&(rt=zt.range[0]<zt.range[1]?0:zt._length):Ut.type==="log"&&Mn.s0<=0&&(ut=Ut.range[0]<Ut.range[1]?Ut._length:0);var zn,Wn,sr,Fn,Yn,Xn=Math.abs(ct-rt),rr=Math.abs(et-ut),Yt=Xn-2*v,$t=rr-2*v;if(bt==="outside"&&(Xt||on.hasB||(bt="inside")),bt==="auto")if(Xt){bt="inside",zn=an(gt,Kt,Yn=s.ensureUniformFontSize(it,mn)),sr=(Wn=f.bBox(zn.node())).width,Fn=Wn.height;var Sn,dn=sr>0&&Fn>0;Sn=Jt?ln?w(Yt-2*xt,$t,sr,Fn,qt)||w(Yt,$t-2*xt,sr,Fn,qt):qt?w(Yt-(xt-mt),$t,sr,Fn,qt)||w(Yt,$t-2*(xt-mt),sr,Fn,qt):w(Yt,$t-(xt-mt),sr,Fn,qt)||w(Yt-2*(xt-mt),$t,sr,Fn,qt):w(Yt,$t,sr,Fn,qt),dn&&Sn?bt="inside":(bt="outside",zn.remove(),zn=null)}else bt="inside";if(!zn){var En=(zn=an(gt,Kt,Yn=s.ensureUniformFontSize(it,bt==="outside"?Cn:mn))).attr("transform");if(zn.attr("transform",""),sr=(Wn=f.bBox(zn.node())).width,Fn=Wn.height,zn.attr("transform",En),sr<=0||Fn<=0)return void zn.remove()}var Nn,Bn=rn.textangle;Nn=bt==="outside"?function(lr,Gt,gn,Ct,Rt,Zt){var cn,fn=!!Zt.isHorizontal,_n=!!Zt.constrained,pn=Zt.angle||0,sn=Rt.width,Nt=Rt.height,Ft=Math.abs(Gt-lr),Qt=Math.abs(Ct-gn);cn=fn?Qt>2*v?v:0:Ft>2*v?v:0;var Tn=1;_n&&(Tn=fn?Math.min(1,Qt/Nt):Math.min(1,Ft/sn));var Pn=E(pn),On=C(Rt,Pn),Dn=(fn?On.x:On.y)/2,Zn=(Rt.left+Rt.right)/2,qn=(Rt.top+Rt.bottom)/2,Kn=(lr+Gt)/2,Un=(gn+Ct)/2,Gn=0,ir=0,mr=fn?_(Gt,lr):_(gn,Ct);return fn?(Kn=Gt-mr*cn,Gn=mr*Dn):(Un=Ct+mr*cn,ir=-mr*Dn),{textX:Zn,textY:qn,targetX:Kn,targetY:Un,anchorX:Gn,anchorY:ir,scale:Tn,rotate:Pn}}(rt,ct,ut,et,Wn,{isHorizontal:qt,constrained:rn.constraintext==="both"||rn.constraintext==="outside",angle:Bn}):O(rt,ct,ut,et,Wn,{isHorizontal:qt,constrained:rn.constraintext==="both"||rn.constraintext==="inside",angle:Bn,anchor:yn,hasB:ln,r:xt,overhead:mt}),Nn.fontSize=Yn.size,n(rn.type==="histogram"?"bar":rn.type,Nn,en),on.transform=Nn;var $n=d(zn,en,Tt,yt);s.setTransormAndDisplay($n,Nn)}else gt.select("text").remove()})(P,z,ye,K,ie,Me,Oe,Ie,de,nt,vt,N,W),z.layerClipId&&f.hideOutsideRangePoint(oe,ye.select("text"),F,U,Z.xcalendar,Z.ycalendar)});var ve=Z.cliponaxis===!1;f.setClipUrl(Q,ve?null:z.layerClipId,P)});o.getComponentMethod("errorbars","plot")(P,$,z,N)},toMoveInsideBar:O}},45784:function(ee){function R(e,M,k,s,T){var b=M.c2p(s?e.s0:e.p0,!0),f=M.c2p(s?e.s1:e.p1,!0),o=k.c2p(s?e.p0:e.s0,!0),t=k.c2p(s?e.p1:e.s1,!0);return T?[(b+f)/2,(o+t)/2]:s?[f,(o+t)/2]:[(b+f)/2,t]}ee.exports=function(e,M){var k,s=e.cd,T=e.xaxis,b=e.yaxis,f=s[0].trace,o=f.type==="funnel",t=f.orientation==="h",i=[];if(M===!1)for(k=0;k<s.length;k++)s[k].selected=0;else for(k=0;k<s.length;k++){var n=s[k],r="ct"in n?n.ct:R(n,T,b,t,o);M.contains(r,!1,k,e)?(i.push({pointNumber:k,x:T.c2d(n.x),y:b.c2d(n.y)}),n.selected=1):n.selected=0}return i}},72592:function(ee,R,e){ee.exports=k;var M=e(3400).distinctVals;function k(s,T){this.traces=s,this.sepNegVal=T.sepNegVal,this.overlapNoMerge=T.overlapNoMerge;for(var b=1/0,f=T.posAxis._id.charAt(0),o=[],t=0;t<s.length;t++){for(var i=s[t],n=0;n<i.length;n++){var r=i[n],a=r.p;a===void 0&&(a=r[f]),a!==void 0&&o.push(a)}i[0]&&i[0].width1&&(b=Math.min(i[0].width1,b))}this.positions=o;var l=M(o);this.distinctPositions=l.vals,l.vals.length===1&&b!==1/0?this.minDiff=b:this.minDiff=Math.min(l.minDiff,b);var u=(T.posAxis||{}).type;u!=="category"&&u!=="multicategory"||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}k.prototype.put=function(s,T){var b=this.getLabel(s,T),f=this.bins[b]||0;return this.bins[b]=f+T,f},k.prototype.get=function(s,T){var b=this.getLabel(s,T);return this.bins[b]||0},k.prototype.getLabel=function(s,T){return(T<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?s:Math.round(s/this.binWidth))}},60100:function(ee,R,e){var M=e(33428),k=e(76308),s=e(43616),T=e(3400),b=e(24040),f=e(82744).resizeText,o=e(20832),t=o.textfont,i=o.insidetextfont,n=o.outsidetextfont,r=e(60444);function a(g,y,m){s.pointStyle(g.selectAll("path"),y,m),l(g,y,m)}function l(g,y,m){g.selectAll("text").each(function(_){var d=M.select(this),S=T.ensureUniformFontSize(m,u(d,_,y,m));s.font(d,S)})}function u(g,y,m,_){var d=_._fullLayout.font,S=m.textfont;if(g.classed("bartext-inside")){var w=v(y,m);S=c(m,y.i,d,w)}else g.classed("bartext-outside")&&(S=x(m,y.i,d));return S}function h(g,y,m){return p(t,g.textfont,y,m)}function c(g,y,m,_){var d=h(g,y,m);return(g._input.textfont===void 0||g._input.textfont.color===void 0||Array.isArray(g.textfont.color)&&g.textfont.color[y]===void 0)&&(d={color:k.contrast(_),family:d.family,size:d.size,weight:d.weight,style:d.style,variant:d.variant,textcase:d.textcase,lineposition:d.lineposition,shadow:d.shadow}),p(i,g.insidetextfont,y,d)}function x(g,y,m){var _=h(g,y,m);return p(n,g.outsidetextfont,y,_)}function p(g,y,m,_){y=y||{};var d=r.getValue(y.family,m),S=r.getValue(y.size,m),w=r.getValue(y.color,m),E=r.getValue(y.weight,m),C=r.getValue(y.style,m),O=r.getValue(y.variant,m),P=r.getValue(y.textcase,m),z=r.getValue(y.lineposition,m),j=r.getValue(y.shadow,m);return{family:r.coerceString(g.family,d,_.family),size:r.coerceNumber(g.size,S,_.size),color:r.coerceColor(g.color,w,_.color),weight:r.coerceString(g.weight,E,_.weight),style:r.coerceString(g.style,C,_.style),variant:r.coerceString(g.variant,O,_.variant),textcase:r.coerceString(g.variant,P,_.textcase),lineposition:r.coerceString(g.variant,z,_.lineposition),shadow:r.coerceString(g.variant,j,_.shadow)}}function v(g,y){return y.type==="waterfall"?y[g.dir].marker.color:g.mcc||g.mc||y.marker.color}ee.exports={style:function(g){var y=M.select(g).selectAll('g[class^="barlayer"]').selectAll("g.trace");f(g,y,"bar");var m=y.size(),_=g._fullLayout;y.style("opacity",function(d){return d[0].trace.opacity}).each(function(d){(_.barmode==="stack"&&m>1||_.bargap===0&&_.bargroupgap===0&&!d[0].trace.marker.line.width)&&M.select(this).attr("shape-rendering","crispEdges")}),y.selectAll("g.points").each(function(d){a(M.select(this),d[0].trace,g)}),b.getComponentMethod("errorbars","style")(y)},styleTextPoints:l,styleOnSelect:function(g,y,m){var _=y[0].trace;_.selectedpoints?function(d,S,w){s.selectedPointStyle(d.selectAll("path"),S),function(E,C,O){E.each(function(P){var z,j=M.select(this);if(P.selected){z=T.ensureUniformFontSize(O,u(j,P,C,O));var I=C.selected.textfont&&C.selected.textfont.color;I&&(z.color=I),s.font(j,z)}else s.selectedTextStyle(j,C)})}(d.selectAll("text"),S,w)}(m,_,g):(a(m,_,g),b.getComponentMethod("errorbars","style")(m))},getInsideTextFont:c,getOutsideTextFont:x,getBarColor:v,resizeText:f}},55592:function(ee,R,e){var M=e(76308),k=e(94288).hasColorscale,s=e(27260),T=e(3400).coercePattern;ee.exports=function(b,f,o,t,i){var n=o("marker.color",t),r=k(b,"marker");r&&s(b,f,i,o,{prefix:"marker.",cLetter:"c"}),o("marker.line.color",M.defaultLine),k(b,"marker.line")&&s(b,f,i,o,{prefix:"marker.line.",cLetter:"c"}),o("marker.line.width"),o("marker.opacity"),T(o,"marker.pattern",n,r),o("selected.marker.color"),o("unselected.marker.color")}},82744:function(ee,R,e){var M=e(33428),k=e(3400);function s(T){return"_"+T+"Text_minsize"}ee.exports={recordMinTextSize:function(T,b,f){if(f.uniformtext.mode){var o=s(T),t=f.uniformtext.minsize,i=b.scale*b.fontSize;b.hide=i<t,f[o]=f[o]||1/0,b.hide||(f[o]=Math.min(f[o],Math.max(i,t)))}},clearMinTextSize:function(T,b){b[s(T)]=void 0},resizeText:function(T,b,f){var o=T._fullLayout,t=o["_"+f+"Text_minsize"];if(t){var i,n=o.uniformtext.mode==="hide";switch(f){case"funnelarea":case"pie":case"sunburst":i="g.slice";break;case"treemap":case"icicle":i="g.slice, g.pathbar";break;default:i="g.points > g.point"}b.selectAll(i).each(function(r){var a=r.transform;if(a){a.scale=n&&a.hide?0:t/a.fontSize;var l=M.select(this).select("text");k.setTransormAndDisplay(l,a)}})}}}},78100:function(ee,R,e){var M,k=e(21776).Ks,s=e(92880).extendFlat,T=e(8319),b=e(20832);ee.exports={r:T.r,theta:T.theta,r0:T.r0,dr:T.dr,theta0:T.theta0,dtheta:T.dtheta,thetaunit:T.thetaunit,base:s({},b.base,{}),offset:s({},b.offset,{}),width:s({},b.width,{}),text:s({},b.text,{}),hovertext:s({},b.hovertext,{}),marker:(M=s({},b.marker),delete M.cornerradius,M),hoverinfo:T.hoverinfo,hovertemplate:k(),selected:b.selected,unselected:b.unselected}},47056:function(ee,R,e){var M=e(94288).hasColorscale,k=e(47128),s=e(3400).isArrayOrTypedArray,T=e(84664),b=e(96376).setGroupPositions,f=e(4500),o=e(24040).traceIs,t=e(3400).extendFlat;ee.exports={calc:function(i,n){for(var r=i._fullLayout,a=n.subplot,l=r[a].radialaxis,u=r[a].angularaxis,h=l.makeCalcdata(n,"r"),c=u.makeCalcdata(n,"theta"),x=n._length,p=new Array(x),v=h,g=c,y=0;y<x;y++)p[y]={p:g[y],s:v[y]};function m(_){var d=n[_];d!==void 0&&(n["_"+_]=s(d)?u.makeCalcdata(n,_):u.d2c(d,n.thetaunit))}return u.type==="linear"&&(m("width"),m("offset")),M(n,"marker")&&k(i,n,{vals:n.marker.color,containerStr:"marker",cLetter:"c"}),M(n,"marker.line")&&k(i,n,{vals:n.marker.line.color,containerStr:"marker.line",cLetter:"c"}),T(p,n),f(p,n),p},crossTraceCalc:function(i,n,r){for(var a=i.calcdata,l=[],u=0;u<a.length;u++){var h=a[u],c=h[0].trace;c.visible===!0&&o(c,"bar")&&c.subplot===r&&l.push(h)}var x=t({},n.radialaxis,{_id:"x"}),p=n.angularaxis;b(i,p,x,l,{mode:n.barmode,norm:n.barnorm,gap:n.bargap,groupgap:n.bargroupgap})}}},70384:function(ee,R,e){var M=e(3400),k=e(85968).handleRThetaDefaults,s=e(55592),T=e(78100);ee.exports=function(b,f,o,t){function i(n,r){return M.coerce(b,f,T,n,r)}k(b,f,t,i)?(i("thetaunit"),i("base"),i("offset"),i("width"),i("text"),i("hovertext"),i("hovertemplate"),s(b,f,i,o,t),M.coerceSelectionMarkerOpacity(f,i)):f.visible=!1}},68896:function(ee,R,e){var M=e(93024),k=e(3400),s=e(63400).getTraceColor,T=k.fillText,b=e(8504).makeHoverPointText,f=e(57384).isPtInsidePolygon;ee.exports=function(o,t,i){var n=o.cd,r=n[0].trace,a=o.subplot,l=a.radialAxis,u=a.angularAxis,h=a.vangles,c=h?f:k.isPtInsideSector,x=o.maxHoverDistance,p=u._period||2*Math.PI,v=Math.abs(l.g2p(Math.sqrt(t*t+i*i))),g=Math.atan2(i,t);if(l.range[0]>l.range[1]&&(g+=Math.PI),M.getClosest(n,function(_){return c(v,g,[_.rp0,_.rp1],[_.thetag0,_.thetag1],h)?x+Math.min(1,Math.abs(_.thetag1-_.thetag0)/p)-1+(_.rp1-v)/(_.rp1-_.rp0)-1:1/0},o),o.index!==!1){var y=n[o.index];o.x0=o.x1=y.ct[0],o.y0=o.y1=y.ct[1];var m=k.extendFlat({},y,{r:y.s,theta:y.p});return T(y,r,o),b(m,r,a,o),o.hovertemplate=r.hovertemplate,o.color=s(r,y),o.xLabelVal=o.yLabelVal=void 0,y.s<0&&(o.idealAlign="left"),[o]}}},94456:function(ee,R,e){ee.exports={moduleType:"trace",name:"barpolar",basePlotModule:e(40872),categories:["polar","bar","showLegend"],attributes:e(78100),layoutAttributes:e(9320),supplyDefaults:e(70384),supplyLayoutDefaults:e(89580),calc:e(47056).calc,crossTraceCalc:e(47056).crossTraceCalc,plot:e(42040),colorbar:e(5528),formatLabels:e(22852),style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,hoverPoints:e(68896),selectPoints:e(45784),meta:{}}},9320:function(ee){ee.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},89580:function(ee,R,e){var M=e(3400),k=e(9320);ee.exports=function(s,T,b){var f,o={};function t(r,a){return M.coerce(s[f]||{},T[f],k,r,a)}for(var i=0;i<b.length;i++){var n=b[i];n.type==="barpolar"&&n.visible===!0&&(o[f=n.subplot]||(t("barmode"),t("bargap"),o[f]=1))}}},42040:function(ee,R,e){var M=e(33428),k=e(38248),s=e(3400),T=e(43616),b=e(57384);ee.exports=function(f,o,t){var i=f._context.staticPlot,n=o.xaxis,r=o.yaxis,a=o.radialAxis,l=o.angularAxis,u=function(c){var x=c.cxx,p=c.cyy;return c.vangles?function(v,g,y,m){var _,d;s.angleDelta(y,m)>0?(_=y,d=m):(_=m,d=y);var S=[b.findEnclosingVertexAngles(_,c.vangles)[0],(_+d)/2,b.findEnclosingVertexAngles(d,c.vangles)[1]];return b.pathPolygonAnnulus(v,g,_,d,S,x,p)}:function(v,g,y,m){return s.pathAnnulus(v,g,y,m,x,p)}}(o),h=o.layers.frontplot.select("g.barlayer");s.makeTraceGroups(h,t,"trace bars").each(function(){var c=M.select(this),x=s.ensureSingle(c,"g","points").selectAll("g.point").data(s.identity);x.enter().append("g").style("vector-effect",i?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),x.exit().remove(),x.each(function(p){var v,g=M.select(this),y=p.rp0=a.c2p(p.s0),m=p.rp1=a.c2p(p.s1),_=p.thetag0=l.c2g(p.p0),d=p.thetag1=l.c2g(p.p1);if(k(y)&&k(m)&&k(_)&&k(d)&&y!==m&&_!==d){var S=a.c2g(p.s1),w=(_+d)/2;p.ct=[n.c2p(S*Math.cos(w)),r.c2p(S*Math.sin(w))],v=u(y,m,_,d)}else v="M0,0Z";s.ensureSingle(g,"path").attr("d",v)}),T.setClipUrl(c,o._hasClipOnAxisFalse?o.clipIds.forTraces:null,f)})}},63188:function(ee,R,e){var M=e(98304),k=e(52904),s=e(20832),T=e(22548),b=e(29736).axisHoverFormat,f=e(21776).Ks,o=e(92880).extendFlat,t=k.marker,i=t.line;ee.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},sdmultiple:{valType:"number",min:0,editType:"calc",dflt:1},sizemode:{valType:"enumerated",values:["quartiles","sd"],editType:"calc",dflt:"quartiles"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:o({},t.symbol,{arrayOk:!1,editType:"plot"}),opacity:o({},t.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:o({},t.angle,{arrayOk:!1,editType:"calc"}),size:o({},t.size,{arrayOk:!1,editType:"calc"}),color:o({},t.color,{arrayOk:!1,editType:"style"}),line:{color:o({},i.color,{arrayOk:!1,dflt:T.defaultLine,editType:"style"}),width:o({},i.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:M(),whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},showwhiskers:{valType:"boolean",editType:"calc"},offsetgroup:s.offsetgroup,alignmentgroup:s.alignmentgroup,selected:{marker:k.selected.marker,editType:"style"},unselected:{marker:k.unselected.marker,editType:"style"},text:o({},k.text,{}),hovertext:o({},k.hovertext,{}),hovertemplate:f({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"},zorder:k.zorder}},62555:function(ee,R,e){var M=e(38248),k=e(54460),s=e(1220),T=e(3400),b=e(39032).BADNUM,f=T._;ee.exports=function(c,x){var p,v,g,y,m,_,d,S=c._fullLayout,w=k.getFromId(c,x.xaxis||"x"),E=k.getFromId(c,x.yaxis||"y"),C=[],O=x.type==="violin"?"_numViolins":"_numBoxes";x.orientation==="h"?(g=w,y="x",m=E,_="y",d=!!x.yperiodalignment):(g=E,y="y",m=w,_="x",d=!!x.xperiodalignment);var P,z,j,I,N,W,F=function(Pe,Ee,Fe,Ve){var Ye,tt=Ee+"0"in Pe;if(Ee in Pe||tt&&"d"+Ee in Pe){var nt=Fe.makeCalcdata(Pe,Ee);return[s(Pe,Fe,Ee,nt).vals,nt]}Ye=tt?Pe[Ee+"0"]:"name"in Pe&&(Fe.type==="category"||M(Pe.name)&&["linear","log"].indexOf(Fe.type)!==-1||T.isDateTime(Pe.name)&&Fe.type==="date")?Pe.name:Ve;for(var ht=Fe.type==="multicategory"?Fe.r2c_just_indices(Ye):Fe.d2c(Ye,0,Pe[Ee+"calendar"]),vt=Pe._length,pt=new Array(vt),Qe=0;Qe<vt;Qe++)pt[Qe]=ht;return[pt]}(x,_,m,S[O]),U=F[0],H=F[1],ne=T.distinctVals(U,m),$=ne.vals,K=ne.minDiff/2,Q=(x.boxpoints||x.points)==="all"?T.identity:function(Pe){return Pe.v<P.lf||Pe.v>P.uf};if(x._hasPreCompStats){var Z=x[y],X=function(Pe){return g.d2c((x[Pe]||[])[p])},te=1/0,ae=-1/0;for(p=0;p<x._length;p++){var se=U[p];if(M(se)){if((P={}).pos=P[_]=se,d&&H&&(P.orig_p=H[p]),P.q1=X("q1"),P.med=X("median"),P.q3=X("q3"),z=[],Z&&T.isArrayOrTypedArray(Z[p]))for(v=0;v<Z[p].length;v++)(W=g.d2c(Z[p][v]))!==b&&(t(N={v:W,i:[p,v]},x,[p,v]),z.push(N));if(P.pts=z.sort(i),I=(j=P[y]=z.map(n)).length,P.med!==b&&P.q1!==b&&P.q3!==b&&P.med>=P.q1&&P.q3>=P.med){var ce=X("lowerfence");P.lf=ce!==b&&ce<=P.q1?ce:r(P,j,I);var fe=X("upperfence");P.uf=fe!==b&&fe>=P.q3?fe:a(P,j,I);var pe=X("mean");P.mean=pe!==b?pe:I?T.mean(j,I):(P.q1+P.q3)/2;var ge=X("sd");P.sd=pe!==b&&ge>=0?ge:I?T.stdev(j,I,P.mean):P.q3-P.q1,P.lo=l(P),P.uo=u(P);var me=X("notchspan");me=me!==b&&me>0?me:h(P,I),P.ln=P.med-me,P.un=P.med+me;var be=P.lf,ke=P.uf;x.boxpoints&&j.length&&(be=Math.min(be,j[0]),ke=Math.max(ke,j[I-1])),x.notched&&(be=Math.min(be,P.ln),ke=Math.max(ke,P.un)),P.min=be,P.max=ke}else{var ze;T.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+P.q1,"median = "+P.med,"q3 = "+P.q3].join(`
`)),ze=P.med!==b?P.med:P.q1!==b?P.q3!==b?(P.q1+P.q3)/2:P.q1:P.q3!==b?P.q3:0,P.med=ze,P.q1=P.q3=ze,P.lf=P.uf=ze,P.mean=P.sd=ze,P.ln=P.un=ze,P.min=P.max=ze}te=Math.min(te,P.min),ae=Math.max(ae,P.max),P.pts2=z.filter(Q),C.push(P)}}x._extremes[g._id]=k.findExtremes(g,[te,ae],{padded:!0})}else{var ve=g.makeCalcdata(x,y),oe=function(Pe,Ee){for(var Fe=Pe.length,Ve=new Array(Fe+1),Ye=0;Ye<Fe;Ye++)Ve[Ye]=Pe[Ye]-Ee;return Ve[Fe]=Pe[Fe-1]+Ee,Ve}($,K),ie=$.length,he=function(Pe){for(var Ee=new Array(Pe),Fe=0;Fe<Pe;Fe++)Ee[Fe]=[];return Ee}(ie);for(p=0;p<x._length;p++)if(W=ve[p],M(W)){var Se=T.findBin(U[p],oe);Se>=0&&Se<ie&&(t(N={v:W,i:p},x,p),he[Se].push(N))}var ye=1/0,we=-1/0,Me=x.quartilemethod,Oe=Me==="exclusive",Ie=Me==="inclusive";for(p=0;p<ie;p++)if(he[p].length>0){var de,_e;(P={}).pos=P[_]=$[p],z=P.pts=he[p].sort(i),I=(j=P[y]=z.map(n)).length,P.min=j[0],P.max=j[I-1],P.mean=T.mean(j,I),P.sd=T.stdev(j,I,P.mean)*x.sdmultiple,P.med=T.interp(j,.5),I%2&&(Oe||Ie)?(Oe?(de=j.slice(0,I/2),_e=j.slice(I/2+1)):Ie&&(de=j.slice(0,I/2+1),_e=j.slice(I/2)),P.q1=T.interp(de,.5),P.q3=T.interp(_e,.5)):(P.q1=T.interp(j,.25),P.q3=T.interp(j,.75)),P.lf=r(P,j,I),P.uf=a(P,j,I),P.lo=l(P),P.uo=u(P);var Ae=h(P,I);P.ln=P.med-Ae,P.un=P.med+Ae,ye=Math.min(ye,P.ln),we=Math.max(we,P.un),P.pts2=z.filter(Q),C.push(P)}x.notched&&T.isTypedArray(ve)&&(ve=Array.from(ve)),x._extremes[g._id]=k.findExtremes(g,x.notched?ve.concat([ye,we]):ve,{padded:!0})}return function(Pe,Ee){if(T.isArrayOrTypedArray(Ee.selectedpoints))for(var Fe=0;Fe<Pe.length;Fe++){for(var Ve=Pe[Fe].pts||[],Ye={},tt=0;tt<Ve.length;tt++)Ye[Ve[tt].i]=tt;T.tagSelected(Ve,Ee,Ye)}}(C,x),C.length>0?(C[0].t={num:S[O],dPos:K,posLetter:_,valLetter:y,labels:{med:f(c,"median:"),min:f(c,"min:"),q1:f(c,"q1:"),q3:f(c,"q3:"),max:f(c,"max:"),mean:x.boxmean==="sd"||x.sizemode==="sd"?f(c,"mean  :").replace("",x.sdmultiple===1?"":x.sdmultiple+""):f(c,"mean:"),lf:f(c,"lower fence:"),uf:f(c,"upper fence:")}},S[O]++,C):[{t:{empty:!0}}]};var o={text:"tx",hovertext:"htx"};function t(c,x,p){for(var v in o)T.isArrayOrTypedArray(x[v])&&(Array.isArray(p)?T.isArrayOrTypedArray(x[v][p[0]])&&(c[o[v]]=x[v][p[0]][p[1]]):c[o[v]]=x[v][p])}function i(c,x){return c.v-x.v}function n(c){return c.v}function r(c,x,p){return p===0?c.q1:Math.min(c.q1,x[Math.min(T.findBin(2.5*c.q1-1.5*c.q3,x,!0)+1,p-1)])}function a(c,x,p){return p===0?c.q3:Math.max(c.q3,x[Math.max(T.findBin(2.5*c.q3-1.5*c.q1,x),0)])}function l(c){return 4*c.q1-3*c.q3}function u(c){return 4*c.q3-3*c.q1}function h(c,x){return x===0?0:1.57*(c.q3-c.q1)/Math.sqrt(x)}},96404:function(ee,R,e){var M=e(54460),k=e(3400),s=e(71888).getAxisGroup,T=["v","h"];function b(f,o,t,i){var n,r,a,l=o.calcdata,u=o._fullLayout,h=i._id,c=h.charAt(0),x=[],p=0;for(n=0;n<t.length;n++)for(a=l[t[n]],r=0;r<a.length;r++)x.push(i.c2l(a[r].pos,!0)),p+=(a[r].pts2||[]).length;if(x.length){var v=k.distinctVals(x);i.type!=="category"&&i.type!=="multicategory"||(v.minDiff=1);var g=v.minDiff/2;M.minDtick(i,v.minDiff,v.vals[0],!0);var y=u[f==="violin"?"_numViolins":"_numBoxes"],m=u[f+"mode"]==="group"&&y>1,_=1-u[f+"gap"],d=1-u[f+"groupgap"];for(n=0;n<t.length;n++){var S,w,E,C,O,P,z=(a=l[t[n]])[0].trace,j=a[0].t,I=z.width,N=z.side;if(I)S=w=C=I/2,E=0;else if(S=g,m){var W=s(u,i._id)+z.orientation,F=(u._alignmentOpts[W]||{})[z.alignmentgroup]||{},U=Object.keys(F.offsetGroups||{}).length,H=U||y;w=S*_*d/H,E=2*S*(((U?z._offsetIndex:j.num)+.5)/H-.5)*_,C=S*_/H}else w=S*_*d,E=0,C=S;j.dPos=S,j.bPos=E,j.bdPos=w,j.wHover=C;var ne,$,K,Q,Z,X,te=E+w,ae=!!I;if(N==="positive"?(O=S*(I?1:.5),ne=te,P=ne=E):N==="negative"?(O=ne=E,P=S*(I?1:.5),$=te):(O=P=S,ne=$=te),(z.boxpoints||z.points)&&p>0){var se=z.pointpos,ce=z.jitter,fe=z.marker.size/2,pe=0;se+ce>=0&&((pe=te*(se+ce))>O?(ae=!0,Z=fe,K=pe):pe>ne&&(Z=fe,K=O)),pe<=O&&(K=O);var ge=0;se-ce<=0&&((ge=-te*(se-ce))>P?(ae=!0,X=fe,Q=ge):ge>$&&(X=fe,Q=P)),ge<=P&&(Q=P)}else K=O,Q=P;var me=new Array(a.length);for(r=0;r<a.length;r++)me[r]=a[r].pos;z._extremes[h]=M.findExtremes(i,me,{padded:ae,vpadminus:Q,vpadplus:K,vpadLinearized:!0,ppadminus:{x:X,y:Z}[c],ppadplus:{x:Z,y:X}[c]})}}}ee.exports={crossTraceCalc:function(f,o){for(var t=f.calcdata,i=o.xaxis,n=o.yaxis,r=0;r<T.length;r++){for(var a=T[r],l=a==="h"?n:i,u=[],h=0;h<t.length;h++){var c=t[h],x=c[0].t,p=c[0].trace;p.visible!==!0||p.type!=="box"&&p.type!=="candlestick"||x.empty||(p.orientation||"v")!==a||p.xaxis!==i._id||p.yaxis!==n._id||u.push(h)}b("box",f,u,l)}},setPositionOffset:b}},90624:function(ee,R,e){var M=e(3400),k=e(24040),s=e(76308),T=e(31147),b=e(20011),f=e(52976),o=e(63188);function t(n,r,a,l){function u(N){var W=0;return N&&N.length&&(W+=1,M.isArrayOrTypedArray(N[0])&&N[0].length&&(W+=1)),W}function h(N){return M.validate(n[N],o[N])}var c,x=a("y"),p=a("x");if(r.type==="box"){var v=a("q1"),g=a("median"),y=a("q3");r._hasPreCompStats=v&&v.length&&g&&g.length&&y&&y.length,c=Math.min(M.minRowLength(v),M.minRowLength(g),M.minRowLength(y))}var m,_,d=u(x),S=u(p),w=d&&M.minRowLength(x),E=S&&M.minRowLength(p),C=l.calendar,O={autotypenumbers:l.autotypenumbers};if(r._hasPreCompStats)switch(String(S)+String(d)){case"00":var P=h("x0")||h("dx");m=!h("y0")&&!h("dy")||P?"v":"h",_=c;break;case"10":m="v",_=Math.min(c,E);break;case"20":m="h",_=Math.min(c,p.length);break;case"01":m="h",_=Math.min(c,w);break;case"02":m="v",_=Math.min(c,x.length);break;case"12":m="v",_=Math.min(c,E,x.length);break;case"21":m="h",_=Math.min(c,p.length,w);break;case"11":_=0;break;case"22":var z,j=!1;for(z=0;z<p.length;z++)if(f(p[z],C,O)==="category"){j=!0;break}if(j)m="v",_=Math.min(c,E,x.length);else{for(z=0;z<x.length;z++)if(f(x[z],C,O)==="category"){j=!0;break}j?(m="h",_=Math.min(c,p.length,w)):(m="v",_=Math.min(c,E,x.length))}}else d>0?(m="v",_=S>0?Math.min(E,w):Math.min(w)):S>0?(m="h",_=Math.min(E)):_=0;if(_){r._length=_;var I=a("orientation",m);r._hasPreCompStats?I==="v"&&S===0?(a("x0",0),a("dx",1)):I==="h"&&d===0&&(a("y0",0),a("dy",1)):I==="v"&&S===0?a("x0"):I==="h"&&d===0&&a("y0"),k.getComponentMethod("calendars","handleTraceDefaults")(n,r,["x","y"],l)}else r.visible=!1}function i(n,r,a,l){var u=l.prefix,h=M.coerce2(n,r,o,"marker.outliercolor"),c=a("marker.line.outliercolor"),x="outliers";r._hasPreCompStats?x="all":(h||c)&&(x="suspectedoutliers");var p=a(u+"points",x);p?(a("jitter",p==="all"?.3:0),a("pointpos",p==="all"?-1.5:0),a("marker.symbol"),a("marker.opacity"),a("marker.size"),a("marker.angle"),a("marker.color",r.line.color),a("marker.line.color"),a("marker.line.width"),p==="suspectedoutliers"&&(a("marker.line.outliercolor",r.marker.color),a("marker.line.outlierwidth")),a("selected.marker.color"),a("unselected.marker.color"),a("selected.marker.size"),a("unselected.marker.size"),a("text"),a("hovertext")):delete r.marker;var v=a("hoveron");v!=="all"&&v.indexOf("points")===-1||a("hovertemplate"),M.coerceSelectionMarkerOpacity(r,a)}ee.exports={supplyDefaults:function(n,r,a,l){function u(_,d){return M.coerce(n,r,o,_,d)}if(t(n,r,u,l),r.visible!==!1){T(n,r,l,u),u("xhoverformat"),u("yhoverformat");var h=r._hasPreCompStats;h&&(u("lowerfence"),u("upperfence")),u("line.color",(n.marker||{}).color||a),u("line.width"),u("fillcolor",s.addOpacity(r.line.color,.5));var c=!1;if(h){var x=u("mean"),p=u("sd");x&&x.length&&(c=!0,p&&p.length&&(c="sd"))}u("whiskerwidth");var v,g=u("sizemode");g==="quartiles"&&(v=u("boxmean",c)),u("showwhiskers",g==="quartiles"),g!=="sd"&&v!=="sd"||u("sdmultiple"),u("width"),u("quartilemethod");var y=!1;if(h){var m=u("notchspan");m&&m.length&&(y=!0)}else M.validate(n.notchwidth,o.notchwidth)&&(y=!0);u("notched",y)&&u("notchwidth"),i(n,r,u,{prefix:"box"}),u("zorder")}},crossTraceDefaults:function(n,r){var a,l;function u(x){return M.coerce(l._input,l,o,x)}for(var h=0;h<n.length;h++){var c=(l=n[h]).type;c!=="box"&&c!=="violin"||(a=l._input,r[c+"mode"]==="group"&&b(a,l,r,u))}},handleSampleDefaults:t,handlePointsDefaults:i}},10392:function(ee){ee.exports=function(R,e){return e.hoverOnBox&&(R.hoverOnBox=e.hoverOnBox),"xVal"in e&&(R.x=e.xVal),"yVal"in e&&(R.y=e.yVal),e.xa&&(R.xaxis=e.xa),e.ya&&(R.yaxis=e.ya),R}},27576:function(ee,R,e){var M=e(54460),k=e(3400),s=e(93024),T=e(76308),b=k.fillText;function f(t,i,n,r){var a,l,u,h,c,x,p,v,g,y,m,_,d,S,w=t.cd,E=t.xa,C=t.ya,O=w[0].trace,P=w[0].t,z=O.type==="violin",j=P.bdPos,I=P.wHover,N=function(ze){return u.c2l(ze.pos)+P.bPos-u.c2l(x)};z&&O.side!=="both"?(O.side==="positive"&&(g=function(ze){var ve=N(ze);return s.inbox(ve,ve+I,y)},_=j,d=0),O.side==="negative"&&(g=function(ze){var ve=N(ze);return s.inbox(ve-I,ve,y)},_=0,d=j)):(g=function(ze){var ve=N(ze);return s.inbox(ve-I,ve+I,y)},_=d=j),S=z?function(ze){return s.inbox(ze.span[0]-c,ze.span[1]-c,y)}:function(ze){return s.inbox(ze.min-c,ze.max-c,y)},O.orientation==="h"?(c=i,x=n,p=S,v=g,a="y",u=C,l="x",h=E):(c=n,x=i,p=g,v=S,a="x",u=E,l="y",h=C);var W=Math.min(1,j/Math.abs(u.r2c(u.range[1])-u.r2c(u.range[0])));function F(ze){return(p(ze)+v(ze))/2}y=t.maxHoverDistance-W,m=t.maxSpikeDistance-W;var U=s.getDistanceFunction(r,p,v,F);if(s.getClosest(w,U,t),t.index===!1)return[];var H=w[t.index],ne=O.line.color,$=(O.marker||{}).color;T.opacity(ne)&&O.line.width?t.color=ne:T.opacity($)&&O.boxpoints?t.color=$:t.color=O.fillcolor,t[a+"0"]=u.c2p(H.pos+P.bPos-d,!0),t[a+"1"]=u.c2p(H.pos+P.bPos+_,!0),t[a+"LabelVal"]=H.orig_p!==void 0?H.orig_p:H.pos;var K=a+"Spike";t.spikeDistance=F(H)*m/y,t[K]=u.c2p(H.pos,!0);var Q=O.boxmean||O.sizemode==="sd"||(O.meanline||{}).visible,Z=O.boxpoints||O.points,X=Z&&Q?["max","uf","q3","med","mean","q1","lf","min"]:Z&&!Q?["max","uf","q3","med","q1","lf","min"]:!Z&&Q?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],te=h.range[1]<h.range[0];O.orientation===(te?"v":"h")&&X.reverse();for(var ae=t.spikeDistance,se=t[K],ce=[],fe=0;fe<X.length;fe++){var pe=X[fe];if(pe in H){var ge=H[pe],me=h.c2p(ge,!0),be=k.extendFlat({},t);be.attr=pe,be[l+"0"]=be[l+"1"]=me,be[l+"LabelVal"]=ge,be[l+"Label"]=(P.labels?P.labels[pe]+" ":"")+M.hoverLabelText(h,ge,O[l+"hoverformat"]),be.hoverOnBox=!0,pe!=="mean"||!("sd"in H)||O.boxmean!=="sd"&&O.sizemode!=="sd"||(be[l+"err"]=H.sd),be.hovertemplate=!1,ce.push(be)}}t.name="",t.spikeDistance=void 0,t[K]=void 0;for(var ke=0;ke<ce.length;ke++)ce[ke].attr!=="med"?(ce[ke].name="",ce[ke].spikeDistance=void 0,ce[ke][K]=void 0):(ce[ke].spikeDistance=ae,ce[ke][K]=se);return ce}function o(t,i,n){for(var r,a,l,u=t.cd,h=t.xa,c=t.ya,x=u[0].trace,p=h.c2p(i),v=c.c2p(n),g=s.quadrature(function(z){var j=Math.max(3,z.mrc||0);return Math.max(Math.abs(h.c2p(z.x)-p)-j,1-3/j)},function(z){var j=Math.max(3,z.mrc||0);return Math.max(Math.abs(c.c2p(z.y)-v)-j,1-3/j)}),y=!1,m=0;m<u.length;m++){a=u[m];for(var _=0;_<(a.pts||[]).length;_++){var d=g(l=a.pts[_]);d<=t.distance&&(t.distance=d,y=[m,_])}}if(!y)return!1;l=(a=u[y[0]]).pts[y[1]];var S=h.c2p(l.x,!0),w=c.c2p(l.y,!0),E=l.mrc||1;r=k.extendFlat({},t,{index:l.i,color:(x.marker||{}).color,name:x.name,x0:S-E,x1:S+E,y0:w-E,y1:w+E,spikeDistance:t.distance,hovertemplate:x.hovertemplate});var C,O=a.orig_p,P=O!==void 0?O:a.pos;return x.orientation==="h"?(C=c,r.xLabelVal=l.x,r.yLabelVal=P):(C=h,r.xLabelVal=P,r.yLabelVal=l.y),r[C._id.charAt(0)+"Spike"]=C.c2p(a.pos,!0),b(l,x,r),r}ee.exports={hoverPoints:function(t,i,n,r){var a,l=t.cd[0].trace.hoveron,u=[];return l.indexOf("boxes")!==-1&&(u=u.concat(f(t,i,n,r))),l.indexOf("points")!==-1&&(a=o(t,i,n)),r==="closest"?a?[a]:u:(a&&u.push(a),u)},hoverOnBoxes:f,hoverOnPoints:o}},67244:function(ee,R,e){ee.exports={attributes:e(63188),layoutAttributes:e(16560),supplyDefaults:e(90624).supplyDefaults,crossTraceDefaults:e(90624).crossTraceDefaults,supplyLayoutDefaults:e(68832).supplyLayoutDefaults,calc:e(62555),crossTraceCalc:e(96404).crossTraceCalc,plot:e(18728).plot,style:e(25776).style,styleOnSelect:e(25776).styleOnSelect,hoverPoints:e(27576).hoverPoints,eventData:e(10392),selectPoints:e(8264),moduleType:"trace",name:"box",basePlotModule:e(57952),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},16560:function(ee){ee.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},68832:function(ee,R,e){var M=e(24040),k=e(3400),s=e(16560);function T(b,f,o,t,i){for(var n=i+"Layout",r=!1,a=0;a<o.length;a++){var l=o[a];if(M.traceIs(l,n)){r=!0;break}}r&&(t(i+"mode"),t(i+"gap"),t(i+"groupgap"))}ee.exports={supplyLayoutDefaults:function(b,f,o){T(0,0,o,function(t,i){return k.coerce(b,f,s,t,i)},"box")},_supply:T}},18728:function(ee,R,e){var M=e(33428),k=e(3400),s=e(43616);function T(o,t,i,n,r){var a,l,u=i.orientation==="h",h=t.val,c=t.pos,x=!!c.rangebreaks,p=n.bPos,v=n.wdPos||0,g=n.bPosPxOffset||0,y=i.whiskerwidth||0,m=i.showwhiskers!==!1,_=i.notched||!1,d=_?1-2*i.notchwidth:1;Array.isArray(n.bdPos)?(a=n.bdPos[0],l=n.bdPos[1]):(a=n.bdPos,l=n.bdPos);var S=o.selectAll("path.box").data(i.type!=="violin"||i.box.visible?k.identity:[]);S.enter().append("path").style("vector-effect",r?"none":"non-scaling-stroke").attr("class","box"),S.exit().remove(),S.each(function(w){if(w.empty)return M.select(this).attr("d","M0,0Z");var E=c.c2l(w.pos+p,!0),C=c.l2p(E-a)+g,O=c.l2p(E+l)+g,P=x?(C+O)/2:c.l2p(E)+g,z=i.whiskerwidth,j=x?C*z+(1-z)*P:c.l2p(E-v)+g,I=x?O*z+(1-z)*P:c.l2p(E+v)+g,N=c.l2p(E-a*d)+g,W=c.l2p(E+l*d)+g,F=i.sizemode==="sd",U=h.c2p(F?w.mean-w.sd:w.q1,!0),H=F?h.c2p(w.mean+w.sd,!0):h.c2p(w.q3,!0),ne=k.constrain(F?h.c2p(w.mean,!0):h.c2p(w.med,!0),Math.min(U,H)+1,Math.max(U,H)-1),$=w.lf===void 0||i.boxpoints===!1||F,K=h.c2p($?w.min:w.lf,!0),Q=h.c2p($?w.max:w.uf,!0),Z=h.c2p(w.ln,!0),X=h.c2p(w.un,!0);u?M.select(this).attr("d","M"+ne+","+N+"V"+W+"M"+U+","+C+"V"+O+(_?"H"+Z+"L"+ne+","+W+"L"+X+","+O:"")+"H"+H+"V"+C+(_?"H"+X+"L"+ne+","+N+"L"+Z+","+C:"")+"Z"+(m?"M"+U+","+P+"H"+K+"M"+H+","+P+"H"+Q+(y===0?"":"M"+K+","+j+"V"+I+"M"+Q+","+j+"V"+I):"")):M.select(this).attr("d","M"+N+","+ne+"H"+W+"M"+C+","+U+"H"+O+(_?"V"+Z+"L"+W+","+ne+"L"+O+","+X:"")+"V"+H+"H"+C+(_?"V"+X+"L"+N+","+ne+"L"+C+","+Z:"")+"Z"+(m?"M"+P+","+U+"V"+K+"M"+P+","+H+"V"+Q+(y===0?"":"M"+j+","+K+"H"+I+"M"+j+","+Q+"H"+I):""))})}function b(o,t,i,n){var r=t.x,a=t.y,l=n.bdPos,u=n.bPos,h=i.boxpoints||i.points;k.seedPseudoRandom();var c=o.selectAll("g.points").data(h?function(p){return p.forEach(function(v){v.t=n,v.trace=i}),p}:[]);c.enter().append("g").attr("class","points"),c.exit().remove();var x=c.selectAll("path").data(function(p){var v,g,y=p.pts2,m=Math.max((p.max-p.min)/10,p.q3-p.q1),_=1e-9*m,d=.01*m,S=[],w=0;if(i.jitter){if(m===0)for(w=1,S=new Array(y.length),v=0;v<y.length;v++)S[v]=1;else for(v=0;v<y.length;v++){var E=Math.max(0,v-5),C=y[E].v,O=Math.min(y.length-1,v+5),P=y[O].v;h!=="all"&&(y[v].v<p.lf?P=Math.min(P,p.lf):C=Math.max(C,p.uf));var z=Math.sqrt(d*(O-E)/(P-C+_))||0;z=k.constrain(Math.abs(z),0,1),S.push(z),w=Math.max(z,w)}g=2*i.jitter/(w||1)}for(v=0;v<y.length;v++){var j=y[v],I=j.v,N=i.jitter?g*S[v]*(k.pseudoRandom()-.5):0,W=p.pos+u+l*(i.pointpos+N);i.orientation==="h"?(j.y=W,j.x=I):(j.x=W,j.y=I),h==="suspectedoutliers"&&I<p.uo&&I>p.lo&&(j.so=!0)}return y});x.enter().append("path").classed("point",!0),x.exit().remove(),x.call(s.translatePoints,r,a)}function f(o,t,i,n){var r,a,l=t.val,u=t.pos,h=!!u.rangebreaks,c=n.bPos,x=n.bPosPxOffset||0,p=i.boxmean||(i.meanline||{}).visible;Array.isArray(n.bdPos)?(r=n.bdPos[0],a=n.bdPos[1]):(r=n.bdPos,a=n.bdPos);var v=o.selectAll("path.mean").data(i.type==="box"&&i.boxmean||i.type==="violin"&&i.box.visible&&i.meanline.visible?k.identity:[]);v.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),v.exit().remove(),v.each(function(g){var y=u.c2l(g.pos+c,!0),m=u.l2p(y-r)+x,_=u.l2p(y+a)+x,d=h?(m+_)/2:u.l2p(y)+x,S=l.c2p(g.mean,!0),w=l.c2p(g.mean-g.sd,!0),E=l.c2p(g.mean+g.sd,!0);i.orientation==="h"?M.select(this).attr("d","M"+S+","+m+"V"+_+(p==="sd"?"m0,0L"+w+","+d+"L"+S+","+m+"L"+E+","+d+"Z":"")):M.select(this).attr("d","M"+m+","+S+"H"+_+(p==="sd"?"m0,0L"+d+","+w+"L"+m+","+S+"L"+d+","+E+"Z":""))})}ee.exports={plot:function(o,t,i,n){var r=o._context.staticPlot,a=t.xaxis,l=t.yaxis;k.makeTraceGroups(n,i,"trace boxes").each(function(u){var h,c,x=M.select(this),p=u[0],v=p.t,g=p.trace;v.wdPos=v.bdPos*g.whiskerwidth,g.visible!==!0||v.empty?x.remove():(g.orientation==="h"?(h=l,c=a):(h=a,c=l),T(x,{pos:h,val:c},g,v,r),b(x,{x:a,y:l},g,v),f(x,{pos:h,val:c},g,v))})},plotBoxAndWhiskers:T,plotPoints:b,plotBoxMean:f}},8264:function(ee){ee.exports=function(R,e){var M,k,s=R.cd,T=R.xaxis,b=R.yaxis,f=[];if(e===!1)for(M=0;M<s.length;M++)for(k=0;k<(s[M].pts||[]).length;k++)s[M].pts[k].selected=0;else for(M=0;M<s.length;M++)for(k=0;k<(s[M].pts||[]).length;k++){var o=s[M].pts[k],t=T.c2p(o.x),i=b.c2p(o.y);e.contains([t,i],null,o.i,R)?(f.push({pointNumber:o.i,x:T.c2d(o.x),y:b.c2d(o.y)}),o.selected=1):o.selected=0}return f}},25776:function(ee,R,e){var M=e(33428),k=e(76308),s=e(43616);ee.exports={style:function(T,b,f){var o=f||M.select(T).selectAll("g.trace.boxes");o.style("opacity",function(t){return t[0].trace.opacity}),o.each(function(t){var i=M.select(this),n=t[0].trace,r=n.line.width;function a(h,c,x,p){h.style("stroke-width",c+"px").call(k.stroke,x).call(k.fill,p)}var l=i.selectAll("path.box");if(n.type==="candlestick")l.each(function(h){if(!h.empty){var c=M.select(this),x=n[h.dir];a(c,x.line.width,x.line.color,x.fillcolor),c.style("opacity",n.selectedpoints&&!h.selected?.3:1)}});else{a(l,r,n.line.color,n.fillcolor),i.selectAll("path.mean").style({"stroke-width":r,"stroke-dasharray":2*r+"px,"+r+"px"}).call(k.stroke,n.line.color);var u=i.selectAll("path.point");s.pointStyle(u,n,T)}})},styleOnSelect:function(T,b,f){var o=b[0].trace,t=f.selectAll("path.point");o.selectedpoints?s.selectedPointStyle(t,o):s.pointStyle(t,o,T)}}},64216:function(ee,R,e){var M=e(3400).extendFlat,k=e(29736).axisHoverFormat,s=e(20279),T=e(63188);function b(f){return{line:{color:M({},T.line.color,{dflt:f}),width:T.line.width,editType:"style"},fillcolor:T.fillcolor,editType:"style"}}ee.exports={xperiod:s.xperiod,xperiod0:s.xperiod0,xperiodalignment:s.xperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),x:s.x,open:s.open,high:s.high,low:s.low,close:s.close,line:{width:M({},T.line.width,{}),editType:"style"},increasing:b(s.increasing.line.color.dflt),decreasing:b(s.decreasing.line.color.dflt),text:s.text,hovertext:s.hovertext,whiskerwidth:M({},T.whiskerwidth,{dflt:0}),hoverlabel:s.hoverlabel,zorder:T.zorder}},46283:function(ee,R,e){var M=e(3400),k=e(54460),s=e(1220),T=e(42812).calcCommon;function b(f,o,t,i){return{min:t,q1:Math.min(f,i),med:i,q3:Math.max(f,i),max:o}}ee.exports=function(f,o){var t=f._fullLayout,i=k.getFromId(f,o.xaxis),n=k.getFromId(f,o.yaxis),r=i.makeCalcdata(o,"x"),a=s(o,i,"x",r).vals,l=T(f,o,r,a,n,b);return l.length?(M.extendFlat(l[0].t,{num:t._numBoxes,dPos:M.distinctVals(a).minDiff/2,posLetter:"x",valLetter:"y"}),t._numBoxes++,l):[{t:{empty:!0}}]}},64588:function(ee,R,e){var M=e(3400),k=e(76308),s=e(52744),T=e(31147),b=e(64216);function f(o,t,i,n){var r=i(n+".line.color");i(n+".line.width",t.line.width),i(n+".fillcolor",k.addOpacity(r,.5))}ee.exports=function(o,t,i,n){function r(a,l){return M.coerce(o,t,b,a,l)}s(o,t,r,n)?(T(o,t,n,r,{x:!0}),r("xhoverformat"),r("yhoverformat"),r("line.width"),f(0,t,r,"increasing"),f(0,t,r,"decreasing"),r("text"),r("hovertext"),r("whiskerwidth"),n._requestRangeslider[t.xaxis]=!0,r("zorder")):t.visible=!1}},61712:function(ee,R,e){ee.exports={moduleType:"trace",name:"candlestick",basePlotModule:e(57952),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:e(64216),layoutAttributes:e(16560),supplyLayoutDefaults:e(68832).supplyLayoutDefaults,crossTraceCalc:e(96404).crossTraceCalc,supplyDefaults:e(64588),calc:e(46283),plot:e(18728).plot,layerName:"boxlayer",style:e(25776).style,hoverPoints:e(18720).hoverPoints,selectPoints:e(97384)}},93504:function(ee,R,e){var M=e(63856),k=e(31780);ee.exports=function(s,T,b,f,o){f("a")||(f("da"),f("a0")),f("b")||(f("db"),f("b0")),function(t,i,n,r){["aaxis","baxis"].forEach(function(a){var l=a.charAt(0),u=t[a]||{},h=k.newContainer(i,a),c={noAutotickangles:!0,noTicklabelshift:!0,noTicklabelstandoff:!0,noTicklabelstep:!0,tickfont:"x",id:l+"axis",letter:l,font:i.font,name:a,data:t[l],calendar:i.calendar,dfltColor:r,bgColor:n.paper_bgcolor,autotypenumbersDflt:n.autotypenumbers,fullLayout:n};M(u,h,c),h._categories=h._categories||[],t[a]||u.type==="-"||(t[a]={type:u.type})})}(s,T,b,o)}},51676:function(ee,R,e){var M=e(3400).isArrayOrTypedArray;function k(s,T){if(!M(s)||T>=10)return null;for(var b=1/0,f=-1/0,o=s.length,t=0;t<o;t++){var i=s[t];if(M(i)){var n=k(i,T+1);n&&(b=Math.min(n[0],b),f=Math.max(n[1],f))}else b=Math.min(i,b),f=Math.max(i,f)}return[b,f]}ee.exports=function(s){return k(s,0)}},85720:function(ee,R,e){var M=e(25376),k=e(98692),s=e(22548),T=M({editType:"calc"}),b=e(52904).zorder;T.family.dflt='"Open Sans", verdana, arial, sans-serif',T.size.dflt=12,T.color.dflt=s.defaultLine,ee.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:k,baxis:k,font:T,color:{valType:"color",dflt:s.defaultLine,editType:"plot"},transforms:void 0,zorder:b}},77712:function(ee,R,e){var M=e(3400).isArrayOrTypedArray;ee.exports=function(k,s,T,b){var f,o,t,i,n,r,a,l,u,h,c,x,p,v=M(T)?"a":"b",g=(v==="a"?k.aaxis:k.baxis).smoothing,y=v==="a"?k.a2i:k.b2j,m=v==="a"?T:b,_=v==="a"?b:T,d=v==="a"?s.a.length:s.b.length,S=v==="a"?s.b.length:s.a.length,w=Math.floor(v==="a"?k.b2j(_):k.a2i(_)),E=v==="a"?function(ne){return k.evalxy([],ne,w)}:function(ne){return k.evalxy([],w,ne)};g&&(t=Math.max(0,Math.min(S-2,w)),i=w-t,o=v==="a"?function(ne,$){return k.dxydi([],ne,t,$,i)}:function(ne,$){return k.dxydj([],t,ne,i,$)});var C=y(m[0]),O=y(m[1]),P=C<O?1:-1,z=1e-8*(O-C),j=P>0?Math.floor:Math.ceil,I=P>0?Math.ceil:Math.floor,N=P>0?Math.min:Math.max,W=P>0?Math.max:Math.min,F=j(C+z),U=I(O-z),H=[[a=E(C)]];for(f=F;f*P<U*P;f+=P)n=[],c=W(C,f),p=(x=N(O,f+P))-c,r=Math.max(0,Math.min(d-2,Math.floor(.5*(c+x)))),l=E(x),g&&(u=o(r,c-r),h=o(r,x-r),n.push([a[0]+u[0]/3*p,a[1]+u[1]/3*p]),n.push([l[0]-h[0]/3*p,l[1]-h[1]/3*p])),n.push(l),H.push(n),a=l;return H}},98692:function(ee,R,e){var M=e(25376),k=e(22548),s=e(94724),T=e(29736).descriptionWithDates,b=e(67824).overrideAll,f=e(98192).u,o=e(92880).extendFlat;ee.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:M({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:s.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:o({},s.labelalias,{editType:"calc"}),tickfont:M({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:T("tick label")},tickformatstops:b(s.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:k.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:o({},f,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:o({},f,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:k.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:M({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},63856:function(ee,R,e){var M=e(85720),k=e(76308).addOpacity,s=e(24040),T=e(3400),b=e(26332),f=e(95936),o=e(42568),t=e(22416),i=e(78344),n=e(52976);ee.exports=function(r,a,l){var u=l.letter,h=l.font||{},c=M[u+"axis"];function x(P,z){return T.coerce(r,a,c,P,z)}function p(P,z){return T.coerce2(r,a,c,P,z)}l.name&&(a._name=l.name,a._id=l.name),x("autotypenumbers",l.autotypenumbersDflt);var v=x("type");v==="-"&&(l.data&&function(P,z){if(P.type==="-"){var j=P._id.charAt(0),I=P[j+"calendar"];P.type=n(z,I,{autotypenumbers:P.autotypenumbers})}}(a,l.data),a.type==="-"?a.type="linear":v=r.type=a.type),x("smoothing"),x("cheatertype"),x("showticklabels"),x("labelprefix",u+" = "),x("labelsuffix"),x("showtickprefix"),x("showticksuffix"),x("separatethousands"),x("tickformat"),x("exponentformat"),x("minexponent"),x("showexponent"),x("categoryorder"),x("tickmode"),x("tickvals"),x("ticktext"),x("tick0"),x("dtick"),a.tickmode==="array"&&(x("arraytick0"),x("arraydtick")),x("labelpadding"),a._hovertitle=u,v==="date"&&s.getComponentMethod("calendars","handleDefaults")(r,a,"calendar",l.calendar),i(a,l.fullLayout),a.c2p=T.identity;var g=x("color",l.dfltColor),y=g===r.color?g:h.color;x("title.text")&&(T.coerceFont(x,"title.font",h,{overrideDflt:{size:T.bigFont(h.size),color:y}}),x("title.offset")),x("tickangle"),x("autorange",!a.isValidRange(r.range))&&x("rangemode"),x("range"),a.cleanRange(),x("fixedrange"),b(r,a,x,v),o(r,a,x,v,l),f(r,a,x,v,l),t(r,a,x,{data:l.data,dataAttr:u});var m=p("gridcolor",k(g,.3)),_=p("gridwidth"),d=p("griddash"),S=x("showgrid");S||(delete a.gridcolor,delete a.gridwidth,delete a.griddash);var w=p("startlinecolor",g),E=p("startlinewidth",_);x("startline",a.showgrid||!!w||!!E)||(delete a.startlinecolor,delete a.startlinewidth);var C=p("endlinecolor",g),O=p("endlinewidth",_);return x("endline",a.showgrid||!!C||!!O)||(delete a.endlinecolor,delete a.endlinewidth),S?(x("minorgridcount"),x("minorgridwidth",_),x("minorgriddash",d),x("minorgridcolor",k(m,.06)),a.minorgridcount||(delete a.minorgridwidth,delete a.minorgriddash,delete a.minorgridcolor)):(delete a.gridcolor,delete a.gridwidth,delete a.griddash),a.showticklabels==="none"&&(delete a.tickfont,delete a.tickangle,delete a.showexponent,delete a.exponentformat,delete a.minexponent,delete a.tickformat,delete a.showticksuffix,delete a.showtickprefix),a.showticksuffix||delete a.ticksuffix,a.showtickprefix||delete a.tickprefix,x("tickmode"),a}},58744:function(ee,R,e){var M=e(54460),k=e(3400).isArray1D,s=e(60776),T=e(51676),b=e(19216),f=e(14724),o=e(24944),t=e(26136),i=e(51512),n=e(2872),r=e(81e3);ee.exports=function(a,l){var u=M.getFromId(a,l.xaxis),h=M.getFromId(a,l.yaxis),c=l.aaxis,x=l.baxis,p=l.x,v=l.y,g=[];p&&k(p)&&g.push("x"),v&&k(v)&&g.push("y"),g.length&&n(l,c,x,"a","b",g);var y=l._a=l._a||l.a,m=l._b=l._b||l.b;p=l._x||l.x,v=l._y||l.y;var _={};if(l._cheater){var d=c.cheatertype==="index"?y.length:y,S=x.cheatertype==="index"?m.length:m;p=s(d,S,l.cheaterslope)}l._x=p=t(p),l._y=v=t(v),i(p,y,m),i(v,y,m),r(l),l.setScale();var w=T(p),E=T(v),C=.5*(w[1]-w[0]),O=.5*(w[1]+w[0]),P=.5*(E[1]-E[0]),z=.5*(E[1]+E[0]),j=1.3;return w=[O-C*j,O+C*j],E=[z-P*j,z+P*j],l._extremes[u._id]=M.findExtremes(u,w,{padded:!0}),l._extremes[h._id]=M.findExtremes(h,E,{padded:!0}),b(l,"a","b"),b(l,"b","a"),f(l,c),f(l,x),_.clipsegments=o(l._xctrl,l._yctrl,c,x),_.x=p,_.y=v,_.a=y,_.b=m,[_]}},24944:function(ee){ee.exports=function(R,e,M,k){var s,T,b,f=[],o=!!M.smoothing,t=!!k.smoothing,i=R[0].length-1,n=R.length-1;for(s=0,T=[],b=[];s<=i;s++)T[s]=R[0][s],b[s]=e[0][s];for(f.push({x:T,y:b,bicubic:o}),s=0,T=[],b=[];s<=n;s++)T[s]=R[s][i],b[s]=e[s][i];for(f.push({x:T,y:b,bicubic:t}),s=i,T=[],b=[];s>=0;s--)T[i-s]=R[n][s],b[i-s]=e[n][s];for(f.push({x:T,y:b,bicubic:o}),s=n,T=[],b=[];s>=0;s--)T[n-s]=R[s][0],b[n-s]=e[s][0];return f.push({x:T,y:b,bicubic:t}),f}},19216:function(ee,R,e){var M=e(54460),k=e(92880).extendFlat;ee.exports=function(s,T,b){var f,o,t,i,n,r,a,l,u,h,c,x,p,v,g=s["_"+T],y=s[T+"axis"],m=y._gridlines=[],_=y._minorgridlines=[],d=y._boundarylines=[],S=s["_"+b],w=s[b+"axis"];y.tickmode==="array"&&(y.tickvals=g.slice());var E=s._xctrl,C=s._yctrl,O=E[0].length,P=E.length,z=s._a.length,j=s._b.length;M.prepTicks(y),y.tickmode==="array"&&delete y.tickvals;var I=y.smoothing?3:1;function N(F){var U,H,ne,$,K,Q,Z,X,te,ae,se,ce,fe=[],pe=[],ge={};if(T==="b")for(H=s.b2j(F),ne=Math.floor(Math.max(0,Math.min(j-2,H))),$=H-ne,ge.length=j,ge.crossLength=z,ge.xy=function(me){return s.evalxy([],me,H)},ge.dxy=function(me,be){return s.dxydi([],me,ne,be,$)},U=0;U<z;U++)Q=Math.min(z-2,U),Z=U-Q,X=s.evalxy([],U,H),w.smoothing&&U>0&&(te=s.dxydi([],U-1,ne,0,$),fe.push(K[0]+te[0]/3),pe.push(K[1]+te[1]/3),ae=s.dxydi([],U-1,ne,1,$),fe.push(X[0]-ae[0]/3),pe.push(X[1]-ae[1]/3)),fe.push(X[0]),pe.push(X[1]),K=X;else for(U=s.a2i(F),Q=Math.floor(Math.max(0,Math.min(z-2,U))),Z=U-Q,ge.length=z,ge.crossLength=j,ge.xy=function(me){return s.evalxy([],U,me)},ge.dxy=function(me,be){return s.dxydj([],Q,me,Z,be)},H=0;H<j;H++)ne=Math.min(j-2,H),$=H-ne,X=s.evalxy([],U,H),w.smoothing&&H>0&&(se=s.dxydj([],Q,H-1,Z,0),fe.push(K[0]+se[0]/3),pe.push(K[1]+se[1]/3),ce=s.dxydj([],Q,H-1,Z,1),fe.push(X[0]-ce[0]/3),pe.push(X[1]-ce[1]/3)),fe.push(X[0]),pe.push(X[1]),K=X;return ge.axisLetter=T,ge.axis=y,ge.crossAxis=w,ge.value=F,ge.constvar=b,ge.index=l,ge.x=fe,ge.y=pe,ge.smoothing=w.smoothing,ge}function W(F){var U,H,ne,$,K,Q=[],Z=[],X={};if(X.length=g.length,X.crossLength=S.length,T==="b")for(ne=Math.max(0,Math.min(j-2,F)),K=Math.min(1,Math.max(0,F-ne)),X.xy=function(te){return s.evalxy([],te,F)},X.dxy=function(te,ae){return s.dxydi([],te,ne,ae,K)},U=0;U<O;U++)Q[U]=E[F*I][U],Z[U]=C[F*I][U];else for(H=Math.max(0,Math.min(z-2,F)),$=Math.min(1,Math.max(0,F-H)),X.xy=function(te){return s.evalxy([],F,te)},X.dxy=function(te,ae){return s.dxydj([],H,te,$,ae)},U=0;U<P;U++)Q[U]=E[U][F*I],Z[U]=C[U][F*I];return X.axisLetter=T,X.axis=y,X.crossAxis=w,X.value=g[F],X.constvar=b,X.index=F,X.x=Q,X.y=Z,X.smoothing=w.smoothing,X}if(y.tickmode==="array"){for(i=5e-15,r=(n=[Math.floor((g.length-1-y.arraytick0)/y.arraydtick*(1+i)),Math.ceil(-y.arraytick0/y.arraydtick/(1+i))].sort(function(F,U){return F-U}))[0]-1,a=n[1]+1,l=r;l<a;l++)(o=y.arraytick0+y.arraydtick*l)<0||o>g.length-1||m.push(k(W(o),{color:y.gridcolor,width:y.gridwidth,dash:y.griddash}));for(l=r;l<a;l++)if(t=y.arraytick0+y.arraydtick*l,c=Math.min(t+y.arraydtick,g.length-1),!(t<0||t>g.length-1||c<0||c>g.length-1))for(x=g[t],p=g[c],f=0;f<y.minorgridcount;f++)(v=c-t)<=0||(h=x+(p-x)*(f+1)/(y.minorgridcount+1)*(y.arraydtick/v))<g[0]||h>g[g.length-1]||_.push(k(N(h),{color:y.minorgridcolor,width:y.minorgridwidth,dash:y.minorgriddash}));y.startline&&d.push(k(W(0),{color:y.startlinecolor,width:y.startlinewidth})),y.endline&&d.push(k(W(g.length-1),{color:y.endlinecolor,width:y.endlinewidth}))}else{for(i=5e-15,r=(n=[Math.floor((g[g.length-1]-y.tick0)/y.dtick*(1+i)),Math.ceil((g[0]-y.tick0)/y.dtick/(1+i))].sort(function(F,U){return F-U}))[0],a=n[1],l=r;l<=a;l++)u=y.tick0+y.dtick*l,m.push(k(N(u),{color:y.gridcolor,width:y.gridwidth,dash:y.griddash}));for(l=r-1;l<a+1;l++)for(u=y.tick0+y.dtick*l,f=0;f<y.minorgridcount;f++)(h=u+y.dtick*(f+1)/(y.minorgridcount+1))<g[0]||h>g[g.length-1]||_.push(k(N(h),{color:y.minorgridcolor,width:y.minorgridwidth,dash:y.minorgriddash}));y.startline&&d.push(k(N(g[0]),{color:y.startlinecolor,width:y.startlinewidth})),y.endline&&d.push(k(N(g[g.length-1]),{color:y.endlinecolor,width:y.endlinewidth}))}}},14724:function(ee,R,e){var M=e(54460),k=e(92880).extendFlat;ee.exports=function(s,T){var b,f,o,t=T._labels=[],i=T._gridlines;for(b=0;b<i.length;b++)o=i[b],["start","both"].indexOf(T.showticklabels)!==-1&&(f=M.tickText(T,o.value),k(f,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:o.xy(0),dxy:o.dxy(0,0),axis:o.axis,length:o.crossAxis.length,font:o.axis.tickfont,isFirst:b===0,isLast:b===i.length-1}),t.push(f)),["end","both"].indexOf(T.showticklabels)!==-1&&(f=M.tickText(T,o.value),k(f,{endAnchor:!1,xy:o.xy(o.crossLength-1),dxy:o.dxy(o.crossLength-2,1),axis:o.axis,length:o.crossAxis.length,font:o.axis.tickfont,isFirst:b===0,isLast:b===i.length-1}),t.push(f))}},62284:function(ee){ee.exports=function(R,e,M,k){var s=R[0]-e[0],T=R[1]-e[1],b=M[0]-e[0],f=M[1]-e[1],o=Math.pow(s*s+T*T,.25),t=Math.pow(b*b+f*f,.25),i=(t*t*s-o*o*b)*k,n=(t*t*T-o*o*f)*k,r=t*(o+t)*3,a=o*(o+t)*3;return[[e[0]+(r&&i/r),e[1]+(r&&n/r)],[e[0]-(a&&i/a),e[1]-(a&&n/a)]]}},60776:function(ee,R,e){var M=e(3400).isArrayOrTypedArray;ee.exports=function(k,s,T){var b,f,o,t,i,n,r=[],a=M(k)?k.length:k,l=M(s)?s.length:s,u=M(k)?k:null,h=M(s)?s:null;u&&(o=(u.length-1)/(u[u.length-1]-u[0])/(a-1)),h&&(t=(h.length-1)/(h[h.length-1]-h[0])/(l-1));var c=1/0,x=-1/0;for(f=0;f<l;f++)for(r[f]=[],i=h?(h[f]-h[0])*t:f/(l-1),b=0;b<a;b++)n=(u?(u[b]-u[0])*o:b/(a-1))-i*T,c=Math.min(n,c),x=Math.max(n,x),r[f][b]=n;var p=1/(x-c),v=-c*p;for(f=0;f<l;f++)for(b=0;b<a;b++)r[f][b]=p*r[f][b]+v;return r}},30180:function(ee,R,e){var M=e(62284),k=e(3400).ensureArray;function s(T,b,f){var o=-.5*f[0]+1.5*b[0],t=-.5*f[1]+1.5*b[1];return[(2*o+T[0])/3,(2*t+T[1])/3]}ee.exports=function(T,b,f,o,t,i){var n,r,a,l,u,h,c,x,p,v,g=f[0].length,y=f.length,m=t?3*g-2:g,_=i?3*y-2:y;for(T=k(T,_),b=k(b,_),a=0;a<_;a++)T[a]=k(T[a],m),b[a]=k(b[a],m);for(r=0,l=0;r<y;r++,l+=i?3:1)for(u=T[l],h=b[l],c=f[r],x=o[r],n=0,a=0;n<g;n++,a+=t?3:1)u[a]=c[n],h[a]=x[n];if(t)for(r=0,l=0;r<y;r++,l+=i?3:1){for(n=1,a=3;n<g-1;n++,a+=3)p=M([f[r][n-1],o[r][n-1]],[f[r][n],o[r][n]],[f[r][n+1],o[r][n+1]],t),T[l][a-1]=p[0][0],b[l][a-1]=p[0][1],T[l][a+1]=p[1][0],b[l][a+1]=p[1][1];v=s([T[l][0],b[l][0]],[T[l][2],b[l][2]],[T[l][3],b[l][3]]),T[l][1]=v[0],b[l][1]=v[1],v=s([T[l][m-1],b[l][m-1]],[T[l][m-3],b[l][m-3]],[T[l][m-4],b[l][m-4]]),T[l][m-2]=v[0],b[l][m-2]=v[1]}if(i)for(a=0;a<m;a++){for(l=3;l<_-3;l+=3)p=M([T[l-3][a],b[l-3][a]],[T[l][a],b[l][a]],[T[l+3][a],b[l+3][a]],i),T[l-1][a]=p[0][0],b[l-1][a]=p[0][1],T[l+1][a]=p[1][0],b[l+1][a]=p[1][1];v=s([T[0][a],b[0][a]],[T[2][a],b[2][a]],[T[3][a],b[3][a]]),T[1][a]=v[0],b[1][a]=v[1],v=s([T[_-1][a],b[_-1][a]],[T[_-3][a],b[_-3][a]],[T[_-4][a],b[_-4][a]]),T[_-2][a]=v[0],b[_-2][a]=v[1]}if(t&&i)for(l=1;l<_;l+=(l+1)%3==0?2:1){for(a=3;a<m-3;a+=3)p=M([T[l][a-3],b[l][a-3]],[T[l][a],b[l][a]],[T[l][a+3],b[l][a+3]],t),T[l][a-1]=.5*(T[l][a-1]+p[0][0]),b[l][a-1]=.5*(b[l][a-1]+p[0][1]),T[l][a+1]=.5*(T[l][a+1]+p[1][0]),b[l][a+1]=.5*(b[l][a+1]+p[1][1]);v=s([T[l][0],b[l][0]],[T[l][2],b[l][2]],[T[l][3],b[l][3]]),T[l][1]=.5*(T[l][1]+v[0]),b[l][1]=.5*(b[l][1]+v[1]),v=s([T[l][m-1],b[l][m-1]],[T[l][m-3],b[l][m-3]],[T[l][m-4],b[l][m-4]]),T[l][m-2]=.5*(T[l][m-2]+v[0]),b[l][m-2]=.5*(b[l][m-2]+v[1])}return[T,b]}},24588:function(ee){ee.exports={RELATIVE_CULL_TOLERANCE:1e-6}},26435:function(ee){ee.exports=function(R,e,M){return e&&M?function(k,s,T,b,f){var o,t,i,n,r,a;k||(k=[]),s*=3,T*=3;var l=b*b,u=1-b,h=u*u,c=u*b*2,x=-3*h,p=3*(h-c),v=3*(c-l),g=3*l,y=f*f,m=y*f,_=1-f,d=_*_,S=d*_;for(a=0;a<R.length;a++)o=x*(r=R[a])[T][s]+p*r[T][s+1]+v*r[T][s+2]+g*r[T][s+3],t=x*r[T+1][s]+p*r[T+1][s+1]+v*r[T+1][s+2]+g*r[T+1][s+3],i=x*r[T+2][s]+p*r[T+2][s+1]+v*r[T+2][s+2]+g*r[T+2][s+3],n=x*r[T+3][s]+p*r[T+3][s+1]+v*r[T+3][s+2]+g*r[T+3][s+3],k[a]=S*o+3*(d*f*t+_*y*i)+m*n;return k}:e?function(k,s,T,b,f){var o,t,i,n;k||(k=[]),s*=3;var r=b*b,a=1-b,l=a*a,u=a*b*2,h=-3*l,c=3*(l-u),x=3*(u-r),p=3*r,v=1-f;for(i=0;i<R.length;i++)o=h*(n=R[i])[T][s]+c*n[T][s+1]+x*n[T][s+2]+p*n[T][s+3],t=h*n[T+1][s]+c*n[T+1][s+1]+x*n[T+1][s+2]+p*n[T+1][s+3],k[i]=v*o+f*t;return k}:M?function(k,s,T,b,f){var o,t,i,n,r,a;k||(k=[]),T*=3;var l=f*f,u=l*f,h=1-f,c=h*h,x=c*h;for(r=0;r<R.length;r++)o=(a=R[r])[T][s+1]-a[T][s],t=a[T+1][s+1]-a[T+1][s],i=a[T+2][s+1]-a[T+2][s],n=a[T+3][s+1]-a[T+3][s],k[r]=x*o+3*(c*f*t+h*l*i)+u*n;return k}:function(k,s,T,b,f){var o,t,i,n;k||(k=[]);var r=1-f;for(i=0;i<R.length;i++)o=(n=R[i])[T][s+1]-n[T][s],t=n[T+1][s+1]-n[T+1][s],k[i]=r*o+f*t;return k}}},24464:function(ee){ee.exports=function(R,e,M){return e&&M?function(k,s,T,b,f){var o,t,i,n,r,a;k||(k=[]),s*=3,T*=3;var l=b*b,u=l*b,h=1-b,c=h*h,x=c*h,p=f*f,v=1-f,g=v*v,y=v*f*2,m=-3*g,_=3*(g-y),d=3*(y-p),S=3*p;for(a=0;a<R.length;a++)o=m*(r=R[a])[T][s]+_*r[T+1][s]+d*r[T+2][s]+S*r[T+3][s],t=m*r[T][s+1]+_*r[T+1][s+1]+d*r[T+2][s+1]+S*r[T+3][s+1],i=m*r[T][s+2]+_*r[T+1][s+2]+d*r[T+2][s+2]+S*r[T+3][s+2],n=m*r[T][s+3]+_*r[T+1][s+3]+d*r[T+2][s+3]+S*r[T+3][s+3],k[a]=x*o+3*(c*b*t+h*l*i)+u*n;return k}:e?function(k,s,T,b,f){var o,t,i,n,r,a;k||(k=[]),s*=3;var l=f*f,u=l*f,h=1-f,c=h*h,x=c*h;for(r=0;r<R.length;r++)o=(a=R[r])[T+1][s]-a[T][s],t=a[T+1][s+1]-a[T][s+1],i=a[T+1][s+2]-a[T][s+2],n=a[T+1][s+3]-a[T][s+3],k[r]=x*o+3*(c*f*t+h*l*i)+u*n;return k}:M?function(k,s,T,b,f){var o,t,i,n;k||(k=[]),T*=3;var r=1-b,a=f*f,l=1-f,u=l*l,h=l*f*2,c=-3*u,x=3*(u-h),p=3*(h-a),v=3*a;for(i=0;i<R.length;i++)o=c*(n=R[i])[T][s]+x*n[T+1][s]+p*n[T+2][s]+v*n[T+3][s],t=c*n[T][s+1]+x*n[T+1][s+1]+p*n[T+2][s+1]+v*n[T+3][s+1],k[i]=r*o+b*t;return k}:function(k,s,T,b,f){var o,t,i,n;k||(k=[]);var r=1-b;for(i=0;i<R.length;i++)o=(n=R[i])[T+1][s]-n[T][s],t=n[T+1][s+1]-n[T][s+1],k[i]=r*o+b*t;return k}}},29056:function(ee){ee.exports=function(R,e,M,k,s){var T=e-2,b=M-2;return k&&s?function(f,o,t){var i,n,r,a,l,u;f||(f=[]);var h=Math.max(0,Math.min(Math.floor(o),T)),c=Math.max(0,Math.min(Math.floor(t),b)),x=Math.max(0,Math.min(1,o-h)),p=Math.max(0,Math.min(1,t-c));h*=3,c*=3;var v=x*x,g=v*x,y=1-x,m=y*y,_=m*y,d=p*p,S=d*p,w=1-p,E=w*w,C=E*w;for(u=0;u<R.length;u++)i=_*(l=R[u])[c][h]+3*(m*x*l[c][h+1]+y*v*l[c][h+2])+g*l[c][h+3],n=_*l[c+1][h]+3*(m*x*l[c+1][h+1]+y*v*l[c+1][h+2])+g*l[c+1][h+3],r=_*l[c+2][h]+3*(m*x*l[c+2][h+1]+y*v*l[c+2][h+2])+g*l[c+2][h+3],a=_*l[c+3][h]+3*(m*x*l[c+3][h+1]+y*v*l[c+3][h+2])+g*l[c+3][h+3],f[u]=C*i+3*(E*p*n+w*d*r)+S*a;return f}:k?function(f,o,t){f||(f=[]);var i,n,r,a,l,u,h=Math.max(0,Math.min(Math.floor(o),T)),c=Math.max(0,Math.min(Math.floor(t),b)),x=Math.max(0,Math.min(1,o-h)),p=Math.max(0,Math.min(1,t-c));h*=3;var v=x*x,g=v*x,y=1-x,m=y*y,_=m*y,d=1-p;for(l=0;l<R.length;l++)i=d*(u=R[l])[c][h]+p*u[c+1][h],n=d*u[c][h+1]+p*u[c+1][h+1],r=d*u[c][h+2]+p*u[c+1][h+1],a=d*u[c][h+3]+p*u[c+1][h+1],f[l]=_*i+3*(m*x*n+y*v*r)+g*a;return f}:s?function(f,o,t){f||(f=[]);var i,n,r,a,l,u,h=Math.max(0,Math.min(Math.floor(o),T)),c=Math.max(0,Math.min(Math.floor(t),b)),x=Math.max(0,Math.min(1,o-h)),p=Math.max(0,Math.min(1,t-c));c*=3;var v=p*p,g=v*p,y=1-p,m=y*y,_=m*y,d=1-x;for(l=0;l<R.length;l++)i=d*(u=R[l])[c][h]+x*u[c][h+1],n=d*u[c+1][h]+x*u[c+1][h+1],r=d*u[c+2][h]+x*u[c+2][h+1],a=d*u[c+3][h]+x*u[c+3][h+1],f[l]=_*i+3*(m*p*n+y*v*r)+g*a;return f}:function(f,o,t){f||(f=[]);var i,n,r,a,l=Math.max(0,Math.min(Math.floor(o),T)),u=Math.max(0,Math.min(Math.floor(t),b)),h=Math.max(0,Math.min(1,o-l)),c=Math.max(0,Math.min(1,t-u)),x=1-c,p=1-h;for(r=0;r<R.length;r++)i=p*(a=R[r])[u][l]+h*a[u][l+1],n=p*a[u+1][l]+h*a[u+1][l+1],f[r]=x*i+c*n;return f}}},38356:function(ee,R,e){var M=e(3400),k=e(86411),s=e(93504),T=e(85720),b=e(22548);ee.exports=function(f,o,t,i){function n(a,l){return M.coerce(f,o,T,a,l)}o._clipPathId="clip"+o.uid+"carpet";var r=n("color",b.defaultLine);M.coerceFont(n,"font",i.font),n("carpet"),s(f,o,i,n,r),o.a&&o.b?(o.a.length<3&&(o.aaxis.smoothing=0),o.b.length<3&&(o.baxis.smoothing=0),k(f,o,n)||(o.visible=!1),o._cheater&&n("cheaterslope"),n("zorder")):o.visible=!1}},95856:function(ee,R,e){ee.exports={attributes:e(85720),supplyDefaults:e(38356),plot:e(164),calc:e(58744),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:e(57952),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},50948:function(ee){ee.exports=function(R,e){for(var M,k=R._fullData.length,s=0;s<k;s++){var T=R._fullData[s];if(T.index!==e.index&&T.type==="carpet"&&(M||(M=T),T.carpet===e.carpet))return T}return M}},53416:function(ee){ee.exports=function(R,e,M){if(R.length===0)return"";var k,s=[],T=M?3:1;for(k=0;k<R.length;k+=T)s.push(R[k]+","+e[k]),M&&k<R.length-T&&(s.push("C"),s.push([R[k+1]+","+e[k+1],R[k+2]+","+e[k+2]+" "].join(" ")));return s.join(M?"":"L")}},87072:function(ee,R,e){var M=e(3400).isArrayOrTypedArray;ee.exports=function(k,s,T){var b;for(M(k)?k.length>s.length&&(k=k.slice(0,s.length)):k=[],b=0;b<s.length;b++)k[b]=T(s[b]);return k}},15584:function(ee){ee.exports=function(R,e,M,k,s,T){var b=s[0]*R.dpdx(e),f=s[1]*R.dpdy(M),o=1,t=1;if(T){var i=Math.sqrt(s[0]*s[0]+s[1]*s[1]),n=Math.sqrt(T[0]*T[0]+T[1]*T[1]),r=(s[0]*T[0]+s[1]*T[1])/i/n;t=Math.max(0,r)}var a=180*Math.atan2(f,b)/Math.PI;return a<-90?(a+=180,o=-o):a>90&&(a-=180,o=-o),{angle:a,flip:o,p:R.c2p(k,e,M),offsetMultplier:t}}},164:function(ee,R,e){var M=e(33428),k=e(43616),s=e(87072),T=e(53416),b=e(15584),f=e(72736),o=e(3400),t=o.strRotate,i=o.strTranslate,n=e(84284);function r(c,x,p,v,g,y,m){var _="const-"+g+"-lines",d=p.selectAll("."+_).data(y);d.enter().append("path").classed(_,!0).style("vector-effect",m?"none":"non-scaling-stroke"),d.each(function(S){var w=S,E=w.x,C=w.y,O=s([],E,c.c2p),P=s([],C,x.c2p),z="M"+T(O,P,w.smoothing);M.select(this).attr("d",z).style("stroke-width",w.width).style("stroke",w.color).style("stroke-dasharray",k.dashStyle(w.dash,w.width)).style("fill","none")}),d.exit().remove()}function a(c,x,p,v,g,y,m,_){var d=y.selectAll("text."+_).data(m);d.enter().append("text").classed(_,!0);var S=0,w={};return d.each(function(E,C){var O;if(E.axis.tickangle==="auto")O=b(v,x,p,E.xy,E.dxy);else{var P=(E.axis.tickangle+180)*Math.PI/180;O=b(v,x,p,E.xy,[Math.cos(P),Math.sin(P)])}C||(w={angle:O.angle,flip:O.flip});var z=(E.endAnchor?-1:1)*O.flip,j=M.select(this).attr({"text-anchor":z>0?"start":"end","data-notex":1}).call(k.font,E.font).text(E.text).call(f.convertToTspans,c),I=k.bBox(this);j.attr("transform",i(O.p[0],O.p[1])+t(O.angle)+i(E.axis.labelpadding*z,.3*I.height)),S=Math.max(S,I.width+E.axis.labelpadding)}),d.exit().remove(),w.maxExtent=S,w}ee.exports=function(c,x,p,v){var g=c._context.staticPlot,y=x.xaxis,m=x.yaxis,_=c._fullLayout._clips;o.makeTraceGroups(v,p,"trace").each(function(d){var S=M.select(this),w=d[0],E=w.trace,C=E.aaxis,O=E.baxis,P=o.ensureSingle(S,"g","minorlayer"),z=o.ensureSingle(S,"g","majorlayer"),j=o.ensureSingle(S,"g","boundarylayer"),I=o.ensureSingle(S,"g","labellayer");S.style("opacity",E.opacity),r(y,m,z,0,"a",C._gridlines,!0),r(y,m,z,0,"b",O._gridlines,!0),r(y,m,P,0,"a",C._minorgridlines,!0),r(y,m,P,0,"b",O._minorgridlines,!0),r(y,m,j,0,"a-boundary",C._boundarylines,g),r(y,m,j,0,"b-boundary",O._boundarylines,g);var N=a(c,y,m,E,0,I,C._labels,"a-label"),W=a(c,y,m,E,0,I,O._labels,"b-label");(function(F,U,H,ne,$,K,Q,Z){var X,te,ae,se,ce=o.aggNums(Math.min,null,H.a),fe=o.aggNums(Math.max,null,H.a),pe=o.aggNums(Math.min,null,H.b),ge=o.aggNums(Math.max,null,H.b);X=.5*(ce+fe),te=pe,ae=H.ab2xy(X,te,!0),se=H.dxyda_rough(X,te),Q.angle===void 0&&o.extendFlat(Q,b(H,$,K,ae,H.dxydb_rough(X,te))),h(F,U,H,0,ae,se,H.aaxis,$,K,Q,"a-title"),X=ce,te=.5*(pe+ge),ae=H.ab2xy(X,te,!0),se=H.dxydb_rough(X,te),Z.angle===void 0&&o.extendFlat(Z,b(H,$,K,ae,H.dxyda_rough(X,te))),h(F,U,H,0,ae,se,H.baxis,$,K,Z,"b-title")})(c,I,E,0,y,m,N,W),function(F,U,H,ne,$){var K,Q,Z,X,te=H.select("#"+F._clipPathId);te.size()||(te=H.append("clipPath").classed("carpetclip",!0));var ae=o.ensureSingle(te,"path","carpetboundary"),se=U.clipsegments,ce=[];for(X=0;X<se.length;X++)K=se[X],Q=s([],K.x,ne.c2p),Z=s([],K.y,$.c2p),ce.push(T(Q,Z,K.bicubic));var fe="M"+ce.join("L")+"Z";te.attr("id",F._clipPathId),ae.attr("d",fe)}(E,w,_,y,m)})};var l=n.LINE_SPACING,u=(1-n.MID_SHIFT)/l+1;function h(c,x,p,v,g,y,m,_,d,S,w){var E=[];m.title.text&&E.push(m.title.text);var C=x.selectAll("text."+w).data(E),O=S.maxExtent;C.enter().append("text").classed(w,!0),C.each(function(){var P=b(p,_,d,g,y);["start","both"].indexOf(m.showticklabels)===-1&&(O=0);var z=m.title.font.size;O+=z+m.title.offset;var j=(S.angle+(S.flip<0?180:0)-P.angle+450)%360,I=j>90&&j<270,N=M.select(this);N.text(m.title.text).call(f.convertToTspans,c),I&&(O=(-f.lineCount(N)+u)*l*z-O),N.attr("transform",i(P.p[0],P.p[1])+t(P.angle)+i(0,O)).attr("text-anchor","middle").call(k.font,m.title.font)}),C.exit().remove()}},81e3:function(ee,R,e){var M=e(24588),k=e(14952).findBin,s=e(30180),T=e(29056),b=e(26435),f=e(24464);ee.exports=function(o){var t=o._a,i=o._b,n=t.length,r=i.length,a=o.aaxis,l=o.baxis,u=t[0],h=t[n-1],c=i[0],x=i[r-1],p=t[t.length-1]-t[0],v=i[i.length-1]-i[0],g=p*M.RELATIVE_CULL_TOLERANCE,y=v*M.RELATIVE_CULL_TOLERANCE;u-=g,h+=g,c-=y,x+=y,o.isVisible=function(m,_){return m>u&&m<h&&_>c&&_<x},o.isOccluded=function(m,_){return m<u||m>h||_<c||_>x},o.setScale=function(){var m=o._x,_=o._y,d=s(o._xctrl,o._yctrl,m,_,a.smoothing,l.smoothing);o._xctrl=d[0],o._yctrl=d[1],o.evalxy=T([o._xctrl,o._yctrl],n,r,a.smoothing,l.smoothing),o.dxydi=b([o._xctrl,o._yctrl],a.smoothing,l.smoothing),o.dxydj=f([o._xctrl,o._yctrl],a.smoothing,l.smoothing)},o.i2a=function(m){var _=Math.max(0,Math.floor(m[0]),n-2),d=m[0]-_;return(1-d)*t[_]+d*t[_+1]},o.j2b=function(m){var _=Math.max(0,Math.floor(m[1]),n-2),d=m[1]-_;return(1-d)*i[_]+d*i[_+1]},o.ij2ab=function(m){return[o.i2a(m[0]),o.j2b(m[1])]},o.a2i=function(m){var _=Math.max(0,Math.min(k(m,t),n-2)),d=t[_],S=t[_+1];return Math.max(0,Math.min(n-1,_+(m-d)/(S-d)))},o.b2j=function(m){var _=Math.max(0,Math.min(k(m,i),r-2)),d=i[_],S=i[_+1];return Math.max(0,Math.min(r-1,_+(m-d)/(S-d)))},o.ab2ij=function(m){return[o.a2i(m[0]),o.b2j(m[1])]},o.i2c=function(m,_){return o.evalxy([],m,_)},o.ab2xy=function(m,_,d){if(!d&&(m<t[0]||m>t[n-1]|_<i[0]||_>i[r-1]))return[!1,!1];var S=o.a2i(m),w=o.b2j(_),E=o.evalxy([],S,w);if(d){var C,O,P,z,j=0,I=0,N=[];m<t[0]?(C=0,O=0,j=(m-t[0])/(t[1]-t[0])):m>t[n-1]?(C=n-2,O=1,j=(m-t[n-1])/(t[n-1]-t[n-2])):O=S-(C=Math.max(0,Math.min(n-2,Math.floor(S)))),_<i[0]?(P=0,z=0,I=(_-i[0])/(i[1]-i[0])):_>i[r-1]?(P=r-2,z=1,I=(_-i[r-1])/(i[r-1]-i[r-2])):z=w-(P=Math.max(0,Math.min(r-2,Math.floor(w)))),j&&(o.dxydi(N,C,P,O,z),E[0]+=N[0]*j,E[1]+=N[1]*j),I&&(o.dxydj(N,C,P,O,z),E[0]+=N[0]*I,E[1]+=N[1]*I)}return E},o.c2p=function(m,_,d){return[_.c2p(m[0]),d.c2p(m[1])]},o.p2x=function(m,_,d){return[_.p2c(m[0]),d.p2c(m[1])]},o.dadi=function(m){var _=Math.max(0,Math.min(t.length-2,m));return t[_+1]-t[_]},o.dbdj=function(m){var _=Math.max(0,Math.min(i.length-2,m));return i[_+1]-i[_]},o.dxyda=function(m,_,d,S){var w=o.dxydi(null,m,_,d,S),E=o.dadi(m,d);return[w[0]/E,w[1]/E]},o.dxydb=function(m,_,d,S){var w=o.dxydj(null,m,_,d,S),E=o.dbdj(_,S);return[w[0]/E,w[1]/E]},o.dxyda_rough=function(m,_,d){var S=p*(d||.1),w=o.ab2xy(m+S,_,!0),E=o.ab2xy(m-S,_,!0);return[.5*(w[0]-E[0])/S,.5*(w[1]-E[1])/S]},o.dxydb_rough=function(m,_,d){var S=v*(d||.1),w=o.ab2xy(m,_+S,!0),E=o.ab2xy(m,_-S,!0);return[.5*(w[0]-E[0])/S,.5*(w[1]-E[1])/S]},o.dpdx=function(m){return m._m},o.dpdy=function(m){return m._m}}},51512:function(ee,R,e){var M=e(3400);ee.exports=function(k,s,T){var b,f,o,t=[],i=[],n=k[0].length,r=k.length;function a(F,U){var H,ne=0,$=0;return F>0&&(H=k[U][F-1])!==void 0&&($++,ne+=H),F<n-1&&(H=k[U][F+1])!==void 0&&($++,ne+=H),U>0&&(H=k[U-1][F])!==void 0&&($++,ne+=H),U<r-1&&(H=k[U+1][F])!==void 0&&($++,ne+=H),ne/Math.max(1,$)}var l,u,h,c,x,p,v,g,y,m,_,d=0;for(b=0;b<n;b++)for(f=0;f<r;f++)k[f][b]===void 0&&(t.push(b),i.push(f),k[f][b]=a(b,f)),d=Math.max(d,Math.abs(k[f][b]));if(!t.length)return k;var S=0,w=0,E=t.length;do{for(S=0,o=0;o<E;o++){b=t[o],f=i[o];var C,O,P,z,j,I,N=0,W=0;b===0?(P=s[j=Math.min(n-1,2)],z=s[1],C=k[f][j],W+=(O=k[f][1])+(O-C)*(s[0]-z)/(z-P),N++):b===n-1&&(P=s[j=Math.max(0,n-3)],z=s[n-2],C=k[f][j],W+=(O=k[f][n-2])+(O-C)*(s[n-1]-z)/(z-P),N++),(b===0||b===n-1)&&f>0&&f<r-1&&(l=T[f+1]-T[f],W+=((u=T[f]-T[f-1])*k[f+1][b]+l*k[f-1][b])/(u+l),N++),f===0?(P=T[I=Math.min(r-1,2)],z=T[1],C=k[I][b],W+=(O=k[1][b])+(O-C)*(T[0]-z)/(z-P),N++):f===r-1&&(P=T[I=Math.max(0,r-3)],z=T[r-2],C=k[I][b],W+=(O=k[r-2][b])+(O-C)*(T[r-1]-z)/(z-P),N++),(f===0||f===r-1)&&b>0&&b<n-1&&(l=s[b+1]-s[b],W+=((u=s[b]-s[b-1])*k[f][b+1]+l*k[f][b-1])/(u+l),N++),N?W/=N:(h=s[b+1]-s[b],c=s[b]-s[b-1],g=(x=T[f+1]-T[f])*(p=T[f]-T[f-1])*(x+p),W=((v=h*c*(h+c))*(p*k[f+1][b]+x*k[f-1][b])+g*(c*k[f][b+1]+h*k[f][b-1]))/(g*(c+h)+v*(p+x))),S+=(m=(y=W-k[f][b])/d)*m,_=N?0:.85,k[f][b]+=y*(1+_)}S=Math.sqrt(S)}while(w++<100&&S>1e-5);return M.log("Smoother converged to",S,"after",w,"iterations"),k}},86411:function(ee,R,e){var M=e(3400).isArray1D;ee.exports=function(k,s,T){var b=T("x"),f=b&&b.length,o=T("y"),t=o&&o.length;if(!f&&!t)return!1;if(s._cheater=!b,f&&!M(b)||t&&!M(o))s._length=null;else{var i=f?b.length:1/0;t&&(i=Math.min(i,o.length)),s.a&&s.a.length&&(i=Math.min(i,s.a.length)),s.b&&s.b.length&&(i=Math.min(i,s.b.length)),s._length=i}return!0}},83372:function(ee,R,e){var M=e(21776).Ks,k=e(6096),s=e(49084),T=e(45464),b=e(22548).defaultLine,f=e(92880).extendFlat,o=k.marker.line;ee.exports=f({locations:{valType:"data_array",editType:"calc"},locationmode:k.locationmode,z:{valType:"data_array",editType:"calc"},geojson:f({},k.geojson,{}),featureidkey:k.featureidkey,text:f({},k.text,{}),hovertext:f({},k.hovertext,{}),marker:{line:{color:f({},o.color,{dflt:b}),width:f({},o.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:k.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:k.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:f({},T.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:M(),showlegend:f({},T.showlegend,{dflt:!1})},s("",{cLetter:"z",editTypeOverride:"calc"}))},7924:function(ee,R,e){var M=e(38248),k=e(39032).BADNUM,s=e(47128),T=e(20148),b=e(4500);function f(o){return o&&typeof o=="string"}ee.exports=function(o,t){var i,n=t._length,r=new Array(n);i=t.geojson?function(c){return f(c)||M(c)}:f;for(var a=0;a<n;a++){var l=r[a]={},u=t.locations[a],h=t.z[a];i(u)&&M(h)?(l.loc=u,l.z=h):(l.loc=null,l.z=k),l.index=a}return T(r,t),s(o,t,{vals:t.z,containerStr:"",cLetter:"z"}),b(r,t),r}},30972:function(ee,R,e){var M=e(3400),k=e(27260),s=e(83372);ee.exports=function(T,b,f,o){function t(l,u){return M.coerce(T,b,s,l,u)}var i=t("locations"),n=t("z");if(i&&i.length&&M.isArrayOrTypedArray(n)&&n.length){b._length=Math.min(i.length,n.length);var r,a=t("geojson");(typeof a=="string"&&a!==""||M.isPlainObject(a))&&(r="geojson-id"),t("locationmode",r)==="geojson-id"&&t("featureidkey"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),k(T,b,o,t,{prefix:"",cLetter:"z"}),M.coerceSelectionMarkerOpacity(b,t)}else b.visible=!1}},52428:function(ee){ee.exports=function(R,e,M,k,s){R.location=e.location,R.z=e.z;var T=k[s];return T.fIn&&T.fIn.properties&&(R.properties=T.fIn.properties),R.ct=T.ct,R}},69224:function(ee,R,e){var M=e(54460),k=e(83372),s=e(3400).fillText;ee.exports=function(T,b,f){var o,t,i,n,r=T.cd,a=r[0].trace,l=T.subplot,u=[b,f],h=[b+360,f];for(t=0;t<r.length;t++)if(n=!1,(o=r[t])._polygons){for(i=0;i<o._polygons.length;i++)o._polygons[i].contains(u)&&(n=!n),o._polygons[i].contains(h)&&(n=!n);if(n)break}if(n&&o)return T.x0=T.x1=T.xa.c2p(o.ct),T.y0=T.y1=T.ya.c2p(o.ct),T.index=o.index,T.location=o.loc,T.z=o.z,T.zLabel=M.tickText(l.mockAxis,l.mockAxis.c2l(o.z),"hover").text,T.hovertemplate=o.hovertemplate,function(c,x,p){if(!x.hovertemplate){var v=p.hi||x.hoverinfo,g=String(p.loc),y=v==="all"?k.hoverinfo.flags:v.split("+"),m=y.indexOf("name")!==-1,_=y.indexOf("location")!==-1,d=y.indexOf("z")!==-1,S=y.indexOf("text")!==-1,w=[];!m&&_?c.nameOverride=g:(m&&(c.nameOverride=x.name),_&&w.push(g)),d&&w.push(c.zLabel),S&&s(p,x,w),c.extraText=w.join("<br>")}}(T,a,o),[T]}},54272:function(ee,R,e){ee.exports={attributes:e(83372),supplyDefaults:e(30972),colorbar:e(96288),calc:e(7924),calcGeoJSON:e(88364).calcGeoJSON,plot:e(88364).plot,style:e(7947).style,styleOnSelect:e(7947).styleOnSelect,hoverPoints:e(69224),eventData:e(52428),selectPoints:e(17328),moduleType:"trace",name:"choropleth",basePlotModule:e(10816),categories:["geo","noOpacity","showLegend"],meta:{}}},88364:function(ee,R,e){var M=e(33428),k=e(3400),s=e(27144),T=e(59972).getTopojsonFeatures,b=e(19280).findExtremes,f=e(7947).style;ee.exports={calcGeoJSON:function(o,t){for(var i=o[0].trace,n=t[i.geo],r=n._subplot,a=i.locationmode,l=i._length,u=a==="geojson-id"?s.extractTraceFeature(o):T(i,r.topojson),h=[],c=[],x=0;x<l;x++){var p=o[x],v=a==="geojson-id"?p.fOut:s.locationToFeature(a,p.loc,u);if(v){p.geojson=v,p.ct=v.properties.ct,p._polygons=s.feature2polygons(v);var g=s.computeBbox(v);h.push(g[0],g[2]),c.push(g[1],g[3])}else p.geojson=null}if(n.fitbounds==="geojson"&&a==="geojson-id"){var y=s.computeBbox(s.getTraceGeojson(i));h=[y[0],y[2]],c=[y[1],y[3]]}var m={padded:!0};i._extremes.lon=b(n.lonaxis._ax,h,m),i._extremes.lat=b(n.lataxis._ax,c,m)},plot:function(o,t,i){var n=t.layers.backplot.select(".choroplethlayer");k.makeTraceGroups(n,i,"trace choropleth").each(function(r){var a=M.select(this).selectAll("path.choroplethlocation").data(k.identity);a.enter().append("path").classed("choroplethlocation",!0),a.exit().remove(),f(o,r)})}}},17328:function(ee){ee.exports=function(R,e){var M,k,s,T,b,f=R.cd,o=R.xaxis,t=R.yaxis,i=[];if(e===!1)for(M=0;M<f.length;M++)f[M].selected=0;else for(M=0;M<f.length;M++)(s=(k=f[M]).ct)&&(T=o.c2p(s),b=t.c2p(s),e.contains([T,b],null,M,R)?(i.push({pointNumber:M,lon:s[0],lat:s[1]}),k.selected=1):k.selected=0);return i}},7947:function(ee,R,e){var M=e(33428),k=e(76308),s=e(43616),T=e(8932);function b(f,o){var t=o[0].trace,i=o[0].node3.selectAll(".choroplethlocation"),n=t.marker||{},r=n.line||{},a=T.makeColorScaleFuncFromTrace(t);i.each(function(l){M.select(this).attr("fill",a(l.z)).call(k.stroke,l.mlc||r.color).call(s.dashLine,"",l.mlw||r.width||0).style("opacity",n.opacity)}),s.selectedPointStyle(i,t)}ee.exports={style:function(f,o){o&&b(0,o)},styleOnSelect:function(f,o){var t=o[0].node3,i=o[0].trace;i.selectedpoints?s.selectedPointStyle(t.selectAll(".choroplethlocation"),i):b(0,o)}}},45608:function(ee,R,e){var M=e(83372),k=e(49084),s=e(21776).Ks,T=e(45464),b=e(92880).extendFlat;ee.exports=b({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:b({},M.featureidkey,{}),below:{valType:"string",editType:"plot"},text:M.text,hovertext:M.hovertext,marker:{line:{color:b({},M.marker.line.color,{editType:"plot"}),width:b({},M.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:b({},M.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:b({},M.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:b({},M.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:M.hoverinfo,hovertemplate:s({},{keys:["properties"]}),showlegend:b({},T.showlegend,{dflt:!1})},k("",{cLetter:"z",editTypeOverride:"calc"}))},13504:function(ee,R,e){var M=e(38248),k=e(3400),s=e(8932),T=e(43616),b=e(44808).makeBlank,f=e(27144);function o(t){var i,n=t[0].trace,r=n._opts;if(n.selectedpoints){for(var a=T.makeSelectedPointStyleFns(n),l=0;l<t.length;l++){var u=t[l];u.fOut&&(u.fOut.properties.mo2=a.selectedOpacityFn(u))}i={type:"identity",property:"mo2"}}else i=k.isArrayOrTypedArray(n.marker.opacity)?{type:"identity",property:"mo"}:n.marker.opacity;return k.extendFlat(r.fill.paint,{"fill-opacity":i}),k.extendFlat(r.line.paint,{"line-opacity":i}),r}ee.exports={convert:function(t){var i=t[0].trace,n=i.visible===!0&&i._length!==0,r={layout:{visibility:"none"},paint:{}},a={layout:{visibility:"none"},paint:{}},l=i._opts={fill:r,line:a,geojson:b()};if(!n)return l;var u=f.extractTraceFeature(t);if(!u)return l;var h,c,x,p=s.makeColorScaleFuncFromTrace(i),v=i.marker,g=v.line||{};k.isArrayOrTypedArray(v.opacity)&&(h=function(w){var E=w.mo;return M(E)?+k.constrain(E,0,1):0}),k.isArrayOrTypedArray(g.color)&&(c=function(w){return w.mlc}),k.isArrayOrTypedArray(g.width)&&(x=function(w){return w.mlw});for(var y=0;y<t.length;y++){var m=t[y],_=m.fOut;if(_){var d=_.properties;d.fc=p(m.z),h&&(d.mo=h(m)),c&&(d.mlc=c(m)),x&&(d.mlw=x(m)),m.ct=d.ct,m._polygons=f.feature2polygons(_)}}var S=h?{type:"identity",property:"mo"}:v.opacity;return k.extendFlat(r.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":S}),k.extendFlat(a.paint,{"line-color":c?{type:"identity",property:"mlc"}:g.color,"line-width":x?{type:"identity",property:"mlw"}:g.width,"line-opacity":S}),r.layout.visibility="visible",a.layout.visibility="visible",l.geojson={type:"FeatureCollection",features:u},o(t),l},convertOnSelect:o}},9352:function(ee,R,e){var M=e(3400),k=e(27260),s=e(45608);ee.exports=function(T,b,f,o){function t(a,l){return M.coerce(T,b,s,a,l)}var i=t("locations"),n=t("z"),r=t("geojson");M.isArrayOrTypedArray(i)&&i.length&&M.isArrayOrTypedArray(n)&&n.length&&(typeof r=="string"&&r!==""||M.isPlainObject(r))?(t("featureidkey"),b._length=Math.min(i.length,n.length),t("below"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),k(T,b,o,t,{prefix:"",cLetter:"z"}),M.coerceSelectionMarkerOpacity(b,t)):b.visible=!1}},85404:function(ee,R,e){ee.exports={attributes:e(45608),supplyDefaults:e(9352),colorbar:e(96288),calc:e(7924),plot:e(61288),hoverPoints:e(69224),eventData:e(52428),selectPoints:e(17328),styleOnSelect:function(M,k){k&&k[0].trace._glTrace.updateOnSelect(k)},getBelow:function(M,k){for(var s=k.getMapLayers(),T=s.length-2;T>=0;T--){var b=s[T].id;if(typeof b=="string"&&b.indexOf("water")===0){for(var f=T+1;f<s.length;f++)if(typeof(b=s[f].id)=="string"&&b.indexOf("plotly-")===-1)return b}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:e(33688),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},61288:function(ee,R,e){var M=e(13504).convert,k=e(13504).convertOnSelect,s=e(47552).traceLayerPrefix;function T(f,o){this.type="choroplethmapbox",this.subplot=f,this.uid=o,this.sourceId="source-"+o,this.layerList=[["fill",s+o+"-fill"],["line",s+o+"-line"]],this.below=null}var b=T.prototype;b.update=function(f){this._update(M(f)),f[0].trace._glTrace=this},b.updateOnSelect=function(f){this._update(k(f))},b._update=function(f){var o=this.subplot,t=this.layerList,i=o.belowLookup["trace-"+this.uid];o.map.getSource(this.sourceId).setData(f.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(f,i),this.below=i);for(var n=0;n<t.length;n++){var r=t[n],a=r[0],l=r[1],u=f[a];o.setOptions(l,"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&o.setOptions(l,"setPaintProperty",u.paint)}},b._addLayers=function(f,o){for(var t=this.subplot,i=this.layerList,n=this.sourceId,r=0;r<i.length;r++){var a=i[r],l=a[0],u=f[l];t.addLayer({type:l,id:a[1],source:n,layout:u.layout,paint:u.paint},o)}},b._removeLayers=function(){for(var f=this.subplot.map,o=this.layerList,t=o.length-1;t>=0;t--)f.removeLayer(o[t][1])},b.dispose=function(){var f=this.subplot.map;this._removeLayers(),f.removeSource(this.sourceId)},ee.exports=function(f,o){var t=o[0].trace,i=new T(f,t.uid),n=i.sourceId,r=M(o),a=i.below=f.belowLookup["trace-"+t.uid];return f.map.addSource(n,{type:"geojson",data:r.geojson}),i._addLayers(r,a),o[0].trace._glTrace=i,i}},86040:function(ee,R,e){var M=e(49084),k=e(29736).axisHoverFormat,s=e(21776).Ks,T=e(52948),b=e(45464),f=e(92880).extendFlat,o={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute","raw"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:s({editType:"calc"},{keys:["norm"]}),uhoverformat:k("u",1),vhoverformat:k("v",1),whoverformat:k("w",1),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),showlegend:f({},b.showlegend,{dflt:!1})};f(o,M("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){o[t]=T[t]}),o.hoverinfo=f({},b.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),o.transforms=void 0,ee.exports=o},83344:function(ee,R,e){var M=e(47128);ee.exports=function(k,s){for(var T=s.u,b=s.v,f=s.w,o=Math.min(s.x.length,s.y.length,s.z.length,T.length,b.length,f.length),t=-1/0,i=1/0,n=0;n<o;n++){var r=T[n],a=b[n],l=f[n],u=Math.sqrt(r*r+a*a+l*l);t=Math.max(t,u),i=Math.min(i,u)}s._len=o,s._normMax=t,M(k,s,{vals:[i,t],containerStr:"",cLetter:"c"})}},6648:function(ee,R,e){var M=e(67792).gl_cone3d,k=e(67792).gl_cone3d.createConeMesh,s=e(3400).simpleMap,T=e(33040).parseColorScale,b=e(8932).extractOpts,f=e(3400).isArrayOrTypedArray,o=e(52094);function t(u,h){this.scene=u,this.uid=h,this.mesh=null,this.data=null}var i=t.prototype;i.handlePick=function(u){if(u.object===this.mesh){var h=u.index=u.data.index,c=this.data.x[h],x=this.data.y[h],p=this.data.z[h],v=this.data.u[h],g=this.data.v[h],y=this.data.w[h];u.traceCoordinate=[c,x,p,v,g,y,Math.sqrt(v*v+g*g+y*y)];var m=this.data.hovertext||this.data.text;return f(m)&&m[h]!==void 0?u.textLabel=m[h]:m&&(u.textLabel=m),!0}};var n={xaxis:0,yaxis:1,zaxis:2},r={tip:1,tail:0,cm:.25,center:.5},a={tip:1,tail:1,cm:.75,center:.5};function l(u,h){var c=u.fullSceneLayout,x=u.dataScale,p={};function v(d,S){var w=c[S],E=x[n[S]];return s(d,function(C){return w.d2l(C)*E})}p.vectors=o(v(h.u,"xaxis"),v(h.v,"yaxis"),v(h.w,"zaxis"),h._len),p.positions=o(v(h.x,"xaxis"),v(h.y,"yaxis"),v(h.z,"zaxis"),h._len);var g=b(h);p.colormap=T(h),p.vertexIntensityBounds=[g.min/h._normMax,g.max/h._normMax],p.coneOffset=r[h.anchor];var y=h.sizemode;y==="scaled"?p.coneSize=h.sizeref||.5:y==="absolute"?p.coneSize=h.sizeref&&h._normMax?h.sizeref/h._normMax:.5:y==="raw"&&(p.coneSize=h.sizeref),p.coneSizemode=y;var m=M(p),_=h.lightposition;return m.lightPosition=[_.x,_.y,_.z],m.ambient=h.lighting.ambient,m.diffuse=h.lighting.diffuse,m.specular=h.lighting.specular,m.roughness=h.lighting.roughness,m.fresnel=h.lighting.fresnel,m.opacity=h.opacity,h._pad=a[h.anchor]*m.vectorScale*m.coneScale*h._normMax,m}i.update=function(u){this.data=u;var h=l(this.scene,u);this.mesh.update(h)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ee.exports=function(u,h){var c=u.glplot.gl,x=l(u,h),p=k(c,x),v=new t(u,h.uid);return v.mesh=p,v.data=h,p._trace=v,u.glplot.add(p),v}},86096:function(ee,R,e){var M=e(3400),k=e(27260),s=e(86040);ee.exports=function(T,b,f,o){function t(c,x){return M.coerce(T,b,s,c,x)}var i=t("u"),n=t("v"),r=t("w"),a=t("x"),l=t("y"),u=t("z");if(i&&i.length&&n&&n.length&&r&&r.length&&a&&a.length&&l&&l.length&&u&&u.length){var h=t("sizemode");t("sizeref",h==="raw"?1:.5),t("anchor"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),k(T,b,o,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),b._length=null}else b.visible=!1}},26048:function(ee,R,e){ee.exports={moduleType:"trace",name:"cone",basePlotModule:e(12536),categories:["gl3d","showLegend"],attributes:e(86040),supplyDefaults:e(86096),colorbar:{min:"cmin",max:"cmax"},calc:e(83344),plot:e(6648),eventData:function(M,k){return M.norm=k.traceCoordinate[6],M},meta:{}}},67104:function(ee,R,e){var M=e(83328),k=e(52904),s=e(29736),T=s.axisHoverFormat,b=s.descriptionOnlyNumbers,f=e(49084),o=e(98192).u,t=e(25376),i=e(92880).extendFlat,n=e(69104),r=n.COMPARISON_OPS2,a=n.INTERVAL_OPS,l=k.line;ee.exports=i({z:M.z,x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,text:M.text,hovertext:M.hovertext,transpose:M.transpose,xtype:M.xtype,ytype:M.ytype,xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:M.hovertemplate,texttemplate:i({},M.texttemplate,{}),textfont:i({},M.textfont,{}),hoverongaps:M.hoverongaps,connectgaps:i({},M.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:t({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:b("contour label")},operation:{valType:"enumerated",values:[].concat(r).concat(a),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:i({},l.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:o,smoothing:i({},l.smoothing,{}),editType:"plot"},zorder:k.zorder},f("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},20688:function(ee,R,e){var M=e(8932),k=e(19512),s=e(54444),T=e(46960);ee.exports=function(b,f){var o=k(b,f),t=o[0].z;s(f,t);var i,n=f.contours,r=M.extractOpts(f);if(n.coloring==="heatmap"&&r.auto&&f.autocontour===!1){var a=n.start,l=T(n),u=n.size||1,h=Math.floor((l-a)/u)+1;isFinite(u)||(u=1,h=1);var c=a-u/2;i=[c,c+h*u]}else i=t;return M.calc(b,f,{vals:i,cLetter:"z"}),o}},56008:function(ee){ee.exports=function(R,e){var M,k=R[0],s=k.z;switch(e.type){case"levels":var T=Math.min(s[0][0],s[0][1]);for(M=0;M<R.length;M++){var b=R[M];b.prefixBoundary=!b.edgepaths.length&&(T>b.level||b.starts.length&&T===b.level)}break;case"constraint":if(k.prefixBoundary=!1,k.edgepaths.length)return;var f=k.x.length,o=k.y.length,t=-1/0,i=1/0;for(M=0;M<o;M++)i=Math.min(i,s[M][0]),i=Math.min(i,s[M][f-1]),t=Math.max(t,s[M][0]),t=Math.max(t,s[M][f-1]);for(M=1;M<f-1;M++)i=Math.min(i,s[0][M]),i=Math.min(i,s[o-1][M]),t=Math.max(t,s[0][M]),t=Math.max(t,s[o-1][M]);var n,r,a=e.value;switch(e._operation){case">":a>t&&(k.prefixBoundary=!0);break;case"<":(a<i||k.starts.length&&a===i)&&(k.prefixBoundary=!0);break;case"[]":n=Math.min(a[0],a[1]),((r=Math.max(a[0],a[1]))<i||n>t||k.starts.length&&r===i)&&(k.prefixBoundary=!0);break;case"][":n=Math.min(a[0],a[1]),r=Math.max(a[0],a[1]),n<i&&r>t&&(k.prefixBoundary=!0)}}}},55296:function(ee,R,e){var M=e(8932),k=e(41076),s=e(46960);ee.exports={min:"zmin",max:"zmax",calc:function(T,b,f){var o=b.contours,t=b.line,i=o.size||1,n=o.coloring,r=k(b,{isColorbar:!0});if(n==="heatmap"){var a=M.extractOpts(b);f._fillgradient=a.reversescale?M.flipScale(a.colorscale):a.colorscale,f._zrange=[a.min,a.max]}else n==="fill"&&(f._fillcolor=r);f._line={color:n==="lines"?r:t.color,width:o.showlines!==!1?t.width:0,dash:t.dash},f._levels={start:o.start,end:s(o),size:i}}}},93252:function(ee){ee.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},95536:function(ee,R,e){var M=e(38248),k=e(17428),s=e(76308),T=s.addOpacity,b=s.opacity,f=e(69104),o=e(3400).isArrayOrTypedArray,t=f.CONSTRAINT_REDUCTION,i=f.COMPARISON_OPS2;ee.exports=function(n,r,a,l,u,h){var c,x,p,v=r.contours,g=a("contours.operation");v._operation=t[g],function(y,m){var _;i.indexOf(m.operation)===-1?(y("contours.value",[0,1]),o(m.value)?m.value.length>2?m.value=m.value.slice(2):m.length===0?m.value=[0,1]:m.length<2?(_=parseFloat(m.value[0]),m.value=[_,_+1]):m.value=[parseFloat(m.value[0]),parseFloat(m.value[1])]:M(m.value)&&(_=parseFloat(m.value),m.value=[_,_+1])):(y("contours.value",0),M(m.value)||(o(m.value)?m.value=parseFloat(m.value[0]):m.value=0))}(a,v),g==="="?c=v.showlines=!0:(c=a("contours.showlines"),p=a("fillcolor",T((n.line||{}).color||u,.5))),c&&(x=a("line.color",p&&b(p)?T(r.fillcolor,1):u),a("line.width",2),a("line.dash")),a("line.smoothing"),k(a,l,x,h)}},3212:function(ee,R,e){var M=e(69104),k=e(38248);function s(f,o){var t,i=Array.isArray(o);function n(r){return k(r)?+r:null}return M.COMPARISON_OPS2.indexOf(f)!==-1?t=n(i?o[0]:o):M.INTERVAL_OPS.indexOf(f)!==-1?t=i?[n(o[0]),n(o[1])]:[n(o),n(o)]:M.SET_OPS.indexOf(f)!==-1&&(t=i?o.map(n):[n(o)]),t}function T(f){return function(o){o=s(f,o);var t=Math.min(o[0],o[1]),i=Math.max(o[0],o[1]);return{start:t,end:i,size:i-t}}}function b(f){return function(o){return{start:o=s(f,o),end:1/0,size:1/0}}}ee.exports={"[]":T("[]"),"][":T("]["),">":b(">"),"<":b("<"),"=":b("=")}},84952:function(ee){ee.exports=function(R,e,M,k){var s=k("contours.start"),T=k("contours.end"),b=s===!1||T===!1,f=M("contours.size");!(b?e.autocontour=!0:M("autocontour",!1))&&f||M("ncontours")}},82172:function(ee,R,e){var M=e(3400);function k(s){return M.extendFlat({},s,{edgepaths:M.extendDeep([],s.edgepaths),paths:M.extendDeep([],s.paths),starts:M.extendDeep([],s.starts)})}ee.exports=function(s,T){var b,f,o,t=function(r){return r.reverse()},i=function(r){return r};switch(T){case"=":case"<":return s;case">":for(s.length!==1&&M.warn("Contour data invalid for the specified inequality operation."),f=s[0],b=0;b<f.edgepaths.length;b++)f.edgepaths[b]=t(f.edgepaths[b]);for(b=0;b<f.paths.length;b++)f.paths[b]=t(f.paths[b]);for(b=0;b<f.starts.length;b++)f.starts[b]=t(f.starts[b]);return s;case"][":var n=t;t=i,i=n;case"[]":for(s.length!==2&&M.warn("Contour data invalid for the specified inequality range operation."),f=k(s[0]),o=k(s[1]),b=0;b<f.edgepaths.length;b++)f.edgepaths[b]=t(f.edgepaths[b]);for(b=0;b<f.paths.length;b++)f.paths[b]=t(f.paths[b]);for(b=0;b<f.starts.length;b++)f.starts[b]=t(f.starts[b]);for(;o.edgepaths.length;)f.edgepaths.push(i(o.edgepaths.shift()));for(;o.paths.length;)f.paths.push(i(o.paths.shift()));for(;o.starts.length;)f.starts.push(i(o.starts.shift()));return[f]}}},57004:function(ee,R,e){var M=e(3400),k=e(51264),s=e(31147),T=e(95536),b=e(84952),f=e(97680),o=e(39096),t=e(67104);ee.exports=function(i,n,r,a){function l(h,c){return M.coerce(i,n,t,h,c)}if(k(i,n,l,a)){s(i,n,a,l),l("xhoverformat"),l("yhoverformat"),l("text"),l("hovertext"),l("hoverongaps"),l("hovertemplate");var u=l("contours.type")==="constraint";l("connectgaps",M.isArray1D(n.z)),u?T(i,n,l,a,r):(b(i,n,l,function(h){return M.coerce2(i,n,t,h)}),f(i,n,l,a)),n.contours&&n.contours.coloring==="heatmap"&&o(l,a),l("zorder")}else n.visible=!1}},61512:function(ee,R,e){var M=e(3400),k=e(3212),s=e(46960);ee.exports=function(T,b,f){for(var o=T.type==="constraint"?k[T._operation](T.value):T,t=o.size,i=[],n=s(o),r=f.trace._carpetTrace,a=r?{xaxis:r.aaxis,yaxis:r.baxis,x:f.a,y:f.b}:{xaxis:b.xaxis,yaxis:b.yaxis,x:f.x,y:f.y},l=o.start;l<n;l+=t)if(i.push(M.extendFlat({level:l,crossings:{},starts:[],edgepaths:[],paths:[],z:f.z,smoothing:f.trace.line.smoothing},a)),i.length>1e3){M.warn("Too many contours, clipping at 1000",T);break}return i}},46960:function(ee){ee.exports=function(R){return R.end+R.size/1e6}},88748:function(ee,R,e){var M=e(3400),k=e(93252);function s(f,o,t,i){return Math.abs(f[0]-o[0])<t&&Math.abs(f[1]-o[1])<i}function T(f,o,t,i,n){var r,a=o.join(","),l=f.crossings[a],u=function(te,ae,se){var ce=0,fe=0;return te>20&&ae?te===208||te===1114?ce=se[0]===0?1:-1:fe=se[1]===0?1:-1:k.BOTTOMSTART.indexOf(te)!==-1?fe=1:k.LEFTSTART.indexOf(te)!==-1?ce=1:k.TOPSTART.indexOf(te)!==-1?fe=-1:ce=-1,[ce,fe]}(l,t,o),h=[b(f,o,[-u[0],-u[1]])],c=f.z.length,x=f.z[0].length,p=o.slice(),v=u.slice();for(r=0;r<1e4;r++){if(l>20?(l=k.CHOOSESADDLE[l][(u[0]||u[1])<0?0:1],f.crossings[a]=k.SADDLEREMAINDER[l]):delete f.crossings[a],!(u=k.NEWDELTA[l])){M.log("Found bad marching index:",l,o,f.level);break}h.push(b(f,o,u)),o[0]+=u[0],o[1]+=u[1],a=o.join(","),s(h[h.length-1],h[h.length-2],i,n)&&h.pop();var g=u[0]&&(o[0]<0||o[0]>x-2)||u[1]&&(o[1]<0||o[1]>c-2);if(o[0]===p[0]&&o[1]===p[1]&&u[0]===v[0]&&u[1]===v[1]||t&&g)break;l=f.crossings[a]}r===1e4&&M.log("Infinite loop in contour?");var y,m,_,d,S,w,E,C,O,P,z,j,I,N,W,F=s(h[0],h[h.length-1],i,n),U=0,H=.2*f.smoothing,ne=[],$=0;for(r=1;r<h.length;r++)j=h[r],I=h[r-1],N=j[2]-I[2],W=j[3]-I[3],U+=E=Math.sqrt(N*N+W*W),ne.push(E);var K=U/ne.length*H;function Q(te){return h[te%h.length]}for(r=h.length-2;r>=$;r--)if((y=ne[r])<K){for(_=0,m=r-1;m>=$&&y+ne[m]<K;m--)y+=ne[m];if(F&&r===h.length-2)for(_=0;_<m&&y+ne[_]<K;_++)y+=ne[_];S=r-m+_+1,w=Math.floor((r+m+_+2)/2),d=F||r!==h.length-2?F||m!==-1?S%2?Q(w):[(Q(w)[0]+Q(w+1)[0])/2,(Q(w)[1]+Q(w+1)[1])/2]:h[0]:h[h.length-1],h.splice(m+1,r-m+1,d),r=m+1,_&&($=_),F&&(r===h.length-2?h[_]=h[h.length-1]:r===0&&(h[h.length-1]=h[0]))}for(h.splice(0,$),r=0;r<h.length;r++)h[r].length=2;if(!(h.length<2))if(F)h.pop(),f.paths.push(h);else{t||M.log("Unclosed interior contour?",f.level,p.join(","),h.join("L"));var Z=!1;for(C=0;C<f.edgepaths.length;C++)if(P=f.edgepaths[C],!Z&&s(P[0],h[h.length-1],i,n)){h.pop(),Z=!0;var X=!1;for(O=0;O<f.edgepaths.length;O++)if(s((z=f.edgepaths[O])[z.length-1],h[0],i,n)){X=!0,h.shift(),f.edgepaths.splice(C,1),O===C?f.paths.push(h.concat(z)):(O>C&&O--,f.edgepaths[O]=z.concat(h,P));break}X||(f.edgepaths[C]=h.concat(P))}for(C=0;C<f.edgepaths.length&&!Z;C++)s((P=f.edgepaths[C])[P.length-1],h[0],i,n)&&(h.shift(),f.edgepaths[C]=P.concat(h),Z=!0);Z||f.edgepaths.push(h)}}function b(f,o,t){var i=o[0]+Math.max(t[0],0),n=o[1]+Math.max(t[1],0),r=f.z[n][i],a=f.xaxis,l=f.yaxis;if(t[1]){var u=(f.level-r)/(f.z[n][i+1]-r),h=(u!==1?(1-u)*a.c2l(f.x[i]):0)+(u!==0?u*a.c2l(f.x[i+1]):0);return[a.c2p(a.l2c(h),!0),l.c2p(f.y[n],!0),i+u,n]}var c=(f.level-r)/(f.z[n+1][i]-r),x=(c!==1?(1-c)*l.c2l(f.y[n]):0)+(c!==0?c*l.c2l(f.y[n+1]):0);return[a.c2p(f.x[i],!0),l.c2p(l.l2c(x),!0),i,n+c]}ee.exports=function(f,o,t){var i,n,r,a;for(o=o||.01,t=t||.01,n=0;n<f.length;n++){for(r=f[n],a=0;a<r.starts.length;a++)T(r,r.starts[a],"edge",o,t);for(i=0;Object.keys(r.crossings).length&&i<1e4;)i++,T(r,Object.keys(r.crossings)[0].split(",").map(Number),void 0,o,t);i===1e4&&M.log("Infinite loop in contour?")}}},38200:function(ee,R,e){var M=e(76308),k=e(55512);ee.exports=function(s,T,b,f,o){o||(o={}),o.isContour=!0;var t=k(s,T,b,f,o);return t&&t.forEach(function(i){var n=i.trace;n.contours.type==="constraint"&&(n.fillcolor&&M.opacity(n.fillcolor)?i.color=M.addOpacity(n.fillcolor,1):n.contours.showlines&&M.opacity(n.line.color)&&(i.color=M.addOpacity(n.line.color,1)))}),t}},66240:function(ee,R,e){ee.exports={attributes:e(67104),supplyDefaults:e(57004),calc:e(20688),plot:e(23676).plot,style:e(52440),colorbar:e(55296),hoverPoints:e(38200),moduleType:"trace",name:"contour",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},17428:function(ee,R,e){var M=e(3400);ee.exports=function(k,s,T,b){if(b||(b={}),k("contours.showlabels")){var f=s.font;M.coerceFont(k,"contours.labelfont",f,{overrideDflt:{color:T}}),k("contours.labelformat")}b.hasHover!==!1&&k("zhoverformat")}},41076:function(ee,R,e){var M=e(33428),k=e(8932),s=e(46960);ee.exports=function(T){var b=T.contours,f=b.start,o=s(b),t=b.size||1,i=Math.floor((o-f)/t)+1,n=b.coloring==="lines"?0:1,r=k.extractOpts(T);isFinite(t)||(t=1,i=1);var a,l,u=r.reversescale?k.flipScale(r.colorscale):r.colorscale,h=u.length,c=new Array(h),x=new Array(h),p=r.min,v=r.max;if(b.coloring==="heatmap"){for(l=0;l<h;l++)a=u[l],c[l]=a[0]*(v-p)+p,x[l]=a[1];var g=M.extent([p,v,b.start,b.start+t*(i-1)]),y=g[p<v?0:1],m=g[p<v?1:0];y!==p&&(c.splice(0,0,y),x.splice(0,0,x[0])),m!==v&&(c.push(m),x.push(x[x.length-1]))}else{var _=T._input&&typeof T._input.zmin=="number"&&typeof T._input.zmax=="number";for(_&&(f<=p||o>=v)&&(f<=p&&(f=p),o>=v&&(o=v),i=Math.floor((o-f)/t)+1,n=0),l=0;l<h;l++)a=u[l],c[l]=(a[0]*(i+n-1)-n/2)*t+f,x[l]=a[1];(_||T.autocontour)&&(c[0]>p&&(c.unshift(p),x.unshift(x[0])),c[c.length-1]<v&&(c.push(v),x.push(x[x.length-1])))}return k.makeColorScaleFunc({domain:c,range:x},{noNumericCheck:!0})}},72424:function(ee,R,e){var M=e(93252);function k(s,T){var b=(T[0][0]>s?0:1)+(T[0][1]>s?0:2)+(T[1][1]>s?0:4)+(T[1][0]>s?0:8);return b===5||b===10?s>(T[0][0]+T[0][1]+T[1][0]+T[1][1])/4?b===5?713:1114:b===5?104:208:b===15?0:b}ee.exports=function(s){var T,b,f,o,t,i,n,r,a,l=s[0].z,u=l.length,h=l[0].length,c=u===2||h===2;for(b=0;b<u-1;b++)for(o=[],b===0&&(o=o.concat(M.BOTTOMSTART)),b===u-2&&(o=o.concat(M.TOPSTART)),T=0;T<h-1;T++)for(f=o.slice(),T===0&&(f=f.concat(M.LEFTSTART)),T===h-2&&(f=f.concat(M.RIGHTSTART)),t=T+","+b,i=[[l[b][T],l[b][T+1]],[l[b+1][T],l[b+1][T+1]]],a=0;a<s.length;a++)(n=k((r=s[a]).level,i))&&(r.crossings[t]=n,f.indexOf(n)!==-1&&(r.starts.push([T,b]),c&&f.indexOf(n,f.indexOf(n)+1)!==-1&&r.starts.push([T,b])))}},23676:function(ee,R,e){var M=e(33428),k=e(3400),s=e(43616),T=e(8932),b=e(72736),f=e(54460),o=e(78344),t=e(41420),i=e(72424),n=e(88748),r=e(61512),a=e(82172),l=e(56008),u=e(93252),h=u.LABELOPTIMIZER;function c(v,g){var y,m,_,d,S,w,E,C="",O=0,P=v.edgepaths.map(function(F,U){return U}),z=!0;function j(F){return Math.abs(F[1]-g[2][1])<.01}function I(F){return Math.abs(F[0]-g[0][0])<.01}function N(F){return Math.abs(F[0]-g[2][0])<.01}for(;P.length;){for(w=s.smoothopen(v.edgepaths[O],v.smoothing),C+=z?w:w.replace(/^M/,"L"),P.splice(P.indexOf(O),1),y=v.edgepaths[O][v.edgepaths[O].length-1],d=-1,_=0;_<4;_++){if(!y){k.log("Missing end?",O,v);break}for(E=y,Math.abs(E[1]-g[0][1])<.01&&!N(y)?m=g[1]:I(y)?m=g[0]:j(y)?m=g[3]:N(y)&&(m=g[2]),S=0;S<v.edgepaths.length;S++){var W=v.edgepaths[S][0];Math.abs(y[0]-m[0])<.01?Math.abs(y[0]-W[0])<.01&&(W[1]-y[1])*(m[1]-W[1])>=0&&(m=W,d=S):Math.abs(y[1]-m[1])<.01?Math.abs(y[1]-W[1])<.01&&(W[0]-y[0])*(m[0]-W[0])>=0&&(m=W,d=S):k.log("endpt to newendpt is not vert. or horz.",y,m,W)}if(y=m,d>=0)break;C+="L"+m}if(d===v.edgepaths.length){k.log("unclosed perimeter path");break}O=d,(z=P.indexOf(O)===-1)&&(O=P[0],C+="Z")}for(O=0;O<v.paths.length;O++)C+=s.smoothclosed(v.paths[O],v.smoothing);return C}function x(v,g,y,m){var _=g.width/2,d=g.height/2,S=v.x,w=v.y,E=v.theta,C=Math.cos(E)*_,O=Math.sin(E)*_,P=(S>m.center?m.right-S:S-m.left)/(C+Math.abs(Math.sin(E)*d)),z=(w>m.middle?m.bottom-w:w-m.top)/(Math.abs(O)+Math.cos(E)*d);if(P<1||z<1)return 1/0;var j=h.EDGECOST*(1/(P-1)+1/(z-1));j+=h.ANGLECOST*E*E;for(var I=S-C,N=w-O,W=S+C,F=w+O,U=0;U<y.length;U++){var H=y[U],ne=Math.cos(H.theta)*H.width/2,$=Math.sin(H.theta)*H.width/2,K=2*k.segmentDistance(I,N,W,F,H.x-ne,H.y-$,H.x+ne,H.y+$)/(g.height+H.height),Q=H.level===g.level,Z=Q?h.SAMELEVELDISTANCE:1;if(K<=Z)return 1/0;j+=h.NEIGHBORCOST*(Q?h.SAMELEVELFACTOR:1)/(K-Z)}return j}function p(v){var g,y,m=v.trace._emptypoints,_=[],d=v.z.length,S=v.z[0].length,w=[];for(g=0;g<S;g++)w.push(1);for(g=0;g<d;g++)_.push(w.slice());for(g=0;g<m.length;g++)_[(y=m[g])[0]][y[1]]=0;return v.zmask=_,_}R.plot=function(v,g,y,m){var _=g.xaxis,d=g.yaxis;k.makeTraceGroups(m,y,"contour").each(function(S){var w=M.select(this),E=S[0],C=E.trace,O=E.x,P=E.y,z=C.contours,j=r(z,g,E),I=k.ensureSingle(w,"g","heatmapcoloring"),N=[];z.coloring==="heatmap"&&(N=[S]),t(v,g,N,I),i(j),n(j);var W=_.c2p(O[0],!0),F=_.c2p(O[O.length-1],!0),U=d.c2p(P[0],!0),H=d.c2p(P[P.length-1],!0),ne=[[W,H],[F,H],[F,U],[W,U]],$=j;z.type==="constraint"&&($=a(j,z._operation)),function(K,Q,Z){var X=k.ensureSingle(K,"g","contourbg").selectAll("path").data(Z.coloring==="fill"?[0]:[]);X.enter().append("path"),X.exit().remove(),X.attr("d","M"+Q.join("L")+"Z").style("stroke","none")}(w,ne,z),function(K,Q,Z,X){var te=X.coloring==="fill"||X.type==="constraint"&&X._operation!=="=",ae="M"+Z.join("L")+"Z";te&&l(Q,X);var se=k.ensureSingle(K,"g","contourfill").selectAll("path").data(te?Q:[]);se.enter().append("path"),se.exit().remove(),se.each(function(ce){var fe=(ce.prefixBoundary?ae:"")+c(ce,Z);fe?M.select(this).attr("d",fe).style("stroke","none"):M.select(this).remove()})}(w,$,ne,z),function(K,Q,Z,X,te){var ae=Z._context.staticPlot,se=k.ensureSingle(K,"g","contourlines"),ce=te.showlines!==!1,fe=te.showlabels,pe=ce&&fe,ge=R.createLines(se,ce||fe,Q,ae),me=R.createLineClip(se,pe,Z,X.trace.uid),be=K.selectAll("g.contourlabels").data(fe?[0]:[]);if(be.exit().remove(),be.enter().append("g").classed("contourlabels",!0),fe){var ke=[],ze=[];k.clearLocationCache();var ve=R.labelFormatter(Z,X),oe=s.tester.append("text").attr("data-notex",1).call(s.font,te.labelfont),ie=Q[0].xaxis,he=Q[0].yaxis,Se=ie._length,ye=he._length,we=ie.range,Me=he.range,Oe=k.aggNums(Math.min,null,X.x),Ie=k.aggNums(Math.max,null,X.x),de=k.aggNums(Math.min,null,X.y),_e=k.aggNums(Math.max,null,X.y),Ae=Math.max(ie.c2p(Oe,!0),0),Pe=Math.min(ie.c2p(Ie,!0),Se),Ee=Math.max(he.c2p(_e,!0),0),Fe=Math.min(he.c2p(de,!0),ye),Ve={};we[0]<we[1]?(Ve.left=Ae,Ve.right=Pe):(Ve.left=Pe,Ve.right=Ae),Me[0]<Me[1]?(Ve.top=Ee,Ve.bottom=Fe):(Ve.top=Fe,Ve.bottom=Ee),Ve.middle=(Ve.top+Ve.bottom)/2,Ve.center=(Ve.left+Ve.right)/2,ke.push([[Ve.left,Ve.top],[Ve.right,Ve.top],[Ve.right,Ve.bottom],[Ve.left,Ve.bottom]]);var Ye=Math.sqrt(Se*Se+ye*ye),tt=u.LABELDISTANCE*Ye/Math.max(1,Q.length/u.LABELINCREASE);ge.each(function(nt){var ht=R.calcTextOpts(nt.level,ve,oe,Z);M.select(this).selectAll("path").each(function(){var vt=k.getVisibleSegment(this,Ve,ht.height/2);if(vt&&!(vt.len<(ht.width+ht.height)*u.LABELMIN))for(var pt=Math.min(Math.ceil(vt.len/tt),u.LABELMAX),Qe=0;Qe<pt;Qe++){var Ke=R.findBestTextLocation(this,vt,ht,ze,Ve);if(!Ke)break;R.addLabelData(Ke,ht,ze,ke)}})}),oe.remove(),R.drawLabels(be,ze,Z,me,pe?ke:null)}fe&&!ce&&ge.remove()}(w,j,v,E,z),function(K,Q,Z,X,te){var ae=X.trace,se=Z._fullLayout._clips,ce="clip"+ae.uid,fe=se.selectAll("#"+ce).data(ae.connectgaps?[]:[0]);if(fe.enter().append("clipPath").classed("contourclip",!0).attr("id",ce),fe.exit().remove(),ae.connectgaps===!1){var pe={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:Q.xaxis,yaxis:Q.yaxis,x:X.x,y:X.y,z:p(X),smoothing:0};i([pe]),n([pe]),l([pe],{type:"levels"}),k.ensureSingle(fe,"path","").attr("d",(pe.prefixBoundary?"M"+te.join("L")+"Z":"")+c(pe,te))}else ce=null;s.setClipUrl(K,ce,Z)}(w,g,v,E,ne)})},R.createLines=function(v,g,y,m){var _=y[0].smoothing,d=v.selectAll("g.contourlevel").data(g?y:[]);if(d.exit().remove(),d.enter().append("g").classed("contourlevel",!0),g){var S=d.selectAll("path.openline").data(function(E){return E.pedgepaths||E.edgepaths});S.exit().remove(),S.enter().append("path").classed("openline",!0),S.attr("d",function(E){return s.smoothopen(E,_)}).style("stroke-miterlimit",1).style("vector-effect",m?"none":"non-scaling-stroke");var w=d.selectAll("path.closedline").data(function(E){return E.ppaths||E.paths});w.exit().remove(),w.enter().append("path").classed("closedline",!0),w.attr("d",function(E){return s.smoothclosed(E,_)}).style("stroke-miterlimit",1).style("vector-effect",m?"none":"non-scaling-stroke")}return d},R.createLineClip=function(v,g,y,m){var _=g?"clipline"+m:null,d=y._fullLayout._clips.selectAll("#"+_).data(g?[0]:[]);return d.exit().remove(),d.enter().append("clipPath").classed("contourlineclip",!0).attr("id",_),s.setClipUrl(v,_,y),d},R.labelFormatter=function(v,g){var y=v._fullLayout,m=g.trace,_=m.contours,d={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(_.labelformat)d.tickformat=_.labelformat,o(d,y);else{var S=T.extractOpts(m);if(S&&S.colorbar&&S.colorbar._axis)d=S.colorbar._axis;else{if(_.type==="constraint"){var w=_.value;k.isArrayOrTypedArray(w)?d.range=[w[0],w[w.length-1]]:d.range=[w,w]}else d.range=[_.start,_.end],d.nticks=(_.end-_.start)/_.size;d.range[0]===d.range[1]&&(d.range[1]+=d.range[0]||1),d.nticks||(d.nticks=1e3),o(d,y),f.prepTicks(d),d._tmin=null,d._tmax=null}}return function(E){return f.tickText(d,E).text}},R.calcTextOpts=function(v,g,y,m){var _=g(v);y.text(_).call(b.convertToTspans,m);var d=y.node(),S=s.bBox(d,!0);return{text:_,width:S.width,height:S.height,fontSize:+d.style["font-size"].replace("px",""),level:v,dy:(S.top+S.bottom)/2}},R.findBestTextLocation=function(v,g,y,m,_){var d,S,w,E,C,O=y.width;g.isClosed?(S=g.len/h.INITIALSEARCHPOINTS,d=g.min+S/2,w=g.max):(S=(g.len-O)/(h.INITIALSEARCHPOINTS+1),d=g.min+S+O/2,w=g.max-(S+O)/2);for(var P=1/0,z=0;z<h.ITERATIONS;z++){for(var j=d;j<w;j+=S){var I=k.getTextLocation(v,g.total,j,O),N=x(I,y,m,_);N<P&&(P=N,C=I,E=j)}if(P>2*h.MAXCOST)break;z&&(S/=2),w=(d=E-S/2)+1.5*S}if(P<=h.MAXCOST)return C},R.addLabelData=function(v,g,y,m){var _=g.fontSize,d=g.width+_/3,S=Math.max(0,g.height-_/3),w=v.x,E=v.y,C=v.theta,O=Math.sin(C),P=Math.cos(C),z=function(I,N){return[w+I*P-N*O,E+I*O+N*P]},j=[z(-d/2,-S/2),z(-d/2,S/2),z(d/2,S/2),z(d/2,-S/2)];y.push({text:g.text,x:w,y:E,dy:g.dy,theta:C,level:g.level,width:d,height:S}),m.push(j)},R.drawLabels=function(v,g,y,m,_){var d=v.selectAll("text").data(g,function(E){return E.text+","+E.x+","+E.y+","+E.theta});if(d.exit().remove(),d.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(E){var C=E.x+Math.sin(E.theta)*E.dy,O=E.y-Math.cos(E.theta)*E.dy;M.select(this).text(E.text).attr({x:C,y:O,transform:"rotate("+180*E.theta/Math.PI+" "+C+" "+O+")"}).call(b.convertToTspans,y)}),_){for(var S="",w=0;w<_.length;w++)S+="M"+_[w].join("L")+"Z";k.ensureSingle(m,"path","").attr("d",S)}}},54444:function(ee,R,e){var M=e(54460),k=e(3400);function s(T,b,f){var o={type:"linear",range:[T,b]};return M.autoTicks(o,(b-T)/(f||15)),o}ee.exports=function(T,b){var f=T.contours;if(T.autocontour){var o=T.zmin,t=T.zmax;(T.zauto||o===void 0)&&(o=k.aggNums(Math.min,null,b)),(T.zauto||t===void 0)&&(t=k.aggNums(Math.max,null,b));var i=s(o,t,T.ncontours);f.size=i.dtick,f.start=M.tickFirst(i),i.range.reverse(),f.end=M.tickFirst(i),f.start===o&&(f.start+=f.size),f.end===t&&(f.end-=f.size),f.start>f.end&&(f.start=f.end=(f.start+f.end)/2),T._input.contours||(T._input.contours={}),k.extendFlat(T._input.contours,{start:f.start,end:f.end,size:f.size}),T._input.autocontour=!0}else if(f.type!=="constraint"){var n,r=f.start,a=f.end,l=T._input.contours;r>a&&(f.start=l.start=a,a=f.end=l.end=r,r=f.start),f.size>0||(n=r===a?1:s(r,a,T.ncontours).dtick,l.size=f.size=n)}}},52440:function(ee,R,e){var M=e(33428),k=e(43616),s=e(41648),T=e(41076);ee.exports=function(b){var f=M.select(b).selectAll("g.contour");f.style("opacity",function(o){return o[0].trace.opacity}),f.each(function(o){var t=M.select(this),i=o[0].trace,n=i.contours,r=i.line,a=n.size||1,l=n.start,u=n.type==="constraint",h=!u&&n.coloring==="lines",c=!u&&n.coloring==="fill",x=h||c?T(i):null;t.selectAll("g.contourlevel").each(function(g){M.select(this).selectAll("path").call(k.lineGroupStyle,r.width,h?x(g.level):r.color,r.dash)});var p=n.labelfont;if(t.selectAll("g.contourlabels text").each(function(g){k.font(M.select(this),{weight:p.weight,style:p.style,variant:p.variant,textcase:p.textcase,lineposition:p.lineposition,shadow:p.shadow,family:p.family,size:p.size,color:p.color||(h?x(g.level):r.color)})}),u)t.selectAll("g.contourfill path").style("fill",i.fillcolor);else if(c){var v;t.selectAll("g.contourfill path").style("fill",function(g){return v===void 0&&(v=g.level),x(g.level+.5*a)}),v===void 0&&(v=l),t.selectAll("g.contourbg path").style("fill",x(v-.5*a))}}),s(b)}},97680:function(ee,R,e){var M=e(27260),k=e(17428);ee.exports=function(s,T,b,f,o){var t,i=b("contours.coloring"),n="";i==="fill"&&(t=b("contours.showlines")),t!==!1&&(i!=="lines"&&(n=b("line.color","#000")),b("line.width",.5),b("line.dash")),i!=="none"&&(s.showlegend!==!0&&(T.showlegend=!1),T._dfltShowLegend=!1,M(s,T,f,b,{prefix:"",cLetter:"z"})),b("line.smoothing"),k(b,f,n,o)}},37960:function(ee,R,e){var M=e(83328),k=e(67104),s=e(49084),T=e(92880).extendFlat,b=k.contours;ee.exports=T({carpet:{valType:"string",editType:"calc"},z:M.z,a:M.x,a0:M.x0,da:M.dx,b:M.y,b0:M.y0,db:M.dy,text:M.text,hovertext:M.hovertext,transpose:M.transpose,atype:M.xtype,btype:M.ytype,fillcolor:k.fillcolor,autocontour:k.autocontour,ncontours:k.ncontours,contours:{type:b.type,start:b.start,end:b.end,size:b.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:b.showlines,showlabels:b.showlabels,labelfont:b.labelfont,labelformat:b.labelformat,operation:b.operation,value:b.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:k.line.color,width:k.line.width,dash:k.line.dash,smoothing:k.line.smoothing,editType:"plot"},zorder:k.zorder,transforms:void 0},s("",{cLetter:"z",autoColorDflt:!1}))},30572:function(ee,R,e){var M=e(47128),k=e(3400),s=e(2872),T=e(26136),b=e(70448),f=e(11240),o=e(35744),t=e(3252),i=e(50948),n=e(54444);ee.exports=function(r,a){var l=a._carpetTrace=i(r,a);if(l&&l.visible&&l.visible!=="legendonly"){if(!a.a||!a.b){var u=r.data[l.index],h=r.data[a.index];h.a||(h.a=u.a),h.b||(h.b=u.b),t(h,a,a._defaultColor,r._fullLayout)}var c=function(x,p){var v,g,y,m,_,d,S,w=p._carpetTrace,E=w.aaxis,C=w.baxis;E._minDtick=0,C._minDtick=0,k.isArray1D(p.z)&&s(p,E,C,"a","b",["z"]),v=p._a=p._a||p.a,m=p._b=p._b||p.b,v=v?E.makeCalcdata(p,"_a"):[],m=m?C.makeCalcdata(p,"_b"):[],g=p.a0||0,y=p.da||1,_=p.b0||0,d=p.db||1,S=p._z=T(p._z||p.z,p.transpose),p._emptypoints=f(S),b(S,p._emptypoints);var O=k.maxRowLength(S),P=p.xtype==="scaled"?"":v,z=o(p,P,g,y,O,E),j=p.ytype==="scaled"?"":m,I={a:z,b:o(p,j,_,d,S.length,C),z:S};return p.contours.type==="levels"&&p.contours.coloring!=="none"&&M(x,p,{vals:S,containerStr:"",cLetter:"z"}),[I]}(r,a);return n(a,a._z),c}}},3252:function(ee,R,e){var M=e(3400),k=e(51264),s=e(37960),T=e(95536),b=e(84952),f=e(97680);ee.exports=function(o,t,i,n){function r(a,l){return M.coerce(o,t,s,a,l)}if(r("carpet"),o.a&&o.b){if(!k(o,t,r,n,"a","b"))return void(t.visible=!1);r("text"),r("contours.type")==="constraint"?T(o,t,r,n,i,{hasHover:!1}):(b(o,t,r,function(a){return M.coerce2(o,t,s,a)}),f(o,t,r,n,{hasHover:!1}))}else t._defaultColor=i,t._length=null;r("zorder")}},40448:function(ee,R,e){ee.exports={attributes:e(37960),supplyDefaults:e(3252),colorbar:e(55296),calc:e(30572),plot:e(94440),style:e(52440),moduleType:"trace",name:"contourcarpet",basePlotModule:e(57952),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},94440:function(ee,R,e){var M=e(33428),k=e(87072),s=e(53416),T=e(43616),b=e(3400),f=e(72424),o=e(88748),t=e(23676),i=e(93252),n=e(82172),r=e(61512),a=e(56008),l=e(50948),u=e(77712);function h(p,v,g){var y=p.getPointAtLength(v),m=p.getPointAtLength(g),_=m.x-y.x,d=m.y-y.y,S=Math.sqrt(_*_+d*d);return[_/S,d/S]}function c(p){var v=Math.sqrt(p[0]*p[0]+p[1]*p[1]);return[p[0]/v,p[1]/v]}function x(p,v){var g=Math.abs(p[0]*v[0]+p[1]*v[1]);return Math.sqrt(1-g*g)/g}ee.exports=function(p,v,g,y){var m=v.xaxis,_=v.yaxis;b.makeTraceGroups(y,g,"contour").each(function(d){var S=M.select(this),w=d[0],E=w.trace,C=E._carpetTrace=l(p,E),O=p.calcdata[C.index][0];if(C.visible&&C.visible!=="legendonly"){var P=w.a,z=w.b,j=E.contours,I=r(j,v,w),N=j.type==="constraint",W=j._operation,F=N?W==="="?"lines":"fill":j.coloring,U=[[P[0],z[z.length-1]],[P[P.length-1],z[z.length-1]],[P[P.length-1],z[0]],[P[0],z[0]]];f(I);var H=1e-8*(P[P.length-1]-P[0]),ne=1e-8*(z[z.length-1]-z[0]);o(I,H,ne);var $,K,Q,Z,X=I;j.type==="constraint"&&(X=n(I,W)),function(ce,fe){var pe,ge,me,be,ke,ze,ve,oe,ie;for(pe=0;pe<ce.length;pe++){for(ke=(be=ce[pe]).pedgepaths=[],ze=be.ppaths=[],ge=0;ge<be.edgepaths.length;ge++){for(ie=be.edgepaths[ge],ve=[],me=0;me<ie.length;me++)ve[me]=fe(ie[me]);ke.push(ve)}for(ge=0;ge<be.paths.length;ge++){for(ie=be.paths[ge],oe=[],me=0;me<ie.length;me++)oe[me]=fe(ie[me]);ze.push(oe)}}}(I,se);var te=[];for(Z=O.clipsegments.length-1;Z>=0;Z--)$=O.clipsegments[Z],K=k([],$.x,m.c2p),Q=k([],$.y,_.c2p),K.reverse(),Q.reverse(),te.push(s(K,Q,$.bicubic));var ae="M"+te.join("L")+"Z";(function(ce,fe,pe,ge,me,be){var ke,ze,ve,oe,ie=b.ensureSingle(ce,"g","contourbg").selectAll("path").data(be!=="fill"||me?[]:[0]);ie.enter().append("path"),ie.exit().remove();var he=[];for(oe=0;oe<fe.length;oe++)ke=fe[oe],ze=k([],ke.x,pe.c2p),ve=k([],ke.y,ge.c2p),he.push(s(ze,ve,ke.bicubic));ie.attr("d","M"+he.join("L")+"Z").style("stroke","none")})(S,O.clipsegments,m,_,N,F),function(ce,fe,pe,ge,me,be,ke,ze,ve,oe,ie){var he=oe==="fill";he&&a(me,ce.contours);var Se=b.ensureSingle(fe,"g","contourfill").selectAll("path").data(he?me:[]);Se.enter().append("path"),Se.exit().remove(),Se.each(function(ye){var we=(ye.prefixBoundary?ie:"")+function(Me,Oe,Ie,de,_e,Ae,Pe,Ee){var Fe,Ve,Ye,tt,nt,ht,vt,pt="",Qe=Oe.edgepaths.map(function(it,dt){return dt}),Ke=!0,Mt=1e-4*Math.abs(Ie[0][0]-Ie[2][0]),Ot=1e-4*Math.abs(Ie[0][1]-Ie[2][1]);function Pt(it){return Math.abs(it[1]-Ie[0][1])<Ot}function St(it){return Math.abs(it[1]-Ie[2][1])<Ot}function He(it){return Math.abs(it[0]-Ie[0][0])<Mt}function We(it){return Math.abs(it[0]-Ie[2][0])<Mt}function Be(it,dt){var gt,je,Re,rt,ct="";for(Pt(it)&&!We(it)||St(it)&&!He(it)?(rt=_e.aaxis,Re=u(_e,Ae,[it[0],dt[0]],.5*(it[1]+dt[1]))):(rt=_e.baxis,Re=u(_e,Ae,.5*(it[0]+dt[0]),[it[1],dt[1]])),gt=1;gt<Re.length;gt++)for(ct+=rt.smoothing?"C":"L",je=0;je<Re[gt].length;je++){var ut=Re[gt][je];ct+=[Pe.c2p(ut[0]),Ee.c2p(ut[1])]+" "}return ct}for(Fe=0,Ve=null;Qe.length;){var Ge=Oe.edgepaths[Fe][0];for(Ve&&(pt+=Be(Ve,Ge)),vt=T.smoothopen(Oe.edgepaths[Fe].map(de),Oe.smoothing),pt+=Ke?vt:vt.replace(/^M/,"L"),Qe.splice(Qe.indexOf(Fe),1),Ve=Oe.edgepaths[Fe][Oe.edgepaths[Fe].length-1],nt=-1,tt=0;tt<4;tt++){if(!Ve){b.log("Missing end?",Fe,Oe);break}for(Pt(Ve)&&!We(Ve)?Ye=Ie[1]:He(Ve)?Ye=Ie[0]:St(Ve)?Ye=Ie[3]:We(Ve)&&(Ye=Ie[2]),ht=0;ht<Oe.edgepaths.length;ht++){var ot=Oe.edgepaths[ht][0];Math.abs(Ve[0]-Ye[0])<Mt?Math.abs(Ve[0]-ot[0])<Mt&&(ot[1]-Ve[1])*(Ye[1]-ot[1])>=0&&(Ye=ot,nt=ht):Math.abs(Ve[1]-Ye[1])<Ot?Math.abs(Ve[1]-ot[1])<Ot&&(ot[0]-Ve[0])*(Ye[0]-ot[0])>=0&&(Ye=ot,nt=ht):b.log("endpt to newendpt is not vert. or horz.",Ve,Ye,ot)}if(nt>=0)break;pt+=Be(Ve,Ye),Ve=Ye}if(nt===Oe.edgepaths.length){b.log("unclosed perimeter path");break}Fe=nt,(Ke=Qe.indexOf(Fe)===-1)&&(Fe=Qe[0],pt+=Be(Ve,Ye)+"Z",Ve=null)}for(Fe=0;Fe<Oe.paths.length;Fe++)pt+=T.smoothclosed(Oe.paths[Fe].map(de),Oe.smoothing);return pt}(0,ye,be,ke,ze,ve,pe,ge);we?M.select(this).attr("d",we).style("stroke","none"):M.select(this).remove()})}(E,S,m,_,X,U,se,C,O,F,ae),function(ce,fe,pe,ge,me,be,ke){var ze=pe._context.staticPlot,ve=b.ensureSingle(ce,"g","contourlines"),oe=me.showlines!==!1,ie=me.showlabels,he=oe&&ie,Se=t.createLines(ve,oe||ie,fe,ze),ye=t.createLineClip(ve,he,pe,ge.trace.uid),we=ce.selectAll("g.contourlabels").data(ie?[0]:[]);if(we.exit().remove(),we.enter().append("g").classed("contourlabels",!0),ie){var Me=be.xaxis,Oe=be.yaxis,Ie=Me._length,de=Oe._length,_e=[[[0,0],[Ie,0],[Ie,de],[0,de]]],Ae=[];b.clearLocationCache();var Pe=t.labelFormatter(pe,ge),Ee=T.tester.append("text").attr("data-notex",1).call(T.font,me.labelfont),Fe={left:0,right:Ie,center:Ie/2,top:0,bottom:de,middle:de/2},Ve=Math.sqrt(Ie*Ie+de*de),Ye=i.LABELDISTANCE*Ve/Math.max(1,fe.length/i.LABELINCREASE);Se.each(function(tt){var nt=t.calcTextOpts(tt.level,Pe,Ee,pe);M.select(this).selectAll("path").each(function(ht){var vt=this,pt=b.getVisibleSegment(vt,Fe,nt.height/2);if(pt&&(function(Ot,Pt,St,He,We,Be){for(var Ge,ot=0;ot<St.pedgepaths.length;ot++)Pt===St.pedgepaths[ot]&&(Ge=St.edgepaths[ot]);if(Ge){var it=We.a[0],dt=We.a[We.a.length-1],gt=We.b[0],je=We.b[We.b.length-1],Re=h(Ot,0,1),rt=h(Ot,He.total,He.total-1),ct=et(Ge[0],Re),ut=He.total-et(Ge[Ge.length-1],rt);He.min<ct&&(He.min=ct),He.max>ut&&(He.max=ut),He.len=He.max-He.min}function et(xt,mt){var Tt,yt=0,bt=.1;return(Math.abs(xt[0]-it)<bt||Math.abs(xt[0]-dt)<bt)&&(Tt=c(We.dxydb_rough(xt[0],xt[1],bt)),yt=Math.max(yt,Be*x(mt,Tt)/2)),(Math.abs(xt[1]-gt)<bt||Math.abs(xt[1]-je)<bt)&&(Tt=c(We.dxyda_rough(xt[0],xt[1],bt)),yt=Math.max(yt,Be*x(mt,Tt)/2)),yt}}(vt,ht,tt,pt,ke,nt.height),!(pt.len<(nt.width+nt.height)*i.LABELMIN)))for(var Qe=Math.min(Math.ceil(pt.len/Ye),i.LABELMAX),Ke=0;Ke<Qe;Ke++){var Mt=t.findBestTextLocation(vt,pt,nt,Ae,Fe);if(!Mt)break;t.addLabelData(Mt,nt,Ae,_e)}})}),Ee.remove(),t.drawLabels(we,Ae,pe,ye,he?_e:null)}ie&&!oe&&Se.remove()}(S,I,p,w,j,v,C),T.setClipUrl(S,C._clipPathId,p)}function se(ce){var fe=C.ab2xy(ce[0],ce[1],!0);return[m.c2p(fe[0]),_.c2p(fe[1])]}})}},33928:function(ee,R,e){var M=e(49084),k=e(21776).Ks,s=e(45464),T=e(31512),b=e(92880).extendFlat;ee.exports=b({lon:T.lon,lat:T.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:T.text,hovertext:T.hovertext,hoverinfo:b({},s.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:k(),showlegend:b({},s.showlegend,{dflt:!1})},M("",{cLetter:"z",editTypeOverride:"calc"}))},90876:function(ee,R,e){var M=e(38248),k=e(3400).isArrayOrTypedArray,s=e(39032).BADNUM,T=e(47128),b=e(3400)._;ee.exports=function(f,o){for(var t=o._length,i=new Array(t),n=o.z,r=k(n)&&n.length,a=0;a<t;a++){var l=i[a]={},u=o.lon[a],h=o.lat[a];if(l.lonlat=M(u)&&M(h)?[+u,+h]:[s,s],r){var c=n[a];l.z=M(c)?c:s}}return T(f,o,{vals:r?n:[0,1],containerStr:"",cLetter:"z"}),t&&(i[0].t={labels:{lat:b(f,"lat:")+" ",lon:b(f,"lon:")+" "}}),i}},4629:function(ee,R,e){var M=e(38248),k=e(3400),s=e(76308),T=e(8932),b=e(39032).BADNUM,f=e(44808).makeBlank;ee.exports=function(o){var t=o[0].trace,i=t.visible===!0&&t._length!==0,n=t._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:f()};if(!i)return n;var r,a=[],l=t.z,u=t.radius,h=k.isArrayOrTypedArray(l)&&l.length,c=k.isArrayOrTypedArray(u);for(r=0;r<o.length;r++){var x=o[r],p=x.lonlat;if(p[0]!==b){var v={};if(h){var g=x.z;v.z=g!==b?g:0}c&&(v.r=M(u[r])&&u[r]>0?+u[r]:0),a.push({type:"Feature",geometry:{type:"Point",coordinates:p},properties:v})}}var y=T.extractOpts(t),m=y.reversescale?T.flipScale(y.colorscale):y.colorscale,_=m[0][1],d=["interpolate",["linear"],["heatmap-density"],0,s.opacity(_)<1?_:s.addOpacity(_,0)];for(r=1;r<m.length;r++)d.push(m[r][0],m[r][1]);var S=["interpolate",["linear"],["get","z"],y.min,0,y.max,1];return k.extendFlat(n.heatmap.paint,{"heatmap-weight":h?S:1/(y.max-y.min),"heatmap-color":d,"heatmap-radius":c?{type:"identity",property:"r"}:t.radius,"heatmap-opacity":t.opacity}),n.geojson={type:"FeatureCollection",features:a},n.heatmap.layout.visibility="visible",n}},97664:function(ee,R,e){var M=e(3400),k=e(27260),s=e(33928);ee.exports=function(T,b,f,o){function t(a,l){return M.coerce(T,b,s,a,l)}var i=t("lon")||[],n=t("lat")||[],r=Math.min(i.length,n.length);r?(b._length=r,t("z"),t("radius"),t("below"),t("text"),t("hovertext"),t("hovertemplate"),k(T,b,o,t,{prefix:"",cLetter:"z"})):b.visible=!1}},96176:function(ee){ee.exports=function(R,e){return R.lon=e.lon,R.lat=e.lat,R.z=e.z,R}},25336:function(ee,R,e){var M=e(54460),k=e(63312).hoverPoints,s=e(63312).getExtraText;ee.exports=function(T,b,f){var o=k(T,b,f);if(o){var t=o[0],i=t.cd,n=i[0].trace,r=i[t.index];if(delete t.color,"z"in r){var a=t.subplot.mockAxis;t.z=r.z,t.zLabel=M.tickText(a,a.c2l(r.z),"hover").text}return t.extraText=s(n,r,i[0].t.labels),[t]}}},15088:function(ee,R,e){ee.exports={attributes:e(33928),supplyDefaults:e(97664),colorbar:e(96288),formatLabels:e(11960),calc:e(90876),plot:e(35256),hoverPoints:e(25336),eventData:e(96176),getBelow:function(M,k){for(var s=k.getMapLayers(),T=0;T<s.length;T++){var b=s[T],f=b.id;if(b.type==="symbol"&&typeof f=="string"&&f.indexOf("plotly-")===-1)return f}},moduleType:"trace",name:"densitymapbox",basePlotModule:e(33688),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},35256:function(ee,R,e){var M=e(4629),k=e(47552).traceLayerPrefix;function s(b,f){this.type="densitymapbox",this.subplot=b,this.uid=f,this.sourceId="source-"+f,this.layerList=[["heatmap",k+f+"-heatmap"]],this.below=null}var T=s.prototype;T.update=function(b){var f=this.subplot,o=this.layerList,t=M(b),i=f.belowLookup["trace-"+this.uid];f.map.getSource(this.sourceId).setData(t.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(t,i),this.below=i);for(var n=0;n<o.length;n++){var r=o[n],a=r[0],l=r[1],u=t[a];f.setOptions(l,"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&f.setOptions(l,"setPaintProperty",u.paint)}},T._addLayers=function(b,f){for(var o=this.subplot,t=this.layerList,i=this.sourceId,n=0;n<t.length;n++){var r=t[n],a=r[0],l=b[a];o.addLayer({type:a,id:r[1],source:i,layout:l.layout,paint:l.paint},f)}},T._removeLayers=function(){for(var b=this.subplot.map,f=this.layerList,o=f.length-1;o>=0;o--)b.removeLayer(f[o][1])},T.dispose=function(){var b=this.subplot.map;this._removeLayers(),b.removeSource(this.sourceId)},ee.exports=function(b,f){var o=f[0].trace,t=new s(b,o.uid),i=t.sourceId,n=M(f),r=t.below=b.belowLookup["trace-"+o.uid];return b.map.addSource(i,{type:"geojson",data:n.geojson}),t._addLayers(n,r),t}},74248:function(ee,R,e){var M=e(3400);ee.exports=function(k,s){for(var T=0;T<k.length;T++)k[T].i=T;M.mergeArray(s.text,k,"tx"),M.mergeArray(s.hovertext,k,"htx");var b=s.marker;if(b){M.mergeArray(b.opacity,k,"mo"),M.mergeArray(b.color,k,"mc");var f=b.line;f&&(M.mergeArray(f.color,k,"mlc"),M.mergeArrayCastPositive(f.width,k,"mlw"))}}},20088:function(ee,R,e){var M,k=e(20832),s=e(52904).line,T=e(45464),b=e(29736).axisHoverFormat,f=e(21776).Ks,o=e(21776).Gw,t=e(74732),i=e(92880).extendFlat,n=e(76308);ee.exports={x:k.x,x0:k.x0,dx:k.dx,y:k.y,y0:k.y0,dy:k.dy,xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),hovertext:k.hovertext,hovertemplate:f({},{keys:t.eventDataKeys}),hoverinfo:i({},T.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:o({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),text:k.text,textposition:k.textposition,insidetextanchor:i({},k.insidetextanchor,{dflt:"middle"}),textangle:i({},k.textangle,{dflt:0}),textfont:k.textfont,insidetextfont:k.insidetextfont,outsidetextfont:k.outsidetextfont,constraintext:k.constraintext,cliponaxis:k.cliponaxis,orientation:i({},k.orientation,{}),offset:i({},k.offset,{arrayOk:!1}),width:i({},k.width,{arrayOk:!1}),marker:(M=i({},k.marker),delete M.pattern,delete M.cornerradius,M),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:i({},s.color,{dflt:n.defaultLine}),width:i({},s.width,{dflt:0,editType:"plot"}),dash:s.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:k.offsetgroup,alignmentgroup:k.alignmentgroup,zorder:k.zorder}},23096:function(ee,R,e){var M=e(54460),k=e(1220),s=e(74248),T=e(4500),b=e(39032).BADNUM;function f(o){return o===b?0:o}ee.exports=function(o,t){var i,n,r,a,l,u,h,c,x=M.getFromId(o,t.xaxis||"x"),p=M.getFromId(o,t.yaxis||"y");t.orientation==="h"?(i=x.makeCalcdata(t,"x"),r=p.makeCalcdata(t,"y"),a=k(t,p,"y",r),l=!!t.yperiodalignment,u="y"):(i=p.makeCalcdata(t,"y"),r=x.makeCalcdata(t,"x"),a=k(t,x,"x",r),l=!!t.xperiodalignment,u="x"),n=a.vals;var v,g=Math.min(n.length,i.length),y=new Array(g);for(t._base=[],h=0;h<g;h++){i[h]<0&&(i[h]=b);var m=!1;i[h]!==b&&h+1<g&&i[h+1]!==b&&(m=!0),c=y[h]={p:n[h],s:i[h],cNext:m},t._base[h]=-.5*c.s,l&&(y[h].orig_p=r[h],y[h][u+"End"]=a.ends[h],y[h][u+"Start"]=a.starts[h]),t.ids&&(c.id=String(t.ids[h])),h===0&&(y[0].vTotal=0),y[0].vTotal+=f(c.s),c.begR=f(c.s)/f(y[0].s)}for(h=0;h<g;h++)(c=y[h]).s!==b&&(c.sumR=c.s/y[0].vTotal,c.difR=v!==void 0?c.s/v:1,v=c.s);return s(y,t),T(y,t),y}},74732:function(ee){ee.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},4804:function(ee,R,e){var M=e(96376).setGroupPositions;ee.exports=function(k,s){var T,b,f=k._fullLayout,o=k._fullData,t=k.calcdata,i=s.xaxis,n=s.yaxis,r=[],a=[],l=[];for(b=0;b<o.length;b++){var u=o[b],h=u.orientation==="h";u.visible===!0&&u.xaxis===i._id&&u.yaxis===n._id&&u.type==="funnel"&&(T=t[b],h?l.push(T):a.push(T),r.push(T))}var c={mode:f.funnelmode,norm:f.funnelnorm,gap:f.funnelgap,groupgap:f.funnelgroupgap};for(M(k,i,n,a,c),M(k,n,i,l,c),b=0;b<r.length;b++){T=r[b];for(var x=0;x<T.length;x++)x+1<T.length&&(T[x].nextP0=T[x+1].p0,T[x].nextS0=T[x+1].s0,T[x].nextP1=T[x+1].p1,T[x].nextS1=T[x+1].s1)}}},45432:function(ee,R,e){var M=e(3400),k=e(20011),s=e(31508).handleText,T=e(43980),b=e(31147),f=e(20088),o=e(76308);ee.exports={supplyDefaults:function(t,i,n,r){function a(c,x){return M.coerce(t,i,f,c,x)}if(T(t,i,r,a)){b(t,i,r,a),a("xhoverformat"),a("yhoverformat"),a("orientation",i.y&&!i.x?"v":"h"),a("offset"),a("width");var l=a("text");a("hovertext"),a("hovertemplate");var u=a("textposition");s(t,i,r,a,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),i.textposition==="none"||i.texttemplate||a("textinfo",M.isArrayOrTypedArray(l)?"text+value":"value");var h=a("marker.color",n);a("marker.line.color",o.defaultLine),a("marker.line.width"),a("connector.visible")&&(a("connector.fillcolor",function(c){var x=M.isArrayOrTypedArray(c)?"#000":c;return o.addOpacity(x,.5*o.opacity(x))}(h)),a("connector.line.width")&&(a("connector.line.color"),a("connector.line.dash"))),a("zorder")}else i.visible=!1},crossTraceDefaults:function(t,i){var n,r;function a(u){return M.coerce(r._input,r,f,u)}if(i.funnelmode==="group")for(var l=0;l<t.length;l++)n=(r=t[l])._input,k(n,r,i,a)}}},34580:function(ee){ee.exports=function(R,e){return R.x="xVal"in e?e.xVal:e.x,R.y="yVal"in e?e.yVal:e.y,"percentInitial"in e&&(R.percentInitial=e.percentInitial),"percentPrevious"in e&&(R.percentPrevious=e.percentPrevious),"percentTotal"in e&&(R.percentTotal=e.percentTotal),e.xa&&(R.xaxis=e.xa),e.ya&&(R.yaxis=e.ya),R}},31488:function(ee,R,e){var M=e(76308).opacity,k=e(63400).hoverOnBars,s=e(3400).formatPercent;ee.exports=function(T,b,f,o,t){var i=k(T,b,f,o,t);if(i){var n=i.cd,r=n[0].trace,a=r.orientation==="h",l=n[i.index];i[(a?"x":"y")+"LabelVal"]=l.s,i.percentInitial=l.begR,i.percentInitialLabel=s(l.begR,1),i.percentPrevious=l.difR,i.percentPreviousLabel=s(l.difR,1),i.percentTotal=l.sumR,i.percentTotalLabel=s(l.sumR,1);var u=l.hi||r.hoverinfo,h=[];if(u&&u!=="none"&&u!=="skip"){var c=u==="all",x=u.split("+"),p=function(v){return c||x.indexOf(v)!==-1};p("percent initial")&&h.push(i.percentInitialLabel+" of initial"),p("percent previous")&&h.push(i.percentPreviousLabel+" of previous"),p("percent total")&&h.push(i.percentTotalLabel+" of total")}return i.extraText=h.join("<br>"),i.color=function(v,g){var y=v.marker,m=g.mc||y.color,_=g.mlc||y.line.color,d=g.mlw||y.line.width;return M(m)?m:M(_)&&d?_:void 0}(r,l),[i]}}},94704:function(ee,R,e){ee.exports={attributes:e(20088),layoutAttributes:e(7076),supplyDefaults:e(45432).supplyDefaults,crossTraceDefaults:e(45432).crossTraceDefaults,supplyLayoutDefaults:e(11631),calc:e(23096),crossTraceCalc:e(4804),plot:e(42200),style:e(44544).style,hoverPoints:e(31488),eventData:e(34580),selectPoints:e(45784),moduleType:"trace",name:"funnel",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},7076:function(ee){ee.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},11631:function(ee,R,e){var M=e(3400),k=e(7076);ee.exports=function(s,T,b){var f=!1;function o(n,r){return M.coerce(s,T,k,n,r)}for(var t=0;t<b.length;t++){var i=b[t];if(i.visible&&i.type==="funnel"){f=!0;break}}f&&(o("funnelmode"),o("funnelgap",.2),o("funnelgroupgap"))}},42200:function(ee,R,e){var M=e(33428),k=e(3400),s=e(43616),T=e(39032).BADNUM,b=e(98184),f=e(82744).clearMinTextSize;function o(t,i,n,r){var a=[],l=[],u=r?i:n,h=r?n:i;return a[0]=u.c2p(t.s0,!0),l[0]=h.c2p(t.p0,!0),a[1]=u.c2p(t.s1,!0),l[1]=h.c2p(t.p1,!0),a[2]=u.c2p(t.nextS0,!0),l[2]=h.c2p(t.nextP0,!0),a[3]=u.c2p(t.nextS1,!0),l[3]=h.c2p(t.nextP1,!0),r?[a,l]:[l,a]}ee.exports=function(t,i,n,r){var a=t._fullLayout;f("funnel",a),function(l,u,h,c){var x=u.xaxis,p=u.yaxis;k.makeTraceGroups(c,h,"trace bars").each(function(v){var g=M.select(this),y=v[0].trace,m=k.ensureSingle(g,"g","regions");if(y.connector&&y.connector.visible){var _=y.orientation==="h",d=m.selectAll("g.region").data(k.identity);d.enter().append("g").classed("region",!0),d.exit().remove();var S=d.size();d.each(function(w,E){if(E===S-1||w.cNext){var C=o(w,x,p,_),O=C[0],P=C[1],z="";O[0]!==T&&P[0]!==T&&O[1]!==T&&P[1]!==T&&O[2]!==T&&P[2]!==T&&O[3]!==T&&P[3]!==T&&(z+=_?"M"+O[0]+","+P[1]+"L"+O[2]+","+P[2]+"H"+O[3]+"L"+O[1]+","+P[1]+"Z":"M"+O[1]+","+P[1]+"L"+O[2]+","+P[3]+"V"+P[2]+"L"+O[1]+","+P[0]+"Z"),z===""&&(z="M0,0Z"),k.ensureSingle(M.select(this),"path").attr("d",z).call(s.setClipUrl,u.layerClipId,l)}})}else m.remove()})}(t,i,n,r),function(l,u,h,c){var x=u.xaxis,p=u.yaxis;k.makeTraceGroups(c,h,"trace bars").each(function(v){var g=M.select(this),y=v[0].trace,m=k.ensureSingle(g,"g","lines");if(y.connector&&y.connector.visible&&y.connector.line.width){var _=y.orientation==="h",d=m.selectAll("g.line").data(k.identity);d.enter().append("g").classed("line",!0),d.exit().remove();var S=d.size();d.each(function(w,E){if(E===S-1||w.cNext){var C=o(w,x,p,_),O=C[0],P=C[1],z="";O[3]!==void 0&&P[3]!==void 0&&(_?(z+="M"+O[0]+","+P[1]+"L"+O[2]+","+P[2],z+="M"+O[1]+","+P[1]+"L"+O[3]+","+P[2]):(z+="M"+O[1]+","+P[1]+"L"+O[2]+","+P[3],z+="M"+O[1]+","+P[0]+"L"+O[2]+","+P[2])),z===""&&(z="M0,0Z"),k.ensureSingle(M.select(this),"path").attr("d",z).call(s.setClipUrl,u.layerClipId,l)}})}else m.remove()})}(t,i,n,r),b.plot(t,i,n,r,{mode:a.funnelmode,norm:a.funnelmode,gap:a.funnelgap,groupgap:a.funnelgroupgap})}},44544:function(ee,R,e){var M=e(33428),k=e(43616),s=e(76308),T=e(13448).DESELECTDIM,b=e(60100),f=e(82744).resizeText,o=b.styleTextPoints;ee.exports={style:function(t,i,n){var r=n||M.select(t).selectAll('g[class^="funnellayer"]').selectAll("g.trace");f(t,r,"funnel"),r.style("opacity",function(a){return a[0].trace.opacity}),r.each(function(a){var l=M.select(this),u=a[0].trace;l.selectAll(".point > path").each(function(h){if(!h.isBlank){var c=u.marker;M.select(this).call(s.fill,h.mc||c.color).call(s.stroke,h.mlc||c.line.color).call(k.dashLine,c.line.dash,h.mlw||c.line.width).style("opacity",u.selectedpoints&&!h.selected?T:1)}}),o(l,u,t),l.selectAll(".regions").each(function(){M.select(this).selectAll("path").style("stroke-width",0).call(s.fill,u.connector.fillcolor)}),l.selectAll(".lines").each(function(){var h=u.connector.line;k.lineGroupStyle(M.select(this).selectAll("path"),h.width,h.color,h.dash)})})}}},22332:function(ee,R,e){var M=e(74996),k=e(45464),s=e(86968).u,T=e(21776).Ks,b=e(21776).Gw,f=e(92880).extendFlat;ee.exports={labels:M.labels,label0:M.label0,dlabel:M.dlabel,values:M.values,marker:{colors:M.marker.colors,line:{color:f({},M.marker.line.color,{dflt:null}),width:f({},M.marker.line.width,{dflt:1}),editType:"calc"},pattern:M.marker.pattern,editType:"calc"},text:M.text,hovertext:M.hovertext,scalegroup:f({},M.scalegroup,{}),textinfo:f({},M.textinfo,{flags:["label","text","value","percent"]}),texttemplate:b({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:f({},k.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:T({},{keys:["label","color","value","text","percent"]}),textposition:f({},M.textposition,{values:["inside","none"],dflt:"inside"}),textfont:M.textfont,insidetextfont:M.insidetextfont,title:{text:M.title.text,font:M.title.font,position:f({},M.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:s({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},91248:function(ee,R,e){var M=e(7316);R.name="funnelarea",R.plot=function(k,s,T,b){M.plotBasePlot(R.name,k,s,T,b)},R.clean=function(k,s,T,b){M.cleanBasePlot(R.name,k,s,T,b)}},54e3:function(ee,R,e){var M=e(45768);ee.exports={calc:function(k,s){return M.calc(k,s)},crossTraceCalc:function(k){M.crossTraceCalc(k,{type:"funnelarea"})}}},92688:function(ee,R,e){var M=e(3400),k=e(22332),s=e(86968).Q,T=e(31508).handleText,b=e(74174).handleLabelsAndValues,f=e(74174).handleMarkerDefaults;ee.exports=function(o,t,i,n){function r(g,y){return M.coerce(o,t,k,g,y)}var a=r("labels"),l=r("values"),u=b(a,l),h=u.len;if(t._hasLabels=u.hasLabels,t._hasValues=u.hasValues,!t._hasLabels&&t._hasValues&&(r("label0"),r("dlabel")),h){t._length=h,f(o,t,n,r),r("scalegroup");var c,x=r("text"),p=r("texttemplate");if(p||(c=r("textinfo",Array.isArray(x)?"text+percent":"percent")),r("hovertext"),r("hovertemplate"),p||c&&c!=="none"){var v=r("textposition");T(o,t,n,r,v,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}else c==="none"&&r("textposition","none");s(t,n,r),r("title.text")&&(r("title.position"),M.coerceFont(r,"title.font",n.font)),r("aspectratio"),r("baseratio")}else t.visible=!1}},62396:function(ee,R,e){ee.exports={moduleType:"trace",name:"funnelarea",basePlotModule:e(91248),categories:["pie-like","funnelarea","showLegend"],attributes:e(22332),layoutAttributes:e(61280),supplyDefaults:e(92688),supplyLayoutDefaults:e(35384),calc:e(54e3).calc,crossTraceCalc:e(54e3).crossTraceCalc,plot:e(39472),style:e(62096),styleOne:e(10528),meta:{}}},61280:function(ee,R,e){var M=e(85204).hiddenlabels;ee.exports={hiddenlabels:M,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},35384:function(ee,R,e){var M=e(3400),k=e(61280);ee.exports=function(s,T){function b(f,o){return M.coerce(s,T,k,f,o)}b("hiddenlabels"),b("funnelareacolorway",T.colorway),b("extendfunnelareacolors")}},39472:function(ee,R,e){var M=e(33428),k=e(43616),s=e(3400),T=s.strScale,b=s.strTranslate,f=e(72736),o=e(98184).toMoveInsideBar,t=e(82744),i=t.recordMinTextSize,n=t.clearMinTextSize,r=e(69656),a=e(37820),l=a.attachFxHandlers,u=a.determineInsideTextFont,h=a.layoutAreas,c=a.prerenderTitles,x=a.positionTitleOutside,p=a.formatSliceLabel;function v(g,y){return"l"+(y[0]-g[0])+","+(y[1]-g[1])}ee.exports=function(g,y){var m=g._context.staticPlot,_=g._fullLayout;n("funnelarea",_),c(y,g),h(y,_._size),s.makeTraceGroups(_._funnelarealayer,y,"trace").each(function(d){var S=M.select(this),w=d[0],E=w.trace;(function(C){if(C.length){var O=C[0],P=O.trace,z=P.aspectratio,j=P.baseratio;j>.999&&(j=.999);var I,N,W,F=Math.pow(j,2),U=O.vTotal,H=U,ne=U*F/(1-F)/U,$=[];for($.push(ve()),N=C.length-1;N>-1;N--)if(!(W=C[N]).hidden){var K=W.v/H;ne+=K,$.push(ve())}var Q=1/0,Z=-1/0;for(N=0;N<$.length;N++)I=$[N],Q=Math.min(Q,I[1]),Z=Math.max(Z,I[1]);for(N=0;N<$.length;N++)$[N][1]-=(Z+Q)/2;var X=$[$.length-1][0],te=O.r,ae=(Z-Q)/2,se=te/X,ce=te/ae*z;for(O.r=ce*ae,N=0;N<$.length;N++)$[N][0]*=se,$[N][1]*=ce;var fe,pe,ge=[-(I=$[0])[0],I[1]],me=[I[0],I[1]],be=0;for(N=C.length-1;N>-1;N--)if(!(W=C[N]).hidden){var ke=$[be+=1][0],ze=$[be][1];W.TL=[-ke,ze],W.TR=[ke,ze],W.BL=ge,W.BR=me,W.pxmid=(fe=W.TR,pe=W.BR,[.5*(fe[0]+pe[0]),.5*(fe[1]+pe[1])]),ge=W.TL,me=W.TR}}function ve(){var oe,ie={x:oe=Math.sqrt(ne),y:-oe};return[ie.x,ie.y]}})(d),S.each(function(){var C=M.select(this).selectAll("g.slice").data(d);C.enter().append("g").classed("slice",!0),C.exit().remove(),C.each(function(P,z){if(P.hidden)M.select(this).selectAll("path,g").remove();else{P.pointNumber=P.i,P.curveNumber=E.index;var j=w.cx,I=w.cy,N=M.select(this),W=N.selectAll("path.surface").data([P]);W.enter().append("path").classed("surface",!0).style({"pointer-events":m?"none":"all"}),N.call(l,g,d);var F="M"+(j+P.TR[0])+","+(I+P.TR[1])+v(P.TR,P.BR)+v(P.BR,P.BL)+v(P.BL,P.TL)+"Z";W.attr("d",F),p(g,P,w);var U=r.castOption(E.textposition,P.pts),H=N.selectAll("g.slicetext").data(P.text&&U!=="none"?[0]:[]);H.enter().append("g").classed("slicetext",!0),H.exit().remove(),H.each(function(){var ne=s.ensureSingle(M.select(this),"text","",function(se){se.attr("data-notex",1)}),$=s.ensureUniformFontSize(g,u(E,P,_.font));ne.text(P.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(k.font,$).call(f.convertToTspans,g);var K,Q,Z,X=k.bBox(ne.node()),te=Math.min(P.BL[1],P.BR[1])+I,ae=Math.max(P.TL[1],P.TR[1])+I;Q=Math.max(P.TL[0],P.BL[0])+j,Z=Math.min(P.TR[0],P.BR[0])+j,(K=o(Q,Z,te,ae,X,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=$.size,i(E.type,K,_),d[z].transform=K,s.setTransormAndDisplay(ne,K)})}});var O=M.select(this).selectAll("g.titletext").data(E.title.text?[0]:[]);O.enter().append("g").classed("titletext",!0),O.exit().remove(),O.each(function(){var P=s.ensureSingle(M.select(this),"text","",function(I){I.attr("data-notex",1)}),z=E.title.text;E._meta&&(z=s.templateString(z,E._meta)),P.text(z).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(k.font,E.title.font).call(f.convertToTspans,g);var j=x(w,_._size);P.attr("transform",b(j.x,j.y)+T(Math.min(1,j.scale))+b(j.tx,j.ty))})})})}},62096:function(ee,R,e){var M=e(33428),k=e(10528),s=e(82744).resizeText;ee.exports=function(T){var b=T._fullLayout._funnelarealayer.selectAll(".trace");s(T,b,"funnelarea"),b.each(function(f){var o=f[0].trace,t=M.select(this);t.style({opacity:o.opacity}),t.selectAll("path.surface").each(function(i){M.select(this).call(k,i,o,T)})})}},83328:function(ee,R,e){var M=e(52904),k=e(45464),s=e(25376),T=e(29736).axisHoverFormat,b=e(21776).Ks,f=e(21776).Gw,o=e(49084),t=e(92880).extendFlat;ee.exports=t({z:{valType:"data_array",editType:"calc"},x:t({},M.x,{impliedEdits:{xtype:"array"}}),x0:t({},M.x0,{impliedEdits:{xtype:"scaled"}}),dx:t({},M.dx,{impliedEdits:{xtype:"scaled"}}),y:t({},M.y,{impliedEdits:{ytype:"array"}}),y0:t({},M.y0,{impliedEdits:{ytype:"scaled"}}),dy:t({},M.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:t({},M.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:t({},M.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:t({},M.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:t({},M.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:t({},M.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:t({},M.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:b(),texttemplate:f({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:s({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:t({},k.showlegend,{dflt:!1}),zorder:M.zorder},{transforms:void 0},o("",{cLetter:"z",autoColorDflt:!1}))},19512:function(ee,R,e){var M=e(24040),k=e(3400),s=e(54460),T=e(1220),b=e(55480),f=e(47128),o=e(2872),t=e(26136),i=e(70448),n=e(11240),r=e(35744),a=e(39032).BADNUM;function l(u){for(var h=[],c=u.length,x=0;x<c;x++){var p=u[x];p!==a&&h.push(p)}return h}ee.exports=function(u,h){var c,x,p,v,g,y,m,_,d,S,w,E=s.getFromId(u,h.xaxis||"x"),C=s.getFromId(u,h.yaxis||"y"),O=M.traceIs(h,"contour"),P=M.traceIs(h,"histogram"),z=M.traceIs(h,"gl2d"),j=O?"best":h.zsmooth;if(E._minDtick=0,C._minDtick=0,P)v=(w=b(u,h)).orig_x,c=w.x,x=w.x0,p=w.dx,_=w.orig_y,g=w.y,y=w.y0,m=w.dy,d=w.z;else{var I=h.z;k.isArray1D(I)?(o(h,E,C,"x","y",["z"]),c=h._x,g=h._y,I=h._z):(v=h.x?E.makeCalcdata(h,"x"):[],_=h.y?C.makeCalcdata(h,"y"):[],c=T(h,E,"x",v).vals,g=T(h,C,"y",_).vals,h._x=c,h._y=g),x=h.x0,p=h.dx,y=h.y0,m=h.dy,d=t(I,h,E,C)}function N(Z){j=h._input.zsmooth=h.zsmooth=!1,k.warn('cannot use zsmooth: "fast": '+Z)}function W(Z){if(Z.length>1){var X=(Z[Z.length-1]-Z[0])/(Z.length-1),te=Math.abs(X/100);for(S=0;S<Z.length-1;S++)if(Math.abs(Z[S+1]-Z[S]-X)>te)return!1}return!0}(E.rangebreaks||C.rangebreaks)&&(d=function(Z,X,te){for(var ae=[],se=-1,ce=0;ce<te.length;ce++)if(X[ce]!==a){ae[++se]=[];for(var fe=0;fe<te[ce].length;fe++)Z[fe]!==a&&ae[se].push(te[ce][fe])}return ae}(c,g,d),P||(c=l(c),g=l(g),h._x=c,h._y=g)),P||!O&&!h.connectgaps||(h._emptypoints=n(d),i(d,h._emptypoints)),h._islinear=!1,E.type==="log"||C.type==="log"?j==="fast"&&N("log axis found"):W(c)?W(g)?h._islinear=!0:j==="fast"&&N("y scale is not linear"):j==="fast"&&N("x scale is not linear");var F=k.maxRowLength(d),U=h.xtype==="scaled"?"":c,H=r(h,U,x,p,F,E),ne=h.ytype==="scaled"?"":g,$=r(h,ne,y,m,d.length,C);z||(h._extremes[E._id]=s.findExtremes(E,H),h._extremes[C._id]=s.findExtremes(C,$));var K={x:H,y:$,z:d,text:h._text||h.text,hovertext:h._hovertext||h.hovertext};if(h.xperiodalignment&&v&&(K.orig_x=v),h.yperiodalignment&&_&&(K.orig_y=_),U&&U.length===H.length-1&&(K.xCenter=U),ne&&ne.length===$.length-1&&(K.yCenter=ne),P&&(K.xRanges=w.xRanges,K.yRanges=w.yRanges,K.pts=w.pts),O||f(u,h,{vals:d,cLetter:"z"}),O&&h.contours&&h.contours.coloring==="heatmap"){var Q={type:h.type==="contour"?"heatmap":"histogram2d",xcalendar:h.xcalendar,ycalendar:h.ycalendar};K.xfill=r(Q,U,x,p,F,E),K.yfill=r(Q,ne,y,m,d.length,C)}return[K]}},26136:function(ee,R,e){var M=e(38248),k=e(3400),s=e(39032).BADNUM;ee.exports=function(T,b,f,o){var t,i,n,r,a,l;function u(g){if(M(g))return+g}if(b&&b.transpose){for(t=0,a=0;a<T.length;a++)t=Math.max(t,T[a].length);if(t===0)return!1;n=function(g){return g.length},r=function(g,y,m){return(g[m]||[])[y]}}else t=T.length,n=function(g,y){return g[y].length},r=function(g,y,m){return(g[y]||[])[m]};var h=function(g,y,m){return y===s||m===s?s:r(g,y,m)};function c(g){if(b&&b.type!=="carpet"&&b.type!=="contourcarpet"&&g&&g.type==="category"&&b["_"+g._id.charAt(0)].length){var y=g._id.charAt(0),m={},_=b["_"+y+"CategoryMap"]||b[y];for(a=0;a<_.length;a++)m[_[a]]=a;return function(d){var S=m[g._categories[d]];return S+1?S:s}}return k.identity}var x=c(f),p=c(o);o&&o.type==="category"&&(t=o._categories.length);var v=new Array(t);for(a=0;a<t;a++)for(i=f&&f.type==="category"?f._categories.length:n(T,a),v[a]=new Array(i),l=0;l<i;l++)v[a][l]=u(h(T,p(a),x(l)));return v}},96288:function(ee){ee.exports={min:"zmin",max:"zmax"}},2872:function(ee,R,e){var M=e(3400),k=e(39032).BADNUM,s=e(1220);ee.exports=function(T,b,f,o,t,i){var n=T._length,r=b.makeCalcdata(T,o),a=f.makeCalcdata(T,t);r=s(T,b,o,r).vals,a=s(T,f,t,a).vals;var l,u,h,c,x=T.text,p=x!==void 0&&M.isArray1D(x),v=T.hovertext,g=v!==void 0&&M.isArray1D(v),y=M.distinctVals(r),m=y.vals,_=M.distinctVals(a),d=_.vals,S=[],w=d.length,E=m.length;for(l=0;l<i.length;l++)S[l]=M.init2dArray(w,E);p&&(h=M.init2dArray(w,E)),g&&(c=M.init2dArray(w,E));var C=M.init2dArray(w,E);for(l=0;l<n;l++)if(r[l]!==k&&a[l]!==k){var O=M.findBin(r[l]+y.minDiff/2,m),P=M.findBin(a[l]+_.minDiff/2,d);for(u=0;u<i.length;u++){var z=T[i[u]];S[u][P][O]=z[l],C[P][O]=l}p&&(h[P][O]=x[l]),g&&(c[P][O]=v[l])}for(T["_"+o]=m,T["_"+t]=d,u=0;u<i.length;u++)T["_"+i[u]]=S[u];p&&(T._text=h),g&&(T._hovertext=c),b&&b.type==="category"&&(T["_"+o+"CategoryMap"]=m.map(function(j){return b._categories[j]})),f&&f.type==="category"&&(T["_"+t+"CategoryMap"]=d.map(function(j){return f._categories[j]})),T._after2before=C}},24480:function(ee,R,e){var M=e(3400),k=e(51264),s=e(39096),T=e(31147),b=e(82748),f=e(27260),o=e(83328);ee.exports=function(t,i,n,r){function a(l,u){return M.coerce(t,i,o,l,u)}k(t,i,a,r)?(T(t,i,r,a),a("xhoverformat"),a("yhoverformat"),a("text"),a("hovertext"),a("hovertemplate"),s(a,r),b(t,i,a,r),a("hoverongaps"),a("connectgaps",M.isArray1D(i.z)&&i.zsmooth!==!1),f(t,i,r,a,{prefix:"",cLetter:"z"}),a("zorder")):i.visible=!1}},11240:function(ee,R,e){var M=e(3400).maxRowLength;ee.exports=function(k){var s,T,b,f,o,t,i,n,r=[],a={},l=[],u=k[0],h=[],c=[0,0,0],x=M(k);for(T=0;T<k.length;T++)for(s=h,h=u,u=k[T+1]||[],b=0;b<x;b++)h[b]===void 0&&((t=(h[b-1]!==void 0?1:0)+(h[b+1]!==void 0?1:0)+(s[b]!==void 0?1:0)+(u[b]!==void 0?1:0))?(T===0&&t++,b===0&&t++,T===k.length-1&&t++,b===h.length-1&&t++,t<4&&(a[[T,b]]=[T,b,t]),r.push([T,b,t])):l.push([T,b]));for(;l.length;){for(i={},n=!1,o=l.length-1;o>=0;o--)(t=((a[[(T=(f=l[o])[0])-1,b=f[1]]]||c)[2]+(a[[T+1,b]]||c)[2]+(a[[T,b-1]]||c)[2]+(a[[T,b+1]]||c)[2])/20)&&(i[f]=[T,b,t],l.splice(o,1),n=!0);if(!n)throw"findEmpties iterated with no new neighbors";for(f in i)a[f]=i[f],r.push(i[f])}return r.sort(function(p,v){return v[2]-p[2]})}},55512:function(ee,R,e){var M=e(93024),k=e(3400),s=k.isArrayOrTypedArray,T=e(54460),b=e(8932).extractOpts;ee.exports=function(f,o,t,i,n){n||(n={});var r,a,l,u,h=n.isContour,c=f.cd[0],x=c.trace,p=f.xa,v=f.ya,g=c.x,y=c.y,m=c.z,_=c.xCenter,d=c.yCenter,S=c.zmask,w=x.zhoverformat,E=g,C=y;if(f.index!==!1){try{l=Math.round(f.index[1]),u=Math.round(f.index[0])}catch{return void k.error("Error hovering on heatmap, pointNumber must be [row,col], found:",f.index)}if(l<0||l>=m[0].length||u<0||u>m.length)return}else{if(M.inbox(o-g[0],o-g[g.length-1],0)>0||M.inbox(t-y[0],t-y[y.length-1],0)>0)return;if(h){var O;for(E=[2*g[0]-g[1]],O=1;O<g.length;O++)E.push((g[O]+g[O-1])/2);for(E.push([2*g[g.length-1]-g[g.length-2]]),C=[2*y[0]-y[1]],O=1;O<y.length;O++)C.push((y[O]+y[O-1])/2);C.push([2*y[y.length-1]-y[y.length-2]])}l=Math.max(0,Math.min(E.length-2,k.findBin(o,E))),u=Math.max(0,Math.min(C.length-2,k.findBin(t,C)))}var P,z,j=p.c2p(g[l]),I=p.c2p(g[l+1]),N=v.c2p(y[u]),W=v.c2p(y[u+1]);h?(P=c.orig_x||g,z=c.orig_y||y,I=j,r=P[l],W=N,a=z[u]):(P=c.orig_x||_||g,z=c.orig_y||d||y,r=_?P[l]:(P[l]+P[l+1])/2,a=d?z[u]:(z[u]+z[u+1])/2,p&&p.type==="category"&&(r=g[l]),v&&v.type==="category"&&(a=y[u]),x.zsmooth&&(j=I=p.c2p(r),N=W=v.c2p(a)));var F=m[u][l];if(S&&!S[u][l]&&(F=void 0),F!==void 0||x.hoverongaps){var U;s(c.hovertext)&&s(c.hovertext[u])?U=c.hovertext[u][l]:s(c.text)&&s(c.text[u])&&(U=c.text[u][l]);var H=b(x),ne={type:"linear",range:[H.min,H.max],hoverformat:w,_separators:p._separators,_numFormat:p._numFormat},$=T.tickText(ne,F,"hover").text;return[k.extendFlat(f,{index:x._after2before?x._after2before[u][l]:[u,l],distance:f.maxHoverDistance,spikeDistance:f.maxSpikeDistance,x0:j,x1:I,y0:N,y1:W,xLabelVal:r,yLabelVal:a,zLabelVal:F,zLabel:$,text:U})]}}},81932:function(ee,R,e){ee.exports={attributes:e(83328),supplyDefaults:e(24480),calc:e(19512),plot:e(41420),colorbar:e(96288),style:e(41648),hoverPoints:e(55512),moduleType:"trace",name:"heatmap",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},70448:function(ee,R,e){var M=e(3400),k=[[-1,0],[1,0],[0,-1],[0,1]];function s(b){return .5-.25*Math.min(1,.5*b)}function T(b,f,o){var t,i,n,r,a,l,u,h,c,x,p,v,g,y=0;for(r=0;r<f.length;r++){for(i=(t=f[r])[0],n=t[1],p=b[i][n],x=0,c=0,a=0;a<4;a++)(u=b[i+(l=k[a])[0]])&&(h=u[n+l[1]])!==void 0&&(x===0?v=g=h:(v=Math.min(v,h),g=Math.max(g,h)),c++,x+=h);if(c===0)throw"iterateInterp2d order is wrong: no defined neighbors";b[i][n]=x/c,p===void 0?c<4&&(y=1):(b[i][n]=(1+o)*b[i][n]-o*p,g>v&&(y=Math.max(y,Math.abs(b[i][n]-p)/(g-v))))}return y}ee.exports=function(b,f){var o,t=1;for(T(b,f),o=0;o<f.length&&!(f[o][2]<4);o++);for(f=f.slice(o),o=0;o<100&&t>.01;o++)t=T(b,f,s(t));return t>.01&&M.log("interp2d didn't converge quickly",t),b}},39096:function(ee,R,e){var M=e(3400);ee.exports=function(k,s){k("texttemplate");var T=M.extendFlat({},s.font,{color:"auto",size:"auto"});M.coerceFont(k,"textfont",T)}},35744:function(ee,R,e){var M=e(24040),k=e(3400).isArrayOrTypedArray;ee.exports=function(s,T,b,f,o,t){var i,n,r,a=[],l=M.traceIs(s,"contour"),u=M.traceIs(s,"histogram"),h=M.traceIs(s,"gl2d");if(k(T)&&T.length>1&&!u&&t.type!=="category"){var c=T.length;if(!(c<=o))return l?T.slice(0,o):T.slice(0,o+1);if(l||h)a=Array.from(T).slice(0,o);else if(o===1)a=t.type==="log"?[.5*T[0],2*T[0]]:[T[0]-.5,T[0]+.5];else if(t.type==="log"){for(a=[Math.pow(T[0],1.5)/Math.pow(T[1],.5)],r=1;r<c;r++)a.push(Math.sqrt(T[r-1]*T[r]));a.push(Math.pow(T[c-1],1.5)/Math.pow(T[c-2],.5))}else{for(a=[1.5*T[0]-.5*T[1]],r=1;r<c;r++)a.push(.5*(T[r-1]+T[r]));a.push(1.5*T[c-1]-.5*T[c-2])}if(c<o){var x,p=a[a.length-1];if(t.type==="log")for(x=p/a[a.length-2],r=c;r<o;r++)p*=x,a.push(p);else for(x=p-a[a.length-2],r=c;r<o;r++)p+=x,a.push(p)}}else{var v=s[t._id.charAt(0)+"calendar"];for(i=u?t.r2c(b,0,v):k(T)&&T.length===1?T[0]:b===void 0?0:(t.type==="log"?t.d2c:t.r2c)(b,0,v),n=f||1,r=l||h?0:-.5;r<o;r++)a.push(i+n*r)}return a}},41420:function(ee,R,e){var M=e(33428),k=e(49760),s=e(24040),T=e(43616),b=e(54460),f=e(3400),o=e(72736),t=e(76688),i=e(76308),n=e(8932).extractOpts,r=e(8932).makeColorScaleFuncFromTrace,a=e(9616),l=e(84284).LINE_SPACING,u=e(9188),h=e(2264).STYLE,c="heatmap-label";function x(m){return m.selectAll("g."+c)}function p(m){x(m).remove()}function v(m,_){var d=_.length-2,S=f.constrain(f.findBin(m,_),0,d),w=_[S],E=_[S+1],C=f.constrain(S+(m-w)/(E-w)-.5,0,d),O=Math.round(C),P=Math.abs(C-O);return C&&C!==d&&P?{bin0:O,frac:P,bin1:Math.round(O+P/(C-O))}:{bin0:O,bin1:O,frac:0}}function g(m,_){var d=_.length-1,S=f.constrain(f.findBin(m,_),0,d),w=_[S],E=(m-w)/(_[S+1]-w)||0;return E<=0?{bin0:S,bin1:S,frac:0}:E<.5?{bin0:S,bin1:S+1,frac:E}:{bin0:S+1,bin1:S,frac:1-E}}function y(m,_,d){m[_]=d[0],m[_+1]=d[1],m[_+2]=d[2],m[_+3]=Math.round(255*d[3])}ee.exports=function(m,_,d,S){var w=_.xaxis,E=_.yaxis;f.makeTraceGroups(S,d,"hm").each(function(C){var O,P,z,j,I,N,W,F,U=M.select(this),H=C[0],ne=H.trace,$=ne.xgap||0,K=ne.ygap||0,Q=H.z,Z=H.x,X=H.y,te=H.xCenter,ae=H.yCenter,se=s.traceIs(ne,"contour"),ce=se?"best":ne.zsmooth,fe=Q.length,pe=f.maxRowLength(Q),ge=!1,me=!1;for(N=0;O===void 0&&N<Z.length-1;)O=w.c2p(Z[N]),N++;for(N=Z.length-1;P===void 0&&N>0;)P=w.c2p(Z[N]),N--;for(P<O&&(z=P,P=O,O=z,ge=!0),N=0;j===void 0&&N<X.length-1;)j=E.c2p(X[N]),N++;for(N=X.length-1;I===void 0&&N>0;)I=E.c2p(X[N]),N--;I<j&&(z=j,j=I,I=z,me=!0),se&&(te=Z,ae=X,Z=H.xfill,X=H.yfill);var be="default";if(ce?be=ce==="best"?"smooth":"fast":ne._islinear&&$===0&&K===0&&u()&&(be="fast"),be!=="fast"){var ke=ce==="best"?0:.5;O=Math.max(-ke*w._length,O),P=Math.min((1+ke)*w._length,P),j=Math.max(-ke*E._length,j),I=Math.min((1+ke)*E._length,I)}var ze,ve,oe=Math.round(P-O),ie=Math.round(I-j);if(O>=w._length||P<=0||j>=E._length||I<=0)return U.selectAll("image").data([]).exit().remove(),void p(U);be==="fast"?(ze=pe,ve=fe):(ze=oe,ve=ie);var he=document.createElement("canvas");he.width=ze,he.height=ve;var Se,ye,we=he.getContext("2d",{willReadFrequently:!0}),Me=r(ne,{noNumericCheck:!0,returnArray:!0});be==="fast"?(Se=ge?function(rr){return pe-1-rr}:f.identity,ye=me?function(rr){return fe-1-rr}:f.identity):(Se=function(rr){return f.constrain(Math.round(w.c2p(Z[rr])-O),0,oe)},ye=function(rr){return f.constrain(Math.round(E.c2p(X[rr])-j),0,ie)});var Oe,Ie,de,_e,Ae=ye(0),Pe=[Ae,Ae],Ee=ge?0:1,Fe=me?0:1,Ve=0,Ye=0,tt=0,nt=0;function ht(rr,Yt){if(rr!==void 0){var $t=Me(rr);return $t[0]=Math.round($t[0]),$t[1]=Math.round($t[1]),$t[2]=Math.round($t[2]),Ve+=Yt,Ye+=$t[0]*Yt,tt+=$t[1]*Yt,nt+=$t[2]*Yt,$t}return[0,0,0,0]}function vt(rr,Yt,$t,Sn){var dn=rr[$t.bin0];if(dn===void 0)return ht(void 0,1);var En,Nn=rr[$t.bin1],Bn=Yt[$t.bin0],$n=Yt[$t.bin1],lr=Nn-dn||0,Gt=Bn-dn||0;return En=Nn===void 0?$n===void 0?0:Bn===void 0?2*($n-dn):2*(2*$n-Bn-dn)/3:$n===void 0?Bn===void 0?0:2*(2*dn-Nn-Bn)/3:Bn===void 0?2*(2*$n-Nn-dn)/3:$n+dn-Nn-Bn,ht(dn+$t.frac*lr+Sn.frac*(Gt+$t.frac*En))}if(be!=="default"){var pt,Qe=0;try{pt=new Uint8Array(ze*ve*4)}catch{pt=new Array(ze*ve*4)}if(be==="smooth"){var Ke,Mt,Ot,Pt=te||Z,St=ae||X,He=new Array(Pt.length),We=new Array(St.length),Be=new Array(oe),Ge=te?g:v,ot=ae?g:v;for(N=0;N<Pt.length;N++)He[N]=Math.round(w.c2p(Pt[N])-O);for(N=0;N<St.length;N++)We[N]=Math.round(E.c2p(St[N])-j);for(N=0;N<oe;N++)Be[N]=Ge(N,He);for(W=0;W<ie;W++)for(Mt=Q[(Ke=ot(W,We)).bin0],Ot=Q[Ke.bin1],N=0;N<oe;N++,Qe+=4)y(pt,Qe,_e=vt(Mt,Ot,Be[N],Ke))}else for(W=0;W<fe;W++)for(de=Q[W],Pe=ye(W),N=0;N<pe;N++)_e=ht(de[N],1),y(pt,Qe=4*(Pe*pe+Se(N)),_e);var it=we.createImageData(ze,ve);try{it.data.set(pt)}catch{var dt=it.data,gt=dt.length;for(W=0;W<gt;W++)dt[W]=pt[W]}we.putImageData(it,0,0)}else{var je=Math.floor($/2),Re=Math.floor(K/2);for(W=0;W<fe;W++)if(de=Q[W],Pe.reverse(),Pe[Fe]=ye(W+1),Pe[0]!==Pe[1]&&Pe[0]!==void 0&&Pe[1]!==void 0)for(Oe=[Ie=Se(0),Ie],N=0;N<pe;N++)Oe.reverse(),Oe[Ee]=Se(N+1),Oe[0]!==Oe[1]&&Oe[0]!==void 0&&Oe[1]!==void 0&&(_e=ht(de[N],(Oe[1]-Oe[0])*(Pe[1]-Pe[0])),we.fillStyle="rgba("+_e.join(",")+")",we.fillRect(Oe[0]+je,Pe[0]+Re,Oe[1]-Oe[0]-$,Pe[1]-Pe[0]-K))}Ye=Math.round(Ye/Ve),tt=Math.round(tt/Ve),nt=Math.round(nt/Ve);var rt=k("rgb("+Ye+","+tt+","+nt+")");m._hmpixcount=(m._hmpixcount||0)+Ve,m._hmlumcount=(m._hmlumcount||0)+Ve*rt.getLuminance();var ct=U.selectAll("image").data(C);ct.enter().append("svg:image").attr({xmlns:a.svg,preserveAspectRatio:"none"}),ct.attr({height:ie,width:oe,x:O,y:j,"xlink:href":he.toDataURL("image/png")}),be!=="fast"||ce||ct.attr("style",h),p(U);var ut=ne.texttemplate;if(ut){var et=n(ne),xt={type:"linear",range:[et.min,et.max],_separators:w._separators,_numFormat:w._numFormat},mt=ne.type==="histogram2dcontour",Tt=ne.type==="contour",yt=Tt?fe-1:fe,bt=Tt?1:0,zt=Tt?pe-1:pe,Ut=[];for(N=Tt?1:0;N<yt;N++){var en;if(Tt)en=H.y[N];else if(mt){if(N===0||N===fe-1)continue;en=H.y[N]}else if(H.yCenter)en=H.yCenter[N];else{if(N+1===fe&&H.y[N+1]===void 0)continue;en=(H.y[N]+H.y[N+1])/2}var an=Math.round(E.c2p(en));if(!(0>an||an>E._length))for(W=bt;W<zt;W++){var rn;if(Tt)rn=H.x[W];else if(mt){if(W===0||W===pe-1)continue;rn=H.x[W]}else if(H.xCenter)rn=H.xCenter[W];else{if(W+1===pe&&H.x[W+1]===void 0)continue;rn=(H.x[W]+H.x[W+1])/2}var qt=Math.round(w.c2p(rn));if(!(0>qt||qt>w._length)){var Kt=t({x:rn,y:en},ne,m._fullLayout);Kt.x=rn,Kt.y=en;var xn=H.z[N][W];xn===void 0?(Kt.z="",Kt.zLabel=""):(Kt.z=xn,Kt.zLabel=b.tickText(xt,xn,"hover").text);var on=H.text&&H.text[N]&&H.text[N][W];on!==void 0&&on!==!1||(on=""),Kt.text=on;var Xt=f.texttemplateString(ut,Kt,m._fullLayout._d3locale,Kt,ne._meta||{});if(Xt){var ln=Xt.split("<br>"),Jt=ln.length,tn=0;for(F=0;F<Jt;F++)tn=Math.max(tn,ln[F].length);Ut.push({l:Jt,c:tn,t:Xt,x:qt,y:an,z:xn})}}}}var wn=ne.textfont,mn=wn.size,Cn=m._fullLayout.font.size;if(!mn||mn==="auto"){var yn=1/0,Mn=1/0,zn=0,Wn=0;for(F=0;F<Ut.length;F++){var sr=Ut[F];if(zn=Math.max(zn,sr.l),Wn=Math.max(Wn,sr.c),F<Ut.length-1){var Fn=Ut[F+1],Yn=Math.abs(Fn.x-sr.x),Xn=Math.abs(Fn.y-sr.y);Yn&&(yn=Math.min(yn,Yn)),Xn&&(Mn=Math.min(Mn,Xn))}}isFinite(yn)&&isFinite(Mn)?(yn-=$,Mn-=K,yn/=Wn,Mn/=zn,yn/=l/2,Mn/=l,mn=Math.min(Math.floor(yn),Math.floor(Mn),Cn)):mn=Cn}if(mn<=0||!isFinite(mn))return;x(U).data(Ut).enter().append("g").classed(c,1).append("text").attr("text-anchor","middle").each(function(rr){var Yt=M.select(this),$t=wn.color;$t&&$t!=="auto"||($t=i.contrast(rr.z===void 0?m._fullLayout.plot_bgcolor:"rgba("+Me(rr.z).join()+")")),Yt.attr("data-notex",1).call(o.positionText,function(Sn){return Sn.x}(rr),function(Sn){return Sn.y-mn*(Sn.l*l/2-1)}(rr)).call(T.font,{family:wn.family,size:mn,color:$t,weight:wn.weight,style:wn.style,variant:wn.variant,textcase:wn.textcase,lineposition:wn.lineposition,shadow:wn.shadow}).text(rr.t).call(o.convertToTspans,m)})}})}},41648:function(ee,R,e){var M=e(33428);ee.exports=function(k){M.select(k).selectAll(".hm image").style("opacity",function(s){return s.trace.opacity})}},82748:function(ee){ee.exports=function(R,e,M){M("zsmooth")===!1&&(M("xgap"),M("ygap")),M("zhoverformat")}},51264:function(ee,R,e){var M=e(38248),k=e(3400),s=e(24040);function T(b,f){var o=f(b);return(o?f(b+"type","array"):"scaled")==="scaled"&&(f(b+"0"),f("d"+b)),o}ee.exports=function(b,f,o,t,i,n){var r,a,l=o("z");if(i=i||"x",n=n||"y",l===void 0||!l.length)return 0;if(k.isArray1D(l)){r=o(i),a=o(n);var u=k.minRowLength(r),h=k.minRowLength(a);if(u===0||h===0)return 0;f._length=Math.min(u,h,l.length)}else{if(r=T(i,o),a=T(n,o),!function(c){for(var x,p=!0,v=!1,g=!1,y=0;y<c.length;y++){if(x=c[y],!k.isArrayOrTypedArray(x)){p=!1;break}x.length>0&&(v=!0);for(var m=0;m<x.length;m++)if(M(x[m])){g=!0;break}}return p&&v&&g}(l))return 0;o("transpose"),f._length=null}return b.type==="heatmapgl"||s.getComponentMethod("calendars","handleTraceDefaults")(b,f,[i,n],t),!0}},74512:function(ee,R,e){for(var M=e(83328),k=e(49084),s=e(92880).extendFlat,T=e(67824).overrideAll,b=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],f={},o=0;o<b.length;o++){var t=b[o];f[t]=M[t]}f.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},s(f,k("",{cLetter:"z",autoColorDflt:!1})),ee.exports=T(f,"calc","nested")},84656:function(ee,R,e){var M=e(67792).gl_heatmap2d,k=e(54460),s=e(43080);function T(f,o){this.scene=f,this.uid=o,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=M(f.glplot,this.options),this.heatmap._trace=this}var b=T.prototype;b.handlePick=function(f){var o=this.options,t=o.shape,i=f.pointId,n=i%t[0],r=Math.floor(i/t[0]),a=i;return{trace:this,dataCoord:f.dataCoord,traceCoord:[o.x[n],o.y[r],o.z[a]],textLabel:this.textLabels[i],name:this.name,pointIndex:[r,n],hoverinfo:this.hoverinfo}},b.update=function(f,o){var t=o[0];this.index=f.index,this.name=f.name,this.hoverinfo=f.hoverinfo;var i=t.z;this.options.z=[].concat.apply([],i);var n=i[0].length,r=i.length;this.options.shape=[n,r],this.options.x=t.x,this.options.y=t.y,this.options.zsmooth=f.zsmooth;var a=function(x){for(var p=x.colorscale,v=x.zmin,g=x.zmax,y=p.length,m=new Array(y),_=new Array(4*y),d=0;d<y;d++){var S=p[d],w=s(S[1]);m[d]=v+S[0]*(g-v);for(var E=0;E<4;E++)_[4*d+E]=w[E]}return{colorLevels:m,colorValues:_}}(f);this.options.colorLevels=a.colorLevels,this.options.colorValues=a.colorValues,this.textLabels=[].concat.apply([],f.text),this.heatmap.update(this.options);var l,u,h=this.scene.xaxis,c=this.scene.yaxis;f.zsmooth===!1&&(l={ppad:t.x[1]-t.x[0]},u={ppad:t.y[1]-t.y[0]}),f._extremes[h._id]=k.findExtremes(h,t.x,l),f._extremes[c._id]=k.findExtremes(c,t.y,u)},b.dispose=function(){this.heatmap.dispose()},ee.exports=function(f,o,t){var i=new T(f,o.uid);return i.update(o,t),i}},86464:function(ee,R,e){var M=e(3400),k=e(51264),s=e(27260),T=e(74512);ee.exports=function(b,f,o,t){function i(n,r){return M.coerce(b,f,T,n,r)}k(b,f,i,t)?(i("text"),i("zsmooth"),s(b,f,t,i,{prefix:"",cLetter:"z"})):f.visible=!1}},45536:function(ee,R,e){ee.exports={attributes:e(74512),supplyDefaults:e(86464),colorbar:e(96288),calc:e(19512),plot:e(84656),moduleType:"trace",name:"heatmapgl",basePlotModule:e(39952),categories:["gl","gl2d","2dMap"],meta:{}}},40196:function(ee,R,e){var M=e(20832),k=e(29736).axisHoverFormat,s=e(21776).Ks,T=e(21776).Gw,b=e(25376),f=e(11120),o=e(73316),t=e(92880).extendFlat;ee.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:k("x"),yhoverformat:k("y"),text:t({},M.text,{}),hovertext:t({},M.hovertext,{}),orientation:M.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:f("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:f("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:s({},{keys:o.eventDataKeys}),texttemplate:T({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:t({},M.textposition,{arrayOk:!1}),textfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:M.insidetextanchor,textangle:M.textangle,cliponaxis:M.cliponaxis,constraintext:M.constraintext,marker:M.marker,offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:M.selected,unselected:M.unselected,_deprecated:{bardir:M._deprecated.bardir},zorder:M.zorder}},2e3:function(ee){ee.exports=function(R,e){for(var M=R.length,k=0,s=0;s<M;s++)e[s]?(R[s]/=e[s],k+=R[s]):R[s]=null;return k}},11120:function(ee){ee.exports=function(R,e){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},16964:function(ee,R,e){var M=e(38248);ee.exports={count:function(k,s,T){return T[k]++,1},sum:function(k,s,T,b){var f=b[s];return M(f)?(f=Number(f),T[k]+=f,f):0},avg:function(k,s,T,b,f){var o=b[s];return M(o)&&(o=Number(o),T[k]+=o,f[k]++),0},min:function(k,s,T,b){var f=b[s];if(M(f)){if(f=Number(f),!M(T[k]))return T[k]=f,f;if(T[k]>f){var o=f-T[k];return T[k]=f,o}}return 0},max:function(k,s,T,b){var f=b[s];if(M(f)){if(f=Number(f),!M(T[k]))return T[k]=f,f;if(T[k]<f){var o=f-T[k];return T[k]=f,o}}return 0}}},67712:function(ee,R,e){var M=e(39032),k=M.ONEAVGYEAR,s=M.ONEAVGMONTH,T=M.ONEDAY,b=M.ONEHOUR,f=M.ONEMIN,o=M.ONESEC,t=e(54460).tickIncrement;function i(l,u,h,c){if(l*u<=0)return 1/0;for(var x=Math.abs(u-l),p=h.type==="date",v=n(x,p),g=0;g<10;g++){var y=n(80*v,p);if(v===y||!r(y,l,u,p,h,c))break;v=y}return v}function n(l,u){return u&&l>o?l>T?l>1.1*k?k:l>1.1*s?s:T:l>b?b:l>f?f:o:Math.pow(10,Math.floor(Math.log(l)/Math.LN10))}function r(l,u,h,c,x,p){if(c&&l>T){var v=a(u,x,p),g=a(h,x,p),y=l===k?0:1;return v[y]!==g[y]}return Math.floor(h/l)-Math.floor(u/l)>.1}function a(l,u,h){var c=u.c2d(l,k,h).split("-");return c[0]===""&&(c.unshift(),c[0]="-"+c[0]),c}ee.exports=function(l,u,h,c,x){var p,v,g=-1.1*u,y=-.1*u,m=l-y,_=h[0],d=h[1],S=Math.min(i(_+y,_+m,c,x),i(d+y,d+m,c,x)),w=Math.min(i(_+g,_+y,c,x),i(d+g,d+y,c,x));if(S>w&&w<Math.abs(d-_)/4e3?(p=S,v=!1):(p=Math.min(S,w),v=!0),c.type==="date"&&p>T){var E=p===k?1:6,C=p===k?"M12":"M1";return function(O,P){var z=c.c2d(O,k,x),j=z.indexOf("-",E);j>0&&(z=z.substr(0,j));var I=c.d2c(z,0,x);if(I<O){var N=t(I,C,!1,x);(I+N)/2<O+l&&(I=N)}return P&&v?t(I,C,!0,x):I}}return function(O,P){var z=p*Math.round(O/p);return z+p/10<O&&z+.9*p<O+l&&(z+=p),P&&v&&(z-=p),z}}},35852:function(ee,R,e){var M=e(38248),k=e(3400),s=e(24040),T=e(54460),b=e(84664),f=e(16964),o=e(10648),t=e(2e3),i=e(67712);function n(r,a,l,u,h){var c,x,p,v,g,y,m,_=u+"bins",d=r._fullLayout,S=a["_"+u+"bingroup"],w=d._histogramBinOpts[S],E=d.barmode==="overlay",C=function(me){return l.r2c(me,0,v)},O=function(me){return l.c2r(me,0,v)},P=l.type==="date"?function(me){return me||me===0?k.cleanDate(me,null,v):null}:function(me){return M(me)?Number(me):null};function z(me,be,ke){be[me+"Found"]?(be[me]=P(be[me]),be[me]===null&&(be[me]=ke[me])):(y[me]=be[me]=ke[me],k.nestedProperty(x[0],_+"."+me).set(ke[me]))}if(a["_"+u+"autoBinFinished"])delete a["_"+u+"autoBinFinished"];else{x=w.traces;var j=[],I=!0,N=!1,W=!1;for(c=0;c<x.length;c++)if((p=x[c]).visible){var F=w.dirs[c];g=p["_"+F+"pos0"]=l.makeCalcdata(p,F),j=k.concat(j,g),delete p["_"+u+"autoBinFinished"],a.visible===!0&&(I?I=!1:(delete p._autoBin,p["_"+u+"autoBinFinished"]=1),s.traceIs(p,"2dMap")&&(N=!0),p.type==="histogram2dcontour"&&(W=!0))}v=x[0][u+"calendar"];var U=T.autoBin(j,l,w.nbins,N,v,w.sizeFound&&w.size),H=x[0]._autoBin={};if(y=H[w.dirs[0]]={},W&&(w.size||(U.start=O(T.tickIncrement(C(U.start),U.size,!0,v))),w.end===void 0&&(U.end=O(T.tickIncrement(C(U.end),U.size,!1,v)))),E&&!s.traceIs(a,"2dMap")&&U._dataSpan===0&&l.type!=="category"&&l.type!=="multicategory"&&a.bingroup===""&&a.xbins===void 0){if(h)return[U,g,!0];U=function(me,be,ke,ze,ve){var oe,ie,he,Se=me._fullLayout,ye=function(Ye,tt){for(var nt=tt.xaxis,ht=tt.yaxis,vt=tt.orientation,pt=[],Qe=Ye._fullData,Ke=0;Ke<Qe.length;Ke++){var Mt=Qe[Ke];Mt.type==="histogram"&&Mt.visible===!0&&Mt.orientation===vt&&Mt.xaxis===nt&&Mt.yaxis===ht&&pt.push(Mt)}return pt}(me,be),we=!1,Me=1/0,Oe=[be];for(oe=0;oe<ye.length;oe++)if((ie=ye[oe])===be)we=!0;else if(we){var Ie=n(me,ie,ke,ze,!0),de=Ie[0],_e=Ie[2];ie["_"+ze+"autoBinFinished"]=1,ie["_"+ze+"pos0"]=Ie[1],_e?Oe.push(ie):Me=Math.min(Me,de.size)}else he=Se._histogramBinOpts[ie["_"+ze+"bingroup"]],Me=Math.min(Me,he.size||ie[ve].size);var Ae=new Array(Oe.length);for(oe=0;oe<Oe.length;oe++)for(var Pe=Oe[oe]["_"+ze+"pos0"],Ee=0;Ee<Pe.length;Ee++)if(Pe[Ee]!==void 0){Ae[oe]=Pe[Ee];break}for(isFinite(Me)||(Me=k.distinctVals(Ae).minDiff),oe=0;oe<Oe.length;oe++){var Fe=(ie=Oe[oe])[ze+"calendar"],Ve={start:ke.c2r(Ae[oe]-Me/2,0,Fe),end:ke.c2r(Ae[oe]+Me/2,0,Fe),size:Me};ie._input[ve]=ie[ve]=Ve,(he=Se._histogramBinOpts[ie["_"+ze+"bingroup"]])&&k.extendFlat(he,Ve)}return be[ve]}(r,a,l,u,_)}(m=p.cumulative||{}).enabled&&m.currentbin!=="include"&&(m.direction==="decreasing"?U.start=O(T.tickIncrement(C(U.start),U.size,!0,v)):U.end=O(T.tickIncrement(C(U.end),U.size,!1,v))),w.size=U.size,w.sizeFound||(y.size=U.size,k.nestedProperty(x[0],_+".size").set(U.size)),z("start",w,U),z("end",w,U)}g=a["_"+u+"pos0"],delete a["_"+u+"pos0"];var ne=a._input[_]||{},$=k.extendFlat({},w),K=w.start,Q=l.r2l(ne.start),Z=Q!==void 0;if((w.startFound||Z)&&Q!==l.r2l(K)){var X=Z?Q:k.aggNums(Math.min,null,g),te={type:l.type==="category"||l.type==="multicategory"?"linear":l.type,r2l:l.r2l,dtick:w.size,tick0:K,calendar:v,range:[X,T.tickIncrement(X,w.size,!1,v)].map(l.l2r)},ae=T.tickFirst(te);ae>l.r2l(X)&&(ae=T.tickIncrement(ae,w.size,!0,v)),$.start=l.l2r(ae),Z||k.nestedProperty(a,_+".start").set($.start)}var se=w.end,ce=l.r2l(ne.end),fe=ce!==void 0;if((w.endFound||fe)&&ce!==l.r2l(se)){var pe=fe?ce:k.aggNums(Math.max,null,g);$.end=l.l2r(pe),fe||k.nestedProperty(a,_+".start").set($.end)}var ge="autobin"+u;return a._input[ge]===!1&&(a._input[_]=k.extendFlat({},a[_]||{}),delete a._input[ge],delete a[ge]),[$,g]}ee.exports={calc:function(r,a){var l,u,h,c,x=[],p=[],v=a.orientation==="h",g=T.getFromId(r,v?a.yaxis:a.xaxis),y=v?"y":"x",m={x:"y",y:"x"}[y],_=a[y+"calendar"],d=a.cumulative,S=n(r,a,g,y),w=S[0],E=S[1],C=typeof w.size=="string",O=[],P=C?O:w,z=[],j=[],I=[],N=0,W=a.histnorm,F=a.histfunc,U=W.indexOf("density")!==-1;d.enabled&&U&&(W=W.replace(/ ?density$/,""),U=!1);var H,ne=F==="max"||F==="min"?null:0,$=f.count,K=o[W],Q=!1,Z=function(ie){return g.r2c(ie,0,_)};for(k.isArrayOrTypedArray(a[m])&&F!=="count"&&(H=a[m],Q=F==="avg",$=f[F]),l=Z(w.start),h=Z(w.end)+(l-T.tickIncrement(l,w.size,!1,_))/1e6;l<h&&x.length<1e6&&(u=T.tickIncrement(l,w.size,!1,_),x.push((l+u)/2),p.push(ne),I.push([]),O.push(l),U&&z.push(1/(u-l)),Q&&j.push(0),!(u<=l));)l=u;O.push(l),C||g.type!=="date"||(P={start:Z(P.start),end:Z(P.end),size:P.size}),r._fullLayout._roundFnOpts||(r._fullLayout._roundFnOpts={});var X=a["_"+y+"bingroup"],te={leftGap:1/0,rightGap:1/0};X&&(r._fullLayout._roundFnOpts[X]||(r._fullLayout._roundFnOpts[X]=te),te=r._fullLayout._roundFnOpts[X]);var ae,se=p.length,ce=!0,fe=te.leftGap,pe=te.rightGap,ge={};for(l=0;l<E.length;l++){var me=E[l];(c=k.findBin(me,P))>=0&&c<se&&(N+=$(c,l,p,H,j),ce&&I[c].length&&me!==E[I[c][0]]&&(ce=!1),I[c].push(l),ge[l]=c,fe=Math.min(fe,me-O[c]),pe=Math.min(pe,O[c+1]-me))}te.leftGap=fe,te.rightGap=pe,ce||(ae=function(ie,he){return function(){var Se=r._fullLayout._roundFnOpts[X];return i(Se.leftGap,Se.rightGap,O,g,_)(ie,he)}}),Q&&(N=t(p,j)),K&&K(p,N,z),d.enabled&&function(ie,he,Se){var ye,we,Me;function Oe(de){Me=ie[de],ie[de]/=2}function Ie(de){we=ie[de],ie[de]=Me+we/2,Me+=we}if(Se==="half")if(he==="increasing")for(Oe(0),ye=1;ye<ie.length;ye++)Ie(ye);else for(Oe(ie.length-1),ye=ie.length-2;ye>=0;ye--)Ie(ye);else if(he==="increasing"){for(ye=1;ye<ie.length;ye++)ie[ye]+=ie[ye-1];Se==="exclude"&&(ie.unshift(0),ie.pop())}else{for(ye=ie.length-2;ye>=0;ye--)ie[ye]+=ie[ye+1];Se==="exclude"&&(ie.push(0),ie.shift())}}(p,d.direction,d.currentbin);var be=Math.min(x.length,p.length),ke=[],ze=0,ve=be-1;for(l=0;l<be;l++)if(p[l]){ze=l;break}for(l=be-1;l>=ze;l--)if(p[l]){ve=l;break}for(l=ze;l<=ve;l++)if(M(x[l])&&M(p[l])){var oe={p:x[l],s:p[l],b:0};d.enabled||(oe.pts=I[l],ce?oe.ph0=oe.ph1=I[l].length?E[I[l][0]]:x[l]:(a._computePh=!0,oe.ph0=ae(O[l]),oe.ph1=ae(O[l+1],!0))),ke.push(oe)}return ke.length===1&&(ke[0].width1=T.tickIncrement(ke[0].p,w.size,!1,_)-ke[0].p),b(ke,a),k.isArrayOrTypedArray(a.selectedpoints)&&k.tagSelected(ke,a,ge),ke},calcAllAutoBins:n}},73316:function(ee){ee.exports={eventDataKeys:["binNumber"]}},80536:function(ee,R,e){var M=e(3400),k=e(79811),s=e(24040).traceIs,T=e(20011),b=e(31508).validateCornerradius,f=M.nestedProperty,o=e(71888).getAxisGroup,t=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],i=["x","y"];ee.exports=function(n,r){var a,l,u,h,c,x,p,v=r._histogramBinOpts={},g=[],y={},m=[];function _(ne,$){return M.coerce(a._input,a,a._module.attributes,ne,$)}function d(ne){return ne.orientation==="v"?"x":"y"}function S(ne,$,K){var Q=ne.uid+"__"+K;$||($=Q);var Z=function(se,ce){return k.getFromTrace({_fullLayout:r},se,ce).type}(ne,K),X=ne[K+"calendar"]||"",te=v[$],ae=!0;te&&(Z===te.axType&&X===te.calendar?(ae=!1,te.traces.push(ne),te.dirs.push(K)):($=Q,Z!==te.axType&&M.warn(["Attempted to group the bins of trace",ne.index,"set on a","type:"+Z,"axis","with bins on","type:"+te.axType,"axis."].join(" ")),X!==te.calendar&&M.warn(["Attempted to group the bins of trace",ne.index,"set with a",X,"calendar","with bins",te.calendar?"on a "+te.calendar+" calendar":"w/o a set calendar"].join(" ")))),ae&&(v[$]={traces:[ne],dirs:[K],axType:Z,calendar:ne[K+"calendar"]||""}),ne["_"+K+"bingroup"]=$}for(c=0;c<n.length;c++)if(a=n[c],s(a,"histogram")){if(g.push(a),delete a._xautoBinFinished,delete a._yautoBinFinished,a.type==="histogram"){var w=_("marker.cornerradius",r.barcornerradius);a.marker&&(a.marker.cornerradius=b(w))}s(a,"2dMap")||T(a._input,a,r,_)}var E=r._alignmentOpts||{};for(c=0;c<g.length;c++){if(a=g[c],u="",!s(a,"2dMap")){if(h=d(a),r.barmode==="group"&&a.alignmentgroup){var C=a[h+"axis"],O=o(r,C)+a.orientation;(E[O]||{})[a.alignmentgroup]&&(u=O)}u||r.barmode==="overlay"||(u=o(r,a.xaxis)+o(r,a.yaxis)+d(a))}u?(y[u]||(y[u]=[]),y[u].push(a)):m.push(a)}for(u in y)if((l=y[u]).length!==1){var P=!1;for(l.length&&(a=l[0],P=_("bingroup")),u=P||u,c=0;c<l.length;c++){var z=(a=l[c])._input.bingroup;z&&z!==u&&M.warn(["Trace",a.index,"must match","within bingroup",u+".","Ignoring its bingroup:",z,"setting."].join(" ")),a.bingroup=u,S(a,u,d(a))}}else m.push(l[0]);for(c=0;c<m.length;c++){a=m[c];var j=_("bingroup");if(s(a,"2dMap"))for(p=0;p<2;p++){var I=_((h=i[p])+"bingroup",j?j+"__"+h:null);S(a,I,h)}else S(a,j,d(a))}for(u in v){var N=v[u];for(l=N.traces,x=0;x<t.length;x++){var W,F,U=t[x],H=U.name;if(H!=="nbins"||!N.sizeFound){for(c=0;c<l.length;c++){if(a=l[c],h=N.dirs[c],W=U.aStr[h],f(a._input,W).get()!==void 0){N[H]=_(W),N[H+"Found"]=!0;break}(F=(a._autoBin||{})[h]||{})[H]&&f(a,W).set(F[H])}if(H==="start"||H==="end")for(;c<l.length;c++)(a=l[c])["_"+h+"bingroup"]&&_(W,(F=(a._autoBin||{})[h]||{})[H]);H!=="nbins"||N.sizeFound||N.nbinsFound||(a=l[0],N[H]=_(W))}}}}},6616:function(ee,R,e){var M=e(24040),k=e(3400),s=e(76308),T=e(31508).handleText,b=e(55592),f=e(40196);ee.exports=function(o,t,i,n){function r(y,m){return k.coerce(o,t,f,y,m)}var a=r("x"),l=r("y");r("cumulative.enabled")&&(r("cumulative.direction"),r("cumulative.currentbin")),r("text");var u=r("textposition");T(o,t,n,r,u,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),r("hovertext"),r("hovertemplate"),r("xhoverformat"),r("yhoverformat");var h=r("orientation",l&&!a?"h":"v"),c=h==="v"?"x":"y",x=h==="v"?"y":"x",p=a&&l?Math.min(k.minRowLength(a)&&k.minRowLength(l)):k.minRowLength(t[c]||[]);if(p){t._length=p,M.getComponentMethod("calendars","handleTraceDefaults")(o,t,["x","y"],n),t[x]&&r("histfunc"),r("histnorm"),r("autobin"+c),b(o,t,r,i,n),k.coerceSelectionMarkerOpacity(t,r);var v=(t.marker.line||{}).color,g=M.getComponentMethod("errorbars","supplyDefaults");g(o,t,v||s.defaultLine,{axis:"y"}),g(o,t,v||s.defaultLine,{axis:"x",inherit:"y"}),r("zorder")}else t.visible=!1}},84980:function(ee){ee.exports=function(R,e,M,k,s){if(R.x="xVal"in e?e.xVal:e.x,R.y="yVal"in e?e.yVal:e.y,"zLabelVal"in e&&(R.z=e.zLabelVal),e.xa&&(R.xaxis=e.xa),e.ya&&(R.yaxis=e.ya),!(M.cumulative||{}).enabled){var T,b=Array.isArray(s)?k[0].pts[s[0]][s[1]]:k[s].pts;if(R.pointNumbers=b,R.binNumber=R.pointNumber,delete R.pointNumber,delete R.pointIndex,M._indexToPoints){T=[];for(var f=0;f<b.length;f++)T=T.concat(M._indexToPoints[b[f]])}else T=b;R.pointIndices=T}return R}},43339:function(ee,R,e){var M=e(63400).hoverPoints,k=e(54460).hoverLabelText;ee.exports=function(s,T,b,f,o){var t=M(s,T,b,f,o);if(t){var i=(s=t[0]).cd[s.index],n=s.cd[0].trace;if(!n.cumulative.enabled){var r=n.orientation==="h"?"y":"x";s[r+"Label"]=k(s[r+"a"],[i.ph0,i.ph1],n[r+"hoverformat"])}return t}}},42600:function(ee,R,e){ee.exports={attributes:e(40196),layoutAttributes:e(39324),supplyDefaults:e(6616),crossTraceDefaults:e(80536),supplyLayoutDefaults:e(37156),calc:e(35852).calc,crossTraceCalc:e(96376).crossTraceCalc,plot:e(98184).plot,layerName:"barlayer",style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,colorbar:e(5528),hoverPoints:e(43339),selectPoints:e(45784),eventData:e(84980),moduleType:"trace",name:"histogram",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},10648:function(ee){ee.exports={percent:function(R,e){for(var M=R.length,k=100/e,s=0;s<M;s++)R[s]*=k},probability:function(R,e){for(var M=R.length,k=0;k<M;k++)R[k]/=e},density:function(R,e,M,k){var s=R.length;k=k||1;for(var T=0;T<s;T++)R[T]*=M[T]*k},"probability density":function(R,e,M,k){var s=R.length;k&&(e/=k);for(var T=0;T<s;T++)R[T]*=M[T]/e}}},37008:function(ee,R,e){var M=e(40196),k=e(11120),s=e(83328),T=e(45464),b=e(29736).axisHoverFormat,f=e(21776).Ks,o=e(21776).Gw,t=e(49084),i=e(92880).extendFlat;ee.exports=i({x:M.x,y:M.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:M.histnorm,histfunc:M.histfunc,nbinsx:M.nbinsx,xbins:k("x"),nbinsy:M.nbinsy,ybins:k("y"),autobinx:M.autobinx,autobiny:M.autobiny,bingroup:i({},M.bingroup,{}),xbingroup:i({},M.bingroup,{}),ybingroup:i({},M.bingroup,{}),xgap:s.xgap,ygap:s.ygap,zsmooth:s.zsmooth,xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z",1),hovertemplate:f({},{keys:"z"}),texttemplate:o({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:s.textfont,showlegend:i({},T.showlegend,{dflt:!1})},t("",{cLetter:"z",autoColorDflt:!1}))},55480:function(ee,R,e){var M=e(3400),k=e(54460),s=e(16964),T=e(10648),b=e(2e3),f=e(67712),o=e(35852).calcAllAutoBins;function t(r,a,l,u){var h,c=new Array(r);if(u)for(h=0;h<r;h++)c[h]=1/(a[h+1]-a[h]);else{var x=1/l;for(h=0;h<r;h++)c[h]=x}return c}function i(r,a){return{start:r(a.start),end:r(a.end),size:a.size}}function n(r,a,l,u,h,c){var x,p=r.length-1,v=new Array(p),g=f(l,u,r,h,c);for(x=0;x<p;x++){var y=(a||[])[x];v[x]=y===void 0?[g(r[x]),g(r[x+1],!0)]:[y,y]}return v}ee.exports=function(r,a){var l,u,h,c,x=k.getFromId(r,a.xaxis),p=k.getFromId(r,a.yaxis),v=a.xcalendar,g=a.ycalendar,y=function(ht){return x.r2c(ht,0,v)},m=function(ht){return p.r2c(ht,0,g)},_=o(r,a,x,"x"),d=_[0],S=_[1],w=o(r,a,p,"y"),E=w[0],C=w[1],O=a._length;S.length>O&&S.splice(O,S.length-O),C.length>O&&C.splice(O,C.length-O);var P=[],z=[],j=[],I=typeof d.size=="string",N=typeof E.size=="string",W=[],F=[],U=I?W:d,H=N?F:E,ne=0,$=[],K=[],Q=a.histnorm,Z=a.histfunc,X=Q.indexOf("density")!==-1,te=Z==="max"||Z==="min"?null:0,ae=s.count,se=T[Q],ce=!1,fe=[],pe=[],ge="z"in a?a.z:"marker"in a&&Array.isArray(a.marker.color)?a.marker.color:"";ge&&Z!=="count"&&(ce=Z==="avg",ae=s[Z]);var me=d.size,be=y(d.start),ke=y(d.end)+(be-k.tickIncrement(be,me,!1,v))/1e6;for(l=be;l<ke;l=k.tickIncrement(l,me,!1,v))z.push(te),W.push(l),ce&&j.push(0);W.push(l);var ze,ve=z.length,oe=(l-be)/ve,ie=(ze=be+oe/2,x.c2r(ze,0,v)),he=E.size,Se=m(E.start),ye=m(E.end)+(Se-k.tickIncrement(Se,he,!1,g))/1e6;for(l=Se;l<ye;l=k.tickIncrement(l,he,!1,g)){P.push(z.slice()),F.push(l);var we=new Array(ve);for(u=0;u<ve;u++)we[u]=[];K.push(we),ce&&$.push(j.slice())}F.push(l);var Me=P.length,Oe=(l-Se)/Me,Ie=function(ht){return p.c2r(ht,0,g)}(Se+Oe/2);X&&(fe=t(z.length,U,oe,I),pe=t(P.length,H,Oe,N)),I||x.type!=="date"||(U=i(y,U)),N||p.type!=="date"||(H=i(m,H));var de=!0,_e=!0,Ae=new Array(ve),Pe=new Array(Me),Ee=1/0,Fe=1/0,Ve=1/0,Ye=1/0;for(l=0;l<O;l++){var tt=S[l],nt=C[l];h=M.findBin(tt,U),c=M.findBin(nt,H),h>=0&&h<ve&&c>=0&&c<Me&&(ne+=ae(h,l,P[c],ge,$[c]),K[c][h].push(l),de&&(Ae[h]===void 0?Ae[h]=tt:Ae[h]!==tt&&(de=!1)),_e&&(Pe[c]===void 0?Pe[c]=nt:Pe[c]!==nt&&(_e=!1)),Ee=Math.min(Ee,tt-W[h]),Fe=Math.min(Fe,W[h+1]-tt),Ve=Math.min(Ve,nt-F[c]),Ye=Math.min(Ye,F[c+1]-nt))}if(ce)for(c=0;c<Me;c++)ne+=b(P[c],$[c]);if(se)for(c=0;c<Me;c++)se(P[c],ne,fe,pe[c]);return{x:S,xRanges:n(W,de&&Ae,Ee,Fe,x,v),x0:ie,dx:oe,y:C,yRanges:n(F,_e&&Pe,Ve,Ye,p,g),y0:Ie,dy:Oe,z:P,pts:K}}},99784:function(ee,R,e){var M=e(3400),k=e(56408),s=e(82748),T=e(27260),b=e(39096),f=e(37008);ee.exports=function(o,t,i,n){function r(a,l){return M.coerce(o,t,f,a,l)}k(o,t,r,n),t.visible!==!1&&(s(o,t,r,n),T(o,t,n,r,{prefix:"",cLetter:"z"}),r("hovertemplate"),b(r,n),r("xhoverformat"),r("yhoverformat"))}},59576:function(ee,R,e){var M=e(55512),k=e(54460).hoverLabelText;ee.exports=function(s,T,b,f,o){var t=M(s,T,b,f,o);if(t){var i=(s=t[0]).index,n=i[0],r=i[1],a=s.cd[0],l=a.trace,u=a.xRanges[r],h=a.yRanges[n];return s.xLabel=k(s.xa,[u[0],u[1]],l.xhoverformat),s.yLabel=k(s.ya,[h[0],h[1]],l.yhoverformat),t}}},21536:function(ee,R,e){ee.exports={attributes:e(37008),supplyDefaults:e(99784),crossTraceDefaults:e(80536),calc:e(19512),plot:e(41420),layerName:"heatmaplayer",colorbar:e(96288),style:e(41648),hoverPoints:e(59576),eventData:e(84980),moduleType:"trace",name:"histogram2d",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},56408:function(ee,R,e){var M=e(24040),k=e(3400);ee.exports=function(s,T,b,f){var o=b("x"),t=b("y"),i=k.minRowLength(o),n=k.minRowLength(t);i&&n?(T._length=Math.min(i,n),M.getComponentMethod("calendars","handleTraceDefaults")(s,T,["x","y"],f),(b("z")||b("marker.color"))&&b("histfunc"),b("histnorm"),b("autobinx"),b("autobiny")):T.visible=!1}},81220:function(ee,R,e){var M=e(37008),k=e(67104),s=e(49084),T=e(29736).axisHoverFormat,b=e(92880).extendFlat;ee.exports=b({x:M.x,y:M.y,z:M.z,marker:M.marker,histnorm:M.histnorm,histfunc:M.histfunc,nbinsx:M.nbinsx,xbins:M.xbins,nbinsy:M.nbinsy,ybins:M.ybins,autobinx:M.autobinx,autobiny:M.autobiny,bingroup:M.bingroup,xbingroup:M.xbingroup,ybingroup:M.ybingroup,autocontour:k.autocontour,ncontours:k.ncontours,contours:k.contours,line:{color:k.line.color,width:b({},k.line.width,{dflt:.5}),dash:k.line.dash,smoothing:k.line.smoothing,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:M.hovertemplate,texttemplate:k.texttemplate,textfont:k.textfont},s("",{cLetter:"z",editTypeOverride:"calc"}))},3704:function(ee,R,e){var M=e(3400),k=e(56408),s=e(84952),T=e(97680),b=e(39096),f=e(81220);ee.exports=function(o,t,i,n){function r(a,l){return M.coerce(o,t,f,a,l)}k(o,t,r,n),t.visible!==!1&&(s(o,t,r,function(a){return M.coerce2(o,t,f,a)}),T(o,t,r,n),r("xhoverformat"),r("yhoverformat"),r("hovertemplate"),t.contours&&t.contours.coloring==="heatmap"&&b(r,n))}},65664:function(ee,R,e){ee.exports={attributes:e(81220),supplyDefaults:e(3704),crossTraceDefaults:e(80536),calc:e(20688),plot:e(23676).plot,layerName:"contourlayer",style:e(52440),colorbar:e(55296),hoverPoints:e(38200),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},97376:function(ee,R,e){var M=e(21776).Ks,k=e(21776).Gw,s=e(49084),T=e(86968).u,b=e(74996),f=e(424),o=e(40516),t=e(32984),i=e(92880).extendFlat,n=e(98192).c;ee.exports={labels:f.labels,parents:f.parents,values:f.values,branchvalues:f.branchvalues,count:f.count,level:f.level,maxdepth:f.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:o.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:i({colors:f.marker.colors,line:f.marker.line,pattern:n,editType:"calc"},s("marker",{colorAttr:"colors",anim:!1})),leaf:f.leaf,pathbar:o.pathbar,text:b.text,textinfo:f.textinfo,texttemplate:k({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),hovertext:b.hovertext,hoverinfo:f.hoverinfo,hovertemplate:M({},{keys:t.eventDataKeys}),textfont:b.textfont,insidetextfont:b.insidetextfont,outsidetextfont:o.outsidetextfont,textposition:o.textposition,sort:b.sort,root:f.root,domain:T({name:"icicle",trace:!0,editType:"calc"})}},59564:function(ee,R,e){var M=e(7316);R.name="icicle",R.plot=function(k,s,T,b){M.plotBasePlot(R.name,k,s,T,b)},R.clean=function(k,s,T,b){M.cleanBasePlot(R.name,k,s,T,b)}},73876:function(ee,R,e){var M=e(3776);R.r=function(k,s){return M.calc(k,s)},R.q=function(k){return M._runCrossTraceCalc("icicle",k)}},7045:function(ee,R,e){var M=e(3400),k=e(97376),s=e(76308),T=e(86968).Q,b=e(31508).handleText,f=e(78048).TEXTPAD,o=e(74174).handleMarkerDefaults,t=e(8932),i=t.hasColorscale,n=t.handleDefaults;ee.exports=function(r,a,l,u){function h(m,_){return M.coerce(r,a,k,m,_)}var c=h("labels"),x=h("parents");if(c&&c.length&&x&&x.length){var p=h("values");p&&p.length?h("branchvalues"):h("count"),h("level"),h("maxdepth"),h("tiling.orientation"),h("tiling.flip"),h("tiling.pad");var v=h("text");h("texttemplate"),a.texttemplate||h("textinfo",M.isArrayOrTypedArray(v)?"text+label":"label"),h("hovertext"),h("hovertemplate");var g=h("pathbar.visible");b(r,a,u,h,"auto",{hasPathbar:g,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),h("textposition"),o(r,a,u,h);var y=a._hasColorscale=i(r,"marker","colors")||(r.marker||{}).coloraxis;y&&n(r,a,u,h,{prefix:"marker.",cLetter:"c"}),h("leaf.opacity",y?1:.7),a._hovered={marker:{line:{width:2,color:s.contrast(u.paper_bgcolor)}}},g&&(h("pathbar.thickness",a.pathbar.textfont.size+2*f),h("pathbar.side"),h("pathbar.edgeshape")),h("sort"),h("root.color"),T(a,u,h),a._length=null}else a.visible=!1}},67880:function(ee,R,e){var M=e(33428),k=e(3400),s=e(43616),T=e(72736),b=e(25132),f=e(47192).styleOne,o=e(32984),t=e(78176),i=e(45716),n=e(96488).formatSliceLabel,r=!1;ee.exports=function(a,l,u,h,c){var x=c.width,p=c.height,v=c.viewX,g=c.viewY,y=c.pathSlice,m=c.toMoveInsideSlice,_=c.strTransform,d=c.hasTransition,S=c.handleSlicesExit,w=c.makeUpdateSliceInterpolator,E=c.makeUpdateTextInterpolator,C=c.prevEntry,O=a._context.staticPlot,P=a._fullLayout,z=l[0].trace,j=z.textposition.indexOf("left")!==-1,I=z.textposition.indexOf("right")!==-1,N=z.textposition.indexOf("bottom")!==-1,W=b(u,[x,p],{flipX:z.tiling.flip.indexOf("x")>-1,flipY:z.tiling.flip.indexOf("y")>-1,orientation:z.tiling.orientation,pad:{inner:z.tiling.pad},maxDepth:z._maxDepth}).descendants(),F=1/0,U=-1/0;W.forEach(function(Q){var Z=Q.depth;Z>=z._maxDepth?(Q.x0=Q.x1=(Q.x0+Q.x1)/2,Q.y0=Q.y1=(Q.y0+Q.y1)/2):(F=Math.min(F,Z),U=Math.max(U,Z))}),h=h.data(W,t.getPtId),z._maxVisibleLayers=isFinite(U)?U-F+1:0,h.enter().append("g").classed("slice",!0),S(h,r,{},[x,p],y),h.order();var H=null;if(d&&C){var ne=t.getPtId(C);h.each(function(Q){H===null&&t.getPtId(Q)===ne&&(H={x0:Q.x0,x1:Q.x1,y0:Q.y0,y1:Q.y1})})}var $=function(){return H||{x0:0,x1:x,y0:0,y1:p}},K=h;return d&&(K=K.transition().each("end",function(){var Q=M.select(this);t.setSliceCursor(Q,a,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),K.each(function(Q){Q._x0=v(Q.x0),Q._x1=v(Q.x1),Q._y0=g(Q.y0),Q._y1=g(Q.y1),Q._hoverX=v(Q.x1-z.tiling.pad),Q._hoverY=g(N?Q.y1-z.tiling.pad/2:Q.y0+z.tiling.pad/2);var Z=M.select(this),X=k.ensureSingle(Z,"path","surface",function(ce){ce.style("pointer-events",O?"none":"all")});d?X.transition().attrTween("d",function(ce){var fe=w(ce,r,$(),[x,p],{orientation:z.tiling.orientation,flipX:z.tiling.flip.indexOf("x")>-1,flipY:z.tiling.flip.indexOf("y")>-1});return function(pe){return y(fe(pe))}}):X.attr("d",y),Z.call(i,u,a,l,{styleOne:f,eventDataKeys:o.eventDataKeys,transitionTime:o.CLICK_TRANSITION_TIME,transitionEasing:o.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,a,{isTransitioning:a._transitioning}),X.call(f,Q,z,a,{hovered:!1}),Q.x0===Q.x1||Q.y0===Q.y1?Q._text="":Q._text=n(Q,u,z,l,P)||"";var te=k.ensureSingle(Z,"g","slicetext"),ae=k.ensureSingle(te,"text","",function(ce){ce.attr("data-notex",1)}),se=k.ensureUniformFontSize(a,t.determineTextFont(z,Q,P.font));ae.text(Q._text||" ").classed("slicetext",!0).attr("text-anchor",I?"end":j?"start":"middle").call(s.font,se).call(T.convertToTspans,a),Q.textBB=s.bBox(ae.node()),Q.transform=m(Q,{fontSize:se.size}),Q.transform.fontSize=se.size,d?ae.transition().attrTween("transform",function(ce){var fe=E(ce,r,$(),[x,p]);return function(pe){return _(fe(pe))}}):ae.attr("transform",_(Q))}),H}},29044:function(ee,R,e){ee.exports={moduleType:"trace",name:"icicle",basePlotModule:e(59564),categories:[],animatable:!0,attributes:e(97376),layoutAttributes:e(90676),supplyDefaults:e(7045),supplyLayoutDefaults:e(4304),calc:e(73876).r,crossTraceCalc:e(73876).q,plot:e(38364),style:e(47192).style,colorbar:e(5528),meta:{}}},90676:function(ee){ee.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},4304:function(ee,R,e){var M=e(3400),k=e(90676);ee.exports=function(s,T){function b(f,o){return M.coerce(s,T,k,f,o)}b("iciclecolorway",T.colorway),b("extendiciclecolors")}},25132:function(ee,R,e){var M=e(74148),k=e(83024);ee.exports=function(s,T,b){var f=b.flipX,o=b.flipY,t=b.orientation==="h",i=b.maxDepth,n=T[0],r=T[1];i&&(n=(s.height+1)*T[0]/Math.min(s.height+1,i),r=(s.height+1)*T[1]/Math.min(s.height+1,i));var a=M.partition().padding(b.pad.inner).size(t?[T[1],n]:[T[0],r])(s);return(t||f||o)&&k(a,T,{swapXY:t,flipX:f,flipY:o}),a}},38364:function(ee,R,e){var M=e(95808),k=e(67880);ee.exports=function(s,T,b,f){return M(s,T,b,f,{type:"icicle",drawDescendants:k})}},47192:function(ee,R,e){var M=e(33428),k=e(76308),s=e(3400),T=e(82744).resizeText,b=e(60404);function f(o,t,i,n){var r=t.data.data,a=!t.children,l=r.i,u=s.castOption(i,l,"marker.line.color")||k.defaultLine,h=s.castOption(i,l,"marker.line.width")||0;o.call(b,t,i,n).style("stroke-width",h).call(k.stroke,u).style("opacity",a?i.leaf.opacity:null)}ee.exports={style:function(o){var t=o._fullLayout._iciclelayer.selectAll(".trace");T(o,t,"icicle"),t.each(function(i){var n=M.select(this),r=i[0].trace;n.style("opacity",r.opacity),n.selectAll("path.surface").each(function(a){M.select(this).call(f,a,r,o)})})},styleOne:f}},95188:function(ee,R,e){for(var M=e(45464),k=e(52904).zorder,s=e(21776).Ks,T=e(92880).extendFlat,b=e(47797).colormodel,f=["rgb","rgba","rgba256","hsl","hsla"],o=[],t=[],i=0;i<f.length;i++){var n=b[f[i]];o.push("For the `"+f[i]+"` colormodel, it is ["+(n.zminDflt||n.min).join(", ")+"]."),t.push("For the `"+f[i]+"` colormodel, it is ["+(n.zmaxDflt||n.max).join(", ")+"].")}ee.exports=T({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:f,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:T({},M.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:s({},{keys:["z","color","colormodel"]}),zorder:k,transforms:void 0})},93336:function(ee,R,e){var M=e(3400),k=e(47797),s=e(38248),T=e(54460),b=e(3400).maxRowLength,f=e(18712).i;function o(i,n,r,a){return function(l){return M.constrain((l-i)*n,r,a)}}function t(i,n){return function(r){return M.constrain(r,i,n)}}ee.exports=function(i,n){var r,a;if(n._hasZ)r=n.z.length,a=b(n.z);else if(n._hasSource){var l=f(n.source);r=l.height,a=l.width}var u,h=T.getFromId(i,n.xaxis||"x"),c=T.getFromId(i,n.yaxis||"y"),x=h.d2c(n.x0)-n.dx/2,p=c.d2c(n.y0)-n.dy/2,v=[x,x+a*n.dx],g=[p,p+r*n.dy];if(h&&h.type==="log")for(u=0;u<a;u++)v.push(x+u*n.dx);if(c&&c.type==="log")for(u=0;u<r;u++)g.push(p+u*n.dy);return n._extremes[h._id]=T.findExtremes(h,v),n._extremes[c._id]=T.findExtremes(c,g),n._scaler=function(y){var m=k.colormodel[y.colormodel],_=(m.colormodel||y.colormodel).length;y._sArray=[];for(var d=0;d<_;d++)m.min[d]!==y.zmin[d]||m.max[d]!==y.zmax[d]?y._sArray.push(o(y.zmin[d],(m.max[d]-m.min[d])/(y.zmax[d]-y.zmin[d]),m.min[d],m.max[d])):y._sArray.push(t(m.min[d],m.max[d]));return function(S){for(var w=S.slice(0,_),E=0;E<_;E++){var C=w[E];if(!s(C))return!1;w[E]=y._sArray[E](C)}return w}}(n),[{x0:x,y0:p,z:n.z,w:a,h:r}]}},47797:function(ee){ee.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(R){return R.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(R){return R.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(R){return R.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(R){var e=R.slice(0,3);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(R){var e=R.slice(0,4);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["","%","%",""]}}}},13188:function(ee,R,e){var M=e(3400),k=e(95188),s=e(47797),T=e(81792).IMAGE_URL_PREFIX;ee.exports=function(b,f){function o(n,r){return M.coerce(b,f,k,n,r)}o("source"),f.source&&!f.source.match(T)&&delete f.source,f._hasSource=!!f.source;var t,i=o("z");f._hasZ=!(i===void 0||!i.length||!i[0]||!i[0].length),f._hasZ||f._hasSource?(o("x0"),o("y0"),o("dx"),o("dy"),f._hasZ?(o("colormodel","rgb"),o("zmin",(t=s.colormodel[f.colormodel]).zminDflt||t.min),o("zmax",t.zmaxDflt||t.max)):f._hasSource&&(f.colormodel="rgba256",t=s.colormodel[f.colormodel],f.zmin=t.zminDflt,f.zmax=t.zmaxDflt),o("zsmooth"),o("text"),o("hovertext"),o("hovertemplate"),f._length=null,o("zorder")):f.visible=!1}},79972:function(ee){ee.exports=function(R,e){return"xVal"in e&&(R.x=e.xVal),"yVal"in e&&(R.y=e.yVal),e.xa&&(R.xaxis=e.xa),e.ya&&(R.yaxis=e.ya),R.color=e.color,R.colormodel=e.trace.colormodel,R.z||(R.z=e.color),R}},18712:function(ee,R,e){var M=e(19480),k=e(81792).IMAGE_URL_PREFIX,s=e(33576).Buffer;R.i=function(T){var b=T.replace(k,""),f=new s(b,"base64");return M(f)}},24892:function(ee,R,e){var M=e(93024),k=e(3400),s=k.isArrayOrTypedArray,T=e(47797);ee.exports=function(b,f,o){var t=b.cd[0],i=t.trace,n=b.xa,r=b.ya;if(!(M.inbox(f-t.x0,f-(t.x0+t.w*i.dx),0)>0||M.inbox(o-t.y0,o-(t.y0+t.h*i.dy),0)>0)){var a,l=Math.floor((f-t.x0)/i.dx),u=Math.floor(Math.abs(o-t.y0)/i.dy);if(i._hasZ?a=t.z[u][l]:i._hasSource&&(a=i._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(l,u,1,1).data),a){var h,c=t.hi||i.hoverinfo;if(c){var x=c.split("+");x.indexOf("all")!==-1&&(x=["color"]),x.indexOf("color")!==-1&&(h=!0)}var p,v=T.colormodel[i.colormodel],g=v.colormodel||i.colormodel,y=g.length,m=i._scaler(a),_=v.suffix,d=[];(i.hovertemplate||h)&&(d.push("["+[m[0]+_[0],m[1]+_[1],m[2]+_[2]].join(", ")),y===4&&d.push(", "+m[3]+_[3]),d.push("]"),d=d.join(""),b.extraText=g.toUpperCase()+": "+d),s(i.hovertext)&&s(i.hovertext[u])?p=i.hovertext[u][l]:s(i.text)&&s(i.text[u])&&(p=i.text[u][l]);var S=r.c2p(t.y0+(u+.5)*i.dy),w=t.x0+(l+.5)*i.dx,E=t.y0+(u+.5)*i.dy,C="["+a.slice(0,i.colormodel.length).join(", ")+"]";return[k.extendFlat(b,{index:[u,l],x0:n.c2p(t.x0+l*i.dx),x1:n.c2p(t.x0+(l+1)*i.dx),y0:S,y1:S,color:m,xVal:w,xLabelVal:w,yVal:E,yLabelVal:E,zLabelVal:C,text:p,hovertemplateLabels:{zLabel:C,colorLabel:d,"color[0]Label":m[0]+_[0],"color[1]Label":m[1]+_[1],"color[2]Label":m[2]+_[2],"color[3]Label":m[3]+_[3]}})]}}}},48928:function(ee,R,e){ee.exports={attributes:e(95188),supplyDefaults:e(13188),calc:e(93336),plot:e(63715),style:e(28576),hoverPoints:e(24892),eventData:e(79972),moduleType:"trace",name:"image",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},63715:function(ee,R,e){var M=e(33428),k=e(3400),s=k.strTranslate,T=e(9616),b=e(47797),f=e(9188),o=e(2264).STYLE;ee.exports=function(t,i,n,r){var a=i.xaxis,l=i.yaxis,u=!t._context._exportedPlot&&f();k.makeTraceGroups(r,n,"im").each(function(h){var c=M.select(this),x=h[0],p=x.trace,v=(p.zsmooth==="fast"||p.zsmooth===!1&&u)&&!p._hasZ&&p._hasSource&&a.type==="linear"&&l.type==="linear";p._realImage=v;var g,y,m,_,d,S,w=x.z,E=x.x0,C=x.y0,O=x.w,P=x.h,z=p.dx,j=p.dy;for(S=0;g===void 0&&S<O;)g=a.c2p(E+S*z),S++;for(S=O;y===void 0&&S>0;)y=a.c2p(E+S*z),S--;for(S=0;_===void 0&&S<P;)_=l.c2p(C+S*j),S++;for(S=P;d===void 0&&S>0;)d=l.c2p(C+S*j),S--;y<g&&(m=y,y=g,g=m),d<_&&(m=_,_=d,d=m),v||(g=Math.max(-.5*a._length,g),y=Math.min(1.5*a._length,y),_=Math.max(-.5*l._length,_),d=Math.min(1.5*l._length,d));var I=Math.round(y-g),N=Math.round(d-_);if(I<=0||N<=0)c.selectAll("image").data([]).exit().remove();else{var W=c.selectAll("image").data([h]);W.enter().append("svg:image").attr({xmlns:T.svg,preserveAspectRatio:"none"}),W.exit().remove();var F=p.zsmooth===!1?o:"";if(v){var U=k.simpleMap(a.range,a.r2l),H=k.simpleMap(l.range,l.r2l),ne=U[1]<U[0],$=H[1]>H[0];if(ne||$){var K=g+I/2,Q=_+N/2;F+="transform:"+s(K+"px",Q+"px")+"scale("+(ne?-1:1)+","+($?-1:1)+")"+s(-K+"px",-Q+"px")+";"}}W.attr("style",F);var Z=new Promise(function(te){if(p._hasZ)te();else if(p._hasSource)if(p._canvas&&p._canvas.el.width===O&&p._canvas.el.height===P&&p._canvas.source===p.source)te();else{var ae=document.createElement("canvas");ae.width=O,ae.height=P;var se=ae.getContext("2d",{willReadFrequently:!0});p._image=p._image||new Image;var ce=p._image;ce.onload=function(){se.drawImage(ce,0,0),p._canvas={el:ae,source:p.source},te()},ce.setAttribute("src",p.source)}}).then(function(){var te,ae;if(p._hasZ)ae=X(function(ce,fe){var pe=w[fe][ce];return k.isTypedArray(pe)&&(pe=Array.from(pe)),pe}),te=ae.toDataURL("image/png");else if(p._hasSource)if(v)te=p.source;else{var se=p._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,O,P).data;ae=X(function(ce,fe){var pe=4*(fe*O+ce);return[se[pe],se[pe+1],se[pe+2],se[pe+3]]}),te=ae.toDataURL("image/png")}W.attr({"xlink:href":te,height:N,width:I,x:g,y:_})});t._promises.push(Z)}function X(te){var ae=document.createElement("canvas");ae.width=I,ae.height=N;var se,ce=ae.getContext("2d",{willReadFrequently:!0}),fe=function(he){return k.constrain(Math.round(a.c2p(E+he*z)-g),0,I)},pe=function(he){return k.constrain(Math.round(l.c2p(C+he*j)-_),0,N)},ge=b.colormodel[p.colormodel],me=ge.colormodel||p.colormodel,be=ge.fmt;for(S=0;S<x.w;S++){var ke=fe(S),ze=fe(S+1);if(ze!==ke&&!isNaN(ze)&&!isNaN(ke))for(var ve=0;ve<x.h;ve++){var oe=pe(ve),ie=pe(ve+1);ie===oe||isNaN(ie)||isNaN(oe)||!te(S,ve)||(se=p._scaler(te(S,ve)),ce.fillStyle=se?me+"("+be(se).join(",")+")":"rgba(0,0,0,0)",ce.fillRect(ke,oe,ze-ke,ie-oe))}}return ae}})}},28576:function(ee,R,e){var M=e(33428);ee.exports=function(k){M.select(k).selectAll(".im image").style("opacity",function(s){return s[0].trace.opacity})}},89864:function(ee,R,e){var M=e(92880).extendFlat,k=e(92880).extendDeep,s=e(67824).overrideAll,T=e(25376),b=e(22548),f=e(86968).u,o=e(94724),t=e(31780).templatedArray,i=e(48164),n=e(29736).descriptionOnlyNumbers,r=T({editType:"plot",colorEditType:"plot"}),a={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:b.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},l={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},u=t("step",k({},a,{range:l}));ee.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:f({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:M({},r,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:n("value")},font:M({},r,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:n("value")},increasing:{symbol:{valType:"string",dflt:i.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:i.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:i.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:i.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:M({},r,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:k({},a,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:b.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:s({range:l,visible:M({},o.visible,{dflt:!0}),tickmode:o.minor.tickmode,nticks:o.nticks,tick0:o.tick0,dtick:o.dtick,tickvals:o.tickvals,ticktext:o.ticktext,ticks:M({},o.ticks,{dflt:"outside"}),ticklen:o.ticklen,tickwidth:o.tickwidth,tickcolor:o.tickcolor,ticklabelstep:o.ticklabelstep,showticklabels:o.showticklabels,labelalias:o.labelalias,tickfont:T({}),tickangle:o.tickangle,tickformat:o.tickformat,tickformatstops:o.tickformatstops,tickprefix:o.tickprefix,showtickprefix:o.showtickprefix,ticksuffix:o.ticksuffix,showticksuffix:o.showticksuffix,separatethousands:o.separatethousands,exponentformat:o.exponentformat,minexponent:o.minexponent,showexponent:o.showexponent,editType:"plot"},"plot"),steps:u,threshold:{line:{color:M({},a.line.color,{}),width:M({},a.line.width,{dflt:1}),editType:"plot"},thickness:M({},a.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},92728:function(ee,R,e){var M=e(7316);R.name="indicator",R.plot=function(k,s,T,b){M.plotBasePlot(R.name,k,s,T,b)},R.clean=function(k,s,T,b){M.cleanBasePlot(R.name,k,s,T,b)}},79136:function(ee){ee.exports={calc:function(R,e){var M=[],k=e.value;typeof e._lastValue!="number"&&(e._lastValue=e.value);var s=e._lastValue,T=s;return e._hasDelta&&typeof e.delta.reference=="number"&&(T=e.delta.reference),M[0]={y:k,lastY:s,delta:k-T,relativeDelta:(k-T)/T},M}}},12096:function(ee){ee.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},20424:function(ee,R,e){var M=e(3400),k=e(89864),s=e(86968).Q,T=e(31780),b=e(51272),f=e(12096),o=e(26332),t=e(25404),i=e(95936),n=e(42568);function r(a,l){function u(h,c){return M.coerce(a,l,k.gauge.steps,h,c)}u("color"),u("line.color"),u("line.width"),u("range"),u("thickness")}ee.exports={supplyDefaults:function(a,l,u,h){function c(z,j){return M.coerce(a,l,k,z,j)}s(l,h,c),c("mode"),l._hasNumber=l.mode.indexOf("number")!==-1,l._hasDelta=l.mode.indexOf("delta")!==-1,l._hasGauge=l.mode.indexOf("gauge")!==-1;var x=c("value");l._range=[0,typeof x=="number"?1.5*x:1];var p,v,g=new Array(2);if(l._hasNumber){c("number.valueformat");var y=M.extendFlat({},h.font);y.size=void 0,M.coerceFont(c,"number.font",y),l.number.font.size===void 0&&(l.number.font.size=f.defaultNumberFontSize,g[0]=!0),c("number.prefix"),c("number.suffix"),p=l.number.font.size}if(l._hasDelta){var m=M.extendFlat({},h.font);m.size=void 0,M.coerceFont(c,"delta.font",m),l.delta.font.size===void 0&&(l.delta.font.size=(l._hasNumber?.5:1)*(p||f.defaultNumberFontSize),g[1]=!0),c("delta.reference",l.value),c("delta.relative"),c("delta.valueformat",l.delta.relative?"2%":""),c("delta.increasing.symbol"),c("delta.increasing.color"),c("delta.decreasing.symbol"),c("delta.decreasing.color"),c("delta.position"),c("delta.prefix"),c("delta.suffix"),v=l.delta.font.size}l._scaleNumbers=(!l._hasNumber||g[0])&&(!l._hasDelta||g[1])||!1;var _,d,S,w,E=M.extendFlat({},h.font);function C(z,j){return M.coerce(_,d,k.gauge,z,j)}function O(z,j){return M.coerce(S,w,k.gauge.axis,z,j)}if(E.size=.25*(p||v||f.defaultNumberFontSize),M.coerceFont(c,"title.font",E),c("title.text"),l._hasGauge){(_=a.gauge)||(_={}),d=T.newContainer(l,"gauge"),C("shape"),(l._isBullet=l.gauge.shape==="bullet")||c("title.align","center"),(l._isAngular=l.gauge.shape==="angular")||c("align","center"),C("bgcolor",h.paper_bgcolor),C("borderwidth"),C("bordercolor"),C("bar.color"),C("bar.line.color"),C("bar.line.width"),C("bar.thickness",f.valueThickness*(l.gauge.shape==="bullet"?.5:1)),b(_,d,{name:"steps",handleItemDefaults:r}),C("threshold.value"),C("threshold.thickness"),C("threshold.line.width"),C("threshold.line.color"),S={},_&&(S=_.axis||{}),w=T.newContainer(d,"axis"),O("visible"),l._range=O("range",l._range);var P={font:h.font,noAutotickangles:!0,outerTicks:!0,noTicklabelshift:!0,noTicklabelstandoff:!0};o(S,w,O,"linear"),n(S,w,O,"linear",P),i(S,w,O,"linear",P),t(S,w,O,P)}else c("title.align","center"),c("align","center"),l._isAngular=l._isBullet=!1;l._length=null}}},43480:function(ee,R,e){ee.exports={moduleType:"trace",name:"indicator",basePlotModule:e(92728),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:e(89864),supplyDefaults:e(20424).supplyDefaults,calc:e(79136).calc,plot:e(97864),meta:{}}},97864:function(ee,R,e){var M=e(33428),k=e(67756).qy,s=e(67756).Gz,T=e(3400),b=T.strScale,f=T.strTranslate,o=T.rad2deg,t=e(84284).MID_SHIFT,i=e(43616),n=e(12096),r=e(72736),a=e(54460),l=e(28336),u=e(37668),h=e(94724),c=e(76308),x={left:"start",center:"middle",right:"end"},p={left:0,center:.5,right:1},v=/[yzafpnmkMGTPEZY]/;function g(w){return w&&w.duration>0}function y(w){w.each(function(E){c.stroke(M.select(this),E.line.color)}).each(function(E){c.fill(M.select(this),E.color)}).style("stroke-width",function(E){return E.line.width})}function m(w,E,C){var O=w._fullLayout,P=T.extendFlat({type:"linear",ticks:"outside",range:C,showline:!0},E),z={type:"linear",_id:"x"+E._id},j={letter:"x",font:O.font,noAutotickangles:!0,noHover:!0,noTickson:!0};function I(N,W){return T.coerce(P,z,h,N,W)}return l(P,z,I,j,O),u(P,z,I,j),z}function _(w,E,C){return[Math.min(E/w.width,C/w.height),w,E+"x"+C]}function d(w,E,C,O){var P=document.createElementNS("http://www.w3.org/2000/svg","text"),z=M.select(P);return z.text(w).attr("x",0).attr("y",0).attr("text-anchor",C).attr("data-unformatted",w).call(r.convertToTspans,O).call(i.font,E),i.bBox(z.node())}function S(w,E,C,O,P,z){var j="_cache"+E;w[j]&&w[j].key===P||(w[j]={key:P,value:C});var I=T.aggNums(z,null,[w[j].value,O],2);return w[j].value=I,I}ee.exports=function(w,E,C,O){var P,z=w._fullLayout;g(C)&&O&&(P=O()),T.makeTraceGroups(z._indicatorlayer,E,"trace").each(function(j){var I,N,W,F,U,H=j[0].trace,ne=M.select(this),$=H._hasGauge,K=H._isAngular,Q=H._isBullet,Z=H.domain,X={w:z._size.w*(Z.x[1]-Z.x[0]),h:z._size.h*(Z.y[1]-Z.y[0]),l:z._size.l+z._size.w*Z.x[0],r:z._size.r+z._size.w*(1-Z.x[1]),t:z._size.t+z._size.h*(1-Z.y[1]),b:z._size.b+z._size.h*Z.y[0]},te=X.l+X.w/2,ae=X.t+X.h/2,se=Math.min(X.w/2,X.h),ce=n.innerRadius*se,fe=H.align||"center";if(N=ae,$){if(K&&(I=te,N=ae+se/2,W=function(oe){return function(ie,he){return[he/Math.sqrt(ie.width/2*(ie.width/2)+ie.height*ie.height),ie,he]}(oe,.9*ce)}),Q){var pe=n.bulletPadding,ge=1-n.bulletNumberDomainSize+pe;I=X.l+(ge+(1-ge)*p[fe])*X.w,W=function(oe){return _(oe,(n.bulletNumberDomainSize-pe)*X.w,X.h)}}}else I=X.l+p[fe]*X.w,W=function(oe){return _(oe,X.w,X.h)};(function(oe,ie,he,Se){var ye,we,Me,Oe=he[0].trace,Ie=Se.numbersX,de=Se.numbersY,_e=Oe.align||"center",Ae=x[_e],Pe=Se.transitionOpts,Ee=Se.onComplete,Fe=T.ensureSingle(ie,"g","numbers"),Ve=[];Oe._hasNumber&&Ve.push("number"),Oe._hasDelta&&(Ve.push("delta"),Oe.delta.position==="left"&&Ve.reverse());var Ye=Fe.selectAll("text").data(Ve);function tt(Ot,Pt,St,He){if(!Ot.match("s")||St>=0==He>=0||Pt(St).slice(-1).match(v)||Pt(He).slice(-1).match(v))return Pt;var We=Ot.slice().replace("s","f").replace(/\d+/,function(Ge){return parseInt(Ge)-1}),Be=m(oe,{tickformat:We});return function(Ge){return Math.abs(Ge)<1?a.tickText(Be,Ge).text:Pt(Ge)}}Ye.enter().append("text"),Ye.attr("text-anchor",function(){return Ae}).attr("class",function(Ot){return Ot}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),Ye.exit().remove();var nt,ht=Oe.mode+Oe.align;if(Oe._hasDelta&&(nt=function(){var Ot=m(oe,{tickformat:Oe.delta.valueformat},Oe._range);Ot.setScale(),a.prepTicks(Ot);var Pt=function(dt){return a.tickText(Ot,dt).text},St=Oe.delta.suffix,He=Oe.delta.prefix,We=function(dt){return Oe.delta.relative?dt.relativeDelta:dt.delta},Be=function(dt,gt){return dt===0||typeof dt!="number"||isNaN(dt)?"-":(dt>0?Oe.delta.increasing.symbol:Oe.delta.decreasing.symbol)+He+gt(dt)+St},Ge=function(dt){return dt.delta>=0?Oe.delta.increasing.color:Oe.delta.decreasing.color};Oe._deltaLastValue===void 0&&(Oe._deltaLastValue=We(he[0]));var ot=Fe.select("text.delta");function it(){ot.text(Be(We(he[0]),Pt)).call(c.fill,Ge(he[0])).call(r.convertToTspans,oe)}return ot.call(i.font,Oe.delta.font).call(c.fill,Ge({delta:Oe._deltaLastValue})),g(Pe)?ot.transition().duration(Pe.duration).ease(Pe.easing).tween("text",function(){var dt=M.select(this),gt=We(he[0]),je=Oe._deltaLastValue,Re=tt(Oe.delta.valueformat,Pt,je,gt),rt=s(je,gt);return Oe._deltaLastValue=gt,function(ct){dt.text(Be(rt(ct),Re)),dt.call(c.fill,Ge({delta:rt(ct)}))}}).each("end",function(){it(),Ee&&Ee()}).each("interrupt",function(){it(),Ee&&Ee()}):it(),we=d(Be(We(he[0]),Pt),Oe.delta.font,Ae,oe),ot}(),ht+=Oe.delta.position+Oe.delta.font.size+Oe.delta.font.family+Oe.delta.valueformat,ht+=Oe.delta.increasing.symbol+Oe.delta.decreasing.symbol,Me=we),Oe._hasNumber&&(function(){var Ot=m(oe,{tickformat:Oe.number.valueformat},Oe._range);Ot.setScale(),a.prepTicks(Ot);var Pt=function(Ge){return a.tickText(Ot,Ge).text},St=Oe.number.suffix,He=Oe.number.prefix,We=Fe.select("text.number");function Be(){var Ge=typeof he[0].y=="number"?He+Pt(he[0].y)+St:"-";We.text(Ge).call(i.font,Oe.number.font).call(r.convertToTspans,oe)}g(Pe)?We.transition().duration(Pe.duration).ease(Pe.easing).each("end",function(){Be(),Ee&&Ee()}).each("interrupt",function(){Be(),Ee&&Ee()}).attrTween("text",function(){var Ge=M.select(this),ot=s(he[0].lastY,he[0].y);Oe._lastValue=he[0].y;var it=tt(Oe.number.valueformat,Pt,he[0].lastY,he[0].y);return function(dt){Ge.text(He+it(ot(dt))+St)}}):Be(),ye=d(He+Pt(he[0].y)+St,Oe.number.font,Ae,oe)}(),ht+=Oe.number.font.size+Oe.number.font.family+Oe.number.valueformat+Oe.number.suffix+Oe.number.prefix,Me=ye),Oe._hasDelta&&Oe._hasNumber){var vt,pt,Qe=[(ye.left+ye.right)/2,(ye.top+ye.bottom)/2],Ke=[(we.left+we.right)/2,(we.top+we.bottom)/2],Mt=.75*Oe.delta.font.size;Oe.delta.position==="left"&&(vt=S(Oe,"deltaPos",0,-1*(ye.width*p[Oe.align]+we.width*(1-p[Oe.align])+Mt),ht,Math.min),pt=Qe[1]-Ke[1],Me={width:ye.width+we.width+Mt,height:Math.max(ye.height,we.height),left:we.left+vt,right:ye.right,top:Math.min(ye.top,we.top+pt),bottom:Math.max(ye.bottom,we.bottom+pt)}),Oe.delta.position==="right"&&(vt=S(Oe,"deltaPos",0,ye.width*(1-p[Oe.align])+we.width*p[Oe.align]+Mt,ht,Math.max),pt=Qe[1]-Ke[1],Me={width:ye.width+we.width+Mt,height:Math.max(ye.height,we.height),left:ye.left,right:we.right+vt,top:Math.min(ye.top,we.top+pt),bottom:Math.max(ye.bottom,we.bottom+pt)}),Oe.delta.position==="bottom"&&(vt=null,pt=we.height,Me={width:Math.max(ye.width,we.width),height:ye.height+we.height,left:Math.min(ye.left,we.left),right:Math.max(ye.right,we.right),top:ye.bottom-ye.height,bottom:ye.bottom+we.height}),Oe.delta.position==="top"&&(vt=null,pt=ye.top,Me={width:Math.max(ye.width,we.width),height:ye.height+we.height,left:Math.min(ye.left,we.left),right:Math.max(ye.right,we.right),top:ye.bottom-ye.height-we.height,bottom:ye.bottom}),nt.attr({dx:vt,dy:pt})}(Oe._hasNumber||Oe._hasDelta)&&Fe.attr("transform",function(){var Ot=Se.numbersScaler(Me);ht+=Ot[2];var Pt,St=S(Oe,"numbersScale",1,Ot[0],ht,Math.min);Oe._scaleNumbers||(St=1),Pt=Oe._isAngular?de-St*Me.bottom:de-St*(Me.top+Me.bottom)/2,Oe._numbersTop=St*Me.top+Pt;var He=Me[_e];_e==="center"&&(He=(Me.left+Me.right)/2);var We=Ie-St*He;return We=S(Oe,"numbersTranslate",0,We,ht,Math.max),f(We,Pt)+b(St)})})(w,ne,j,{numbersX:I,numbersY:N,numbersScaler:W,transitionOpts:C,onComplete:P}),$&&(F={range:H.gauge.axis.range,color:H.gauge.bgcolor,line:{color:H.gauge.bordercolor,width:0},thickness:1},U={range:H.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:H.gauge.bordercolor,width:H.gauge.borderwidth},thickness:1});var me=ne.selectAll("g.angular").data(K?j:[]);me.exit().remove();var be=ne.selectAll("g.angularaxis").data(K?j:[]);be.exit().remove(),K&&function(oe,ie,he,Se){var ye,we,Me,Oe,Ie=he[0].trace,de=Se.size,_e=Se.radius,Ae=Se.innerRadius,Pe=Se.gaugeBg,Ee=Se.gaugeOutline,Fe=[de.l+de.w/2,de.t+de.h/2+_e/2],Ve=Se.gauge,Ye=Se.layer,tt=Se.transitionOpts,nt=Se.onComplete,ht=Math.PI/2;function vt(ct){var ut=Ie.gauge.axis.range[0],et=(ct-ut)/(Ie.gauge.axis.range[1]-ut)*Math.PI-ht;return et<-ht?-ht:et>ht?ht:et}function pt(ct){return M.svg.arc().innerRadius((Ae+_e)/2-ct/2*(_e-Ae)).outerRadius((Ae+_e)/2+ct/2*(_e-Ae)).startAngle(-ht)}function Qe(ct){ct.attr("d",function(ut){return pt(ut.thickness).startAngle(vt(ut.range[0])).endAngle(vt(ut.range[1]))()})}Ve.enter().append("g").classed("angular",!0),Ve.attr("transform",f(Fe[0],Fe[1])),Ye.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),Ye.selectAll("g.xangularaxistick,path,text").remove(),(ye=m(oe,Ie.gauge.axis)).type="linear",ye.range=Ie.gauge.axis.range,ye._id="xangularaxis",ye.ticklabeloverflow="allow",ye.setScale();var Ke=function(ct){return(ye.range[0]-ct.x)/(ye.range[1]-ye.range[0])*Math.PI+Math.PI},Mt={},Ot=a.makeLabelFns(ye,0).labelStandoff;Mt.xFn=function(ct){var ut=Ke(ct);return Math.cos(ut)*Ot},Mt.yFn=function(ct){var ut=Ke(ct),et=Math.sin(ut)>0?.2:1;return-Math.sin(ut)*(Ot+ct.fontSize*et)+Math.abs(Math.cos(ut))*(ct.fontSize*t)},Mt.anchorFn=function(ct){var ut=Ke(ct),et=Math.cos(ut);return Math.abs(et)<.1?"middle":et>0?"start":"end"},Mt.heightFn=function(ct,ut,et){var xt=Ke(ct);return-.5*(1+Math.sin(xt))*et};var Pt=function(ct){return f(Fe[0]+_e*Math.cos(ct),Fe[1]-_e*Math.sin(ct))};if(Me=function(ct){return Pt(Ke(ct))},we=a.calcTicks(ye),Oe=a.getTickSigns(ye)[2],ye.visible){Oe=ye.ticks==="inside"?-1:1;var St=(ye.linewidth||1)/2;a.drawTicks(oe,ye,{vals:we,layer:Ye,path:"M"+Oe*St+",0h"+Oe*ye.ticklen,transFn:function(ct){var ut=Ke(ct);return Pt(ut)+"rotate("+-o(ut)+")"}}),a.drawLabels(oe,ye,{vals:we,layer:Ye,transFn:Me,labelFns:Mt})}var He=[Pe].concat(Ie.gauge.steps),We=Ve.selectAll("g.bg-arc").data(He);We.enter().append("g").classed("bg-arc",!0).append("path"),We.select("path").call(Qe).call(y),We.exit().remove();var Be=pt(Ie.gauge.bar.thickness),Ge=Ve.selectAll("g.value-arc").data([Ie.gauge.bar]);Ge.enter().append("g").classed("value-arc",!0).append("path");var ot,it,dt,gt=Ge.select("path");g(tt)?(gt.transition().duration(tt.duration).ease(tt.easing).each("end",function(){nt&&nt()}).each("interrupt",function(){nt&&nt()}).attrTween("d",(ot=Be,it=vt(he[0].lastY),dt=vt(he[0].y),function(){var ct=k(it,dt);return function(ut){return ot.endAngle(ct(ut))()}})),Ie._lastValue=he[0].y):gt.attr("d",typeof he[0].y=="number"?Be.endAngle(vt(he[0].y)):"M0,0Z"),gt.call(y),Ge.exit().remove(),He=[];var je=Ie.gauge.threshold.value;(je||je===0)&&He.push({range:[je,je],color:Ie.gauge.threshold.color,line:{color:Ie.gauge.threshold.line.color,width:Ie.gauge.threshold.line.width},thickness:Ie.gauge.threshold.thickness});var Re=Ve.selectAll("g.threshold-arc").data(He);Re.enter().append("g").classed("threshold-arc",!0).append("path"),Re.select("path").call(Qe).call(y),Re.exit().remove();var rt=Ve.selectAll("g.gauge-outline").data([Ee]);rt.enter().append("g").classed("gauge-outline",!0).append("path"),rt.select("path").call(Qe).call(y),rt.exit().remove()}(w,0,j,{radius:se,innerRadius:ce,gauge:me,layer:be,size:X,gaugeBg:F,gaugeOutline:U,transitionOpts:C,onComplete:P});var ke=ne.selectAll("g.bullet").data(Q?j:[]);ke.exit().remove();var ze=ne.selectAll("g.bulletaxis").data(Q?j:[]);ze.exit().remove(),Q&&function(oe,ie,he,Se){var ye,we,Me,Oe,Ie,de=he[0].trace,_e=Se.gauge,Ae=Se.layer,Pe=Se.gaugeBg,Ee=Se.gaugeOutline,Fe=Se.size,Ve=de.domain,Ye=Se.transitionOpts,tt=Se.onComplete;_e.enter().append("g").classed("bullet",!0),_e.attr("transform",f(Fe.l,Fe.t)),Ae.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),Ae.selectAll("g.xbulletaxistick,path,text").remove();var nt=Fe.h,ht=de.gauge.bar.thickness*nt,vt=Ve.x[0],pt=Ve.x[0]+(Ve.x[1]-Ve.x[0])*(de._hasNumber||de._hasDelta?1-n.bulletNumberDomainSize:1);function Qe(We){We.attr("width",function(Be){return Math.max(0,ye.c2p(Be.range[1])-ye.c2p(Be.range[0]))}).attr("x",function(Be){return ye.c2p(Be.range[0])}).attr("y",function(Be){return .5*(1-Be.thickness)*nt}).attr("height",function(Be){return Be.thickness*nt})}(ye=m(oe,de.gauge.axis))._id="xbulletaxis",ye.domain=[vt,pt],ye.setScale(),we=a.calcTicks(ye),Me=a.makeTransTickFn(ye),Oe=a.getTickSigns(ye)[2],Ie=Fe.t+Fe.h,ye.visible&&(a.drawTicks(oe,ye,{vals:ye.ticks==="inside"?a.clipEnds(ye,we):we,layer:Ae,path:a.makeTickPath(ye,Ie,Oe),transFn:Me}),a.drawLabels(oe,ye,{vals:we,layer:Ae,transFn:Me,labelFns:a.makeLabelFns(ye,Ie)}));var Ke=[Pe].concat(de.gauge.steps),Mt=_e.selectAll("g.bg-bullet").data(Ke);Mt.enter().append("g").classed("bg-bullet",!0).append("rect"),Mt.select("rect").call(Qe).call(y),Mt.exit().remove();var Ot=_e.selectAll("g.value-bullet").data([de.gauge.bar]);Ot.enter().append("g").classed("value-bullet",!0).append("rect"),Ot.select("rect").attr("height",ht).attr("y",(nt-ht)/2).call(y),g(Ye)?Ot.select("rect").transition().duration(Ye.duration).ease(Ye.easing).each("end",function(){tt&&tt()}).each("interrupt",function(){tt&&tt()}).attr("width",Math.max(0,ye.c2p(Math.min(de.gauge.axis.range[1],he[0].y)))):Ot.select("rect").attr("width",typeof he[0].y=="number"?Math.max(0,ye.c2p(Math.min(de.gauge.axis.range[1],he[0].y))):0),Ot.exit().remove();var Pt=he.filter(function(){return de.gauge.threshold.value||de.gauge.threshold.value===0}),St=_e.selectAll("g.threshold-bullet").data(Pt);St.enter().append("g").classed("threshold-bullet",!0).append("line"),St.select("line").attr("x1",ye.c2p(de.gauge.threshold.value)).attr("x2",ye.c2p(de.gauge.threshold.value)).attr("y1",(1-de.gauge.threshold.thickness)/2*nt).attr("y2",(1-(1-de.gauge.threshold.thickness)/2)*nt).call(c.stroke,de.gauge.threshold.line.color).style("stroke-width",de.gauge.threshold.line.width),St.exit().remove();var He=_e.selectAll("g.gauge-outline").data([Ee]);He.enter().append("g").classed("gauge-outline",!0).append("rect"),He.select("rect").call(Qe).call(y),He.exit().remove()}(w,0,j,{gauge:ke,layer:ze,size:X,gaugeBg:F,gaugeOutline:U,transitionOpts:C,onComplete:P});var ve=ne.selectAll("text.title").data(j);ve.exit().remove(),ve.enter().append("text").classed("title",!0),ve.attr("text-anchor",function(){return Q?x.right:x[H.title.align]}).text(H.title.text).call(i.font,H.title.font).call(r.convertToTspans,w),ve.attr("transform",function(){var oe,ie=X.l+X.w*p[H.title.align],he=n.titlePadding,Se=i.bBox(ve.node());return $?(K&&(oe=H.gauge.axis.visible?i.bBox(be.node()).top-he-Se.bottom:X.t+X.h/2-se/2-Se.bottom-he),Q&&(oe=N-(Se.top+Se.bottom)/2,ie=X.l-n.bulletPadding*X.w)):oe=H._numbersTop-he-Se.bottom,f(ie,oe)})})}},50048:function(ee,R,e){var M=e(49084),k=e(29736).axisHoverFormat,s=e(21776).Ks,T=e(52948),b=e(45464),f=e(92880).extendFlat,o=e(67824).overrideAll,t=ee.exports=o(f({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:s(),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),valuehoverformat:k("value",1),showlegend:f({},b.showlegend,{dflt:!1})},M("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,lightposition:T.lightposition,lighting:T.lighting,flatshading:T.flatshading,contour:T.contour,hoverinfo:f({},b.hoverinfo)}),"calc","nested");t.flatshading.dflt=!0,t.lighting.facenormalsepsilon.dflt=0,t.x.editType=t.y.editType=t.z.editType=t.value.editType="calc+clearAxisTypes",t.transforms=void 0},62624:function(ee,R,e){var M=e(47128),k=e(3832).processGrid,s=e(3832).filter;ee.exports=function(T,b){b._len=Math.min(b.x.length,b.y.length,b.z.length,b.value.length),b._x=s(b.x,b._len),b._y=s(b.y,b._len),b._z=s(b.z,b._len),b._value=s(b.value,b._len);var f=k(b);b._gridFill=f.fill,b._Xs=f.Xs,b._Ys=f.Ys,b._Zs=f.Zs,b._len=f.len;for(var o=1/0,t=-1/0,i=0;i<b._len;i++){var n=b._value[i];o=Math.min(o,n),t=Math.max(t,n)}b._minValues=o,b._maxValues=t,b._vMin=b.isomin===void 0||b.isomin===null?o:b.isomin,b._vMax=b.isomax===void 0||b.isomax===null?t:b.isomax,M(T,b,{vals:[b._vMin,b._vMax],containerStr:"",cLetter:"c"})}},31460:function(ee,R,e){var M=e(67792).gl_mesh3d,k=e(33040).parseColorScale,s=e(3400).isArrayOrTypedArray,T=e(43080),b=e(8932).extractOpts,f=e(52094),o=function(a,l){for(var u=l.length-1;u>0;u--){var h=Math.min(l[u],l[u-1]),c=Math.max(l[u],l[u-1]);if(c>h&&h<a&&a<=c)return{id:u,distRatio:(c-a)/(c-h)}}return{id:0,distRatio:0}};function t(a,l,u){this.scene=a,this.uid=u,this.mesh=l,this.name="",this.data=null,this.showContour=!1}var i=t.prototype;i.handlePick=function(a){if(a.object===this.mesh){var l=a.data.index,u=this.data._meshX[l],h=this.data._meshY[l],c=this.data._meshZ[l],x=this.data._Ys.length,p=this.data._Zs.length,v=o(u,this.data._Xs).id,g=o(h,this.data._Ys).id,y=o(c,this.data._Zs).id,m=a.index=y+p*g+p*x*v;a.traceCoordinate=[this.data._meshX[m],this.data._meshY[m],this.data._meshZ[m],this.data._value[m]];var _=this.data.hovertext||this.data.text;return s(_)&&_[m]!==void 0?a.textLabel=_[m]:_&&(a.textLabel=_),!0}},i.update=function(a){var l=this.scene,u=l.fullSceneLayout;function h(p,v,g,y){return v.map(function(m){return p.d2l(m,0,y)*g})}this.data=r(a);var c={positions:f(h(u.xaxis,a._meshX,l.dataScale[0],a.xcalendar),h(u.yaxis,a._meshY,l.dataScale[1],a.ycalendar),h(u.zaxis,a._meshZ,l.dataScale[2],a.zcalendar)),cells:f(a._meshI,a._meshJ,a._meshK),lightPosition:[a.lightposition.x,a.lightposition.y,a.lightposition.z],ambient:a.lighting.ambient,diffuse:a.lighting.diffuse,specular:a.lighting.specular,roughness:a.lighting.roughness,fresnel:a.lighting.fresnel,vertexNormalsEpsilon:a.lighting.vertexnormalsepsilon,faceNormalsEpsilon:a.lighting.facenormalsepsilon,opacity:a.opacity,contourEnable:a.contour.show,contourColor:T(a.contour.color).slice(0,3),contourWidth:a.contour.width,useFacetNormals:a.flatshading},x=b(a);c.vertexIntensity=a._meshIntensity,c.vertexIntensityBounds=[x.min,x.max],c.colormap=k(a),this.mesh.update(c)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var n=["xyz","xzy","yxz","yzx","zxy","zyx"];function r(a){a._meshI=[],a._meshJ=[],a._meshK=[];var l,u,h,c,x,p,v,g=a.surface.show,y=a.spaceframe.show,m=a.surface.fill,_=a.spaceframe.fill,d=!1,S=!1,w=0,E=a._Xs,C=a._Ys,O=a._Zs,P=E.length,z=C.length,j=O.length,I=n.indexOf(a._gridFill.replace(/-/g,"").replace(/\+/g,"")),N=function(Ae,Pe,Ee){switch(I){case 5:return Ee+j*Pe+j*z*Ae;case 4:return Ee+j*Ae+j*P*Pe;case 3:return Pe+z*Ee+z*j*Ae;case 2:return Pe+z*Ae+z*P*Ee;case 1:return Ae+P*Ee+P*j*Pe;default:return Ae+P*Pe+P*z*Ee}},W=a._minValues,F=a._maxValues,U=a._vMin,H=a._vMax;function ne(Ae,Pe,Ee){for(var Fe=p.length,Ve=u;Ve<Fe;Ve++)if(Ae===h[Ve]&&Pe===c[Ve]&&Ee===x[Ve])return Ve;return-1}function $(){u=l}function K(){h=[],c=[],x=[],p=[],l=0,$()}function Q(Ae,Pe,Ee,Fe){return h.push(Ae),c.push(Pe),x.push(Ee),p.push(Fe),++l-1}function Z(Ae,Pe,Ee){for(var Fe=[],Ve=0;Ve<Ae.length;Ve++)Fe[Ve]=Ae[Ve]*(1-Ee)+Ee*Pe[Ve];return Fe}function X(Ae){v=Ae}function te(Ae,Pe){return Ae==="all"||Ae===null||Ae.indexOf(Pe)>-1}function ae(Ae,Pe){return Ae===null?Pe:Ae}function se(Ae,Pe,Ee){$();var Fe,Ve,Ye,tt=[Pe],nt=[Ee];if(v>=1)tt=[Pe],nt=[Ee];else if(v>0){var ht=function(He,We){var Be=He[0],Ge=He[1],ot=He[2],it=function(et,xt,mt){for(var Tt=[],yt=0;yt<et.length;yt++)Tt[yt]=(et[yt]+xt[yt]+mt[yt])/3;return Tt}(Be,Ge,ot),dt=Math.sqrt(1-v),gt=Z(it,Be,dt),je=Z(it,Ge,dt),Re=Z(it,ot,dt),rt=We[0],ct=We[1],ut=We[2];return{xyzv:[[Be,Ge,je],[je,gt,Be],[Ge,ot,Re],[Re,je,Ge],[ot,Be,gt],[gt,Re,ot]],abc:[[rt,ct,-1],[-1,-1,rt],[ct,ut,-1],[-1,-1,ct],[ut,rt,-1],[-1,-1,ut]]}}(Pe,Ee);tt=ht.xyzv,nt=ht.abc}for(var vt=0;vt<tt.length;vt++){Pe=tt[vt],Ee=nt[vt];for(var pt=[],Qe=0;Qe<3;Qe++){var Ke=Pe[Qe][0],Mt=Pe[Qe][1],Ot=Pe[Qe][2],Pt=Pe[Qe][3],St=Ee[Qe]>-1?Ee[Qe]:ne(Ke,Mt,Ot);pt[Qe]=St>-1?St:Q(Ke,Mt,Ot,ae(Ae,Pt))}Fe=pt[0],Ve=pt[1],Ye=pt[2],a._meshI.push(Fe),a._meshJ.push(Ve),a._meshK.push(Ye),++w}}function ce(Ae,Pe,Ee,Fe){var Ve=Ae[3];Ve<Ee&&(Ve=Ee),Ve>Fe&&(Ve=Fe);for(var Ye=(Ae[3]-Ve)/(Ae[3]-Pe[3]+1e-9),tt=[],nt=0;nt<4;nt++)tt[nt]=(1-Ye)*Ae[nt]+Ye*Pe[nt];return tt}function fe(Ae,Pe,Ee){return Ae>=Pe&&Ae<=Ee}function pe(Ae){var Pe=.001*(H-U);return Ae>=U-Pe&&Ae<=H+Pe}function ge(Ae){for(var Pe=[],Ee=0;Ee<4;Ee++){var Fe=Ae[Ee];Pe.push([a._x[Fe],a._y[Fe],a._z[Fe],a._value[Fe]])}return Pe}var me=3;function be(Ae,Pe,Ee,Fe,Ve,Ye){Ye||(Ye=1),Ee=[-1,-1,-1];var tt=!1,nt=[fe(Pe[0][3],Fe,Ve),fe(Pe[1][3],Fe,Ve),fe(Pe[2][3],Fe,Ve)];if(!nt[0]&&!nt[1]&&!nt[2])return!1;var ht=function(pt,Qe,Ke){return pe(Qe[0][3])&&pe(Qe[1][3])&&pe(Qe[2][3])?(se(pt,Qe,Ke),!0):Ye<me&&be(pt,Qe,Ke,U,H,++Ye)};if(nt[0]&&nt[1]&&nt[2])return ht(Ae,Pe,Ee)||tt;var vt=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(pt){if(nt[pt[0]]&&nt[pt[1]]&&!nt[pt[2]]){var Qe=Pe[pt[0]],Ke=Pe[pt[1]],Mt=Pe[pt[2]],Ot=ce(Mt,Qe,Fe,Ve),Pt=ce(Mt,Ke,Fe,Ve);tt=ht(Ae,[Pt,Ot,Qe],[-1,-1,Ee[pt[0]]])||tt,tt=ht(Ae,[Qe,Ke,Pt],[Ee[pt[0]],Ee[pt[1]],-1])||tt,vt=!0}}),vt||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(pt){if(nt[pt[0]]&&!nt[pt[1]]&&!nt[pt[2]]){var Qe=Pe[pt[0]],Ke=Pe[pt[1]],Mt=Pe[pt[2]],Ot=ce(Ke,Qe,Fe,Ve),Pt=ce(Mt,Qe,Fe,Ve);tt=ht(Ae,[Pt,Ot,Qe],[-1,-1,Ee[pt[0]]])||tt,vt=!0}}),tt}function ke(Ae,Pe,Ee,Fe){var Ve=!1,Ye=ge(Pe),tt=[fe(Ye[0][3],Ee,Fe),fe(Ye[1][3],Ee,Fe),fe(Ye[2][3],Ee,Fe),fe(Ye[3][3],Ee,Fe)];if(!(tt[0]||tt[1]||tt[2]||tt[3]))return Ve;if(tt[0]&&tt[1]&&tt[2]&&tt[3])return S&&(Ve=function(ht,vt,pt){var Qe=function(Ke,Mt,Ot){se(ht,[vt[Ke],vt[Mt],vt[Ot]],[pt[Ke],pt[Mt],pt[Ot]])};Qe(0,1,2),Qe(3,0,1),Qe(2,3,0),Qe(1,2,3)}(Ae,Ye,Pe)||Ve),Ve;var nt=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(ht){if(tt[ht[0]]&&tt[ht[1]]&&tt[ht[2]]&&!tt[ht[3]]){var vt=Ye[ht[0]],pt=Ye[ht[1]],Qe=Ye[ht[2]],Ke=Ye[ht[3]];if(S)Ve=se(Ae,[vt,pt,Qe],[Pe[ht[0]],Pe[ht[1]],Pe[ht[2]]])||Ve;else{var Mt=ce(Ke,vt,Ee,Fe),Ot=ce(Ke,pt,Ee,Fe),Pt=ce(Ke,Qe,Ee,Fe);Ve=se(null,[Mt,Ot,Pt],[-1,-1,-1])||Ve}nt=!0}}),nt||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(ht){if(tt[ht[0]]&&tt[ht[1]]&&!tt[ht[2]]&&!tt[ht[3]]){var vt=Ye[ht[0]],pt=Ye[ht[1]],Qe=Ye[ht[2]],Ke=Ye[ht[3]],Mt=ce(Qe,vt,Ee,Fe),Ot=ce(Qe,pt,Ee,Fe),Pt=ce(Ke,pt,Ee,Fe),St=ce(Ke,vt,Ee,Fe);S?(Ve=se(Ae,[vt,St,Mt],[Pe[ht[0]],-1,-1])||Ve,Ve=se(Ae,[pt,Ot,Pt],[Pe[ht[1]],-1,-1])||Ve):Ve=function(He,We,Be){var Ge=function(ot,it,dt){se(null,[We[ot],We[it],We[dt]],[Be[ot],Be[it],Be[dt]])};Ge(0,1,2),Ge(2,3,0)}(0,[Mt,Ot,Pt,St],[-1,-1,-1,-1])||Ve,nt=!0}}),nt||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(ht){if(tt[ht[0]]&&!tt[ht[1]]&&!tt[ht[2]]&&!tt[ht[3]]){var vt=Ye[ht[0]],pt=Ye[ht[1]],Qe=Ye[ht[2]],Ke=Ye[ht[3]],Mt=ce(pt,vt,Ee,Fe),Ot=ce(Qe,vt,Ee,Fe),Pt=ce(Ke,vt,Ee,Fe);S?(Ve=se(Ae,[vt,Mt,Ot],[Pe[ht[0]],-1,-1])||Ve,Ve=se(Ae,[vt,Ot,Pt],[Pe[ht[0]],-1,-1])||Ve,Ve=se(Ae,[vt,Pt,Mt],[Pe[ht[0]],-1,-1])||Ve):Ve=se(null,[Mt,Ot,Pt],[-1,-1,-1])||Ve,nt=!0}})),Ve}function ze(Ae,Pe,Ee,Fe,Ve,Ye,tt,nt,ht,vt,pt){var Qe=!1;return d&&(te(Ae,"A")&&(Qe=ke(null,[Pe,Ee,Fe,Ye],vt,pt)||Qe),te(Ae,"B")&&(Qe=ke(null,[Ee,Fe,Ve,ht],vt,pt)||Qe),te(Ae,"C")&&(Qe=ke(null,[Ee,Ye,tt,ht],vt,pt)||Qe),te(Ae,"D")&&(Qe=ke(null,[Fe,Ye,nt,ht],vt,pt)||Qe),te(Ae,"E")&&(Qe=ke(null,[Ee,Fe,Ye,ht],vt,pt)||Qe)),S&&(Qe=ke(Ae,[Ee,Fe,Ye,ht],vt,pt)||Qe),Qe}function ve(Ae,Pe,Ee,Fe,Ve,Ye,tt,nt){return[nt[0]===!0||be(Ae,ge([Pe,Ee,Fe]),[Pe,Ee,Fe],Ye,tt),nt[1]===!0||be(Ae,ge([Fe,Ve,Pe]),[Fe,Ve,Pe],Ye,tt)]}function oe(Ae,Pe,Ee,Fe,Ve,Ye,tt,nt,ht){return nt?ve(Ae,Pe,Ee,Ve,Fe,Ye,tt,ht):ve(Ae,Ee,Ve,Fe,Pe,Ye,tt,ht)}function ie(Ae,Pe,Ee,Fe,Ve,Ye,tt){var nt,ht,vt,pt,Qe=!1,Ke=function(){Qe=be(Ae,[nt,ht,vt],[-1,-1,-1],Ve,Ye)||Qe,Qe=be(Ae,[vt,pt,nt],[-1,-1,-1],Ve,Ye)||Qe},Mt=tt[0],Ot=tt[1],Pt=tt[2];return Mt&&(nt=Z(ge([N(Pe,Ee-0,Fe-0)])[0],ge([N(Pe-1,Ee-0,Fe-0)])[0],Mt),ht=Z(ge([N(Pe,Ee-0,Fe-1)])[0],ge([N(Pe-1,Ee-0,Fe-1)])[0],Mt),vt=Z(ge([N(Pe,Ee-1,Fe-1)])[0],ge([N(Pe-1,Ee-1,Fe-1)])[0],Mt),pt=Z(ge([N(Pe,Ee-1,Fe-0)])[0],ge([N(Pe-1,Ee-1,Fe-0)])[0],Mt),Ke()),Ot&&(nt=Z(ge([N(Pe-0,Ee,Fe-0)])[0],ge([N(Pe-0,Ee-1,Fe-0)])[0],Ot),ht=Z(ge([N(Pe-0,Ee,Fe-1)])[0],ge([N(Pe-0,Ee-1,Fe-1)])[0],Ot),vt=Z(ge([N(Pe-1,Ee,Fe-1)])[0],ge([N(Pe-1,Ee-1,Fe-1)])[0],Ot),pt=Z(ge([N(Pe-1,Ee,Fe-0)])[0],ge([N(Pe-1,Ee-1,Fe-0)])[0],Ot),Ke()),Pt&&(nt=Z(ge([N(Pe-0,Ee-0,Fe)])[0],ge([N(Pe-0,Ee-0,Fe-1)])[0],Pt),ht=Z(ge([N(Pe-0,Ee-1,Fe)])[0],ge([N(Pe-0,Ee-1,Fe-1)])[0],Pt),vt=Z(ge([N(Pe-1,Ee-1,Fe)])[0],ge([N(Pe-1,Ee-1,Fe-1)])[0],Pt),pt=Z(ge([N(Pe-1,Ee-0,Fe)])[0],ge([N(Pe-1,Ee-0,Fe-1)])[0],Pt),Ke()),Qe}function he(Ae,Pe,Ee,Fe,Ve,Ye,tt,nt,ht,vt,pt,Qe){var Ke=Ae;return Qe?(d&&Ae==="even"&&(Ke=null),ze(Ke,Pe,Ee,Fe,Ve,Ye,tt,nt,ht,vt,pt)):(d&&Ae==="odd"&&(Ke=null),ze(Ke,ht,nt,tt,Ye,Ve,Fe,Ee,Pe,vt,pt))}function Se(Ae,Pe,Ee,Fe,Ve){for(var Ye=[],tt=0,nt=0;nt<Pe.length;nt++)for(var ht=Pe[nt],vt=1;vt<j;vt++)for(var pt=1;pt<z;pt++)Ye.push(oe(Ae,N(ht,pt-1,vt-1),N(ht,pt-1,vt),N(ht,pt,vt-1),N(ht,pt,vt),Ee,Fe,(ht+pt+vt)%2,Ve&&Ve[tt]?Ve[tt]:[])),tt++;return Ye}function ye(Ae,Pe,Ee,Fe,Ve){for(var Ye=[],tt=0,nt=0;nt<Pe.length;nt++)for(var ht=Pe[nt],vt=1;vt<P;vt++)for(var pt=1;pt<j;pt++)Ye.push(oe(Ae,N(vt-1,ht,pt-1),N(vt,ht,pt-1),N(vt-1,ht,pt),N(vt,ht,pt),Ee,Fe,(vt+ht+pt)%2,Ve&&Ve[tt]?Ve[tt]:[])),tt++;return Ye}function we(Ae,Pe,Ee,Fe,Ve){for(var Ye=[],tt=0,nt=0;nt<Pe.length;nt++)for(var ht=Pe[nt],vt=1;vt<z;vt++)for(var pt=1;pt<P;pt++)Ye.push(oe(Ae,N(pt-1,vt-1,ht),N(pt-1,vt,ht),N(pt,vt-1,ht),N(pt,vt,ht),Ee,Fe,(pt+vt+ht)%2,Ve&&Ve[tt]?Ve[tt]:[])),tt++;return Ye}function Me(Ae,Pe,Ee){for(var Fe=1;Fe<j;Fe++)for(var Ve=1;Ve<z;Ve++)for(var Ye=1;Ye<P;Ye++)he(Ae,N(Ye-1,Ve-1,Fe-1),N(Ye-1,Ve-1,Fe),N(Ye-1,Ve,Fe-1),N(Ye-1,Ve,Fe),N(Ye,Ve-1,Fe-1),N(Ye,Ve-1,Fe),N(Ye,Ve,Fe-1),N(Ye,Ve,Fe),Pe,Ee,(Ye+Ve+Fe)%2)}function Oe(Ae,Pe,Ee,Fe,Ve,Ye){for(var tt=[],nt=0,ht=0;ht<Pe.length;ht++)for(var vt=Pe[ht],pt=1;pt<j;pt++)for(var Qe=1;Qe<z;Qe++)tt.push(ie(Ae,vt,Qe,pt,Ee,Fe,Ve[ht],Ye&&Ye[nt]&&Ye[nt])),nt++;return tt}function Ie(Ae,Pe,Ee,Fe,Ve,Ye){for(var tt=[],nt=0,ht=0;ht<Pe.length;ht++)for(var vt=Pe[ht],pt=1;pt<P;pt++)for(var Qe=1;Qe<j;Qe++)tt.push(ie(Ae,pt,vt,Qe,Ee,Fe,Ve[ht],Ye&&Ye[nt]&&Ye[nt])),nt++;return tt}function de(Ae,Pe,Ee,Fe,Ve,Ye){for(var tt=[],nt=0,ht=0;ht<Pe.length;ht++)for(var vt=Pe[ht],pt=1;pt<z;pt++)for(var Qe=1;Qe<P;Qe++)tt.push(ie(Ae,Qe,pt,vt,Ee,Fe,Ve[ht],Ye&&Ye[nt]&&Ye[nt])),nt++;return tt}function _e(Ae,Pe){for(var Ee=[],Fe=Ae;Fe<Pe;Fe++)Ee.push(Fe);return Ee}return function(){K(),function(){for(var ht=0;ht<P;ht++)for(var vt=0;vt<z;vt++)for(var pt=0;pt<j;pt++){var Qe=N(ht,vt,pt);Q(a._x[Qe],a._y[Qe],a._z[Qe],a._value[Qe])}}();var Ae=null;if(y&&_&&(X(_),S=!0,Me(Ae,U,H),S=!1),g&&m){X(m);for(var Pe=a.surface.pattern,Ee=a.surface.count,Fe=0;Fe<Ee;Fe++){var Ve=Ee===1?.5:Fe/(Ee-1),Ye=(1-Ve)*U+Ve*H,tt=Math.abs(Ye-W)>Math.abs(Ye-F)?[W,Ye]:[Ye,F];d=!0,Me(Pe,tt[0],tt[1]),d=!1}}var nt=[[Math.min(U,F),Math.max(U,F)],[Math.min(W,H),Math.max(W,H)]];["x","y","z"].forEach(function(ht){for(var vt=[],pt=0;pt<nt.length;pt++){var Qe=0,Ke=nt[pt][0],Mt=nt[pt][1],Ot=a.slices[ht];if(Ot.show&&Ot.fill){X(Ot.fill);var Pt=[],St=[],He=[];if(Ot.locations.length)for(var We=0;We<Ot.locations.length;We++){var Be=o(Ot.locations[We],ht==="x"?E:ht==="y"?C:O);Be.distRatio===0?Pt.push(Be.id):Be.id>0&&(St.push(Be.id),ht==="x"?He.push([Be.distRatio,0,0]):ht==="y"?He.push([0,Be.distRatio,0]):He.push([0,0,Be.distRatio]))}else Pt=_e(1,ht==="x"?P-1:ht==="y"?z-1:j-1);St.length>0&&(vt[Qe]=ht==="x"?Oe(Ae,St,Ke,Mt,He,vt[Qe]):ht==="y"?Ie(Ae,St,Ke,Mt,He,vt[Qe]):de(Ae,St,Ke,Mt,He,vt[Qe]),Qe++),Pt.length>0&&(vt[Qe]=ht==="x"?Se(Ae,Pt,Ke,Mt,vt[Qe]):ht==="y"?ye(Ae,Pt,Ke,Mt,vt[Qe]):we(Ae,Pt,Ke,Mt,vt[Qe]),Qe++)}var Ge=a.caps[ht];Ge.show&&Ge.fill&&(X(Ge.fill),vt[Qe]=ht==="x"?Se(Ae,[0,P-1],Ke,Mt,vt[Qe]):ht==="y"?ye(Ae,[0,z-1],Ke,Mt,vt[Qe]):we(Ae,[0,j-1],Ke,Mt,vt[Qe]),Qe++)}}),w===0&&K(),a._meshX=h,a._meshY=c,a._meshZ=x,a._meshIntensity=p,a._Xs=E,a._Ys=C,a._Zs=O}(),a}ee.exports={findNearestOnAxis:o,generateIsoMeshes:r,createIsosurfaceTrace:function(a,l){var u=a.glplot.gl,h=M({gl:u}),c=new t(a,h,l.uid);return h._trace=c,c.update(l),a.glplot.add(h),c}}},70548:function(ee,R,e){var M=e(3400),k=e(24040),s=e(50048),T=e(27260);function b(f,o,t,i,n){var r=n("isomin"),a=n("isomax");a!=null&&r!=null&&r>a&&(o.isomin=null,o.isomax=null);var l=n("x"),u=n("y"),h=n("z"),c=n("value");l&&l.length&&u&&u.length&&h&&h.length&&c&&c.length?(k.getComponentMethod("calendars","handleTraceDefaults")(f,o,["x","y","z"],i),n("valuehoverformat"),["x","y","z"].forEach(function(x){n(x+"hoverformat");var p="caps."+x;n(p+".show")&&n(p+".fill");var v="slices."+x;n(v+".show")&&(n(v+".fill"),n(v+".locations"))}),n("spaceframe.show")&&n("spaceframe.fill"),n("surface.show")&&(n("surface.count"),n("surface.fill"),n("surface.pattern")),n("contour.show")&&(n("contour.color"),n("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(x){n(x)}),T(f,o,i,n,{prefix:"",cLetter:"c"}),o._length=null):o.visible=!1}ee.exports={supplyDefaults:function(f,o,t,i){b(f,o,0,i,function(n,r){return M.coerce(f,o,s,n,r)})},supplyIsoDefaults:b}},6296:function(ee,R,e){ee.exports={attributes:e(50048),supplyDefaults:e(70548).supplyDefaults,calc:e(62624),colorbar:{min:"cmin",max:"cmax"},plot:e(31460).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},52948:function(ee,R,e){var M=e(49084),k=e(29736).axisHoverFormat,s=e(21776).Ks,T=e(16716),b=e(45464),f=e(92880).extendFlat;ee.exports=f({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:s({editType:"calc"}),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},M("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:f({},T.contours.x.show,{}),color:T.contours.x.color,width:T.contours.x.width,editType:"calc"},lightposition:{x:f({},T.lightposition.x,{dflt:1e5}),y:f({},T.lightposition.y,{dflt:1e5}),z:f({},T.lightposition.z,{dflt:0}),editType:"calc"},lighting:f({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},T.lighting),hoverinfo:f({},b.hoverinfo,{editType:"calc"}),showlegend:f({},b.showlegend,{dflt:!1})})},1876:function(ee,R,e){var M=e(47128);ee.exports=function(k,s){s.intensity&&M(k,s,{vals:s.intensity,containerStr:"",cLetter:"c"})}},576:function(ee,R,e){var M=e(67792).gl_mesh3d,k=e(67792).delaunay_triangulate,s=e(67792).alpha_shape,T=e(67792).convex_hull,b=e(33040).parseColorScale,f=e(3400).isArrayOrTypedArray,o=e(43080),t=e(8932).extractOpts,i=e(52094);function n(c,x,p){this.scene=c,this.uid=p,this.mesh=x,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var r=n.prototype;function a(c){for(var x=[],p=c.length,v=0;v<p;v++)x[v]=o(c[v]);return x}function l(c,x,p,v){for(var g=[],y=x.length,m=0;m<y;m++)g[m]=c.d2l(x[m],0,v)*p;return g}function u(c){for(var x=[],p=c.length,v=0;v<p;v++)x[v]=Math.round(c[v]);return x}function h(c,x){for(var p=c.length,v=0;v<p;v++)if(c[v]<=-.5||c[v]>=x-.5)return!1;return!0}r.handlePick=function(c){if(c.object===this.mesh){var x=c.index=c.data.index;c.data._cellCenter?c.traceCoordinate=c.data.dataCoordinate:c.traceCoordinate=[this.data.x[x],this.data.y[x],this.data.z[x]];var p=this.data.hovertext||this.data.text;return f(p)&&p[x]!==void 0?c.textLabel=p[x]:p&&(c.textLabel=p),!0}},r.update=function(c){var x=this.scene,p=x.fullSceneLayout;this.data=c;var v,g=c.x.length,y=i(l(p.xaxis,c.x,x.dataScale[0],c.xcalendar),l(p.yaxis,c.y,x.dataScale[1],c.ycalendar),l(p.zaxis,c.z,x.dataScale[2],c.zcalendar));if(c.i&&c.j&&c.k){if(c.i.length!==c.j.length||c.j.length!==c.k.length||!h(c.i,g)||!h(c.j,g)||!h(c.k,g))return;v=i(u(c.i),u(c.j),u(c.k))}else v=c.alphahull===0?T(y):c.alphahull>0?s(c.alphahull,y):function(S,w){for(var E=["x","y","z"].indexOf(S),C=[],O=w.length,P=0;P<O;P++)C[P]=[w[P][(E+1)%3],w[P][(E+2)%3]];return k(C)}(c.delaunayaxis,y);var m={positions:y,cells:v,lightPosition:[c.lightposition.x,c.lightposition.y,c.lightposition.z],ambient:c.lighting.ambient,diffuse:c.lighting.diffuse,specular:c.lighting.specular,roughness:c.lighting.roughness,fresnel:c.lighting.fresnel,vertexNormalsEpsilon:c.lighting.vertexnormalsepsilon,faceNormalsEpsilon:c.lighting.facenormalsepsilon,opacity:c.opacity,contourEnable:c.contour.show,contourColor:o(c.contour.color).slice(0,3),contourWidth:c.contour.width,useFacetNormals:c.flatshading};if(c.intensity){var _=t(c);this.color="#fff";var d=c.intensitymode;m[d+"Intensity"]=c.intensity,m[d+"IntensityBounds"]=[_.min,_.max],m.colormap=b(c)}else c.vertexcolor?(this.color=c.vertexcolor[0],m.vertexColors=a(c.vertexcolor)):c.facecolor?(this.color=c.facecolor[0],m.cellColors=a(c.facecolor)):(this.color=c.color,m.meshColor=o(c.color));this.mesh.update(m)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ee.exports=function(c,x){var p=c.glplot.gl,v=M({gl:p}),g=new n(c,v,x.uid);return v._trace=g,g.update(x),c.glplot.add(v),g}},74212:function(ee,R,e){var M=e(24040),k=e(3400),s=e(27260),T=e(52948);ee.exports=function(b,f,o,t){function i(r,a){return k.coerce(b,f,T,r,a)}function n(r){var a=r.map(function(l){var u=i(l);return u&&k.isArrayOrTypedArray(u)?u:null});return a.every(function(l){return l&&l.length===a[0].length})&&a}n(["x","y","z"])?(n(["i","j","k"]),(!f.i||f.j&&f.k)&&(!f.j||f.k&&f.i)&&(!f.k||f.i&&f.j)?(M.getComponentMethod("calendars","handleTraceDefaults")(b,f,["x","y","z"],t),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(r){i(r)}),i("contour.show")&&(i("contour.color"),i("contour.width")),"intensity"in b?(i("intensity"),i("intensitymode"),s(b,f,t,i,{prefix:"",cLetter:"c"})):(f.showscale=!1,"facecolor"in b?i("facecolor"):"vertexcolor"in b?i("vertexcolor"):i("color",o)),i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),f._length=null):f.visible=!1):f.visible=!1}},7404:function(ee,R,e){ee.exports={attributes:e(52948),supplyDefaults:e(74212),calc:e(1876),colorbar:{min:"cmin",max:"cmax"},plot:e(576),moduleType:"trace",name:"mesh3d",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},20279:function(ee,R,e){var M=e(3400).extendFlat,k=e(52904),s=e(29736).axisHoverFormat,T=e(98192).u,b=e(55756),f=e(48164),o=f.INCREASING.COLOR,t=f.DECREASING.COLOR,i=k.line;function n(r){return{line:{color:M({},i.color,{dflt:r}),width:i.width,dash:T,editType:"style"},editType:"style"}}ee.exports={xperiod:k.xperiod,xperiod0:k.xperiod0,xperiodalignment:k.xperiodalignment,xhoverformat:s("x"),yhoverformat:s("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:M({},i.width,{}),dash:M({},T,{}),editType:"style"},increasing:n(o),decreasing:n(t),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:M({},b.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}}),zorder:k.zorder}},42812:function(ee,R,e){var M=e(3400),k=M._,s=e(54460),T=e(1220),b=e(39032).BADNUM;function f(t,i,n,r){return{o:t,h:i,l:n,c:r}}function o(t,i,n,r,a,l){for(var u=a.makeCalcdata(i,"open"),h=a.makeCalcdata(i,"high"),c=a.makeCalcdata(i,"low"),x=a.makeCalcdata(i,"close"),p=M.isArrayOrTypedArray(i.text),v=M.isArrayOrTypedArray(i.hovertext),g=!0,y=null,m=!!i.xperiodalignment,_=[],d=0;d<r.length;d++){var S=r[d],w=u[d],E=h[d],C=c[d],O=x[d];if(S!==b&&w!==b&&E!==b&&C!==b&&O!==b){O===w?y!==null&&O!==y&&(g=O>y):g=O>w,y=O;var P=l(w,E,C,O);P.pos=S,P.yc=(w+O)/2,P.i=d,P.dir=g?"increasing":"decreasing",P.x=P.pos,P.y=[C,E],m&&(P.orig_p=n[d]),p&&(P.tx=i.text[d]),v&&(P.htx=i.hovertext[d]),_.push(P)}else _.push({pos:S,empty:!0})}return i._extremes[a._id]=s.findExtremes(a,M.concat(c,h),{padded:!0}),_.length&&(_[0].t={labels:{open:k(t,"open:")+" ",high:k(t,"high:")+" ",low:k(t,"low:")+" ",close:k(t,"close:")+" "}}),_}ee.exports={calc:function(t,i){var n=s.getFromId(t,i.xaxis),r=s.getFromId(t,i.yaxis),a=function(x,p,v){var g=v._minDiff;if(!g){var y,m=x._fullData,_=[];for(g=1/0,y=0;y<m.length;y++){var d=m[y];if(d.type==="ohlc"&&d.visible===!0&&d.xaxis===p._id){_.push(d);var S=p.makeCalcdata(d,"x");d._origX=S;var w=T(v,p,"x",S).vals;d._xcalc=w;var E=M.distinctVals(w).minDiff;E&&isFinite(E)&&(g=Math.min(g,E))}}for(g===1/0&&(g=1),y=0;y<_.length;y++)_[y]._minDiff=g}return g*v.tickwidth}(t,n,i),l=i._minDiff;i._minDiff=null;var u=i._origX;i._origX=null;var h=i._xcalc;i._xcalc=null;var c=o(t,i,u,h,r,f);return i._extremes[n._id]=s.findExtremes(n,h,{vpad:l/2}),c.length?(M.extendFlat(c[0].t,{wHover:l/2,tickLen:a}),c):[{t:{empty:!0}}]},calcCommon:o}},23860:function(ee,R,e){var M=e(3400),k=e(52744),s=e(31147),T=e(20279);function b(f,o,t,i){t(i+".line.color"),t(i+".line.width",o.line.width),t(i+".line.dash",o.line.dash)}ee.exports=function(f,o,t,i){function n(r,a){return M.coerce(f,o,T,r,a)}k(f,o,n,i)?(s(f,o,i,n,{x:!0}),n("xhoverformat"),n("yhoverformat"),n("line.width"),n("line.dash"),b(0,o,n,"increasing"),b(0,o,n,"decreasing"),n("text"),n("hovertext"),n("tickwidth"),i._requestRangeslider[o.xaxis]=!0,n("zorder")):o.visible=!1}},18720:function(ee,R,e){var M=e(54460),k=e(3400),s=e(93024),T=e(76308),b=e(3400).fillText,f=e(48164),o={increasing:f.INCREASING.SYMBOL,decreasing:f.DECREASING.SYMBOL};function t(r,a,l,u){var h,c,x=r.cd,p=r.xa,v=x[0].trace,g=x[0].t,y=v.type,m=y==="ohlc"?"l":"min",_=y==="ohlc"?"h":"max",d=g.bPos||0,S=function(F){return F.pos+d-a},w=g.bdPos||g.tickLen,E=g.wHover,C=Math.min(1,w/Math.abs(p.r2c(p.range[1])-p.r2c(p.range[0])));function O(F){var U=S(F);return s.inbox(U-E,U+E,h)}function P(F){var U=F[m],H=F[_];return U===H||s.inbox(U-l,H-l,h)}function z(F){return(O(F)+P(F))/2}h=r.maxHoverDistance-C,c=r.maxSpikeDistance-C;var j=s.getDistanceFunction(u,O,P,z);if(s.getClosest(x,j,r),r.index===!1)return null;var I=x[r.index];if(I.empty)return null;var N=v[I.dir],W=N.line.color;return T.opacity(W)&&N.line.width?r.color=W:r.color=N.fillcolor,r.x0=p.c2p(I.pos+d-w,!0),r.x1=p.c2p(I.pos+d+w,!0),r.xLabelVal=I.orig_p!==void 0?I.orig_p:I.pos,r.spikeDistance=z(I)*c/h,r.xSpike=p.c2p(I.pos,!0),r}function i(r,a,l,u){var h=r.cd,c=r.ya,x=h[0].trace,p=h[0].t,v=[],g=t(r,a,l,u);if(!g)return[];var y=h[g.index].hi||x.hoverinfo,m=y.split("+");if(y!=="all"&&m.indexOf("y")===-1)return[];for(var _=["high","open","close","low"],d={},S=0;S<_.length;S++){var w,E=_[S],C=x[E][g.index],O=c.c2p(C,!0);C in d?(w=d[C]).yLabel+="<br>"+p.labels[E]+M.hoverLabelText(c,C,x.yhoverformat):((w=k.extendFlat({},g)).y0=w.y1=O,w.yLabelVal=C,w.yLabel=p.labels[E]+M.hoverLabelText(c,C,x.yhoverformat),w.name="",v.push(w),d[C]=w)}return v}function n(r,a,l,u){var h=r.cd,c=r.ya,x=h[0].trace,p=h[0].t,v=t(r,a,l,u);if(!v)return[];var g=h[v.index],y=v.index=g.i,m=g.dir;function _(P){return p.labels[P]+M.hoverLabelText(c,x[P][y],x.yhoverformat)}var d=g.hi||x.hoverinfo,S=d.split("+"),w=d==="all",E=w||S.indexOf("y")!==-1,C=w||S.indexOf("text")!==-1,O=E?[_("open"),_("high"),_("low"),_("close")+"  "+o[m]]:[];return C&&b(g,x,O),v.extraText=O.join("<br>"),v.y0=v.y1=c.c2p(g.yc,!0),[v]}ee.exports={hoverPoints:function(r,a,l,u){return r.cd[0].trace.hoverlabel.split?i(r,a,l,u):n(r,a,l,u)},hoverSplit:i,hoverOnPoints:n}},65456:function(ee,R,e){ee.exports={moduleType:"trace",name:"ohlc",basePlotModule:e(57952),categories:["cartesian","svg","showLegend"],meta:{},attributes:e(20279),supplyDefaults:e(23860),calc:e(42812).calc,plot:e(36664),style:e(14008),hoverPoints:e(18720).hoverPoints,selectPoints:e(97384)}},52744:function(ee,R,e){var M=e(24040),k=e(3400);ee.exports=function(s,T,b,f){var o=b("x"),t=b("open"),i=b("high"),n=b("low"),r=b("close");if(b("hoverlabel.split"),M.getComponentMethod("calendars","handleTraceDefaults")(s,T,["x"],f),t&&i&&n&&r){var a=Math.min(t.length,i.length,n.length,r.length);return o&&(a=Math.min(a,k.minRowLength(o))),T._length=a,a}}},36664:function(ee,R,e){var M=e(33428),k=e(3400);ee.exports=function(s,T,b,f){var o=T.yaxis,t=T.xaxis,i=!!t.rangebreaks;k.makeTraceGroups(f,b,"trace ohlc").each(function(n){var r=M.select(this),a=n[0],l=a.t;if(a.trace.visible!==!0||l.empty)r.remove();else{var u=l.tickLen,h=r.selectAll("path").data(k.identity);h.enter().append("path"),h.exit().remove(),h.attr("d",function(c){if(c.empty)return"M0,0Z";var x=t.c2p(c.pos-u,!0),p=t.c2p(c.pos+u,!0),v=i?(x+p)/2:t.c2p(c.pos,!0);return"M"+x+","+o.c2p(c.o,!0)+"H"+v+"M"+v+","+o.c2p(c.h,!0)+"V"+o.c2p(c.l,!0)+"M"+p+","+o.c2p(c.c,!0)+"H"+v})}})}},97384:function(ee){ee.exports=function(R,e){var M,k=R.cd,s=R.xaxis,T=R.yaxis,b=[],f=k[0].t.bPos||0;if(e===!1)for(M=0;M<k.length;M++)k[M].selected=0;else for(M=0;M<k.length;M++){var o=k[M];e.contains([s.c2p(o.pos+f),T.c2p(o.yc)],null,o.i,R)?(b.push({pointNumber:o.i,x:s.c2d(o.pos),y:T.c2d(o.yc)}),o.selected=1):o.selected=0}return b}},14008:function(ee,R,e){var M=e(33428),k=e(43616),s=e(76308);ee.exports=function(T,b,f){var o=f||M.select(T).selectAll("g.ohlclayer").selectAll("g.trace");o.style("opacity",function(t){return t[0].trace.opacity}),o.each(function(t){var i=t[0].trace;M.select(this).selectAll("path").each(function(n){if(!n.empty){var r=i[n.dir].line;M.select(this).style("fill","none").call(s.stroke,r.color).call(k.dashLine,r.dash,r.width).style("opacity",i.selectedpoints&&!n.selected?.3:1)}})})}},72140:function(ee,R,e){var M=e(92880).extendFlat,k=e(45464),s=e(25376),T=e(49084),b=e(21776).Ks,f=e(86968).u,o=M({editType:"calc"},T("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:b({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});ee.exports={domain:f({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:M({},k.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:b({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:s({editType:"calc"}),tickfont:s({autoShadowDflt:!0,editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:o,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},91800:function(ee,R,e){var M=e(84888)._M,k=e(60268),s="parcats";R.name=s,R.plot=function(T,b,f,o){var t=M(T.calcdata,s);if(t.length){var i=t[0];k(T,i,f,o)}},R.clean=function(T,b,f,o){var t=o._has&&o._has("parcats"),i=b._has&&b._has("parcats");t&&!i&&o._paperdiv.selectAll(".parcats").remove()}},69136:function(ee,R,e){var M=e(71688).wrap,k=e(94288).hasColorscale,s=e(47128),T=e(68944),b=e(43616),f=e(3400),o=e(38248);function t(r,a,l){r.valueInds.push(a),r.count+=l}function i(r,a,l){return{categoryInds:r,color:a,rawColor:l,valueInds:[],count:0}}function n(r,a,l){r.valueInds.push(a),r.count+=l}ee.exports=function(r,a){var l=f.filterVisible(a.dimensions);if(l.length===0)return[];var u,h,c,x=l.map(function(H){var ne;if(H.categoryorder==="trace")ne=null;else if(H.categoryorder==="array")ne=H.categoryarray;else{ne=T(H.values);for(var $=!0,K=0;K<ne.length;K++)if(!o(ne[K])){$=!1;break}ne.sort($?f.sorterAsc:void 0),H.categoryorder==="category descending"&&(ne=ne.reverse())}return function(Q,Z){Z=Z==null?[]:Z.map(function(ge){return ge});var X={},te={},ae=[];Z.forEach(function(ge,me){X[ge]=0,te[ge]=me});for(var se=0;se<Q.length;se++){var ce,fe=Q[se];X[fe]===void 0?(X[fe]=1,ce=Z.push(fe)-1,te[fe]=ce):(X[fe]++,ce=te[fe]),ae.push(ce)}var pe=Z.map(function(ge){return X[ge]});return{uniqueValues:Z,uniqueCounts:pe,inds:ae}}(H.values,ne)});u=f.isArrayOrTypedArray(a.counts)?a.counts:[a.counts],function(H){var ne,$=H.map(function(K){return K.displayindex});if(function(K){for(var Q=new Array(K.length),Z=0;Z<K.length;Z++){if(K[Z]<0||K[Z]>=K.length||Q[K[Z]]!==void 0)return!1;Q[K[Z]]=!0}return!0}($))for(ne=0;ne<H.length;ne++)H[ne]._displayindex=H[ne].displayindex;else for(ne=0;ne<H.length;ne++)H[ne]._displayindex=ne}(l),l.forEach(function(H,ne){(function($,K){$._categoryarray=K.uniqueValues,$.ticktext===null||$.ticktext===void 0?$._ticktext=[]:$._ticktext=$.ticktext.slice();for(var Q=$._ticktext.length;Q<K.uniqueValues.length;Q++)$._ticktext.push(K.uniqueValues[Q])})(H,x[ne])});var p,v=a.line;v?(k(a,"line")&&s(r,a,{vals:a.line.color,containerStr:"line",cLetter:"c"}),p=b.tryColorscale(v)):p=f.identity;var g,y,m,_,d,S=l[0].values.length,w={},E=x.map(function(H){return H.inds});for(c=0,g=0;g<S;g++){var C=[];for(y=0;y<E.length;y++)C.push(E[y][g]);h=u[g%u.length],c+=h;var O=(m=g,_=void 0,d=void 0,f.isArrayOrTypedArray(v.color)?d=_=v.color[m%v.color.length]:_=v.color,{color:p(_),rawColor:d}),P=C+"-"+O.rawColor;w[P]===void 0&&(w[P]=i(C,O.color,O.rawColor)),n(w[P],g,h)}var z,j=l.map(function(H,ne){return function($,K,Q,Z,X){return{dimensionInd:$,containerInd:K,displayInd:Q,dimensionLabel:Z,count:X,categories:[],dragX:null}}(ne,H._index,H._displayindex,H.label,c)});for(g=0;g<S;g++)for(h=u[g%u.length],y=0;y<j.length;y++){var I=j[y].containerInd,N=x[y].inds[g],W=j[y].categories;if(W[N]===void 0){var F=a.dimensions[I]._categoryarray[N],U=a.dimensions[I]._ticktext[N];W[N]={dimensionInd:y,categoryInd:z=N,categoryValue:F,displayInd:z,categoryLabel:U,valueInds:[],count:0,dragY:null}}t(W[N],g,h)}return M(function(H,ne,$){var K=H.map(function(Q){return Q.categories.length}).reduce(function(Q,Z){return Math.max(Q,Z)});return{dimensions:H,paths:ne,trace:void 0,maxCats:K,count:$}}(j,w,c))}},76671:function(ee,R,e){var M=e(3400),k=e(94288).hasColorscale,s=e(27260),T=e(86968).Q,b=e(51272),f=e(72140),o=e(26284),t=e(38116).isTypedArraySpec;function i(n,r){function a(v,g){return M.coerce(n,r,f.dimensions,v,g)}var l=a("values"),u=a("visible");if(l&&l.length||(u=r.visible=!1),u){a("label"),a("displayindex",r._index);var h,c=n.categoryarray,x=M.isArrayOrTypedArray(c)&&c.length>0||t(c);x&&(h="array");var p=a("categoryorder",h);p==="array"?(a("categoryarray"),a("ticktext")):(delete n.categoryarray,delete n.ticktext),x||p!=="array"||(r.categoryorder="trace")}}ee.exports=function(n,r,a,l){function u(p,v){return M.coerce(n,r,f,p,v)}var h=b(n,r,{name:"dimensions",handleItemDefaults:i}),c=function(p,v,g,y,m){m("line.shape"),m("line.hovertemplate");var _=m("line.color",y.colorway[0]);if(k(p,"line")&&M.isArrayOrTypedArray(_)){if(_.length)return m("line.colorscale"),s(p,v,y,m,{prefix:"line.",cLetter:"c"}),_.length;v.line.color=g}return 1/0}(n,r,a,l,u);T(r,l,u),Array.isArray(h)&&h.length||(r.visible=!1),o(r,h,"values",c),u("hoveron"),u("hovertemplate"),u("arrangement"),u("bundlecolors"),u("sortpaths"),u("counts");var x=l.font;M.coerceFont(u,"labelfont",x,{overrideDflt:{size:Math.round(x.size)}}),M.coerceFont(u,"tickfont",x,{autoShadowDflt:!0,overrideDflt:{size:Math.round(x.size/1.2)}})}},22020:function(ee,R,e){ee.exports={attributes:e(72140),supplyDefaults:e(76671),calc:e(69136),plot:e(60268),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:e(91800),categories:["noOpacity"],meta:{}}},51036:function(ee,R,e){var M=e(33428),k=e(67756).Gz,s=e(36424),T=e(93024),b=e(3400),f=b.strTranslate,o=e(43616),t=e(49760),i=e(72736);function n($,K,Q,Z){var X=K._context.staticPlot,te=$.map(W.bind(0,K,Q)),ae=Z.selectAll("g.parcatslayer").data([null]);ae.enter().append("g").attr("class","parcatslayer").style("pointer-events",X?"none":"all");var se=ae.selectAll("g.trace.parcats").data(te,r),ce=se.enter().append("g").attr("class","trace parcats");se.attr("transform",function(ve){return f(ve.x,ve.y)}),ce.append("g").attr("class","paths");var fe=se.select("g.paths").selectAll("path.path").data(function(ve){return ve.paths},r);fe.attr("fill",function(ve){return ve.model.color});var pe=fe.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(ve){return ve.model.color}).attr("fill-opacity",0);v(pe),fe.attr("d",function(ve){return ve.svgD}),pe.empty()||fe.sort(l),fe.exit().remove(),fe.on("mouseover",u).on("mouseout",h).on("click",p),ce.append("g").attr("class","dimensions");var ge=se.select("g.dimensions").selectAll("g.dimension").data(function(ve){return ve.dimensions},r);ge.enter().append("g").attr("class","dimension"),ge.attr("transform",function(ve){return f(ve.x,0)}),ge.exit().remove();var me=ge.selectAll("g.category").data(function(ve){return ve.categories},r),be=me.enter().append("g").attr("class","category");me.attr("transform",function(ve){return f(0,ve.y)}),be.append("rect").attr("class","catrect").attr("pointer-events","none"),me.select("rect.catrect").attr("fill","none").attr("width",function(ve){return ve.width}).attr("height",function(ve){return ve.height}),y(be);var ke=me.selectAll("rect.bandrect").data(function(ve){return ve.bands},r);ke.each(function(){b.raiseToTop(this)}),ke.attr("fill",function(ve){return ve.color});var ze=ke.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(ve){return ve.color}).attr("fill-opacity",0);ke.attr("fill",function(ve){return ve.color}).attr("width",function(ve){return ve.width}).attr("height",function(ve){return ve.height}).attr("y",function(ve){return ve.y}).attr("cursor",function(ve){return ve.parcatsViewModel.arrangement==="fixed"?"default":ve.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),m(ze),ke.exit().remove(),be.append("text").attr("class","catlabel").attr("pointer-events","none"),me.select("text.catlabel").attr("text-anchor",function(ve){return a(ve)?"start":"end"}).attr("alignment-baseline","middle").style("fill","rgb(0, 0, 0)").attr("x",function(ve){return a(ve)?ve.width+5:-5}).attr("y",function(ve){return ve.height/2}).text(function(ve){return ve.model.categoryLabel}).each(function(ve){o.font(M.select(this),ve.parcatsViewModel.categorylabelfont),i.convertToTspans(M.select(this),K)}),be.append("text").attr("class","dimlabel"),me.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(ve){return ve.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(ve){return ve.width/2}).attr("y",-5).text(function(ve,oe){return oe===0?ve.parcatsViewModel.model.dimensions[ve.model.dimensionInd].dimensionLabel:null}).each(function(ve){o.font(M.select(this),ve.parcatsViewModel.labelfont)}),me.selectAll("rect.bandrect").on("mouseover",E).on("mouseout",C),me.exit().remove(),ge.call(M.behavior.drag().origin(function(ve){return{x:ve.x,y:0}}).on("dragstart",O).on("drag",P).on("dragend",z)),se.each(function(ve){ve.traceSelection=M.select(this),ve.pathSelection=M.select(this).selectAll("g.paths").selectAll("path.path"),ve.dimensionSelection=M.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),se.exit().remove()}function r($){return $.key}function a($){var K=$.parcatsViewModel.dimensions.length,Q=$.parcatsViewModel.dimensions[K-1].model.dimensionInd;return $.model.dimensionInd===Q}function l($,K){return $.model.rawColor>K.model.rawColor?1:$.model.rawColor<K.model.rawColor?-1:0}function u($){if(!$.parcatsViewModel.dragDimension&&$.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){b.raiseToTop(this),g(M.select(this));var K=c($),Q=x($);if($.parcatsViewModel.graphDiv.emit("plotly_hover",{points:K,event:M.event,constraints:Q}),$.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var Z,X,te,ae=M.mouse(this)[0],se=$.parcatsViewModel.graphDiv,ce=$.parcatsViewModel.trace,fe=se._fullLayout,pe=fe._paperdiv.node().getBoundingClientRect(),ge=$.parcatsViewModel.graphDiv.getBoundingClientRect();for(te=0;te<$.leftXs.length-1;te++)if($.leftXs[te]+$.dimWidths[te]-2<=ae&&ae<=$.leftXs[te+1]+2){var me=$.parcatsViewModel.dimensions[te],be=$.parcatsViewModel.dimensions[te+1];Z=(me.x+me.width+be.x)/2,X=($.topYs[te]+$.topYs[te+1]+$.height)/2;break}var ke=$.parcatsViewModel.x+Z,ze=$.parcatsViewModel.y+X,ve=t.mostReadable($.model.color,["black","white"]),oe=$.model.count,ie=oe/$.parcatsViewModel.model.count,he={countLabel:oe,probabilityLabel:ie.toFixed(3)},Se=[];$.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Se.push(["Count:",he.countLabel].join(" ")),$.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Se.push(["P:",he.probabilityLabel].join(" "));var ye=Se.join("<br>"),we=M.mouse(se)[0];T.loneHover({trace:ce,x:ke-pe.left+ge.left,y:ze-pe.top+ge.top,text:ye,color:$.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:ve,idealAlign:we<ke?"right":"left",hovertemplate:(ce.line||{}).hovertemplate,hovertemplateLabels:he,eventData:[{data:ce._input,fullData:ce,count:oe,probability:ie}]},{container:fe._hoverlayer.node(),outerContainer:fe._paper.node(),gd:se})}}}function h($){if(!$.parcatsViewModel.dragDimension&&(v(M.select(this)),T.loneUnhover($.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),$.parcatsViewModel.pathSelection.sort(l),$.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var K=c($),Q=x($);$.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:K,event:M.event,constraints:Q})}}function c($){for(var K=[],Q=j($.parcatsViewModel),Z=0;Z<$.model.valueInds.length;Z++){var X=$.model.valueInds[Z];K.push({curveNumber:Q,pointNumber:X})}return K}function x($){for(var K={},Q=$.parcatsViewModel.model.dimensions,Z=0;Z<Q.length;Z++){var X=Q[Z],te=X.categories[$.model.categoryInds[Z]];K[X.containerInd]=te.categoryValue}return $.model.rawColor!==void 0&&(K.color=$.model.rawColor),K}function p($){if($.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var K=c($),Q=x($);$.parcatsViewModel.graphDiv.emit("plotly_click",{points:K,event:M.event,constraints:Q})}}function v($){$.attr("fill",function(K){return K.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function g($){$.attr("fill-opacity",.8).attr("stroke",function(K){return t.mostReadable(K.model.color,["black","white"])}).attr("stroke-width",.3)}function y($){$.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function m($){$.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function _($){var K=$.parcatsViewModel.pathSelection,Q=$.categoryViewModel.model.dimensionInd,Z=$.categoryViewModel.model.categoryInd;return K.filter(function(X){return X.model.categoryInds[Q]===Z&&X.model.color===$.color})}function d($,K,Q){var Z=M.select($).datum(),X=Z.categoryViewModel.model,te=Z.parcatsViewModel.graphDiv,ae=M.select($.parentNode).selectAll("rect.bandrect"),se=[];ae.each(function(fe){_(fe).each(function(pe){Array.prototype.push.apply(se,c(pe))})});var ce={};ce[X.dimensionInd]=X.categoryValue,te.emit(K,{points:se,event:Q,constraints:ce})}function S($,K,Q){var Z=M.select($).datum(),X=Z.categoryViewModel.model,te=Z.parcatsViewModel.graphDiv,ae=_(Z),se=[];ae.each(function(fe){Array.prototype.push.apply(se,c(fe))});var ce={};ce[X.dimensionInd]=X.categoryValue,Z.rawColor!==void 0&&(ce.color=Z.rawColor),te.emit(K,{points:se,event:Q,constraints:ce})}function w($,K,Q){$._fullLayout._calcInverseTransform($);var Z,X,te=$._fullLayout._invScaleX,ae=$._fullLayout._invScaleY,se=M.select(Q.parentNode).select("rect.catrect"),ce=se.node().getBoundingClientRect(),fe=se.datum(),pe=fe.parcatsViewModel,ge=pe.model.dimensions[fe.model.dimensionInd],me=pe.trace,be=ce.top+ce.height/2;pe.dimensions.length>1&&ge.displayInd===pe.dimensions.length-1?(Z=ce.left,X="left"):(Z=ce.left+ce.width,X="right");var ke=fe.model.count,ze=fe.model.categoryLabel,ve=ke/fe.parcatsViewModel.model.count,oe={countLabel:ke,categoryLabel:ze,probabilityLabel:ve.toFixed(3)},ie=[];fe.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&ie.push(["Count:",oe.countLabel].join(" ")),fe.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&ie.push(["P("+oe.categoryLabel+"):",oe.probabilityLabel].join(" "));var he=ie.join("<br>");return{trace:me,x:te*(Z-K.left),y:ae*(be-K.top),text:he,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:X,hovertemplate:me.hovertemplate,hovertemplateLabels:oe,eventData:[{data:me._input,fullData:me,count:ke,category:ze,probability:ve}]}}function E($){if(!$.parcatsViewModel.dragDimension&&$.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){if(M.mouse(this)[1]<-1)return;var K,Q=$.parcatsViewModel.graphDiv,Z=Q._fullLayout,X=Z._paperdiv.node().getBoundingClientRect(),te=$.parcatsViewModel.hoveron,ae=this;te==="color"?(function(se){var ce=M.select(se).datum(),fe=_(ce);g(fe),fe.each(function(){b.raiseToTop(this)}),M.select(se.parentNode).selectAll("rect.bandrect").filter(function(pe){return pe.color===ce.color}).each(function(){b.raiseToTop(this),M.select(this).attr("stroke","black").attr("stroke-width",1.5)})}(ae),S(ae,"plotly_hover",M.event)):(function(se){M.select(se.parentNode).selectAll("rect.bandrect").each(function(ce){var fe=_(ce);g(fe),fe.each(function(){b.raiseToTop(this)})}),M.select(se.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(ae),d(ae,"plotly_hover",M.event)),$.parcatsViewModel.hoverinfoItems.indexOf("none")===-1&&(te==="category"?K=w(Q,X,ae):te==="color"?K=function(se,ce,fe){se._fullLayout._calcInverseTransform(se);var pe,ge,me=se._fullLayout._invScaleX,be=se._fullLayout._invScaleY,ke=fe.getBoundingClientRect(),ze=M.select(fe).datum(),ve=ze.categoryViewModel,oe=ve.parcatsViewModel,ie=oe.model.dimensions[ve.model.dimensionInd],he=oe.trace,Se=ke.y+ke.height/2;oe.dimensions.length>1&&ie.displayInd===oe.dimensions.length-1?(pe=ke.left,ge="left"):(pe=ke.left+ke.width,ge="right");var ye=ve.model.categoryLabel,we=ze.parcatsViewModel.model.count,Me=0;ze.categoryViewModel.bands.forEach(function(Ye){Ye.color===ze.color&&(Me+=Ye.count)});var Oe=ve.model.count,Ie=0;oe.pathSelection.each(function(Ye){Ye.model.color===ze.color&&(Ie+=Ye.model.count)});var de=Me/we,_e=Me/Ie,Ae=Me/Oe,Pe={countLabel:Me,categoryLabel:ye,probabilityLabel:de.toFixed(3)},Ee=[];ve.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ee.push(["Count:",Pe.countLabel].join(" ")),ve.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(Ee.push("P(color  "+ye+"): "+Pe.probabilityLabel),Ee.push("P("+ye+" | color): "+_e.toFixed(3)),Ee.push("P(color | "+ye+"): "+Ae.toFixed(3)));var Fe=Ee.join("<br>"),Ve=t.mostReadable(ze.color,["black","white"]);return{trace:he,x:me*(pe-ce.left),y:be*(Se-ce.top),text:Fe,color:ze.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:Ve,fontSize:10,idealAlign:ge,hovertemplate:he.hovertemplate,hovertemplateLabels:Pe,eventData:[{data:he._input,fullData:he,category:ye,count:we,probability:de,categorycount:Oe,colorcount:Ie,bandcolorcount:Me}]}}(Q,X,ae):te==="dimension"&&(K=function(se,ce,fe){var pe=[];return M.select(fe.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){pe.push(w(se,ce,this))}),pe}(Q,X,ae)),K&&T.loneHover(K,{container:Z._hoverlayer.node(),outerContainer:Z._paper.node(),gd:Q}))}}function C($){var K=$.parcatsViewModel;K.dragDimension||(v(K.pathSelection),y(K.dimensionSelection.selectAll("g.category")),m(K.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),T.loneUnhover(K.graphDiv._fullLayout._hoverlayer.node()),K.pathSelection.sort(l),K.hoverinfoItems.indexOf("skip")!==-1)||($.parcatsViewModel.hoveron==="color"?S(this,"plotly_unhover",M.event):d(this,"plotly_unhover",M.event))}function O($){$.parcatsViewModel.arrangement!=="fixed"&&($.dragDimensionDisplayInd=$.model.displayInd,$.initialDragDimensionDisplayInds=$.parcatsViewModel.model.dimensions.map(function(K){return K.displayInd}),$.dragHasMoved=!1,$.dragCategoryDisplayInd=null,M.select(this).selectAll("g.category").select("rect.catrect").each(function(K){var Q=M.mouse(this)[0],Z=M.mouse(this)[1];-2<=Q&&Q<=K.width+2&&-2<=Z&&Z<=K.height+2&&($.dragCategoryDisplayInd=K.model.displayInd,$.initialDragCategoryDisplayInds=$.model.categories.map(function(X){return X.displayInd}),K.model.dragY=K.y,b.raiseToTop(this.parentNode),M.select(this.parentNode).selectAll("rect.bandrect").each(function(X){X.y<Z&&Z<=X.y+X.height&&($.potentialClickBand=this)}))}),$.parcatsViewModel.dragDimension=$,T.loneUnhover($.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function P($){if($.parcatsViewModel.arrangement!=="fixed"&&($.dragHasMoved=!0,$.dragDimensionDisplayInd!==null)){var K=$.dragDimensionDisplayInd,Q=K-1,Z=K+1,X=$.parcatsViewModel.dimensions[K];if($.dragCategoryDisplayInd!==null){var te=X.categories[$.dragCategoryDisplayInd];te.model.dragY+=M.event.dy;var ae=te.model.dragY,se=te.model.displayInd,ce=X.categories,fe=ce[se-1],pe=ce[se+1];fe!==void 0&&ae<fe.y+fe.height/2&&(te.model.displayInd=fe.model.displayInd,fe.model.displayInd=se),pe!==void 0&&ae+te.height>pe.y+pe.height/2&&(te.model.displayInd=pe.model.displayInd,pe.model.displayInd=se),$.dragCategoryDisplayInd=te.model.displayInd}if($.dragCategoryDisplayInd===null||$.parcatsViewModel.arrangement==="freeform"){X.model.dragX=M.event.x;var ge=$.parcatsViewModel.dimensions[Q],me=$.parcatsViewModel.dimensions[Z];ge!==void 0&&X.model.dragX<ge.x+ge.width&&(X.model.displayInd=ge.model.displayInd,ge.model.displayInd=K),me!==void 0&&X.model.dragX+X.width>me.x&&(X.model.displayInd=me.model.displayInd,me.model.displayInd=$.dragDimensionDisplayInd),$.dragDimensionDisplayInd=X.model.displayInd}H($.parcatsViewModel),U($.parcatsViewModel),N($.parcatsViewModel),I($.parcatsViewModel)}}function z($){if($.parcatsViewModel.arrangement!=="fixed"&&$.dragDimensionDisplayInd!==null){M.select(this).selectAll("text").attr("font-weight","normal");var K={},Q=j($.parcatsViewModel),Z=$.parcatsViewModel.model.dimensions.map(function(pe){return pe.displayInd}),X=$.initialDragDimensionDisplayInds.some(function(pe,ge){return pe!==Z[ge]});X&&Z.forEach(function(pe,ge){var me=$.parcatsViewModel.model.dimensions[ge].containerInd;K["dimensions["+me+"].displayindex"]=pe});var te=!1;if($.dragCategoryDisplayInd!==null){var ae=$.model.categories.map(function(pe){return pe.displayInd});if(te=$.initialDragCategoryDisplayInds.some(function(pe,ge){return pe!==ae[ge]})){var se=$.model.categories.slice().sort(function(pe,ge){return pe.displayInd-ge.displayInd}),ce=se.map(function(pe){return pe.categoryValue}),fe=se.map(function(pe){return pe.categoryLabel});K["dimensions["+$.model.containerInd+"].categoryarray"]=[ce],K["dimensions["+$.model.containerInd+"].ticktext"]=[fe],K["dimensions["+$.model.containerInd+"].categoryorder"]="array"}}$.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!$.dragHasMoved&&$.potentialClickBand&&($.parcatsViewModel.hoveron==="color"?S($.potentialClickBand,"plotly_click",M.event.sourceEvent):d($.potentialClickBand,"plotly_click",M.event.sourceEvent)),$.model.dragX=null,$.dragCategoryDisplayInd!==null&&($.parcatsViewModel.dimensions[$.dragDimensionDisplayInd].categories[$.dragCategoryDisplayInd].model.dragY=null,$.dragCategoryDisplayInd=null),$.dragDimensionDisplayInd=null,$.parcatsViewModel.dragDimension=null,$.dragHasMoved=null,$.potentialClickBand=null,H($.parcatsViewModel),U($.parcatsViewModel),M.transition().duration(300).ease("cubic-in-out").each(function(){N($.parcatsViewModel,!0),I($.parcatsViewModel,!0)}).each("end",function(){(X||te)&&s.restyle($.parcatsViewModel.graphDiv,K,[Q])})}}function j($){for(var K,Q=$.graphDiv._fullData,Z=0;Z<Q.length;Z++)if($.key===Q[Z].uid){K=Z;break}return K}function I($,K){var Q;K===void 0&&(K=!1),$.pathSelection.data(function(Z){return Z.paths},r),(Q=$.pathSelection,K?Q.transition():Q).attr("d",function(Z){return Z.svgD})}function N($,K){function Q(ae){return K?ae.transition():ae}K===void 0&&(K=!1),$.dimensionSelection.data(function(ae){return ae.dimensions},r);var Z=$.dimensionSelection.selectAll("g.category").data(function(ae){return ae.categories},r);Q($.dimensionSelection).attr("transform",function(ae){return f(ae.x,0)}),Q(Z).attr("transform",function(ae){return f(0,ae.y)}),Z.select(".dimlabel").text(function(ae,se){return se===0?ae.parcatsViewModel.model.dimensions[ae.model.dimensionInd].dimensionLabel:null}),Z.select(".catlabel").attr("text-anchor",function(ae){return a(ae)?"start":"end"}).attr("x",function(ae){return a(ae)?ae.width+5:-5}).each(function(ae){var se,ce;a(ae)?(se=ae.width+5,ce="start"):(se=-5,ce="end"),M.select(this).selectAll("tspan").attr("x",se).attr("text-anchor",ce)});var X=Z.selectAll("rect.bandrect").data(function(ae){return ae.bands},r),te=X.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(ae){return ae.color}).attr("fill-opacity",0);X.attr("fill",function(ae){return ae.color}).attr("width",function(ae){return ae.width}).attr("height",function(ae){return ae.height}).attr("y",function(ae){return ae.y}),m(te),X.each(function(){b.raiseToTop(this)}),X.exit().remove()}function W($,K,Q){var Z,X=Q[0],te=K.margin||{l:80,r:80,t:100,b:80},ae=X.trace,se=ae.domain,ce=K.width,fe=K.height,pe=Math.floor(ce*(se.x[1]-se.x[0])),ge=Math.floor(fe*(se.y[1]-se.y[0])),me=se.x[0]*ce+te.l,be=K.height-se.y[1]*K.height+te.t,ke=ae.line.shape;Z=ae.hoverinfo==="all"?["count","probability"]:(ae.hoverinfo||"").split("+");var ze={trace:ae,key:ae.uid,model:X,x:me,y:be,width:pe,height:ge,hoveron:ae.hoveron,hoverinfoItems:Z,arrangement:ae.arrangement,bundlecolors:ae.bundlecolors,sortpaths:ae.sortpaths,labelfont:ae.labelfont,categorylabelfont:ae.tickfont,pathShape:ke,dragDimension:null,margin:te,paths:[],dimensions:[],graphDiv:$,traceSelection:null,pathSelection:null,dimensionSelection:null};return X.dimensions&&(H(ze),U(ze)),ze}function F($,K,Q,Z,X){var te,ae,se=[],ce=[];for(ae=0;ae<Q.length-1;ae++)te=k(Q[ae]+$[ae],$[ae+1]),se.push(te(X)),ce.push(te(1-X));var fe="M "+$[0]+","+K[0];for(fe+="l"+Q[0]+",0 ",ae=1;ae<Q.length;ae++)fe+="C"+se[ae-1]+","+K[ae-1]+" "+ce[ae-1]+","+K[ae]+" "+$[ae]+","+K[ae],fe+="l"+Q[ae]+",0 ";for(fe+="l0,"+Z+" ",fe+="l -"+Q[Q.length-1]+",0 ",ae=Q.length-2;ae>=0;ae--)fe+="C"+ce[ae]+","+(K[ae+1]+Z)+" "+se[ae]+","+(K[ae]+Z)+" "+($[ae]+Q[ae])+","+(K[ae]+Z),fe+="l-"+Q[ae]+",0 ";return fe+"Z"}function U($){var K=$.dimensions,Q=$.model,Z=K.map(function(Pe){return Pe.categories.map(function(Ee){return Ee.y})}),X=$.model.dimensions.map(function(Pe){return Pe.categories.map(function(Ee){return Ee.displayInd})}),te=$.model.dimensions.map(function(Pe){return Pe.displayInd}),ae=$.dimensions.map(function(Pe){return Pe.model.dimensionInd}),se=K.map(function(Pe){return Pe.x}),ce=K.map(function(Pe){return Pe.width}),fe=[];for(var pe in Q.paths)Q.paths.hasOwnProperty(pe)&&fe.push(Q.paths[pe]);function ge(Pe){var Ee=Pe.categoryInds.map(function(Fe,Ve){return X[Ve][Fe]});return ae.map(function(Fe){return Ee[Fe]})}fe.sort(function(Pe,Ee){var Fe=ge(Pe),Ve=ge(Ee);return $.sortpaths==="backward"&&(Fe.reverse(),Ve.reverse()),Fe.push(Pe.valueInds[0]),Ve.push(Ee.valueInds[0]),$.bundlecolors&&(Fe.unshift(Pe.rawColor),Ve.unshift(Ee.rawColor)),Fe<Ve?-1:Fe>Ve?1:0});for(var me=new Array(fe.length),be=K[0].model.count,ke=K[0].categories.map(function(Pe){return Pe.height}).reduce(function(Pe,Ee){return Pe+Ee}),ze=0;ze<fe.length;ze++){var ve,oe=fe[ze];ve=be>0?ke*(oe.count/be):0;for(var ie,he=new Array(Z.length),Se=0;Se<oe.categoryInds.length;Se++){var ye=oe.categoryInds[Se],we=X[Se][ye],Me=te[Se];he[Me]=Z[Me][we],Z[Me][we]+=ve;var Oe=$.dimensions[Me].categories[we],Ie=Oe.bands.length,de=Oe.bands[Ie-1];if(de===void 0||oe.rawColor!==de.rawColor){var _e=de===void 0?0:de.y+de.height;Oe.bands.push({key:_e,color:oe.color,rawColor:oe.rawColor,height:ve,width:Oe.width,count:oe.count,y:_e,categoryViewModel:Oe,parcatsViewModel:$})}else{var Ae=Oe.bands[Ie-1];Ae.height+=ve,Ae.count+=oe.count}}ie=$.pathShape==="hspline"?F(se,he,ce,ve,.5):F(se,he,ce,ve,0),me[ze]={key:oe.valueInds[0],model:oe,height:ve,leftXs:se,topYs:he,dimWidths:ce,svgD:ie,parcatsViewModel:$}}$.paths=me}function H($){var K=$.model.dimensions.map(function(ae){return{displayInd:ae.displayInd,dimensionInd:ae.dimensionInd}});K.sort(function(ae,se){return ae.displayInd-se.displayInd});var Q=[];for(var Z in K){var X=K[Z].dimensionInd,te=$.model.dimensions[X];Q.push(ne($,te))}$.dimensions=Q}function ne($,K){var Q,Z=$.model.dimensions.length,X=K.displayInd;Q=40+(Z>1?($.width-80-16)/(Z-1):0)*X;var te,ae,se,ce,fe,pe=[],ge=$.model.maxCats,me=K.categories.length,be=K.count,ke=$.height-8*(ge-1),ze=8*(ge-me)/2,ve=K.categories.map(function(oe){return{displayInd:oe.displayInd,categoryInd:oe.categoryInd}});for(ve.sort(function(oe,ie){return oe.displayInd-ie.displayInd}),fe=0;fe<me;fe++)ce=ve[fe].categoryInd,ae=K.categories[ce],te=be>0?ae.count/be*ke:0,se={key:ae.valueInds[0],model:ae,width:16,height:te,y:ae.dragY!==null?ae.dragY:ze,bands:[],parcatsViewModel:$},ze=ze+te+8,pe.push(se);return{key:K.dimensionInd,x:K.dragX!==null?K.dragX:Q,y:0,width:16,model:K,categories:pe,parcatsViewModel:$,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}ee.exports=function($,K,Q,Z){n(Q,$,Z,K)}},60268:function(ee,R,e){var M=e(51036);ee.exports=function(k,s,T,b){var f=k._fullLayout,o=f._paper,t=f._size;M(k,o,s,{width:t.w,height:t.h,margin:{t:t.t,r:t.r,b:t.b,l:t.l}},T,b)}},82296:function(ee,R,e){var M=e(49084),k=e(94724),s=e(25376),T=e(86968).u,b=e(92880).extendFlat,f=e(31780).templatedArray;ee.exports={domain:T({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:s({editType:"plot"}),tickfont:s({autoShadowDflt:!0,editType:"plot"}),rangefont:s({editType:"plot"}),dimensions:f("dimension",{label:{valType:"string",editType:"plot"},tickvals:b({},k.tickvals,{editType:"plot"}),ticktext:b({},k.ticktext,{editType:"plot"}),tickformat:b({},k.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:b({editType:"calc"},M("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},71864:function(ee,R,e){var M=e(30140),k=e(33428),s=e(71688).keyFun,T=e(71688).repeat,b=e(3400).sorterAsc,f=e(3400).strTranslate,o=M.bar.snapRatio;function t(w,E){return w*(1-o)+E*o}var i=M.bar.snapClose;function n(w,E){return w*(1-i)+E*i}function r(w,E,C,O){if(function(ne,$){for(var K=0;K<$.length;K++)if(ne>=$[K][0]&&ne<=$[K][1])return!0;return!1}(C,O))return C;var P=w?-1:1,z=0,j=E.length-1;if(P<0){var I=z;z=j,j=I}for(var N=E[z],W=N,F=z;P*F<P*j;F+=P){var U=F+P,H=E[U];if(P*C<P*n(N,H))return t(N,W);if(P*C<P*H||U===j)return t(H,N);W=N,N=H}}function a(w){w.attr("x",-M.bar.captureWidth/2).attr("width",M.bar.captureWidth)}function l(w){w.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function u(w){if(!w.brush.filterSpecified)return"0,"+w.height;for(var E,C,O,P=h(w.brush.filter.getConsolidated(),w.height),z=[0],j=P.length?P[0][0]:null,I=0;I<P.length;I++)C=(E=P[I])[1]-E[0],z.push(j),z.push(C),(O=I+1)<P.length&&(j=P[O][0]-E[1]);return z.push(w.height),z}function h(w,E){return w.map(function(C){return C.map(function(O){return Math.max(0,O*E)}).sort(b)})}function c(){k.select(document.body).style("cursor",null)}function x(w){w.attr("stroke-dasharray",u)}function p(w,E){var C=k.select(w).selectAll(".highlight, .highlight-shadow");x(E?C.transition().duration(M.bar.snapDuration).each("end",E):C)}function v(w,E){var C,O=w.brush,P=NaN,z={};if(O.filterSpecified){var j=w.height,I=O.filter.getConsolidated(),N=h(I,j),W=NaN,F=NaN,U=NaN;for(C=0;C<=N.length;C++){var H=N[C];if(H&&H[0]<=E&&E<=H[1]){W=C;break}if(F=C?C-1:NaN,H&&H[0]>E){U=C;break}}if(P=W,isNaN(P)&&(P=isNaN(F)||isNaN(U)?isNaN(F)?U:F:E-N[F][1]<N[U][0]-E?F:U),!isNaN(P)){var ne=N[P],$=function(X,te){var ae=M.bar.handleHeight;if(!(te>X[1]+ae||te<X[0]-ae))return te>=.9*X[1]+.1*X[0]?"n":te<=.9*X[0]+.1*X[1]?"s":"ns"}(ne,E);$&&(z.interval=I[P],z.intervalPix=ne,z.region=$)}}if(w.ordinal&&!z.region){var K=w.unitTickvals,Q=w.unitToPaddedPx.invert(E);for(C=0;C<K.length;C++){var Z=[.25*K[Math.max(C-1,0)]+.75*K[C],.25*K[Math.min(C+1,K.length-1)]+.75*K[C]];if(Q>=Z[0]&&Q<=Z[1]){z.clickableOrdinalRange=Z;break}}}return z}function g(w,E){k.event.sourceEvent.stopPropagation();var C=E.height-k.mouse(w)[1]-2*M.verticalPadding,O=E.brush.svgBrush;O.wasDragged=!0,O._dragging=!0,O.grabbingBar?O.newExtent=[C-O.grabPoint,C+O.barLength-O.grabPoint].map(E.unitToPaddedPx.invert):O.newExtent=[O.startExtent,E.unitToPaddedPx.invert(C)].sort(b),E.brush.filterSpecified=!0,O.extent=O.stayingIntervals.concat([O.newExtent]),O.brushCallback(E),p(w.parentNode)}function y(w,E){var C=v(E,E.height-k.mouse(w)[1]-2*M.verticalPadding),O="crosshair";C.clickableOrdinalRange?O="pointer":C.region&&(O=C.region+"-resize"),k.select(document.body).style("cursor",O)}function m(w){w.on("mousemove",function(E){k.event.preventDefault(),E.parent.inBrushDrag||y(this,E)}).on("mouseleave",function(E){E.parent.inBrushDrag||c()}).call(k.behavior.drag().on("dragstart",function(E){(function(C,O){k.event.sourceEvent.stopPropagation();var P=O.height-k.mouse(C)[1]-2*M.verticalPadding,z=O.unitToPaddedPx.invert(P),j=O.brush,I=v(O,P),N=I.interval,W=j.svgBrush;if(W.wasDragged=!1,W.grabbingBar=I.region==="ns",W.grabbingBar){var F=N.map(O.unitToPaddedPx);W.grabPoint=P-F[0]-M.verticalPadding,W.barLength=F[1]-F[0]}W.clickableOrdinalRange=I.clickableOrdinalRange,W.stayingIntervals=O.multiselect&&j.filterSpecified?j.filter.getConsolidated():[],N&&(W.stayingIntervals=W.stayingIntervals.filter(function(U){return U[0]!==N[0]&&U[1]!==N[1]})),W.startExtent=I.region?N[I.region==="s"?1:0]:z,O.parent.inBrushDrag=!0,W.brushStartCallback()})(this,E)}).on("drag",function(E){g(this,E)}).on("dragend",function(E){(function(C,O){var P=O.brush,z=P.filter,j=P.svgBrush;j._dragging||(y(C,O),g(C,O),O.brush.svgBrush.wasDragged=!1),j._dragging=!1,k.event.sourceEvent.stopPropagation();var I=j.grabbingBar;if(j.grabbingBar=!1,j.grabLocation=void 0,O.parent.inBrushDrag=!1,c(),!j.wasDragged)return j.wasDragged=void 0,j.clickableOrdinalRange?P.filterSpecified&&O.multiselect?j.extent.push(j.clickableOrdinalRange):(j.extent=[j.clickableOrdinalRange],P.filterSpecified=!0):I?(j.extent=j.stayingIntervals,j.extent.length===0&&d(P)):d(P),j.brushCallback(O),p(C.parentNode),void j.brushEndCallback(P.filterSpecified?z.getConsolidated():[]);var N=function(){z.set(z.getConsolidated())};if(O.ordinal){var W=O.unitTickvals;W[W.length-1]<W[0]&&W.reverse(),j.newExtent=[r(0,W,j.newExtent[0],j.stayingIntervals),r(1,W,j.newExtent[1],j.stayingIntervals)];var F=j.newExtent[1]>j.newExtent[0];j.extent=j.stayingIntervals.concat(F?[j.newExtent]:[]),j.extent.length||d(P),j.brushCallback(O),F?p(C.parentNode,N):(N(),p(C.parentNode))}else N();j.brushEndCallback(P.filterSpecified?z.getConsolidated():[])})(this,E)}))}function _(w,E){return w[0]-E[0]}function d(w){w.filterSpecified=!1,w.svgBrush.extent=[[-1/0,1/0]]}function S(w){for(var E,C=w.slice(),O=[],P=C.shift();P;){for(E=P.slice();(P=C.shift())&&P[0]<=E[1];)E[1]=Math.max(E[1],P[1]);O.push(E)}return O.length===1&&O[0][0]>O[0][1]&&(O=[]),O}ee.exports={makeBrush:function(w,E,C,O,P,z){var j,I=function(){var N,W,F=[];return{set:function(U){(F=U.map(function(H){return H.slice().sort(b)}).sort(_)).length===1&&F[0][0]===-1/0&&F[0][1]===1/0&&(F=[[0,-1]]),N=S(F),W=F.reduce(function(H,ne){return[Math.min(H[0],ne[0]),Math.max(H[1],ne[1])]},[1/0,-1/0])},get:function(){return F.slice()},getConsolidated:function(){return N},getBounds:function(){return W}}}();return I.set(C),{filter:I,filterSpecified:E,svgBrush:{extent:[],brushStartCallback:O,brushCallback:(j=P,function(N){var W=N.brush,F=function(H){return H.svgBrush.extent.map(function(ne){return ne.slice()})}(W),U=F.slice();W.filter.set(U),j()}),brushEndCallback:z}}},ensureAxisBrush:function(w,E,C){var O=w.selectAll("."+M.cn.axisBrush).data(T,s);O.enter().append("g").classed(M.cn.axisBrush,!0),function(P,z,j){var I=j._context.staticPlot,N=P.selectAll(".background").data(T);N.enter().append("rect").classed("background",!0).call(a).call(l).style("pointer-events",I?"none":"auto").attr("transform",f(0,M.verticalPadding)),N.call(m).attr("height",function(U){return U.height-M.verticalPadding});var W=P.selectAll(".highlight-shadow").data(T);W.enter().append("line").classed("highlight-shadow",!0).attr("x",-M.bar.width/2).attr("stroke-width",M.bar.width+M.bar.strokeWidth).attr("stroke",z).attr("opacity",M.bar.strokeOpacity).attr("stroke-linecap","butt"),W.attr("y1",function(U){return U.height}).call(x);var F=P.selectAll(".highlight").data(T);F.enter().append("line").classed("highlight",!0).attr("x",-M.bar.width/2).attr("stroke-width",M.bar.width-M.bar.strokeWidth).attr("stroke",M.bar.fillColor).attr("opacity",M.bar.fillOpacity).attr("stroke-linecap","butt"),F.attr("y1",function(U){return U.height}).call(x)}(O,E,C)},cleanRanges:function(w,E){if(Array.isArray(w[0])?(w=w.map(function(O){return O.sort(b)}),w=E.multiselect?S(w.sort(_)):[w[0]]):w=[w.sort(b)],E.tickvals){var C=E.tickvals.slice().sort(b);if(!(w=w.map(function(O){var P=[r(0,C,O[0],[]),r(1,C,O[1],[])];if(P[1]>P[0])return P}).filter(function(O){return O})).length)return}return w.length>1?w:w[0]}}},61664:function(ee,R,e){ee.exports={attributes:e(82296),supplyDefaults:e(60664),calc:e(95044),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:e(19976),categories:["gl","regl","noOpacity","noHover"],meta:{}}},19976:function(ee,R,e){var M=e(33428),k=e(84888)._M,s=e(24196),T=e(9616);R.name="parcoords",R.plot=function(b){var f=k(b.calcdata,"parcoords")[0];f.length&&s(b,f)},R.clean=function(b,f,o,t){var i=t._has&&t._has("parcoords"),n=f._has&&f._has("parcoords");i&&!n&&(t._paperdiv.selectAll(".parcoords").remove(),t._glimages.selectAll("*").remove())},R.toSVG=function(b){var f=b._fullLayout._glimages,o=M.select(b).selectAll(".svg-container");o.filter(function(t,i){return i===o.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var t=this,i=t.toDataURL("image/png");f.append("svg:image").attr({xmlns:T.svg,"xlink:href":i,preserveAspectRatio:"none",x:0,y:0,width:t.style.width,height:t.style.height})}),window.setTimeout(function(){M.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},95044:function(ee,R,e){var M=e(3400).isArrayOrTypedArray,k=e(8932),s=e(71688).wrap;ee.exports=function(T,b){var f,o;return k.hasColorscale(b,"line")&&M(b.line.color)?(f=b.line.color,o=k.extractOpts(b.line).colorscale,k.calc(T,b,{vals:f,containerStr:"line",cLetter:"c"})):(f=function(t){for(var i=new Array(t),n=0;n<t;n++)i[n]=.5;return i}(b._length),o=[[0,b.line.color],[1,b.line.color]]),s({lineColor:f,cscale:o})}},30140:function(ee){ee.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},60664:function(ee,R,e){var M=e(3400),k=e(94288).hasColorscale,s=e(27260),T=e(86968).Q,b=e(51272),f=e(54460),o=e(82296),t=e(71864),i=e(30140).maxDimensionCount,n=e(26284);function r(a,l,u,h){function c(y,m){return M.coerce(a,l,o.dimensions,y,m)}var x=c("values"),p=c("visible");if(x&&x.length||(p=l.visible=!1),p){c("label"),c("tickvals"),c("ticktext"),c("tickformat");var v=c("range");l._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:v},f.setConvert(l._ax,h.layout),c("multiselect");var g=c("constraintrange");g&&(l.constraintrange=t.cleanRanges(g,l))}}ee.exports=function(a,l,u,h){function c(y,m){return M.coerce(a,l,o,y,m)}var x=a.dimensions;Array.isArray(x)&&x.length>i&&(M.log("parcoords traces support up to "+i+" dimensions at the moment"),x.splice(i));var p=b(a,l,{name:"dimensions",layout:h,handleItemDefaults:r}),v=function(y,m,_,d,S){var w=S("line.color",_);if(k(y,"line")&&M.isArrayOrTypedArray(w)){if(w.length)return S("line.colorscale"),s(y,m,d,S,{prefix:"line.",cLetter:"c"}),w.length;m.line.color=_}return 1/0}(a,l,u,h,c);T(l,h,c),Array.isArray(p)&&p.length||(l.visible=!1),n(l,p,"values",v);var g=M.extendFlat({},h.font,{size:Math.round(h.font.size/1.2)});M.coerceFont(c,"labelfont",g),M.coerceFont(c,"tickfont",g,{autoShadowDflt:!0}),M.coerceFont(c,"rangefont",g),c("labelangle"),c("labelside"),c("unselected.line.color"),c("unselected.line.opacity")}},95724:function(ee,R,e){var M=e(3400).isTypedArray;R.convertTypedArray=function(k){return M(k)?Array.prototype.slice.call(k):k},R.isOrdinal=function(k){return!!k.tickvals},R.isVisible=function(k){return k.visible||!("visible"in k)}},29928:function(ee,R,e){var M=e(61664);M.plot=e(24196),ee.exports=M},51352:function(ee,R,e){var M=["precision highp float;","","varying vec4 fragColor;","","attribute vec4 p01_04, p05_08, p09_12, p13_16,","               p17_20, p21_24, p25_28, p29_32,","               p33_36, p37_40, p41_44, p45_48,","               p49_52, p53_56, p57_60, colors;","","uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,","             loA, hiA, loB, hiB, loC, hiC, loD, hiD;","","uniform vec2 resolution, viewBoxPos, viewBoxSize;","uniform float maskHeight;","uniform float drwLayer; // 0: context, 1: focus, 2: pick","uniform vec4 contextColor;","uniform sampler2D maskTexture, palette;","","bool isPick    = (drwLayer > 1.5);","bool isContext = (drwLayer < 0.5);","","const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);","const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);","","float val(mat4 p, mat4 v) {","    return dot(matrixCompMult(p, v) * UNITS, UNITS);","}","","float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {","    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);","    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);","    return y1 * (1.0 - ratio) + y2 * ratio;","}","","int iMod(int a, int b) {","    return a - b * (a / b);","}","","bool fOutside(float p, float lo, float hi) {","    return (lo < hi) && (lo > p || p > hi);","}","","bool vOutside(vec4 p, vec4 lo, vec4 hi) {","    return (","        fOutside(p[0], lo[0], hi[0]) ||","        fOutside(p[1], lo[1], hi[1]) ||","        fOutside(p[2], lo[2], hi[2]) ||","        fOutside(p[3], lo[3], hi[3])","    );","}","","bool mOutside(mat4 p, mat4 lo, mat4 hi) {","    return (","        vOutside(p[0], lo[0], hi[0]) ||","        vOutside(p[1], lo[1], hi[1]) ||","        vOutside(p[2], lo[2], hi[2]) ||","        vOutside(p[3], lo[3], hi[3])","    );","}","","bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {","    return mOutside(A, loA, hiA) ||","           mOutside(B, loB, hiB) ||","           mOutside(C, loC, hiC) ||","           mOutside(D, loD, hiD);","}","","bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {","    mat4 pnts[4];","    pnts[0] = A;","    pnts[1] = B;","    pnts[2] = C;","    pnts[3] = D;","","    for(int i = 0; i < 4; ++i) {","        for(int j = 0; j < 4; ++j) {","            for(int k = 0; k < 4; ++k) {","                if(0 == iMod(","                    int(255.0 * texture2D(maskTexture,","                        vec2(","                            (float(i * 2 + j / 2) + 0.5) / 8.0,","                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight","                        ))[3]","                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),","                    2","                )) return true;","            }","        }","    }","    return false;","}","","vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {","    float x = 0.5 * sign(v) + 0.5;","    float y = axisY(x, A, B, C, D);","    float z = 1.0 - abs(v);","","    z += isContext ? 0.0 : 2.0 * float(","        outsideBoundingBox(A, B, C, D) ||","        outsideRasterMask(A, B, C, D)","    );","","    return vec4(","        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,","        z,","        1.0","    );","}","","void main() {","    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);","    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);","    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);","    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);","","    float v = colors[3];","","    gl_Position = position(isContext, v, A, B, C, D);","","    fragColor =","        isContext ? vec4(contextColor) :","        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));","}"].join(`
`),k=["precision highp float;","","varying vec4 fragColor;","","void main() {","    gl_FragColor = fragColor;","}"].join(`
`),s=e(30140).maxDimensionCount,T=e(3400),b=1e-6,f=new Uint8Array(4),o=new Uint8Array(4),t={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function i(p,v,g,y,m){var _=p._gl;_.enable(_.SCISSOR_TEST),_.scissor(v,g,y,m),p.clear({color:[0,0,0,0],depth:1})}function n(p,v,g,y,m,_){var d=_.key;g.drawCompleted||(function(S){S.read({x:0,y:0,width:1,height:1,data:f})}(p),g.drawCompleted=!0),function S(w){var E=Math.min(y,m-w*y);w===0&&(window.cancelAnimationFrame(g.currentRafs[d]),delete g.currentRafs[d],i(p,_.scissorX,_.scissorY,_.scissorWidth,_.viewBoxSize[1])),g.clearOnly||(_.count=2*E,_.offset=2*w*y,v(_),w*y+E<m&&(g.currentRafs[d]=window.requestAnimationFrame(function(){S(w+1)})),g.drawCompleted=!1)}(0)}function r(p,v){for(var g=new Array(256),y=0;y<256;y++)g[y]=p(y/255).concat(v);return g}function a(p,v){return(p>>>8*v)%256/255}function l(p,v,g){for(var y=new Array(8*v),m=0,_=0;_<v;_++)for(var d=0;d<2;d++)for(var S=0;S<4;S++){var w=4*p+S,E=g[64*_+w];w===63&&d===0&&(E*=-1),y[m++]=E}return y}function u(p){var v="0"+p;return v.substr(v.length-2)}function h(p){return p<s?"p"+u(p+1)+"_"+u(p+4):"colors"}function c(p,v,g,y,m,_,d,S,w,E,C,O,P,z){for(var j=[[],[]],I=0;I<64;I++)j[0][I]=I===m?1:0,j[1][I]=I===_?1:0;d*=z,S*=z,w*=z,E*=z;var N=p.lines.canvasOverdrag*z,W=p.domain,F=p.canvasWidth*z,U=p.canvasHeight*z,H=p.pad.l*z,ne=p.pad.b*z,$=p.layoutHeight*z,K=p.layoutWidth*z,Q=p.deselectedLines.color,Z=p.deselectedLines.opacity;return T.extendFlat({key:C,resolution:[F,U],viewBoxPos:[d+N,S],viewBoxSize:[w,E],i0:m,i1:_,dim0A:j[0].slice(0,16),dim0B:j[0].slice(16,32),dim0C:j[0].slice(32,48),dim0D:j[0].slice(48,64),dim1A:j[1].slice(0,16),dim1B:j[1].slice(16,32),dim1C:j[1].slice(32,48),dim1D:j[1].slice(48,64),drwLayer:O,contextColor:[Q[0]/255,Q[1]/255,Q[2]/255,Z!=="auto"?Q[3]*Z:Math.max(.00392156862745098,Math.pow(1/p.lines.color.length,.3333333333333333))],scissorX:(y===v?0:d+N)+(H-N)+K*W.x[0],scissorWidth:(y===g?F-d+N:w+.5)+(y===v?d+N:0),scissorY:S+ne+$*W.y[0],scissorHeight:E,viewportX:H-N+K*W.x[0],viewportY:ne+$*W.y[0],viewportWidth:F,viewportHeight:U},P)}function x(p){var v=2047,g=Math.max(0,Math.floor(p[0]*v),0),y=Math.min(v,Math.ceil(p[1]*v),v);return[Math.min(g,y),Math.max(g,y)]}ee.exports=function(p,v){var g,y,m,_,d,S=v.context,w=v.pick,E=v.regl,C=E._gl,O=C.getParameter(C.ALIASED_LINE_WIDTH_RANGE),P=Math.max(O[0],Math.min(O[1],v.viewModel.plotGlPixelRatio)),z={currentRafs:{},drawCompleted:!0,clearOnly:!1},j=function(U){for(var H={},ne=0;ne<=s;ne+=4)H[h(ne)]=U.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return H}(E),I=E.texture(t),N=[];F(v);var W=E({profile:!1,blend:{enable:S,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!S,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:E.prop("scissorX"),y:E.prop("scissorY"),width:E.prop("scissorWidth"),height:E.prop("scissorHeight")}},viewport:{x:E.prop("viewportX"),y:E.prop("viewportY"),width:E.prop("viewportWidth"),height:E.prop("viewportHeight")},dither:!1,vert:M,frag:k,primitive:"lines",lineWidth:P,attributes:j,uniforms:{resolution:E.prop("resolution"),viewBoxPos:E.prop("viewBoxPos"),viewBoxSize:E.prop("viewBoxSize"),dim0A:E.prop("dim0A"),dim1A:E.prop("dim1A"),dim0B:E.prop("dim0B"),dim1B:E.prop("dim1B"),dim0C:E.prop("dim0C"),dim1C:E.prop("dim1C"),dim0D:E.prop("dim0D"),dim1D:E.prop("dim1D"),loA:E.prop("loA"),hiA:E.prop("hiA"),loB:E.prop("loB"),hiB:E.prop("hiB"),loC:E.prop("loC"),hiC:E.prop("hiC"),loD:E.prop("loD"),hiD:E.prop("hiD"),palette:I,contextColor:E.prop("contextColor"),maskTexture:E.prop("maskTexture"),drwLayer:E.prop("drwLayer"),maskHeight:E.prop("maskHeight")},offset:E.prop("offset"),count:E.prop("count")});function F(U){g=U.model,y=U.viewModel,m=y.dimensions.slice(),_=m[0]?m[0].values.length:0;var H=g.lines,ne=w?H.color.map(function(K,Q){return Q/H.color.length}):H.color,$=function(K,Q,Z){for(var X,te=new Array(K*(s+4)),ae=0,se=0;se<K;se++){for(var ce=0;ce<s;ce++)te[ae++]=ce<Q.length?Q[ce].paddedUnitValues[se]:.5;te[ae++]=a(se,2),te[ae++]=a(se,1),te[ae++]=a(se,0),te[ae++]=(X=Z[se],Math.max(b,Math.min(.999999,X)))}return te}(_,m,ne);(function(K,Q,Z){for(var X=0;X<=s;X+=4)K[h(X)](l(X/4,Q,Z))})(j,_,$),S||w||(I=E.texture(T.extendFlat({data:r(g.unitToColor,255)},t)))}return{render:function(U,H,ne){var $,K,Q,Z=U.length,X=1/0,te=-1/0;for($=0;$<Z;$++)U[$].dim0.canvasX<X&&(X=U[$].dim0.canvasX,K=$),U[$].dim1.canvasX>te&&(te=U[$].dim1.canvasX,Q=$);Z===0&&i(E,0,0,g.canvasWidth,g.canvasHeight);var ae=function(ve){var oe,ie,he,Se=[[],[]];for(he=0;he<64;he++){var ye=!ve&&he<m.length?m[he].brush.filter.getBounds():[-1/0,1/0];Se[0][he]=ye[0],Se[1][he]=ye[1]}var we=new Array(16384);for(oe=0;oe<16384;oe++)we[oe]=255;if(!ve)for(oe=0;oe<m.length;oe++){var Me=oe%8,Oe=(oe-Me)/8,Ie=Math.pow(2,Me),de=m[oe].brush.filter.get();if(!(de.length<2)){var _e=x(de[0])[1];for(ie=1;ie<de.length;ie++){var Ae=x(de[ie]);for(he=_e+1;he<Ae[0];he++)we[8*he+Oe]&=~Ie;_e=Math.max(_e,Ae[1])}}}var Pe={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:we};return d?d(Pe):d=E.texture(Pe),{maskTexture:d,maskHeight:2048,loA:Se[0].slice(0,16),loB:Se[0].slice(16,32),loC:Se[0].slice(32,48),loD:Se[0].slice(48,64),hiA:Se[1].slice(0,16),hiB:Se[1].slice(16,32),hiC:Se[1].slice(32,48),hiD:Se[1].slice(48,64)}}(S);for($=0;$<Z;$++){var se=U[$],ce=se.dim0.crossfilterDimensionIndex,fe=se.dim1.crossfilterDimensionIndex,pe=se.canvasX,ge=se.canvasY,me=pe+se.panelSizeX,be=se.plotGlPixelRatio;if(H||!N[ce]||N[ce][0]!==pe||N[ce][1]!==me){N[ce]=[pe,me];var ke=c(g,K,Q,$,ce,fe,pe,ge,se.panelSizeX,se.panelSizeY,se.dim0.crossfilterDimensionIndex,S?0:w?2:1,ae,be);z.clearOnly=ne;var ze=H?g.lines.blockLineCount:_;n(E,W,z,ze,_,ke)}}},readPixel:function(U,H){return E.read({x:U,y:H,width:1,height:1,data:o}),o},readPixels:function(U,H,ne,$){var K=new Uint8Array(4*ne*$);return E.read({x:U,y:H,width:ne,height:$,data:K}),K},destroy:function(){for(var U in p.style["pointer-events"]="none",I.destroy(),d&&d.destroy(),j)j[U].destroy()},update:F}}},26284:function(ee){ee.exports=function(R,e,M,k){var s,T;for(k||(k=1/0),s=0;s<e.length;s++)(T=e[s]).visible&&(k=Math.min(k,T[M].length));for(k===1/0&&(k=0),R._length=k,s=0;s<e.length;s++)(T=e[s]).visible&&(T._length=k);return k}},36336:function(ee,R,e){var M=e(33428),k=e(3400),s=k.isArrayOrTypedArray,T=k.numberFormat,b=e(96824),f=e(54460),o=k.strRotate,t=k.strTranslate,i=e(72736),n=e(43616),r=e(8932),a=e(71688),l=a.keyFun,u=a.repeat,h=a.unwrap,c=e(95724),x=e(30140),p=e(71864),v=e(51352);function g(W,F,U){return k.aggNums(W,null,F,U)}function y(W,F){return _(g(Math.min,W,F),g(Math.max,W,F))}function m(W){var F=W.range;return F?_(F[0],F[1]):y(W.values,W._length)}function _(W,F){return!isNaN(W)&&isFinite(W)||(W=0),!isNaN(F)&&isFinite(F)||(F=0),W===F&&(W===0?(W-=1,F+=1):(W*=.9,F*=1.1)),[W,F]}function d(W,F,U,H,ne){var $,K,Q=m(U);return H?M.scale.ordinal().domain(H.map(($=T(U.tickformat),K=ne,K?function(Z,X){var te=K[X];return te??$(Z)}:$))).range(H.map(function(Z){var X=(Z-Q[0])/(Q[1]-Q[0]);return W-F+X*(2*F-W)})):M.scale.linear().domain(Q).range([W-F,F])}function S(W){if(W.tickvals){var F=m(W);return M.scale.ordinal().domain(W.tickvals).range(W.tickvals.map(function(U){return(U-F[0])/(F[1]-F[0])}))}}function w(W){var F=W.map(function(ne){return ne[0]}),U=W.map(function(ne){var $=b(ne[1]);return M.rgb("rgb("+$[0]+","+$[1]+","+$[2]+")")}),H="rgb".split("").map(function(ne){return M.scale.linear().clamp(!0).domain(F).range(U.map(($=ne,function(K){return K[$]})));var $});return function(ne){return H.map(function($){return $(ne)})}}function E(W){return W.dimensions.some(function(F){return F.brush.filterSpecified})}function C(W,F,U){var H=h(F),ne=H.trace,$=c.convertTypedArray(H.lineColor),K=ne.line,Q={color:b(ne.unselected.line.color),opacity:ne.unselected.line.opacity},Z=r.extractOpts(K),X=Z.reversescale?r.flipScale(H.cscale):H.cscale,te=ne.domain,ae=ne.dimensions,se=W.width,ce=ne.labelangle,fe=ne.labelside,pe=ne.labelfont,ge=ne.tickfont,me=ne.rangefont,be=k.extendDeepNoArrays({},K,{color:$.map(M.scale.linear().domain(m({values:$,range:[Z.min,Z.max],_length:ne._length}))),blockLineCount:x.blockLineCount,canvasOverdrag:x.overdrag*x.canvasPixelRatio}),ke=Math.floor(se*(te.x[1]-te.x[0])),ze=Math.floor(W.height*(te.y[1]-te.y[0])),ve=W.margin||{l:80,r:80,t:100,b:80},oe=ke,ie=ze;return{key:U,colCount:ae.filter(c.isVisible).length,dimensions:ae,tickDistance:x.tickDistance,unitToColor:w(X),lines:be,deselectedLines:Q,labelAngle:ce,labelSide:fe,labelFont:pe,tickFont:ge,rangeFont:me,layoutWidth:se,layoutHeight:W.height,domain:te,translateX:te.x[0]*se,translateY:W.height-te.y[1]*W.height,pad:ve,canvasWidth:oe*x.canvasPixelRatio+2*be.canvasOverdrag,canvasHeight:ie*x.canvasPixelRatio,width:oe,height:ie,canvasPixelRatio:x.canvasPixelRatio}}function O(W,F,U){var H=U.width,ne=U.height,$=U.dimensions,K=U.canvasPixelRatio,Q=function(se){return H*se/Math.max(1,U.colCount-1)},Z=x.verticalPadding/ne,X=function(se,ce){return M.scale.linear().range([ce,se-ce])}(ne,x.verticalPadding),te={key:U.key,xScale:Q,model:U,inBrushDrag:!1},ae={};return te.dimensions=$.filter(c.isVisible).map(function(se,ce){var fe=function(Me,Oe){return M.scale.linear().domain(m(Me)).range([Oe,1-Oe])}(se,Z),pe=ae[se.label];ae[se.label]=(pe||0)+1;var ge=se.label+(pe?"__"+pe:""),me=se.constraintrange,be=me&&me.length;be&&!s(me[0])&&(me=[me]);var ke=be?me.map(function(Me){return Me.map(fe)}):[[-1/0,1/0]],ze=se.values;ze.length>se._length&&(ze=ze.slice(0,se._length));var ve,oe=se.tickvals;function ie(Me,Oe){return{val:Me,text:ve[Oe]}}function he(Me,Oe){return Me.val-Oe.val}if(s(oe)&&oe.length){k.isTypedArray(oe)&&(oe=Array.from(oe)),ve=se.ticktext,s(ve)&&ve.length?ve.length>oe.length?ve=ve.slice(0,oe.length):oe.length>ve.length&&(oe=oe.slice(0,ve.length)):ve=oe.map(T(se.tickformat));for(var Se=1;Se<oe.length;Se++)if(oe[Se]<oe[Se-1]){for(var ye=oe.map(ie).sort(he),we=0;we<oe.length;we++)oe[we]=ye[we].val,ve[we]=ye[we].text;break}}else oe=void 0;return ze=c.convertTypedArray(ze),{key:ge,label:se.label,tickFormat:se.tickformat,tickvals:oe,ticktext:ve,ordinal:c.isOrdinal(se),multiselect:se.multiselect,xIndex:ce,crossfilterDimensionIndex:ce,visibleIndex:se._index,height:ne,values:ze,paddedUnitValues:ze.map(fe),unitTickvals:oe&&oe.map(fe),xScale:Q,x:Q(ce),canvasX:Q(ce)*K,unitToPaddedPx:X,domainScale:d(ne,x.verticalPadding,se,oe,ve),ordinalScale:S(se),parent:te,model:U,brush:p.makeBrush(W,be,ke,function(){W.linePickActive(!1)},function(){var Me=te;Me.focusLayer&&Me.focusLayer.render(Me.panels,!0);var Oe=E(Me);!W.contextShown()&&Oe?(Me.contextLayer&&Me.contextLayer.render(Me.panels,!0),W.contextShown(!0)):W.contextShown()&&!Oe&&(Me.contextLayer&&Me.contextLayer.render(Me.panels,!0,!0),W.contextShown(!1))},function(Me){if(te.focusLayer.render(te.panels,!0),te.pickLayer&&te.pickLayer.render(te.panels,!0),W.linePickActive(!0),F&&F.filterChanged){var Oe=fe.invert,Ie=Me.map(function(de){return de.map(Oe).sort(k.sorterAsc)}).sort(function(de,_e){return de[0]-_e[0]});F.filterChanged(te.key,se._index,Ie)}})}}),te}function P(W){W.classed(x.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function z(W,F){var U=F==="top"?1:-1,H=W*Math.PI/180;return{dir:U,dx:Math.sin(H),dy:Math.cos(H),degrees:W}}function j(W,F,U){for(var H=F.panels||(F.panels=[]),ne=W.data(),$=0;$<ne.length-1;$++){var K=H[$]||(H[$]={}),Q=ne[$],Z=ne[$+1];K.dim0=Q,K.dim1=Z,K.canvasX=Q.canvasX,K.panelSizeX=Z.canvasX-Q.canvasX,K.panelSizeY=F.model.canvasHeight,K.y=0,K.canvasY=0,K.plotGlPixelRatio=U}}function I(W,F){return f.tickText(W._ax,F,!1).text}function N(W,F){if(W.ordinal)return"";var U=W.domainScale.domain(),H=U[F?U.length-1:0];return I(W.model.dimensions[W.visibleIndex],H)}ee.exports=function(W,F,U,H){var ne=W._context.staticPlot,$=W._fullLayout,K=$._toppaper,Q=$._glcontainer,Z=W._context.plotGlPixelRatio,X=W._fullLayout.paper_bgcolor;(function(Me){for(var Oe=0;Oe<Me.length;Oe++)for(var Ie=0;Ie<Me[Oe].length;Ie++)for(var de=Me[Oe][Ie].trace,_e=de.dimensions,Ae=0;Ae<_e.length;Ae++){var Pe=_e[Ae].values,Ee=_e[Ae]._ax;Ee&&(Ee.range?Ee.range=_(Ee.range[0],Ee.range[1]):Ee.range=y(Pe,de._length),Ee.dtick||(Ee.dtick=.01*(Math.abs(Ee.range[1]-Ee.range[0])||1)),Ee.tickformat=_e[Ae].tickformat,f.calcTicks(Ee),Ee.cleanRange())}})(F);var te,ae,se=(te=!0,ae=!1,{linePickActive:function(Me){return arguments.length?te=!!Me:te},contextShown:function(Me){return arguments.length?ae=!!Me:ae}}),ce=F.filter(function(Me){return h(Me).trace.visible}).map(C.bind(0,U)).map(O.bind(0,se,H));Q.each(function(Me,Oe){return k.extendFlat(Me,ce[Oe])});var fe=Q.selectAll(".gl-canvas").each(function(Me){Me.viewModel=ce[0],Me.viewModel.plotGlPixelRatio=Z,Me.viewModel.paperColor=X,Me.model=Me.viewModel?Me.viewModel.model:null}),pe=null;fe.filter(function(Me){return Me.pick}).style("pointer-events",ne?"none":"auto").on("mousemove",function(Me){if(se.linePickActive()&&Me.lineLayer&&H&&H.hover){var Oe=M.event,Ie=this.width,de=this.height,_e=M.mouse(this),Ae=_e[0],Pe=_e[1];if(Ae<0||Pe<0||Ae>=Ie||Pe>=de)return;var Ee=Me.lineLayer.readPixel(Ae,de-1-Pe),Fe=Ee[3]!==0,Ve=Fe?Ee[2]+256*(Ee[1]+256*Ee[0]):null,Ye={x:Ae,y:Pe,clientX:Oe.clientX,clientY:Oe.clientY,dataIndex:Me.model.key,curveNumber:Ve};Ve!==pe&&(Fe?H.hover(Ye):H.unhover&&H.unhover(Ye),pe=Ve)}}),fe.style("opacity",function(Me){return Me.pick?0:1}),K.style("background","rgba(255, 255, 255, 0)");var ge=K.selectAll("."+x.cn.parcoords).data(ce,l);ge.exit().remove(),ge.enter().append("g").classed(x.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),ge.attr("transform",function(Me){return t(Me.model.translateX,Me.model.translateY)});var me=ge.selectAll("."+x.cn.parcoordsControlView).data(u,l);me.enter().append("g").classed(x.cn.parcoordsControlView,!0),me.attr("transform",function(Me){return t(Me.model.pad.l,Me.model.pad.t)});var be=me.selectAll("."+x.cn.yAxis).data(function(Me){return Me.dimensions},l);be.enter().append("g").classed(x.cn.yAxis,!0),me.each(function(Me){j(be,Me,Z)}),fe.each(function(Me){if(Me.viewModel){!Me.lineLayer||H?Me.lineLayer=v(this,Me):Me.lineLayer.update(Me),(Me.key||Me.key===0)&&(Me.viewModel[Me.key]=Me.lineLayer);var Oe=!Me.context||H;Me.lineLayer.render(Me.viewModel.panels,Oe)}}),be.attr("transform",function(Me){return t(Me.xScale(Me.xIndex),0)}),be.call(M.behavior.drag().origin(function(Me){return Me}).on("drag",function(Me){var Oe=Me.parent;se.linePickActive(!1),Me.x=Math.max(-x.overdrag,Math.min(Me.model.width+x.overdrag,M.event.x)),Me.canvasX=Me.x*Me.model.canvasPixelRatio,be.sort(function(Ie,de){return Ie.x-de.x}).each(function(Ie,de){Ie.xIndex=de,Ie.x=Me===Ie?Ie.x:Ie.xScale(Ie.xIndex),Ie.canvasX=Ie.x*Ie.model.canvasPixelRatio}),j(be,Oe,Z),be.filter(function(Ie){return Math.abs(Me.xIndex-Ie.xIndex)!==0}).attr("transform",function(Ie){return t(Ie.xScale(Ie.xIndex),0)}),M.select(this).attr("transform",t(Me.x,0)),be.each(function(Ie,de,_e){_e===Me.parent.key&&(Oe.dimensions[de]=Ie)}),Oe.contextLayer&&Oe.contextLayer.render(Oe.panels,!1,!E(Oe)),Oe.focusLayer.render&&Oe.focusLayer.render(Oe.panels)}).on("dragend",function(Me){var Oe=Me.parent;Me.x=Me.xScale(Me.xIndex),Me.canvasX=Me.x*Me.model.canvasPixelRatio,j(be,Oe,Z),M.select(this).attr("transform",function(Ie){return t(Ie.x,0)}),Oe.contextLayer&&Oe.contextLayer.render(Oe.panels,!1,!E(Oe)),Oe.focusLayer&&Oe.focusLayer.render(Oe.panels),Oe.pickLayer&&Oe.pickLayer.render(Oe.panels,!0),se.linePickActive(!0),H&&H.axesMoved&&H.axesMoved(Oe.key,Oe.dimensions.map(function(Ie){return Ie.crossfilterDimensionIndex}))})),be.exit().remove();var ke=be.selectAll("."+x.cn.axisOverlays).data(u,l);ke.enter().append("g").classed(x.cn.axisOverlays,!0),ke.selectAll("."+x.cn.axis).remove();var ze=ke.selectAll("."+x.cn.axis).data(u,l);ze.enter().append("g").classed(x.cn.axis,!0),ze.each(function(Me){var Oe=Me.model.height/Me.model.tickDistance,Ie=Me.domainScale,de=Ie.domain();M.select(this).call(M.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Oe,Me.tickFormat).tickValues(Me.ordinal?de:null).tickFormat(function(_e){return c.isOrdinal(Me)?_e:I(Me.model.dimensions[Me.visibleIndex],_e)}).scale(Ie)),n.font(ze.selectAll("text"),Me.model.tickFont)}),ze.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),ze.selectAll("text").style("cursor","default");var ve=ke.selectAll("."+x.cn.axisHeading).data(u,l);ve.enter().append("g").classed(x.cn.axisHeading,!0);var oe=ve.selectAll("."+x.cn.axisTitle).data(u,l);oe.enter().append("text").classed(x.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",ne?"none":"auto"),oe.text(function(Me){return Me.label}).each(function(Me){var Oe=M.select(this);n.font(Oe,Me.model.labelFont),i.convertToTspans(Oe,W)}).attr("transform",function(Me){var Oe=z(Me.model.labelAngle,Me.model.labelSide),Ie=x.axisTitleOffset;return(Oe.dir>0?"":t(0,2*Ie+Me.model.height))+o(Oe.degrees)+t(-Ie*Oe.dx,-Ie*Oe.dy)}).attr("text-anchor",function(Me){var Oe=z(Me.model.labelAngle,Me.model.labelSide);return 2*Math.abs(Oe.dx)>Math.abs(Oe.dy)?Oe.dir*Oe.dx<0?"start":"end":"middle"});var ie=ke.selectAll("."+x.cn.axisExtent).data(u,l);ie.enter().append("g").classed(x.cn.axisExtent,!0);var he=ie.selectAll("."+x.cn.axisExtentTop).data(u,l);he.enter().append("g").classed(x.cn.axisExtentTop,!0),he.attr("transform",t(0,-x.axisExtentOffset));var Se=he.selectAll("."+x.cn.axisExtentTopText).data(u,l);Se.enter().append("text").classed(x.cn.axisExtentTopText,!0).call(P),Se.text(function(Me){return N(Me,!0)}).each(function(Me){n.font(M.select(this),Me.model.rangeFont)});var ye=ie.selectAll("."+x.cn.axisExtentBottom).data(u,l);ye.enter().append("g").classed(x.cn.axisExtentBottom,!0),ye.attr("transform",function(Me){return t(0,Me.model.height+x.axisExtentOffset)});var we=ye.selectAll("."+x.cn.axisExtentBottomText).data(u,l);we.enter().append("text").classed(x.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(P),we.text(function(Me){return N(Me,!1)}).each(function(Me){n.font(M.select(this),Me.model.rangeFont)}),p.ensureAxisBrush(ke,X,W)}},24196:function(ee,R,e){var M=e(36336),k=e(5048),s=e(95724).isVisible,T={};function b(f,o,t){var i=o.indexOf(t),n=f.indexOf(i);return n===-1&&(n+=o.length),n}(ee.exports=function(f,o){var t=f._fullLayout;if(k(f,[],T)){var i={},n={},r={},a={},l=t._size;o.forEach(function(u,h){var c=u[0].trace;r[h]=c.index;var x=a[h]=c._fullInput.index;i[h]=f.data[x].dimensions,n[h]=f.data[x].dimensions.slice()}),M(f,o,{width:l.w,height:l.h,margin:{t:l.t,r:l.r,b:l.b,l:l.l}},{filterChanged:function(u,h,c){var x=n[u][h],p=c.map(function(d){return d.slice()}),v="dimensions["+h+"].constraintrange",g=t._tracePreGUI[f._fullData[r[u]]._fullInput.uid];if(g[v]===void 0){var y=x.constraintrange;g[v]=y||null}var m=f._fullData[r[u]].dimensions[h];p.length?(p.length===1&&(p=p[0]),x.constraintrange=p,m.constraintrange=p.slice(),p=[p]):(delete x.constraintrange,delete m.constraintrange,p=null);var _={};_[v]=p,f.emit("plotly_restyle",[_,[a[u]]])},hover:function(u){f.emit("plotly_hover",u)},unhover:function(u){f.emit("plotly_unhover",u)},axesMoved:function(u,h){var c=function(x,p){return function(v,g){return b(x,p,v)-b(x,p,g)}}(h,n[u].filter(s));i[u].sort(c),n[u].filter(function(x){return!s(x)}).sort(function(x){return n[u].indexOf(x)}).forEach(function(x){i[u].splice(i[u].indexOf(x),1),i[u].splice(n[u].indexOf(x),0,x)}),f.emit("plotly_restyle",[{dimensions:[i[u]]},[a[u]]])}})}}).reglPrecompiled=T},74996:function(ee,R,e){var M=e(45464),k=e(86968).u,s=e(25376),T=e(22548),b=e(21776).Ks,f=e(21776).Gw,o=e(92880).extendFlat,t=e(98192).c,i=s({editType:"plot",arrayOk:!0,colorEditType:"plot"});ee.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:T.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:t,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:o({},M.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:b({},{keys:["label","color","value","percent","text"]}),texttemplate:f({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:o({},i,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:o({},i,{}),outsidetextfont:o({},i,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:o({},i,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:k({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:o({},i,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},80036:function(ee,R,e){var M=e(7316);R.name="pie",R.plot=function(k,s,T,b){M.plotBasePlot(R.name,k,s,T,b)},R.clean=function(k,s,T,b){M.cleanBasePlot(R.name,k,s,T,b)}},45768:function(ee,R,e){var M=e(38248),k=e(49760),s=e(76308),T={};function b(o){return function(t,i){return!!t&&!!(t=k(t)).isValid()&&(t=s.addOpacity(t,t.getAlpha()),o[i]||(o[i]=t),t)}}function f(o,t){var i,n=JSON.stringify(o),r=t[n];if(!r){for(r=o.slice(),i=0;i<o.length;i++)r.push(k(o[i]).lighten(20).toHexString());for(i=0;i<o.length;i++)r.push(k(o[i]).darken(20).toHexString());t[n]=r}return r}ee.exports={calc:function(o,t){var i,n,r=[],a=o._fullLayout,l=a.hiddenlabels||[],u=t.labels,h=t.marker.colors||[],c=t.values,x=t._length,p=t._hasValues&&x;if(t.dlabel)for(u=new Array(x),i=0;i<x;i++)u[i]=String(t.label0+i*t.dlabel);var v={},g=b(a["_"+t.type+"colormap"]),y=0,m=!1;for(i=0;i<x;i++){var _,d,S;if(p){if(_=c[i],!M(_))continue;_=+_}else _=1;(d=u[i])!==void 0&&d!==""||(d=i);var w=v[d=String(d)];w===void 0?(v[d]=r.length,(S=l.indexOf(d)!==-1)||(y+=_),r.push({v:_,label:d,color:g(h[i],d),i,pts:[i],hidden:S})):(m=!0,(n=r[w]).v+=_,n.pts.push(i),n.hidden||(y+=_),n.color===!1&&h[i]&&(n.color=g(h[i],d)))}return r=r.filter(function(E){return E.v>=0}),(t.type==="funnelarea"?m:t.sort)&&r.sort(function(E,C){return C.v-E.v}),r[0]&&(r[0].vTotal=y),r},crossTraceCalc:function(o,t){var i=(t||{}).type;i||(i="pie");var n=o._fullLayout,r=o.calcdata,a=n[i+"colorway"],l=n["_"+i+"colormap"];n["extend"+i+"colors"]&&(a=f(a,T));for(var u=0,h=0;h<r.length;h++){var c=r[h];if(c[0].trace.type===i)for(var x=0;x<c.length;x++){var p=c[x];p.color===!1&&(l[p.label]?p.color=l[p.label]:(l[p.label]=p.color=a[u%a.length],u++))}}},makePullColorFn:b,generateExtendedColors:f}},74174:function(ee,R,e){var M=e(38248),k=e(3400),s=e(74996),T=e(86968).Q,b=e(31508).handleText,f=e(3400).coercePattern;function o(i,n){var r=k.isArrayOrTypedArray(i),a=k.isArrayOrTypedArray(n),l=Math.min(r?i.length:1/0,a?n.length:1/0);if(isFinite(l)||(l=0),l&&a){for(var u,h=0;h<l;h++){var c=n[h];if(M(c)&&c>0){u=!0;break}}u||(l=0)}return{hasLabels:r,hasValues:a,len:l}}function t(i,n,r,a,l){a("marker.line.width")&&a("marker.line.color",l?void 0:r.paper_bgcolor);var u=a("marker.colors");f(a,"marker.pattern",u),i.marker&&!n.marker.pattern.fgcolor&&(n.marker.pattern.fgcolor=i.marker.colors),n.marker.pattern.bgcolor||(n.marker.pattern.bgcolor=r.paper_bgcolor)}ee.exports={handleLabelsAndValues:o,handleMarkerDefaults:t,supplyDefaults:function(i,n,r,a){function l(m,_){return k.coerce(i,n,s,m,_)}var u=o(l("labels"),l("values")),h=u.len;if(n._hasLabels=u.hasLabels,n._hasValues=u.hasValues,!n._hasLabels&&n._hasValues&&(l("label0"),l("dlabel")),h){n._length=h,t(i,n,a,l,!0),l("scalegroup");var c,x=l("text"),p=l("texttemplate");if(p||(c=l("textinfo",k.isArrayOrTypedArray(x)?"text+percent":"percent")),l("hovertext"),l("hovertemplate"),p||c&&c!=="none"){var v=l("textposition");b(i,n,a,l,v,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(v)||v==="auto"||v==="outside")&&l("automargin"),(v==="inside"||v==="auto"||Array.isArray(v))&&l("insidetextorientation")}else c==="none"&&l("textposition","none");T(n,a,l);var g=l("hole");if(l("title.text")){var y=l("title.position",g?"middle center":"top center");g||y!=="middle center"||(n.title.position="top center"),k.coerceFont(l,"title.font",a.font)}l("sort"),l("direction"),l("rotation"),l("pull")}else n.visible=!1}}},53644:function(ee,R,e){var M=e(10624).appendArrayMultiPointValues;ee.exports=function(k,s){var T={curveNumber:s.index,pointNumbers:k.pts,data:s._input,fullData:s,label:k.label,color:k.color,value:k.v,percent:k.percent,text:k.text,bbox:k.bbox,v:k.v};return k.pts.length===1&&(T.pointNumber=T.i=k.pts[0]),M(T,s,k.pts),s.type==="funnelarea"&&(delete T.v,delete T.i),T}},21552:function(ee,R,e){var M=e(43616),k=e(76308);ee.exports=function(s,T,b,f){var o=b.marker.pattern;o&&o.shape?M.pointStyle(s,b,f,T):k.fill(s,T.color)}},69656:function(ee,R,e){var M=e(3400);function k(s){return s.indexOf("e")!==-1?s.replace(/[.]?0+e/,"e"):s.indexOf(".")!==-1?s.replace(/[.]?0+$/,""):s}R.formatPiePercent=function(s,T){var b=k((100*s).toPrecision(3));return M.numSeparate(b,T)+"%"},R.formatPieValue=function(s,T){var b=k(s.toPrecision(10));return M.numSeparate(b,T)},R.getFirstFilled=function(s,T){if(M.isArrayOrTypedArray(s))for(var b=0;b<T.length;b++){var f=s[T[b]];if(f||f===0||f==="")return f}},R.castOption=function(s,T){return M.isArrayOrTypedArray(s)?R.getFirstFilled(s,T):s||void 0},R.getRotationAngle=function(s){return(s==="auto"?0:s)*Math.PI/180}},75792:function(ee,R,e){ee.exports={attributes:e(74996),supplyDefaults:e(74174).supplyDefaults,supplyLayoutDefaults:e(90248),layoutAttributes:e(85204),calc:e(45768).calc,crossTraceCalc:e(45768).crossTraceCalc,plot:e(37820).plot,style:e(22152),styleOne:e(10528),moduleType:"trace",name:"pie",basePlotModule:e(80036),categories:["pie-like","pie","showLegend"],meta:{}}},85204:function(ee){ee.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},90248:function(ee,R,e){var M=e(3400),k=e(85204);ee.exports=function(s,T){function b(f,o){return M.coerce(s,T,k,f,o)}b("hiddenlabels"),b("piecolorway",T.colorway),b("extendpiecolors")}},37820:function(ee,R,e){var M=e(33428),k=e(7316),s=e(93024),T=e(76308),b=e(43616),f=e(3400),o=f.strScale,t=f.strTranslate,i=e(72736),n=e(82744),r=n.recordMinTextSize,a=n.clearMinTextSize,l=e(78048).TEXTPAD,u=e(69656),h=e(53644),c=e(3400).isValidTextValue;function x(W,F,U){var H=U[0],ne=H.cx,$=H.cy,K=H.trace,Q=K.type==="funnelarea";"_hasHoverLabel"in K||(K._hasHoverLabel=!1),"_hasHoverEvent"in K||(K._hasHoverEvent=!1),W.on("mouseover",function(Z){var X=F._fullLayout,te=F._fullData[K.index];if(!F._dragging&&X.hovermode!==!1){var ae=te.hoverinfo;if(Array.isArray(ae)&&(ae=s.castHoverinfo({hoverinfo:[u.castOption(ae,Z.pts)],_module:K._module},X,0)),ae==="all"&&(ae="label+text+value+percent+name"),te.hovertemplate||ae!=="none"&&ae!=="skip"&&ae){var se=Z.rInscribed||0,ce=ne+Z.pxmid[0]*(1-se),fe=$+Z.pxmid[1]*(1-se),pe=X.separators,ge=[];if(ae&&ae.indexOf("label")!==-1&&ge.push(Z.label),Z.text=u.castOption(te.hovertext||te.text,Z.pts),ae&&ae.indexOf("text")!==-1){var me=Z.text;f.isValidTextValue(me)&&ge.push(me)}Z.value=Z.v,Z.valueLabel=u.formatPieValue(Z.v,pe),ae&&ae.indexOf("value")!==-1&&ge.push(Z.valueLabel),Z.percent=Z.v/H.vTotal,Z.percentLabel=u.formatPiePercent(Z.percent,pe),ae&&ae.indexOf("percent")!==-1&&ge.push(Z.percentLabel);var be=te.hoverlabel,ke=be.font,ze=[];s.loneHover({trace:K,x0:ce-se*H.r,x1:ce+se*H.r,y:fe,_x0:Q?ne+Z.TL[0]:ce-se*H.r,_x1:Q?ne+Z.TR[0]:ce+se*H.r,_y0:Q?$+Z.TL[1]:fe-se*H.r,_y1:Q?$+Z.BL[1]:fe+se*H.r,text:ge.join("<br>"),name:te.hovertemplate||ae.indexOf("name")!==-1?te.name:void 0,idealAlign:Z.pxmid[0]<0?"left":"right",color:u.castOption(be.bgcolor,Z.pts)||Z.color,borderColor:u.castOption(be.bordercolor,Z.pts),fontFamily:u.castOption(ke.family,Z.pts),fontSize:u.castOption(ke.size,Z.pts),fontColor:u.castOption(ke.color,Z.pts),nameLength:u.castOption(be.namelength,Z.pts),textAlign:u.castOption(be.align,Z.pts),hovertemplate:u.castOption(te.hovertemplate,Z.pts),hovertemplateLabels:Z,eventData:[h(Z,te)]},{container:X._hoverlayer.node(),outerContainer:X._paper.node(),gd:F,inOut_bbox:ze}),Z.bbox=ze[0],K._hasHoverLabel=!0}K._hasHoverEvent=!0,F.emit("plotly_hover",{points:[h(Z,te)],event:M.event})}}),W.on("mouseout",function(Z){var X=F._fullLayout,te=F._fullData[K.index],ae=M.select(this).datum();K._hasHoverEvent&&(Z.originalEvent=M.event,F.emit("plotly_unhover",{points:[h(ae,te)],event:M.event}),K._hasHoverEvent=!1),K._hasHoverLabel&&(s.loneUnhover(X._hoverlayer.node()),K._hasHoverLabel=!1)}),W.on("click",function(Z){var X=F._fullLayout,te=F._fullData[K.index];F._dragging||X.hovermode===!1||(F._hoverdata=[h(Z,te)],s.click(F,M.event))})}function p(W,F,U){var H=u.castOption(W.insidetextfont.color,F.pts);!H&&W._input.textfont&&(H=u.castOption(W._input.textfont.color,F.pts));var ne=u.castOption(W.insidetextfont.family,F.pts)||u.castOption(W.textfont.family,F.pts)||U.family,$=u.castOption(W.insidetextfont.size,F.pts)||u.castOption(W.textfont.size,F.pts)||U.size,K=u.castOption(W.insidetextfont.weight,F.pts)||u.castOption(W.textfont.weight,F.pts)||U.weight,Q=u.castOption(W.insidetextfont.style,F.pts)||u.castOption(W.textfont.style,F.pts)||U.style,Z=u.castOption(W.insidetextfont.variant,F.pts)||u.castOption(W.textfont.variant,F.pts)||U.variant,X=u.castOption(W.insidetextfont.textcase,F.pts)||u.castOption(W.textfont.textcase,F.pts)||U.textcase,te=u.castOption(W.insidetextfont.lineposition,F.pts)||u.castOption(W.textfont.lineposition,F.pts)||U.lineposition,ae=u.castOption(W.insidetextfont.shadow,F.pts)||u.castOption(W.textfont.shadow,F.pts)||U.shadow;return{color:H||T.contrast(F.color),family:ne,size:$,weight:K,style:Q,variant:Z,textcase:X,lineposition:te,shadow:ae}}function v(W,F){for(var U,H,ne=0;ne<W.length;ne++)if((H=(U=W[ne][0]).trace).title.text){var $=H.title.text;H._meta&&($=f.templateString($,H._meta));var K=b.tester.append("text").attr("data-notex",1).text($).call(b.font,H.title.font).call(i.convertToTspans,F),Q=b.bBox(K.node(),!0);U.titleBox={width:Q.width,height:Q.height},K.remove()}}function g(W,F,U){var H=U.r||F.rpx1,ne=F.rInscribed;if(F.startangle===F.stopangle)return{rCenter:1-ne,scale:0,rotate:0,textPosAngle:0};var $,K=F.ring,Q=K===1&&Math.abs(F.startangle-F.stopangle)===2*Math.PI,Z=F.halfangle,X=F.midangle,te=U.trace.insidetextorientation,ae=te==="horizontal",se=te==="tangential",ce=te==="radial",fe=te==="auto",pe=[];if(!fe){var ge,me=function(ie,he){if(function(Me,Oe){var Ie=Me.startangle,de=Me.stopangle;return Ie>Oe&&Oe>de||Ie<Oe&&Oe<de}(F,ie)){var Se=Math.abs(ie-F.startangle),ye=Math.abs(ie-F.stopangle),we=Se<ye?Se:ye;($=he==="tan"?m(W,H,K,we,0):y(W,H,K,we,Math.PI/2)).textPosAngle=ie,pe.push($)}};if(ae||se){for(ge=4;ge>=-4;ge-=2)me(Math.PI*ge,"tan");for(ge=4;ge>=-4;ge-=2)me(Math.PI*(ge+1),"tan")}if(ae||ce){for(ge=4;ge>=-4;ge-=2)me(Math.PI*(ge+1.5),"rad");for(ge=4;ge>=-4;ge-=2)me(Math.PI*(ge+.5),"rad")}}if(Q||fe||ae){var be=Math.sqrt(W.width*W.width+W.height*W.height);if(($={scale:ne*H*2/be,rCenter:1-ne,rotate:0}).textPosAngle=(F.startangle+F.stopangle)/2,$.scale>=1)return $;pe.push($)}(fe||ce)&&(($=y(W,H,K,Z,X)).textPosAngle=(F.startangle+F.stopangle)/2,pe.push($)),(fe||se)&&(($=m(W,H,K,Z,X)).textPosAngle=(F.startangle+F.stopangle)/2,pe.push($));for(var ke=0,ze=0,ve=0;ve<pe.length;ve++){var oe=pe[ve].scale;if(ze<oe&&(ze=oe,ke=ve),!fe&&ze>=1)break}return pe[ke]}function y(W,F,U,H,ne){F=Math.max(0,F-2*l);var $=W.width/W.height,K=S($,H,F,U);return{scale:2*K/W.height,rCenter:_($,K/F),rotate:d(ne)}}function m(W,F,U,H,ne){F=Math.max(0,F-2*l);var $=W.height/W.width,K=S($,H,F,U);return{scale:2*K/W.width,rCenter:_($,K/F),rotate:d(ne+Math.PI/2)}}function _(W,F){return Math.cos(F)-W*F}function d(W){return(180/Math.PI*W+720)%180-90}function S(W,F,U,H){var ne=W+1/(2*Math.tan(F));return U*Math.min(1/(Math.sqrt(ne*ne+.5)+ne),H/(Math.sqrt(W*W+H/2)+W))}function w(W,F){return W.v!==F.vTotal||F.trace.hole?Math.min(1/(1+1/Math.sin(W.halfangle)),W.ring/2):1}function E(W,F){var U=F.pxmid[0],H=F.pxmid[1],ne=W.width/2,$=W.height/2;return U<0&&(ne*=-1),H<0&&($*=-1),{scale:1,rCenter:1,rotate:0,x:ne+Math.abs($)*(ne>0?1:-1)/2,y:$/(1+U*U/(H*H)),outside:!0}}function C(W,F){var U,H,ne,$=W.trace,K={x:W.cx,y:W.cy},Q={tx:0,ty:0};Q.ty+=$.title.font.size,ne=P($),$.title.position.indexOf("top")!==-1?(K.y-=(1+ne)*W.r,Q.ty-=W.titleBox.height):$.title.position.indexOf("bottom")!==-1&&(K.y+=(1+ne)*W.r);var Z,X=W.r/((Z=W.trace.aspectratio)===void 0?1:Z),te=F.w*($.domain.x[1]-$.domain.x[0])/2;return $.title.position.indexOf("left")!==-1?(te+=X,K.x-=(1+ne)*X,Q.tx+=W.titleBox.width/2):$.title.position.indexOf("center")!==-1?te*=2:$.title.position.indexOf("right")!==-1&&(te+=X,K.x+=(1+ne)*X,Q.tx-=W.titleBox.width/2),U=te/W.titleBox.width,H=O(W,F)/W.titleBox.height,{x:K.x,y:K.y,scale:Math.min(U,H),tx:Q.tx,ty:Q.ty}}function O(W,F){var U=W.trace,H=F.h*(U.domain.y[1]-U.domain.y[0]);return Math.min(W.titleBox.height,H/2)}function P(W){var F,U=W.pull;if(!U)return 0;if(f.isArrayOrTypedArray(U))for(U=0,F=0;F<W.pull.length;F++)W.pull[F]>U&&(U=W.pull[F]);return U}function z(W,F){for(var U=[],H=0;H<W.length;H++){var ne=W[H][0],$=ne.trace,K=$.domain,Q=F.w*(K.x[1]-K.x[0]),Z=F.h*(K.y[1]-K.y[0]);$.title.text&&$.title.position!=="middle center"&&(Z-=O(ne,F));var X=Q/2,te=Z/2;$.type!=="funnelarea"||$.scalegroup||(te/=$.aspectratio),ne.r=Math.min(X,te)/(1+P($)),ne.cx=F.l+F.w*($.domain.x[1]+$.domain.x[0])/2,ne.cy=F.t+F.h*(1-$.domain.y[0])-Z/2,$.title.text&&$.title.position.indexOf("bottom")!==-1&&(ne.cy-=O(ne,F)),$.scalegroup&&U.indexOf($.scalegroup)===-1&&U.push($.scalegroup)}(function(ae,se){for(var ce,fe,pe,ge=0;ge<se.length;ge++){var me=1/0,be=se[ge];for(fe=0;fe<ae.length;fe++)if((pe=(ce=ae[fe][0]).trace).scalegroup===be){var ke;if(pe.type==="pie")ke=ce.r*ce.r;else if(pe.type==="funnelarea"){var ze,ve;pe.aspectratio>1?ve=(ze=ce.r)/pe.aspectratio:ze=(ve=ce.r)*pe.aspectratio,ke=(ze*=(1+pe.baseratio)/2)*ve}me=Math.min(me,ke/ce.vTotal)}for(fe=0;fe<ae.length;fe++)if((pe=(ce=ae[fe][0]).trace).scalegroup===be){var oe=me*ce.vTotal;pe.type==="funnelarea"&&(oe/=(1+pe.baseratio)/2,oe/=pe.aspectratio),ce.r=Math.sqrt(oe)}}})(W,U)}function j(W,F){return[W*Math.sin(F),-W*Math.cos(F)]}function I(W,F,U){var H=W._fullLayout,ne=U.trace,$=ne.texttemplate,K=ne.textinfo;if(!$&&K&&K!=="none"){var Q,Z=K.split("+"),X=function(ke){return Z.indexOf(ke)!==-1},te=X("label"),ae=X("text"),se=X("value"),ce=X("percent"),fe=H.separators;if(Q=te?[F.label]:[],ae){var pe=u.getFirstFilled(ne.text,F.pts);c(pe)&&Q.push(pe)}se&&Q.push(u.formatPieValue(F.v,fe)),ce&&Q.push(u.formatPiePercent(F.v/U.vTotal,fe)),F.text=Q.join("<br>")}if($){var ge=f.castOption(ne,F.i,"texttemplate");if(ge){var me=function(ke){return{label:ke.label,value:ke.v,valueLabel:u.formatPieValue(ke.v,H.separators),percent:ke.v/U.vTotal,percentLabel:u.formatPiePercent(ke.v/U.vTotal,H.separators),color:ke.color,text:ke.text,customdata:f.castOption(ne,ke.i,"customdata")}}(F),be=u.getFirstFilled(ne.text,F.pts);(c(be)||be==="")&&(me.text=be),F.text=f.texttemplateString(ge,me,W._fullLayout._d3locale,me,ne._meta||{})}else F.text=""}}function N(W,F){var U=W.rotate*Math.PI/180,H=Math.cos(U),ne=Math.sin(U),$=(F.left+F.right)/2,K=(F.top+F.bottom)/2;W.textX=$*H-K*ne,W.textY=$*ne+K*H,W.noCenter=!0}ee.exports={plot:function(W,F){var U=W._context.staticPlot,H=W._fullLayout,ne=H._size;a("pie",H),v(F,W),z(F,ne);var $=f.makeTraceGroups(H._pielayer,F,"trace").each(function(K){var Q=M.select(this),Z=K[0],X=Z.trace;(function(te){var ae,se,ce,fe=te[0],pe=fe.r,ge=fe.trace,me=u.getRotationAngle(ge.rotation),be=2*Math.PI/fe.vTotal,ke="px0",ze="px1";if(ge.direction==="counterclockwise"){for(ae=0;ae<te.length&&te[ae].hidden;ae++);if(ae===te.length)return;me+=be*te[ae].v,be*=-1,ke="px1",ze="px0"}for(ce=j(pe,me),ae=0;ae<te.length;ae++)(se=te[ae]).hidden||(se[ke]=ce,se.startangle=me,me+=be*se.v/2,se.pxmid=j(pe,me),se.midangle=me,ce=j(pe,me+=be*se.v/2),se.stopangle=me,se[ze]=ce,se.largeArc=se.v>fe.vTotal/2?1:0,se.halfangle=Math.PI*Math.min(se.v/fe.vTotal,.5),se.ring=1-ge.hole,se.rInscribed=w(se,fe))})(K),Q.attr("stroke-linejoin","round"),Q.each(function(){var te=M.select(this).selectAll("g.slice").data(K);te.enter().append("g").classed("slice",!0),te.exit().remove();var ae=[[[],[]],[[],[]]],se=!1;te.each(function(ze,ve){if(ze.hidden)M.select(this).selectAll("path,g").remove();else{ze.pointNumber=ze.i,ze.curveNumber=X.index,ae[ze.pxmid[1]<0?0:1][ze.pxmid[0]<0?0:1].push(ze);var oe=Z.cx,ie=Z.cy,he=M.select(this),Se=he.selectAll("path.surface").data([ze]);if(Se.enter().append("path").classed("surface",!0).style({"pointer-events":U?"none":"all"}),he.call(x,W,K),X.pull){var ye=+u.castOption(X.pull,ze.pts)||0;ye>0&&(oe+=ye*ze.pxmid[0],ie+=ye*ze.pxmid[1])}ze.cxFinal=oe,ze.cyFinal=ie;var we=X.hole;if(ze.v===Z.vTotal){var Me="M"+(oe+ze.px0[0])+","+(ie+ze.px0[1])+Ae(ze.px0,ze.pxmid,!0,1)+Ae(ze.pxmid,ze.px0,!0,1)+"Z";we?Se.attr("d","M"+(oe+we*ze.px0[0])+","+(ie+we*ze.px0[1])+Ae(ze.px0,ze.pxmid,!1,we)+Ae(ze.pxmid,ze.px0,!1,we)+"Z"+Me):Se.attr("d",Me)}else{var Oe=Ae(ze.px0,ze.px1,!0,1);if(we){var Ie=1-we;Se.attr("d","M"+(oe+we*ze.px1[0])+","+(ie+we*ze.px1[1])+Ae(ze.px1,ze.px0,!1,we)+"l"+Ie*ze.px0[0]+","+Ie*ze.px0[1]+Oe+"Z")}else Se.attr("d","M"+oe+","+ie+"l"+ze.px0[0]+","+ze.px0[1]+Oe+"Z")}I(W,ze,Z);var de=u.castOption(X.textposition,ze.pts),_e=he.selectAll("g.slicetext").data(ze.text&&de!=="none"?[0]:[]);_e.enter().append("g").classed("slicetext",!0),_e.exit().remove(),_e.each(function(){var Pe=f.ensureSingle(M.select(this),"text","",function(vt){vt.attr("data-notex",1)}),Ee=f.ensureUniformFontSize(W,de==="outside"?function(vt,pt,Qe){return{color:u.castOption(vt.outsidetextfont.color,pt.pts)||u.castOption(vt.textfont.color,pt.pts)||Qe.color,family:u.castOption(vt.outsidetextfont.family,pt.pts)||u.castOption(vt.textfont.family,pt.pts)||Qe.family,size:u.castOption(vt.outsidetextfont.size,pt.pts)||u.castOption(vt.textfont.size,pt.pts)||Qe.size,weight:u.castOption(vt.outsidetextfont.weight,pt.pts)||u.castOption(vt.textfont.weight,pt.pts)||Qe.weight,style:u.castOption(vt.outsidetextfont.style,pt.pts)||u.castOption(vt.textfont.style,pt.pts)||Qe.style,variant:u.castOption(vt.outsidetextfont.variant,pt.pts)||u.castOption(vt.textfont.variant,pt.pts)||Qe.variant,textcase:u.castOption(vt.outsidetextfont.textcase,pt.pts)||u.castOption(vt.textfont.textcase,pt.pts)||Qe.textcase,lineposition:u.castOption(vt.outsidetextfont.lineposition,pt.pts)||u.castOption(vt.textfont.lineposition,pt.pts)||Qe.lineposition,shadow:u.castOption(vt.outsidetextfont.shadow,pt.pts)||u.castOption(vt.textfont.shadow,pt.pts)||Qe.shadow}}(X,ze,H.font):p(X,ze,H.font));Pe.text(ze.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(b.font,Ee).call(i.convertToTspans,W);var Fe,Ve=b.bBox(Pe.node());if(de==="outside")Fe=E(Ve,ze);else if(Fe=g(Ve,ze,Z),de==="auto"&&Fe.scale<1){var Ye=f.ensureUniformFontSize(W,X.outsidetextfont);Pe.call(b.font,Ye),Fe=E(Ve=b.bBox(Pe.node()),ze)}var tt=Fe.textPosAngle,nt=tt===void 0?ze.pxmid:j(Z.r,tt);if(Fe.targetX=oe+nt[0]*Fe.rCenter+(Fe.x||0),Fe.targetY=ie+nt[1]*Fe.rCenter+(Fe.y||0),N(Fe,Ve),Fe.outside){var ht=Fe.targetY;ze.yLabelMin=ht-Ve.height/2,ze.yLabelMid=ht,ze.yLabelMax=ht+Ve.height/2,ze.labelExtraX=0,ze.labelExtraY=0,se=!0}Fe.fontSize=Ee.size,r(X.type,Fe,H),K[ve].transform=Fe,f.setTransormAndDisplay(Pe,Fe)})}function Ae(Pe,Ee,Fe,Ve){var Ye=Ve*(Ee[0]-Pe[0]),tt=Ve*(Ee[1]-Pe[1]);return"a"+Ve*Z.r+","+Ve*Z.r+" 0 "+ze.largeArc+(Fe?" 1 ":" 0 ")+Ye+","+tt}});var ce=M.select(this).selectAll("g.titletext").data(X.title.text?[0]:[]);if(ce.enter().append("g").classed("titletext",!0),ce.exit().remove(),ce.each(function(){var ze,ve=f.ensureSingle(M.select(this),"text","",function(ie){ie.attr("data-notex",1)}),oe=X.title.text;X._meta&&(oe=f.templateString(oe,X._meta)),ve.text(oe).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(b.font,X.title.font).call(i.convertToTspans,W),ze=X.title.position==="middle center"?function(ie){var he=Math.sqrt(ie.titleBox.width*ie.titleBox.width+ie.titleBox.height*ie.titleBox.height);return{x:ie.cx,y:ie.cy,scale:ie.trace.hole*ie.r*2/he,tx:0,ty:-ie.titleBox.height/2+ie.trace.title.font.size}}(Z):C(Z,ne),ve.attr("transform",t(ze.x,ze.y)+o(Math.min(1,ze.scale))+t(ze.tx,ze.ty))}),se&&function(ze,ve){var oe,ie,he,Se,ye,we,Me,Oe,Ie,de,_e,Ae,Pe;function Ee(tt,nt){return tt.pxmid[1]-nt.pxmid[1]}function Fe(tt,nt){return nt.pxmid[1]-tt.pxmid[1]}function Ve(tt,nt){nt||(nt={});var ht,vt,pt,Qe,Ke=nt.labelExtraY+(ie?nt.yLabelMax:nt.yLabelMin),Mt=ie?tt.yLabelMin:tt.yLabelMax,Ot=ie?tt.yLabelMax:tt.yLabelMin,Pt=tt.cyFinal+ye(tt.px0[1],tt.px1[1]),St=Ke-Mt;if(St*Me>0&&(tt.labelExtraY=St),f.isArrayOrTypedArray(ve.pull))for(vt=0;vt<de.length;vt++)(pt=de[vt])===tt||(u.castOption(ve.pull,tt.pts)||0)>=(u.castOption(ve.pull,pt.pts)||0)||((tt.pxmid[1]-pt.pxmid[1])*Me>0?(St=pt.cyFinal+ye(pt.px0[1],pt.px1[1])-Mt-tt.labelExtraY)*Me>0&&(tt.labelExtraY+=St):(Ot+tt.labelExtraY-Pt)*Me>0&&(ht=3*we*Math.abs(vt-de.indexOf(tt)),(Qe=pt.cxFinal+Se(pt.px0[0],pt.px1[0])+ht-(tt.cxFinal+tt.pxmid[0])-tt.labelExtraX)*we>0&&(tt.labelExtraX+=Qe)))}for(ie=0;ie<2;ie++)for(he=ie?Ee:Fe,ye=ie?Math.max:Math.min,Me=ie?1:-1,oe=0;oe<2;oe++){for(Se=oe?Math.max:Math.min,we=oe?1:-1,(Oe=ze[ie][oe]).sort(he),Ie=ze[1-ie][oe],de=Ie.concat(Oe),Ae=[],_e=0;_e<Oe.length;_e++)Oe[_e].yLabelMid!==void 0&&Ae.push(Oe[_e]);for(Pe=!1,_e=0;ie&&_e<Ie.length;_e++)if(Ie[_e].yLabelMid!==void 0){Pe=Ie[_e];break}for(_e=0;_e<Ae.length;_e++){var Ye=_e&&Ae[_e-1];Pe&&!_e&&(Ye=Pe),Ve(Ae[_e],Ye)}}}(ae,X),function(ze,ve){ze.each(function(oe){var ie=M.select(this);if(oe.labelExtraX||oe.labelExtraY){var he=ie.select("g.slicetext text");oe.transform.targetX+=oe.labelExtraX,oe.transform.targetY+=oe.labelExtraY,f.setTransormAndDisplay(he,oe.transform);var Se=oe.cxFinal+oe.pxmid[0],ye="M"+Se+","+(oe.cyFinal+oe.pxmid[1]),we=(oe.yLabelMax-oe.yLabelMin)*(oe.pxmid[0]<0?-1:1)/4;if(oe.labelExtraX){var Me=oe.labelExtraX*oe.pxmid[1]/oe.pxmid[0],Oe=oe.yLabelMid+oe.labelExtraY-(oe.cyFinal+oe.pxmid[1]);Math.abs(Me)>Math.abs(Oe)?ye+="l"+Oe*oe.pxmid[0]/oe.pxmid[1]+","+Oe+"H"+(Se+oe.labelExtraX+we):ye+="l"+oe.labelExtraX+","+Me+"v"+(Oe-Me)+"h"+we}else ye+="V"+(oe.yLabelMid+oe.labelExtraY)+"h"+we;f.ensureSingle(ie,"path","textline").call(T.stroke,ve.outsidetextfont.color).attr({"stroke-width":Math.min(2,ve.outsidetextfont.size/8),d:ye,fill:"none"})}else ie.select("path.textline").remove()})}(te,X),se&&X.automargin){var fe=b.bBox(Q.node()),pe=X.domain,ge=ne.w*(pe.x[1]-pe.x[0]),me=ne.h*(pe.y[1]-pe.y[0]),be=(.5*ge-Z.r)/ne.w,ke=(.5*me-Z.r)/ne.h;k.autoMargin(W,"pie."+X.uid+".automargin",{xl:pe.x[0]-be,xr:pe.x[1]+be,yb:pe.y[0]-ke,yt:pe.y[1]+ke,l:Math.max(Z.cx-Z.r-fe.left,0),r:Math.max(fe.right-(Z.cx+Z.r),0),b:Math.max(fe.bottom-(Z.cy+Z.r),0),t:Math.max(Z.cy-Z.r-fe.top,0),pad:5})}})});setTimeout(function(){$.selectAll("tspan").each(function(){var K=M.select(this);K.attr("dy")&&K.attr("dy",K.attr("dy"))})},0)},formatSliceLabel:I,transformInsideText:g,determineInsideTextFont:p,positionTitleOutside:C,prerenderTitles:v,layoutAreas:z,attachFxHandlers:x,computeTransform:N}},22152:function(ee,R,e){var M=e(33428),k=e(10528),s=e(82744).resizeText;ee.exports=function(T){var b=T._fullLayout._pielayer.selectAll(".trace");s(T,b,"pie"),b.each(function(f){var o=f[0].trace,t=M.select(this);t.style({opacity:o.opacity}),t.selectAll("path.surface").each(function(i){M.select(this).call(k,i,o,T)})})}},10528:function(ee,R,e){var M=e(76308),k=e(69656).castOption,s=e(21552);ee.exports=function(T,b,f,o){var t=f.marker.line,i=k(t.color,b.pts)||M.defaultLine,n=k(t.width,b.pts)||0;T.call(s,b,f,o).style("stroke-width",n).call(M.stroke,i)}},35484:function(ee,R,e){var M=e(52904);ee.exports={x:M.x,y:M.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:M.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},11072:function(ee,R,e){var M=e(67792).gl_pointcloud2d,k=e(3400).isArrayOrTypedArray,s=e(43080),T=e(19280).findExtremes,b=e(44928);function f(t,i){this.scene=t,this.uid=i,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=M(t.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var o=f.prototype;o.handlePick=function(t){var i=this.idToIndex[t.pointId];return{trace:this,dataCoord:t.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*i],this.pickXYData[2*i+1]]:[this.pickXData[i],this.pickYData[i]],textLabel:k(this.textLabels)?this.textLabels[i]:this.textLabels,color:this.color,name:this.name,pointIndex:i,hoverinfo:this.hoverinfo}},o.update=function(t){this.index=t.index,this.textLabels=t.text,this.name=t.name,this.hoverinfo=t.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(t),this.color=b(t,{})},o.updateFast=function(t){var i,n,r,a,l,u,h=this.xData=this.pickXData=t.x,c=this.yData=this.pickYData=t.y,x=this.pickXYData=t.xy,p=t.xbounds&&t.ybounds,v=t.indices,g=this.bounds;if(x){if(r=x,i=x.length>>>1,p)g[0]=t.xbounds[0],g[2]=t.xbounds[1],g[1]=t.ybounds[0],g[3]=t.ybounds[1];else for(u=0;u<i;u++)a=r[2*u],l=r[2*u+1],a<g[0]&&(g[0]=a),a>g[2]&&(g[2]=a),l<g[1]&&(g[1]=l),l>g[3]&&(g[3]=l);if(v)n=v;else for(n=new Int32Array(i),u=0;u<i;u++)n[u]=u}else for(i=h.length,r=new Float32Array(2*i),n=new Int32Array(i),u=0;u<i;u++)a=h[u],l=c[u],n[u]=u,r[2*u]=a,r[2*u+1]=l,a<g[0]&&(g[0]=a),a>g[2]&&(g[2]=a),l<g[1]&&(g[1]=l),l>g[3]&&(g[3]=l);this.idToIndex=n,this.pointcloudOptions.idToIndex=n,this.pointcloudOptions.positions=r;var y=s(t.marker.color),m=s(t.marker.border.color),_=t.opacity*t.marker.opacity;y[3]*=_,this.pointcloudOptions.color=y;var d=t.marker.blend;d===null&&(d=h.length<100||c.length<100),this.pointcloudOptions.blend=d,m[3]*=_,this.pointcloudOptions.borderColor=m;var S=t.marker.sizemin,w=Math.max(t.marker.sizemax,t.marker.sizemin);this.pointcloudOptions.sizeMin=S,this.pointcloudOptions.sizeMax=w,this.pointcloudOptions.areaRatio=t.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var E=this.scene.xaxis,C=this.scene.yaxis,O=w/2||.5;t._extremes[E._id]=T(E,[g[0],g[2]],{ppad:O}),t._extremes[C._id]=T(C,[g[1],g[3]],{ppad:O})},o.dispose=function(){this.pointcloud.dispose()},ee.exports=function(t,i){var n=new f(t,i.uid);return n.update(i),n}},41904:function(ee,R,e){var M=e(3400),k=e(35484);ee.exports=function(s,T,b){function f(o,t){return M.coerce(s,T,k,o,t)}f("x"),f("y"),f("xbounds"),f("ybounds"),s.xy&&s.xy instanceof Float32Array&&(T.xy=s.xy),s.indices&&s.indices instanceof Int32Array&&(T.indices=s.indices),f("text"),f("marker.color",b),f("marker.opacity"),f("marker.blend"),f("marker.sizemin"),f("marker.sizemax"),f("marker.border.color",b),f("marker.border.arearatio"),T._length=null}},156:function(ee,R,e){ee.exports={attributes:e(35484),supplyDefaults:e(41904),calc:e(41484),plot:e(11072),moduleType:"trace",name:"pointcloud",basePlotModule:e(39952),categories:["gl","gl2d","showLegend"],meta:{}}},41440:function(ee,R,e){var M=e(25376),k=e(45464),s=e(22548),T=e(55756),b=e(86968).u,f=e(21776).Ks,o=e(49084),t=e(31780).templatedArray,i=e(29736).descriptionOnlyNumbers,n=e(92880).extendFlat,r=e(67824).overrideAll;(ee.exports=r({hoverinfo:n({},k.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:T.hoverlabel,domain:b({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:i("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:M({autoShadowDflt:!0}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:s.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:f({},{keys:["value","label"]}),align:{valType:"enumerated",values:["justify","left","right","center"],dflt:"justify"}},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},hovercolor:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:s.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:f({},{keys:["value","label"]}),colorscales:t("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:n(o().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},10760:function(ee,R,e){var M=e(67824).overrideAll,k=e(84888)._M,s=e(59596),T=e(65460),b=e(93972),f=e(86476),o=e(22676).prepSelect,t=e(3400),i=e(24040),n="sankey";function r(a,l){var u=a._fullData[l],h=a._fullLayout,c=h.dragmode,x=h.dragmode==="pan"?"move":"crosshair",p=u._bgRect;if(p&&c!=="pan"&&c!=="zoom"){b(p,x);var v={_id:"x",c2p:t.identity,_offset:u._sankey.translateX,_length:u._sankey.width},g={_id:"y",c2p:t.identity,_offset:u._sankey.translateY,_length:u._sankey.height},y={gd:a,element:p.node(),plotinfo:{id:l,xaxis:v,yaxis:g,fillRangeItems:t.noop},subplot:l,xaxes:[v],yaxes:[g],doneFnCompleted:function(m){var _,d=a._fullData[l],S=d.node.groups.slice(),w=[];function E(z){for(var j=d._sankey.graph.nodes,I=0;I<j.length;I++)if(j[I].pointNumber===z)return j[I]}for(var C=0;C<m.length;C++){var O=E(m[C].pointNumber);if(O)if(O.group){for(var P=0;P<O.childrenNodes.length;P++)w.push(O.childrenNodes[P].pointNumber);S[O.pointNumber-d.node._count]=!1}else w.push(O.pointNumber)}_=S.filter(Boolean).concat([w]),i.call("_guiRestyle",a,{"node.groups":[_]},l)},prepFn:function(m,_,d){o(m,_,d,y,c)}};f.init(y)}}R.name=n,R.baseLayoutAttrOverrides=M({hoverlabel:T.hoverlabel},"plot","nested"),R.plot=function(a){var l=k(a.calcdata,n)[0];s(a,l),R.updateFx(a)},R.clean=function(a,l,u,h){var c=h._has&&h._has(n),x=l._has&&l._has(n);c&&!x&&(h._paperdiv.selectAll(".sankey").remove(),h._paperdiv.selectAll(".bgsankey").remove())},R.updateFx=function(a){for(var l=0;l<a._fullData.length;l++)r(a,l)}},48068:function(ee,R,e){var M=e(78484),k=e(3400),s=e(71688).wrap,T=k.isArrayOrTypedArray,b=k.isIndex,f=e(8932);ee.exports=function(o,t){var i=function(n){var r,a=n.node,l=n.link,u=[],h=T(l.color),c=T(l.hovercolor),x=T(l.customdata),p={},v={},g=l.colorscales.length;for(r=0;r<g;r++){var y=l.colorscales[r],m=f.extractScale(y,{cLetter:"c"}),_=f.makeColorScaleFunc(m);v[y.label]=_}var d=0;for(r=0;r<l.value.length;r++)l.source[r]>d&&(d=l.source[r]),l.target[r]>d&&(d=l.target[r]);var S,w=d+1;n.node._count=w;var E=n.node.groups,C={};for(r=0;r<E.length;r++){var O=E[r];for(S=0;S<O.length;S++){var P=O[S],z=w+r;C.hasOwnProperty(P)?k.warn("Node "+P+" is already part of a group."):C[P]=z}}var j={source:[],target:[]};for(r=0;r<l.value.length;r++){var I=l.value[r],N=l.source[r],W=l.target[r];if(I>0&&b(N,w)&&b(W,w)&&(!C.hasOwnProperty(N)||!C.hasOwnProperty(W)||C[N]!==C[W])){C.hasOwnProperty(W)&&(W=C[W]),C.hasOwnProperty(N)&&(N=C[N]),W=+W,p[N=+N]=p[W]=!0;var F="";l.label&&l.label[r]&&(F=l.label[r]);var U=null;F&&v.hasOwnProperty(F)&&(U=v[F]),u.push({pointNumber:r,label:F,color:h?l.color[r]:l.color,hovercolor:c?l.hovercolor[r]:l.hovercolor,customdata:x?l.customdata[r]:l.customdata,concentrationscale:U,source:N,target:W,value:+I}),j.source.push(N),j.target.push(W)}}var H=w+E.length,ne=T(a.color),$=T(a.customdata),K=[];for(r=0;r<H;r++)if(p[r]){var Q=a.label[r];K.push({group:r>w-1,childrenNodes:[],pointNumber:r,label:Q,color:ne?a.color[r]:a.color,customdata:$?a.customdata[r]:a.customdata})}var Z=!1;return function(X,te,ae){for(var se=k.init2dArray(X,0),ce=0;ce<Math.min(te.length,ae.length);ce++)if(k.isIndex(te[ce],X)&&k.isIndex(ae[ce],X)){if(te[ce]===ae[ce])return!0;se[te[ce]].push(ae[ce])}return M(se).components.some(function(fe){return fe.length>1})}(H,j.source,j.target)&&(Z=!0),{circular:Z,links:u,nodes:K,groups:E,groupLookup:C}}(t);return s({circular:i.circular,_nodes:i.nodes,_links:i.links,_groups:i.groups,_groupLookup:i.groupLookup})}},11820:function(ee){ee.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},47140:function(ee,R,e){var M=e(3400),k=e(41440),s=e(76308),T=e(49760),b=e(86968).Q,f=e(16132),o=e(31780),t=e(51272);function i(n,r){function a(l,u){return M.coerce(n,r,k.link.colorscales,l,u)}a("label"),a("cmin"),a("cmax"),a("colorscale")}ee.exports=function(n,r,a,l){function u(E,C){return M.coerce(n,r,k,E,C)}var h=M.extendDeep(l.hoverlabel,n.hoverlabel),c=n.node,x=o.newContainer(r,"node");function p(E,C){return M.coerce(c,x,k.node,E,C)}p("label"),p("groups"),p("x"),p("y"),p("pad"),p("thickness"),p("line.color"),p("line.width"),p("hoverinfo",n.hoverinfo),f(c,x,p,h),p("hovertemplate"),p("align");var v=l.colorway;p("color",x.label.map(function(E,C){return s.addOpacity(function(O){return v[O%v.length]}(C),.8)})),p("customdata");var g=n.link||{},y=o.newContainer(r,"link");function m(E,C){return M.coerce(g,y,k.link,E,C)}m("label"),m("arrowlen"),m("source"),m("target"),m("value"),m("line.color"),m("line.width"),m("hoverinfo",n.hoverinfo),f(g,y,m,h),m("hovertemplate");var _,d=T(l.paper_bgcolor).getLuminance()<.333,S=m("color",d?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)");function w(E){var C=T(E);if(!C.isValid())return E;var O=C.getAlpha();return O<=.8?C.setAlpha(O+.2):C=d?C.brighten():C.darken(),C.toRgbString()}m("hovercolor",Array.isArray(S)?S.map(w):w(S)),m("customdata"),t(g,y,{name:"colorscales",handleItemDefaults:i}),b(r,l,u),u("orientation"),u("valueformat"),u("valuesuffix"),x.x.length&&x.y.length&&(_="freeform"),u("arrangement",_),M.coerceFont(u,"textfont",l.font,{autoShadowDflt:!0}),r._length=null}},45499:function(ee,R,e){ee.exports={attributes:e(41440),supplyDefaults:e(47140),calc:e(48068),plot:e(59596),moduleType:"trace",name:"sankey",basePlotModule:e(10760),selectPoints:e(81128),categories:["noOpacity"],meta:{}}},59596:function(ee,R,e){var M=e(33428),k=e(3400),s=k.numberFormat,T=e(83248),b=e(93024),f=e(76308),o=e(11820).cn,t=k._;function i(g){return g!==""}function n(g,y){return g.filter(function(m){return m.key===y.traceId})}function r(g,y){M.select(g).select("path").style("fill-opacity",y),M.select(g).select("rect").style("fill-opacity",y)}function a(g){M.select(g).select("text.name").style("fill","black")}function l(g){return function(y){return g.node.sourceLinks.indexOf(y.link)!==-1||g.node.targetLinks.indexOf(y.link)!==-1}}function u(g){return function(y){return y.node.sourceLinks.indexOf(g.link)!==-1||y.node.targetLinks.indexOf(g.link)!==-1}}function h(g,y,m){y&&m&&n(m,y).selectAll("."+o.sankeyLink).filter(l(y)).call(x.bind(0,y,m,!1))}function c(g,y,m){y&&m&&n(m,y).selectAll("."+o.sankeyLink).filter(l(y)).call(p.bind(0,y,m,!1))}function x(g,y,m,_){_.style("fill",function(d){if(!d.link.concentrationscale)return d.tinyColorHoverHue}).style("fill-opacity",function(d){if(!d.link.concentrationscale)return d.tinyColorHoverAlpha}),_.each(function(d){var S=d.link.label;S!==""&&n(y,g).selectAll("."+o.sankeyLink).filter(function(w){return w.link.label===S}).style("fill",function(w){if(!w.link.concentrationscale)return w.tinyColorHoverHue}).style("fill-opacity",function(w){if(!w.link.concentrationscale)return w.tinyColorHoverAlpha})}),m&&n(y,g).selectAll("."+o.sankeyNode).filter(u(g)).call(h)}function p(g,y,m,_){_.style("fill",function(d){return d.tinyColorHue}).style("fill-opacity",function(d){return d.tinyColorAlpha}),_.each(function(d){var S=d.link.label;S!==""&&n(y,g).selectAll("."+o.sankeyLink).filter(function(w){return w.link.label===S}).style("fill",function(w){return w.tinyColorHue}).style("fill-opacity",function(w){return w.tinyColorAlpha})}),m&&n(y,g).selectAll(o.sankeyNode).filter(u(g)).call(c)}function v(g,y){var m=g.hoverlabel||{},_=k.nestedProperty(m,y).get();return!Array.isArray(_)&&_}ee.exports=function(g,y){for(var m=g._fullLayout,_=m._paper,d=m._size,S=0;S<g._fullData.length;S++)if(g._fullData[S].visible&&g._fullData[S].type===o.sankey&&!g._fullData[S]._viewInitial){var w=g._fullData[S].node;g._fullData[S]._viewInitial={node:{groups:w.groups.slice(),x:w.x.slice(),y:w.y.slice()}}}var E=t(g,"source:")+" ",C=t(g,"target:")+" ",O=t(g,"concentration:")+" ",P=t(g,"incoming flow count:")+" ",z=t(g,"outgoing flow count:")+" ";T(g,_,y,{width:d.w,height:d.h,margin:{t:d.t,r:d.r,b:d.b,l:d.l}},{linkEvents:{hover:function(j,I,N){g._fullLayout.hovermode!==!1&&(M.select(j).call(x.bind(0,I,N,!0)),I.link.trace.link.hoverinfo!=="skip"&&(I.link.fullData=I.link.trace,g.emit("plotly_hover",{event:M.event,points:[I.link]})))},follow:function(j,I){if(g._fullLayout.hovermode!==!1){var N=I.link.trace.link;if(N.hoverinfo!=="none"&&N.hoverinfo!=="skip"){for(var W=[],F=0,U=0;U<I.flow.links.length;U++){var H=I.flow.links[U];if(g._fullLayout.hovermode!=="closest"||I.link.pointNumber===H.pointNumber){I.link.pointNumber===H.pointNumber&&(F=U),H.fullData=H.trace,N=I.link.trace.link;var ne=K(H),$={valueLabel:s(I.valueFormat)(H.value)+I.valueSuffix};W.push({x:ne[0],y:ne[1],name:$.valueLabel,text:[H.label||"",E+H.source.label,C+H.target.label,H.concentrationscale?O+s("%0.2f")(H.flow.labelConcentration):""].filter(i).join("<br>"),color:v(N,"bgcolor")||f.addOpacity(H.color,1),borderColor:v(N,"bordercolor"),fontFamily:v(N,"font.family"),fontSize:v(N,"font.size"),fontColor:v(N,"font.color"),fontWeight:v(N,"font.weight"),fontStyle:v(N,"font.style"),fontVariant:v(N,"font.variant"),fontTextcase:v(N,"font.textcase"),fontLineposition:v(N,"font.lineposition"),fontShadow:v(N,"font.shadow"),nameLength:v(N,"namelength"),textAlign:v(N,"align"),idealAlign:M.event.x<ne[0]?"right":"left",hovertemplate:N.hovertemplate,hovertemplateLabels:$,eventData:[H]})}}b.loneHover(W,{container:m._hoverlayer.node(),outerContainer:m._paper.node(),gd:g,anchorIndex:F}).each(function(){I.link.concentrationscale||r(this,.65),a(this)})}}function K(Q){var Z,X;Q.circular?(Z=(Q.circularPathData.leftInnerExtent+Q.circularPathData.rightInnerExtent)/2,X=Q.circularPathData.verticalFullExtent):(Z=(Q.source.x1+Q.target.x0)/2,X=(Q.y0+Q.y1)/2);var te=[Z,X];return Q.trace.orientation==="v"&&te.reverse(),te[0]+=I.parent.translateX,te[1]+=I.parent.translateY,te}},unhover:function(j,I,N){g._fullLayout.hovermode!==!1&&(M.select(j).call(p.bind(0,I,N,!0)),I.link.trace.link.hoverinfo!=="skip"&&(I.link.fullData=I.link.trace,g.emit("plotly_unhover",{event:M.event,points:[I.link]})),b.loneUnhover(m._hoverlayer.node()))},select:function(j,I){var N=I.link;N.originalEvent=M.event,g._hoverdata=[N],b.click(g,{target:!0})}},nodeEvents:{hover:function(j,I,N){g._fullLayout.hovermode!==!1&&(M.select(j).call(h,I,N),I.node.trace.node.hoverinfo!=="skip"&&(I.node.fullData=I.node.trace,g.emit("plotly_hover",{event:M.event,points:[I.node]})))},follow:function(j,I){if(g._fullLayout.hovermode!==!1){var N=I.node.trace.node;if(N.hoverinfo!=="none"&&N.hoverinfo!=="skip"){var W=M.select(j).select("."+o.nodeRect),F=g._fullLayout._paperdiv.node().getBoundingClientRect(),U=W.node().getBoundingClientRect(),H=U.left-2-F.left,ne=U.right+2-F.left,$=U.top+U.height/4-F.top,K={valueLabel:s(I.valueFormat)(I.node.value)+I.valueSuffix};I.node.fullData=I.node.trace,g._fullLayout._calcInverseTransform(g);var Q=g._fullLayout._invScaleX,Z=g._fullLayout._invScaleY,X=b.loneHover({x0:Q*H,x1:Q*ne,y:Z*$,name:s(I.valueFormat)(I.node.value)+I.valueSuffix,text:[I.node.label,P+I.node.targetLinks.length,z+I.node.sourceLinks.length].filter(i).join("<br>"),color:v(N,"bgcolor")||I.tinyColorHue,borderColor:v(N,"bordercolor"),fontFamily:v(N,"font.family"),fontSize:v(N,"font.size"),fontColor:v(N,"font.color"),fontWeight:v(N,"font.weight"),fontStyle:v(N,"font.style"),fontVariant:v(N,"font.variant"),fontTextcase:v(N,"font.textcase"),fontLineposition:v(N,"font.lineposition"),fontShadow:v(N,"font.shadow"),nameLength:v(N,"namelength"),textAlign:v(N,"align"),idealAlign:"left",hovertemplate:N.hovertemplate,hovertemplateLabels:K,eventData:[I.node]},{container:m._hoverlayer.node(),outerContainer:m._paper.node(),gd:g});r(X,.85),a(X)}}},unhover:function(j,I,N){g._fullLayout.hovermode!==!1&&(M.select(j).call(c,I,N),I.node.trace.node.hoverinfo!=="skip"&&(I.node.fullData=I.node.trace,g.emit("plotly_unhover",{event:M.event,points:[I.node]})),b.loneUnhover(m._hoverlayer.node()))},select:function(j,I,N){var W=I.node;W.originalEvent=M.event,g._hoverdata=[W],M.select(j).call(c,I,N),b.click(g,{target:!0})}}})}},83248:function(ee,R,e){var M=e(49812),k=e(67756).Gz,s=e(33428),T=e(26800),b=e(48932),f=e(11820),o=e(49760),t=e(76308),i=e(43616),n=e(3400),r=n.strTranslate,a=n.strRotate,l=e(71688),u=l.keyFun,h=l.repeat,c=l.unwrap,x=e(72736),p=e(24040),v=e(84284),g=v.CAP_SHIFT,y=v.LINE_SPACING;function m(U,H,ne){var $,K=c(H),Q=K.trace,Z=Q.domain,X=Q.orientation==="h",te=Q.node.pad,ae=Q.node.thickness,se={justify:T.sankeyJustify,left:T.sankeyLeft,right:T.sankeyRight,center:T.sankeyCenter}[Q.node.align],ce=U.width*(Z.x[1]-Z.x[0]),fe=U.height*(Z.y[1]-Z.y[0]),pe=K._nodes,ge=K._links,me=K.circular;($=me?b.sankeyCircular().circularLinkGap(0):T.sankey()).iterations(f.sankeyIterations).size(X?[ce,fe]:[fe,ce]).nodeWidth(ae).nodePadding(te).nodeId(function(Me){return Me.pointNumber}).nodeAlign(se).nodes(pe).links(ge);var be,ke,ze,ve=$();for(var oe in $.nodePadding()<te&&n.warn("node.pad was reduced to ",$.nodePadding()," to fit within the figure."),K._groupLookup){var ie,he=parseInt(K._groupLookup[oe]);for(be=0;be<ve.nodes.length;be++)if(ve.nodes[be].pointNumber===he){ie=ve.nodes[be];break}if(ie){var Se={pointNumber:parseInt(oe),x0:ie.x0,x1:ie.x1,y0:ie.y0,y1:ie.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};ve.nodes.unshift(Se),ie.childrenNodes.unshift(Se)}}if(function(){for(be=0;be<ve.nodes.length;be++){var Me,Oe,Ie=ve.nodes[be],de={};for(ke=0;ke<Ie.targetLinks.length;ke++)Me=(Oe=Ie.targetLinks[ke]).source.pointNumber+":"+Oe.target.pointNumber,de.hasOwnProperty(Me)||(de[Me]=[]),de[Me].push(Oe);var _e=Object.keys(de);for(ke=0;ke<_e.length;ke++){var Ae=de[Me=_e[ke]],Pe=0,Ee={};for(ze=0;ze<Ae.length;ze++)Ee[(Oe=Ae[ze]).label]||(Ee[Oe.label]=0),Ee[Oe.label]+=Oe.value,Pe+=Oe.value;for(ze=0;ze<Ae.length;ze++)(Oe=Ae[ze]).flow={value:Pe,labelConcentration:Ee[Oe.label]/Pe,concentration:Oe.value/Pe,links:Ae},Oe.concentrationscale&&(Oe.color=o(Oe.concentrationscale(Oe.flow.labelConcentration)))}var Fe=0;for(ke=0;ke<Ie.sourceLinks.length;ke++)Fe+=Ie.sourceLinks[ke].value;for(ke=0;ke<Ie.sourceLinks.length;ke++)(Oe=Ie.sourceLinks[ke]).concentrationOut=Oe.value/Fe;var Ve=0;for(ke=0;ke<Ie.targetLinks.length;ke++)Ve+=Ie.targetLinks[ke].value;for(ke=0;ke<Ie.targetLinks.length;ke++)(Oe=Ie.targetLinks[ke]).concenrationIn=Oe.value/Ve}}(),Q.node.x.length&&Q.node.y.length){for(be=0;be<Math.min(Q.node.x.length,Q.node.y.length,ve.nodes.length);be++)if(Q.node.x[be]&&Q.node.y[be]){var ye=[Q.node.x[be]*ce,Q.node.y[be]*fe];ve.nodes[be].x0=ye[0]-ae/2,ve.nodes[be].x1=ye[0]+ae/2;var we=ve.nodes[be].y1-ve.nodes[be].y0;ve.nodes[be].y0=ye[1]-we/2,ve.nodes[be].y1=ye[1]+we/2}Q.arrangement==="snap"&&function(Me){var Oe,Ie,de=Me.map(function(Fe,Ve){return{x0:Fe.x0,index:Ve}}).sort(function(Fe,Ve){return Fe.x0-Ve.x0}),_e=[],Ae=-1,Pe=-1/0;for(be=0;be<de.length;be++){var Ee=Me[de[be].index];Ee.x0>Pe+ae&&(Ae+=1,Oe=Ee.x0),Pe=Ee.x0,_e[Ae]||(_e[Ae]=[]),_e[Ae].push(Ee),Ie=Oe-Ee.x0,Ee.x0+=Ie,Ee.x1+=Ie}return _e}(pe=ve.nodes).forEach(function(Me){var Oe,Ie,de,_e=0,Ae=Me.length;for(Me.sort(function(Pe,Ee){return Pe.y0-Ee.y0}),de=0;de<Ae;++de)(Oe=Me[de]).y0>=_e||(Ie=_e-Oe.y0)>1e-6&&(Oe.y0+=Ie,Oe.y1+=Ie),_e=Oe.y1+te}),$.update(ve)}return{circular:me,key:ne,trace:Q,guid:n.randstr(),horizontal:X,width:ce,height:fe,nodePad:Q.node.pad,nodeLineColor:Q.node.line.color,nodeLineWidth:Q.node.line.width,linkLineColor:Q.link.line.color,linkLineWidth:Q.link.line.width,linkArrowLength:Q.link.arrowlen,valueFormat:Q.valueformat,valueSuffix:Q.valuesuffix,textFont:Q.textfont,translateX:Z.x[0]*U.width+U.margin.l,translateY:U.height-Z.y[1]*U.height+U.margin.t,dragParallel:X?fe:ce,dragPerpendicular:X?ce:fe,arrangement:Q.arrangement,sankey:$,graph:ve,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function _(U,H,ne){var $=o(H.color),K=o(H.hovercolor),Q=H.source.label+"|"+H.target.label+"__"+ne;return H.trace=U.trace,H.curveNumber=U.trace.index,{circular:U.circular,key:Q,traceId:U.key,pointNumber:H.pointNumber,link:H,tinyColorHue:t.tinyRGB($),tinyColorAlpha:$.getAlpha(),tinyColorHoverHue:t.tinyRGB(K),tinyColorHoverAlpha:K.getAlpha(),linkPath:d,linkLineColor:U.linkLineColor,linkLineWidth:U.linkLineWidth,linkArrowLength:U.linkArrowLength,valueFormat:U.valueFormat,valueSuffix:U.valueSuffix,sankey:U.sankey,parent:U,interactionState:U.interactionState,flow:H.flow}}function d(){return function(U){var H=U.linkArrowLength;if(U.link.circular)return function(be,ke){var ze=be.width/2,ve=be.circularPathData;return be.circularLinkType==="top"?"M "+(ve.targetX-ke)+" "+(ve.targetY+ze)+" L"+(ve.rightInnerExtent-ke)+" "+(ve.targetY+ze)+"A"+(ve.rightLargeArcRadius+ze)+" "+(ve.rightSmallArcRadius+ze)+" 0 0 1 "+(ve.rightFullExtent-ze-ke)+" "+(ve.targetY-ve.rightSmallArcRadius)+"L"+(ve.rightFullExtent-ze-ke)+" "+ve.verticalRightInnerExtent+"A"+(ve.rightLargeArcRadius+ze)+" "+(ve.rightLargeArcRadius+ze)+" 0 0 1 "+(ve.rightInnerExtent-ke)+" "+(ve.verticalFullExtent-ze)+"L"+ve.leftInnerExtent+" "+(ve.verticalFullExtent-ze)+"A"+(ve.leftLargeArcRadius+ze)+" "+(ve.leftLargeArcRadius+ze)+" 0 0 1 "+(ve.leftFullExtent+ze)+" "+ve.verticalLeftInnerExtent+"L"+(ve.leftFullExtent+ze)+" "+(ve.sourceY-ve.leftSmallArcRadius)+"A"+(ve.leftLargeArcRadius+ze)+" "+(ve.leftSmallArcRadius+ze)+" 0 0 1 "+ve.leftInnerExtent+" "+(ve.sourceY+ze)+"L"+ve.sourceX+" "+(ve.sourceY+ze)+"L"+ve.sourceX+" "+(ve.sourceY-ze)+"L"+ve.leftInnerExtent+" "+(ve.sourceY-ze)+"A"+(ve.leftLargeArcRadius-ze)+" "+(ve.leftSmallArcRadius-ze)+" 0 0 0 "+(ve.leftFullExtent-ze)+" "+(ve.sourceY-ve.leftSmallArcRadius)+"L"+(ve.leftFullExtent-ze)+" "+ve.verticalLeftInnerExtent+"A"+(ve.leftLargeArcRadius-ze)+" "+(ve.leftLargeArcRadius-ze)+" 0 0 0 "+ve.leftInnerExtent+" "+(ve.verticalFullExtent+ze)+"L"+(ve.rightInnerExtent-ke)+" "+(ve.verticalFullExtent+ze)+"A"+(ve.rightLargeArcRadius-ze)+" "+(ve.rightLargeArcRadius-ze)+" 0 0 0 "+(ve.rightFullExtent+ze-ke)+" "+ve.verticalRightInnerExtent+"L"+(ve.rightFullExtent+ze-ke)+" "+(ve.targetY-ve.rightSmallArcRadius)+"A"+(ve.rightLargeArcRadius-ze)+" "+(ve.rightSmallArcRadius-ze)+" 0 0 0 "+(ve.rightInnerExtent-ke)+" "+(ve.targetY-ze)+"L"+(ve.targetX-ke)+" "+(ve.targetY-ze)+(ke>0?"L"+ve.targetX+" "+ve.targetY:"")+"Z":"M "+(ve.targetX-ke)+" "+(ve.targetY-ze)+" L"+(ve.rightInnerExtent-ke)+" "+(ve.targetY-ze)+"A"+(ve.rightLargeArcRadius+ze)+" "+(ve.rightSmallArcRadius+ze)+" 0 0 0 "+(ve.rightFullExtent-ze-ke)+" "+(ve.targetY+ve.rightSmallArcRadius)+"L"+(ve.rightFullExtent-ze-ke)+" "+ve.verticalRightInnerExtent+"A"+(ve.rightLargeArcRadius+ze)+" "+(ve.rightLargeArcRadius+ze)+" 0 0 0 "+(ve.rightInnerExtent-ke)+" "+(ve.verticalFullExtent+ze)+"L"+ve.leftInnerExtent+" "+(ve.verticalFullExtent+ze)+"A"+(ve.leftLargeArcRadius+ze)+" "+(ve.leftLargeArcRadius+ze)+" 0 0 0 "+(ve.leftFullExtent+ze)+" "+ve.verticalLeftInnerExtent+"L"+(ve.leftFullExtent+ze)+" "+(ve.sourceY+ve.leftSmallArcRadius)+"A"+(ve.leftLargeArcRadius+ze)+" "+(ve.leftSmallArcRadius+ze)+" 0 0 0 "+ve.leftInnerExtent+" "+(ve.sourceY-ze)+"L"+ve.sourceX+" "+(ve.sourceY-ze)+"L"+ve.sourceX+" "+(ve.sourceY+ze)+"L"+ve.leftInnerExtent+" "+(ve.sourceY+ze)+"A"+(ve.leftLargeArcRadius-ze)+" "+(ve.leftSmallArcRadius-ze)+" 0 0 1 "+(ve.leftFullExtent-ze)+" "+(ve.sourceY+ve.leftSmallArcRadius)+"L"+(ve.leftFullExtent-ze)+" "+ve.verticalLeftInnerExtent+"A"+(ve.leftLargeArcRadius-ze)+" "+(ve.leftLargeArcRadius-ze)+" 0 0 1 "+ve.leftInnerExtent+" "+(ve.verticalFullExtent-ze)+"L"+(ve.rightInnerExtent-ke)+" "+(ve.verticalFullExtent-ze)+"A"+(ve.rightLargeArcRadius-ze)+" "+(ve.rightLargeArcRadius-ze)+" 0 0 1 "+(ve.rightFullExtent+ze-ke)+" "+ve.verticalRightInnerExtent+"L"+(ve.rightFullExtent+ze-ke)+" "+(ve.targetY+ve.rightSmallArcRadius)+"A"+(ve.rightLargeArcRadius-ze)+" "+(ve.rightSmallArcRadius-ze)+" 0 0 1 "+(ve.rightInnerExtent-ke)+" "+(ve.targetY+ze)+"L"+(ve.targetX-ke)+" "+(ve.targetY+ze)+(ke>0?"L"+ve.targetX+" "+ve.targetY:"")+"Z"}(U.link,H);var ne=Math.abs((U.link.target.x0-U.link.source.x1)/2);H>ne&&(H=ne);var $=U.link.source.x1,K=U.link.target.x0-H,Q=k($,K),Z=Q(.5),X=Q(.5),te=U.link.y0-U.link.width/2,ae=U.link.y0+U.link.width/2,se=U.link.y1-U.link.width/2,ce=U.link.y1+U.link.width/2,fe="M"+$+","+te,pe="C"+Z+","+te+" "+X+","+se+" "+K+","+se,ge="C"+X+","+ce+" "+Z+","+ae+" "+$+","+ae,me=H>0?"L"+(K+H)+","+(se+U.link.width/2):"";return fe+pe+(me+="L"+K+","+ce)+ge+"Z"}}function S(U,H){var ne=o(H.color),$=f.nodePadAcross,K=U.nodePad/2;H.dx=H.x1-H.x0,H.dy=H.y1-H.y0;var Q=H.dx,Z=Math.max(.5,H.dy),X="node_"+H.pointNumber;return H.group&&(X=n.randstr()),H.trace=U.trace,H.curveNumber=U.trace.index,{index:H.pointNumber,key:X,partOfGroup:H.partOfGroup||!1,group:H.group,traceId:U.key,trace:U.trace,node:H,nodePad:U.nodePad,nodeLineColor:U.nodeLineColor,nodeLineWidth:U.nodeLineWidth,textFont:U.textFont,size:U.horizontal?U.height:U.width,visibleWidth:Math.ceil(Q),visibleHeight:Z,zoneX:-$,zoneY:-K,zoneWidth:Q+2*$,zoneHeight:Z+2*K,labelY:U.horizontal?H.dy/2+1:H.dx/2+1,left:H.originalLayer===1,sizeAcross:U.width,forceLayouts:U.forceLayouts,horizontal:U.horizontal,darkBackground:ne.getBrightness()<=128,tinyColorHue:t.tinyRGB(ne),tinyColorAlpha:ne.getAlpha(),valueFormat:U.valueFormat,valueSuffix:U.valueSuffix,sankey:U.sankey,graph:U.graph,arrangement:U.arrangement,uniqueNodeLabelPathId:[U.guid,U.key,X].join("_"),interactionState:U.interactionState,figure:U}}function w(U){U.attr("transform",function(H){return r(H.node.x0.toFixed(3),H.node.y0.toFixed(3))})}function E(U){U.call(w)}function C(U,H){U.call(E),H.attr("d",d())}function O(U){U.attr("width",function(H){return H.node.x1-H.node.x0}).attr("height",function(H){return H.visibleHeight})}function P(U){return U.link.width>1||U.linkLineWidth>0}function z(U){return r(U.translateX,U.translateY)+(U.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function j(U,H,ne){U.on(".basic",null).on("mouseover.basic",function($){$.interactionState.dragInProgress||$.partOfGroup||(ne.hover(this,$,H),$.interactionState.hovered=[this,$])}).on("mousemove.basic",function($){$.interactionState.dragInProgress||$.partOfGroup||(ne.follow(this,$),$.interactionState.hovered=[this,$])}).on("mouseout.basic",function($){$.interactionState.dragInProgress||$.partOfGroup||(ne.unhover(this,$,H),$.interactionState.hovered=!1)}).on("click.basic",function($){$.interactionState.hovered&&(ne.unhover(this,$,H),$.interactionState.hovered=!1),$.interactionState.dragInProgress||$.partOfGroup||ne.select(this,$,H)})}function I(U,H,ne,$){var K=s.behavior.drag().origin(function(Q){return{x:Q.node.x0+Q.visibleWidth/2,y:Q.node.y0+Q.visibleHeight/2}}).on("dragstart",function(Q){if(Q.arrangement!=="fixed"&&(n.ensureSingle($._fullLayout._infolayer,"g","dragcover",function(X){$._fullLayout._dragCover=X}),n.raiseToTop(this),Q.interactionState.dragInProgress=Q.node,W(Q.node),Q.interactionState.hovered&&(ne.nodeEvents.unhover.apply(0,Q.interactionState.hovered),Q.interactionState.hovered=!1),Q.arrangement==="snap")){var Z=Q.traceId+"|"+Q.key;Q.forceLayouts[Z]?Q.forceLayouts[Z].alpha(1):function(X,te,ae,se){(function(fe){for(var pe=0;pe<fe.length;pe++)fe[pe].y=(fe[pe].y0+fe[pe].y1)/2,fe[pe].x=(fe[pe].x0+fe[pe].x1)/2})(ae.graph.nodes);var ce=ae.graph.nodes.filter(function(fe){return fe.originalX===ae.node.originalX}).filter(function(fe){return!fe.partOfGroup});ae.forceLayouts[te]=M.forceSimulation(ce).alphaDecay(0).force("collide",M.forceCollide().radius(function(fe){return fe.dy/2+ae.nodePad/2}).strength(1).iterations(f.forceIterations)).force("constrain",function(fe,pe,ge,me){return function(){for(var be=0,ke=0;ke<ge.length;ke++){var ze=ge[ke];ze===me.interactionState.dragInProgress?(ze.x=ze.lastDraggedX,ze.y=ze.lastDraggedY):(ze.vx=(ze.originalX-ze.x)/f.forceTicksPerFrame,ze.y=Math.min(me.size-ze.dy/2,Math.max(ze.dy/2,ze.y))),be=Math.max(be,Math.abs(ze.vx),Math.abs(ze.vy))}!me.interactionState.dragInProgress&&be<.1&&me.forceLayouts[pe].alpha()>0&&me.forceLayouts[pe].alpha(0)}}(0,te,ce,ae)).stop()}(0,Z,Q),function(X,te,ae,se,ce){window.requestAnimationFrame(function fe(){var pe;for(pe=0;pe<f.forceTicksPerFrame;pe++)ae.forceLayouts[se].tick();if(function(me){for(var be=0;be<me.length;be++)me[be].y0=me[be].y-me[be].dy/2,me[be].y1=me[be].y0+me[be].dy,me[be].x0=me[be].x-me[be].dx/2,me[be].x1=me[be].x0+me[be].dx}(ae.graph.nodes),ae.sankey.update(ae.graph),C(X.filter(F(ae)),te),ae.forceLayouts[se].alpha()>0)window.requestAnimationFrame(fe);else{var ge=ae.node.originalX;ae.node.x0=ge-ae.visibleWidth/2,ae.node.x1=ge+ae.visibleWidth/2,N(ae,ce)}})}(U,H,Q,Z,$)}}).on("drag",function(Q){if(Q.arrangement!=="fixed"){var Z=s.event.x,X=s.event.y;Q.arrangement==="snap"?(Q.node.x0=Z-Q.visibleWidth/2,Q.node.x1=Z+Q.visibleWidth/2,Q.node.y0=X-Q.visibleHeight/2,Q.node.y1=X+Q.visibleHeight/2):(Q.arrangement==="freeform"&&(Q.node.x0=Z-Q.visibleWidth/2,Q.node.x1=Z+Q.visibleWidth/2),X=Math.max(0,Math.min(Q.size-Q.visibleHeight/2,X)),Q.node.y0=X-Q.visibleHeight/2,Q.node.y1=X+Q.visibleHeight/2),W(Q.node),Q.arrangement!=="snap"&&(Q.sankey.update(Q.graph),C(U.filter(F(Q)),H))}}).on("dragend",function(Q){if(Q.arrangement!=="fixed"){Q.interactionState.dragInProgress=!1;for(var Z=0;Z<Q.node.childrenNodes.length;Z++)Q.node.childrenNodes[Z].x=Q.node.x,Q.node.childrenNodes[Z].y=Q.node.y;Q.arrangement!=="snap"&&N(Q,$)}});U.on(".drag",null).call(K)}function N(U,H){for(var ne=[],$=[],K=0;K<U.graph.nodes.length;K++){var Q=(U.graph.nodes[K].x0+U.graph.nodes[K].x1)/2,Z=(U.graph.nodes[K].y0+U.graph.nodes[K].y1)/2;ne.push(Q/U.figure.width),$.push(Z/U.figure.height)}p.call("_guiRestyle",H,{"node.x":[ne],"node.y":[$]},U.trace.index).then(function(){H._fullLayout._dragCover&&H._fullLayout._dragCover.remove()})}function W(U){U.lastDraggedX=U.x0+U.dx/2,U.lastDraggedY=U.y0+U.dy/2}function F(U){return function(H){return H.node.originalX===U.node.originalX}}ee.exports=function(U,H,ne,$,K){var Q=U._context.staticPlot,Z=!1;n.ensureSingle(U._fullLayout._infolayer,"g","first-render",function(){Z=!0});var X=U._fullLayout._dragCover,te=ne.filter(function(be){return c(be).trace.visible}).map(m.bind(null,$)),ae=H.selectAll("."+f.cn.sankey).data(te,u);ae.exit().remove(),ae.enter().append("g").classed(f.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",Q?"none":"auto").attr("transform",z),ae.each(function(be,ke){U._fullData[ke]._sankey=be;var ze="bgsankey-"+be.trace.uid+"-"+ke;n.ensureSingle(U._fullLayout._draggers,"rect",ze),U._fullData[ke]._bgRect=s.select("."+ze),U._fullData[ke]._bgRect.style("pointer-events",Q?"none":"all").attr("width",be.width).attr("height",be.height).attr("x",be.translateX).attr("y",be.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),ae.transition().ease(f.ease).duration(f.duration).attr("transform",z);var se=ae.selectAll("."+f.cn.sankeyLinks).data(h,u);se.enter().append("g").classed(f.cn.sankeyLinks,!0).style("fill","none");var ce=se.selectAll("."+f.cn.sankeyLink).data(function(be){return be.graph.links.filter(function(ke){return ke.value}).map(_.bind(null,be))},u);ce.enter().append("path").classed(f.cn.sankeyLink,!0).call(j,ae,K.linkEvents),ce.style("stroke",function(be){return P(be)?t.tinyRGB(o(be.linkLineColor)):be.tinyColorHue}).style("stroke-opacity",function(be){return P(be)?t.opacity(be.linkLineColor):be.tinyColorAlpha}).style("fill",function(be){return be.tinyColorHue}).style("fill-opacity",function(be){return be.tinyColorAlpha}).style("stroke-width",function(be){return P(be)?be.linkLineWidth:1}).attr("d",d()),ce.style("opacity",function(){return U._context.staticPlot||Z||X?1:0}).transition().ease(f.ease).duration(f.duration).style("opacity",1),ce.exit().transition().ease(f.ease).duration(f.duration).style("opacity",0).remove();var fe=ae.selectAll("."+f.cn.sankeyNodeSet).data(h,u);fe.enter().append("g").classed(f.cn.sankeyNodeSet,!0),fe.style("cursor",function(be){switch(be.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var pe=fe.selectAll("."+f.cn.sankeyNode).data(function(be){var ke=be.graph.nodes;return function(ze){var ve,oe=[];for(ve=0;ve<ze.length;ve++)ze[ve].originalX=(ze[ve].x0+ze[ve].x1)/2,ze[ve].originalY=(ze[ve].y0+ze[ve].y1)/2,oe.indexOf(ze[ve].originalX)===-1&&oe.push(ze[ve].originalX);for(oe.sort(function(ie,he){return ie-he}),ve=0;ve<ze.length;ve++)ze[ve].originalLayerIndex=oe.indexOf(ze[ve].originalX),ze[ve].originalLayer=ze[ve].originalLayerIndex/(oe.length-1)}(ke),ke.map(S.bind(null,be))},u);pe.enter().append("g").classed(f.cn.sankeyNode,!0).call(w).style("opacity",function(be){return!U._context.staticPlot&&!Z||be.partOfGroup?0:1}),pe.call(j,ae,K.nodeEvents).call(I,ce,K,U),pe.transition().ease(f.ease).duration(f.duration).call(w).style("opacity",function(be){return be.partOfGroup?0:1}),pe.exit().transition().ease(f.ease).duration(f.duration).style("opacity",0).remove();var ge=pe.selectAll("."+f.cn.nodeRect).data(h);ge.enter().append("rect").classed(f.cn.nodeRect,!0).call(O),ge.style("stroke-width",function(be){return be.nodeLineWidth}).style("stroke",function(be){return t.tinyRGB(o(be.nodeLineColor))}).style("stroke-opacity",function(be){return t.opacity(be.nodeLineColor)}).style("fill",function(be){return be.tinyColorHue}).style("fill-opacity",function(be){return be.tinyColorAlpha}),ge.transition().ease(f.ease).duration(f.duration).call(O);var me=pe.selectAll("."+f.cn.nodeLabel).data(h);me.enter().append("text").classed(f.cn.nodeLabel,!0).style("cursor","default"),me.attr("data-notex",1).text(function(be){return be.node.label}).each(function(be){var ke=s.select(this);i.font(ke,be.textFont),x.convertToTspans(ke,U)}).attr("text-anchor",function(be){return be.horizontal&&be.left?"end":"start"}).attr("transform",function(be){var ke=s.select(this),ze=x.lineCount(ke),ve=be.textFont.size*((ze-1)*y-g),oe=be.nodeLineWidth/2+3,ie=((be.horizontal?be.visibleHeight:be.visibleWidth)-ve)/2;be.horizontal&&(be.left?oe=-oe:oe+=be.visibleWidth);var he=be.horizontal?"":"scale(-1,1)"+a(90);return r(be.horizontal?oe:ie,be.horizontal?ie:oe)+he}),me.transition().ease(f.ease).duration(f.duration)}},81128:function(ee){ee.exports=function(R,e){for(var M=[],k=R.cd[0].trace,s=k._sankey.graph.nodes,T=0;T<s.length;T++){var b=s[T];if(!b.partOfGroup){var f=[(b.x0+b.x1)/2,(b.y0+b.y1)/2];k.orientation==="v"&&f.reverse(),e&&e.contains(f,!1,T,R)&&M.push({pointNumber:b.pointNumber})}}return M}},20148:function(ee,R,e){var M=e(3400);ee.exports=function(k,s){for(var T=0;T<k.length;T++)k[T].i=T;M.mergeArray(s.text,k,"tx"),M.mergeArray(s.texttemplate,k,"txt"),M.mergeArray(s.hovertext,k,"htx"),M.mergeArray(s.customdata,k,"data"),M.mergeArray(s.textposition,k,"tp"),s.textfont&&(M.mergeArrayCastPositive(s.textfont.size,k,"ts"),M.mergeArray(s.textfont.color,k,"tc"),M.mergeArray(s.textfont.family,k,"tf"),M.mergeArray(s.textfont.weight,k,"tw"),M.mergeArray(s.textfont.style,k,"ty"),M.mergeArray(s.textfont.variant,k,"tv"),M.mergeArray(s.textfont.textcase,k,"tC"),M.mergeArray(s.textfont.lineposition,k,"tE"),M.mergeArray(s.textfont.shadow,k,"tS"));var b=s.marker;if(b){M.mergeArrayCastPositive(b.size,k,"ms"),M.mergeArrayCastPositive(b.opacity,k,"mo"),M.mergeArray(b.symbol,k,"mx"),M.mergeArray(b.angle,k,"ma"),M.mergeArray(b.standoff,k,"mf"),M.mergeArray(b.color,k,"mc");var f=b.line;b.line&&(M.mergeArray(f.color,k,"mlc"),M.mergeArrayCastPositive(f.width,k,"mlw"));var o=b.gradient;o&&o.type!=="none"&&(M.mergeArray(o.type,k,"mgt"),M.mergeArray(o.color,k,"mgc"))}}},52904:function(ee,R,e){var M=e(29736).axisHoverFormat,k=e(21776).Gw,s=e(21776).Ks,T=e(49084),b=e(25376),f=e(98192).u,o=e(98192).c,t=e(43616),i=e(88200),n=e(92880).extendFlat,r=e(98304);ee.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:M("x"),yhoverformat:M("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:k({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:s({},{keys:i.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:n({},f,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:r(!0),fillgradient:n({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc"},start:{valType:"number",editType:"calc"},stop:{valType:"number",editType:"calc"},colorscale:{valType:"colorscale",editType:"style"},editType:"calc"}),fillpattern:o,marker:n({symbol:{valType:"enumerated",values:t.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:n({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},T("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},T("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:b({editType:"calc",colorEditType:"style",arrayOk:!0}),zorder:{valType:"integer",dflt:0,editType:"plot"}}},16356:function(ee,R,e){var M=e(38248),k=e(3400),s=e(54460),T=e(1220),b=e(39032).BADNUM,f=e(43028),o=e(90136),t=e(20148),i=e(4500);function n(h,c,x,p,v,g,y){var m=c._length,_=h._fullLayout,d=x._id,S=p._id,w=_._firstScatter[l(c)]===c.uid,E=(u(c,_,x,p)||{}).orientation,C=c.fill;x._minDtick=0,p._minDtick=0;var O={padded:!0},P={padded:!0};y&&(O.ppad=P.ppad=y);var z=m<2||v[0]!==v[m-1]||g[0]!==g[m-1];z&&(C==="tozerox"||C==="tonextx"&&(w||E==="h"))?O.tozero=!0:(c.error_y||{}).visible||C!=="tonexty"&&C!=="tozeroy"&&(f.hasMarkers(c)||f.hasText(c))||(O.padded=!1,O.ppad=0),z&&(C==="tozeroy"||C==="tonexty"&&(w||E==="v"))?P.tozero=!0:C!=="tonextx"&&C!=="tozerox"||(P.padded=!1),d&&(c._extremes[d]=s.findExtremes(x,v,O)),S&&(c._extremes[S]=s.findExtremes(p,g,P))}function r(h,c){if(f.hasMarkers(h)){var x,p=h.marker,v=1.6*(h.marker.sizeref||1);if(x=h.marker.sizemode==="area"?function(d){return Math.max(Math.sqrt((d||0)/v),3)}:function(d){return Math.max((d||0)/v,3)},k.isArrayOrTypedArray(p.size)){var g={type:"linear"};s.setConvert(g);for(var y=g.makeCalcdata(h.marker,"size"),m=new Array(c),_=0;_<c;_++)m[_]=x(y[_]);return m}return x(p.size)}}function a(h,c){var x=l(c),p=h._firstScatter;p[x]||(p[x]=c.uid)}function l(h){var c=h.stackgroup;return h.xaxis+h.yaxis+h.type+(c?"-"+c:"")}function u(h,c,x,p){var v=h.stackgroup;if(v){var g=c._scatterStackOpts[x._id+p._id][v],y=g.orientation==="v"?p:x;return y.type==="linear"||y.type==="log"?g:void 0}}ee.exports={calc:function(h,c){var x,p,v,g,y,m,_=h._fullLayout,d=c._xA=s.getFromId(h,c.xaxis||"x","x"),S=c._yA=s.getFromId(h,c.yaxis||"y","y"),w=d.makeCalcdata(c,"x"),E=S.makeCalcdata(c,"y"),C=T(c,d,"x",w),O=T(c,S,"y",E),P=C.vals,z=O.vals,j=c._length,I=new Array(j),N=c.ids,W=u(c,_,d,S),F=!1;a(_,c);var U,H="x",ne="y";W?(k.pushUnique(W.traceIndices,c._expandedIndex),(x=W.orientation==="v")?(ne="s",U="x"):(H="s",U="y"),y=W.stackgaps==="interpolate"):n(h,c,d,S,P,z,r(c,j));var $=!!c.xperiodalignment,K=!!c.yperiodalignment;for(p=0;p<j;p++){var Q=I[p]={},Z=M(P[p]),X=M(z[p]);Z&&X?(Q[H]=P[p],Q[ne]=z[p],$&&(Q.orig_x=w[p],Q.xEnd=C.ends[p],Q.xStart=C.starts[p]),K&&(Q.orig_y=E[p],Q.yEnd=O.ends[p],Q.yStart=O.starts[p])):W&&(x?Z:X)?(Q[U]=x?P[p]:z[p],Q.gap=!0,y?(Q.s=b,F=!0):Q.s=0):Q[H]=Q[ne]=b,N&&(Q.id=String(N[p]))}if(t(I,c),o(h,c),i(I,c),W){for(p=0;p<I.length;)I[p][U]===b?I.splice(p,1):p++;if(k.sort(I,function(ce,fe){return ce[U]-fe[U]||ce.i-fe.i}),F){for(p=0;p<I.length-1&&I[p].gap;)p++;for((m=I[p].s)||(m=I[p].s=0),v=0;v<p;v++)I[v].s=m;for(g=I.length-1;g>p&&I[g].gap;)g--;for(m=I[g].s,v=I.length-1;v>g;v--)I[v].s=m;for(;p<g;)if(I[++p].gap){for(v=p+1;I[v].gap;)v++;for(var te=I[p-1][U],ae=I[p-1].s,se=(I[v].s-ae)/(I[v][U]-te);p<v;)I[p].s=ae+(I[p][U]-te)*se,p++}}}return I},calcMarkerSize:r,calcAxisExpansion:n,setFirstScatter:a,getStackOpts:u}},4500:function(ee,R,e){var M=e(3400);ee.exports=function(k,s){M.isArrayOrTypedArray(s.selectedpoints)&&M.tagSelected(k,s)}},90136:function(ee,R,e){var M=e(94288).hasColorscale,k=e(47128),s=e(43028);ee.exports=function(T,b){s.hasLines(b)&&M(b,"line")&&k(T,b,{vals:b.line.color,containerStr:"line",cLetter:"c"}),s.hasMarkers(b)&&(M(b,"marker")&&k(T,b,{vals:b.marker.color,containerStr:"marker",cLetter:"c"}),M(b,"marker.line")&&k(T,b,{vals:b.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},88200:function(ee){ee.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},96664:function(ee,R,e){var M=e(16356),k=e(96376).setGroupPositions;function s(T,b,f,o,t,i,n){t[o]=!0;var r={i:null,gap:!0,s:0};if(r[n]=f,T.splice(b,0,r),b&&f===T[b-1][n]){var a=T[b-1];r.s=a.s,r.i=a.i,r.gap=a.gap}else i&&(r.s=function(l,u,h,c){var x=l[u-1],p=l[u+1];return p?x?x.s+(p.s-x.s)*(h-x[c])/(p[c]-x[c]):p.s:x.s}(T,b,f,n));b||(T[0].t=T[1].t,T[0].trace=T[1].trace,delete T[1].t,delete T[1].trace)}ee.exports=function(T,b){T._fullLayout.scattermode==="group"&&function(U,H){for(var ne=H.xaxis,$=H.yaxis,K=U._fullLayout,Q=U._fullData,Z=U.calcdata,X=[],te=[],ae=0;ae<Q.length;ae++){var se=Q[ae];se.visible===!0&&se.type==="scatter"&&se.xaxis===ne._id&&se.yaxis===$._id&&(se.orientation==="h"?X.push(Z[ae]):se.orientation==="v"&&te.push(Z[ae]))}var ce={mode:K.scattermode,gap:K.scattergap};k(U,ne,$,te,ce),k(U,$,ne,X,ce)}(T,b);var f=b.xaxis,o=b.yaxis,t=f._id+o._id,i=T._fullLayout._scatterStackOpts[t];if(i){var n,r,a,l,u,h,c,x,p,v,g,y,m,_,d,S=T.calcdata;for(var w in i){var E=(v=i[w]).traceIndices;if(E.length){for(g=v.stackgaps==="interpolate",y=v.groupnorm,v.orientation==="v"?(m="x",_="y"):(m="y",_="x"),d=new Array(E.length),n=0;n<d.length;n++)d[n]=!1;h=S[E[0]];var C=new Array(h.length);for(n=0;n<h.length;n++)C[n]=h[n][m];for(n=1;n<E.length;n++){for(u=S[E[n]],r=a=0;r<u.length;r++){for(c=u[r][m];c>C[a]&&a<C.length;a++)s(u,r,C[a],n,d,g,m),r++;if(c!==C[a]){for(l=0;l<n;l++)s(S[E[l]],a,c,l,d,g,m);C.splice(a,0,c)}a++}for(;a<C.length;a++)s(u,r,C[a],n,d,g,m),r++}var O=C.length;for(r=0;r<h.length;r++){for(x=h[r][_]=h[r].s,n=1;n<E.length;n++)(u=S[E[n]])[0].trace._rawLength=u[0].trace._length,u[0].trace._length=O,x+=u[r].s,u[r][_]=x;if(y)for(p=(y==="fraction"?x:x/100)||1,n=0;n<E.length;n++){var P=S[E[n]][r];P[_]/=p,P.sNorm=P.s/p}}for(n=0;n<E.length;n++){var z=(u=S[E[n]])[0].trace,j=M.calcMarkerSize(z,z._rawLength),I=Array.isArray(j);if(j&&d[n]||I){var N=j;for(j=new Array(O),r=0;r<O;r++)j[r]=u[r].gap?0:I?N[u[r].i]:N}var W=new Array(O),F=new Array(O);for(r=0;r<O;r++)W[r]=u[r].x,F[r]=u[r].y;M.calcAxisExpansion(T,z,f,o,W,F,j),u[0].t.orientation=v.orientation}}}}}},35036:function(ee,R,e){var M=e(3400),k=e(20011),s=e(52904);ee.exports=function(T,b){var f,o,t;function i(u){return M.coerce(o._input,o,s,u)}if(b.scattermode==="group")for(t=0;t<T.length;t++)(o=T[t]).type==="scatter"&&(f=o._input,k(f,o,b,i));for(t=0;t<T.length;t++){var n=T[t];if(n.type==="scatter"){var r=n.fill;if(r!=="none"&&r!=="toself"&&(n.opacity=void 0,r==="tonexty"||r==="tonextx"))for(var a=t-1;a>=0;a--){var l=T[a];if(l.type==="scatter"&&l.xaxis===n.xaxis&&l.yaxis===n.yaxis){l.opacity=void 0;break}}}}}},18800:function(ee,R,e){var M=e(3400),k=e(24040),s=e(52904),T=e(88200),b=e(43028),f=e(43980),o=e(31147),t=e(43912),i=e(74428),n=e(66828),r=e(11731),a=e(124),l=e(70840),u=e(3400).coercePattern;ee.exports=function(h,c,x,p){function v(E,C){return M.coerce(h,c,s,E,C)}var g=f(h,c,p,v);if(g||(c.visible=!1),c.visible){o(h,c,p,v),v("xhoverformat"),v("yhoverformat"),v("zorder");var y=t(h,c,p,v);p.scattermode==="group"&&c.orientation===void 0&&v("orientation","v");var m=!y&&g<T.PTS_LINESONLY?"lines+markers":"lines";v("text"),v("hovertext"),v("mode",m),b.hasMarkers(c)&&i(h,c,x,p,v,{gradient:!0}),b.hasLines(c)&&(n(h,c,x,p,v,{backoff:!0}),r(h,c,v),v("connectgaps"),v("line.simplify")),b.hasText(c)&&(v("texttemplate"),a(h,c,p,v));var _=[];(b.hasMarkers(c)||b.hasText(c))&&(v("cliponaxis"),v("marker.maxdisplayed"),_.push("points")),v("fill",y?y.fillDflt:"none"),c.fill!=="none"&&(l(h,c,x,v,{moduleHasFillgradient:!0}),b.hasLines(c)||r(h,c,v),u(v,"fillpattern",c.fillcolor,!1));var d=(c.line||{}).color,S=(c.marker||{}).color;c.fill!=="tonext"&&c.fill!=="toself"||_.push("fills"),v("hoveron",_.join("+")||"points"),c.hoveron!=="fills"&&v("hovertemplate");var w=k.getComponentMethod("errorbars","supplyDefaults");w(h,c,d||S||x,{axis:"y"}),w(h,c,d||S||x,{axis:"x",inherit:"y"}),M.coerceSelectionMarkerOpacity(c,v)}}},98304:function(ee){ee.exports=function(R){return{valType:"color",editType:"style",anim:!0}}},70840:function(ee,R,e){var M=e(76308),k=e(3400).isArrayOrTypedArray;ee.exports=function(s,T,b,f,o){o||(o={});var t,i=!1;if(T.marker){var n=T.marker.color,r=(T.marker.line||{}).color;n&&!k(n)?i=n:r&&!k(r)&&(i=r)}if(o.moduleHasFillgradient&&f("fillgradient.type")!=="none"){f("fillgradient.start"),f("fillgradient.stop");var a=f("fillgradient.colorscale");a&&(t=function(l){for(var u=M.interpolate(l[0][1],l[1][1],.5),h=2;h<l.length;h++){var c=M.interpolate(l[h-1][1],l[h][1],.5);u=M.interpolate(u,c,l[h-1][0]/l[h][0])}return u}(a))}f("fillcolor",M.addOpacity((T.line||{}).color||i||t||b,.5))}},76688:function(ee,R,e){var M=e(54460);ee.exports=function(k,s,T){var b={},f={_fullLayout:T},o=M.getFromTrace(f,s,"x"),t=M.getFromTrace(f,s,"y"),i=k.orig_x;i===void 0&&(i=k.x);var n=k.orig_y;return n===void 0&&(n=k.y),b.xLabel=M.tickText(o,o.c2l(i),!0).text,b.yLabel=M.tickText(t,t.c2l(n),!0).text,b}},44928:function(ee,R,e){var M=e(76308),k=e(43028);ee.exports=function(s,T){var b,f;if(s.mode==="lines")return(b=s.line.color)&&M.opacity(b)?b:s.fillcolor;if(s.mode==="none")return s.fill?s.fillcolor:"";var o=T.mcc||(s.marker||{}).color,t=T.mlcc||((s.marker||{}).line||{}).color;return(f=o&&M.opacity(o)?o:t&&M.opacity(t)&&(T.mlw||((s.marker||{}).line||{}).width)?t:"")?M.opacity(f)<.3?M.addOpacity(f,.3):f:(b=(s.line||{}).color)&&M.opacity(b)&&k.hasLines(s)&&s.line.width?b:s.fillcolor}},20011:function(ee,R,e){var M=e(71888).getAxisGroup;ee.exports=function(k,s,T,b){var f=s.orientation,o=s[{v:"x",h:"y"}[f]+"axis"],t=M(T,o)+f,i=T._alignmentOpts||{},n=b("alignmentgroup"),r=i[t];r||(r=i[t]={});var a=r[n];a?a.traces.push(s):a=r[n]={traces:[s],alignmentIndex:Object.keys(r).length,offsetGroups:{}};var l=b("offsetgroup"),u=a.offsetGroups,h=u[l];l&&(h||(h=u[l]={offsetIndex:Object.keys(u).length}),s._offsetIndex=h.offsetIndex)}},98723:function(ee,R,e){var M=e(3400),k=e(93024),s=e(24040),T=e(44928),b=e(76308),f=M.fillText;ee.exports=function(o,t,i,n){var r=o.cd,a=r[0].trace,l=o.xa,u=o.ya,h=l.c2p(t),c=u.c2p(i),x=[h,c],p=a.hoveron||"",v=a.mode.indexOf("markers")!==-1?3:.5,g=!!a.xperiodalignment,y=!!a.yperiodalignment;if(p.indexOf("points")!==-1){var m=function(W){var F=Math.max(v,W.mrc||0),U=l.c2p(W.x)-h,H=u.c2p(W.y)-c;return Math.max(Math.sqrt(U*U+H*H)-F,1-v/F)},_=k.getDistanceFunction(n,function(W){if(g){var F=l.c2p(W.xStart),U=l.c2p(W.xEnd);return h>=Math.min(F,U)&&h<=Math.max(F,U)?0:1/0}var H=Math.max(3,W.mrc||0),ne=1-1/H,$=Math.abs(l.c2p(W.x)-h);return $<H?ne*$/H:$-H+ne},function(W){if(y){var F=u.c2p(W.yStart),U=u.c2p(W.yEnd);return c>=Math.min(F,U)&&c<=Math.max(F,U)?0:1/0}var H=Math.max(3,W.mrc||0),ne=1-1/H,$=Math.abs(u.c2p(W.y)-c);return $<H?ne*$/H:$-H+ne},m);if(k.getClosest(r,_,o),o.index!==!1){var d=r[o.index],S=l.c2p(d.x,!0),w=u.c2p(d.y,!0),E=d.mrc||1;o.index=d.i;var C=r[0].t.orientation,O=C&&(d.sNorm||d.s),P=C==="h"?O:d.orig_x!==void 0?d.orig_x:d.x,z=C==="v"?O:d.orig_y!==void 0?d.orig_y:d.y;return M.extendFlat(o,{color:T(a,d),x0:S-E,x1:S+E,xLabelVal:P,y0:w-E,y1:w+E,yLabelVal:z,spikeDistance:m(d),hovertemplate:a.hovertemplate}),f(d,a,o),s.getComponentMethod("errorbars","hoverInfo")(d,a,o),[o]}}function j(W){if(!W)return!1;var F=W.node();try{var U=new DOMPoint(x[0],x[1]);return F.isPointInFill(U)}catch{var H=F.ownerSVGElement.createSVGPoint();return H.x=x[0],H.y=x[1],F.isPointInFill(H)}}if(p.indexOf("fills")!==-1&&a._fillElement&&j(a._fillElement)&&!j(a._fillExclusionElement)){var I=function(W){var F,U,H,ne,$,K,Q,Z,X,te=[],ae=1/0,se=-1/0,ce=1/0,fe=-1/0;for(F=0;F<W.length;F++){var pe=W[F];pe.contains(x)&&(te.push(pe),ce=Math.min(ce,pe.ymin),fe=Math.max(fe,pe.ymax))}if(te.length===0)return null;for(U=((ce=Math.max(ce,0))+(fe=Math.min(fe,u._length)))/2,F=0;F<te.length;F++)for(ne=te[F].pts,H=1;H<ne.length;H++)(Z=ne[H-1][1])>U!=(X=ne[H][1])>=U&&(K=ne[H-1][0],Q=ne[H][0],X-Z&&($=K+(Q-K)*(U-Z)/(X-Z),ae=Math.min(ae,$),se=Math.max(se,$)));return{x0:ae=Math.max(ae,0),x1:se=Math.min(se,l._length),y0:U,y1:U}}(a._polygons);I===null&&(I={x0:x[0],x1:x[0],y0:x[1],y1:x[1]});var N=b.defaultLine;return b.opacity(a.fillcolor)?N=a.fillcolor:b.opacity((a.line||{}).color)&&(N=a.line.color),M.extendFlat(o,{distance:o.maxHoverDistance,x0:I.x0,x1:I.x1,y0:I.y0,y1:I.y1,color:N,hovertemplate:!1}),delete o.index,a.text&&!M.isArrayOrTypedArray(a.text)?o.text=String(a.text):o.text=a.name,[o]}}},65875:function(ee,R,e){var M=e(43028);ee.exports={hasLines:M.hasLines,hasMarkers:M.hasMarkers,hasText:M.hasText,isBubble:M.isBubble,attributes:e(52904),layoutAttributes:e(55308),supplyDefaults:e(18800),crossTraceDefaults:e(35036),supplyLayoutDefaults:e(59748),calc:e(16356).calc,crossTraceCalc:e(96664),arraysToCalcdata:e(20148),plot:e(96504),colorbar:e(5528),formatLabels:e(76688),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(98723),selectPoints:e(91560),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e(57952),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},55308:function(ee){ee.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},59748:function(ee,R,e){var M=e(3400),k=e(55308);ee.exports=function(s,T){var b,f=T.barmode==="group";T.scattermode==="group"&&(b=f?T.bargap:.2,M.coerce(s,T,k,"scattergap",b))}},66828:function(ee,R,e){var M=e(3400).isArrayOrTypedArray,k=e(94288).hasColorscale,s=e(27260);ee.exports=function(T,b,f,o,t,i){i||(i={});var n=(T.marker||{}).color;n&&n._inputArray&&(n=n._inputArray),t("line.color",f),k(T,"line")?s(T,b,o,t,{prefix:"line.",cLetter:"c"}):t("line.color",!M(n)&&n||f),t("line.width"),i.noDash||t("line.dash"),i.backoff&&t("line.backoff")}},52340:function(ee,R,e){var M=e(43616),k=e(39032),s=k.BADNUM,T=k.LOG_CLIP,b=T+.5,f=T-.5,o=e(3400),t=o.segmentsIntersect,i=o.constrain,n=e(88200);ee.exports=function(r,a){var l,u,h,c,x,p,v,g,y,m,_,d,S,w,E,C,O,P,z=a.trace||{},j=a.xaxis,I=a.yaxis,N=j.type==="log",W=I.type==="log",F=j._length,U=I._length,H=a.backoff,ne=z.marker,$=a.connectGaps,K=a.baseTolerance,Q=a.shape,Z=Q==="linear",X=z.fill&&z.fill!=="none",te=[],ae=n.minTolerance,se=r.length,ce=new Array(se),fe=0;function pe(St){var He=r[St];if(!He)return!1;var We=a.linearized?j.l2p(He.x):j.c2p(He.x),Be=a.linearized?I.l2p(He.y):I.c2p(He.y);if(We===s){if(N&&(We=j.c2p(He.x,!0)),We===s)return!1;W&&Be===s&&(We*=Math.abs(j._m*U*(j._m>0?b:f)/(I._m*F*(I._m>0?b:f)))),We*=1e3}if(Be===s){if(W&&(Be=I.c2p(He.y,!0)),Be===s)return!1;Be*=1e3}return[We,Be]}function ge(St,He,We,Be){var Ge=We-St,ot=Be-He,it=.5-St,dt=.5-He,gt=Ge*Ge+ot*ot,je=Ge*it+ot*dt;if(je>0&&je<gt){var Re=it*ot-dt*Ge;if(Re*Re<gt)return!0}}function me(St,He){var We=St[0]/F,Be=St[1]/U,Ge=Math.max(0,-We,We-1,-Be,Be-1);return Ge&&O!==void 0&&ge(We,Be,O,P)&&(Ge=0),Ge&&He&&ge(We,Be,He[0]/F,He[1]/U)&&(Ge=0),(1+n.toleranceGrowth*Ge)*K}function be(St,He){var We=St[0]-He[0],Be=St[1]-He[1];return Math.sqrt(We*We+Be*Be)}var ke,ze,ve,oe,ie,he,Se,ye=n.maxScreensAway,we=-F*ye,Me=F*(1+ye),Oe=-U*ye,Ie=U*(1+ye),de=[[we,Oe,Me,Oe],[Me,Oe,Me,Ie],[Me,Ie,we,Ie],[we,Ie,we,Oe]];function _e(St){if(St[0]<we||St[0]>Me||St[1]<Oe||St[1]>Ie)return[i(St[0],we,Me),i(St[1],Oe,Ie)]}function Ae(St,He){return St[0]===He[0]&&(St[0]===we||St[0]===Me)||St[1]===He[1]&&(St[1]===Oe||St[1]===Ie)||void 0}function Pe(St,He,We){return function(Be,Ge){var ot=_e(Be),it=_e(Ge),dt=[];if(ot&&it&&Ae(ot,it))return dt;ot&&dt.push(ot),it&&dt.push(it);var gt=2*o.constrain((Be[St]+Ge[St])/2,He,We)-((ot||Be)[St]+(it||Ge)[St]);return gt&&((ot&&it?gt>0==ot[St]>it[St]?ot:it:ot||it)[St]+=gt),dt}}function Ee(St){var He=St[0],We=St[1],Be=He===ce[fe-1][0],Ge=We===ce[fe-1][1];if(!Be||!Ge)if(fe>1){var ot=He===ce[fe-2][0],it=We===ce[fe-2][1];Be&&(He===we||He===Me)&&ot?it?fe--:ce[fe-1]=St:Ge&&(We===Oe||We===Ie)&&it?ot?fe--:ce[fe-1]=St:ce[fe++]=St}else ce[fe++]=St}function Fe(St){ce[fe-1][0]!==St[0]&&ce[fe-1][1]!==St[1]&&Ee([ve,oe]),Ee(St),ie=null,ve=oe=0}Q==="linear"||Q==="spline"?Se=function(St,He){for(var We=[],Be=0,Ge=0;Ge<4;Ge++){var ot=de[Ge],it=t(St[0],St[1],He[0],He[1],ot[0],ot[1],ot[2],ot[3]);it&&(!Be||Math.abs(it.x-We[0][0])>1||Math.abs(it.y-We[0][1])>1)&&(it=[it.x,it.y],Be&&be(it,St)<be(We[0],St)?We.unshift(it):We.push(it),Be++)}return We}:Q==="hv"||Q==="vh"?Se=function(St,He){var We=[],Be=_e(St),Ge=_e(He);return Be&&Ge&&Ae(Be,Ge)||(Be&&We.push(Be),Ge&&We.push(Ge)),We}:Q==="hvh"?Se=Pe(0,we,Me):Q==="vhv"&&(Se=Pe(1,Oe,Ie));var Ve=o.isArrayOrTypedArray(ne);function Ye(St){if(St&&H&&(St.i=l,St.d=r,St.trace=z,St.marker=Ve?ne[St.i]:ne,St.backoff=H),O=St[0]/F,P=St[1]/U,ke=St[0]<we?we:St[0]>Me?Me:0,ze=St[1]<Oe?Oe:St[1]>Ie?Ie:0,ke||ze){if(fe)if(ie){var He=Se(ie,St);He.length>1&&(Fe(He[0]),ce[fe++]=He[1])}else he=Se(ce[fe-1],St)[0],ce[fe++]=he;else ce[fe++]=[ke||St[0],ze||St[1]];var We=ce[fe-1];ke&&ze&&(We[0]!==ke||We[1]!==ze)?(ie&&(ve!==ke&&oe!==ze?Ee(ve&&oe?(Be=ie,ot=(Ge=St)[0]-Be[0],it=(Ge[1]-Be[1])/ot,(Be[1]*Ge[0]-Ge[1]*Be[0])/ot>0?[it>0?we:Me,Ie]:[it>0?Me:we,Oe]):[ve||ke,oe||ze]):ve&&oe&&Ee([ve,oe])),Ee([ke,ze])):ve-ke&&oe-ze&&Ee([ke||ve,ze||oe]),ie=St,ve=ke,oe=ze}else ie&&Fe(Se(ie,St)[0]),ce[fe++]=St;var Be,Ge,ot,it}for(l=0;l<se;l++)if(u=pe(l)){for(fe=0,ie=null,Ye(u),l++;l<se;l++){if(!(c=pe(l))){if($)continue;break}if(Z&&a.simplify){var tt=pe(l+1);if(m=be(c,u),X&&(fe===0||fe===se-1)||!(m<me(c,tt)*ae)){for(g=[(c[0]-u[0])/m,(c[1]-u[1])/m],x=u,_=m,d=w=E=0,v=!1,h=c,l++;l<r.length;l++){if(p=tt,tt=pe(l+1),!p){if($)continue;break}if(C=(y=[p[0]-u[0],p[1]-u[1]])[0]*g[1]-y[1]*g[0],w=Math.min(w,C),(E=Math.max(E,C))-w>me(p,tt))break;h=p,(S=y[0]*g[0]+y[1]*g[1])>_?(_=S,c=p,v=!1):S<d&&(d=S,x=p,v=!0)}if(v?(Ye(c),h!==x&&Ye(x)):(x!==u&&Ye(x),h!==c&&Ye(c)),Ye(h),l>=r.length||!p)break;Ye(p),u=p}}else Ye(c)}ie&&Ee([ve||ie[0],oe||ie[1]]),te.push(ce.slice(0,fe))}var nt=Q.slice(Q.length-1);if(H&&nt!=="h"&&nt!=="v"){for(var ht=!1,vt=-1,pt=[],Qe=0;Qe<te.length;Qe++)for(var Ke=0;Ke<te[Qe].length-1;Ke++){var Mt=te[Qe][Ke],Ot=te[Qe][Ke+1],Pt=M.applyBackoff(Ot,Mt);Pt[0]===Ot[0]&&Pt[1]===Ot[1]||(ht=!0),pt[vt+1]||(pt[++vt]=[Mt,[Pt[0],Pt[1]]])}return ht?pt:te}return te}},11731:function(ee){ee.exports=function(R,e,M){M("line.shape")==="spline"&&M("line.smoothing")}},14328:function(ee){var R={tonextx:1,tonexty:1,tonext:1};ee.exports=function(e,M,k){var s,T,b,f,o,t={},i=!1,n=-1,r=0,a=-1;for(T=0;T<k.length;T++)(b=(s=k[T][0].trace).stackgroup||"")?b in t?o=t[b]:(o=t[b]=r,r++):s.fill in R&&a>=0?o=a:(o=a=r,r++),o<n&&(i=!0),s._groupIndex=n=o;var l=k.slice();i&&l.sort(function(h,c){var x=h[0].trace,p=c[0].trace;return x._groupIndex-p._groupIndex||x.index-p.index});var u={};for(T=0;T<l.length;T++)b=(s=l[T][0].trace).stackgroup||"",s.visible===!0?(s._nexttrace=null,s.fill in R&&(f=u[b],s._prevtrace=f||null,f&&(f._nexttrace=s)),s._ownfill=s.fill&&(s.fill.substr(0,6)==="tozero"||s.fill==="toself"||s.fill.substr(0,2)==="to"&&!s._prevtrace),u[b]=s):s._prevtrace=s._nexttrace=s._ownfill=null;return l}},7152:function(ee,R,e){var M=e(38248);ee.exports=function(k,s){s||(s=2);var T=k.marker,b=T.sizeref||1,f=T.sizemin||0,o=T.sizemode==="area"?function(t){return Math.sqrt(t/b)}:function(t){return t/b};return function(t){var i=o(t/s);return M(i)&&i>0?Math.max(i,f):0}}},5528:function(ee){ee.exports={container:"marker",min:"cmin",max:"cmax"}},74428:function(ee,R,e){var M=e(76308),k=e(94288).hasColorscale,s=e(27260),T=e(43028);ee.exports=function(b,f,o,t,i,n){var r=T.isBubble(b),a=(b.line||{}).color;n=n||{},a&&(o=a),i("marker.symbol"),i("marker.opacity",r?.7:1),i("marker.size"),n.noAngle||(i("marker.angle"),n.noAngleRef||i("marker.angleref"),n.noStandOff||i("marker.standoff")),i("marker.color",o),k(b,"marker")&&s(b,f,t,i,{prefix:"marker.",cLetter:"c"}),n.noSelect||(i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size")),n.noLine||(i("marker.line.color",a&&!Array.isArray(a)&&f.marker.color!==a?a:r?M.background:M.defaultLine),k(b,"marker.line")&&s(b,f,t,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width",r?1:0)),r&&(i("marker.sizeref"),i("marker.sizemin"),i("marker.sizemode")),n.gradient&&i("marker.gradient.type")!=="none"&&i("marker.gradient.color")}},31147:function(ee,R,e){var M=e(3400).dateTick0,k=e(39032).ONEWEEK;function s(T,b){return M(b,T%k==0?1:0)}ee.exports=function(T,b,f,o,t){if(t||(t={x:!0,y:!0}),t.x){var i=o("xperiod");i&&(o("xperiod0",s(i,b.xcalendar)),o("xperiodalignment"))}if(t.y){var n=o("yperiod");n&&(o("yperiod0",s(n,b.ycalendar)),o("yperiodalignment"))}}},96504:function(ee,R,e){var M=e(33428),k=e(24040),s=e(3400),T=s.ensureSingle,b=s.identity,f=e(43616),o=e(43028),t=e(52340),i=e(14328),n=e(92065).tester;function r(a,l,u,h,c,x,p){var v,g=a._context.staticPlot;(function(Ee,Fe,Ve,Ye,tt){var nt=Ve.xaxis,ht=Ve.yaxis,vt=M.extent(s.simpleMap(nt.range,nt.r2c)),pt=M.extent(s.simpleMap(ht.range,ht.r2c)),Qe=Ye[0].trace;if(o.hasMarkers(Qe)){var Ke=Qe.marker.maxdisplayed;if(Ke!==0){var Mt=Ye.filter(function(He){return He.x>=vt[0]&&He.x<=vt[1]&&He.y>=pt[0]&&He.y<=pt[1]}),Ot=Math.ceil(Mt.length/Ke),Pt=0;tt.forEach(function(He,We){var Be=He[0].trace;o.hasMarkers(Be)&&Be.marker.maxdisplayed>0&&We<Fe&&Pt++});var St=Math.round(Pt*Ot/3+Math.floor(Pt/3)*Ot/7.1);Ye.forEach(function(He){delete He.vis}),Mt.forEach(function(He,We){Math.round((We+St)%Ot)===0&&(He.vis=!0)})}}})(0,l,u,h,c);var y=!!p&&p.duration>0;function m(Ee){return y?Ee.transition():Ee}var _=u.xaxis,d=u.yaxis,S=h[0].trace,w=S.line,E=M.select(x),C=T(E,"g","errorbars"),O=T(E,"g","lines"),P=T(E,"g","points"),z=T(E,"g","text");if(k.getComponentMethod("errorbars","plot")(a,C,u,p),S.visible===!0){var j,I;m(E).style("opacity",S.opacity);var N,W,F=S.fill.charAt(S.fill.length-1);F!=="x"&&F!=="y"&&(F=""),F==="y"?(N=1,W=d.c2p(0,!0)):F==="x"&&(N=0,W=_.c2p(0,!0)),h[0][u.isRangePlot?"nodeRangePlot3":"node3"]=E;var U,H,ne="",$=[],K=S._prevtrace,Q=null,Z=null;K&&(ne=K._prevRevpath||"",I=K._nextFill,$=K._ownPolygons,Q=K._fillsegments,Z=K._fillElement);var X,te,ae,se,ce,fe,pe="",ge="",me=[];S._polygons=[];var be=[],ke=[],ze=s.noop;if(j=S._ownFill,o.hasLines(S)||S.fill!=="none"){I&&I.datum(h),["hv","vh","hvh","vhv"].indexOf(w.shape)!==-1?(X=f.steps(w.shape),te=f.steps(w.shape.split("").reverse().join(""))):X=te=w.shape==="spline"?function(Ee){var Fe=Ee[Ee.length-1];return Ee.length>1&&Ee[0][0]===Fe[0]&&Ee[0][1]===Fe[1]?f.smoothclosed(Ee.slice(1),w.smoothing):f.smoothopen(Ee,w.smoothing)}:function(Ee){return"M"+Ee.join("L")},ae=function(Ee){return te(Ee.reverse())},ke=t(h,{xaxis:_,yaxis:d,trace:S,connectGaps:S.connectgaps,baseTolerance:Math.max(w.width||1,3)/4,shape:w.shape,backoff:w.backoff,simplify:w.simplify,fill:S.fill}),be=new Array(ke.length);var ve=0;for(v=0;v<ke.length;v++){var oe,ie=ke[v];oe&&F?oe.push.apply(oe,ie):(oe=ie.slice(),be[ve]=oe,ve++)}S._fillElement=null,S._fillExclusionElement=Z,S._fillsegments=be.slice(0,ve),be=S._fillsegments,ke.length&&(se=ke[0][0].slice(),fe=(ce=ke[ke.length-1])[ce.length-1].slice()),ze=function(Ee){return function(Fe){if(U=X(Fe),H=ae(Fe),pe?F?(pe+="L"+U.substr(1),ge=H+"L"+ge.substr(1)):(pe+="Z"+U,ge=H+"Z"+ge):(pe=U,ge=H),o.hasLines(S)){var Ve=M.select(this);if(Ve.datum(h),Ee)m(Ve.style("opacity",0).attr("d",U).call(f.lineGroupStyle)).style("opacity",1);else{var Ye=m(Ve);Ye.attr("d",U),f.singleLineStyle(h,Ye)}}}}}var he=O.selectAll(".js-line").data(ke);m(he.exit()).style("opacity",0).remove(),he.each(ze(!1)),he.enter().append("path").classed("js-line",!0).style("vector-effect",g?"none":"non-scaling-stroke").call(f.lineGroupStyle).each(ze(!0)),f.setClipUrl(he,u.layerClipId,a);var Se=function(){var Ee=new Array(be.length);for(v=0;v<be.length;v++)Ee[v]=n(be[v]);return Ee},ye=function(Ee){var Fe,Ve;if(Ee&&Ee.length!==0){for(Fe=new Array(Ee.length-1+be.length),Ve=0;Ve<Ee.length-1;Ve++)Fe[Ve]=n(Ee[Ve]);var Ye=Ee[Ee.length-1].slice();for(Ye.reverse(),Ve=0;Ve<be.length;Ve++)Fe[Ee.length-1+Ve]=n(be[Ve].concat(Ye))}else for(Fe=new Array(be.length),Ve=0;Ve<be.length;Ve++){var tt=be[Ve][0].slice(),nt=be[Ve][be[Ve].length-1].slice();tt[N]=nt[N]=W;var ht=[nt,tt].concat(be[Ve]);Fe[Ve]=n(ht)}return Fe};ke.length?(j?(j.datum(h),se&&fe&&(F?(se[N]=fe[N]=W,m(j).attr("d","M"+fe+"L"+se+"L"+pe.substr(1)).call(f.singleFillStyle,a),me=ye(null)):(m(j).attr("d",pe+"Z").call(f.singleFillStyle,a),me=Se())),S._polygons=me,S._fillElement=j):I&&(S.fill.substr(0,6)==="tonext"&&pe&&ne?(S.fill==="tonext"?(m(I).attr("d",pe+"Z"+ne+"Z").call(f.singleFillStyle,a),me=Se(),S._polygons=me.concat($)):(m(I).attr("d",pe+"L"+ne.substr(1)+"Z").call(f.singleFillStyle,a),me=ye(Q),S._polygons=me),S._fillElement=I):Me(I)),S._prevRevpath=ge):(j?Me(j):I&&Me(I),S._prevRevpath=null),S._ownPolygons=me,P.datum(h),z.datum(h),function(Ee,Fe,Ve){var Ye,tt=Ve[0].trace,nt=o.hasMarkers(tt),ht=o.hasText(tt),vt=Ae(tt),pt=Pe,Qe=Pe;if(nt||ht){var Ke=b,Mt=tt.stackgroup,Ot=Mt&&a._fullLayout._scatterStackOpts[_._id+d._id][Mt].stackgaps==="infer zero";tt.marker.maxdisplayed||tt._needsCull?Ke=Ot?Ie:Oe:Mt&&!Ot&&(Ke=de),nt&&(pt=Ke),ht&&(Qe=Ke)}var Pt,St=(Ye=Ee.selectAll("path.point").data(pt,vt)).enter().append("path").classed("point",!0);y&&St.call(f.pointStyle,tt,a).call(f.translatePoints,_,d).style("opacity",0).transition().style("opacity",1),Ye.order(),nt&&(Pt=f.makePointStyleFns(tt)),Ye.each(function(He){var We=M.select(this),Be=m(We);f.translatePoint(He,Be,_,d)?(f.singlePointStyle(He,Be,tt,Pt,a),u.layerClipId&&f.hideOutsideRangePoint(He,Be,_,d,tt.xcalendar,tt.ycalendar),tt.customdata&&We.classed("plotly-customdata",He.data!==null&&He.data!==void 0)):Be.remove()}),y?Ye.exit().transition().style("opacity",0).remove():Ye.exit().remove(),(Ye=Fe.selectAll("g").data(Qe,vt)).enter().append("g").classed("textpoint",!0).append("text"),Ye.order(),Ye.each(function(He){var We=M.select(this),Be=m(We.select("text"));f.translatePoint(He,Be,_,d)?u.layerClipId&&f.hideOutsideRangePoint(He,We,_,d,tt.xcalendar,tt.ycalendar):We.remove()}),Ye.selectAll("text").call(f.textPointStyle,tt,a).each(function(He){var We=_.c2p(He.x),Be=d.c2p(He.y);M.select(this).selectAll("tspan.line").each(function(){m(M.select(this)).attr({x:We,y:Be})})}),Ye.exit().remove()}(P,z,h);var we=S.cliponaxis===!1?null:u.layerClipId;f.setClipUrl(P,we,a),f.setClipUrl(z,we,a)}function Me(Ee){m(Ee).attr("d","M0,0Z")}function Oe(Ee){return Ee.filter(function(Fe){return!Fe.gap&&Fe.vis})}function Ie(Ee){return Ee.filter(function(Fe){return Fe.vis})}function de(Ee){return Ee.filter(function(Fe){return!Fe.gap})}function _e(Ee){return Ee.id}function Ae(Ee){if(Ee.ids)return _e}function Pe(){return!1}}ee.exports=function(a,l,u,h,c,x){var p,v,g=!c,y=!!c&&c.duration>0,m=i(a,l,u);(p=h.selectAll("g.trace").data(m,function(_){return _[0].trace.uid})).enter().append("g").attr("class",function(_){return"trace scatter trace"+_[0].trace.uid}).style("stroke-miterlimit",2),p.order(),function(_,d,S){d.each(function(w){var E=T(M.select(this),"g","fills");f.setClipUrl(E,S.layerClipId,_);var C=w[0].trace,O=[];C._ownfill&&O.push("_ownFill"),C._nexttrace&&O.push("_nextFill");var P=E.selectAll("g").data(O,b);P.enter().append("g"),P.exit().each(function(z){C[z]=null}).remove(),P.order().each(function(z){C[z]=T(M.select(this),"path","js-fill")})})}(a,p,l),y?(x&&(v=x()),M.transition().duration(c.duration).ease(c.easing).each("end",function(){v&&v()}).each("interrupt",function(){v&&v()}).each(function(){h.selectAll("g.trace").each(function(_,d){r(a,d,l,_,m,this,c)})})):p.each(function(_,d){r(a,d,l,_,m,this,c)}),g&&p.exit().remove(),h.selectAll("path:not([d])").remove()}},91560:function(ee,R,e){var M=e(43028);ee.exports=function(k,s){var T,b,f,o,t=k.cd,i=k.xaxis,n=k.yaxis,r=[],a=t[0].trace;if(!M.hasMarkers(a)&&!M.hasText(a))return[];if(s===!1)for(T=0;T<t.length;T++)t[T].selected=0;else for(T=0;T<t.length;T++)b=t[T],f=i.c2p(b.x),o=n.c2p(b.y),b.i!==null&&s.contains([f,o],!1,T,k)?(r.push({pointNumber:b.i,x:i.c2d(b.x),y:n.c2d(b.y)}),b.selected=1):b.selected=0;return r}},43912:function(ee){var R=["orientation","groupnorm","stackgaps"];ee.exports=function(e,M,k,s){var T=k._scatterStackOpts,b=s("stackgroup");if(b){var f=M.xaxis+M.yaxis,o=T[f];o||(o=T[f]={});var t=o[b],i=!1;t?t.traces.push(M):(t=o[b]={traceIndices:[],traces:[M]},i=!0);for(var n={orientation:M.x&&!M.y?"h":"v"},r=0;r<R.length;r++){var a=R[r],l=a+"Found";if(!t[l]){var u=e[a]!==void 0,h=a==="orientation";if((u||i)&&(t[a]=s(a,n[a]),h&&(t.fillDflt=t[a]==="h"?"tonextx":"tonexty"),u&&(t[l]=!0,!i&&(delete t.traces[0][a],h))))for(var c=0;c<t.traces.length-1;c++){var x=t.traces[c];x._input.fill!==x.fill&&(x.fill=t.fillDflt)}}}return t}}},49224:function(ee,R,e){var M=e(33428),k=e(43616),s=e(24040);function T(f,o,t){k.pointStyle(f.selectAll("path.point"),o,t)}function b(f,o,t){k.textPointStyle(f.selectAll("text"),o,t)}ee.exports={style:function(f){var o=M.select(f).selectAll("g.trace.scatter");o.style("opacity",function(t){return t[0].trace.opacity}),o.selectAll("g.points").each(function(t){T(M.select(this),t.trace||t[0].trace,f)}),o.selectAll("g.text").each(function(t){b(M.select(this),t.trace||t[0].trace,f)}),o.selectAll("g.trace path.js-line").call(k.lineGroupStyle),o.selectAll("g.trace path.js-fill").call(k.fillGroupStyle,f,!1),s.getComponentMethod("errorbars","style")(o)},stylePoints:T,styleText:b,styleOnSelect:function(f,o,t){var i=o[0].trace;i.selectedpoints?(k.selectedPointStyle(t.selectAll("path.point"),i),k.selectedTextStyle(t.selectAll("text"),i)):(T(t,i,f),b(t,i,f))}}},43028:function(ee,R,e){var M=e(3400),k=e(38116).isTypedArraySpec;ee.exports={hasLines:function(s){return s.visible&&s.mode&&s.mode.indexOf("lines")!==-1},hasMarkers:function(s){return s.visible&&(s.mode&&s.mode.indexOf("markers")!==-1||s.type==="splom")},hasText:function(s){return s.visible&&s.mode&&s.mode.indexOf("text")!==-1},isBubble:function(s){var T=s.marker;return M.isPlainObject(T)&&(M.isArrayOrTypedArray(T.size)||k(T.size))}}},124:function(ee,R,e){var M=e(3400);ee.exports=function(k,s,T,b,f){f=f||{},b("textposition"),M.coerceFont(b,"textfont",f.font||T.font,f),f.noSelect||(b("selected.textfont.color"),b("unselected.textfont.color"))}},43980:function(ee,R,e){var M=e(3400),k=e(24040);ee.exports=function(s,T,b,f){var o,t=f("x"),i=f("y");if(k.getComponentMethod("calendars","handleTraceDefaults")(s,T,["x","y"],b),t){var n=M.minRowLength(t);i?o=Math.min(n,M.minRowLength(i)):(o=n,f("y0"),f("dy"))}else{if(!i)return 0;o=M.minRowLength(i),f("x0"),f("dx")}return T._length=o,o}},91592:function(ee,R,e){var M=e(52904),k=e(25376),s=e(49084),T=e(29736).axisHoverFormat,b=e(21776).Ks,f=e(21776).Gw,o=e(45464),t=e(99168),i=e(87792),n=e(92880).extendFlat,r=e(67824).overrideAll,a=e(95376),l=M.line,u=M.marker,h=u.line,c=n({width:l.width,dash:{valType:"enumerated",values:a(t),dflt:"solid"}},s("line")),x=ee.exports=r({x:M.x,y:M.y,z:{valType:"data_array"},text:n({},M.text,{}),texttemplate:f({},{}),hovertext:n({},M.hovertext,{}),hovertemplate:b(),xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z"),mode:n({},M.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:M.connectgaps,line:c,marker:n({symbol:{valType:"enumerated",values:a(i),dflt:"circle",arrayOk:!0},size:n({},u.size,{dflt:8}),sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode,opacity:n({},u.opacity,{arrayOk:!1}),colorbar:u.colorbar,line:n({width:n({},h.width,{arrayOk:!1})},s("marker.line"))},s("marker")),textposition:n({},M.textposition,{dflt:"top center"}),textfont:k({noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,editType:"calc",colorEditType:"style",arrayOk:!0,variantValues:["normal","small-caps"]}),opacity:o.opacity,hoverinfo:n({},o.hoverinfo)},"calc","nested");x.x.editType=x.y.editType=x.z.editType="calc+clearAxisTypes"},41484:function(ee,R,e){var M=e(20148),k=e(90136);ee.exports=function(s,T){var b=[{x:!1,y:!1,trace:T,t:{}}];return M(b,T),k(s,T),b}},45156:function(ee,R,e){var M=e(24040);function k(s,T,b,f){if(!T||!T.visible)return null;for(var o=M.getComponentMethod("errorbars","makeComputeError")(T),t=new Array(s.length),i=0;i<s.length;i++){var n=o(+s[i],i);if(f.type==="log"){var r=f.c2l(s[i]),a=s[i]-n[0],l=s[i]+n[1];if(t[i]=[(f.c2l(a,!0)-r)*b,(f.c2l(l,!0)-r)*b],a>0){var u=f.c2l(a);f._lowerLogErrorBound||(f._lowerLogErrorBound=u),f._lowerErrorBound=Math.min(f._lowerLogErrorBound,u)}}else t[i]=[-n[0]*b,n[1]*b]}return t}ee.exports=function(s,T,b){var f=[k(s.x,s.error_x,T[0],b.xaxis),k(s.y,s.error_y,T[1],b.yaxis),k(s.z,s.error_z,T[2],b.zaxis)],o=function(l){for(var u=0;u<l.length;u++)if(l[u])return l[u].length;return 0}(f);if(o===0)return null;for(var t=new Array(o),i=0;i<o;i++){for(var n=[[0,0,0],[0,0,0]],r=0;r<3;r++)if(f[r])for(var a=0;a<2;a++)n[a][r]=f[r][i][a];t[i]=n}return t}},41064:function(ee,R,e){var M=e(67792).gl_line3d,k=e(67792).gl_scatter3d,s=e(67792).gl_error3d,T=e(67792).gl_mesh3d,b=e(67792).delaunay_triangulate,f=e(3400),o=e(43080),t=e(33040).formatColor,i=e(7152),n=e(99168),r=e(87792),a=e(54460),l=e(10624).appendArrayPointValue,u=e(45156);function h(d,S){this.scene=d,this.uid=S,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var c=h.prototype;function x(d){return d==null?0:d.indexOf("left")>-1?-1:d.indexOf("right")>-1?1:0}function p(d){return d==null?0:d.indexOf("top")>-1?-1:d.indexOf("bottom")>-1?1:0}function v(d,S){return S(4*d)}function g(d){return r[d]}function y(d,S,w,E,C){var O=null;if(f.isArrayOrTypedArray(d)){O=[];for(var P=0;P<S;P++)d[P]===void 0?O[P]=E:O[P]=w(d[P],C)}else O=w(d,f.identity);return O}function m(d){if(f.isArrayOrTypedArray(d)){var S=d[0];return f.isArrayOrTypedArray(S)&&(d=S),"rgb("+d.slice(0,3).map(function(w){return Math.round(255*w)})+")"}return null}function _(d){return f.isArrayOrTypedArray(d)?d.length===4&&typeof d[0]=="number"?m(d):d.map(m):null}c.handlePick=function(d){if(d.object&&(d.object===this.linePlot||d.object===this.delaunayMesh||d.object===this.textMarkers||d.object===this.scatterPlot)){var S=d.index=d.data.index;return d.object.highlight&&d.object.highlight(null),this.scatterPlot&&(d.object=this.scatterPlot,this.scatterPlot.highlight(d.data)),d.textLabel="",this.textLabels&&(f.isArrayOrTypedArray(this.textLabels)?(this.textLabels[S]||this.textLabels[S]===0)&&(d.textLabel=this.textLabels[S]):d.textLabel=this.textLabels),d.traceCoordinate=[this.data.x[S],this.data.y[S],this.data.z[S]],!0}},c.update=function(d){var S,w,E,C,O=this.scene.glplot.gl,P=n.solid;this.data=d;var z=function(N,W){var F,U,H,ne,$,K,Q=[],Z=N.fullSceneLayout,X=N.dataScale,te=Z.xaxis,ae=Z.yaxis,se=Z.zaxis,ce=W.marker,fe=W.line,pe=W.x||[],ge=W.y||[],me=W.z||[],be=pe.length,ke=W.xcalendar,ze=W.ycalendar,ve=W.zcalendar;for($=0;$<be;$++)F=te.d2l(pe[$],0,ke)*X[0],U=ae.d2l(ge[$],0,ze)*X[1],H=se.d2l(me[$],0,ve)*X[2],Q[$]=[F,U,H];if(Array.isArray(W.text))K=W.text;else if(f.isTypedArray(W.text))K=Array.from(W.text);else if(W.text!==void 0)for(K=new Array(be),$=0;$<be;$++)K[$]=W.text;function oe(Fe,Ve){var Ye=Z[Fe];return a.tickText(Ye,Ye.d2l(Ve),!0).text}var ie=W.texttemplate;if(ie){var he=N.fullLayout._d3locale,Se=Array.isArray(ie),ye=Se?Math.min(ie.length,be):be,we=Se?function(Fe){return ie[Fe]}:function(){return ie};for(K=new Array(ye),$=0;$<ye;$++){var Me={x:pe[$],y:ge[$],z:me[$]},Oe={xLabel:oe("xaxis",pe[$]),yLabel:oe("yaxis",ge[$]),zLabel:oe("zaxis",me[$])},Ie={};l(Ie,W,$);var de=W._meta||{};K[$]=f.texttemplateString(we($),Oe,he,Ie,Me,de)}}if(ne={position:Q,mode:W.mode,text:K},"line"in W&&(ne.lineColor=t(fe,1,be),ne.lineWidth=fe.width,ne.lineDashes=fe.dash),"marker"in W){var _e=i(W);ne.scatterColor=t(ce,1,be),ne.scatterSize=y(ce.size,be,v,20,_e),ne.scatterMarker=y(ce.symbol,be,g,""),ne.scatterLineWidth=ce.line.width,ne.scatterLineColor=t(ce.line,1,be),ne.scatterAngle=0}"textposition"in W&&(ne.textOffset=function(Fe){var Ve=[0,0];if(Array.isArray(Fe))for(var Ye=0;Ye<Fe.length;Ye++)Ve[Ye]=[0,0],Fe[Ye]&&(Ve[Ye][0]=x(Fe[Ye]),Ve[Ye][1]=p(Fe[Ye]));else Ve[0]=x(Fe),Ve[1]=p(Fe);return Ve}(W.textposition),ne.textColor=t(W.textfont,1,be),ne.textSize=y(W.textfont.size,be,f.identity,12),ne.textFontFamily=W.textfont.family,ne.textFontWeight=W.textfont.weight,ne.textFontStyle=W.textfont.style,ne.textFontVariant=W.textfont.variant,ne.textAngle=0);var Ae=["x","y","z"];for(ne.project=[!1,!1,!1],ne.projectScale=[1,1,1],ne.projectOpacity=[1,1,1],$=0;$<3;++$){var Pe=W.projection[Ae[$]];(ne.project[$]=Pe.show)&&(ne.projectOpacity[$]=Pe.opacity,ne.projectScale[$]=Pe.scale)}ne.errorBounds=u(W,X,Z);var Ee=function(Fe){for(var Ve=[0,0,0],Ye=[[0,0,0],[0,0,0],[0,0,0]],tt=[1,1,1],nt=0;nt<3;nt++){var ht=Fe[nt];ht&&ht.copy_zstyle!==!1&&Fe[2].visible!==!1&&(ht=Fe[2]),ht&&ht.visible&&(Ve[nt]=ht.width/2,Ye[nt]=o(ht.color),tt[nt]=ht.thickness)}return{capSize:Ve,color:Ye,lineWidth:tt}}([W.error_x,W.error_y,W.error_z]);return ne.errorColor=Ee.color,ne.errorLineWidth=Ee.lineWidth,ne.errorCapSize=Ee.capSize,ne.delaunayAxis=W.surfaceaxis,ne.delaunayColor=o(W.surfacecolor),ne}(this.scene,d);"mode"in z&&(this.mode=z.mode),"lineDashes"in z&&z.lineDashes in n&&(P=n[z.lineDashes]),this.color=_(z.scatterColor)||_(z.lineColor),this.dataPoints=z.position,S={gl:this.scene.glplot.gl,position:z.position,color:z.lineColor,lineWidth:z.lineWidth||1,dashes:P[0],dashScale:P[1],opacity:d.opacity,connectGaps:d.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(S):(this.linePlot=M(S),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var j=d.opacity;if(d.marker&&d.marker.opacity!==void 0&&(j*=d.marker.opacity),w={gl:this.scene.glplot.gl,position:z.position,color:z.scatterColor,size:z.scatterSize,glyph:z.scatterMarker,opacity:j,orthographic:!0,lineWidth:z.scatterLineWidth,lineColor:z.scatterLineColor,project:z.project,projectScale:z.projectScale,projectOpacity:z.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(w):(this.scatterPlot=k(w),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),C={gl:this.scene.glplot.gl,position:z.position,glyph:z.text,color:z.textColor,size:z.textSize,angle:z.textAngle,alignment:z.textOffset,font:z.textFontFamily,fontWeight:z.textFontWeight,fontStyle:z.textFontStyle,fontVariant:z.textFontVariant,orthographic:!0,lineWidth:0,project:!1,opacity:d.opacity},this.textLabels=d.hovertext||d.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(C):(this.textMarkers=k(C),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),E={gl:this.scene.glplot.gl,position:z.position,color:z.errorColor,error:z.errorBounds,lineWidth:z.errorLineWidth,capSize:z.errorCapSize,opacity:d.opacity},this.errorBars?z.errorBounds?this.errorBars.update(E):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):z.errorBounds&&(this.errorBars=s(E),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),z.delaunayAxis>=0){var I=function(N,W,F){var U,H=(F+1)%3,ne=(F+2)%3,$=[],K=[];for(U=0;U<N.length;++U){var Q=N[U];!isNaN(Q[H])&&isFinite(Q[H])&&!isNaN(Q[ne])&&isFinite(Q[ne])&&($.push([Q[H],Q[ne]]),K.push(U))}var Z=b($);for(U=0;U<Z.length;++U)for(var X=Z[U],te=0;te<X.length;++te)X[te]=K[X[te]];return{positions:N,cells:Z,meshColor:W}}(z.position,z.delaunayColor,z.delaunayAxis);I.opacity=d.opacity,this.delaunayMesh?this.delaunayMesh.update(I):(I.gl=O,this.delaunayMesh=T(I),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},c.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},ee.exports=function(d,S){var w=new h(d,S.uid);return w.update(S),w}},83484:function(ee,R,e){var M=e(24040),k=e(3400),s=e(43028),T=e(74428),b=e(66828),f=e(124),o=e(91592);ee.exports=function(t,i,n,r){function a(g,y){return k.coerce(t,i,o,g,y)}var l=function(g,y,m,_){var d=0,S=m("x"),w=m("y"),E=m("z");return M.getComponentMethod("calendars","handleTraceDefaults")(g,y,["x","y","z"],_),S&&w&&E&&(d=Math.min(S.length,w.length,E.length),y._length=y._xlength=y._ylength=y._zlength=d),d}(t,i,a,r);if(l){a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),a("mode"),s.hasMarkers(i)&&T(t,i,n,r,a,{noSelect:!0,noAngle:!0}),s.hasLines(i)&&(a("connectgaps"),b(t,i,n,r,a)),s.hasText(i)&&(a("texttemplate"),f(t,i,r,a,{noSelect:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}));var u=(i.line||{}).color,h=(i.marker||{}).color;a("surfaceaxis")>=0&&a("surfacecolor",u||h);for(var c=["x","y","z"],x=0;x<3;++x){var p="projection."+c[x];a(p+".show")&&(a(p+".opacity"),a(p+".scale"))}var v=M.getComponentMethod("errorbars","supplyDefaults");v(t,i,u||h||n,{axis:"z"}),v(t,i,u||h||n,{axis:"y",inherit:"z"}),v(t,i,u||h||n,{axis:"x",inherit:"z"})}else i.visible=!1}},3296:function(ee,R,e){ee.exports={plot:e(41064),attributes:e(91592),markerSymbols:e(87792),supplyDefaults:e(83484),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:e(41484),moduleType:"trace",name:"scatter3d",basePlotModule:e(12536),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},90372:function(ee,R,e){var M=e(98304),k=e(52904),s=e(45464),T=e(21776).Ks,b=e(21776).Gw,f=e(49084),o=e(92880).extendFlat,t=k.marker,i=k.line,n=t.line;ee.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:o({},k.mode,{dflt:"markers"}),text:o({},k.text,{}),texttemplate:b({editType:"plot"},{keys:["a","b","text"]}),hovertext:o({},k.hovertext,{}),line:{color:i.color,width:i.width,dash:i.dash,backoff:i.backoff,shape:o({},i.shape,{values:["linear","spline"]}),smoothing:i.smoothing,editType:"calc"},connectgaps:k.connectgaps,fill:o({},k.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:M(),marker:o({symbol:t.symbol,opacity:t.opacity,maxdisplayed:t.maxdisplayed,angle:t.angle,angleref:t.angleref,standoff:t.standoff,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,line:o({width:n.width,editType:"calc"},f("marker.line")),gradient:t.gradient,editType:"calc"},f("marker")),textfont:k.textfont,textposition:k.textposition,selected:k.selected,unselected:k.unselected,hoverinfo:o({},s.hoverinfo,{flags:["a","b","text","name"]}),hoveron:k.hoveron,hovertemplate:T(),zorder:k.zorder}},48228:function(ee,R,e){var M=e(38248),k=e(90136),s=e(20148),T=e(4500),b=e(16356).calcMarkerSize,f=e(50948);ee.exports=function(o,t){var i=t._carpetTrace=f(o,t);if(i&&i.visible&&i.visible!=="legendonly"){var n;t.xaxis=i.xaxis,t.yaxis=i.yaxis;var r,a,l=t._length,u=new Array(l),h=!1;for(n=0;n<l;n++)if(r=t.a[n],a=t.b[n],M(r)&&M(a)){var c=i.ab2xy(+r,+a,!0),x=i.isVisible(+r,+a);x||(h=!0),u[n]={x:c[0],y:c[1],a:r,b:a,vis:x}}else u[n]={x:!1,y:!1};return t._needsCull=h,u[0].carpet=i,u[0].trace=t,b(t,l),k(o,t),s(u,t),T(u,t),u}}},6176:function(ee,R,e){var M=e(3400),k=e(88200),s=e(43028),T=e(74428),b=e(66828),f=e(11731),o=e(124),t=e(70840),i=e(90372);ee.exports=function(n,r,a,l){function u(v,g){return M.coerce(n,r,i,v,g)}u("carpet"),r.xaxis="x",r.yaxis="y";var h=u("a"),c=u("b"),x=Math.min(h.length,c.length);if(x){r._length=x,u("text"),u("texttemplate"),u("hovertext"),u("mode",x<k.PTS_LINESONLY?"lines+markers":"lines"),s.hasMarkers(r)&&T(n,r,a,l,u,{gradient:!0}),s.hasLines(r)&&(b(n,r,a,l,u,{backoff:!0}),f(n,r,u),u("connectgaps")),s.hasText(r)&&o(n,r,l,u);var p=[];(s.hasMarkers(r)||s.hasText(r))&&(u("marker.maxdisplayed"),p.push("points")),u("fill"),r.fill!=="none"&&(t(n,r,a,u),s.hasLines(r)||f(n,r,u)),r.fill!=="tonext"&&r.fill!=="toself"||p.push("fills"),u("hoveron",p.join("+")||"points")!=="fills"&&u("hovertemplate"),u("zorder"),M.coerceSelectionMarkerOpacity(r,u)}else r.visible=!1}},89307:function(ee){ee.exports=function(R,e,M,k,s){var T=k[s];return R.a=T.a,R.b=T.b,R.y=T.y,R}},52364:function(ee){ee.exports=function(R,e){var M={},k=e._carpet,s=k.ab2ij([R.a,R.b]),T=Math.floor(s[0]),b=s[0]-T,f=Math.floor(s[1]),o=s[1]-f,t=k.evalxy([],T,f,b,o);return M.yLabel=t[1].toFixed(3),M}},58960:function(ee,R,e){var M=e(98723),k=e(3400).fillText;ee.exports=function(s,T,b,f){var o=M(s,T,b,f);if(o&&o[0].index!==!1){var t=o[0];if(t.index===void 0){var i=1-t.y0/s.ya._length,n=s.xa._length,r=n*i/2,a=n-r;return t.x0=Math.max(Math.min(t.x0,a),r),t.x1=Math.max(Math.min(t.x1,a),r),o}var l=t.cd[t.index];t.a=l.a,t.b=l.b,t.xLabelVal=void 0,t.yLabelVal=void 0;var u=t.trace,h=u._carpet,c=u._module.formatLabels(l,u);t.yLabel=c.yLabel,delete t.text;var x=[];if(!u.hovertemplate){var p=(l.hi||u.hoverinfo).split("+");p.indexOf("all")!==-1&&(p=["a","b","text"]),p.indexOf("a")!==-1&&v(h.aaxis,l.a),p.indexOf("b")!==-1&&v(h.baxis,l.b),x.push("y: "+t.yLabel),p.indexOf("text")!==-1&&k(l,u,x),t.extraText=x.join("<br>")}return o}function v(g,y){var m;m=g.labelprefix&&g.labelprefix.length>0?g.labelprefix.replace(/ = $/,""):g._hovertitle,x.push(m+": "+y.toFixed(3)+g.labelsuffix)}}},4184:function(ee,R,e){ee.exports={attributes:e(90372),supplyDefaults:e(6176),colorbar:e(5528),formatLabels:e(52364),calc:e(48228),plot:e(20036),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(58960),selectPoints:e(91560),eventData:e(89307),moduleType:"trace",name:"scattercarpet",basePlotModule:e(57952),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},20036:function(ee,R,e){var M=e(96504),k=e(54460),s=e(43616);ee.exports=function(T,b,f,o){var t,i,n,r=f[0][0].carpet,a=k.getFromId(T,r.xaxis||"x"),l=k.getFromId(T,r.yaxis||"y"),u={xaxis:a,yaxis:l,plot:b.plot};for(t=0;t<f.length;t++)(i=f[t][0].trace)._xA=a,i._yA=l;for(M(T,u,f,o),t=0;t<f.length;t++)i=f[t][0].trace,n=o.selectAll("g.trace"+i.uid+" .js-line"),s.setClipUrl(n,f[t][0].carpet._clipPathId,T)}},6096:function(ee,R,e){var M=e(21776).Ks,k=e(21776).Gw,s=e(98304),T=e(52904),b=e(45464),f=e(49084),o=e(98192).u,t=e(92880).extendFlat,i=e(67824).overrideAll,n=T.marker,r=T.line,a=n.line;ee.exports=i({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:t({},T.mode,{dflt:"markers"}),text:t({},T.text,{}),texttemplate:k({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:t({},T.hovertext,{}),textfont:T.textfont,textposition:T.textposition,line:{color:r.color,width:r.width,dash:o},connectgaps:T.connectgaps,marker:t({symbol:n.symbol,opacity:n.opacity,angle:n.angle,angleref:t({},n.angleref,{values:["previous","up","north"]}),standoff:n.standoff,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,colorbar:n.colorbar,line:t({width:a.width},f("marker.line")),gradient:n.gradient},f("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:s(),selected:T.selected,unselected:T.unselected,hoverinfo:t({},b.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:M()},"calc","nested")},25212:function(ee,R,e){var M=e(38248),k=e(39032).BADNUM,s=e(90136),T=e(20148),b=e(4500),f=e(3400).isArrayOrTypedArray,o=e(3400)._;function t(i){return i&&typeof i=="string"}ee.exports=function(i,n){var r,a=f(n.locations),l=a?n.locations.length:n._length,u=new Array(l);r=n.geojson?function(g){return t(g)||M(g)}:t;for(var h=0;h<l;h++){var c=u[h]={};if(a){var x=n.locations[h];c.loc=r(x)?x:null}else{var p=n.lon[h],v=n.lat[h];M(p)&&M(v)?c.lonlat=[+p,+v]:c.lonlat=[k,k]}}return T(u,n),s(i,n),b(u,n),l&&(u[0].t={labels:{lat:o(i,"lat:")+" ",lon:o(i,"lon:")+" "}}),u}},86188:function(ee,R,e){var M=e(3400),k=e(43028),s=e(74428),T=e(66828),b=e(124),f=e(70840),o=e(6096);ee.exports=function(t,i,n,r){function a(v,g){return M.coerce(t,i,o,v,g)}var l,u=a("locations");if(u&&u.length){var h,c=a("geojson");(typeof c=="string"&&c!==""||M.isPlainObject(c))&&(h="geojson-id"),a("locationmode",h)==="geojson-id"&&a("featureidkey"),l=u.length}else{var x=a("lon")||[],p=a("lat")||[];l=Math.min(x.length,p.length)}l?(i._length=l,a("text"),a("hovertext"),a("hovertemplate"),a("mode"),k.hasMarkers(i)&&s(t,i,n,r,a,{gradient:!0}),k.hasLines(i)&&(T(t,i,n,r,a),a("connectgaps")),k.hasText(i)&&(a("texttemplate"),b(t,i,r,a)),a("fill"),i.fill!=="none"&&f(t,i,n,a),M.coerceSelectionMarkerOpacity(i,a)):i.visible=!1}},58544:function(ee){ee.exports=function(R,e,M,k,s){R.lon=e.lon,R.lat=e.lat,R.location=e.loc?e.loc:null;var T=k[s];return T.fIn&&T.fIn.properties&&(R.properties=T.fIn.properties),R}},56696:function(ee,R,e){var M=e(54460);ee.exports=function(k,s,T){var b={},f=T[s.geo]._subplot.mockAxis,o=k.lonlat;return b.lonLabel=M.tickText(f,f.c2l(o[0]),!0).text,b.latLabel=M.tickText(f,f.c2l(o[1]),!0).text,b}},64292:function(ee,R,e){var M=e(93024),k=e(39032).BADNUM,s=e(44928),T=e(3400).fillText,b=e(6096);ee.exports=function(f,o,t){var i=f.cd,n=i[0].trace,r=f.xa,a=f.ya,l=f.subplot,u=l.projection.isLonLatOverEdges,h=l.project;if(M.getClosest(i,function(m){var _=m.lonlat;if(_[0]===k||u(_))return 1/0;var d=h(_),S=h([o,t]),w=Math.abs(d[0]-S[0]),E=Math.abs(d[1]-S[1]),C=Math.max(3,m.mrc||0);return Math.max(Math.sqrt(w*w+E*E)-C,1-3/C)},f),f.index!==!1){var c=i[f.index],x=c.lonlat,p=[r.c2p(x),a.c2p(x)],v=c.mrc||1;f.x0=p[0]-v,f.x1=p[0]+v,f.y0=p[1]-v,f.y1=p[1]+v,f.loc=c.loc,f.lon=x[0],f.lat=x[1];var g={};g[n.geo]={_subplot:l};var y=n._module.formatLabels(c,n,g);return f.lonLabel=y.lonLabel,f.latLabel=y.latLabel,f.color=s(n,c),f.extraText=function(m,_,d,S){if(!m.hovertemplate){var w=_.hi||m.hoverinfo,E=w==="all"?b.hoverinfo.flags:w.split("+"),C=E.indexOf("location")!==-1&&Array.isArray(m.locations),O=E.indexOf("lon")!==-1,P=E.indexOf("lat")!==-1,z=E.indexOf("text")!==-1,j=[];return C?j.push(_.loc):O&&P?j.push("("+I(d.latLabel)+", "+I(d.lonLabel)+")"):O?j.push(S.lon+I(d.lonLabel)):P&&j.push(S.lat+I(d.latLabel)),z&&T(_,m,j),j.join("<br>")}function I(N){return N+""}}(n,c,f,i[0].t.labels),f.hovertemplate=n.hovertemplate,[f]}}},36952:function(ee,R,e){ee.exports={attributes:e(6096),supplyDefaults:e(86188),colorbar:e(5528),formatLabels:e(56696),calc:e(25212),calcGeoJSON:e(48691).calcGeoJSON,plot:e(48691).plot,style:e(25064),styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(64292),eventData:e(58544),selectPoints:e(8796),moduleType:"trace",name:"scattergeo",basePlotModule:e(10816),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},48691:function(ee,R,e){var M=e(33428),k=e(3400),s=e(59972).getTopojsonFeatures,T=e(44808),b=e(27144),f=e(19280).findExtremes,o=e(39032).BADNUM,t=e(16356).calcMarkerSize,i=e(43028),n=e(25064);ee.exports={calcGeoJSON:function(r,a){var l,u,h=r[0].trace,c=a[h.geo],x=c._subplot,p=h._length;if(k.isArrayOrTypedArray(h.locations)){var v=h.locationmode,g=v==="geojson-id"?b.extractTraceFeature(r):s(h,x.topojson);for(l=0;l<p;l++){u=r[l];var y=v==="geojson-id"?u.fOut:b.locationToFeature(v,u.loc,g);u.lonlat=y?y.properties.ct:[o,o]}}var m,_,d={padded:!0};if(c.fitbounds==="geojson"&&h.locationmode==="geojson-id"){var S=b.computeBbox(b.getTraceGeojson(h));m=[S[0],S[2]],_=[S[1],S[3]]}else{for(m=new Array(p),_=new Array(p),l=0;l<p;l++)u=r[l],m[l]=u.lonlat[0],_[l]=u.lonlat[1];d.ppad=t(h,p)}h._extremes.lon=f(c.lonaxis._ax,m,d),h._extremes.lat=f(c.lataxis._ax,_,d)},plot:function(r,a,l){var u=a.layers.frontplot.select(".scatterlayer"),h=k.makeTraceGroups(u,l,"trace scattergeo");function c(x,p){x.lonlat[0]===o&&M.select(p).remove()}h.selectAll("*").remove(),h.each(function(x){var p=M.select(this),v=x[0].trace;if(i.hasLines(v)||v.fill!=="none"){var g=T.calcTraceToLineCoords(x),y=v.fill!=="none"?T.makePolygon(g):T.makeLine(g);p.selectAll("path.js-line").data([{geojson:y,trace:v}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}i.hasMarkers(v)&&p.selectAll("path.point").data(k.identity).enter().append("path").classed("point",!0).each(function(m){c(m,this)}),i.hasText(v)&&p.selectAll("g").data(k.identity).enter().append("g").append("text").each(function(m){c(m,this)}),n(r,x)})}}},8796:function(ee,R,e){var M=e(43028),k=e(39032).BADNUM;ee.exports=function(s,T){var b,f,o,t,i,n=s.cd,r=s.xaxis,a=s.yaxis,l=[],u=n[0].trace;if(!M.hasMarkers(u)&&!M.hasText(u))return[];if(T===!1)for(i=0;i<n.length;i++)n[i].selected=0;else for(i=0;i<n.length;i++)(f=(b=n[i]).lonlat)[0]!==k&&(o=r.c2p(f),t=a.c2p(f),T.contains([o,t],null,i,s)?(l.push({pointNumber:i,lon:f[0],lat:f[1]}),b.selected=1):b.selected=0);return l}},25064:function(ee,R,e){var M=e(33428),k=e(43616),s=e(76308),T=e(49224),b=T.stylePoints,f=T.styleText;ee.exports=function(o,t){t&&function(i,n){var r=n[0].trace,a=n[0].node3;a.style("opacity",n[0].trace.opacity),b(a,r,i),f(a,r,i),a.selectAll("path.js-line").style("fill","none").each(function(l){var u=M.select(this),h=l.trace,c=h.line||{};u.call(s.stroke,c.color).call(k.dashLine,c.dash||"",c.width||0),h.fill!=="none"&&u.call(s.fill,h.fillcolor)})}(o,t)}},2876:function(ee,R,e){var M=e(45464),k=e(25376),s=e(98304),T=e(52904),b=e(29736).axisHoverFormat,f=e(49084),o=e(95376),t=e(92880).extendFlat,i=e(67824).overrideAll,n=e(67072).DASHES,r=T.line,a=T.marker,l=a.line,u=ee.exports=i({x:T.x,x0:T.x0,dx:T.dx,y:T.y,y0:T.y0,dy:T.dy,xperiod:T.xperiod,yperiod:T.yperiod,xperiod0:T.xperiod0,yperiod0:T.yperiod0,xperiodalignment:T.xperiodalignment,yperiodalignment:T.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),text:T.text,hovertext:T.hovertext,textposition:T.textposition,textfont:k({noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,editType:"calc",colorEditType:"style",arrayOk:!0,noNumericWeightValues:!0,variantValues:["normal","small-caps"]}),mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:r.color,width:r.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:o(n),dflt:"solid"}},marker:t({},f("marker"),{symbol:a.symbol,angle:a.angle,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,opacity:a.opacity,colorbar:a.colorbar,line:t({},f("marker.line"),{width:l.width})}),connectgaps:T.connectgaps,fill:t({},T.fill,{dflt:"none"}),fillcolor:s(),selected:{marker:T.selected.marker,textfont:T.selected.textfont},unselected:{marker:T.unselected.marker,textfont:T.unselected.textfont},opacity:M.opacity},"calc","nested");u.x.editType=u.y.editType=u.x0.editType=u.y0.editType="calc+clearAxisTypes",u.hovertemplate=T.hovertemplate,u.texttemplate=T.texttemplate},64628:function(ee,R,e){var M=e(41272);ee.exports={moduleType:"trace",name:"scattergl",basePlotModule:e(57952),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:e(2876),supplyDefaults:e(80220),crossTraceDefaults:e(35036),colorbar:e(5528),formatLabels:e(99396),calc:e(24856),hoverPoints:M.hoverPoints,selectPoints:e(73224),meta:{}}},24856:function(ee,R,e){var M=e(3108),k=e(3400),s=e(79811),T=e(19280).findExtremes,b=e(1220),f=e(16356),o=f.calcMarkerSize,t=f.calcAxisExpansion,i=f.setFirstScatter,n=e(90136),r=e(84236),a=e(74588),l=e(39032).BADNUM,u=e(67072).TOO_MANY_POINTS;function h(c,x,p){var v=c._extremes[x._id],g=T(x,p._bnds,{padded:!0});v.min=v.min.concat(g.min),v.max=v.max.concat(g.max)}ee.exports=function(c,x){var p,v=c._fullLayout,g=x._xA=s.getFromId(c,x.xaxis,"x"),y=x._yA=s.getFromId(c,x.yaxis,"y"),m=v._plots[x.xaxis+x.yaxis],_=x._length,d=_>=u,S=2*_,w={},E=g.makeCalcdata(x,"x"),C=y.makeCalcdata(x,"y"),O=b(x,g,"x",E),P=b(x,y,"y",C),z=O.vals,j=P.vals;x._x=z,x._y=j,x.xperiodalignment&&(x._origX=E,x._xStarts=O.starts,x._xEnds=O.ends),x.yperiodalignment&&(x._origY=C,x._yStarts=P.starts,x._yEnds=P.ends);var I=new Array(S),N=new Array(_);for(p=0;p<_;p++)I[2*p]=z[p]===l?NaN:z[p],I[2*p+1]=j[p]===l?NaN:j[p],N[p]=p;if(g.type==="log")for(p=0;p<S;p+=2)I[p]=g.c2l(I[p]);if(y.type==="log")for(p=1;p<S;p+=2)I[p]=y.c2l(I[p]);d&&g.type!=="log"&&y.type!=="log"?w.tree=M(I):w.ids=N,n(c,x);var W,F=function(H,ne,$,K,Q,Z){var X=r.style(H,$);if(X.marker&&(X.marker.positions=K),X.line&&K.length>1&&k.extendFlat(X.line,r.linePositions(H,$,K)),X.errorX||X.errorY){var te=r.errorBarPositions(H,$,K,Q,Z);X.errorX&&k.extendFlat(X.errorX,te.x),X.errorY&&k.extendFlat(X.errorY,te.y)}return X.text&&(k.extendFlat(X.text,{positions:K},r.textPosition(H,$,X.text,X.marker)),k.extendFlat(X.textSel,{positions:K},r.textPosition(H,$,X.text,X.markerSel)),k.extendFlat(X.textUnsel,{positions:K},r.textPosition(H,$,X.text,X.markerUnsel))),X}(c,0,x,I,z,j),U=a(c,m);return i(v,x),d?F.marker&&(W=F.marker.sizeAvg||Math.max(F.marker.size,3)):W=o(x,_),t(c,x,g,y,z,j,W),F.errorX&&h(x,g,F.errorX),F.errorY&&h(x,y,F.errorY),F.fill&&!U.fill2d&&(U.fill2d=!0),F.marker&&!U.scatter2d&&(U.scatter2d=!0),F.line&&!U.line2d&&(U.line2d=!0),!F.errorX&&!F.errorY||U.error2d||(U.error2d=!0),F.text&&!U.glText&&(U.glText=!0),F.marker&&(F.marker.snap=_),U.lineOptions.push(F.line),U.errorXOptions.push(F.errorX),U.errorYOptions.push(F.errorY),U.fillOptions.push(F.fill),U.markerOptions.push(F.marker),U.markerSelectedOptions.push(F.markerSel),U.markerUnselectedOptions.push(F.markerUnsel),U.textOptions.push(F.text),U.textSelectedOptions.push(F.textSel),U.textUnselectedOptions.push(F.textUnsel),U.selectBatch.push([]),U.unselectBatch.push([]),w._scene=U,w.index=U.count,w.x=z,w.y=j,w.positions=I,U.count++,[{x:!1,y:!1,t:w,trace:x}]}},67072:function(ee){ee.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},84236:function(ee,R,e){var M=e(38248),k=e(20472),s=e(72160),T=e(24040),b=e(3400),f=b.isArrayOrTypedArray,o=e(43616),t=e(79811),i=e(33040).formatColor,n=e(43028),r=e(7152),a=e(80088),l=e(67072),u=e(13448).DESELECTDIM,h={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},c=e(10624).appendArrayPointValue;function x(O,P){var z,j=O._fullLayout,I=P._length,N=P.textfont,W=P.textposition,F=f(W)?W:[W],U=N.color,H=N.size,ne=N.family,$=N.weight,K=N.style,Q=N.variant,Z={},X=O._context.plotGlPixelRatio,te=P.texttemplate;if(te){Z.text=[];var ae=j._d3locale,se=Array.isArray(te),ce=se?Math.min(te.length,I):I,fe=se?function(ve){return te[ve]}:function(){return te};for(z=0;z<ce;z++){var pe={i:z},ge=P._module.formatLabels(pe,P,j),me={};c(me,P,z);var be=P._meta||{};Z.text.push(b.texttemplateString(fe(z),ge,ae,me,pe,be))}}else f(P.text)&&P.text.length<I?Z.text=P.text.slice():Z.text=P.text;if(f(Z.text))for(z=Z.text.length;z<I;z++)Z.text[z]="";for(Z.opacity=P.opacity,Z.font={},Z.align=[],Z.baseline=[],z=0;z<F.length;z++){var ke=F[z].split(/\s+/);switch(ke[1]){case"left":Z.align.push("right");break;case"right":Z.align.push("left");break;default:Z.align.push(ke[1])}switch(ke[0]){case"top":Z.baseline.push("bottom");break;case"bottom":Z.baseline.push("top");break;default:Z.baseline.push(ke[0])}}if(f(U))for(Z.color=new Array(I),z=0;z<I;z++)Z.color[z]=U[z];else Z.color=U;if(f(H)||Array.isArray(ne)||f($)||Array.isArray(K)||Array.isArray(Q))for(Z.font=new Array(I),z=0;z<I;z++){var ze=Z.font[z]={};ze.size=(b.isTypedArray(H)?H[z]:f(H)?M(H[z])?H[z]:0:H)*X,ze.family=Array.isArray(ne)?ne[z]:ne,ze.weight=p(f($)?$[z]:$),ze.style=Array.isArray(K)?K[z]:K,ze.variant=Array.isArray(Q)?Q[z]:Q}else Z.font={size:H*X,family:ne,weight:p($),style:K,variant:Q};return Z}function p(O){return O<=1e3?O>500?"bold":"normal":O}function v(O,P){var z,j,I=P._length,N=P.marker,W={},F=f(N.symbol),U=f(N.angle),H=f(N.color),ne=f(N.line.color),$=f(N.opacity),K=f(N.size),Q=f(N.line.width);if(F||(j=a.isOpenSymbol(N.symbol)),F||H||ne||$||U){W.symbols=new Array(I),W.angles=new Array(I),W.colors=new Array(I),W.borderColors=new Array(I);var Z=N.symbol,X=N.angle,te=i(N,N.opacity,I),ae=i(N.line,N.opacity,I);if(!f(ae[0])){var se=ae;for(ae=Array(I),z=0;z<I;z++)ae[z]=se}if(!f(te[0])){var ce=te;for(te=Array(I),z=0;z<I;z++)te[z]=ce}if(!f(Z)){var fe=Z;for(Z=Array(I),z=0;z<I;z++)Z[z]=fe}if(!f(X)){var pe=X;for(X=Array(I),z=0;z<I;z++)X[z]=pe}for(W.symbols=Z,W.angles=X,W.colors=te,W.borderColors=ae,z=0;z<I;z++)F&&(j=a.isOpenSymbol(N.symbol[z])),j&&(ae[z]=te[z].slice(),te[z]=te[z].slice(),te[z][3]=0);for(W.opacity=P.opacity,W.markers=new Array(I),z=0;z<I;z++)W.markers[z]=C({mx:W.symbols[z],ma:W.angles[z]},P)}else j?(W.color=s(N.color,"uint8"),W.color[3]=0,W.borderColor=s(N.color,"uint8")):(W.color=s(N.color,"uint8"),W.borderColor=s(N.line.color,"uint8")),W.opacity=P.opacity*N.opacity,W.marker=C({mx:N.symbol,ma:N.angle},P);var ge,me=r(P,1);if(K||Q){var be,ke=W.sizes=new Array(I),ze=W.borderSizes=new Array(I),ve=0;if(K){for(z=0;z<I;z++)ke[z]=me(N.size[z]),ve+=ke[z];be=ve/I}else for(ge=me(N.size),z=0;z<I;z++)ke[z]=ge;if(Q)for(z=0;z<I;z++)ze[z]=N.line.width[z];else for(ge=N.line.width,z=0;z<I;z++)ze[z]=ge;W.sizeAvg=be}else W.size=me(N&&N.size||10),W.borderSizes=me(N.line.width);return W}function g(O,P,z){var j=P.marker,I={};return z&&(z.marker&&z.marker.symbol?I=v(0,b.extendFlat({},j,z.marker)):z.marker&&(z.marker.size&&(I.size=z.marker.size),z.marker.color&&(I.colors=z.marker.color),z.marker.opacity!==void 0&&(I.opacity=z.marker.opacity))),I}function y(O,P,z){var j={};if(!z)return j;if(z.textfont){var I={opacity:1,text:P.text,texttemplate:P.texttemplate,textposition:P.textposition,textfont:b.extendFlat({},P.textfont)};z.textfont&&b.extendFlat(I.textfont,z.textfont),j=x(O,I)}return j}function m(O,P,z){var j={capSize:2*P.width*z,lineWidth:P.thickness*z,color:P.color};return P.copy_ystyle&&(j=O.error_y),j}var _=l.SYMBOL_SDF_SIZE,d=l.SYMBOL_SIZE,S=l.SYMBOL_STROKE,w={},E=o.symbolFuncs[0](.05*d);function C(O,P){var z,j,I=O.mx;if(I==="circle")return null;var N=o.symbolNumber(I),W=o.symbolFuncs[N%100],F=!!o.symbolNoDot[N%100],U=!!o.symbolNoFill[N%100],H=a.isDotSymbol(I);if(O.ma&&(I+="_"+O.ma),w[I])return w[I];var ne=o.getMarkerAngle(O,P);return z=H&&!F?W(1.1*d,ne)+E:W(d,ne),j=k(z,{w:_,h:_,viewBox:[-d,-d,d,d],stroke:U?S:-S}),w[I]=j,j||null}ee.exports={style:function(O,P){var z,j={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},I=O._context.plotGlPixelRatio;if(P.visible!==!0)return j;if(n.hasText(P)&&(j.text=x(O,P),j.textSel=y(O,P,P.selected),j.textUnsel=y(O,P,P.unselected)),n.hasMarkers(P)&&(j.marker=v(0,P),j.markerSel=g(0,P,P.selected),j.markerUnsel=g(0,P,P.unselected),!P.unselected&&f(P.marker.opacity))){var N=P.marker.opacity;for(j.markerUnsel.opacity=new Array(N.length),z=0;z<N.length;z++)j.markerUnsel.opacity[z]=u*N[z]}if(n.hasLines(P)){j.line={overlay:!0,thickness:P.line.width*I,color:P.line.color,opacity:P.opacity};var W=(l.DASHES[P.line.dash]||[1]).slice();for(z=0;z<W.length;++z)W[z]*=P.line.width*I;j.line.dashes=W}return P.error_x&&P.error_x.visible&&(j.errorX=m(P,P.error_x,I)),P.error_y&&P.error_y.visible&&(j.errorY=m(P,P.error_y,I)),P.fill&&P.fill!=="none"&&(j.fill={closed:!0,fill:P.fillcolor,thickness:0}),j},markerStyle:v,markerSelection:g,linePositions:function(O,P,z){var j,I,N=z.length,W=N/2;if(n.hasLines(P)&&W)if(P.line.shape==="hv"){for(j=[],I=0;I<W-1;I++)isNaN(z[2*I])||isNaN(z[2*I+1])?j.push(NaN,NaN,NaN,NaN):(j.push(z[2*I],z[2*I+1]),isNaN(z[2*I+2])||isNaN(z[2*I+3])?j.push(NaN,NaN):j.push(z[2*I+2],z[2*I+1]));j.push(z[N-2],z[N-1])}else if(P.line.shape==="hvh"){for(j=[],I=0;I<W-1;I++)if(isNaN(z[2*I])||isNaN(z[2*I+1])||isNaN(z[2*I+2])||isNaN(z[2*I+3]))isNaN(z[2*I])||isNaN(z[2*I+1])?j.push(NaN,NaN):j.push(z[2*I],z[2*I+1]),j.push(NaN,NaN);else{var F=(z[2*I]+z[2*I+2])/2;j.push(z[2*I],z[2*I+1],F,z[2*I+1],F,z[2*I+3])}j.push(z[N-2],z[N-1])}else if(P.line.shape==="vhv"){for(j=[],I=0;I<W-1;I++)if(isNaN(z[2*I])||isNaN(z[2*I+1])||isNaN(z[2*I+2])||isNaN(z[2*I+3]))isNaN(z[2*I])||isNaN(z[2*I+1])?j.push(NaN,NaN):j.push(z[2*I],z[2*I+1]),j.push(NaN,NaN);else{var U=(z[2*I+1]+z[2*I+3])/2;j.push(z[2*I],z[2*I+1],z[2*I],U,z[2*I+2],U)}j.push(z[N-2],z[N-1])}else if(P.line.shape==="vh"){for(j=[],I=0;I<W-1;I++)isNaN(z[2*I])||isNaN(z[2*I+1])?j.push(NaN,NaN,NaN,NaN):(j.push(z[2*I],z[2*I+1]),isNaN(z[2*I+2])||isNaN(z[2*I+3])?j.push(NaN,NaN):j.push(z[2*I],z[2*I+3]));j.push(z[N-2],z[N-1])}else j=z;var H=!1;for(I=0;I<j.length;I++)if(isNaN(j[I])){H=!0;break}var ne=H||j.length>l.TOO_MANY_POINTS||n.hasMarkers(P)?"rect":"round";if(H&&P.connectgaps){var $=j[0],K=j[1];for(I=0;I<j.length;I+=2)isNaN(j[I])||isNaN(j[I+1])?(j[I]=$,j[I+1]=K):($=j[I],K=j[I+1])}return{join:ne,positions:j}},errorBarPositions:function(O,P,z,j,I){var N=T.getComponentMethod("errorbars","makeComputeError"),W=t.getFromId(O,P.xaxis,"x"),F=t.getFromId(O,P.yaxis,"y"),U=z.length/2,H={};function ne($,K){var Q=K._id.charAt(0),Z=P["error_"+Q];if(Z&&Z.visible&&(K.type==="linear"||K.type==="log")){for(var X=N(Z),te={x:0,y:1}[Q],ae={x:[0,1,2,3],y:[2,3,0,1]}[Q],se=new Float64Array(4*U),ce=1/0,fe=-1/0,pe=0,ge=0;pe<U;pe++,ge+=4){var me=$[pe];if(M(me)){var be=z[2*pe+te],ke=X(me,pe),ze=ke[0],ve=ke[1];if(M(ze)&&M(ve)){var oe=me-ze,ie=me+ve;se[ge+ae[0]]=be-K.c2l(oe),se[ge+ae[1]]=K.c2l(ie)-be,se[ge+ae[2]]=0,se[ge+ae[3]]=0,ce=Math.min(ce,me-ze),fe=Math.max(fe,me+ve)}}}H[Q]={positions:z,errors:se,_bnds:[ce,fe]}}}return ne(j,W),ne(I,F),H},textPosition:function(O,P,z,j){var I,N=P._length,W={};if(n.hasMarkers(P)){var F=z.font,U=z.align,H=z.baseline;for(W.offset=new Array(N),I=0;I<N;I++){var ne=j.sizes?j.sizes[I]:j.size,$=f(F)?F[I].size:F.size,K=f(U)?U.length>1?U[I]:U[0]:U,Q=f(H)?H.length>1?H[I]:H[0]:H,Z=h[K],X=h[Q],te=ne?ne/.8+1:0,ae=-X*te-.5*X;W.offset[I]=[Z*te/$,ae/$]}}return W}}},80220:function(ee,R,e){var M=e(3400),k=e(24040),s=e(80088),T=e(2876),b=e(88200),f=e(43028),o=e(43980),t=e(31147),i=e(74428),n=e(66828),r=e(70840),a=e(124);ee.exports=function(l,u,h,c){function x(S,w){return M.coerce(l,u,T,S,w)}var p=!!l.marker&&s.isOpenSymbol(l.marker.symbol),v=f.isBubble(l),g=o(l,u,c,x);if(g){t(l,u,c,x),x("xhoverformat"),x("yhoverformat");var y=g<b.PTS_LINESONLY?"lines+markers":"lines";x("text"),x("hovertext"),x("hovertemplate"),x("mode",y),f.hasMarkers(u)&&(i(l,u,h,c,x,{noAngleRef:!0,noStandOff:!0}),x("marker.line.width",p||v?1:0)),f.hasLines(u)&&(x("connectgaps"),n(l,u,h,c,x),x("line.shape")),f.hasText(u)&&(x("texttemplate"),a(l,u,c,x,{noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}));var m=(u.line||{}).color,_=(u.marker||{}).color;x("fill"),u.fill!=="none"&&r(l,u,h,x);var d=k.getComponentMethod("errorbars","supplyDefaults");d(l,u,m||_||h,{axis:"y"}),d(l,u,m||_||h,{axis:"x",inherit:"y"}),M.coerceSelectionMarkerOpacity(u,x)}else u.visible=!1}},26768:function(ee,R,e){var M=e(3400),k=e(76308),s=e(13448).DESELECTDIM;ee.exports={styleTextSelection:function(T){var b,f,o=T[0],t=o.trace,i=o.t,n=i._scene,r=i.index,a=n.selectBatch[r],l=n.unselectBatch[r],u=n.textOptions[r],h=n.textSelectedOptions[r]||{},c=n.textUnselectedOptions[r]||{},x=M.extendFlat({},u);if(a.length||l.length){var p=h.color,v=c.color,g=u.color,y=M.isArrayOrTypedArray(g);for(x.color=new Array(t._length),b=0;b<a.length;b++)f=a[b],x.color[f]=p||(y?g[f]:g);for(b=0;b<l.length;b++){f=l[b];var m=y?g[f]:g;x.color[f]=v||(p?m:k.addOpacity(m,s))}}n.glText[r].update(x)}}},99396:function(ee,R,e){var M=e(76688);ee.exports=function(k,s,T){var b=k.i;return"x"in k||(k.x=s._x[b]),"y"in k||(k.y=s._y[b]),M(k,s,T)}},80088:function(ee,R,e){var M=e(67072);R.isOpenSymbol=function(k){return typeof k=="string"?M.OPEN_RE.test(k):k%200>100},R.isDotSymbol=function(k){return typeof k=="string"?M.DOT_RE.test(k):k>200}},41272:function(ee,R,e){var M=e(24040),k=e(3400),s=e(44928);function T(b,f,o,t){var i=b.xa,n=b.ya,r=b.distance,a=b.dxy,l=b.index,u={pointNumber:l,x:f[l],y:o[l]};u.tx=k.isArrayOrTypedArray(t.text)?t.text[l]:t.text,u.htx=Array.isArray(t.hovertext)?t.hovertext[l]:t.hovertext,u.data=Array.isArray(t.customdata)?t.customdata[l]:t.customdata,u.tp=Array.isArray(t.textposition)?t.textposition[l]:t.textposition;var h=t.textfont;h&&(u.ts=k.isArrayOrTypedArray(h.size)?h.size[l]:h.size,u.tc=k.isArrayOrTypedArray(h.color)?h.color[l]:h.color,u.tf=Array.isArray(h.family)?h.family[l]:h.family,u.tw=Array.isArray(h.weight)?h.weight[l]:h.weight,u.ty=Array.isArray(h.style)?h.style[l]:h.style,u.tv=Array.isArray(h.variant)?h.variant[l]:h.variant);var c=t.marker;c&&(u.ms=k.isArrayOrTypedArray(c.size)?c.size[l]:c.size,u.mo=k.isArrayOrTypedArray(c.opacity)?c.opacity[l]:c.opacity,u.mx=k.isArrayOrTypedArray(c.symbol)?c.symbol[l]:c.symbol,u.ma=k.isArrayOrTypedArray(c.angle)?c.angle[l]:c.angle,u.mc=k.isArrayOrTypedArray(c.color)?c.color[l]:c.color);var x=c&&c.line;x&&(u.mlc=Array.isArray(x.color)?x.color[l]:x.color,u.mlw=k.isArrayOrTypedArray(x.width)?x.width[l]:x.width);var p=c&&c.gradient;p&&p.type!=="none"&&(u.mgt=Array.isArray(p.type)?p.type[l]:p.type,u.mgc=Array.isArray(p.color)?p.color[l]:p.color);var v=i.c2p(u.x,!0),g=n.c2p(u.y,!0),y=u.mrc||1,m=t.hoverlabel;m&&(u.hbg=Array.isArray(m.bgcolor)?m.bgcolor[l]:m.bgcolor,u.hbc=Array.isArray(m.bordercolor)?m.bordercolor[l]:m.bordercolor,u.hts=k.isArrayOrTypedArray(m.font.size)?m.font.size[l]:m.font.size,u.htc=Array.isArray(m.font.color)?m.font.color[l]:m.font.color,u.htf=Array.isArray(m.font.family)?m.font.family[l]:m.font.family,u.hnl=k.isArrayOrTypedArray(m.namelength)?m.namelength[l]:m.namelength);var _=t.hoverinfo;_&&(u.hi=Array.isArray(_)?_[l]:_);var d=t.hovertemplate;d&&(u.ht=Array.isArray(d)?d[l]:d);var S={};S[b.index]=u;var w=t._origX,E=t._origY,C=k.extendFlat({},b,{color:s(t,u),x0:v-y,x1:v+y,xLabelVal:w?w[l]:u.x,y0:g-y,y1:g+y,yLabelVal:E?E[l]:u.y,cd:S,distance:r,spikeDistance:a,hovertemplate:u.ht});return u.htx?C.text=u.htx:u.tx?C.text=u.tx:t.text&&(C.text=t.text),k.fillText(u,t,C),M.getComponentMethod("errorbars","hoverInfo")(u,t,C),C}ee.exports={hoverPoints:function(b,f,o,t){var i,n,r,a,l,u,h,c,x,p,v=b.cd,g=v[0].t,y=v[0].trace,m=b.xa,_=b.ya,d=g.x,S=g.y,w=m.c2p(f),E=_.c2p(o),C=b.distance;if(g.tree){var O=m.p2c(w-C),P=m.p2c(w+C),z=_.p2c(E-C),j=_.p2c(E+C);i=t==="x"?g.tree.range(Math.min(O,P),Math.min(_._rl[0],_._rl[1]),Math.max(O,P),Math.max(_._rl[0],_._rl[1])):g.tree.range(Math.min(O,P),Math.min(z,j),Math.max(O,P),Math.max(z,j))}else i=g.ids;var I=C;if(t==="x"){var N=!!y.xperiodalignment,W=!!y.yperiodalignment;for(u=0;u<i.length;u++){if(a=d[n=i[u]],h=Math.abs(m.c2p(a)-w),N){var F=m.c2p(y._xStarts[n]),U=m.c2p(y._xEnds[n]);h=w>=Math.min(F,U)&&w<=Math.max(F,U)?0:1/0}if(h<I){if(I=h,l=S[n],c=_.c2p(l)-E,W){var H=_.c2p(y._yStarts[n]),ne=_.c2p(y._yEnds[n]);c=E>=Math.min(H,ne)&&E<=Math.max(H,ne)?0:1/0}p=Math.sqrt(h*h+c*c),r=i[u]}}}else for(u=i.length-1;u>-1;u--)a=d[n=i[u]],l=S[n],h=m.c2p(a)-w,c=_.c2p(l)-E,(x=Math.sqrt(h*h+c*c))<I&&(I=p=x,r=n);return b.index=r,b.distance=I,b.dxy=p,r===void 0?[b]:[T(b,d,S,y)]},calcHover:T}},38983:function(ee,R,e){var M=e(64628);M.plot=e(89876),ee.exports=M},89876:function(ee,R,e){var M=e(38540),k=e(13472),s=e(24544),T=e(23352),b=e(3400),f=e(72760).selectMode,o=e(5048),t=e(43028),i=e(14328),n=e(26768).styleTextSelection,r={};function a(l,u,h,c){var x=l._size,p=l.width*c,v=l.height*c,g=x.l*c,y=x.b*c,m=x.r*c,_=x.t*c,d=x.w*c,S=x.h*c;return[g+u.domain[0]*d,y+h.domain[0]*S,p-m-(1-u.domain[1])*d,v-_-(1-h.domain[1])*S]}(ee.exports=function(l,u,h){if(h.length){var c,x,p=l._fullLayout,v=u._scene,g=u.xaxis,y=u.yaxis;if(v)if(o(l,["ANGLE_instanced_arrays","OES_element_index_uint"],r)){var m=v.count,_=p._glcanvas.data()[0].regl;if(i(l,u,h),v.dirty){if(!v.line2d&&!v.error2d||v.scatter2d||v.fill2d||v.glText||_.clear({}),v.error2d===!0&&(v.error2d=s(_)),v.line2d===!0&&(v.line2d=k(_)),v.scatter2d===!0&&(v.scatter2d=M(_)),v.fill2d===!0&&(v.fill2d=k(_)),v.glText===!0)for(v.glText=new Array(m),c=0;c<m;c++)v.glText[c]=new T(_);if(v.glText){if(m>v.glText.length){var d=m-v.glText.length;for(c=0;c<d;c++)v.glText.push(new T(_))}else if(m<v.glText.length){var S=v.glText.length-m;v.glText.splice(m,S).forEach(function(te){te.destroy()})}for(c=0;c<m;c++)v.glText[c].update(v.textOptions[c])}if(v.line2d&&(v.line2d.update(v.lineOptions),v.lineOptions=v.lineOptions.map(function(te){if(te&&te.positions){for(var ae=te.positions,se=0;se<ae.length&&(isNaN(ae[se])||isNaN(ae[se+1]));)se+=2;for(var ce=ae.length-2;ce>se&&(isNaN(ae[ce])||isNaN(ae[ce+1]));)ce-=2;te.positions=ae.slice(se,ce+2)}return te}),v.line2d.update(v.lineOptions)),v.error2d){var w=(v.errorXOptions||[]).concat(v.errorYOptions||[]);v.error2d.update(w)}v.scatter2d&&v.scatter2d.update(v.markerOptions),v.fillOrder=b.repeat(null,m),v.fill2d&&(v.fillOptions=v.fillOptions.map(function(te,ae){var se=h[ae];if(te&&se&&se[0]&&se[0].trace){var ce,fe,pe=se[0],ge=pe.trace,me=pe.t,be=v.lineOptions[ae],ke=[];ge._ownfill&&ke.push(ae),ge._nexttrace&&ke.push(ae+1),ke.length&&(v.fillOrder[ae]=ke);var ze,ve,oe=[],ie=be&&be.positions||me.positions;if(ge.fill==="tozeroy"){for(ze=0;ze<ie.length&&isNaN(ie[ze+1]);)ze+=2;for(ve=ie.length-2;ve>ze&&isNaN(ie[ve+1]);)ve-=2;ie[ze+1]!==0&&(oe=[ie[ze],0]),oe=oe.concat(ie.slice(ze,ve+2)),ie[ve+1]!==0&&(oe=oe.concat([ie[ve],0]))}else if(ge.fill==="tozerox"){for(ze=0;ze<ie.length&&isNaN(ie[ze]);)ze+=2;for(ve=ie.length-2;ve>ze&&isNaN(ie[ve]);)ve-=2;ie[ze]!==0&&(oe=[0,ie[ze+1]]),oe=oe.concat(ie.slice(ze,ve+2)),ie[ve]!==0&&(oe=oe.concat([0,ie[ve+1]]))}else if(ge.fill==="toself"||ge.fill==="tonext"){for(oe=[],ce=0,te.splitNull=!0,fe=0;fe<ie.length;fe+=2)(isNaN(ie[fe])||isNaN(ie[fe+1]))&&((oe=oe.concat(ie.slice(ce,fe))).push(ie[ce],ie[ce+1]),oe.push(null,null),ce=fe+2);oe=oe.concat(ie.slice(ce)),ce&&oe.push(ie[ce],ie[ce+1])}else{var he=ge._nexttrace;if(he){var Se=v.lineOptions[ae+1];if(Se){var ye=Se.positions;if(ge.fill==="tonexty"){for(oe=ie.slice(),ae=Math.floor(ye.length/2);ae--;){var we=ye[2*ae],Me=ye[2*ae+1];isNaN(we)||isNaN(Me)||oe.push(we,Me)}te.fill=he.fillcolor}}}}if(ge._prevtrace&&ge._prevtrace.fill==="tonext"){var Oe=v.lineOptions[ae-1].positions,Ie=oe.length/2,de=[ce=Ie];for(fe=0;fe<Oe.length;fe+=2)(isNaN(Oe[fe])||isNaN(Oe[fe+1]))&&(de.push(fe/2+Ie+1),ce=fe+2);oe=oe.concat(Oe),te.hole=de}return te.fillmode=ge.fill,te.opacity=ge.opacity,te.positions=oe,te}}),v.fill2d.update(v.fillOptions))}var E=p.dragmode,C=f(E),O=p.clickmode.indexOf("select")>-1;for(c=0;c<m;c++){var P=h[c][0],z=P.trace,j=P.t,I=j.index,N=z._length,W=j.x,F=j.y;if(z.selectedpoints||C||O){if(C||(C=!0),z.selectedpoints){var U=v.selectBatch[I]=b.selIndices2selPoints(z),H={};for(x=0;x<U.length;x++)H[U[x]]=1;var ne=[];for(x=0;x<N;x++)H[x]||ne.push(x);v.unselectBatch[I]=ne}var $=j.xpx=new Array(N),K=j.ypx=new Array(N);for(x=0;x<N;x++)$[x]=g.c2p(W[x]),K[x]=y.c2p(F[x])}else j.xpx=j.ypx=null}if(C){if(v.select2d||(v.select2d=M(p._glcanvas.data()[1].regl)),v.scatter2d){var Q=new Array(m);for(c=0;c<m;c++)Q[c]=v.selectBatch[c].length||v.unselectBatch[c].length?v.markerUnselectedOptions[c]:{};v.scatter2d.update(Q)}v.select2d&&(v.select2d.update(v.markerOptions),v.select2d.update(v.markerSelectedOptions)),v.glText&&h.forEach(function(te){var ae=((te||[])[0]||{}).trace||{};t.hasText(ae)&&n(te)})}else v.scatter2d&&v.scatter2d.update(v.markerOptions);var Z={viewport:a(p,g,y,l._context.plotGlPixelRatio),range:[(g._rl||g.range)[0],(y._rl||y.range)[0],(g._rl||g.range)[1],(y._rl||y.range)[1]]},X=b.repeat(Z,v.count);v.fill2d&&v.fill2d.update(X),v.line2d&&v.line2d.update(X),v.error2d&&v.error2d.update(X.concat(X)),v.scatter2d&&v.scatter2d.update(X),v.select2d&&v.select2d.update(X),v.glText&&v.glText.forEach(function(te){te.update(Z)})}else v.init()}}).reglPrecompiled=r},74588:function(ee,R,e){var M=e(3400);ee.exports=function(k,s){var T=s._scene,b={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},f={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return s._scene||((T=s._scene={}).init=function(){M.extendFlat(T,f,b)},T.init(),T.update=function(o){var t=M.repeat(o,T.count);if(T.fill2d&&T.fill2d.update(t),T.scatter2d&&T.scatter2d.update(t),T.line2d&&T.line2d.update(t),T.error2d&&T.error2d.update(t.concat(t)),T.select2d&&T.select2d.update(t),T.glText)for(var i=0;i<T.count;i++)T.glText[i].update(o)},T.draw=function(){for(var o=T.count,t=T.fill2d,i=T.error2d,n=T.line2d,r=T.scatter2d,a=T.glText,l=T.select2d,u=T.selectBatch,h=T.unselectBatch,c=0;c<o;c++){if(t&&T.fillOrder[c]&&t.draw(T.fillOrder[c]),n&&T.lineOptions[c]&&n.draw(c),i&&(T.errorXOptions[c]&&i.draw(c),T.errorYOptions[c]&&i.draw(c+o)),r&&T.markerOptions[c])if(h[c].length){var x=M.repeat([],T.count);x[c]=h[c],r.draw(x)}else u[c].length||r.draw(c);a[c]&&T.textOptions[c]&&a[c].render()}l&&l.draw(u),T.dirty=!1},T.destroy=function(){T.fill2d&&T.fill2d.destroy&&T.fill2d.destroy(),T.scatter2d&&T.scatter2d.destroy&&T.scatter2d.destroy(),T.error2d&&T.error2d.destroy&&T.error2d.destroy(),T.line2d&&T.line2d.destroy&&T.line2d.destroy(),T.select2d&&T.select2d.destroy&&T.select2d.destroy(),T.glText&&T.glText.forEach(function(o){o.destroy&&o.destroy()}),T.lineOptions=null,T.fillOptions=null,T.markerOptions=null,T.markerSelectedOptions=null,T.markerUnselectedOptions=null,T.errorXOptions=null,T.errorYOptions=null,T.textOptions=null,T.textSelectedOptions=null,T.textUnselectedOptions=null,T.selectBatch=null,T.unselectBatch=null,s._scene=null}),T.dirty||M.extendFlat(T,b),T}},73224:function(ee,R,e){var M=e(43028),k=e(26768).styleTextSelection;ee.exports=function(s,T){var b=s.cd,f=s.xaxis,o=s.yaxis,t=[],i=b[0].trace,n=b[0].t,r=i._length,a=n.x,l=n.y,u=n._scene,h=n.index;if(!u)return t;var c=M.hasText(i),x=M.hasMarkers(i),p=!x&&!c;if(i.visible!==!0||p)return t;var v=[],g=[];if(T!==!1&&!T.degenerate)for(var y=0;y<r;y++)T.contains([n.xpx[y],n.ypx[y]],!1,y,s)?(v.push(y),t.push({pointNumber:y,x:f.c2d(a[y]),y:o.c2d(l[y])})):g.push(y);if(x){var m=u.scatter2d;if(v.length||g.length){if(!u.selectBatch[h].length&&!u.unselectBatch[h].length){var _=new Array(u.count);_[h]=u.markerUnselectedOptions[h],m.update.apply(m,_)}}else{var d=new Array(u.count);d[h]=u.markerOptions[h],m.update.apply(m,d)}}return u.selectBatch[h]=v,u.unselectBatch[h]=g,c&&k(b),t}},31512:function(ee,R,e){var M=e(21776).Ks,k=e(21776).Gw,s=e(98304),T=e(6096),b=e(52904),f=e(5232),o=e(45464),t=e(49084),i=e(92880).extendFlat,n=e(67824).overrideAll,r=e(5232),a=T.line,l=T.marker;ee.exports=n({lon:T.lon,lat:T.lat,cluster:{enabled:{valType:"boolean"},maxzoom:i({},r.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:i({},l.opacity,{dflt:1})},mode:i({},b.mode,{dflt:"markers"}),text:i({},b.text,{}),texttemplate:k({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:i({},b.hovertext,{}),line:{color:a.color,width:a.width},connectgaps:b.connectgaps,marker:i({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:l.opacity,size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode},t("marker")),fill:T.fill,fillcolor:s(),textfont:f.layers.symbol.textfont,textposition:f.layers.symbol.textposition,below:{valType:"string"},selected:{marker:b.selected.marker},unselected:{marker:b.unselected.marker},hoverinfo:i({},o.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:M()},"calc","nested")},79732:function(ee){var R=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extrabold Italic","Open Sans Extrabold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];ee.exports={isSupportedFont:function(e){return R.indexOf(e)!==-1}}},59392:function(ee,R,e){var M=e(38248),k=e(3400),s=e(39032).BADNUM,T=e(44808),b=e(8932),f=e(43616),o=e(7152),t=e(43028),i=e(79732).isSupportedFont,n=e(89032),r=e(10624).appendArrayPointValue,a=e(72736).NEWLINES,l=e(72736).BR_TAG_ALL;function u(g){return{type:g,geojson:T.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function h(g,y){return k.isArrayOrTypedArray(g)?y?function(m){return M(g[m])?+g[m]:0}:function(m){return g[m]}:g?function(){return g}:c}function c(){return""}function x(g){return g[0]===s}function p(g,y){var m;if(k.isArrayOrTypedArray(g)&&k.isArrayOrTypedArray(y)){m=["step",["get","point_count"],g[0]];for(var _=1;_<g.length;_++)m.push(y[_-1],g[_])}else m=g;return m}function v(g){var y=g.textfont,m=y.family,_=y.style,d=y.weight,S=m.split(" "),w=S[S.length-1]==="Italic";w&&S.pop(),w=w||_==="italic";var E=S.join(" ");return d==="bold"&&S.indexOf("Bold")===-1?E+=" Bold":d<=1e3&&(S[0]==="Metropolis"?(E="Metropolis",E+=d>850?" Black":d>750?" Extra Bold":d>650?" Bold":d>550?" Semi Bold":d>450?" Medium":d>350?" Regular":d>250?" Light":d>150?" Extra Light":" Thin"):S.slice(0,2).join(" ")==="Open Sans"?(E="Open Sans",E+=d>750?" Extrabold":d>650?" Bold":d>550?" Semibold":d>350?" Regular":" Light"):S.slice(0,3).join(" ")==="Klokantech Noto Sans"&&(E="Klokantech Noto Sans",S[3]==="CJK"&&(E+=" CJK"),E+=d>500?" Bold":" Regular")),w&&(E+=" Italic"),E==="Open Sans Regular Italic"?E="Open Sans Italic":E==="Open Sans Regular Bold"?E="Open Sans Bold":E==="Open Sans Regular Bold Italic"?E="Open Sans Bold Italic":E==="Klokantech Noto Sans Regular Italic"&&(E="Klokantech Noto Sans Italic"),i(E)||(E=m),E.split(", ")}ee.exports=function(g,y){var m,_=y[0].trace,d=_.visible===!0&&_._length!==0,S=_.fill!=="none",w=t.hasLines(_),E=t.hasMarkers(_),C=t.hasText(_),O=E&&_.marker.symbol==="circle",P=E&&_.marker.symbol!=="circle",z=_.cluster&&_.cluster.enabled,j=u("fill"),I=u("line"),N=u("circle"),W=u("symbol"),F={fill:j,line:I,circle:N,symbol:W};if(!d)return F;if((S||w)&&(m=T.calcTraceToLineCoords(y)),S&&(j.geojson=T.makePolygon(m),j.layout.visibility="visible",k.extendFlat(j.paint,{"fill-color":_.fillcolor})),w&&(I.geojson=T.makeLine(m),I.layout.visibility="visible",k.extendFlat(I.paint,{"line-width":_.line.width,"line-color":_.line.color,"line-opacity":_.opacity})),O){var U=function($){var K,Q,Z,X,te=$[0].trace,ae=te.marker,se=te.selectedpoints,ce=k.isArrayOrTypedArray(ae.color),fe=k.isArrayOrTypedArray(ae.size),pe=k.isArrayOrTypedArray(ae.opacity);function ge(he){return te.opacity*he}ce&&(Q=b.hasColorscale(te,"marker")?b.makeColorScaleFuncFromTrace(ae):k.identity),fe&&(Z=o(te)),pe&&(X=function(he){return ge(M(he)?+k.constrain(he,0,1):0)});var me,be,ke=[];for(K=0;K<$.length;K++){var ze=$[K],ve=ze.lonlat;if(!x(ve)){var oe={};Q&&(oe.mcc=ze.mcc=Q(ze.mc)),Z&&(oe.mrc=ze.mrc=Z(ze.ms)),X&&(oe.mo=X(ze.mo)),se&&(oe.selected=ze.selected||0),ke.push({type:"Feature",id:K+1,geometry:{type:"Point",coordinates:ve},properties:oe})}}if(se)for(me=f.makeSelectedPointStyleFns(te),K=0;K<ke.length;K++){var ie=ke[K].properties;me.selectedOpacityFn&&(ie.mo=ge(me.selectedOpacityFn(ie))),me.selectedColorFn&&(ie.mcc=me.selectedColorFn(ie)),me.selectedSizeFn&&(ie.mrc=me.selectedSizeFn(ie))}return{geojson:{type:"FeatureCollection",features:ke},mcc:ce||me&&me.selectedColorFn?{type:"identity",property:"mcc"}:ae.color,mrc:fe||me&&me.selectedSizeFn?{type:"identity",property:"mrc"}:(be=ae.size,be/2),mo:pe||me&&me.selectedOpacityFn?{type:"identity",property:"mo"}:ge(ae.opacity)}}(y);N.geojson=U.geojson,N.layout.visibility="visible",z&&(N.filter=["!",["has","point_count"]],F.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":p(_.cluster.color,_.cluster.step),"circle-radius":p(_.cluster.size,_.cluster.step),"circle-opacity":p(_.cluster.opacity,_.cluster.step)}},F.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":v(_),"text-size":12}}),k.extendFlat(N.paint,{"circle-color":U.mcc,"circle-radius":U.mrc,"circle-opacity":U.mo})}if(O&&z&&(N.filter=["!",["has","point_count"]]),(P||C)&&(W.geojson=function($,K){for(var Q=K._fullLayout,Z=$[0].trace,X=Z.marker||{},te=X.symbol,ae=X.angle,se=te!=="circle"?h(te):c,ce=ae!=="auto"?h(ae,!0):c,fe=t.hasText(Z)?h(Z.text):c,pe=[],ge=0;ge<$.length;ge++){var me=$[ge];if(!x(me.lonlat)){var be,ke=Z.texttemplate;if(ke){var ze=Array.isArray(ke)?ke[ge]||"":ke,ve=Z._module.formatLabels(me,Z,Q),oe={};r(oe,Z,me.i);var ie=Z._meta||{};be=k.texttemplateString(ze,ve,Q._d3locale,oe,me,ie)}else be=fe(ge);be&&(be=be.replace(a,"").replace(l,`
`)),pe.push({type:"Feature",geometry:{type:"Point",coordinates:me.lonlat},properties:{symbol:se(ge),angle:ce(ge),text:be}})}}return{type:"FeatureCollection",features:pe}}(y,g),k.extendFlat(W.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),P&&(k.extendFlat(W.layout,{"icon-size":_.marker.size/10}),"angle"in _.marker&&_.marker.angle!=="auto"&&k.extendFlat(W.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),W.layout["icon-allow-overlap"]=_.marker.allowoverlap,k.extendFlat(W.paint,{"icon-opacity":_.opacity*_.marker.opacity,"icon-color":_.marker.color})),C)){var H=(_.marker||{}).size,ne=n(_.textposition,H);k.extendFlat(W.layout,{"text-size":_.textfont.size,"text-anchor":ne.anchor,"text-offset":ne.offset,"text-font":v(_)}),k.extendFlat(W.paint,{"text-color":_.textfont.color,"text-opacity":_.opacity})}return F}},15752:function(ee,R,e){var M=e(3400),k=e(43028),s=e(74428),T=e(66828),b=e(124),f=e(70840),o=e(31512),t=e(79732).isSupportedFont;ee.exports=function(i,n,r,a){function l(_,d){return M.coerce(i,n,o,_,d)}function u(_,d){return M.coerce2(i,n,o,_,d)}var h=function(_,d,S){var w=S("lon")||[],E=S("lat")||[],C=Math.min(w.length,E.length);return d._length=C,C}(0,n,l);if(h){if(l("text"),l("texttemplate"),l("hovertext"),l("hovertemplate"),l("mode"),l("below"),k.hasMarkers(n)){s(i,n,r,a,l,{noLine:!0,noAngle:!0}),l("marker.allowoverlap"),l("marker.angle");var c=n.marker;c.symbol!=="circle"&&(M.isArrayOrTypedArray(c.size)&&(c.size=c.size[0]),M.isArrayOrTypedArray(c.color)&&(c.color=c.color[0]))}k.hasLines(n)&&(T(i,n,r,a,l,{noDash:!0}),l("connectgaps"));var x=u("cluster.maxzoom"),p=u("cluster.step"),v=u("cluster.color",n.marker&&n.marker.color||r),g=u("cluster.size"),y=u("cluster.opacity");if(l("cluster.enabled",x!==!1||p!==!1||v!==!1||g!==!1||y!==!1)||k.hasText(n)){var m=a.font.family;b(i,n,a,l,{noSelect:!0,noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,font:{family:t(m)?m:"Open Sans Regular",weight:a.font.weight,style:a.font.style,size:a.font.size,color:a.font.color}})}l("fill"),n.fill!=="none"&&f(i,n,r,l),M.coerceSelectionMarkerOpacity(n,l)}else n.visible=!1}},37920:function(ee){ee.exports=function(R,e){return R.lon=e.lon,R.lat=e.lat,R}},11960:function(ee,R,e){var M=e(54460);ee.exports=function(k,s,T){var b={},f=T[s.subplot]._subplot.mockAxis,o=k.lonlat;return b.lonLabel=M.tickText(f,f.c2l(o[0]),!0).text,b.latLabel=M.tickText(f,f.c2l(o[1]),!0).text,b}},63312:function(ee,R,e){var M=e(93024),k=e(3400),s=e(44928),T=k.fillText,b=e(39032).BADNUM,f=e(47552).traceLayerPrefix;function o(t,i,n){if(!t.hovertemplate){var r=(i.hi||t.hoverinfo).split("+"),a=r.indexOf("all")!==-1,l=r.indexOf("lon")!==-1,u=r.indexOf("lat")!==-1,h=i.lonlat,c=[];return a||l&&u?c.push("("+x(h[1])+", "+x(h[0])+")"):l?c.push(n.lon+x(h[0])):u&&c.push(n.lat+x(h[1])),(a||r.indexOf("text")!==-1)&&T(i,t,c),c.join("<br>")}function x(p){return p+""}}ee.exports={hoverPoints:function(t,i,n){var r=t.cd,a=r[0].trace,l=t.xa,u=t.ya,h=t.subplot,c=[],x=f+a.uid+"-circle",p=a.cluster&&a.cluster.enabled;if(p){var v=h.map.queryRenderedFeatures(null,{layers:[x]});c=v.map(function(P){return P.id})}var g=360*(i>=0?Math.floor((i+180)/360):Math.ceil((i-180)/360)),y=i-g;if(M.getClosest(r,function(P){var z=P.lonlat;if(z[0]===b||p&&c.indexOf(P.i+1)===-1)return 1/0;var j=k.modHalf(z[0],360),I=z[1],N=h.project([j,I]),W=N.x-l.c2p([y,I]),F=N.y-u.c2p([j,n]),U=Math.max(3,P.mrc||0);return Math.max(Math.sqrt(W*W+F*F)-U,1-3/U)},t),t.index!==!1){var m=r[t.index],_=m.lonlat,d=[k.modHalf(_[0],360)+g,_[1]],S=l.c2p(d),w=u.c2p(d),E=m.mrc||1;t.x0=S-E,t.x1=S+E,t.y0=w-E,t.y1=w+E;var C={};C[a.subplot]={_subplot:h};var O=a._module.formatLabels(m,a,C);return t.lonLabel=O.lonLabel,t.latLabel=O.latLabel,t.color=s(a,m),t.extraText=o(a,m,r[0].t.labels),t.hovertemplate=a.hovertemplate,[t]}},getExtraText:o}},11572:function(ee,R,e){ee.exports={attributes:e(31512),supplyDefaults:e(15752),colorbar:e(5528),formatLabels:e(11960),calc:e(25212),plot:e(9660),hoverPoints:e(63312).hoverPoints,eventData:e(37920),selectPoints:e(404),styleOnSelect:function(M,k){k&&k[0].trace._glTrace.update(k)},moduleType:"trace",name:"scattermapbox",basePlotModule:e(33688),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},9660:function(ee,R,e){var M=e(3400),k=e(59392),s=e(47552).traceLayerPrefix,T={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function b(o,t,i,n){this.type="scattermapbox",this.subplot=o,this.uid=t,this.clusterEnabled=i,this.isHidden=n,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol",cluster:"source-"+t+"-circle",clusterCount:"source-"+t+"-circle"},this.layerIds={fill:s+t+"-fill",line:s+t+"-line",circle:s+t+"-circle",symbol:s+t+"-symbol",cluster:s+t+"-cluster",clusterCount:s+t+"-cluster-count"},this.below=null}var f=b.prototype;f.addSource=function(o,t,i){var n={type:"geojson",data:t.geojson};i&&i.enabled&&M.extendFlat(n,{cluster:!0,clusterMaxZoom:i.maxzoom});var r=this.subplot.map.getSource(this.sourceIds[o]);r?r.setData(t.geojson):this.subplot.map.addSource(this.sourceIds[o],n)},f.setSourceData=function(o,t){this.subplot.map.getSource(this.sourceIds[o]).setData(t.geojson)},f.addLayer=function(o,t,i){var n={type:t.type,id:this.layerIds[o],source:this.sourceIds[o],layout:t.layout,paint:t.paint};t.filter&&(n.filter=t.filter);for(var r,a=this.layerIds[o],l=this.subplot.getMapLayers(),u=0;u<l.length;u++)if(l[u].id===a){r=!0;break}r?(this.subplot.setOptions(a,"setLayoutProperty",n.layout),n.layout.visibility==="visible"&&this.subplot.setOptions(a,"setPaintProperty",n.paint)):this.subplot.addLayer(n,i)},f.update=function(o){var t=o[0].trace,i=this.subplot,n=i.map,r=k(i.gd,o),a=i.belowLookup["trace-"+this.uid],l=!(!t.cluster||!t.cluster.enabled),u=!!this.clusterEnabled,h=this;function c(y){u?function(m){for(var _=T.cluster,d=_.length-1;d>=0;d--){var S=_[d];n.removeLayer(h.layerIds[S])}m||n.removeSource(h.sourceIds.circle)}(y):function(m){for(var _=T.nonCluster,d=_.length-1;d>=0;d--){var S=_[d];n.removeLayer(h.layerIds[S]),m||n.removeSource(h.sourceIds[S])}}(y)}function x(y){l?function(m){m||h.addSource("circle",r.circle,t.cluster);for(var _=T.cluster,d=0;d<_.length;d++){var S=_[d],w=r[S];h.addLayer(S,w,a)}}(y):function(m){for(var _=T.nonCluster,d=0;d<_.length;d++){var S=_[d],w=r[S];m||h.addSource(S,w),h.addLayer(S,w,a)}}(y)}function p(){for(var y=l?T.cluster:T.nonCluster,m=0;m<y.length;m++){var _=y[m],d=r[_];d&&(i.setOptions(h.layerIds[_],"setLayoutProperty",d.layout),d.layout.visibility==="visible"&&(_!=="cluster"&&h.setSourceData(_,d),i.setOptions(h.layerIds[_],"setPaintProperty",d.paint)))}}var v=this.isHidden,g=t.visible!==!0;g?v||c():v?g||x():u!==l?(c(),x()):(this.below!==a&&(c(!0),x(!0)),p()),this.clusterEnabled=l,this.isHidden=g,this.below=a,o[0].trace._glTrace=this},f.dispose=function(){for(var o=this.subplot.map,t=this.clusterEnabled?T.cluster:T.nonCluster,i=t.length-1;i>=0;i--){var n=t[i];o.removeLayer(this.layerIds[n]),o.removeSource(this.sourceIds[n])}},ee.exports=function(o,t){var i,n,r,a=t[0].trace,l=a.cluster&&a.cluster.enabled,u=a.visible!==!0,h=new b(o,a.uid,l,u),c=k(o.gd,t),x=h.below=o.belowLookup["trace-"+a.uid];if(l)for(h.addSource("circle",c.circle,a.cluster),i=0;i<T.cluster.length;i++)r=c[n=T.cluster[i]],h.addLayer(n,r,x);else for(i=0;i<T.nonCluster.length;i++)r=c[n=T.nonCluster[i]],h.addSource(n,r,a.cluster),h.addLayer(n,r,x);return t[0].trace._glTrace=h,h}},404:function(ee,R,e){var M=e(3400),k=e(43028),s=e(39032).BADNUM;ee.exports=function(T,b){var f,o=T.cd,t=T.xaxis,i=T.yaxis,n=[],r=o[0].trace;if(!k.hasMarkers(r))return[];if(b===!1)for(f=0;f<o.length;f++)o[f].selected=0;else for(f=0;f<o.length;f++){var a=o[f],l=a.lonlat;if(l[0]!==s){var u=[M.modHalf(l[0],360),l[1]],h=[t.c2p(u),i.c2p(u)];b.contains(h,null,f,T)?(n.push({pointNumber:f,lon:l[0],lat:l[1]}),a.selected=1):a.selected=0}}return n}},8319:function(ee,R,e){var M=e(21776).Ks,k=e(21776).Gw,s=e(92880).extendFlat,T=e(98304),b=e(52904),f=e(45464),o=b.line;ee.exports={mode:b.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:b.text,texttemplate:k({editType:"plot"},{keys:["r","theta","text"]}),hovertext:b.hovertext,line:{color:o.color,width:o.width,dash:o.dash,backoff:o.backoff,shape:s({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:b.connectgaps,marker:b.marker,cliponaxis:s({},b.cliponaxis,{dflt:!1}),textposition:b.textposition,textfont:b.textfont,fill:s({},b.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T(),hoverinfo:s({},f.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:b.hoveron,hovertemplate:M(),selected:b.selected,unselected:b.unselected}},58320:function(ee,R,e){var M=e(38248),k=e(39032).BADNUM,s=e(54460),T=e(90136),b=e(20148),f=e(4500),o=e(16356).calcMarkerSize;ee.exports=function(t,i){for(var n=t._fullLayout,r=i.subplot,a=n[r].radialaxis,l=n[r].angularaxis,u=a.makeCalcdata(i,"r"),h=l.makeCalcdata(i,"theta"),c=i._length,x=new Array(c),p=0;p<c;p++){var v=u[p],g=h[p],y=x[p]={};M(v)&&M(g)?(y.r=v,y.theta=g):y.r=k}var m=o(i,c);return i._extremes.x=s.findExtremes(a,u,{ppad:m}),T(t,i),b(x,i),f(x,i),x}},85968:function(ee,R,e){var M=e(3400),k=e(43028),s=e(74428),T=e(66828),b=e(11731),f=e(124),o=e(70840),t=e(88200).PTS_LINESONLY,i=e(8319);function n(r,a,l,u){var h,c=u("r"),x=u("theta");if(M.isTypedArray(c)&&(a.r=c=Array.from(c)),M.isTypedArray(x)&&(a.theta=x=Array.from(x)),c)x?h=Math.min(c.length,x.length):(h=c.length,u("theta0"),u("dtheta"));else{if(!x)return 0;h=a.theta.length,u("r0"),u("dr")}return a._length=h,h}ee.exports={handleRThetaDefaults:n,supplyDefaults:function(r,a,l,u){function h(p,v){return M.coerce(r,a,i,p,v)}var c=n(0,a,0,h);if(c){h("thetaunit"),h("mode",c<t?"lines+markers":"lines"),h("text"),h("hovertext"),a.hoveron!=="fills"&&h("hovertemplate"),k.hasMarkers(a)&&s(r,a,l,u,h,{gradient:!0}),k.hasLines(a)&&(T(r,a,l,u,h,{backoff:!0}),b(r,a,h),h("connectgaps")),k.hasText(a)&&(h("texttemplate"),f(r,a,u,h));var x=[];(k.hasMarkers(a)||k.hasText(a))&&(h("cliponaxis"),h("marker.maxdisplayed"),x.push("points")),h("fill"),a.fill!=="none"&&(o(r,a,l,h),k.hasLines(a)||b(r,a,h)),a.fill!=="tonext"&&a.fill!=="toself"||x.push("fills"),h("hoveron",x.join("+")||"points"),M.coerceSelectionMarkerOpacity(a,h)}else a.visible=!1}}},22852:function(ee,R,e){var M=e(3400),k=e(54460);ee.exports=function(s,T,b){var f,o,t={},i=b[T.subplot]._subplot;i?(f=i.radialAxis,o=i.angularAxis):(f=(i=b[T.subplot]).radialaxis,o=i.angularaxis);var n=f.c2l(s.r);t.rLabel=k.tickText(f,n,!0).text;var r=o.thetaunit==="degrees"?M.rad2deg(s.theta):s.theta;return t.thetaLabel=k.tickText(o,r,!0).text,t}},8504:function(ee,R,e){var M=e(98723);function k(s,T,b,f){var o=b.radialAxis,t=b.angularAxis;o._hovertitle="r",t._hovertitle="";var i={};i[T.subplot]={_subplot:b};var n=T._module.formatLabels(s,T,i);f.rLabel=n.rLabel,f.thetaLabel=n.thetaLabel;var r=s.hi||T.hoverinfo,a=[];function l(h,c){a.push(h._hovertitle+": "+c)}if(!T.hovertemplate){var u=r.split("+");u.indexOf("all")!==-1&&(u=["r","theta","text"]),u.indexOf("r")!==-1&&l(o,f.rLabel),u.indexOf("theta")!==-1&&l(t,f.thetaLabel),u.indexOf("text")!==-1&&f.text&&(a.push(f.text),delete f.text),f.extraText=a.join("<br>")}}ee.exports={hoverPoints:function(s,T,b,f){var o=M(s,T,b,f);if(o&&o[0].index!==!1){var t=o[0];if(t.index===void 0)return o;var i=s.subplot,n=t.cd[t.index],r=t.trace;if(i.isPtInside(n))return t.xLabelVal=void 0,t.yLabelVal=void 0,k(n,r,i,t),t.hovertemplate=r.hovertemplate,o}},makeHoverPointText:k}},76924:function(ee,R,e){ee.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:e(40872),categories:["polar","symbols","showLegend","scatter-like"],attributes:e(8319),supplyDefaults:e(85968).supplyDefaults,colorbar:e(5528),formatLabels:e(22852),calc:e(58320),plot:e(43456),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(8504).hoverPoints,selectPoints:e(91560),meta:{}}},43456:function(ee,R,e){var M=e(96504),k=e(39032).BADNUM;ee.exports=function(s,T,b){for(var f=T.layers.frontplot.select("g.scatterlayer"),o=T.xaxis,t=T.yaxis,i={xaxis:o,yaxis:t,plot:T.framework,layerClipId:T._hasClipOnAxisFalse?T.clipIds.forTraces:null},n=T.radialAxis,r=T.angularAxis,a=0;a<b.length;a++)for(var l=b[a],u=0;u<l.length;u++){u===0&&(l[0].trace._xA=o,l[0].trace._yA=t);var h=l[u],c=h.r;if(c===k)h.x=h.y=k;else{var x=n.c2g(c),p=r.c2g(h.theta);h.x=x*Math.cos(p),h.y=x*Math.sin(p)}}M(s,i,b,f)}},24396:function(ee,R,e){var M=e(8319),k=e(2876),s=e(21776).Gw;ee.exports={mode:M.mode,r:M.r,theta:M.theta,r0:M.r0,dr:M.dr,theta0:M.theta0,dtheta:M.dtheta,thetaunit:M.thetaunit,text:M.text,texttemplate:s({editType:"plot"},{keys:["r","theta","text"]}),hovertext:M.hovertext,hovertemplate:M.hovertemplate,line:{color:k.line.color,width:k.line.width,dash:k.line.dash,editType:"calc"},connectgaps:k.connectgaps,marker:k.marker,fill:k.fill,fillcolor:k.fillcolor,textposition:k.textposition,textfont:k.textfont,hoverinfo:M.hoverinfo,selected:M.selected,unselected:M.unselected}},27160:function(ee,R,e){ee.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:e(40872),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:e(24396),supplyDefaults:e(98608),colorbar:e(5528),formatLabels:e(94120),calc:e(66720),hoverPoints:e(1600).hoverPoints,selectPoints:e(73224),meta:{}}},66720:function(ee,R,e){var M=e(90136),k=e(16356).calcMarkerSize,s=e(84236),T=e(54460),b=e(67072).TOO_MANY_POINTS;ee.exports=function(f,o){var t=f._fullLayout,i=o.subplot,n=t[i].radialaxis,r=t[i].angularaxis,a=o._r=n.makeCalcdata(o,"r"),l=o._theta=r.makeCalcdata(o,"theta"),u=o._length,h={};u<a.length&&(a=a.slice(0,u)),u<l.length&&(l=l.slice(0,u)),h.r=a,h.theta=l,M(f,o);var c,x=h.opts=s.style(f,o);return u<b?c=k(o,u):x.marker&&(c=2*(x.marker.sizeAvg||Math.max(x.marker.size,3))),o._extremes.x=T.findExtremes(n,a,{ppad:c}),[{x:!1,y:!1,t:h,trace:o}]}},98608:function(ee,R,e){var M=e(3400),k=e(43028),s=e(85968).handleRThetaDefaults,T=e(74428),b=e(66828),f=e(124),o=e(70840),t=e(88200).PTS_LINESONLY,i=e(24396);ee.exports=function(n,r,a,l){function u(c,x){return M.coerce(n,r,i,c,x)}var h=s(n,r,l,u);h?(u("thetaunit"),u("mode",h<t?"lines+markers":"lines"),u("text"),u("hovertext"),r.hoveron!=="fills"&&u("hovertemplate"),k.hasMarkers(r)&&T(n,r,a,l,u,{noAngleRef:!0,noStandOff:!0}),k.hasLines(r)&&(b(n,r,a,l,u),u("connectgaps")),k.hasText(r)&&(u("texttemplate"),f(n,r,l,u,{noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0})),u("fill"),r.fill!=="none"&&o(n,r,a,u),M.coerceSelectionMarkerOpacity(r,u)):r.visible=!1}},94120:function(ee,R,e){var M=e(22852);ee.exports=function(k,s,T){var b=k.i;return"r"in k||(k.r=s._r[b]),"theta"in k||(k.theta=s._theta[b]),M(k,s,T)}},1600:function(ee,R,e){var M=e(41272),k=e(8504).makeHoverPointText;ee.exports={hoverPoints:function(s,T,b,f){var o=s.cd[0].t,t=o.r,i=o.theta,n=M.hoverPoints(s,T,b,f);if(n&&n[0].index!==!1){var r=n[0];if(r.index===void 0)return n;var a=s.subplot,l=r.cd[r.index],u=r.trace;if(l.r=t[r.index],l.theta=i[r.index],a.isPtInside(l))return r.xLabelVal=void 0,r.yLabelVal=void 0,k(l,u,a,r),n}}}},62944:function(ee,R,e){var M=e(27160);M.plot=e(56512),ee.exports=M},56512:function(ee,R,e){var M=e(3108),k=e(38248),s=e(89876),T=e(74588),b=e(84236),f=e(3400),o=e(67072).TOO_MANY_POINTS;ee.exports=function(t,i,n){if(n.length){var r=i.radialAxis,a=i.angularAxis,l=T(t,i);return n.forEach(function(u){if(u&&u[0]&&u[0].trace){var h,c=u[0],x=c.trace,p=c.t,v=x._length,g=p.r,y=p.theta,m=p.opts,_=g.slice(),d=y.slice();for(h=0;h<g.length;h++)i.isPtInside({r:g[h],theta:y[h]})||(_[h]=NaN,d[h]=NaN);var S=new Array(2*v),w=Array(v),E=Array(v);for(h=0;h<v;h++){var C,O,P=_[h];if(k(P)){var z=r.c2g(P),j=a.c2g(d[h],x.thetaunit);C=z*Math.cos(j),O=z*Math.sin(j)}else C=O=NaN;w[h]=S[2*h]=C,E[h]=S[2*h+1]=O}p.tree=M(S),m.marker&&v>=o&&(m.marker.cluster=p.tree),m.marker&&(m.markerSel.positions=m.markerUnsel.positions=m.marker.positions=S),m.line&&S.length>1&&f.extendFlat(m.line,b.linePositions(t,x,S)),m.text&&(f.extendFlat(m.text,{positions:S},b.textPosition(t,x,m.text,m.marker)),f.extendFlat(m.textSel,{positions:S},b.textPosition(t,x,m.text,m.markerSel)),f.extendFlat(m.textUnsel,{positions:S},b.textPosition(t,x,m.text,m.markerUnsel))),m.fill&&!l.fill2d&&(l.fill2d=!0),m.marker&&!l.scatter2d&&(l.scatter2d=!0),m.line&&!l.line2d&&(l.line2d=!0),m.text&&!l.glText&&(l.glText=!0),l.lineOptions.push(m.line),l.fillOptions.push(m.fill),l.markerOptions.push(m.marker),l.markerSelectedOptions.push(m.markerSel),l.markerUnselectedOptions.push(m.markerUnsel),l.textOptions.push(m.text),l.textSelectedOptions.push(m.textSel),l.textUnselectedOptions.push(m.textUnsel),l.selectBatch.push([]),l.unselectBatch.push([]),p.x=w,p.y=E,p.rawx=w,p.rawy=E,p.r=g,p.theta=y,p.positions=S,p._scene=l,p.index=l.count,l.count++}}),s(t,i,n)}},ee.exports.reglPrecompiled={}},69496:function(ee,R,e){var M=e(21776).Ks,k=e(21776).Gw,s=e(92880).extendFlat,T=e(98304),b=e(52904),f=e(45464),o=b.line;ee.exports={mode:b.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:b.text,texttemplate:k({editType:"plot"},{keys:["real","imag","text"]}),hovertext:b.hovertext,line:{color:o.color,width:o.width,dash:o.dash,backoff:o.backoff,shape:s({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:b.connectgaps,marker:b.marker,cliponaxis:s({},b.cliponaxis,{dflt:!1}),textposition:b.textposition,textfont:b.textfont,fill:s({},b.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T(),hoverinfo:s({},f.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:b.hoveron,hovertemplate:M(),selected:b.selected,unselected:b.unselected}},47507:function(ee,R,e){var M=e(38248),k=e(39032).BADNUM,s=e(90136),T=e(20148),b=e(4500),f=e(16356).calcMarkerSize;ee.exports=function(o,t){for(var i=o._fullLayout,n=t.subplot,r=i[n].realaxis,a=i[n].imaginaryaxis,l=r.makeCalcdata(t,"real"),u=a.makeCalcdata(t,"imag"),h=t._length,c=new Array(h),x=0;x<h;x++){var p=l[x],v=u[x],g=c[x]={};M(p)&&M(v)?(g.real=p,g.imag=v):g.real=k}return f(t,h),s(o,t),T(c,t),b(c,t),c}},76716:function(ee,R,e){var M=e(3400),k=e(43028),s=e(74428),T=e(66828),b=e(11731),f=e(124),o=e(70840),t=e(88200).PTS_LINESONLY,i=e(69496);ee.exports=function(n,r,a,l){function u(x,p){return M.coerce(n,r,i,x,p)}var h=function(x,p,v,g){var y,m=g("real"),_=g("imag");return m&&_&&(y=Math.min(m.length,_.length)),M.isTypedArray(m)&&(p.real=m=Array.from(m)),M.isTypedArray(_)&&(p.imag=_=Array.from(_)),p._length=y,y}(0,r,0,u);if(h){u("mode",h<t?"lines+markers":"lines"),u("text"),u("hovertext"),r.hoveron!=="fills"&&u("hovertemplate"),k.hasMarkers(r)&&s(n,r,a,l,u,{gradient:!0}),k.hasLines(r)&&(T(n,r,a,l,u,{backoff:!0}),b(n,r,u),u("connectgaps")),k.hasText(r)&&(u("texttemplate"),f(n,r,l,u));var c=[];(k.hasMarkers(r)||k.hasText(r))&&(u("cliponaxis"),u("marker.maxdisplayed"),c.push("points")),u("fill"),r.fill!=="none"&&(o(n,r,a,u),k.hasLines(r)||b(n,r,u)),r.fill!=="tonext"&&r.fill!=="toself"||c.push("fills"),u("hoveron",c.join("+")||"points"),M.coerceSelectionMarkerOpacity(r,u)}else r.visible=!1}},49504:function(ee,R,e){var M=e(54460);ee.exports=function(k,s,T){var b={},f=T[s.subplot]._subplot;return b.realLabel=M.tickText(f.radialAxis,k.real,!0).text,b.imagLabel=M.tickText(f.angularAxis,k.imag,!0).text,b}},25292:function(ee,R,e){var M=e(98723);function k(s,T,b,f){var o=b.radialAxis,t=b.angularAxis;o._hovertitle="real",t._hovertitle="imag";var i={};i[T.subplot]={_subplot:b};var n=T._module.formatLabels(s,T,i);f.realLabel=n.realLabel,f.imagLabel=n.imagLabel;var r=s.hi||T.hoverinfo,a=[];function l(h,c){a.push(h._hovertitle+": "+c)}if(!T.hovertemplate){var u=r.split("+");u.indexOf("all")!==-1&&(u=["real","imag","text"]),u.indexOf("real")!==-1&&l(o,f.realLabel),u.indexOf("imag")!==-1&&l(t,f.imagLabel),u.indexOf("text")!==-1&&f.text&&(a.push(f.text),delete f.text),f.extraText=a.join("<br>")}}ee.exports={hoverPoints:function(s,T,b,f){var o=M(s,T,b,f);if(o&&o[0].index!==!1){var t=o[0];if(t.index===void 0)return o;var i=s.subplot,n=t.cd[t.index],r=t.trace;if(i.isPtInside(n))return t.xLabelVal=void 0,t.yLabelVal=void 0,k(n,r,i,t),t.hovertemplate=r.hovertemplate,o}},makeHoverPointText:k}},95443:function(ee,R,e){ee.exports={moduleType:"trace",name:"scattersmith",basePlotModule:e(47788),categories:["smith","symbols","showLegend","scatter-like"],attributes:e(69496),supplyDefaults:e(76716),colorbar:e(5528),formatLabels:e(49504),calc:e(47507),plot:e(34927),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(25292).hoverPoints,selectPoints:e(91560),meta:{}}},34927:function(ee,R,e){var M=e(96504),k=e(39032).BADNUM,s=e(36416).smith;ee.exports=function(T,b,f){for(var o=b.layers.frontplot.select("g.scatterlayer"),t=b.xaxis,i=b.yaxis,n={xaxis:t,yaxis:i,plot:b.framework,layerClipId:b._hasClipOnAxisFalse?b.clipIds.forTraces:null},r=0;r<f.length;r++)for(var a=f[r],l=0;l<a.length;l++){l===0&&(a[0].trace._xA=t,a[0].trace._yA=i);var u=a[l],h=u.real;if(h===k)u.x=u.y=k;else{var c=s([h,u.imag]);u.x=c[0],u.y=c[1]}}M(T,n,f,o)}},5896:function(ee,R,e){var M=e(21776).Ks,k=e(21776).Gw,s=e(98304),T=e(52904),b=e(45464),f=e(49084),o=e(98192).u,t=e(92880).extendFlat,i=T.marker,n=T.line,r=i.line;ee.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:t({},T.mode,{dflt:"markers"}),text:t({},T.text,{}),texttemplate:k({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:t({},T.hovertext,{}),line:{color:n.color,width:n.width,dash:o,backoff:n.backoff,shape:t({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:T.connectgaps,cliponaxis:T.cliponaxis,fill:t({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:s(),marker:t({symbol:i.symbol,opacity:i.opacity,angle:i.angle,angleref:i.angleref,standoff:i.standoff,maxdisplayed:i.maxdisplayed,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,line:t({width:r.width,editType:"calc"},f("marker.line")),gradient:i.gradient,editType:"calc"},f("marker")),textfont:T.textfont,textposition:T.textposition,selected:T.selected,unselected:T.unselected,hoverinfo:t({},b.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:T.hoveron,hovertemplate:M()}},34335:function(ee,R,e){var M=e(38248),k=e(90136),s=e(20148),T=e(4500),b=e(16356).calcMarkerSize,f=["a","b","c"],o={a:["b","c"],b:["a","c"],c:["a","b"]};ee.exports=function(t,i){var n,r,a,l,u,h,c=t._fullLayout[i.subplot].sum,x=i.sum||c,p={a:i.a,b:i.b,c:i.c};for(n=0;n<f.length;n++)if(!p[a=f[n]]){for(u=p[o[a][0]],h=p[o[a][1]],l=new Array(u.length),r=0;r<u.length;r++)l[r]=x-u[r]-h[r];p[a]=l}var v,g,y,m,_,d,S=i._length,w=new Array(S);for(n=0;n<S;n++)v=p.a[n],g=p.b[n],y=p.c[n],M(v)&&M(g)&&M(y)?((m=c/((v=+v)+(g=+g)+(y=+y)))!=1&&(v*=m,g*=m,y*=m),d=v,_=y-g,w[n]={x:_,y:d,a:v,b:g,c:y}):w[n]={x:!1,y:!1};return b(i,S),k(t,i),s(w,i),T(w,i),w}},84256:function(ee,R,e){var M=e(3400),k=e(88200),s=e(43028),T=e(74428),b=e(66828),f=e(11731),o=e(124),t=e(70840),i=e(5896);ee.exports=function(n,r,a,l){function u(g,y){return M.coerce(n,r,i,g,y)}var h,c=u("a"),x=u("b"),p=u("c");if(c?(h=c.length,x?(h=Math.min(h,x.length),p&&(h=Math.min(h,p.length))):h=p?Math.min(h,p.length):0):x&&p&&(h=Math.min(x.length,p.length)),h){r._length=h,u("sum"),u("text"),u("hovertext"),r.hoveron!=="fills"&&u("hovertemplate"),u("mode",h<k.PTS_LINESONLY?"lines+markers":"lines"),s.hasMarkers(r)&&T(n,r,a,l,u,{gradient:!0}),s.hasLines(r)&&(b(n,r,a,l,u,{backoff:!0}),f(n,r,u),u("connectgaps")),s.hasText(r)&&(u("texttemplate"),o(n,r,l,u));var v=[];(s.hasMarkers(r)||s.hasText(r))&&(u("cliponaxis"),u("marker.maxdisplayed"),v.push("points")),u("fill"),r.fill!=="none"&&(t(n,r,a,u),s.hasLines(r)||f(n,r,u)),r.fill!=="tonext"&&r.fill!=="toself"||v.push("fills"),u("hoveron",v.join("+")||"points"),M.coerceSelectionMarkerOpacity(r,u)}else r.visible=!1}},97476:function(ee){ee.exports=function(R,e,M,k,s){if(e.xa&&(R.xaxis=e.xa),e.ya&&(R.yaxis=e.ya),k[s]){var T=k[s];R.a=T.a,R.b=T.b,R.c=T.c}else R.a=e.a,R.b=e.b,R.c=e.c;return R}},90404:function(ee,R,e){var M=e(54460);ee.exports=function(k,s,T){var b={},f=T[s.subplot]._subplot;return b.aLabel=M.tickText(f.aaxis,k.a,!0).text,b.bLabel=M.tickText(f.baxis,k.b,!0).text,b.cLabel=M.tickText(f.caxis,k.c,!0).text,b}},26596:function(ee,R,e){var M=e(98723);ee.exports=function(k,s,T,b){var f=M(k,s,T,b);if(f&&f[0].index!==!1){var o=f[0];if(o.index===void 0){var t=1-o.y0/k.ya._length,i=k.xa._length,n=i*t/2,r=i-n;return o.x0=Math.max(Math.min(o.x0,r),n),o.x1=Math.max(Math.min(o.x1,r),n),f}var a=o.cd[o.index],l=o.trace,u=o.subplot;o.a=a.a,o.b=a.b,o.c=a.c,o.xLabelVal=void 0,o.yLabelVal=void 0;var h={};h[l.subplot]={_subplot:u};var c=l._module.formatLabels(a,l,h);o.aLabel=c.aLabel,o.bLabel=c.bLabel,o.cLabel=c.cLabel;var x=a.hi||l.hoverinfo,p=[];if(!l.hovertemplate){var v=x.split("+");v.indexOf("all")!==-1&&(v=["a","b","c"]),v.indexOf("a")!==-1&&g(u.aaxis,o.aLabel),v.indexOf("b")!==-1&&g(u.baxis,o.bLabel),v.indexOf("c")!==-1&&g(u.caxis,o.cLabel)}return o.extraText=p.join("<br>"),o.hovertemplate=l.hovertemplate,f}function g(y,m){p.push(y._hovertitle+": "+m)}}},34864:function(ee,R,e){ee.exports={attributes:e(5896),supplyDefaults:e(84256),colorbar:e(5528),formatLabels:e(90404),calc:e(34335),plot:e(88776),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(26596),selectPoints:e(91560),eventData:e(97476),moduleType:"trace",name:"scatterternary",basePlotModule:e(19352),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},88776:function(ee,R,e){var M=e(96504);ee.exports=function(k,s,T){var b=s.plotContainer;b.select(".scatterlayer").selectAll("*").remove();for(var f=s.xaxis,o=s.yaxis,t={xaxis:f,yaxis:o,plot:b,layerClipId:s._hasClipOnAxisFalse?s.clipIdRelative:null},i=s.layers.frontplot.select("g.scatterlayer"),n=0;n<T.length;n++){var r=T[n];r.length&&(r[0].trace._xA=f,r[0].trace._yA=o)}M(k,t,T,i)}},44524:function(ee,R,e){var M=e(52904),k=e(49084),s=e(29736).axisHoverFormat,T=e(21776).Ks,b=e(2876),f=e(33816).idRegex,o=e(31780).templatedArray,t=e(92880).extendFlat,i=M.marker,n=i.line,r=t(k("marker.line",{editTypeOverride:"calc"}),{width:t({},n.width,{editType:"calc"}),editType:"calc"}),a=t(k("marker"),{symbol:i.symbol,angle:i.angle,size:t({},i.size,{editType:"markerSize"}),sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,opacity:i.opacity,colorbar:i.colorbar,line:r,editType:"calc"});function l(u){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:f[u],editType:"plot"}}}a.color.editType=a.cmin.editType=a.cmax.editType="style",ee.exports={dimensions:o("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:t({},b.text,{}),hovertext:t({},b.hovertext,{}),hovertemplate:T(),xhoverformat:s("x"),yhoverformat:s("y"),marker:a,xaxes:l("x"),yaxes:l("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:b.selected.marker,editType:"calc"},unselected:{marker:b.unselected.marker,editType:"calc"},opacity:b.opacity}},28888:function(ee,R,e){var M=e(24040),k=e(12704);ee.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:e(44524),supplyDefaults:e(69544),colorbar:e(5528),calc:e(66821),plot:e(54840),hoverPoints:e(72248).hoverPoints,selectPoints:e(62500),editStyle:e(83156),meta:{}},M.register(k)},99332:function(ee,R,e){var M=e(13472),k=e(24040),s=e(5048),T=e(84888)._M,b=e(57952),f=e(79811).getFromId,o=e(54460).shouldShowZeroLine,t="splom",i={};function n(a,l,u){for(var h=u.matrixOptions.data.length,c=l._visibleDims,x=u.viewOpts.ranges=new Array(h),p=0;p<c.length;p++){var v=c[p],g=x[p]=new Array(4),y=f(a,l._diag[v][0]);y&&(g[0]=y.r2l(y.range[0]),g[2]=y.r2l(y.range[1]));var m=f(a,l._diag[v][1]);m&&(g[1]=m.r2l(m.range[0]),g[3]=m.r2l(m.range[1]))}u.selectBatch.length||u.unselectBatch.length?u.matrix.update({ranges:x},{ranges:x}):u.matrix.update({ranges:x})}function r(a){var l=a._fullLayout,u=l._glcanvas.data()[0].regl,h=l._splomGrid;h||(h=l._splomGrid=M(u)),h.update(function(c){var x,p=c._context.plotGlPixelRatio,v=c._fullLayout,g=v._size,y=[0,0,v.width*p,v.height*p],m={};function _(H,ne,$,K,Q,Z){$*=p,K*=p,Q*=p,Z*=p;var X=ne[H+"color"],te=ne[H+"width"],ae=String(X+te);ae in m?m[ae].data.push(NaN,NaN,$,K,Q,Z):m[ae]={data:[$,K,Q,Z],join:"rect",thickness:te*p,color:X,viewport:y,range:y,overlay:!1}}for(x in v._splomSubplots){var d,S,w=v._plots[x],E=w.xaxis,C=w.yaxis,O=E._gridVals,P=C._gridVals,z=E._offset,j=E._length,I=C._length,N=g.b+C.domain[0]*g.h,W=-C._m,F=-W*C.r2l(C.range[0],C.calendar);if(E.showgrid)for(x=0;x<O.length;x++)d=z+E.l2p(O[x].x),_("grid",E,d,N,d,N+I);if(C.showgrid)for(x=0;x<P.length;x++)_("grid",C,z,S=N+F+W*P[x].x,z+j,S);o(c,E,C)&&(d=z+E.l2p(0),_("zeroline",E,d,N,d,N+I)),o(c,C,E)&&_("zeroline",C,z,S=N+F+0,z+j,S)}var U=[];for(x in m)U.push(m[x]);return U}(a))}ee.exports={name:t,attr:b.attr,attrRegex:b.attrRegex,layoutAttributes:b.layoutAttributes,supplyLayoutDefaults:b.supplyLayoutDefaults,drawFramework:b.drawFramework,plot:function(a){var l=a._fullLayout,u=k.getModule(t),h=T(a.calcdata,u)[0];s(a,["ANGLE_instanced_arrays","OES_element_index_uint"],i)&&(l._hasOnlyLargeSploms&&r(a),u.plot(a,{},h))},drag:function(a){var l=a.calcdata,u=a._fullLayout;u._hasOnlyLargeSploms&&r(a);for(var h=0;h<l.length;h++){var c=l[h][0].trace,x=u._splomScenes[c.uid];c.type==="splom"&&x&&x.matrix&&n(a,c,x)}},updateGrid:r,clean:function(a,l,u,h){var c,x={};if(h._splomScenes){for(c=0;c<a.length;c++){var p=a[c];p.type==="splom"&&(x[p.uid]=1)}for(c=0;c<u.length;c++){var v=u[c];if(!x[v.uid]){var g=h._splomScenes[v.uid];g&&g.destroy&&g.destroy(),h._splomScenes[v.uid]=null,delete h._splomScenes[v.uid]}}}Object.keys(h._splomScenes||{}).length===0&&delete h._splomScenes,h._splomGrid&&!l._hasOnlyLargeSploms&&h._hasOnlyLargeSploms&&(h._splomGrid.destroy(),h._splomGrid=null,delete h._splomGrid),b.clean(a,l,u,h)},updateFx:b.updateFx,toSVG:b.toSVG,reglPrecompiled:i}},66821:function(ee,R,e){var M=e(3400),k=e(79811),s=e(16356).calcMarkerSize,T=e(16356).calcAxisExpansion,b=e(90136),f=e(84236).markerSelection,o=e(84236).markerStyle,t=e(72308),i=e(39032).BADNUM,n=e(67072).TOO_MANY_POINTS;ee.exports=function(r,a){var l,u,h,c,x,p,v=a.dimensions,g=a._length,y={},m=y.cdata=[],_=y.data=[],d=a._visibleDims=[];function S(E,C){for(var O=E.makeCalcdata({v:C.values,vcalendar:a.calendar},"v"),P=0;P<O.length;P++)O[P]=O[P]===i?NaN:O[P];m.push(O),_.push(E.type==="log"?M.simpleMap(O,E.c2l):O)}for(l=0;l<v.length;l++)if((h=v[l]).visible){if(c=k.getFromId(r,a._diag[l][0]),x=k.getFromId(r,a._diag[l][1]),c&&x&&c.type!==x.type){M.log("Skipping splom dimension "+l+" with conflicting axis types");continue}c?(S(c,h),x&&x.type==="category"&&(x._categories=c._categories.slice())):S(x,h),d.push(l)}for(b(r,a),M.extendFlat(y,o(r,a)),p=m.length*g>n?y.sizeAvg||Math.max(y.size,3):s(a,g),u=0;u<d.length;u++)h=v[l=d[u]],c=k.getFromId(r,a._diag[l][0])||{},x=k.getFromId(r,a._diag[l][1])||{},T(r,a,c,x,m[u],m[u],p);var w=t(r,a);return w.matrix||(w.matrix=!0),w.matrixOptions=y,w.selectedOptions=f(r,a,a.selected),w.unselectedOptions=f(r,a,a.unselected),[{x:!1,y:!1,t:{},trace:a}]}},69544:function(ee,R,e){var M=e(3400),k=e(51272),s=e(44524),T=e(43028),b=e(74428),f=e(26284),o=e(80088).isOpenSymbol;function t(i,n){function r(l,u){return M.coerce(i,n,s.dimensions,l,u)}r("label");var a=r("values");a&&a.length?r("visible"):n.visible=!1,r("axis.type"),r("axis.matches")}ee.exports=function(i,n,r,a){function l(g,y){return M.coerce(i,n,s,g,y)}var u=k(i,n,{name:"dimensions",handleItemDefaults:t}),h=l("diagonal.visible"),c=l("showupperhalf"),x=l("showlowerhalf");if(f(n,u,"values")&&(h||c||x)){l("text"),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat"),b(i,n,r,a,l,{noAngleRef:!0,noStandOff:!0});var p=o(n.marker.symbol),v=T.isBubble(n);l("marker.line.width",p||v?1:0),function(g,y,m,_){var d,S,w=y.dimensions,E=w.length,C=y.showupperhalf,O=y.showlowerhalf,P=y.diagonal.visible,z=new Array(E),j=new Array(E);for(d=0;d<E;d++){var I=d?d+1:"";z[d]="x"+I,j[d]="y"+I}var N=_("xaxes",z),W=_("yaxes",j),F=y._diag=new Array(E);y._xaxes={},y._yaxes={};var U=[],H=[];function ne(ce,fe,pe,ge){if(ce){var me=ce.charAt(0),be=m._splomAxes[me];if(y["_"+me+"axes"][ce]=1,ge.push(ce),!(ce in be)){var ke=be[ce]={};pe&&(ke.label=pe.label||"",pe.visible&&pe.axis&&(pe.axis.type&&(ke.type=pe.axis.type),pe.axis.matches&&(ke.matches=fe)))}}}var $=!P&&!O,K=!P&&!C;for(y._axesDim={},d=0;d<E;d++){var Q=w[d],Z=d===0,X=d===E-1,te=Z&&$||X&&K?void 0:N[d],ae=Z&&K||X&&$?void 0:W[d];ne(te,ae,Q,U),ne(ae,te,Q,H),F[d]=[te,ae],y._axesDim[te]=d,y._axesDim[ae]=d}for(d=0;d<U.length;d++)for(S=0;S<H.length;S++){var se=U[d]+H[S];d>S&&C||d<S&&O?m._splomSubplots[se]=1:d!==S||!P&&O&&C||(m._splomSubplots[se]=1)}(!O||!P&&C&&O)&&(m._splomGridDflt.xside="bottom",m._splomGridDflt.yside="left")}(0,n,a,l),M.coerceSelectionMarkerOpacity(n,l)}else n.visible=!1}},83156:function(ee,R,e){var M=e(3400),k=e(90136),s=e(84236).markerStyle;ee.exports=function(T,b){var f=b.trace,o=T._fullLayout._splomScenes[f.uid];if(o){k(T,f),M.extendFlat(o.matrixOptions,s(T,f));var t=M.extendFlat({},o.matrixOptions,o.viewOpts);o.matrix.update(t,null)}}},50328:function(ee,R){R.getDimIndex=function(e,M){for(var k=M._id,s={x:0,y:1}[k.charAt(0)],T=e._visibleDims,b=0;b<T.length;b++){var f=T[b];if(e._diag[f][s]===k)return b}return!1}},72248:function(ee,R,e){var M=e(50328),k=e(41272).calcHover,s=e(54460).getFromId,T=e(92880).extendFlat;function b(f,o,t,i){var n=f.cd[0].trace,r=f.scene.matrixOptions.cdata,a=f.xa,l=f.ya,u=a.c2p(o),h=l.c2p(t),c=f.distance,x=M.getDimIndex(n,a),p=M.getDimIndex(n,l);if(x===!1||p===!1)return[f];for(var v,g,y=r[x],m=r[p],_=c,d=0;d<y.length;d++)if(!i||d===f.index){var S=y[d],w=m[d],E=a.c2p(S)-u,C=l.c2p(w)-h,O=Math.sqrt(E*E+C*C);(i||O<_)&&(_=g=O,v=d)}return f.index=v,f.distance=_,f.dxy=g,v===void 0?[f]:[k(f,y,m,n)]}ee.exports={hoverPoints:function(f,o,t,i,n){n||(n={});var r=(i||"").charAt(0)==="x",a=(i||"").charAt(0)==="y",l=b(f,o,t);if((r||a)&&n.hoversubplots==="axis"&&l[0])for(var u=(r?f.xa:f.ya)._subplotsWith,h=n.gd,c=T({},f),x=0;x<u.length;x++){var p=u[x];if(p!==f.xa._id+f.ya._id){a?c.xa=s(h,p,"x"):c.ya=s(h,p,"y");var v=b(c,o,t,r||a);l=l.concat(v)}}return l}}},97924:function(ee,R,e){var M=e(28888);M.basePlotModule=e(99332),ee.exports=M},54840:function(ee,R,e){var M=e(55795),k=e(3400),s=e(79811),T=e(72760).selectMode;function b(f,o){var t,i,n,r,a,l=f._fullLayout,u=l._size,h=o.trace,c=o.t,x=l._splomScenes[h.uid],p=x.matrixOptions,v=p.cdata,g=l._glcanvas.data()[0].regl,y=l.dragmode;if(v.length!==0){p.lower=h.showupperhalf,p.upper=h.showlowerhalf,p.diagonal=h.diagonal.visible;var m=h._visibleDims,_=v.length,d=x.viewOpts={};for(d.ranges=new Array(_),d.domains=new Array(_),a=0;a<m.length;a++){n=m[a];var S=d.ranges[a]=new Array(4),w=d.domains[a]=new Array(4);(t=s.getFromId(f,h._diag[n][0]))&&(S[0]=t._rl[0],S[2]=t._rl[1],w[0]=t.domain[0],w[2]=t.domain[1]),(i=s.getFromId(f,h._diag[n][1]))&&(S[1]=i._rl[0],S[3]=i._rl[1],w[1]=i.domain[0],w[3]=i.domain[1])}var E=f._context.plotGlPixelRatio,C=u.l*E,O=u.b*E,P=u.w*E,z=u.h*E;d.viewport=[C,O,P+C,z+O],x.matrix===!0&&(x.matrix=M(g));var j=l.clickmode.indexOf("select")>-1,I=!0;if(T(y)||h.selectedpoints||j){var N=h._length;if(h.selectedpoints){x.selectBatch=h.selectedpoints;var W=h.selectedpoints,F={};for(n=0;n<W.length;n++)F[W[n]]=!0;var U=[];for(n=0;n<N;n++)F[n]||U.push(n);x.unselectBatch=U}var H=c.xpx=new Array(_),ne=c.ypx=new Array(_);for(a=0;a<m.length;a++){if(n=m[a],t=s.getFromId(f,h._diag[n][0]))for(H[a]=new Array(N),r=0;r<N;r++)H[a][r]=t.c2p(v[a][r]);if(i=s.getFromId(f,h._diag[n][1]))for(ne[a]=new Array(N),r=0;r<N;r++)ne[a][r]=i.c2p(v[a][r])}if(x.selectBatch.length||x.unselectBatch.length){var $=k.extendFlat({},p,x.unselectedOptions,d),K=k.extendFlat({},p,x.selectedOptions,d);x.matrix.update($,K),I=!1}}else c.xpx=c.ypx=null;if(I){var Q=k.extendFlat({},p,d);x.matrix.update(Q,null)}}}ee.exports=function(f,o,t){if(t.length)for(var i=0;i<t.length;i++)b(f,t[i][0])}},72308:function(ee,R,e){var M=e(3400);ee.exports=function(k,s){var T=k._fullLayout,b=s.uid,f=T._splomScenes;f||(f=T._splomScenes={});var o={dirty:!0,selectBatch:[],unselectBatch:[]},t=f[s.uid];return t||((t=f[b]=M.extendFlat({},o,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){t.matrix&&t.matrix.draw&&(t.selectBatch.length||t.unselectBatch.length?t.matrix.draw(t.unselectBatch,t.selectBatch):t.matrix.draw()),t.dirty=!1},t.destroy=function(){t.matrix&&t.matrix.destroy&&t.matrix.destroy(),t.matrixOptions=null,t.selectBatch=null,t.unselectBatch=null,t=null}),t.dirty||M.extendFlat(t,o),t}},62500:function(ee,R,e){var M=e(3400),k=M.pushUnique,s=e(43028),T=e(50328);ee.exports=function(b,f){var o=b.cd,t=o[0].trace,i=o[0].t,n=b.scene,r=n.matrixOptions.cdata,a=b.xaxis,l=b.yaxis,u=[];if(!n)return u;var h=!s.hasMarkers(t)&&!s.hasText(t);if(t.visible!==!0||h)return u;var c=T.getDimIndex(t,a),x=T.getDimIndex(t,l);if(c===!1||x===!1)return u;var p=i.xpx[c],v=i.ypx[x],g=r[c],y=r[x],m=(b.scene.selectBatch||[]).slice(),_=[];if(f!==!1&&!f.degenerate)for(var d=0;d<g.length;d++)f.contains([p[d],v[d]],null,d,b)?(u.push({pointNumber:d,x:g[d],y:y[d]}),k(m,d)):m.indexOf(d)!==-1?k(m,d):_.push(d);var S=n.matrixOptions;return m.length||_.length?n.selectBatch.length||n.unselectBatch.length||n.matrix.update(n.unselectedOptions,M.extendFlat({},S,n.selectedOptions,n.viewOpts)):n.matrix.update(S,null),n.selectBatch=m,n.unselectBatch=_,u}},90167:function(ee,R,e){var M=e(49084),k=e(29736).axisHoverFormat,s=e(21776).Ks,T=e(52948),b=e(45464),f=e(92880).extendFlat,o={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:s({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:k("u",1),vhoverformat:k("v",1),whoverformat:k("w",1),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),showlegend:f({},b.showlegend,{dflt:!1})};f(o,M("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){o[t]=T[t]}),o.hoverinfo=f({},b.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),o.transforms=void 0,ee.exports=o},3832:function(ee,R,e){var M=e(3400),k=e(47128);function s(f){var o,t,i,n,r,a,l,u,h,c,x,p,v=f._x,g=f._y,y=f._z,m=f._len,_=-1/0,d=1/0,S=-1/0,w=1/0,E=-1/0,C=1/0,O="";for(m&&(l=v[0],h=g[0],x=y[0]),m>1&&(u=v[m-1],c=g[m-1],p=y[m-1]),o=0;o<m;o++)_=Math.max(_,v[o]),d=Math.min(d,v[o]),S=Math.max(S,g[o]),w=Math.min(w,g[o]),E=Math.max(E,y[o]),C=Math.min(C,y[o]),n||v[o]===l||(n=!0,O+="x"),r||g[o]===h||(r=!0,O+="y"),a||y[o]===x||(a=!0,O+="z");n||(O+="x"),r||(O+="y"),a||(O+="z");var P=T(f._x),z=T(f._y),j=T(f._z);O=(O=(O=O.replace("x",(l>u?"-":"+")+"x")).replace("y",(h>c?"-":"+")+"y")).replace("z",(x>p?"-":"+")+"z");var I=function(){m=0,P=[],z=[],j=[]};(!m||m<P.length*z.length*j.length)&&I();var N=function(me){return me==="x"?v:me==="y"?g:y},W=function(me){return me==="x"?P:me==="y"?z:j},F=function(me){return me[m-1]<me[0]?-1:1},U=N(O[1]),H=N(O[3]),ne=N(O[5]),$=W(O[1]).length,K=W(O[3]).length,Q=W(O[5]).length,Z=!1,X=function(me,be,ke){return $*(K*me+be)+ke},te=F(N(O[1])),ae=F(N(O[3])),se=F(N(O[5]));for(o=0;o<Q-1;o++){for(t=0;t<K-1;t++){for(i=0;i<$-1;i++){var ce=X(o,t,i),fe=X(o,t,i+1),pe=X(o,t+1,i),ge=X(o+1,t,i);if(U[ce]*te<U[fe]*te&&H[ce]*ae<H[pe]*ae&&ne[ce]*se<ne[ge]*se||(Z=!0),Z)break}if(Z)break}if(Z)break}return Z&&(M.warn("Encountered arbitrary coordinates! Unable to input data grid."),I()),{xMin:d,yMin:w,zMin:C,xMax:_,yMax:S,zMax:E,Xs:P,Ys:z,Zs:j,len:m,fill:O}}function T(f){return M.distinctVals(f).vals}function b(f,o){if(o===void 0&&(o=f.length),M.isTypedArray(f))return f.subarray(0,o);for(var t=[],i=0;i<o;i++)t[i]=+f[i];return t}ee.exports={calc:function(f,o){o._len=Math.min(o.u.length,o.v.length,o.w.length,o.x.length,o.y.length,o.z.length),o._u=b(o.u,o._len),o._v=b(o.v,o._len),o._w=b(o.w,o._len),o._x=b(o.x,o._len),o._y=b(o.y,o._len),o._z=b(o.z,o._len);var t=s(o);o._gridFill=t.fill,o._Xs=t.Xs,o._Ys=t.Ys,o._Zs=t.Zs,o._len=t.len;var i,n,r,a=0;o.starts&&(i=b(o.starts.x||[]),n=b(o.starts.y||[]),r=b(o.starts.z||[]),a=Math.min(i.length,n.length,r.length)),o._startsX=i||[],o._startsY=n||[],o._startsZ=r||[];var l,u=0,h=1/0;for(l=0;l<o._len;l++){var c=o._u[l],x=o._v[l],p=o._w[l],v=Math.sqrt(c*c+x*x+p*p);u=Math.max(u,v),h=Math.min(h,v)}for(k(f,o,{vals:[h,u],containerStr:"",cLetter:"c"}),l=0;l<a;l++){var g=i[l];t.xMax=Math.max(t.xMax,g),t.xMin=Math.min(t.xMin,g);var y=n[l];t.yMax=Math.max(t.yMax,y),t.yMin=Math.min(t.yMin,y);var m=r[l];t.zMax=Math.max(t.zMax,m),t.zMin=Math.min(t.zMin,m)}o._slen=a,o._normMax=u,o._xbnds=[t.xMin,t.xMax],o._ybnds=[t.yMin,t.yMax],o._zbnds=[t.zMin,t.zMax]},filter:b,processGrid:s}},25668:function(ee,R,e){var M=e(67792).gl_streamtube3d,k=M.createTubeMesh,s=e(3400),T=e(33040).parseColorScale,b=e(8932).extractOpts,f=e(52094),o={xaxis:0,yaxis:1,zaxis:2};function t(l,u){this.scene=l,this.uid=u,this.mesh=null,this.data=null}var i=t.prototype;function n(l){var u=l.length;return u>2?l.slice(1,u-1):u===2?[(l[0]+l[1])/2]:l}function r(l){var u=l.length;return u===1?[.5,.5]:[l[1]-l[0],l[u-1]-l[u-2]]}function a(l,u){var h=l.fullSceneLayout,c=l.dataScale,x=u._len,p={};function v($,K){var Q=h[K],Z=c[o[K]];return s.simpleMap($,function(X){return Q.d2l(X)*Z})}if(p.vectors=f(v(u._u,"xaxis"),v(u._v,"yaxis"),v(u._w,"zaxis"),x),!x)return{positions:[],cells:[]};var g=v(u._Xs,"xaxis"),y=v(u._Ys,"yaxis"),m=v(u._Zs,"zaxis");if(p.meshgrid=[g,y,m],p.gridFill=u._gridFill,u._slen)p.startingPositions=f(v(u._startsX,"xaxis"),v(u._startsY,"yaxis"),v(u._startsZ,"zaxis"));else{for(var _=y[0],d=n(g),S=n(m),w=new Array(d.length*S.length),E=0,C=0;C<d.length;C++)for(var O=0;O<S.length;O++)w[E++]=[d[C],_,S[O]];p.startingPositions=w}p.colormap=T(u),p.tubeSize=u.sizeref,p.maxLength=u.maxdisplayed;var P=v(u._xbnds,"xaxis"),z=v(u._ybnds,"yaxis"),j=v(u._zbnds,"zaxis"),I=r(g),N=r(y),W=r(m),F=[[P[0]-I[0],z[0]-N[0],j[0]-W[0]],[P[1]+I[1],z[1]+N[1],j[1]+W[1]]],U=M(p,F),H=b(u);U.vertexIntensityBounds=[H.min/u._normMax,H.max/u._normMax];var ne=u.lightposition;return U.lightPosition=[ne.x,ne.y,ne.z],U.ambient=u.lighting.ambient,U.diffuse=u.lighting.diffuse,U.specular=u.lighting.specular,U.roughness=u.lighting.roughness,U.fresnel=u.lighting.fresnel,U.opacity=u.opacity,u._pad=U.tubeScale*u.sizeref*2,U}i.handlePick=function(l){var u=this.scene.fullSceneLayout,h=this.scene.dataScale;function c(v,g){var y=u[g],m=h[o[g]];return y.l2c(v)/m}if(l.object===this.mesh){var x=l.data.position,p=l.data.velocity;return l.traceCoordinate=[c(x[0],"xaxis"),c(x[1],"yaxis"),c(x[2],"zaxis"),c(p[0],"xaxis"),c(p[1],"yaxis"),c(p[2],"zaxis"),l.data.intensity*this.data._normMax,l.data.divergence],l.textLabel=this.data.hovertext||this.data.text,!0}},i.update=function(l){this.data=l;var u=a(this.scene,l);this.mesh.update(u)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ee.exports=function(l,u){var h=l.glplot.gl,c=a(l,u),x=k(h,c),p=new t(l,u.uid);return p.mesh=x,p.data=u,x._trace=p,l.glplot.add(x),p}},54304:function(ee,R,e){var M=e(3400),k=e(27260),s=e(90167);ee.exports=function(T,b,f,o){function t(h,c){return M.coerce(T,b,s,h,c)}var i=t("u"),n=t("v"),r=t("w"),a=t("x"),l=t("y"),u=t("z");i&&i.length&&n&&n.length&&r&&r.length&&a&&a.length&&l&&l.length&&u&&u.length?(t("starts.x"),t("starts.y"),t("starts.z"),t("maxdisplayed"),t("sizeref"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),k(T,b,o,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),b._length=null):b.visible=!1}},15436:function(ee,R,e){ee.exports={moduleType:"trace",name:"streamtube",basePlotModule:e(12536),categories:["gl3d","showLegend"],attributes:e(90167),supplyDefaults:e(54304),colorbar:{min:"cmin",max:"cmax"},calc:e(3832).calc,plot:e(25668),eventData:function(M,k){return M.tubex=M.x,M.tubey=M.y,M.tubez=M.z,M.tubeu=k.traceCoordinate[3],M.tubev=k.traceCoordinate[4],M.tubew=k.traceCoordinate[5],M.norm=k.traceCoordinate[6],M.divergence=k.traceCoordinate[7],delete M.x,delete M.y,delete M.z,M},meta:{}}},424:function(ee,R,e){var M=e(45464),k=e(21776).Ks,s=e(21776).Gw,T=e(49084),b=e(86968).u,f=e(74996),o=e(27328),t=e(92880).extendFlat,i=e(98192).c;ee.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:t({colors:{valType:"data_array",editType:"calc"},line:{color:t({},f.marker.line.color,{dflt:null}),width:t({},f.marker.line.width,{dflt:1}),editType:"calc"},pattern:i,editType:"calc"},T("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:f.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:s({editType:"plot"},{keys:o.eventDataKeys.concat(["label","value"])}),hovertext:f.hovertext,hoverinfo:t({},M.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:k({},{keys:o.eventDataKeys}),textfont:f.textfont,insidetextorientation:f.insidetextorientation,insidetextfont:f.insidetextfont,outsidetextfont:t({},f.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:f.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:b({name:"sunburst",trace:!0,editType:"calc"})}},54904:function(ee,R,e){var M=e(7316);R.name="sunburst",R.plot=function(k,s,T,b){M.plotBasePlot(R.name,k,s,T,b)},R.clean=function(k,s,T,b){M.cleanBasePlot(R.name,k,s,T,b)}},3776:function(ee,R,e){var M=e(74148),k=e(38248),s=e(3400),T=e(8932).makeColorScaleFuncFromTrace,b=e(45768).makePullColorFn,f=e(45768).generateExtendedColors,o=e(8932).calc,t=e(39032).ALMOST_EQUAL,i={},n={},r={};function a(l,u,h){var c=0,x=l.children;if(x){for(var p=x.length,v=0;v<p;v++)c+=a(x[v],u,h);h.branches&&c++}else h.leaves&&c++;return l.value=l.data.data.value=c,u._values||(u._values=[]),u._values[l.data.data.i]=c,c}R.calc=function(l,u){var h,c,x,p,v,g,y=l._fullLayout,m=u.ids,_=s.isArrayOrTypedArray(m),d=u.labels,S=u.parents,w=u.values,E=s.isArrayOrTypedArray(w),C=[],O={},P={},z=function(se){return se||typeof se=="number"},j=function(se){return!E||k(w[se])&&w[se]>=0};_?(h=Math.min(m.length,S.length),c=function(se){return z(m[se])&&j(se)},x=function(se){return String(m[se])}):(h=Math.min(d.length,S.length),c=function(se){return z(d[se])&&j(se)},x=function(se){return String(d[se])}),E&&(h=Math.min(h,w.length));for(var I=0;I<h;I++)if(c(I)){var N=x(I),W=z(S[I])?String(S[I]):"",F={i:I,id:N,pid:W,label:z(d[I])?String(d[I]):""};E&&(F.v=+w[I]),C.push(F),v=N,O[p=W]?O[p].push(v):O[p]=[v],P[v]=1}if(O[""]){if(O[""].length>1){for(var U=s.randstr(),H=0;H<C.length;H++)C[H].pid===""&&(C[H].pid=U);C.unshift({hasMultipleRoots:!0,id:U,pid:"",label:""})}}else{var ne,$=[];for(ne in O)P[ne]||$.push(ne);if($.length!==1)return s.warn(["Multiple implied roots, cannot build",u.type,"hierarchy of",u.name+".","These roots include:",$.join(", ")].join(" "));ne=$[0],C.unshift({hasImpliedRoot:!0,id:ne,pid:"",label:ne})}try{g=M.stratify().id(function(se){return se.id}).parentId(function(se){return se.pid})(C)}catch(se){return s.warn(["Failed to build",u.type,"hierarchy of",u.name+".","Error:",se.message].join(" "))}var K=M.hierarchy(g),Q=!1;if(E)switch(u.branchvalues){case"remainder":K.sum(function(se){return se.data.v});break;case"total":K.each(function(se){var ce=se.data.data,fe=ce.v;if(se.children){var pe=se.children.reduce(function(ge,me){return ge+me.data.data.v},0);if((ce.hasImpliedRoot||ce.hasMultipleRoots)&&(fe=pe),fe<pe*t)return Q=!0,s.warn(["Total value for node",se.data.data.id,"of",u.name,"is smaller than the sum of its children.",`
parent value =`,fe,`
children sum =`,pe].join(" "))}se.value=fe})}else a(K,u,{branches:u.count.indexOf("branches")!==-1,leaves:u.count.indexOf("leaves")!==-1});if(!Q){var Z,X;u.sort&&K.sort(function(se,ce){return ce.value-se.value});var te=u.marker.colors||[],ae=!!te.length;return u._hasColorscale?(ae||(te=E?u.values:u._values),o(l,u,{vals:te,containerStr:"marker",cLetter:"c"}),X=T(u.marker)):Z=b(y["_"+u.type+"colormap"]),K.each(function(se){var ce=se.data.data;ce.color=u._hasColorscale?X(te[ce.i]):Z(te[ce.i],ce.id)}),C[0].hierarchy=K,C}},R._runCrossTraceCalc=function(l,u){var h=u._fullLayout,c=u.calcdata,x=h[l+"colorway"],p=h["_"+l+"colormap"];h["extend"+l+"colors"]&&(x=f(x,l==="icicle"?r:l==="treemap"?n:i));var v,g=0;function y(d){var S=d.data.data,w=S.id;S.color===!1&&(p[w]?S.color=p[w]:d.parent?d.parent.parent?S.color=d.parent.data.data.color:(p[w]=S.color=x[g%x.length],g++):S.color=v)}for(var m=0;m<c.length;m++){var _=c[m][0];_.trace.type===l&&_.hierarchy&&(v=_.trace.root.color,_.hierarchy.each(y))}},R.crossTraceCalc=function(l){return R._runCrossTraceCalc("sunburst",l)}},27328:function(ee){ee.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},25244:function(ee,R,e){var M=e(3400),k=e(424),s=e(86968).Q,T=e(31508).handleText,b=e(74174).handleMarkerDefaults,f=e(8932),o=f.hasColorscale,t=f.handleDefaults;ee.exports=function(i,n,r,a){function l(v,g){return M.coerce(i,n,k,v,g)}var u=l("labels"),h=l("parents");if(u&&u.length&&h&&h.length){var c=l("values");c&&c.length?l("branchvalues"):l("count"),l("level"),l("maxdepth"),b(i,n,a,l);var x=n._hasColorscale=o(i,"marker","colors")||(i.marker||{}).coloraxis;x&&t(i,n,a,l,{prefix:"marker.",cLetter:"c"}),l("leaf.opacity",x?1:.7);var p=l("text");l("texttemplate"),n.texttemplate||l("textinfo",M.isArrayOrTypedArray(p)?"text+label":"label"),l("hovertext"),l("hovertemplate"),T(i,n,a,l,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),l("insidetextorientation"),l("sort"),l("rotation"),l("root.color"),s(n,a,l),n._length=null}else n.visible=!1}},60404:function(ee,R,e){var M=e(43616),k=e(76308);ee.exports=function(s,T,b,f,o){var t=T.data.data,i=t.i,n=o||t.color;if(i>=0){T.i=t.i;var r=b.marker;r.pattern&&r.colors&&r.pattern.shape||(r.color=n,T.color=n),M.pointStyle(s,b,f,T)}else k.fill(s,n)}},45716:function(ee,R,e){var M=e(33428),k=e(24040),s=e(10624).appendArrayPointValue,T=e(93024),b=e(3400),f=e(95924),o=e(78176),t=e(69656).formatPieValue;function i(n,r,a){for(var l=n.data.data,u={curveNumber:r.index,pointNumber:l.i,data:r._input,fullData:r},h=0;h<a.length;h++){var c=a[h];c in n&&(u[c]=n[c])}return"parentString"in n&&!o.isHierarchyRoot(n)&&(u.parent=n.parentString),s(u,r,l.i),u}ee.exports=function(n,r,a,l,u){var h=l[0],c=h.trace,x=h.hierarchy,p=c.type==="sunburst",v=c.type==="treemap"||c.type==="icicle";"_hasHoverLabel"in c||(c._hasHoverLabel=!1),"_hasHoverEvent"in c||(c._hasHoverEvent=!1),n.on("mouseover",function(g){var y=a._fullLayout;if(!a._dragging&&y.hovermode!==!1){var m,_=a._fullData[c.index],d=g.data.data,S=d.i,w=o.isHierarchyRoot(g),E=o.getParent(x,g),C=o.getValue(g),O=function(te){return b.castOption(_,S,te)},P=O("hovertemplate"),z=T.castHoverinfo(_,y,S),j=y.separators;if(P||z&&z!=="none"&&z!=="skip"){var I,N;p&&(I=h.cx+g.pxmid[0]*(1-g.rInscribed),N=h.cy+g.pxmid[1]*(1-g.rInscribed)),v&&(I=g._hoverX,N=g._hoverY);var W,F={},U=[],H=[],ne=function(te){return U.indexOf(te)!==-1};z&&(U=z==="all"?_._module.attributes.hoverinfo.flags:z.split("+")),F.label=d.label,ne("label")&&F.label&&H.push(F.label),d.hasOwnProperty("v")&&(F.value=d.v,F.valueLabel=t(F.value,j),ne("value")&&H.push(F.valueLabel)),F.currentPath=g.currentPath=o.getPath(g.data),ne("current path")&&!w&&H.push(F.currentPath);var $=[],K=function(){$.indexOf(W)===-1&&(H.push(W),$.push(W))};F.percentParent=g.percentParent=C/o.getValue(E),F.parent=g.parentString=o.getPtLabel(E),ne("percent parent")&&(W=o.formatPercent(F.percentParent,j)+" of "+F.parent,K()),F.percentEntry=g.percentEntry=C/o.getValue(r),F.entry=g.entry=o.getPtLabel(r),!ne("percent entry")||w||g.onPathbar||(W=o.formatPercent(F.percentEntry,j)+" of "+F.entry,K()),F.percentRoot=g.percentRoot=C/o.getValue(x),F.root=g.root=o.getPtLabel(x),ne("percent root")&&!w&&(W=o.formatPercent(F.percentRoot,j)+" of "+F.root,K()),F.text=O("hovertext")||O("text"),ne("text")&&(W=F.text,b.isValidTextValue(W)&&H.push(W)),m=[i(g,_,u.eventDataKeys)];var Q={trace:_,y:N,_x0:g._x0,_x1:g._x1,_y0:g._y0,_y1:g._y1,text:H.join("<br>"),name:P||ne("name")?_.name:void 0,color:O("hoverlabel.bgcolor")||d.color,borderColor:O("hoverlabel.bordercolor"),fontFamily:O("hoverlabel.font.family"),fontSize:O("hoverlabel.font.size"),fontColor:O("hoverlabel.font.color"),fontWeight:O("hoverlabel.font.weight"),fontStyle:O("hoverlabel.font.style"),fontVariant:O("hoverlabel.font.variant"),nameLength:O("hoverlabel.namelength"),textAlign:O("hoverlabel.align"),hovertemplate:P,hovertemplateLabels:F,eventData:m};p&&(Q.x0=I-g.rInscribed*g.rpx1,Q.x1=I+g.rInscribed*g.rpx1,Q.idealAlign=g.pxmid[0]<0?"left":"right"),v&&(Q.x=I,Q.idealAlign=I<0?"left":"right");var Z=[];T.loneHover(Q,{container:y._hoverlayer.node(),outerContainer:y._paper.node(),gd:a,inOut_bbox:Z}),m[0].bbox=Z[0],c._hasHoverLabel=!0}if(v){var X=n.select("path.surface");u.styleOne(X,g,_,a,{hovered:!0})}c._hasHoverEvent=!0,a.emit("plotly_hover",{points:m||[i(g,_,u.eventDataKeys)],event:M.event})}}),n.on("mouseout",function(g){var y=a._fullLayout,m=a._fullData[c.index],_=M.select(this).datum();if(c._hasHoverEvent&&(g.originalEvent=M.event,a.emit("plotly_unhover",{points:[i(_,m,u.eventDataKeys)],event:M.event}),c._hasHoverEvent=!1),c._hasHoverLabel&&(T.loneUnhover(y._hoverlayer.node()),c._hasHoverLabel=!1),v){var d=n.select("path.surface");u.styleOne(d,_,m,a,{hovered:!1})}}),n.on("click",function(g){var y=a._fullLayout,m=a._fullData[c.index],_=p&&(o.isHierarchyRoot(g)||o.isLeaf(g)),d=o.getPtId(g),S=o.isEntry(g)?o.findEntryWithChild(x,d):o.findEntryWithLevel(x,d),w=o.getPtId(S),E={points:[i(g,m,u.eventDataKeys)],event:M.event};_||(E.nextLevel=w);var C=f.triggerHandler(a,"plotly_"+c.type+"click",E);if(C!==!1&&y.hovermode&&(a._hoverdata=[i(g,m,u.eventDataKeys)],T.click(a,M.event)),!_&&C!==!1&&!a._dragging&&!a._transitioning){k.call("_storeDirectGUIEdit",m,y._tracePreGUI[m.uid],{level:m.level});var O={data:[{level:w}],traces:[c.index]},P={frame:{redraw:!1,duration:u.transitionTime},transition:{duration:u.transitionTime,easing:u.transitionEasing},mode:"immediate",fromcurrent:!0};T.loneUnhover(y._hoverlayer.node()),k.call("animate",a,O,P)}})}},78176:function(ee,R,e){var M=e(3400),k=e(76308),s=e(93972),T=e(69656);function b(f){return f.data.data.pid}R.findEntryWithLevel=function(f,o){var t;return o&&f.eachAfter(function(i){if(R.getPtId(i)===o)return t=i.copy()}),t||f},R.findEntryWithChild=function(f,o){var t;return f.eachAfter(function(i){for(var n=i.children||[],r=0;r<n.length;r++){var a=n[r];if(R.getPtId(a)===o)return t=i.copy()}}),t||f},R.isEntry=function(f){return!f.parent},R.isLeaf=function(f){return!f.children},R.getPtId=function(f){return f.data.data.id},R.getPtLabel=function(f){return f.data.data.label},R.getValue=function(f){return f.value},R.isHierarchyRoot=function(f){return b(f)===""},R.setSliceCursor=function(f,o,t){var i=t.isTransitioning;if(!i){var n=f.datum();i=t.hideOnRoot&&R.isHierarchyRoot(n)||t.hideOnLeaves&&R.isLeaf(n)}s(f,i?null:"pointer")},R.getInsideTextFontKey=function(f,o,t,i,n){var r=(n||{}).onPathbar?"pathbar.textfont":"insidetextfont",a=t.data.data.i;return M.castOption(o,a,r+"."+f)||M.castOption(o,a,"textfont."+f)||i.size},R.getOutsideTextFontKey=function(f,o,t,i){var n=t.data.data.i;return M.castOption(o,n,"outsidetextfont."+f)||M.castOption(o,n,"textfont."+f)||i.size},R.isOutsideText=function(f,o){return!f._hasColorscale&&R.isHierarchyRoot(o)},R.determineTextFont=function(f,o,t,i){return R.isOutsideText(f,o)?function(n,r,a){return{color:R.getOutsideTextFontKey("color",n,r,a),family:R.getOutsideTextFontKey("family",n,r,a),size:R.getOutsideTextFontKey("size",n,r,a),weight:R.getOutsideTextFontKey("weight",n,r,a),style:R.getOutsideTextFontKey("style",n,r,a),variant:R.getOutsideTextFontKey("variant",n,r,a),textcase:R.getOutsideTextFontKey("textcase",n,r,a),lineposition:R.getOutsideTextFontKey("lineposition",n,r,a),shadow:R.getOutsideTextFontKey("shadow",n,r,a)}}(f,o,t):function(n,r,a,l){var u=(l||{}).onPathbar,h=r.data.data,c=h.i,x=M.castOption(n,c,(u?"pathbar.textfont":"insidetextfont")+".color");return!x&&n._input.textfont&&(x=M.castOption(n._input,c,"textfont.color")),{color:x||k.contrast(h.color),family:R.getInsideTextFontKey("family",n,r,a,l),size:R.getInsideTextFontKey("size",n,r,a,l),weight:R.getInsideTextFontKey("weight",n,r,a,l),style:R.getInsideTextFontKey("style",n,r,a,l),variant:R.getInsideTextFontKey("variant",n,r,a,l),textcase:R.getInsideTextFontKey("textcase",n,r,a,l),lineposition:R.getInsideTextFontKey("lineposition",n,r,a,l),shadow:R.getInsideTextFontKey("shadow",n,r,a,l)}}(f,o,t,i)},R.hasTransition=function(f){return!!(f&&f.duration>0)},R.getMaxDepth=function(f){return f.maxdepth>=0?f.maxdepth:1/0},R.isHeader=function(f,o){return!(R.isLeaf(f)||f.depth===o._maxDepth-1)},R.getParent=function(f,o){return R.findEntryWithLevel(f,b(o))},R.listPath=function(f,o){var t=f.parent;if(!t)return[];var i=o?[t.data[o]]:[t];return R.listPath(t,o).concat(i)},R.getPath=function(f){return R.listPath(f,"label").join("/")+"/"},R.formatValue=T.formatPieValue,R.formatPercent=function(f,o){var t=M.formatPercent(f,0);return t==="0%"&&(t=T.formatPiePercent(f,o)),t}},5621:function(ee,R,e){ee.exports={moduleType:"trace",name:"sunburst",basePlotModule:e(54904),categories:[],animatable:!0,attributes:e(424),layoutAttributes:e(84920),supplyDefaults:e(25244),supplyLayoutDefaults:e(28732),calc:e(3776).calc,crossTraceCalc:e(3776).crossTraceCalc,plot:e(96488).plot,style:e(85676).style,colorbar:e(5528),meta:{}}},84920:function(ee){ee.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},28732:function(ee,R,e){var M=e(3400),k=e(84920);ee.exports=function(s,T){function b(f,o){return M.coerce(s,T,k,f,o)}b("sunburstcolorway",T.colorway),b("extendsunburstcolors")}},96488:function(ee,R,e){var M=e(33428),k=e(74148),s=e(67756).qy,T=e(43616),b=e(3400),f=e(72736),o=e(82744),t=o.recordMinTextSize,i=o.clearMinTextSize,n=e(37820),r=e(69656).getRotationAngle,a=n.computeTransform,l=n.transformInsideText,u=e(85676).styleOne,h=e(60100).resizeText,c=e(45716),x=e(27328),p=e(78176);function v(y,m,_,d){var S=y._context.staticPlot,w=y._fullLayout,E=!w.uniformtext.mode&&p.hasTransition(d),C=M.select(_).selectAll("g.slice"),O=m[0],P=O.trace,z=O.hierarchy,j=p.findEntryWithLevel(z,P.level),I=p.getMaxDepth(P),N=w._size,W=P.domain,F=N.w*(W.x[1]-W.x[0]),U=N.h*(W.y[1]-W.y[0]),H=.5*Math.min(F,U),ne=O.cx=N.l+N.w*(W.x[1]+W.x[0])/2,$=O.cy=N.t+N.h*(1-W.y[0])-U/2;if(!j)return C.remove();var K=null,Q={};E&&C.each(function(ie){Q[p.getPtId(ie)]={rpx0:ie.rpx0,rpx1:ie.rpx1,x0:ie.x0,x1:ie.x1,transform:ie.transform},!K&&p.isEntry(ie)&&(K=ie)});var Z=function(ie){return k.partition().size([2*Math.PI,ie.height+1])(ie)}(j).descendants(),X=j.height+1,te=0,ae=I;O.hasMultipleRoots&&p.isHierarchyRoot(j)&&(Z=Z.slice(1),X-=1,te=1,ae+=1),Z=Z.filter(function(ie){return ie.y1<=ae});var se=r(P.rotation);se&&Z.forEach(function(ie){ie.x0+=se,ie.x1+=se});var ce=Math.min(X,I),fe=function(ie){return(ie-te)/ce*H},pe=function(ie,he){return[ie*Math.cos(he),-ie*Math.sin(he)]},ge=function(ie){return b.pathAnnulus(ie.rpx0,ie.rpx1,ie.x0,ie.x1,ne,$)},me=function(ie){return ne+g(ie)[0]*(ie.transform.rCenter||0)+(ie.transform.x||0)},be=function(ie){return $+g(ie)[1]*(ie.transform.rCenter||0)+(ie.transform.y||0)};(C=C.data(Z,p.getPtId)).enter().append("g").classed("slice",!0),E?C.exit().transition().each(function(){var ie=M.select(this);ie.select("path.surface").transition().attrTween("d",function(he){var Se=function(ye){var we,Me=p.getPtId(ye),Oe=Q[Me],Ie=Q[p.getPtId(j)];if(Ie){var de=(ye.x1>Ie.x1?2*Math.PI:0)+se;we=ye.rpx1<Ie.rpx1?{x0:ye.x0,x1:ye.x1,rpx0:0,rpx1:0}:{x0:de,x1:de,rpx0:ye.rpx0,rpx1:ye.rpx1}}else{var _e,Ae=p.getPtId(ye.parent);C.each(function(Ye){if(p.getPtId(Ye)===Ae)return _e=Ye});var Pe,Ee=_e.children;Ee.forEach(function(Ye,tt){if(p.getPtId(Ye)===Me)return Pe=tt});var Fe=Ee.length,Ve=s(_e.x0,_e.x1);we={rpx0:H,rpx1:H,x0:Ve(Pe/Fe),x1:Ve((Pe+1)/Fe)}}return s(Oe,we)}(he);return function(ye){return ge(Se(ye))}}),ie.select("g.slicetext").attr("opacity",0)}).remove():C.exit().remove(),C.order();var ke=null;if(E&&K){var ze=p.getPtId(K);C.each(function(ie){ke===null&&p.getPtId(ie)===ze&&(ke=ie.x1)})}var ve=C;function oe(ie){var he=ie.parent,Se=Q[p.getPtId(he)],ye={};if(Se){var we=he.children,Me=we.indexOf(ie),Oe=we.length,Ie=s(Se.x0,Se.x1);ye.x0=Ie(Me/Oe),ye.x1=Ie(Me/Oe)}else ye.x0=ye.x1=0;return ye}E&&(ve=ve.transition().each("end",function(){var ie=M.select(this);p.setSliceCursor(ie,y,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),ve.each(function(ie){var he=M.select(this),Se=b.ensureSingle(he,"path","surface",function(de){de.style("pointer-events",S?"none":"all")});ie.rpx0=fe(ie.y0),ie.rpx1=fe(ie.y1),ie.xmid=(ie.x0+ie.x1)/2,ie.pxmid=pe(ie.rpx1,ie.xmid),ie.midangle=-(ie.xmid-Math.PI/2),ie.startangle=-(ie.x0-Math.PI/2),ie.stopangle=-(ie.x1-Math.PI/2),ie.halfangle=.5*Math.min(b.angleDelta(ie.x0,ie.x1)||Math.PI,Math.PI),ie.ring=1-ie.rpx0/ie.rpx1,ie.rInscribed=function(de){return de.rpx0===0&&b.isFullCircle([de.x0,de.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(de.halfangle)),de.ring/2))}(ie),E?Se.transition().attrTween("d",function(de){var _e=function(Ae){var Pe,Ee=Q[p.getPtId(Ae)],Fe={x0:Ae.x0,x1:Ae.x1,rpx0:Ae.rpx0,rpx1:Ae.rpx1};if(Ee)Pe=Ee;else if(K)if(Ae.parent)if(ke){var Ve=(Ae.x1>ke?2*Math.PI:0)+se;Pe={x0:Ve,x1:Ve}}else Pe={rpx0:H,rpx1:H},b.extendFlat(Pe,oe(Ae));else Pe={rpx0:0,rpx1:0};else Pe={x0:se,x1:se};return s(Pe,Fe)}(de);return function(Ae){return ge(_e(Ae))}}):Se.attr("d",ge),he.call(c,j,y,m,{eventDataKeys:x.eventDataKeys,transitionTime:x.CLICK_TRANSITION_TIME,transitionEasing:x.CLICK_TRANSITION_EASING}).call(p.setSliceCursor,y,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:y._transitioning}),Se.call(u,ie,P,y);var ye=b.ensureSingle(he,"g","slicetext"),we=b.ensureSingle(ye,"text","",function(de){de.attr("data-notex",1)}),Me=b.ensureUniformFontSize(y,p.determineTextFont(P,ie,w.font));we.text(R.formatSliceLabel(ie,j,P,m,w)).classed("slicetext",!0).attr("text-anchor","middle").call(T.font,Me).call(f.convertToTspans,y);var Oe=T.bBox(we.node());ie.transform=l(Oe,ie,O),ie.transform.targetX=me(ie),ie.transform.targetY=be(ie);var Ie=function(de,_e){var Ae=de.transform;return a(Ae,_e),Ae.fontSize=Me.size,t(P.type,Ae,w),b.getTextTransform(Ae)};E?we.transition().attrTween("transform",function(de){var _e=function(Ae){var Pe,Ee=Q[p.getPtId(Ae)],Fe=Ae.transform;if(Ee)Pe=Ee;else if(Pe={rpx1:Ae.rpx1,transform:{textPosAngle:Fe.textPosAngle,scale:0,rotate:Fe.rotate,rCenter:Fe.rCenter,x:Fe.x,y:Fe.y}},K)if(Ae.parent)if(ke){var Ve=Ae.x1>ke?2*Math.PI:0;Pe.x0=Pe.x1=Ve}else b.extendFlat(Pe,oe(Ae));else Pe.x0=Pe.x1=se;else Pe.x0=Pe.x1=se;var Ye=s(Pe.transform.textPosAngle,Ae.transform.textPosAngle),tt=s(Pe.rpx1,Ae.rpx1),nt=s(Pe.x0,Ae.x0),ht=s(Pe.x1,Ae.x1),vt=s(Pe.transform.scale,Fe.scale),pt=s(Pe.transform.rotate,Fe.rotate),Qe=Fe.rCenter===0?3:Pe.transform.rCenter===0?1/3:1,Ke=s(Pe.transform.rCenter,Fe.rCenter);return function(Mt){var Ot=tt(Mt),Pt=nt(Mt),St=ht(Mt),He=function(Be){return Ke(Math.pow(Be,Qe))}(Mt),We={pxmid:pe(Ot,(Pt+St)/2),rpx1:Ot,transform:{textPosAngle:Ye(Mt),rCenter:He,x:Fe.x,y:Fe.y}};return t(P.type,Fe,w),{transform:{targetX:me(We),targetY:be(We),scale:vt(Mt),rotate:pt(Mt),rCenter:He}}}}(de);return function(Ae){return Ie(_e(Ae),Oe)}}):we.attr("transform",Ie(ie,Oe))})}function g(y){return m=y.rpx1,_=y.transform.textPosAngle,[m*Math.sin(_),-m*Math.cos(_)];var m,_}R.plot=function(y,m,_,d){var S,w,E=y._fullLayout,C=E._sunburstlayer,O=!_,P=!E.uniformtext.mode&&p.hasTransition(_);i("sunburst",E),(S=C.selectAll("g.trace.sunburst").data(m,function(z){return z[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),S.order(),P?(d&&(w=d()),M.transition().duration(_.duration).ease(_.easing).each("end",function(){w&&w()}).each("interrupt",function(){w&&w()}).each(function(){C.selectAll("g.trace").each(function(z){v(y,z,this,_)})})):(S.each(function(z){v(y,z,this,_)}),E.uniformtext.mode&&h(y,E._sunburstlayer.selectAll(".trace"),"sunburst")),O&&S.exit().remove()},R.formatSliceLabel=function(y,m,_,d,S){var w=_.texttemplate,E=_.textinfo;if(!(w||E&&E!=="none"))return"";var C=S.separators,O=d[0],P=y.data.data,z=O.hierarchy,j=p.isHierarchyRoot(y),I=p.getParent(z,y),N=p.getValue(y);if(!w){var W,F=E.split("+"),U=function(ae){return F.indexOf(ae)!==-1},H=[];if(U("label")&&P.label&&H.push(P.label),P.hasOwnProperty("v")&&U("value")&&H.push(p.formatValue(P.v,C)),!j){U("current path")&&H.push(p.getPath(y.data));var ne=0;U("percent parent")&&ne++,U("percent entry")&&ne++,U("percent root")&&ne++;var $=ne>1;if(ne){var K,Q=function(ae){W=p.formatPercent(K,C),$&&(W+=" of "+ae),H.push(W)};U("percent parent")&&!j&&(K=N/p.getValue(I),Q("parent")),U("percent entry")&&(K=N/p.getValue(m),Q("entry")),U("percent root")&&(K=N/p.getValue(z),Q("root"))}}return U("text")&&(W=b.castOption(_,P.i,"text"),b.isValidTextValue(W)&&H.push(W)),H.join("<br>")}var Z=b.castOption(_,P.i,"texttemplate");if(!Z)return"";var X={};P.label&&(X.label=P.label),P.hasOwnProperty("v")&&(X.value=P.v,X.valueLabel=p.formatValue(P.v,C)),X.currentPath=p.getPath(y.data),j||(X.percentParent=N/p.getValue(I),X.percentParentLabel=p.formatPercent(X.percentParent,C),X.parent=p.getPtLabel(I)),X.percentEntry=N/p.getValue(m),X.percentEntryLabel=p.formatPercent(X.percentEntry,C),X.entry=p.getPtLabel(m),X.percentRoot=N/p.getValue(z),X.percentRootLabel=p.formatPercent(X.percentRoot,C),X.root=p.getPtLabel(z),P.hasOwnProperty("color")&&(X.color=P.color);var te=b.castOption(_,P.i,"text");return(b.isValidTextValue(te)||te==="")&&(X.text=te),X.customdata=b.castOption(_,P.i,"customdata"),b.texttemplateString(Z,X,S._d3locale,X,_._meta||{})}},85676:function(ee,R,e){var M=e(33428),k=e(76308),s=e(3400),T=e(82744).resizeText,b=e(60404);function f(o,t,i,n){var r=t.data.data,a=!t.children,l=r.i,u=s.castOption(i,l,"marker.line.color")||k.defaultLine,h=s.castOption(i,l,"marker.line.width")||0;o.call(b,t,i,n).style("stroke-width",h).call(k.stroke,u).style("opacity",a?i.leaf.opacity:null)}ee.exports={style:function(o){var t=o._fullLayout._sunburstlayer.selectAll(".trace");T(o,t,"sunburst"),t.each(function(i){var n=M.select(this),r=i[0].trace;n.style("opacity",r.opacity),n.selectAll("path.surface").each(function(a){M.select(this).call(f,a,r,o)})})},styleOne:f}},16716:function(ee,R,e){var M=e(76308),k=e(49084),s=e(29736).axisHoverFormat,T=e(21776).Ks,b=e(45464),f=e(92880).extendFlat,o=e(67824).overrideAll;function t(n){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:M.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:M.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var i=ee.exports=o(f({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:T(),xhoverformat:s("x"),yhoverformat:s("y"),zhoverformat:s("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},k("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:t(),y:t(),z:t()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:f({},k.zauto,{}),zmin:f({},k.zmin,{}),zmax:f({},k.zmax,{})},hoverinfo:f({},b.hoverinfo),showlegend:f({},b.showlegend,{dflt:!1})}),"calc","nested");i.x.editType=i.y.editType=i.z.editType="calc+clearAxisTypes",i.transforms=void 0},56576:function(ee,R,e){var M=e(47128);ee.exports=function(k,s){s.surfacecolor?M(k,s,{vals:s.surfacecolor,containerStr:"",cLetter:"c"}):M(k,s,{vals:s.z,containerStr:"",cLetter:"c"})}},79164:function(ee,R,e){var M=e(67792).gl_surface3d,k=e(67792).ndarray,s=e(67792).ndarray_linear_interpolate.d2,T=e(70448),b=e(11240),f=e(3400).isArrayOrTypedArray,o=e(33040).parseColorScale,t=e(43080),i=e(8932).extractOpts;function n(_,d,S){this.scene=_,this.uid=S,this.surface=d,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var r=n.prototype;r.getXat=function(_,d,S,w){var E=f(this.data.x)?f(this.data.x[0])?this.data.x[d][_]:this.data.x[_]:_;return S===void 0?E:w.d2l(E,0,S)},r.getYat=function(_,d,S,w){var E=f(this.data.y)?f(this.data.y[0])?this.data.y[d][_]:this.data.y[d]:d;return S===void 0?E:w.d2l(E,0,S)},r.getZat=function(_,d,S,w){var E=this.data.z[d][_];return E===null&&this.data.connectgaps&&this.data._interpolatedZ&&(E=this.data._interpolatedZ[d][_]),S===void 0?E:w.d2l(E,0,S)},r.handlePick=function(_){if(_.object===this.surface){var d=(_.data.index[0]-1)/this.dataScaleX-1,S=(_.data.index[1]-1)/this.dataScaleY-1,w=Math.max(Math.min(Math.round(d),this.data.z[0].length-1),0),E=Math.max(Math.min(Math.round(S),this.data._ylength-1),0);_.index=[w,E],_.traceCoordinate=[this.getXat(w,E),this.getYat(w,E),this.getZat(w,E)],_.dataCoordinate=[this.getXat(w,E,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(w,E,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(w,E,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var C=0;C<3;C++)_.dataCoordinate[C]!=null&&(_.dataCoordinate[C]*=this.scene.dataScale[C]);var O=this.data.hovertext||this.data.text;return f(O)&&O[E]&&O[E][w]!==void 0?_.textLabel=O[E][w]:_.textLabel=O||"",_.data.dataCoordinate=_.dataCoordinate.slice(),this.surface.highlight(_.data),this.scene.glplot.spikes.position=_.dataCoordinate,!0}};var a=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function l(_,d){if(_<d)return 0;for(var S=0;Math.floor(_%d)===0;)_/=d,S++;return S}function u(_){for(var d=[],S=0;S<a.length;S++){var w=a[S];d.push(l(_,w))}return d}function h(_){for(var d=u(_),S=_,w=0;w<a.length;w++)if(d[w]>0){S=a[w];break}return S}function c(_,d){if(!(_<1||d<1)){for(var S=u(_),w=u(d),E=1,C=0;C<a.length;C++)E*=Math.pow(a[C],Math.max(S[C],w[C]));return E}}r.calcXnums=function(_){var d,S=[];for(d=1;d<_;d++){var w=this.getXat(d-1,0),E=this.getXat(d,0);S[d-1]=E!==w&&w!=null&&E!=null?Math.abs(E-w):0}var C=0;for(d=1;d<_;d++)C+=S[d-1];for(d=1;d<_;d++)S[d-1]===0?S[d-1]=1:S[d-1]=Math.round(C/S[d-1]);return S},r.calcYnums=function(_){var d,S=[];for(d=1;d<_;d++){var w=this.getYat(0,d-1),E=this.getYat(0,d);S[d-1]=E!==w&&w!=null&&E!=null?Math.abs(E-w):0}var C=0;for(d=1;d<_;d++)C+=S[d-1];for(d=1;d<_;d++)S[d-1]===0?S[d-1]=1:S[d-1]=Math.round(C/S[d-1]);return S};var x=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],p=x[9],v=x[13];function g(_,d,S){var w=S[8]+S[2]*d[0]+S[5]*d[1];return _[0]=(S[6]+S[0]*d[0]+S[3]*d[1])/w,_[1]=(S[7]+S[1]*d[0]+S[4]*d[1])/w,_}function y(_,d,S){return function(w,E,C,O){for(var P=[0,0],z=w.shape[0],j=w.shape[1],I=0;I<z;I++)for(var N=0;N<j;N++)C(P,[I,N],O),w.set(I,N,s(E,P[0],P[1]))}(_,d,g,S),_}function m(_,d){for(var S=!1,w=0;w<_.length;w++)if(d===_[w]){S=!0;break}S===!1&&_.push(d)}r.estimateScale=function(_,d){for(var S=1+function(E){if(E.length!==0){for(var C=1,O=0;O<E.length;O++)C=c(C,E[O]);return C}}(d===0?this.calcXnums(_):this.calcYnums(_));S<p;)S*=2;for(;S>v;)S--,S/=h(S),++S<p&&(S=v);var w=Math.round(S/_);return w>1?w:1},r.refineCoords=function(_){for(var d=this.dataScaleX,S=this.dataScaleY,w=_[0].shape[0],E=_[0].shape[1],C=0|Math.floor(_[0].shape[0]*d+1),O=0|Math.floor(_[0].shape[1]*S+1),P=1+w+1,z=1+E+1,j=k(new Float32Array(P*z),[P,z]),I=[1/d,0,0,0,1/S,0,0,0,1],N=0;N<_.length;++N){this.surface.padField(j,_[N]);var W=k(new Float32Array(C*O),[C,O]);y(W,j,I),_[N]=W}},r.setContourLevels=function(){var _,d,S,w=[[],[],[]],E=[!1,!1,!1],C=!1;for(_=0;_<3;++_)if(this.showContour[_]&&(C=!0,this.contourSize[_]>0&&this.contourStart[_]!==null&&this.contourEnd[_]!==null&&this.contourEnd[_]>this.contourStart[_]))for(E[_]=!0,d=this.contourStart[_];d<this.contourEnd[_];d+=this.contourSize[_])S=d*this.scene.dataScale[_],m(w[_],S);if(C){var O=[[],[],[]];for(_=0;_<3;++_)this.showContour[_]&&(O[_]=E[_]?w[_]:this.scene.contourLevels[_]);this.surface.update({levels:O})}},r.update=function(_){var d,S,w,E,C=this.scene,O=C.fullSceneLayout,P=this.surface,z=o(_),j=C.dataScale,I=_.z[0].length,N=_._ylength,W=C.contourLevels;this.data=_;var F=[];for(d=0;d<3;d++)for(F[d]=[],S=0;S<I;S++)F[d][S]=[];for(S=0;S<I;S++)for(w=0;w<N;w++)F[0][S][w]=this.getXat(S,w,_.xcalendar,O.xaxis),F[1][S][w]=this.getYat(S,w,_.ycalendar,O.yaxis),F[2][S][w]=this.getZat(S,w,_.zcalendar,O.zaxis);if(_.connectgaps)for(_._emptypoints=b(F[2]),T(F[2],_._emptypoints),_._interpolatedZ=[],S=0;S<I;S++)for(_._interpolatedZ[S]=[],w=0;w<N;w++)_._interpolatedZ[S][w]=F[2][S][w];for(d=0;d<3;d++)for(S=0;S<I;S++)for(w=0;w<N;w++)(E=F[d][S][w])==null?F[d][S][w]=NaN:E=F[d][S][w]*=j[d];for(d=0;d<3;d++)for(S=0;S<I;S++)for(w=0;w<N;w++)(E=F[d][S][w])!=null&&(this.minValues[d]>E&&(this.minValues[d]=E),this.maxValues[d]<E&&(this.maxValues[d]=E));for(d=0;d<3;d++)this.objectOffset[d]=.5*(this.minValues[d]+this.maxValues[d]);for(d=0;d<3;d++)for(S=0;S<I;S++)for(w=0;w<N;w++)(E=F[d][S][w])!=null&&(F[d][S][w]-=this.objectOffset[d]);var U=[k(new Float32Array(I*N),[I,N]),k(new Float32Array(I*N),[I,N]),k(new Float32Array(I*N),[I,N])];for(d=0;d<3;d++)for(S=0;S<I;S++)for(w=0;w<N;w++)U[d].set(S,w,F[d][S][w]);F=[];var H={colormap:z,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!_.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:_.opacityscale,opacity:_.opacity},ne=i(_);if(H.intensityBounds=[ne.min,ne.max],_.surfacecolor){var $=k(new Float32Array(I*N),[I,N]);for(S=0;S<I;S++)for(w=0;w<N;w++)$.set(S,w,_.surfacecolor[w][S]);U.push($)}else H.intensityBounds[0]*=j[2],H.intensityBounds[1]*=j[2];(v<U[0].shape[0]||v<U[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(U[0].shape[0],0),this.dataScaleY=this.estimateScale(U[0].shape[1],1),this.dataScaleX===1&&this.dataScaleY===1||this.refineCoords(U)),_.surfacecolor&&(H.intensity=U.pop());var K=[!0,!0,!0],Q=["x","y","z"];for(d=0;d<3;++d){var Z=_.contours[Q[d]];K[d]=Z.highlight,H.showContour[d]=Z.show||Z.highlight,H.showContour[d]&&(H.contourProject[d]=[Z.project.x,Z.project.y,Z.project.z],Z.show?(this.showContour[d]=!0,H.levels[d]=W[d],P.highlightColor[d]=H.contourColor[d]=t(Z.color),Z.usecolormap?P.highlightTint[d]=H.contourTint[d]=0:P.highlightTint[d]=H.contourTint[d]=1,H.contourWidth[d]=Z.width,this.contourStart[d]=Z.start,this.contourEnd[d]=Z.end,this.contourSize[d]=Z.size):(this.showContour[d]=!1,this.contourStart[d]=null,this.contourEnd[d]=null,this.contourSize[d]=0),Z.highlight&&(H.dynamicColor[d]=t(Z.highlightcolor),H.dynamicWidth[d]=Z.highlightwidth))}(function(X){var te=X[0].rgb,ae=X[X.length-1].rgb;return te[0]===ae[0]&&te[1]===ae[1]&&te[2]===ae[2]&&te[3]===ae[3]})(z)&&(H.vertexColor=!0),H.objectOffset=this.objectOffset,H.coords=U,P.update(H),P.visible=_.visible,P.enableDynamic=K,P.enableHighlight=K,P.snapToData=!0,"lighting"in _&&(P.ambientLight=_.lighting.ambient,P.diffuseLight=_.lighting.diffuse,P.specularLight=_.lighting.specular,P.roughness=_.lighting.roughness,P.fresnel=_.lighting.fresnel),"lightposition"in _&&(P.lightPosition=[_.lightposition.x,_.lightposition.y,_.lightposition.z])},r.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},ee.exports=function(_,d){var S=_.glplot.gl,w=M({gl:S}),E=new n(_,w,d.uid);return w._trace=E,E.update(d),_.glplot.add(w),E}},60192:function(ee,R,e){var M=e(24040),k=e(3400),s=e(27260),T=e(16716);function b(o,t,i,n){var r=n("opacityscale");r==="max"?t.opacityscale=[[0,.1],[1,1]]:r==="min"?t.opacityscale=[[0,1],[1,.1]]:r==="extremes"?t.opacityscale=function(a,l){for(var u=[],h=0;h<32;h++){var c=h/31,x=.1+.9*(1-Math.pow(Math.sin(1*c*Math.PI),2));u.push([c,Math.max(0,Math.min(1,x))])}return u}():function(a){var l=0;if(!Array.isArray(a)||a.length<2||!a[0]||!a[a.length-1]||+a[0][0]!=0||+a[a.length-1][0]!=1)return!1;for(var u=0;u<a.length;u++){var h=a[u];if(h.length!==2||+h[0]<l)return!1;l=+h[0]}return!0}(r)||(t.opacityscale=void 0)}function f(o,t,i){t in o&&!(i in o)&&(o[i]=o[t])}ee.exports={supplyDefaults:function(o,t,i,n){var r,a;function l(m,_){return k.coerce(o,t,T,m,_)}var u=l("x"),h=l("y"),c=l("z");if(!c||!c.length||u&&u.length<1||h&&h.length<1)t.visible=!1;else{t._xlength=Array.isArray(u)&&k.isArrayOrTypedArray(u[0])?c.length:c[0].length,t._ylength=c.length,M.getComponentMethod("calendars","handleTraceDefaults")(o,t,["x","y","z"],n),l("text"),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(m){l(m)});var x=l("surfacecolor"),p=["x","y","z"];for(r=0;r<3;++r){var v="contours."+p[r],g=l(v+".show"),y=l(v+".highlight");if(g||y)for(a=0;a<3;++a)l(v+".project."+p[a]);g&&(l(v+".color"),l(v+".width"),l(v+".usecolormap")),y&&(l(v+".highlightcolor"),l(v+".highlightwidth")),l(v+".start"),l(v+".end"),l(v+".size")}x||(f(o,"zmin","cmin"),f(o,"zmax","cmax"),f(o,"zauto","cauto")),s(o,t,n,l,{prefix:"",cLetter:"c"}),b(0,t,0,l),t._length=null}},opacityscaleDefaults:b}},91304:function(ee,R,e){ee.exports={attributes:e(16716),supplyDefaults:e(60192).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:e(56576),plot:e(79164),moduleType:"trace",name:"surface",basePlotModule:e(12536),categories:["gl3d","2dMap","showLegend"],meta:{}}},60520:function(ee,R,e){var M=e(13916),k=e(92880).extendFlat,s=e(67824).overrideAll,T=e(25376),b=e(86968).u,f=e(29736).descriptionOnlyNumbers;(ee.exports=s({domain:b({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:f("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:k({},M.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:k({},T({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:f("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:k({},M.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:k({},T({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},85852:function(ee,R,e){var M=e(84888)._M,k=e(24752),s="table";R.name=s,R.plot=function(T){var b=M(T.calcdata,s)[0];b.length&&k(T,b)},R.clean=function(T,b,f,o){var t=o._has&&o._has(s),i=b._has&&b._has(s);t&&!i&&o._paperdiv.selectAll(".table").remove()}},39312:function(ee,R,e){var M=e(71688).wrap;ee.exports=function(){return M({})}},23536:function(ee){ee.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},55992:function(ee,R,e){var M=e(23536),k=e(92880).extendFlat,s=e(38248),T=e(38116).isTypedArray,b=e(38116).isArrayOrTypedArray;function f(l){if(b(l)){for(var u=0,h=0;h<l.length;h++)u=Math.max(u,f(l[h]));return u}return l}function o(l,u){return l+u}function t(l){var u,h=l.slice(),c=1/0,x=0;for(u=0;u<h.length;u++)T(h[u])?h[u]=Array.from(h[u]):b(h[u])||(h[u]=[h[u]]),c=Math.min(c,h[u].length),x=Math.max(x,h[u].length);if(c!==x)for(u=0;u<h.length;u++){var p=x-h[u].length;p&&(h[u]=h[u].concat(i(p)))}return h}function i(l){for(var u=new Array(l),h=0;h<l;h++)u[h]="";return u}function n(l){return l.calcdata.columns.reduce(function(u,h){return h.xIndex<l.xIndex?u+h.columnWidth:u},0)}function r(l,u){return Object.keys(l).map(function(h){return k({},l[h],{auxiliaryBlocks:u})})}function a(l,u){for(var h,c={},x=0,p=0,v={firstRowIndex:null,lastRowIndex:null,rows:[]},g=0,y=0,m=0;m<l.length;m++)h=l[m],v.rows.push({rowIndex:m,rowHeight:h}),((p+=h)>=u||m===l.length-1)&&(c[x]=v,v.key=y++,v.firstRowIndex=g,v.lastRowIndex=m,v={firstRowIndex:null,lastRowIndex:null,rows:[]},x+=p,g=m+1,p=0);return c}ee.exports=function(l,u){var h=t(u.cells.values),c=function(N){return N.slice(u.header.values.length,N.length)},x=t(u.header.values);x.length&&!x[0].length&&(x[0]=[""],x=t(x));var p=x.concat(c(h).map(function(){return i((x[0]||[""]).length)})),v=u.domain,g=Math.floor(l._fullLayout._size.w*(v.x[1]-v.x[0])),y=Math.floor(l._fullLayout._size.h*(v.y[1]-v.y[0])),m=u.header.values.length?p[0].map(function(){return u.header.height}):[M.emptyHeaderHeight],_=h.length?h[0].map(function(){return u.cells.height}):[],d=m.reduce(o,0),S=a(_,y-d+M.uplift),w=r(a(m,d),[]),E=r(S,w),C={},O=u._fullInput.columnorder;b(O)&&(O=Array.from(O)),O=O.concat(c(h.map(function(N,W){return W})));var P=p.map(function(N,W){var F=b(u.columnwidth)?u.columnwidth[Math.min(W,u.columnwidth.length-1)]:u.columnwidth;return s(F)?Number(F):1}),z=P.reduce(o,0);P=P.map(function(N){return N/z*g});var j=Math.max(f(u.header.line.width),f(u.cells.line.width)),I={key:u.uid+l._context.staticPlot,translateX:v.x[0]*l._fullLayout._size.w,translateY:l._fullLayout._size.h*(1-v.y[1]),size:l._fullLayout._size,width:g,maxLineWidth:j,height:y,columnOrder:O,groupHeight:y,rowBlocks:E,headerRowBlocks:w,scrollY:0,cells:k({},u.cells,{values:h}),headerCells:k({},u.header,{values:p}),gdColumns:p.map(function(N){return N[0]}),gdColumnsOriginalOrder:p.map(function(N){return N[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:p.map(function(N,W){var F=C[N];return C[N]=(F||0)+1,{key:N+"__"+C[N],label:N,specIndex:W,xIndex:O[W],xScale:n,x:void 0,calcdata:void 0,columnWidth:P[W]}})};return I.columns.forEach(function(N){N.calcdata=I,N.x=n(N)}),I}},53056:function(ee,R,e){var M=e(92880).extendFlat;R.splitToPanels=function(k){var s=[0,0],T=M({},k,{key:"header",type:"header",page:0,prevPages:s,currentRepaint:[null,null],dragHandle:!0,values:k.calcdata.headerCells.values[k.specIndex],rowBlocks:k.calcdata.headerRowBlocks,calcdata:M({},k.calcdata,{cells:k.calcdata.headerCells})});return[M({},k,{key:"cells1",type:"cells",page:0,prevPages:s,currentRepaint:[null,null],dragHandle:!1,values:k.calcdata.cells.values[k.specIndex],rowBlocks:k.calcdata.rowBlocks}),M({},k,{key:"cells2",type:"cells",page:1,prevPages:s,currentRepaint:[null,null],dragHandle:!1,values:k.calcdata.cells.values[k.specIndex],rowBlocks:k.calcdata.rowBlocks}),T]},R.splitToCells=function(k){var s=function(T){var b=T.rowBlocks[T.page],f=b?b.rows[0].rowIndex:0;return[f,b?f+b.rows.length:0]}(k);return(k.values||[]).slice(s[0],s[1]).map(function(T,b){return{keyWithinBlock:b+(typeof T=="string"&&T.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:s[0]+b,column:k,calcdata:k.calcdata,page:k.page,rowBlocks:k.rowBlocks,value:T}})}},53212:function(ee,R,e){var M=e(3400),k=e(60520),s=e(86968).Q;ee.exports=function(T,b,f,o){function t(i,n){return M.coerce(T,b,k,i,n)}s(b,o,t),t("columnwidth"),t("header.values"),t("header.format"),t("header.align"),t("header.prefix"),t("header.suffix"),t("header.height"),t("header.line.width"),t("header.line.color"),t("header.fill.color"),M.coerceFont(t,"header.font",o.font),function(i,n){for(var r=i.columnorder||[],a=i.header.values.length,l=r.slice(0,a),u=l.slice().sort(function(x,p){return x-p}),h=l.map(function(x){return u.indexOf(x)}),c=h.length;c<a;c++)h.push(c);n("columnorder",h)}(b,t),t("cells.values"),t("cells.format"),t("cells.align"),t("cells.prefix"),t("cells.suffix"),t("cells.height"),t("cells.line.width"),t("cells.line.color"),t("cells.fill.color"),M.coerceFont(t,"cells.font",o.font),b._length=null}},41724:function(ee,R,e){ee.exports={attributes:e(60520),supplyDefaults:e(53212),calc:e(39312),plot:e(24752),moduleType:"trace",name:"table",basePlotModule:e(85852),categories:["noOpacity"],meta:{}}},24752:function(ee,R,e){var M=e(23536),k=e(33428),s=e(3400),T=s.numberFormat,b=e(71688),f=e(43616),o=e(72736),t=e(3400).raiseToTop,i=e(3400).strTranslate,n=e(3400).cancelTransition,r=e(55992),a=e(53056),l=e(76308);function u(H){return Math.ceil(H.calcdata.maxLineWidth/2)}function h(H,ne){return"clip"+H._fullLayout._uid+"_scrollAreaBottomClip_"+ne.key}function c(H,ne){return"clip"+H._fullLayout._uid+"_columnBoundaryClippath_"+ne.calcdata.key+"_"+ne.specIndex}function x(H){return[].concat.apply([],H.map(function(ne){return ne})).map(function(ne){return ne.__data__})}function p(H,ne,$){var K=H.selectAll("."+M.cn.scrollbarKit).data(b.repeat,b.keyFun);K.enter().append("g").classed(M.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),K.each(function(ae){var se=ae.scrollbarState;se.totalHeight=function(ce){var fe=ce.rowBlocks;return N(fe,fe.length-1)+(fe.length?W(fe[fe.length-1],1/0):1)}(ae),se.scrollableAreaHeight=ae.groupHeight-w(ae),se.currentlyVisibleHeight=Math.min(se.totalHeight,se.scrollableAreaHeight),se.ratio=se.currentlyVisibleHeight/se.totalHeight,se.barLength=Math.max(se.ratio*se.currentlyVisibleHeight,M.goldenRatio*M.scrollbarWidth),se.barWiggleRoom=se.currentlyVisibleHeight-se.barLength,se.wiggleRoom=Math.max(0,se.totalHeight-se.scrollableAreaHeight),se.topY=se.barWiggleRoom===0?0:ae.scrollY/se.wiggleRoom*se.barWiggleRoom,se.bottomY=se.topY+se.barLength,se.dragMultiplier=se.wiggleRoom/se.barWiggleRoom}).attr("transform",function(ae){var se=ae.width+M.scrollbarWidth/2+M.scrollbarOffset;return i(se,w(ae))});var Q=K.selectAll("."+M.cn.scrollbar).data(b.repeat,b.keyFun);Q.enter().append("g").classed(M.cn.scrollbar,!0);var Z=Q.selectAll("."+M.cn.scrollbarSlider).data(b.repeat,b.keyFun);Z.enter().append("g").classed(M.cn.scrollbarSlider,!0),Z.attr("transform",function(ae){return i(0,ae.scrollbarState.topY||0)});var X=Z.selectAll("."+M.cn.scrollbarGlyph).data(b.repeat,b.keyFun);X.enter().append("line").classed(M.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",M.scrollbarWidth).attr("stroke-linecap","round").attr("y1",M.scrollbarWidth/2),X.attr("y2",function(ae){return ae.scrollbarState.barLength-M.scrollbarWidth/2}).attr("stroke-opacity",function(ae){return ae.columnDragInProgress||!ae.scrollbarState.barWiggleRoom||$?0:.4}),X.transition().delay(0).duration(0),X.transition().delay(M.scrollbarHideDelay).duration(M.scrollbarHideDuration).attr("stroke-opacity",0);var te=Q.selectAll("."+M.cn.scrollbarCaptureZone).data(b.repeat,b.keyFun);te.enter().append("line").classed(M.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",M.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(ae){var se=k.event.y,ce=this.getBoundingClientRect(),fe=ae.scrollbarState,pe=se-ce.top,ge=k.scale.linear().domain([0,fe.scrollableAreaHeight]).range([0,fe.totalHeight]).clamp(!0);fe.topY<=pe&&pe<=fe.bottomY||C(ne,H,null,ge(pe-fe.barLength/2))(ae)}).call(k.behavior.drag().origin(function(ae){return k.event.stopPropagation(),ae.scrollbarState.scrollbarScrollInProgress=!0,ae}).on("drag",C(ne,H)).on("dragend",function(){})),te.attr("y2",function(ae){return ae.scrollbarState.scrollableAreaHeight}),ne._context.staticPlot&&(X.remove(),te.remove())}function v(H,ne,$,K){var Q=function(se){var ce=se.selectAll("."+M.cn.columnCells).data(b.repeat,b.keyFun);return ce.enter().append("g").classed(M.cn.columnCells,!0),ce.exit().remove(),ce}($),Z=function(se){var ce=se.selectAll("."+M.cn.columnCell).data(a.splitToCells,function(fe){return fe.keyWithinBlock});return ce.enter().append("g").classed(M.cn.columnCell,!0),ce.exit().remove(),ce}(Q);(function(se){se.each(function(ce,fe){var pe=ce.calcdata.cells.font,ge=ce.column.specIndex,me={size:m(pe.size,ge,fe),color:m(pe.color,ge,fe),family:m(pe.family,ge,fe),weight:m(pe.weight,ge,fe),style:m(pe.style,ge,fe),variant:m(pe.variant,ge,fe),textcase:m(pe.textcase,ge,fe),lineposition:m(pe.lineposition,ge,fe),shadow:m(pe.shadow,ge,fe)};ce.rowNumber=ce.key,ce.align=m(ce.calcdata.cells.align,ge,fe),ce.cellBorderWidth=m(ce.calcdata.cells.line.width,ge,fe),ce.font=me})})(Z);var X=function(se){var ce=se.selectAll("."+M.cn.cellRect).data(b.repeat,function(fe){return fe.keyWithinBlock});return ce.enter().append("rect").classed(M.cn.cellRect,!0),ce}(Z);(function(se){se.attr("width",function(ce){return ce.column.columnWidth}).attr("stroke-width",function(ce){return ce.cellBorderWidth}).each(function(ce){var fe=k.select(this);l.stroke(fe,m(ce.calcdata.cells.line.color,ce.column.specIndex,ce.rowNumber)),l.fill(fe,m(ce.calcdata.cells.fill.color,ce.column.specIndex,ce.rowNumber))})})(X);var te=function(se){var ce=se.selectAll("."+M.cn.cellTextHolder).data(b.repeat,function(fe){return fe.keyWithinBlock});return ce.enter().append("g").classed(M.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ce}(Z),ae=function(se){var ce=se.selectAll("."+M.cn.cellText).data(b.repeat,function(fe){return fe.keyWithinBlock});return ce.enter().append("text").classed(M.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){k.event.stopPropagation()}),ce}(te);(function(se){se.each(function(ce){f.font(k.select(this),ce.font)})})(ae),g(ae,ne,K,H),I(Z)}function g(H,ne,$,K){H.text(function(Q){var Z=Q.column.specIndex,X=Q.rowNumber,te=Q.value,ae=typeof te=="string",se=ae&&te.match(/<br>/i),ce=!ae||se;Q.mayHaveMarkup=ae&&te.match(/[<&>]/);var fe,pe=typeof(fe=te)=="string"&&fe.match(M.latexCheck);Q.latex=pe;var ge,me,be=pe?"":m(Q.calcdata.cells.prefix,Z,X)||"",ke=pe?"":m(Q.calcdata.cells.suffix,Z,X)||"",ze=pe?null:m(Q.calcdata.cells.format,Z,X)||null,ve=be+(ze?T(ze)(Q.value):Q.value)+ke;if(Q.wrappingNeeded=!Q.wrapped&&!ce&&!pe&&(ge=y(ve)),Q.cellHeightMayIncrease=se||pe||Q.mayHaveMarkup||(ge===void 0?y(ve):ge),Q.needsConvertToTspans=Q.mayHaveMarkup||Q.wrappingNeeded||Q.latex,Q.wrappingNeeded){var oe=(M.wrapSplitCharacter===" "?ve.replace(/<a href=/gi,"<a_href="):ve).split(M.wrapSplitCharacter),ie=M.wrapSplitCharacter===" "?oe.map(function(he){return he.replace(/<a_href=/gi,"<a href=")}):oe;Q.fragments=ie.map(function(he){return{text:he,width:null}}),Q.fragments.push({fragment:M.wrapSpacer,width:null}),me=ie.join(M.lineBreaker)+M.lineBreaker+M.wrapSpacer}else delete Q.fragments,me=ve;return me}).attr("dy",function(Q){return Q.needsConvertToTspans?0:"0.75em"}).each(function(Q){var Z=this,X=k.select(Z),te=Q.wrappingNeeded?P:z;Q.needsConvertToTspans?o.convertToTspans(X,K,te($,Z,ne,K,Q)):k.select(Z.parentNode).attr("transform",function(ae){return i(j(ae),M.cellPad)}).attr("text-anchor",function(ae){return{left:"start",center:"middle",right:"end"}[ae.align]})})}function y(H){return H.indexOf(M.wrapSplitCharacter)!==-1}function m(H,ne,$){if(s.isArrayOrTypedArray(H)){var K=H[Math.min(ne,H.length-1)];return s.isArrayOrTypedArray(K)?K[Math.min($,K.length-1)]:K}return H}function _(H,ne,$){H.transition().ease(M.releaseTransitionEase).duration(M.releaseTransitionDuration).attr("transform",i(ne.x,$))}function d(H){return H.type==="cells"}function S(H){return H.type==="header"}function w(H){return(H.rowBlocks.length?H.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(ne,$){return ne+W($,1/0)},0)}function E(H,ne,$){var K=x(ne)[0];if(K!==void 0){var Q=K.rowBlocks,Z=K.calcdata,X=N(Q,Q.length),te=K.calcdata.groupHeight-w(K),ae=Z.scrollY=Math.max(0,Math.min(X-te,Z.scrollY)),se=function(ce,fe,pe){for(var ge=[],me=0,be=0;be<ce.length;be++){for(var ke=ce[be],ze=ke.rows,ve=0,oe=0;oe<ze.length;oe++)ve+=ze[oe].rowHeight;ke.allRowsHeight=ve,fe<me+ve&&fe+pe>me&&ge.push(be),me+=ve}return ge}(Q,ae,te);se.length===1&&(se[0]===Q.length-1?se.unshift(se[0]-1):se.push(se[0]+1)),se[0]%2&&se.reverse(),ne.each(function(ce,fe){ce.page=se[fe],ce.scrollY=ae}),ne.attr("transform",function(ce){var fe=N(ce.rowBlocks,ce.page)-ce.scrollY;return i(0,fe)}),H&&(O(H,$,ne,se,K.prevPages,K,0),O(H,$,ne,se,K.prevPages,K,1),p($,H))}}function C(H,ne,$,K){return function(Q){var Z=Q.calcdata?Q.calcdata:Q,X=ne.filter(function(ce){return Z.key===ce.key}),te=$||Z.scrollbarState.dragMultiplier,ae=Z.scrollY;Z.scrollY=K===void 0?Z.scrollY+te*k.event.dy:K;var se=X.selectAll("."+M.cn.yColumn).selectAll("."+M.cn.columnBlock).filter(d);return E(H,se,X),Z.scrollY===ae}}function O(H,ne,$,K,Q,Z,X){K[X]!==Q[X]&&(clearTimeout(Z.currentRepaint[X]),Z.currentRepaint[X]=setTimeout(function(){var te=$.filter(function(ae,se){return se===X&&K[se]!==Q[se]});v(H,ne,te,$),Q[X]=K[X]}))}function P(H,ne,$,K){return function(){var Q=k.select(ne.parentNode);Q.each(function(Z){var X=Z.fragments;Q.selectAll("tspan.line").each(function(me,be){X[be].width=this.getComputedTextLength()});var te,ae,se=X[X.length-1].width,ce=X.slice(0,-1),fe=[],pe=0,ge=Z.column.columnWidth-2*M.cellPad;for(Z.value="";ce.length;)pe+(ae=(te=ce.shift()).width+se)>ge&&(Z.value+=fe.join(M.wrapSpacer)+M.lineBreaker,fe=[],pe=0),fe.push(te.text),pe+=ae;pe&&(Z.value+=fe.join(M.wrapSpacer)),Z.wrapped=!0}),Q.selectAll("tspan.line").remove(),g(Q.select("."+M.cn.cellText),$,H,K),k.select(ne.parentNode.parentNode).call(I)}}function z(H,ne,$,K,Q){return function(){if(!Q.settledY){var Z=k.select(ne.parentNode),X=U(Q),te=Q.key-X.firstRowIndex,ae=X.rows[te].rowHeight,se=Q.cellHeightMayIncrease?ne.parentNode.getBoundingClientRect().height+2*M.cellPad:ae,ce=Math.max(se,ae);ce-X.rows[te].rowHeight&&(X.rows[te].rowHeight=ce,H.selectAll("."+M.cn.columnCell).call(I),E(null,H.filter(d),0),p($,K,!0)),Z.attr("transform",function(){var fe=this,pe=fe.parentNode.getBoundingClientRect(),ge=k.select(fe.parentNode).select("."+M.cn.cellRect).node().getBoundingClientRect(),me=fe.transform.baseVal.consolidate(),be=ge.top-pe.top+(me?me.matrix.f:M.cellPad);return i(j(Q,k.select(fe.parentNode).select("."+M.cn.cellTextHolder).node().getBoundingClientRect().width),be)}),Q.settledY=!0}}}function j(H,ne){switch(H.align){case"left":default:return M.cellPad;case"right":return H.column.columnWidth-(ne||0)-M.cellPad;case"center":return(H.column.columnWidth-(ne||0))/2}}function I(H){H.attr("transform",function(ne){var $=ne.rowBlocks[0].auxiliaryBlocks.reduce(function(Q,Z){return Q+W(Z,1/0)},0),K=W(U(ne),ne.key);return i(0,K+$)}).selectAll("."+M.cn.cellRect).attr("height",function(ne){return($=U(ne),K=ne.key,$.rows[K-$.firstRowIndex]).rowHeight;var $,K})}function N(H,ne){for(var $=0,K=ne-1;K>=0;K--)$+=F(H[K]);return $}function W(H,ne){for(var $=0,K=0;K<H.rows.length&&H.rows[K].rowIndex<ne;K++)$+=H.rows[K].rowHeight;return $}function F(H){var ne=H.allRowsHeight;if(ne!==void 0)return ne;for(var $=0,K=0;K<H.rows.length;K++)$+=H.rows[K].rowHeight;return H.allRowsHeight=$,$}function U(H){return H.rowBlocks[H.page]}ee.exports=function(H,ne){var $=!H._context.staticPlot,K=H._fullLayout._paper.selectAll("."+M.cn.table).data(ne.map(function(ke){var ze=b.unwrap(ke).trace;return r(H,ze)}),b.keyFun);K.exit().remove(),K.enter().append("g").classed(M.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),K.attr("width",function(ke){return ke.width+ke.size.l+ke.size.r}).attr("height",function(ke){return ke.height+ke.size.t+ke.size.b}).attr("transform",function(ke){return i(ke.translateX,ke.translateY)});var Q=K.selectAll("."+M.cn.tableControlView).data(b.repeat,b.keyFun),Z=Q.enter().append("g").classed(M.cn.tableControlView,!0).style("box-sizing","content-box");if($){var X="onwheel"in document?"wheel":"mousewheel";Z.on("mousemove",function(ke){Q.filter(function(ze){return ke===ze}).call(p,H)}).on(X,function(ke){if(!ke.scrollbarState.wheeling){ke.scrollbarState.wheeling=!0;var ze=ke.scrollY+k.event.deltaY;C(H,Q,null,ze)(ke)||(k.event.stopPropagation(),k.event.preventDefault()),ke.scrollbarState.wheeling=!1}}).call(p,H,!0)}Q.attr("transform",function(ke){return i(ke.size.l,ke.size.t)});var te=Q.selectAll("."+M.cn.scrollBackground).data(b.repeat,b.keyFun);te.enter().append("rect").classed(M.cn.scrollBackground,!0).attr("fill","none"),te.attr("width",function(ke){return ke.width}).attr("height",function(ke){return ke.height}),Q.each(function(ke){f.setClipUrl(k.select(this),h(H,ke),H)});var ae=Q.selectAll("."+M.cn.yColumn).data(function(ke){return ke.columns},b.keyFun);ae.enter().append("g").classed(M.cn.yColumn,!0),ae.exit().remove(),ae.attr("transform",function(ke){return i(ke.x,0)}),$&&ae.call(k.behavior.drag().origin(function(ke){return _(k.select(this),ke,-M.uplift),t(this),ke.calcdata.columnDragInProgress=!0,p(Q.filter(function(ze){return ke.calcdata.key===ze.key}),H),ke}).on("drag",function(ke){var ze=k.select(this),ve=function(oe){return(ke===oe?k.event.x:oe.x)+oe.columnWidth/2};ke.x=Math.max(-M.overdrag,Math.min(ke.calcdata.width+M.overdrag-ke.columnWidth,k.event.x)),x(ae).filter(function(oe){return oe.calcdata.key===ke.calcdata.key}).sort(function(oe,ie){return ve(oe)-ve(ie)}).forEach(function(oe,ie){oe.xIndex=ie,oe.x=ke===oe?oe.x:oe.xScale(oe)}),ae.filter(function(oe){return ke!==oe}).transition().ease(M.transitionEase).duration(M.transitionDuration).attr("transform",function(oe){return i(oe.x,0)}),ze.call(n).attr("transform",i(ke.x,-M.uplift))}).on("dragend",function(ke){var ze=k.select(this),ve=ke.calcdata;ke.x=ke.xScale(ke),ke.calcdata.columnDragInProgress=!1,_(ze,ke,0),function(oe,ie,he){var Se=ie.gdColumnsOriginalOrder;ie.gdColumns.sort(function(ye,we){return he[Se.indexOf(ye)]-he[Se.indexOf(we)]}),ie.columnorder=he,oe.emit("plotly_restyle")}(H,ve,ve.columns.map(function(oe){return oe.xIndex}))})),ae.each(function(ke){f.setClipUrl(k.select(this),c(H,ke),H)});var se=ae.selectAll("."+M.cn.columnBlock).data(a.splitToPanels,b.keyFun);se.enter().append("g").classed(M.cn.columnBlock,!0).attr("id",function(ke){return ke.key}),se.style("cursor",function(ke){return ke.dragHandle?"ew-resize":ke.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var ce=se.filter(S),fe=se.filter(d);$&&fe.call(k.behavior.drag().origin(function(ke){return k.event.stopPropagation(),ke}).on("drag",C(H,Q,-1)).on("dragend",function(){})),v(H,Q,ce,se),v(H,Q,fe,se);var pe=Q.selectAll("."+M.cn.scrollAreaClip).data(b.repeat,b.keyFun);pe.enter().append("clipPath").classed(M.cn.scrollAreaClip,!0).attr("id",function(ke){return h(H,ke)});var ge=pe.selectAll("."+M.cn.scrollAreaClipRect).data(b.repeat,b.keyFun);ge.enter().append("rect").classed(M.cn.scrollAreaClipRect,!0).attr("x",-M.overdrag).attr("y",-M.uplift).attr("fill","none"),ge.attr("width",function(ke){return ke.width+2*M.overdrag}).attr("height",function(ke){return ke.height+M.uplift}),ae.selectAll("."+M.cn.columnBoundary).data(b.repeat,b.keyFun).enter().append("g").classed(M.cn.columnBoundary,!0);var me=ae.selectAll("."+M.cn.columnBoundaryClippath).data(b.repeat,b.keyFun);me.enter().append("clipPath").classed(M.cn.columnBoundaryClippath,!0),me.attr("id",function(ke){return c(H,ke)});var be=me.selectAll("."+M.cn.columnBoundaryRect).data(b.repeat,b.keyFun);be.enter().append("rect").classed(M.cn.columnBoundaryRect,!0).attr("fill","none"),be.attr("width",function(ke){return ke.columnWidth+2*u(ke)}).attr("height",function(ke){return ke.calcdata.height+2*u(ke)+M.uplift}).attr("x",function(ke){return-u(ke)}).attr("y",function(ke){return-u(ke)}),E(null,fe,Q)}},40516:function(ee,R,e){var M=e(21776).Ks,k=e(21776).Gw,s=e(49084),T=e(86968).u,b=e(74996),f=e(424),o=e(32984),t=e(92880).extendFlat,i=e(98192).c;ee.exports={labels:f.labels,parents:f.parents,values:f.values,branchvalues:f.branchvalues,count:f.count,level:f.level,maxdepth:f.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:t({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:f.marker.colors,pattern:i,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:f.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},s("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:t({},b.textfont,{}),editType:"calc"},text:b.text,textinfo:f.textinfo,texttemplate:k({editType:"plot"},{keys:o.eventDataKeys.concat(["label","value"])}),hovertext:b.hovertext,hoverinfo:f.hoverinfo,hovertemplate:M({},{keys:o.eventDataKeys}),textfont:b.textfont,insidetextfont:b.insidetextfont,outsidetextfont:t({},b.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:b.sort,root:f.root,domain:T({name:"treemap",trace:!0,editType:"calc"})}},79516:function(ee,R,e){var M=e(7316);R.name="treemap",R.plot=function(k,s,T,b){M.plotBasePlot(R.name,k,s,T,b)},R.clean=function(k,s,T,b){M.cleanBasePlot(R.name,k,s,T,b)}},97840:function(ee,R,e){var M=e(3776);R.r=function(k,s){return M.calc(k,s)},R.q=function(k){return M._runCrossTraceCalc("treemap",k)}},32984:function(ee){ee.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},34092:function(ee,R,e){var M=e(3400),k=e(40516),s=e(76308),T=e(86968).Q,b=e(31508).handleText,f=e(78048).TEXTPAD,o=e(74174).handleMarkerDefaults,t=e(8932),i=t.hasColorscale,n=t.handleDefaults;ee.exports=function(r,a,l,u){function h(_,d){return M.coerce(r,a,k,_,d)}var c=h("labels"),x=h("parents");if(c&&c.length&&x&&x.length){var p=h("values");p&&p.length?h("branchvalues"):h("count"),h("level"),h("maxdepth"),h("tiling.packing")==="squarify"&&h("tiling.squarifyratio"),h("tiling.flip"),h("tiling.pad");var v=h("text");h("texttemplate"),a.texttemplate||h("textinfo",M.isArrayOrTypedArray(v)?"text+label":"label"),h("hovertext"),h("hovertemplate");var g=h("pathbar.visible");b(r,a,u,h,"auto",{hasPathbar:g,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),h("textposition");var y=a.textposition.indexOf("bottom")!==-1;o(r,a,u,h),(a._hasColorscale=i(r,"marker","colors")||(r.marker||{}).coloraxis)?n(r,a,u,h,{prefix:"marker.",cLetter:"c"}):h("marker.depthfade",!(a.marker.colors||[]).length);var m=2*a.textfont.size;h("marker.pad.t",y?m/4:m),h("marker.pad.l",m/4),h("marker.pad.r",m/4),h("marker.pad.b",y?m:m/4),h("marker.cornerradius"),a._hovered={marker:{line:{width:2,color:s.contrast(u.paper_bgcolor)}}},g&&(h("pathbar.thickness",a.pathbar.textfont.size+2*f),h("pathbar.side"),h("pathbar.edgeshape")),h("sort"),h("root.color"),T(a,u,h),a._length=null}else a.visible=!1}},95808:function(ee,R,e){var M=e(33428),k=e(78176),s=e(82744).clearMinTextSize,T=e(60100).resizeText,b=e(52960);ee.exports=function(f,o,t,i,n){var r,a,l=n.type,u=n.drawDescendants,h=f._fullLayout,c=h["_"+l+"layer"],x=!t;s(l,h),(r=c.selectAll("g.trace."+l).data(o,function(p){return p[0].trace.uid})).enter().append("g").classed("trace",!0).classed(l,!0),r.order(),!h.uniformtext.mode&&k.hasTransition(t)?(i&&(a=i()),M.transition().duration(t.duration).ease(t.easing).each("end",function(){a&&a()}).each("interrupt",function(){a&&a()}).each(function(){c.selectAll("g.trace").each(function(p){b(f,p,this,t,u)})})):(r.each(function(p){b(f,p,this,t,u)}),h.uniformtext.mode&&T(f,c.selectAll(".trace"),l)),x&&r.exit().remove()}},27336:function(ee,R,e){var M=e(33428),k=e(3400),s=e(43616),T=e(72736),b=e(13832),f=e(66192).styleOne,o=e(32984),t=e(78176),i=e(45716),n=!0;ee.exports=function(r,a,l,u,h){var c=h.barDifY,x=h.width,p=h.height,v=h.viewX,g=h.viewY,y=h.pathSlice,m=h.toMoveInsideSlice,_=h.strTransform,d=h.hasTransition,S=h.handleSlicesExit,w=h.makeUpdateSliceInterpolator,E=h.makeUpdateTextInterpolator,C={},O=r._context.staticPlot,P=r._fullLayout,z=a[0],j=z.trace,I=z.hierarchy,N=x/j._entryDepth,W=t.listPath(l.data,"id"),F=b(I.copy(),[x,p],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(F=F.filter(function(H){var ne=W.indexOf(H.data.id);return ne!==-1&&(H.x0=N*ne,H.x1=N*(ne+1),H.y0=c,H.y1=c+p,H.onPathbar=!0,!0)})).reverse(),(u=u.data(F,t.getPtId)).enter().append("g").classed("pathbar",!0),S(u,n,C,[x,p],y),u.order();var U=u;d&&(U=U.transition().each("end",function(){var H=M.select(this);t.setSliceCursor(H,r,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),U.each(function(H){H._x0=v(H.x0),H._x1=v(H.x1),H._y0=g(H.y0),H._y1=g(H.y1),H._hoverX=v(H.x1-Math.min(x,p)/2),H._hoverY=g(H.y1-p/2);var ne=M.select(this),$=k.ensureSingle(ne,"path","surface",function(X){X.style("pointer-events",O?"none":"all")});d?$.transition().attrTween("d",function(X){var te=w(X,n,C,[x,p]);return function(ae){return y(te(ae))}}):$.attr("d",y),ne.call(i,l,r,a,{styleOne:f,eventDataKeys:o.eventDataKeys,transitionTime:o.CLICK_TRANSITION_TIME,transitionEasing:o.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,r,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:r._transitioning}),$.call(f,H,j,r,{hovered:!1}),H._text=(t.getPtLabel(H)||"").split("<br>").join(" ")||"";var K=k.ensureSingle(ne,"g","slicetext"),Q=k.ensureSingle(K,"text","",function(X){X.attr("data-notex",1)}),Z=k.ensureUniformFontSize(r,t.determineTextFont(j,H,P.font,{onPathbar:!0}));Q.text(H._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(s.font,Z).call(T.convertToTspans,r),H.textBB=s.bBox(Q.node()),H.transform=m(H,{fontSize:Z.size,onPathbar:!0}),H.transform.fontSize=Z.size,d?Q.transition().attrTween("transform",function(X){var te=E(X,n,C,[x,p]);return function(ae){return _(te(ae))}}):Q.attr("transform",_(H))})}},76477:function(ee,R,e){var M=e(33428),k=e(3400),s=e(43616),T=e(72736),b=e(13832),f=e(66192).styleOne,o=e(32984),t=e(78176),i=e(45716),n=e(96488).formatSliceLabel,r=!1;ee.exports=function(a,l,u,h,c){var x=c.width,p=c.height,v=c.viewX,g=c.viewY,y=c.pathSlice,m=c.toMoveInsideSlice,_=c.strTransform,d=c.hasTransition,S=c.handleSlicesExit,w=c.makeUpdateSliceInterpolator,E=c.makeUpdateTextInterpolator,C=c.prevEntry,O=a._context.staticPlot,P=a._fullLayout,z=l[0].trace,j=z.textposition.indexOf("left")!==-1,I=z.textposition.indexOf("right")!==-1,N=z.textposition.indexOf("bottom")!==-1,W=!N&&!z.marker.pad.t||N&&!z.marker.pad.b,F=b(u,[x,p],{packing:z.tiling.packing,squarifyratio:z.tiling.squarifyratio,flipX:z.tiling.flip.indexOf("x")>-1,flipY:z.tiling.flip.indexOf("y")>-1,pad:{inner:z.tiling.pad,top:z.marker.pad.t,left:z.marker.pad.l,right:z.marker.pad.r,bottom:z.marker.pad.b}}).descendants(),U=1/0,H=-1/0;F.forEach(function(Z){var X=Z.depth;X>=z._maxDepth?(Z.x0=Z.x1=(Z.x0+Z.x1)/2,Z.y0=Z.y1=(Z.y0+Z.y1)/2):(U=Math.min(U,X),H=Math.max(H,X))}),h=h.data(F,t.getPtId),z._maxVisibleLayers=isFinite(H)?H-U+1:0,h.enter().append("g").classed("slice",!0),S(h,r,{},[x,p],y),h.order();var ne=null;if(d&&C){var $=t.getPtId(C);h.each(function(Z){ne===null&&t.getPtId(Z)===$&&(ne={x0:Z.x0,x1:Z.x1,y0:Z.y0,y1:Z.y1})})}var K=function(){return ne||{x0:0,x1:x,y0:0,y1:p}},Q=h;return d&&(Q=Q.transition().each("end",function(){var Z=M.select(this);t.setSliceCursor(Z,a,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),Q.each(function(Z){var X=t.isHeader(Z,z);Z._x0=v(Z.x0),Z._x1=v(Z.x1),Z._y0=g(Z.y0),Z._y1=g(Z.y1),Z._hoverX=v(Z.x1-z.marker.pad.r),Z._hoverY=g(N?Z.y1-z.marker.pad.b/2:Z.y0+z.marker.pad.t/2);var te=M.select(this),ae=k.ensureSingle(te,"path","surface",function(me){me.style("pointer-events",O?"none":"all")});d?ae.transition().attrTween("d",function(me){var be=w(me,r,K(),[x,p]);return function(ke){return y(be(ke))}}):ae.attr("d",y),te.call(i,u,a,l,{styleOne:f,eventDataKeys:o.eventDataKeys,transitionTime:o.CLICK_TRANSITION_TIME,transitionEasing:o.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,a,{isTransitioning:a._transitioning}),ae.call(f,Z,z,a,{hovered:!1}),Z.x0===Z.x1||Z.y0===Z.y1?Z._text="":Z._text=X?W?"":t.getPtLabel(Z)||"":n(Z,u,z,l,P)||"";var se=k.ensureSingle(te,"g","slicetext"),ce=k.ensureSingle(se,"text","",function(me){me.attr("data-notex",1)}),fe=k.ensureUniformFontSize(a,t.determineTextFont(z,Z,P.font)),pe=Z._text||" ",ge=X&&pe.indexOf("<br>")===-1;ce.text(pe).classed("slicetext",!0).attr("text-anchor",I?"end":j||ge?"start":"middle").call(s.font,fe).call(T.convertToTspans,a),Z.textBB=s.bBox(ce.node()),Z.transform=m(Z,{fontSize:fe.size,isHeader:X}),Z.transform.fontSize=fe.size,d?ce.transition().attrTween("transform",function(me){var be=E(me,r,K(),[x,p]);return function(ke){return _(be(ke))}}):ce.attr("transform",_(Z))}),ne}},83024:function(ee){ee.exports=function R(e,M,k){var s;k.swapXY&&(s=e.x0,e.x0=e.y0,e.y0=s,s=e.x1,e.x1=e.y1,e.y1=s),k.flipX&&(s=e.x0,e.x0=M[0]-e.x1,e.x1=M[0]-s),k.flipY&&(s=e.y0,e.y0=M[1]-e.y1,e.y1=M[1]-s);var T=e.children;if(T)for(var b=0;b<T.length;b++)R(T[b],M,k)}},31991:function(ee,R,e){ee.exports={moduleType:"trace",name:"treemap",basePlotModule:e(79516),categories:[],animatable:!0,attributes:e(40516),layoutAttributes:e(45392),supplyDefaults:e(34092),supplyLayoutDefaults:e(77480),calc:e(97840).r,crossTraceCalc:e(97840).q,plot:e(53264),style:e(66192).style,colorbar:e(5528),meta:{}}},45392:function(ee){ee.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77480:function(ee,R,e){var M=e(3400),k=e(45392);ee.exports=function(s,T){function b(f,o){return M.coerce(s,T,k,f,o)}b("treemapcolorway",T.colorway),b("extendtreemapcolors")}},13832:function(ee,R,e){var M=e(74148),k=e(83024);ee.exports=function(s,T,b){var f,o=b.flipX,t=b.flipY,i=b.packing==="dice-slice",n=b.pad[t?"bottom":"top"],r=b.pad[o?"right":"left"],a=b.pad[o?"left":"right"],l=b.pad[t?"top":"bottom"];i&&(f=r,r=n,n=f,f=a,a=l,l=f);var u=M.treemap().tile(function(h,c){switch(h){case"squarify":return M.treemapSquarify.ratio(c);case"binary":return M.treemapBinary;case"dice":return M.treemapDice;case"slice":return M.treemapSlice;default:return M.treemapSliceDice}}(b.packing,b.squarifyratio)).paddingInner(b.pad.inner).paddingLeft(r).paddingRight(a).paddingTop(n).paddingBottom(l).size(i?[T[1],T[0]]:T)(s);return(i||o||t)&&k(u,T,{swapXY:i,flipX:o,flipY:t}),u}},53264:function(ee,R,e){var M=e(95808),k=e(76477);ee.exports=function(s,T,b,f){return M(s,T,b,f,{type:"treemap",drawDescendants:k})}},52960:function(ee,R,e){var M=e(33428),k=e(67756).qy,s=e(78176),T=e(3400),b=e(78048).TEXTPAD,f=e(98184).toMoveInsideBar,o=e(82744).recordMinTextSize,t=e(32984),i=e(27336);function n(r){return s.isHierarchyRoot(r)?"":s.getPtId(r)}ee.exports=function(r,a,l,u,h){var c=r._fullLayout,x=a[0],p=x.trace,v=p.type==="icicle",g=x.hierarchy,y=s.findEntryWithLevel(g,p.level),m=M.select(l),_=m.selectAll("g.pathbar"),d=m.selectAll("g.slice");if(!y)return _.remove(),void d.remove();var S=s.isHierarchyRoot(y),w=!c.uniformtext.mode&&s.hasTransition(u),E=s.getMaxDepth(p),C=c._size,O=p.domain,P=C.w*(O.x[1]-O.x[0]),z=C.h*(O.y[1]-O.y[0]),j=P,I=p.pathbar.thickness,N=p.marker.line.width+t.gapWithPathbar,W=p.pathbar.visible?p.pathbar.side.indexOf("bottom")>-1?z+N:-(I+N):0,F={x0:j,x1:j,y0:W,y1:W+I},U=function(_e,Ae,Pe){var Ee=p.tiling.pad,Fe=function(nt){return nt-Ee<=Ae.x0},Ve=function(nt){return nt+Ee>=Ae.x1},Ye=function(nt){return nt-Ee<=Ae.y0},tt=function(nt){return nt+Ee>=Ae.y1};return _e.x0===Ae.x0&&_e.x1===Ae.x1&&_e.y0===Ae.y0&&_e.y1===Ae.y1?{x0:_e.x0,x1:_e.x1,y0:_e.y0,y1:_e.y1}:{x0:Fe(_e.x0-Ee)?0:Ve(_e.x0-Ee)?Pe[0]:_e.x0,x1:Fe(_e.x1+Ee)?0:Ve(_e.x1+Ee)?Pe[0]:_e.x1,y0:Ye(_e.y0-Ee)?0:tt(_e.y0-Ee)?Pe[1]:_e.y0,y1:Ye(_e.y1+Ee)?0:tt(_e.y1+Ee)?Pe[1]:_e.y1}},H=null,ne={},$={},K=null,Q=function(_e,Ae){return Ae?ne[n(_e)]:$[n(_e)]};x.hasMultipleRoots&&S&&E++,p._maxDepth=E,p._backgroundColor=c.paper_bgcolor,p._entryDepth=y.data.depth,p._atRootLevel=S;var Z=-P/2+C.l+C.w*(O.x[1]+O.x[0])/2,X=-z/2+C.t+C.h*(1-(O.y[1]+O.y[0])/2),te=function(_e){return Z+_e},ae=function(_e){return X+_e},se=ae(0),ce=te(0),fe=function(_e){return ce+_e},pe=function(_e){return se+_e};function ge(_e,Ae){return _e+","+Ae}var me=fe(0),be=function(_e){_e.x=Math.max(me,_e.x)},ke=p.pathbar.edgeshape,ze=p[v?"tiling":"marker"].pad,ve=function(_e){return p.textposition.indexOf(_e)!==-1},oe=ve("top"),ie=ve("left"),he=ve("right"),Se=ve("bottom"),ye=function(_e,Ae){var Pe=_e.x0,Ee=_e.x1,Fe=_e.y0,Ve=_e.y1,Ye=_e.textBB,tt=oe||Ae.isHeader&&!Se?"start":Se?"end":"middle",nt=ve("right"),ht=ve("left")||Ae.onPathbar?-1:nt?1:0;if(Ae.isHeader){if((Pe+=(v?ze:ze.l)-b)>=(Ee-=(v?ze:ze.r)-b)){var vt=(Pe+Ee)/2;Pe=vt,Ee=vt}var pt;Se?Fe<(pt=Ve-(v?ze:ze.b))&&pt<Ve&&(Fe=pt):Fe<(pt=Fe+(v?ze:ze.t))&&pt<Ve&&(Ve=pt)}var Qe=f(Pe,Ee,Fe,Ve,Ye,{isHorizontal:!1,constrained:!0,angle:0,anchor:tt,leftToRight:ht});return Qe.fontSize=Ae.fontSize,Qe.targetX=te(Qe.targetX),Qe.targetY=ae(Qe.targetY),isNaN(Qe.targetX)||isNaN(Qe.targetY)?{}:(Pe!==Ee&&Fe!==Ve&&o(p.type,Qe,c),{scale:Qe.scale,rotate:Qe.rotate,textX:Qe.textX,textY:Qe.textY,anchorX:Qe.anchorX,anchorY:Qe.anchorY,targetX:Qe.targetX,targetY:Qe.targetY})},we=function(_e,Ae){for(var Pe,Ee=0,Fe=_e;!Pe&&Ee<E;)Ee++,(Fe=Fe.parent)?Pe=Q(Fe,Ae):Ee=E;return Pe||{}},Me=function(_e,Ae,Pe,Ee,Fe){var Ve,Ye=Q(_e,Ae);if(Ye)Ve=Ye;else if(Ae)Ve=F;else if(H)if(_e.parent){var tt=K||Pe;tt&&!Ae?Ve=U(_e,tt,Ee):(Ve={},T.extendFlat(Ve,we(_e,Ae)))}else Ve=T.extendFlat({},_e),v&&(Fe.orientation==="h"?Fe.flipX?Ve.x0=_e.x1:Ve.x1=0:Fe.flipY?Ve.y0=_e.y1:Ve.y1=0);else Ve={};return k(Ve,{x0:_e.x0,x1:_e.x1,y0:_e.y0,y1:_e.y1})},Oe=function(_e,Ae,Pe,Ee){var Fe=Q(_e,Ae),Ve={},Ye=function(nt,ht,vt,pt){if(ht)return ne[n(g)]||F;var Qe=$[p.level]||vt;return function(Ke){return Ke.data.depth-y.data.depth<E}(nt)?U(nt,Qe,pt):{}}(_e,Ae,Pe,Ee);T.extendFlat(Ve,{transform:ye({x0:Ye.x0,x1:Ye.x1,y0:Ye.y0,y1:Ye.y1,textBB:_e.textBB,_text:_e._text},{isHeader:s.isHeader(_e,p)})}),Fe?Ve=Fe:_e.parent&&T.extendFlat(Ve,we(_e,Ae));var tt=_e.transform;return _e.x0!==_e.x1&&_e.y0!==_e.y1&&o(p.type,tt,c),k(Ve,{transform:{scale:tt.scale,rotate:tt.rotate,textX:tt.textX,textY:tt.textY,anchorX:tt.anchorX,anchorY:tt.anchorY,targetX:tt.targetX,targetY:tt.targetY}})},Ie=function(_e,Ae,Pe,Ee,Fe){var Ve=Ee[0],Ye=Ee[1];w?_e.exit().transition().each(function(){var tt=M.select(this);tt.select("path.surface").transition().attrTween("d",function(nt){var ht=function(vt,pt,Qe,Ke){var Mt,Ot=Q(vt,pt);if(pt)Mt=F;else{var Pt=Q(y,pt);Mt=Pt?U(vt,Pt,Ke):{}}return k(Ot,Mt)}(nt,Ae,0,[Ve,Ye]);return function(vt){return Fe(ht(vt))}}),tt.select("g.slicetext").attr("opacity",0)}).remove():_e.exit().remove()},de=function(_e){var Ae=_e.transform;return _e.x0!==_e.x1&&_e.y0!==_e.y1&&o(p.type,Ae,c),T.getTextTransform({textX:Ae.textX,textY:Ae.textY,anchorX:Ae.anchorX,anchorY:Ae.anchorY,targetX:Ae.targetX,targetY:Ae.targetY,scale:Ae.scale,rotate:Ae.rotate})};w&&(_.each(function(_e){ne[n(_e)]={x0:_e.x0,x1:_e.x1,y0:_e.y0,y1:_e.y1},_e.transform&&(ne[n(_e)].transform={textX:_e.transform.textX,textY:_e.transform.textY,anchorX:_e.transform.anchorX,anchorY:_e.transform.anchorY,targetX:_e.transform.targetX,targetY:_e.transform.targetY,scale:_e.transform.scale,rotate:_e.transform.rotate})}),d.each(function(_e){$[n(_e)]={x0:_e.x0,x1:_e.x1,y0:_e.y0,y1:_e.y1},_e.transform&&($[n(_e)].transform={textX:_e.transform.textX,textY:_e.transform.textY,anchorX:_e.transform.anchorX,anchorY:_e.transform.anchorY,targetX:_e.transform.targetX,targetY:_e.transform.targetY,scale:_e.transform.scale,rotate:_e.transform.rotate}),!H&&s.isEntry(_e)&&(H=_e)})),K=h(r,a,y,d,{width:P,height:z,viewX:te,viewY:ae,pathSlice:function(_e){var Ae=te(_e.x0),Pe=te(_e.x1),Ee=ae(_e.y0),Fe=ae(_e.y1),Ve=Pe-Ae,Ye=Fe-Ee;if(!Ve||!Ye)return"";var tt=p.marker.cornerradius||0,nt=Math.min(tt,Ve/2,Ye/2);nt&&_e.data&&_e.data.data&&_e.data.data.label&&(oe&&(nt=Math.min(nt,ze.t)),ie&&(nt=Math.min(nt,ze.l)),he&&(nt=Math.min(nt,ze.r)),Se&&(nt=Math.min(nt,ze.b)));var ht=function(vt,pt){return nt?"a"+ge(nt,nt)+" 0 0 1 "+ge(vt,pt):""};return"M"+ge(Ae,Ee+nt)+ht(nt,-nt)+"L"+ge(Pe-nt,Ee)+ht(nt,nt)+"L"+ge(Pe,Fe-nt)+ht(-nt,nt)+"L"+ge(Ae+nt,Fe)+ht(-nt,-nt)+"Z"},toMoveInsideSlice:ye,prevEntry:H,makeUpdateSliceInterpolator:Me,makeUpdateTextInterpolator:Oe,handleSlicesExit:Ie,hasTransition:w,strTransform:de}),p.pathbar.visible?i(r,a,y,_,{barDifY:W,width:j,height:I,viewX:fe,viewY:pe,pathSlice:function(_e){var Ae=fe(Math.max(Math.min(_e.x0,_e.x0),0)),Pe=fe(Math.min(Math.max(_e.x1,_e.x1),j)),Ee=pe(_e.y0),Fe=pe(_e.y1),Ve=I/2,Ye={},tt={};Ye.x=Ae,tt.x=Pe,Ye.y=tt.y=(Ee+Fe)/2;var nt={x:Ae,y:Ee},ht={x:Pe,y:Ee},vt={x:Pe,y:Fe},pt={x:Ae,y:Fe};return ke===">"?(nt.x-=Ve,ht.x-=Ve,vt.x-=Ve,pt.x-=Ve):ke==="/"?(vt.x-=Ve,pt.x-=Ve,Ye.x-=Ve/2,tt.x-=Ve/2):ke==="\\"?(nt.x-=Ve,ht.x-=Ve,Ye.x-=Ve/2,tt.x-=Ve/2):ke==="<"&&(Ye.x-=Ve,tt.x-=Ve),be(nt),be(pt),be(Ye),be(ht),be(vt),be(tt),"M"+ge(nt.x,nt.y)+"L"+ge(ht.x,ht.y)+"L"+ge(tt.x,tt.y)+"L"+ge(vt.x,vt.y)+"L"+ge(pt.x,pt.y)+"L"+ge(Ye.x,Ye.y)+"Z"},toMoveInsideSlice:ye,makeUpdateSliceInterpolator:Me,makeUpdateTextInterpolator:Oe,handleSlicesExit:Ie,hasTransition:w,strTransform:de}):_.remove()}},66192:function(ee,R,e){var M=e(33428),k=e(76308),s=e(3400),T=e(78176),b=e(82744).resizeText,f=e(60404);function o(t,i,n,r,a){var l,u,h=(a||{}).hovered,c=i.data.data,x=c.i,p=c.color,v=T.isHierarchyRoot(i),g=1;if(h)l=n._hovered.marker.line.color,u=n._hovered.marker.line.width;else if(v&&p===n.root.color)g=100,l="rgba(0,0,0,0)",u=0;else if(l=s.castOption(n,x,"marker.line.color")||k.defaultLine,u=s.castOption(n,x,"marker.line.width")||0,!n._hasColorscale&&!i.onPathbar){var y=n.marker.depthfade;if(y){var m,_=k.combine(k.addOpacity(n._backgroundColor,.75),p);if(y===!0){var d=T.getMaxDepth(n);m=isFinite(d)?T.isLeaf(i)?0:n._maxVisibleLayers-(i.data.depth-n._entryDepth):i.data.height+1}else m=i.data.depth-n._entryDepth,n._atRootLevel||m++;if(m>0)for(var S=0;S<m;S++){var w=.5*S/m;p=k.combine(k.addOpacity(_,w),p)}}}t.call(f,i,n,r,p).style("stroke-width",u).call(k.stroke,l).style("opacity",g)}ee.exports={style:function(t){var i=t._fullLayout._treemaplayer.selectAll(".trace");b(t,i,"treemap"),i.each(function(n){var r=M.select(this),a=n[0].trace;r.style("opacity",a.opacity),r.selectAll("path.surface").each(function(l){M.select(this).call(o,l,a,t,{hovered:!1})})})},styleOne:o}},13988:function(ee,R,e){var M=e(63188),k=e(92880).extendFlat,s=e(29736).axisHoverFormat;ee.exports={y:M.y,x:M.x,x0:M.x0,y0:M.y0,xhoverformat:s("x"),yhoverformat:s("y"),name:k({},M.name,{}),orientation:k({},M.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:M.fillcolor,points:k({},M.boxpoints,{}),jitter:k({},M.jitter,{}),pointpos:k({},M.pointpos,{}),width:k({},M.width,{}),marker:M.marker,text:M.text,hovertext:M.hovertext,hovertemplate:M.hovertemplate,quartilemethod:M.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:M.selected,unselected:M.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"},zorder:M.zorder}},67064:function(ee,R,e){var M=e(3400),k=e(54460),s=e(62555),T=e(63800),b=e(39032).BADNUM;function f(t,i,n){var r=i.max-i.min;if(!r)return t.bandwidth?t.bandwidth:0;if(t.bandwidth)return Math.max(t.bandwidth,r/1e4);var a=n.length,l=M.stdev(n,a-1,i.mean);return Math.max(function(u,h,c){return 1.059*Math.min(h,c/1.349)*Math.pow(u,-.2)}(a,l,i.q3-i.q1),r/100)}function o(t,i,n,r){var a,l=t.spanmode,u=t.span||[],h=[i.min,i.max],c=[i.min-2*r,i.max+2*r];function x(v){var g=u[v],y=n.type==="multicategory"?n.r2c(g):n.d2c(g,0,t[i.valLetter+"calendar"]);return y===b?c[v]:y}var p={type:"linear",range:a=l==="soft"?c:l==="hard"?h:[x(0),x(1)]};return k.setConvert(p),p.cleanRange(),a}ee.exports=function(t,i){var n=s(t,i);if(n[0].t.empty)return n;for(var r=t._fullLayout,a=k.getFromId(t,i[i.orientation==="h"?"xaxis":"yaxis"]),l=1/0,u=-1/0,h=0,c=0,x=0;x<n.length;x++){var p=n[x],v=p.pts.map(T.extractVal),g=p.bandwidth=f(i,p,v),y=p.span=o(i,p,a,g);if(p.min===p.max&&g===0)y=p.span=[p.min,p.max],p.density=[{v:1,t:y[0]}],p.bandwidth=g,h=Math.max(h,1);else{var m=y[1]-y[0],_=Math.ceil(m/(g/3)),d=m/_;if(!isFinite(d)||!isFinite(_))return M.error("Something went wrong with computing the violin span"),n[0].t.empty=!0,n;var S=T.makeKDE(p,i,v);p.density=new Array(_);for(var w=0,E=y[0];E<y[1]+d/2;w++,E+=d){var C=S(E);p.density[w]={v:C,t:E},h=Math.max(h,C)}}c=Math.max(c,v.length),l=Math.min(l,y[0]),u=Math.max(u,y[1])}var O=k.findExtremes(a,[l,u],{padded:!0});if(i._extremes[a._id]=O,i.width)n[0].t.maxKDE=h;else{var P=r._violinScaleGroupStats,z=i.scalegroup,j=P[z];j?(j.maxKDE=Math.max(j.maxKDE,h),j.maxCount=Math.max(j.maxCount,c)):P[z]={maxKDE:h,maxCount:c}}return n[0].t.labels.kde=M._(t,"kde:"),n}},14348:function(ee,R,e){var M=e(96404).setPositionOffset,k=["v","h"];ee.exports=function(s,T){for(var b=s.calcdata,f=T.xaxis,o=T.yaxis,t=0;t<k.length;t++){for(var i=k[t],n=i==="h"?o:f,r=[],a=0;a<b.length;a++){var l=b[a],u=l[0].t,h=l[0].trace;h.visible!==!0||h.type!=="violin"||u.empty||h.orientation!==i||h.xaxis!==f._id||h.yaxis!==o._id||r.push(a)}M("violin",s,r,n)}}},36240:function(ee,R,e){var M=e(3400),k=e(76308),s=e(90624),T=e(13988);ee.exports=function(b,f,o,t){function i(m,_){return M.coerce(b,f,T,m,_)}function n(m,_){return M.coerce2(b,f,T,m,_)}if(s.handleSampleDefaults(b,f,i,t),f.visible!==!1){i("bandwidth"),i("side"),i("width")||(i("scalegroup",f.name),i("scalemode"));var r,a=i("span");Array.isArray(a)&&(r="manual"),i("spanmode",r);var l=i("line.color",(b.marker||{}).color||o),u=i("line.width"),h=i("fillcolor",k.addOpacity(f.line.color,.5));s.handlePointsDefaults(b,f,i,{prefix:""});var c=n("box.width"),x=n("box.fillcolor",h),p=n("box.line.color",l),v=n("box.line.width",u);i("box.visible",!!(c||x||p||v))||(f.box={visible:!1});var g=n("meanline.color",l),y=n("meanline.width",u);i("meanline.visible",!!(g||y))||(f.meanline={visible:!1}),i("quartilemethod"),i("zorder")}}},63800:function(ee,R,e){var M=e(3400),k=function(s){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*s*s)};R.makeKDE=function(s,T,b){var f=b.length,o=k,t=s.bandwidth,i=1/(f*t);return function(n){for(var r=0,a=0;a<f;a++)r+=o((n-b[a])/t);return i*r}},R.getPositionOnKdePath=function(s,T,b){var f,o;T.orientation==="h"?(f="y",o="x"):(f="x",o="y");var t=M.findPointOnPath(s.path,b,o,{pathLength:s.pathLength}),i=s.posCenterPx,n=t[f];return[n,T.side==="both"?2*i-n:i]},R.getKdeValue=function(s,T,b){var f=s.pts.map(R.extractVal);return R.makeKDE(s,T,f)(b)/s.posDensityScale},R.extractVal=function(s){return s.v}},78e3:function(ee,R,e){var M=e(76308),k=e(3400),s=e(54460),T=e(27576),b=e(63800);ee.exports=function(f,o,t,i,n){n||(n={});var r,a,l=n.hoverLayer,u=f.cd,h=u[0].trace,c=h.hoveron,x=c.indexOf("violins")!==-1,p=c.indexOf("kde")!==-1,v=[];if(x||p){var g=T.hoverOnBoxes(f,o,t,i);if(p&&g.length>0){var y,m,_,d,S,w=f.xa,E=f.ya;h.orientation==="h"?(S=o,y="y",_=E,m="x",d=w):(S=t,y="x",_=w,m="y",d=E);var C=u[f.index];if(S>=C.span[0]&&S<=C.span[1]){var O=k.extendFlat({},f),P=d.c2p(S,!0),z=b.getKdeValue(C,h,S),j=b.getPositionOnKdePath(C,h,P),I=_._offset,N=_._length;O[y+"0"]=j[0],O[y+"1"]=j[1],O[m+"0"]=O[m+"1"]=P,O[m+"Label"]=m+": "+s.hoverLabelText(d,S,h[m+"hoverformat"])+", "+u[0].t.labels.kde+" "+z.toFixed(3);for(var W=0,F=0;F<g.length;F++)if(g[F].attr==="med"){W=F;break}O.spikeDistance=g[W].spikeDistance;var U=y+"Spike";O[U]=g[W][U],g[W].spikeDistance=void 0,g[W][U]=void 0,O.hovertemplate=!1,v.push(O),(a={})[y+"1"]=k.constrain(I+j[0],I,I+N),a[y+"2"]=k.constrain(I+j[1],I,I+N),a[m+"1"]=a[m+"2"]=d._offset+P}}x&&(v=v.concat(g))}c.indexOf("points")!==-1&&(r=T.hoverOnPoints(f,o,t));var H=l.selectAll(".violinline-"+h.uid).data(a?[0]:[]);return H.enter().append("line").classed("violinline-"+h.uid,!0).attr("stroke-width",1.5),H.exit().remove(),H.attr(a).call(M.stroke,f.color),i==="closest"?r?[r]:v:(r&&v.push(r),v)}},22869:function(ee,R,e){ee.exports={attributes:e(13988),layoutAttributes:e(98228),supplyDefaults:e(36240),crossTraceDefaults:e(90624).crossTraceDefaults,supplyLayoutDefaults:e(8939),calc:e(67064),crossTraceCalc:e(14348),plot:e(5140),style:e(95908),styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(78e3),selectPoints:e(8264),moduleType:"trace",name:"violin",basePlotModule:e(57952),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},98228:function(ee,R,e){var M=e(16560),k=e(3400).extendFlat;ee.exports={violinmode:k({},M.boxmode,{}),violingap:k({},M.boxgap,{}),violingroupgap:k({},M.boxgroupgap,{})}},8939:function(ee,R,e){var M=e(3400),k=e(98228),s=e(68832);ee.exports=function(T,b,f){s._supply(T,b,f,function(o,t){return M.coerce(T,b,k,o,t)},"violin")}},5140:function(ee,R,e){var M=e(33428),k=e(3400),s=e(43616),T=e(18728),b=e(52340),f=e(63800);ee.exports=function(o,t,i,n){var r=o._context.staticPlot,a=o._fullLayout,l=t.xaxis,u=t.yaxis;function h(c,x){var p=b(c,{xaxis:l,yaxis:u,trace:x,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return s.smoothopen(p[0],1)}k.makeTraceGroups(n,i,"trace violins").each(function(c){var x=M.select(this),p=c[0],v=p.t,g=p.trace;if(g.visible!==!0||v.empty)x.remove();else{var y=v.bPos,m=v.bdPos,_=t[v.valLetter+"axis"],d=t[v.posLetter+"axis"],S=g.side==="both",w=S||g.side==="positive",E=S||g.side==="negative",C=x.selectAll("path.violin").data(k.identity);C.enter().append("path").style("vector-effect",r?"none":"non-scaling-stroke").attr("class","violin"),C.exit().remove(),C.each(function(F){var U,H,ne,$,K,Q,Z,X,te=M.select(this),ae=F.density,se=ae.length,ce=d.c2l(F.pos+y,!0),fe=d.l2p(ce);if(g.width)U=v.maxKDE/m;else{var pe=a._violinScaleGroupStats[g.scalegroup];U=g.scalemode==="count"?pe.maxKDE/m*(pe.maxCount/F.pts.length):pe.maxKDE/m}if(w){for(Z=new Array(se),K=0;K<se;K++)(X=Z[K]={})[v.posLetter]=ce+ae[K].v/U,X[v.valLetter]=_.c2l(ae[K].t,!0);H=h(Z,g)}if(E){for(Z=new Array(se),Q=0,K=se-1;Q<se;Q++,K--)(X=Z[Q]={})[v.posLetter]=ce-ae[K].v/U,X[v.valLetter]=_.c2l(ae[K].t,!0);ne=h(Z,g)}if(S)$=H+"L"+ne.substr(1)+"Z";else{var ge=[fe,_.c2p(ae[0].t)],me=[fe,_.c2p(ae[se-1].t)];g.orientation==="h"&&(ge.reverse(),me.reverse()),$=w?"M"+ge+"L"+H.substr(1)+"L"+me:"M"+me+"L"+ne.substr(1)+"L"+ge}te.attr("d",$),F.posCenterPx=fe,F.posDensityScale=U*m,F.path=te.node(),F.pathLength=F.path.getTotalLength()/(S?2:1)});var O,P,z,j=g.box,I=j.width,N=(j.line||{}).width;S?(O=m*I,P=0):w?(O=[0,m*I/2],P=N*{x:1,y:-1}[v.posLetter]):(O=[m*I/2,0],P=N*{x:-1,y:1}[v.posLetter]),T.plotBoxAndWhiskers(x,{pos:d,val:_},g,{bPos:y,bdPos:O,bPosPxOffset:P}),T.plotBoxMean(x,{pos:d,val:_},g,{bPos:y,bdPos:O,bPosPxOffset:P}),!g.box.visible&&g.meanline.visible&&(z=k.identity);var W=x.selectAll("path.meanline").data(z||[]);W.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",r?"none":"non-scaling-stroke"),W.exit().remove(),W.each(function(F){var U=_.c2p(F.mean,!0),H=f.getPositionOnKdePath(F,g,U);M.select(this).attr("d",g.orientation==="h"?"M"+U+","+H[0]+"V"+H[1]:"M"+H[0]+","+U+"H"+H[1])}),T.plotPoints(x,{x:l,y:u},g,v)}})}},95908:function(ee,R,e){var M=e(33428),k=e(76308),s=e(49224).stylePoints;ee.exports=function(T){var b=M.select(T).selectAll("g.trace.violins");b.style("opacity",function(f){return f[0].trace.opacity}),b.each(function(f){var o=f[0].trace,t=M.select(this),i=o.box||{},n=i.line||{},r=o.meanline||{},a=r.width;t.selectAll("path.violin").style("stroke-width",o.line.width+"px").call(k.stroke,o.line.color).call(k.fill,o.fillcolor),t.selectAll("path.box").style("stroke-width",n.width+"px").call(k.stroke,n.color).call(k.fill,i.fillcolor);var l={"stroke-width":a+"px","stroke-dasharray":2*a+"px,"+a+"px"};t.selectAll("path.mean").style(l).call(k.stroke,r.color),t.selectAll("path.meanline").style(l).call(k.stroke,r.color),s(t,o,T)})}},58168:function(ee,R,e){var M=e(49084),k=e(50048),s=e(16716),T=e(45464),b=e(92880).extendFlat,f=e(67824).overrideAll,o=ee.exports=f(b({x:k.x,y:k.y,z:k.z,value:k.value,isomin:k.isomin,isomax:k.isomax,surface:k.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:k.slices,caps:k.caps,text:k.text,hovertext:k.hovertext,xhoverformat:k.xhoverformat,yhoverformat:k.yhoverformat,zhoverformat:k.zhoverformat,valuehoverformat:k.valuehoverformat,hovertemplate:k.hovertemplate},M("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:k.colorbar,opacity:k.opacity,opacityscale:s.opacityscale,lightposition:k.lightposition,lighting:k.lighting,flatshading:k.flatshading,contour:k.contour,hoverinfo:b({},T.hoverinfo),showlegend:b({},T.showlegend,{dflt:!1})}),"calc","nested");o.x.editType=o.y.editType=o.z.editType=o.value.editType="calc+clearAxisTypes",o.transforms=void 0},91976:function(ee,R,e){var M=e(67792).gl_mesh3d,k=e(33040).parseColorScale,s=e(3400).isArrayOrTypedArray,T=e(43080),b=e(8932).extractOpts,f=e(52094),o=e(31460).findNearestOnAxis,t=e(31460).generateIsoMeshes;function i(r,a,l){this.scene=r,this.uid=l,this.mesh=a,this.name="",this.data=null,this.showContour=!1}var n=i.prototype;n.handlePick=function(r){if(r.object===this.mesh){var a=r.data.index,l=this.data._meshX[a],u=this.data._meshY[a],h=this.data._meshZ[a],c=this.data._Ys.length,x=this.data._Zs.length,p=o(l,this.data._Xs).id,v=o(u,this.data._Ys).id,g=o(h,this.data._Zs).id,y=r.index=g+x*v+x*c*p;r.traceCoordinate=[this.data._meshX[y],this.data._meshY[y],this.data._meshZ[y],this.data._value[y]];var m=this.data.hovertext||this.data.text;return s(m)&&m[y]!==void 0?r.textLabel=m[y]:m&&(r.textLabel=m),!0}},n.update=function(r){var a=this.scene,l=a.fullSceneLayout;function u(x,p,v,g){return p.map(function(y){return x.d2l(y,0,g)*v})}this.data=t(r);var h={positions:f(u(l.xaxis,r._meshX,a.dataScale[0],r.xcalendar),u(l.yaxis,r._meshY,a.dataScale[1],r.ycalendar),u(l.zaxis,r._meshZ,a.dataScale[2],r.zcalendar)),cells:f(r._meshI,r._meshJ,r._meshK),lightPosition:[r.lightposition.x,r.lightposition.y,r.lightposition.z],ambient:r.lighting.ambient,diffuse:r.lighting.diffuse,specular:r.lighting.specular,roughness:r.lighting.roughness,fresnel:r.lighting.fresnel,vertexNormalsEpsilon:r.lighting.vertexnormalsepsilon,faceNormalsEpsilon:r.lighting.facenormalsepsilon,opacity:r.opacity,opacityscale:r.opacityscale,contourEnable:r.contour.show,contourColor:T(r.contour.color).slice(0,3),contourWidth:r.contour.width,useFacetNormals:r.flatshading},c=b(r);h.vertexIntensity=r._meshIntensity,h.vertexIntensityBounds=[c.min,c.max],h.colormap=k(r),this.mesh.update(h)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ee.exports=function(r,a){var l=r.glplot.gl,u=M({gl:l}),h=new i(r,u,a.uid);return u._trace=h,h.update(a),r.glplot.add(u),h}},12448:function(ee,R,e){var M=e(3400),k=e(58168),s=e(70548).supplyIsoDefaults,T=e(60192).opacityscaleDefaults;ee.exports=function(b,f,o,t){function i(n,r){return M.coerce(b,f,k,n,r)}s(b,f,o,t,i),T(b,f,t,i)}},67776:function(ee,R,e){ee.exports={attributes:e(58168),supplyDefaults:e(12448),calc:e(62624),colorbar:{min:"cmin",max:"cmax"},plot:e(91976),moduleType:"trace",name:"volume",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},65776:function(ee,R,e){var M=e(20832),k=e(52904).line,s=e(45464),T=e(29736).axisHoverFormat,b=e(21776).Ks,f=e(21776).Gw,o=e(10213),t=e(92880).extendFlat,i=e(76308);function n(r){return{marker:{color:t({},M.marker.color,{arrayOk:!1,editType:"style"}),line:{color:t({},M.marker.line.color,{arrayOk:!1,editType:"style"}),width:t({},M.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}ee.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),hovertext:M.hovertext,hovertemplate:b({},{keys:o.eventDataKeys}),hoverinfo:t({},s.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:f({editType:"plot"},{keys:o.eventDataKeys.concat(["label"])}),text:M.text,textposition:M.textposition,insidetextanchor:M.insidetextanchor,textangle:M.textangle,textfont:M.textfont,insidetextfont:M.insidetextfont,outsidetextfont:M.outsidetextfont,constraintext:M.constraintext,cliponaxis:M.cliponaxis,orientation:M.orientation,offset:M.offset,width:M.width,increasing:n(),decreasing:n(),totals:n(),connector:{line:{color:t({},k.color,{dflt:i.defaultLine}),width:t({},k.width,{editType:"plot"}),dash:k.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,zorder:M.zorder}},73540:function(ee,R,e){var M=e(54460),k=e(1220),s=e(3400).mergeArray,T=e(4500),b=e(39032).BADNUM;function f(t){return t==="a"||t==="absolute"}function o(t){return t==="t"||t==="total"}ee.exports=function(t,i){var n,r,a,l,u,h,c=M.getFromId(t,i.xaxis||"x"),x=M.getFromId(t,i.yaxis||"y");i.orientation==="h"?(n=c.makeCalcdata(i,"x"),a=x.makeCalcdata(i,"y"),l=k(i,x,"y",a),u=!!i.yperiodalignment,h="y"):(n=x.makeCalcdata(i,"y"),a=c.makeCalcdata(i,"x"),l=k(i,c,"x",a),u=!!i.xperiodalignment,h="x"),r=l.vals;for(var p,v=Math.min(r.length,n.length),g=new Array(v),y=0,m=!1,_=0;_<v;_++){var d=n[_]||0,S=!1;(n[_]!==b||o(i.measure[_])||f(i.measure[_]))&&_+1<v&&(n[_+1]!==b||o(i.measure[_+1])||f(i.measure[_+1]))&&(S=!0);var w=g[_]={i:_,p:r[_],s:d,rawS:d,cNext:S};f(i.measure[_])?(y=w.s,w.isSum=!0,w.dir="totals",w.s=y):o(i.measure[_])?(w.isSum=!0,w.dir="totals",w.s=y):(w.isSum=!1,w.dir=w.rawS<0?"decreasing":"increasing",p=w.s,w.s=y+p,y+=p),w.dir==="totals"&&(m=!0),u&&(g[_].orig_p=a[_],g[_][h+"End"]=l.ends[_],g[_][h+"Start"]=l.starts[_]),i.ids&&(w.id=String(i.ids[_])),w.v=(i.base||0)+y}return g.length&&(g[0].hasTotals=m),s(i.text,g,"tx"),s(i.hovertext,g,"htx"),T(g,i),g}},10213:function(ee){ee.exports={eventDataKeys:["initial","delta","final"]}},50152:function(ee,R,e){var M=e(96376).setGroupPositions;ee.exports=function(k,s){var T,b,f=k._fullLayout,o=k._fullData,t=k.calcdata,i=s.xaxis,n=s.yaxis,r=[],a=[],l=[];for(b=0;b<o.length;b++){var u=o[b];u.visible===!0&&u.xaxis===i._id&&u.yaxis===n._id&&u.type==="waterfall"&&(T=t[b],u.orientation==="h"?l.push(T):a.push(T),r.push(T))}var h={mode:f.waterfallmode,norm:f.waterfallnorm,gap:f.waterfallgap,groupgap:f.waterfallgroupgap};for(M(k,i,n,a,h),M(k,n,i,l,h),b=0;b<r.length;b++){T=r[b];for(var c=0;c<T.length;c++){var x=T[c];x.isSum===!1&&(x.s0+=c===0?0:T[c-1].s),c+1<T.length&&(T[c].nextP0=T[c+1].p0,T[c].nextS0=T[c+1].s0)}}}},24224:function(ee,R,e){var M=e(3400),k=e(20011),s=e(31508).handleText,T=e(43980),b=e(31147),f=e(65776),o=e(76308),t=e(48164),i=t.INCREASING.COLOR,n=t.DECREASING.COLOR;function r(a,l,u){a(l+".marker.color",u),a(l+".marker.line.color",o.defaultLine),a(l+".marker.line.width")}ee.exports={supplyDefaults:function(a,l,u,h){function c(p,v){return M.coerce(a,l,f,p,v)}if(T(a,l,h,c)){b(a,l,h,c),c("xhoverformat"),c("yhoverformat"),c("measure"),c("orientation",l.x&&!l.y?"h":"v"),c("base"),c("offset"),c("width"),c("text"),c("hovertext"),c("hovertemplate");var x=c("textposition");s(a,l,h,c,x,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),l.textposition!=="none"&&(c("texttemplate"),l.texttemplate||c("textinfo")),r(c,"increasing",i),r(c,"decreasing",n),r(c,"totals","#4499FF"),c("connector.visible")&&(c("connector.mode"),c("connector.line.width")&&(c("connector.line.color"),c("connector.line.dash"))),c("zorder")}else l.visible=!1},crossTraceDefaults:function(a,l){var u,h;function c(p){return M.coerce(h._input,h,f,p)}if(l.waterfallmode==="group")for(var x=0;x<a.length;x++)u=(h=a[x])._input,k(u,h,l,c)}}},53256:function(ee){ee.exports=function(R,e){return R.x="xVal"in e?e.xVal:e.x,R.y="yVal"in e?e.yVal:e.y,"initial"in e&&(R.initial=e.initial),"delta"in e&&(R.delta=e.delta),"final"in e&&(R.final=e.final),e.xa&&(R.xaxis=e.xa),e.ya&&(R.yaxis=e.ya),R}},94196:function(ee,R,e){var M=e(54460).hoverLabelText,k=e(76308).opacity,s=e(63400).hoverOnBars,T=e(48164),b=T.INCREASING.SYMBOL,f=T.DECREASING.SYMBOL;ee.exports=function(o,t,i,n,r){var a=s(o,t,i,n,r);if(a){var l=a.cd,u=l[0].trace,h=u.orientation==="h",c=h?"x":"y",x=h?o.xa:o.ya,p=l[a.index],v=p.isSum?p.b+p.s:p.rawS;a.initial=p.b+p.s-v,a.delta=v,a.final=a.initial+a.delta;var g=w(Math.abs(a.delta));a.deltaLabel=v<0?"("+g+")":g,a.finalLabel=w(a.final),a.initialLabel=w(a.initial);var y=p.hi||u.hoverinfo,m=[];if(y&&y!=="none"&&y!=="skip"){var _=y==="all",d=y.split("+"),S=function(E){return _||d.indexOf(E)!==-1};p.isSum||(!S("final")||S(h?"x":"y")||m.push(a.finalLabel),S("delta")&&(v<0?m.push(a.deltaLabel+" "+f):m.push(a.deltaLabel+" "+b)),S("initial")&&m.push("Initial: "+a.initialLabel))}return m.length&&(a.extraText=m.join("<br>")),a.color=function(E,C){var O=E[C.dir].marker,P=O.color,z=O.line.color,j=O.line.width;return k(P)?P:k(z)&&j?z:void 0}(u,p),[a]}function w(E){return M(x,E,u[c+"hoverformat"])}}},95952:function(ee,R,e){ee.exports={attributes:e(65776),layoutAttributes:e(91352),supplyDefaults:e(24224).supplyDefaults,crossTraceDefaults:e(24224).crossTraceDefaults,supplyLayoutDefaults:e(59464),calc:e(73540),crossTraceCalc:e(50152),plot:e(64488),style:e(12252).style,hoverPoints:e(94196),eventData:e(53256),selectPoints:e(45784),moduleType:"trace",name:"waterfall",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},91352:function(ee){ee.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},59464:function(ee,R,e){var M=e(3400),k=e(91352);ee.exports=function(s,T,b){var f=!1;function o(n,r){return M.coerce(s,T,k,n,r)}for(var t=0;t<b.length;t++){var i=b[t];if(i.visible&&i.type==="waterfall"){f=!0;break}}f&&(o("waterfallmode"),o("waterfallgap",.2),o("waterfallgroupgap"))}},64488:function(ee,R,e){var M=e(33428),k=e(3400),s=e(43616),T=e(39032).BADNUM,b=e(98184),f=e(82744).clearMinTextSize;ee.exports=function(o,t,i,n){var r=o._fullLayout;f("waterfall",r),b.plot(o,t,i,n,{mode:r.waterfallmode,norm:r.waterfallmode,gap:r.waterfallgap,groupgap:r.waterfallgroupgap}),function(a,l,u,h){var c=l.xaxis,x=l.yaxis;k.makeTraceGroups(h,u,"trace bars").each(function(p){var v=M.select(this),g=p[0].trace,y=k.ensureSingle(v,"g","lines");if(g.connector&&g.connector.visible){var m=g.orientation==="h",_=g.connector.mode,d=y.selectAll("g.line").data(k.identity);d.enter().append("g").classed("line",!0),d.exit().remove();var S=d.size();d.each(function(w,E){if(E===S-1||w.cNext){var C=function(j,I,N,W){var F=[],U=[],H=W?I:N,ne=W?N:I;return F[0]=H.c2p(j.s0,!0),U[0]=ne.c2p(j.p0,!0),F[1]=H.c2p(j.s1,!0),U[1]=ne.c2p(j.p1,!0),F[2]=H.c2p(j.nextS0,!0),U[2]=ne.c2p(j.nextP0,!0),W?[F,U]:[U,F]}(w,c,x,m),O=C[0],P=C[1],z="";O[0]!==T&&P[0]!==T&&O[1]!==T&&P[1]!==T&&(_==="spanning"&&!w.isSum&&E>0&&(z+=m?"M"+O[0]+","+P[1]+"V"+P[0]:"M"+O[1]+","+P[0]+"H"+O[0]),_!=="between"&&(w.isSum||E<S-1)&&(z+=m?"M"+O[1]+","+P[0]+"V"+P[1]:"M"+O[0]+","+P[1]+"H"+O[1]),O[2]!==T&&P[2]!==T&&(z+=m?"M"+O[1]+","+P[1]+"V"+P[2]:"M"+O[1]+","+P[1]+"H"+O[2])),z===""&&(z="M0,0Z"),k.ensureSingle(M.select(this),"path").attr("d",z).call(s.setClipUrl,l.layerClipId,a)}})}else y.remove()})}(o,t,i,n)}},12252:function(ee,R,e){var M=e(33428),k=e(43616),s=e(76308),T=e(13448).DESELECTDIM,b=e(60100),f=e(82744).resizeText,o=b.styleTextPoints;ee.exports={style:function(t,i,n){var r=n||M.select(t).selectAll('g[class^="waterfalllayer"]').selectAll("g.trace");f(t,r,"waterfall"),r.style("opacity",function(a){return a[0].trace.opacity}),r.each(function(a){var l=M.select(this),u=a[0].trace;l.selectAll(".point > path").each(function(h){if(!h.isBlank){var c=u[h.dir].marker;M.select(this).call(s.fill,c.color).call(s.stroke,c.line.color).call(k.dashLine,c.line.dash,c.line.width).style("opacity",u.selectedpoints&&!h.selected?T:1)}}),o(l,u,t),l.selectAll(".lines").each(function(){var h=u.connector.line;k.lineGroupStyle(M.select(this).selectAll("path"),h.width,h.color,h.dash)})})}}},84224:function(ee,R,e){var M=e(54460),k=e(3400),s=e(73060),T=e(60468).W,b=e(39032).BADNUM;R.moduleType="transform",R.name="aggregate";var f=R.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},o=f.aggregations;function t(a,l,u,h){if(h.enabled){for(var c=h.target,x=k.nestedProperty(l,c),p=x.get(),v=function(m,_){var d=m.func,S=_.d2c,w=_.c2d;switch(d){case"count":return i;case"first":return n;case"last":return r;case"sum":return function(E,C){for(var O=0,P=0;P<C.length;P++){var z=S(E[C[P]]);z!==b&&(O+=z)}return w(O)};case"avg":return function(E,C){for(var O=0,P=0,z=0;z<C.length;z++){var j=S(E[C[z]]);j!==b&&(O+=j,P++)}return P?w(O/P):b};case"min":return function(E,C){for(var O=1/0,P=0;P<C.length;P++){var z=S(E[C[P]]);z!==b&&(O=Math.min(O,z))}return O===1/0?b:w(O)};case"max":return function(E,C){for(var O=-1/0,P=0;P<C.length;P++){var z=S(E[C[P]]);z!==b&&(O=Math.max(O,z))}return O===-1/0?b:w(O)};case"range":return function(E,C){for(var O=1/0,P=-1/0,z=0;z<C.length;z++){var j=S(E[C[z]]);j!==b&&(O=Math.min(O,j),P=Math.max(P,j))}return P===-1/0||O===1/0?b:w(P-O)};case"change":return function(E,C){var O=S(E[C[0]]),P=S(E[C[C.length-1]]);return O===b||P===b?b:w(P-O)};case"median":return function(E,C){for(var O=[],P=0;P<C.length;P++){var z=S(E[C[P]]);z!==b&&O.push(z)}if(!O.length)return b;O.sort(k.sorterAsc);var j=(O.length-1)/2;return w((O[Math.floor(j)]+O[Math.ceil(j)])/2)};case"mode":return function(E,C){for(var O={},P=0,z=b,j=0;j<C.length;j++){var I=S(E[C[j]]);if(I!==b){var N=O[I]=(O[I]||0)+1;N>P&&(P=N,z=I)}}return P?w(z):b};case"rms":return function(E,C){for(var O=0,P=0,z=0;z<C.length;z++){var j=S(E[C[z]]);j!==b&&(O+=j*j,P++)}return P?w(Math.sqrt(O/P)):b};case"stddev":return function(E,C){var O,P=0,z=0,j=1,I=b;for(O=0;O<C.length&&I===b;O++)I=S(E[C[O]]);if(I===b)return b;for(;O<C.length;O++){var N=S(E[C[O]]);if(N!==b){var W=N-I;P+=W,z+=W*W,j++}}var F=m.funcmode==="sample"?j-1:j;return F?Math.sqrt((z-P*P/j)/F):0}}}(h,M.getDataConversions(a,l,c,p)),g=new Array(u.length),y=0;y<u.length;y++)g[y]=v(p,u[y]);x.set(g),h.func==="count"&&k.pushUnique(l._arrayAttrs,c)}}function i(a,l){return l.length}function n(a,l){return a[l[0]]}function r(a,l){return a[l[l.length-1]]}R.supplyDefaults=function(a,l){var u,h={};function c(w,E){return k.coerce(a,h,f,w,E)}if(!c("enabled"))return h;var x=s.findArrayAttributes(l),p={};for(u=0;u<x.length;u++)p[x[u]]=1;var v=c("groups");if(!Array.isArray(v)){if(!p[v])return h.enabled=!1,h;p[v]=0}var g,y=a.aggregations||[],m=h.aggregations=new Array(y.length);function _(w,E){return k.coerce(y[u],g,o,w,E)}for(u=0;u<y.length;u++){g={_index:u};var d=_("target"),S=_("func");_("enabled")&&d&&(p[d]||S==="count"&&p[d]===void 0)?(S==="stddev"&&_("funcmode"),p[d]=0,m[u]=g):m[u]={enabled:!1,_index:u}}for(u=0;u<x.length;u++)p[x[u]]&&m.push({target:x[u],func:o.func.dflt,enabled:!0,_index:-1});return h},R.calcTransform=function(a,l,u){if(u.enabled){var h=u.groups,c=k.getTargetArray(l,{target:h});if(c){var x,p,v,g,y={},m={},_=[],d=T(l.transforms,u),S=c.length;for(l._length&&(S=Math.min(S,l._length)),x=0;x<S;x++)(v=y[p=c[x]])===void 0?(y[p]=_.length,g=[x],_.push(g),m[y[p]]=d(x)):(_[v].push(x),m[y[p]]=(m[y[p]]||[]).concat(d(x)));u._indexToPoints=m;var w=u.aggregations;for(x=0;x<w.length;x++)t(a,l,_,w[x]);typeof h=="string"&&t(a,l,_,{target:h,func:"first",enabled:!0}),l._length=_.length}}}},76744:function(ee,R,e){var M=e(3400),k=e(24040),s=e(54460),T=e(60468).W,b=e(69104),f=b.COMPARISON_OPS,o=b.INTERVAL_OPS,t=b.SET_OPS;R.moduleType="transform",R.name="filter",R.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(f).concat(o).concat(t),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},R.supplyDefaults=function(i){var n={};function r(u,h){return M.coerce(i,n,R.attributes,u,h)}if(r("enabled")){var a=r("target");if(M.isArrayOrTypedArray(a)&&a.length===0)return n.enabled=!1,n;r("preservegaps"),r("operation"),r("value");var l=k.getComponentMethod("calendars","handleDefaults");l(i,n,"valuecalendar",null),l(i,n,"targetcalendar",null)}return n},R.calcTransform=function(i,n,r){if(r.enabled){var a=M.getTargetArray(n,r);if(a){var l=r.target,u=a.length;n._length&&(u=Math.min(u,n._length));var h=r.targetcalendar,c=n._arrayAttrs,x=r.preservegaps;if(typeof l=="string"){var p=M.nestedProperty(n,l+"calendar").get();p&&(h=p)}var v,g,y=function(C,O,P){var z=C.operation,j=C.value,I=M.isArrayOrTypedArray(j);function N(H){return H.indexOf(z)!==-1}var W,F=function(H){return O(H,0,C.valuecalendar)},U=function(H){return O(H,0,P)};switch(N(f)?W=F(I?j[0]:j):N(o)?W=I?[F(j[0]),F(j[1])]:[F(j),F(j)]:N(t)&&(W=I?j.map(F):[F(j)]),z){case"=":return function(H){return U(H)===W};case"!=":return function(H){return U(H)!==W};case"<":return function(H){return U(H)<W};case"<=":return function(H){return U(H)<=W};case">":return function(H){return U(H)>W};case">=":return function(H){return U(H)>=W};case"[]":return function(H){var ne=U(H);return ne>=W[0]&&ne<=W[1]};case"()":return function(H){var ne=U(H);return ne>W[0]&&ne<W[1]};case"[)":return function(H){var ne=U(H);return ne>=W[0]&&ne<W[1]};case"(]":return function(H){var ne=U(H);return ne>W[0]&&ne<=W[1]};case"][":return function(H){var ne=U(H);return ne<=W[0]||ne>=W[1]};case")(":return function(H){var ne=U(H);return ne<W[0]||ne>W[1]};case"](":return function(H){var ne=U(H);return ne<=W[0]||ne>W[1]};case")[":return function(H){var ne=U(H);return ne<W[0]||ne>=W[1]};case"{}":return function(H){return W.indexOf(U(H))!==-1};case"}{":return function(H){return W.indexOf(U(H))===-1}}}(r,s.getDataToCoordFunc(i,n,l,a),h),m={},_={},d=0;x?(v=function(C){m[C.astr]=M.extendDeep([],C.get()),C.set(new Array(u))},g=function(C,O){var P=m[C.astr][O];C.get()[O]=P}):(v=function(C){m[C.astr]=M.extendDeep([],C.get()),C.set([])},g=function(C,O){var P=m[C.astr][O];C.get().push(P)}),E(v);for(var S=T(n.transforms,r),w=0;w<u;w++)y(a[w])?(E(g,w),_[d++]=S(w)):x&&d++;r._indexToPoints=_,n._length=d}}function E(C,O){for(var P=0;P<c.length;P++)C(M.nestedProperty(n,c[P]),O)}}},32028:function(ee,R,e){var M=e(3400),k=e(73060),s=e(7316),T=e(60468).W;function b(f,o){var t,i,n,r,a,l,u,h,c,x,p=o.transform,v=o.transformIndex,g=f.transforms[v].groups,y=T(f.transforms,p);if(!M.isArrayOrTypedArray(g)||g.length===0)return[f];var m=M.filterUnique(g),_=new Array(m.length),d=g.length,S=k.findArrayAttributes(f),w=p.styles||[],E={};for(t=0;t<w.length;t++)E[w[t].target]=w[t].value;p.styles&&(x=M.keyedContainer(p,"styles","target","value.name"));var C={},O={};for(t=0;t<m.length;t++){C[l=m[t]]=t,O[l]=0,(u=_[t]=M.extendDeepNoArrays({},f))._group=l,u.transforms[v]._indexToPoints={};var P=null;for(x&&(P=x.get(l)),u.name=P||P===""?P:M.templateString(p.nameformat,{trace:f.name,group:l}),h=u.transforms,u.transforms=[],i=0;i<h.length;i++)u.transforms[i]=M.extendDeepNoArrays({},h[i]);for(i=0;i<S.length;i++)M.nestedProperty(u,S[i]).set([])}for(n=0;n<S.length;n++){for(r=S[n],i=0,c=[];i<m.length;i++)c[i]=M.nestedProperty(_[i],r).get();for(a=M.nestedProperty(f,r).get(),i=0;i<d;i++)c[C[g[i]]].push(a[i])}for(i=0;i<d;i++)(u=_[C[g[i]]]).transforms[v]._indexToPoints[O[g[i]]]=y(i),O[g[i]]++;for(t=0;t<m.length;t++)l=m[t],u=_[t],s.clearExpandedTraceDefaultColors(u),u=M.extendDeepNoArrays(u,E[l]||{});return _}R.moduleType="transform",R.name="groupby",R.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},R.supplyDefaults=function(f,o,t){var i,n={};function r(c,x){return M.coerce(f,n,R.attributes,c,x)}if(!r("enabled"))return n;r("groups"),r("nameformat",t._dataLength>1?"%{group} (%{trace})":"%{group}");var a=f.styles,l=n.styles=[];if(a)for(i=0;i<a.length;i++){var u=l[i]={};M.coerce(a[i],l[i],R.attributes.styles,"target");var h=M.coerce(a[i],l[i],R.attributes.styles,"value");M.isPlainObject(h)?u.value=M.extendDeep({},h):h&&delete u.value}return n},R.transform=function(f,o){var t,i,n,r=[];for(i=0;i<f.length;i++)for(t=b(f[i],o),n=0;n<t.length;n++)r.push(t[n]);return r}},60468:function(ee,R){R.W=function(e,M){for(var k,s,T=0;T<e.length&&(k=e[T])!==M;T++)k._indexToPoints&&k.enabled!==!1&&(s=k._indexToPoints);var b=s?function(f){return s[f]}:function(f){return[f]};return b}},76272:function(ee,R,e){var M=e(3400),k=e(54460),s=e(60468).W,T=e(39032).BADNUM;R.moduleType="transform",R.name="sort",R.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},R.supplyDefaults=function(b){var f={};function o(t,i){return M.coerce(b,f,R.attributes,t,i)}return o("enabled")&&(o("target"),o("order")),f},R.calcTransform=function(b,f,o){if(o.enabled){var t=M.getTargetArray(f,o);if(t){var i=o.target,n=t.length;f._length&&(n=Math.min(n,f._length));var r,a,l=f._arrayAttrs,u=function(g,y,m,_){var d,S=new Array(_),w=new Array(_);for(d=0;d<_;d++)S[d]={v:y[d],i:d};for(S.sort(function(E,C){switch(E.order){case"ascending":return function(O,P){var z=C(O.v),j=C(P.v);return z===T?1:j===T?-1:z-j};case"descending":return function(O,P){var z=C(O.v),j=C(P.v);return z===T?1:j===T?-1:j-z}}}(g,m)),d=0;d<_;d++)w[d]=S[d].i;return w}(o,t,k.getDataToCoordFunc(b,f,i,t),n),h=s(f.transforms,o),c={};for(r=0;r<l.length;r++){var x=M.nestedProperty(f,l[r]),p=x.get(),v=new Array(n);for(a=0;a<n;a++)v[a]=p[u[a]];x.set(v)}for(a=0;a<n;a++)c[a]=h(u[a]);o._indexToPoints=c,f._length=n}}}},25788:function(ee,R){R.version="2.34.0"},67792:function(ee,R,e){var M=e(4168);(function(){var k={1964:function(f,o,t){f.exports={alpha_shape:t(3502),convex_hull:t(7352),delaunay_triangulate:t(7642),gl_cone3d:t(6405),gl_error3d:t(9165),gl_heatmap2d:t(2510),gl_line3d:t(5714),gl_mesh3d:t(7201),gl_plot2d:t(1850),gl_plot3d:t(4100),gl_pointcloud2d:t(4696),gl_scatter3d:t(8418),gl_select_box:t(3161),gl_spikes2d:t(4098),gl_streamtube3d:t(7815),gl_surface3d:t(9499),ndarray:t(9618),ndarray_linear_interpolate:t(4317)}},4793:function(f,o,t){function i(de,_e){for(var Ae=0;Ae<_e.length;Ae++){var Pe=_e[Ae];Pe.enumerable=Pe.enumerable||!1,Pe.configurable=!0,"value"in Pe&&(Pe.writable=!0),Object.defineProperty(de,n(Pe.key),Pe)}}function n(de){var _e=function(Ae,Pe){if(u(Ae)!="object"||!Ae)return Ae;var Ee=Ae[Symbol.toPrimitive];if(Ee!==void 0){var Fe=Ee.call(Ae,"string");if(u(Fe)!="object")return Fe;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Ae)}(de);return u(_e)=="symbol"?_e:_e+""}function r(){try{var de=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r=function(){return!!de})()}function a(de){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_e){return _e.__proto__||Object.getPrototypeOf(_e)},a(de)}function l(de,_e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Ae,Pe){return Ae.__proto__=Pe,Ae},l(de,_e)}function u(de){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_e){return typeof _e}:function(_e){return _e&&typeof Symbol=="function"&&_e.constructor===Symbol&&_e!==Symbol.prototype?"symbol":typeof _e},u(de)}var h=t(7507),c=t(3778),x=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;o.hp=g,o.IS=50;var p=2147483647;function v(de){if(de>p)throw new RangeError('The value "'+de+'" is invalid for option "size"');var _e=new Uint8Array(de);return Object.setPrototypeOf(_e,g.prototype),_e}function g(de,_e,Ae){if(typeof de=="number"){if(typeof _e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _(de)}return y(de,_e,Ae)}function y(de,_e,Ae){if(typeof de=="string")return function(Fe,Ve){if(typeof Ve=="string"&&Ve!==""||(Ve="utf8"),!g.isEncoding(Ve))throw new TypeError("Unknown encoding: "+Ve);var Ye=0|E(Fe,Ve),tt=v(Ye),nt=tt.write(Fe,Ve);return nt!==Ye&&(tt=tt.slice(0,nt)),tt}(de,_e);if(ArrayBuffer.isView(de))return function(Fe){if(ye(Fe,Uint8Array)){var Ve=new Uint8Array(Fe);return S(Ve.buffer,Ve.byteOffset,Ve.byteLength)}return d(Fe)}(de);if(de==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+u(de));if(ye(de,ArrayBuffer)||de&&ye(de.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ye(de,SharedArrayBuffer)||de&&ye(de.buffer,SharedArrayBuffer)))return S(de,_e,Ae);if(typeof de=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Pe=de.valueOf&&de.valueOf();if(Pe!=null&&Pe!==de)return g.from(Pe,_e,Ae);var Ee=function(Fe){if(g.isBuffer(Fe)){var Ve=0|w(Fe.length),Ye=v(Ve);return Ye.length===0||Fe.copy(Ye,0,0,Ve),Ye}return Fe.length!==void 0?typeof Fe.length!="number"||we(Fe.length)?v(0):d(Fe):Fe.type==="Buffer"&&Array.isArray(Fe.data)?d(Fe.data):void 0}(de);if(Ee)return Ee;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof de[Symbol.toPrimitive]=="function")return g.from(de[Symbol.toPrimitive]("string"),_e,Ae);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+u(de))}function m(de){if(typeof de!="number")throw new TypeError('"size" argument must be of type number');if(de<0)throw new RangeError('The value "'+de+'" is invalid for option "size"')}function _(de){return m(de),v(de<0?0:0|w(de))}function d(de){for(var _e=de.length<0?0:0|w(de.length),Ae=v(_e),Pe=0;Pe<_e;Pe+=1)Ae[Pe]=255&de[Pe];return Ae}function S(de,_e,Ae){if(_e<0||de.byteLength<_e)throw new RangeError('"offset" is outside of buffer bounds');if(de.byteLength<_e+(Ae||0))throw new RangeError('"length" is outside of buffer bounds');var Pe;return Pe=_e===void 0&&Ae===void 0?new Uint8Array(de):Ae===void 0?new Uint8Array(de,_e):new Uint8Array(de,_e,Ae),Object.setPrototypeOf(Pe,g.prototype),Pe}function w(de){if(de>=p)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+p.toString(16)+" bytes");return 0|de}function E(de,_e){if(g.isBuffer(de))return de.length;if(ArrayBuffer.isView(de)||ye(de,ArrayBuffer))return de.byteLength;if(typeof de!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+u(de));var Ae=de.length,Pe=arguments.length>2&&arguments[2]===!0;if(!Pe&&Ae===0)return 0;for(var Ee=!1;;)switch(_e){case"ascii":case"latin1":case"binary":return Ae;case"utf8":case"utf-8":return ie(de).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Ae;case"hex":return Ae>>>1;case"base64":return he(de).length;default:if(Ee)return Pe?-1:ie(de).length;_e=(""+_e).toLowerCase(),Ee=!0}}function C(de,_e,Ae){var Pe=!1;if((_e===void 0||_e<0)&&(_e=0),_e>this.length||((Ae===void 0||Ae>this.length)&&(Ae=this.length),Ae<=0)||(Ae>>>=0)<=(_e>>>=0))return"";for(de||(de="utf8");;)switch(de){case"hex":return Q(this,_e,Ae);case"utf8":case"utf-8":return H(this,_e,Ae);case"ascii":return $(this,_e,Ae);case"latin1":case"binary":return K(this,_e,Ae);case"base64":return U(this,_e,Ae);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,_e,Ae);default:if(Pe)throw new TypeError("Unknown encoding: "+de);de=(de+"").toLowerCase(),Pe=!0}}function O(de,_e,Ae){var Pe=de[_e];de[_e]=de[Ae],de[Ae]=Pe}function P(de,_e,Ae,Pe,Ee){if(de.length===0)return-1;if(typeof Ae=="string"?(Pe=Ae,Ae=0):Ae>2147483647?Ae=2147483647:Ae<-2147483648&&(Ae=-2147483648),we(Ae=+Ae)&&(Ae=Ee?0:de.length-1),Ae<0&&(Ae=de.length+Ae),Ae>=de.length){if(Ee)return-1;Ae=de.length-1}else if(Ae<0){if(!Ee)return-1;Ae=0}if(typeof _e=="string"&&(_e=g.from(_e,Pe)),g.isBuffer(_e))return _e.length===0?-1:z(de,_e,Ae,Pe,Ee);if(typeof _e=="number")return _e&=255,typeof Uint8Array.prototype.indexOf=="function"?Ee?Uint8Array.prototype.indexOf.call(de,_e,Ae):Uint8Array.prototype.lastIndexOf.call(de,_e,Ae):z(de,[_e],Ae,Pe,Ee);throw new TypeError("val must be string, number or Buffer")}function z(de,_e,Ae,Pe,Ee){var Fe,Ve=1,Ye=de.length,tt=_e.length;if(Pe!==void 0&&((Pe=String(Pe).toLowerCase())==="ucs2"||Pe==="ucs-2"||Pe==="utf16le"||Pe==="utf-16le")){if(de.length<2||_e.length<2)return-1;Ve=2,Ye/=2,tt/=2,Ae/=2}function nt(Qe,Ke){return Ve===1?Qe[Ke]:Qe.readUInt16BE(Ke*Ve)}if(Ee){var ht=-1;for(Fe=Ae;Fe<Ye;Fe++)if(nt(de,Fe)===nt(_e,ht===-1?0:Fe-ht)){if(ht===-1&&(ht=Fe),Fe-ht+1===tt)return ht*Ve}else ht!==-1&&(Fe-=Fe-ht),ht=-1}else for(Ae+tt>Ye&&(Ae=Ye-tt),Fe=Ae;Fe>=0;Fe--){for(var vt=!0,pt=0;pt<tt;pt++)if(nt(de,Fe+pt)!==nt(_e,pt)){vt=!1;break}if(vt)return Fe}return-1}function j(de,_e,Ae,Pe){Ae=Number(Ae)||0;var Ee=de.length-Ae;Pe?(Pe=Number(Pe))>Ee&&(Pe=Ee):Pe=Ee;var Fe,Ve=_e.length;for(Pe>Ve/2&&(Pe=Ve/2),Fe=0;Fe<Pe;++Fe){var Ye=parseInt(_e.substr(2*Fe,2),16);if(we(Ye))return Fe;de[Ae+Fe]=Ye}return Fe}function I(de,_e,Ae,Pe){return Se(ie(_e,de.length-Ae),de,Ae,Pe)}function N(de,_e,Ae,Pe){return Se(function(Ee){for(var Fe=[],Ve=0;Ve<Ee.length;++Ve)Fe.push(255&Ee.charCodeAt(Ve));return Fe}(_e),de,Ae,Pe)}function W(de,_e,Ae,Pe){return Se(he(_e),de,Ae,Pe)}function F(de,_e,Ae,Pe){return Se(function(Ee,Fe){for(var Ve,Ye,tt,nt=[],ht=0;ht<Ee.length&&!((Fe-=2)<0);++ht)Ye=(Ve=Ee.charCodeAt(ht))>>8,tt=Ve%256,nt.push(tt),nt.push(Ye);return nt}(_e,de.length-Ae),de,Ae,Pe)}function U(de,_e,Ae){return _e===0&&Ae===de.length?h.fromByteArray(de):h.fromByteArray(de.slice(_e,Ae))}function H(de,_e,Ae){Ae=Math.min(de.length,Ae);for(var Pe=[],Ee=_e;Ee<Ae;){var Fe=de[Ee],Ve=null,Ye=Fe>239?4:Fe>223?3:Fe>191?2:1;if(Ee+Ye<=Ae){var tt=void 0,nt=void 0,ht=void 0,vt=void 0;switch(Ye){case 1:Fe<128&&(Ve=Fe);break;case 2:(192&(tt=de[Ee+1]))==128&&(vt=(31&Fe)<<6|63&tt)>127&&(Ve=vt);break;case 3:tt=de[Ee+1],nt=de[Ee+2],(192&tt)==128&&(192&nt)==128&&(vt=(15&Fe)<<12|(63&tt)<<6|63&nt)>2047&&(vt<55296||vt>57343)&&(Ve=vt);break;case 4:tt=de[Ee+1],nt=de[Ee+2],ht=de[Ee+3],(192&tt)==128&&(192&nt)==128&&(192&ht)==128&&(vt=(15&Fe)<<18|(63&tt)<<12|(63&nt)<<6|63&ht)>65535&&vt<1114112&&(Ve=vt)}}Ve===null?(Ve=65533,Ye=1):Ve>65535&&(Ve-=65536,Pe.push(Ve>>>10&1023|55296),Ve=56320|1023&Ve),Pe.push(Ve),Ee+=Ye}return function(pt){var Qe=pt.length;if(Qe<=ne)return String.fromCharCode.apply(String,pt);for(var Ke="",Mt=0;Mt<Qe;)Ke+=String.fromCharCode.apply(String,pt.slice(Mt,Mt+=ne));return Ke}(Pe)}g.TYPED_ARRAY_SUPPORT=function(){try{var de=new Uint8Array(1),_e={foo:function(){return 42}};return Object.setPrototypeOf(_e,Uint8Array.prototype),Object.setPrototypeOf(de,_e),de.foo()===42}catch{return!1}}(),g.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(g.prototype,"parent",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.buffer}}),Object.defineProperty(g.prototype,"offset",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.byteOffset}}),g.poolSize=8192,g.from=function(de,_e,Ae){return y(de,_e,Ae)},Object.setPrototypeOf(g.prototype,Uint8Array.prototype),Object.setPrototypeOf(g,Uint8Array),g.alloc=function(de,_e,Ae){return function(Pe,Ee,Fe){return m(Pe),Pe<=0?v(Pe):Ee!==void 0?typeof Fe=="string"?v(Pe).fill(Ee,Fe):v(Pe).fill(Ee):v(Pe)}(de,_e,Ae)},g.allocUnsafe=function(de){return _(de)},g.allocUnsafeSlow=function(de){return _(de)},g.isBuffer=function(de){return de!=null&&de._isBuffer===!0&&de!==g.prototype},g.compare=function(de,_e){if(ye(de,Uint8Array)&&(de=g.from(de,de.offset,de.byteLength)),ye(_e,Uint8Array)&&(_e=g.from(_e,_e.offset,_e.byteLength)),!g.isBuffer(de)||!g.isBuffer(_e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(de===_e)return 0;for(var Ae=de.length,Pe=_e.length,Ee=0,Fe=Math.min(Ae,Pe);Ee<Fe;++Ee)if(de[Ee]!==_e[Ee]){Ae=de[Ee],Pe=_e[Ee];break}return Ae<Pe?-1:Pe<Ae?1:0},g.isEncoding=function(de){switch(String(de).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},g.concat=function(de,_e){if(!Array.isArray(de))throw new TypeError('"list" argument must be an Array of Buffers');if(de.length===0)return g.alloc(0);var Ae;if(_e===void 0)for(_e=0,Ae=0;Ae<de.length;++Ae)_e+=de[Ae].length;var Pe=g.allocUnsafe(_e),Ee=0;for(Ae=0;Ae<de.length;++Ae){var Fe=de[Ae];if(ye(Fe,Uint8Array))Ee+Fe.length>Pe.length?(g.isBuffer(Fe)||(Fe=g.from(Fe)),Fe.copy(Pe,Ee)):Uint8Array.prototype.set.call(Pe,Fe,Ee);else{if(!g.isBuffer(Fe))throw new TypeError('"list" argument must be an Array of Buffers');Fe.copy(Pe,Ee)}Ee+=Fe.length}return Pe},g.byteLength=E,g.prototype._isBuffer=!0,g.prototype.swap16=function(){var de=this.length;if(de%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var _e=0;_e<de;_e+=2)O(this,_e,_e+1);return this},g.prototype.swap32=function(){var de=this.length;if(de%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var _e=0;_e<de;_e+=4)O(this,_e,_e+3),O(this,_e+1,_e+2);return this},g.prototype.swap64=function(){var de=this.length;if(de%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var _e=0;_e<de;_e+=8)O(this,_e,_e+7),O(this,_e+1,_e+6),O(this,_e+2,_e+5),O(this,_e+3,_e+4);return this},g.prototype.toString=function(){var de=this.length;return de===0?"":arguments.length===0?H(this,0,de):C.apply(this,arguments)},g.prototype.toLocaleString=g.prototype.toString,g.prototype.equals=function(de){if(!g.isBuffer(de))throw new TypeError("Argument must be a Buffer");return this===de||g.compare(this,de)===0},g.prototype.inspect=function(){var de="",_e=o.IS;return de=this.toString("hex",0,_e).replace(/(.{2})/g,"$1 ").trim(),this.length>_e&&(de+=" ... "),"<Buffer "+de+">"},x&&(g.prototype[x]=g.prototype.inspect),g.prototype.compare=function(de,_e,Ae,Pe,Ee){if(ye(de,Uint8Array)&&(de=g.from(de,de.offset,de.byteLength)),!g.isBuffer(de))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+u(de));if(_e===void 0&&(_e=0),Ae===void 0&&(Ae=de?de.length:0),Pe===void 0&&(Pe=0),Ee===void 0&&(Ee=this.length),_e<0||Ae>de.length||Pe<0||Ee>this.length)throw new RangeError("out of range index");if(Pe>=Ee&&_e>=Ae)return 0;if(Pe>=Ee)return-1;if(_e>=Ae)return 1;if(this===de)return 0;for(var Fe=(Ee>>>=0)-(Pe>>>=0),Ve=(Ae>>>=0)-(_e>>>=0),Ye=Math.min(Fe,Ve),tt=this.slice(Pe,Ee),nt=de.slice(_e,Ae),ht=0;ht<Ye;++ht)if(tt[ht]!==nt[ht]){Fe=tt[ht],Ve=nt[ht];break}return Fe<Ve?-1:Ve<Fe?1:0},g.prototype.includes=function(de,_e,Ae){return this.indexOf(de,_e,Ae)!==-1},g.prototype.indexOf=function(de,_e,Ae){return P(this,de,_e,Ae,!0)},g.prototype.lastIndexOf=function(de,_e,Ae){return P(this,de,_e,Ae,!1)},g.prototype.write=function(de,_e,Ae,Pe){if(_e===void 0)Pe="utf8",Ae=this.length,_e=0;else if(Ae===void 0&&typeof _e=="string")Pe=_e,Ae=this.length,_e=0;else{if(!isFinite(_e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");_e>>>=0,isFinite(Ae)?(Ae>>>=0,Pe===void 0&&(Pe="utf8")):(Pe=Ae,Ae=void 0)}var Ee=this.length-_e;if((Ae===void 0||Ae>Ee)&&(Ae=Ee),de.length>0&&(Ae<0||_e<0)||_e>this.length)throw new RangeError("Attempt to write outside buffer bounds");Pe||(Pe="utf8");for(var Fe=!1;;)switch(Pe){case"hex":return j(this,de,_e,Ae);case"utf8":case"utf-8":return I(this,de,_e,Ae);case"ascii":case"latin1":case"binary":return N(this,de,_e,Ae);case"base64":return W(this,de,_e,Ae);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,de,_e,Ae);default:if(Fe)throw new TypeError("Unknown encoding: "+Pe);Pe=(""+Pe).toLowerCase(),Fe=!0}},g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ne=4096;function $(de,_e,Ae){var Pe="";Ae=Math.min(de.length,Ae);for(var Ee=_e;Ee<Ae;++Ee)Pe+=String.fromCharCode(127&de[Ee]);return Pe}function K(de,_e,Ae){var Pe="";Ae=Math.min(de.length,Ae);for(var Ee=_e;Ee<Ae;++Ee)Pe+=String.fromCharCode(de[Ee]);return Pe}function Q(de,_e,Ae){var Pe=de.length;(!_e||_e<0)&&(_e=0),(!Ae||Ae<0||Ae>Pe)&&(Ae=Pe);for(var Ee="",Fe=_e;Fe<Ae;++Fe)Ee+=Me[de[Fe]];return Ee}function Z(de,_e,Ae){for(var Pe=de.slice(_e,Ae),Ee="",Fe=0;Fe<Pe.length-1;Fe+=2)Ee+=String.fromCharCode(Pe[Fe]+256*Pe[Fe+1]);return Ee}function X(de,_e,Ae){if(de%1!=0||de<0)throw new RangeError("offset is not uint");if(de+_e>Ae)throw new RangeError("Trying to access beyond buffer length")}function te(de,_e,Ae,Pe,Ee,Fe){if(!g.isBuffer(de))throw new TypeError('"buffer" argument must be a Buffer instance');if(_e>Ee||_e<Fe)throw new RangeError('"value" argument is out of bounds');if(Ae+Pe>de.length)throw new RangeError("Index out of range")}function ae(de,_e,Ae,Pe,Ee){ke(_e,Pe,Ee,de,Ae,7);var Fe=Number(_e&BigInt(4294967295));de[Ae++]=Fe,Fe>>=8,de[Ae++]=Fe,Fe>>=8,de[Ae++]=Fe,Fe>>=8,de[Ae++]=Fe;var Ve=Number(_e>>BigInt(32)&BigInt(4294967295));return de[Ae++]=Ve,Ve>>=8,de[Ae++]=Ve,Ve>>=8,de[Ae++]=Ve,Ve>>=8,de[Ae++]=Ve,Ae}function se(de,_e,Ae,Pe,Ee){ke(_e,Pe,Ee,de,Ae,7);var Fe=Number(_e&BigInt(4294967295));de[Ae+7]=Fe,Fe>>=8,de[Ae+6]=Fe,Fe>>=8,de[Ae+5]=Fe,Fe>>=8,de[Ae+4]=Fe;var Ve=Number(_e>>BigInt(32)&BigInt(4294967295));return de[Ae+3]=Ve,Ve>>=8,de[Ae+2]=Ve,Ve>>=8,de[Ae+1]=Ve,Ve>>=8,de[Ae]=Ve,Ae+8}function ce(de,_e,Ae,Pe,Ee,Fe){if(Ae+Pe>de.length)throw new RangeError("Index out of range");if(Ae<0)throw new RangeError("Index out of range")}function fe(de,_e,Ae,Pe,Ee){return _e=+_e,Ae>>>=0,Ee||ce(de,0,Ae,4),c.write(de,_e,Ae,Pe,23,4),Ae+4}function pe(de,_e,Ae,Pe,Ee){return _e=+_e,Ae>>>=0,Ee||ce(de,0,Ae,8),c.write(de,_e,Ae,Pe,52,8),Ae+8}g.prototype.slice=function(de,_e){var Ae=this.length;(de=~~de)<0?(de+=Ae)<0&&(de=0):de>Ae&&(de=Ae),(_e=_e===void 0?Ae:~~_e)<0?(_e+=Ae)<0&&(_e=0):_e>Ae&&(_e=Ae),_e<de&&(_e=de);var Pe=this.subarray(de,_e);return Object.setPrototypeOf(Pe,g.prototype),Pe},g.prototype.readUintLE=g.prototype.readUIntLE=function(de,_e,Ae){de>>>=0,_e>>>=0,Ae||X(de,_e,this.length);for(var Pe=this[de],Ee=1,Fe=0;++Fe<_e&&(Ee*=256);)Pe+=this[de+Fe]*Ee;return Pe},g.prototype.readUintBE=g.prototype.readUIntBE=function(de,_e,Ae){de>>>=0,_e>>>=0,Ae||X(de,_e,this.length);for(var Pe=this[de+--_e],Ee=1;_e>0&&(Ee*=256);)Pe+=this[de+--_e]*Ee;return Pe},g.prototype.readUint8=g.prototype.readUInt8=function(de,_e){return de>>>=0,_e||X(de,1,this.length),this[de]},g.prototype.readUint16LE=g.prototype.readUInt16LE=function(de,_e){return de>>>=0,_e||X(de,2,this.length),this[de]|this[de+1]<<8},g.prototype.readUint16BE=g.prototype.readUInt16BE=function(de,_e){return de>>>=0,_e||X(de,2,this.length),this[de]<<8|this[de+1]},g.prototype.readUint32LE=g.prototype.readUInt32LE=function(de,_e){return de>>>=0,_e||X(de,4,this.length),(this[de]|this[de+1]<<8|this[de+2]<<16)+16777216*this[de+3]},g.prototype.readUint32BE=g.prototype.readUInt32BE=function(de,_e){return de>>>=0,_e||X(de,4,this.length),16777216*this[de]+(this[de+1]<<16|this[de+2]<<8|this[de+3])},g.prototype.readBigUInt64LE=Oe(function(de){ze(de>>>=0,"offset");var _e=this[de],Ae=this[de+7];_e!==void 0&&Ae!==void 0||ve(de,this.length-8);var Pe=_e+this[++de]*Math.pow(2,8)+this[++de]*Math.pow(2,16)+this[++de]*Math.pow(2,24),Ee=this[++de]+this[++de]*Math.pow(2,8)+this[++de]*Math.pow(2,16)+Ae*Math.pow(2,24);return BigInt(Pe)+(BigInt(Ee)<<BigInt(32))}),g.prototype.readBigUInt64BE=Oe(function(de){ze(de>>>=0,"offset");var _e=this[de],Ae=this[de+7];_e!==void 0&&Ae!==void 0||ve(de,this.length-8);var Pe=_e*Math.pow(2,24)+this[++de]*Math.pow(2,16)+this[++de]*Math.pow(2,8)+this[++de],Ee=this[++de]*Math.pow(2,24)+this[++de]*Math.pow(2,16)+this[++de]*Math.pow(2,8)+Ae;return(BigInt(Pe)<<BigInt(32))+BigInt(Ee)}),g.prototype.readIntLE=function(de,_e,Ae){de>>>=0,_e>>>=0,Ae||X(de,_e,this.length);for(var Pe=this[de],Ee=1,Fe=0;++Fe<_e&&(Ee*=256);)Pe+=this[de+Fe]*Ee;return Pe>=(Ee*=128)&&(Pe-=Math.pow(2,8*_e)),Pe},g.prototype.readIntBE=function(de,_e,Ae){de>>>=0,_e>>>=0,Ae||X(de,_e,this.length);for(var Pe=_e,Ee=1,Fe=this[de+--Pe];Pe>0&&(Ee*=256);)Fe+=this[de+--Pe]*Ee;return Fe>=(Ee*=128)&&(Fe-=Math.pow(2,8*_e)),Fe},g.prototype.readInt8=function(de,_e){return de>>>=0,_e||X(de,1,this.length),128&this[de]?-1*(255-this[de]+1):this[de]},g.prototype.readInt16LE=function(de,_e){de>>>=0,_e||X(de,2,this.length);var Ae=this[de]|this[de+1]<<8;return 32768&Ae?4294901760|Ae:Ae},g.prototype.readInt16BE=function(de,_e){de>>>=0,_e||X(de,2,this.length);var Ae=this[de+1]|this[de]<<8;return 32768&Ae?4294901760|Ae:Ae},g.prototype.readInt32LE=function(de,_e){return de>>>=0,_e||X(de,4,this.length),this[de]|this[de+1]<<8|this[de+2]<<16|this[de+3]<<24},g.prototype.readInt32BE=function(de,_e){return de>>>=0,_e||X(de,4,this.length),this[de]<<24|this[de+1]<<16|this[de+2]<<8|this[de+3]},g.prototype.readBigInt64LE=Oe(function(de){ze(de>>>=0,"offset");var _e=this[de],Ae=this[de+7];_e!==void 0&&Ae!==void 0||ve(de,this.length-8);var Pe=this[de+4]+this[de+5]*Math.pow(2,8)+this[de+6]*Math.pow(2,16)+(Ae<<24);return(BigInt(Pe)<<BigInt(32))+BigInt(_e+this[++de]*Math.pow(2,8)+this[++de]*Math.pow(2,16)+this[++de]*Math.pow(2,24))}),g.prototype.readBigInt64BE=Oe(function(de){ze(de>>>=0,"offset");var _e=this[de],Ae=this[de+7];_e!==void 0&&Ae!==void 0||ve(de,this.length-8);var Pe=(_e<<24)+this[++de]*Math.pow(2,16)+this[++de]*Math.pow(2,8)+this[++de];return(BigInt(Pe)<<BigInt(32))+BigInt(this[++de]*Math.pow(2,24)+this[++de]*Math.pow(2,16)+this[++de]*Math.pow(2,8)+Ae)}),g.prototype.readFloatLE=function(de,_e){return de>>>=0,_e||X(de,4,this.length),c.read(this,de,!0,23,4)},g.prototype.readFloatBE=function(de,_e){return de>>>=0,_e||X(de,4,this.length),c.read(this,de,!1,23,4)},g.prototype.readDoubleLE=function(de,_e){return de>>>=0,_e||X(de,8,this.length),c.read(this,de,!0,52,8)},g.prototype.readDoubleBE=function(de,_e){return de>>>=0,_e||X(de,8,this.length),c.read(this,de,!1,52,8)},g.prototype.writeUintLE=g.prototype.writeUIntLE=function(de,_e,Ae,Pe){de=+de,_e>>>=0,Ae>>>=0,Pe||te(this,de,_e,Ae,Math.pow(2,8*Ae)-1,0);var Ee=1,Fe=0;for(this[_e]=255&de;++Fe<Ae&&(Ee*=256);)this[_e+Fe]=de/Ee&255;return _e+Ae},g.prototype.writeUintBE=g.prototype.writeUIntBE=function(de,_e,Ae,Pe){de=+de,_e>>>=0,Ae>>>=0,Pe||te(this,de,_e,Ae,Math.pow(2,8*Ae)-1,0);var Ee=Ae-1,Fe=1;for(this[_e+Ee]=255&de;--Ee>=0&&(Fe*=256);)this[_e+Ee]=de/Fe&255;return _e+Ae},g.prototype.writeUint8=g.prototype.writeUInt8=function(de,_e,Ae){return de=+de,_e>>>=0,Ae||te(this,de,_e,1,255,0),this[_e]=255&de,_e+1},g.prototype.writeUint16LE=g.prototype.writeUInt16LE=function(de,_e,Ae){return de=+de,_e>>>=0,Ae||te(this,de,_e,2,65535,0),this[_e]=255&de,this[_e+1]=de>>>8,_e+2},g.prototype.writeUint16BE=g.prototype.writeUInt16BE=function(de,_e,Ae){return de=+de,_e>>>=0,Ae||te(this,de,_e,2,65535,0),this[_e]=de>>>8,this[_e+1]=255&de,_e+2},g.prototype.writeUint32LE=g.prototype.writeUInt32LE=function(de,_e,Ae){return de=+de,_e>>>=0,Ae||te(this,de,_e,4,4294967295,0),this[_e+3]=de>>>24,this[_e+2]=de>>>16,this[_e+1]=de>>>8,this[_e]=255&de,_e+4},g.prototype.writeUint32BE=g.prototype.writeUInt32BE=function(de,_e,Ae){return de=+de,_e>>>=0,Ae||te(this,de,_e,4,4294967295,0),this[_e]=de>>>24,this[_e+1]=de>>>16,this[_e+2]=de>>>8,this[_e+3]=255&de,_e+4},g.prototype.writeBigUInt64LE=Oe(function(de){return ae(this,de,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),g.prototype.writeBigUInt64BE=Oe(function(de){return se(this,de,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),g.prototype.writeIntLE=function(de,_e,Ae,Pe){if(de=+de,_e>>>=0,!Pe){var Ee=Math.pow(2,8*Ae-1);te(this,de,_e,Ae,Ee-1,-Ee)}var Fe=0,Ve=1,Ye=0;for(this[_e]=255&de;++Fe<Ae&&(Ve*=256);)de<0&&Ye===0&&this[_e+Fe-1]!==0&&(Ye=1),this[_e+Fe]=(de/Ve>>0)-Ye&255;return _e+Ae},g.prototype.writeIntBE=function(de,_e,Ae,Pe){if(de=+de,_e>>>=0,!Pe){var Ee=Math.pow(2,8*Ae-1);te(this,de,_e,Ae,Ee-1,-Ee)}var Fe=Ae-1,Ve=1,Ye=0;for(this[_e+Fe]=255&de;--Fe>=0&&(Ve*=256);)de<0&&Ye===0&&this[_e+Fe+1]!==0&&(Ye=1),this[_e+Fe]=(de/Ve>>0)-Ye&255;return _e+Ae},g.prototype.writeInt8=function(de,_e,Ae){return de=+de,_e>>>=0,Ae||te(this,de,_e,1,127,-128),de<0&&(de=255+de+1),this[_e]=255&de,_e+1},g.prototype.writeInt16LE=function(de,_e,Ae){return de=+de,_e>>>=0,Ae||te(this,de,_e,2,32767,-32768),this[_e]=255&de,this[_e+1]=de>>>8,_e+2},g.prototype.writeInt16BE=function(de,_e,Ae){return de=+de,_e>>>=0,Ae||te(this,de,_e,2,32767,-32768),this[_e]=de>>>8,this[_e+1]=255&de,_e+2},g.prototype.writeInt32LE=function(de,_e,Ae){return de=+de,_e>>>=0,Ae||te(this,de,_e,4,2147483647,-2147483648),this[_e]=255&de,this[_e+1]=de>>>8,this[_e+2]=de>>>16,this[_e+3]=de>>>24,_e+4},g.prototype.writeInt32BE=function(de,_e,Ae){return de=+de,_e>>>=0,Ae||te(this,de,_e,4,2147483647,-2147483648),de<0&&(de=4294967295+de+1),this[_e]=de>>>24,this[_e+1]=de>>>16,this[_e+2]=de>>>8,this[_e+3]=255&de,_e+4},g.prototype.writeBigInt64LE=Oe(function(de){return ae(this,de,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),g.prototype.writeBigInt64BE=Oe(function(de){return se(this,de,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),g.prototype.writeFloatLE=function(de,_e,Ae){return fe(this,de,_e,!0,Ae)},g.prototype.writeFloatBE=function(de,_e,Ae){return fe(this,de,_e,!1,Ae)},g.prototype.writeDoubleLE=function(de,_e,Ae){return pe(this,de,_e,!0,Ae)},g.prototype.writeDoubleBE=function(de,_e,Ae){return pe(this,de,_e,!1,Ae)},g.prototype.copy=function(de,_e,Ae,Pe){if(!g.isBuffer(de))throw new TypeError("argument should be a Buffer");if(Ae||(Ae=0),Pe||Pe===0||(Pe=this.length),_e>=de.length&&(_e=de.length),_e||(_e=0),Pe>0&&Pe<Ae&&(Pe=Ae),Pe===Ae||de.length===0||this.length===0)return 0;if(_e<0)throw new RangeError("targetStart out of bounds");if(Ae<0||Ae>=this.length)throw new RangeError("Index out of range");if(Pe<0)throw new RangeError("sourceEnd out of bounds");Pe>this.length&&(Pe=this.length),de.length-_e<Pe-Ae&&(Pe=de.length-_e+Ae);var Ee=Pe-Ae;return this===de&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(_e,Ae,Pe):Uint8Array.prototype.set.call(de,this.subarray(Ae,Pe),_e),Ee},g.prototype.fill=function(de,_e,Ae,Pe){if(typeof de=="string"){if(typeof _e=="string"?(Pe=_e,_e=0,Ae=this.length):typeof Ae=="string"&&(Pe=Ae,Ae=this.length),Pe!==void 0&&typeof Pe!="string")throw new TypeError("encoding must be a string");if(typeof Pe=="string"&&!g.isEncoding(Pe))throw new TypeError("Unknown encoding: "+Pe);if(de.length===1){var Ee=de.charCodeAt(0);(Pe==="utf8"&&Ee<128||Pe==="latin1")&&(de=Ee)}}else typeof de=="number"?de&=255:typeof de=="boolean"&&(de=Number(de));if(_e<0||this.length<_e||this.length<Ae)throw new RangeError("Out of range index");if(Ae<=_e)return this;var Fe;if(_e>>>=0,Ae=Ae===void 0?this.length:Ae>>>0,de||(de=0),typeof de=="number")for(Fe=_e;Fe<Ae;++Fe)this[Fe]=de;else{var Ve=g.isBuffer(de)?de:g.from(de,Pe),Ye=Ve.length;if(Ye===0)throw new TypeError('The value "'+de+'" is invalid for argument "value"');for(Fe=0;Fe<Ae-_e;++Fe)this[Fe+_e]=Ve[Fe%Ye]}return this};var ge={};function me(de,_e,Ae){ge[de]=function(Pe){function Ee(){var Ye,tt,nt,ht;return function(vt,pt){if(!(vt instanceof pt))throw new TypeError("Cannot call a class as a function")}(this,Ee),tt=this,nt=a(nt=Ee),Ye=function(vt,pt){if(pt&&(u(pt)==="object"||typeof pt=="function"))return pt;if(pt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Qe){if(Qe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Qe}(vt)}(tt,r()?Reflect.construct(nt,[],a(tt).constructor):nt.apply(tt,ht)),Object.defineProperty(Ye,"message",{value:_e.apply(Ye,arguments),writable:!0,configurable:!0}),Ye.name="".concat(Ye.name," [").concat(de,"]"),Ye.stack,delete Ye.name,Ye}return function(Ye,tt){if(typeof tt!="function"&&tt!==null)throw new TypeError("Super expression must either be null or a function");Ye.prototype=Object.create(tt&&tt.prototype,{constructor:{value:Ye,writable:!0,configurable:!0}}),Object.defineProperty(Ye,"prototype",{writable:!1}),tt&&l(Ye,tt)}(Ee,Pe),Fe=Ee,(Ve=[{key:"code",get:function(){return de},set:function(Ye){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ye,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(de,"]: ").concat(this.message)}}])&&i(Fe.prototype,Ve),Object.defineProperty(Fe,"prototype",{writable:!1}),Fe;var Fe,Ve}(Ae)}function be(de){for(var _e="",Ae=de.length,Pe=de[0]==="-"?1:0;Ae>=Pe+4;Ae-=3)_e="_".concat(de.slice(Ae-3,Ae)).concat(_e);return"".concat(de.slice(0,Ae)).concat(_e)}function ke(de,_e,Ae,Pe,Ee,Fe){if(de>Ae||de<_e){var Ve,Ye=typeof _e=="bigint"?"n":"";throw Ve=_e===0||_e===BigInt(0)?">= 0".concat(Ye," and < 2").concat(Ye," ** ").concat(8*(Fe+1)).concat(Ye):">= -(2".concat(Ye," ** ").concat(8*(Fe+1)-1).concat(Ye,") and < 2 ** ")+"".concat(8*(Fe+1)-1).concat(Ye),new ge.ERR_OUT_OF_RANGE("value",Ve,de)}(function(tt,nt,ht){ze(nt,"offset"),tt[nt]!==void 0&&tt[nt+ht]!==void 0||ve(nt,tt.length-(ht+1))})(Pe,Ee,Fe)}function ze(de,_e){if(typeof de!="number")throw new ge.ERR_INVALID_ARG_TYPE(_e,"number",de)}function ve(de,_e,Ae){throw Math.floor(de)!==de?(ze(de,Ae),new ge.ERR_OUT_OF_RANGE("offset","an integer",de)):_e<0?new ge.ERR_BUFFER_OUT_OF_BOUNDS:new ge.ERR_OUT_OF_RANGE("offset",">= ".concat(0," and <= ").concat(_e),de)}me("ERR_BUFFER_OUT_OF_BOUNDS",function(de){return de?"".concat(de," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),me("ERR_INVALID_ARG_TYPE",function(de,_e){return'The "'.concat(de,'" argument must be of type number. Received type ').concat(u(_e))},TypeError),me("ERR_OUT_OF_RANGE",function(de,_e,Ae){var Pe='The value of "'.concat(de,'" is out of range.'),Ee=Ae;return Number.isInteger(Ae)&&Math.abs(Ae)>Math.pow(2,32)?Ee=be(String(Ae)):typeof Ae=="bigint"&&(Ee=String(Ae),(Ae>Math.pow(BigInt(2),BigInt(32))||Ae<-Math.pow(BigInt(2),BigInt(32)))&&(Ee=be(Ee)),Ee+="n"),Pe+" It must be ".concat(_e,". Received ").concat(Ee)},RangeError);var oe=/[^+/0-9A-Za-z-_]/g;function ie(de,_e){var Ae;_e=_e||1/0;for(var Pe=de.length,Ee=null,Fe=[],Ve=0;Ve<Pe;++Ve){if((Ae=de.charCodeAt(Ve))>55295&&Ae<57344){if(!Ee){if(Ae>56319){(_e-=3)>-1&&Fe.push(239,191,189);continue}if(Ve+1===Pe){(_e-=3)>-1&&Fe.push(239,191,189);continue}Ee=Ae;continue}if(Ae<56320){(_e-=3)>-1&&Fe.push(239,191,189),Ee=Ae;continue}Ae=65536+(Ee-55296<<10|Ae-56320)}else Ee&&(_e-=3)>-1&&Fe.push(239,191,189);if(Ee=null,Ae<128){if((_e-=1)<0)break;Fe.push(Ae)}else if(Ae<2048){if((_e-=2)<0)break;Fe.push(Ae>>6|192,63&Ae|128)}else if(Ae<65536){if((_e-=3)<0)break;Fe.push(Ae>>12|224,Ae>>6&63|128,63&Ae|128)}else{if(!(Ae<1114112))throw new Error("Invalid code point");if((_e-=4)<0)break;Fe.push(Ae>>18|240,Ae>>12&63|128,Ae>>6&63|128,63&Ae|128)}}return Fe}function he(de){return h.toByteArray(function(_e){if((_e=(_e=_e.split("=")[0]).trim().replace(oe,"")).length<2)return"";for(;_e.length%4!=0;)_e+="=";return _e}(de))}function Se(de,_e,Ae,Pe){var Ee;for(Ee=0;Ee<Pe&&!(Ee+Ae>=_e.length||Ee>=de.length);++Ee)_e[Ee+Ae]=de[Ee];return Ee}function ye(de,_e){return de instanceof _e||de!=null&&de.constructor!=null&&de.constructor.name!=null&&de.constructor.name===_e.name}function we(de){return de!=de}var Me=function(){for(var de="0123456789abcdef",_e=new Array(256),Ae=0;Ae<16;++Ae)for(var Pe=16*Ae,Ee=0;Ee<16;++Ee)_e[Pe+Ee]=de[Ae]+de[Ee];return _e}();function Oe(de){return typeof BigInt>"u"?Ie:de}function Ie(){throw new Error("BigInt not supported")}},9216:function(f){f.exports=n,f.exports.isMobile=n,f.exports.default=n;var o=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,t=/CrOS/,i=/android|ipad|playbook|silk/i;function n(r){r||(r={});var a=r.ua;if(a||typeof navigator>"u"||(a=navigator.userAgent),a&&a.headers&&typeof a.headers["user-agent"]=="string"&&(a=a.headers["user-agent"]),typeof a!="string")return!1;var l=o.test(a)&&!t.test(a)||!!r.tablet&&i.test(a);return!l&&r.tablet&&r.featureDetect&&navigator&&navigator.maxTouchPoints>1&&a.indexOf("Macintosh")!==-1&&a.indexOf("Safari")!==-1&&(l=!0),l}},6296:function(f,o,t){f.exports=function(u){var h=(u=u||{}).eye||[0,0,1],c=u.center||[0,0,0],x=u.up||[0,1,0],p=u.distanceLimits||[0,1/0],v=u.mode||"turntable",g=i(),y=n(),m=r();return g.setDistanceLimits(p[0],p[1]),g.lookAt(0,h,c,x),y.setDistanceLimits(p[0],p[1]),y.lookAt(0,h,c,x),m.setDistanceLimits(p[0],p[1]),m.lookAt(0,h,c,x),new a({turntable:g,orbit:y,matrix:m},v)};var i=t(7261),n=t(9977),r=t(4192);function a(u,h){this._controllerNames=Object.keys(u),this._controllerList=this._controllerNames.map(function(c){return u[c]}),this._mode=h,this._active=u[h],this._active||(this._mode="turntable",this._active=u.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var l=a.prototype;l.flush=function(u){for(var h=this._controllerList,c=0;c<h.length;++c)h[c].flush(u)},l.idle=function(u){for(var h=this._controllerList,c=0;c<h.length;++c)h[c].idle(u)},l.lookAt=function(u,h,c,x){for(var p=this._controllerList,v=0;v<p.length;++v)p[v].lookAt(u,h,c,x)},l.rotate=function(u,h,c,x){for(var p=this._controllerList,v=0;v<p.length;++v)p[v].rotate(u,h,c,x)},l.pan=function(u,h,c,x){for(var p=this._controllerList,v=0;v<p.length;++v)p[v].pan(u,h,c,x)},l.translate=function(u,h,c,x){for(var p=this._controllerList,v=0;v<p.length;++v)p[v].translate(u,h,c,x)},l.setMatrix=function(u,h){for(var c=this._controllerList,x=0;x<c.length;++x)c[x].setMatrix(u,h)},l.setDistanceLimits=function(u,h){for(var c=this._controllerList,x=0;x<c.length;++x)c[x].setDistanceLimits(u,h)},l.setDistance=function(u,h){for(var c=this._controllerList,x=0;x<c.length;++x)c[x].setDistance(u,h)},l.recalcMatrix=function(u){this._active.recalcMatrix(u)},l.getDistance=function(u){return this._active.getDistance(u)},l.getDistanceLimits=function(u){return this._active.getDistanceLimits(u)},l.lastT=function(){return this._active.lastT()},l.setMode=function(u){if(u!==this._mode){var h=this._controllerNames.indexOf(u);if(!(h<0)){var c=this._active,x=this._controllerList[h],p=Math.max(c.lastT(),x.lastT());c.recalcMatrix(p),x.setMatrix(p,c.computedMatrix),this._active=x,this._mode=u,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},l.getMode=function(){return this._mode}},7169:function(f,o,t){var i=typeof WeakMap>"u"?t(1538):WeakMap,n=t(2762),r=t(8116),a=new i;f.exports=function(l){var u=a.get(l),h=u&&(u._triangleBuffer.handle||u._triangleBuffer.buffer);if(!h||!l.isBuffer(h)){var c=n(l,new Float32Array([-1,-1,-1,4,4,-1]));(u=r(l,[{buffer:c,type:l.FLOAT,size:2}]))._triangleBuffer=c,a.set(l,u)}u.bind(),l.drawArrays(l.TRIANGLES,0,3),u.unbind()}},1085:function(f,o,t){var i=t(1371);f.exports=function(n,r,a){r=typeof r=="number"?r:1,a=a||": ";var l=n.split(/\r?\n/),u=String(l.length+r-1).length;return l.map(function(h,c){var x=c+r,p=String(x).length;return i(x,u-p)+a+h}).join(`
`)}},3952:function(f,o,t){f.exports=function(r){var a=r.length;if(a===0)return[];if(a===1)return[0];for(var l=r[0].length,u=[r[0]],h=[0],c=1;c<a;++c)if(u.push(r[c]),n(u,l)){if(h.push(c),h.length===l+1)return h}else u.pop();return h};var i=t(3250);function n(r,a){for(var l=new Array(a+1),u=0;u<r.length;++u)l[u]=r[u];for(u=0;u<=r.length;++u){for(var h=r.length;h<=a;++h){for(var c=new Array(a),x=0;x<a;++x)c[x]=Math.pow(h+1-u,x);l[h]=c}if(i.apply(void 0,l))return!0}return!1}},5995:function(f,o,t){f.exports=function(r,a){return i(a).filter(function(l){for(var u=new Array(l.length),h=0;h<l.length;++h)u[h]=a[l[h]];return n(u)*r<1})};var i=t(7642),n=t(6037)},3502:function(f,o,t){f.exports=function(r,a){return n(i(r,a))};var i=t(5995),n=t(9127)},6468:function(f){f.exports=function(o){return atob(o)}},2642:function(f,o,t){f.exports=function(r,a){for(var l=a.length,u=new Array(l+1),h=0;h<l;++h){for(var c=new Array(l+1),x=0;x<=l;++x)c[x]=r[x][h];u[h]=c}for(u[l]=new Array(l+1),h=0;h<=l;++h)u[l][h]=1;var p=new Array(l+1);for(h=0;h<l;++h)p[h]=a[h];p[l]=1;var v=i(u,p),g=n(v[l+1]);g===0&&(g=1);var y=new Array(l+1);for(h=0;h<=l;++h)y[h]=n(v[h])/g;return y};var i=t(727);function n(r){for(var a=0,l=0;l<r.length;++l)a+=r[l];return a}},7507:function(f,o){o.byteLength=function(h){var c=l(h),x=c[0],p=c[1];return 3*(x+p)/4-p},o.toByteArray=function(h){var c,x,p=l(h),v=p[0],g=p[1],y=new n(function(d,S,w){return 3*(S+w)/4-w}(0,v,g)),m=0,_=g>0?v-4:v;for(x=0;x<_;x+=4)c=i[h.charCodeAt(x)]<<18|i[h.charCodeAt(x+1)]<<12|i[h.charCodeAt(x+2)]<<6|i[h.charCodeAt(x+3)],y[m++]=c>>16&255,y[m++]=c>>8&255,y[m++]=255&c;return g===2&&(c=i[h.charCodeAt(x)]<<2|i[h.charCodeAt(x+1)]>>4,y[m++]=255&c),g===1&&(c=i[h.charCodeAt(x)]<<10|i[h.charCodeAt(x+1)]<<4|i[h.charCodeAt(x+2)]>>2,y[m++]=c>>8&255,y[m++]=255&c),y},o.fromByteArray=function(h){for(var c,x=h.length,p=x%3,v=[],g=16383,y=0,m=x-p;y<m;y+=g)v.push(u(h,y,y+g>m?m:y+g));return p===1?(c=h[x-1],v.push(t[c>>2]+t[c<<4&63]+"==")):p===2&&(c=(h[x-2]<<8)+h[x-1],v.push(t[c>>10]+t[c>>4&63]+t[c<<2&63]+"=")),v.join("")};for(var t=[],i=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)t[a]=r[a],i[r.charCodeAt(a)]=a;function l(h){var c=h.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=h.indexOf("=");return x===-1&&(x=c),[x,x===c?0:4-x%4]}function u(h,c,x){for(var p,v,g=[],y=c;y<x;y+=3)p=(h[y]<<16&16711680)+(h[y+1]<<8&65280)+(255&h[y+2]),g.push(t[(v=p)>>18&63]+t[v>>12&63]+t[v>>6&63]+t[63&v]);return g.join("")}i[45]=62,i[95]=63},3865:function(f,o,t){var i=t(869);f.exports=function(n,r){return i(n[0].mul(r[1]).add(r[0].mul(n[1])),n[1].mul(r[1]))}},1318:function(f){f.exports=function(o,t){return o[0].mul(t[1]).cmp(t[0].mul(o[1]))}},8697:function(f,o,t){var i=t(869);f.exports=function(n,r){return i(n[0].mul(r[1]),n[1].mul(r[0]))}},7842:function(f,o,t){var i=t(6330),n=t(1533),r=t(2651),a=t(4387),l=t(869),u=t(8697);f.exports=function h(c,x){if(i(c))return x?u(c,h(x)):[c[0].clone(),c[1].clone()];var p,v,g=0;if(n(c))p=c.clone();else if(typeof c=="string")p=a(c);else{if(c===0)return[r(0),r(1)];if(c===Math.floor(c))p=r(c);else{for(;c!==Math.floor(c);)c*=Math.pow(2,256),g-=256;p=r(c)}}if(i(x))p.mul(x[1]),v=x[0].clone();else if(n(x))v=x.clone();else if(typeof x=="string")v=a(x);else if(x)if(x===Math.floor(x))v=r(x);else{for(;x!==Math.floor(x);)x*=Math.pow(2,256),g+=256;v=r(x)}else v=r(1);return g>0?p=p.ushln(g):g<0&&(v=v.ushln(-g)),l(p,v)}},6330:function(f,o,t){var i=t(1533);f.exports=function(n){return Array.isArray(n)&&n.length===2&&i(n[0])&&i(n[1])}},5716:function(f,o,t){var i=t(6859);f.exports=function(n){return n.cmp(new i(0))}},1369:function(f,o,t){var i=t(5716);f.exports=function(n){var r=n.length,a=n.words,l=0;if(r===1)l=a[0];else if(r===2)l=a[0]+67108864*a[1];else for(var u=0;u<r;u++)l+=a[u]*Math.pow(67108864,u);return i(n)*l}},4025:function(f,o,t){var i=t(2361),n=t(8828).countTrailingZeros;f.exports=function(r){var a=n(i.lo(r));if(a<32)return a;var l=n(i.hi(r));return l>20?52:l+32}},1533:function(f,o,t){t(6859),f.exports=function(i){return i&&typeof i=="object"&&!!i.words}},2651:function(f,o,t){var i=t(6859),n=t(2361);f.exports=function(r){var a=n.exponent(r);return a<52?new i(r):new i(r*Math.pow(2,52-a)).ushln(a-52)}},869:function(f,o,t){var i=t(2651),n=t(5716);f.exports=function(r,a){var l=n(r),u=n(a);if(l===0)return[i(0),i(1)];if(u===0)return[i(0),i(0)];u<0&&(r=r.neg(),a=a.neg());var h=r.gcd(a);return h.cmpn(1)?[r.div(h),a.div(h)]:[r,a]}},4387:function(f,o,t){var i=t(6859);f.exports=function(n){return new i(n)}},6504:function(f,o,t){var i=t(869);f.exports=function(n,r){return i(n[0].mul(r[0]),n[1].mul(r[1]))}},7721:function(f,o,t){var i=t(5716);f.exports=function(n){return i(n[0])*i(n[1])}},5572:function(f,o,t){var i=t(869);f.exports=function(n,r){return i(n[0].mul(r[1]).sub(n[1].mul(r[0])),n[1].mul(r[1]))}},946:function(f,o,t){var i=t(1369),n=t(4025);f.exports=function(r){var a=r[0],l=r[1];if(a.cmpn(0)===0)return 0;var u=a.abs().divmod(l.abs()),h=u.div,c=i(h),x=u.mod,p=a.negative!==l.negative?-1:1;if(x.cmpn(0)===0)return p*c;if(c){var v=n(c)+4;return p*(c+(y=i(x.ushln(v).divRound(l)))*Math.pow(2,-v))}var g=l.bitLength()-x.bitLength()+53,y=i(x.ushln(g).divRound(l));return g<1023?p*y*Math.pow(2,-g):p*(y*=Math.pow(2,-1023))*Math.pow(2,1023-g)}},2478:function(f){function o(l,u,h,c,x){for(var p=x+1;c<=x;){var v=c+x>>>1,g=l[v];(h!==void 0?h(g,u):g-u)>=0?(p=v,x=v-1):c=v+1}return p}function t(l,u,h,c,x){for(var p=x+1;c<=x;){var v=c+x>>>1,g=l[v];(h!==void 0?h(g,u):g-u)>0?(p=v,x=v-1):c=v+1}return p}function i(l,u,h,c,x){for(var p=c-1;c<=x;){var v=c+x>>>1,g=l[v];(h!==void 0?h(g,u):g-u)<0?(p=v,c=v+1):x=v-1}return p}function n(l,u,h,c,x){for(var p=c-1;c<=x;){var v=c+x>>>1,g=l[v];(h!==void 0?h(g,u):g-u)<=0?(p=v,c=v+1):x=v-1}return p}function r(l,u,h,c,x){for(;c<=x;){var p=c+x>>>1,v=l[p],g=h!==void 0?h(v,u):v-u;if(g===0)return p;g<=0?c=p+1:x=p-1}return-1}function a(l,u,h,c,x,p){return typeof h=="function"?p(l,u,h,c===void 0?0:0|c,x===void 0?l.length-1:0|x):p(l,u,void 0,h===void 0?0:0|h,c===void 0?l.length-1:0|c)}f.exports={ge:function(l,u,h,c,x){return a(l,u,h,c,x,o)},gt:function(l,u,h,c,x){return a(l,u,h,c,x,t)},lt:function(l,u,h,c,x){return a(l,u,h,c,x,i)},le:function(l,u,h,c,x){return a(l,u,h,c,x,n)},eq:function(l,u,h,c,x){return a(l,u,h,c,x,r)}}},8828:function(f,o){function t(n){var r=32;return(n&=-n)&&r--,65535&n&&(r-=16),16711935&n&&(r-=8),252645135&n&&(r-=4),858993459&n&&(r-=2),1431655765&n&&(r-=1),r}o.INT_BITS=32,o.INT_MAX=2147483647,o.INT_MIN=-2147483648,o.sign=function(n){return(n>0)-(n<0)},o.abs=function(n){var r=n>>31;return(n^r)-r},o.min=function(n,r){return r^(n^r)&-(n<r)},o.max=function(n,r){return n^(n^r)&-(n<r)},o.isPow2=function(n){return!(n&n-1||!n)},o.log2=function(n){var r,a;return r=(n>65535)<<4,r|=a=((n>>>=r)>255)<<3,r|=a=((n>>>=a)>15)<<2,(r|=a=((n>>>=a)>3)<<1)|(n>>>=a)>>1},o.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0},o.popCount=function(n){return 16843009*((n=(858993459&(n-=n>>>1&1431655765))+(n>>>2&858993459))+(n>>>4)&252645135)>>>24},o.countTrailingZeros=t,o.nextPow2=function(n){return n+=n===0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,1+(n|=n>>>16)},o.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,(n|=n>>>16)-(n>>>1)},o.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,27030>>>(n&=15)&1};var i=new Array(256);(function(n){for(var r=0;r<256;++r){var a=r,l=r,u=7;for(a>>>=1;a;a>>>=1)l<<=1,l|=1&a,--u;n[r]=l<<u&255}})(i),o.reverse=function(n){return i[255&n]<<24|i[n>>>8&255]<<16|i[n>>>16&255]<<8|i[n>>>24&255]},o.interleave2=function(n,r){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))<<1},o.deinterleave2=function(n,r){return(n=65535&((n=16711935&((n=252645135&((n=858993459&((n=n>>>r&1431655765)|n>>>1))|n>>>2))|n>>>4))|n>>>16))<<16>>16},o.interleave3=function(n,r,a){return n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2),(n|=(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<1)|(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<2},o.deinterleave3=function(n,r){return(n=1023&((n=4278190335&((n=251719695&((n=3272356035&((n=n>>>r&1227133513)|n>>>2))|n>>>4))|n>>>8))|n>>>16))<<22>>22},o.nextCombination=function(n){var r=n|n-1;return r+1|(~r&-~r)-1>>>t(n)+1}},6859:function(f,o,t){(function(i,n){function r(I,N){if(!I)throw new Error(N||"Assertion failed")}function a(I,N){I.super_=N;var W=function(){};W.prototype=N.prototype,I.prototype=new W,I.prototype.constructor=I}function l(I,N,W){if(l.isBN(I))return I;this.negative=0,this.words=null,this.length=0,this.red=null,I!==null&&(N!=="le"&&N!=="be"||(W=N,N=10),this._init(I||0,N||10,W||"be"))}var u;typeof i=="object"?i.exports=l:n.BN=l,l.BN=l,l.wordSize=26;try{u=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:t(7790).Buffer}catch{}function h(I,N){var W=I.charCodeAt(N);return W>=65&&W<=70?W-55:W>=97&&W<=102?W-87:W-48&15}function c(I,N,W){var F=h(I,W);return W-1>=N&&(F|=h(I,W-1)<<4),F}function x(I,N,W,F){for(var U=0,H=Math.min(I.length,W),ne=N;ne<H;ne++){var $=I.charCodeAt(ne)-48;U*=F,U+=$>=49?$-49+10:$>=17?$-17+10:$}return U}l.isBN=function(I){return I instanceof l||I!==null&&typeof I=="object"&&I.constructor.wordSize===l.wordSize&&Array.isArray(I.words)},l.max=function(I,N){return I.cmp(N)>0?I:N},l.min=function(I,N){return I.cmp(N)<0?I:N},l.prototype._init=function(I,N,W){if(typeof I=="number")return this._initNumber(I,N,W);if(typeof I=="object")return this._initArray(I,N,W);N==="hex"&&(N=16),r(N===(0|N)&&N>=2&&N<=36);var F=0;(I=I.toString().replace(/\s+/g,""))[0]==="-"&&(F++,this.negative=1),F<I.length&&(N===16?this._parseHex(I,F,W):(this._parseBase(I,N,F),W==="le"&&this._initArray(this.toArray(),N,W)))},l.prototype._initNumber=function(I,N,W){I<0&&(this.negative=1,I=-I),I<67108864?(this.words=[67108863&I],this.length=1):I<4503599627370496?(this.words=[67108863&I,I/67108864&67108863],this.length=2):(r(I<9007199254740992),this.words=[67108863&I,I/67108864&67108863,1],this.length=3),W==="le"&&this._initArray(this.toArray(),N,W)},l.prototype._initArray=function(I,N,W){if(r(typeof I.length=="number"),I.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(I.length/3),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var U,H,ne=0;if(W==="be")for(F=I.length-1,U=0;F>=0;F-=3)H=I[F]|I[F-1]<<8|I[F-2]<<16,this.words[U]|=H<<ne&67108863,this.words[U+1]=H>>>26-ne&67108863,(ne+=24)>=26&&(ne-=26,U++);else if(W==="le")for(F=0,U=0;F<I.length;F+=3)H=I[F]|I[F+1]<<8|I[F+2]<<16,this.words[U]|=H<<ne&67108863,this.words[U+1]=H>>>26-ne&67108863,(ne+=24)>=26&&(ne-=26,U++);return this.strip()},l.prototype._parseHex=function(I,N,W){this.length=Math.ceil((I.length-N)/6),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var U,H=0,ne=0;if(W==="be")for(F=I.length-1;F>=N;F-=2)U=c(I,N,F)<<H,this.words[ne]|=67108863&U,H>=18?(H-=18,ne+=1,this.words[ne]|=U>>>26):H+=8;else for(F=(I.length-N)%2==0?N+1:N;F<I.length;F+=2)U=c(I,N,F)<<H,this.words[ne]|=67108863&U,H>=18?(H-=18,ne+=1,this.words[ne]|=U>>>26):H+=8;this.strip()},l.prototype._parseBase=function(I,N,W){this.words=[0],this.length=1;for(var F=0,U=1;U<=67108863;U*=N)F++;F--,U=U/N|0;for(var H=I.length-W,ne=H%F,$=Math.min(H,H-ne)+W,K=0,Q=W;Q<$;Q+=F)K=x(I,Q,Q+F,N),this.imuln(U),this.words[0]+K<67108864?this.words[0]+=K:this._iaddn(K);if(ne!==0){var Z=1;for(K=x(I,Q,I.length,N),Q=0;Q<ne;Q++)Z*=N;this.imuln(Z),this.words[0]+K<67108864?this.words[0]+=K:this._iaddn(K)}this.strip()},l.prototype.copy=function(I){I.words=new Array(this.length);for(var N=0;N<this.length;N++)I.words[N]=this.words[N];I.length=this.length,I.negative=this.negative,I.red=this.red},l.prototype.clone=function(){var I=new l(null);return this.copy(I),I},l.prototype._expand=function(I){for(;this.length<I;)this.words[this.length++]=0;return this},l.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},l.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},l.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],v=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],g=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function y(I,N,W){W.negative=N.negative^I.negative;var F=I.length+N.length|0;W.length=F,F=F-1|0;var U=0|I.words[0],H=0|N.words[0],ne=U*H,$=67108863&ne,K=ne/67108864|0;W.words[0]=$;for(var Q=1;Q<F;Q++){for(var Z=K>>>26,X=67108863&K,te=Math.min(Q,N.length-1),ae=Math.max(0,Q-I.length+1);ae<=te;ae++){var se=Q-ae|0;Z+=(ne=(U=0|I.words[se])*(H=0|N.words[ae])+X)/67108864|0,X=67108863&ne}W.words[Q]=0|X,K=0|Z}return K!==0?W.words[Q]=0|K:W.length--,W.strip()}l.prototype.toString=function(I,N){var W;if(N=0|N||1,(I=I||10)===16||I==="hex"){W="";for(var F=0,U=0,H=0;H<this.length;H++){var ne=this.words[H],$=(16777215&(ne<<F|U)).toString(16);W=(U=ne>>>24-F&16777215)!=0||H!==this.length-1?p[6-$.length]+$+W:$+W,(F+=2)>=26&&(F-=26,H--)}for(U!==0&&(W=U.toString(16)+W);W.length%N!=0;)W="0"+W;return this.negative!==0&&(W="-"+W),W}if(I===(0|I)&&I>=2&&I<=36){var K=v[I],Q=g[I];W="";var Z=this.clone();for(Z.negative=0;!Z.isZero();){var X=Z.modn(Q).toString(I);W=(Z=Z.idivn(Q)).isZero()?X+W:p[K-X.length]+X+W}for(this.isZero()&&(W="0"+W);W.length%N!=0;)W="0"+W;return this.negative!==0&&(W="-"+W),W}r(!1,"Base should be between 2 and 36")},l.prototype.toNumber=function(){var I=this.words[0];return this.length===2?I+=67108864*this.words[1]:this.length===3&&this.words[2]===1?I+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-I:I},l.prototype.toJSON=function(){return this.toString(16)},l.prototype.toBuffer=function(I,N){return r(u!==void 0),this.toArrayLike(u,I,N)},l.prototype.toArray=function(I,N){return this.toArrayLike(Array,I,N)},l.prototype.toArrayLike=function(I,N,W){var F=this.byteLength(),U=W||Math.max(1,F);r(F<=U,"byte array longer than desired length"),r(U>0,"Requested array length <= 0"),this.strip();var H,ne,$=N==="le",K=new I(U),Q=this.clone();if($){for(ne=0;!Q.isZero();ne++)H=Q.andln(255),Q.iushrn(8),K[ne]=H;for(;ne<U;ne++)K[ne]=0}else{for(ne=0;ne<U-F;ne++)K[ne]=0;for(ne=0;!Q.isZero();ne++)H=Q.andln(255),Q.iushrn(8),K[U-ne-1]=H}return K},Math.clz32?l.prototype._countBits=function(I){return 32-Math.clz32(I)}:l.prototype._countBits=function(I){var N=I,W=0;return N>=4096&&(W+=13,N>>>=13),N>=64&&(W+=7,N>>>=7),N>=8&&(W+=4,N>>>=4),N>=2&&(W+=2,N>>>=2),W+N},l.prototype._zeroBits=function(I){if(I===0)return 26;var N=I,W=0;return!(8191&N)&&(W+=13,N>>>=13),!(127&N)&&(W+=7,N>>>=7),!(15&N)&&(W+=4,N>>>=4),!(3&N)&&(W+=2,N>>>=2),!(1&N)&&W++,W},l.prototype.bitLength=function(){var I=this.words[this.length-1],N=this._countBits(I);return 26*(this.length-1)+N},l.prototype.zeroBits=function(){if(this.isZero())return 0;for(var I=0,N=0;N<this.length;N++){var W=this._zeroBits(this.words[N]);if(I+=W,W!==26)break}return I},l.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},l.prototype.toTwos=function(I){return this.negative!==0?this.abs().inotn(I).iaddn(1):this.clone()},l.prototype.fromTwos=function(I){return this.testn(I-1)?this.notn(I).iaddn(1).ineg():this.clone()},l.prototype.isNeg=function(){return this.negative!==0},l.prototype.neg=function(){return this.clone().ineg()},l.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},l.prototype.iuor=function(I){for(;this.length<I.length;)this.words[this.length++]=0;for(var N=0;N<I.length;N++)this.words[N]=this.words[N]|I.words[N];return this.strip()},l.prototype.ior=function(I){return r((this.negative|I.negative)==0),this.iuor(I)},l.prototype.or=function(I){return this.length>I.length?this.clone().ior(I):I.clone().ior(this)},l.prototype.uor=function(I){return this.length>I.length?this.clone().iuor(I):I.clone().iuor(this)},l.prototype.iuand=function(I){var N;N=this.length>I.length?I:this;for(var W=0;W<N.length;W++)this.words[W]=this.words[W]&I.words[W];return this.length=N.length,this.strip()},l.prototype.iand=function(I){return r((this.negative|I.negative)==0),this.iuand(I)},l.prototype.and=function(I){return this.length>I.length?this.clone().iand(I):I.clone().iand(this)},l.prototype.uand=function(I){return this.length>I.length?this.clone().iuand(I):I.clone().iuand(this)},l.prototype.iuxor=function(I){var N,W;this.length>I.length?(N=this,W=I):(N=I,W=this);for(var F=0;F<W.length;F++)this.words[F]=N.words[F]^W.words[F];if(this!==N)for(;F<N.length;F++)this.words[F]=N.words[F];return this.length=N.length,this.strip()},l.prototype.ixor=function(I){return r((this.negative|I.negative)==0),this.iuxor(I)},l.prototype.xor=function(I){return this.length>I.length?this.clone().ixor(I):I.clone().ixor(this)},l.prototype.uxor=function(I){return this.length>I.length?this.clone().iuxor(I):I.clone().iuxor(this)},l.prototype.inotn=function(I){r(typeof I=="number"&&I>=0);var N=0|Math.ceil(I/26),W=I%26;this._expand(N),W>0&&N--;for(var F=0;F<N;F++)this.words[F]=67108863&~this.words[F];return W>0&&(this.words[F]=~this.words[F]&67108863>>26-W),this.strip()},l.prototype.notn=function(I){return this.clone().inotn(I)},l.prototype.setn=function(I,N){r(typeof I=="number"&&I>=0);var W=I/26|0,F=I%26;return this._expand(W+1),this.words[W]=N?this.words[W]|1<<F:this.words[W]&~(1<<F),this.strip()},l.prototype.iadd=function(I){var N,W,F;if(this.negative!==0&&I.negative===0)return this.negative=0,N=this.isub(I),this.negative^=1,this._normSign();if(this.negative===0&&I.negative!==0)return I.negative=0,N=this.isub(I),I.negative=1,N._normSign();this.length>I.length?(W=this,F=I):(W=I,F=this);for(var U=0,H=0;H<F.length;H++)N=(0|W.words[H])+(0|F.words[H])+U,this.words[H]=67108863&N,U=N>>>26;for(;U!==0&&H<W.length;H++)N=(0|W.words[H])+U,this.words[H]=67108863&N,U=N>>>26;if(this.length=W.length,U!==0)this.words[this.length]=U,this.length++;else if(W!==this)for(;H<W.length;H++)this.words[H]=W.words[H];return this},l.prototype.add=function(I){var N;return I.negative!==0&&this.negative===0?(I.negative=0,N=this.sub(I),I.negative^=1,N):I.negative===0&&this.negative!==0?(this.negative=0,N=I.sub(this),this.negative=1,N):this.length>I.length?this.clone().iadd(I):I.clone().iadd(this)},l.prototype.isub=function(I){if(I.negative!==0){I.negative=0;var N=this.iadd(I);return I.negative=1,N._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(I),this.negative=1,this._normSign();var W,F,U=this.cmp(I);if(U===0)return this.negative=0,this.length=1,this.words[0]=0,this;U>0?(W=this,F=I):(W=I,F=this);for(var H=0,ne=0;ne<F.length;ne++)H=(N=(0|W.words[ne])-(0|F.words[ne])+H)>>26,this.words[ne]=67108863&N;for(;H!==0&&ne<W.length;ne++)H=(N=(0|W.words[ne])+H)>>26,this.words[ne]=67108863&N;if(H===0&&ne<W.length&&W!==this)for(;ne<W.length;ne++)this.words[ne]=W.words[ne];return this.length=Math.max(this.length,ne),W!==this&&(this.negative=1),this.strip()},l.prototype.sub=function(I){return this.clone().isub(I)};var m=function(I,N,W){var F,U,H,ne=I.words,$=N.words,K=W.words,Q=0,Z=0|ne[0],X=8191&Z,te=Z>>>13,ae=0|ne[1],se=8191&ae,ce=ae>>>13,fe=0|ne[2],pe=8191&fe,ge=fe>>>13,me=0|ne[3],be=8191&me,ke=me>>>13,ze=0|ne[4],ve=8191&ze,oe=ze>>>13,ie=0|ne[5],he=8191&ie,Se=ie>>>13,ye=0|ne[6],we=8191&ye,Me=ye>>>13,Oe=0|ne[7],Ie=8191&Oe,de=Oe>>>13,_e=0|ne[8],Ae=8191&_e,Pe=_e>>>13,Ee=0|ne[9],Fe=8191&Ee,Ve=Ee>>>13,Ye=0|$[0],tt=8191&Ye,nt=Ye>>>13,ht=0|$[1],vt=8191&ht,pt=ht>>>13,Qe=0|$[2],Ke=8191&Qe,Mt=Qe>>>13,Ot=0|$[3],Pt=8191&Ot,St=Ot>>>13,He=0|$[4],We=8191&He,Be=He>>>13,Ge=0|$[5],ot=8191&Ge,it=Ge>>>13,dt=0|$[6],gt=8191&dt,je=dt>>>13,Re=0|$[7],rt=8191&Re,ct=Re>>>13,ut=0|$[8],et=8191&ut,xt=ut>>>13,mt=0|$[9],Tt=8191&mt,yt=mt>>>13;W.negative=I.negative^N.negative,W.length=19;var bt=(Q+(F=Math.imul(X,tt))|0)+((8191&(U=(U=Math.imul(X,nt))+Math.imul(te,tt)|0))<<13)|0;Q=((H=Math.imul(te,nt))+(U>>>13)|0)+(bt>>>26)|0,bt&=67108863,F=Math.imul(se,tt),U=(U=Math.imul(se,nt))+Math.imul(ce,tt)|0,H=Math.imul(ce,nt);var zt=(Q+(F=F+Math.imul(X,vt)|0)|0)+((8191&(U=(U=U+Math.imul(X,pt)|0)+Math.imul(te,vt)|0))<<13)|0;Q=((H=H+Math.imul(te,pt)|0)+(U>>>13)|0)+(zt>>>26)|0,zt&=67108863,F=Math.imul(pe,tt),U=(U=Math.imul(pe,nt))+Math.imul(ge,tt)|0,H=Math.imul(ge,nt),F=F+Math.imul(se,vt)|0,U=(U=U+Math.imul(se,pt)|0)+Math.imul(ce,vt)|0,H=H+Math.imul(ce,pt)|0;var Ut=(Q+(F=F+Math.imul(X,Ke)|0)|0)+((8191&(U=(U=U+Math.imul(X,Mt)|0)+Math.imul(te,Ke)|0))<<13)|0;Q=((H=H+Math.imul(te,Mt)|0)+(U>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,F=Math.imul(be,tt),U=(U=Math.imul(be,nt))+Math.imul(ke,tt)|0,H=Math.imul(ke,nt),F=F+Math.imul(pe,vt)|0,U=(U=U+Math.imul(pe,pt)|0)+Math.imul(ge,vt)|0,H=H+Math.imul(ge,pt)|0,F=F+Math.imul(se,Ke)|0,U=(U=U+Math.imul(se,Mt)|0)+Math.imul(ce,Ke)|0,H=H+Math.imul(ce,Mt)|0;var en=(Q+(F=F+Math.imul(X,Pt)|0)|0)+((8191&(U=(U=U+Math.imul(X,St)|0)+Math.imul(te,Pt)|0))<<13)|0;Q=((H=H+Math.imul(te,St)|0)+(U>>>13)|0)+(en>>>26)|0,en&=67108863,F=Math.imul(ve,tt),U=(U=Math.imul(ve,nt))+Math.imul(oe,tt)|0,H=Math.imul(oe,nt),F=F+Math.imul(be,vt)|0,U=(U=U+Math.imul(be,pt)|0)+Math.imul(ke,vt)|0,H=H+Math.imul(ke,pt)|0,F=F+Math.imul(pe,Ke)|0,U=(U=U+Math.imul(pe,Mt)|0)+Math.imul(ge,Ke)|0,H=H+Math.imul(ge,Mt)|0,F=F+Math.imul(se,Pt)|0,U=(U=U+Math.imul(se,St)|0)+Math.imul(ce,Pt)|0,H=H+Math.imul(ce,St)|0;var an=(Q+(F=F+Math.imul(X,We)|0)|0)+((8191&(U=(U=U+Math.imul(X,Be)|0)+Math.imul(te,We)|0))<<13)|0;Q=((H=H+Math.imul(te,Be)|0)+(U>>>13)|0)+(an>>>26)|0,an&=67108863,F=Math.imul(he,tt),U=(U=Math.imul(he,nt))+Math.imul(Se,tt)|0,H=Math.imul(Se,nt),F=F+Math.imul(ve,vt)|0,U=(U=U+Math.imul(ve,pt)|0)+Math.imul(oe,vt)|0,H=H+Math.imul(oe,pt)|0,F=F+Math.imul(be,Ke)|0,U=(U=U+Math.imul(be,Mt)|0)+Math.imul(ke,Ke)|0,H=H+Math.imul(ke,Mt)|0,F=F+Math.imul(pe,Pt)|0,U=(U=U+Math.imul(pe,St)|0)+Math.imul(ge,Pt)|0,H=H+Math.imul(ge,St)|0,F=F+Math.imul(se,We)|0,U=(U=U+Math.imul(se,Be)|0)+Math.imul(ce,We)|0,H=H+Math.imul(ce,Be)|0;var rn=(Q+(F=F+Math.imul(X,ot)|0)|0)+((8191&(U=(U=U+Math.imul(X,it)|0)+Math.imul(te,ot)|0))<<13)|0;Q=((H=H+Math.imul(te,it)|0)+(U>>>13)|0)+(rn>>>26)|0,rn&=67108863,F=Math.imul(we,tt),U=(U=Math.imul(we,nt))+Math.imul(Me,tt)|0,H=Math.imul(Me,nt),F=F+Math.imul(he,vt)|0,U=(U=U+Math.imul(he,pt)|0)+Math.imul(Se,vt)|0,H=H+Math.imul(Se,pt)|0,F=F+Math.imul(ve,Ke)|0,U=(U=U+Math.imul(ve,Mt)|0)+Math.imul(oe,Ke)|0,H=H+Math.imul(oe,Mt)|0,F=F+Math.imul(be,Pt)|0,U=(U=U+Math.imul(be,St)|0)+Math.imul(ke,Pt)|0,H=H+Math.imul(ke,St)|0,F=F+Math.imul(pe,We)|0,U=(U=U+Math.imul(pe,Be)|0)+Math.imul(ge,We)|0,H=H+Math.imul(ge,Be)|0,F=F+Math.imul(se,ot)|0,U=(U=U+Math.imul(se,it)|0)+Math.imul(ce,ot)|0,H=H+Math.imul(ce,it)|0;var qt=(Q+(F=F+Math.imul(X,gt)|0)|0)+((8191&(U=(U=U+Math.imul(X,je)|0)+Math.imul(te,gt)|0))<<13)|0;Q=((H=H+Math.imul(te,je)|0)+(U>>>13)|0)+(qt>>>26)|0,qt&=67108863,F=Math.imul(Ie,tt),U=(U=Math.imul(Ie,nt))+Math.imul(de,tt)|0,H=Math.imul(de,nt),F=F+Math.imul(we,vt)|0,U=(U=U+Math.imul(we,pt)|0)+Math.imul(Me,vt)|0,H=H+Math.imul(Me,pt)|0,F=F+Math.imul(he,Ke)|0,U=(U=U+Math.imul(he,Mt)|0)+Math.imul(Se,Ke)|0,H=H+Math.imul(Se,Mt)|0,F=F+Math.imul(ve,Pt)|0,U=(U=U+Math.imul(ve,St)|0)+Math.imul(oe,Pt)|0,H=H+Math.imul(oe,St)|0,F=F+Math.imul(be,We)|0,U=(U=U+Math.imul(be,Be)|0)+Math.imul(ke,We)|0,H=H+Math.imul(ke,Be)|0,F=F+Math.imul(pe,ot)|0,U=(U=U+Math.imul(pe,it)|0)+Math.imul(ge,ot)|0,H=H+Math.imul(ge,it)|0,F=F+Math.imul(se,gt)|0,U=(U=U+Math.imul(se,je)|0)+Math.imul(ce,gt)|0,H=H+Math.imul(ce,je)|0;var Kt=(Q+(F=F+Math.imul(X,rt)|0)|0)+((8191&(U=(U=U+Math.imul(X,ct)|0)+Math.imul(te,rt)|0))<<13)|0;Q=((H=H+Math.imul(te,ct)|0)+(U>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,F=Math.imul(Ae,tt),U=(U=Math.imul(Ae,nt))+Math.imul(Pe,tt)|0,H=Math.imul(Pe,nt),F=F+Math.imul(Ie,vt)|0,U=(U=U+Math.imul(Ie,pt)|0)+Math.imul(de,vt)|0,H=H+Math.imul(de,pt)|0,F=F+Math.imul(we,Ke)|0,U=(U=U+Math.imul(we,Mt)|0)+Math.imul(Me,Ke)|0,H=H+Math.imul(Me,Mt)|0,F=F+Math.imul(he,Pt)|0,U=(U=U+Math.imul(he,St)|0)+Math.imul(Se,Pt)|0,H=H+Math.imul(Se,St)|0,F=F+Math.imul(ve,We)|0,U=(U=U+Math.imul(ve,Be)|0)+Math.imul(oe,We)|0,H=H+Math.imul(oe,Be)|0,F=F+Math.imul(be,ot)|0,U=(U=U+Math.imul(be,it)|0)+Math.imul(ke,ot)|0,H=H+Math.imul(ke,it)|0,F=F+Math.imul(pe,gt)|0,U=(U=U+Math.imul(pe,je)|0)+Math.imul(ge,gt)|0,H=H+Math.imul(ge,je)|0,F=F+Math.imul(se,rt)|0,U=(U=U+Math.imul(se,ct)|0)+Math.imul(ce,rt)|0,H=H+Math.imul(ce,ct)|0;var xn=(Q+(F=F+Math.imul(X,et)|0)|0)+((8191&(U=(U=U+Math.imul(X,xt)|0)+Math.imul(te,et)|0))<<13)|0;Q=((H=H+Math.imul(te,xt)|0)+(U>>>13)|0)+(xn>>>26)|0,xn&=67108863,F=Math.imul(Fe,tt),U=(U=Math.imul(Fe,nt))+Math.imul(Ve,tt)|0,H=Math.imul(Ve,nt),F=F+Math.imul(Ae,vt)|0,U=(U=U+Math.imul(Ae,pt)|0)+Math.imul(Pe,vt)|0,H=H+Math.imul(Pe,pt)|0,F=F+Math.imul(Ie,Ke)|0,U=(U=U+Math.imul(Ie,Mt)|0)+Math.imul(de,Ke)|0,H=H+Math.imul(de,Mt)|0,F=F+Math.imul(we,Pt)|0,U=(U=U+Math.imul(we,St)|0)+Math.imul(Me,Pt)|0,H=H+Math.imul(Me,St)|0,F=F+Math.imul(he,We)|0,U=(U=U+Math.imul(he,Be)|0)+Math.imul(Se,We)|0,H=H+Math.imul(Se,Be)|0,F=F+Math.imul(ve,ot)|0,U=(U=U+Math.imul(ve,it)|0)+Math.imul(oe,ot)|0,H=H+Math.imul(oe,it)|0,F=F+Math.imul(be,gt)|0,U=(U=U+Math.imul(be,je)|0)+Math.imul(ke,gt)|0,H=H+Math.imul(ke,je)|0,F=F+Math.imul(pe,rt)|0,U=(U=U+Math.imul(pe,ct)|0)+Math.imul(ge,rt)|0,H=H+Math.imul(ge,ct)|0,F=F+Math.imul(se,et)|0,U=(U=U+Math.imul(se,xt)|0)+Math.imul(ce,et)|0,H=H+Math.imul(ce,xt)|0;var on=(Q+(F=F+Math.imul(X,Tt)|0)|0)+((8191&(U=(U=U+Math.imul(X,yt)|0)+Math.imul(te,Tt)|0))<<13)|0;Q=((H=H+Math.imul(te,yt)|0)+(U>>>13)|0)+(on>>>26)|0,on&=67108863,F=Math.imul(Fe,vt),U=(U=Math.imul(Fe,pt))+Math.imul(Ve,vt)|0,H=Math.imul(Ve,pt),F=F+Math.imul(Ae,Ke)|0,U=(U=U+Math.imul(Ae,Mt)|0)+Math.imul(Pe,Ke)|0,H=H+Math.imul(Pe,Mt)|0,F=F+Math.imul(Ie,Pt)|0,U=(U=U+Math.imul(Ie,St)|0)+Math.imul(de,Pt)|0,H=H+Math.imul(de,St)|0,F=F+Math.imul(we,We)|0,U=(U=U+Math.imul(we,Be)|0)+Math.imul(Me,We)|0,H=H+Math.imul(Me,Be)|0,F=F+Math.imul(he,ot)|0,U=(U=U+Math.imul(he,it)|0)+Math.imul(Se,ot)|0,H=H+Math.imul(Se,it)|0,F=F+Math.imul(ve,gt)|0,U=(U=U+Math.imul(ve,je)|0)+Math.imul(oe,gt)|0,H=H+Math.imul(oe,je)|0,F=F+Math.imul(be,rt)|0,U=(U=U+Math.imul(be,ct)|0)+Math.imul(ke,rt)|0,H=H+Math.imul(ke,ct)|0,F=F+Math.imul(pe,et)|0,U=(U=U+Math.imul(pe,xt)|0)+Math.imul(ge,et)|0,H=H+Math.imul(ge,xt)|0;var Xt=(Q+(F=F+Math.imul(se,Tt)|0)|0)+((8191&(U=(U=U+Math.imul(se,yt)|0)+Math.imul(ce,Tt)|0))<<13)|0;Q=((H=H+Math.imul(ce,yt)|0)+(U>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,F=Math.imul(Fe,Ke),U=(U=Math.imul(Fe,Mt))+Math.imul(Ve,Ke)|0,H=Math.imul(Ve,Mt),F=F+Math.imul(Ae,Pt)|0,U=(U=U+Math.imul(Ae,St)|0)+Math.imul(Pe,Pt)|0,H=H+Math.imul(Pe,St)|0,F=F+Math.imul(Ie,We)|0,U=(U=U+Math.imul(Ie,Be)|0)+Math.imul(de,We)|0,H=H+Math.imul(de,Be)|0,F=F+Math.imul(we,ot)|0,U=(U=U+Math.imul(we,it)|0)+Math.imul(Me,ot)|0,H=H+Math.imul(Me,it)|0,F=F+Math.imul(he,gt)|0,U=(U=U+Math.imul(he,je)|0)+Math.imul(Se,gt)|0,H=H+Math.imul(Se,je)|0,F=F+Math.imul(ve,rt)|0,U=(U=U+Math.imul(ve,ct)|0)+Math.imul(oe,rt)|0,H=H+Math.imul(oe,ct)|0,F=F+Math.imul(be,et)|0,U=(U=U+Math.imul(be,xt)|0)+Math.imul(ke,et)|0,H=H+Math.imul(ke,xt)|0;var ln=(Q+(F=F+Math.imul(pe,Tt)|0)|0)+((8191&(U=(U=U+Math.imul(pe,yt)|0)+Math.imul(ge,Tt)|0))<<13)|0;Q=((H=H+Math.imul(ge,yt)|0)+(U>>>13)|0)+(ln>>>26)|0,ln&=67108863,F=Math.imul(Fe,Pt),U=(U=Math.imul(Fe,St))+Math.imul(Ve,Pt)|0,H=Math.imul(Ve,St),F=F+Math.imul(Ae,We)|0,U=(U=U+Math.imul(Ae,Be)|0)+Math.imul(Pe,We)|0,H=H+Math.imul(Pe,Be)|0,F=F+Math.imul(Ie,ot)|0,U=(U=U+Math.imul(Ie,it)|0)+Math.imul(de,ot)|0,H=H+Math.imul(de,it)|0,F=F+Math.imul(we,gt)|0,U=(U=U+Math.imul(we,je)|0)+Math.imul(Me,gt)|0,H=H+Math.imul(Me,je)|0,F=F+Math.imul(he,rt)|0,U=(U=U+Math.imul(he,ct)|0)+Math.imul(Se,rt)|0,H=H+Math.imul(Se,ct)|0,F=F+Math.imul(ve,et)|0,U=(U=U+Math.imul(ve,xt)|0)+Math.imul(oe,et)|0,H=H+Math.imul(oe,xt)|0;var Jt=(Q+(F=F+Math.imul(be,Tt)|0)|0)+((8191&(U=(U=U+Math.imul(be,yt)|0)+Math.imul(ke,Tt)|0))<<13)|0;Q=((H=H+Math.imul(ke,yt)|0)+(U>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,F=Math.imul(Fe,We),U=(U=Math.imul(Fe,Be))+Math.imul(Ve,We)|0,H=Math.imul(Ve,Be),F=F+Math.imul(Ae,ot)|0,U=(U=U+Math.imul(Ae,it)|0)+Math.imul(Pe,ot)|0,H=H+Math.imul(Pe,it)|0,F=F+Math.imul(Ie,gt)|0,U=(U=U+Math.imul(Ie,je)|0)+Math.imul(de,gt)|0,H=H+Math.imul(de,je)|0,F=F+Math.imul(we,rt)|0,U=(U=U+Math.imul(we,ct)|0)+Math.imul(Me,rt)|0,H=H+Math.imul(Me,ct)|0,F=F+Math.imul(he,et)|0,U=(U=U+Math.imul(he,xt)|0)+Math.imul(Se,et)|0,H=H+Math.imul(Se,xt)|0;var tn=(Q+(F=F+Math.imul(ve,Tt)|0)|0)+((8191&(U=(U=U+Math.imul(ve,yt)|0)+Math.imul(oe,Tt)|0))<<13)|0;Q=((H=H+Math.imul(oe,yt)|0)+(U>>>13)|0)+(tn>>>26)|0,tn&=67108863,F=Math.imul(Fe,ot),U=(U=Math.imul(Fe,it))+Math.imul(Ve,ot)|0,H=Math.imul(Ve,it),F=F+Math.imul(Ae,gt)|0,U=(U=U+Math.imul(Ae,je)|0)+Math.imul(Pe,gt)|0,H=H+Math.imul(Pe,je)|0,F=F+Math.imul(Ie,rt)|0,U=(U=U+Math.imul(Ie,ct)|0)+Math.imul(de,rt)|0,H=H+Math.imul(de,ct)|0,F=F+Math.imul(we,et)|0,U=(U=U+Math.imul(we,xt)|0)+Math.imul(Me,et)|0,H=H+Math.imul(Me,xt)|0;var wn=(Q+(F=F+Math.imul(he,Tt)|0)|0)+((8191&(U=(U=U+Math.imul(he,yt)|0)+Math.imul(Se,Tt)|0))<<13)|0;Q=((H=H+Math.imul(Se,yt)|0)+(U>>>13)|0)+(wn>>>26)|0,wn&=67108863,F=Math.imul(Fe,gt),U=(U=Math.imul(Fe,je))+Math.imul(Ve,gt)|0,H=Math.imul(Ve,je),F=F+Math.imul(Ae,rt)|0,U=(U=U+Math.imul(Ae,ct)|0)+Math.imul(Pe,rt)|0,H=H+Math.imul(Pe,ct)|0,F=F+Math.imul(Ie,et)|0,U=(U=U+Math.imul(Ie,xt)|0)+Math.imul(de,et)|0,H=H+Math.imul(de,xt)|0;var mn=(Q+(F=F+Math.imul(we,Tt)|0)|0)+((8191&(U=(U=U+Math.imul(we,yt)|0)+Math.imul(Me,Tt)|0))<<13)|0;Q=((H=H+Math.imul(Me,yt)|0)+(U>>>13)|0)+(mn>>>26)|0,mn&=67108863,F=Math.imul(Fe,rt),U=(U=Math.imul(Fe,ct))+Math.imul(Ve,rt)|0,H=Math.imul(Ve,ct),F=F+Math.imul(Ae,et)|0,U=(U=U+Math.imul(Ae,xt)|0)+Math.imul(Pe,et)|0,H=H+Math.imul(Pe,xt)|0;var Cn=(Q+(F=F+Math.imul(Ie,Tt)|0)|0)+((8191&(U=(U=U+Math.imul(Ie,yt)|0)+Math.imul(de,Tt)|0))<<13)|0;Q=((H=H+Math.imul(de,yt)|0)+(U>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,F=Math.imul(Fe,et),U=(U=Math.imul(Fe,xt))+Math.imul(Ve,et)|0,H=Math.imul(Ve,xt);var yn=(Q+(F=F+Math.imul(Ae,Tt)|0)|0)+((8191&(U=(U=U+Math.imul(Ae,yt)|0)+Math.imul(Pe,Tt)|0))<<13)|0;Q=((H=H+Math.imul(Pe,yt)|0)+(U>>>13)|0)+(yn>>>26)|0,yn&=67108863;var Mn=(Q+(F=Math.imul(Fe,Tt))|0)+((8191&(U=(U=Math.imul(Fe,yt))+Math.imul(Ve,Tt)|0))<<13)|0;return Q=((H=Math.imul(Ve,yt))+(U>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,K[0]=bt,K[1]=zt,K[2]=Ut,K[3]=en,K[4]=an,K[5]=rn,K[6]=qt,K[7]=Kt,K[8]=xn,K[9]=on,K[10]=Xt,K[11]=ln,K[12]=Jt,K[13]=tn,K[14]=wn,K[15]=mn,K[16]=Cn,K[17]=yn,K[18]=Mn,Q!==0&&(K[19]=Q,W.length++),W};function _(I,N,W){return new d().mulp(I,N,W)}function d(I,N){this.x=I,this.y=N}Math.imul||(m=y),l.prototype.mulTo=function(I,N){var W,F=this.length+I.length;return W=this.length===10&&I.length===10?m(this,I,N):F<63?y(this,I,N):F<1024?function(U,H,ne){ne.negative=H.negative^U.negative,ne.length=U.length+H.length;for(var $=0,K=0,Q=0;Q<ne.length-1;Q++){var Z=K;K=0;for(var X=67108863&$,te=Math.min(Q,H.length-1),ae=Math.max(0,Q-U.length+1);ae<=te;ae++){var se=Q-ae,ce=(0|U.words[se])*(0|H.words[ae]),fe=67108863&ce;X=67108863&(fe=fe+X|0),K+=(Z=(Z=Z+(ce/67108864|0)|0)+(fe>>>26)|0)>>>26,Z&=67108863}ne.words[Q]=X,$=Z,Z=K}return $!==0?ne.words[Q]=$:ne.length--,ne.strip()}(this,I,N):_(this,I,N),W},d.prototype.makeRBT=function(I){for(var N=new Array(I),W=l.prototype._countBits(I)-1,F=0;F<I;F++)N[F]=this.revBin(F,W,I);return N},d.prototype.revBin=function(I,N,W){if(I===0||I===W-1)return I;for(var F=0,U=0;U<N;U++)F|=(1&I)<<N-U-1,I>>=1;return F},d.prototype.permute=function(I,N,W,F,U,H){for(var ne=0;ne<H;ne++)F[ne]=N[I[ne]],U[ne]=W[I[ne]]},d.prototype.transform=function(I,N,W,F,U,H){this.permute(H,I,N,W,F,U);for(var ne=1;ne<U;ne<<=1)for(var $=ne<<1,K=Math.cos(2*Math.PI/$),Q=Math.sin(2*Math.PI/$),Z=0;Z<U;Z+=$)for(var X=K,te=Q,ae=0;ae<ne;ae++){var se=W[Z+ae],ce=F[Z+ae],fe=W[Z+ae+ne],pe=F[Z+ae+ne],ge=X*fe-te*pe;pe=X*pe+te*fe,fe=ge,W[Z+ae]=se+fe,F[Z+ae]=ce+pe,W[Z+ae+ne]=se-fe,F[Z+ae+ne]=ce-pe,ae!==$&&(ge=K*X-Q*te,te=K*te+Q*X,X=ge)}},d.prototype.guessLen13b=function(I,N){var W=1|Math.max(N,I),F=1&W,U=0;for(W=W/2|0;W;W>>>=1)U++;return 1<<U+1+F},d.prototype.conjugate=function(I,N,W){if(!(W<=1))for(var F=0;F<W/2;F++){var U=I[F];I[F]=I[W-F-1],I[W-F-1]=U,U=N[F],N[F]=-N[W-F-1],N[W-F-1]=-U}},d.prototype.normalize13b=function(I,N){for(var W=0,F=0;F<N/2;F++){var U=8192*Math.round(I[2*F+1]/N)+Math.round(I[2*F]/N)+W;I[F]=67108863&U,W=U<67108864?0:U/67108864|0}return I},d.prototype.convert13b=function(I,N,W,F){for(var U=0,H=0;H<N;H++)U+=0|I[H],W[2*H]=8191&U,U>>>=13,W[2*H+1]=8191&U,U>>>=13;for(H=2*N;H<F;++H)W[H]=0;r(U===0),r((-8192&U)==0)},d.prototype.stub=function(I){for(var N=new Array(I),W=0;W<I;W++)N[W]=0;return N},d.prototype.mulp=function(I,N,W){var F=2*this.guessLen13b(I.length,N.length),U=this.makeRBT(F),H=this.stub(F),ne=new Array(F),$=new Array(F),K=new Array(F),Q=new Array(F),Z=new Array(F),X=new Array(F),te=W.words;te.length=F,this.convert13b(I.words,I.length,ne,F),this.convert13b(N.words,N.length,Q,F),this.transform(ne,H,$,K,F,U),this.transform(Q,H,Z,X,F,U);for(var ae=0;ae<F;ae++){var se=$[ae]*Z[ae]-K[ae]*X[ae];K[ae]=$[ae]*X[ae]+K[ae]*Z[ae],$[ae]=se}return this.conjugate($,K,F),this.transform($,K,te,H,F,U),this.conjugate(te,H,F),this.normalize13b(te,F),W.negative=I.negative^N.negative,W.length=I.length+N.length,W.strip()},l.prototype.mul=function(I){var N=new l(null);return N.words=new Array(this.length+I.length),this.mulTo(I,N)},l.prototype.mulf=function(I){var N=new l(null);return N.words=new Array(this.length+I.length),_(this,I,N)},l.prototype.imul=function(I){return this.clone().mulTo(I,this)},l.prototype.imuln=function(I){r(typeof I=="number"),r(I<67108864);for(var N=0,W=0;W<this.length;W++){var F=(0|this.words[W])*I,U=(67108863&F)+(67108863&N);N>>=26,N+=F/67108864|0,N+=U>>>26,this.words[W]=67108863&U}return N!==0&&(this.words[W]=N,this.length++),this},l.prototype.muln=function(I){return this.clone().imuln(I)},l.prototype.sqr=function(){return this.mul(this)},l.prototype.isqr=function(){return this.imul(this.clone())},l.prototype.pow=function(I){var N=function(H){for(var ne=new Array(H.bitLength()),$=0;$<ne.length;$++){var K=$/26|0,Q=$%26;ne[$]=(H.words[K]&1<<Q)>>>Q}return ne}(I);if(N.length===0)return new l(1);for(var W=this,F=0;F<N.length&&N[F]===0;F++,W=W.sqr());if(++F<N.length)for(var U=W.sqr();F<N.length;F++,U=U.sqr())N[F]!==0&&(W=W.mul(U));return W},l.prototype.iushln=function(I){r(typeof I=="number"&&I>=0);var N,W=I%26,F=(I-W)/26,U=67108863>>>26-W<<26-W;if(W!==0){var H=0;for(N=0;N<this.length;N++){var ne=this.words[N]&U,$=(0|this.words[N])-ne<<W;this.words[N]=$|H,H=ne>>>26-W}H&&(this.words[N]=H,this.length++)}if(F!==0){for(N=this.length-1;N>=0;N--)this.words[N+F]=this.words[N];for(N=0;N<F;N++)this.words[N]=0;this.length+=F}return this.strip()},l.prototype.ishln=function(I){return r(this.negative===0),this.iushln(I)},l.prototype.iushrn=function(I,N,W){var F;r(typeof I=="number"&&I>=0),F=N?(N-N%26)/26:0;var U=I%26,H=Math.min((I-U)/26,this.length),ne=67108863^67108863>>>U<<U,$=W;if(F-=H,F=Math.max(0,F),$){for(var K=0;K<H;K++)$.words[K]=this.words[K];$.length=H}if(H!==0)if(this.length>H)for(this.length-=H,K=0;K<this.length;K++)this.words[K]=this.words[K+H];else this.words[0]=0,this.length=1;var Q=0;for(K=this.length-1;K>=0&&(Q!==0||K>=F);K--){var Z=0|this.words[K];this.words[K]=Q<<26-U|Z>>>U,Q=Z&ne}return $&&Q!==0&&($.words[$.length++]=Q),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},l.prototype.ishrn=function(I,N,W){return r(this.negative===0),this.iushrn(I,N,W)},l.prototype.shln=function(I){return this.clone().ishln(I)},l.prototype.ushln=function(I){return this.clone().iushln(I)},l.prototype.shrn=function(I){return this.clone().ishrn(I)},l.prototype.ushrn=function(I){return this.clone().iushrn(I)},l.prototype.testn=function(I){r(typeof I=="number"&&I>=0);var N=I%26,W=(I-N)/26,F=1<<N;return!(this.length<=W||!(this.words[W]&F))},l.prototype.imaskn=function(I){r(typeof I=="number"&&I>=0);var N=I%26,W=(I-N)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=W)return this;if(N!==0&&W++,this.length=Math.min(W,this.length),N!==0){var F=67108863^67108863>>>N<<N;this.words[this.length-1]&=F}return this.strip()},l.prototype.maskn=function(I){return this.clone().imaskn(I)},l.prototype.iaddn=function(I){return r(typeof I=="number"),r(I<67108864),I<0?this.isubn(-I):this.negative!==0?this.length===1&&(0|this.words[0])<I?(this.words[0]=I-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(I),this.negative=1,this):this._iaddn(I)},l.prototype._iaddn=function(I){this.words[0]+=I;for(var N=0;N<this.length&&this.words[N]>=67108864;N++)this.words[N]-=67108864,N===this.length-1?this.words[N+1]=1:this.words[N+1]++;return this.length=Math.max(this.length,N+1),this},l.prototype.isubn=function(I){if(r(typeof I=="number"),r(I<67108864),I<0)return this.iaddn(-I);if(this.negative!==0)return this.negative=0,this.iaddn(I),this.negative=1,this;if(this.words[0]-=I,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var N=0;N<this.length&&this.words[N]<0;N++)this.words[N]+=67108864,this.words[N+1]-=1;return this.strip()},l.prototype.addn=function(I){return this.clone().iaddn(I)},l.prototype.subn=function(I){return this.clone().isubn(I)},l.prototype.iabs=function(){return this.negative=0,this},l.prototype.abs=function(){return this.clone().iabs()},l.prototype._ishlnsubmul=function(I,N,W){var F,U,H=I.length+W;this._expand(H);var ne=0;for(F=0;F<I.length;F++){U=(0|this.words[F+W])+ne;var $=(0|I.words[F])*N;ne=((U-=67108863&$)>>26)-($/67108864|0),this.words[F+W]=67108863&U}for(;F<this.length-W;F++)ne=(U=(0|this.words[F+W])+ne)>>26,this.words[F+W]=67108863&U;if(ne===0)return this.strip();for(r(ne===-1),ne=0,F=0;F<this.length;F++)ne=(U=-(0|this.words[F])+ne)>>26,this.words[F]=67108863&U;return this.negative=1,this.strip()},l.prototype._wordDiv=function(I,N){var W=(this.length,I.length),F=this.clone(),U=I,H=0|U.words[U.length-1];(W=26-this._countBits(H))!=0&&(U=U.ushln(W),F.iushln(W),H=0|U.words[U.length-1]);var ne,$=F.length-U.length;if(N!=="mod"){(ne=new l(null)).length=$+1,ne.words=new Array(ne.length);for(var K=0;K<ne.length;K++)ne.words[K]=0}var Q=F.clone()._ishlnsubmul(U,1,$);Q.negative===0&&(F=Q,ne&&(ne.words[$]=1));for(var Z=$-1;Z>=0;Z--){var X=67108864*(0|F.words[U.length+Z])+(0|F.words[U.length+Z-1]);for(X=Math.min(X/H|0,67108863),F._ishlnsubmul(U,X,Z);F.negative!==0;)X--,F.negative=0,F._ishlnsubmul(U,1,Z),F.isZero()||(F.negative^=1);ne&&(ne.words[Z]=X)}return ne&&ne.strip(),F.strip(),N!=="div"&&W!==0&&F.iushrn(W),{div:ne||null,mod:F}},l.prototype.divmod=function(I,N,W){return r(!I.isZero()),this.isZero()?{div:new l(0),mod:new l(0)}:this.negative!==0&&I.negative===0?(H=this.neg().divmod(I,N),N!=="mod"&&(F=H.div.neg()),N!=="div"&&(U=H.mod.neg(),W&&U.negative!==0&&U.iadd(I)),{div:F,mod:U}):this.negative===0&&I.negative!==0?(H=this.divmod(I.neg(),N),N!=="mod"&&(F=H.div.neg()),{div:F,mod:H.mod}):this.negative&I.negative?(H=this.neg().divmod(I.neg(),N),N!=="div"&&(U=H.mod.neg(),W&&U.negative!==0&&U.isub(I)),{div:H.div,mod:U}):I.length>this.length||this.cmp(I)<0?{div:new l(0),mod:this}:I.length===1?N==="div"?{div:this.divn(I.words[0]),mod:null}:N==="mod"?{div:null,mod:new l(this.modn(I.words[0]))}:{div:this.divn(I.words[0]),mod:new l(this.modn(I.words[0]))}:this._wordDiv(I,N);var F,U,H},l.prototype.div=function(I){return this.divmod(I,"div",!1).div},l.prototype.mod=function(I){return this.divmod(I,"mod",!1).mod},l.prototype.umod=function(I){return this.divmod(I,"mod",!0).mod},l.prototype.divRound=function(I){var N=this.divmod(I);if(N.mod.isZero())return N.div;var W=N.div.negative!==0?N.mod.isub(I):N.mod,F=I.ushrn(1),U=I.andln(1),H=W.cmp(F);return H<0||U===1&&H===0?N.div:N.div.negative!==0?N.div.isubn(1):N.div.iaddn(1)},l.prototype.modn=function(I){r(I<=67108863);for(var N=67108864%I,W=0,F=this.length-1;F>=0;F--)W=(N*W+(0|this.words[F]))%I;return W},l.prototype.idivn=function(I){r(I<=67108863);for(var N=0,W=this.length-1;W>=0;W--){var F=(0|this.words[W])+67108864*N;this.words[W]=F/I|0,N=F%I}return this.strip()},l.prototype.divn=function(I){return this.clone().idivn(I)},l.prototype.egcd=function(I){r(I.negative===0),r(!I.isZero());var N=this,W=I.clone();N=N.negative!==0?N.umod(I):N.clone();for(var F=new l(1),U=new l(0),H=new l(0),ne=new l(1),$=0;N.isEven()&&W.isEven();)N.iushrn(1),W.iushrn(1),++$;for(var K=W.clone(),Q=N.clone();!N.isZero();){for(var Z=0,X=1;!(N.words[0]&X)&&Z<26;++Z,X<<=1);if(Z>0)for(N.iushrn(Z);Z-- >0;)(F.isOdd()||U.isOdd())&&(F.iadd(K),U.isub(Q)),F.iushrn(1),U.iushrn(1);for(var te=0,ae=1;!(W.words[0]&ae)&&te<26;++te,ae<<=1);if(te>0)for(W.iushrn(te);te-- >0;)(H.isOdd()||ne.isOdd())&&(H.iadd(K),ne.isub(Q)),H.iushrn(1),ne.iushrn(1);N.cmp(W)>=0?(N.isub(W),F.isub(H),U.isub(ne)):(W.isub(N),H.isub(F),ne.isub(U))}return{a:H,b:ne,gcd:W.iushln($)}},l.prototype._invmp=function(I){r(I.negative===0),r(!I.isZero());var N=this,W=I.clone();N=N.negative!==0?N.umod(I):N.clone();for(var F,U=new l(1),H=new l(0),ne=W.clone();N.cmpn(1)>0&&W.cmpn(1)>0;){for(var $=0,K=1;!(N.words[0]&K)&&$<26;++$,K<<=1);if($>0)for(N.iushrn($);$-- >0;)U.isOdd()&&U.iadd(ne),U.iushrn(1);for(var Q=0,Z=1;!(W.words[0]&Z)&&Q<26;++Q,Z<<=1);if(Q>0)for(W.iushrn(Q);Q-- >0;)H.isOdd()&&H.iadd(ne),H.iushrn(1);N.cmp(W)>=0?(N.isub(W),U.isub(H)):(W.isub(N),H.isub(U))}return(F=N.cmpn(1)===0?U:H).cmpn(0)<0&&F.iadd(I),F},l.prototype.gcd=function(I){if(this.isZero())return I.abs();if(I.isZero())return this.abs();var N=this.clone(),W=I.clone();N.negative=0,W.negative=0;for(var F=0;N.isEven()&&W.isEven();F++)N.iushrn(1),W.iushrn(1);for(;;){for(;N.isEven();)N.iushrn(1);for(;W.isEven();)W.iushrn(1);var U=N.cmp(W);if(U<0){var H=N;N=W,W=H}else if(U===0||W.cmpn(1)===0)break;N.isub(W)}return W.iushln(F)},l.prototype.invm=function(I){return this.egcd(I).a.umod(I)},l.prototype.isEven=function(){return(1&this.words[0])==0},l.prototype.isOdd=function(){return(1&this.words[0])==1},l.prototype.andln=function(I){return this.words[0]&I},l.prototype.bincn=function(I){r(typeof I=="number");var N=I%26,W=(I-N)/26,F=1<<N;if(this.length<=W)return this._expand(W+1),this.words[W]|=F,this;for(var U=F,H=W;U!==0&&H<this.length;H++){var ne=0|this.words[H];U=(ne+=U)>>>26,ne&=67108863,this.words[H]=ne}return U!==0&&(this.words[H]=U,this.length++),this},l.prototype.isZero=function(){return this.length===1&&this.words[0]===0},l.prototype.cmpn=function(I){var N,W=I<0;if(this.negative!==0&&!W)return-1;if(this.negative===0&&W)return 1;if(this.strip(),this.length>1)N=1;else{W&&(I=-I),r(I<=67108863,"Number is too big");var F=0|this.words[0];N=F===I?0:F<I?-1:1}return this.negative!==0?0|-N:N},l.prototype.cmp=function(I){if(this.negative!==0&&I.negative===0)return-1;if(this.negative===0&&I.negative!==0)return 1;var N=this.ucmp(I);return this.negative!==0?0|-N:N},l.prototype.ucmp=function(I){if(this.length>I.length)return 1;if(this.length<I.length)return-1;for(var N=0,W=this.length-1;W>=0;W--){var F=0|this.words[W],U=0|I.words[W];if(F!==U){F<U?N=-1:F>U&&(N=1);break}}return N},l.prototype.gtn=function(I){return this.cmpn(I)===1},l.prototype.gt=function(I){return this.cmp(I)===1},l.prototype.gten=function(I){return this.cmpn(I)>=0},l.prototype.gte=function(I){return this.cmp(I)>=0},l.prototype.ltn=function(I){return this.cmpn(I)===-1},l.prototype.lt=function(I){return this.cmp(I)===-1},l.prototype.lten=function(I){return this.cmpn(I)<=0},l.prototype.lte=function(I){return this.cmp(I)<=0},l.prototype.eqn=function(I){return this.cmpn(I)===0},l.prototype.eq=function(I){return this.cmp(I)===0},l.red=function(I){return new z(I)},l.prototype.toRed=function(I){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),I.convertTo(this)._forceRed(I)},l.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},l.prototype._forceRed=function(I){return this.red=I,this},l.prototype.forceRed=function(I){return r(!this.red,"Already a number in reduction context"),this._forceRed(I)},l.prototype.redAdd=function(I){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,I)},l.prototype.redIAdd=function(I){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,I)},l.prototype.redSub=function(I){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,I)},l.prototype.redISub=function(I){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,I)},l.prototype.redShl=function(I){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,I)},l.prototype.redMul=function(I){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,I),this.red.mul(this,I)},l.prototype.redIMul=function(I){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,I),this.red.imul(this,I)},l.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},l.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},l.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},l.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},l.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},l.prototype.redPow=function(I){return r(this.red&&!I.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,I)};var S={k256:null,p224:null,p192:null,p25519:null};function w(I,N){this.name=I,this.p=new l(N,16),this.n=this.p.bitLength(),this.k=new l(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function C(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function O(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function z(I){if(typeof I=="string"){var N=l._prime(I);this.m=N.p,this.prime=N}else r(I.gtn(1),"modulus must be greater than 1"),this.m=I,this.prime=null}function j(I){z.call(this,I),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new l(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var I=new l(null);return I.words=new Array(Math.ceil(this.n/13)),I},w.prototype.ireduce=function(I){var N,W=I;do this.split(W,this.tmp),N=(W=(W=this.imulK(W)).iadd(this.tmp)).bitLength();while(N>this.n);var F=N<this.n?-1:W.ucmp(this.p);return F===0?(W.words[0]=0,W.length=1):F>0?W.isub(this.p):W.strip!==void 0?W.strip():W._strip(),W},w.prototype.split=function(I,N){I.iushrn(this.n,0,N)},w.prototype.imulK=function(I){return I.imul(this.k)},a(E,w),E.prototype.split=function(I,N){for(var W=4194303,F=Math.min(I.length,9),U=0;U<F;U++)N.words[U]=I.words[U];if(N.length=F,I.length<=9)return I.words[0]=0,void(I.length=1);var H=I.words[9];for(N.words[N.length++]=H&W,U=10;U<I.length;U++){var ne=0|I.words[U];I.words[U-10]=(ne&W)<<4|H>>>22,H=ne}H>>>=22,I.words[U-10]=H,H===0&&I.length>10?I.length-=10:I.length-=9},E.prototype.imulK=function(I){I.words[I.length]=0,I.words[I.length+1]=0,I.length+=2;for(var N=0,W=0;W<I.length;W++){var F=0|I.words[W];N+=977*F,I.words[W]=67108863&N,N=64*F+(N/67108864|0)}return I.words[I.length-1]===0&&(I.length--,I.words[I.length-1]===0&&I.length--),I},a(C,w),a(O,w),a(P,w),P.prototype.imulK=function(I){for(var N=0,W=0;W<I.length;W++){var F=19*(0|I.words[W])+N,U=67108863&F;F>>>=26,I.words[W]=U,N=F}return N!==0&&(I.words[I.length++]=N),I},l._prime=function(I){if(S[I])return S[I];var N;if(I==="k256")N=new E;else if(I==="p224")N=new C;else if(I==="p192")N=new O;else{if(I!=="p25519")throw new Error("Unknown prime "+I);N=new P}return S[I]=N,N},z.prototype._verify1=function(I){r(I.negative===0,"red works only with positives"),r(I.red,"red works only with red numbers")},z.prototype._verify2=function(I,N){r((I.negative|N.negative)==0,"red works only with positives"),r(I.red&&I.red===N.red,"red works only with red numbers")},z.prototype.imod=function(I){return this.prime?this.prime.ireduce(I)._forceRed(this):I.umod(this.m)._forceRed(this)},z.prototype.neg=function(I){return I.isZero()?I.clone():this.m.sub(I)._forceRed(this)},z.prototype.add=function(I,N){this._verify2(I,N);var W=I.add(N);return W.cmp(this.m)>=0&&W.isub(this.m),W._forceRed(this)},z.prototype.iadd=function(I,N){this._verify2(I,N);var W=I.iadd(N);return W.cmp(this.m)>=0&&W.isub(this.m),W},z.prototype.sub=function(I,N){this._verify2(I,N);var W=I.sub(N);return W.cmpn(0)<0&&W.iadd(this.m),W._forceRed(this)},z.prototype.isub=function(I,N){this._verify2(I,N);var W=I.isub(N);return W.cmpn(0)<0&&W.iadd(this.m),W},z.prototype.shl=function(I,N){return this._verify1(I),this.imod(I.ushln(N))},z.prototype.imul=function(I,N){return this._verify2(I,N),this.imod(I.imul(N))},z.prototype.mul=function(I,N){return this._verify2(I,N),this.imod(I.mul(N))},z.prototype.isqr=function(I){return this.imul(I,I.clone())},z.prototype.sqr=function(I){return this.mul(I,I)},z.prototype.sqrt=function(I){if(I.isZero())return I.clone();var N=this.m.andln(3);if(r(N%2==1),N===3){var W=this.m.add(new l(1)).iushrn(2);return this.pow(I,W)}for(var F=this.m.subn(1),U=0;!F.isZero()&&F.andln(1)===0;)U++,F.iushrn(1);r(!F.isZero());var H=new l(1).toRed(this),ne=H.redNeg(),$=this.m.subn(1).iushrn(1),K=this.m.bitLength();for(K=new l(2*K*K).toRed(this);this.pow(K,$).cmp(ne)!==0;)K.redIAdd(ne);for(var Q=this.pow(K,F),Z=this.pow(I,F.addn(1).iushrn(1)),X=this.pow(I,F),te=U;X.cmp(H)!==0;){for(var ae=X,se=0;ae.cmp(H)!==0;se++)ae=ae.redSqr();r(se<te);var ce=this.pow(Q,new l(1).iushln(te-se-1));Z=Z.redMul(ce),Q=ce.redSqr(),X=X.redMul(Q),te=se}return Z},z.prototype.invm=function(I){var N=I._invmp(this.m);return N.negative!==0?(N.negative=0,this.imod(N).redNeg()):this.imod(N)},z.prototype.pow=function(I,N){if(N.isZero())return new l(1).toRed(this);if(N.cmpn(1)===0)return I.clone();var W=new Array(16);W[0]=new l(1).toRed(this),W[1]=I;for(var F=2;F<W.length;F++)W[F]=this.mul(W[F-1],I);var U=W[0],H=0,ne=0,$=N.bitLength()%26;for($===0&&($=26),F=N.length-1;F>=0;F--){for(var K=N.words[F],Q=$-1;Q>=0;Q--){var Z=K>>Q&1;U!==W[0]&&(U=this.sqr(U)),Z!==0||H!==0?(H<<=1,H|=Z,(++ne==4||F===0&&Q===0)&&(U=this.mul(U,W[H]),ne=0,H=0)):ne=0}$=26}return U},z.prototype.convertTo=function(I){var N=I.umod(this.m);return N===I?N.clone():N},z.prototype.convertFrom=function(I){var N=I.clone();return N.red=null,N},l.mont=function(I){return new j(I)},a(j,z),j.prototype.convertTo=function(I){return this.imod(I.ushln(this.shift))},j.prototype.convertFrom=function(I){var N=this.imod(I.mul(this.rinv));return N.red=null,N},j.prototype.imul=function(I,N){if(I.isZero()||N.isZero())return I.words[0]=0,I.length=1,I;var W=I.imul(N),F=W.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),U=W.isub(F).iushrn(this.shift),H=U;return U.cmp(this.m)>=0?H=U.isub(this.m):U.cmpn(0)<0&&(H=U.iadd(this.m)),H._forceRed(this)},j.prototype.mul=function(I,N){if(I.isZero()||N.isZero())return new l(0)._forceRed(this);var W=I.mul(N),F=W.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),U=W.isub(F).iushrn(this.shift),H=U;return U.cmp(this.m)>=0?H=U.isub(this.m):U.cmpn(0)<0&&(H=U.iadd(this.m)),H._forceRed(this)},j.prototype.invm=function(I){return this.imod(I._invmp(this.m).mul(this.r2))._forceRed(this)}})(f=t.nmd(f),this)},6204:function(f){f.exports=function(o){var t,i,n,r=o.length,a=0;for(t=0;t<r;++t)a+=o[t].length;var l=new Array(a),u=0;for(t=0;t<r;++t){var h=o[t],c=h.length;for(i=0;i<c;++i){var x=l[u++]=new Array(c-1),p=0;for(n=0;n<c;++n)n!==i&&(x[p++]=h[n]);if(1&i){var v=x[1];x[1]=x[0],x[0]=v}}}return l}},6867:function(f,o,t){f.exports=function(x,p,v){switch(arguments.length){case 1:return i=[],h(g=x,g,c,!0),i;case 2:return typeof p=="function"?h(x,x,p,!0):function(y,m){return i=[],h(y,m,c,!1),i}(x,p);case 3:return h(x,p,v,!1);default:throw new Error("box-intersect: Invalid arguments")}var g};var i,n=t(1888),r=t(855),a=t(7150);function l(x,p){for(var v=0;v<x;++v)if(!(p[v]<=p[v+x]))return!0;return!1}function u(x,p,v,g){for(var y=0,m=0,_=0,d=x.length;_<d;++_){var S=x[_];if(!l(p,S)){for(var w=0;w<2*p;++w)v[y++]=S[w];g[m++]=_}}return m}function h(x,p,v,g){var y=x.length,m=p.length;if(!(y<=0||m<=0)){var _=x[0].length>>>1;if(!(_<=0)){var d,S=n.mallocDouble(2*_*y),w=n.mallocInt32(y);if((y=u(x,_,S,w))>0){if(_===1&&g)r.init(y),d=r.sweepComplete(_,v,0,y,S,w,0,y,S,w);else{var E=n.mallocDouble(2*_*m),C=n.mallocInt32(m);(m=u(p,_,E,C))>0&&(r.init(y+m),d=_===1?r.sweepBipartite(_,v,0,y,S,w,0,m,E,C):a(_,v,g,y,S,w,m,E,C),n.free(E),n.free(C))}n.free(S),n.free(w)}return d}}}function c(x,p){i.push([x,p])}},2455:function(f,o){function t(i){return i?function(n,r,a,l,u,h,c,x,p,v,g){return u-l>p-x?function(y,m,_,d,S,w,E,C,O,P,z){for(var j=2*y,I=d,N=j*d;I<S;++I,N+=j){var W=w[m+N],F=w[m+N+y],U=E[I];e:for(var H=C,ne=j*C;H<O;++H,ne+=j){var $=P[m+ne],K=P[m+ne+y],Q=z[H];if(!(K<W||F<$)){for(var Z=m+1;Z<y;++Z){var X=w[Z+N],te=w[Z+y+N],ae=P[Z+ne],se=P[Z+y+ne];if(te<ae||se<X)continue e}var ce=_(U,Q);if(ce!==void 0)return ce}}}}(n,r,a,l,u,h,c,x,p,v,g):function(y,m,_,d,S,w,E,C,O,P,z){for(var j=2*y,I=C,N=j*C;I<O;++I,N+=j){var W=P[m+N],F=P[m+N+y],U=z[I];e:for(var H=d,ne=j*d;H<S;++H,ne+=j){var $=w[m+ne],K=w[m+ne+y],Q=E[H];if(!(F<$||K<W)){for(var Z=m+1;Z<y;++Z){var X=w[Z+ne],te=w[Z+y+ne],ae=P[Z+N],se=P[Z+y+N];if(te<ae||se<X)continue e}var ce=_(Q,U);if(ce!==void 0)return ce}}}}(n,r,a,l,u,h,c,x,p,v,g)}:function(n,r,a,l,u,h,c,x,p,v,g,y){return h-u>v-p?l?function(m,_,d,S,w,E,C,O,P,z,j){for(var I=2*m,N=S,W=I*S;N<w;++N,W+=I){var F=E[_+W],U=E[_+W+m],H=C[N];e:for(var ne=O,$=I*O;ne<P;++ne,$+=I){var K=z[_+$],Q=j[ne];if(!(K<=F||U<K)){for(var Z=_+1;Z<m;++Z){var X=E[Z+W],te=E[Z+m+W],ae=z[Z+$],se=z[Z+m+$];if(te<ae||se<X)continue e}var ce=d(Q,H);if(ce!==void 0)return ce}}}}(n,r,a,u,h,c,x,p,v,g,y):function(m,_,d,S,w,E,C,O,P,z,j){for(var I=2*m,N=S,W=I*S;N<w;++N,W+=I){var F=E[_+W],U=E[_+W+m],H=C[N];e:for(var ne=O,$=I*O;ne<P;++ne,$+=I){var K=z[_+$],Q=j[ne];if(!(K<F||U<K)){for(var Z=_+1;Z<m;++Z){var X=E[Z+W],te=E[Z+m+W],ae=z[Z+$],se=z[Z+m+$];if(te<ae||se<X)continue e}var ce=d(H,Q);if(ce!==void 0)return ce}}}}(n,r,a,u,h,c,x,p,v,g,y):l?function(m,_,d,S,w,E,C,O,P,z,j){for(var I=2*m,N=O,W=I*O;N<P;++N,W+=I){var F=z[_+W],U=j[N];e:for(var H=S,ne=I*S;H<w;++H,ne+=I){var $=E[_+ne],K=E[_+ne+m],Q=C[H];if(!(F<=$||K<F)){for(var Z=_+1;Z<m;++Z){var X=E[Z+ne],te=E[Z+m+ne],ae=z[Z+W],se=z[Z+m+W];if(te<ae||se<X)continue e}var ce=d(U,Q);if(ce!==void 0)return ce}}}}(n,r,a,u,h,c,x,p,v,g,y):function(m,_,d,S,w,E,C,O,P,z,j){for(var I=2*m,N=O,W=I*O;N<P;++N,W+=I){var F=z[_+W],U=j[N];e:for(var H=S,ne=I*S;H<w;++H,ne+=I){var $=E[_+ne],K=E[_+ne+m],Q=C[H];if(!(F<$||K<F)){for(var Z=_+1;Z<m;++Z){var X=E[Z+ne],te=E[Z+m+ne],ae=z[Z+W],se=z[Z+m+W];if(te<ae||se<X)continue e}var ce=d(Q,U);if(ce!==void 0)return ce}}}}(n,r,a,u,h,c,x,p,v,g,y)}}o.partial=t(!1),o.full=t(!0)},7150:function(f,o,t){f.exports=function(I,N,W,F,U,H,ne,$,K){(function(Pe,Ee){var Fe=8*n.log2(Ee+1)*(Pe+1)|0,Ve=n.nextPow2(w*Fe);C.length<Ve&&(i.free(C),C=i.mallocInt32(Ve));var Ye=n.nextPow2(E*Fe);O.length<Ye&&(i.free(O),O=i.mallocDouble(Ye))})(I,F+ne);var Q,Z=0,X=2*I;for(P(Z++,0,0,F,0,ne,W?16:0,-1/0,1/0),W||P(Z++,0,0,ne,0,F,1,-1/0,1/0);Z>0;){var te=(Z-=1)*w,ae=C[te],se=C[te+1],ce=C[te+2],fe=C[te+3],pe=C[te+4],ge=C[te+5],me=Z*E,be=O[me],ke=O[me+1],ze=1&ge,ve=!!(16&ge),oe=U,ie=H,he=$,Se=K;if(ze&&(oe=$,ie=K,he=U,Se=H),!(2&ge&&se>=(ce=m(I,ae,se,ce,oe,ie,ke))||4&ge&&(se=_(I,ae,se,ce,oe,ie,be))>=ce)){var ye=ce-se,we=pe-fe;if(ve){if(I*ye*(ye+we)<v){if((Q=u.scanComplete(I,ae,N,se,ce,oe,ie,fe,pe,he,Se))!==void 0)return Q;continue}}else{if(I*Math.min(ye,we)<x){if((Q=a(I,ae,N,ze,se,ce,oe,ie,fe,pe,he,Se))!==void 0)return Q;continue}if(I*ye*we<p){if((Q=u.scanBipartite(I,ae,N,ze,se,ce,oe,ie,fe,pe,he,Se))!==void 0)return Q;continue}}var Me=g(I,ae,se,ce,oe,ie,be,ke);if(se<Me)if(I*(Me-se)<x){if((Q=l(I,ae+1,N,se,Me,oe,ie,fe,pe,he,Se))!==void 0)return Q}else if(ae===I-2){if((Q=ze?u.sweepBipartite(I,N,fe,pe,he,Se,se,Me,oe,ie):u.sweepBipartite(I,N,se,Me,oe,ie,fe,pe,he,Se))!==void 0)return Q}else P(Z++,ae+1,se,Me,fe,pe,ze,-1/0,1/0),P(Z++,ae+1,fe,pe,se,Me,1^ze,-1/0,1/0);if(Me<ce){var Oe=h(I,ae,fe,pe,he,Se),Ie=he[X*Oe+ae],de=y(I,ae,Oe,pe,he,Se,Ie);if(de<pe&&P(Z++,ae,Me,ce,de,pe,(4|ze)+(ve?16:0),Ie,ke),fe<Oe&&P(Z++,ae,Me,ce,fe,Oe,(2|ze)+(ve?16:0),be,Ie),Oe+1===de){if((Q=ve?j(I,ae,N,Me,ce,oe,ie,Oe,he,Se[Oe]):z(I,ae,N,ze,Me,ce,oe,ie,Oe,he,Se[Oe]))!==void 0)return Q}else if(Oe<de){var _e;if(ve){if(Me<(_e=d(I,ae,Me,ce,oe,ie,Ie))){var Ae=y(I,ae,Me,_e,oe,ie,Ie);if(ae===I-2){if(Me<Ae&&(Q=u.sweepComplete(I,N,Me,Ae,oe,ie,Oe,de,he,Se))!==void 0||Ae<_e&&(Q=u.sweepBipartite(I,N,Ae,_e,oe,ie,Oe,de,he,Se))!==void 0)return Q}else Me<Ae&&P(Z++,ae+1,Me,Ae,Oe,de,16,-1/0,1/0),Ae<_e&&(P(Z++,ae+1,Ae,_e,Oe,de,0,-1/0,1/0),P(Z++,ae+1,Oe,de,Ae,_e,1,-1/0,1/0))}}else Me<(_e=ze?S(I,ae,Me,ce,oe,ie,Ie):d(I,ae,Me,ce,oe,ie,Ie))&&(ae===I-2?Q=ze?u.sweepBipartite(I,N,Oe,de,he,Se,Me,_e,oe,ie):u.sweepBipartite(I,N,Me,_e,oe,ie,Oe,de,he,Se):(P(Z++,ae+1,Me,_e,Oe,de,ze,-1/0,1/0),P(Z++,ae+1,Oe,de,Me,_e,1^ze,-1/0,1/0)))}}}}};var i=t(1888),n=t(8828),r=t(2455),a=r.partial,l=r.full,u=t(855),h=t(3545),c=t(8105),x=128,p=1<<22,v=1<<22,g=c("!(lo>=p0)&&!(p1>=hi)"),y=c("lo===p0"),m=c("lo<p0"),_=c("hi<=p0"),d=c("lo<=p0&&p0<=hi"),S=c("lo<p0&&p0<=hi"),w=6,E=2,C=i.mallocInt32(1024),O=i.mallocDouble(1024);function P(I,N,W,F,U,H,ne,$,K){var Q=w*I;C[Q]=N,C[Q+1]=W,C[Q+2]=F,C[Q+3]=U,C[Q+4]=H,C[Q+5]=ne;var Z=E*I;O[Z]=$,O[Z+1]=K}function z(I,N,W,F,U,H,ne,$,K,Q,Z){var X=2*I,te=K*X,ae=Q[te+N];e:for(var se=U,ce=U*X;se<H;++se,ce+=X){var fe=ne[ce+N],pe=ne[ce+N+I];if(!(ae<fe||pe<ae||F&&ae===fe)){for(var ge,me=$[se],be=N+1;be<I;++be){fe=ne[ce+be],pe=ne[ce+be+I];var ke=Q[te+be],ze=Q[te+be+I];if(pe<ke||ze<fe)continue e}if((ge=F?W(Z,me):W(me,Z))!==void 0)return ge}}}function j(I,N,W,F,U,H,ne,$,K,Q){var Z=2*I,X=$*Z,te=K[X+N];e:for(var ae=F,se=F*Z;ae<U;++ae,se+=Z){var ce=ne[ae];if(ce!==Q){var fe=H[se+N],pe=H[se+N+I];if(!(te<fe||pe<te)){for(var ge=N+1;ge<I;++ge){fe=H[se+ge],pe=H[se+ge+I];var me=K[X+ge],be=K[X+ge+I];if(pe<me||be<fe)continue e}var ke=W(ce,Q);if(ke!==void 0)return ke}}}}},3545:function(f,o,t){f.exports=function(a,l,u,h,c,x){if(h<=u+1)return u;for(var p=u,v=h,g=h+u>>>1,y=2*a,m=g,_=c[y*g+l];p<v;){if(v-p<n){r(a,l,p,v,c,x),_=c[y*g+l];break}var d=v-p,S=Math.random()*d+p|0,w=c[y*S+l],E=Math.random()*d+p|0,C=c[y*E+l],O=Math.random()*d+p|0,P=c[y*O+l];w<=C?P>=C?(m=E,_=C):w>=P?(m=S,_=w):(m=O,_=P):C>=P?(m=E,_=C):P>=w?(m=S,_=w):(m=O,_=P);for(var z=y*(v-1),j=y*m,I=0;I<y;++I,++z,++j){var N=c[z];c[z]=c[j],c[j]=N}var W=x[v-1];for(x[v-1]=x[m],x[m]=W,z=y*(v-1),j=y*(m=i(a,l,p,v-1,c,x,_)),I=0;I<y;++I,++z,++j)N=c[z],c[z]=c[j],c[j]=N;if(W=x[v-1],x[v-1]=x[m],x[m]=W,g<m){for(v=m-1;p<v&&c[y*(v-1)+l]===_;)v-=1;v+=1}else{if(!(m<g))break;for(p=m+1;p<v&&c[y*p+l]===_;)p+=1}}return i(a,l,u,g,c,x,c[y*g+l])};var i=t(8105)("lo<p0"),n=8;function r(a,l,u,h,c,x){for(var p=2*a,v=p*(u+1)+l,g=u+1;g<h;++g,v+=p)for(var y=c[v],m=g,_=p*(g-1);m>u&&c[_+l]>y;--m,_-=p){for(var d=_,S=_+p,w=0;w<p;++w,++d,++S){var E=c[d];c[d]=c[S],c[S]=E}var C=x[m];x[m]=x[m-1],x[m-1]=C}}},8105:function(f){f.exports=function(t){return o[t]};var o={"lo===p0":function(t,i,n,r,a,l,u){for(var h=2*t,c=h*n,x=c,p=n,v=i,g=n;r>g;++g,c+=h)if(a[c+v]===u)if(p===g)p+=1,x+=h;else{for(var y=0;h>y;++y){var m=a[c+y];a[c+y]=a[x],a[x++]=m}var _=l[g];l[g]=l[p],l[p++]=_}return p},"lo<p0":function(t,i,n,r,a,l,u){for(var h=2*t,c=h*n,x=c,p=n,v=i,g=n;r>g;++g,c+=h)if(a[c+v]<u)if(p===g)p+=1,x+=h;else{for(var y=0;h>y;++y){var m=a[c+y];a[c+y]=a[x],a[x++]=m}var _=l[g];l[g]=l[p],l[p++]=_}return p},"lo<=p0":function(t,i,n,r,a,l,u){for(var h=2*t,c=h*n,x=c,p=n,v=t+i,g=n;r>g;++g,c+=h)if(a[c+v]<=u)if(p===g)p+=1,x+=h;else{for(var y=0;h>y;++y){var m=a[c+y];a[c+y]=a[x],a[x++]=m}var _=l[g];l[g]=l[p],l[p++]=_}return p},"hi<=p0":function(t,i,n,r,a,l,u){for(var h=2*t,c=h*n,x=c,p=n,v=t+i,g=n;r>g;++g,c+=h)if(a[c+v]<=u)if(p===g)p+=1,x+=h;else{for(var y=0;h>y;++y){var m=a[c+y];a[c+y]=a[x],a[x++]=m}var _=l[g];l[g]=l[p],l[p++]=_}return p},"lo<p0&&p0<=hi":function(t,i,n,r,a,l,u){for(var h=2*t,c=h*n,x=c,p=n,v=i,g=t+i,y=n;r>y;++y,c+=h){var m=a[c+v],_=a[c+g];if(m<u&&u<=_)if(p===y)p+=1,x+=h;else{for(var d=0;h>d;++d){var S=a[c+d];a[c+d]=a[x],a[x++]=S}var w=l[y];l[y]=l[p],l[p++]=w}}return p},"lo<=p0&&p0<=hi":function(t,i,n,r,a,l,u){for(var h=2*t,c=h*n,x=c,p=n,v=i,g=t+i,y=n;r>y;++y,c+=h){var m=a[c+v],_=a[c+g];if(m<=u&&u<=_)if(p===y)p+=1,x+=h;else{for(var d=0;h>d;++d){var S=a[c+d];a[c+d]=a[x],a[x++]=S}var w=l[y];l[y]=l[p],l[p++]=w}}return p},"!(lo>=p0)&&!(p1>=hi)":function(t,i,n,r,a,l,u,h){for(var c=2*t,x=c*n,p=x,v=n,g=i,y=t+i,m=n;r>m;++m,x+=c){var _=a[x+g],d=a[x+y];if(!(_>=u||h>=d))if(v===m)v+=1,p+=c;else{for(var S=0;c>S;++S){var w=a[x+S];a[x+S]=a[p],a[p++]=w}var E=l[m];l[m]=l[v],l[v++]=E}}return v}}},1811:function(f){f.exports=function(c,x){x<=4*o?t(0,x-1,c):h(0,x-1,c)};var o=32;function t(c,x,p){for(var v=2*(c+1),g=c+1;g<=x;++g){for(var y=p[v++],m=p[v++],_=g,d=v-2;_-- >c;){var S=p[d-2],w=p[d-1];if(S<y||S===y&&w<m)break;p[d]=S,p[d+1]=w,d-=2}p[d]=y,p[d+1]=m}}function i(c,x,p){x*=2;var v=p[c*=2],g=p[c+1];p[c]=p[x],p[c+1]=p[x+1],p[x]=v,p[x+1]=g}function n(c,x,p){x*=2,p[c*=2]=p[x],p[c+1]=p[x+1]}function r(c,x,p,v){x*=2,p*=2;var g=v[c*=2],y=v[c+1];v[c]=v[x],v[c+1]=v[x+1],v[x]=v[p],v[x+1]=v[p+1],v[p]=g,v[p+1]=y}function a(c,x,p,v,g){x*=2,g[c*=2]=g[x],g[x]=p,g[c+1]=g[x+1],g[x+1]=v}function l(c,x,p){x*=2;var v=p[c*=2],g=p[x];return!(v<g)&&(v!==g||p[c+1]>p[x+1])}function u(c,x,p,v){var g=v[c*=2];return g<x||g===x&&v[c+1]<p}function h(c,x,p){var v=(x-c+1)/6|0,g=c+v,y=x-v,m=c+x>>1,_=m-v,d=m+v,S=g,w=_,E=m,C=d,O=y,P=c+1,z=x-1,j=0;l(S,w,p)&&(j=S,S=w,w=j),l(C,O,p)&&(j=C,C=O,O=j),l(S,E,p)&&(j=S,S=E,E=j),l(w,E,p)&&(j=w,w=E,E=j),l(S,C,p)&&(j=S,S=C,C=j),l(E,C,p)&&(j=E,E=C,C=j),l(w,O,p)&&(j=w,w=O,O=j),l(w,E,p)&&(j=w,w=E,E=j),l(C,O,p)&&(j=C,C=O,O=j);for(var I=p[2*w],N=p[2*w+1],W=p[2*C],F=p[2*C+1],U=2*S,H=2*E,ne=2*O,$=2*g,K=2*m,Q=2*y,Z=0;Z<2;++Z){var X=p[U+Z],te=p[H+Z],ae=p[ne+Z];p[$+Z]=X,p[K+Z]=te,p[Q+Z]=ae}n(_,c,p),n(d,x,p);for(var se=P;se<=z;++se)if(u(se,I,N,p))se!==P&&i(se,P,p),++P;else if(!u(se,W,F,p))for(;;){if(u(z,W,F,p)){u(z,I,N,p)?(r(se,P,z,p),++P,--z):(i(se,z,p),--z);break}if(--z<se)break}a(c,P-1,I,N,p),a(x,z+1,W,F,p),P-2-c<=o?t(c,P-2,p):h(c,P-2,p),x-(z+2)<=o?t(z+2,x,p):h(z+2,x,p),z-P<=o?t(P,z,p):h(P,z,p)}},855:function(f,o,t){f.exports={init:function(_){var d=n.nextPow2(_);u.length<d&&(i.free(u),u=i.mallocInt32(d)),h.length<d&&(i.free(h),h=i.mallocInt32(d)),c.length<d&&(i.free(c),c=i.mallocInt32(d)),x.length<d&&(i.free(x),x=i.mallocInt32(d)),p.length<d&&(i.free(p),p=i.mallocInt32(d)),v.length<d&&(i.free(v),v=i.mallocInt32(d));var S=8*d;g.length<S&&(i.free(g),g=i.mallocDouble(S))},sweepBipartite:function(_,d,S,w,E,C,O,P,z,j){for(var I=0,N=2*_,W=_-1,F=N-1,U=S;U<w;++U){var H=C[U],ne=N*U;g[I++]=E[ne+W],g[I++]=-(H+1),g[I++]=E[ne+F],g[I++]=H}for(U=O;U<P;++U){H=j[U]+a;var $=N*U;g[I++]=z[$+W],g[I++]=-H,g[I++]=z[$+F],g[I++]=H}var K=I>>>1;r(g,K);var Q=0,Z=0;for(U=0;U<K;++U){var X=0|g[2*U+1];if(X>=a)y(c,x,Z--,X=X-a|0);else if(X>=0)y(u,h,Q--,X);else if(X<=-a){X=-X-a|0;for(var te=0;te<Q;++te)if((ae=d(u[te],X))!==void 0)return ae;m(c,x,Z++,X)}else{for(X=-X-1|0,te=0;te<Z;++te){var ae;if((ae=d(X,c[te]))!==void 0)return ae}m(u,h,Q++,X)}}},sweepComplete:function(_,d,S,w,E,C,O,P,z,j){for(var I=0,N=2*_,W=_-1,F=N-1,U=S;U<w;++U){var H=C[U]+1<<1,ne=N*U;g[I++]=E[ne+W],g[I++]=-H,g[I++]=E[ne+F],g[I++]=H}for(U=O;U<P;++U){H=j[U]+1<<1;var $=N*U;g[I++]=z[$+W],g[I++]=1|-H,g[I++]=z[$+F],g[I++]=1|H}var K=I>>>1;r(g,K);var Q=0,Z=0,X=0;for(U=0;U<K;++U){var te=0|g[2*U+1],ae=1&te;if(U<K-1&&te>>1==g[2*U+3]>>1&&(ae=2,U+=1),te<0){for(var se=-(te>>1)-1,ce=0;ce<X;++ce)if((fe=d(p[ce],se))!==void 0)return fe;if(ae!==0){for(ce=0;ce<Q;++ce)if((fe=d(u[ce],se))!==void 0)return fe}if(ae!==1)for(ce=0;ce<Z;++ce){var fe;if((fe=d(c[ce],se))!==void 0)return fe}ae===0?m(u,h,Q++,se):ae===1?m(c,x,Z++,se):ae===2&&m(p,v,X++,se)}else se=(te>>1)-1,ae===0?y(u,h,Q--,se):ae===1?y(c,x,Z--,se):ae===2&&y(p,v,X--,se)}},scanBipartite:function(_,d,S,w,E,C,O,P,z,j,I,N){var W=0,F=2*_,U=d,H=d+_,ne=1,$=1;w?$=a:ne=a;for(var K=E;K<C;++K){var Q=K+ne,Z=F*K;g[W++]=O[Z+U],g[W++]=-Q,g[W++]=O[Z+H],g[W++]=Q}for(K=z;K<j;++K){Q=K+$;var X=F*K;g[W++]=I[X+U],g[W++]=-Q}var te=W>>>1;r(g,te);var ae=0;for(K=0;K<te;++K){var se=0|g[2*K+1];if(se<0){var ce=!1;if((Q=-se)>=a?(ce=!w,Q-=a):(ce=!!w,Q-=1),ce)m(u,h,ae++,Q);else{var fe=N[Q],pe=F*Q,ge=I[pe+d+1],me=I[pe+d+1+_];e:for(var be=0;be<ae;++be){var ke=u[be],ze=F*ke;if(!(me<O[ze+d+1]||O[ze+d+1+_]<ge)){for(var ve=d+2;ve<_;++ve)if(I[pe+ve+_]<O[ze+ve]||O[ze+ve+_]<I[pe+ve])continue e;var oe,ie=P[ke];if((oe=w?S(fe,ie):S(ie,fe))!==void 0)return oe}}}}else y(u,h,ae--,se-ne)}},scanComplete:function(_,d,S,w,E,C,O,P,z,j,I){for(var N=0,W=2*_,F=d,U=d+_,H=w;H<E;++H){var ne=H+a,$=W*H;g[N++]=C[$+F],g[N++]=-ne,g[N++]=C[$+U],g[N++]=ne}for(H=P;H<z;++H){ne=H+1;var K=W*H;g[N++]=j[K+F],g[N++]=-ne}var Q=N>>>1;r(g,Q);var Z=0;for(H=0;H<Q;++H){var X=0|g[2*H+1];if(X<0)if((ne=-X)>=a)u[Z++]=ne-a;else{var te=I[ne-=1],ae=W*ne,se=j[ae+d+1],ce=j[ae+d+1+_];e:for(var fe=0;fe<Z;++fe){var pe=u[fe],ge=O[pe];if(ge===te)break;var me=W*pe;if(!(ce<C[me+d+1]||C[me+d+1+_]<se)){for(var be=d+2;be<_;++be)if(j[ae+be+_]<C[me+be]||C[me+be+_]<j[ae+be])continue e;var ke=S(ge,te);if(ke!==void 0)return ke}}}else{for(ne=X-a,fe=Z-1;fe>=0;--fe)if(u[fe]===ne){for(be=fe+1;be<Z;++be)u[be-1]=u[be];break}--Z}}}};var i=t(1888),n=t(8828),r=t(1811),a=1<<28,l=1024,u=i.mallocInt32(l),h=i.mallocInt32(l),c=i.mallocInt32(l),x=i.mallocInt32(l),p=i.mallocInt32(l),v=i.mallocInt32(l),g=i.mallocDouble(8192);function y(_,d,S,w){var E=d[w],C=_[S-1];_[E]=C,d[C]=E}function m(_,d,S,w){_[S]=w,d[w]=S}},2538:function(f,o,t){var i=t(8902),n=t(5542),r=t(2272),a=t(5023);function l(c){return[Math.min(c[0],c[1]),Math.max(c[0],c[1])]}function u(c,x){return c[0]-x[0]||c[1]-x[1]}function h(c,x,p){return x in c?c[x]:p}f.exports=function(c,x,p){Array.isArray(x)?(p=p||{},x=x||[]):(p=x||{},x=[]);var v=!!h(p,"delaunay",!0),g=!!h(p,"interior",!0),y=!!h(p,"exterior",!0),m=!!h(p,"infinity",!1);if(!g&&!y||c.length===0)return[];var _=i(c,x);if(v||g!==y||m){for(var d=n(c.length,function(E){return E.map(l).sort(u)}(x)),S=0;S<_.length;++S){var w=_[S];d.addTriangle(w[0],w[1],w[2])}return v&&r(c,d),y?g?m?a(d,0,m):d.cells():a(d,1,m):a(d,-1)}return _}},2272:function(f,o,t){var i=t(2646)[4];function n(r,a,l,u,h,c){var x=a.opposite(u,h);if(!(x<0)){if(h<u){var p=u;u=h,h=p,p=c,c=x,x=p}a.isConstraint(u,h)||i(r[u],r[h],r[c],r[x])<0&&l.push(u,h)}}t(2478),f.exports=function(r,a){for(var l=[],u=r.length,h=a.stars,c=0;c<u;++c)for(var x=h[c],p=1;p<x.length;p+=2)if(!((m=x[p])<c||a.isConstraint(c,m))){for(var v=x[p-1],g=-1,y=1;y<x.length;y+=2)if(x[y-1]===m){g=x[y];break}g<0||i(r[c],r[m],r[v],r[g])<0&&l.push(c,m)}for(;l.length>0;){for(var m=l.pop(),_=(v=-1,g=-1,x=h[c=l.pop()],1);_<x.length;_+=2){var d=x[_-1],S=x[_];d===m?g=S:S===m&&(v=d)}v<0||g<0||i(r[c],r[m],r[v],r[g])>=0||(a.flip(c,m),n(r,a,l,v,c,g),n(r,a,l,c,g,v),n(r,a,l,g,m,v),n(r,a,l,m,v,g))}}},5023:function(f,o,t){var i,n=t(2478);function r(l,u,h,c,x,p,v){this.cells=l,this.neighbor=u,this.flags=c,this.constraint=h,this.active=x,this.next=p,this.boundary=v}function a(l,u){return l[0]-u[0]||l[1]-u[1]||l[2]-u[2]}f.exports=function(l,u,h){var c=function(O,P){for(var z=O.cells(),j=z.length,I=0;I<j;++I){var N=(X=z[I])[0],W=X[1],F=X[2];W<F?W<N&&(X[0]=W,X[1]=F,X[2]=N):F<N&&(X[0]=F,X[1]=N,X[2]=W)}z.sort(a);var U=new Array(j);for(I=0;I<U.length;++I)U[I]=0;var H=[],ne=[],$=new Array(3*j),K=new Array(3*j),Q=null;P&&(Q=[]);var Z=new r(z,$,K,U,H,ne,Q);for(I=0;I<j;++I)for(var X=z[I],te=0;te<3;++te){N=X[te],W=X[(te+1)%3];var ae=$[3*I+te]=Z.locate(W,N,O.opposite(W,N)),se=K[3*I+te]=O.isConstraint(N,W);ae<0&&(se?ne.push(I):(H.push(I),U[I]=1),P&&Q.push([W,N,-1]))}return Z}(l,h);if(u===0)return h?c.cells.concat(c.boundary):c.cells;for(var x=1,p=c.active,v=c.next,g=c.flags,y=c.cells,m=c.constraint,_=c.neighbor;p.length>0||v.length>0;){for(;p.length>0;){var d=p.pop();if(g[d]!==-x){g[d]=x,y[d];for(var S=0;S<3;++S){var w=_[3*d+S];w>=0&&g[w]===0&&(m[3*d+S]?v.push(w):(p.push(w),g[w]=x))}}}var E=v;v=p,p=E,v.length=0,x=-x}var C=function(O,P,z){for(var j=0,I=0;I<O.length;++I)P[I]===z&&(O[j++]=O[I]);return O.length=j,O}(y,g,u);return h?C.concat(c.boundary):C},r.prototype.locate=(i=[0,0,0],function(l,u,h){var c=l,x=u,p=h;return u<h?u<l&&(c=u,x=h,p=l):h<l&&(c=h,x=l,p=u),c<0?-1:(i[0]=c,i[1]=x,i[2]=p,n.eq(this.cells,i,a))})},8902:function(f,o,t){var i=t(2478),n=t(3250)[3];function r(v,g,y,m,_){this.a=v,this.b=g,this.idx=y,this.lowerIds=m,this.upperIds=_}function a(v,g,y,m){this.a=v,this.b=g,this.type=y,this.idx=m}function l(v,g){var y=v.a[0]-g.a[0]||v.a[1]-g.a[1]||v.type-g.type;return y||(v.type!==0&&(y=n(v.a,v.b,g.b))?y:v.idx-g.idx)}function u(v,g){return n(v.a,v.b,g)}function h(v,g,y,m,_){for(var d=i.lt(g,m,u),S=i.gt(g,m,u),w=d;w<S;++w){for(var E=g[w],C=E.lowerIds,O=C.length;O>1&&n(y[C[O-2]],y[C[O-1]],m)>0;)v.push([C[O-1],C[O-2],_]),O-=1;C.length=O,C.push(_);var P=E.upperIds;for(O=P.length;O>1&&n(y[P[O-2]],y[P[O-1]],m)<0;)v.push([P[O-2],P[O-1],_]),O-=1;P.length=O,P.push(_)}}function c(v,g){var y;return(y=v.a[0]<g.a[0]?n(v.a,v.b,g.a):n(g.b,g.a,v.a))?y:(y=g.b[0]<v.b[0]?n(v.a,v.b,g.b):n(g.b,g.a,v.b))||v.idx-g.idx}function x(v,g,y){var m=i.le(v,y,c),_=v[m],d=_.upperIds,S=d[d.length-1];_.upperIds=[S],v.splice(m+1,0,new r(y.a,y.b,y.idx,[S],d))}function p(v,g,y){var m=y.a;y.a=y.b,y.b=m;var _=i.eq(v,y,c),d=v[_];v[_-1].upperIds=d.upperIds,v.splice(_,1)}f.exports=function(v,g){for(var y=v.length,m=g.length,_=[],d=0;d<y;++d)_.push(new a(v[d],null,0,d));for(d=0;d<m;++d){var S=g[d],w=v[S[0]],E=v[S[1]];w[0]<E[0]?_.push(new a(w,E,2,d),new a(E,w,1,d)):w[0]>E[0]&&_.push(new a(E,w,2,d),new a(w,E,1,d))}_.sort(l);for(var C=_[0].a[0]-(1+Math.abs(_[0].a[0]))*Math.pow(2,-52),O=[new r([C,1],[C,0],-1,[],[])],P=[],z=(d=0,_.length);d<z;++d){var j=_[d],I=j.type;I===0?h(P,O,v,j.a,j.idx):I===2?x(O,0,j):p(O,0,j)}return P}},5542:function(f,o,t){var i=t(2478);function n(l,u){this.stars=l,this.edges=u}f.exports=function(l,u){for(var h=new Array(l),c=0;c<l;++c)h[c]=[];return new n(h,u)};var r=n.prototype;function a(l,u,h){for(var c=1,x=l.length;c<x;c+=2)if(l[c-1]===u&&l[c]===h)return l[c-1]=l[x-2],l[c]=l[x-1],void(l.length=x-2)}r.isConstraint=function(){var l=[0,0];function u(h,c){return h[0]-c[0]||h[1]-c[1]}return function(h,c){return l[0]=Math.min(h,c),l[1]=Math.max(h,c),i.eq(this.edges,l,u)>=0}}(),r.removeTriangle=function(l,u,h){var c=this.stars;a(c[l],u,h),a(c[u],h,l),a(c[h],l,u)},r.addTriangle=function(l,u,h){var c=this.stars;c[l].push(u,h),c[u].push(h,l),c[h].push(l,u)},r.opposite=function(l,u){for(var h=this.stars[u],c=1,x=h.length;c<x;c+=2)if(h[c]===l)return h[c-1];return-1},r.flip=function(l,u){var h=this.opposite(l,u),c=this.opposite(u,l);this.removeTriangle(l,u,h),this.removeTriangle(u,l,c),this.addTriangle(l,c,h),this.addTriangle(u,h,c)},r.edges=function(){for(var l=this.stars,u=[],h=0,c=l.length;h<c;++h)for(var x=l[h],p=0,v=x.length;p<v;p+=2)u.push([x[p],x[p+1]]);return u},r.cells=function(){for(var l=this.stars,u=[],h=0,c=l.length;h<c;++h)for(var x=l[h],p=0,v=x.length;p<v;p+=2){var g=x[p],y=x[p+1];h<Math.min(g,y)&&u.push([h,g,y])}return u}},2419:function(f){f.exports=function(o){for(var t=1,i=1;i<o.length;++i)for(var n=0;n<i;++n)if(o[i]<o[n])t=-t;else if(o[n]===o[i])return 0;return t}},3628:function(f,o,t){var i=t(1338),n=t(727);function r(u,h){for(var c=0,x=u.length,p=0;p<x;++p)c+=u[p]*h[p];return c}function a(u){var h=u.length;if(h===0)return[];u[0].length;var c=i([u.length+1,u.length+1],1),x=i([u.length+1],1);c[h][h]=0;for(var p=0;p<h;++p){for(var v=0;v<=p;++v)c[v][p]=c[p][v]=2*r(u[p],u[v]);x[p]=r(u[p],u[p])}var g=n(c,x),y=0,m=g[h+1];for(p=0;p<m.length;++p)y+=m[p];var _=new Array(h);for(p=0;p<h;++p){m=g[p];var d=0;for(v=0;v<m.length;++v)d+=m[v];_[p]=d/y}return _}function l(u){if(u.length===0)return[];for(var h=u[0].length,c=i([h]),x=a(u),p=0;p<u.length;++p)for(var v=0;v<h;++v)c[v]+=u[p][v]*x[p];return c}l.barycenetric=a,f.exports=l},6037:function(f,o,t){f.exports=function(n){for(var r=i(n),a=0,l=0;l<n.length;++l)for(var u=n[l],h=0;h<r.length;++h)a+=Math.pow(u[h]-r[h],2);return Math.sqrt(a/n.length)};var i=t(3628)},332:function(f,o,t){f.exports=function(S,w,E){var C;if(E){C=w;for(var O=new Array(w.length),P=0;P<w.length;++P){var z=w[P];O[P]=[z[0],z[1],E[P]]}w=O}for(var j=function(I,N,W){var F=g(I,[],v(I));return _(N,F,W),!!F}(S,w,!!E);d(S,w,!!E);)j=!0;if(E&&j)for(C.length=0,E.length=0,P=0;P<w.length;++P)z=w[P],C.push([z[0],z[1]]),E.push(z[2]);return j};var i=t(1755),n=t(6867),r=t(1125),a=t(7842),l=t(1318),u=t(946),h=t(5838),c=t(1278),x=t(3637);function p(S){var w=u(S);return[c(w,-1/0),c(w,1/0)]}function v(S){for(var w=new Array(S.length),E=0;E<S.length;++E){var C=S[E];w[E]=[c(C[0],-1/0),c(C[1],-1/0),c(C[0],1/0),c(C[1],1/0)]}return w}function g(S,w,E){for(var C=w.length,O=new i(C),P=[],z=0;z<w.length;++z){var j=w[z],I=p(j[0]),N=p(j[1]);P.push([c(I[0],-1/0),c(N[0],-1/0),c(I[1],1/0),c(N[1],1/0)])}n(P,function(ne,$){O.link(ne,$)});var W=!0,F=new Array(C);for(z=0;z<C;++z)(H=O.find(z))!==z&&(W=!1,S[H]=[Math.min(S[z][0],S[H][0]),Math.min(S[z][1],S[H][1])]);if(W)return null;var U=0;for(z=0;z<C;++z){var H;(H=O.find(z))===z?(F[z]=U,S[U++]=S[z]):F[z]=-1}for(S.length=U,z=0;z<C;++z)F[z]<0&&(F[z]=F[O.find(z)]);return F}function y(S,w){return S[0]-w[0]||S[1]-w[1]}function m(S,w){return S[0]-w[0]||S[1]-w[1]||(S[2]<w[2]?-1:S[2]>w[2]?1:0)}function _(S,w,E){if(S.length!==0){if(w)for(var C=0;C<S.length;++C){var O=w[(z=S[C])[0]],P=w[z[1]];z[0]=Math.min(O,P),z[1]=Math.max(O,P)}else for(C=0;C<S.length;++C){var z;O=(z=S[C])[0],P=z[1],z[0]=Math.min(O,P),z[1]=Math.max(O,P)}E?S.sort(m):S.sort(y);var j=1;for(C=1;C<S.length;++C){var I=S[C-1],N=S[C];(N[0]!==I[0]||N[1]!==I[1]||E&&N[2]!==I[2])&&(S[j++]=N)}S.length=j}}function d(S,w,E){var C=function(I,N){for(var W=new Array(N.length),F=0;F<N.length;++F){var U=N[F],H=I[U[0]],ne=I[U[1]];W[F]=[c(Math.min(H[0],ne[0]),-1/0),c(Math.min(H[1],ne[1]),-1/0),c(Math.max(H[0],ne[0]),1/0),c(Math.max(H[1],ne[1]),1/0)]}return W}(S,w),O=function(I,N,W){var F=[];return n(W,function(U,H){var ne=N[U],$=N[H];if(ne[0]!==$[0]&&ne[0]!==$[1]&&ne[1]!==$[0]&&ne[1]!==$[1]){var K=I[ne[0]],Q=I[ne[1]],Z=I[$[0]],X=I[$[1]];r(K,Q,Z,X)&&F.push([U,H])}}),F}(S,w,C),P=function(I,N,W,F){var U=[];return n(W,F,function(H,ne){var $=N[H];if($[0]!==ne&&$[1]!==ne){var K=I[ne],Q=I[$[0]],Z=I[$[1]];r(Q,Z,K,K)&&U.push([H,ne])}}),U}(S,w,C,v(S)),z=function(I,N,W,F,U){var H,ne,$=I.map(function(oe){return[a(oe[0]),a(oe[1])]});for(H=0;H<W.length;++H){var K=W[H];ne=K[0];var Q=K[1],Z=N[ne],X=N[Q],te=x(h(I[Z[0]]),h(I[Z[1]]),h(I[X[0]]),h(I[X[1]]));if(te){var ae=I.length;I.push([u(te[0]),u(te[1])]),$.push(te),F.push([ne,ae],[Q,ae])}}for(F.sort(function(oe,ie){if(oe[0]!==ie[0])return oe[0]-ie[0];var he=$[oe[1]],Se=$[ie[1]];return l(he[0],Se[0])||l(he[1],Se[1])}),H=F.length-1;H>=0;--H){var se=N[ne=(ze=F[H])[0]],ce=se[0],fe=se[1],pe=I[ce],ge=I[fe];if((pe[0]-ge[0]||pe[1]-ge[1])<0){var me=ce;ce=fe,fe=me}se[0]=ce;var be,ke=se[1]=ze[1];for(U&&(be=se[2]);H>0&&F[H-1][0]===ne;){var ze,ve=(ze=F[--H])[1];U?N.push([ke,ve,be]):N.push([ke,ve]),ke=ve}U?N.push([ke,fe,be]):N.push([ke,fe])}return $}(S,w,O,P,E),j=g(S,z);return _(w,j,E),!!j||O.length>0||P.length>0}},3637:function(f,o,t){f.exports=function(x,p,v,g){var y=l(p,x),m=l(g,v),_=c(y,m);if(a(_)===0)return null;var d=c(m,l(x,v)),S=n(d,_),w=h(y,S);return u(x,w)};var i=t(6504),n=t(8697),r=t(5572),a=t(7721),l=t(544),u=t(2653),h=t(8987);function c(x,p){return r(i(x[0],p[1]),i(x[1],p[0]))}},3642:function(f){f.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},6729:function(f,o,t){var i=t(3642),n=t(395);function r(u){return[u[0]/255,u[1]/255,u[2]/255,u[3]]}function a(u){for(var h,c="#",x=0;x<3;++x)c+=("00"+(h=(h=u[x]).toString(16))).substr(h.length);return c}function l(u){return"rgba("+u.join(",")+")"}f.exports=function(u){var h,c,x,p,v,g,y,m,_,d;if(u||(u={}),m=(u.nshades||72)-1,y=u.format||"hex",(g=u.colormap)||(g="jet"),typeof g=="string"){if(g=g.toLowerCase(),!i[g])throw Error(g+" not a supported colorscale");v=i[g]}else{if(!Array.isArray(g))throw Error("unsupported colormap option",g);v=g.slice()}if(v.length>m+1)throw new Error(g+" map requires nshades to be at least size "+v.length);_=Array.isArray(u.alpha)?u.alpha.length!==2?[1,1]:u.alpha.slice():typeof u.alpha=="number"?[u.alpha,u.alpha]:[1,1],h=v.map(function(O){return Math.round(O.index*m)}),_[0]=Math.min(Math.max(_[0],0),1),_[1]=Math.min(Math.max(_[1],0),1);var S=v.map(function(O,P){var z=v[P].index,j=v[P].rgb.slice();return j.length===4&&j[3]>=0&&j[3]<=1||(j[3]=_[0]+(_[1]-_[0])*z),j}),w=[];for(d=0;d<h.length-1;++d){p=h[d+1]-h[d],c=S[d],x=S[d+1];for(var E=0;E<p;E++){var C=E/p;w.push([Math.round(n(c[0],x[0],C)),Math.round(n(c[1],x[1],C)),Math.round(n(c[2],x[2],C)),n(c[3],x[3],C)])}}return w.push(v[v.length-1].rgb.concat(_[1])),y==="hex"?w=w.map(a):y==="rgbaString"?w=w.map(l):y==="float"&&(w=w.map(r)),w}},3140:function(f,o,t){f.exports=function(h,c,x,p){var v=i(c,x,p);if(v===0){var g=n(i(h,c,x)),y=n(i(h,c,p));if(g===y){if(g===0){var m=u(h,c,x);return m===u(h,c,p)?0:m?1:-1}return 0}return y===0?g>0||u(h,c,p)?-1:1:g===0?y>0||u(h,c,x)?1:-1:n(y-g)}var _=i(h,c,x);return _>0?v>0&&i(h,c,p)>0?1:-1:_<0?v>0||i(h,c,p)>0?1:-1:i(h,c,p)>0||u(h,c,x)?1:-1};var i=t(3250),n=t(8572),r=t(9362),a=t(5382),l=t(8210);function u(h,c,x){var p=r(h[0],-c[0]),v=r(h[1],-c[1]),g=r(x[0],-c[0]),y=r(x[1],-c[1]),m=l(a(p,g),a(v,y));return m[m.length-1]>=0}},8572:function(f){f.exports=function(o){return o<0?-1:o>0?1:0}},8507:function(f){f.exports=function(i,n){var r=i.length,a=i.length-n.length;if(a)return a;switch(r){case 0:return 0;case 1:return i[0]-n[0];case 2:return i[0]+i[1]-n[0]-n[1]||o(i[0],i[1])-o(n[0],n[1]);case 3:var l=i[0]+i[1],u=n[0]+n[1];if(a=l+i[2]-(u+n[2]))return a;var h=o(i[0],i[1]),c=o(n[0],n[1]);return o(h,i[2])-o(c,n[2])||o(h+i[2],l)-o(c+n[2],u);case 4:var x=i[0],p=i[1],v=i[2],g=i[3],y=n[0],m=n[1],_=n[2],d=n[3];return x+p+v+g-(y+m+_+d)||o(x,p,v,g)-o(y,m,_,d,y)||o(x+p,x+v,x+g,p+v,p+g,v+g)-o(y+m,y+_,y+d,m+_,m+d,_+d)||o(x+p+v,x+p+g,x+v+g,p+v+g)-o(y+m+_,y+m+d,y+_+d,m+_+d);default:for(var S=i.slice().sort(t),w=n.slice().sort(t),E=0;E<r;++E)if(a=S[E]-w[E])return a;return 0}};var o=Math.min;function t(i,n){return i-n}},3788:function(f,o,t){var i=t(8507),n=t(2419);f.exports=function(r,a){return i(r,a)||n(r)-n(a)}},7352:function(f,o,t){var i=t(5721),n=t(4750),r=t(2690);f.exports=function(a){var l=a.length;if(l===0)return[];if(l===1)return[[0]];var u=a[0].length;return u===0?[]:u===1?i(a):u===2?n(a):r(a,u)}},5721:function(f){f.exports=function(o){for(var t=0,i=0,n=1;n<o.length;++n)o[n][0]<o[t][0]&&(t=n),o[n][0]>o[i][0]&&(i=n);return t<i?[[t],[i]]:t>i?[[i],[t]]:[[t]]}},4750:function(f,o,t){f.exports=function(n){var r=i(n),a=r.length;if(a<=2)return[];for(var l=new Array(a),u=r[a-1],h=0;h<a;++h){var c=r[h];l[h]=[u,c],u=c}return l};var i=t(3090)},2690:function(f,o,t){f.exports=function(r,a){try{return i(r,!0)}catch{var l=n(r);if(l.length<=a)return[];var u=function(c,x){for(var p=c.length,v=new Array(p),g=0;g<x.length;++g)v[g]=c[x[g]];var y=x.length;for(g=0;g<p;++g)x.indexOf(g)<0&&(v[y++]=c[g]);return v}(r,l);return function(c,x){for(var p=c.length,v=x.length,g=0;g<p;++g)for(var y=c[g],m=0;m<y.length;++m){var _=y[m];if(_<v)y[m]=x[_];else{_-=v;for(var d=0;d<v;++d)_>=x[d]&&(_+=1);y[m]=_}}return c}(i(u,!0),l)}};var i=t(8954),n=t(3952)},4769:function(f){f.exports=function(o,t,i,n,r,a){var l=r-1,u=r*r,h=l*l,c=(1+2*r)*h,x=r*h,p=u*(3-2*r),v=u*l;if(o.length){a||(a=new Array(o.length));for(var g=o.length-1;g>=0;--g)a[g]=c*o[g]+x*t[g]+p*i[g]+v*n[g];return a}return c*o+x*t+p*i+v*n},f.exports.derivative=function(o,t,i,n,r,a){var l=6*r*r-6*r,u=3*r*r-4*r+1,h=-6*r*r+6*r,c=3*r*r-2*r;if(o.length){a||(a=new Array(o.length));for(var x=o.length-1;x>=0;--x)a[x]=l*o[x]+u*t[x]+h*i[x]+c*n[x];return a}return l*o+u*t+h*i[x]+c*n}},7642:function(f,o,t){var i=t(8954),n=t(1682);function r(l,u){this.point=l,this.index=u}function a(l,u){for(var h=l.point,c=u.point,x=h.length,p=0;p<x;++p){var v=c[p]-h[p];if(v)return v}return 0}f.exports=function(l,u){var h=l.length;if(h===0)return[];var c=l[0].length;if(c<1)return[];if(c===1)return function(z,j,I){if(z===1)return I?[[-1,0]]:[];var N=j.map(function(ne,$){return[ne[0],$]});N.sort(function(ne,$){return ne[0]-$[0]});for(var W=new Array(z-1),F=1;F<z;++F){var U=N[F-1],H=N[F];W[F-1]=[U[1],H[1]]}return I&&W.push([-1,W[0][1]],[W[z-1][1],-1]),W}(h,l,u);for(var x=new Array(h),p=1,v=0;v<h;++v){for(var g=l[v],y=new Array(c+1),m=0,_=0;_<c;++_){var d=g[_];y[_]=d,m+=d*d}y[c]=m,x[v]=new r(y,v),p=Math.max(m,p)}n(x,a),h=x.length;var S=new Array(h+c+1),w=new Array(h+c+1),E=(c+1)*(c+1)*p,C=new Array(c+1);for(v=0;v<=c;++v)C[v]=0;for(C[c]=E,S[0]=C.slice(),w[0]=-1,v=0;v<=c;++v)(y=C.slice())[v]=1,S[v+1]=y,w[v+1]=-1;for(v=0;v<h;++v){var O=x[v];S[v+c+1]=O.point,w[v+c+1]=O.index}var P=i(S,!1);if(P=u?P.filter(function(z){for(var j=0,I=0;I<=c;++I){var N=w[z[I]];if(N<0&&++j>=2)return!1;z[I]=N}return!0}):P.filter(function(z){for(var j=0;j<=c;++j){var I=w[z[j]];if(I<0)return!1;z[j]=I}return!0}),1&c)for(v=0;v<P.length;++v)y=(O=P[v])[0],O[0]=O[1],O[1]=y;return P}},2361:function(f){var o=!1;if(typeof Float64Array<"u"){var t=new Float64Array(1),i=new Uint32Array(t.buffer);t[0]=1,o=!0,i[1]===1072693248?(f.exports=function(r){return t[0]=r,[i[0],i[1]]},f.exports.pack=function(r,a){return i[0]=r,i[1]=a,t[0]},f.exports.lo=function(r){return t[0]=r,i[0]},f.exports.hi=function(r){return t[0]=r,i[1]}):i[0]===1072693248?(f.exports=function(r){return t[0]=r,[i[1],i[0]]},f.exports.pack=function(r,a){return i[1]=r,i[0]=a,t[0]},f.exports.lo=function(r){return t[0]=r,i[1]},f.exports.hi=function(r){return t[0]=r,i[0]}):o=!1}if(!o){var n=new Buffer(8);f.exports=function(r){return n.writeDoubleLE(r,0,!0),[n.readUInt32LE(0,!0),n.readUInt32LE(4,!0)]},f.exports.pack=function(r,a){return n.writeUInt32LE(r,0,!0),n.writeUInt32LE(a,4,!0),n.readDoubleLE(0,!0)},f.exports.lo=function(r){return n.writeDoubleLE(r,0,!0),n.readUInt32LE(0,!0)},f.exports.hi=function(r){return n.writeDoubleLE(r,0,!0),n.readUInt32LE(4,!0)}}f.exports.sign=function(r){return f.exports.hi(r)>>>31},f.exports.exponent=function(r){return(f.exports.hi(r)<<1>>>21)-1023},f.exports.fraction=function(r){var a=f.exports.lo(r),l=f.exports.hi(r),u=1048575&l;return 2146435072&l&&(u+=1048576),[a,u]},f.exports.denormalized=function(r){return!(2146435072&f.exports.hi(r))}},1338:function(f){function o(t,i,n){var r=0|t[n];if(r<=0)return[];var a,l=new Array(r);if(n===t.length-1)for(a=0;a<r;++a)l[a]=i;else for(a=0;a<r;++a)l[a]=o(t,i,n+1);return l}f.exports=function(t,i){switch(i===void 0&&(i=0),typeof t){case"number":if(t>0)return function(n,r){var a,l;for(a=new Array(n),l=0;l<n;++l)a[l]=r;return a}(0|t,i);break;case"object":if(typeof t.length=="number")return o(t,i,0)}return[]}},3134:function(f,o,t){f.exports=function(n,r){var a=n.length;if(typeof r!="number"){r=0;for(var l=0;l<a;++l){var u=n[l];r=Math.max(r,u[0],u[1])}r=1+(0|r)}r|=0;var h=new Array(r);for(l=0;l<r;++l)h[l]=[];for(l=0;l<a;++l)h[(u=n[l])[0]].push(u[1]),h[u[1]].push(u[0]);for(var c=0;c<r;++c)i(h[c],function(x,p){return x-p});return h};var i=t(1682)},5033:function(f){f.exports=function(o,t,i){var n=t||0,r=i||1;return[[o[12]+o[0],o[13]+o[1],o[14]+o[2],o[15]+o[3]],[o[12]-o[0],o[13]-o[1],o[14]-o[2],o[15]-o[3]],[o[12]+o[4],o[13]+o[5],o[14]+o[6],o[15]+o[7]],[o[12]-o[4],o[13]-o[5],o[14]-o[6],o[15]-o[7]],[n*o[12]+o[8],n*o[13]+o[9],n*o[14]+o[10],n*o[15]+o[11]],[r*o[12]-o[8],r*o[13]-o[9],r*o[14]-o[10],r*o[15]-o[11]]]}},9215:function(f,o,t){f.exports=function(h,c,x){switch(arguments.length){case 0:return new a([0],[0],0);case 1:return typeof h=="number"?new a(p=u(h),p,0):new a(h,u(h.length),0);case 2:var p;if(typeof c=="number")return new a(h,p=u(h.length),+c);x=0;case 3:if(h.length!==c.length)throw new Error("state and velocity lengths must match");return new a(h,c,x)}};var i=t(4769),n=t(2478);function r(h,c,x){return Math.min(c,Math.max(h,x))}function a(h,c,x){this.dimension=h.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var p=0;p<this.dimension;++p)this.bounds[0][p]=-1/0,this.bounds[1][p]=1/0;this._state=h.slice().reverse(),this._velocity=c.slice().reverse(),this._time=[x],this._scratch=[h.slice(),h.slice(),h.slice(),h.slice(),h.slice()]}var l=a.prototype;function u(h){for(var c=new Array(h),x=0;x<h;++x)c[x]=0;return c}l.flush=function(h){var c=n.gt(this._time,h)-1;c<=0||(this._time.splice(0,c),this._state.splice(0,c*this.dimension),this._velocity.splice(0,c*this.dimension))},l.curve=function(h){var c=this._time,x=c.length,p=n.le(c,h),v=this._scratch[0],g=this._state,y=this._velocity,m=this.dimension,_=this.bounds;if(p<0)for(var d=m-1,S=0;S<m;++S,--d)v[S]=g[d];else if(p>=x-1){d=g.length-1;var w=h-c[x-1];for(S=0;S<m;++S,--d)v[S]=g[d]+w*y[d]}else{d=m*(p+1)-1;var E=c[p],C=c[p+1]-E||1,O=this._scratch[1],P=this._scratch[2],z=this._scratch[3],j=this._scratch[4],I=!0;for(S=0;S<m;++S,--d)O[S]=g[d],z[S]=y[d]*C,P[S]=g[d+m],j[S]=y[d+m]*C,I=I&&O[S]===P[S]&&z[S]===j[S]&&z[S]===0;if(I)for(S=0;S<m;++S)v[S]=O[S];else i(O,z,P,j,(h-E)/C,v)}var N=_[0],W=_[1];for(S=0;S<m;++S)v[S]=r(N[S],W[S],v[S]);return v},l.dcurve=function(h){var c=this._time,x=c.length,p=n.le(c,h),v=this._scratch[0],g=this._state,y=this._velocity,m=this.dimension;if(p>=x-1)for(var _=g.length-1,d=(c[x-1],0);d<m;++d,--_)v[d]=y[_];else{_=m*(p+1)-1;var S=c[p],w=c[p+1]-S||1,E=this._scratch[1],C=this._scratch[2],O=this._scratch[3],P=this._scratch[4],z=!0;for(d=0;d<m;++d,--_)E[d]=g[_],O[d]=y[_]*w,C[d]=g[_+m],P[d]=y[_+m]*w,z=z&&E[d]===C[d]&&O[d]===P[d]&&O[d]===0;if(z)for(d=0;d<m;++d)v[d]=0;else for(i.derivative(E,O,C,P,(h-S)/w,v),d=0;d<m;++d)v[d]/=w}return v},l.lastT=function(){var h=this._time;return h[h.length-1]},l.stable=function(){for(var h=this._velocity,c=h.length,x=this.dimension-1;x>=0;--x)if(h[--c])return!1;return!0},l.jump=function(h){var c=this.lastT(),x=this.dimension;if(!(h<c||arguments.length!==x+1)){var p=this._state,v=this._velocity,g=p.length-this.dimension,y=this.bounds,m=y[0],_=y[1];this._time.push(c,h);for(var d=0;d<2;++d)for(var S=0;S<x;++S)p.push(p[g++]),v.push(0);for(this._time.push(h),S=x;S>0;--S)p.push(r(m[S-1],_[S-1],arguments[S])),v.push(0)}},l.push=function(h){var c=this.lastT(),x=this.dimension;if(!(h<c||arguments.length!==x+1)){var p=this._state,v=this._velocity,g=p.length-this.dimension,y=h-c,m=this.bounds,_=m[0],d=m[1],S=y>1e-6?1/y:0;this._time.push(h);for(var w=x;w>0;--w){var E=r(_[w-1],d[w-1],arguments[w]);p.push(E),v.push((E-p[g++])*S)}}},l.set=function(h){var c=this.dimension;if(!(h<this.lastT()||arguments.length!==c+1)){var x=this._state,p=this._velocity,v=this.bounds,g=v[0],y=v[1];this._time.push(h);for(var m=c;m>0;--m)x.push(r(g[m-1],y[m-1],arguments[m])),p.push(0)}},l.move=function(h){var c=this.lastT(),x=this.dimension;if(!(h<=c||arguments.length!==x+1)){var p=this._state,v=this._velocity,g=p.length-this.dimension,y=this.bounds,m=y[0],_=y[1],d=h-c,S=d>1e-6?1/d:0;this._time.push(h);for(var w=x;w>0;--w){var E=arguments[w];p.push(r(m[w-1],_[w-1],p[g++]+E)),v.push(E*S)}}},l.idle=function(h){var c=this.lastT();if(!(h<c)){var x=this.dimension,p=this._state,v=this._velocity,g=p.length-x,y=this.bounds,m=y[0],_=y[1],d=h-c;this._time.push(h);for(var S=x-1;S>=0;--S)p.push(r(m[S],_[S],p[g]+d*v[g])),v.push(0),g+=1}}},3840:function(f){function o(g,y,m,_,d,S){this._color=g,this.key=y,this.value=m,this.left=_,this.right=d,this._count=S}function t(g){return new o(g._color,g.key,g.value,g.left,g.right,g._count)}function i(g,y){return new o(g,y.key,y.value,y.left,y.right,y._count)}function n(g){g._count=1+(g.left?g.left._count:0)+(g.right?g.right._count:0)}function r(g,y){this._compare=g,this.root=y}f.exports=function(g){return new r(g||v,null)};var a=r.prototype;function l(g,y){var m;return y.left&&(m=l(g,y.left))?m:(m=g(y.key,y.value))||(y.right?l(g,y.right):void 0)}function u(g,y,m,_){if(y(g,_.key)<=0){var d;if(_.left&&(d=u(g,y,m,_.left))||(d=m(_.key,_.value)))return d}if(_.right)return u(g,y,m,_.right)}function h(g,y,m,_,d){var S,w=m(g,d.key),E=m(y,d.key);if(w<=0&&(d.left&&(S=h(g,y,m,_,d.left))||E>0&&(S=_(d.key,d.value))))return S;if(E>0&&d.right)return h(g,y,m,_,d.right)}function c(g,y){this.tree=g,this._stack=y}Object.defineProperty(a,"keys",{get:function(){var g=[];return this.forEach(function(y,m){g.push(y)}),g}}),Object.defineProperty(a,"values",{get:function(){var g=[];return this.forEach(function(y,m){g.push(m)}),g}}),Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}}),a.insert=function(g,y){for(var m=this._compare,_=this.root,d=[],S=[];_;){var w=m(g,_.key);d.push(_),S.push(w),_=w<=0?_.left:_.right}d.push(new o(0,g,y,null,null,1));for(var E=d.length-2;E>=0;--E)_=d[E],S[E]<=0?d[E]=new o(_._color,_.key,_.value,d[E+1],_.right,_._count+1):d[E]=new o(_._color,_.key,_.value,_.left,d[E+1],_._count+1);for(E=d.length-1;E>1;--E){var C=d[E-1];if(_=d[E],C._color===1||_._color===1)break;var O=d[E-2];if(O.left===C)if(C.left===_){if(!(P=O.right)||P._color!==0){O._color=0,O.left=C.right,C._color=1,C.right=O,d[E-2]=C,d[E-1]=_,n(O),n(C),E>=3&&((z=d[E-3]).left===O?z.left=C:z.right=C);break}C._color=1,O.right=i(1,P),O._color=0,E-=1}else{if(!(P=O.right)||P._color!==0){C.right=_.left,O._color=0,O.left=_.right,_._color=1,_.left=C,_.right=O,d[E-2]=_,d[E-1]=C,n(O),n(C),n(_),E>=3&&((z=d[E-3]).left===O?z.left=_:z.right=_);break}C._color=1,O.right=i(1,P),O._color=0,E-=1}else if(C.right===_){if(!(P=O.left)||P._color!==0){O._color=0,O.right=C.left,C._color=1,C.left=O,d[E-2]=C,d[E-1]=_,n(O),n(C),E>=3&&((z=d[E-3]).right===O?z.right=C:z.left=C);break}C._color=1,O.left=i(1,P),O._color=0,E-=1}else{var P;if(!(P=O.left)||P._color!==0){var z;C.left=_.right,O._color=0,O.right=_.left,_._color=1,_.right=C,_.left=O,d[E-2]=_,d[E-1]=C,n(O),n(C),n(_),E>=3&&((z=d[E-3]).right===O?z.right=_:z.left=_);break}C._color=1,O.left=i(1,P),O._color=0,E-=1}}return d[0]._color=1,new r(m,d[0])},a.forEach=function(g,y,m){if(this.root)switch(arguments.length){case 1:return l(g,this.root);case 2:return u(y,this._compare,g,this.root);case 3:return this._compare(y,m)>=0?void 0:h(y,m,this._compare,g,this.root)}},Object.defineProperty(a,"begin",{get:function(){for(var g=[],y=this.root;y;)g.push(y),y=y.left;return new c(this,g)}}),Object.defineProperty(a,"end",{get:function(){for(var g=[],y=this.root;y;)g.push(y),y=y.right;return new c(this,g)}}),a.at=function(g){if(g<0)return new c(this,[]);for(var y=this.root,m=[];;){if(m.push(y),y.left){if(g<y.left._count){y=y.left;continue}g-=y.left._count}if(!g)return new c(this,m);if(g-=1,!y.right||g>=y.right._count)break;y=y.right}return new c(this,[])},a.ge=function(g){for(var y=this._compare,m=this.root,_=[],d=0;m;){var S=y(g,m.key);_.push(m),S<=0&&(d=_.length),m=S<=0?m.left:m.right}return _.length=d,new c(this,_)},a.gt=function(g){for(var y=this._compare,m=this.root,_=[],d=0;m;){var S=y(g,m.key);_.push(m),S<0&&(d=_.length),m=S<0?m.left:m.right}return _.length=d,new c(this,_)},a.lt=function(g){for(var y=this._compare,m=this.root,_=[],d=0;m;){var S=y(g,m.key);_.push(m),S>0&&(d=_.length),m=S<=0?m.left:m.right}return _.length=d,new c(this,_)},a.le=function(g){for(var y=this._compare,m=this.root,_=[],d=0;m;){var S=y(g,m.key);_.push(m),S>=0&&(d=_.length),m=S<0?m.left:m.right}return _.length=d,new c(this,_)},a.find=function(g){for(var y=this._compare,m=this.root,_=[];m;){var d=y(g,m.key);if(_.push(m),d===0)return new c(this,_);m=d<=0?m.left:m.right}return new c(this,[])},a.remove=function(g){var y=this.find(g);return y?y.remove():this},a.get=function(g){for(var y=this._compare,m=this.root;m;){var _=y(g,m.key);if(_===0)return m.value;m=_<=0?m.left:m.right}};var x=c.prototype;function p(g,y){g.key=y.key,g.value=y.value,g.left=y.left,g.right=y.right,g._color=y._color,g._count=y._count}function v(g,y){return g<y?-1:g>y?1:0}Object.defineProperty(x,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(x,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),x.clone=function(){return new c(this.tree,this._stack.slice())},x.remove=function(){var g=this._stack;if(g.length===0)return this.tree;var y=new Array(g.length),m=g[g.length-1];y[y.length-1]=new o(m._color,m.key,m.value,m.left,m.right,m._count);for(var _=g.length-2;_>=0;--_)(m=g[_]).left===g[_+1]?y[_]=new o(m._color,m.key,m.value,y[_+1],m.right,m._count):y[_]=new o(m._color,m.key,m.value,m.left,y[_+1],m._count);if((m=y[y.length-1]).left&&m.right){var d=y.length;for(m=m.left;m.right;)y.push(m),m=m.right;var S=y[d-1];for(y.push(new o(m._color,S.key,S.value,m.left,m.right,m._count)),y[d-1].key=m.key,y[d-1].value=m.value,_=y.length-2;_>=d;--_)m=y[_],y[_]=new o(m._color,m.key,m.value,m.left,y[_+1],m._count);y[d-1].left=y[d]}if((m=y[y.length-1])._color===0){var w=y[y.length-2];for(w.left===m?w.left=null:w.right===m&&(w.right=null),y.pop(),_=0;_<y.length;++_)y[_]._count--;return new r(this.tree._compare,y[0])}if(m.left||m.right){for(m.left?p(m,m.left):m.right&&p(m,m.right),m._color=1,_=0;_<y.length-1;++_)y[_]._count--;return new r(this.tree._compare,y[0])}if(y.length===1)return new r(this.tree._compare,null);for(_=0;_<y.length;++_)y[_]._count--;var E=y[y.length-2];return function(C){for(var O,P,z,j,I=C.length-1;I>=0;--I){if(O=C[I],I===0)return void(O._color=1);if((P=C[I-1]).left===O){if((z=P.right).right&&z.right._color===0)return j=(z=P.right=t(z)).right=t(z.right),P.right=z.left,z.left=P,z.right=j,z._color=P._color,O._color=1,P._color=1,j._color=1,n(P),n(z),I>1&&((N=C[I-2]).left===P?N.left=z:N.right=z),void(C[I-1]=z);if(z.left&&z.left._color===0)return j=(z=P.right=t(z)).left=t(z.left),P.right=j.left,z.left=j.right,j.left=P,j.right=z,j._color=P._color,P._color=1,z._color=1,O._color=1,n(P),n(z),n(j),I>1&&((N=C[I-2]).left===P?N.left=j:N.right=j),void(C[I-1]=j);if(z._color===1){if(P._color===0)return P._color=1,void(P.right=i(0,z));P.right=i(0,z);continue}z=t(z),P.right=z.left,z.left=P,z._color=P._color,P._color=0,n(P),n(z),I>1&&((N=C[I-2]).left===P?N.left=z:N.right=z),C[I-1]=z,C[I]=P,I+1<C.length?C[I+1]=O:C.push(O),I+=2}else{if((z=P.left).left&&z.left._color===0)return j=(z=P.left=t(z)).left=t(z.left),P.left=z.right,z.right=P,z.left=j,z._color=P._color,O._color=1,P._color=1,j._color=1,n(P),n(z),I>1&&((N=C[I-2]).right===P?N.right=z:N.left=z),void(C[I-1]=z);if(z.right&&z.right._color===0)return j=(z=P.left=t(z)).right=t(z.right),P.left=j.right,z.right=j.left,j.right=P,j.left=z,j._color=P._color,P._color=1,z._color=1,O._color=1,n(P),n(z),n(j),I>1&&((N=C[I-2]).right===P?N.right=j:N.left=j),void(C[I-1]=j);if(z._color===1){if(P._color===0)return P._color=1,void(P.left=i(0,z));P.left=i(0,z);continue}var N;z=t(z),P.left=z.right,z.right=P,z._color=P._color,P._color=0,n(P),n(z),I>1&&((N=C[I-2]).right===P?N.right=z:N.left=z),C[I-1]=z,C[I]=P,I+1<C.length?C[I+1]=O:C.push(O),I+=2}}}(y),E.left===m?E.left=null:E.right=null,new r(this.tree._compare,y[0])},Object.defineProperty(x,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(x,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(x,"index",{get:function(){var g=0,y=this._stack;if(y.length===0){var m=this.tree.root;return m?m._count:0}y[y.length-1].left&&(g=y[y.length-1].left._count);for(var _=y.length-2;_>=0;--_)y[_+1]===y[_].right&&(++g,y[_].left&&(g+=y[_].left._count));return g},enumerable:!0}),x.next=function(){var g=this._stack;if(g.length!==0){var y=g[g.length-1];if(y.right)for(y=y.right;y;)g.push(y),y=y.left;else for(g.pop();g.length>0&&g[g.length-1].right===y;)y=g[g.length-1],g.pop()}},Object.defineProperty(x,"hasNext",{get:function(){var g=this._stack;if(g.length===0)return!1;if(g[g.length-1].right)return!0;for(var y=g.length-1;y>0;--y)if(g[y-1].left===g[y])return!0;return!1}}),x.update=function(g){var y=this._stack;if(y.length===0)throw new Error("Can't update empty node!");var m=new Array(y.length),_=y[y.length-1];m[m.length-1]=new o(_._color,_.key,g,_.left,_.right,_._count);for(var d=y.length-2;d>=0;--d)(_=y[d]).left===y[d+1]?m[d]=new o(_._color,_.key,_.value,m[d+1],_.right,_._count):m[d]=new o(_._color,_.key,_.value,_.left,m[d+1],_._count);return new r(this.tree._compare,m[0])},x.prev=function(){var g=this._stack;if(g.length!==0){var y=g[g.length-1];if(y.left)for(y=y.left;y;)g.push(y),y=y.right;else for(g.pop();g.length>0&&g[g.length-1].left===y;)y=g[g.length-1],g.pop()}},Object.defineProperty(x,"hasPrev",{get:function(){var g=this._stack;if(g.length===0)return!1;if(g[g.length-1].left)return!0;for(var y=g.length-1;y>0;--y)if(g[y-1].right===g[y])return!0;return!1}})},3837:function(f,o,t){f.exports=function(O,P){var z=new v(O);return z.update(P),z};var i=t(4935),n=t(501),r=t(5304),a=t(6429),l=t(6444),u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),h=ArrayBuffer,c=DataView;function x(O){return Array.isArray(O)||function(P){return h.isView(P)&&!(P instanceof c)}(O)}function p(O,P){return O[0]=P[0],O[1]=P[1],O[2]=P[2],O}function v(O){this.gl=O,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickFontStyle=["normal","normal","normal"],this.tickFontWeight=["normal","normal","normal"],this.tickFontVariant=["normal","normal","normal"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["sans-serif","sans-serif","sans-serif"],this.labelFontStyle=["normal","normal","normal"],this.labelFontWeight=["normal","normal","normal"],this.labelFontVariant=["normal","normal","normal"],this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=r(O)}var g=v.prototype;function y(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}g.update=function(O){function P(X,te,ae){if(ae in O){var se,ce=O[ae],fe=this[ae];(X?x(ce)&&x(ce[0]):x(ce))?this[ae]=se=[te(ce[0]),te(ce[1]),te(ce[2])]:this[ae]=se=[te(ce),te(ce),te(ce)];for(var pe=0;pe<3;++pe)if(se[pe]!==fe[pe])return!0}return!1}O=O||{};var z,j=P.bind(this,!1,Number),I=P.bind(this,!1,Boolean),N=P.bind(this,!1,String),W=P.bind(this,!0,function(X){if(x(X)){if(X.length===3)return[+X[0],+X[1],+X[2],1];if(X.length===4)return[+X[0],+X[1],+X[2],+X[3]]}return[0,0,0,1]}),F=!1,U=!1;if("bounds"in O)for(var H=O.bounds,ne=0;ne<2;++ne)for(var $=0;$<3;++$)H[ne][$]!==this.bounds[ne][$]&&(U=!0),this.bounds[ne][$]=H[ne][$];if("ticks"in O)for(z=O.ticks,F=!0,this.autoTicks=!1,ne=0;ne<3;++ne)this.tickSpacing[ne]=0;else j("tickSpacing")&&(this.autoTicks=!0,U=!0);if(this._firstInit&&("ticks"in O||"tickSpacing"in O||(this.autoTicks=!0),U=!0,F=!0,this._firstInit=!1),U&&this.autoTicks&&(z=l.create(this.bounds,this.tickSpacing),F=!0),F){for(ne=0;ne<3;++ne)z[ne].sort(function(X,te){return X.x-te.x});l.equal(z,this.ticks)?F=!1:this.ticks=z}I("tickEnable"),N("tickFont")&&(F=!0),N("tickFontStyle")&&(F=!0),N("tickFontWeight")&&(F=!0),N("tickFontVariant")&&(F=!0),j("tickSize"),j("tickAngle"),j("tickPad"),W("tickColor");var K=N("labels");N("labelFont")&&(K=!0),N("labelFontStyle")&&(K=!0),N("labelFontWeight")&&(K=!0),N("labelFontVariant")&&(K=!0),I("labelEnable"),j("labelSize"),j("labelPad"),W("labelColor"),I("lineEnable"),I("lineMirror"),j("lineWidth"),W("lineColor"),I("lineTickEnable"),I("lineTickMirror"),j("lineTickLength"),j("lineTickWidth"),W("lineTickColor"),I("gridEnable"),j("gridWidth"),W("gridColor"),I("zeroEnable"),W("zeroLineColor"),j("zeroLineWidth"),I("backgroundEnable"),W("backgroundColor");var Q=[{family:this.labelFont[0],style:this.labelFontStyle[0],weight:this.labelFontWeight[0],variant:this.labelFontVariant[0]},{family:this.labelFont[1],style:this.labelFontStyle[1],weight:this.labelFontWeight[1],variant:this.labelFontVariant[1]},{family:this.labelFont[2],style:this.labelFontStyle[2],weight:this.labelFontWeight[2],variant:this.labelFontVariant[2]}],Z=[{family:this.tickFont[0],style:this.tickFontStyle[0],weight:this.tickFontWeight[0],variant:this.tickFontVariant[0]},{family:this.tickFont[1],style:this.tickFontStyle[1],weight:this.tickFontWeight[1],variant:this.tickFontVariant[1]},{family:this.tickFont[2],style:this.tickFontStyle[2],weight:this.tickFontWeight[2],variant:this.tickFontVariant[2]}];this._text?this._text&&(K||F)&&this._text.update(this.bounds,this.labels,Q,this.ticks,Z):this._text=i(this.gl,this.bounds,this.labels,Q,this.ticks,Z),this._lines&&F&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=n(this.gl,this.bounds,this.ticks))};var m=[new y,new y,new y];function _(O,P,z,j,I){for(var N=O.primalOffset,W=O.primalMinor,F=O.mirrorOffset,U=O.mirrorMinor,H=j[P],ne=0;ne<3;++ne)if(P!==ne){var $=N,K=F,Q=W,Z=U;H&1<<ne&&($=F,K=N,Q=U,Z=W),$[ne]=z[0][ne],K[ne]=z[1][ne],I[ne]>0?(Q[ne]=-1,Z[ne]=0):(Q[ne]=0,Z[ne]=1)}}var d=[0,0,0],S={model:u,view:u,projection:u,_ortho:!1};g.isOpaque=function(){return!0},g.isTransparent=function(){return!1},g.drawTransparent=function(O){};var w=[0,0,0],E=[0,0,0],C=[0,0,0];g.draw=function(O){O=O||S;for(var P=this.gl,z=O.model||u,j=O.view||u,I=O.projection||u,N=this.bounds,W=O._ortho||!1,F=a(z,j,I,N,W),U=F.cubeEdges,H=F.axis,ne=j[12],$=j[13],K=j[14],Q=j[15],Z=(W?2:1)*this.pixelRatio*(I[3]*ne+I[7]*$+I[11]*K+I[15]*Q)/P.drawingBufferHeight,X=0;X<3;++X)this.lastCubeProps.cubeEdges[X]=U[X],this.lastCubeProps.axis[X]=H[X];var te=m;for(X=0;X<3;++X)_(m[X],X,this.bounds,U,H);P=this.gl;var ae,se,ce,fe=d;for(X=0;X<3;++X)this.backgroundEnable[X]?fe[X]=H[X]:fe[X]=0;for(this._background.draw(z,j,I,N,fe,this.backgroundColor),this._lines.bind(z,j,I,this),X=0;X<3;++X){var pe=[0,0,0];H[X]>0?pe[X]=N[1][X]:pe[X]=N[0][X];for(var ge=0;ge<2;++ge){var me=(X+1+ge)%3,be=(X+1+(1^ge))%3;this.gridEnable[me]&&this._lines.drawGrid(me,be,this.bounds,pe,this.gridColor[me],this.gridWidth[me]*this.pixelRatio)}for(ge=0;ge<2;++ge)me=(X+1+ge)%3,be=(X+1+(1^ge))%3,this.zeroEnable[be]&&Math.min(N[0][be],N[1][be])<=0&&Math.max(N[0][be],N[1][be])>=0&&this._lines.drawZero(me,be,this.bounds,pe,this.zeroLineColor[be],this.zeroLineWidth[be]*this.pixelRatio)}for(X=0;X<3;++X){this.lineEnable[X]&&this._lines.drawAxisLine(X,this.bounds,te[X].primalOffset,this.lineColor[X],this.lineWidth[X]*this.pixelRatio),this.lineMirror[X]&&this._lines.drawAxisLine(X,this.bounds,te[X].mirrorOffset,this.lineColor[X],this.lineWidth[X]*this.pixelRatio);var ke=p(w,te[X].primalMinor),ze=p(E,te[X].mirrorMinor),ve=this.lineTickLength;for(ge=0;ge<3;++ge){var oe=Z/z[5*ge];ke[ge]*=ve[ge]*oe,ze[ge]*=ve[ge]*oe}this.lineTickEnable[X]&&this._lines.drawAxisTicks(X,te[X].primalOffset,ke,this.lineTickColor[X],this.lineTickWidth[X]*this.pixelRatio),this.lineTickMirror[X]&&this._lines.drawAxisTicks(X,te[X].mirrorOffset,ze,this.lineTickColor[X],this.lineTickWidth[X]*this.pixelRatio)}function ie(Oe){(ce=[0,0,0])[Oe]=1}function he(Oe,Ie,de){var _e=(Oe+1)%3,Ae=(Oe+2)%3,Pe=Ie[_e],Ee=Ie[Ae],Fe=de[_e],Ve=de[Ae];Pe>0&&Ve>0||Pe>0&&Ve<0||Pe<0&&Ve>0||Pe<0&&Ve<0?ie(_e):(Ee>0&&Fe>0||Ee>0&&Fe<0||Ee<0&&Fe>0||Ee<0&&Fe<0)&&ie(Ae)}for(this._lines.unbind(),this._text.bind(z,j,I,this.pixelRatio),X=0;X<3;++X){var Se=te[X].primalMinor,ye=te[X].mirrorMinor,we=p(C,te[X].primalOffset);for(ge=0;ge<3;++ge)this.lineTickEnable[X]&&(we[ge]+=Z*Se[ge]*Math.max(this.lineTickLength[ge],0)/z[5*ge]);var Me=[0,0,0];if(Me[X]=1,this.tickEnable[X]){for(this.tickAngle[X]===-3600?(this.tickAngle[X]=0,this.tickAlign[X]="auto"):this.tickAlign[X]=-1,se=1,(ae=[this.tickAlign[X],.5,se])[0]==="auto"?ae[0]=0:ae[0]=parseInt(""+ae[0]),ce=[0,0,0],he(X,Se,ye),ge=0;ge<3;++ge)we[ge]+=Z*Se[ge]*this.tickPad[ge]/z[5*ge];this._text.drawTicks(X,this.tickSize[X],this.tickAngle[X],we,this.tickColor[X],Me,ce,ae)}if(this.labelEnable[X]){for(se=0,ce=[0,0,0],this.labels[X].length>4&&(ie(X),se=1),(ae=[this.labelAlign[X],.5,se])[0]==="auto"?ae[0]=0:ae[0]=parseInt(""+ae[0]),ge=0;ge<3;++ge)we[ge]+=Z*Se[ge]*this.labelPad[ge]/z[5*ge];we[X]+=.5*(N[0][X]+N[1][X]),this._text.drawLabel(X,this.labelSize[X],this.labelAngle[X],we,this.labelColor[X],[0,0,0],ce,ae)}}this._text.unbind()},g.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},5304:function(f,o,t){f.exports=function(u){for(var h=[],c=[],x=0,p=0;p<3;++p)for(var v=(p+1)%3,g=(p+2)%3,y=[0,0,0],m=[0,0,0],_=-1;_<=1;_+=2){c.push(x,x+2,x+1,x+1,x+2,x+3),y[p]=_,m[p]=_;for(var d=-1;d<=1;d+=2){y[v]=d;for(var S=-1;S<=1;S+=2)y[g]=S,h.push(y[0],y[1],y[2],m[0],m[1],m[2]),x+=1}var w=v;v=g,g=w}var E=i(u,new Float32Array(h)),C=i(u,new Uint16Array(c),u.ELEMENT_ARRAY_BUFFER),O=n(u,[{buffer:E,type:u.FLOAT,size:3,offset:0,stride:24},{buffer:E,type:u.FLOAT,size:3,offset:12,stride:24}],C),P=r(u);return P.attributes.position.location=0,P.attributes.normal.location=1,new a(u,E,O,P)};var i=t(2762),n=t(8116),r=t(1879).bg;function a(u,h,c,x){this.gl=u,this.buffer=h,this.vao=c,this.shader=x}var l=a.prototype;l.draw=function(u,h,c,x,p,v){for(var g=!1,y=0;y<3;++y)g=g||p[y];if(g){var m=this.gl;m.enable(m.POLYGON_OFFSET_FILL),m.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:u,view:h,projection:c,bounds:x,enable:p,colors:v},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),m.disable(m.POLYGON_OFFSET_FILL)}},l.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},6429:function(f,o,t){f.exports=function(d,S,w,E,C){n(l,S,d),n(l,w,l);for(var O=0,P=0;P<2;++P){c[2]=E[P][2];for(var z=0;z<2;++z){c[1]=E[z][1];for(var j=0;j<2;++j)c[0]=E[j][0],p(u[O],c,l),O+=1}}var I=-1;for(P=0;P<8;++P){for(var N=u[P][3],W=0;W<3;++W)h[P][W]=u[P][W]/N;C&&(h[P][2]*=-1),N<0&&(I<0||h[P][2]<h[I][2])&&(I=P)}if(I<0){I=0;for(var F=0;F<3;++F){for(var U=(F+2)%3,H=(F+1)%3,ne=-1,$=-1,K=0;K<2;++K){var Q=(X=K<<F)+(K<<U)+(1-K<<H),Z=X+(1-K<<U)+(K<<H);a(h[X],h[Q],h[Z],x)<0||(K?ne=1:$=1)}if(ne<0||$<0)$>ne&&(I|=1<<F);else{for(K=0;K<2;++K){Q=(X=K<<F)+(K<<U)+(1-K<<H),Z=X+(1-K<<U)+(K<<H);var X,te=g([u[X],u[Q],u[Z],u[X+(1<<U)+(1<<H)]]);K?ne=te:$=te}$>ne&&(I|=1<<F)}}}var ae=7^I,se=-1;for(P=0;P<8;++P)P!==I&&P!==ae&&(se<0||h[se][1]>h[P][1])&&(se=P);var ce=-1;for(P=0;P<3;++P)(pe=se^1<<P)!==I&&pe!==ae&&(ce<0&&(ce=pe),(H=h[pe])[0]<h[ce][0]&&(ce=pe));var fe=-1;for(P=0;P<3;++P){var pe;(pe=se^1<<P)!==I&&pe!==ae&&pe!==ce&&(fe<0&&(fe=pe),(H=h[pe])[0]>h[fe][0]&&(fe=pe))}var ge=y;ge[0]=ge[1]=ge[2]=0,ge[i.log2(ce^se)]=se&ce,ge[i.log2(se^fe)]=se&fe;var me=7^fe;me===I||me===ae?(me=7^ce,ge[i.log2(fe^me)]=me&fe):ge[i.log2(ce^me)]=me&ce;var be=m,ke=I;for(F=0;F<3;++F)be[F]=ke&1<<F?-1:1;return _};var i=t(8828),n=t(6760),r=t(5202),a=t(3250),l=new Array(16),u=new Array(8),h=new Array(8),c=new Array(3),x=[0,0,0];function p(d,S,w){for(var E=0;E<4;++E){d[E]=w[12+E];for(var C=0;C<3;++C)d[E]+=S[C]*w[4*C+E]}}(function(){for(var d=0;d<8;++d)u[d]=[1,1,1,1],h[d]=[1,1,1]})();var v=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function g(d){for(var S=0;S<v.length;++S)if((d=r.positive(d,v[S])).length<3)return 0;var w=d[0],E=w[0]/w[3],C=w[1]/w[3],O=0;for(S=1;S+1<d.length;++S){var P=d[S],z=d[S+1],j=P[0]/P[3]-E,I=P[1]/P[3]-C,N=z[0]/z[3]-E,W=z[1]/z[3]-C;O+=Math.abs(j*W-I*N)}return O}var y=[1,1,1],m=[0,0,0],_={cubeEdges:y,axis:m}},501:function(f,o,t){f.exports=function(y,m,_){var d=[],S=[0,0,0],w=[0,0,0],E=[0,0,0],C=[0,0,0];d.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var O=0;O<3;++O){for(var P=d.length/3|0,z=0;z<_[O].length;++z){var j=+_[O][z].x;d.push(j,0,1,j,1,1,j,0,-1,j,0,-1,j,1,1,j,1,-1)}var I=d.length/3|0;S[O]=P,w[O]=I-P,P=d.length/3|0;for(var N=0;N<_[O].length;++N)j=+_[O][N].x,d.push(j,0,1,j,1,1,j,0,-1,j,0,-1,j,1,1,j,1,-1);I=d.length/3|0,E[O]=P,C[O]=I-P}var W=i(y,new Float32Array(d)),F=n(y,[{buffer:W,type:y.FLOAT,size:3,stride:0,offset:0}]),U=r(y);return U.attributes.position.location=0,new v(y,W,F,U,w,S,C,E)};var i=t(2762),n=t(8116),r=t(1879).n,a=[0,0,0],l=[0,0,0],u=[0,0,0],h=[0,0,0],c=[1,1];function x(y){return y[0]=y[1]=y[2]=0,y}function p(y,m){return y[0]=m[0],y[1]=m[1],y[2]=m[2],y}function v(y,m,_,d,S,w,E,C){this.gl=y,this.vertBuffer=m,this.vao=_,this.shader=d,this.tickCount=S,this.tickOffset=w,this.gridCount=E,this.gridOffset=C}var g=v.prototype;g.bind=function(y,m,_){this.shader.bind(),this.shader.uniforms.model=y,this.shader.uniforms.view=m,this.shader.uniforms.projection=_,c[0]=this.gl.drawingBufferWidth,c[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=c,this.vao.bind()},g.unbind=function(){this.vao.unbind()},g.drawAxisLine=function(y,m,_,d,S){var w=x(l);this.shader.uniforms.majorAxis=l,w[y]=m[1][y]-m[0][y],this.shader.uniforms.minorAxis=w;var E,C=p(h,_);C[y]+=m[0][y],this.shader.uniforms.offset=C,this.shader.uniforms.lineWidth=S,this.shader.uniforms.color=d,(E=x(u))[(y+2)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6),(E=x(u))[(y+1)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6)},g.drawAxisTicks=function(y,m,_,d,S){if(this.tickCount[y]){var w=x(a);w[y]=1,this.shader.uniforms.majorAxis=w,this.shader.uniforms.offset=m,this.shader.uniforms.minorAxis=_,this.shader.uniforms.color=d,this.shader.uniforms.lineWidth=S;var E=x(u);E[y]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,this.tickCount[y],this.tickOffset[y])}},g.drawGrid=function(y,m,_,d,S,w){if(this.gridCount[y]){var E=x(l);E[m]=_[1][m]-_[0][m],this.shader.uniforms.minorAxis=E;var C=p(h,d);C[m]+=_[0][m],this.shader.uniforms.offset=C;var O=x(a);O[y]=1,this.shader.uniforms.majorAxis=O;var P=x(u);P[y]=1,this.shader.uniforms.screenAxis=P,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,this.gridCount[y],this.gridOffset[y])}},g.drawZero=function(y,m,_,d,S,w){var E=x(l);this.shader.uniforms.majorAxis=E,E[y]=_[1][y]-_[0][y],this.shader.uniforms.minorAxis=E;var C=p(h,d);C[y]+=_[0][y],this.shader.uniforms.offset=C;var O=x(u);O[m]=1,this.shader.uniforms.screenAxis=O,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,6)},g.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1879:function(f,o,t){var i=t(3236),n=t(9405),r=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * (view * (model * vec4(p, 1.0)));
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),a=i([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);o.n=function(x){return n(x,r,a,null,[{name:"position",type:"vec3"}])};var l=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * (view * (model * vec4(p, 1.0)));
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}
`]),u=i([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);o.Q=function(x){return n(x,l,u,null,[{name:"position",type:"vec3"}])};var h=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * (view * (model * vec4(nPosition, 1.0)));
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}
`]),c=i([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);o.bg=function(x){return n(x,h,c,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},4935:function(f,o,t){f.exports=function(p,v,g,y,m,_){var d=i(p),S=n(p,[{buffer:d,size:3}]),w=a(p);w.attributes.position.location=0;var E=new h(p,w,d,S);return E.update(v,g,y,m,_),E};var i=t(2762),n=t(8116),r=t(4359),a=t(1879).Q,l=window||M.global||{},u=l.__TEXT_CACHE||{};function h(p,v,g,y){this.gl=p,this.shader=v,this.buffer=g,this.vao=y,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}l.__TEXT_CACHE={};var c=h.prototype,x=[0,0];c.bind=function(p,v,g,y){this.vao.bind(),this.shader.bind();var m=this.shader.uniforms;m.model=p,m.view=v,m.projection=g,m.pixelScale=y,x[0]=this.gl.drawingBufferWidth,x[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=x},c.unbind=function(){this.vao.unbind()},c.update=function(p,v,g,y,m){var _=[];function d(I,N,W,F,U,H){var ne=[W.style,W.weight,W.variant,W.family].join("_"),$=u[ne];$||($=u[ne]={});var K=$[N];K||(K=$[N]=function(pe,ge){try{return r(pe,ge)}catch(me){return console.warn('error vectorizing text:"'+pe+'" error:',me),{cells:[],positions:[]}}}(N,{triangles:!0,font:W.family,fontStyle:W.style,fontWeight:W.weight,fontVariant:W.variant,textAlign:"center",textBaseline:"middle",lineSpacing:U,styletags:H}));for(var Q=(F||12)/12,Z=K.positions,X=K.cells,te=0,ae=X.length;te<ae;++te)for(var se=X[te],ce=2;ce>=0;--ce){var fe=Z[se[ce]];_.push(Q*fe[0],-Q*fe[1],I)}}for(var S=[0,0,0],w=[0,0,0],E=[0,0,0],C=[0,0,0],O={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},P=0;P<3;++P){E[P]=_.length/3|0,d(.5*(p[0][P]+p[1][P]),v[P],g[P],12,1.25,O),C[P]=(_.length/3|0)-E[P],S[P]=_.length/3|0;for(var z=0;z<y[P].length;++z)if(y[P][z].text){var j={family:y[P][z].font||m[P].family,style:m[P].fontStyle||m[P].style,weight:m[P].fontWeight||m[P].weight,variant:m[P].fontVariant||m[P].variant};d(y[P][z].x,y[P][z].text,j,y[P][z].fontSize||12,1.25,O)}w[P]=(_.length/3|0)-S[P]}this.buffer.update(_),this.tickOffset=S,this.tickCount=w,this.labelOffset=E,this.labelCount=C},c.drawTicks=function(p,v,g,y,m,_,d,S){this.tickCount[p]&&(this.shader.uniforms.axis=_,this.shader.uniforms.color=m,this.shader.uniforms.angle=g,this.shader.uniforms.scale=v,this.shader.uniforms.offset=y,this.shader.uniforms.alignDir=d,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.tickCount[p],this.tickOffset[p]))},c.drawLabel=function(p,v,g,y,m,_,d,S){this.labelCount[p]&&(this.shader.uniforms.axis=_,this.shader.uniforms.color=m,this.shader.uniforms.angle=g,this.shader.uniforms.scale=v,this.shader.uniforms.offset=y,this.shader.uniforms.alignDir=d,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.labelCount[p],this.labelOffset[p]))},c.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},6444:function(f,o){function t(i,n){var r=i+"",a=r.indexOf("."),l=0;a>=0&&(l=r.length-a-1);var u=Math.pow(10,l),h=Math.round(i*n*u),c=h+"";if(c.indexOf("e")>=0)return c;var x=h/u,p=h%u;h<0?(x=0|-Math.ceil(x),p=0|-p):(x=0|Math.floor(x),p|=0);var v=""+x;if(h<0&&(v="-"+v),l){for(var g=""+p;g.length<l;)g="0"+g;return v+"."+g}return v}o.create=function(i,n){for(var r=[],a=0;a<3;++a){for(var l=[],u=(i[0][a],i[1][a],0);u*n[a]<=i[1][a];++u)l.push({x:u*n[a],text:t(n[a],u)});for(u=-1;u*n[a]>=i[0][a];--u)l.push({x:u*n[a],text:t(n[a],u)});r.push(l)}return r},o.equal=function(i,n){for(var r=0;r<3;++r){if(i[r].length!==n[r].length)return!1;for(var a=0;a<i[r].length;++a){var l=i[r][a],u=n[r][a];if(l.x!==u.x||l.text!==u.text||l.font!==u.font||l.fontColor!==u.fontColor||l.fontSize!==u.fontSize||l.dx!==u.dx||l.dy!==u.dy)return!1}}return!0}},5445:function(f,o,t){f.exports=function(_,d,S,w,E){var C=d.model||h,O=d.view||h,P=d.projection||h,z=d._ortho||!1,j=_.bounds,I=(E=E||r(C,O,P,j,z)).axis;a(c,O,C),a(c,P,c);for(var N=y,W=0;W<3;++W)N[W].lo=1/0,N[W].hi=-1/0,N[W].pixelsPerDataUnit=1/0;var F=i(l(c,c));l(c,c);for(var U=0;U<3;++U){var H=(U+1)%3,ne=(U+2)%3,$=m;e:for(W=0;W<2;++W){var K=[];if(I[U]<0!=!!W){$[U]=j[W][U];for(var Q=0;Q<2;++Q){$[H]=j[Q^W][H];for(var Z=0;Z<2;++Z)$[ne]=j[Z^Q^W][ne],K.push($.slice())}var X=z?5:4;for(Q=X;Q===X;++Q){if(K.length===0)continue e;K=n.positive(K,F[Q])}for(Q=0;Q<K.length;++Q){ne=K[Q];var te=g(m,c,ne,S,w);for(Z=0;Z<3;++Z)N[Z].lo=Math.min(N[Z].lo,ne[Z]),N[Z].hi=Math.max(N[Z].hi,ne[Z]),Z!==U&&(N[Z].pixelsPerDataUnit=Math.min(N[Z].pixelsPerDataUnit,Math.abs(te[Z])))}}}}return N};var i=t(5033),n=t(5202),r=t(6429),a=t(6760),l=t(5665),u=t(5352),h=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),c=new Float32Array(16);function x(_,d,S){this.lo=_,this.hi=d,this.pixelsPerDataUnit=S}var p=[0,0,0,1],v=[0,0,0,1];function g(_,d,S,w,E){for(var C=0;C<3;++C){for(var O=p,P=v,z=0;z<3;++z)P[z]=O[z]=S[z];P[3]=O[3]=1,P[C]+=1,u(P,P,d),P[3]<0&&(_[C]=1/0),O[C]-=1,u(O,O,d),O[3]<0&&(_[C]=1/0);var j=(O[0]/O[3]-P[0]/P[3])*w,I=(O[1]/O[3]-P[1]/P[3])*E;_[C]=.25*Math.sqrt(j*j+I*I)}return _}var y=[new x(1/0,-1/0,1/0),new x(1/0,-1/0,1/0),new x(1/0,-1/0,1/0)],m=[0,0,0]},2762:function(f,o,t){var i=t(1888),n=t(5298),r=t(9618),a=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function l(x,p,v,g,y){this.gl=x,this.type=p,this.handle=v,this.length=g,this.usage=y}var u=l.prototype;function h(x,p,v,g,y,m){var _=y.length*y.BYTES_PER_ELEMENT;if(m<0)return x.bufferData(p,y,g),_;if(_+m>v)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return x.bufferSubData(p,m,y),v}function c(x,p){for(var v=i.malloc(x.length,p),g=x.length,y=0;y<g;++y)v[y]=x[y];return v}u.bind=function(){this.gl.bindBuffer(this.type,this.handle)},u.unbind=function(){this.gl.bindBuffer(this.type,null)},u.dispose=function(){this.gl.deleteBuffer(this.handle)},u.update=function(x,p){if(typeof p!="number"&&(p=-1),this.bind(),typeof x=="object"&&x.shape!==void 0){var v=x.dtype;if(a.indexOf(v)<0&&(v="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(v=gl.getExtension("OES_element_index_uint")&&v!=="uint16"?"uint32":"uint16"),v===x.dtype&&function(_,d){for(var S=1,w=d.length-1;w>=0;--w){if(d[w]!==S)return!1;S*=_[w]}return!0}(x.shape,x.stride))x.offset===0&&x.data.length===x.shape[0]?this.length=h(this.gl,this.type,this.length,this.usage,x.data,p):this.length=h(this.gl,this.type,this.length,this.usage,x.data.subarray(x.offset,x.shape[0]),p);else{var g=i.malloc(x.size,v),y=r(g,x.shape);n.assign(y,x),this.length=h(this.gl,this.type,this.length,this.usage,p<0?g:g.subarray(0,x.size),p),i.free(g)}}else if(Array.isArray(x)){var m;m=this.type===this.gl.ELEMENT_ARRAY_BUFFER?c(x,"uint16"):c(x,"float32"),this.length=h(this.gl,this.type,this.length,this.usage,p<0?m:m.subarray(0,x.length),p),i.free(m)}else if(typeof x=="object"&&typeof x.length=="number")this.length=h(this.gl,this.type,this.length,this.usage,x,p);else{if(typeof x!="number"&&x!==void 0)throw new Error("gl-buffer: Invalid data type");if(p>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(x|=0)<=0&&(x=1),this.gl.bufferData(this.type,0|x,this.usage),this.length=x}},f.exports=function(x,p,v,g){if(v=v||x.ARRAY_BUFFER,g=g||x.DYNAMIC_DRAW,v!==x.ARRAY_BUFFER&&v!==x.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(g!==x.DYNAMIC_DRAW&&g!==x.STATIC_DRAW&&g!==x.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var y=x.createBuffer(),m=new l(x,v,y,0,g);return m.update(p),m}},6405:function(f,o,t){var i=t(2931);f.exports=function(r,a){var l=r.positions,u=r.vectors,h={positions:[],vertexIntensity:[],vertexIntensityBounds:r.vertexIntensityBounds,vectors:[],cells:[],coneOffset:r.coneOffset,colormap:r.colormap};if(r.positions.length===0)return a&&(a[0]=[0,0,0],a[1]=[0,0,0]),h;for(var c=0,x=1/0,p=-1/0,v=1/0,g=-1/0,y=1/0,m=-1/0,_=null,d=null,S=[],w=1/0,E=!1,C=r.coneSizemode==="raw",O=0;O<l.length;O++){var P=l[O];x=Math.min(P[0],x),p=Math.max(P[0],p),v=Math.min(P[1],v),g=Math.max(P[1],g),y=Math.min(P[2],y),m=Math.max(P[2],m);var z=u[O];if(i.length(z)>c&&(c=i.length(z)),O&&!C){var j=2*i.distance(_,P)/(i.length(d)+i.length(z));j?(w=Math.min(w,j),E=!1):E=!0}E||(_=P,d=z),S.push(z)}var I=[x,v,y],N=[p,g,m];a&&(a[0]=I,a[1]=N),c===0&&(c=1);var W=1/c;isFinite(w)||(w=1),h.vectorScale=w;var F=r.coneSize||(C?1:.5);r.absoluteConeSize&&(F=r.absoluteConeSize*W),h.coneScale=F,O=0;for(var U=0;O<l.length;O++)for(var H=(P=l[O])[0],ne=P[1],$=P[2],K=S[O],Q=i.length(K)*W,Z=0;Z<8;Z++){h.positions.push([H,ne,$,U++]),h.positions.push([H,ne,$,U++]),h.positions.push([H,ne,$,U++]),h.positions.push([H,ne,$,U++]),h.positions.push([H,ne,$,U++]),h.positions.push([H,ne,$,U++]),h.vectors.push(K),h.vectors.push(K),h.vectors.push(K),h.vectors.push(K),h.vectors.push(K),h.vectors.push(K),h.vertexIntensity.push(Q,Q,Q),h.vertexIntensity.push(Q,Q,Q);var X=h.positions.length;h.cells.push([X-6,X-5,X-4],[X-3,X-2,X-1])}return h};var n=t(614);f.exports.createMesh=t(9060),f.exports.createConeMesh=function(r,a){return f.exports.createMesh(r,a,{shaders:n,traceType:"cone"})}},9060:function(f,o,t){var i=t(9405),n=t(2762),r=t(8116),a=t(7766),l=t(6760),u=t(7608),h=t(9618),c=t(6729),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function p(g,y,m,_,d,S,w,E,C,O,P){this.gl=g,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=y,this.dirty=!0,this.triShader=m,this.pickShader=_,this.trianglePositions=d,this.triangleVectors=S,this.triangleColors=E,this.triangleUVs=C,this.triangleIds=w,this.triangleVAO=O,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=P,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=x,this._view=x,this._projection=x,this._resolution=[1,1]}var v=p.prototype;v.isOpaque=function(){return this.opacity>=1},v.isTransparent=function(){return this.opacity<1},v.pickSlots=1,v.setPickBase=function(g){this.pickId=g},v.update=function(g){g=g||{};var y=this.gl;this.dirty=!0,"lightPosition"in g&&(this.lightPosition=g.lightPosition),"opacity"in g&&(this.opacity=g.opacity),"ambient"in g&&(this.ambientLight=g.ambient),"diffuse"in g&&(this.diffuseLight=g.diffuse),"specular"in g&&(this.specularLight=g.specular),"roughness"in g&&(this.roughness=g.roughness),"fresnel"in g&&(this.fresnel=g.fresnel),g.tubeScale!==void 0&&(this.tubeScale=g.tubeScale),g.vectorScale!==void 0&&(this.vectorScale=g.vectorScale),g.coneScale!==void 0&&(this.coneScale=g.coneScale),g.coneOffset!==void 0&&(this.coneOffset=g.coneOffset),g.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=y.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=y.LINEAR,this.texture.setPixels(function(te){for(var ae=c({colormap:te,nshades:256,format:"rgba"}),se=new Uint8Array(1024),ce=0;ce<256;++ce){for(var fe=ae[ce],pe=0;pe<3;++pe)se[4*ce+pe]=fe[pe];se[4*ce+3]=255*fe[3]}return h(se,[256,256,4],[4,0,1])}(g.colormap)),this.texture.generateMipmap());var m=g.cells,_=g.positions,d=g.vectors;if(_&&m&&d){var S=[],w=[],E=[],C=[],O=[];this.cells=m,this.positions=_,this.vectors=d;var P=g.meshColor||[1,1,1,1],z=g.vertexIntensity,j=1/0,I=-1/0;if(z)if(g.vertexIntensityBounds)j=+g.vertexIntensityBounds[0],I=+g.vertexIntensityBounds[1];else for(var N=0;N<z.length;++N){var W=z[N];j=Math.min(j,W),I=Math.max(I,W)}else for(N=0;N<_.length;++N)W=_[N][2],j=Math.min(j,W),I=Math.max(I,W);for(this.intensity=z||function(te){for(var ae=te.length,se=new Array(ae),ce=0;ce<ae;++ce)se[ce]=te[ce][2];return se}(_),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],N=0;N<_.length;++N)for(var F=_[N],U=0;U<3;++U)!isNaN(F[U])&&isFinite(F[U])&&(this.bounds[0][U]=Math.min(this.bounds[0][U],F[U]),this.bounds[1][U]=Math.max(this.bounds[1][U],F[U]));var H=0;e:for(N=0;N<m.length;++N){var ne=m[N];if(ne.length===3){for(U=0;U<3;++U){F=_[K=ne[U]];for(var $=0;$<3;++$)if(isNaN(F[$])||!isFinite(F[$]))continue e}for(U=0;U<3;++U){var K;F=_[K=ne[2-U]],S.push(F[0],F[1],F[2],F[3]);var Q=d[K];w.push(Q[0],Q[1],Q[2],Q[3]||0);var Z,X=P;X.length===3?E.push(X[0],X[1],X[2],1):E.push(X[0],X[1],X[2],X[3]),Z=z?[(z[K]-j)/(I-j),0]:[(F[2]-j)/(I-j),0],C.push(Z[0],Z[1]),O.push(N)}H+=1}}this.triangleCount=H,this.trianglePositions.update(S),this.triangleVectors.update(w),this.triangleColors.update(E),this.triangleUVs.update(C),this.triangleIds.update(new Uint32Array(O))}},v.drawTransparent=v.draw=function(g){g=g||{};for(var y=this.gl,m=g.model||x,_=g.view||x,d=g.projection||x,S=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],w=0;w<3;++w)S[0][w]=Math.max(S[0][w],this.clipBounds[0][w]),S[1][w]=Math.min(S[1][w],this.clipBounds[1][w]);var E={model:m,view:_,projection:d,inverseModel:x.slice(),clipBounds:S,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};E.inverseModel=u(E.inverseModel,E.model),y.disable(y.CULL_FACE),this.texture.bind(0);var C=new Array(16);for(l(C,E.view,E.model),l(C,E.projection,C),u(C,C),w=0;w<3;++w)E.eyePosition[w]=C[12+w]/C[15];var O=C[15];for(w=0;w<3;++w)O+=this.lightPosition[w]*C[4*w+3];for(w=0;w<3;++w){for(var P=C[12+w],z=0;z<3;++z)P+=C[4*z+w]*this.lightPosition[z];E.lightPosition[w]=P/O}if(this.triangleCount>0){var j=this.triShader;j.bind(),j.uniforms=E,this.triangleVAO.bind(),y.drawArrays(y.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},v.drawPick=function(g){g=g||{};for(var y=this.gl,m=g.model||x,_=g.view||x,d=g.projection||x,S=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],w=0;w<3;++w)S[0][w]=Math.max(S[0][w],this.clipBounds[0][w]),S[1][w]=Math.min(S[1][w],this.clipBounds[1][w]);this._model=[].slice.call(m),this._view=[].slice.call(_),this._projection=[].slice.call(d),this._resolution=[y.drawingBufferWidth,y.drawingBufferHeight];var E={model:m,view:_,projection:d,clipBounds:S,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},C=this.pickShader;C.bind(),C.uniforms=E,this.triangleCount>0&&(this.triangleVAO.bind(),y.drawArrays(y.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},v.pick=function(g){if(!g||g.id!==this.pickId)return null;var y=g.value[0]+256*g.value[1]+65536*g.value[2],m=this.cells[y],_=this.positions[m[1]].slice(0,3),d={position:_,dataCoordinate:_,index:Math.floor(m[1]/48)};return this.traceType==="cone"?d.index=Math.floor(m[1]/48):this.traceType==="streamtube"&&(d.intensity=this.intensity[m[1]],d.velocity=this.vectors[m[1]].slice(0,3),d.divergence=this.vectors[m[1]][3],d.index=y),d},v.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},f.exports=function(g,y,m){var _=m.shaders;arguments.length===1&&(g=(y=g).gl);var d=function(I,N){var W=i(I,N.meshShader.vertex,N.meshShader.fragment,null,N.meshShader.attributes);return W.attributes.position.location=0,W.attributes.color.location=2,W.attributes.uv.location=3,W.attributes.vector.location=4,W}(g,_),S=function(I,N){var W=i(I,N.pickShader.vertex,N.pickShader.fragment,null,N.pickShader.attributes);return W.attributes.position.location=0,W.attributes.id.location=1,W.attributes.vector.location=4,W}(g,_),w=a(g,h(new Uint8Array([255,255,255,255]),[1,1,4]));w.generateMipmap(),w.minFilter=g.LINEAR_MIPMAP_LINEAR,w.magFilter=g.LINEAR;var E=n(g),C=n(g),O=n(g),P=n(g),z=n(g),j=new p(g,w,d,S,E,C,z,O,P,r(g,[{buffer:E,type:g.FLOAT,size:4},{buffer:z,type:g.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:O,type:g.FLOAT,size:4},{buffer:P,type:g.FLOAT,size:2},{buffer:C,type:g.FLOAT,size:4}]),m.traceType||"cone");return j.update(y),j}},614:function(f,o,t){var i=t(3236),n=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),r=i([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),a=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * (view * conePosition);
  f_id        = id;
  f_position  = position.xyz;
}
`]),l=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);o.meshShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},o.pickShader={vertex:a,fragment:l,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},737:function(f){f.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},5171:function(f,o,t){var i=t(737);f.exports=function(n){return i[n]}},9165:function(f,o,t){f.exports=function(p){var v=p.gl,g=i(v),y=n(v,[{buffer:g,type:v.FLOAT,size:3,offset:0,stride:40},{buffer:g,type:v.FLOAT,size:4,offset:12,stride:40},{buffer:g,type:v.FLOAT,size:3,offset:28,stride:40}]),m=r(v);m.attributes.position.location=0,m.attributes.color.location=1,m.attributes.offset.location=2;var _=new l(v,g,y,m);return _.update(p),_};var i=t(2762),n=t(8116),r=t(3436),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function l(p,v,g,y){this.gl=p,this.shader=y,this.buffer=v,this.vao=g,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var u=l.prototype;function h(p,v){for(var g=0;g<3;++g)p[0][g]=Math.min(p[0][g],v[g]),p[1][g]=Math.max(p[1][g],v[g])}u.isOpaque=function(){return!this.hasAlpha},u.isTransparent=function(){return this.hasAlpha},u.drawTransparent=u.draw=function(p){var v=this.gl,g=this.shader.uniforms;this.shader.bind();var y=g.view=p.view||a,m=g.projection=p.projection||a;g.model=p.model||a,g.clipBounds=this.clipBounds,g.opacity=this.opacity;var _=y[12],d=y[13],S=y[14],w=y[15],E=(p._ortho?2:1)*this.pixelRatio*(m[3]*_+m[7]*d+m[11]*S+m[15]*w)/v.drawingBufferHeight;this.vao.bind();for(var C=0;C<3;++C)v.lineWidth(this.lineWidth[C]*this.pixelRatio),g.capSize=this.capSize[C]*E,this.lineCount[C]&&v.drawArrays(v.LINES,this.lineOffset[C],this.lineCount[C]);this.vao.unbind()};var c=function(){for(var p=new Array(3),v=0;v<3;++v){for(var g=[],y=1;y<=2;++y)for(var m=-1;m<=1;m+=2){var _=[0,0,0];_[(y+v)%3]=m,g.push(_)}p[v]=g}return p}();function x(p,v,g,y){for(var m=c[y],_=0;_<m.length;++_){var d=m[_];p.push(v[0],v[1],v[2],g[0],g[1],g[2],g[3],d[0],d[1],d[2])}return m.length}u.update=function(p){"lineWidth"in(p=p||{})&&(this.lineWidth=p.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in p&&(this.capSize=p.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in p&&(this.opacity=+p.opacity,this.opacity<1&&(this.hasAlpha=!0));var v=p.color||[[0,0,0],[0,0,0],[0,0,0]],g=p.position,y=p.error;if(Array.isArray(v[0])||(v=[v,v,v]),g&&y){var m=[],_=g.length,d=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var S=0;S<3;++S){this.lineOffset[S]=d;e:for(var w=0;w<_;++w){for(var E=g[w],C=0;C<3;++C)if(isNaN(E[C])||!isFinite(E[C]))continue e;var O,P=y[w],z=v[S];Array.isArray(z[0])&&(z=v[w]),z.length===3?z=[z[0],z[1],z[2],1]:z.length===4&&(z=[z[0],z[1],z[2],z[3]],!this.hasAlpha&&z[3]<1&&(this.hasAlpha=!0)),!isNaN(P[0][S])&&!isNaN(P[1][S])&&(P[0][S]<0&&((O=E.slice())[S]+=P[0][S],m.push(E[0],E[1],E[2],z[0],z[1],z[2],z[3],0,0,0,O[0],O[1],O[2],z[0],z[1],z[2],z[3],0,0,0),h(this.bounds,O),d+=2+x(m,O,z,S)),P[1][S]>0&&((O=E.slice())[S]+=P[1][S],m.push(E[0],E[1],E[2],z[0],z[1],z[2],z[3],0,0,0,O[0],O[1],O[2],z[0],z[1],z[2],z[3],0,0,0),h(this.bounds,O),d+=2+x(m,O,z,S)))}this.lineCount[S]=d-this.lineOffset[S]}this.buffer.update(m)}},u.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},3436:function(f,o,t){var i=t(3236),n=t(9405),r=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * (view * worldPosition);
  fragColor           = color;
  fragPosition        = position;
}`]),a=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);f.exports=function(l){return n(l,r,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},2260:function(f,o,t){var i=t(7766);f.exports=function(_,d,S,w){n||(n=_.FRAMEBUFFER_UNSUPPORTED,r=_.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,a=_.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,l=_.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var E=_.getExtension("WEBGL_draw_buffers");if(!u&&E&&function(N,W){var F=N.getParameter(W.MAX_COLOR_ATTACHMENTS_WEBGL);u=new Array(F+1);for(var U=0;U<=F;++U){for(var H=new Array(F),ne=0;ne<U;++ne)H[ne]=N.COLOR_ATTACHMENT0+ne;for(ne=U;ne<F;++ne)H[ne]=N.NONE;u[U]=H}}(_,E),Array.isArray(d)&&(w=S,S=0|d[1],d=0|d[0]),typeof d!="number")throw new Error("gl-fbo: Missing shape parameter");var C=_.getParameter(_.MAX_RENDERBUFFER_SIZE);if(d<0||d>C||S<0||S>C)throw new Error("gl-fbo: Parameters are too large for FBO");var O=1;if("color"in(w=w||{})){if((O=Math.max(0|w.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(O>1){if(!E)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(O>_.getParameter(E.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+O+" draw buffers")}}var P=_.UNSIGNED_BYTE,z=_.getExtension("OES_texture_float");if(w.float&&O>0){if(!z)throw new Error("gl-fbo: Context does not support floating point textures");P=_.FLOAT}else w.preferFloat&&O>0&&z&&(P=_.FLOAT);var j=!0;"depth"in w&&(j=!!w.depth);var I=!1;return"stencil"in w&&(I=!!w.stencil),new g(_,d,S,P,O,j,I,E)};var n,r,a,l,u=null;function h(_){return[_.getParameter(_.FRAMEBUFFER_BINDING),_.getParameter(_.RENDERBUFFER_BINDING),_.getParameter(_.TEXTURE_BINDING_2D)]}function c(_,d){_.bindFramebuffer(_.FRAMEBUFFER,d[0]),_.bindRenderbuffer(_.RENDERBUFFER,d[1]),_.bindTexture(_.TEXTURE_2D,d[2])}function x(_){switch(_){case n:throw new Error("gl-fbo: Framebuffer unsupported");case r:throw new Error("gl-fbo: Framebuffer incomplete attachment");case a:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case l:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function p(_,d,S,w,E,C){if(!w)return null;var O=i(_,d,S,E,w);return O.magFilter=_.NEAREST,O.minFilter=_.NEAREST,O.mipSamples=1,O.bind(),_.framebufferTexture2D(_.FRAMEBUFFER,C,_.TEXTURE_2D,O.handle,0),O}function v(_,d,S,w,E){var C=_.createRenderbuffer();return _.bindRenderbuffer(_.RENDERBUFFER,C),_.renderbufferStorage(_.RENDERBUFFER,w,d,S),_.framebufferRenderbuffer(_.FRAMEBUFFER,E,_.RENDERBUFFER,C),C}function g(_,d,S,w,E,C,O,P){this.gl=_,this._shape=[0|d,0|S],this._destroyed=!1,this._ext=P,this.color=new Array(E);for(var z=0;z<E;++z)this.color[z]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=w,this._useDepth=C,this._useStencil=O;var j=this,I=[0|d,0|S];Object.defineProperties(I,{0:{get:function(){return j._shape[0]},set:function(N){return j.width=N}},1:{get:function(){return j._shape[1]},set:function(N){return j.height=N}}}),this._shapeVector=I,function(N){var W=h(N.gl),F=N.gl,U=N.handle=F.createFramebuffer(),H=N._shape[0],ne=N._shape[1],$=N.color.length,K=N._ext,Q=N._useStencil,Z=N._useDepth,X=N._colorType;F.bindFramebuffer(F.FRAMEBUFFER,U);for(var te=0;te<$;++te)N.color[te]=p(F,H,ne,X,F.RGBA,F.COLOR_ATTACHMENT0+te);$===0?(N._color_rb=v(F,H,ne,F.RGBA4,F.COLOR_ATTACHMENT0),K&&K.drawBuffersWEBGL(u[0])):$>1&&K.drawBuffersWEBGL(u[$]);var ae=F.getExtension("WEBGL_depth_texture");ae?Q?N.depth=p(F,H,ne,ae.UNSIGNED_INT_24_8_WEBGL,F.DEPTH_STENCIL,F.DEPTH_STENCIL_ATTACHMENT):Z&&(N.depth=p(F,H,ne,F.UNSIGNED_SHORT,F.DEPTH_COMPONENT,F.DEPTH_ATTACHMENT)):Z&&Q?N._depth_rb=v(F,H,ne,F.DEPTH_STENCIL,F.DEPTH_STENCIL_ATTACHMENT):Z?N._depth_rb=v(F,H,ne,F.DEPTH_COMPONENT16,F.DEPTH_ATTACHMENT):Q&&(N._depth_rb=v(F,H,ne,F.STENCIL_INDEX,F.STENCIL_ATTACHMENT));var se=F.checkFramebufferStatus(F.FRAMEBUFFER);if(se!==F.FRAMEBUFFER_COMPLETE){for(N._destroyed=!0,F.bindFramebuffer(F.FRAMEBUFFER,null),F.deleteFramebuffer(N.handle),N.handle=null,N.depth&&(N.depth.dispose(),N.depth=null),N._depth_rb&&(F.deleteRenderbuffer(N._depth_rb),N._depth_rb=null),te=0;te<N.color.length;++te)N.color[te].dispose(),N.color[te]=null;N._color_rb&&(F.deleteRenderbuffer(N._color_rb),N._color_rb=null),c(F,W),x(se)}c(F,W)}(this)}var y=g.prototype;function m(_,d,S){if(_._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(_._shape[0]!==d||_._shape[1]!==S){var w=_.gl,E=w.getParameter(w.MAX_RENDERBUFFER_SIZE);if(d<0||d>E||S<0||S>E)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");_._shape[0]=d,_._shape[1]=S;for(var C=h(w),O=0;O<_.color.length;++O)_.color[O].shape=_._shape;_._color_rb&&(w.bindRenderbuffer(w.RENDERBUFFER,_._color_rb),w.renderbufferStorage(w.RENDERBUFFER,w.RGBA4,_._shape[0],_._shape[1])),_.depth&&(_.depth.shape=_._shape),_._depth_rb&&(w.bindRenderbuffer(w.RENDERBUFFER,_._depth_rb),_._useDepth&&_._useStencil?w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_STENCIL,_._shape[0],_._shape[1]):_._useDepth?w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_COMPONENT16,_._shape[0],_._shape[1]):_._useStencil&&w.renderbufferStorage(w.RENDERBUFFER,w.STENCIL_INDEX,_._shape[0],_._shape[1])),w.bindFramebuffer(w.FRAMEBUFFER,_.handle);var P=w.checkFramebufferStatus(w.FRAMEBUFFER);P!==w.FRAMEBUFFER_COMPLETE&&(_.dispose(),c(w,C),x(P)),c(w,C)}}Object.defineProperties(y,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(_){if(Array.isArray(_)||(_=[0|_,0|_]),_.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var d=0|_[0],S=0|_[1];return m(this,d,S),[d,S]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(_){return m(this,_|=0,this._shape[1]),_},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(_){return _|=0,m(this,this._shape[0],_),_},enumerable:!1}}),y.bind=function(){if(!this._destroyed){var _=this.gl;_.bindFramebuffer(_.FRAMEBUFFER,this.handle),_.viewport(0,0,this._shape[0],this._shape[1])}},y.dispose=function(){if(!this._destroyed){this._destroyed=!0;var _=this.gl;_.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(_.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var d=0;d<this.color.length;++d)this.color[d].dispose(),this.color[d]=null;this._color_rb&&(_.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},2992:function(f,o,t){var i=t(3387).sprintf,n=t(5171),r=t(1848),a=t(1085);f.exports=function(l,u,h){var c=r(u)||"of unknown name (see npm glsl-shader-name)",x="unknown type";h!==void 0&&(x=h===n.FRAGMENT_SHADER?"fragment":"vertex");for(var p=i(`Error compiling %s shader %s:
`,x,c),v=i("%s%s",p,l),g=l.split(`
`),y={},m=0;m<g.length;m++){var _=g[m];if(_!==""&&_!=="\0"){var d=parseInt(_.split(":")[2]);if(isNaN(d))throw new Error(i("Could not parse error: %s",_));y[d]=_}}var S=a(u).split(`
`);for(m=0;m<S.length;m++)if((y[m+3]||y[m+2]||y[m+1])&&(p+=S[m]+`
`,y[m+1])){var w=y[m+1];w=w.substr(w.split(":",3).join(":").length+1).trim(),p+=i(`^^^ %s

`,w)}return{long:p.trim(),short:v.trim()}}},2510:function(f,o,t){f.exports=function(v,g){var y=v.gl,m=new h(v,a(y,u.vertex,u.fragment),a(y,u.pickVertex,u.pickFragment),l(y),l(y),l(y),l(y));return m.update(g),v.addObject(m),m};var i=t(2478),n=t(7762),r=t(1888),a=t(9405),l=t(2762),u=t(6768);function h(v,g,y,m,_,d,S){this.plot=v,this.shader=g,this.pickShader=y,this.positionBuffer=m,this.weightBuffer=_,this.colorBuffer=d,this.idBuffer=S,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var c,x=h.prototype,p=[0,0,1,0,0,1,1,0,1,1,0,1];x.draw=(c=[1,0,0,0,1,0,0,0,1],function(){var v=this.plot,g=this.shader,y=this.bounds,m=this.numVertices;if(!(m<=0)){var _=v.gl,d=v.dataBox,S=y[2]-y[0],w=y[3]-y[1],E=d[2]-d[0],C=d[3]-d[1];c[0]=2*S/E,c[4]=2*w/C,c[6]=2*(y[0]-d[0])/E-1,c[7]=2*(y[1]-d[1])/C-1,g.bind();var O=g.uniforms;O.viewTransform=c,O.shape=this.shape;var P=g.attributes;this.positionBuffer.bind(),P.position.pointer(),this.weightBuffer.bind(),P.weight.pointer(_.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),P.color.pointer(_.UNSIGNED_BYTE,!0),_.drawArrays(_.TRIANGLES,0,m)}}),x.drawPick=function(){var v=[1,0,0,0,1,0,0,0,1],g=[0,0,0,0];return function(y){var m=this.plot,_=this.pickShader,d=this.bounds,S=this.numVertices;if(!(S<=0)){var w=m.gl,E=m.dataBox,C=d[2]-d[0],O=d[3]-d[1],P=E[2]-E[0],z=E[3]-E[1];v[0]=2*C/P,v[4]=2*O/z,v[6]=2*(d[0]-E[0])/P-1,v[7]=2*(d[1]-E[1])/z-1;for(var j=0;j<4;++j)g[j]=y>>8*j&255;this.pickOffset=y,_.bind();var I=_.uniforms;I.viewTransform=v,I.pickOffset=g,I.shape=this.shape;var N=_.attributes;return this.positionBuffer.bind(),N.position.pointer(),this.weightBuffer.bind(),N.weight.pointer(w.UNSIGNED_BYTE,!1),this.idBuffer.bind(),N.pickId.pointer(w.UNSIGNED_BYTE,!1),w.drawArrays(w.TRIANGLES,0,S),y+this.shape[0]*this.shape[1]}}}(),x.pick=function(v,g,y){var m=this.pickOffset,_=this.shape[0]*this.shape[1];if(y<m||y>=m+_)return null;var d=y-m,S=this.xData,w=this.yData;return{object:this,pointId:d,dataCoord:[S[d%this.shape[0]],w[d/this.shape[0]|0]]}},x.update=function(v){var g=(v=v||{}).shape||[0,0],y=v.x||n(g[0]),m=v.y||n(g[1]),_=v.z||new Float32Array(g[0]*g[1]),d=v.zsmooth!==!1;this.xData=y,this.yData=m;var S,w,E,C,O=v.colorLevels||[0],P=v.colorValues||[0,0,0,1],z=O.length,j=this.bounds;d?(S=j[0]=y[0],w=j[1]=m[0],E=j[2]=y[y.length-1],C=j[3]=m[m.length-1]):(S=j[0]=y[0]+(y[1]-y[0])/2,w=j[1]=m[0]+(m[1]-m[0])/2,E=j[2]=y[y.length-1]+(y[y.length-1]-y[y.length-2])/2,C=j[3]=m[m.length-1]+(m[m.length-1]-m[m.length-2])/2);var I=1/(E-S),N=1/(C-w),W=g[0],F=g[1];this.shape=[W,F];var U=(d?(W-1)*(F-1):W*F)*(p.length>>>1);this.numVertices=U;for(var H=r.mallocUint8(4*U),ne=r.mallocFloat32(2*U),$=r.mallocUint8(2*U),K=r.mallocUint32(U),Q=0,Z=d?W-1:W,X=d?F-1:F,te=0;te<X;++te){var ae,se;d?(ae=N*(m[te]-w),se=N*(m[te+1]-w)):(ae=te<F-1?N*(m[te]-(m[te+1]-m[te])/2-w):N*(m[te]-(m[te]-m[te-1])/2-w),se=te<F-1?N*(m[te]+(m[te+1]-m[te])/2-w):N*(m[te]+(m[te]-m[te-1])/2-w));for(var ce=0;ce<Z;++ce){var fe,pe;d?(fe=I*(y[ce]-S),pe=I*(y[ce+1]-S)):(fe=ce<W-1?I*(y[ce]-(y[ce+1]-y[ce])/2-S):I*(y[ce]-(y[ce]-y[ce-1])/2-S),pe=ce<W-1?I*(y[ce]+(y[ce+1]-y[ce])/2-S):I*(y[ce]+(y[ce]-y[ce-1])/2-S));for(var ge=0;ge<p.length;ge+=2){var me,be,ke,ze,ve=p[ge],oe=p[ge+1],ie=_[d?(te+oe)*W+(ce+ve):te*W+ce],he=i.le(O,ie);if(he<0)me=P[0],be=P[1],ke=P[2],ze=P[3];else if(he===z-1)me=P[4*z-4],be=P[4*z-3],ke=P[4*z-2],ze=P[4*z-1];else{var Se=(ie-O[he])/(O[he+1]-O[he]),ye=1-Se,we=4*he,Me=4*(he+1);me=ye*P[we]+Se*P[Me],be=ye*P[we+1]+Se*P[Me+1],ke=ye*P[we+2]+Se*P[Me+2],ze=ye*P[we+3]+Se*P[Me+3]}H[4*Q]=255*me,H[4*Q+1]=255*be,H[4*Q+2]=255*ke,H[4*Q+3]=255*ze,ne[2*Q]=.5*fe+.5*pe,ne[2*Q+1]=.5*ae+.5*se,$[2*Q]=ve,$[2*Q+1]=oe,K[Q]=te*W+ce,Q+=1}}}this.positionBuffer.update(ne),this.weightBuffer.update($),this.colorBuffer.update(H),this.idBuffer.update(K),r.free(ne),r.free(H),r.free($),r.free(K)},x.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},6768:function(f,o,t){var i=t(3236);f.exports={fragment:i([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:i([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},7319:function(f,o,t){var i=t(3236),n=t(9405),r=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * (view * (model * vec4(p, 1.0)));
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),a=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),l=i([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),u=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];o.createShader=function(h){return n(h,r,a,null,u)},o.createPickShader=function(h){return n(h,r,l,null,u)}},5714:function(f,o,t){f.exports=function(S){var w=S.gl||S.scene&&S.scene.gl,E=x(w);E.attributes.position.location=0,E.attributes.nextPosition.location=1,E.attributes.arcLength.location=2,E.attributes.lineWidth.location=3,E.attributes.color.location=4;var C=p(w);C.attributes.position.location=0,C.attributes.nextPosition.location=1,C.attributes.arcLength.location=2,C.attributes.lineWidth.location=3,C.attributes.color.location=4;for(var O=i(w),P=n(w,[{buffer:O,size:3,offset:0,stride:48},{buffer:O,size:3,offset:12,stride:48},{buffer:O,size:1,offset:24,stride:48},{buffer:O,size:1,offset:28,stride:48},{buffer:O,size:4,offset:32,stride:48}]),z=h(new Array(1024),[256,1,4]),j=0;j<1024;++j)z.data[j]=255;var I=r(w,z);I.wrap=w.REPEAT;var N=new _(w,E,C,O,P,I);return N.update(S),N};var i=t(2762),n=t(8116),r=t(7766),a=new Uint8Array(4),l=new Float32Array(a.buffer),u=t(2478),h=t(9618),c=t(7319),x=c.createShader,p=c.createPickShader,v=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function g(S,w){for(var E=0,C=0;C<3;++C){var O=S[C]-w[C];E+=O*O}return Math.sqrt(E)}function y(S){for(var w=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)w[0][E]=Math.max(S[0][E],w[0][E]),w[1][E]=Math.min(S[1][E],w[1][E]);return w}function m(S,w,E,C){this.arcLength=S,this.position=w,this.index=E,this.dataCoordinate=C}function _(S,w,E,C,O,P){this.gl=S,this.shader=w,this.pickShader=E,this.buffer=C,this.vao=O,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=P,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var d=_.prototype;d.isTransparent=function(){return this.hasAlpha},d.isOpaque=function(){return!this.hasAlpha},d.pickSlots=1,d.setPickBase=function(S){this.pickId=S},d.drawTransparent=d.draw=function(S){if(this.vertexCount){var w=this.gl,E=this.shader,C=this.vao;E.bind(),E.uniforms={model:S.model||v,view:S.view||v,projection:S.projection||v,clipBounds:y(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[w.drawingBufferWidth,w.drawingBufferHeight],pixelRatio:this.pixelRatio},C.bind(),C.draw(w.TRIANGLE_STRIP,this.vertexCount),C.unbind()}},d.drawPick=function(S){if(this.vertexCount){var w=this.gl,E=this.pickShader,C=this.vao;E.bind(),E.uniforms={model:S.model||v,view:S.view||v,projection:S.projection||v,pickId:this.pickId,clipBounds:y(this.clipBounds),screenShape:[w.drawingBufferWidth,w.drawingBufferHeight],pixelRatio:this.pixelRatio},C.bind(),C.draw(w.TRIANGLE_STRIP,this.vertexCount),C.unbind()}},d.update=function(S){var w,E;this.dirty=!0;var C=!!S.connectGaps;"dashScale"in S&&(this.dashScale=S.dashScale),this.hasAlpha=!1,"opacity"in S&&(this.opacity=+S.opacity,this.opacity<1&&(this.hasAlpha=!0));var O=[],P=[],z=[],j=0,I=0,N=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],W=S.position||S.positions;if(W){var F=S.color||S.colors||[0,0,0,1],U=S.lineWidth||1,H=!1;e:for(w=1;w<W.length;++w){var ne,$,K,Q=W[w-1],Z=W[w];for(P.push(j),z.push(Q.slice()),E=0;E<3;++E){if(isNaN(Q[E])||isNaN(Z[E])||!isFinite(Q[E])||!isFinite(Z[E])){if(!C&&O.length>0){for(var X=0;X<24;++X)O.push(O[O.length-12]);I+=2,H=!0}continue e}N[0][E]=Math.min(N[0][E],Q[E],Z[E]),N[1][E]=Math.max(N[1][E],Q[E],Z[E])}Array.isArray(F[0])?(ne=F.length>w-1?F[w-1]:F.length>0?F[F.length-1]:[0,0,0,1],$=F.length>w?F[w]:F.length>0?F[F.length-1]:[0,0,0,1]):ne=$=F,ne.length===3&&(ne=[ne[0],ne[1],ne[2],1]),$.length===3&&($=[$[0],$[1],$[2],1]),!this.hasAlpha&&ne[3]<1&&(this.hasAlpha=!0),K=Array.isArray(U)?U.length>w-1?U[w-1]:U.length>0?U[U.length-1]:[0,0,0,1]:U;var te=j;if(j+=g(Q,Z),H){for(E=0;E<2;++E)O.push(Q[0],Q[1],Q[2],Z[0],Z[1],Z[2],te,K,ne[0],ne[1],ne[2],ne[3]);I+=2,H=!1}O.push(Q[0],Q[1],Q[2],Z[0],Z[1],Z[2],te,K,ne[0],ne[1],ne[2],ne[3],Q[0],Q[1],Q[2],Z[0],Z[1],Z[2],te,-K,ne[0],ne[1],ne[2],ne[3],Z[0],Z[1],Z[2],Q[0],Q[1],Q[2],j,-K,$[0],$[1],$[2],$[3],Z[0],Z[1],Z[2],Q[0],Q[1],Q[2],j,K,$[0],$[1],$[2],$[3]),I+=4}}if(this.buffer.update(O),P.push(j),z.push(W[W.length-1].slice()),this.bounds=N,this.vertexCount=I,this.points=z,this.arcLength=P,"dashes"in S){var ae=S.dashes.slice();for(ae.unshift(0),w=1;w<ae.length;++w)ae[w]=ae[w-1]+ae[w];var se=h(new Array(1024),[256,1,4]);for(w=0;w<256;++w){for(E=0;E<4;++E)se.set(w,0,E,0);1&u.le(ae,ae[ae.length-1]*w/255)?se.set(w,0,0,0):se.set(w,0,0,255)}this.texture.setPixels(se)}},d.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},d.pick=function(S){if(!S||S.id!==this.pickId)return null;var w=function(W,F,U,H){return a[0]=0,a[1]=U,a[2]=F,a[3]=W,l[0]}(S.value[0],S.value[1],S.value[2]),E=u.le(this.arcLength,w);if(E<0)return null;if(E===this.arcLength.length-1)return new m(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),E);for(var C=this.points[E],O=this.points[Math.min(E+1,this.points.length-1)],P=(w-this.arcLength[E])/(this.arcLength[E+1]-this.arcLength[E]),z=1-P,j=[0,0,0],I=0;I<3;++I)j[I]=z*C[I]+P*O[I];var N=Math.min(P<.5?E:E+1,this.points.length-1);return new m(w,j,N,this.points[N])}},1903:function(f){f.exports=function(o){var t=new Float32Array(16);return t[0]=o[0],t[1]=o[1],t[2]=o[2],t[3]=o[3],t[4]=o[4],t[5]=o[5],t[6]=o[6],t[7]=o[7],t[8]=o[8],t[9]=o[9],t[10]=o[10],t[11]=o[11],t[12]=o[12],t[13]=o[13],t[14]=o[14],t[15]=o[15],t}},6864:function(f){f.exports=function(){var o=new Float32Array(16);return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},9921:function(f){f.exports=function(o){var t=o[0],i=o[1],n=o[2],r=o[3],a=o[4],l=o[5],u=o[6],h=o[7],c=o[8],x=o[9],p=o[10],v=o[11],g=o[12],y=o[13],m=o[14],_=o[15];return(t*l-i*a)*(p*_-v*m)-(t*u-n*a)*(x*_-v*y)+(t*h-r*a)*(x*m-p*y)+(i*u-n*l)*(c*_-v*g)-(i*h-r*l)*(c*m-p*g)+(n*h-r*u)*(c*y-x*g)}},7399:function(f){f.exports=function(o,t){var i=t[0],n=t[1],r=t[2],a=t[3],l=i+i,u=n+n,h=r+r,c=i*l,x=n*l,p=n*u,v=r*l,g=r*u,y=r*h,m=a*l,_=a*u,d=a*h;return o[0]=1-p-y,o[1]=x+d,o[2]=v-_,o[3]=0,o[4]=x-d,o[5]=1-c-y,o[6]=g+m,o[7]=0,o[8]=v+_,o[9]=g-m,o[10]=1-c-p,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},6743:function(f){f.exports=function(o,t,i){var n=t[0],r=t[1],a=t[2],l=t[3],u=n+n,h=r+r,c=a+a,x=n*u,p=n*h,v=n*c,g=r*h,y=r*c,m=a*c,_=l*u,d=l*h,S=l*c;return o[0]=1-(g+m),o[1]=p+S,o[2]=v-d,o[3]=0,o[4]=p-S,o[5]=1-(x+m),o[6]=y+_,o[7]=0,o[8]=v+d,o[9]=y-_,o[10]=1-(x+g),o[11]=0,o[12]=i[0],o[13]=i[1],o[14]=i[2],o[15]=1,o}},7894:function(f){f.exports=function(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},7608:function(f){f.exports=function(o,t){var i=t[0],n=t[1],r=t[2],a=t[3],l=t[4],u=t[5],h=t[6],c=t[7],x=t[8],p=t[9],v=t[10],g=t[11],y=t[12],m=t[13],_=t[14],d=t[15],S=i*u-n*l,w=i*h-r*l,E=i*c-a*l,C=n*h-r*u,O=n*c-a*u,P=r*c-a*h,z=x*m-p*y,j=x*_-v*y,I=x*d-g*y,N=p*_-v*m,W=p*d-g*m,F=v*d-g*_,U=S*F-w*W+E*N+C*I-O*j+P*z;return U?(U=1/U,o[0]=(u*F-h*W+c*N)*U,o[1]=(r*W-n*F-a*N)*U,o[2]=(m*P-_*O+d*C)*U,o[3]=(v*O-p*P-g*C)*U,o[4]=(h*I-l*F-c*j)*U,o[5]=(i*F-r*I+a*j)*U,o[6]=(_*E-y*P-d*w)*U,o[7]=(x*P-v*E+g*w)*U,o[8]=(l*W-u*I+c*z)*U,o[9]=(n*I-i*W-a*z)*U,o[10]=(y*O-m*E+d*S)*U,o[11]=(p*E-x*O-g*S)*U,o[12]=(u*j-l*N-h*z)*U,o[13]=(i*N-n*j+r*z)*U,o[14]=(m*w-y*C-_*S)*U,o[15]=(x*C-p*w+v*S)*U,o):null}},6582:function(f,o,t){var i=t(7894);f.exports=function(n,r,a,l){var u,h,c,x,p,v,g,y,m,_,d=r[0],S=r[1],w=r[2],E=l[0],C=l[1],O=l[2],P=a[0],z=a[1],j=a[2];return Math.abs(d-P)<1e-6&&Math.abs(S-z)<1e-6&&Math.abs(w-j)<1e-6?i(n):(g=d-P,y=S-z,m=w-j,u=C*(m*=_=1/Math.sqrt(g*g+y*y+m*m))-O*(y*=_),h=O*(g*=_)-E*m,c=E*y-C*g,(_=Math.sqrt(u*u+h*h+c*c))?(u*=_=1/_,h*=_,c*=_):(u=0,h=0,c=0),x=y*c-m*h,p=m*u-g*c,v=g*h-y*u,(_=Math.sqrt(x*x+p*p+v*v))?(x*=_=1/_,p*=_,v*=_):(x=0,p=0,v=0),n[0]=u,n[1]=x,n[2]=g,n[3]=0,n[4]=h,n[5]=p,n[6]=y,n[7]=0,n[8]=c,n[9]=v,n[10]=m,n[11]=0,n[12]=-(u*d+h*S+c*w),n[13]=-(x*d+p*S+v*w),n[14]=-(g*d+y*S+m*w),n[15]=1,n)}},6760:function(f){f.exports=function(o,t,i){var n=t[0],r=t[1],a=t[2],l=t[3],u=t[4],h=t[5],c=t[6],x=t[7],p=t[8],v=t[9],g=t[10],y=t[11],m=t[12],_=t[13],d=t[14],S=t[15],w=i[0],E=i[1],C=i[2],O=i[3];return o[0]=w*n+E*u+C*p+O*m,o[1]=w*r+E*h+C*v+O*_,o[2]=w*a+E*c+C*g+O*d,o[3]=w*l+E*x+C*y+O*S,w=i[4],E=i[5],C=i[6],O=i[7],o[4]=w*n+E*u+C*p+O*m,o[5]=w*r+E*h+C*v+O*_,o[6]=w*a+E*c+C*g+O*d,o[7]=w*l+E*x+C*y+O*S,w=i[8],E=i[9],C=i[10],O=i[11],o[8]=w*n+E*u+C*p+O*m,o[9]=w*r+E*h+C*v+O*_,o[10]=w*a+E*c+C*g+O*d,o[11]=w*l+E*x+C*y+O*S,w=i[12],E=i[13],C=i[14],O=i[15],o[12]=w*n+E*u+C*p+O*m,o[13]=w*r+E*h+C*v+O*_,o[14]=w*a+E*c+C*g+O*d,o[15]=w*l+E*x+C*y+O*S,o}},4040:function(f){f.exports=function(o,t,i,n,r,a,l){var u=1/(t-i),h=1/(n-r),c=1/(a-l);return o[0]=-2*u,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*h,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*c,o[11]=0,o[12]=(t+i)*u,o[13]=(r+n)*h,o[14]=(l+a)*c,o[15]=1,o}},4772:function(f){f.exports=function(o,t,i,n,r){var a=1/Math.tan(t/2),l=1/(n-r);return o[0]=a/i,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=a,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(r+n)*l,o[11]=-1,o[12]=0,o[13]=0,o[14]=2*r*n*l,o[15]=0,o}},6079:function(f){f.exports=function(o,t,i,n){var r,a,l,u,h,c,x,p,v,g,y,m,_,d,S,w,E,C,O,P,z,j,I,N,W=n[0],F=n[1],U=n[2],H=Math.sqrt(W*W+F*F+U*U);return Math.abs(H)<1e-6?null:(W*=H=1/H,F*=H,U*=H,r=Math.sin(i),l=1-(a=Math.cos(i)),u=t[0],h=t[1],c=t[2],x=t[3],p=t[4],v=t[5],g=t[6],y=t[7],m=t[8],_=t[9],d=t[10],S=t[11],w=W*W*l+a,E=F*W*l+U*r,C=U*W*l-F*r,O=W*F*l-U*r,P=F*F*l+a,z=U*F*l+W*r,j=W*U*l+F*r,I=F*U*l-W*r,N=U*U*l+a,o[0]=u*w+p*E+m*C,o[1]=h*w+v*E+_*C,o[2]=c*w+g*E+d*C,o[3]=x*w+y*E+S*C,o[4]=u*O+p*P+m*z,o[5]=h*O+v*P+_*z,o[6]=c*O+g*P+d*z,o[7]=x*O+y*P+S*z,o[8]=u*j+p*I+m*N,o[9]=h*j+v*I+_*N,o[10]=c*j+g*I+d*N,o[11]=x*j+y*I+S*N,t!==o&&(o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15]),o)}},5567:function(f){f.exports=function(o,t,i){var n=Math.sin(i),r=Math.cos(i),a=t[4],l=t[5],u=t[6],h=t[7],c=t[8],x=t[9],p=t[10],v=t[11];return t!==o&&(o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=t[3],o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15]),o[4]=a*r+c*n,o[5]=l*r+x*n,o[6]=u*r+p*n,o[7]=h*r+v*n,o[8]=c*r-a*n,o[9]=x*r-l*n,o[10]=p*r-u*n,o[11]=v*r-h*n,o}},2408:function(f){f.exports=function(o,t,i){var n=Math.sin(i),r=Math.cos(i),a=t[0],l=t[1],u=t[2],h=t[3],c=t[8],x=t[9],p=t[10],v=t[11];return t!==o&&(o[4]=t[4],o[5]=t[5],o[6]=t[6],o[7]=t[7],o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15]),o[0]=a*r-c*n,o[1]=l*r-x*n,o[2]=u*r-p*n,o[3]=h*r-v*n,o[8]=a*n+c*r,o[9]=l*n+x*r,o[10]=u*n+p*r,o[11]=h*n+v*r,o}},7089:function(f){f.exports=function(o,t,i){var n=Math.sin(i),r=Math.cos(i),a=t[0],l=t[1],u=t[2],h=t[3],c=t[4],x=t[5],p=t[6],v=t[7];return t!==o&&(o[8]=t[8],o[9]=t[9],o[10]=t[10],o[11]=t[11],o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15]),o[0]=a*r+c*n,o[1]=l*r+x*n,o[2]=u*r+p*n,o[3]=h*r+v*n,o[4]=c*r-a*n,o[5]=x*r-l*n,o[6]=p*r-u*n,o[7]=v*r-h*n,o}},2504:function(f){f.exports=function(o,t,i){var n=i[0],r=i[1],a=i[2];return o[0]=t[0]*n,o[1]=t[1]*n,o[2]=t[2]*n,o[3]=t[3]*n,o[4]=t[4]*r,o[5]=t[5]*r,o[6]=t[6]*r,o[7]=t[7]*r,o[8]=t[8]*a,o[9]=t[9]*a,o[10]=t[10]*a,o[11]=t[11]*a,o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15],o}},7656:function(f){f.exports=function(o,t,i){var n,r,a,l,u,h,c,x,p,v,g,y,m=i[0],_=i[1],d=i[2];return t===o?(o[12]=t[0]*m+t[4]*_+t[8]*d+t[12],o[13]=t[1]*m+t[5]*_+t[9]*d+t[13],o[14]=t[2]*m+t[6]*_+t[10]*d+t[14],o[15]=t[3]*m+t[7]*_+t[11]*d+t[15]):(n=t[0],r=t[1],a=t[2],l=t[3],u=t[4],h=t[5],c=t[6],x=t[7],p=t[8],v=t[9],g=t[10],y=t[11],o[0]=n,o[1]=r,o[2]=a,o[3]=l,o[4]=u,o[5]=h,o[6]=c,o[7]=x,o[8]=p,o[9]=v,o[10]=g,o[11]=y,o[12]=n*m+u*_+p*d+t[12],o[13]=r*m+h*_+v*d+t[13],o[14]=a*m+c*_+g*d+t[14],o[15]=l*m+x*_+y*d+t[15]),o}},5665:function(f){f.exports=function(o,t){if(o===t){var i=t[1],n=t[2],r=t[3],a=t[6],l=t[7],u=t[11];o[1]=t[4],o[2]=t[8],o[3]=t[12],o[4]=i,o[6]=t[9],o[7]=t[13],o[8]=n,o[9]=a,o[11]=t[14],o[12]=r,o[13]=l,o[14]=u}else o[0]=t[0],o[1]=t[4],o[2]=t[8],o[3]=t[12],o[4]=t[1],o[5]=t[5],o[6]=t[9],o[7]=t[13],o[8]=t[2],o[9]=t[6],o[10]=t[10],o[11]=t[14],o[12]=t[3],o[13]=t[7],o[14]=t[11],o[15]=t[15];return o}},7626:function(f,o,t){var i=t(2642),n=t(9346);function r(u,h){for(var c=[0,0,0,0],x=0;x<4;++x)for(var p=0;p<4;++p)c[p]+=u[4*x+p]*h[x];return c}function a(u,h,c,x,p){for(var v=r(x,r(c,r(h,[u[0],u[1],u[2],1]))),g=0;g<3;++g)v[g]/=v[3];return[.5*p[0]*(1+v[0]),.5*p[1]*(1-v[1])]}function l(u,h){for(var c=[0,0,0],x=0;x<u.length;++x)for(var p=u[x],v=h[x],g=0;g<3;++g)c[g]+=v*p[g];return c}f.exports=function(u,h,c,x,p,v){if(u.length===1)return[0,u[0].slice()];for(var g=new Array(u.length),y=0;y<u.length;++y)g[y]=a(u[y],c,x,p,v);var m=0,_=1/0;for(y=0;y<g.length;++y){for(var d=0,S=0;S<2;++S)d+=Math.pow(g[y][S]-h[S],2);d<_&&(_=d,m=y)}var w=function(C,O){if(C.length===2){for(var P=0,z=0,j=0;j<2;++j)P+=Math.pow(O[j]-C[0][j],2),z+=Math.pow(O[j]-C[1][j],2);return(P=Math.sqrt(P))+(z=Math.sqrt(z))<1e-6?[1,0]:[z/(P+z),P/(z+P)]}if(C.length===3){var I=[0,0];return n(C[0],C[1],C[2],O,I),i(C,I)}return[]}(g,h),E=0;for(y=0;y<3;++y){if(w[y]<-.001||w[y]>1.0001)return null;E+=w[y]}return Math.abs(E-1)>.001?null:[m,l(u,w),w]}},840:function(f,o,t){var i=t(3236),n=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * (view * (model * vec4(p, 1.0)));
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),r=i([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),a=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * (view * (model * vec4(position, 1.0)));
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),l=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),u=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * (view * (model * vec4(position, 1.0)));
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),h=i([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),c=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * (view * (model * vec4(position, 1.0)));
  f_id        = id;
  f_position  = position;
}`]),x=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),p=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * (view * (model * vec4(position, 1.0)));
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),v=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * (view * (model * vec4(position, 1.0)));
}`]),g=i([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);o.meshShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},o.wireShader={vertex:a,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},o.pointShader={vertex:u,fragment:h,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},o.pickShader={vertex:c,fragment:x,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},o.pointPickShader={vertex:p,fragment:x,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},o.contourShader={vertex:v,fragment:g,attributes:[{name:"position",type:"vec3"}]}},7201:function(f,o,t){var i=t(9405),n=t(2762),r=t(8116),a=t(7766),l=t(8406),u=t(6760),h=t(7608),c=t(9618),x=t(6729),p=t(7765),v=t(1888),g=t(840),y=t(7626),m=g.meshShader,_=g.wireShader,d=g.pointShader,S=g.pickShader,w=g.pointPickShader,E=g.contourShader,C=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function O(F,U,H,ne,$,K,Q,Z,X,te,ae,se,ce,fe,pe,ge,me,be,ke,ze,ve,oe,ie,he,Se,ye,we){this.gl=F,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=U,this.dirty=!0,this.triShader=H,this.lineShader=ne,this.pointShader=$,this.pickShader=K,this.pointPickShader=Q,this.contourShader=Z,this.trianglePositions=X,this.triangleColors=ae,this.triangleNormals=ce,this.triangleUVs=se,this.triangleIds=te,this.triangleVAO=fe,this.triangleCount=0,this.lineWidth=1,this.edgePositions=pe,this.edgeColors=me,this.edgeUVs=be,this.edgeIds=ge,this.edgeVAO=ke,this.edgeCount=0,this.pointPositions=ze,this.pointColors=oe,this.pointUVs=ie,this.pointSizes=he,this.pointIds=ve,this.pointVAO=Se,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=ye,this.contourVAO=we,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=C,this._view=C,this._projection=C,this._resolution=[1,1]}var P=O.prototype;function z(F,U){if(!U||!U.length)return 1;for(var H=0;H<U.length;++H){if(U.length<2)return 1;if(U[H][0]===F)return U[H][1];if(U[H][0]>F&&H>0){var ne=(U[H][0]-F)/(U[H][0]-U[H-1][0]);return U[H][1]*(1-ne)+ne*U[H-1][1]}}return 1}function j(F){var U=i(F,d.vertex,d.fragment);return U.attributes.position.location=0,U.attributes.color.location=2,U.attributes.uv.location=3,U.attributes.pointSize.location=4,U}function I(F){var U=i(F,S.vertex,S.fragment);return U.attributes.position.location=0,U.attributes.id.location=1,U}function N(F){var U=i(F,w.vertex,w.fragment);return U.attributes.position.location=0,U.attributes.id.location=1,U.attributes.pointSize.location=4,U}function W(F){var U=i(F,E.vertex,E.fragment);return U.attributes.position.location=0,U}P.isOpaque=function(){return!this.hasAlpha},P.isTransparent=function(){return this.hasAlpha},P.pickSlots=1,P.setPickBase=function(F){this.pickId=F},P.highlight=function(F){if(F&&this.contourEnable){for(var U=p(this.cells,this.intensity,F.intensity),H=U.cells,ne=U.vertexIds,$=U.vertexWeights,K=H.length,Q=v.mallocFloat32(6*K),Z=0,X=0;X<K;++X)for(var te=H[X],ae=0;ae<2;++ae){var se=te[0];te.length===2&&(se=te[ae]);for(var ce=ne[se][0],fe=ne[se][1],pe=$[se],ge=1-pe,me=this.positions[ce],be=this.positions[fe],ke=0;ke<3;++ke)Q[Z++]=pe*me[ke]+ge*be[ke]}this.contourCount=Z/3|0,this.contourPositions.update(Q.subarray(0,Z)),v.free(Q)}else this.contourCount=0},P.update=function(F){F=F||{};var U=this.gl;this.dirty=!0,"contourEnable"in F&&(this.contourEnable=F.contourEnable),"contourColor"in F&&(this.contourColor=F.contourColor),"lineWidth"in F&&(this.lineWidth=F.lineWidth),"lightPosition"in F&&(this.lightPosition=F.lightPosition),this.hasAlpha=!1,"opacity"in F&&(this.opacity=F.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in F&&(this.opacityscale=F.opacityscale,this.hasAlpha=!0),"ambient"in F&&(this.ambientLight=F.ambient),"diffuse"in F&&(this.diffuseLight=F.diffuse),"specular"in F&&(this.specularLight=F.specular),"roughness"in F&&(this.roughness=F.roughness),"fresnel"in F&&(this.fresnel=F.fresnel),F.texture?(this.texture.dispose(),this.texture=a(U,F.texture)):F.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=U.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=U.LINEAR,this.texture.setPixels(function(Ot,Pt){for(var St=x({colormap:Ot,nshades:256,format:"rgba"}),He=new Uint8Array(1024),We=0;We<256;++We){for(var Be=St[We],Ge=0;Ge<3;++Ge)He[4*We+Ge]=Be[Ge];He[4*We+3]=Pt?255*z(We/255,Pt):255*Be[3]}return c(He,[256,256,4],[4,0,1])}(F.colormap,this.opacityscale)),this.texture.generateMipmap());var H=F.cells,ne=F.positions;if(ne&&H){var $=[],K=[],Q=[],Z=[],X=[],te=[],ae=[],se=[],ce=[],fe=[],pe=[],ge=[],me=[],be=[];this.cells=H,this.positions=ne;var ke=F.vertexNormals,ze=F.cellNormals,ve=F.vertexNormalsEpsilon===void 0?1e-6:F.vertexNormalsEpsilon,oe=F.faceNormalsEpsilon===void 0?1e-6:F.faceNormalsEpsilon;F.useFacetNormals&&!ze&&(ze=l.faceNormals(H,ne,oe)),ze||ke||(ke=l.vertexNormals(H,ne,ve));var ie=F.vertexColors,he=F.cellColors,Se=F.meshColor||[1,1,1,1],ye=F.vertexUVs,we=F.vertexIntensity,Me=F.cellUVs,Oe=F.cellIntensity,Ie=1/0,de=-1/0;if(!ye&&!Me)if(we)if(F.vertexIntensityBounds)Ie=+F.vertexIntensityBounds[0],de=+F.vertexIntensityBounds[1];else for(var _e=0;_e<we.length;++_e){var Ae=we[_e];Ie=Math.min(Ie,Ae),de=Math.max(de,Ae)}else if(Oe)if(F.cellIntensityBounds)Ie=+F.cellIntensityBounds[0],de=+F.cellIntensityBounds[1];else for(_e=0;_e<Oe.length;++_e)Ae=Oe[_e],Ie=Math.min(Ie,Ae),de=Math.max(de,Ae);else for(_e=0;_e<ne.length;++_e)Ae=ne[_e][2],Ie=Math.min(Ie,Ae),de=Math.max(de,Ae);this.intensity=we||Oe||function(Ot){for(var Pt=Ot.length,St=new Array(Pt),He=0;He<Pt;++He)St[He]=Ot[He][2];return St}(ne),this.pickVertex=!(Oe||he);var Pe=F.pointSizes,Ee=F.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],_e=0;_e<ne.length;++_e)for(var Fe=ne[_e],Ve=0;Ve<3;++Ve)!isNaN(Fe[Ve])&&isFinite(Fe[Ve])&&(this.bounds[0][Ve]=Math.min(this.bounds[0][Ve],Fe[Ve]),this.bounds[1][Ve]=Math.max(this.bounds[1][Ve],Fe[Ve]));var Ye=0,tt=0,nt=0;e:for(_e=0;_e<H.length;++_e){var ht=H[_e];switch(ht.length){case 1:for(Fe=ne[pt=ht[0]],Ve=0;Ve<3;++Ve)if(isNaN(Fe[Ve])||!isFinite(Fe[Ve]))continue e;fe.push(Fe[0],Fe[1],Fe[2]),Qe=ie?ie[pt]:he?he[_e]:Se,this.opacityscale&&we?K.push(Qe[0],Qe[1],Qe[2],this.opacity*z((we[pt]-Ie)/(de-Ie),this.opacityscale)):Qe.length===3?pe.push(Qe[0],Qe[1],Qe[2],this.opacity):(pe.push(Qe[0],Qe[1],Qe[2],Qe[3]*this.opacity),Qe[3]<1&&(this.hasAlpha=!0)),Ke=ye?ye[pt]:we?[(we[pt]-Ie)/(de-Ie),0]:Me?Me[_e]:Oe?[(Oe[_e]-Ie)/(de-Ie),0]:[(Fe[2]-Ie)/(de-Ie),0],ge.push(Ke[0],Ke[1]),Pe?me.push(Pe[pt]):me.push(Ee),be.push(_e),nt+=1;break;case 2:for(Ve=0;Ve<2;++Ve){Fe=ne[pt=ht[Ve]];for(var vt=0;vt<3;++vt)if(isNaN(Fe[vt])||!isFinite(Fe[vt]))continue e}for(Ve=0;Ve<2;++Ve)Fe=ne[pt=ht[Ve]],te.push(Fe[0],Fe[1],Fe[2]),Qe=ie?ie[pt]:he?he[_e]:Se,this.opacityscale&&we?K.push(Qe[0],Qe[1],Qe[2],this.opacity*z((we[pt]-Ie)/(de-Ie),this.opacityscale)):Qe.length===3?ae.push(Qe[0],Qe[1],Qe[2],this.opacity):(ae.push(Qe[0],Qe[1],Qe[2],Qe[3]*this.opacity),Qe[3]<1&&(this.hasAlpha=!0)),Ke=ye?ye[pt]:we?[(we[pt]-Ie)/(de-Ie),0]:Me?Me[_e]:Oe?[(Oe[_e]-Ie)/(de-Ie),0]:[(Fe[2]-Ie)/(de-Ie),0],se.push(Ke[0],Ke[1]),ce.push(_e);tt+=1;break;case 3:for(Ve=0;Ve<3;++Ve)for(Fe=ne[pt=ht[Ve]],vt=0;vt<3;++vt)if(isNaN(Fe[vt])||!isFinite(Fe[vt]))continue e;for(Ve=0;Ve<3;++Ve){var pt,Qe,Ke,Mt;Fe=ne[pt=ht[2-Ve]],$.push(Fe[0],Fe[1],Fe[2]),(Qe=ie?ie[pt]:he?he[_e]:Se)?this.opacityscale&&we?K.push(Qe[0],Qe[1],Qe[2],this.opacity*z((we[pt]-Ie)/(de-Ie),this.opacityscale)):Qe.length===3?K.push(Qe[0],Qe[1],Qe[2],this.opacity):(K.push(Qe[0],Qe[1],Qe[2],Qe[3]*this.opacity),Qe[3]<1&&(this.hasAlpha=!0)):K.push(.5,.5,.5,1),Ke=ye?ye[pt]:we?[(we[pt]-Ie)/(de-Ie),0]:Me?Me[_e]:Oe?[(Oe[_e]-Ie)/(de-Ie),0]:[(Fe[2]-Ie)/(de-Ie),0],Z.push(Ke[0],Ke[1]),Mt=ke?ke[pt]:ze[_e],Q.push(Mt[0],Mt[1],Mt[2]),X.push(_e)}Ye+=1}}this.pointCount=nt,this.edgeCount=tt,this.triangleCount=Ye,this.pointPositions.update(fe),this.pointColors.update(pe),this.pointUVs.update(ge),this.pointSizes.update(me),this.pointIds.update(new Uint32Array(be)),this.edgePositions.update(te),this.edgeColors.update(ae),this.edgeUVs.update(se),this.edgeIds.update(new Uint32Array(ce)),this.trianglePositions.update($),this.triangleColors.update(K),this.triangleUVs.update(Z),this.triangleNormals.update(Q),this.triangleIds.update(new Uint32Array(X))}},P.drawTransparent=P.draw=function(F){F=F||{};for(var U=this.gl,H=F.model||C,ne=F.view||C,$=F.projection||C,K=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],Q=0;Q<3;++Q)K[0][Q]=Math.max(K[0][Q],this.clipBounds[0][Q]),K[1][Q]=Math.min(K[1][Q],this.clipBounds[1][Q]);var Z={model:H,view:ne,projection:$,inverseModel:C.slice(),clipBounds:K,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};Z.inverseModel=h(Z.inverseModel,Z.model),U.disable(U.CULL_FACE),this.texture.bind(0);var X=new Array(16);for(u(X,Z.view,Z.model),u(X,Z.projection,X),h(X,X),Q=0;Q<3;++Q)Z.eyePosition[Q]=X[12+Q]/X[15];var te,ae=X[15];for(Q=0;Q<3;++Q)ae+=this.lightPosition[Q]*X[4*Q+3];for(Q=0;Q<3;++Q){for(var se=X[12+Q],ce=0;ce<3;++ce)se+=X[4*ce+Q]*this.lightPosition[ce];Z.lightPosition[Q]=se/ae}this.triangleCount>0&&((te=this.triShader).bind(),te.uniforms=Z,this.triangleVAO.bind(),U.drawArrays(U.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((te=this.lineShader).bind(),te.uniforms=Z,this.edgeVAO.bind(),U.lineWidth(this.lineWidth*this.pixelRatio),U.drawArrays(U.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((te=this.pointShader).bind(),te.uniforms=Z,this.pointVAO.bind(),U.drawArrays(U.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((te=this.contourShader).bind(),te.uniforms=Z,this.contourVAO.bind(),U.drawArrays(U.LINES,0,this.contourCount),this.contourVAO.unbind())},P.drawPick=function(F){F=F||{};for(var U=this.gl,H=F.model||C,ne=F.view||C,$=F.projection||C,K=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],Q=0;Q<3;++Q)K[0][Q]=Math.max(K[0][Q],this.clipBounds[0][Q]),K[1][Q]=Math.min(K[1][Q],this.clipBounds[1][Q]);this._model=[].slice.call(H),this._view=[].slice.call(ne),this._projection=[].slice.call($),this._resolution=[U.drawingBufferWidth,U.drawingBufferHeight];var Z,X={model:H,view:ne,projection:$,clipBounds:K,pickId:this.pickId/255};(Z=this.pickShader).bind(),Z.uniforms=X,this.triangleCount>0&&(this.triangleVAO.bind(),U.drawArrays(U.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),U.lineWidth(this.lineWidth*this.pixelRatio),U.drawArrays(U.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((Z=this.pointPickShader).bind(),Z.uniforms=X,this.pointVAO.bind(),U.drawArrays(U.POINTS,0,this.pointCount),this.pointVAO.unbind())},P.pick=function(F){if(!F||F.id!==this.pickId)return null;for(var U=F.value[0]+256*F.value[1]+65536*F.value[2],H=this.cells[U],ne=this.positions,$=new Array(H.length),K=0;K<H.length;++K)$[K]=ne[H[K]];var Q=F.coord[0],Z=F.coord[1];if(!this.pickVertex){var X=this.positions[H[0]],te=this.positions[H[1]],ae=this.positions[H[2]],se=[(X[0]+te[0]+ae[0])/3,(X[1]+te[1]+ae[1])/3,(X[2]+te[2]+ae[2])/3];return{_cellCenter:!0,position:[Q,Z],index:U,cell:H,cellId:U,intensity:this.intensity[U],dataCoordinate:se}}var ce=y($,[Q*this.pixelRatio,this._resolution[1]-Z*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ce)return null;var fe=ce[2],pe=0;for(K=0;K<H.length;++K)pe+=fe[K]*this.intensity[H[K]];return{position:ce[1],index:H[ce[0]],cell:H,cellId:U,intensity:pe,dataCoordinate:this.positions[H[ce[0]]]}},P.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},f.exports=function(F,U){if(arguments.length===1&&(F=(U=F).gl),!(F.getExtension("OES_standard_derivatives")||F.getExtension("MOZ_OES_standard_derivatives")||F.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var H=function(Oe){var Ie=i(Oe,m.vertex,m.fragment);return Ie.attributes.position.location=0,Ie.attributes.color.location=2,Ie.attributes.uv.location=3,Ie.attributes.normal.location=4,Ie}(F),ne=function(Oe){var Ie=i(Oe,_.vertex,_.fragment);return Ie.attributes.position.location=0,Ie.attributes.color.location=2,Ie.attributes.uv.location=3,Ie}(F),$=j(F),K=I(F),Q=N(F),Z=W(F),X=a(F,c(new Uint8Array([255,255,255,255]),[1,1,4]));X.generateMipmap(),X.minFilter=F.LINEAR_MIPMAP_LINEAR,X.magFilter=F.LINEAR;var te=n(F),ae=n(F),se=n(F),ce=n(F),fe=n(F),pe=r(F,[{buffer:te,type:F.FLOAT,size:3},{buffer:fe,type:F.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ae,type:F.FLOAT,size:4},{buffer:se,type:F.FLOAT,size:2},{buffer:ce,type:F.FLOAT,size:3}]),ge=n(F),me=n(F),be=n(F),ke=n(F),ze=r(F,[{buffer:ge,type:F.FLOAT,size:3},{buffer:ke,type:F.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:me,type:F.FLOAT,size:4},{buffer:be,type:F.FLOAT,size:2}]),ve=n(F),oe=n(F),ie=n(F),he=n(F),Se=n(F),ye=r(F,[{buffer:ve,type:F.FLOAT,size:3},{buffer:Se,type:F.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:oe,type:F.FLOAT,size:4},{buffer:ie,type:F.FLOAT,size:2},{buffer:he,type:F.FLOAT,size:1}]),we=n(F),Me=new O(F,X,H,ne,$,K,Q,Z,te,fe,ae,se,ce,pe,ge,ke,me,be,ze,ve,Se,oe,ie,he,ye,we,r(F,[{buffer:we,type:F.FLOAT,size:3}]));return Me.update(U),Me}},8120:function(f,o,t){f.exports=function(c){var x=c.gl;return new a(c,i(x,[0,0,0,1,1,0,1,1]),n(x,r.boxVert,r.lineFrag))};var i=t(2762),n=t(9405),r=t(3603);function a(c,x,p){this.plot=c,this.vbo=x,this.shader=p}var l,u,h=a.prototype;h.bind=function(){var c=this.shader;this.vbo.bind(),this.shader.bind(),c.attributes.coord.pointer(),c.uniforms.screenBox=this.plot.screenBox},h.drawBox=(l=[0,0],u=[0,0],function(c,x,p,v,g){var y=this.plot,m=this.shader,_=y.gl;l[0]=c,l[1]=x,u[0]=p,u[1]=v,m.uniforms.lo=l,m.uniforms.hi=u,m.uniforms.color=g,_.drawArrays(_.TRIANGLE_STRIP,0,4)}),h.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},1913:function(f,o,t){f.exports=function(y){var m=y.gl;return new l(y,i(m),n(m,a.gridVert,a.gridFrag),n(m,a.tickVert,a.gridFrag))};var i=t(2762),n=t(9405),r=t(2478),a=t(3603);function l(y,m,_,d){this.plot=y,this.vbo=m,this.shader=_,this.tickShader=d,this.ticks=[[],[]]}function u(y,m){return y-m}var h,c,x,p,v,g=l.prototype;g.draw=(h=[0,0],c=[0,0],x=[0,0],function(){for(var y=this.plot,m=this.vbo,_=this.shader,d=this.ticks,S=y.gl,w=y._tickBounds,E=y.dataBox,C=y.viewBox,O=y.gridLineWidth,P=y.gridLineColor,z=y.gridLineEnable,j=y.pixelRatio,I=0;I<2;++I){var N=w[I],W=w[I+2]-N,F=.5*(E[I+2]+E[I]),U=E[I+2]-E[I];c[I]=2*W/U,h[I]=2*(N-F)/U}_.bind(),m.bind(),_.attributes.dataCoord.pointer(),_.uniforms.dataShift=h,_.uniforms.dataScale=c;var H=0;for(I=0;I<2;++I){x[0]=x[1]=0,x[I]=1,_.uniforms.dataAxis=x,_.uniforms.lineWidth=O[I]/(C[I+2]-C[I])*j,_.uniforms.color=P[I];var ne=6*d[I].length;z[I]&&ne&&S.drawArrays(S.TRIANGLES,H,ne),H+=ne}}),g.drawTickMarks=function(){var y=[0,0],m=[0,0],_=[1,0],d=[0,1],S=[0,0],w=[0,0];return function(){for(var E=this.plot,C=this.vbo,O=this.tickShader,P=this.ticks,z=E.gl,j=E._tickBounds,I=E.dataBox,N=E.viewBox,W=E.pixelRatio,F=E.screenBox,U=F[2]-F[0],H=F[3]-F[1],ne=N[2]-N[0],$=N[3]-N[1],K=0;K<2;++K){var Q=j[K],Z=j[K+2]-Q,X=.5*(I[K+2]+I[K]),te=I[K+2]-I[K];m[K]=2*Z/te,y[K]=2*(Q-X)/te}m[0]*=ne/U,y[0]*=ne/U,m[1]*=$/H,y[1]*=$/H,O.bind(),C.bind(),O.attributes.dataCoord.pointer();var ae=O.uniforms;ae.dataShift=y,ae.dataScale=m;var se=E.tickMarkLength,ce=E.tickMarkWidth,fe=E.tickMarkColor,pe=6*P[0].length,ge=Math.min(r.ge(P[0],(I[0]-j[0])/(j[2]-j[0]),u),P[0].length),me=Math.min(r.gt(P[0],(I[2]-j[0])/(j[2]-j[0]),u),P[0].length),be=0+6*ge,ke=6*Math.max(0,me-ge),ze=Math.min(r.ge(P[1],(I[1]-j[1])/(j[3]-j[1]),u),P[1].length),ve=Math.min(r.gt(P[1],(I[3]-j[1])/(j[3]-j[1]),u),P[1].length),oe=pe+6*ze,ie=6*Math.max(0,ve-ze);S[0]=2*(N[0]-se[1])/U-1,S[1]=(N[3]+N[1])/H-1,w[0]=se[1]*W/U,w[1]=ce[1]*W/H,ie&&(ae.color=fe[1],ae.tickScale=w,ae.dataAxis=d,ae.screenOffset=S,z.drawArrays(z.TRIANGLES,oe,ie)),S[0]=(N[2]+N[0])/U-1,S[1]=2*(N[1]-se[0])/H-1,w[0]=ce[0]*W/U,w[1]=se[0]*W/H,ke&&(ae.color=fe[0],ae.tickScale=w,ae.dataAxis=_,ae.screenOffset=S,z.drawArrays(z.TRIANGLES,be,ke)),S[0]=2*(N[2]+se[3])/U-1,S[1]=(N[3]+N[1])/H-1,w[0]=se[3]*W/U,w[1]=ce[3]*W/H,ie&&(ae.color=fe[3],ae.tickScale=w,ae.dataAxis=d,ae.screenOffset=S,z.drawArrays(z.TRIANGLES,oe,ie)),S[0]=(N[2]+N[0])/U-1,S[1]=2*(N[3]+se[2])/H-1,w[0]=ce[2]*W/U,w[1]=se[2]*W/H,ke&&(ae.color=fe[2],ae.tickScale=w,ae.dataAxis=_,ae.screenOffset=S,z.drawArrays(z.TRIANGLES,be,ke))}}(),g.update=(p=[1,1,-1,-1,1,-1],v=[1,-1,1,1,-1,-1],function(y){for(var m=y.ticks,_=y.bounds,d=new Float32Array(18*(m[0].length+m[1].length)),S=(this.plot.zeroLineEnable,0),w=[[],[]],E=0;E<2;++E)for(var C=w[E],O=m[E],P=_[E],z=_[E+2],j=0;j<O.length;++j){var I=(O[j].x-P)/(z-P);C.push(I);for(var N=0;N<6;++N)d[S++]=I,d[S++]=p[N],d[S++]=v[N]}this.ticks=w,this.vbo.update(d)}),g.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},4747:function(f,o,t){f.exports=function(c){var x=c.gl;return new a(c,i(x,[-1,-1,-1,1,1,-1,1,1]),n(x,r.lineVert,r.lineFrag))};var i=t(2762),n=t(9405),r=t(3603);function a(c,x,p){this.plot=c,this.vbo=x,this.shader=p}var l,u,h=a.prototype;h.bind=function(){var c=this.shader;this.vbo.bind(),this.shader.bind(),c.attributes.coord.pointer(),c.uniforms.screenBox=this.plot.screenBox},h.drawLine=(l=[0,0],u=[0,0],function(c,x,p,v,g,y){var m=this.plot,_=this.shader,d=m.gl;l[0]=c,l[1]=x,u[0]=p,u[1]=v,_.uniforms.start=l,_.uniforms.end=u,_.uniforms.width=g*m.pixelRatio,_.uniforms.color=y,d.drawArrays(d.TRIANGLE_STRIP,0,4)}),h.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3603:function(f,o,t){var i=t(3236),n=i([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);f.exports={lineVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:n,textVert:i([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:n,gridVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:n,boxVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},2142:function(f,o,t){f.exports=function(m){var _=m.gl;return new u(m,i(_),n(_,l.textVert,l.textFrag))};var i=t(2762),n=t(9405),r=t(529),a=t(2478),l=t(3603);function u(m,_,d){this.plot=m,this.vbo=_,this.shader=d,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var h,c,x,p,v,g,y=u.prototype;y.drawTicks=(h=[0,0],c=[0,0],x=[0,0],function(m){var _=this.plot,d=this.shader,S=this.tickX[m],w=this.tickOffset[m],E=_.gl,C=_.viewBox,O=_.dataBox,P=_.screenBox,z=_.pixelRatio,j=_.tickEnable,I=_.tickPad,N=_.tickColor,W=_.tickAngle,F=_.labelEnable,U=_.labelPad,H=_.labelColor,ne=_.labelAngle,$=this.labelOffset[m],K=this.labelCount[m],Q=a.lt(S,O[m]),Z=a.le(S,O[m+2]);h[0]=h[1]=0,h[m]=1,c[m]=(C[2+m]+C[m])/(P[2+m]-P[m])-1;var X=2/P[2+(1^m)]-P[1^m];c[1^m]=X*C[1^m]-1,j[m]&&(c[1^m]-=X*z*I[m],Q<Z&&w[Z]>w[Q]&&(d.uniforms.dataAxis=h,d.uniforms.screenOffset=c,d.uniforms.color=N[m],d.uniforms.angle=W[m],E.drawArrays(E.TRIANGLES,w[Q],w[Z]-w[Q]))),F[m]&&K&&(c[1^m]-=X*z*U[m],d.uniforms.dataAxis=x,d.uniforms.screenOffset=c,d.uniforms.color=H[m],d.uniforms.angle=ne[m],E.drawArrays(E.TRIANGLES,$,K)),c[1^m]=X*C[2+(1^m)]-1,j[m+2]&&(c[1^m]+=X*z*I[m+2],Q<Z&&w[Z]>w[Q]&&(d.uniforms.dataAxis=h,d.uniforms.screenOffset=c,d.uniforms.color=N[m+2],d.uniforms.angle=W[m+2],E.drawArrays(E.TRIANGLES,w[Q],w[Z]-w[Q]))),F[m+2]&&K&&(c[1^m]+=X*z*U[m+2],d.uniforms.dataAxis=x,d.uniforms.screenOffset=c,d.uniforms.color=H[m+2],d.uniforms.angle=ne[m+2],E.drawArrays(E.TRIANGLES,$,K))}),y.drawTitle=function(){var m=[0,0],_=[0,0];return function(){var d=this.plot,S=this.shader,w=d.gl,E=d.screenBox,C=d.titleCenter,O=d.titleAngle,P=d.titleColor,z=d.pixelRatio;if(this.titleCount){for(var j=0;j<2;++j)_[j]=2*(C[j]*z-E[j])/(E[2+j]-E[j])-1;S.bind(),S.uniforms.dataAxis=m,S.uniforms.screenOffset=_,S.uniforms.angle=O,S.uniforms.color=P,w.drawArrays(w.TRIANGLES,this.titleOffset,this.titleCount)}}}(),y.bind=(p=[0,0],v=[0,0],g=[0,0],function(){var m=this.plot,_=this.shader,d=m._tickBounds,S=m.dataBox,w=m.screenBox,E=m.viewBox;_.bind();for(var C=0;C<2;++C){var O=d[C],P=d[C+2]-O,z=.5*(S[C+2]+S[C]),j=S[C+2]-S[C],I=E[C],N=E[C+2]-I,W=w[C],F=w[C+2]-W;v[C]=2*P/j*N/F,p[C]=2*(O-z)/j*N/F}g[1]=2*m.pixelRatio/(w[3]-w[1]),g[0]=g[1]*(w[3]-w[1])/(w[2]-w[0]),_.uniforms.dataScale=v,_.uniforms.dataShift=p,_.uniforms.textScale=g,this.vbo.bind(),_.attributes.textCoordinate.pointer()}),y.update=function(m){var _,d,S,w,E,C=[],O=m.ticks,P=m.bounds;for(E=0;E<2;++E){var z=[Math.floor(C.length/3)],j=[-1/0],I=O[E];for(_=0;_<I.length;++_){var N=I[_],W=N.x,F=N.text,U=N.font||"sans-serif",H=N.fontStyle||"normal",ne=N.fontWeight||"normal",$=N.fontVariant||"normal";w=N.fontSize||12;for(var K=1/(P[E+2]-P[E]),Q=P[E],Z=F.split(`
`),X=0;X<Z.length;X++)for(S=r(U,Z[X],{fontStyle:H,fontWeight:ne,fontVariant:$}).data,d=0;d<S.length;d+=2)C.push(S[d]*w,-S[d+1]*w-X*w*1.2,(W-Q)*K);z.push(Math.floor(C.length/3)),j.push(W)}this.tickOffset[E]=z,this.tickX[E]=j}for(E=0;E<2;++E){for(this.labelOffset[E]=Math.floor(C.length/3),S=r(m.labelFont[E],m.labels[E],{fontStyle:m.labelFontStyle[E],fontWeight:m.labelFontWeight[E],fontVariant:m.labelFontVariant[E],textAlign:"center"}).data,w=m.labelSize[E],_=0;_<S.length;_+=2)C.push(S[_]*w,-S[_+1]*w,0);this.labelCount[E]=Math.floor(C.length/3)-this.labelOffset[E]}for(this.titleOffset=Math.floor(C.length/3),S=r(m.titleFont,m.title,{fontStyle:m.titleFontStyle,fontWeight:m.titleFontWeight,fontVariant:m.titleFontVariant}).data,w=m.titleSize,_=0;_<S.length;_+=2)C.push(S[_]*w,-S[_+1]*w,0);this.titleCount=Math.floor(C.length/3)-this.titleOffset,this.vbo.update(C)},y.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},1850:function(f,o,t){f.exports=function(p){var v=p.gl,g=new u(v,i(v,[v.drawingBufferWidth,v.drawingBufferHeight]));return g.grid=n(g),g.text=r(g),g.line=a(g),g.box=l(g),g.update(p),g};var i=t(3589),n=t(1913),r=t(2142),a=t(4747),l=t(8120);function u(p,v){this.gl=p,this.pickBuffer=v,this.screenBox=[0,0,p.drawingBufferWidth,p.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var h=u.prototype;function c(p){for(var v=p.slice(),g=0;g<v.length;++g)v[g]=v[g].slice();return v}function x(p,v){return p.x-v.x}h.setDirty=function(){this.dirty=this.pickDirty=!0},h.setOverlayDirty=function(){this.dirty=!0},h.nextDepthValue=function(){return this._depthCounter++/65536},h.draw=function(){var p=this.gl,v=this.screenBox,g=this.viewBox,y=this.dataBox,m=this.pixelRatio,_=this.grid,d=this.line,S=this.text,w=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,p.bindFramebuffer(p.FRAMEBUFFER,null),p.enable(p.SCISSOR_TEST),p.disable(p.DEPTH_TEST),p.depthFunc(p.LESS),p.depthMask(!1),p.enable(p.BLEND),p.blendEquation(p.FUNC_ADD,p.FUNC_ADD),p.blendFunc(p.ONE,p.ONE_MINUS_SRC_ALPHA),this.borderColor){p.scissor(v[0],v[1],v[2]-v[0],v[3]-v[1]);var E=this.borderColor;p.clearColor(E[0]*E[3],E[1]*E[3],E[2]*E[3],E[3]),p.clear(p.COLOR_BUFFER_BIT|p.DEPTH_BUFFER_BIT)}p.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]),p.viewport(g[0],g[1],g[2]-g[0],g[3]-g[1]);var C=this.backgroundColor;p.clearColor(C[0]*C[3],C[1]*C[3],C[2]*C[3],C[3]),p.clear(p.COLOR_BUFFER_BIT),_.draw();var O=this.zeroLineEnable,P=this.zeroLineColor,z=this.zeroLineWidth;if(O[0]||O[1]){d.bind();for(var j=0;j<2;++j)if(O[j]&&y[j]<=0&&y[j+2]>=0){var I=v[j]-y[j]*(v[j+2]-v[j])/(y[j+2]-y[j]);j===0?d.drawLine(I,v[1],I,v[3],z[j],P[j]):d.drawLine(v[0],I,v[2],I,z[j],P[j])}}for(j=0;j<w.length;++j)w[j].draw();p.viewport(v[0],v[1],v[2]-v[0],v[3]-v[1]),p.scissor(v[0],v[1],v[2]-v[0],v[3]-v[1]),this.grid.drawTickMarks(),d.bind();var N=this.borderLineEnable,W=this.borderLineWidth,F=this.borderLineColor;for(N[1]&&d.drawLine(g[0],g[1]-.5*W[1]*m,g[0],g[3]+.5*W[3]*m,W[1],F[1]),N[0]&&d.drawLine(g[0]-.5*W[0]*m,g[1],g[2]+.5*W[2]*m,g[1],W[0],F[0]),N[3]&&d.drawLine(g[2],g[1]-.5*W[1]*m,g[2],g[3]+.5*W[3]*m,W[3],F[3]),N[2]&&d.drawLine(g[0]-.5*W[0]*m,g[3],g[2]+.5*W[2]*m,g[3],W[2],F[2]),S.bind(),j=0;j<2;++j)S.drawTicks(j);this.titleEnable&&S.drawTitle();var U=this.overlays;for(j=0;j<U.length;++j)U[j].draw();p.disable(p.SCISSOR_TEST),p.disable(p.BLEND),p.depthMask(!0)}},h.drawPick=function(){if(!this.static){var p=this.pickBuffer;this.gl,this._pickTimeout=null,p.begin();for(var v=1,g=this.objects,y=0;y<g.length;++y)v=g[y].drawPick(v);p.end()}},h.pick=function(p,v){if(!this.static){var g=this.pixelRatio,y=this.pickPixelRatio,m=this.viewBox,_=0|Math.round((p-m[0]/g)*y),d=0|Math.round((v-m[1]/g)*y),S=this.pickBuffer.query(_,d,this.pickRadius);if(!S)return null;for(var w=S.id+(S.value[0]<<8)+(S.value[1]<<16)+(S.value[2]<<24),E=this.objects,C=0;C<E.length;++C){var O=E[C].pick(_,d,w);if(O)return O}return null}},h.setScreenBox=function(p){var v=this.screenBox,g=this.pixelRatio;v[0]=0|Math.round(p[0]*g),v[1]=0|Math.round(p[1]*g),v[2]=0|Math.round(p[2]*g),v[3]=0|Math.round(p[3]*g),this.setDirty()},h.setDataBox=function(p){var v=this.dataBox;(v[0]!==p[0]||v[1]!==p[1]||v[2]!==p[2]||v[3]!==p[3])&&(v[0]=p[0],v[1]=p[1],v[2]=p[2],v[3]=p[3],this.setDirty())},h.setViewBox=function(p){var v=this.pixelRatio,g=this.viewBox;g[0]=0|Math.round(p[0]*v),g[1]=0|Math.round(p[1]*v),g[2]=0|Math.round(p[2]*v),g[3]=0|Math.round(p[3]*v);var y=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((p[2]-p[0])*y),0|Math.round((p[3]-p[1])*y)],this.setDirty()},h.update=function(p){p=p||{};var v=this.gl;this.pixelRatio=p.pixelRatio||1;var g=this.pixelRatio;this.pickPixelRatio=Math.max(g,1),this.setScreenBox(p.screenBox||[0,0,v.drawingBufferWidth/g,v.drawingBufferHeight/g]),this.screenBox,this.setViewBox(p.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/g,.125*(this.screenBox[3]-this.screenBox[1])/g,.875*(this.screenBox[2]-this.screenBox[0])/g,.875*(this.screenBox[3]-this.screenBox[1])/g]);var y=this.viewBox,m=(y[2]-y[0])/(y[3]-y[1]);this.setDataBox(p.dataBox||[-10,-10/m,10,10/m]),this.borderColor=p.borderColor!==!1&&(p.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(p.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(p.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(p.gridLineWidth||[1,1]).slice(),this.gridLineColor=c(p.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(p.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(p.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=c(p.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(p.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(p.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=c(p.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(p.titleCenter||[.5*(y[0]+y[2])/g,(y[3]+120)/g]).slice(),this.titleEnable=!("titleEnable"in p)||!!p.titleEnable,this.titleAngle=p.titleAngle||0,this.titleColor=(p.titleColor||[0,0,0,1]).slice(),this.labelPad=(p.labelPad||[15,15,15,15]).slice(),this.labelAngle=(p.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(p.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=c(p.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(p.tickPad||[15,15,15,15]).slice(),this.tickAngle=(p.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(p.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=c(p.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(p.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(p.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=c(p.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var _=p.ticks||[[],[]],d=this._tickBounds;d[0]=d[1]=1/0,d[2]=d[3]=-1/0;for(var S=0;S<2;++S){var w=_[S].slice(0);w.length!==0&&(w.sort(x),d[S]=Math.min(d[S],w[0].x),d[S+2]=Math.max(d[S+2],w[w.length-1].x))}this.grid.update({bounds:d,ticks:_}),this.text.update({bounds:d,ticks:_,labels:p.labels||["x","y"],labelSize:p.labelSize||[12,12],labelFont:p.labelFont||["sans-serif","sans-serif"],labelFontStyle:p.labelFontStyle||["normal","normal"],labelFontWeight:p.labelFontWeight||["normal","normal"],labelFontVariant:p.labelFontVariant||["normal","normal"],title:p.title||"",titleSize:p.titleSize||18,titleFont:p.titleFont||"sans-serif",titleFontStyle:p.titleFontStyle||"normal",titleFontWeight:p.titleFontWeight||"normal",titleFontVariant:p.titleFontVariant||"normal"}),this.static=!!p.static,this.setDirty()},h.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var p=this.objects.length-1;p>=0;--p)this.objects[p].dispose();for(this.objects.length=0,p=this.overlays.length-1;p>=0;--p)this.overlays[p].dispose();this.overlays.length=0,this.gl=null},h.addObject=function(p){this.objects.indexOf(p)<0&&(this.objects.push(p),this.setDirty())},h.removeObject=function(p){for(var v=this.objects,g=0;g<v.length;++g)if(v[g]===p){v.splice(g,1),this.setDirty();break}},h.addOverlay=function(p){this.overlays.indexOf(p)<0&&(this.overlays.push(p),this.setOverlayDirty())},h.removeOverlay=function(p){for(var v=this.overlays,g=0;g<v.length;++g)if(v[g]===p){v.splice(g,1),this.setOverlayDirty();break}}},4437:function(f,o,t){f.exports=function(h,c){h=h||document.body;var x=[.01,1/0];"distanceLimits"in(c=c||{})&&(x[0]=c.distanceLimits[0],x[1]=c.distanceLimits[1]),"zoomMin"in c&&(x[0]=c.zoomMin),"zoomMax"in c&&(x[1]=c.zoomMax);var p=n({center:c.center||[0,0,0],up:c.up||[0,1,0],eye:c.eye||[0,0,10],mode:c.mode||"orbit",distanceLimits:x}),v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],g=0,y=h.clientWidth,m=h.clientHeight,_={keyBindingMode:"rotate",enableWheel:!0,view:p,element:h,delay:c.delay||16,rotateSpeed:c.rotateSpeed||1,zoomSpeed:c.zoomSpeed||1,translateSpeed:c.translateSpeed||1,flipX:!!c.flipX,flipY:!!c.flipY,modes:p.modes,_ortho:c._ortho||c.projection&&c.projection.type==="orthographic"||!1,tick:function(){var d=i(),S=this.delay,w=d-2*S;p.idle(d-S),p.recalcMatrix(w),p.flush(d-(100+2*S));for(var E=!0,C=p.computedMatrix,O=0;O<16;++O)E=E&&v[O]===C[O],v[O]=C[O];var P=h.clientWidth===y&&h.clientHeight===m;return y=h.clientWidth,m=h.clientHeight,E?!P:(g=Math.exp(p.computedRadius[0]),!0)},lookAt:function(d,S,w){p.lookAt(p.lastT(),d,S,w)},rotate:function(d,S,w){p.rotate(p.lastT(),d,S,w)},pan:function(d,S,w){p.pan(p.lastT(),d,S,w)},translate:function(d,S,w){p.translate(p.lastT(),d,S,w)}};return Object.defineProperties(_,{matrix:{get:function(){return p.computedMatrix},set:function(d){return p.setMatrix(p.lastT(),d),p.computedMatrix},enumerable:!0},mode:{get:function(){return p.getMode()},set:function(d){var S=p.computedUp.slice(),w=p.computedEye.slice(),E=p.computedCenter.slice();if(p.setMode(d),d==="turntable"){var C=i();p._active.lookAt(C,w,E,S),p._active.lookAt(C+500,w,E,[0,0,1]),p._active.flush(C)}return p.getMode()},enumerable:!0},center:{get:function(){return p.computedCenter},set:function(d){return p.lookAt(p.lastT(),null,d),p.computedCenter},enumerable:!0},eye:{get:function(){return p.computedEye},set:function(d){return p.lookAt(p.lastT(),d),p.computedEye},enumerable:!0},up:{get:function(){return p.computedUp},set:function(d){return p.lookAt(p.lastT(),null,null,d),p.computedUp},enumerable:!0},distance:{get:function(){return g},set:function(d){return p.setDistance(p.lastT(),d),d},enumerable:!0},distanceLimits:{get:function(){return p.getDistanceLimits(x)},set:function(d){return p.setDistanceLimits(d),d},enumerable:!0}}),h.addEventListener("contextmenu",function(d){return d.preventDefault(),!1}),_._lastX=-1,_._lastY=-1,_._lastMods={shift:!1,control:!1,alt:!1,meta:!1},_.enableMouseListeners=function(){function d(S,w,E,C){var O=_.keyBindingMode;if(O!==!1){var P=O==="rotate",z=O==="pan",j=O==="zoom",I=!!C.control,N=!!C.alt,W=!!C.shift,F=!!(1&S),U=!!(2&S),H=!!(4&S),ne=1/h.clientHeight,$=ne*(w-_._lastX),K=ne*(E-_._lastY),Q=_.flipX?1:-1,Z=_.flipY?1:-1,X=Math.PI*_.rotateSpeed,te=i();if(_._lastX!==-1&&_._lastY!==-1&&((P&&F&&!I&&!N&&!W||F&&!I&&!N&&W)&&p.rotate(te,Q*X*$,-Z*X*K,0),(z&&F&&!I&&!N&&!W||U||F&&I&&!N&&!W)&&p.pan(te,-_.translateSpeed*$*g,_.translateSpeed*K*g,0),j&&F&&!I&&!N&&!W||H||F&&!I&&N&&!W)){var ae=-_.zoomSpeed*K/window.innerHeight*(te-p.lastT())*100;p.pan(te,0,0,g*(Math.exp(ae)-1))}return _._lastX=w,_._lastY=E,_._lastMods=C,!0}}_.mouseListener=r(h,d),h.addEventListener("touchstart",function(S){var w=l(S.changedTouches[0],h);d(0,w[0],w[1],_._lastMods),d(1,w[0],w[1],_._lastMods)},!!u&&{passive:!0}),h.addEventListener("touchmove",function(S){var w=l(S.changedTouches[0],h);d(1,w[0],w[1],_._lastMods),S.preventDefault()},!!u&&{passive:!1}),h.addEventListener("touchend",function(S){d(0,_._lastX,_._lastY,_._lastMods)},!!u&&{passive:!0}),_.wheelListener=a(h,function(S,w){if(_.keyBindingMode!==!1&&_.enableWheel){var E=_.flipX?1:-1,C=_.flipY?1:-1,O=i();if(Math.abs(S)>Math.abs(w))p.rotate(O,0,0,-S*E*Math.PI*_.rotateSpeed/window.innerWidth);else if(!_._ortho){var P=-_.zoomSpeed*C*w/window.innerHeight*(O-p.lastT())/20;p.pan(O,0,0,g*(Math.exp(P)-1))}}},!0)},_.enableMouseListeners(),_};var i=t(3025),n=t(6296),r=t(351),a=t(8512),l=t(24),u=t(7520)},799:function(f,o,t){var i=t(3236),n=t(9405),r=i([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),a=i([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);f.exports=function(l){return n(l,r,a,null,[{name:"position",type:"vec2"}])}},4100:function(f,o,t){var i=t(4437),n=t(3837),r=t(5445),a=t(4449),l=t(3589),u=t(2260),h=t(7169),c=t(351),x=t(4772),p=t(4040),v=t(799),g=t(9216)({tablet:!0,featureDetect:!0});function y(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function m(d){var S=Math.round(Math.log(Math.abs(d))/Math.log(10));if(S<0){var w=Math.round(Math.pow(10,-S));return Math.ceil(d*w)/w}return S>0?(w=Math.round(Math.pow(10,S)),Math.ceil(d/w)*w):Math.ceil(d)}function _(d){return typeof d!="boolean"||d}f.exports={createScene:function(d){(d=d||{}).camera=d.camera||{};var S=d.canvas;S||(S=document.createElement("canvas"),d.container?d.container.appendChild(S):document.body.appendChild(S));var w=d.gl;if(w||(d.glOptions&&(g=!!d.glOptions.preserveDrawingBuffer),w=function(ke,ze){var ve=null;try{(ve=ke.getContext("webgl",ze))||(ve=ke.getContext("experimental-webgl",ze))}catch{return null}return ve}(S,d.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:g})),!w)throw new Error("webgl not supported");var E=d.bounds||[[-10,-10,-10],[10,10,10]],C=new y,O=u(w,w.drawingBufferWidth,w.drawingBufferHeight,{preferFloat:!g}),P=v(w),z=d.cameraObject&&d.cameraObject._ortho===!0||d.camera.projection&&d.camera.projection.type==="orthographic"||!1,j={eye:d.camera.eye||[2,0,0],center:d.camera.center||[0,0,0],up:d.camera.up||[0,1,0],zoomMin:d.camera.zoomMax||.1,zoomMax:d.camera.zoomMin||100,mode:d.camera.mode||"turntable",_ortho:z},I=d.axes||{},N=n(w,I);N.enable=!I.disable;var W=d.spikes||{},F=a(w,W),U=[],H=[],ne=[],$=[],K=!0,Q=!0,Z={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},X=(Q=!0,[w.drawingBufferWidth,w.drawingBufferHeight]),te=d.cameraObject||i(S,j),ae={gl:w,contextLost:!1,pixelRatio:d.pixelRatio||1,canvas:S,selection:C,camera:te,axes:N,axesPixels:null,spikes:F,bounds:E,objects:U,shape:X,aspect:d.aspectRatio||[1,1,1],pickRadius:d.pickRadius||10,zNear:d.zNear||.01,zFar:d.zFar||1e3,fovy:d.fovy||Math.PI/4,clearColor:d.clearColor||[0,0,0,0],autoResize:_(d.autoResize),autoBounds:_(d.autoBounds),autoScale:!!d.autoScale,autoCenter:_(d.autoCenter),clipToBounds:_(d.clipToBounds),snapToData:!!d.snapToData,onselect:d.onselect||null,onrender:d.onrender||null,onclick:d.onclick||null,cameraParams:Z,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(ke){this.aspect[0]=ke.x,this.aspect[1]=ke.y,this.aspect[2]=ke.z,Q=!0},setBounds:function(ke,ze){this.bounds[0][ke]=ze.min,this.bounds[1][ke]=ze.max},setClearColor:function(ke){this.clearColor=ke},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},se=[w.drawingBufferWidth/ae.pixelRatio|0,w.drawingBufferHeight/ae.pixelRatio|0];function ce(){if(!ae._stopped&&ae.autoResize){var ke=S.parentNode,ze=1,ve=1;ke&&ke!==document.body?(ze=ke.clientWidth,ve=ke.clientHeight):(ze=window.innerWidth,ve=window.innerHeight);var oe=0|Math.ceil(ze*ae.pixelRatio),ie=0|Math.ceil(ve*ae.pixelRatio);if(oe!==S.width||ie!==S.height){S.width=oe,S.height=ie;var he=S.style;he.position=he.position||"absolute",he.left="0px",he.top="0px",he.width=ze+"px",he.height=ve+"px",K=!0}}}function fe(){for(var ke=U.length,ze=$.length,ve=0;ve<ze;++ve)ne[ve]=0;e:for(ve=0;ve<ke;++ve){var oe=U[ve],ie=oe.pickSlots;if(ie){for(var he=0;he<ze;++he)if(ne[he]+ie<255){H[ve]=he,oe.setPickBase(ne[he]+1),ne[he]+=ie;continue e}var Se=l(w,X);H[ve]=ze,$.push(Se),ne.push(ie),oe.setPickBase(1),ze+=1}else H[ve]=-1}for(;ze>0&&ne[ze-1]===0;)ne.pop(),$.pop().dispose()}function pe(){if(ae.contextLost)return!0;w.isContextLost()&&(ae.contextLost=!0,ae.mouseListener.enabled=!1,ae.selection.object=null,ae.oncontextloss&&ae.oncontextloss())}ae.autoResize&&ce(),window.addEventListener("resize",ce),ae.update=function(ke){ae._stopped||(K=!0,Q=!0)},ae.add=function(ke){ae._stopped||(ke.axes=N,U.push(ke),H.push(-1),K=!0,Q=!0,fe())},ae.remove=function(ke){if(!ae._stopped){var ze=U.indexOf(ke);ze<0||(U.splice(ze,1),H.pop(),K=!0,Q=!0,fe())}},ae.dispose=function(){if(!ae._stopped&&(ae._stopped=!0,window.removeEventListener("resize",ce),S.removeEventListener("webglcontextlost",pe),ae.mouseListener.enabled=!1,!ae.contextLost)){N.dispose(),F.dispose();for(var ke=0;ke<U.length;++ke)U[ke].dispose();for(O.dispose(),ke=0;ke<$.length;++ke)$[ke].dispose();P.dispose(),w=null,N=null,F=null,U=[]}},ae._mouseRotating=!1,ae._prevButtons=0,ae.enableMouseListeners=function(){ae.mouseListener=c(S,function(ke,ze,ve){if(!ae._stopped){var oe=$.length,ie=U.length,he=C.object;C.distance=1/0,C.mouse[0]=ze,C.mouse[1]=ve,C.object=null,C.screen=null,C.dataCoordinate=C.dataPosition=null;var Se=!1;if(ke&&ae._prevButtons)ae._mouseRotating=!0;else{ae._mouseRotating&&(Q=!0),ae._mouseRotating=!1;for(var ye=0;ye<oe;++ye){var we=$[ye].query(ze,se[1]-ve-1,ae.pickRadius);if(we){if(we.distance>C.distance)continue;for(var Me=0;Me<ie;++Me){var Oe=U[Me];if(H[Me]===ye){var Ie=Oe.pick(we);Ie&&(C.buttons=ke,C.screen=we.coord,C.distance=we.distance,C.object=Oe,C.index=Ie.distance,C.dataPosition=Ie.position,C.dataCoordinate=Ie.dataCoordinate,C.data=Ie,Se=!0)}}}}}he&&he!==C.object&&(he.highlight&&he.highlight(null),K=!0),C.object&&(C.object.highlight&&C.object.highlight(C.data),K=!0),(Se=Se||C.object!==he)&&ae.onselect&&ae.onselect(C),1&ke&&!(1&ae._prevButtons)&&ae.onclick&&ae.onclick(C),ae._prevButtons=ke}})},S.addEventListener("webglcontextlost",pe);var ge=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],me=[ge[0].slice(),ge[1].slice()];function be(){if(!pe()){ce();var ke=ae.camera.tick();Z.view=ae.camera.matrix,K=K||ke,Q=Q||ke,N.pixelRatio=ae.pixelRatio,F.pixelRatio=ae.pixelRatio;var ze=U.length,ve=ge[0],oe=ge[1];ve[0]=ve[1]=ve[2]=1/0,oe[0]=oe[1]=oe[2]=-1/0;for(var ie=0;ie<ze;++ie){(Ee=U[ie]).pixelRatio=ae.pixelRatio,Ee.axes=ae.axes,K=K||!!Ee.dirty,Q=Q||!!Ee.dirty;var he=Ee.bounds;if(he)for(var Se=he[0],ye=he[1],we=0;we<3;++we)ve[we]=Math.min(ve[we],Se[we]),oe[we]=Math.max(oe[we],ye[we])}var Me=ae.bounds;if(ae.autoBounds)for(we=0;we<3;++we){if(oe[we]<ve[we])ve[we]=-1,oe[we]=1;else{ve[we]===oe[we]&&(ve[we]-=1,oe[we]+=1);var Oe=.05*(oe[we]-ve[we]);ve[we]=ve[we]-Oe,oe[we]=oe[we]+Oe}Me[0][we]=ve[we],Me[1][we]=oe[we]}var Ie=!1;for(we=0;we<3;++we)Ie=Ie||me[0][we]!==Me[0][we]||me[1][we]!==Me[1][we],me[0][we]=Me[0][we],me[1][we]=Me[1][we];if(Q=Q||Ie,K=K||Ie){if(Ie){var de=[0,0,0];for(ie=0;ie<3;++ie)de[ie]=m((Me[1][ie]-Me[0][ie])/10);N.autoTicks?N.update({bounds:Me,tickSpacing:de}):N.update({bounds:Me})}var _e=w.drawingBufferWidth,Ae=w.drawingBufferHeight;for(X[0]=_e,X[1]=Ae,se[0]=0|Math.max(_e/ae.pixelRatio,1),se[1]=0|Math.max(Ae/ae.pixelRatio,1),function(Fe,Ve){var Ye=Fe.bounds,tt=Fe.cameraParams,nt=tt.projection,ht=tt.model,vt=Fe.gl.drawingBufferWidth,pt=Fe.gl.drawingBufferHeight,Qe=Fe.zNear,Ke=Fe.zFar,Mt=Fe.fovy,Ot=vt/pt;Ve?(p(nt,-Ot,Ot,-1,1,Qe,Ke),tt._ortho=!0):(x(nt,Mt,Ot,Qe,Ke),tt._ortho=!1);for(var Pt=0;Pt<16;++Pt)ht[Pt]=0;ht[15]=1;var St=0;for(Pt=0;Pt<3;++Pt)St=Math.max(St,Ye[1][Pt]-Ye[0][Pt]);for(Pt=0;Pt<3;++Pt)Fe.autoScale?ht[5*Pt]=Fe.aspect[Pt]/(Ye[1][Pt]-Ye[0][Pt]):ht[5*Pt]=1/St,Fe.autoCenter&&(ht[12+Pt]=.5*-ht[5*Pt]*(Ye[0][Pt]+Ye[1][Pt]))}(ae,z),ie=0;ie<ze;++ie)(Ee=U[ie]).axesBounds=Me,ae.clipToBounds&&(Ee.clipBounds=Me);C.object&&(ae.snapToData?F.position=C.dataCoordinate:F.position=C.dataPosition,F.bounds=Me),Q&&(Q=!1,function(){if(!pe()){w.colorMask(!0,!0,!0,!0),w.depthMask(!0),w.disable(w.BLEND),w.enable(w.DEPTH_TEST),w.depthFunc(w.LEQUAL);for(var Fe=U.length,Ve=$.length,Ye=0;Ye<Ve;++Ye){var tt=$[Ye];tt.shape=se,tt.begin();for(var nt=0;nt<Fe;++nt)if(H[nt]===Ye){var ht=U[nt];ht.drawPick&&(ht.pixelRatio=1,ht.drawPick(Z))}tt.end()}}}()),ae.axesPixels=r(ae.axes,Z,_e,Ae),ae.onrender&&ae.onrender(),w.bindFramebuffer(w.FRAMEBUFFER,null),w.viewport(0,0,_e,Ae),ae.clearRGBA(),w.depthMask(!0),w.colorMask(!0,!0,!0,!0),w.enable(w.DEPTH_TEST),w.depthFunc(w.LEQUAL),w.disable(w.BLEND),w.disable(w.CULL_FACE);var Pe=!1;for(N.enable&&(Pe=Pe||N.isTransparent(),N.draw(Z)),F.axes=N,C.object&&F.draw(Z),w.disable(w.CULL_FACE),ie=0;ie<ze;++ie)(Ee=U[ie]).axes=N,Ee.pixelRatio=ae.pixelRatio,Ee.isOpaque&&Ee.isOpaque()&&Ee.draw(Z),Ee.isTransparent&&Ee.isTransparent()&&(Pe=!0);if(Pe){for(O.shape=X,O.bind(),w.clear(w.DEPTH_BUFFER_BIT),w.colorMask(!1,!1,!1,!1),w.depthMask(!0),w.depthFunc(w.LESS),N.enable&&N.isTransparent()&&N.drawTransparent(Z),ie=0;ie<ze;++ie)(Ee=U[ie]).isOpaque&&Ee.isOpaque()&&Ee.draw(Z);for(w.enable(w.BLEND),w.blendEquation(w.FUNC_ADD),w.blendFunc(w.ONE,w.ONE_MINUS_SRC_ALPHA),w.colorMask(!0,!0,!0,!0),w.depthMask(!1),w.clearColor(0,0,0,0),w.clear(w.COLOR_BUFFER_BIT),N.isTransparent()&&N.drawTransparent(Z),ie=0;ie<ze;++ie){var Ee;(Ee=U[ie]).isTransparent&&Ee.isTransparent()&&Ee.drawTransparent(Z)}w.bindFramebuffer(w.FRAMEBUFFER,null),w.blendFunc(w.ONE,w.ONE_MINUS_SRC_ALPHA),w.disable(w.DEPTH_TEST),P.bind(),O.color[0].bind(0),P.uniforms.accumBuffer=0,h(w),w.disable(w.BLEND)}for(K=!1,ie=0;ie<ze;++ie)U[ie].dirty=!1}}}return ae.enableMouseListeners(),function ke(){ae._stopped||ae.contextLost||(be(),requestAnimationFrame(ke))}(),ae.redraw=function(){ae._stopped||(K=!0,be())},ae},createCamera:i}},6640:function(f,o,t){var i=t(3236);o.pointVertex=i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),o.pointFragment=i([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),o.pickVertex=i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),o.pickFragment=i([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},4696:function(f,o,t){var i=t(9405),n=t(2762),r=t(1888),a=t(6640);function l(x,p,v,g,y){this.plot=x,this.offsetBuffer=p,this.pickBuffer=v,this.shader=g,this.pickShader=y,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}f.exports=function(x,p){var v=x.gl,g=new l(x,n(v),n(v),i(v,a.pointVertex,a.pointFragment),i(v,a.pickVertex,a.pickFragment));return g.update(p),x.addObject(g),g};var u,h,c=l.prototype;c.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},c.update=function(x){var p;function v(w,E){return w in x?x[w]:E}x=x||{},this.sizeMin=v("sizeMin",.5),this.sizeMax=v("sizeMax",20),this.color=v("color",[1,0,0,1]).slice(),this.areaRatio=v("areaRatio",1),this.borderColor=v("borderColor",[0,0,0,1]).slice(),this.blend=v("blend",!1);var g=x.positions.length>>>1,y=x.positions instanceof Float32Array,m=x.idToIndex instanceof Int32Array&&x.idToIndex.length>=g,_=x.positions,d=y?_:r.mallocFloat32(_.length),S=m?x.idToIndex:r.mallocInt32(g);if(y||d.set(_),!m)for(d.set(_),p=0;p<g;p++)S[p]=p;this.points=_,this.offsetBuffer.update(d),this.pickBuffer.update(S),y||r.free(d),m||r.free(S),this.pointCount=g,this.pickOffset=0},c.unifiedDraw=(u=[1,0,0,0,1,0,0,0,1],h=[0,0,0,0],function(x){var p=x!==void 0,v=p?this.pickShader:this.shader,g=this.plot.gl,y=this.plot.dataBox;if(this.pointCount===0)return x;var m=y[2]-y[0],_=y[3]-y[1],d=function(C,O){var P,z=0,j=C.length>>>1;for(P=0;P<j;P++){var I=C[2*P],N=C[2*P+1];I>=O[0]&&I<=O[2]&&N>=O[1]&&N<=O[3]&&z++}return z}(this.points,y),S=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(d,.33333)));u[0]=2/m,u[4]=2/_,u[6]=-2*y[0]/m-1,u[7]=-2*y[1]/_-1,this.offsetBuffer.bind(),v.bind(),v.attributes.position.pointer(),v.uniforms.matrix=u,v.uniforms.color=this.color,v.uniforms.borderColor=this.borderColor,v.uniforms.pointCloud=S<5,v.uniforms.pointSize=S,v.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),p&&(h[0]=255&x,h[1]=x>>8&255,h[2]=x>>16&255,h[3]=x>>24&255,this.pickBuffer.bind(),v.attributes.pickId.pointer(g.UNSIGNED_BYTE),v.uniforms.pickOffset=h,this.pickOffset=x);var w=g.getParameter(g.BLEND),E=g.getParameter(g.DITHER);return w&&!this.blend&&g.disable(g.BLEND),E&&g.disable(g.DITHER),g.drawArrays(g.POINTS,0,this.pointCount),w&&!this.blend&&g.enable(g.BLEND),E&&g.enable(g.DITHER),x+this.pointCount}),c.draw=c.unifiedDraw,c.drawPick=c.unifiedDraw,c.pick=function(x,p,v){var g=this.pickOffset,y=this.pointCount;if(v<g||v>=g+y)return null;var m=v-g,_=this.points;return{object:this,pointId:m,dataCoord:[_[2*m],_[2*m+1]]}}},783:function(f){f.exports=function(o,t,i,n){var r,a,l,u,h,c=t[0],x=t[1],p=t[2],v=t[3],g=i[0],y=i[1],m=i[2],_=i[3];return(a=c*g+x*y+p*m+v*_)<0&&(a=-a,g=-g,y=-y,m=-m,_=-_),1-a>1e-6?(r=Math.acos(a),l=Math.sin(r),u=Math.sin((1-n)*r)/l,h=Math.sin(n*r)/l):(u=1-n,h=n),o[0]=u*c+h*g,o[1]=u*x+h*y,o[2]=u*p+h*m,o[3]=u*v+h*_,o}},5964:function(f){f.exports=function(o){return o||o===0?o.toString():""}},9366:function(f,o,t){var i=t(4359);f.exports=function(r,a,l){var u=[a.style,a.weight,a.variant,a.family].join("_"),h=n[u];if(h||(h=n[u]={}),r in h)return h[r];var c={textAlign:"center",textBaseline:"middle",lineHeight:1,font:a.family,fontStyle:a.style,fontWeight:a.weight,fontVariant:a.variant,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},x=i(r,c);c.triangles=!1;var p,v,g=i(r,c);if(l&&l!==1){for(p=0;p<x.positions.length;++p)for(v=0;v<x.positions[p].length;++v)x.positions[p][v]/=l;for(p=0;p<g.positions.length;++p)for(v=0;v<g.positions[p].length;++v)g.positions[p][v]/=l}var y=[[1/0,1/0],[-1/0,-1/0]],m=g.positions.length;for(p=0;p<m;++p){var _=g.positions[p];for(v=0;v<2;++v)y[0][v]=Math.min(y[0][v],_[v]),y[1][v]=Math.max(y[1][v],_[v])}return h[r]=[x,g,y]};var n={}},1283:function(f,o,t){var i=t(9405),n=t(3236),r=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),a=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),l=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * (view * (model * vec4(position, 1)));
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * (view * (model * vec4(dataPosition, 1)));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),u=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),h=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),c=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],x={vertex:r,fragment:u,attributes:c},p={vertex:a,fragment:u,attributes:c},v={vertex:l,fragment:u,attributes:c},g={vertex:r,fragment:h,attributes:c},y={vertex:a,fragment:h,attributes:c},m={vertex:l,fragment:h,attributes:c};function _(d,S){var w=i(d,S),E=w.attributes;return E.position.location=0,E.color.location=1,E.glyph.location=2,E.id.location=3,w}o.createPerspective=function(d){return _(d,x)},o.createOrtho=function(d){return _(d,p)},o.createProject=function(d){return _(d,v)},o.createPickPerspective=function(d){return _(d,g)},o.createPickOrtho=function(d){return _(d,y)},o.createPickProject=function(d){return _(d,m)}},8418:function(f,o,t){var i=t(5219),n=t(2762),r=t(8116),a=t(1888),l=t(6760),u=t(1283),h=t(9366),c=t(5964),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],p=ArrayBuffer,v=DataView;function g(K){return Array.isArray(K)||function(Q){return p.isView(Q)&&!(Q instanceof v)}(K)}function y(K,Q){var Z=K[0],X=K[1],te=K[2],ae=K[3];return K[0]=Q[0]*Z+Q[4]*X+Q[8]*te+Q[12]*ae,K[1]=Q[1]*Z+Q[5]*X+Q[9]*te+Q[13]*ae,K[2]=Q[2]*Z+Q[6]*X+Q[10]*te+Q[14]*ae,K[3]=Q[3]*Z+Q[7]*X+Q[11]*te+Q[15]*ae,K}function m(K,Q,Z,X){return y(X,X),y(X,X),y(X,X)}function _(K,Q){this.index=K,this.dataCoordinate=this.position=Q}function d(K){return K===!0||K>1?1:K}function S(K,Q,Z,X,te,ae,se,ce,fe,pe,ge,me){this.gl=K,this.pixelRatio=1,this.shader=Q,this.orthoShader=Z,this.projectShader=X,this.pointBuffer=te,this.colorBuffer=ae,this.glyphBuffer=se,this.idBuffer=ce,this.vao=fe,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=pe,this.pickOrthoShader=ge,this.pickProjectShader=me,this.points=[],this._selectResult=new _(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}f.exports=function(K){var Q=K.gl,Z=u.createPerspective(Q),X=u.createOrtho(Q),te=u.createProject(Q),ae=u.createPickPerspective(Q),se=u.createPickOrtho(Q),ce=u.createPickProject(Q),fe=n(Q),pe=n(Q),ge=n(Q),me=n(Q),be=new S(Q,Z,X,te,fe,pe,ge,me,r(Q,[{buffer:fe,size:3,type:Q.FLOAT},{buffer:pe,size:4,type:Q.FLOAT},{buffer:ge,size:2,type:Q.FLOAT},{buffer:me,size:4,type:Q.UNSIGNED_BYTE,normalized:!0}]),ae,se,ce);return be.update(K),be};var w=S.prototype;w.pickSlots=1,w.setPickBase=function(K){this.pickId=K},w.isTransparent=function(){if(this.hasAlpha)return!0;for(var K=0;K<3;++K)if(this.axesProject[K]&&this.projectHasAlpha)return!0;return!1},w.isOpaque=function(){if(!this.hasAlpha)return!0;for(var K=0;K<3;++K)if(this.axesProject[K]&&!this.projectHasAlpha)return!0;return!1};var E=[0,0],C=[0,0,0],O=[0,0,0],P=[0,0,0,1],z=[0,0,0,1],j=x.slice(),I=[0,0,0],N=[[0,0,0],[0,0,0]];function W(K){return K[0]=K[1]=K[2]=0,K}function F(K,Q){return K[0]=Q[0],K[1]=Q[1],K[2]=Q[2],K[3]=1,K}function U(K,Q,Z,X){return K[0]=Q[0],K[1]=Q[1],K[2]=Q[2],K[Z]=X,K}var H=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function ne(K,Q,Z,X,te,ae,se){var ce=Z.gl;if((ae===Z.projectHasAlpha||se)&&function(pe,ge,me,be){var ke,ze=ge.axesProject,ve=ge.gl,oe=pe.uniforms,ie=me.model||x,he=me.view||x,Se=me.projection||x,ye=ge.axesBounds,we=function(ht){for(var vt=N,pt=0;pt<2;++pt)for(var Qe=0;Qe<3;++Qe)vt[pt][Qe]=Math.max(Math.min(ht[pt][Qe],1e8),-1e8);return vt}(ge.clipBounds);ke=ge.axes&&ge.axes.lastCubeProps?ge.axes.lastCubeProps.axis:[1,1,1],E[0]=2/ve.drawingBufferWidth,E[1]=2/ve.drawingBufferHeight,pe.bind(),oe.view=he,oe.projection=Se,oe.screenSize=E,oe.highlightId=ge.highlightId,oe.highlightScale=ge.highlightScale,oe.clipBounds=we,oe.pickGroup=ge.pickId/255,oe.pixelRatio=be;for(var Me=0;Me<3;++Me)if(ze[Me]){oe.scale=ge.projectScale[Me],oe.opacity=ge.projectOpacity[Me];for(var Oe=j,Ie=0;Ie<16;++Ie)Oe[Ie]=0;for(Ie=0;Ie<4;++Ie)Oe[5*Ie]=1;Oe[5*Me]=0,ke[Me]<0?Oe[12+Me]=ye[0][Me]:Oe[12+Me]=ye[1][Me],l(Oe,ie,Oe),oe.model=Oe;var de=(Me+1)%3,_e=(Me+2)%3,Ae=W(C),Pe=W(O);Ae[de]=1,Pe[_e]=1;var Ee=m(0,0,0,F(P,Ae)),Fe=m(0,0,0,F(z,Pe));if(Math.abs(Ee[1])>Math.abs(Fe[1])){var Ve=Ee;Ee=Fe,Fe=Ve,Ve=Ae,Ae=Pe,Pe=Ve;var Ye=de;de=_e,_e=Ye}Ee[0]<0&&(Ae[de]=-1),Fe[1]>0&&(Pe[_e]=-1);var tt=0,nt=0;for(Ie=0;Ie<4;++Ie)tt+=Math.pow(ie[4*de+Ie],2),nt+=Math.pow(ie[4*_e+Ie],2);Ae[de]/=Math.sqrt(tt),Pe[_e]/=Math.sqrt(nt),oe.axes[0]=Ae,oe.axes[1]=Pe,oe.fragClipBounds[0]=U(I,we[0],Me,-1e8),oe.fragClipBounds[1]=U(I,we[1],Me,1e8),ge.vao.bind(),ge.vao.draw(ve.TRIANGLES,ge.vertexCount),ge.lineWidth>0&&(ve.lineWidth(ge.lineWidth*be),ge.vao.draw(ve.LINES,ge.lineVertexCount,ge.vertexCount)),ge.vao.unbind()}}(Q,Z,X,te),ae===Z.hasAlpha||se){K.bind();var fe=K.uniforms;fe.model=X.model||x,fe.view=X.view||x,fe.projection=X.projection||x,E[0]=2/ce.drawingBufferWidth,E[1]=2/ce.drawingBufferHeight,fe.screenSize=E,fe.highlightId=Z.highlightId,fe.highlightScale=Z.highlightScale,fe.fragClipBounds=H,fe.clipBounds=Z.axes.bounds,fe.opacity=Z.opacity,fe.pickGroup=Z.pickId/255,fe.pixelRatio=te,Z.vao.bind(),Z.vao.draw(ce.TRIANGLES,Z.vertexCount),Z.lineWidth>0&&(ce.lineWidth(Z.lineWidth*te),Z.vao.draw(ce.LINES,Z.lineVertexCount,Z.vertexCount)),Z.vao.unbind()}}function $(K,Q,Z,X){var te;te=g(K)?Q<K.length?K[Q]:void 0:K,te=c(te);var ae=!0;i(te)&&(te="",ae=!1),Z||(Z={});var se=Z.family;g(se)&&(se=se[Q]),se||(se="normal");var ce=Z.weight;g(ce)&&(ce=ce[Q]),ce||(ce="normal");var fe=Z.style;g(fe)&&(fe=fe[Q]),fe||(fe="normal");var pe=Z.variant;g(pe)&&(pe=pe[Q]),pe||(pe="normal");var ge=h(te,{family:se,weight:ce,style:fe,variant:pe},X);return{mesh:(ge=h(te,Z,X))[0],lines:ge[1],bounds:ge[2],visible:ae}}w.draw=function(K){ne(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,K,this.pixelRatio,!1,!1)},w.drawTransparent=function(K){ne(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,K,this.pixelRatio,!0,!1)},w.drawPick=function(K){ne(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,K,1,!0,!0)},w.pick=function(K){if(!K||K.id!==this.pickId)return null;var Q=K.value[2]+(K.value[1]<<8)+(K.value[0]<<16);if(Q>=this.pointCount||Q<0)return null;var Z=this.points[Q],X=this._selectResult;X.index=Q;for(var te=0;te<3;++te)X.position[te]=X.dataCoordinate[te]=Z[te];return X},w.highlight=function(K){if(K){var Q=K.index,Z=255&Q,X=Q>>8&255,te=Q>>16&255;this.highlightId=[Z/255,X/255,te/255,0]}else this.highlightId=[1,1,1,1]},w.update=function(K){if("perspective"in(K=K||{})&&(this.useOrtho=!K.perspective),"orthographic"in K&&(this.useOrtho=!!K.orthographic),"lineWidth"in K&&(this.lineWidth=K.lineWidth),"project"in K)if(g(K.project))this.axesProject=K.project;else{var Q=!!K.project;this.axesProject=[Q,Q,Q]}if("projectScale"in K)if(g(K.projectScale))this.projectScale=K.projectScale.slice();else{var Z=+K.projectScale;this.projectScale=[Z,Z,Z]}if(this.projectHasAlpha=!1,"projectOpacity"in K){g(K.projectOpacity)?this.projectOpacity=K.projectOpacity.slice():(Z=+K.projectOpacity,this.projectOpacity=[Z,Z,Z]);for(var X=0;X<3;++X)this.projectOpacity[X]=d(this.projectOpacity[X]),this.projectOpacity[X]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in K&&(this.opacity=d(K.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var te,ae,se=K.position,ce={family:K.font||"normal",style:K.fontStyle||"normal",weight:K.fontWeight||"normal",variant:K.fontVariant||"normal"},fe=K.alignment||[0,0];if(fe.length===2)te=fe[0],ae=fe[1];else for(te=[],ae=[],X=0;X<fe.length;++X)te[X]=fe[X][0],ae[X]=fe[X][1];var pe=[1/0,1/0,1/0],ge=[-1/0,-1/0,-1/0],me=K.glyph,be=K.color,ke=K.size,ze=K.angle,ve=K.lineColor,oe=-1,ie=0,he=0,Se=0;if(se.length){Se=se.length;e:for(X=0;X<Se;++X){for(var ye=se[X],we=0;we<3;++we)if(isNaN(ye[we])||!isFinite(ye[we]))continue e;var Me=(vt=$(me,X,ce,this.pixelRatio)).mesh,Oe=vt.lines,Ie=vt.bounds;ie+=3*Me.cells.length,he+=2*Oe.edges.length}}var de=ie+he,_e=a.mallocFloat(3*de),Ae=a.mallocFloat(4*de),Pe=a.mallocFloat(2*de),Ee=a.mallocUint32(de);if(de>0){var Fe=0,Ve=ie,Ye=[0,0,0,1],tt=[0,0,0,1],nt=g(be)&&g(be[0]),ht=g(ve)&&g(ve[0]);e:for(X=0;X<Se;++X){for(oe+=1,ye=se[X],we=0;we<3;++we){if(isNaN(ye[we])||!isFinite(ye[we]))continue e;ge[we]=Math.max(ge[we],ye[we]),pe[we]=Math.min(pe[we],ye[we])}Me=(vt=$(me,X,ce,this.pixelRatio)).mesh,Oe=vt.lines,Ie=vt.bounds;var vt,pt=vt.visible;if(pt)if(g(be)){if((Qe=nt?X<be.length?be[X]:[0,0,0,0]:be).length===3){for(we=0;we<3;++we)Ye[we]=Qe[we];Ye[3]=1}else if(Qe.length===4){for(we=0;we<4;++we)Ye[we]=Qe[we];!this.hasAlpha&&Qe[3]<1&&(this.hasAlpha=!0)}}else Ye[0]=Ye[1]=Ye[2]=0,Ye[3]=1;else Ye=[1,1,1,0];if(pt)if(g(ve)){var Qe;if((Qe=ht?X<ve.length?ve[X]:[0,0,0,0]:ve).length===3){for(we=0;we<3;++we)tt[we]=Qe[we];tt[we]=1}else if(Qe.length===4){for(we=0;we<4;++we)tt[we]=Qe[we];!this.hasAlpha&&Qe[3]<1&&(this.hasAlpha=!0)}}else tt[0]=tt[1]=tt[2]=0,tt[3]=1;else tt=[1,1,1,0];var Ke=.5;pt?g(ke)?Ke=X<ke.length?+ke[X]:12:ke?Ke=+ke:this.useOrtho&&(Ke=12):Ke=0;var Mt=0;g(ze)?Mt=X<ze.length?+ze[X]:0:ze&&(Mt=+ze);var Ot=Math.cos(Mt),Pt=Math.sin(Mt);for(ye=se[X],we=0;we<3;++we)ge[we]=Math.max(ge[we],ye[we]),pe[we]=Math.min(pe[we],ye[we]);var St=te,He=ae;St=0,g(te)?St=X<te.length?te[X]:0:te&&(St=te),He=0,g(ae)?He=X<ae.length?ae[X]:0:ae&&(He=ae);var We=[St*=St>0?1-Ie[0][0]:St<0?1+Ie[1][0]:1,He*=He>0?1-Ie[0][1]:He<0?1+Ie[1][1]:1],Be=Me.cells||[],Ge=Me.positions||[];for(we=0;we<Be.length;++we)for(var ot=Be[we],it=0;it<3;++it){for(var dt=0;dt<3;++dt)_e[3*Fe+dt]=ye[dt];for(dt=0;dt<4;++dt)Ae[4*Fe+dt]=Ye[dt];Ee[Fe]=oe;var gt=Ge[ot[it]];Pe[2*Fe]=Ke*(Ot*gt[0]-Pt*gt[1]+We[0]),Pe[2*Fe+1]=Ke*(Pt*gt[0]+Ot*gt[1]+We[1]),Fe+=1}for(Be=Oe.edges,Ge=Oe.positions,we=0;we<Be.length;++we)for(ot=Be[we],it=0;it<2;++it){for(dt=0;dt<3;++dt)_e[3*Ve+dt]=ye[dt];for(dt=0;dt<4;++dt)Ae[4*Ve+dt]=tt[dt];Ee[Ve]=oe,gt=Ge[ot[it]],Pe[2*Ve]=Ke*(Ot*gt[0]-Pt*gt[1]+We[0]),Pe[2*Ve+1]=Ke*(Pt*gt[0]+Ot*gt[1]+We[1]),Ve+=1}}}this.bounds=[pe,ge],this.points=se,this.pointCount=se.length,this.vertexCount=ie,this.lineVertexCount=he,this.pointBuffer.update(_e),this.colorBuffer.update(Ae),this.glyphBuffer.update(Pe),this.idBuffer.update(Ee),a.free(_e),a.free(Ae),a.free(Pe),a.free(Ee)},w.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},4298:function(f,o,t){var i=t(3236);o.boxVertex=i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),o.boxFragment=i([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},3161:function(f,o,t){var i=t(9405),n=t(2762),r=t(4298);function a(u,h,c){this.plot=u,this.boxBuffer=h,this.boxShader=c,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}f.exports=function(u,h){var c=u.gl,x=new a(u,n(c,[0,0,0,1,1,0,1,1]),i(c,r.boxVertex,r.boxFragment));return x.update(h),u.addOverlay(x),x};var l=a.prototype;l.draw=function(){if(this.enabled){var u=this.plot,h=this.selectBox,c=this.borderWidth,x=(this.innerFill,this.innerColor),p=(this.outerFill,this.outerColor),v=this.borderColor,g=u.box,y=u.screenBox,m=u.dataBox,_=u.viewBox,d=u.pixelRatio,S=(h[0]-m[0])*(_[2]-_[0])/(m[2]-m[0])+_[0],w=(h[1]-m[1])*(_[3]-_[1])/(m[3]-m[1])+_[1],E=(h[2]-m[0])*(_[2]-_[0])/(m[2]-m[0])+_[0],C=(h[3]-m[1])*(_[3]-_[1])/(m[3]-m[1])+_[1];if(S=Math.max(S,_[0]),w=Math.max(w,_[1]),E=Math.min(E,_[2]),C=Math.min(C,_[3]),!(E<S||C<w)){g.bind();var O=y[2]-y[0],P=y[3]-y[1];if(this.outerFill&&(g.drawBox(0,0,O,w,p),g.drawBox(0,w,S,C,p),g.drawBox(0,C,O,P,p),g.drawBox(E,w,O,C,p)),this.innerFill&&g.drawBox(S,w,E,C,x),c>0){var z=c*d;g.drawBox(S-z,w-z,E+z,w+z,v),g.drawBox(S-z,C-z,E+z,C+z,v),g.drawBox(S-z,w-z,S+z,C+z,v),g.drawBox(E-z,w-z,E+z,C+z,v)}}}},l.update=function(u){u=u||{},this.innerFill=!!u.innerFill,this.outerFill=!!u.outerFill,this.innerColor=(u.innerColor||[0,0,0,.5]).slice(),this.outerColor=(u.outerColor||[0,0,0,.5]).slice(),this.borderColor=(u.borderColor||[0,0,0,1]).slice(),this.borderWidth=u.borderWidth||0,this.selectBox=(u.selectBox||this.selectBox).slice()},l.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},3589:function(f,o,t){f.exports=function(c,x){var p=x[0],v=x[1];return new u(c,i(c,p,v,{}),n.mallocUint8(p*v*4))};var i=t(2260),n=t(1888),r=t(9618),a=t(8828).nextPow2;function l(c,x,p,v,g){this.coord=[c,x],this.id=p,this.value=v,this.distance=g}function u(c,x,p){this.gl=c,this.fbo=x,this.buffer=p,this._readTimeout=null;var v=this;this._readCallback=function(){v.gl&&(x.bind(),c.readPixels(0,0,x.shape[0],x.shape[1],c.RGBA,c.UNSIGNED_BYTE,v.buffer),v._readTimeout=null)}}var h=u.prototype;Object.defineProperty(h,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(c){if(this.gl){this.fbo.shape=c;var x=this.fbo.shape[0],p=this.fbo.shape[1];if(p*x*4>this.buffer.length){n.free(this.buffer);for(var v=this.buffer=n.mallocUint8(a(p*x*4)),g=0;g<p*x*4;++g)v[g]=255}return c}}}),h.begin=function(){var c=this.gl;this.shape,c&&(this.fbo.bind(),c.clearColor(1,1,1,1),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT))},h.end=function(){var c=this.gl;c&&(c.bindFramebuffer(c.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},h.query=function(c,x,p){if(!this.gl)return null;var v=this.fbo.shape.slice();c|=0,x|=0,typeof p!="number"&&(p=1);var g=0|Math.min(Math.max(c-p,0),v[0]),y=0|Math.min(Math.max(c+p,0),v[0]),m=0|Math.min(Math.max(x-p,0),v[1]),_=0|Math.min(Math.max(x+p,0),v[1]);if(y<=g||_<=m)return null;var d=[y-g,_-m],S=r(this.buffer,[d[0],d[1],4],[4,4*v[0],1],4*(g+v[0]*m)),w=function(O,P,z){for(var j=1e8,I=-1,N=-1,W=O.shape[0],F=O.shape[1],U=0;U<W;U++)for(var H=0;H<F;H++){var ne=O.get(U,H,0),$=O.get(U,H,1),K=O.get(U,H,2),Q=O.get(U,H,3);if(ne<255||$<255||K<255||Q<255){var Z=P-U,X=z-H,te=Z*Z+X*X;te<j&&(j=te,I=U,N=H)}}return[I,N,j]}(S.hi(d[0],d[1],1),p,p),E=w[0],C=w[1];return E<0||Math.pow(this.radius,2)<w[2]?null:new l(E+g|0,C+m|0,S.get(E,C,0),[S.get(E,C,1),S.get(E,C,2),S.get(E,C,3)],Math.sqrt(w[2]))},h.dispose=function(){this.gl&&(this.fbo.dispose(),n.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},9405:function(f,o,t){var i=t(3327),n=t(8731),r=t(216),a=t(5091),l=t(2145),u=t(8866);function h(p){this.gl=p,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var c=h.prototype;function x(p,v){return p.name<v.name?-1:1}c.bind=function(){var p;this.program||this._relink();var v=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),g=this.gl.lastAttribCount;if(v>g)for(p=g;p<v;p++)this.gl.enableVertexAttribArray(p);else if(g>v)for(p=v;p<g;p++)this.gl.disableVertexAttribArray(p);this.gl.lastAttribCount=v,this.gl.useProgram(this.program)},c.dispose=function(){for(var p=this.gl.lastAttribCount,v=0;v<p;v++)this.gl.disableVertexAttribArray(v);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},c.update=function(p,v,g,y){if(!v||arguments.length===1){var m=p;p=m.vertex,v=m.fragment,g=m.uniforms,y=m.attributes}var _=this,d=_.gl,S=_._vref;_._vref=a.shader(d,d.VERTEX_SHADER,p),S&&S.dispose(),_.vertShader=_._vref.shader;var w=this._fref;if(_._fref=a.shader(d,d.FRAGMENT_SHADER,v),w&&w.dispose(),_.fragShader=_._fref.shader,!g||!y){var E=d.createProgram();if(d.attachShader(E,_.fragShader),d.attachShader(E,_.vertShader),d.linkProgram(E),!d.getProgramParameter(E,d.LINK_STATUS)){var C=d.getProgramInfoLog(E);throw new u(C,"Error linking program:"+C)}g=g||l.uniforms(d,E),y=y||l.attributes(d,E),d.deleteProgram(E)}(y=y.slice()).sort(x);var O,P=[],z=[],j=[];for(O=0;O<y.length;++O){var I=y[O];if(I.type.indexOf("mat")>=0){for(var N=0|I.type.charAt(I.type.length-1),W=new Array(N),F=0;F<N;++F)W[F]=j.length,z.push(I.name+"["+F+"]"),typeof I.location=="number"?j.push(I.location+F):Array.isArray(I.location)&&I.location.length===N&&typeof I.location[F]=="number"?j.push(0|I.location[F]):j.push(-1);P.push({name:I.name,type:I.type,locations:W})}else P.push({name:I.name,type:I.type,locations:[j.length]}),z.push(I.name),typeof I.location=="number"?j.push(0|I.location):j.push(-1)}var U=0;for(O=0;O<j.length;++O)if(j[O]<0){for(;j.indexOf(U)>=0;)U+=1;j[O]=U}var H=new Array(g.length);function ne(){_.program=a.program(d,_._vref,_._fref,z,j);for(var $=0;$<g.length;++$)H[$]=d.getUniformLocation(_.program,g[$].name)}ne(),_._relink=ne,_.types={uniforms:r(g),attributes:r(y)},_.attributes=n(d,_,P,j),Object.defineProperty(_,"uniforms",i(d,_,g,H))},f.exports=function(p,v,g,y,m){var _=new h(p);return _.update(v,g,y,m),_}},8866:function(f){function o(t,i,n){this.shortMessage=i||"",this.longMessage=n||"",this.rawError=t||"",this.message="gl-shader: "+(i||t||"")+(n?`
`+n:""),this.stack=new Error().stack}o.prototype=new Error,o.prototype.name="GLError",o.prototype.constructor=o,f.exports=o},8731:function(f,o,t){f.exports=function(h,c,x,p){for(var v={},g=0,y=x.length;g<y;++g){var m=x[g],_=m.name,d=m.type,S=m.locations;switch(d){case"bool":case"int":case"float":l(h,c,S[0],p,1,v,_);break;default:if(d.indexOf("vec")>=0){if((w=d.charCodeAt(d.length-1)-48)<2||w>4)throw new i("","Invalid data type for attribute "+_+": "+d);l(h,c,S[0],p,w,v,_)}else{if(!(d.indexOf("mat")>=0))throw new i("","Unknown data type for attribute "+_+": "+d);var w;if((w=d.charCodeAt(d.length-1)-48)<2||w>4)throw new i("","Invalid data type for attribute "+_+": "+d);u(h,c,S,p,w,v,_)}}}return v};var i=t(8866);function n(h,c,x,p,v,g){this._gl=h,this._wrapper=c,this._index=x,this._locations=p,this._dimension=v,this._constFunc=g}var r=n.prototype;r.pointer=function(h,c,x,p){var v=this,g=v._gl,y=v._locations[v._index];g.vertexAttribPointer(y,v._dimension,h||g.FLOAT,!!c,x||0,p||0),g.enableVertexAttribArray(y)},r.set=function(h,c,x,p){return this._constFunc(this._locations[this._index],h,c,x,p)},Object.defineProperty(r,"location",{get:function(){return this._locations[this._index]},set:function(h){return h!==this._locations[this._index]&&(this._locations[this._index]=0|h,this._wrapper.program=null),0|h}});var a=[function(h,c,x){return x.length===void 0?h.vertexAttrib1f(c,x):h.vertexAttrib1fv(c,x)},function(h,c,x,p){return x.length===void 0?h.vertexAttrib2f(c,x,p):h.vertexAttrib2fv(c,x)},function(h,c,x,p,v){return x.length===void 0?h.vertexAttrib3f(c,x,p,v):h.vertexAttrib3fv(c,x)},function(h,c,x,p,v,g){return x.length===void 0?h.vertexAttrib4f(c,x,p,v,g):h.vertexAttrib4fv(c,x)}];function l(h,c,x,p,v,g,y){var m=a[v],_=new n(h,c,x,p,v,m);Object.defineProperty(g,y,{set:function(d){return h.disableVertexAttribArray(p[x]),m(h,p[x],d),d},get:function(){return _},enumerable:!0})}function u(h,c,x,p,v,g,y){for(var m=new Array(v),_=new Array(v),d=0;d<v;++d)l(h,c,x[d],p,v,m,d),_[d]=m[d];Object.defineProperty(m,"location",{set:function(E){if(Array.isArray(E))for(var C=0;C<v;++C)_[C].location=E[C];else for(C=0;C<v;++C)_[C].location=E+C;return E},get:function(){for(var E=new Array(v),C=0;C<v;++C)E[C]=p[x[C]];return E},enumerable:!0}),m.pointer=function(E,C,O,P){E=E||h.FLOAT,C=!!C,O=O||v*v,P=P||0;for(var z=0;z<v;++z){var j=p[x[z]];h.vertexAttribPointer(j,v,E,C,O,P+z*v),h.enableVertexAttribArray(j)}};var S=new Array(v),w=h["vertexAttrib"+v+"fv"];Object.defineProperty(g,y,{set:function(E){for(var C=0;C<v;++C){var O=p[x[C]];if(h.disableVertexAttribArray(O),Array.isArray(E[0]))w.call(h,O,E[C]);else{for(var P=0;P<v;++P)S[P]=E[v*C+P];w.call(h,O,S)}}return E},get:function(){return m},enumerable:!0})}},3327:function(f,o,t){var i=t(216),n=t(8866);function r(l){return function(){return l}}function a(l,u){for(var h=new Array(l),c=0;c<l;++c)h[c]=u;return h}f.exports=function(l,u,h,c){function x(m){return function(_){for(var d=p("",m),S=0;S<d.length;++S){var w=d[S],E=w[0],C=w[1];if(c[C]){var O=_;if(typeof E=="string"&&(E.indexOf(".")===0||E.indexOf("[")===0)){var P=E;if(E.indexOf(".")===0&&(P=E.slice(1)),P.indexOf("]")===P.length-1){var z=P.indexOf("["),j=P.slice(0,z),I=P.slice(z+1,P.length-1);O=j?_[j][I]:_[I]}else O=_[P]}var N,W=h[C].type;switch(W){case"bool":case"int":case"sampler2D":case"samplerCube":l.uniform1i(c[C],O);break;case"float":l.uniform1f(c[C],O);break;default:var F=W.indexOf("vec");if(!(0<=F&&F<=1&&W.length===4+F)){if(W.indexOf("mat")===0&&W.length===4){if((N=W.charCodeAt(W.length-1)-48)<2||N>4)throw new n("","Invalid uniform dimension type for matrix "+name+": "+W);l["uniformMatrix"+N+"fv"](c[C],!1,O);break}throw new n("","Unknown uniform data type for "+name+": "+W)}if((N=W.charCodeAt(W.length-1)-48)<2||N>4)throw new n("","Invalid data type");switch(W.charAt(0)){case"b":case"i":l["uniform"+N+"iv"](c[C],O);break;case"v":l["uniform"+N+"fv"](c[C],O);break;default:throw new n("","Unrecognized data type for vector "+name+": "+W)}}}}}}function p(m,_){if(typeof _!="object")return[[m,_]];var d=[];for(var S in _){var w=_[S],E=m;parseInt(S)+""===S?E+="["+S+"]":E+="."+S,typeof w=="object"?d.push.apply(d,p(E,w)):d.push([E,w])}return d}function v(m,_,d){if(typeof d=="object"){var S=g(d);Object.defineProperty(m,_,{get:r(S),set:x(d),enumerable:!0,configurable:!1})}else c[d]?Object.defineProperty(m,_,{get:(w=d,function(E,C,O){return E.getUniform(C.program,O[w])}),set:x(d),enumerable:!0,configurable:!1}):m[_]=function(E){switch(E){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var C=E.indexOf("vec");if(0<=C&&C<=1&&E.length===4+C){if((O=E.charCodeAt(E.length-1)-48)<2||O>4)throw new n("","Invalid data type");return E.charAt(0)==="b"?a(O,!1):a(O,0)}if(E.indexOf("mat")===0&&E.length===4){var O;if((O=E.charCodeAt(E.length-1)-48)<2||O>4)throw new n("","Invalid uniform dimension type for matrix "+name+": "+E);return a(O*O,0)}throw new n("","Unknown uniform data type for "+name+": "+E)}}(h[d].type);var w}function g(m){var _;if(Array.isArray(m)){_=new Array(m.length);for(var d=0;d<m.length;++d)v(_,d,m[d])}else for(var S in _={},m)v(_,S,m[S]);return _}var y=i(h,!0);return{get:r(g(y)),set:x(y),enumerable:!0,configurable:!0}}},216:function(f){f.exports=function(o,t){for(var i={},n=0;n<o.length;++n)for(var r=o[n].name.split("."),a=i,l=0;l<r.length;++l){var u=r[l].split("[");if(u.length>1){u[0]in a||(a[u[0]]=[]),a=a[u[0]];for(var h=1;h<u.length;++h){var c=parseInt(u[h]);h<u.length-1||l<r.length-1?(c in a||(h<u.length-1?a[c]=[]:a[c]={}),a=a[c]):a[c]=t?n:o[n].type}}else l<r.length-1?(u[0]in a||(a[u[0]]={}),a=a[u[0]]):a[u[0]]=t?n:o[n].type}return i}},2145:function(f,o){o.uniforms=function(r,a){for(var l=r.getProgramParameter(a,r.ACTIVE_UNIFORMS),u=[],h=0;h<l;++h){var c=r.getActiveUniform(a,h);if(c){var x=n(r,c.type);if(c.size>1)for(var p=0;p<c.size;++p)u.push({name:c.name.replace("[0]","["+p+"]"),type:x});else u.push({name:c.name,type:x})}}return u},o.attributes=function(r,a){for(var l=r.getProgramParameter(a,r.ACTIVE_ATTRIBUTES),u=[],h=0;h<l;++h){var c=r.getActiveAttrib(a,h);c&&u.push({name:c.name,type:n(r,c.type)})}return u};var t={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},i=null;function n(r,a){if(!i){var l=Object.keys(t);i={};for(var u=0;u<l.length;++u){var h=l[u];i[r[h]]=t[h]}}return i[a]}},5091:function(f,o,t){o.shader=function(x,p,v){return c(x).getShaderReference(p,v)},o.program=function(x,p,v,g,y){return c(x).getProgram(p,v,g,y)};var i=t(8866),n=t(2992),r=new(typeof WeakMap>"u"?t(606):WeakMap),a=0;function l(x,p,v,g,y,m,_){this.id=x,this.src=p,this.type=v,this.shader=g,this.count=m,this.programs=[],this.cache=_}function u(x){this.gl=x,this.shaders=[{},{}],this.programs={}}l.prototype.dispose=function(){if(--this.count==0){for(var x=this.cache,p=x.gl,v=this.programs,g=0,y=v.length;g<y;++g){var m=x.programs[v[g]];m&&(delete x.programs[g],p.deleteProgram(m))}p.deleteShader(this.shader),delete x.shaders[this.type===p.FRAGMENT_SHADER|0][this.src]}};var h=u.prototype;function c(x){var p=r.get(x);return p||(p=new u(x),r.set(x,p)),p}h.getShaderReference=function(x,p){var v=this.gl,g=this.shaders[x===v.FRAGMENT_SHADER|0],y=g[p];if(y&&v.isShader(y.shader))y.count+=1;else{var m=function(_,d,S){var w=_.createShader(d);if(_.shaderSource(w,S),_.compileShader(w),!_.getShaderParameter(w,_.COMPILE_STATUS)){var E=_.getShaderInfoLog(w);try{var C=n(E,S,d)}catch(O){throw console.warn("Failed to format compiler error: "+O),new i(E,`Error compiling shader:
`+E)}throw new i(E,C.short,C.long)}return w}(v,x,p);y=g[p]=new l(a++,p,x,m,[],1,this)}return y},h.getProgram=function(x,p,v,g){var y=[x.id,p.id,v.join(":"),g.join(":")].join("@"),m=this.programs[y];return m&&this.gl.isProgram(m)||(this.programs[y]=m=function(_,d,S,w,E){var C=_.createProgram();_.attachShader(C,d),_.attachShader(C,S);for(var O=0;O<w.length;++O)_.bindAttribLocation(C,E[O],w[O]);if(_.linkProgram(C),!_.getProgramParameter(C,_.LINK_STATUS)){var P=_.getProgramInfoLog(C);throw new i(P,"Error linking program: "+P)}return C}(this.gl,x.shader,p.shader,v,g),x.programs.push(y),p.programs.push(y)),m}},4098:function(f){function o(i){this.plot=i,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}f.exports=function(i,n){var r=new o(i);return r.update(n),i.addOverlay(r),r};var t=o.prototype;t.update=function(i){i=i||{},this.enable=(i.enable||[!0,!0,!1,!1]).slice(),this.width=(i.width||[1,1,1,1]).slice(),this.color=(i.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(n){return n.slice()}),this.center=(i.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},t.draw=function(){var i=this.enable,n=this.width,r=this.color,a=this.center,l=this.plot,u=l.line,h=l.dataBox,c=l.viewBox;if(u.bind(),h[0]<=a[0]&&a[0]<=h[2]&&h[1]<=a[1]&&a[1]<=h[3]){var x=c[0]+(a[0]-h[0])/(h[2]-h[0])*(c[2]-c[0]),p=c[1]+(a[1]-h[1])/(h[3]-h[1])*(c[3]-c[1]);i[0]&&u.drawLine(x,p,c[0],p,n[0],r[0]),i[1]&&u.drawLine(x,p,x,c[1],n[1],r[1]),i[2]&&u.drawLine(x,p,c[2],p,n[2],r[2]),i[3]&&u.drawLine(x,p,x,c[3],n[3],r[3])}},t.dispose=function(){this.plot.removeOverlay(this)}},1493:function(f,o,t){var i=t(3236),n=t(9405),r=i([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * (view * (model * vec4(vertexPosition, 1.0)));
  vec2 clipOffset = (projection * (view * (model * vec4(color, 0.0)))).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),a=i([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);f.exports=function(l){return n(l,r,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},4449:function(f,o,t){var i=t(2762),n=t(8116),r=t(1493);f.exports=function(p,v){var g=[];function y(w,E,C,O,P,z){var j=[w,E,C,0,0,0,1];j[O+3]=1,j[O]=P,g.push.apply(g,j),j[6]=-1,g.push.apply(g,j),j[O]=z,g.push.apply(g,j),g.push.apply(g,j),j[6]=1,g.push.apply(g,j),j[O]=P,g.push.apply(g,j)}y(0,0,0,0,0,1),y(0,0,0,1,0,1),y(0,0,0,2,0,1),y(1,0,0,1,-1,1),y(1,0,0,2,-1,1),y(0,1,0,0,-1,1),y(0,1,0,2,-1,1),y(0,0,1,0,-1,1),y(0,0,1,1,-1,1);var m=i(p,g),_=n(p,[{type:p.FLOAT,buffer:m,size:3,offset:0,stride:28},{type:p.FLOAT,buffer:m,size:3,offset:12,stride:28},{type:p.FLOAT,buffer:m,size:1,offset:24,stride:28}]),d=r(p);d.attributes.position.location=0,d.attributes.color.location=1,d.attributes.weight.location=2;var S=new l(p,m,_,d);return S.update(v),S};var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function l(p,v,g,y){this.gl=p,this.buffer=v,this.vao=g,this.shader=y,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var u=l.prototype,h=[0,0,0],c=[0,0,0],x=[0,0];u.isTransparent=function(){return!1},u.drawTransparent=function(p){},u.draw=function(p){var v=this.gl,g=this.vao,y=this.shader;g.bind(),y.bind();var m,_=p.model||a,d=p.view||a,S=p.projection||a;this.axes&&(m=this.axes.lastCubeProps.axis);for(var w=h,E=c,C=0;C<3;++C)m&&m[C]<0?(w[C]=this.bounds[0][C],E[C]=this.bounds[1][C]):(w[C]=this.bounds[1][C],E[C]=this.bounds[0][C]);for(x[0]=v.drawingBufferWidth,x[1]=v.drawingBufferHeight,y.uniforms.model=_,y.uniforms.view=d,y.uniforms.projection=S,y.uniforms.coordinates=[this.position,w,E],y.uniforms.colors=this.colors,y.uniforms.screenShape=x,C=0;C<3;++C)y.uniforms.lineWidth=this.lineWidth[C]*this.pixelRatio,this.enabled[C]&&(g.draw(v.TRIANGLES,6,6*C),this.drawSides[C]&&g.draw(v.TRIANGLES,12,18+12*C));g.unbind()},u.update=function(p){p&&("bounds"in p&&(this.bounds=p.bounds),"position"in p&&(this.position=p.position),"lineWidth"in p&&(this.lineWidth=p.lineWidth),"colors"in p&&(this.colors=p.colors),"enabled"in p&&(this.enabled=p.enabled),"drawSides"in p&&(this.drawSides=p.drawSides))},u.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},6740:function(f,o,t){var i=t(3236),n=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),r=i([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),a=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * (view * tubePosition);
  f_id        = id;
  f_position  = position.xyz;
}
`]),l=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);o.meshShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},o.pickShader={vertex:a,fragment:l,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7815:function(f,o,t){var i=t(2931),n=t(9970),r=["xyz","xzy","yxz","yzx","zxy","zyx"],a=function(x,p){var v,g=x.length;for(v=0;v<g;v++){var y=x[v];if(y===p)return v;if(y>p)return v-1}return v},l=function(x,p,v){return x<p?p:x>v?v:x},u=function(x){var p=1/0;x.sort(function(m,_){return m-_});for(var v=x.length,g=1;g<v;g++){var y=Math.abs(x[g]-x[g-1]);y<p&&(p=y)}return p};f.exports=function(x,p){var v=x.startingPositions,g=x.maxLength||1e3,y=x.tubeSize||1,m=x.absoluteTubeSize,_=x.gridFill||"+x+y+z",d={};_.indexOf("-x")!==-1&&(d.reversedX=!0),_.indexOf("-y")!==-1&&(d.reversedY=!0),_.indexOf("-z")!==-1&&(d.reversedZ=!0),d.filled=r.indexOf(_.replace(/-/g,"").replace(/\+/g,""));var S=x.getVelocity||function(be){return function(ke,ze,ve){var oe=ze.vectors,ie=ze.meshgrid,he=ke[0],Se=ke[1],ye=ke[2],we=ie[0].length,Me=ie[1].length,Oe=ie[2].length,Ie=a(ie[0],he),de=a(ie[1],Se),_e=a(ie[2],ye),Ae=Ie+1,Pe=de+1,Ee=_e+1;if(Ie=l(Ie,0,we-1),Ae=l(Ae,0,we-1),de=l(de,0,Me-1),Pe=l(Pe,0,Me-1),_e=l(_e,0,Oe-1),Ee=l(Ee,0,Oe-1),Ie<0||de<0||_e<0||Ae>we-1||Pe>Me-1||Ee>Oe-1)return i.create();var Fe,Ve,Ye,tt,nt,ht,vt=ie[0][Ie],pt=ie[0][Ae],Qe=ie[1][de],Ke=ie[1][Pe],Mt=ie[2][_e],Ot=(he-vt)/(pt-vt),Pt=(Se-Qe)/(Ke-Qe),St=(ye-Mt)/(ie[2][Ee]-Mt);switch(isFinite(Ot)||(Ot=.5),isFinite(Pt)||(Pt=.5),isFinite(St)||(St=.5),ve.reversedX&&(Ie=we-1-Ie,Ae=we-1-Ae),ve.reversedY&&(de=Me-1-de,Pe=Me-1-Pe),ve.reversedZ&&(_e=Oe-1-_e,Ee=Oe-1-Ee),ve.filled){case 5:nt=_e,ht=Ee,Ye=de*Oe,tt=Pe*Oe,Fe=Ie*Oe*Me,Ve=Ae*Oe*Me;break;case 4:nt=_e,ht=Ee,Fe=Ie*Oe,Ve=Ae*Oe,Ye=de*Oe*we,tt=Pe*Oe*we;break;case 3:Ye=de,tt=Pe,nt=_e*Me,ht=Ee*Me,Fe=Ie*Me*Oe,Ve=Ae*Me*Oe;break;case 2:Ye=de,tt=Pe,Fe=Ie*Me,Ve=Ae*Me,nt=_e*Me*we,ht=Ee*Me*we;break;case 1:Fe=Ie,Ve=Ae,nt=_e*we,ht=Ee*we,Ye=de*we*Oe,tt=Pe*we*Oe;break;default:Fe=Ie,Ve=Ae,Ye=de*we,tt=Pe*we,nt=_e*we*Me,ht=Ee*we*Me}var He=oe[Fe+Ye+nt],We=oe[Fe+Ye+ht],Be=oe[Fe+tt+nt],Ge=oe[Fe+tt+ht],ot=oe[Ve+Ye+nt],it=oe[Ve+Ye+ht],dt=oe[Ve+tt+nt],gt=oe[Ve+tt+ht],je=i.create(),Re=i.create(),rt=i.create(),ct=i.create();i.lerp(je,He,ot,Ot),i.lerp(Re,We,it,Ot),i.lerp(rt,Be,dt,Ot),i.lerp(ct,Ge,gt,Ot);var ut=i.create(),et=i.create();i.lerp(ut,je,rt,Pt),i.lerp(et,Re,ct,Pt);var xt=i.create();return i.lerp(xt,ut,et,St),xt}(be,x,d)},w=x.getDivergence||function(be,ke){var ze=i.create(),ve=1e-4;i.add(ze,be,[ve,0,0]);var oe=S(ze);i.subtract(oe,oe,ke),i.scale(oe,oe,1/ve),i.add(ze,be,[0,ve,0]);var ie=S(ze);i.subtract(ie,ie,ke),i.scale(ie,ie,1/ve),i.add(ze,be,[0,0,ve]);var he=S(ze);return i.subtract(he,he,ke),i.scale(he,he,1/ve),i.add(ze,oe,ie),i.add(ze,ze,he),ze},E=[],C=p[0][0],O=p[0][1],P=p[0][2],z=p[1][0],j=p[1][1],I=p[1][2],N=function(be){var ke=be[0],ze=be[1],ve=be[2];return!(ke<C||ke>z||ze<O||ze>j||ve<P||ve>I)},W=10*i.distance(p[0],p[1])/g,F=W*W,U=1,H=0,ne=v.length;ne>1&&(U=function(be){for(var ke=[],ze=[],ve=[],oe={},ie={},he={},Se=be.length,ye=0;ye<Se;ye++){var we=be[ye],Me=we[0],Oe=we[1],Ie=we[2];oe[Me]||(ke.push(Me),oe[Me]=!0),ie[Oe]||(ze.push(Oe),ie[Oe]=!0),he[Ie]||(ve.push(Ie),he[Ie]=!0)}var de=u(ke),_e=u(ze),Ae=u(ve),Pe=Math.min(de,_e,Ae);return isFinite(Pe)?Pe:1}(v));for(var $=0;$<ne;$++){var K=i.create();i.copy(K,v[$]);var Q=[K],Z=[],X=S(K),te=K;Z.push(X);var ae=[],se=w(K,X),ce=i.length(se);isFinite(ce)&&ce>H&&(H=ce),ae.push(ce),E.push({points:Q,velocities:Z,divergences:ae});for(var fe=0;fe<100*g&&Q.length<g&&N(K);){fe++;var pe=i.clone(X),ge=i.squaredLength(pe);if(ge===0)break;ge>F&&i.scale(pe,pe,W/Math.sqrt(ge)),i.add(pe,pe,K),X=S(pe),i.squaredDistance(te,pe)-F>-1e-4*F&&(Q.push(pe),te=pe,Z.push(X),se=w(pe,X),ce=i.length(se),isFinite(ce)&&ce>H&&(H=ce),ae.push(ce)),K=pe}}var me=function(be,ke,ze,ve){for(var oe=0,ie=0;ie<be.length;ie++)for(var he=be[ie].velocities,Se=0;Se<he.length;Se++)oe=Math.max(oe,i.length(he[Se]));var ye=be.map(function(Fe){return function(Ve,Ye,tt,nt){for(var ht=Ve.points,vt=Ve.velocities,pt=Ve.divergences,Qe=[],Ke=[],Mt=[],Ot=[],Pt=[],St=[],He=0,We=0,Be=n.create(),Ge=n.create(),ot=0;ot<ht.length;ot++){var it=ht[ot],dt=vt[ot],gt=pt[ot];Ye===0&&(gt=.05*tt),We=i.length(dt)/nt,Be=n.create(),i.copy(Be,dt),Be[3]=gt;for(var je=0;je<8;je++)Pt[je]=[it[0],it[1],it[2],je];if(Ot.length>0)for(je=0;je<8;je++){var Re=(je+1)%8;Qe.push(Ot[je],Pt[je],Pt[Re],Pt[Re],Ot[Re],Ot[je]),Mt.push(Ge,Be,Be,Be,Ge,Ge),St.push(He,We,We,We,He,He);var rt=Qe.length;Ke.push([rt-6,rt-5,rt-4],[rt-3,rt-2,rt-1])}var ct=Ot;Ot=Pt,Pt=ct;var ut=Ge;Ge=Be,Be=ut;var et=He;He=We,We=et}return{positions:Qe,cells:Ke,vectors:Mt,vertexIntensity:St}}(Fe,ze,ve,oe)}),we=[],Me=[],Oe=[],Ie=[];for(ie=0;ie<ye.length;ie++){var de=ye[ie],_e=we.length;for(we=we.concat(de.positions),Oe=Oe.concat(de.vectors),Ie=Ie.concat(de.vertexIntensity),Se=0;Se<de.cells.length;Se++){var Ae=de.cells[Se],Pe=[];Me.push(Pe);for(var Ee=0;Ee<Ae.length;Ee++)Pe.push(Ae[Ee]+_e)}}return{positions:we,cells:Me,vectors:Oe,vertexIntensity:Ie,colormap:ke}}(E,x.colormap,H,U);return m?me.tubeScale=m:(H===0&&(H=1),me.tubeScale=.5*y*U/H),me};var h=t(6740),c=t(6405).createMesh;f.exports.createTubeMesh=function(x,p){return c(x,p,{shaders:h,traceType:"streamtube"})}},990:function(f,o,t){var i=t(9405),n=t(3236),r=n([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  mat4 objectOffsetTranslation = mat4(1.0) + mat4(vec4(0), vec4(0), vec4(0), vec4(objectOffset, 0));
  vec4 worldPosition = (model * objectOffsetTranslation) * vec4(localCoordinate, 1.0);
  vec4 clipPosition = projection * (view * worldPosition);
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),a=n([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color  in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),l=n([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  mat4 objectOffsetTranslation = mat4(1.0) + mat4(vec4(0), vec4(0), vec4(0), vec4(objectOffset, 0));
  vec4 worldPosition = (model * objectOffsetTranslation) * vec4(dataCoordinate, 1.0);

  vec4 clipPosition = projection * (view * worldPosition);
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),u=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);o.createShader=function(h){var c=i(h,r,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c.attributes.normal.location=2,c},o.createPickShader=function(h){var c=i(h,r,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c.attributes.normal.location=2,c},o.createContourShader=function(h){var c=i(h,l,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c},o.createPickContourShader=function(h){var c=i(h,l,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c}},9499:function(f,o,t){f.exports=function(se){var ce=se.gl,fe=d(ce),pe=w(ce),ge=S(ce),me=E(ce),be=n(ce),ke=r(ce,[{buffer:be,size:4,stride:C,offset:0},{buffer:be,size:3,stride:C,offset:16},{buffer:be,size:3,stride:C,offset:28}]),ze=n(ce),ve=r(ce,[{buffer:ze,size:4,stride:20,offset:0},{buffer:ze,size:1,stride:20,offset:16}]),oe=n(ce),ie=r(ce,[{buffer:oe,size:2,type:ce.FLOAT}]),he=a(ce,1,I,ce.RGBA,ce.UNSIGNED_BYTE);he.minFilter=ce.LINEAR,he.magFilter=ce.LINEAR;var Se=new N(ce,[0,0],[[0,0,0],[0,0,0]],fe,pe,be,ke,he,ge,me,ze,ve,oe,ie,[0,0,0]),ye={levels:[[],[],[]]};for(var we in se)ye[we]=se[we];return ye.colormap=ye.colormap||"jet",Se.update(ye),Se};var i=t(8828),n=t(2762),r=t(8116),a=t(7766),l=t(1888),u=t(6729),h=t(5298),c=t(9994),x=t(9618),p=t(3711),v=t(6760),g=t(7608),y=t(2478),m=t(6199),_=t(990),d=_.createShader,S=_.createContourShader,w=_.createPickShader,E=_.createPickContourShader,C=40,O=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],P=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],z=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function j(se,ce,fe,pe,ge){this.position=se,this.index=ce,this.uv=fe,this.level=pe,this.dataCoordinate=ge}(function(){for(var se=0;se<3;++se){var ce=z[se],fe=(se+2)%3;ce[(se+1)%3+0]=1,ce[fe+3]=1,ce[se+6]=1}})();var I=256;function N(se,ce,fe,pe,ge,me,be,ke,ze,ve,oe,ie,he,Se,ye){this.gl=se,this.shape=ce,this.bounds=fe,this.objectOffset=ye,this.intensityBounds=[],this._shader=pe,this._pickShader=ge,this._coordinateBuffer=me,this._vao=be,this._colorMap=ke,this._contourShader=ze,this._contourPickShader=ve,this._contourBuffer=oe,this._contourVAO=ie,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new j([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=he,this._dynamicVAO=Se,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[x(l.mallocFloat(1024),[0,0]),x(l.mallocFloat(1024),[0,0]),x(l.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var W=N.prototype;W.genColormap=function(se,ce){var fe=!1,pe=c([u({colormap:se,nshades:I,format:"rgba"}).map(function(ge,me){var be=ce?function(ke,ze){if(!ze||!ze.length)return 1;for(var ve=0;ve<ze.length;++ve){if(ze.length<2)return 1;if(ze[ve][0]===ke)return ze[ve][1];if(ze[ve][0]>ke&&ve>0){var oe=(ze[ve][0]-ke)/(ze[ve][0]-ze[ve-1][0]);return ze[ve][1]*(1-oe)+oe*ze[ve-1][1]}}return 1}(me/255,ce):ge[3];return be<1&&(fe=!0),[ge[0],ge[1],ge[2],255*be]})]);return h.divseq(pe,255),this.hasAlphaScale=fe,pe},W.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},W.isOpaque=function(){return!this.isTransparent()},W.pickSlots=1,W.setPickBase=function(se){this.pickId=se};var F=[0,0,0],U={showSurface:!1,showContour:!1,projections:[O.slice(),O.slice(),O.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function H(se,ce){var fe,pe,ge,me=ce.axes&&ce.axes.lastCubeProps.axis||F,be=ce.showSurface,ke=ce.showContour;for(fe=0;fe<3;++fe)for(be=be||ce.surfaceProject[fe],pe=0;pe<3;++pe)ke=ke||ce.contourProject[fe][pe];for(fe=0;fe<3;++fe){var ze=U.projections[fe];for(pe=0;pe<16;++pe)ze[pe]=0;for(pe=0;pe<4;++pe)ze[5*pe]=1;ze[5*fe]=0,ze[12+fe]=ce.axesBounds[+(me[fe]>0)][fe],v(ze,se.model,ze);var ve=U.clipBounds[fe];for(ge=0;ge<2;++ge)for(pe=0;pe<3;++pe)ve[ge][pe]=se.clipBounds[ge][pe];ve[0][fe]=-1e8,ve[1][fe]=1e8}return U.showSurface=be,U.showContour=ke,U}var ne={model:O,view:O,projection:O,inverseModel:O.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},$=O.slice(),K=[1,0,0,0,1,0,0,0,1];function Q(se,ce){se=se||{};var fe=this.gl;fe.disable(fe.CULL_FACE),this._colorMap.bind(0);var pe=ne;pe.model=se.model||O,pe.view=se.view||O,pe.projection=se.projection||O,pe.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],pe.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],pe.objectOffset=this.objectOffset,pe.contourColor=this.contourColor[0],pe.inverseModel=g(pe.inverseModel,pe.model);for(var ge=0;ge<2;++ge)for(var me=pe.clipBounds[ge],be=0;be<3;++be)me[be]=Math.min(Math.max(this.clipBounds[ge][be],-1e8),1e8);pe.kambient=this.ambientLight,pe.kdiffuse=this.diffuseLight,pe.kspecular=this.specularLight,pe.roughness=this.roughness,pe.fresnel=this.fresnel,pe.opacity=this.opacity,pe.height=0,pe.permutation=K,pe.vertexColor=this.vertexColor;var ke=$;for(v(ke,pe.view,pe.model),v(ke,pe.projection,ke),g(ke,ke),ge=0;ge<3;++ge)pe.eyePosition[ge]=ke[12+ge]/ke[15];var ze=ke[15];for(ge=0;ge<3;++ge)ze+=this.lightPosition[ge]*ke[4*ge+3];for(ge=0;ge<3;++ge){var ve=ke[12+ge];for(be=0;be<3;++be)ve+=ke[4*be+ge]*this.lightPosition[be];pe.lightPosition[ge]=ve/ze}var oe=H(pe,this);if(oe.showSurface){for(this._shader.bind(),this._shader.uniforms=pe,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(fe.TRIANGLES,this._vertexCount),ge=0;ge<3;++ge)this.surfaceProject[ge]&&this.vertexCount&&(this._shader.uniforms.model=oe.projections[ge],this._shader.uniforms.clipBounds=oe.clipBounds[ge],this._vao.draw(fe.TRIANGLES,this._vertexCount));this._vao.unbind()}if(oe.showContour){var ie=this._contourShader;pe.kambient=1,pe.kdiffuse=0,pe.kspecular=0,pe.opacity=1,ie.bind(),ie.uniforms=pe;var he=this._contourVAO;for(he.bind(),ge=0;ge<3;++ge)for(ie.uniforms.permutation=z[ge],fe.lineWidth(this.contourWidth[ge]*this.pixelRatio),be=0;be<this.contourLevels[ge].length;++be)be===this.highlightLevel[ge]?(ie.uniforms.contourColor=this.highlightColor[ge],ie.uniforms.contourTint=this.highlightTint[ge]):be!==0&&be-1!==this.highlightLevel[ge]||(ie.uniforms.contourColor=this.contourColor[ge],ie.uniforms.contourTint=this.contourTint[ge]),this._contourCounts[ge][be]&&(ie.uniforms.height=this.contourLevels[ge][be],he.draw(fe.LINES,this._contourCounts[ge][be],this._contourOffsets[ge][be]));for(ge=0;ge<3;++ge)for(ie.uniforms.model=oe.projections[ge],ie.uniforms.clipBounds=oe.clipBounds[ge],be=0;be<3;++be)if(this.contourProject[ge][be]){ie.uniforms.permutation=z[be],fe.lineWidth(this.contourWidth[be]*this.pixelRatio);for(var Se=0;Se<this.contourLevels[be].length;++Se)Se===this.highlightLevel[be]?(ie.uniforms.contourColor=this.highlightColor[be],ie.uniforms.contourTint=this.highlightTint[be]):Se!==0&&Se-1!==this.highlightLevel[be]||(ie.uniforms.contourColor=this.contourColor[be],ie.uniforms.contourTint=this.contourTint[be]),this._contourCounts[be][Se]&&(ie.uniforms.height=this.contourLevels[be][Se],he.draw(fe.LINES,this._contourCounts[be][Se],this._contourOffsets[be][Se]))}for(he.unbind(),(he=this._dynamicVAO).bind(),ge=0;ge<3;++ge)if(this._dynamicCounts[ge]!==0)for(ie.uniforms.model=pe.model,ie.uniforms.clipBounds=pe.clipBounds,ie.uniforms.permutation=z[ge],fe.lineWidth(this.dynamicWidth[ge]*this.pixelRatio),ie.uniforms.contourColor=this.dynamicColor[ge],ie.uniforms.contourTint=this.dynamicTint[ge],ie.uniforms.height=this.dynamicLevel[ge],he.draw(fe.LINES,this._dynamicCounts[ge],this._dynamicOffsets[ge]),be=0;be<3;++be)this.contourProject[be][ge]&&(ie.uniforms.model=oe.projections[be],ie.uniforms.clipBounds=oe.clipBounds[be],he.draw(fe.LINES,this._dynamicCounts[ge],this._dynamicOffsets[ge]));he.unbind()}}W.draw=function(se){return Q.call(this,se,!1)},W.drawTransparent=function(se){return Q.call(this,se,!0)};var Z={model:O,view:O,projection:O,inverseModel:O,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function X(se,ce){return Array.isArray(se)?[ce(se[0]),ce(se[1]),ce(se[2])]:[ce(se),ce(se),ce(se)]}function te(se){return Array.isArray(se)?se.length===3?[se[0],se[1],se[2],1]:[se[0],se[1],se[2],se[3]]:[0,0,0,1]}function ae(se){if(Array.isArray(se)){if(Array.isArray(se))return[te(se[0]),te(se[1]),te(se[2])];var ce=te(se);return[ce.slice(),ce.slice(),ce.slice()]}}W.drawPick=function(se){se=se||{};var ce=this.gl;ce.disable(ce.CULL_FACE);var fe=Z;fe.model=se.model||O,fe.view=se.view||O,fe.projection=se.projection||O,fe.shape=this._field[2].shape,fe.pickId=this.pickId/255,fe.lowerBound=this.bounds[0],fe.upperBound=this.bounds[1],fe.objectOffset=this.objectOffset,fe.permutation=K;for(var pe=0;pe<2;++pe)for(var ge=fe.clipBounds[pe],me=0;me<3;++me)ge[me]=Math.min(Math.max(this.clipBounds[pe][me],-1e8),1e8);var be=H(fe,this);if(be.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=fe,this._vao.bind(),this._vao.draw(ce.TRIANGLES,this._vertexCount),pe=0;pe<3;++pe)this.surfaceProject[pe]&&(this._pickShader.uniforms.model=be.projections[pe],this._pickShader.uniforms.clipBounds=be.clipBounds[pe],this._vao.draw(ce.TRIANGLES,this._vertexCount));this._vao.unbind()}if(be.showContour){var ke=this._contourPickShader;ke.bind(),ke.uniforms=fe;var ze=this._contourVAO;for(ze.bind(),me=0;me<3;++me)for(ce.lineWidth(this.contourWidth[me]*this.pixelRatio),ke.uniforms.permutation=z[me],pe=0;pe<this.contourLevels[me].length;++pe)this._contourCounts[me][pe]&&(ke.uniforms.height=this.contourLevels[me][pe],ze.draw(ce.LINES,this._contourCounts[me][pe],this._contourOffsets[me][pe]));for(pe=0;pe<3;++pe)for(ke.uniforms.model=be.projections[pe],ke.uniforms.clipBounds=be.clipBounds[pe],me=0;me<3;++me)if(this.contourProject[pe][me]){ke.uniforms.permutation=z[me],ce.lineWidth(this.contourWidth[me]*this.pixelRatio);for(var ve=0;ve<this.contourLevels[me].length;++ve)this._contourCounts[me][ve]&&(ke.uniforms.height=this.contourLevels[me][ve],ze.draw(ce.LINES,this._contourCounts[me][ve],this._contourOffsets[me][ve]))}ze.unbind()}},W.pick=function(se){if(!se||se.id!==this.pickId)return null;var ce=this._field[2].shape,fe=this._pickResult,pe=ce[0]*(se.value[0]+(se.value[2]>>4)/16)/255,ge=Math.floor(pe),me=pe-ge,be=ce[1]*(se.value[1]+(15&se.value[2])/16)/255,ke=Math.floor(be),ze=be-ke;ge+=1,ke+=1;var ve=fe.position;ve[0]=ve[1]=ve[2]=0;for(var oe=0;oe<2;++oe)for(var ie=oe?me:1-me,he=0;he<2;++he)for(var Se=ge+oe,ye=ke+he,we=ie*(he?ze:1-ze),Me=0;Me<3;++Me)ve[Me]+=this._field[Me].get(Se,ye)*we;for(var Oe=this._pickResult.level,Ie=0;Ie<3;++Ie)if(Oe[Ie]=y.le(this.contourLevels[Ie],ve[Ie]),Oe[Ie]<0)this.contourLevels[Ie].length>0&&(Oe[Ie]=0);else if(Oe[Ie]<this.contourLevels[Ie].length-1){var de=this.contourLevels[Ie][Oe[Ie]],_e=this.contourLevels[Ie][Oe[Ie]+1];Math.abs(de-ve[Ie])>Math.abs(_e-ve[Ie])&&(Oe[Ie]+=1)}for(fe.index[0]=me<.5?ge:ge+1,fe.index[1]=ze<.5?ke:ke+1,fe.uv[0]=pe/ce[0],fe.uv[1]=be/ce[1],Me=0;Me<3;++Me)fe.dataCoordinate[Me]=this._field[Me].get(fe.index[0],fe.index[1]);return fe},W.padField=function(se,ce){var fe=ce.shape.slice(),pe=se.shape.slice();h.assign(se.lo(1,1).hi(fe[0],fe[1]),ce),h.assign(se.lo(1).hi(fe[0],1),ce.hi(fe[0],1)),h.assign(se.lo(1,pe[1]-1).hi(fe[0],1),ce.lo(0,fe[1]-1).hi(fe[0],1)),h.assign(se.lo(0,1).hi(1,fe[1]),ce.hi(1)),h.assign(se.lo(pe[0]-1,1).hi(1,fe[1]),ce.lo(fe[0]-1)),se.set(0,0,ce.get(0,0)),se.set(0,pe[1]-1,ce.get(0,fe[1]-1)),se.set(pe[0]-1,0,ce.get(fe[0]-1,0)),se.set(pe[0]-1,pe[1]-1,ce.get(fe[0]-1,fe[1]-1))},W.update=function(se){se=se||{},this.objectOffset=se.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in se&&(this.contourWidth=X(se.contourWidth,Number)),"showContour"in se&&(this.showContour=X(se.showContour,Boolean)),"showSurface"in se&&(this.showSurface=!!se.showSurface),"contourTint"in se&&(this.contourTint=X(se.contourTint,Boolean)),"contourColor"in se&&(this.contourColor=ae(se.contourColor)),"contourProject"in se&&(this.contourProject=X(se.contourProject,function(ln){return X(ln,Boolean)})),"surfaceProject"in se&&(this.surfaceProject=se.surfaceProject),"dynamicColor"in se&&(this.dynamicColor=ae(se.dynamicColor)),"dynamicTint"in se&&(this.dynamicTint=X(se.dynamicTint,Number)),"dynamicWidth"in se&&(this.dynamicWidth=X(se.dynamicWidth,Number)),"opacity"in se&&(this.opacity=se.opacity),"opacityscale"in se&&(this.opacityscale=se.opacityscale),"colorBounds"in se&&(this.colorBounds=se.colorBounds),"vertexColor"in se&&(this.vertexColor=se.vertexColor?1:0),"colormap"in se&&this._colorMap.setPixels(this.genColormap(se.colormap,this.opacityscale));var ce=se.field||se.coords&&se.coords[2]||null,fe=!1;if(ce||(ce=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in se||"coords"in se){var pe=(ce.shape[0]+2)*(ce.shape[1]+2);pe>this._field[2].data.length&&(l.freeFloat(this._field[2].data),this._field[2].data=l.mallocFloat(i.nextPow2(pe))),this._field[2]=x(this._field[2].data,[ce.shape[0]+2,ce.shape[1]+2]),this.padField(this._field[2],ce),this.shape=ce.shape.slice();for(var ge=this.shape,me=0;me<2;++me)this._field[2].size>this._field[me].data.length&&(l.freeFloat(this._field[me].data),this._field[me].data=l.mallocFloat(this._field[2].size)),this._field[me]=x(this._field[me].data,[ge[0]+2,ge[1]+2]);if(se.coords){var be=se.coords;if(!Array.isArray(be)||be.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(me=0;me<2;++me){var ke=be[me];for(he=0;he<2;++he)if(ke.shape[he]!==ge[he])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[me],ke)}}else if(se.ticks){var ze=se.ticks;if(!Array.isArray(ze)||ze.length!==2)throw new Error("gl-surface: invalid ticks");for(me=0;me<2;++me){var ve=ze[me];if((Array.isArray(ve)||ve.length)&&(ve=x(ve)),ve.shape[0]!==ge[me])throw new Error("gl-surface: invalid tick length");var oe=x(ve.data,ge);oe.stride[me]=ve.stride[0],oe.stride[1^me]=0,this.padField(this._field[me],oe)}}else{for(me=0;me<2;++me){var ie=[0,0];ie[me]=1,this._field[me]=x(this._field[me].data,[ge[0]+2,ge[1]+2],ie,0)}this._field[0].set(0,0,0);for(var he=0;he<ge[0];++he)this._field[0].set(he+1,0,he);for(this._field[0].set(ge[0]+1,0,ge[0]-1),this._field[1].set(0,0,0),he=0;he<ge[1];++he)this._field[1].set(0,he+1,he);this._field[1].set(0,ge[1]+1,ge[1]-1)}var Se=this._field,ye=x(l.mallocFloat(3*Se[2].size*2),[3,ge[0]+2,ge[1]+2,2]);for(me=0;me<3;++me)m(ye.pick(me),Se[me],"mirror");var we=x(l.mallocFloat(3*Se[2].size),[ge[0]+2,ge[1]+2,3]);for(me=0;me<ge[0]+2;++me)for(he=0;he<ge[1]+2;++he){var Me=ye.get(0,me,he,0),Oe=ye.get(0,me,he,1),Ie=ye.get(1,me,he,0),de=ye.get(1,me,he,1),_e=ye.get(2,me,he,0),Ae=ye.get(2,me,he,1),Pe=Ie*Ae-de*_e,Ee=_e*Oe-Ae*Me,Fe=Me*de-Oe*Ie,Ve=Math.sqrt(Pe*Pe+Ee*Ee+Fe*Fe);Ve<1e-8?(Ve=Math.max(Math.abs(Pe),Math.abs(Ee),Math.abs(Fe)))<1e-8?(Fe=1,Ee=Pe=0,Ve=1):Ve=1/Ve:Ve=1/Math.sqrt(Ve),we.set(me,he,0,Pe*Ve),we.set(me,he,1,Ee*Ve),we.set(me,he,2,Fe*Ve)}l.free(ye.data);var Ye=[1/0,1/0,1/0],tt=[-1/0,-1/0,-1/0],nt=1/0,ht=-1/0,vt=(ge[0]-1)*(ge[1]-1)*6,pt=l.mallocFloat(i.nextPow2(10*vt)),Qe=0,Ke=0;for(me=0;me<ge[0]-1;++me)e:for(he=0;he<ge[1]-1;++he){for(var Mt=0;Mt<2;++Mt)for(var Ot=0;Ot<2;++Ot)for(var Pt=0;Pt<3;++Pt){var St=this._field[Pt].get(1+me+Mt,1+he+Ot);if(isNaN(St)||!isFinite(St))continue e}for(Pt=0;Pt<6;++Pt){var He=me+P[Pt][0],We=he+P[Pt][1],Be=this._field[0].get(He+1,We+1),Ge=this._field[1].get(He+1,We+1);St=this._field[2].get(He+1,We+1),Pe=we.get(He+1,We+1,0),Ee=we.get(He+1,We+1,1),Fe=we.get(He+1,We+1,2),se.intensity&&(ot=se.intensity.get(He,We));var ot=se.intensity?se.intensity.get(He,We):St+this.objectOffset[2];pt[Qe++]=He,pt[Qe++]=We,pt[Qe++]=Be,pt[Qe++]=Ge,pt[Qe++]=St,pt[Qe++]=0,pt[Qe++]=ot,pt[Qe++]=Pe,pt[Qe++]=Ee,pt[Qe++]=Fe,Ye[0]=Math.min(Ye[0],Be+this.objectOffset[0]),Ye[1]=Math.min(Ye[1],Ge+this.objectOffset[1]),Ye[2]=Math.min(Ye[2],St+this.objectOffset[2]),nt=Math.min(nt,ot),tt[0]=Math.max(tt[0],Be+this.objectOffset[0]),tt[1]=Math.max(tt[1],Ge+this.objectOffset[1]),tt[2]=Math.max(tt[2],St+this.objectOffset[2]),ht=Math.max(ht,ot),Ke+=1}}for(se.intensityBounds&&(nt=+se.intensityBounds[0],ht=+se.intensityBounds[1]),me=6;me<Qe;me+=10)pt[me]=(pt[me]-nt)/(ht-nt);this._vertexCount=Ke,this._coordinateBuffer.update(pt.subarray(0,Qe)),l.freeFloat(pt),l.free(we.data),this.bounds=[Ye,tt],this.intensity=se.intensity||this._field[2],this.intensityBounds[0]===nt&&this.intensityBounds[1]===ht||(fe=!0),this.intensityBounds=[nt,ht]}if("levels"in se){var it=se.levels;for(it=Array.isArray(it[0])?it.slice():[[],[],it],me=0;me<3;++me)it[me]=it[me].slice(),it[me].sort(function(ln,Jt){return ln-Jt});for(me=0;me<3;++me)for(he=0;he<it[me].length;++he)it[me][he]-=this.objectOffset[me];e:for(me=0;me<3;++me){if(it[me].length!==this.contourLevels[me].length){fe=!0;break}for(he=0;he<it[me].length;++he)if(it[me][he]!==this.contourLevels[me][he]){fe=!0;break e}}this.contourLevels=it}if(fe){Se=this._field,ge=this.shape;for(var dt=[],gt=0;gt<3;++gt){var je=this.contourLevels[gt],Re=[],rt=[],ct=[0,0,0];for(me=0;me<je.length;++me){var ut=p(this._field[gt],je[me]);Re.push(dt.length/5|0),Ke=0;e:for(he=0;he<ut.cells.length;++he){var et=ut.cells[he];for(Pt=0;Pt<2;++Pt){var xt=ut.positions[et[Pt]],mt=xt[0],Tt=0|Math.floor(mt),yt=mt-Tt,bt=xt[1],zt=0|Math.floor(bt),Ut=bt-zt,en=!1;t:for(var an=0;an<3;++an){ct[an]=0;var rn=(gt+an+1)%3;for(Mt=0;Mt<2;++Mt){var qt=Mt?yt:1-yt;for(He=0|Math.min(Math.max(Tt+Mt,0),ge[0]),Ot=0;Ot<2;++Ot){var Kt=Ot?Ut:1-Ut;if(We=0|Math.min(Math.max(zt+Ot,0),ge[1]),St=an<2?this._field[rn].get(He,We):(this.intensity.get(He,We)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(St)||isNaN(St)){en=!0;break t}var xn=qt*Kt;ct[an]+=xn*St}}}if(en){if(Pt>0){for(var on=0;on<5;++on)dt.pop();Ke-=1}continue e}dt.push(ct[0],ct[1],xt[0],xt[1],ct[2]),Ke+=1}}rt.push(Ke)}this._contourOffsets[gt]=Re,this._contourCounts[gt]=rt}var Xt=l.mallocFloat(dt.length);for(me=0;me<dt.length;++me)Xt[me]=dt[me];this._contourBuffer.update(Xt),l.freeFloat(Xt)}},W.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var se=0;se<3;++se)l.freeFloat(this._field[se].data)},W.highlight=function(se){var ce,fe;if(!se)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(ce=0;ce<3;++ce)this.enableHighlight[ce]?this.highlightLevel[ce]=se.level[ce]:this.highlightLevel[ce]=-1;for(fe=this.snapToData?se.dataCoordinate:se.position,ce=0;ce<3;++ce)fe[ce]-=this.objectOffset[ce];if(this.enableDynamic[0]&&fe[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&fe[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&fe[2]!==this.dynamicLevel[2]){for(var pe=0,ge=this.shape,me=l.mallocFloat(12*ge[0]*ge[1]),be=0;be<3;++be)if(this.enableDynamic[be]){this.dynamicLevel[be]=fe[be];var ke=(be+1)%3,ze=(be+2)%3,ve=this._field[be],oe=this._field[ke],ie=this._field[ze],he=p(ve,fe[be]),Se=he.cells,ye=he.positions;for(this._dynamicOffsets[be]=pe,ce=0;ce<Se.length;++ce)for(var we=Se[ce],Me=0;Me<2;++Me){var Oe=ye[we[Me]],Ie=+Oe[0],de=0|Ie,_e=0|Math.min(de+1,ge[0]),Ae=Ie-de,Pe=1-Ae,Ee=+Oe[1],Fe=0|Ee,Ve=0|Math.min(Fe+1,ge[1]),Ye=Ee-Fe,tt=1-Ye,nt=Pe*tt,ht=Pe*Ye,vt=Ae*tt,pt=Ae*Ye,Qe=nt*oe.get(de,Fe)+ht*oe.get(de,Ve)+vt*oe.get(_e,Fe)+pt*oe.get(_e,Ve),Ke=nt*ie.get(de,Fe)+ht*ie.get(de,Ve)+vt*ie.get(_e,Fe)+pt*ie.get(_e,Ve);if(isNaN(Qe)||isNaN(Ke)){Me&&(pe-=1);break}me[2*pe+0]=Qe,me[2*pe+1]=Ke,pe+=1}this._dynamicCounts[be]=pe-this._dynamicOffsets[be]}else this.dynamicLevel[be]=NaN,this._dynamicCounts[be]=0;this._dynamicBuffer.update(me.subarray(0,2*pe)),l.freeFloat(me)}}},7766:function(f,o,t){var i=t(9618),n=t(5298),r=t(1888);f.exports=function(_){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(a||function(w){a=[w.LINEAR,w.NEAREST_MIPMAP_LINEAR,w.LINEAR_MIPMAP_NEAREST,w.LINEAR_MIPMAP_NEAREST],l=[w.NEAREST,w.LINEAR,w.NEAREST_MIPMAP_NEAREST,w.NEAREST_MIPMAP_LINEAR,w.LINEAR_MIPMAP_NEAREST,w.LINEAR_MIPMAP_LINEAR],u=[w.REPEAT,w.CLAMP_TO_EDGE,w.MIRRORED_REPEAT]}(_),typeof arguments[1]=="number")return m(_,arguments[1],arguments[2],arguments[3]||_.RGBA,arguments[4]||_.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return m(_,0|arguments[1][0],0|arguments[1][1],arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var d=arguments[1],S=h(d)?d:d.raw;if(S)return function(w,E,C,O,P,z){var j=y(w);return w.texImage2D(w.TEXTURE_2D,0,P,P,z,E),new p(w,j,C,O,P,z)}(_,S,0|d.width,0|d.height,arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(d.shape&&d.data&&d.stride)return function(w,E){var C=E.dtype,O=E.shape.slice(),P=w.getParameter(w.MAX_TEXTURE_SIZE);if(O[0]<0||O[0]>P||O[1]<0||O[1]>P)throw new Error("gl-texture2d: Invalid texture size");var z=g(O,E.stride.slice()),j=0;C==="float32"?j=w.FLOAT:C==="float64"?(j=w.FLOAT,z=!1,C="float32"):C==="uint8"?j=w.UNSIGNED_BYTE:(j=w.UNSIGNED_BYTE,z=!1,C="uint8");var I,N,W=0;if(O.length===2)W=w.LUMINANCE,O=[O[0],O[1],1],E=i(E.data,O,[E.stride[0],E.stride[1],1],E.offset);else{if(O.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(O[2]===1)W=w.ALPHA;else if(O[2]===2)W=w.LUMINANCE_ALPHA;else if(O[2]===3)W=w.RGB;else{if(O[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");W=w.RGBA}}j!==w.FLOAT||w.getExtension("OES_texture_float")||(j=w.UNSIGNED_BYTE,z=!1);var F=E.size;if(z)I=E.offset===0&&E.data.length===F?E.data:E.data.subarray(E.offset,E.offset+F);else{var U=[O[2],O[2]*O[0],1];N=r.malloc(F,C);var H=i(N,O,U,0);C!=="float32"&&C!=="float64"||j!==w.UNSIGNED_BYTE?n.assign(H,E):c(H,E),I=N.subarray(0,F)}var ne=y(w);return w.texImage2D(w.TEXTURE_2D,0,W,O[0],O[1],0,W,j,I),z||r.free(N),new p(w,ne,O[0],O[1],W,j)}(_,d)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var a=null,l=null,u=null;function h(_){return typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&_ instanceof HTMLVideoElement||typeof ImageData<"u"&&_ instanceof ImageData}var c=function(_,d){n.muls(_,d,255)};function x(_,d,S){var w=_.gl,E=w.getParameter(w.MAX_TEXTURE_SIZE);if(d<0||d>E||S<0||S>E)throw new Error("gl-texture2d: Invalid texture size");return _._shape=[d,S],_.bind(),w.texImage2D(w.TEXTURE_2D,0,_.format,d,S,0,_.format,_.type,null),_._mipLevels=[0],_}function p(_,d,S,w,E,C){this.gl=_,this.handle=d,this.format=E,this.type=C,this._shape=[S,w],this._mipLevels=[0],this._magFilter=_.NEAREST,this._minFilter=_.NEAREST,this._wrapS=_.CLAMP_TO_EDGE,this._wrapT=_.CLAMP_TO_EDGE,this._anisoSamples=1;var O=this,P=[this._wrapS,this._wrapT];Object.defineProperties(P,[{get:function(){return O._wrapS},set:function(j){return O.wrapS=j}},{get:function(){return O._wrapT},set:function(j){return O.wrapT=j}}]),this._wrapVector=P;var z=[this._shape[0],this._shape[1]];Object.defineProperties(z,[{get:function(){return O._shape[0]},set:function(j){return O.width=j}},{get:function(){return O._shape[1]},set:function(j){return O.height=j}}]),this._shapeVector=z}var v=p.prototype;function g(_,d){return _.length===3?d[2]===1&&d[1]===_[0]*_[2]&&d[0]===_[2]:d[0]===1&&d[1]===_[0]}function y(_){var d=_.createTexture();return _.bindTexture(_.TEXTURE_2D,d),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),d}function m(_,d,S,w,E){var C=_.getParameter(_.MAX_TEXTURE_SIZE);if(d<0||d>C||S<0||S>C)throw new Error("gl-texture2d: Invalid texture shape");if(E===_.FLOAT&&!_.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var O=y(_);return _.texImage2D(_.TEXTURE_2D,0,w,d,S,0,w,E,null),new p(_,O,d,S,w,E)}Object.defineProperties(v,{minFilter:{get:function(){return this._minFilter},set:function(_){this.bind();var d=this.gl;if(this.type===d.FLOAT&&a.indexOf(_)>=0&&(d.getExtension("OES_texture_float_linear")||(_=d.NEAREST)),l.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,_),this._minFilter=_}},magFilter:{get:function(){return this._magFilter},set:function(_){this.bind();var d=this.gl;if(this.type===d.FLOAT&&a.indexOf(_)>=0&&(d.getExtension("OES_texture_float_linear")||(_=d.NEAREST)),l.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,_),this._magFilter=_}},mipSamples:{get:function(){return this._anisoSamples},set:function(_){var d=this._anisoSamples;if(this._anisoSamples=0|Math.max(_,1),d!==this._anisoSamples){var S=this.gl.getExtension("EXT_texture_filter_anisotropic");S&&this.gl.texParameterf(this.gl.TEXTURE_2D,S.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(_){if(this.bind(),u.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,_),this._wrapS=_}},wrapT:{get:function(){return this._wrapT},set:function(_){if(this.bind(),u.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,_),this._wrapT=_}},wrap:{get:function(){return this._wrapVector},set:function(_){if(Array.isArray(_)||(_=[_,_]),_.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var d=0;d<2;++d)if(u.indexOf(_[d])<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);this._wrapS=_[0],this._wrapT=_[1];var S=this.gl;return this.bind(),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,this._wrapS),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,this._wrapT),_}},shape:{get:function(){return this._shapeVector},set:function(_){if(Array.isArray(_)){if(_.length!==2)throw new Error("gl-texture2d: Invalid texture shape")}else _=[0|_,0|_];return x(this,0|_[0],0|_[1]),[0|_[0],0|_[1]]}},width:{get:function(){return this._shape[0]},set:function(_){return x(this,_|=0,this._shape[1]),_}},height:{get:function(){return this._shape[1]},set:function(_){return _|=0,x(this,this._shape[0],_),_}}}),v.bind=function(_){var d=this.gl;return _!==void 0&&d.activeTexture(d.TEXTURE0+(0|_)),d.bindTexture(d.TEXTURE_2D,this.handle),_!==void 0?0|_:d.getParameter(d.ACTIVE_TEXTURE)-d.TEXTURE0},v.dispose=function(){this.gl.deleteTexture(this.handle)},v.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var _=Math.min(this._shape[0],this._shape[1]),d=0;_>0;++d,_>>>=1)this._mipLevels.indexOf(d)<0&&this._mipLevels.push(d)},v.setPixels=function(_,d,S,w){var E=this.gl;this.bind(),Array.isArray(d)?(w=S,S=0|d[1],d=0|d[0]):(d=d||0,S=S||0),w=w||0;var C=h(_)?_:_.raw;if(C)this._mipLevels.indexOf(w)<0?(E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,this.type,C),this._mipLevels.push(w)):E.texSubImage2D(E.TEXTURE_2D,w,d,S,this.format,this.type,C);else{if(!(_.shape&&_.stride&&_.data))throw new Error("gl-texture2d: Unsupported data type");if(_.shape.length<2||d+_.shape[1]>this._shape[1]>>>w||S+_.shape[0]>this._shape[0]>>>w||d<0||S<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");(function(O,P,z,j,I,N,W,F){var U=F.dtype,H=F.shape.slice();if(H.length<2||H.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var ne=0,$=0,K=g(H,F.stride.slice());if(U==="float32"?ne=O.FLOAT:U==="float64"?(ne=O.FLOAT,K=!1,U="float32"):U==="uint8"?ne=O.UNSIGNED_BYTE:(ne=O.UNSIGNED_BYTE,K=!1,U="uint8"),H.length===2)$=O.LUMINANCE,H=[H[0],H[1],1],F=i(F.data,H,[F.stride[0],F.stride[1],1],F.offset);else{if(H.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(H[2]===1)$=O.ALPHA;else if(H[2]===2)$=O.LUMINANCE_ALPHA;else if(H[2]===3)$=O.RGB;else{if(H[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");$=O.RGBA}H[2]}if($!==O.LUMINANCE&&$!==O.ALPHA||I!==O.LUMINANCE&&I!==O.ALPHA||($=I),$!==I)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var Q=F.size,Z=W.indexOf(j)<0;if(Z&&W.push(j),ne===N&&K)F.offset===0&&F.data.length===Q?Z?O.texImage2D(O.TEXTURE_2D,j,I,H[0],H[1],0,I,N,F.data):O.texSubImage2D(O.TEXTURE_2D,j,P,z,H[0],H[1],I,N,F.data):Z?O.texImage2D(O.TEXTURE_2D,j,I,H[0],H[1],0,I,N,F.data.subarray(F.offset,F.offset+Q)):O.texSubImage2D(O.TEXTURE_2D,j,P,z,H[0],H[1],I,N,F.data.subarray(F.offset,F.offset+Q));else{var X;X=N===O.FLOAT?r.mallocFloat32(Q):r.mallocUint8(Q);var te=i(X,H,[H[2],H[2]*H[0],1]);ne===O.FLOAT&&N===O.UNSIGNED_BYTE?c(te,F):n.assign(te,F),Z?O.texImage2D(O.TEXTURE_2D,j,I,H[0],H[1],0,I,N,X.subarray(0,Q)):O.texSubImage2D(O.TEXTURE_2D,j,P,z,H[0],H[1],I,N,X.subarray(0,Q)),N===O.FLOAT?r.freeFloat32(X):r.freeUint8(X)}})(E,d,S,w,this.format,this.type,this._mipLevels,_)}}},1433:function(f){f.exports=function(o,t,i){t?t.bind():o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,null);var n=0|o.getParameter(o.MAX_VERTEX_ATTRIBS);if(i){if(i.length>n)throw new Error("gl-vao: Too many vertex attributes");for(var r=0;r<i.length;++r){var a=i[r];if(a.buffer){var l=a.buffer,u=a.size||4,h=a.type||o.FLOAT,c=!!a.normalized,x=a.stride||0,p=a.offset||0;l.bind(),o.enableVertexAttribArray(r),o.vertexAttribPointer(r,u,h,c,x,p)}else{if(typeof a=="number")o.vertexAttrib1f(r,a);else if(a.length===1)o.vertexAttrib1f(r,a[0]);else if(a.length===2)o.vertexAttrib2f(r,a[0],a[1]);else if(a.length===3)o.vertexAttrib3f(r,a[0],a[1],a[2]);else{if(a.length!==4)throw new Error("gl-vao: Invalid vertex attribute");o.vertexAttrib4f(r,a[0],a[1],a[2],a[3])}o.disableVertexAttribArray(r)}}for(;r<n;++r)o.disableVertexAttribArray(r)}else for(o.bindBuffer(o.ARRAY_BUFFER,null),r=0;r<n;++r)o.disableVertexAttribArray(r)}},870:function(f,o,t){var i=t(1433);function n(r){this.gl=r,this._elements=null,this._attributes=null,this._elementsType=r.UNSIGNED_SHORT}n.prototype.bind=function(){i(this.gl,this._elements,this._attributes)},n.prototype.update=function(r,a,l){this._elements=a,this._attributes=r,this._elementsType=l||this.gl.UNSIGNED_SHORT},n.prototype.dispose=function(){},n.prototype.unbind=function(){},n.prototype.draw=function(r,a,l){l=l||0;var u=this.gl;this._elements?u.drawElements(r,a,this._elementsType,l):u.drawArrays(r,l,a)},f.exports=function(r){return new n(r)}},7518:function(f,o,t){var i=t(1433);function n(a,l,u,h,c,x){this.location=a,this.dimension=l,this.a=u,this.b=h,this.c=c,this.d=x}function r(a,l,u){this.gl=a,this._ext=l,this.handle=u,this._attribs=[],this._useElements=!1,this._elementsType=a.UNSIGNED_SHORT}n.prototype.bind=function(a){switch(this.dimension){case 1:a.vertexAttrib1f(this.location,this.a);break;case 2:a.vertexAttrib2f(this.location,this.a,this.b);break;case 3:a.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:a.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},r.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var a=0;a<this._attribs.length;++a)this._attribs[a].bind(this.gl)},r.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},r.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},r.prototype.update=function(a,l,u){if(this.bind(),i(this.gl,l,a),this.unbind(),this._attribs.length=0,a)for(var h=0;h<a.length;++h){var c=a[h];typeof c=="number"?this._attribs.push(new n(h,1,c)):Array.isArray(c)&&this._attribs.push(new n(h,c.length,c[0],c[1],c[2],c[3]))}this._useElements=!!l,this._elementsType=u||this.gl.UNSIGNED_SHORT},r.prototype.draw=function(a,l,u){u=u||0;var h=this.gl;this._useElements?h.drawElements(a,l,this._elementsType,u):h.drawArrays(a,u,l)},f.exports=function(a,l){return new r(a,l,l.createVertexArrayOES())}},8116:function(f,o,t){var i=t(7518),n=t(870);function r(a){this.bindVertexArrayOES=a.bindVertexArray.bind(a),this.createVertexArrayOES=a.createVertexArray.bind(a),this.deleteVertexArrayOES=a.deleteVertexArray.bind(a)}f.exports=function(a,l,u,h){var c,x=a.createVertexArray?new r(a):a.getExtension("OES_vertex_array_object");return(c=x?i(a,x):n(a)).update(l,u,h),c}},5632:function(f){f.exports=function(o,t,i){return o[0]=t[0]+i[0],o[1]=t[1]+i[1],o[2]=t[2]+i[2],o}},8192:function(f,o,t){f.exports=function(a,l){var u=i(a[0],a[1],a[2]),h=i(l[0],l[1],l[2]);n(u,u),n(h,h);var c=r(u,h);return c>1?0:Math.acos(c)};var i=t(2825),n=t(3536),r=t(244)},9226:function(f){f.exports=function(o,t){return o[0]=Math.ceil(t[0]),o[1]=Math.ceil(t[1]),o[2]=Math.ceil(t[2]),o}},3126:function(f){f.exports=function(o){var t=new Float32Array(3);return t[0]=o[0],t[1]=o[1],t[2]=o[2],t}},3990:function(f){f.exports=function(o,t){return o[0]=t[0],o[1]=t[1],o[2]=t[2],o}},1091:function(f){f.exports=function(){var o=new Float32Array(3);return o[0]=0,o[1]=0,o[2]=0,o}},5911:function(f){f.exports=function(o,t,i){var n=t[0],r=t[1],a=t[2],l=i[0],u=i[1],h=i[2];return o[0]=r*h-a*u,o[1]=a*l-n*h,o[2]=n*u-r*l,o}},5455:function(f,o,t){f.exports=t(7056)},7056:function(f){f.exports=function(o,t){var i=t[0]-o[0],n=t[1]-o[1],r=t[2]-o[2];return Math.sqrt(i*i+n*n+r*r)}},4008:function(f,o,t){f.exports=t(6690)},6690:function(f){f.exports=function(o,t,i){return o[0]=t[0]/i[0],o[1]=t[1]/i[1],o[2]=t[2]/i[2],o}},244:function(f){f.exports=function(o,t){return o[0]*t[0]+o[1]*t[1]+o[2]*t[2]}},2613:function(f){f.exports=1e-6},9922:function(f,o,t){f.exports=function(n,r){var a=n[0],l=n[1],u=n[2],h=r[0],c=r[1],x=r[2];return Math.abs(a-h)<=i*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(l-c)<=i*Math.max(1,Math.abs(l),Math.abs(c))&&Math.abs(u-x)<=i*Math.max(1,Math.abs(u),Math.abs(x))};var i=t(2613)},9265:function(f){f.exports=function(o,t){return o[0]===t[0]&&o[1]===t[1]&&o[2]===t[2]}},2681:function(f){f.exports=function(o,t){return o[0]=Math.floor(t[0]),o[1]=Math.floor(t[1]),o[2]=Math.floor(t[2]),o}},5137:function(f,o,t){f.exports=function(n,r,a,l,u,h){var c,x;for(r||(r=3),a||(a=0),x=l?Math.min(l*r+a,n.length):n.length,c=a;c<x;c+=r)i[0]=n[c],i[1]=n[c+1],i[2]=n[c+2],u(i,i,h),n[c]=i[0],n[c+1]=i[1],n[c+2]=i[2];return n};var i=t(1091)()},2825:function(f){f.exports=function(o,t,i){var n=new Float32Array(3);return n[0]=o,n[1]=t,n[2]=i,n}},2931:function(f,o,t){f.exports={EPSILON:t(2613),create:t(1091),clone:t(3126),angle:t(8192),fromValues:t(2825),copy:t(3990),set:t(1463),equals:t(9922),exactEquals:t(9265),add:t(5632),subtract:t(6843),sub:t(2229),multiply:t(5847),mul:t(4505),divide:t(6690),div:t(4008),min:t(8107),max:t(7417),floor:t(2681),ceil:t(9226),round:t(2447),scale:t(6621),scaleAndAdd:t(8489),distance:t(7056),dist:t(5455),squaredDistance:t(2953),sqrDist:t(6141),length:t(1387),len:t(868),squaredLength:t(3066),sqrLen:t(5486),negate:t(5093),inverse:t(811),normalize:t(3536),dot:t(244),cross:t(5911),lerp:t(6658),random:t(7636),transformMat4:t(5673),transformMat3:t(492),transformQuat:t(264),rotateX:t(6894),rotateY:t(109),rotateZ:t(8692),forEach:t(5137)}},811:function(f){f.exports=function(o,t){return o[0]=1/t[0],o[1]=1/t[1],o[2]=1/t[2],o}},868:function(f,o,t){f.exports=t(1387)},1387:function(f){f.exports=function(o){var t=o[0],i=o[1],n=o[2];return Math.sqrt(t*t+i*i+n*n)}},6658:function(f){f.exports=function(o,t,i,n){var r=t[0],a=t[1],l=t[2];return o[0]=r+n*(i[0]-r),o[1]=a+n*(i[1]-a),o[2]=l+n*(i[2]-l),o}},7417:function(f){f.exports=function(o,t,i){return o[0]=Math.max(t[0],i[0]),o[1]=Math.max(t[1],i[1]),o[2]=Math.max(t[2],i[2]),o}},8107:function(f){f.exports=function(o,t,i){return o[0]=Math.min(t[0],i[0]),o[1]=Math.min(t[1],i[1]),o[2]=Math.min(t[2],i[2]),o}},4505:function(f,o,t){f.exports=t(5847)},5847:function(f){f.exports=function(o,t,i){return o[0]=t[0]*i[0],o[1]=t[1]*i[1],o[2]=t[2]*i[2],o}},5093:function(f){f.exports=function(o,t){return o[0]=-t[0],o[1]=-t[1],o[2]=-t[2],o}},3536:function(f){f.exports=function(o,t){var i=t[0],n=t[1],r=t[2],a=i*i+n*n+r*r;return a>0&&(a=1/Math.sqrt(a),o[0]=t[0]*a,o[1]=t[1]*a,o[2]=t[2]*a),o}},7636:function(f){f.exports=function(o,t){t=t||1;var i=2*Math.random()*Math.PI,n=2*Math.random()-1,r=Math.sqrt(1-n*n)*t;return o[0]=Math.cos(i)*r,o[1]=Math.sin(i)*r,o[2]=n*t,o}},6894:function(f){f.exports=function(o,t,i,n){var r=i[1],a=i[2],l=t[1]-r,u=t[2]-a,h=Math.sin(n),c=Math.cos(n);return o[0]=t[0],o[1]=r+l*c-u*h,o[2]=a+l*h+u*c,o}},109:function(f){f.exports=function(o,t,i,n){var r=i[0],a=i[2],l=t[0]-r,u=t[2]-a,h=Math.sin(n),c=Math.cos(n);return o[0]=r+u*h+l*c,o[1]=t[1],o[2]=a+u*c-l*h,o}},8692:function(f){f.exports=function(o,t,i,n){var r=i[0],a=i[1],l=t[0]-r,u=t[1]-a,h=Math.sin(n),c=Math.cos(n);return o[0]=r+l*c-u*h,o[1]=a+l*h+u*c,o[2]=t[2],o}},2447:function(f){f.exports=function(o,t){return o[0]=Math.round(t[0]),o[1]=Math.round(t[1]),o[2]=Math.round(t[2]),o}},6621:function(f){f.exports=function(o,t,i){return o[0]=t[0]*i,o[1]=t[1]*i,o[2]=t[2]*i,o}},8489:function(f){f.exports=function(o,t,i,n){return o[0]=t[0]+i[0]*n,o[1]=t[1]+i[1]*n,o[2]=t[2]+i[2]*n,o}},1463:function(f){f.exports=function(o,t,i,n){return o[0]=t,o[1]=i,o[2]=n,o}},6141:function(f,o,t){f.exports=t(2953)},5486:function(f,o,t){f.exports=t(3066)},2953:function(f){f.exports=function(o,t){var i=t[0]-o[0],n=t[1]-o[1],r=t[2]-o[2];return i*i+n*n+r*r}},3066:function(f){f.exports=function(o){var t=o[0],i=o[1],n=o[2];return t*t+i*i+n*n}},2229:function(f,o,t){f.exports=t(6843)},6843:function(f){f.exports=function(o,t,i){return o[0]=t[0]-i[0],o[1]=t[1]-i[1],o[2]=t[2]-i[2],o}},492:function(f){f.exports=function(o,t,i){var n=t[0],r=t[1],a=t[2];return o[0]=n*i[0]+r*i[3]+a*i[6],o[1]=n*i[1]+r*i[4]+a*i[7],o[2]=n*i[2]+r*i[5]+a*i[8],o}},5673:function(f){f.exports=function(o,t,i){var n=t[0],r=t[1],a=t[2],l=i[3]*n+i[7]*r+i[11]*a+i[15];return l=l||1,o[0]=(i[0]*n+i[4]*r+i[8]*a+i[12])/l,o[1]=(i[1]*n+i[5]*r+i[9]*a+i[13])/l,o[2]=(i[2]*n+i[6]*r+i[10]*a+i[14])/l,o}},264:function(f){f.exports=function(o,t,i){var n=t[0],r=t[1],a=t[2],l=i[0],u=i[1],h=i[2],c=i[3],x=c*n+u*a-h*r,p=c*r+h*n-l*a,v=c*a+l*r-u*n,g=-l*n-u*r-h*a;return o[0]=x*c+g*-l+p*-h-v*-u,o[1]=p*c+g*-u+v*-l-x*-h,o[2]=v*c+g*-h+x*-u-p*-l,o}},4361:function(f){f.exports=function(o,t,i){return o[0]=t[0]+i[0],o[1]=t[1]+i[1],o[2]=t[2]+i[2],o[3]=t[3]+i[3],o}},2335:function(f){f.exports=function(o){var t=new Float32Array(4);return t[0]=o[0],t[1]=o[1],t[2]=o[2],t[3]=o[3],t}},2933:function(f){f.exports=function(o,t){return o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=t[3],o}},7536:function(f){f.exports=function(){var o=new Float32Array(4);return o[0]=0,o[1]=0,o[2]=0,o[3]=0,o}},4691:function(f){f.exports=function(o,t){var i=t[0]-o[0],n=t[1]-o[1],r=t[2]-o[2],a=t[3]-o[3];return Math.sqrt(i*i+n*n+r*r+a*a)}},1373:function(f){f.exports=function(o,t,i){return o[0]=t[0]/i[0],o[1]=t[1]/i[1],o[2]=t[2]/i[2],o[3]=t[3]/i[3],o}},3750:function(f){f.exports=function(o,t){return o[0]*t[0]+o[1]*t[1]+o[2]*t[2]+o[3]*t[3]}},3390:function(f){f.exports=function(o,t,i,n){var r=new Float32Array(4);return r[0]=o,r[1]=t,r[2]=i,r[3]=n,r}},9970:function(f,o,t){f.exports={create:t(7536),clone:t(2335),fromValues:t(3390),copy:t(2933),set:t(4578),add:t(4361),subtract:t(6860),multiply:t(3576),divide:t(1373),min:t(2334),max:t(160),scale:t(9288),scaleAndAdd:t(4844),distance:t(4691),squaredDistance:t(7960),length:t(6808),squaredLength:t(483),negate:t(1498),inverse:t(4494),normalize:t(5177),dot:t(3750),lerp:t(2573),random:t(9131),transformMat4:t(5352),transformQuat:t(4041)}},4494:function(f){f.exports=function(o,t){return o[0]=1/t[0],o[1]=1/t[1],o[2]=1/t[2],o[3]=1/t[3],o}},6808:function(f){f.exports=function(o){var t=o[0],i=o[1],n=o[2],r=o[3];return Math.sqrt(t*t+i*i+n*n+r*r)}},2573:function(f){f.exports=function(o,t,i,n){var r=t[0],a=t[1],l=t[2],u=t[3];return o[0]=r+n*(i[0]-r),o[1]=a+n*(i[1]-a),o[2]=l+n*(i[2]-l),o[3]=u+n*(i[3]-u),o}},160:function(f){f.exports=function(o,t,i){return o[0]=Math.max(t[0],i[0]),o[1]=Math.max(t[1],i[1]),o[2]=Math.max(t[2],i[2]),o[3]=Math.max(t[3],i[3]),o}},2334:function(f){f.exports=function(o,t,i){return o[0]=Math.min(t[0],i[0]),o[1]=Math.min(t[1],i[1]),o[2]=Math.min(t[2],i[2]),o[3]=Math.min(t[3],i[3]),o}},3576:function(f){f.exports=function(o,t,i){return o[0]=t[0]*i[0],o[1]=t[1]*i[1],o[2]=t[2]*i[2],o[3]=t[3]*i[3],o}},1498:function(f){f.exports=function(o,t){return o[0]=-t[0],o[1]=-t[1],o[2]=-t[2],o[3]=-t[3],o}},5177:function(f){f.exports=function(o,t){var i=t[0],n=t[1],r=t[2],a=t[3],l=i*i+n*n+r*r+a*a;return l>0&&(l=1/Math.sqrt(l),o[0]=i*l,o[1]=n*l,o[2]=r*l,o[3]=a*l),o}},9131:function(f,o,t){var i=t(5177),n=t(9288);f.exports=function(r,a){return a=a||1,r[0]=Math.random(),r[1]=Math.random(),r[2]=Math.random(),r[3]=Math.random(),i(r,r),n(r,r,a),r}},9288:function(f){f.exports=function(o,t,i){return o[0]=t[0]*i,o[1]=t[1]*i,o[2]=t[2]*i,o[3]=t[3]*i,o}},4844:function(f){f.exports=function(o,t,i,n){return o[0]=t[0]+i[0]*n,o[1]=t[1]+i[1]*n,o[2]=t[2]+i[2]*n,o[3]=t[3]+i[3]*n,o}},4578:function(f){f.exports=function(o,t,i,n,r){return o[0]=t,o[1]=i,o[2]=n,o[3]=r,o}},7960:function(f){f.exports=function(o,t){var i=t[0]-o[0],n=t[1]-o[1],r=t[2]-o[2],a=t[3]-o[3];return i*i+n*n+r*r+a*a}},483:function(f){f.exports=function(o){var t=o[0],i=o[1],n=o[2],r=o[3];return t*t+i*i+n*n+r*r}},6860:function(f){f.exports=function(o,t,i){return o[0]=t[0]-i[0],o[1]=t[1]-i[1],o[2]=t[2]-i[2],o[3]=t[3]-i[3],o}},5352:function(f){f.exports=function(o,t,i){var n=t[0],r=t[1],a=t[2],l=t[3];return o[0]=i[0]*n+i[4]*r+i[8]*a+i[12]*l,o[1]=i[1]*n+i[5]*r+i[9]*a+i[13]*l,o[2]=i[2]*n+i[6]*r+i[10]*a+i[14]*l,o[3]=i[3]*n+i[7]*r+i[11]*a+i[15]*l,o}},4041:function(f){f.exports=function(o,t,i){var n=t[0],r=t[1],a=t[2],l=i[0],u=i[1],h=i[2],c=i[3],x=c*n+u*a-h*r,p=c*r+h*n-l*a,v=c*a+l*r-u*n,g=-l*n-u*r-h*a;return o[0]=x*c+g*-l+p*-h-v*-u,o[1]=p*c+g*-u+v*-l-x*-h,o[2]=v*c+g*-h+x*-u-p*-l,o[3]=t[3],o}},1848:function(f,o,t){var i=t(4905),n=t(6468);f.exports=function(r){for(var a=Array.isArray(r)?r:i(r),l=0;l<a.length;l++){var u=a[l];if(u.type==="preprocessor"){var h=u.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(h&&h[2]){var c=h[1],x=h[2];return(c?n(x):x).trim()}}}}},5874:function(f,o,t){f.exports=function(O){var P,z,j,I=0,N=0,W=u,F=[],U=[],H=1,ne=0,$=0,K=!1,Q=!1,Z="",X=r,te=i;(O=O||{}).version==="300 es"&&(X=l,te=a);var ae={},se={};for(I=0;I<X.length;I++)ae[X[I]]=!0;for(I=0;I<te.length;I++)se[te[I]]=!0;return function(he){return U=[],he!==null?function(Se){var ye;for(I=0,Se.toString&&(Se=Se.toString()),Z+=Se.replace(/\r\n/g,`
`),j=Z.length;P=Z[I],I<j;){switch(ye=I,W){case c:I=me();break;case x:case p:I=ge();break;case v:I=be();break;case g:I=ve();break;case E:I=ze();break;case y:I=oe();break;case h:I=ie();break;case S:I=pe();break;case u:I=fe()}ye!==I&&(Z[ye]===`
`?(ne=0,++H):++ne)}return N+=I,Z=Z.slice(I),U}(he):(F.length&&ce(F.join("")),W=w,ce("(eof)"),U)};function ce(he){he.length&&U.push({type:C[W],data:he,position:$,line:H,column:ne})}function fe(){return F=F.length?[]:F,z==="/"&&P==="*"?($=N+I-1,W=c,z=P,I+1):z==="/"&&P==="/"?($=N+I-1,W=x,z=P,I+1):P==="#"?(W=p,$=N+I,I):/\s/.test(P)?(W=S,$=N+I,I):(K=/\d/.test(P),Q=/[^\w_]/.test(P),$=N+I,W=K?g:Q?v:h,I)}function pe(){return/[^\s]/g.test(P)?(ce(F.join("")),W=u,I):(F.push(P),z=P,I+1)}function ge(){return P!=="\r"&&P!==`
`||z==="\\"?(F.push(P),z=P,I+1):(ce(F.join("")),W=u,I)}function me(){return P==="/"&&z==="*"?(F.push(P),ce(F.join("")),W=u,I+1):(F.push(P),z=P,I+1)}function be(){if(z==="."&&/\d/.test(P))return W=y,I;if(z==="/"&&P==="*")return W=c,I;if(z==="/"&&P==="/")return W=x,I;if(P==="."&&F.length){for(;ke(F););return W=y,I}if(P===";"||P===")"||P==="("){if(F.length)for(;ke(F););return ce(P),W=u,I+1}var he=F.length===2&&P!=="=";if(/[\w_\d\s]/.test(P)||he){for(;ke(F););return W=u,I}return F.push(P),z=P,I+1}function ke(he){for(var Se,ye,we=0;;){if(Se=n.indexOf(he.slice(0,he.length+we).join("")),ye=n[Se],Se===-1){if(we--+he.length>0)continue;ye=he.slice(0,1).join("")}return ce(ye),$+=ye.length,(F=F.slice(ye.length)).length}}function ze(){return/[^a-fA-F0-9]/.test(P)?(ce(F.join("")),W=u,I):(F.push(P),z=P,I+1)}function ve(){return P==="."||/[eE]/.test(P)?(F.push(P),W=y,z=P,I+1):P==="x"&&F.length===1&&F[0]==="0"?(W=E,F.push(P),z=P,I+1):/[^\d]/.test(P)?(ce(F.join("")),W=u,I):(F.push(P),z=P,I+1)}function oe(){return P==="f"&&(F.push(P),z=P,I+=1),/[eE]/.test(P)?(F.push(P),z=P,I+1):(P!=="-"&&P!=="+"||!/[eE]/.test(z))&&/[^\d]/.test(P)?(ce(F.join("")),W=u,I):(F.push(P),z=P,I+1)}function ie(){if(/[^\d\w_]/.test(P)){var he=F.join("");return W=se[he]?d:ae[he]?_:m,ce(F.join("")),W=u,I}return F.push(P),z=P,I+1}};var i=t(620),n=t(7827),r=t(6852),a=t(7932),l=t(3508),u=999,h=9999,c=0,x=1,p=2,v=3,g=4,y=5,m=6,_=7,d=8,S=9,w=10,E=11,C=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3508:function(f,o,t){var i=t(6852);i=i.slice().filter(function(n){return!/^(gl\_|texture)/.test(n)}),f.exports=i.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},6852:function(f){f.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},7932:function(f,o,t){var i=t(620);f.exports=i.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},620:function(f){f.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},7827:function(f){f.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},4905:function(f,o,t){var i=t(5874);f.exports=function(n,r){var a=i(r),l=[];return(l=l.concat(a(n))).concat(a(null))}},3236:function(f){f.exports=function(o){typeof o=="string"&&(o=[o]);for(var t=[].slice.call(arguments,1),i=[],n=0;n<o.length-1;n++)i.push(o[n],t[n]||"");return i.push(o[n]),i.join("")}},7520:function(f,o,t){var i=t(9507);f.exports=i&&function(){var n=!1;try{var r=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,r),window.removeEventListener("test",null,r)}catch{n=!1}return n}()},3778:function(f,o){o.read=function(t,i,n,r,a){var l,u,h=8*a-r-1,c=(1<<h)-1,x=c>>1,p=-7,v=n?a-1:0,g=n?-1:1,y=t[i+v];for(v+=g,l=y&(1<<-p)-1,y>>=-p,p+=h;p>0;l=256*l+t[i+v],v+=g,p-=8);for(u=l&(1<<-p)-1,l>>=-p,p+=r;p>0;u=256*u+t[i+v],v+=g,p-=8);if(l===0)l=1-x;else{if(l===c)return u?NaN:1/0*(y?-1:1);u+=Math.pow(2,r),l-=x}return(y?-1:1)*u*Math.pow(2,l-r)},o.write=function(t,i,n,r,a,l){var u,h,c,x=8*l-a-1,p=(1<<x)-1,v=p>>1,g=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=r?0:l-1,m=r?1:-1,_=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(h=isNaN(i)?1:0,u=p):(u=Math.floor(Math.log(i)/Math.LN2),i*(c=Math.pow(2,-u))<1&&(u--,c*=2),(i+=u+v>=1?g/c:g*Math.pow(2,1-v))*c>=2&&(u++,c/=2),u+v>=p?(h=0,u=p):u+v>=1?(h=(i*c-1)*Math.pow(2,a),u+=v):(h=i*Math.pow(2,v-1)*Math.pow(2,a),u=0));a>=8;t[n+y]=255&h,y+=m,h/=256,a-=8);for(u=u<<a|h,x+=a;x>0;t[n+y]=255&u,y+=m,u/=256,x-=8);t[n+y-m]|=128*_}},8954:function(f,o,t){f.exports=function(x,p){var v=x.length;if(v===0)throw new Error("Must have at least d+1 points");var g=x[0].length;if(v<=g)throw new Error("Must input at least d+1 points");var y=x.slice(0,g+1),m=i.apply(void 0,y);if(m===0)throw new Error("Input not in general position");for(var _=new Array(g+1),d=0;d<=g;++d)_[d]=d;m<0&&(_[0]=1,_[1]=0);var S=new r(_,new Array(g+1),!1),w=S.adjacent,E=new Array(g+2);for(d=0;d<=g;++d){for(var C=_.slice(),O=0;O<=g;++O)O===d&&(C[O]=-1);var P=C[0];C[0]=C[1],C[1]=P;var z=new r(C,new Array(g+1),!0);w[d]=z,E[d]=z}for(E[g+1]=S,d=0;d<=g;++d){C=w[d].vertices;var j=w[d].adjacent;for(O=0;O<=g;++O){var I=C[O];if(I<0)j[O]=S;else for(var N=0;N<=g;++N)w[N].vertices.indexOf(I)<0&&(j[O]=w[N])}}var W=new h(g,y,E),F=!!p;for(d=g+1;d<v;++d)W.insert(x[d],F);return W.boundary()};var i=t(3250),n=t(6803).Fw;function r(x,p,v){this.vertices=x,this.adjacent=p,this.boundary=v,this.lastVisited=-1}function a(x,p,v){this.vertices=x,this.cell=p,this.index=v}function l(x,p){return n(x.vertices,p.vertices)}r.prototype.flip=function(){var x=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=x;var p=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=p};var u=[];function h(x,p,v){this.dimension=x,this.vertices=p,this.simplices=v,this.interior=v.filter(function(_){return!_.boundary}),this.tuple=new Array(x+1);for(var g=0;g<=x;++g)this.tuple[g]=this.vertices[g];var y,m=u[x];m||(m=u[x]=((y=i[x+1])||(y=i),function(_){return function(){var d=this.tuple;return _.apply(this,d)}}(y))),this.orient=m}var c=h.prototype;c.handleBoundaryDegeneracy=function(x,p){var v=this.dimension,g=this.vertices.length-1,y=this.tuple,m=this.vertices,_=[x];for(x.lastVisited=-g;_.length>0;)for(var d=(x=_.pop()).adjacent,S=0;S<=v;++S){var w=d[S];if(w.boundary&&!(w.lastVisited<=-g)){for(var E=w.vertices,C=0;C<=v;++C){var O=E[C];y[C]=O<0?p:m[O]}var P=this.orient();if(P>0)return w;w.lastVisited=-g,P===0&&_.push(w)}}return null},c.walk=function(x,p){var v=this.vertices.length-1,g=this.dimension,y=this.vertices,m=this.tuple,_=p?this.interior.length*Math.random()|0:this.interior.length-1,d=this.interior[_];e:for(;!d.boundary;){for(var S=d.vertices,w=d.adjacent,E=0;E<=g;++E)m[E]=y[S[E]];for(d.lastVisited=v,E=0;E<=g;++E){var C=w[E];if(!(C.lastVisited>=v)){var O=m[E];m[E]=x;var P=this.orient();if(m[E]=O,P<0){d=C;continue e}C.boundary?C.lastVisited=-v:C.lastVisited=v}}return}return d},c.addPeaks=function(x,p){var v=this.vertices.length-1,g=this.dimension,y=this.vertices,m=this.tuple,_=this.interior,d=this.simplices,S=[p];p.lastVisited=v,p.vertices[p.vertices.indexOf(-1)]=v,p.boundary=!1,_.push(p);for(var w=[];S.length>0;){var E=(p=S.pop()).vertices,C=p.adjacent,O=E.indexOf(v);if(!(O<0)){for(var P=0;P<=g;++P)if(P!==O){var z=C[P];if(z.boundary&&!(z.lastVisited>=v)){var j=z.vertices;if(z.lastVisited!==-v){for(var I=0,N=0;N<=g;++N)j[N]<0?(I=N,m[N]=x):m[N]=y[j[N]];if(this.orient()>0){j[I]=v,z.boundary=!1,_.push(z),S.push(z),z.lastVisited=v;continue}z.lastVisited=-v}var W=z.adjacent,F=E.slice(),U=C.slice(),H=new r(F,U,!0);d.push(H);var ne=W.indexOf(p);if(!(ne<0))for(W[ne]=H,U[O]=z,F[P]=-1,U[P]=p,C[P]=H,H.flip(),N=0;N<=g;++N){var $=F[N];if(!($<0||$===v)){for(var K=new Array(g-1),Q=0,Z=0;Z<=g;++Z){var X=F[Z];X<0||Z===N||(K[Q++]=X)}w.push(new a(K,H,N))}}}}}}for(w.sort(l),P=0;P+1<w.length;P+=2){var te=w[P],ae=w[P+1],se=te.index,ce=ae.index;se<0||ce<0||(te.cell.adjacent[te.index]=ae.cell,ae.cell.adjacent[ae.index]=te.cell)}},c.insert=function(x,p){var v=this.vertices;v.push(x);var g=this.walk(x,p);if(g){for(var y=this.dimension,m=this.tuple,_=0;_<=y;++_){var d=g.vertices[_];m[_]=d<0?x:v[d]}var S=this.orient(m);S<0||(S!==0||(g=this.handleBoundaryDegeneracy(g,x)))&&this.addPeaks(x,g)}},c.boundary=function(){for(var x=this.dimension,p=[],v=this.simplices,g=v.length,y=0;y<g;++y){var m=v[y];if(m.boundary){for(var _=new Array(x),d=m.vertices,S=0,w=0,E=0;E<=x;++E)d[E]>=0?_[S++]=d[E]:w=1&E;if(w===(1&x)){var C=_[0];_[0]=_[1],_[1]=C}p.push(_)}}return p}},3352:function(f,o,t){var i=t(2478);function n(S,w,E,C,O){this.mid=S,this.left=w,this.right=E,this.leftPoints=C,this.rightPoints=O,this.count=(w?w.count:0)+(E?E.count:0)+C.length}f.exports=function(S){return S&&S.length!==0?new _(m(S)):new _(null)};var r=n.prototype;function a(S,w){S.mid=w.mid,S.left=w.left,S.right=w.right,S.leftPoints=w.leftPoints,S.rightPoints=w.rightPoints,S.count=w.count}function l(S,w){var E=m(w);S.mid=E.mid,S.left=E.left,S.right=E.right,S.leftPoints=E.leftPoints,S.rightPoints=E.rightPoints,S.count=E.count}function u(S,w){var E=S.intervals([]);E.push(w),l(S,E)}function h(S,w){var E=S.intervals([]),C=E.indexOf(w);return C<0?0:(E.splice(C,1),l(S,E),1)}function c(S,w,E){for(var C=0;C<S.length&&S[C][0]<=w;++C){var O=E(S[C]);if(O)return O}}function x(S,w,E){for(var C=S.length-1;C>=0&&S[C][1]>=w;--C){var O=E(S[C]);if(O)return O}}function p(S,w){for(var E=0;E<S.length;++E){var C=w(S[E]);if(C)return C}}function v(S,w){return S-w}function g(S,w){return S[0]-w[0]||S[1]-w[1]}function y(S,w){return S[1]-w[1]||S[0]-w[0]}function m(S){if(S.length===0)return null;for(var w=[],E=0;E<S.length;++E)w.push(S[E][0],S[E][1]);w.sort(v);var C=w[w.length>>1],O=[],P=[],z=[];for(E=0;E<S.length;++E){var j=S[E];j[1]<C?O.push(j):C<j[0]?P.push(j):z.push(j)}var I=z,N=z.slice();return I.sort(g),N.sort(y),new n(C,m(O),m(P),I,N)}function _(S){this.root=S}r.intervals=function(S){return S.push.apply(S,this.leftPoints),this.left&&this.left.intervals(S),this.right&&this.right.intervals(S),S},r.insert=function(S){var w=this.count-this.leftPoints.length;if(this.count+=1,S[1]<this.mid)this.left?4*(this.left.count+1)>3*(w+1)?u(this,S):this.left.insert(S):this.left=m([S]);else if(S[0]>this.mid)this.right?4*(this.right.count+1)>3*(w+1)?u(this,S):this.right.insert(S):this.right=m([S]);else{var E=i.ge(this.leftPoints,S,g),C=i.ge(this.rightPoints,S,y);this.leftPoints.splice(E,0,S),this.rightPoints.splice(C,0,S)}},r.remove=function(S){var w=this.count-this.leftPoints;if(S[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(w-1)?h(this,S):(P=this.left.remove(S))===2?(this.left=null,this.count-=1,1):(P===1&&(this.count-=1),P):0;if(S[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(w-1)?h(this,S):(P=this.right.remove(S))===2?(this.right=null,this.count-=1,1):(P===1&&(this.count-=1),P):0;if(this.count===1)return this.leftPoints[0]===S?2:0;if(this.leftPoints.length===1&&this.leftPoints[0]===S){if(this.left&&this.right){for(var E=this,C=this.left;C.right;)E=C,C=C.right;if(E===this)C.right=this.right;else{var O=this.left,P=this.right;E.count-=C.count,E.right=C.left,C.left=O,C.right=P}a(this,C),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?a(this,this.left):a(this,this.right);return 1}for(O=i.ge(this.leftPoints,S,g);O<this.leftPoints.length&&this.leftPoints[O][0]===S[0];++O)if(this.leftPoints[O]===S){for(this.count-=1,this.leftPoints.splice(O,1),P=i.ge(this.rightPoints,S,y);P<this.rightPoints.length&&this.rightPoints[P][1]===S[1];++P)if(this.rightPoints[P]===S)return this.rightPoints.splice(P,1),1}return 0},r.queryPoint=function(S,w){return S<this.mid?this.left&&(E=this.left.queryPoint(S,w))?E:c(this.leftPoints,S,w):S>this.mid?this.right&&(E=this.right.queryPoint(S,w))?E:x(this.rightPoints,S,w):p(this.leftPoints,w);var E},r.queryInterval=function(S,w,E){var C;return S<this.mid&&this.left&&(C=this.left.queryInterval(S,w,E))||w>this.mid&&this.right&&(C=this.right.queryInterval(S,w,E))?C:w<this.mid?c(this.leftPoints,w,E):S>this.mid?x(this.rightPoints,S,E):p(this.leftPoints,E)};var d=_.prototype;d.insert=function(S){this.root?this.root.insert(S):this.root=new n(S[0],null,null,[S],[S])},d.remove=function(S){if(this.root){var w=this.root.remove(S);return w===2&&(this.root=null),w!==0}return!1},d.queryPoint=function(S,w){if(this.root)return this.root.queryPoint(S,w)},d.queryInterval=function(S,w,E){if(S<=w&&this.root)return this.root.queryInterval(S,w,E)},Object.defineProperty(d,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(d,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},7762:function(f){f.exports=function(o){for(var t=new Array(o),i=0;i<o;++i)t[i]=i;return t}},9507:function(f){f.exports=!0},7163:function(f){function o(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}f.exports=function(t){return t!=null&&(o(t)||function(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&o(i.slice(0,0))}(t)||!!t._isBuffer)}},5219:function(f){f.exports=function(o){for(var t,i=o.length,n=0;n<i;n++)if(((t=o.charCodeAt(n))<9||t>13)&&t!==32&&t!==133&&t!==160&&t!==5760&&t!==6158&&(t<8192||t>8205)&&t!==8232&&t!==8233&&t!==8239&&t!==8287&&t!==8288&&t!==12288&&t!==65279)return!1;return!0}},395:function(f){f.exports=function(o,t,i){return o*(1-i)+t*i}},2652:function(f,o,t){var i=t(4335),n=t(6864),r=t(1903),a=t(9921),l=t(7608),u=t(5665),h={length:t(1387),normalize:t(3536),dot:t(244),cross:t(5911)},c=n(),x=n(),p=[0,0,0,0],v=[[0,0,0],[0,0,0],[0,0,0]],g=[0,0,0];function y(m,_,d,S,w){m[0]=_[0]*S+d[0]*w,m[1]=_[1]*S+d[1]*w,m[2]=_[2]*S+d[2]*w}f.exports=function(m,_,d,S,w,E){if(_||(_=[0,0,0]),d||(d=[0,0,0]),S||(S=[0,0,0]),w||(w=[0,0,0,1]),E||(E=[0,0,0,1]),!i(c,m)||(r(x,c),x[3]=0,x[7]=0,x[11]=0,x[15]=1,Math.abs(a(x)<1e-8)))return!1;var C,O,P,z,j,I,N,W=c[3],F=c[7],U=c[11],H=c[12],ne=c[13],$=c[14],K=c[15];if(W!==0||F!==0||U!==0){if(p[0]=W,p[1]=F,p[2]=U,p[3]=K,!l(x,x))return!1;u(x,x),C=w,P=x,z=(O=p)[0],j=O[1],I=O[2],N=O[3],C[0]=P[0]*z+P[4]*j+P[8]*I+P[12]*N,C[1]=P[1]*z+P[5]*j+P[9]*I+P[13]*N,C[2]=P[2]*z+P[6]*j+P[10]*I+P[14]*N,C[3]=P[3]*z+P[7]*j+P[11]*I+P[15]*N}else w[0]=w[1]=w[2]=0,w[3]=1;if(_[0]=H,_[1]=ne,_[2]=$,function(Z,X){Z[0][0]=X[0],Z[0][1]=X[1],Z[0][2]=X[2],Z[1][0]=X[4],Z[1][1]=X[5],Z[1][2]=X[6],Z[2][0]=X[8],Z[2][1]=X[9],Z[2][2]=X[10]}(v,c),d[0]=h.length(v[0]),h.normalize(v[0],v[0]),S[0]=h.dot(v[0],v[1]),y(v[1],v[1],v[0],1,-S[0]),d[1]=h.length(v[1]),h.normalize(v[1],v[1]),S[0]/=d[1],S[1]=h.dot(v[0],v[2]),y(v[2],v[2],v[0],1,-S[1]),S[2]=h.dot(v[1],v[2]),y(v[2],v[2],v[1],1,-S[2]),d[2]=h.length(v[2]),h.normalize(v[2],v[2]),S[1]/=d[2],S[2]/=d[2],h.cross(g,v[1],v[2]),h.dot(v[0],g)<0)for(var Q=0;Q<3;Q++)d[Q]*=-1,v[Q][0]*=-1,v[Q][1]*=-1,v[Q][2]*=-1;return E[0]=.5*Math.sqrt(Math.max(1+v[0][0]-v[1][1]-v[2][2],0)),E[1]=.5*Math.sqrt(Math.max(1-v[0][0]+v[1][1]-v[2][2],0)),E[2]=.5*Math.sqrt(Math.max(1-v[0][0]-v[1][1]+v[2][2],0)),E[3]=.5*Math.sqrt(Math.max(1+v[0][0]+v[1][1]+v[2][2],0)),v[2][1]>v[1][2]&&(E[0]=-E[0]),v[0][2]>v[2][0]&&(E[1]=-E[1]),v[1][0]>v[0][1]&&(E[2]=-E[2]),!0}},4335:function(f){f.exports=function(o,t){var i=t[15];if(i===0)return!1;for(var n=1/i,r=0;r<16;r++)o[r]=t[r]*n;return!0}},7442:function(f,o,t){var i=t(6658),n=t(7182),r=t(2652),a=t(9921),l=t(8648),u=x(),h=x(),c=x();function x(){return{translate:p(),scale:p(1),skew:p(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function p(v){return[v||0,v||0,v||0]}f.exports=function(v,g,y,m){if(a(g)===0||a(y)===0)return!1;var _=r(g,u.translate,u.scale,u.skew,u.perspective,u.quaternion),d=r(y,h.translate,h.scale,h.skew,h.perspective,h.quaternion);return!(!_||!d||(i(c.translate,u.translate,h.translate,m),i(c.skew,u.skew,h.skew,m),i(c.scale,u.scale,h.scale,m),i(c.perspective,u.perspective,h.perspective,m),l(c.quaternion,u.quaternion,h.quaternion,m),n(v,c.translate,c.scale,c.skew,c.perspective,c.quaternion),0))}},7182:function(f,o,t){var i={identity:t(7894),translate:t(7656),multiply:t(6760),create:t(6864),scale:t(2504),fromRotationTranslation:t(6743)},n=(i.create(),i.create());f.exports=function(r,a,l,u,h,c){return i.identity(r),i.fromRotationTranslation(r,c,a),r[3]=h[0],r[7]=h[1],r[11]=h[2],r[15]=h[3],i.identity(n),u[2]!==0&&(n[9]=u[2],i.multiply(r,r,n)),u[1]!==0&&(n[9]=0,n[8]=u[1],i.multiply(r,r,n)),u[0]!==0&&(n[8]=0,n[4]=u[0],i.multiply(r,r,n)),i.scale(r,r,l),r}},4192:function(f,o,t){var i=t(2478),n=t(7442),r=t(7608),a=t(5567),l=t(2408),u=t(7089),h=t(6582),c=t(7656),x=(t(2504),t(3536)),p=[0,0,0];function v(m){this._components=m.slice(),this._time=[0],this.prevMatrix=m.slice(),this.nextMatrix=m.slice(),this.computedMatrix=m.slice(),this.computedInverse=m.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}f.exports=function(m){return new v((m=m||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var g=v.prototype;g.recalcMatrix=function(m){var _=this._time,d=i.le(_,m),S=this.computedMatrix;if(!(d<0)){var w=this._components;if(d===_.length-1)for(var E=16*d,C=0;C<16;++C)S[C]=w[E++];else{var O=_[d+1]-_[d],P=(E=16*d,this.prevMatrix),z=!0;for(C=0;C<16;++C)P[C]=w[E++];var j=this.nextMatrix;for(C=0;C<16;++C)j[C]=w[E++],z=z&&P[C]===j[C];if(O<1e-6||z)for(C=0;C<16;++C)S[C]=P[C];else n(S,P,j,(m-_[d])/O)}var I=this.computedUp;I[0]=S[1],I[1]=S[5],I[2]=S[9],x(I,I);var N=this.computedInverse;r(N,S);var W=this.computedEye,F=N[15];W[0]=N[12]/F,W[1]=N[13]/F,W[2]=N[14]/F;var U=this.computedCenter,H=Math.exp(this.computedRadius[0]);for(C=0;C<3;++C)U[C]=W[C]-S[2+4*C]*H}},g.idle=function(m){if(!(m<this.lastT())){for(var _=this._components,d=_.length-16,S=0;S<16;++S)_.push(_[d++]);this._time.push(m)}},g.flush=function(m){var _=i.gt(this._time,m)-2;_<0||(this._time.splice(0,_),this._components.splice(0,16*_))},g.lastT=function(){return this._time[this._time.length-1]},g.lookAt=function(m,_,d,S){this.recalcMatrix(m),_=_||this.computedEye,d=d||p,S=S||this.computedUp,this.setMatrix(m,h(this.computedMatrix,_,d,S));for(var w=0,E=0;E<3;++E)w+=Math.pow(d[E]-_[E],2);w=Math.log(Math.sqrt(w)),this.computedRadius[0]=w},g.rotate=function(m,_,d,S){this.recalcMatrix(m);var w=this.computedInverse;_&&l(w,w,_),d&&a(w,w,d),S&&u(w,w,S),this.setMatrix(m,r(this.computedMatrix,w))};var y=[0,0,0];g.pan=function(m,_,d,S){y[0]=-(_||0),y[1]=-(d||0),y[2]=-(S||0),this.recalcMatrix(m);var w=this.computedInverse;c(w,w,y),this.setMatrix(m,r(w,w))},g.translate=function(m,_,d,S){y[0]=_||0,y[1]=d||0,y[2]=S||0,this.recalcMatrix(m);var w=this.computedMatrix;c(w,w,y),this.setMatrix(m,w)},g.setMatrix=function(m,_){if(!(m<this.lastT())){this._time.push(m);for(var d=0;d<16;++d)this._components.push(_[d])}},g.setDistance=function(m,_){this.computedRadius[0]=_},g.setDistanceLimits=function(m,_){var d=this._limits;d[0]=m,d[1]=_},g.getDistanceLimits=function(m){var _=this._limits;return m?(m[0]=_[0],m[1]=_[1],m):_}},3090:function(f,o,t){f.exports=function(n){var r=n.length;if(r<3){for(var a=new Array(r),l=0;l<r;++l)a[l]=l;return r===2&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]?[0]:a}var u=new Array(r);for(l=0;l<r;++l)u[l]=l;u.sort(function(_,d){return n[_][0]-n[d][0]||n[_][1]-n[d][1]});var h=[u[0],u[1]],c=[u[0],u[1]];for(l=2;l<r;++l){for(var x=u[l],p=n[x],v=h.length;v>1&&i(n[h[v-2]],n[h[v-1]],p)<=0;)v-=1,h.pop();for(h.push(x),v=c.length;v>1&&i(n[c[v-2]],n[c[v-1]],p)>=0;)v-=1,c.pop();c.push(x)}a=new Array(c.length+h.length-2);for(var g=0,y=(l=0,h.length);l<y;++l)a[g++]=h[l];for(var m=c.length-2;m>0;--m)a[g++]=c[m];return a};var i=t(3250)[3]},351:function(f,o,t){f.exports=function(n,r){r||(r=n,n=window);var a=0,l=0,u=0,h={shift:!1,alt:!1,control:!1,meta:!1},c=!1;function x(E){var C=!1;return"altKey"in E&&(C=C||E.altKey!==h.alt,h.alt=!!E.altKey),"shiftKey"in E&&(C=C||E.shiftKey!==h.shift,h.shift=!!E.shiftKey),"ctrlKey"in E&&(C=C||E.ctrlKey!==h.control,h.control=!!E.ctrlKey),"metaKey"in E&&(C=C||E.metaKey!==h.meta,h.meta=!!E.metaKey),C}function p(E,C){var O=i.x(C),P=i.y(C);"buttons"in C&&(E=0|C.buttons),(E!==a||O!==l||P!==u||x(C))&&(a=0|E,l=O||0,u=P||0,r&&r(a,l,u,h))}function v(E){p(0,E)}function g(){(a||l||u||h.shift||h.alt||h.meta||h.control)&&(l=u=0,a=0,h.shift=h.alt=h.control=h.meta=!1,r&&r(0,0,0,h))}function y(E){x(E)&&r&&r(a,l,u,h)}function m(E){i.buttons(E)===0?p(0,E):p(a,E)}function _(E){p(a|i.buttons(E),E)}function d(E){p(a&~i.buttons(E),E)}function S(){c||(c=!0,n.addEventListener("mousemove",m),n.addEventListener("mousedown",_),n.addEventListener("mouseup",d),n.addEventListener("mouseleave",v),n.addEventListener("mouseenter",v),n.addEventListener("mouseout",v),n.addEventListener("mouseover",v),n.addEventListener("blur",g),n.addEventListener("keyup",y),n.addEventListener("keydown",y),n.addEventListener("keypress",y),n!==window&&(window.addEventListener("blur",g),window.addEventListener("keyup",y),window.addEventListener("keydown",y),window.addEventListener("keypress",y)))}S();var w={element:n};return Object.defineProperties(w,{enabled:{get:function(){return c},set:function(E){E?S():c&&(c=!1,n.removeEventListener("mousemove",m),n.removeEventListener("mousedown",_),n.removeEventListener("mouseup",d),n.removeEventListener("mouseleave",v),n.removeEventListener("mouseenter",v),n.removeEventListener("mouseout",v),n.removeEventListener("mouseover",v),n.removeEventListener("blur",g),n.removeEventListener("keyup",y),n.removeEventListener("keydown",y),n.removeEventListener("keypress",y),n!==window&&(window.removeEventListener("blur",g),window.removeEventListener("keyup",y),window.removeEventListener("keydown",y),window.removeEventListener("keypress",y)))},enumerable:!0},buttons:{get:function(){return a},enumerable:!0},x:{get:function(){return l},enumerable:!0},y:{get:function(){return u},enumerable:!0},mods:{get:function(){return h},enumerable:!0}}),w};var i=t(4687)},24:function(f){var o={left:0,top:0};f.exports=function(t,i,n){i=i||t.currentTarget||t.srcElement,Array.isArray(n)||(n=[0,0]);var r,a=t.clientX||0,l=t.clientY||0,u=(r=i)===window||r===document||r===document.body?o:r.getBoundingClientRect();return n[0]=a-u.left,n[1]=l-u.top,n}},4687:function(f,o){function t(i){return i.target||i.srcElement||window}o.buttons=function(i){if(typeof i=="object"){if("buttons"in i)return i.buttons;if("which"in i){if((n=i.which)===2)return 4;if(n===3)return 2;if(n>0)return 1<<n-1}else if("button"in i){var n;if((n=i.button)===1)return 4;if(n===2)return 2;if(n>=0)return 1<<n}}return 0},o.element=t,o.x=function(i){if(typeof i=="object"){if("offsetX"in i)return i.offsetX;var n=t(i).getBoundingClientRect();return i.clientX-n.left}return 0},o.y=function(i){if(typeof i=="object"){if("offsetY"in i)return i.offsetY;var n=t(i).getBoundingClientRect();return i.clientY-n.top}return 0}},8512:function(f,o,t){var i=t(665);f.exports=function(n,r,a){typeof n=="function"&&(a=!!r,r=n,n=window);var l=i("ex",n),u=function(h){a&&h.preventDefault();var c=h.deltaX||0,x=h.deltaY||0,p=h.deltaZ||0,v=1;switch(h.deltaMode){case 1:v=l;break;case 2:v=window.innerHeight}if(x*=v,p*=v,(c*=v)||x||p)return r(c,x,p,h)};return n.addEventListener("wheel",u),u}},2640:function(f,o,t){var i=t(1888);f.exports=function(r){function a(p){throw new Error("ndarray-extract-contour: "+p)}typeof r!="object"&&a("Must specify arguments");var l=r.order;Array.isArray(l)||a("Must specify order");var u=r.arrayArguments||1;u<1&&a("Must have at least one array argument"),(r.scalarArguments||0)<0&&a("Scalar arg count must be > 0"),typeof r.vertex!="function"&&a("Must specify vertex creation function"),typeof r.cell!="function"&&a("Must specify cell creation function"),typeof r.phase!="function"&&a("Must specify phase function");for(var h=r.getters||[],c=new Array(u),x=0;x<u;++x)h.indexOf(x)>=0?c[x]=!0:c[x]=!1;return function(p,v,g,y,m,_){var d=[_,m].join(",");return(0,n[d])(p,v,g,i.mallocUint32,i.freeUint32)}(r.vertex,r.cell,r.phase,0,l,c)};var n={"false,0,1":function(r,a,l,u,h){return function(c,x,p,v){var g,y=0|c.shape[0],m=0|c.shape[1],_=c.data,d=0|c.offset,S=0|c.stride[0],w=0|c.stride[1],E=d,C=0|-S,O=0,P=0|-w,z=0,j=-S-w|0,I=0,N=0|S,W=w-S*y|0,F=0,U=0,H=0,ne=2*y|0,$=u(ne),K=u(ne),Q=0,Z=0,X=-1,te=-1,ae=0,se=0|-y,ce=0|y,fe=0,pe=-y-1|0,ge=y-1|0,me=0,be=0,ke=0;for(F=0;F<y;++F)$[Q++]=l(_[E],x,p,v),E+=N;if(E+=W,m>0){if(U=1,$[Q++]=l(_[E],x,p,v),E+=N,y>0)for(F=1,g=_[E],Z=$[Q]=l(g,x,p,v),ae=$[Q+X],fe=$[Q+se],me=$[Q+pe],Z===ae&&Z===fe&&Z===me||(O=_[E+C],z=_[E+P],I=_[E+j],r(F,U,g,O,z,I,Z,ae,fe,me,x,p,v),be=K[Q]=H++),Q+=1,E+=N,F=2;F<y;++F)g=_[E],Z=$[Q]=l(g,x,p,v),ae=$[Q+X],fe=$[Q+se],me=$[Q+pe],Z===ae&&Z===fe&&Z===me||(O=_[E+C],z=_[E+P],I=_[E+j],r(F,U,g,O,z,I,Z,ae,fe,me,x,p,v),be=K[Q]=H++,me!==ae&&a(K[Q+X],be,I,O,me,ae,x,p,v)),Q+=1,E+=N;for(E+=W,Q=0,ke=X,X=te,te=ke,ke=se,se=ce,ce=ke,ke=pe,pe=ge,ge=ke,U=2;U<m;++U){if($[Q++]=l(_[E],x,p,v),E+=N,y>0)for(F=1,g=_[E],Z=$[Q]=l(g,x,p,v),ae=$[Q+X],fe=$[Q+se],me=$[Q+pe],Z===ae&&Z===fe&&Z===me||(O=_[E+C],z=_[E+P],I=_[E+j],r(F,U,g,O,z,I,Z,ae,fe,me,x,p,v),be=K[Q]=H++,me!==fe&&a(K[Q+se],be,z,I,fe,me,x,p,v)),Q+=1,E+=N,F=2;F<y;++F)g=_[E],Z=$[Q]=l(g,x,p,v),ae=$[Q+X],fe=$[Q+se],me=$[Q+pe],Z===ae&&Z===fe&&Z===me||(O=_[E+C],z=_[E+P],I=_[E+j],r(F,U,g,O,z,I,Z,ae,fe,me,x,p,v),be=K[Q]=H++,me!==fe&&a(K[Q+se],be,z,I,fe,me,x,p,v),me!==ae&&a(K[Q+X],be,I,O,me,ae,x,p,v)),Q+=1,E+=N;1&U&&(Q=0),ke=X,X=te,te=ke,ke=se,se=ce,ce=ke,ke=pe,pe=ge,ge=ke,E+=W}}h(K),h($)}},"false,1,0":function(r,a,l,u,h){return function(c,x,p,v){var g,y=0|c.shape[0],m=0|c.shape[1],_=c.data,d=0|c.offset,S=0|c.stride[0],w=0|c.stride[1],E=d,C=0|-S,O=0,P=0|-w,z=0,j=-S-w|0,I=0,N=0|w,W=S-w*m|0,F=0,U=0,H=0,ne=2*m|0,$=u(ne),K=u(ne),Q=0,Z=0,X=-1,te=-1,ae=0,se=0|-m,ce=0|m,fe=0,pe=-m-1|0,ge=m-1|0,me=0,be=0,ke=0;for(U=0;U<m;++U)$[Q++]=l(_[E],x,p,v),E+=N;if(E+=W,y>0){if(F=1,$[Q++]=l(_[E],x,p,v),E+=N,m>0)for(U=1,g=_[E],Z=$[Q]=l(g,x,p,v),fe=$[Q+se],ae=$[Q+X],me=$[Q+pe],Z===fe&&Z===ae&&Z===me||(O=_[E+C],z=_[E+P],I=_[E+j],r(F,U,g,O,z,I,Z,fe,ae,me,x,p,v),be=K[Q]=H++),Q+=1,E+=N,U=2;U<m;++U)g=_[E],Z=$[Q]=l(g,x,p,v),fe=$[Q+se],ae=$[Q+X],me=$[Q+pe],Z===fe&&Z===ae&&Z===me||(O=_[E+C],z=_[E+P],I=_[E+j],r(F,U,g,O,z,I,Z,fe,ae,me,x,p,v),be=K[Q]=H++,me!==ae&&a(K[Q+X],be,z,I,ae,me,x,p,v)),Q+=1,E+=N;for(E+=W,Q=0,ke=se,se=ce,ce=ke,ke=X,X=te,te=ke,ke=pe,pe=ge,ge=ke,F=2;F<y;++F){if($[Q++]=l(_[E],x,p,v),E+=N,m>0)for(U=1,g=_[E],Z=$[Q]=l(g,x,p,v),fe=$[Q+se],ae=$[Q+X],me=$[Q+pe],Z===fe&&Z===ae&&Z===me||(O=_[E+C],z=_[E+P],I=_[E+j],r(F,U,g,O,z,I,Z,fe,ae,me,x,p,v),be=K[Q]=H++,me!==fe&&a(K[Q+se],be,I,O,me,fe,x,p,v)),Q+=1,E+=N,U=2;U<m;++U)g=_[E],Z=$[Q]=l(g,x,p,v),fe=$[Q+se],ae=$[Q+X],me=$[Q+pe],Z===fe&&Z===ae&&Z===me||(O=_[E+C],z=_[E+P],I=_[E+j],r(F,U,g,O,z,I,Z,fe,ae,me,x,p,v),be=K[Q]=H++,me!==ae&&a(K[Q+X],be,z,I,ae,me,x,p,v),me!==fe&&a(K[Q+se],be,I,O,me,fe,x,p,v)),Q+=1,E+=N;1&F&&(Q=0),ke=se,se=ce,ce=ke,ke=X,X=te,te=ke,ke=pe,pe=ge,ge=ke,E+=W}}h(K),h($)}}}},6199:function(f,o,t){var i=t(1338),n={zero:function(y,m,_,d){var S=y[0];d|=0;var w=0,E=_[0];for(w=0;w<S;++w)m[d]=0,d+=E},fdTemplate1:function(y,m,_,d,S,w,E){var C=y[0],O=_[0],P=-1*O,z=O;d|=0,E|=0;var j=0,I=O,N=w[0];for(j=0;j<C;++j)S[E]=.5*(m[d+P]-m[d+z]),d+=I,E+=N},fdTemplate2:function(y,m,_,d,S,w,E,C,O,P){var z=y[0],j=y[1],I=_[0],N=_[1],W=w[0],F=w[1],U=O[0],H=O[1],ne=-1*I,$=I,K=-1*N,Q=N;d|=0,E|=0,P|=0;var Z=0,X=0,te=N,ae=I-j*N,se=F,ce=W-j*F,fe=H,pe=U-j*H;for(X=0;X<z;++X){for(Z=0;Z<j;++Z)S[E]=.5*(m[d+ne]-m[d+$]),C[P]=.5*(m[d+K]-m[d+Q]),d+=te,E+=se,P+=fe;d+=ae,E+=ce,P+=pe}}},r={cdiff:function(y){var m={};return function(_,d,S){var w=_.dtype,E=_.order,C=d.dtype,O=d.order,P=S.dtype,z=S.order,j=[w,E.join(),C,O.join(),P,z.join()].join(),I=m[j];return I||(m[j]=I=y([w,E,C,O,P,z])),I(_.shape.slice(0),_.data,_.stride,0|_.offset,d.data,d.stride,0|d.offset,S.data,S.stride,0|S.offset)}},zero:function(y){var m={};return function(_){var d=_.dtype,S=_.order,w=[d,S.join()].join(),E=m[w];return E||(m[w]=E=y([d,S])),E(_.shape.slice(0),_.data,_.stride,0|_.offset)}},fdTemplate1:function(y){var m={};return function(_,d){var S=_.dtype,w=_.order,E=d.dtype,C=d.order,O=[S,w.join(),E,C.join()].join(),P=m[O];return P||(m[O]=P=y([S,w,E,C])),P(_.shape.slice(0),_.data,_.stride,0|_.offset,d.data,d.stride,0|d.offset)}},fdTemplate2:function(y){var m={};return function(_,d,S){var w=_.dtype,E=_.order,C=d.dtype,O=d.order,P=S.dtype,z=S.order,j=[w,E.join(),C,O.join(),P,z.join()].join(),I=m[j];return I||(m[j]=I=y([w,E,C,O,P,z])),I(_.shape.slice(0),_.data,_.stride,0|_.offset,d.data,d.stride,0|d.offset,S.data,S.stride,0|S.offset)}}};function a(y){return(0,r[y.funcName])(l.bind(void 0,y))}function l(y){return n[y.funcName]}function u(y){return a({funcName:y.funcName})}var h={},c={},x=u({funcName:"cdiff"}),p=u({funcName:"zero"});function v(y){return y in h?h[y]:h[y]=u({funcName:"fdTemplate"+y})}function g(y,m,_,d){return function(S,w){var E=w.shape.slice();return E[0]>2&&E[1]>2&&d(w.pick(-1,-1).lo(1,1).hi(E[0]-2,E[1]-2),S.pick(-1,-1,0).lo(1,1).hi(E[0]-2,E[1]-2),S.pick(-1,-1,1).lo(1,1).hi(E[0]-2,E[1]-2)),E[1]>2&&(_(w.pick(0,-1).lo(1).hi(E[1]-2),S.pick(0,-1,1).lo(1).hi(E[1]-2)),m(S.pick(0,-1,0).lo(1).hi(E[1]-2))),E[1]>2&&(_(w.pick(E[0]-1,-1).lo(1).hi(E[1]-2),S.pick(E[0]-1,-1,1).lo(1).hi(E[1]-2)),m(S.pick(E[0]-1,-1,0).lo(1).hi(E[1]-2))),E[0]>2&&(_(w.pick(-1,0).lo(1).hi(E[0]-2),S.pick(-1,0,0).lo(1).hi(E[0]-2)),m(S.pick(-1,0,1).lo(1).hi(E[0]-2))),E[0]>2&&(_(w.pick(-1,E[1]-1).lo(1).hi(E[0]-2),S.pick(-1,E[1]-1,0).lo(1).hi(E[0]-2)),m(S.pick(-1,E[1]-1,1).lo(1).hi(E[0]-2))),S.set(0,0,0,0),S.set(0,0,1,0),S.set(E[0]-1,0,0,0),S.set(E[0]-1,0,1,0),S.set(0,E[1]-1,0,0),S.set(0,E[1]-1,1,0),S.set(E[0]-1,E[1]-1,0,0),S.set(E[0]-1,E[1]-1,1,0),S}}f.exports=function(y,m,_){return Array.isArray(_)||(_=i(m.dimension,typeof _=="string"?_:"clamp")),m.size===0?y:m.dimension===0?(y.set(0),y):function(d){var S=d.join();if(O=c[S])return O;for(var w=d.length,E=[x,p],C=1;C<=w;++C)E.push(v(C));var O=g.apply(void 0,E);return c[S]=O,O}(_)(y,m)}},4317:function(f){function o(r,a){var l=Math.floor(a),u=a-l,h=0<=l&&l<r.shape[0],c=0<=l+1&&l+1<r.shape[0];return(1-u)*(h?+r.get(l):0)+u*(c?+r.get(l+1):0)}function t(r,a,l){var u=Math.floor(a),h=a-u,c=0<=u&&u<r.shape[0],x=0<=u+1&&u+1<r.shape[0],p=Math.floor(l),v=l-p,g=0<=p&&p<r.shape[1],y=0<=p+1&&p+1<r.shape[1],m=c&&g?r.get(u,p):0,_=c&&y?r.get(u,p+1):0;return(1-v)*((1-h)*m+h*(x&&g?r.get(u+1,p):0))+v*((1-h)*_+h*(x&&y?r.get(u+1,p+1):0))}function i(r,a,l,u){var h=Math.floor(a),c=a-h,x=0<=h&&h<r.shape[0],p=0<=h+1&&h+1<r.shape[0],v=Math.floor(l),g=l-v,y=0<=v&&v<r.shape[1],m=0<=v+1&&v+1<r.shape[1],_=Math.floor(u),d=u-_,S=0<=_&&_<r.shape[2],w=0<=_+1&&_+1<r.shape[2],E=x&&y&&S?r.get(h,v,_):0,C=x&&m&&S?r.get(h,v+1,_):0,O=p&&y&&S?r.get(h+1,v,_):0,P=p&&m&&S?r.get(h+1,v+1,_):0,z=x&&y&&w?r.get(h,v,_+1):0,j=x&&m&&w?r.get(h,v+1,_+1):0;return(1-d)*((1-g)*((1-c)*E+c*O)+g*((1-c)*C+c*P))+d*((1-g)*((1-c)*z+c*(p&&y&&w?r.get(h+1,v,_+1):0))+g*((1-c)*j+c*(p&&m&&w?r.get(h+1,v+1,_+1):0)))}function n(r){var a,l,u=0|r.shape.length,h=new Array(u),c=new Array(u),x=new Array(u),p=new Array(u);for(a=0;a<u;++a)l=+arguments[a+1],h[a]=Math.floor(l),c[a]=l-h[a],x[a]=0<=h[a]&&h[a]<r.shape[a],p[a]=0<=h[a]+1&&h[a]+1<r.shape[a];var v,g,y,m=0;e:for(a=0;a<1<<u;++a){for(g=1,y=r.offset,v=0;v<u;++v)if(a&1<<v){if(!p[v])continue e;g*=c[v],y+=r.stride[v]*(h[v]+1)}else{if(!x[v])continue e;g*=1-c[v],y+=r.stride[v]*h[v]}m+=g*r.data[y]}return m}f.exports=function(r,a,l,u){switch(r.shape.length){case 0:return 0;case 1:return o(r,a);case 2:return t(r,a,l);case 3:return i(r,a,l,u);default:return n.apply(void 0,arguments)}},f.exports.d1=o,f.exports.d2=t,f.exports.d3=i},5298:function(f,o){var t={"float64,2,1,0":function(){return function(l,u,h,c,x){var p=l[0],v=l[1],g=l[2],y=h[0],m=h[1],_=h[2];c|=0;var d=0,S=0,w=0,E=_,C=m-g*_,O=y-v*m;for(w=0;w<p;++w){for(S=0;S<v;++S){for(d=0;d<g;++d)u[c]/=x,c+=E;c+=C}c+=O}}},"uint8,2,0,1,float64,2,1,0":function(){return function(l,u,h,c,x,p,v,g){for(var y=l[0],m=l[1],_=l[2],d=h[0],S=h[1],w=h[2],E=p[0],C=p[1],O=p[2],P=c|=0,z=v|=0,j=0|l[0];j>0;){j<64?(y=j,j=0):(y=64,j-=64);for(var I=0|l[1];I>0;){I<64?(m=I,I=0):(m=64,I-=64),c=P+j*d+I*S,v=z+j*E+I*C;var N=0,W=0,F=0,U=w,H=d-_*w,ne=S-y*d,$=O,K=E-_*O,Q=C-y*E;for(F=0;F<m;++F){for(W=0;W<y;++W){for(N=0;N<_;++N)u[c]=x[v]*g,c+=U,v+=$;c+=H,v+=K}c+=ne,v+=Q}}}}},"float32,1,0,float32,1,0":function(){return function(l,u,h,c,x,p,v){var g=l[0],y=l[1],m=h[0],_=h[1],d=p[0],S=p[1];c|=0,v|=0;var w=0,E=0,C=_,O=m-y*_,P=S,z=d-y*S;for(E=0;E<g;++E){for(w=0;w<y;++w)u[c]=x[v],c+=C,v+=P;c+=O,v+=z}}},"float32,1,0,float32,0,1":function(){return function(l,u,h,c,x,p,v){for(var g=l[0],y=l[1],m=h[0],_=h[1],d=p[0],S=p[1],w=c|=0,E=v|=0,C=0|l[1];C>0;){C<64?(y=C,C=0):(y=64,C-=64);for(var O=0|l[0];O>0;){O<64?(g=O,O=0):(g=64,O-=64),c=w+C*_+O*m,v=E+C*S+O*d;var P=0,z=0,j=_,I=m-y*_,N=S,W=d-y*S;for(z=0;z<g;++z){for(P=0;P<y;++P)u[c]=x[v],c+=j,v+=N;c+=I,v+=W}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(l,u,h,c,x,p,v){for(var g=l[0],y=l[1],m=l[2],_=h[0],d=h[1],S=h[2],w=p[0],E=p[1],C=p[2],O=c|=0,P=v|=0,z=0|l[2];z>0;){z<64?(m=z,z=0):(m=64,z-=64);for(var j=0|l[0];j>0;){j<64?(g=j,j=0):(g=64,j-=64);for(var I=0|l[1];I>0;){I<64?(y=I,I=0):(y=64,I-=64),c=O+z*S+j*_+I*d,v=P+z*C+j*w+I*E;var N=0,W=0,F=0,U=S,H=_-m*S,ne=d-g*_,$=C,K=w-m*C,Q=E-g*w;for(F=0;F<y;++F){for(W=0;W<g;++W){for(N=0;N<m;++N)u[c]=x[v],c+=U,v+=$;c+=H,v+=K}c+=ne,v+=Q}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(l,u,h,c,x,p,v){var g=l[0],y=l[1],m=l[2],_=h[0],d=h[1],S=h[2],w=p[0],E=p[1],C=p[2];c|=0,v|=0;var O=0,P=0,z=0,j=S,I=_-m*S,N=d-g*_,W=C,F=w-m*C,U=E-g*w;for(z=0;z<y;++z){for(P=0;P<g;++P){for(O=0;O<m;++O)u[c]=x[v],c+=j,v+=W;c+=I,v+=F}c+=N,v+=U}}}},i=function(l,u){var h=u.join(",");return(0,t[h])()},n={mul:function(l){var u={};return function(h,c,x){var p=h.dtype,v=h.order,g=c.dtype,y=c.order,m=x.dtype,_=x.order,d=[p,v.join(),g,y.join(),m,_.join()].join(),S=u[d];return S||(u[d]=S=l([p,v,g,y,m,_])),S(h.shape.slice(0),h.data,h.stride,0|h.offset,c.data,c.stride,0|c.offset,x.data,x.stride,0|x.offset)}},muls:function(l){var u={};return function(h,c,x){var p=h.dtype,v=h.order,g=c.dtype,y=c.order,m=[p,v.join(),g,y.join()].join(),_=u[m];return _||(u[m]=_=l([p,v,g,y])),_(h.shape.slice(0),h.data,h.stride,0|h.offset,c.data,c.stride,0|c.offset,x)}},mulseq:function(l){var u={};return function(h,c){var x=h.dtype,p=h.order,v=[x,p.join()].join(),g=u[v];return g||(u[v]=g=l([x,p])),g(h.shape.slice(0),h.data,h.stride,0|h.offset,c)}},div:function(l){var u={};return function(h,c,x){var p=h.dtype,v=h.order,g=c.dtype,y=c.order,m=x.dtype,_=x.order,d=[p,v.join(),g,y.join(),m,_.join()].join(),S=u[d];return S||(u[d]=S=l([p,v,g,y,m,_])),S(h.shape.slice(0),h.data,h.stride,0|h.offset,c.data,c.stride,0|c.offset,x.data,x.stride,0|x.offset)}},divs:function(l){var u={};return function(h,c,x){var p=h.dtype,v=h.order,g=c.dtype,y=c.order,m=[p,v.join(),g,y.join()].join(),_=u[m];return _||(u[m]=_=l([p,v,g,y])),_(h.shape.slice(0),h.data,h.stride,0|h.offset,c.data,c.stride,0|c.offset,x)}},divseq:function(l){var u={};return function(h,c){var x=h.dtype,p=h.order,v=[x,p.join()].join(),g=u[v];return g||(u[v]=g=l([x,p])),g(h.shape.slice(0),h.data,h.stride,0|h.offset,c)}},assign:function(l){var u={};return function(h,c){var x=h.dtype,p=h.order,v=c.dtype,g=c.order,y=[x,p.join(),v,g.join()].join(),m=u[y];return m||(u[y]=m=l([x,p,v,g])),m(h.shape.slice(0),h.data,h.stride,0|h.offset,c.data,c.stride,0|c.offset)}}};function r(l){return u={funcName:l.funcName},(0,n[u.funcName])(i.bind(void 0,u));var u}var a={mul:"*",div:"/"};(function(){for(var l in a)o[l]=r({funcName:l}),o[l+"s"]=r({funcName:l+"s"}),o[l+"seq"]=r({funcName:l+"seq"})})(),o.assign=r({funcName:"assign"})},9994:function(f,o,t){var i=t(9618),n=t(8277);f.exports=function(r,a){for(var l=[],u=r,h=1;Array.isArray(u);)l.push(u.length),h*=u.length,u=u[0];return l.length===0?i():(a||(a=i(new Float64Array(h),l)),n(a,r),a)}},8277:function(f){f.exports=function(o){var t={};return function(i,n){var r=i.dtype,a=i.order,l=[r,a.join()].join(),u=t[l];return u||(t[l]=u=o([r,a])),u(i.shape.slice(0),i.data,i.stride,0|i.offset,n)}}((function(){return function(o,t,i,n,r){var a=o[0],l=o[1],u=o[2],h=i[0],c=i[1],x=i[2],p=[0,0,0];n|=0;var v=0,g=0,y=0,m=x,_=c-u*x,d=h-l*c;for(y=0;y<a;++y){for(g=0;g<l;++g){for(v=0;v<u;++v){var S,w=r;for(S=0;S<p.length-1;++S)w=w[p[S]];t[n]=w[p[p.length-1]],n+=m,++p[2]}n+=_,p[2]-=u,++p[1]}n+=d,p[1]-=l,++p[0]}}}).bind(void 0,{funcName:"convert"}))},7640:function(f,o,t){var i=t(1888);function n(u){return u==="uint32"?[i.mallocUint32,i.freeUint32]:null}var r={"uint32,1,0":function(u,h){return function(c,x,p,v,g,y,m,_,d,S,w){var E,C,O,P,z,j,I,N,W=c*g+v,F=u(_);for(E=c+1;E<=x;++E){for(C=E,O=W+=g,z=0,j=W,P=0;P<_;++P)F[z++]=p[j],j+=d;e:for(;C-- >c;){z=0,j=O-g;t:for(P=0;P<_;++P){if((I=p[j])<(N=F[z]))break e;if(I>N)break t;j+=S,z+=w}for(z=O,j=O-g,P=0;P<_;++P)p[z]=p[j],z+=d,j+=d;O-=g}for(z=O,j=0,P=0;P<_;++P)p[z]=F[j++],z+=d}h(F)}}},a={"uint32,1,0":function(u,h,c){return function x(p,v,g,y,m,_,d,S,w,E,C){var O,P,z,j,I,N,W,F,U,H,ne,$,K,Q,Z,X,te,ae,se,ce,fe,pe,ge,me,be,ke=(v-p+1)/6|0,ze=p+ke,ve=v-ke,oe=p+v>>1,ie=oe-ke,he=oe+ke,Se=ze,ye=ie,we=oe,Me=he,Oe=ve,Ie=p+1,de=v-1,_e=!0,Ae=0,Pe=0,Ee=0,Fe=S,Ve=h(Fe),Ye=h(Fe);ne=m*Se,$=m*ye,be=y;e:for(H=0;H<S;++H){if(F=$+be,(Ee=g[W=ne+be]-g[F])>0){P=Se,Se=ye,ye=P;break e}if(Ee<0)break e;be+=E}ne=m*Me,$=m*Oe,be=y;e:for(H=0;H<S;++H){if(F=$+be,(Ee=g[W=ne+be]-g[F])>0){P=Me,Me=Oe,Oe=P;break e}if(Ee<0)break e;be+=E}ne=m*Se,$=m*we,be=y;e:for(H=0;H<S;++H){if(F=$+be,(Ee=g[W=ne+be]-g[F])>0){P=Se,Se=we,we=P;break e}if(Ee<0)break e;be+=E}ne=m*ye,$=m*we,be=y;e:for(H=0;H<S;++H){if(F=$+be,(Ee=g[W=ne+be]-g[F])>0){P=ye,ye=we,we=P;break e}if(Ee<0)break e;be+=E}ne=m*Se,$=m*Me,be=y;e:for(H=0;H<S;++H){if(F=$+be,(Ee=g[W=ne+be]-g[F])>0){P=Se,Se=Me,Me=P;break e}if(Ee<0)break e;be+=E}ne=m*we,$=m*Me,be=y;e:for(H=0;H<S;++H){if(F=$+be,(Ee=g[W=ne+be]-g[F])>0){P=we,we=Me,Me=P;break e}if(Ee<0)break e;be+=E}ne=m*ye,$=m*Oe,be=y;e:for(H=0;H<S;++H){if(F=$+be,(Ee=g[W=ne+be]-g[F])>0){P=ye,ye=Oe,Oe=P;break e}if(Ee<0)break e;be+=E}ne=m*ye,$=m*we,be=y;e:for(H=0;H<S;++H){if(F=$+be,(Ee=g[W=ne+be]-g[F])>0){P=ye,ye=we,we=P;break e}if(Ee<0)break e;be+=E}ne=m*Me,$=m*Oe,be=y;e:for(H=0;H<S;++H){if(F=$+be,(Ee=g[W=ne+be]-g[F])>0){P=Me,Me=Oe,Oe=P;break e}if(Ee<0)break e;be+=E}for(ne=m*Se,$=m*ye,K=m*we,Q=m*Me,Z=m*Oe,X=m*ze,te=m*oe,ae=m*ve,me=0,be=y,H=0;H<S;++H)W=ne+be,F=$+be,U=K+be,se=Q+be,ce=Z+be,fe=X+be,pe=te+be,ge=ae+be,Ve[me]=g[F],Ye[me]=g[se],_e=_e&&Ve[me]===Ye[me],z=g[W],j=g[U],I=g[ce],g[fe]=z,g[pe]=j,g[ge]=I,++me,be+=w;for(ne=m*ie,$=m*p,be=y,H=0;H<S;++H)F=$+be,g[W=ne+be]=g[F],be+=w;for(ne=m*he,$=m*v,be=y,H=0;H<S;++H)F=$+be,g[W=ne+be]=g[F],be+=w;if(_e)for(N=Ie;N<=de;++N){for(W=y+N*m,me=0,H=0;H<S&&(Ee=g[W]-Ve[me])==0;++H)me+=C,W+=E;if(Ee!==0)if(Ee<0){if(N!==Ie)for(ne=m*N,$=m*Ie,be=y,H=0;H<S;++H)F=$+be,O=g[W=ne+be],g[W]=g[F],g[F]=O,be+=w;++Ie}else for(;;){for(W=y+de*m,me=0,H=0;H<S&&(Ee=g[W]-Ve[me])==0;++H)me+=C,W+=E;if(!(Ee>0)){if(Ee<0){for(ne=m*N,$=m*Ie,K=m*de,be=y,H=0;H<S;++H)F=$+be,U=K+be,O=g[W=ne+be],g[W]=g[F],g[F]=g[U],g[U]=O,be+=w;++Ie,--de;break}for(ne=m*N,$=m*de,be=y,H=0;H<S;++H)F=$+be,O=g[W=ne+be],g[W]=g[F],g[F]=O,be+=w;--de;break}de--}}else for(N=Ie;N<=de;++N){for(W=y+N*m,me=0,H=0;H<S&&(Ae=g[W]-Ve[me])==0;++H)me+=C,W+=E;if(Ae<0){if(N!==Ie)for(ne=m*N,$=m*Ie,be=y,H=0;H<S;++H)F=$+be,O=g[W=ne+be],g[W]=g[F],g[F]=O,be+=w;++Ie}else{for(W=y+N*m,me=0,H=0;H<S&&(Pe=g[W]-Ye[me])==0;++H)me+=C,W+=E;if(Pe>0)for(;;){for(W=y+de*m,me=0,H=0;H<S&&(Ee=g[W]-Ye[me])==0;++H)me+=C,W+=E;if(!(Ee>0)){for(W=y+de*m,me=0,H=0;H<S&&(Ee=g[W]-Ve[me])==0;++H)me+=C,W+=E;if(Ee<0){for(ne=m*N,$=m*Ie,K=m*de,be=y,H=0;H<S;++H)F=$+be,U=K+be,O=g[W=ne+be],g[W]=g[F],g[F]=g[U],g[U]=O,be+=w;++Ie,--de}else{for(ne=m*N,$=m*de,be=y,H=0;H<S;++H)F=$+be,O=g[W=ne+be],g[W]=g[F],g[F]=O,be+=w;--de}break}if(--de<N)break}}}for(ne=m*p,$=m*(Ie-1),me=0,be=y,H=0;H<S;++H)F=$+be,g[W=ne+be]=g[F],g[F]=Ve[me],++me,be+=w;for(ne=m*v,$=m*(de+1),me=0,be=y,H=0;H<S;++H)F=$+be,g[W=ne+be]=g[F],g[F]=Ye[me],++me,be+=w;if(Ie-2-p<=32?u(p,Ie-2,g,y,m,_,d,S,w,E,C):x(p,Ie-2,g,y,m,_,d,S,w,E,C),v-(de+2)<=32?u(de+2,v,g,y,m,_,d,S,w,E,C):x(de+2,v,g,y,m,_,d,S,w,E,C),_e)return c(Ve),void c(Ye);if(Ie<ze&&de>ve){e:for(;;){for(W=y+Ie*m,me=0,be=y,H=0;H<S;++H){if(g[W]!==Ve[me])break e;++me,W+=w}++Ie}e:for(;;){for(W=y+de*m,me=0,be=y,H=0;H<S;++H){if(g[W]!==Ye[me])break e;++me,W+=w}--de}for(N=Ie;N<=de;++N){for(W=y+N*m,me=0,H=0;H<S&&(Ae=g[W]-Ve[me])==0;++H)me+=C,W+=E;if(Ae===0){if(N!==Ie)for(ne=m*N,$=m*Ie,be=y,H=0;H<S;++H)F=$+be,O=g[W=ne+be],g[W]=g[F],g[F]=O,be+=w;++Ie}else{for(W=y+N*m,me=0,H=0;H<S&&(Pe=g[W]-Ye[me])==0;++H)me+=C,W+=E;if(Pe===0)for(;;){for(W=y+de*m,me=0,H=0;H<S&&(Ee=g[W]-Ye[me])==0;++H)me+=C,W+=E;if(Ee!==0){for(W=y+de*m,me=0,H=0;H<S&&(Ee=g[W]-Ve[me])==0;++H)me+=C,W+=E;if(Ee<0){for(ne=m*N,$=m*Ie,K=m*de,be=y,H=0;H<S;++H)F=$+be,U=K+be,O=g[W=ne+be],g[W]=g[F],g[F]=g[U],g[U]=O,be+=w;++Ie,--de}else{for(ne=m*N,$=m*de,be=y,H=0;H<S;++H)F=$+be,O=g[W=ne+be],g[W]=g[F],g[F]=O,be+=w;--de}break}if(--de<N)break}}}}c(Ve),c(Ye),de-Ie<=32?u(Ie,de,g,y,m,_,d,S,w,E,C):x(Ie,de,g,y,m,_,d,S,w,E,C)}}},l={"uint32,1,0":function(u,h){return function(c){var x=c.data,p=0|c.offset,v=c.shape,g=c.stride,y=0|g[0],m=0|v[0],_=0|g[1],d=0|v[1],S=_,w=_;m<=32?u(0,m-1,x,p,y,_,m,d,S,w,1):h(0,m-1,x,p,y,_,m,d,S,w,1)}}};f.exports=function(u,h){var c=[h,u].join(","),x=l[c],p=function(g,y){var m=n(y),_=[y,g].join(","),d=r[_];return m?d(m[0],m[1]):d()}(u,h),v=function(g,y,m){var _=n(y),d=[y,g].join(","),S=a[d];return g.length>1&&_?S(m,_[0],_[1]):S(m)}(u,h,p);return x(p,v)}},446:function(f,o,t){var i=t(7640),n={};f.exports=function(r){var a=r.order,l=r.dtype,u=[a,l].join(":"),h=n[u];return h||(n[u]=h=i(a,l)),h(r),r}},9618:function(f,o,t){var i=t(7163),n=typeof Float64Array<"u";function r(c,x){return c[0]-x[0]}function a(){var c,x=this.stride,p=new Array(x.length);for(c=0;c<p.length;++c)p[c]=[Math.abs(x[c]),c];p.sort(r);var v=new Array(p.length);for(c=0;c<v.length;++c)v[c]=p[c][1];return v}var l={T:function(c){function x(v){this.data=v}var p=x.prototype;return p.dtype=c,p.index=function(){return-1},p.size=0,p.dimension=-1,p.shape=p.stride=p.order=[],p.lo=p.hi=p.transpose=p.step=function(){return new x(this.data)},p.get=p.set=function(){},p.pick=function(){return null},function(v){return new x(v)}},0:function(c,x){function p(g,y){this.data=g,this.offset=y}var v=p.prototype;return v.dtype=c,v.index=function(){return this.offset},v.dimension=0,v.size=1,v.shape=v.stride=v.order=[],v.lo=v.hi=v.transpose=v.step=function(){return new p(this.data,this.offset)},v.pick=function(){return x(this.data)},v.valueOf=v.get=function(){return c==="generic"?this.data.get(this.offset):this.data[this.offset]},v.set=function(g){return c==="generic"?this.data.set(this.offset,g):this.data[this.offset]=g},function(g,y,m,_){return new p(g,_)}},1:function(c,x,p){function v(y,m,_,d){this.data=y,this.shape=[m],this.stride=[_],this.offset=0|d}var g=v.prototype;return g.dtype=c,g.dimension=1,Object.defineProperty(g,"size",{get:function(){return this.shape[0]}}),g.order=[0],g.set=function(y,m){return c==="generic"?this.data.set(this.offset+this.stride[0]*y,m):this.data[this.offset+this.stride[0]*y]=m},g.get=function(y){return c==="generic"?this.data.get(this.offset+this.stride[0]*y):this.data[this.offset+this.stride[0]*y]},g.index=function(y){return this.offset+this.stride[0]*y},g.hi=function(y){return new v(this.data,typeof y!="number"||y<0?this.shape[0]:0|y,this.stride[0],this.offset)},g.lo=function(y){var m=this.offset,_=0,d=this.shape[0],S=this.stride[0];return typeof y=="number"&&y>=0&&(m+=S*(_=0|y),d-=_),new v(this.data,d,S,m)},g.step=function(y){var m=this.shape[0],_=this.stride[0],d=this.offset,S=0,w=Math.ceil;return typeof y=="number"&&((S=0|y)<0?(d+=_*(m-1),m=w(-m/S)):m=w(m/S),_*=S),new v(this.data,m,_,d)},g.transpose=function(y){y=y===void 0?0:0|y;var m=this.shape,_=this.stride;return new v(this.data,m[y],_[y],this.offset)},g.pick=function(y){var m=[],_=[],d=this.offset;return typeof y=="number"&&y>=0?d=d+this.stride[0]*y|0:(m.push(this.shape[0]),_.push(this.stride[0])),(0,x[m.length+1])(this.data,m,_,d)},function(y,m,_,d){return new v(y,m[0],_[0],d)}},2:function(c,x,p){function v(y,m,_,d,S,w){this.data=y,this.shape=[m,_],this.stride=[d,S],this.offset=0|w}var g=v.prototype;return g.dtype=c,g.dimension=2,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(g,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),g.set=function(y,m,_){return c==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*m,_):this.data[this.offset+this.stride[0]*y+this.stride[1]*m]=_},g.get=function(y,m){return c==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*m):this.data[this.offset+this.stride[0]*y+this.stride[1]*m]},g.index=function(y,m){return this.offset+this.stride[0]*y+this.stride[1]*m},g.hi=function(y,m){return new v(this.data,typeof y!="number"||y<0?this.shape[0]:0|y,typeof m!="number"||m<0?this.shape[1]:0|m,this.stride[0],this.stride[1],this.offset)},g.lo=function(y,m){var _=this.offset,d=0,S=this.shape[0],w=this.shape[1],E=this.stride[0],C=this.stride[1];return typeof y=="number"&&y>=0&&(_+=E*(d=0|y),S-=d),typeof m=="number"&&m>=0&&(_+=C*(d=0|m),w-=d),new v(this.data,S,w,E,C,_)},g.step=function(y,m){var _=this.shape[0],d=this.shape[1],S=this.stride[0],w=this.stride[1],E=this.offset,C=0,O=Math.ceil;return typeof y=="number"&&((C=0|y)<0?(E+=S*(_-1),_=O(-_/C)):_=O(_/C),S*=C),typeof m=="number"&&((C=0|m)<0?(E+=w*(d-1),d=O(-d/C)):d=O(d/C),w*=C),new v(this.data,_,d,S,w,E)},g.transpose=function(y,m){y=y===void 0?0:0|y,m=m===void 0?1:0|m;var _=this.shape,d=this.stride;return new v(this.data,_[y],_[m],d[y],d[m],this.offset)},g.pick=function(y,m){var _=[],d=[],S=this.offset;return typeof y=="number"&&y>=0?S=S+this.stride[0]*y|0:(_.push(this.shape[0]),d.push(this.stride[0])),typeof m=="number"&&m>=0?S=S+this.stride[1]*m|0:(_.push(this.shape[1]),d.push(this.stride[1])),(0,x[_.length+1])(this.data,_,d,S)},function(y,m,_,d){return new v(y,m[0],m[1],_[0],_[1],d)}},3:function(c,x,p){function v(y,m,_,d,S,w,E,C){this.data=y,this.shape=[m,_,d],this.stride=[S,w,E],this.offset=0|C}var g=v.prototype;return g.dtype=c,g.dimension=3,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(g,"order",{get:function(){var y=Math.abs(this.stride[0]),m=Math.abs(this.stride[1]),_=Math.abs(this.stride[2]);return y>m?m>_?[2,1,0]:y>_?[1,2,0]:[1,0,2]:y>_?[2,0,1]:_>m?[0,1,2]:[0,2,1]}}),g.set=function(y,m,_,d){return c==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*_,d):this.data[this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*_]=d},g.get=function(y,m,_){return c==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*_):this.data[this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*_]},g.index=function(y,m,_){return this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*_},g.hi=function(y,m,_){return new v(this.data,typeof y!="number"||y<0?this.shape[0]:0|y,typeof m!="number"||m<0?this.shape[1]:0|m,typeof _!="number"||_<0?this.shape[2]:0|_,this.stride[0],this.stride[1],this.stride[2],this.offset)},g.lo=function(y,m,_){var d=this.offset,S=0,w=this.shape[0],E=this.shape[1],C=this.shape[2],O=this.stride[0],P=this.stride[1],z=this.stride[2];return typeof y=="number"&&y>=0&&(d+=O*(S=0|y),w-=S),typeof m=="number"&&m>=0&&(d+=P*(S=0|m),E-=S),typeof _=="number"&&_>=0&&(d+=z*(S=0|_),C-=S),new v(this.data,w,E,C,O,P,z,d)},g.step=function(y,m,_){var d=this.shape[0],S=this.shape[1],w=this.shape[2],E=this.stride[0],C=this.stride[1],O=this.stride[2],P=this.offset,z=0,j=Math.ceil;return typeof y=="number"&&((z=0|y)<0?(P+=E*(d-1),d=j(-d/z)):d=j(d/z),E*=z),typeof m=="number"&&((z=0|m)<0?(P+=C*(S-1),S=j(-S/z)):S=j(S/z),C*=z),typeof _=="number"&&((z=0|_)<0?(P+=O*(w-1),w=j(-w/z)):w=j(w/z),O*=z),new v(this.data,d,S,w,E,C,O,P)},g.transpose=function(y,m,_){y=y===void 0?0:0|y,m=m===void 0?1:0|m,_=_===void 0?2:0|_;var d=this.shape,S=this.stride;return new v(this.data,d[y],d[m],d[_],S[y],S[m],S[_],this.offset)},g.pick=function(y,m,_){var d=[],S=[],w=this.offset;return typeof y=="number"&&y>=0?w=w+this.stride[0]*y|0:(d.push(this.shape[0]),S.push(this.stride[0])),typeof m=="number"&&m>=0?w=w+this.stride[1]*m|0:(d.push(this.shape[1]),S.push(this.stride[1])),typeof _=="number"&&_>=0?w=w+this.stride[2]*_|0:(d.push(this.shape[2]),S.push(this.stride[2])),(0,x[d.length+1])(this.data,d,S,w)},function(y,m,_,d){return new v(y,m[0],m[1],m[2],_[0],_[1],_[2],d)}},4:function(c,x,p){function v(y,m,_,d,S,w,E,C,O,P){this.data=y,this.shape=[m,_,d,S],this.stride=[w,E,C,O],this.offset=0|P}var g=v.prototype;return g.dtype=c,g.dimension=4,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(g,"order",{get:p}),g.set=function(y,m,_,d,S){return c==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*_+this.stride[3]*d,S):this.data[this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*_+this.stride[3]*d]=S},g.get=function(y,m,_,d){return c==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*_+this.stride[3]*d):this.data[this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*_+this.stride[3]*d]},g.index=function(y,m,_,d){return this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*_+this.stride[3]*d},g.hi=function(y,m,_,d){return new v(this.data,typeof y!="number"||y<0?this.shape[0]:0|y,typeof m!="number"||m<0?this.shape[1]:0|m,typeof _!="number"||_<0?this.shape[2]:0|_,typeof d!="number"||d<0?this.shape[3]:0|d,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},g.lo=function(y,m,_,d){var S=this.offset,w=0,E=this.shape[0],C=this.shape[1],O=this.shape[2],P=this.shape[3],z=this.stride[0],j=this.stride[1],I=this.stride[2],N=this.stride[3];return typeof y=="number"&&y>=0&&(S+=z*(w=0|y),E-=w),typeof m=="number"&&m>=0&&(S+=j*(w=0|m),C-=w),typeof _=="number"&&_>=0&&(S+=I*(w=0|_),O-=w),typeof d=="number"&&d>=0&&(S+=N*(w=0|d),P-=w),new v(this.data,E,C,O,P,z,j,I,N,S)},g.step=function(y,m,_,d){var S=this.shape[0],w=this.shape[1],E=this.shape[2],C=this.shape[3],O=this.stride[0],P=this.stride[1],z=this.stride[2],j=this.stride[3],I=this.offset,N=0,W=Math.ceil;return typeof y=="number"&&((N=0|y)<0?(I+=O*(S-1),S=W(-S/N)):S=W(S/N),O*=N),typeof m=="number"&&((N=0|m)<0?(I+=P*(w-1),w=W(-w/N)):w=W(w/N),P*=N),typeof _=="number"&&((N=0|_)<0?(I+=z*(E-1),E=W(-E/N)):E=W(E/N),z*=N),typeof d=="number"&&((N=0|d)<0?(I+=j*(C-1),C=W(-C/N)):C=W(C/N),j*=N),new v(this.data,S,w,E,C,O,P,z,j,I)},g.transpose=function(y,m,_,d){y=y===void 0?0:0|y,m=m===void 0?1:0|m,_=_===void 0?2:0|_,d=d===void 0?3:0|d;var S=this.shape,w=this.stride;return new v(this.data,S[y],S[m],S[_],S[d],w[y],w[m],w[_],w[d],this.offset)},g.pick=function(y,m,_,d){var S=[],w=[],E=this.offset;return typeof y=="number"&&y>=0?E=E+this.stride[0]*y|0:(S.push(this.shape[0]),w.push(this.stride[0])),typeof m=="number"&&m>=0?E=E+this.stride[1]*m|0:(S.push(this.shape[1]),w.push(this.stride[1])),typeof _=="number"&&_>=0?E=E+this.stride[2]*_|0:(S.push(this.shape[2]),w.push(this.stride[2])),typeof d=="number"&&d>=0?E=E+this.stride[3]*d|0:(S.push(this.shape[3]),w.push(this.stride[3])),(0,x[S.length+1])(this.data,S,w,E)},function(y,m,_,d){return new v(y,m[0],m[1],m[2],m[3],_[0],_[1],_[2],_[3],d)}},5:function(c,x,p){function v(y,m,_,d,S,w,E,C,O,P,z,j){this.data=y,this.shape=[m,_,d,S,w],this.stride=[E,C,O,P,z],this.offset=0|j}var g=v.prototype;return g.dtype=c,g.dimension=5,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(g,"order",{get:p}),g.set=function(y,m,_,d,S,w){return c==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*_+this.stride[3]*d+this.stride[4]*S,w):this.data[this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*_+this.stride[3]*d+this.stride[4]*S]=w},g.get=function(y,m,_,d,S){return c==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*_+this.stride[3]*d+this.stride[4]*S):this.data[this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*_+this.stride[3]*d+this.stride[4]*S]},g.index=function(y,m,_,d,S){return this.offset+this.stride[0]*y+this.stride[1]*m+this.stride[2]*_+this.stride[3]*d+this.stride[4]*S},g.hi=function(y,m,_,d,S){return new v(this.data,typeof y!="number"||y<0?this.shape[0]:0|y,typeof m!="number"||m<0?this.shape[1]:0|m,typeof _!="number"||_<0?this.shape[2]:0|_,typeof d!="number"||d<0?this.shape[3]:0|d,typeof S!="number"||S<0?this.shape[4]:0|S,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},g.lo=function(y,m,_,d,S){var w=this.offset,E=0,C=this.shape[0],O=this.shape[1],P=this.shape[2],z=this.shape[3],j=this.shape[4],I=this.stride[0],N=this.stride[1],W=this.stride[2],F=this.stride[3],U=this.stride[4];return typeof y=="number"&&y>=0&&(w+=I*(E=0|y),C-=E),typeof m=="number"&&m>=0&&(w+=N*(E=0|m),O-=E),typeof _=="number"&&_>=0&&(w+=W*(E=0|_),P-=E),typeof d=="number"&&d>=0&&(w+=F*(E=0|d),z-=E),typeof S=="number"&&S>=0&&(w+=U*(E=0|S),j-=E),new v(this.data,C,O,P,z,j,I,N,W,F,U,w)},g.step=function(y,m,_,d,S){var w=this.shape[0],E=this.shape[1],C=this.shape[2],O=this.shape[3],P=this.shape[4],z=this.stride[0],j=this.stride[1],I=this.stride[2],N=this.stride[3],W=this.stride[4],F=this.offset,U=0,H=Math.ceil;return typeof y=="number"&&((U=0|y)<0?(F+=z*(w-1),w=H(-w/U)):w=H(w/U),z*=U),typeof m=="number"&&((U=0|m)<0?(F+=j*(E-1),E=H(-E/U)):E=H(E/U),j*=U),typeof _=="number"&&((U=0|_)<0?(F+=I*(C-1),C=H(-C/U)):C=H(C/U),I*=U),typeof d=="number"&&((U=0|d)<0?(F+=N*(O-1),O=H(-O/U)):O=H(O/U),N*=U),typeof S=="number"&&((U=0|S)<0?(F+=W*(P-1),P=H(-P/U)):P=H(P/U),W*=U),new v(this.data,w,E,C,O,P,z,j,I,N,W,F)},g.transpose=function(y,m,_,d,S){y=y===void 0?0:0|y,m=m===void 0?1:0|m,_=_===void 0?2:0|_,d=d===void 0?3:0|d,S=S===void 0?4:0|S;var w=this.shape,E=this.stride;return new v(this.data,w[y],w[m],w[_],w[d],w[S],E[y],E[m],E[_],E[d],E[S],this.offset)},g.pick=function(y,m,_,d,S){var w=[],E=[],C=this.offset;return typeof y=="number"&&y>=0?C=C+this.stride[0]*y|0:(w.push(this.shape[0]),E.push(this.stride[0])),typeof m=="number"&&m>=0?C=C+this.stride[1]*m|0:(w.push(this.shape[1]),E.push(this.stride[1])),typeof _=="number"&&_>=0?C=C+this.stride[2]*_|0:(w.push(this.shape[2]),E.push(this.stride[2])),typeof d=="number"&&d>=0?C=C+this.stride[3]*d|0:(w.push(this.shape[3]),E.push(this.stride[3])),typeof S=="number"&&S>=0?C=C+this.stride[4]*S|0:(w.push(this.shape[4]),E.push(this.stride[4])),(0,x[w.length+1])(this.data,w,E,C)},function(y,m,_,d){return new v(y,m[0],m[1],m[2],m[3],m[4],_[0],_[1],_[2],_[3],_[4],d)}}};function u(c,x){var p=x===-1?"T":String(x),v=l[p];return x===-1?v(c):x===0?v(c,h[c][0]):v(c,h[c],a)}var h={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};f.exports=function(c,x,p,v){if(c===void 0)return(0,h.array[0])([]);typeof c=="number"&&(c=[c]),x===void 0&&(x=[c.length]);var g=x.length;if(p===void 0){p=new Array(g);for(var y=g-1,m=1;y>=0;--y)p[y]=m,m*=x[y]}if(v===void 0)for(v=0,y=0;y<g;++y)p[y]<0&&(v-=(x[y]-1)*p[y]);for(var _=function(S){if(i(S))return"buffer";if(n)switch(Object.prototype.toString.call(S)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(S)?"array":"generic"}(c),d=h[_];d.length<=g+1;)d.push(u(_,d.length-1));return(0,d[g+1])(c,x,p,v)}},1278:function(f,o,t){var i=t(2361),n=Math.pow(2,-1074),r=-1>>>0;f.exports=function(a,l){if(isNaN(a)||isNaN(l))return NaN;if(a===l)return a;if(a===0)return l<0?-n:n;var u=i.hi(a),h=i.lo(a);return l>a==a>0?h===r?(u+=1,h=0):h+=1:h===0?(h=r,u-=1):h-=1,i.pack(h,u)}},8406:function(f,o){o.vertexNormals=function(t,i,n){for(var r=i.length,a=new Array(r),l=n===void 0?1e-6:n,u=0;u<r;++u)a[u]=[0,0,0];for(u=0;u<t.length;++u)for(var h=t[u],c=0,x=h[h.length-1],p=h[0],v=0;v<h.length;++v){c=x,x=p,p=h[(v+1)%h.length];for(var g=i[c],y=i[x],m=i[p],_=new Array(3),d=0,S=new Array(3),w=0,E=0;E<3;++E)_[E]=g[E]-y[E],d+=_[E]*_[E],S[E]=m[E]-y[E],w+=S[E]*S[E];if(d*w>l){var C=a[x],O=1/Math.sqrt(d*w);for(E=0;E<3;++E){var P=(E+1)%3,z=(E+2)%3;C[E]+=O*(S[P]*_[z]-S[z]*_[P])}}}for(u=0;u<r;++u){C=a[u];var j=0;for(E=0;E<3;++E)j+=C[E]*C[E];if(j>l)for(O=1/Math.sqrt(j),E=0;E<3;++E)C[E]*=O;else for(E=0;E<3;++E)C[E]=0}return a},o.faceNormals=function(t,i,n){for(var r=t.length,a=new Array(r),l=n===void 0?1e-6:n,u=0;u<r;++u){for(var h=t[u],c=new Array(3),x=0;x<3;++x)c[x]=i[h[x]];var p=new Array(3),v=new Array(3);for(x=0;x<3;++x)p[x]=c[1][x]-c[0][x],v[x]=c[2][x]-c[0][x];var g=new Array(3),y=0;for(x=0;x<3;++x){var m=(x+1)%3,_=(x+2)%3;g[x]=p[m]*v[_]-p[_]*v[m],y+=g[x]*g[x]}for(y=y>l?1/Math.sqrt(y):0,x=0;x<3;++x)g[x]*=y;a[u]=g}return a}},4081:function(f){f.exports=function(o,t,i,n,r,a,l,u,h,c){var x=t+a+c;if(p>0){var p=Math.sqrt(x+1);o[0]=.5*(l-h)/p,o[1]=.5*(u-n)/p,o[2]=.5*(i-a)/p,o[3]=.5*p}else{var v=Math.max(t,a,c);p=Math.sqrt(2*v-x+1),t>=v?(o[0]=.5*p,o[1]=.5*(r+i)/p,o[2]=.5*(u+n)/p,o[3]=.5*(l-h)/p):a>=v?(o[0]=.5*(i+r)/p,o[1]=.5*p,o[2]=.5*(h+l)/p,o[3]=.5*(u-n)/p):(o[0]=.5*(n+u)/p,o[1]=.5*(l+h)/p,o[2]=.5*p,o[3]=.5*(i-r)/p)}return o}},9977:function(f,o,t){f.exports=function(v){var g=(v=v||{}).center||[0,0,0],y=v.rotation||[0,0,0,1],m=v.radius||1;g=[].slice.call(g,0,3),c(y=[].slice.call(y,0,4),y);var _=new x(y,g,Math.log(m));return _.setDistanceLimits(v.zoomMin,v.zoomMax),("eye"in v||"up"in v)&&_.lookAt(0,v.eye,v.center,v.up),_};var i=t(9215),n=t(6582),r=t(7399),a=t(7608),l=t(4081);function u(v,g,y){return Math.sqrt(Math.pow(v,2)+Math.pow(g,2)+Math.pow(y,2))}function h(v,g,y,m){return Math.sqrt(Math.pow(v,2)+Math.pow(g,2)+Math.pow(y,2)+Math.pow(m,2))}function c(v,g){var y=g[0],m=g[1],_=g[2],d=g[3],S=h(y,m,_,d);S>1e-6?(v[0]=y/S,v[1]=m/S,v[2]=_/S,v[3]=d/S):(v[0]=v[1]=v[2]=0,v[3]=1)}function x(v,g,y){this.radius=i([y]),this.center=i(g),this.rotation=i(v),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var p=x.prototype;p.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},p.recalcMatrix=function(v){this.radius.curve(v),this.center.curve(v),this.rotation.curve(v);var g=this.computedRotation;c(g,g);var y=this.computedMatrix;r(y,g);var m=this.computedCenter,_=this.computedEye,d=this.computedUp,S=Math.exp(this.computedRadius[0]);_[0]=m[0]+S*y[2],_[1]=m[1]+S*y[6],_[2]=m[2]+S*y[10],d[0]=y[1],d[1]=y[5],d[2]=y[9];for(var w=0;w<3;++w){for(var E=0,C=0;C<3;++C)E+=y[w+4*C]*_[C];y[12+w]=-E}},p.getMatrix=function(v,g){this.recalcMatrix(v);var y=this.computedMatrix;if(g){for(var m=0;m<16;++m)g[m]=y[m];return g}return y},p.idle=function(v){this.center.idle(v),this.radius.idle(v),this.rotation.idle(v)},p.flush=function(v){this.center.flush(v),this.radius.flush(v),this.rotation.flush(v)},p.pan=function(v,g,y,m){g=g||0,y=y||0,m=m||0,this.recalcMatrix(v);var _=this.computedMatrix,d=_[1],S=_[5],w=_[9],E=u(d,S,w);d/=E,S/=E,w/=E;var C=_[0],O=_[4],P=_[8],z=C*d+O*S+P*w,j=u(C-=d*z,O-=S*z,P-=w*z);C/=j,O/=j,P/=j,_[2],_[6],_[10];var I=C*g+d*y,N=O*g+S*y,W=P*g+w*y;this.center.move(v,I,N,W);var F=Math.exp(this.computedRadius[0]);F=Math.max(1e-4,F+m),this.radius.set(v,Math.log(F))},p.rotate=function(v,g,y,m){this.recalcMatrix(v),g=g||0,y=y||0;var _=this.computedMatrix,d=_[0],S=_[4],w=_[8],E=_[1],C=_[5],O=_[9],P=_[2],z=_[6],j=_[10],I=g*d+y*E,N=g*S+y*C,W=g*w+y*O,F=-(z*W-j*N),U=-(j*I-P*W),H=-(P*N-z*I),ne=Math.sqrt(Math.max(0,1-Math.pow(F,2)-Math.pow(U,2)-Math.pow(H,2))),$=h(F,U,H,ne);$>1e-6?(F/=$,U/=$,H/=$,ne/=$):(F=U=H=0,ne=1);var K=this.computedRotation,Q=K[0],Z=K[1],X=K[2],te=K[3],ae=Q*ne+te*F+Z*H-X*U,se=Z*ne+te*U+X*F-Q*H,ce=X*ne+te*H+Q*U-Z*F,fe=te*ne-Q*F-Z*U-X*H;if(m){F=P,U=z,H=j;var pe=Math.sin(m)/u(F,U,H);F*=pe,U*=pe,H*=pe,fe=fe*(ne=Math.cos(g))-(ae=ae*ne+fe*F+se*H-ce*U)*F-(se=se*ne+fe*U+ce*F-ae*H)*U-(ce=ce*ne+fe*H+ae*U-se*F)*H}var ge=h(ae,se,ce,fe);ge>1e-6?(ae/=ge,se/=ge,ce/=ge,fe/=ge):(ae=se=ce=0,fe=1),this.rotation.set(v,ae,se,ce,fe)},p.lookAt=function(v,g,y,m){this.recalcMatrix(v),y=y||this.computedCenter,g=g||this.computedEye,m=m||this.computedUp;var _=this.computedMatrix;n(_,g,y,m);var d=this.computedRotation;l(d,_[0],_[1],_[2],_[4],_[5],_[6],_[8],_[9],_[10]),c(d,d),this.rotation.set(v,d[0],d[1],d[2],d[3]);for(var S=0,w=0;w<3;++w)S+=Math.pow(y[w]-g[w],2);this.radius.set(v,.5*Math.log(Math.max(S,1e-6))),this.center.set(v,y[0],y[1],y[2])},p.translate=function(v,g,y,m){this.center.move(v,g||0,y||0,m||0)},p.setMatrix=function(v,g){var y=this.computedRotation;l(y,g[0],g[1],g[2],g[4],g[5],g[6],g[8],g[9],g[10]),c(y,y),this.rotation.set(v,y[0],y[1],y[2],y[3]);var m=this.computedMatrix;a(m,g);var _=m[15];if(Math.abs(_)>1e-6){var d=m[12]/_,S=m[13]/_,w=m[14]/_;this.recalcMatrix(v);var E=Math.exp(this.computedRadius[0]);this.center.set(v,d-m[2]*E,S-m[6]*E,w-m[10]*E),this.radius.idle(v)}else this.center.idle(v),this.radius.idle(v)},p.setDistance=function(v,g){g>0&&this.radius.set(v,Math.log(g))},p.setDistanceLimits=function(v,g){v=v>0?Math.log(v):-1/0,g=g>0?Math.log(g):1/0,g=Math.max(g,v),this.radius.bounds[0][0]=v,this.radius.bounds[1][0]=g},p.getDistanceLimits=function(v){var g=this.radius.bounds;return v?(v[0]=Math.exp(g[0][0]),v[1]=Math.exp(g[1][0]),v):[Math.exp(g[0][0]),Math.exp(g[1][0])]},p.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},p.fromJSON=function(v){var g=this.lastT(),y=v.center;y&&this.center.set(g,y[0],y[1],y[2]);var m=v.rotation;m&&this.rotation.set(g,m[0],m[1],m[2],m[3]);var _=v.distance;_&&_>0&&this.radius.set(g,Math.log(_)),this.setDistanceLimits(v.zoomMin,v.zoomMax)}},1371:function(f,o,t){var i=t(3233);f.exports=function(n,r,a){return i(a=a!==void 0?a+"":" ",r)+n}},3202:function(f){f.exports=function(o,t){t||(t=[0,""]),o=String(o);var i=parseFloat(o,10);return t[0]=i,t[1]=o.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},3088:function(f,o,t){f.exports=function(n,r){for(var a=0|r.length,l=n.length,u=[new Array(a),new Array(a)],h=0;h<a;++h)u[0][h]=[],u[1][h]=[];for(h=0;h<l;++h){var c=n[h];u[0][c[0]].push(c),u[1][c[1]].push(c)}var x=[];for(h=0;h<a;++h)u[0][h].length+u[1][h].length===0&&x.push([h]);function p(S,w){var E=u[w][S[w]];E.splice(E.indexOf(S),1)}function v(S,w,E){for(var C,O,P,z=0;z<2;++z)if(u[z][w].length>0){C=u[z][w][0],P=z;break}O=C[1^P];for(var j=0;j<2;++j)for(var I=u[j][w],N=0;N<I.length;++N){var W=I[N],F=W[1^j];i(r[S],r[w],r[O],r[F])>0&&(C=W,O=F,P=j)}return E||C&&p(C,P),O}function g(S,w){var E=u[w][S][0],C=[S];p(E,w);for(var O=E[1^w];;){for(;O!==S;)C.push(O),O=v(C[C.length-2],O,!1);if(u[0][S].length+u[1][S].length===0)break;var P=C[C.length-1],z=S,j=C[1],I=v(P,z,!0);if(i(r[P],r[z],r[j],r[I])<0)break;C.push(S),O=v(P,z)}return C}function y(S,w){return w[1]===w[w.length-1]}for(h=0;h<a;++h)for(var m=0;m<2;++m){for(var _=[];u[m][h].length>0;){u[0][h].length;var d=g(h,m);y(0,d)?_.push.apply(_,d):(_.length>0&&x.push(_),_=d)}_.length>0&&x.push(_)}return x};var i=t(3140)},5609:function(f,o,t){f.exports=function(n,r){for(var a=i(n,r.length),l=new Array(r.length),u=new Array(r.length),h=[],c=0;c<r.length;++c){var x=a[c].length;u[c]=x,l[c]=!0,x<=1&&h.push(c)}for(;h.length>0;){l[m=h.pop()]=!1;var p=a[m];for(c=0;c<p.length;++c){var v=p[c];--u[v]==0&&h.push(v)}}var g=new Array(r.length),y=[];for(c=0;c<r.length;++c)if(l[c]){var m=y.length;g[c]=m,y.push(r[c])}else g[c]=-1;var _=[];for(c=0;c<n.length;++c){var d=n[c];l[d[0]]&&l[d[1]]&&_.push([g[d[0]],g[d[1]]])}return[_,y]};var i=t(3134)},2095:function(f,o,t){f.exports=function(x,p){var v=h(x,p);x=v[0];for(var g=(p=v[1]).length,y=(x.length,i(x,p.length)),m=0;m<g;++m)if(y[m].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var _=n(x,p),d=(_=_.filter(function(ke){for(var ze=ke.length,ve=[0],oe=0;oe<ze;++oe){var ie=p[ke[oe]],he=p[ke[(oe+1)%ze]],Se=a(-ie[0],ie[1]),ye=a(-ie[0],he[1]),we=a(he[0],ie[1]),Me=a(he[0],he[1]);ve=l(ve,l(l(Se,ye),l(we,Me)))}return ve[ve.length-1]>0})).length,S=new Array(d),w=new Array(d);for(m=0;m<d;++m){S[m]=m;var E=new Array(d),C=_[m].map(function(ke){return p[ke]}),O=r([C]),P=0;e:for(var z=0;z<d;++z)if(E[z]=0,m!==z){for(var j=(me=_[z]).length,I=0;I<j;++I){var N=O(p[me[I]]);if(N!==0){N<0&&(E[z]=1,P+=1);continue e}}E[z]=1,P+=1}w[m]=[P,m,E]}for(w.sort(function(ke,ze){return ze[0]-ke[0]}),m=0;m<d;++m){var W=(E=w[m])[1],F=E[2];for(z=0;z<d;++z)F[z]&&(S[z]=W)}var U=function(ke){for(var ze=new Array(ke),ve=0;ve<ke;++ve)ze[ve]=[];return ze}(d);for(m=0;m<d;++m)U[m].push(S[m]),U[S[m]].push(m);var H={},ne=c(g,!1);for(m=0;m<d;++m)for(j=(me=_[m]).length,z=0;z<j;++z){var $=me[z],K=me[(z+1)%j],Q=Math.min($,K)+":"+Math.max($,K);if(Q in H){var Z=H[Q];U[Z].push(m),U[m].push(Z),ne[$]=ne[K]=!0}else H[Q]=m}function X(ke){for(var ze=ke.length,ve=0;ve<ze;++ve)if(!ne[ke[ve]])return!1;return!0}var te=[],ae=c(d,-1);for(m=0;m<d;++m)S[m]!==m||X(_[m])?ae[m]=-1:(te.push(m),ae[m]=0);for(v=[];te.length>0;){var se=te.pop(),ce=U[se];u(ce,function(ke,ze){return ke-ze});var fe,pe=ce.length,ge=ae[se];for(ge===0&&(fe=[me=_[se]]),m=0;m<pe;++m){var me,be=ce[m];ae[be]>=0||(ae[be]=1^ge,te.push(be),ge===0&&(X(me=_[be])||(me.reverse(),fe.push(me))))}ge===0&&v.push(fe)}return v};var i=t(3134),n=t(3088),r=t(5085),a=t(5250),l=t(8210),u=t(1682),h=t(5609);function c(x,p){for(var v=new Array(x),g=0;g<x;++g)v[g]=p;return v}},5085:function(f,o,t){f.exports=function(c){for(var x=c.length,p=[],v=[],g=0;g<x;++g)for(var y=c[g],m=y.length,_=m-1,d=0;d<m;_=d++){var S=y[_],w=y[d];S[0]===w[0]?v.push([S,w]):p.push([S,w])}if(p.length===0)return v.length===0?h:(E=u(v),function(P){return E(P[0],P[1])?0:1});var E,C=n(p),O=function(P,z){return function(j){var I=a.le(z,j[0]);if(I<0)return 1;var N=P[I];if(!N){if(!(I>0&&z[I]===j[0]))return 1;N=P[I-1]}for(var W=1;N;){var F=N.key,U=i(j,F[0],F[1]);if(F[0][0]<F[1][0])if(U<0)N=N.left;else{if(!(U>0))return 0;W=-1,N=N.right}else if(U>0)N=N.left;else{if(!(U<0))return 0;W=1,N=N.right}}return W}}(C.slabs,C.coordinates);return v.length===0?O:function(P,z){return function(j){return P(j[0],j[1])?0:z(j)}}(u(v),O)};var i=t(3250)[3],n=t(4209),r=t(3352),a=t(2478);function l(){return!0}function u(c){for(var x={},p=0;p<c.length;++p){var v=c[p],g=v[0][0],y=v[0][1],m=v[1][1],_=[Math.min(y,m),Math.max(y,m)];g in x?x[g].push(_):x[g]=[_]}var d={},S=Object.keys(x);for(p=0;p<S.length;++p){var w=x[S[p]];d[S[p]]=r(w)}return function(E){return function(C,O){var P=E[C];return!!P&&!!P.queryPoint(O,l)}}(d)}function h(c){return 1}},9346:function(f){var o=new Float64Array(4),t=new Float64Array(4),i=new Float64Array(4);f.exports=function(n,r,a,l,u){o.length<l.length&&(o=new Float64Array(l.length),t=new Float64Array(l.length),i=new Float64Array(l.length));for(var h=0;h<l.length;++h)o[h]=n[h]-l[h],t[h]=r[h]-n[h],i[h]=a[h]-n[h];var c=0,x=0,p=0,v=0,g=0,y=0;for(h=0;h<l.length;++h){var m=t[h],_=i[h],d=o[h];c+=m*m,x+=m*_,p+=_*_,v+=d*m,g+=d*_,y+=d*d}var S,w,E,C,O,P=Math.abs(c*p-x*x),z=x*g-p*v,j=x*v-c*g;if(z+j<=P)if(z<0)j<0&&v<0?(j=0,-v>=c?(z=1,S=c+2*v+y):S=v*(z=-v/c)+y):(z=0,g>=0?(j=0,S=y):-g>=p?(j=1,S=p+2*g+y):S=g*(j=-g/p)+y);else if(j<0)j=0,v>=0?(z=0,S=y):-v>=c?(z=1,S=c+2*v+y):S=v*(z=-v/c)+y;else{var I=1/P;S=(z*=I)*(c*z+x*(j*=I)+2*v)+j*(x*z+p*j+2*g)+y}else z<0?(E=p+g)>(w=x+v)?(C=E-w)>=(O=c-2*x+p)?(z=1,j=0,S=c+2*v+y):S=(z=C/O)*(c*z+x*(j=1-z)+2*v)+j*(x*z+p*j+2*g)+y:(z=0,E<=0?(j=1,S=p+2*g+y):g>=0?(j=0,S=y):S=g*(j=-g/p)+y):j<0?(E=c+v)>(w=x+g)?(C=E-w)>=(O=c-2*x+p)?(j=1,z=0,S=p+2*g+y):S=(z=1-(j=C/O))*(c*z+x*j+2*v)+j*(x*z+p*j+2*g)+y:(j=0,E<=0?(z=1,S=c+2*v+y):v>=0?(z=0,S=y):S=v*(z=-v/c)+y):(C=p+g-x-v)<=0?(z=0,j=1,S=p+2*g+y):C>=(O=c-2*x+p)?(z=1,j=0,S=c+2*v+y):S=(z=C/O)*(c*z+x*(j=1-z)+2*v)+j*(x*z+p*j+2*g)+y;var N=1-z-j;for(h=0;h<l.length;++h)u[h]=N*n[h]+z*r[h]+j*a[h];return S<0?0:S}},8648:function(f,o,t){f.exports=t(783)},2653:function(f,o,t){var i=t(3865);f.exports=function(n,r){for(var a=n.length,l=new Array(a),u=0;u<a;++u)l[u]=i(n[u],r[u]);return l}},5838:function(f,o,t){f.exports=function(n){for(var r=new Array(n.length),a=0;a<n.length;++a)r[a]=i(n[a]);return r};var i=t(7842)},8987:function(f,o,t){var i=t(7842),n=t(6504);f.exports=function(r,a){for(var l=i(a),u=r.length,h=new Array(u),c=0;c<u;++c)h[c]=n(r[c],l);return h}},544:function(f,o,t){var i=t(5572);f.exports=function(n,r){for(var a=n.length,l=new Array(a),u=0;u<a;++u)l[u]=i(n[u],r[u]);return l}},5771:function(f,o,t){var i=t(8507),n=t(3788),r=t(2419);f.exports=function(a){a.sort(n);for(var l=a.length,u=0,h=0;h<l;++h){var c=a[h],x=r(c);if(x!==0){if(u>0){var p=a[u-1];if(i(c,p)===0&&r(p)!==x){u-=1;continue}}a[u++]=c}}return a.length=u,a}},3233:function(f){var o,t="";f.exports=function(i,n){if(typeof i!="string")throw new TypeError("expected a string");if(n===1)return i;if(n===2)return i+i;var r=i.length*n;if(o!==i||o===void 0)o=i,t="";else if(t.length>=r)return t.substr(0,r);for(;r>t.length&&n>1;)1&n&&(t+=i),n>>=1,i+=i;return t=(t+=i).substr(0,r)}},3025:function(f,o,t){f.exports=t.g.performance&&t.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},7004:function(f){f.exports=function(o){for(var t=o.length,i=o[o.length-1],n=t,r=t-2;r>=0;--r){var a=i;(h=(u=o[r])-((i=a+u)-a))&&(o[--n]=i,i=h)}var l=0;for(r=n;r<t;++r){var u,h;(h=(u=i)-((i=(a=o[r])+u)-a))&&(o[l++]=h)}return o[l++]=i,o.length=l,o}},2962:function(f,o,t){var i=t(5250),n=t(8210),r=t(3012),a=t(7004);function l(g,y,m,_){return function(d){return _(g(m(d[0][0],d[1][1]),m(-d[0][1],d[1][0])))}}function u(g,y,m,_){return function(d){return _(g(y(g(m(d[1][1],d[2][2]),m(-d[1][2],d[2][1])),d[0][0]),g(y(g(m(d[1][0],d[2][2]),m(-d[1][2],d[2][0])),-d[0][1]),y(g(m(d[1][0],d[2][1]),m(-d[1][1],d[2][0])),d[0][2]))))}}function h(g,y,m,_){return function(d){return _(g(g(y(g(y(g(m(d[2][2],d[3][3]),m(-d[2][3],d[3][2])),d[1][1]),g(y(g(m(d[2][1],d[3][3]),m(-d[2][3],d[3][1])),-d[1][2]),y(g(m(d[2][1],d[3][2]),m(-d[2][2],d[3][1])),d[1][3]))),d[0][0]),y(g(y(g(m(d[2][2],d[3][3]),m(-d[2][3],d[3][2])),d[1][0]),g(y(g(m(d[2][0],d[3][3]),m(-d[2][3],d[3][0])),-d[1][2]),y(g(m(d[2][0],d[3][2]),m(-d[2][2],d[3][0])),d[1][3]))),-d[0][1])),g(y(g(y(g(m(d[2][1],d[3][3]),m(-d[2][3],d[3][1])),d[1][0]),g(y(g(m(d[2][0],d[3][3]),m(-d[2][3],d[3][0])),-d[1][1]),y(g(m(d[2][0],d[3][1]),m(-d[2][1],d[3][0])),d[1][3]))),d[0][2]),y(g(y(g(m(d[2][1],d[3][2]),m(-d[2][2],d[3][1])),d[1][0]),g(y(g(m(d[2][0],d[3][2]),m(-d[2][2],d[3][0])),-d[1][1]),y(g(m(d[2][0],d[3][1]),m(-d[2][1],d[3][0])),d[1][2]))),-d[0][3]))))}}function c(g,y,m,_){return function(d){return _(g(g(y(g(g(y(g(y(g(m(d[3][3],d[4][4]),m(-d[3][4],d[4][3])),d[2][2]),g(y(g(m(d[3][2],d[4][4]),m(-d[3][4],d[4][2])),-d[2][3]),y(g(m(d[3][2],d[4][3]),m(-d[3][3],d[4][2])),d[2][4]))),d[1][1]),y(g(y(g(m(d[3][3],d[4][4]),m(-d[3][4],d[4][3])),d[2][1]),g(y(g(m(d[3][1],d[4][4]),m(-d[3][4],d[4][1])),-d[2][3]),y(g(m(d[3][1],d[4][3]),m(-d[3][3],d[4][1])),d[2][4]))),-d[1][2])),g(y(g(y(g(m(d[3][2],d[4][4]),m(-d[3][4],d[4][2])),d[2][1]),g(y(g(m(d[3][1],d[4][4]),m(-d[3][4],d[4][1])),-d[2][2]),y(g(m(d[3][1],d[4][2]),m(-d[3][2],d[4][1])),d[2][4]))),d[1][3]),y(g(y(g(m(d[3][2],d[4][3]),m(-d[3][3],d[4][2])),d[2][1]),g(y(g(m(d[3][1],d[4][3]),m(-d[3][3],d[4][1])),-d[2][2]),y(g(m(d[3][1],d[4][2]),m(-d[3][2],d[4][1])),d[2][3]))),-d[1][4]))),d[0][0]),y(g(g(y(g(y(g(m(d[3][3],d[4][4]),m(-d[3][4],d[4][3])),d[2][2]),g(y(g(m(d[3][2],d[4][4]),m(-d[3][4],d[4][2])),-d[2][3]),y(g(m(d[3][2],d[4][3]),m(-d[3][3],d[4][2])),d[2][4]))),d[1][0]),y(g(y(g(m(d[3][3],d[4][4]),m(-d[3][4],d[4][3])),d[2][0]),g(y(g(m(d[3][0],d[4][4]),m(-d[3][4],d[4][0])),-d[2][3]),y(g(m(d[3][0],d[4][3]),m(-d[3][3],d[4][0])),d[2][4]))),-d[1][2])),g(y(g(y(g(m(d[3][2],d[4][4]),m(-d[3][4],d[4][2])),d[2][0]),g(y(g(m(d[3][0],d[4][4]),m(-d[3][4],d[4][0])),-d[2][2]),y(g(m(d[3][0],d[4][2]),m(-d[3][2],d[4][0])),d[2][4]))),d[1][3]),y(g(y(g(m(d[3][2],d[4][3]),m(-d[3][3],d[4][2])),d[2][0]),g(y(g(m(d[3][0],d[4][3]),m(-d[3][3],d[4][0])),-d[2][2]),y(g(m(d[3][0],d[4][2]),m(-d[3][2],d[4][0])),d[2][3]))),-d[1][4]))),-d[0][1])),g(y(g(g(y(g(y(g(m(d[3][3],d[4][4]),m(-d[3][4],d[4][3])),d[2][1]),g(y(g(m(d[3][1],d[4][4]),m(-d[3][4],d[4][1])),-d[2][3]),y(g(m(d[3][1],d[4][3]),m(-d[3][3],d[4][1])),d[2][4]))),d[1][0]),y(g(y(g(m(d[3][3],d[4][4]),m(-d[3][4],d[4][3])),d[2][0]),g(y(g(m(d[3][0],d[4][4]),m(-d[3][4],d[4][0])),-d[2][3]),y(g(m(d[3][0],d[4][3]),m(-d[3][3],d[4][0])),d[2][4]))),-d[1][1])),g(y(g(y(g(m(d[3][1],d[4][4]),m(-d[3][4],d[4][1])),d[2][0]),g(y(g(m(d[3][0],d[4][4]),m(-d[3][4],d[4][0])),-d[2][1]),y(g(m(d[3][0],d[4][1]),m(-d[3][1],d[4][0])),d[2][4]))),d[1][3]),y(g(y(g(m(d[3][1],d[4][3]),m(-d[3][3],d[4][1])),d[2][0]),g(y(g(m(d[3][0],d[4][3]),m(-d[3][3],d[4][0])),-d[2][1]),y(g(m(d[3][0],d[4][1]),m(-d[3][1],d[4][0])),d[2][3]))),-d[1][4]))),d[0][2]),g(y(g(g(y(g(y(g(m(d[3][2],d[4][4]),m(-d[3][4],d[4][2])),d[2][1]),g(y(g(m(d[3][1],d[4][4]),m(-d[3][4],d[4][1])),-d[2][2]),y(g(m(d[3][1],d[4][2]),m(-d[3][2],d[4][1])),d[2][4]))),d[1][0]),y(g(y(g(m(d[3][2],d[4][4]),m(-d[3][4],d[4][2])),d[2][0]),g(y(g(m(d[3][0],d[4][4]),m(-d[3][4],d[4][0])),-d[2][2]),y(g(m(d[3][0],d[4][2]),m(-d[3][2],d[4][0])),d[2][4]))),-d[1][1])),g(y(g(y(g(m(d[3][1],d[4][4]),m(-d[3][4],d[4][1])),d[2][0]),g(y(g(m(d[3][0],d[4][4]),m(-d[3][4],d[4][0])),-d[2][1]),y(g(m(d[3][0],d[4][1]),m(-d[3][1],d[4][0])),d[2][4]))),d[1][2]),y(g(y(g(m(d[3][1],d[4][2]),m(-d[3][2],d[4][1])),d[2][0]),g(y(g(m(d[3][0],d[4][2]),m(-d[3][2],d[4][0])),-d[2][1]),y(g(m(d[3][0],d[4][1]),m(-d[3][1],d[4][0])),d[2][2]))),-d[1][4]))),-d[0][3]),y(g(g(y(g(y(g(m(d[3][2],d[4][3]),m(-d[3][3],d[4][2])),d[2][1]),g(y(g(m(d[3][1],d[4][3]),m(-d[3][3],d[4][1])),-d[2][2]),y(g(m(d[3][1],d[4][2]),m(-d[3][2],d[4][1])),d[2][3]))),d[1][0]),y(g(y(g(m(d[3][2],d[4][3]),m(-d[3][3],d[4][2])),d[2][0]),g(y(g(m(d[3][0],d[4][3]),m(-d[3][3],d[4][0])),-d[2][2]),y(g(m(d[3][0],d[4][2]),m(-d[3][2],d[4][0])),d[2][3]))),-d[1][1])),g(y(g(y(g(m(d[3][1],d[4][3]),m(-d[3][3],d[4][1])),d[2][0]),g(y(g(m(d[3][0],d[4][3]),m(-d[3][3],d[4][0])),-d[2][1]),y(g(m(d[3][0],d[4][1]),m(-d[3][1],d[4][0])),d[2][3]))),d[1][2]),y(g(y(g(m(d[3][1],d[4][2]),m(-d[3][2],d[4][1])),d[2][0]),g(y(g(m(d[3][0],d[4][2]),m(-d[3][2],d[4][0])),-d[2][1]),y(g(m(d[3][0],d[4][1]),m(-d[3][1],d[4][0])),d[2][2]))),-d[1][3]))),d[0][4])))))}}function x(g){return(g===2?l:g===3?u:g===4?h:g===5?c:void 0)(n,r,i,a)}var p=[function(){return[0]},function(g){return[g[0][0]]}];function v(g,y,m,_,d,S,w,E){return function(C){switch(C.length){case 0:return g(C);case 1:return y(C);case 2:return m(C);case 3:return _(C);case 4:return d(C);case 5:return S(C)}var O=w[C.length];return O||(O=w[C.length]=E(C.length)),O(C)}}(function(){for(;p.length<6;)p.push(x(p.length));f.exports=v.apply(void 0,p.concat([p,x]));for(var g=0;g<p.length;++g)f.exports[g]=p[g]})()},1944:function(f,o,t){var i=t(5250),n=t(8210);f.exports=function(r,a){for(var l=i(r[0],a[0]),u=1;u<r.length;++u)l=n(l,i(r[u],a[u]));return l}},2646:function(f,o,t){var i=t(5250),n=t(8210),r=t(8545),a=t(3012);function l(y){return(y===3?u:y===4?h:y===5?c:x)(n,r,i,a)}function u(y,m,_,d){return function(S,w,E){var C=_(S[0],S[0]),O=d(C,w[0]),P=d(C,E[0]),z=_(w[0],w[0]),j=d(z,S[0]),I=d(z,E[0]),N=_(E[0],E[0]),W=d(N,S[0]),F=d(N,w[0]),U=y(m(F,I),m(j,O)),H=m(W,P),ne=m(U,H);return ne[ne.length-1]}}function h(y,m,_,d){return function(S,w,E,C){var O=y(_(S[0],S[0]),_(S[1],S[1])),P=d(O,w[0]),z=d(O,E[0]),j=d(O,C[0]),I=y(_(w[0],w[0]),_(w[1],w[1])),N=d(I,S[0]),W=d(I,E[0]),F=d(I,C[0]),U=y(_(E[0],E[0]),_(E[1],E[1])),H=d(U,S[0]),ne=d(U,w[0]),$=d(U,C[0]),K=y(_(C[0],C[0]),_(C[1],C[1])),Q=d(K,S[0]),Z=d(K,w[0]),X=d(K,E[0]),te=y(y(d(m(X,$),w[1]),y(d(m(Z,F),-E[1]),d(m(ne,W),C[1]))),y(d(m(Z,F),S[1]),y(d(m(Q,j),-w[1]),d(m(N,P),C[1])))),ae=y(y(d(m(X,$),S[1]),y(d(m(Q,j),-E[1]),d(m(H,z),C[1]))),y(d(m(ne,W),S[1]),y(d(m(H,z),-w[1]),d(m(N,P),E[1])))),se=m(te,ae);return se[se.length-1]}}function c(y,m,_,d){return function(S,w,E,C,O){var P=y(_(S[0],S[0]),y(_(S[1],S[1]),_(S[2],S[2]))),z=d(P,w[0]),j=d(P,E[0]),I=d(P,C[0]),N=d(P,O[0]),W=y(_(w[0],w[0]),y(_(w[1],w[1]),_(w[2],w[2]))),F=d(W,S[0]),U=d(W,E[0]),H=d(W,C[0]),ne=d(W,O[0]),$=y(_(E[0],E[0]),y(_(E[1],E[1]),_(E[2],E[2]))),K=d($,S[0]),Q=d($,w[0]),Z=d($,C[0]),X=d($,O[0]),te=y(_(C[0],C[0]),y(_(C[1],C[1]),_(C[2],C[2]))),ae=d(te,S[0]),se=d(te,w[0]),ce=d(te,E[0]),fe=d(te,O[0]),pe=y(_(O[0],O[0]),y(_(O[1],O[1]),_(O[2],O[2]))),ge=d(pe,S[0]),me=d(pe,w[0]),be=d(pe,E[0]),ke=d(pe,C[0]),ze=y(y(y(d(y(d(m(ke,fe),E[1]),y(d(m(be,X),-C[1]),d(m(ce,Z),O[1]))),w[2]),y(d(y(d(m(ke,fe),w[1]),y(d(m(me,ne),-C[1]),d(m(se,H),O[1]))),-E[2]),d(y(d(m(be,X),w[1]),y(d(m(me,ne),-E[1]),d(m(Q,U),O[1]))),C[2]))),y(d(y(d(m(ce,Z),w[1]),y(d(m(se,H),-E[1]),d(m(Q,U),C[1]))),-O[2]),y(d(y(d(m(ke,fe),w[1]),y(d(m(me,ne),-C[1]),d(m(se,H),O[1]))),S[2]),d(y(d(m(ke,fe),S[1]),y(d(m(ge,N),-C[1]),d(m(ae,I),O[1]))),-w[2])))),y(y(d(y(d(m(me,ne),S[1]),y(d(m(ge,N),-w[1]),d(m(F,z),O[1]))),C[2]),y(d(y(d(m(se,H),S[1]),y(d(m(ae,I),-w[1]),d(m(F,z),C[1]))),-O[2]),d(y(d(m(ce,Z),w[1]),y(d(m(se,H),-E[1]),d(m(Q,U),C[1]))),S[2]))),y(d(y(d(m(ce,Z),S[1]),y(d(m(ae,I),-E[1]),d(m(K,j),C[1]))),-w[2]),y(d(y(d(m(se,H),S[1]),y(d(m(ae,I),-w[1]),d(m(F,z),C[1]))),E[2]),d(y(d(m(Q,U),S[1]),y(d(m(K,j),-w[1]),d(m(F,z),E[1]))),-C[2]))))),ve=y(y(y(d(y(d(m(ke,fe),E[1]),y(d(m(be,X),-C[1]),d(m(ce,Z),O[1]))),S[2]),d(y(d(m(ke,fe),S[1]),y(d(m(ge,N),-C[1]),d(m(ae,I),O[1]))),-E[2])),y(d(y(d(m(be,X),S[1]),y(d(m(ge,N),-E[1]),d(m(K,j),O[1]))),C[2]),d(y(d(m(ce,Z),S[1]),y(d(m(ae,I),-E[1]),d(m(K,j),C[1]))),-O[2]))),y(y(d(y(d(m(be,X),w[1]),y(d(m(me,ne),-E[1]),d(m(Q,U),O[1]))),S[2]),d(y(d(m(be,X),S[1]),y(d(m(ge,N),-E[1]),d(m(K,j),O[1]))),-w[2])),y(d(y(d(m(me,ne),S[1]),y(d(m(ge,N),-w[1]),d(m(F,z),O[1]))),E[2]),d(y(d(m(Q,U),S[1]),y(d(m(K,j),-w[1]),d(m(F,z),E[1]))),-O[2])))),oe=m(ze,ve);return oe[oe.length-1]}}function x(y,m,_,d){return function(S,w,E,C,O,P){var z=y(y(_(S[0],S[0]),_(S[1],S[1])),y(_(S[2],S[2]),_(S[3],S[3]))),j=d(z,w[0]),I=d(z,E[0]),N=d(z,C[0]),W=d(z,O[0]),F=d(z,P[0]),U=y(y(_(w[0],w[0]),_(w[1],w[1])),y(_(w[2],w[2]),_(w[3],w[3]))),H=d(U,S[0]),ne=d(U,E[0]),$=d(U,C[0]),K=d(U,O[0]),Q=d(U,P[0]),Z=y(y(_(E[0],E[0]),_(E[1],E[1])),y(_(E[2],E[2]),_(E[3],E[3]))),X=d(Z,S[0]),te=d(Z,w[0]),ae=d(Z,C[0]),se=d(Z,O[0]),ce=d(Z,P[0]),fe=y(y(_(C[0],C[0]),_(C[1],C[1])),y(_(C[2],C[2]),_(C[3],C[3]))),pe=d(fe,S[0]),ge=d(fe,w[0]),me=d(fe,E[0]),be=d(fe,O[0]),ke=d(fe,P[0]),ze=y(y(_(O[0],O[0]),_(O[1],O[1])),y(_(O[2],O[2]),_(O[3],O[3]))),ve=d(ze,S[0]),oe=d(ze,w[0]),ie=d(ze,E[0]),he=d(ze,C[0]),Se=d(ze,P[0]),ye=y(y(_(P[0],P[0]),_(P[1],P[1])),y(_(P[2],P[2]),_(P[3],P[3]))),we=d(ye,S[0]),Me=d(ye,w[0]),Oe=d(ye,E[0]),Ie=d(ye,C[0]),de=d(ye,O[0]),_e=y(y(y(d(y(y(d(y(d(m(de,Se),C[1]),y(d(m(Ie,ke),-O[1]),d(m(he,be),P[1]))),E[2]),d(y(d(m(de,Se),E[1]),y(d(m(Oe,ce),-O[1]),d(m(ie,se),P[1]))),-C[2])),y(d(y(d(m(Ie,ke),E[1]),y(d(m(Oe,ce),-C[1]),d(m(me,ae),P[1]))),O[2]),d(y(d(m(he,be),E[1]),y(d(m(ie,se),-C[1]),d(m(me,ae),O[1]))),-P[2]))),w[3]),y(d(y(y(d(y(d(m(de,Se),C[1]),y(d(m(Ie,ke),-O[1]),d(m(he,be),P[1]))),w[2]),d(y(d(m(de,Se),w[1]),y(d(m(Me,Q),-O[1]),d(m(oe,K),P[1]))),-C[2])),y(d(y(d(m(Ie,ke),w[1]),y(d(m(Me,Q),-C[1]),d(m(ge,$),P[1]))),O[2]),d(y(d(m(he,be),w[1]),y(d(m(oe,K),-C[1]),d(m(ge,$),O[1]))),-P[2]))),-E[3]),d(y(y(d(y(d(m(de,Se),E[1]),y(d(m(Oe,ce),-O[1]),d(m(ie,se),P[1]))),w[2]),d(y(d(m(de,Se),w[1]),y(d(m(Me,Q),-O[1]),d(m(oe,K),P[1]))),-E[2])),y(d(y(d(m(Oe,ce),w[1]),y(d(m(Me,Q),-E[1]),d(m(te,ne),P[1]))),O[2]),d(y(d(m(ie,se),w[1]),y(d(m(oe,K),-E[1]),d(m(te,ne),O[1]))),-P[2]))),C[3]))),y(y(d(y(y(d(y(d(m(Ie,ke),E[1]),y(d(m(Oe,ce),-C[1]),d(m(me,ae),P[1]))),w[2]),d(y(d(m(Ie,ke),w[1]),y(d(m(Me,Q),-C[1]),d(m(ge,$),P[1]))),-E[2])),y(d(y(d(m(Oe,ce),w[1]),y(d(m(Me,Q),-E[1]),d(m(te,ne),P[1]))),C[2]),d(y(d(m(me,ae),w[1]),y(d(m(ge,$),-E[1]),d(m(te,ne),C[1]))),-P[2]))),-O[3]),d(y(y(d(y(d(m(he,be),E[1]),y(d(m(ie,se),-C[1]),d(m(me,ae),O[1]))),w[2]),d(y(d(m(he,be),w[1]),y(d(m(oe,K),-C[1]),d(m(ge,$),O[1]))),-E[2])),y(d(y(d(m(ie,se),w[1]),y(d(m(oe,K),-E[1]),d(m(te,ne),O[1]))),C[2]),d(y(d(m(me,ae),w[1]),y(d(m(ge,$),-E[1]),d(m(te,ne),C[1]))),-O[2]))),P[3])),y(d(y(y(d(y(d(m(de,Se),C[1]),y(d(m(Ie,ke),-O[1]),d(m(he,be),P[1]))),w[2]),d(y(d(m(de,Se),w[1]),y(d(m(Me,Q),-O[1]),d(m(oe,K),P[1]))),-C[2])),y(d(y(d(m(Ie,ke),w[1]),y(d(m(Me,Q),-C[1]),d(m(ge,$),P[1]))),O[2]),d(y(d(m(he,be),w[1]),y(d(m(oe,K),-C[1]),d(m(ge,$),O[1]))),-P[2]))),S[3]),d(y(y(d(y(d(m(de,Se),C[1]),y(d(m(Ie,ke),-O[1]),d(m(he,be),P[1]))),S[2]),d(y(d(m(de,Se),S[1]),y(d(m(we,F),-O[1]),d(m(ve,W),P[1]))),-C[2])),y(d(y(d(m(Ie,ke),S[1]),y(d(m(we,F),-C[1]),d(m(pe,N),P[1]))),O[2]),d(y(d(m(he,be),S[1]),y(d(m(ve,W),-C[1]),d(m(pe,N),O[1]))),-P[2]))),-w[3])))),y(y(y(d(y(y(d(y(d(m(de,Se),w[1]),y(d(m(Me,Q),-O[1]),d(m(oe,K),P[1]))),S[2]),d(y(d(m(de,Se),S[1]),y(d(m(we,F),-O[1]),d(m(ve,W),P[1]))),-w[2])),y(d(y(d(m(Me,Q),S[1]),y(d(m(we,F),-w[1]),d(m(H,j),P[1]))),O[2]),d(y(d(m(oe,K),S[1]),y(d(m(ve,W),-w[1]),d(m(H,j),O[1]))),-P[2]))),C[3]),d(y(y(d(y(d(m(Ie,ke),w[1]),y(d(m(Me,Q),-C[1]),d(m(ge,$),P[1]))),S[2]),d(y(d(m(Ie,ke),S[1]),y(d(m(we,F),-C[1]),d(m(pe,N),P[1]))),-w[2])),y(d(y(d(m(Me,Q),S[1]),y(d(m(we,F),-w[1]),d(m(H,j),P[1]))),C[2]),d(y(d(m(ge,$),S[1]),y(d(m(pe,N),-w[1]),d(m(H,j),C[1]))),-P[2]))),-O[3])),y(d(y(y(d(y(d(m(he,be),w[1]),y(d(m(oe,K),-C[1]),d(m(ge,$),O[1]))),S[2]),d(y(d(m(he,be),S[1]),y(d(m(ve,W),-C[1]),d(m(pe,N),O[1]))),-w[2])),y(d(y(d(m(oe,K),S[1]),y(d(m(ve,W),-w[1]),d(m(H,j),O[1]))),C[2]),d(y(d(m(ge,$),S[1]),y(d(m(pe,N),-w[1]),d(m(H,j),C[1]))),-O[2]))),P[3]),d(y(y(d(y(d(m(Ie,ke),E[1]),y(d(m(Oe,ce),-C[1]),d(m(me,ae),P[1]))),w[2]),d(y(d(m(Ie,ke),w[1]),y(d(m(Me,Q),-C[1]),d(m(ge,$),P[1]))),-E[2])),y(d(y(d(m(Oe,ce),w[1]),y(d(m(Me,Q),-E[1]),d(m(te,ne),P[1]))),C[2]),d(y(d(m(me,ae),w[1]),y(d(m(ge,$),-E[1]),d(m(te,ne),C[1]))),-P[2]))),S[3]))),y(y(d(y(y(d(y(d(m(Ie,ke),E[1]),y(d(m(Oe,ce),-C[1]),d(m(me,ae),P[1]))),S[2]),d(y(d(m(Ie,ke),S[1]),y(d(m(we,F),-C[1]),d(m(pe,N),P[1]))),-E[2])),y(d(y(d(m(Oe,ce),S[1]),y(d(m(we,F),-E[1]),d(m(X,I),P[1]))),C[2]),d(y(d(m(me,ae),S[1]),y(d(m(pe,N),-E[1]),d(m(X,I),C[1]))),-P[2]))),-w[3]),d(y(y(d(y(d(m(Ie,ke),w[1]),y(d(m(Me,Q),-C[1]),d(m(ge,$),P[1]))),S[2]),d(y(d(m(Ie,ke),S[1]),y(d(m(we,F),-C[1]),d(m(pe,N),P[1]))),-w[2])),y(d(y(d(m(Me,Q),S[1]),y(d(m(we,F),-w[1]),d(m(H,j),P[1]))),C[2]),d(y(d(m(ge,$),S[1]),y(d(m(pe,N),-w[1]),d(m(H,j),C[1]))),-P[2]))),E[3])),y(d(y(y(d(y(d(m(Oe,ce),w[1]),y(d(m(Me,Q),-E[1]),d(m(te,ne),P[1]))),S[2]),d(y(d(m(Oe,ce),S[1]),y(d(m(we,F),-E[1]),d(m(X,I),P[1]))),-w[2])),y(d(y(d(m(Me,Q),S[1]),y(d(m(we,F),-w[1]),d(m(H,j),P[1]))),E[2]),d(y(d(m(te,ne),S[1]),y(d(m(X,I),-w[1]),d(m(H,j),E[1]))),-P[2]))),-C[3]),d(y(y(d(y(d(m(me,ae),w[1]),y(d(m(ge,$),-E[1]),d(m(te,ne),C[1]))),S[2]),d(y(d(m(me,ae),S[1]),y(d(m(pe,N),-E[1]),d(m(X,I),C[1]))),-w[2])),y(d(y(d(m(ge,$),S[1]),y(d(m(pe,N),-w[1]),d(m(H,j),C[1]))),E[2]),d(y(d(m(te,ne),S[1]),y(d(m(X,I),-w[1]),d(m(H,j),E[1]))),-C[2]))),P[3]))))),Ae=y(y(y(d(y(y(d(y(d(m(de,Se),C[1]),y(d(m(Ie,ke),-O[1]),d(m(he,be),P[1]))),E[2]),d(y(d(m(de,Se),E[1]),y(d(m(Oe,ce),-O[1]),d(m(ie,se),P[1]))),-C[2])),y(d(y(d(m(Ie,ke),E[1]),y(d(m(Oe,ce),-C[1]),d(m(me,ae),P[1]))),O[2]),d(y(d(m(he,be),E[1]),y(d(m(ie,se),-C[1]),d(m(me,ae),O[1]))),-P[2]))),S[3]),y(d(y(y(d(y(d(m(de,Se),C[1]),y(d(m(Ie,ke),-O[1]),d(m(he,be),P[1]))),S[2]),d(y(d(m(de,Se),S[1]),y(d(m(we,F),-O[1]),d(m(ve,W),P[1]))),-C[2])),y(d(y(d(m(Ie,ke),S[1]),y(d(m(we,F),-C[1]),d(m(pe,N),P[1]))),O[2]),d(y(d(m(he,be),S[1]),y(d(m(ve,W),-C[1]),d(m(pe,N),O[1]))),-P[2]))),-E[3]),d(y(y(d(y(d(m(de,Se),E[1]),y(d(m(Oe,ce),-O[1]),d(m(ie,se),P[1]))),S[2]),d(y(d(m(de,Se),S[1]),y(d(m(we,F),-O[1]),d(m(ve,W),P[1]))),-E[2])),y(d(y(d(m(Oe,ce),S[1]),y(d(m(we,F),-E[1]),d(m(X,I),P[1]))),O[2]),d(y(d(m(ie,se),S[1]),y(d(m(ve,W),-E[1]),d(m(X,I),O[1]))),-P[2]))),C[3]))),y(y(d(y(y(d(y(d(m(Ie,ke),E[1]),y(d(m(Oe,ce),-C[1]),d(m(me,ae),P[1]))),S[2]),d(y(d(m(Ie,ke),S[1]),y(d(m(we,F),-C[1]),d(m(pe,N),P[1]))),-E[2])),y(d(y(d(m(Oe,ce),S[1]),y(d(m(we,F),-E[1]),d(m(X,I),P[1]))),C[2]),d(y(d(m(me,ae),S[1]),y(d(m(pe,N),-E[1]),d(m(X,I),C[1]))),-P[2]))),-O[3]),d(y(y(d(y(d(m(he,be),E[1]),y(d(m(ie,se),-C[1]),d(m(me,ae),O[1]))),S[2]),d(y(d(m(he,be),S[1]),y(d(m(ve,W),-C[1]),d(m(pe,N),O[1]))),-E[2])),y(d(y(d(m(ie,se),S[1]),y(d(m(ve,W),-E[1]),d(m(X,I),O[1]))),C[2]),d(y(d(m(me,ae),S[1]),y(d(m(pe,N),-E[1]),d(m(X,I),C[1]))),-O[2]))),P[3])),y(d(y(y(d(y(d(m(de,Se),E[1]),y(d(m(Oe,ce),-O[1]),d(m(ie,se),P[1]))),w[2]),d(y(d(m(de,Se),w[1]),y(d(m(Me,Q),-O[1]),d(m(oe,K),P[1]))),-E[2])),y(d(y(d(m(Oe,ce),w[1]),y(d(m(Me,Q),-E[1]),d(m(te,ne),P[1]))),O[2]),d(y(d(m(ie,se),w[1]),y(d(m(oe,K),-E[1]),d(m(te,ne),O[1]))),-P[2]))),S[3]),d(y(y(d(y(d(m(de,Se),E[1]),y(d(m(Oe,ce),-O[1]),d(m(ie,se),P[1]))),S[2]),d(y(d(m(de,Se),S[1]),y(d(m(we,F),-O[1]),d(m(ve,W),P[1]))),-E[2])),y(d(y(d(m(Oe,ce),S[1]),y(d(m(we,F),-E[1]),d(m(X,I),P[1]))),O[2]),d(y(d(m(ie,se),S[1]),y(d(m(ve,W),-E[1]),d(m(X,I),O[1]))),-P[2]))),-w[3])))),y(y(y(d(y(y(d(y(d(m(de,Se),w[1]),y(d(m(Me,Q),-O[1]),d(m(oe,K),P[1]))),S[2]),d(y(d(m(de,Se),S[1]),y(d(m(we,F),-O[1]),d(m(ve,W),P[1]))),-w[2])),y(d(y(d(m(Me,Q),S[1]),y(d(m(we,F),-w[1]),d(m(H,j),P[1]))),O[2]),d(y(d(m(oe,K),S[1]),y(d(m(ve,W),-w[1]),d(m(H,j),O[1]))),-P[2]))),E[3]),d(y(y(d(y(d(m(Oe,ce),w[1]),y(d(m(Me,Q),-E[1]),d(m(te,ne),P[1]))),S[2]),d(y(d(m(Oe,ce),S[1]),y(d(m(we,F),-E[1]),d(m(X,I),P[1]))),-w[2])),y(d(y(d(m(Me,Q),S[1]),y(d(m(we,F),-w[1]),d(m(H,j),P[1]))),E[2]),d(y(d(m(te,ne),S[1]),y(d(m(X,I),-w[1]),d(m(H,j),E[1]))),-P[2]))),-O[3])),y(d(y(y(d(y(d(m(ie,se),w[1]),y(d(m(oe,K),-E[1]),d(m(te,ne),O[1]))),S[2]),d(y(d(m(ie,se),S[1]),y(d(m(ve,W),-E[1]),d(m(X,I),O[1]))),-w[2])),y(d(y(d(m(oe,K),S[1]),y(d(m(ve,W),-w[1]),d(m(H,j),O[1]))),E[2]),d(y(d(m(te,ne),S[1]),y(d(m(X,I),-w[1]),d(m(H,j),E[1]))),-O[2]))),P[3]),d(y(y(d(y(d(m(he,be),E[1]),y(d(m(ie,se),-C[1]),d(m(me,ae),O[1]))),w[2]),d(y(d(m(he,be),w[1]),y(d(m(oe,K),-C[1]),d(m(ge,$),O[1]))),-E[2])),y(d(y(d(m(ie,se),w[1]),y(d(m(oe,K),-E[1]),d(m(te,ne),O[1]))),C[2]),d(y(d(m(me,ae),w[1]),y(d(m(ge,$),-E[1]),d(m(te,ne),C[1]))),-O[2]))),S[3]))),y(y(d(y(y(d(y(d(m(he,be),E[1]),y(d(m(ie,se),-C[1]),d(m(me,ae),O[1]))),S[2]),d(y(d(m(he,be),S[1]),y(d(m(ve,W),-C[1]),d(m(pe,N),O[1]))),-E[2])),y(d(y(d(m(ie,se),S[1]),y(d(m(ve,W),-E[1]),d(m(X,I),O[1]))),C[2]),d(y(d(m(me,ae),S[1]),y(d(m(pe,N),-E[1]),d(m(X,I),C[1]))),-O[2]))),-w[3]),d(y(y(d(y(d(m(he,be),w[1]),y(d(m(oe,K),-C[1]),d(m(ge,$),O[1]))),S[2]),d(y(d(m(he,be),S[1]),y(d(m(ve,W),-C[1]),d(m(pe,N),O[1]))),-w[2])),y(d(y(d(m(oe,K),S[1]),y(d(m(ve,W),-w[1]),d(m(H,j),O[1]))),C[2]),d(y(d(m(ge,$),S[1]),y(d(m(pe,N),-w[1]),d(m(H,j),C[1]))),-O[2]))),E[3])),y(d(y(y(d(y(d(m(ie,se),w[1]),y(d(m(oe,K),-E[1]),d(m(te,ne),O[1]))),S[2]),d(y(d(m(ie,se),S[1]),y(d(m(ve,W),-E[1]),d(m(X,I),O[1]))),-w[2])),y(d(y(d(m(oe,K),S[1]),y(d(m(ve,W),-w[1]),d(m(H,j),O[1]))),E[2]),d(y(d(m(te,ne),S[1]),y(d(m(X,I),-w[1]),d(m(H,j),E[1]))),-O[2]))),-C[3]),d(y(y(d(y(d(m(me,ae),w[1]),y(d(m(ge,$),-E[1]),d(m(te,ne),C[1]))),S[2]),d(y(d(m(me,ae),S[1]),y(d(m(pe,N),-E[1]),d(m(X,I),C[1]))),-w[2])),y(d(y(d(m(ge,$),S[1]),y(d(m(pe,N),-w[1]),d(m(H,j),C[1]))),E[2]),d(y(d(m(te,ne),S[1]),y(d(m(X,I),-w[1]),d(m(H,j),E[1]))),-C[2]))),O[3]))))),Pe=m(_e,Ae);return Pe[Pe.length-1]}}var p=[function(){return 0},function(){return 0},function(){return 0}];function v(y){var m=p[y.length];return m||(m=p[y.length]=l(y.length)),m.apply(void 0,y)}function g(y,m,_,d,S,w,E,C){return function(O,P,z,j,I,N){switch(arguments.length){case 0:case 1:return 0;case 2:return d(O,P);case 3:return S(O,P,z);case 4:return w(O,P,z,j);case 5:return E(O,P,z,j,I);case 6:return C(O,P,z,j,I,N)}for(var W=new Array(arguments.length),F=0;F<arguments.length;++F)W[F]=arguments[F];return y(W)}}(function(){for(;p.length<=6;)p.push(l(p.length));f.exports=g.apply(void 0,[v].concat(p));for(var y=0;y<=6;++y)f.exports[y]=p[y]})()},727:function(f,o,t){var i=t(2962);function n(p){return(p===2?r:p===3?a:p===4?l:p===5?u:h)(p<6?i[p]:i)}function r(p){return function(v,g){return[p([[+g[0],+v[0][1]],[+g[1],+v[1][1]]]),p([[+v[0][0],+g[0]],[+v[1][0],+g[1]]]),p(v)]}}function a(p){return function(v,g){return[p([[+g[0],+v[0][1],+v[0][2]],[+g[1],+v[1][1],+v[1][2]],[+g[2],+v[2][1],+v[2][2]]]),p([[+v[0][0],+g[0],+v[0][2]],[+v[1][0],+g[1],+v[1][2]],[+v[2][0],+g[2],+v[2][2]]]),p([[+v[0][0],+v[0][1],+g[0]],[+v[1][0],+v[1][1],+g[1]],[+v[2][0],+v[2][1],+g[2]]]),p(v)]}}function l(p){return function(v,g){return[p([[+g[0],+v[0][1],+v[0][2],+v[0][3]],[+g[1],+v[1][1],+v[1][2],+v[1][3]],[+g[2],+v[2][1],+v[2][2],+v[2][3]],[+g[3],+v[3][1],+v[3][2],+v[3][3]]]),p([[+v[0][0],+g[0],+v[0][2],+v[0][3]],[+v[1][0],+g[1],+v[1][2],+v[1][3]],[+v[2][0],+g[2],+v[2][2],+v[2][3]],[+v[3][0],+g[3],+v[3][2],+v[3][3]]]),p([[+v[0][0],+v[0][1],+g[0],+v[0][3]],[+v[1][0],+v[1][1],+g[1],+v[1][3]],[+v[2][0],+v[2][1],+g[2],+v[2][3]],[+v[3][0],+v[3][1],+g[3],+v[3][3]]]),p([[+v[0][0],+v[0][1],+v[0][2],+g[0]],[+v[1][0],+v[1][1],+v[1][2],+g[1]],[+v[2][0],+v[2][1],+v[2][2],+g[2]],[+v[3][0],+v[3][1],+v[3][2],+g[3]]]),p(v)]}}function u(p){return function(v,g){return[p([[+g[0],+v[0][1],+v[0][2],+v[0][3],+v[0][4]],[+g[1],+v[1][1],+v[1][2],+v[1][3],+v[1][4]],[+g[2],+v[2][1],+v[2][2],+v[2][3],+v[2][4]],[+g[3],+v[3][1],+v[3][2],+v[3][3],+v[3][4]],[+g[4],+v[4][1],+v[4][2],+v[4][3],+v[4][4]]]),p([[+v[0][0],+g[0],+v[0][2],+v[0][3],+v[0][4]],[+v[1][0],+g[1],+v[1][2],+v[1][3],+v[1][4]],[+v[2][0],+g[2],+v[2][2],+v[2][3],+v[2][4]],[+v[3][0],+g[3],+v[3][2],+v[3][3],+v[3][4]],[+v[4][0],+g[4],+v[4][2],+v[4][3],+v[4][4]]]),p([[+v[0][0],+v[0][1],+g[0],+v[0][3],+v[0][4]],[+v[1][0],+v[1][1],+g[1],+v[1][3],+v[1][4]],[+v[2][0],+v[2][1],+g[2],+v[2][3],+v[2][4]],[+v[3][0],+v[3][1],+g[3],+v[3][3],+v[3][4]],[+v[4][0],+v[4][1],+g[4],+v[4][3],+v[4][4]]]),p([[+v[0][0],+v[0][1],+v[0][2],+g[0],+v[0][4]],[+v[1][0],+v[1][1],+v[1][2],+g[1],+v[1][4]],[+v[2][0],+v[2][1],+v[2][2],+g[2],+v[2][4]],[+v[3][0],+v[3][1],+v[3][2],+g[3],+v[3][4]],[+v[4][0],+v[4][1],+v[4][2],+g[4],+v[4][4]]]),p([[+v[0][0],+v[0][1],+v[0][2],+v[0][3],+g[0]],[+v[1][0],+v[1][1],+v[1][2],+v[1][3],+g[1]],[+v[2][0],+v[2][1],+v[2][2],+v[2][3],+g[2]],[+v[3][0],+v[3][1],+v[3][2],+v[3][3],+g[3]],[+v[4][0],+v[4][1],+v[4][2],+v[4][3],+g[4]]]),p(v)]}}function h(p){return function(v,g){return[p([[+g[0],+v[0][1],+v[0][2],+v[0][3],+v[0][4],+v[0][5]],[+g[1],+v[1][1],+v[1][2],+v[1][3],+v[1][4],+v[1][5]],[+g[2],+v[2][1],+v[2][2],+v[2][3],+v[2][4],+v[2][5]],[+g[3],+v[3][1],+v[3][2],+v[3][3],+v[3][4],+v[3][5]],[+g[4],+v[4][1],+v[4][2],+v[4][3],+v[4][4],+v[4][5]],[+g[5],+v[5][1],+v[5][2],+v[5][3],+v[5][4],+v[5][5]]]),p([[+v[0][0],+g[0],+v[0][2],+v[0][3],+v[0][4],+v[0][5]],[+v[1][0],+g[1],+v[1][2],+v[1][3],+v[1][4],+v[1][5]],[+v[2][0],+g[2],+v[2][2],+v[2][3],+v[2][4],+v[2][5]],[+v[3][0],+g[3],+v[3][2],+v[3][3],+v[3][4],+v[3][5]],[+v[4][0],+g[4],+v[4][2],+v[4][3],+v[4][4],+v[4][5]],[+v[5][0],+g[5],+v[5][2],+v[5][3],+v[5][4],+v[5][5]]]),p([[+v[0][0],+v[0][1],+g[0],+v[0][3],+v[0][4],+v[0][5]],[+v[1][0],+v[1][1],+g[1],+v[1][3],+v[1][4],+v[1][5]],[+v[2][0],+v[2][1],+g[2],+v[2][3],+v[2][4],+v[2][5]],[+v[3][0],+v[3][1],+g[3],+v[3][3],+v[3][4],+v[3][5]],[+v[4][0],+v[4][1],+g[4],+v[4][3],+v[4][4],+v[4][5]],[+v[5][0],+v[5][1],+g[5],+v[5][3],+v[5][4],+v[5][5]]]),p([[+v[0][0],+v[0][1],+v[0][2],+g[0],+v[0][4],+v[0][5]],[+v[1][0],+v[1][1],+v[1][2],+g[1],+v[1][4],+v[1][5]],[+v[2][0],+v[2][1],+v[2][2],+g[2],+v[2][4],+v[2][5]],[+v[3][0],+v[3][1],+v[3][2],+g[3],+v[3][4],+v[3][5]],[+v[4][0],+v[4][1],+v[4][2],+g[4],+v[4][4],+v[4][5]],[+v[5][0],+v[5][1],+v[5][2],+g[5],+v[5][4],+v[5][5]]]),p([[+v[0][0],+v[0][1],+v[0][2],+v[0][3],+g[0],+v[0][5]],[+v[1][0],+v[1][1],+v[1][2],+v[1][3],+g[1],+v[1][5]],[+v[2][0],+v[2][1],+v[2][2],+v[2][3],+g[2],+v[2][5]],[+v[3][0],+v[3][1],+v[3][2],+v[3][3],+g[3],+v[3][5]],[+v[4][0],+v[4][1],+v[4][2],+v[4][3],+g[4],+v[4][5]],[+v[5][0],+v[5][1],+v[5][2],+v[5][3],+g[5],+v[5][5]]]),p([[+v[0][0],+v[0][1],+v[0][2],+v[0][3],+v[0][4],+g[0]],[+v[1][0],+v[1][1],+v[1][2],+v[1][3],+v[1][4],+g[1]],[+v[2][0],+v[2][1],+v[2][2],+v[2][3],+v[2][4],+g[2]],[+v[3][0],+v[3][1],+v[3][2],+v[3][3],+v[3][4],+g[3]],[+v[4][0],+v[4][1],+v[4][2],+v[4][3],+v[4][4],+g[4]],[+v[5][0],+v[5][1],+v[5][2],+v[5][3],+v[5][4],+g[5]]]),p(v)]}}var c=[function(){return[[0]]},function(p,v){return[[v[0]],[p[0][0]]]}];function x(p,v,g,y,m,_,d,S){return function(w,E){switch(w.length){case 0:return p(w,E);case 1:return v(w,E);case 2:return g(w,E);case 3:return y(w,E);case 4:return m(w,E);case 5:return _(w,E)}var C=d[w.length];return C||(C=d[w.length]=S(w.length)),C(w,E)}}(function(){for(;c.length<6;)c.push(n(c.length));f.exports=x.apply(void 0,c.concat([c,n]));for(var p=0;p<6;++p)f.exports[p]=c[p]})()},3250:function(f,o,t){var i=t(5250),n=t(8210),r=t(3012),a=t(8545);function l(m,_,d,S){return function(w,E,C){var O=m(m(_(E[1],C[0]),_(-C[1],E[0])),m(_(w[1],E[0]),_(-E[1],w[0]))),P=m(_(w[1],C[0]),_(-C[1],w[0])),z=S(O,P);return z[z.length-1]}}function u(m,_,d,S){return function(w,E,C,O){var P=m(m(d(m(_(C[1],O[0]),_(-O[1],C[0])),E[2]),m(d(m(_(E[1],O[0]),_(-O[1],E[0])),-C[2]),d(m(_(E[1],C[0]),_(-C[1],E[0])),O[2]))),m(d(m(_(E[1],O[0]),_(-O[1],E[0])),w[2]),m(d(m(_(w[1],O[0]),_(-O[1],w[0])),-E[2]),d(m(_(w[1],E[0]),_(-E[1],w[0])),O[2])))),z=m(m(d(m(_(C[1],O[0]),_(-O[1],C[0])),w[2]),m(d(m(_(w[1],O[0]),_(-O[1],w[0])),-C[2]),d(m(_(w[1],C[0]),_(-C[1],w[0])),O[2]))),m(d(m(_(E[1],C[0]),_(-C[1],E[0])),w[2]),m(d(m(_(w[1],C[0]),_(-C[1],w[0])),-E[2]),d(m(_(w[1],E[0]),_(-E[1],w[0])),C[2])))),j=S(P,z);return j[j.length-1]}}function h(m,_,d,S){return function(w,E,C,O,P){var z=m(m(m(d(m(d(m(_(O[1],P[0]),_(-P[1],O[0])),C[2]),m(d(m(_(C[1],P[0]),_(-P[1],C[0])),-O[2]),d(m(_(C[1],O[0]),_(-O[1],C[0])),P[2]))),E[3]),m(d(m(d(m(_(O[1],P[0]),_(-P[1],O[0])),E[2]),m(d(m(_(E[1],P[0]),_(-P[1],E[0])),-O[2]),d(m(_(E[1],O[0]),_(-O[1],E[0])),P[2]))),-C[3]),d(m(d(m(_(C[1],P[0]),_(-P[1],C[0])),E[2]),m(d(m(_(E[1],P[0]),_(-P[1],E[0])),-C[2]),d(m(_(E[1],C[0]),_(-C[1],E[0])),P[2]))),O[3]))),m(d(m(d(m(_(C[1],O[0]),_(-O[1],C[0])),E[2]),m(d(m(_(E[1],O[0]),_(-O[1],E[0])),-C[2]),d(m(_(E[1],C[0]),_(-C[1],E[0])),O[2]))),-P[3]),m(d(m(d(m(_(O[1],P[0]),_(-P[1],O[0])),E[2]),m(d(m(_(E[1],P[0]),_(-P[1],E[0])),-O[2]),d(m(_(E[1],O[0]),_(-O[1],E[0])),P[2]))),w[3]),d(m(d(m(_(O[1],P[0]),_(-P[1],O[0])),w[2]),m(d(m(_(w[1],P[0]),_(-P[1],w[0])),-O[2]),d(m(_(w[1],O[0]),_(-O[1],w[0])),P[2]))),-E[3])))),m(m(d(m(d(m(_(E[1],P[0]),_(-P[1],E[0])),w[2]),m(d(m(_(w[1],P[0]),_(-P[1],w[0])),-E[2]),d(m(_(w[1],E[0]),_(-E[1],w[0])),P[2]))),O[3]),m(d(m(d(m(_(E[1],O[0]),_(-O[1],E[0])),w[2]),m(d(m(_(w[1],O[0]),_(-O[1],w[0])),-E[2]),d(m(_(w[1],E[0]),_(-E[1],w[0])),O[2]))),-P[3]),d(m(d(m(_(C[1],O[0]),_(-O[1],C[0])),E[2]),m(d(m(_(E[1],O[0]),_(-O[1],E[0])),-C[2]),d(m(_(E[1],C[0]),_(-C[1],E[0])),O[2]))),w[3]))),m(d(m(d(m(_(C[1],O[0]),_(-O[1],C[0])),w[2]),m(d(m(_(w[1],O[0]),_(-O[1],w[0])),-C[2]),d(m(_(w[1],C[0]),_(-C[1],w[0])),O[2]))),-E[3]),m(d(m(d(m(_(E[1],O[0]),_(-O[1],E[0])),w[2]),m(d(m(_(w[1],O[0]),_(-O[1],w[0])),-E[2]),d(m(_(w[1],E[0]),_(-E[1],w[0])),O[2]))),C[3]),d(m(d(m(_(E[1],C[0]),_(-C[1],E[0])),w[2]),m(d(m(_(w[1],C[0]),_(-C[1],w[0])),-E[2]),d(m(_(w[1],E[0]),_(-E[1],w[0])),C[2]))),-O[3]))))),j=m(m(m(d(m(d(m(_(O[1],P[0]),_(-P[1],O[0])),C[2]),m(d(m(_(C[1],P[0]),_(-P[1],C[0])),-O[2]),d(m(_(C[1],O[0]),_(-O[1],C[0])),P[2]))),w[3]),d(m(d(m(_(O[1],P[0]),_(-P[1],O[0])),w[2]),m(d(m(_(w[1],P[0]),_(-P[1],w[0])),-O[2]),d(m(_(w[1],O[0]),_(-O[1],w[0])),P[2]))),-C[3])),m(d(m(d(m(_(C[1],P[0]),_(-P[1],C[0])),w[2]),m(d(m(_(w[1],P[0]),_(-P[1],w[0])),-C[2]),d(m(_(w[1],C[0]),_(-C[1],w[0])),P[2]))),O[3]),d(m(d(m(_(C[1],O[0]),_(-O[1],C[0])),w[2]),m(d(m(_(w[1],O[0]),_(-O[1],w[0])),-C[2]),d(m(_(w[1],C[0]),_(-C[1],w[0])),O[2]))),-P[3]))),m(m(d(m(d(m(_(C[1],P[0]),_(-P[1],C[0])),E[2]),m(d(m(_(E[1],P[0]),_(-P[1],E[0])),-C[2]),d(m(_(E[1],C[0]),_(-C[1],E[0])),P[2]))),w[3]),d(m(d(m(_(C[1],P[0]),_(-P[1],C[0])),w[2]),m(d(m(_(w[1],P[0]),_(-P[1],w[0])),-C[2]),d(m(_(w[1],C[0]),_(-C[1],w[0])),P[2]))),-E[3])),m(d(m(d(m(_(E[1],P[0]),_(-P[1],E[0])),w[2]),m(d(m(_(w[1],P[0]),_(-P[1],w[0])),-E[2]),d(m(_(w[1],E[0]),_(-E[1],w[0])),P[2]))),C[3]),d(m(d(m(_(E[1],C[0]),_(-C[1],E[0])),w[2]),m(d(m(_(w[1],C[0]),_(-C[1],w[0])),-E[2]),d(m(_(w[1],E[0]),_(-E[1],w[0])),C[2]))),-P[3])))),I=S(z,j);return I[I.length-1]}}function c(m){return(m===3?l:m===4?u:h)(n,i,r,a)}var x=c(3),p=c(4),v=[function(){return 0},function(){return 0},function(m,_){return _[0]-m[0]},function(m,_,d){var S,w=(m[1]-d[1])*(_[0]-d[0]),E=(m[0]-d[0])*(_[1]-d[1]),C=w-E;if(w>0){if(E<=0)return C;S=w+E}else{if(!(w<0)||E>=0)return C;S=-(w+E)}var O=33306690738754716e-32*S;return C>=O||C<=-O?C:x(m,_,d)},function(m,_,d,S){var w=m[0]-S[0],E=_[0]-S[0],C=d[0]-S[0],O=m[1]-S[1],P=_[1]-S[1],z=d[1]-S[1],j=m[2]-S[2],I=_[2]-S[2],N=d[2]-S[2],W=E*z,F=C*P,U=C*O,H=w*z,ne=w*P,$=E*O,K=j*(W-F)+I*(U-H)+N*(ne-$),Q=7771561172376103e-31*((Math.abs(W)+Math.abs(F))*Math.abs(j)+(Math.abs(U)+Math.abs(H))*Math.abs(I)+(Math.abs(ne)+Math.abs($))*Math.abs(N));return K>Q||-K>Q?K:p(m,_,d,S)}];function g(m){var _=v[m.length];return _||(_=v[m.length]=c(m.length)),_.apply(void 0,m)}function y(m,_,d,S,w,E,C){return function(O,P,z,j,I){switch(arguments.length){case 0:case 1:return 0;case 2:return S(O,P);case 3:return w(O,P,z);case 4:return E(O,P,z,j);case 5:return C(O,P,z,j,I)}for(var N=new Array(arguments.length),W=0;W<arguments.length;++W)N[W]=arguments[W];return m(N)}}(function(){for(;v.length<=5;)v.push(c(v.length));f.exports=y.apply(void 0,[g].concat(v));for(var m=0;m<=5;++m)f.exports[m]=v[m]})()},5382:function(f,o,t){var i=t(8210),n=t(3012);f.exports=function(r,a){if(r.length===1)return n(a,r[0]);if(a.length===1)return n(r,a[0]);if(r.length===0||a.length===0)return[0];var l=[0];if(r.length<a.length)for(var u=0;u<r.length;++u)l=i(l,n(a,r[u]));else for(u=0;u<a.length;++u)l=i(l,n(r,a[u]));return l}},3012:function(f,o,t){var i=t(5250),n=t(9362);f.exports=function(r,a){var l=r.length;if(l===1){var u=i(r[0],a);return u[0]?u:[u[1]]}var h=new Array(2*l),c=[.1,.1],x=[.1,.1],p=0;i(r[0],a,c),c[0]&&(h[p++]=c[0]);for(var v=1;v<l;++v){i(r[v],a,x);var g=c[1];n(g,x[0],c),c[0]&&(h[p++]=c[0]);var y=x[1],m=c[1],_=y+m,d=m-(_-y);c[1]=_,d&&(h[p++]=d)}return c[1]&&(h[p++]=c[1]),p===0&&(h[p++]=0),h.length=p,h}},1125:function(f,o,t){f.exports=function(n,r,a,l){var u=i(n,a,l),h=i(r,a,l);if(u>0&&h>0||u<0&&h<0)return!1;var c=i(a,n,r),x=i(l,n,r);return!(c>0&&x>0||c<0&&x<0)&&(u!==0||h!==0||c!==0||x!==0||function(p,v,g,y){for(var m=0;m<2;++m){var _=p[m],d=v[m],S=Math.min(_,d),w=Math.max(_,d),E=g[m],C=y[m],O=Math.min(E,C);if(Math.max(E,C)<S||w<O)return!1}return!0}(n,r,a,l))};var i=t(3250)[3]},8545:function(f){f.exports=function(o,t){var i=0|o.length,n=0|t.length;if(i===1&&n===1)return function(O,P){var z=O+P,j=z-O,I=O-(z-j)+(P-j);return I?[I,z]:[z]}(o[0],-t[0]);var r,a,l=new Array(i+n),u=0,h=0,c=0,x=Math.abs,p=o[h],v=x(p),g=-t[c],y=x(g);v<y?(a=p,(h+=1)<i&&(v=x(p=o[h]))):(a=g,(c+=1)<n&&(y=x(g=-t[c]))),h<i&&v<y||c>=n?(r=p,(h+=1)<i&&(v=x(p=o[h]))):(r=g,(c+=1)<n&&(y=x(g=-t[c])));for(var m,_,d=r+a,S=d-r,w=a-S,E=w,C=d;h<i&&c<n;)v<y?(r=p,(h+=1)<i&&(v=x(p=o[h]))):(r=g,(c+=1)<n&&(y=x(g=-t[c]))),(w=(a=E)-(S=(d=r+a)-r))&&(l[u++]=w),E=C-((m=C+d)-(_=m-C))+(d-_),C=m;for(;h<i;)(w=(a=E)-(S=(d=(r=p)+a)-r))&&(l[u++]=w),E=C-((m=C+d)-(_=m-C))+(d-_),C=m,(h+=1)<i&&(p=o[h]);for(;c<n;)(w=(a=E)-(S=(d=(r=g)+a)-r))&&(l[u++]=w),E=C-((m=C+d)-(_=m-C))+(d-_),C=m,(c+=1)<n&&(g=-t[c]);return E&&(l[u++]=E),C&&(l[u++]=C),u||(l[u++]=0),l.length=u,l}},8210:function(f){f.exports=function(o,t){var i=0|o.length,n=0|t.length;if(i===1&&n===1)return function(O,P){var z=O+P,j=z-O,I=O-(z-j)+(P-j);return I?[I,z]:[z]}(o[0],t[0]);var r,a,l=new Array(i+n),u=0,h=0,c=0,x=Math.abs,p=o[h],v=x(p),g=t[c],y=x(g);v<y?(a=p,(h+=1)<i&&(v=x(p=o[h]))):(a=g,(c+=1)<n&&(y=x(g=t[c]))),h<i&&v<y||c>=n?(r=p,(h+=1)<i&&(v=x(p=o[h]))):(r=g,(c+=1)<n&&(y=x(g=t[c])));for(var m,_,d=r+a,S=d-r,w=a-S,E=w,C=d;h<i&&c<n;)v<y?(r=p,(h+=1)<i&&(v=x(p=o[h]))):(r=g,(c+=1)<n&&(y=x(g=t[c]))),(w=(a=E)-(S=(d=r+a)-r))&&(l[u++]=w),E=C-((m=C+d)-(_=m-C))+(d-_),C=m;for(;h<i;)(w=(a=E)-(S=(d=(r=p)+a)-r))&&(l[u++]=w),E=C-((m=C+d)-(_=m-C))+(d-_),C=m,(h+=1)<i&&(p=o[h]);for(;c<n;)(w=(a=E)-(S=(d=(r=g)+a)-r))&&(l[u++]=w),E=C-((m=C+d)-(_=m-C))+(d-_),C=m,(c+=1)<n&&(g=t[c]);return E&&(l[u++]=E),C&&(l[u++]=C),u||(l[u++]=0),l.length=u,l}},9127:function(f,o,t){f.exports=function(r){return n(i(r))};var i=t(6204),n=t(5771)},7765:function(f,o,t){f.exports=function(l,u,h,c){if(h=h||0,c===void 0&&(c=function(d){for(var S=d.length,w=0,E=0;E<S;++E)w=0|Math.max(w,d[E].length);return w-1}(l)),l.length===0||c<1)return{cells:[],vertexIds:[],vertexWeights:[]};var x=function(d,S){for(var w=d.length,E=n.mallocUint8(w),C=0;C<w;++C)E[C]=d[C]<S|0;return E}(u,+h),p=function(d,S){for(var w=d.length,E=S*(S+1)/2*w|0,C=n.mallocUint32(2*E),O=0,P=0;P<w;++P)for(var z=d[P],j=(S=z.length,0);j<S;++j)for(var I=0;I<j;++I){var N=z[I],W=z[j];C[O++]=0|Math.min(N,W),C[O++]=0|Math.max(N,W)}r(i(C,[O/2|0,2]));var F=2;for(P=2;P<O;P+=2)C[P-2]===C[P]&&C[P-1]===C[P+1]||(C[F++]=C[P],C[F++]=C[P+1]);return i(C,[F/2|0,2])}(l,c),v=function(d,S,w,E){for(var C=d.data,O=d.shape[0],P=n.mallocDouble(O),z=0,j=0;j<O;++j){var I=C[2*j],N=C[2*j+1];if(w[I]!==w[N]){var W=S[I],F=S[N];C[2*z]=I,C[2*z+1]=N,P[z++]=(F-E)/(F-W)}}return d.shape[0]=z,i(P,[z])}(p,u,x,+h),g=function(d,S){var w=n.mallocInt32(2*S),E=d.shape[0],C=d.data;w[0]=0;for(var O=0,P=0;P<E;++P){var z=C[2*P];if(z!==O){for(w[2*O+1]=P;++O<z;)w[2*O]=P,w[2*O+1]=P;w[2*O]=P}}for(w[2*O+1]=E;++O<S;)w[2*O]=w[2*O+1]=E;return w}(p,0|u.length),y=a(c)(l,p.data,g,x),m=function(d){for(var S=0|d.shape[0],w=d.data,E=new Array(S),C=0;C<S;++C)E[C]=[w[2*C],w[2*C+1]];return E}(p),_=[].slice.call(v.data,0,v.shape[0]);return n.free(x),n.free(p.data),n.free(v.data),n.free(g),{cells:y,vertexIds:m,vertexWeights:_}};var i=t(9618),n=t(1888),r=t(446),a=t(1570)},1570:function(f){f.exports=function(t){return o[t]()};var o=[function(){return function(t,i,n,r){for(var a=t.length,l=0;l<a;++l)t[l].length;return[]}},function(){function t(i,n,r,a){for(var l=0|Math.min(r,a),u=0|Math.max(r,a),h=i[2*l],c=i[2*l+1];h<c;){var x=h+c>>1,p=n[2*x+1];if(p===u)return x;u<p?c=x:h=x+1}return h}return function(i,n,r,a){for(var l=i.length,u=[],h=0;h<l;++h){var c=i[h];if(c.length===2){var x=(a[c[0]]<<0)+(a[c[1]]<<1);if(x===0||x===3)continue;switch(x){case 0:case 3:break;case 1:u.push([t(r,n,c[0],c[1])]);break;case 2:u.push([t(r,n,c[1],c[0])])}}}return u}},function(){function t(i,n,r,a){for(var l=0|Math.min(r,a),u=0|Math.max(r,a),h=i[2*l],c=i[2*l+1];h<c;){var x=h+c>>1,p=n[2*x+1];if(p===u)return x;u<p?c=x:h=x+1}return h}return function(i,n,r,a){for(var l=i.length,u=[],h=0;h<l;++h){var c=i[h],x=c.length;if(x===3){if((p=(a[c[0]]<<0)+(a[c[1]]<<1)+(a[c[2]]<<2))==0||p===7)continue;switch(p){case 0:case 7:break;case 1:u.push([t(r,n,c[0],c[2]),t(r,n,c[0],c[1])]);break;case 2:u.push([t(r,n,c[1],c[0]),t(r,n,c[1],c[2])]);break;case 3:u.push([t(r,n,c[0],c[2]),t(r,n,c[1],c[2])]);break;case 4:u.push([t(r,n,c[2],c[1]),t(r,n,c[2],c[0])]);break;case 5:u.push([t(r,n,c[2],c[1]),t(r,n,c[0],c[1])]);break;case 6:u.push([t(r,n,c[1],c[0]),t(r,n,c[2],c[0])])}}else if(x===2){var p;if((p=(a[c[0]]<<0)+(a[c[1]]<<1))==0||p===3)continue;switch(p){case 0:case 3:break;case 1:u.push([t(r,n,c[0],c[1])]);break;case 2:u.push([t(r,n,c[1],c[0])])}}}return u}},function(){function t(i,n,r,a){for(var l=0|Math.min(r,a),u=0|Math.max(r,a),h=i[2*l],c=i[2*l+1];h<c;){var x=h+c>>1,p=n[2*x+1];if(p===u)return x;u<p?c=x:h=x+1}return h}return function(i,n,r,a){for(var l=i.length,u=[],h=0;h<l;++h){var c=i[h],x=c.length;if(x===4){if((p=(a[c[0]]<<0)+(a[c[1]]<<1)+(a[c[2]]<<2)+(a[c[3]]<<3))==0||p===15)continue;switch(p){case 0:case 15:break;case 1:u.push([t(r,n,c[0],c[1]),t(r,n,c[0],c[2]),t(r,n,c[0],c[3])]);break;case 2:u.push([t(r,n,c[1],c[2]),t(r,n,c[1],c[0]),t(r,n,c[1],c[3])]);break;case 3:u.push([t(r,n,c[1],c[2]),t(r,n,c[0],c[2]),t(r,n,c[0],c[3])],[t(r,n,c[1],c[3]),t(r,n,c[1],c[2]),t(r,n,c[0],c[3])]);break;case 4:u.push([t(r,n,c[2],c[0]),t(r,n,c[2],c[1]),t(r,n,c[2],c[3])]);break;case 5:u.push([t(r,n,c[0],c[1]),t(r,n,c[2],c[1]),t(r,n,c[0],c[3])],[t(r,n,c[2],c[1]),t(r,n,c[2],c[3]),t(r,n,c[0],c[3])]);break;case 6:u.push([t(r,n,c[2],c[0]),t(r,n,c[1],c[0]),t(r,n,c[1],c[3])],[t(r,n,c[2],c[3]),t(r,n,c[2],c[0]),t(r,n,c[1],c[3])]);break;case 7:u.push([t(r,n,c[0],c[3]),t(r,n,c[1],c[3]),t(r,n,c[2],c[3])]);break;case 8:u.push([t(r,n,c[3],c[1]),t(r,n,c[3],c[0]),t(r,n,c[3],c[2])]);break;case 9:u.push([t(r,n,c[3],c[1]),t(r,n,c[0],c[1]),t(r,n,c[0],c[2])],[t(r,n,c[3],c[2]),t(r,n,c[3],c[1]),t(r,n,c[0],c[2])]);break;case 10:u.push([t(r,n,c[1],c[0]),t(r,n,c[3],c[0]),t(r,n,c[1],c[2])],[t(r,n,c[3],c[0]),t(r,n,c[3],c[2]),t(r,n,c[1],c[2])]);break;case 11:u.push([t(r,n,c[1],c[2]),t(r,n,c[0],c[2]),t(r,n,c[3],c[2])]);break;case 12:u.push([t(r,n,c[3],c[0]),t(r,n,c[2],c[0]),t(r,n,c[2],c[1])],[t(r,n,c[3],c[1]),t(r,n,c[3],c[0]),t(r,n,c[2],c[1])]);break;case 13:u.push([t(r,n,c[0],c[1]),t(r,n,c[2],c[1]),t(r,n,c[3],c[1])]);break;case 14:u.push([t(r,n,c[2],c[0]),t(r,n,c[1],c[0]),t(r,n,c[3],c[0])])}}else if(x===3){if((p=(a[c[0]]<<0)+(a[c[1]]<<1)+(a[c[2]]<<2))==0||p===7)continue;switch(p){case 0:case 7:break;case 1:u.push([t(r,n,c[0],c[2]),t(r,n,c[0],c[1])]);break;case 2:u.push([t(r,n,c[1],c[0]),t(r,n,c[1],c[2])]);break;case 3:u.push([t(r,n,c[0],c[2]),t(r,n,c[1],c[2])]);break;case 4:u.push([t(r,n,c[2],c[1]),t(r,n,c[2],c[0])]);break;case 5:u.push([t(r,n,c[2],c[1]),t(r,n,c[0],c[1])]);break;case 6:u.push([t(r,n,c[1],c[0]),t(r,n,c[2],c[0])])}}else if(x===2){var p;if((p=(a[c[0]]<<0)+(a[c[1]]<<1))==0||p===3)continue;switch(p){case 0:case 3:break;case 1:u.push([t(r,n,c[0],c[1])]);break;case 2:u.push([t(r,n,c[1],c[0])])}}}return u}}]},6803:function(f,o,t){t(8828),t(1755);function i(n,r){var a=n.length,l=n.length-r.length,u=Math.min;if(l)return l;switch(a){case 0:return 0;case 1:return n[0]-r[0];case 2:return(x=n[0]+n[1]-r[0]-r[1])||u(n[0],n[1])-u(r[0],r[1]);case 3:var h=n[0]+n[1],c=r[0]+r[1];if(x=h+n[2]-(c+r[2]))return x;var x,p=u(n[0],n[1]),v=u(r[0],r[1]);return(x=u(p,n[2])-u(v,r[2]))||u(p+n[2],h)-u(v+r[2],c);default:var g=n.slice(0);g.sort();var y=r.slice(0);y.sort();for(var m=0;m<a;++m)if(l=g[m]-y[m])return l;return 0}}o.Fw=i},3105:function(f,o){function t(n){var r=32;return(n&=-n)&&r--,65535&n&&(r-=16),16711935&n&&(r-=8),252645135&n&&(r-=4),858993459&n&&(r-=2),1431655765&n&&(r-=1),r}o.INT_BITS=32,o.INT_MAX=2147483647,o.INT_MIN=-2147483648,o.sign=function(n){return(n>0)-(n<0)},o.abs=function(n){var r=n>>31;return(n^r)-r},o.min=function(n,r){return r^(n^r)&-(n<r)},o.max=function(n,r){return n^(n^r)&-(n<r)},o.isPow2=function(n){return!(n&n-1||!n)},o.log2=function(n){var r,a;return r=(n>65535)<<4,r|=a=((n>>>=r)>255)<<3,r|=a=((n>>>=a)>15)<<2,(r|=a=((n>>>=a)>3)<<1)|(n>>>=a)>>1},o.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0},o.popCount=function(n){return 16843009*((n=(858993459&(n-=n>>>1&1431655765))+(n>>>2&858993459))+(n>>>4)&252645135)>>>24},o.countTrailingZeros=t,o.nextPow2=function(n){return n+=n===0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,1+(n|=n>>>16)},o.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,(n|=n>>>16)-(n>>>1)},o.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,27030>>>(n&=15)&1};var i=new Array(256);(function(n){for(var r=0;r<256;++r){var a=r,l=r,u=7;for(a>>>=1;a;a>>>=1)l<<=1,l|=1&a,--u;n[r]=l<<u&255}})(i),o.reverse=function(n){return i[255&n]<<24|i[n>>>8&255]<<16|i[n>>>16&255]<<8|i[n>>>24&255]},o.interleave2=function(n,r){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))<<1},o.deinterleave2=function(n,r){return(n=65535&((n=16711935&((n=252645135&((n=858993459&((n=n>>>r&1431655765)|n>>>1))|n>>>2))|n>>>4))|n>>>16))<<16>>16},o.interleave3=function(n,r,a){return n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2),(n|=(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<1)|(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<2},o.deinterleave3=function(n,r){return(n=1023&((n=4278190335&((n=251719695&((n=3272356035&((n=n>>>r&1227133513)|n>>>2))|n>>>4))|n>>>8))|n>>>16))<<22>>22},o.nextCombination=function(n){var r=n|n-1;return r+1|(~r&-~r)-1>>>t(n)+1}},2014:function(f,o,t){var i=t(3105),n=t(4623);function r(p,v){var g=p.length,y=p.length-v.length,m=Math.min;if(y)return y;switch(g){case 0:return 0;case 1:return p[0]-v[0];case 2:return(S=p[0]+p[1]-v[0]-v[1])||m(p[0],p[1])-m(v[0],v[1]);case 3:var _=p[0]+p[1],d=v[0]+v[1];if(S=_+p[2]-(d+v[2]))return S;var S,w=m(p[0],p[1]),E=m(v[0],v[1]);return(S=m(w,p[2])-m(E,v[2]))||m(w+p[2],_)-m(E+v[2],d);default:var C=p.slice(0);C.sort();var O=v.slice(0);O.sort();for(var P=0;P<g;++P)if(y=C[P]-O[P])return y;return 0}}function a(p,v){return r(p[0],v[0])}function l(p,v){if(v){for(var g=p.length,y=new Array(g),m=0;m<g;++m)y[m]=[p[m],v[m]];for(y.sort(a),m=0;m<g;++m)p[m]=y[m][0],v[m]=y[m][1];return p}return p.sort(r),p}function u(p){if(p.length===0)return[];for(var v=1,g=p.length,y=1;y<g;++y){var m=p[y];if(r(m,p[y-1])){if(y===v){v++;continue}p[v++]=m}}return p.length=v,p}function h(p,v){for(var g=0,y=p.length-1,m=-1;g<=y;){var _=g+y>>1,d=r(p[_],v);d<=0?(d===0&&(m=_),g=_+1):d>0&&(y=_-1)}return m}function c(p,v){for(var g=new Array(p.length),y=0,m=g.length;y<m;++y)g[y]=[];for(var _=[],d=(y=0,v.length);y<d;++y)for(var S=v[y],w=S.length,E=1,C=1<<w;E<C;++E){_.length=i.popCount(E);for(var O=0,P=0;P<w;++P)E&1<<P&&(_[O++]=S[P]);var z=h(p,_);if(!(z<0))for(;g[z++].push(y),!(z>=p.length||r(p[z],_)!==0););}return g}function x(p,v){if(v<0)return[];for(var g=[],y=(1<<v+1)-1,m=0;m<p.length;++m)for(var _=p[m],d=y;d<1<<_.length;d=i.nextCombination(d)){for(var S=new Array(v+1),w=0,E=0;E<_.length;++E)d&1<<E&&(S[w++]=_[E]);g.push(S)}return l(g)}o.dimension=function(p){for(var v=0,g=Math.max,y=0,m=p.length;y<m;++y)v=g(v,p[y].length);return v-1},o.countVertices=function(p){for(var v=-1,g=Math.max,y=0,m=p.length;y<m;++y)for(var _=p[y],d=0,S=_.length;d<S;++d)v=g(v,_[d]);return v+1},o.cloneCells=function(p){for(var v=new Array(p.length),g=0,y=p.length;g<y;++g)v[g]=p[g].slice(0);return v},o.compareCells=r,o.normalize=l,o.unique=u,o.findCell=h,o.incidence=c,o.dual=function(p,v){if(!v)return c(u(x(p,0)),p);for(var g=new Array(v),y=0;y<v;++y)g[y]=[];y=0;for(var m=p.length;y<m;++y)for(var _=p[y],d=0,S=_.length;d<S;++d)g[_[d]].push(y);return g},o.explode=function(p){for(var v=[],g=0,y=p.length;g<y;++g)for(var m=p[g],_=0|m.length,d=1,S=1<<_;d<S;++d){for(var w=[],E=0;E<_;++E)d>>>E&1&&w.push(m[E]);v.push(w)}return l(v)},o.skeleton=x,o.boundary=function(p){for(var v=[],g=0,y=p.length;g<y;++g)for(var m=p[g],_=0,d=m.length;_<d;++_){for(var S=new Array(m.length-1),w=0,E=0;w<d;++w)w!==_&&(S[E++]=m[w]);v.push(S)}return l(v)},o.connectedComponents=function(p,v){return v?function(g,y){for(var m=new n(y),_=0;_<g.length;++_)for(var d=g[_],S=0;S<d.length;++S)for(var w=S+1;w<d.length;++w)m.link(d[S],d[w]);var E=[],C=m.ranks;for(_=0;_<C.length;++_)C[_]=-1;for(_=0;_<g.length;++_){var O=m.find(g[_][0]);C[O]<0?(C[O]=E.length,E.push([g[_].slice(0)])):E[C[O]].push(g[_].slice(0))}return E}(p,v):function(g){for(var y=u(l(x(g,0))),m=new n(y.length),_=0;_<g.length;++_)for(var d=g[_],S=0;S<d.length;++S)for(var w=h(y,[d[S]]),E=S+1;E<d.length;++E)m.link(w,h(y,[d[E]]));var C=[],O=m.ranks;for(_=0;_<O.length;++_)O[_]=-1;for(_=0;_<g.length;++_){var P=m.find(h(y,[g[_][0]]));O[P]<0?(O[P]=C.length,C.push([g[_].slice(0)])):C[O[P]].push(g[_].slice(0))}return C}(p)}},4623:function(f){function o(t){this.roots=new Array(t),this.ranks=new Array(t);for(var i=0;i<t;++i)this.roots[i]=i,this.ranks[i]=0}f.exports=o,o.prototype.length=function(){return this.roots.length},o.prototype.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},o.prototype.find=function(t){for(var i=this.roots;i[t]!==t;){var n=i[t];i[t]=i[n],t=n}return t},o.prototype.link=function(t,i){var n=this.find(t),r=this.find(i);if(n!==r){var a=this.ranks,l=this.roots,u=a[n],h=a[r];u<h?l[n]=r:h<u?l[r]=n:(l[r]=n,++a[n])}}},5878:function(f,o,t){f.exports=function(r,a,l){for(var u=a.length,h=r.length,c=new Array(u),x=new Array(u),p=new Array(u),v=new Array(u),g=0;g<u;++g)c[g]=x[g]=-1,p[g]=1/0,v[g]=!1;for(g=0;g<h;++g){var y=r[g];if(y.length!==2)throw new Error("Input must be a graph");var m=y[1],_=y[0];x[_]!==-1?x[_]=-2:x[_]=m,c[m]!==-1?c[m]=-2:c[m]=_}function d($){if(v[$])return 1/0;var K,Q,Z,X=c[$],te=x[$];return X<0||te<0?1/0:(K=a[$],Q=a[X],Z=a[te],Math.abs(i(K,Q,Z))/Math.sqrt(Math.pow(Q[0]-Z[0],2)+Math.pow(Q[1]-Z[1],2)))}function S($,K){var Q=I[$],Z=I[K];I[$]=Z,I[K]=Q,N[Q]=K,N[Z]=$}function w($){return p[I[$]]}function E($){return 1&$?$-1>>1:($>>1)-1}function C($){for(var K=w($);;){var Q=K,Z=2*$+1,X=2*($+1),te=$;if(Z<W){var ae=w(Z);ae<Q&&(te=Z,Q=ae)}if(X<W&&w(X)<Q&&(te=X),te===$)return $;S($,te),$=te}}function O($){for(var K=w($);$>0;){var Q=E($);if(!(Q>=0&&K<w(Q)))return $;S($,Q),$=Q}}function P(){if(W>0){var $=I[0];return S(0,W-1),W-=1,C(0),$}return-1}function z($,K){var Q=I[$];return p[Q]===K?$:(p[Q]=-1/0,O($),P(),p[Q]=K,O((W+=1)-1))}function j($){if(!v[$]){v[$]=!0;var K=c[$],Q=x[$];c[Q]>=0&&(c[Q]=K),x[K]>=0&&(x[K]=Q),N[K]>=0&&z(N[K],d(K)),N[Q]>=0&&z(N[Q],d(Q))}}var I=[],N=new Array(u);for(g=0;g<u;++g)(p[g]=d(g))<1/0?(N[g]=I.length,I.push(g)):N[g]=-1;var W=I.length;for(g=W>>1;g>=0;--g)C(g);for(;;){var F=P();if(F<0||p[F]>l)break;j(F)}var U=[];for(g=0;g<u;++g)v[g]||(N[g]=U.length,U.push(a[g].slice()));function H($,K){if($[K]<0)return K;var Q=K,Z=K;do{var X=$[Z];if(!v[Z]||X<0||X===Z||(X=$[Z=X],!v[Z]||X<0||X===Z))break;Z=X,Q=$[Q]}while(Q!==Z);for(var te=K;te!==Z;te=$[te])$[te]=Z;return Z}U.length;var ne=[];return r.forEach(function($){var K=H(c,$[0]),Q=H(x,$[1]);if(K>=0&&Q>=0&&K!==Q){var Z=N[K],X=N[Q];Z!==X&&ne.push([Z,X])}}),n.unique(n.normalize(ne)),{positions:U,edges:ne}};var i=t(3250),n=t(2014)},1303:function(f,o,t){f.exports=function(r,a){var l,u,h,c;if(a[0][0]<a[1][0])l=a[0],u=a[1];else{if(!(a[0][0]>a[1][0]))return n(a,r);l=a[1],u=a[0]}if(r[0][0]<r[1][0])h=r[0],c=r[1];else{if(!(r[0][0]>r[1][0]))return-n(r,a);h=r[1],c=r[0]}var x=i(l,u,c),p=i(l,u,h);if(x<0){if(p<=0)return x}else if(x>0){if(p>=0)return x}else if(p)return p;if(x=i(c,h,u),p=i(c,h,l),x<0){if(p<=0)return x}else if(x>0){if(p>=0)return x}else if(p)return p;return u[0]-c[0]};var i=t(3250);function n(r,a){var l,u,h,c;if(a[0][0]<a[1][0])l=a[0],u=a[1];else{if(!(a[0][0]>a[1][0])){var x=Math.min(r[0][1],r[1][1]),p=Math.max(r[0][1],r[1][1]),v=Math.min(a[0][1],a[1][1]),g=Math.max(a[0][1],a[1][1]);return p<v?p-v:x>g?x-g:p-g}l=a[1],u=a[0]}r[0][1]<r[1][1]?(h=r[0],c=r[1]):(h=r[1],c=r[0]);var y=i(u,l,h);return y||(y=i(u,l,c))||c-u}},4209:function(f,o,t){f.exports=function(p){for(var v=p.length,g=2*v,y=new Array(g),m=0;m<v;++m){var _=p[m],d=_[0][0]<_[1][0];y[2*m]=new x(_[0][0],_,d,m),y[2*m+1]=new x(_[1][0],_,!d,m)}y.sort(function(j,I){var N=j.x-I.x;return N||(N=j.create-I.create)||Math.min(j.segment[0][1],j.segment[1][1])-Math.min(I.segment[0][1],I.segment[1][1])});var S=n(a),w=[],E=[],C=[];for(m=0;m<g;){for(var O=y[m].x,P=[];m<g;){var z=y[m];if(z.x!==O)break;m+=1,z.segment[0][0]===z.x&&z.segment[1][0]===z.x?z.create&&(z.segment[0][1]<z.segment[1][1]?(P.push(new c(z.segment[0][1],z.index,!0,!0)),P.push(new c(z.segment[1][1],z.index,!1,!1))):(P.push(new c(z.segment[1][1],z.index,!0,!1)),P.push(new c(z.segment[0][1],z.index,!1,!0)))):S=z.create?S.insert(z.segment,z.index):S.remove(z.segment)}w.push(S.root),E.push(O),C.push(P)}return new l(w,E,C)};var i=t(2478),n=t(3840),r=t(3250),a=t(1303);function l(p,v,g){this.slabs=p,this.coordinates=v,this.horizontal=g}function u(p,v){return p.y-v}function h(p,v){for(var g=null;p;){var y,m,_=p.key;_[0][0]<_[1][0]?(y=_[0],m=_[1]):(y=_[1],m=_[0]);var d=r(y,m,v);if(d<0)p=p.left;else if(d>0)if(v[0]!==_[1][0])g=p,p=p.right;else{if(S=h(p.right,v))return S;p=p.left}else{if(v[0]!==_[1][0])return p;var S;if(S=h(p.right,v))return S;p=p.left}}return g}function c(p,v,g,y){this.y=p,this.index=v,this.start=g,this.closed=y}function x(p,v,g,y){this.x=p,this.segment=v,this.create=g,this.index=y}l.prototype.castUp=function(p){var v=i.le(this.coordinates,p[0]);if(v<0)return-1;this.slabs[v];var g=h(this.slabs[v],p),y=-1;if(g&&(y=g.value),this.coordinates[v]===p[0]){var m=null;if(g&&(m=g.key),v>0){var _=h(this.slabs[v-1],p);_&&(m?a(_.key,m)>0&&(m=_.key,y=_.value):(y=_.value,m=_.key))}var d=this.horizontal[v];if(d.length>0){var S=i.ge(d,p[1],u);if(S<d.length){var w=d[S];if(p[1]===w.y){if(w.closed)return w.index;for(;S<d.length-1&&d[S+1].y===p[1];)if((w=d[S+=1]).closed)return w.index;if(w.y===p[1]&&!w.start){if((S+=1)>=d.length)return y;w=d[S]}}if(w.start)if(m){var E=r(m[0],m[1],[p[0],w.y]);m[0][0]>m[1][0]&&(E=-E),E>0&&(y=w.index)}else y=w.index;else w.y!==p[1]&&(y=w.index)}}}return y}},5202:function(f,o,t){var i=t(1944),n=t(8210);function r(l,u){var h=n(i(l,u),[u[u.length-1]]);return h[h.length-1]}function a(l,u,h,c){var x=-u/(c-u);x<0?x=0:x>1&&(x=1);for(var p=1-x,v=l.length,g=new Array(v),y=0;y<v;++y)g[y]=x*l[y]+p*h[y];return g}f.exports=function(l,u){for(var h=[],c=[],x=r(l[l.length-1],u),p=l[l.length-1],v=l[0],g=0;g<l.length;++g,p=v){var y=r(v=l[g],u);if(x<0&&y>0||x>0&&y<0){var m=a(p,y,v,x);h.push(m),c.push(m.slice())}y<0?c.push(v.slice()):y>0?h.push(v.slice()):(h.push(v.slice()),c.push(v.slice())),x=y}return{positive:h,negative:c}},f.exports.positive=function(l,u){for(var h=[],c=r(l[l.length-1],u),x=l[l.length-1],p=l[0],v=0;v<l.length;++v,x=p){var g=r(p=l[v],u);(c<0&&g>0||c>0&&g<0)&&h.push(a(x,g,p,c)),g>=0&&h.push(p.slice()),c=g}return h},f.exports.negative=function(l,u){for(var h=[],c=r(l[l.length-1],u),x=l[l.length-1],p=l[0],v=0;v<l.length;++v,x=p){var g=r(p=l[v],u);(c<0&&g>0||c>0&&g<0)&&h.push(a(x,g,p,c)),g<=0&&h.push(p.slice()),c=g}return h}},3387:function(f,o,t){var i;(function(){var n={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function r(u){return function(h,c){var x,p,v,g,y,m,_,d,S,w=1,E=h.length,C="";for(p=0;p<E;p++)if(typeof h[p]=="string")C+=h[p];else if(typeof h[p]=="object"){if((g=h[p]).keys)for(x=c[w],v=0;v<g.keys.length;v++){if(x==null)throw new Error(r('[sprintf] Cannot access property "%s" of undefined value "%s"',g.keys[v],g.keys[v-1]));x=x[g.keys[v]]}else x=g.param_no?c[g.param_no]:c[w++];if(n.not_type.test(g.type)&&n.not_primitive.test(g.type)&&x instanceof Function&&(x=x()),n.numeric_arg.test(g.type)&&typeof x!="number"&&isNaN(x))throw new TypeError(r("[sprintf] expecting number but found %T",x));switch(n.number.test(g.type)&&(d=x>=0),g.type){case"b":x=parseInt(x,10).toString(2);break;case"c":x=String.fromCharCode(parseInt(x,10));break;case"d":case"i":x=parseInt(x,10);break;case"j":x=JSON.stringify(x,null,g.width?parseInt(g.width):0);break;case"e":x=g.precision?parseFloat(x).toExponential(g.precision):parseFloat(x).toExponential();break;case"f":x=g.precision?parseFloat(x).toFixed(g.precision):parseFloat(x);break;case"g":x=g.precision?String(Number(x.toPrecision(g.precision))):parseFloat(x);break;case"o":x=(parseInt(x,10)>>>0).toString(8);break;case"s":x=String(x),x=g.precision?x.substring(0,g.precision):x;break;case"t":x=String(!!x),x=g.precision?x.substring(0,g.precision):x;break;case"T":x=Object.prototype.toString.call(x).slice(8,-1).toLowerCase(),x=g.precision?x.substring(0,g.precision):x;break;case"u":x=parseInt(x,10)>>>0;break;case"v":x=x.valueOf(),x=g.precision?x.substring(0,g.precision):x;break;case"x":x=(parseInt(x,10)>>>0).toString(16);break;case"X":x=(parseInt(x,10)>>>0).toString(16).toUpperCase()}n.json.test(g.type)?C+=x:(!n.number.test(g.type)||d&&!g.sign?S="":(S=d?"+":"-",x=x.toString().replace(n.sign,"")),m=g.pad_char?g.pad_char==="0"?"0":g.pad_char.charAt(1):" ",_=g.width-(S+x).length,y=g.width&&_>0?m.repeat(_):"",C+=g.align?S+x+y:m==="0"?S+y+x:y+S+x)}return C}(function(h){if(l[h])return l[h];for(var c,x=h,p=[],v=0;x;){if((c=n.text.exec(x))!==null)p.push(c[0]);else if((c=n.modulo.exec(x))!==null)p.push("%");else{if((c=n.placeholder.exec(x))===null)throw new SyntaxError("[sprintf] unexpected placeholder");if(c[2]){v|=1;var g=[],y=c[2],m=[];if((m=n.key.exec(y))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");for(g.push(m[1]);(y=y.substring(m[0].length))!=="";)if((m=n.key_access.exec(y))!==null)g.push(m[1]);else{if((m=n.index_access.exec(y))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");g.push(m[1])}c[2]=g}else v|=2;if(v===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");p.push({placeholder:c[0],param_no:c[1],keys:c[2],sign:c[3],pad_char:c[4],align:c[5],width:c[6],precision:c[7],type:c[8]})}x=x.substring(c[0].length)}return l[h]=p}(u),arguments)}function a(u,h){return r.apply(null,[u].concat(h||[]))}var l=Object.create(null);o.sprintf=r,o.vsprintf=a,typeof window<"u"&&(window.sprintf=r,window.vsprintf=a,(i=(function(){return{sprintf:r,vsprintf:a}}).call(o,t,o,f))===void 0||(f.exports=i))})()},3711:function(f,o,t){f.exports=function(l,u){if(l.dimension<=0)return{positions:[],cells:[]};if(l.dimension===1)return function(x,p){for(var v=n(x,p),g=v.length,y=new Array(g),m=new Array(g),_=0;_<g;++_)y[_]=[v[_]],m[_]=[_];return{positions:y,cells:m}}(l,u);var h=l.order.join()+"-"+l.dtype,c=a[h];return u=+u||0,c||(c=a[h]=function(x,p){var v=x.length+"d",g=r[v];if(g)return g(i,x,p)}(l.order,l.dtype)),c(l,u)};var i=t(2640),n=t(781),r={"2d":function(l,u,h){var c=l({order:u,scalarArguments:3,getters:h==="generic"?[0]:void 0,phase:function(x,p,v,g){return x>g|0},vertex:function(x,p,v,g,y,m,_,d,S,w,E,C,O){var P=(_<<0)+(d<<1)+(S<<2)+(w<<3)|0;if(P!==0&&P!==15)switch(P){case 0:case 15:E.push([x-.5,p-.5]);break;case 1:E.push([x-.25-.25*(g+v-2*O)/(v-g),p-.25-.25*(y+v-2*O)/(v-y)]);break;case 2:E.push([x-.75-.25*(-g-v+2*O)/(g-v),p-.25-.25*(m+g-2*O)/(g-m)]);break;case 3:E.push([x-.5,p-.5-.5*(y+v+m+g-4*O)/(v-y+g-m)]);break;case 4:E.push([x-.25-.25*(m+y-2*O)/(y-m),p-.75-.25*(-y-v+2*O)/(y-v)]);break;case 5:E.push([x-.5-.5*(g+v+m+y-4*O)/(v-g+y-m),p-.5]);break;case 6:E.push([x-.5-.25*(-g-v+m+y)/(g-v+y-m),p-.5-.25*(-y-v+m+g)/(y-v+g-m)]);break;case 7:E.push([x-.75-.25*(m+y-2*O)/(y-m),p-.75-.25*(m+g-2*O)/(g-m)]);break;case 8:E.push([x-.75-.25*(-m-y+2*O)/(m-y),p-.75-.25*(-m-g+2*O)/(m-g)]);break;case 9:E.push([x-.5-.25*(g+v+-m-y)/(v-g+m-y),p-.5-.25*(y+v+-m-g)/(v-y+m-g)]);break;case 10:E.push([x-.5-.5*(-g-v-m-y+4*O)/(g-v+m-y),p-.5]);break;case 11:E.push([x-.25-.25*(-m-y+2*O)/(m-y),p-.75-.25*(y+v-2*O)/(v-y)]);break;case 12:E.push([x-.5,p-.5-.5*(-y-v-m-g+4*O)/(y-v+m-g)]);break;case 13:E.push([x-.75-.25*(g+v-2*O)/(v-g),p-.25-.25*(-m-g+2*O)/(m-g)]);break;case 14:E.push([x-.25-.25*(-g-v+2*O)/(g-v),p-.25-.25*(-y-v+2*O)/(y-v)])}},cell:function(x,p,v,g,y,m,_,d,S){y?d.push([x,p]):d.push([p,x])}});return function(x,p){var v=[],g=[];return c(x,v,g,p),{positions:v,cells:g}}}},a={}},529:function(f,o,t){f.exports=function a(l,u,h){var c=(h=h||{}).fontStyle||"normal",x=h.fontWeight||"normal",p=h.fontVariant||"normal",v=[c,x,p,l].join("_"),g=r[v];g||(g=r[v]={" ":{data:new Float32Array(0),shape:.2}});var y=g[u];if(!y)if(u.length<=1||!/\d/.test(u))y=g[u]=function(j){for(var I=j.cells,N=j.positions,W=new Float32Array(6*I.length),F=0,U=0,H=0;H<I.length;++H)for(var ne=I[H],$=0;$<3;++$){var K=N[ne[$]];W[F++]=K[0],W[F++]=K[1]+1.4,U=Math.max(K[0],U)}return{data:W,shape:U}}(i(u,{triangles:!0,font:l,fontStyle:c,fontWeight:x,fontVariant:p,textAlign:h.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var m=u.split(/(\d|\s)/),_=new Array(m.length),d=0,S=0,w=0;w<m.length;++w)_[w]=a(l,m[w]),d+=_[w].data.length,S+=_[w].shape,w>0&&(S+=.02);var E=new Float32Array(d),C=0,O=-.5*S;for(w=0;w<_.length;++w){for(var P=_[w].data,z=0;z<P.length;z+=2)E[C++]=P[z]+O,E[C++]=P[z+1];O+=_[w].shape+.02}y=g[u]={data:E,shape:S}}return y};var i=t(4359),n=window||M.global||{},r=n.__TEXT_CACHE||{};n.__TEXT_CACHE={}},665:function(f,o,t){var i=t(3202);f.exports=a;var n=96;function r(l,u){var h=i(getComputedStyle(l).getPropertyValue(u));return h[0]*a(h[1],l)}function a(l,u){switch(u=u||document.body,l=(l||"px").trim().toLowerCase(),u!==window&&u!==document||(u=document.body),l){case"%":return u.clientHeight/100;case"ch":case"ex":return function(h,c){var x=document.createElement("div");x.style["font-size"]="128"+h,c.appendChild(x);var p=r(x,"font-size")/128;return c.removeChild(x),p}(l,u);case"em":return r(u,"font-size");case"rem":return r(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return n;case"cm":return n/2.54;case"mm":return n/25.4;case"pt":return n/72;case"pc":return n/6}return 1}},7261:function(f,o,t){f.exports=function(y){var m=(y=y||{}).center||[0,0,0],_=y.up||[0,1,0],d=y.right||x(_),S=y.radius||1,w=y.theta||0,E=y.phi||0;if(m=[].slice.call(m,0,3),_=[].slice.call(_,0,3),l(_,_),d=[].slice.call(d,0,3),l(d,d),"eye"in y){var C=y.eye,O=[C[0]-m[0],C[1]-m[1],C[2]-m[2]];a(d,O,_),h(d[0],d[1],d[2])<1e-6?d=x(_):l(d,d),S=h(O[0],O[1],O[2]);var P=u(_,O)/S,z=u(d,O)/S;E=Math.acos(P),w=Math.acos(z)}return S=Math.log(S),new p(y.zoomMin,y.zoomMax,m,_,d,S,w,E)};var i=t(9215),n=t(7608),r=t(6079),a=t(5911),l=t(3536),u=t(244);function h(y,m,_){return Math.sqrt(Math.pow(y,2)+Math.pow(m,2)+Math.pow(_,2))}function c(y){return Math.min(1,Math.max(-1,y))}function x(y){var m=Math.abs(y[0]),_=Math.abs(y[1]),d=Math.abs(y[2]),S=[0,0,0];m>Math.max(_,d)?S[2]=1:_>Math.max(m,d)?S[0]=1:S[1]=1;for(var w=0,E=0,C=0;C<3;++C)w+=y[C]*y[C],E+=S[C]*y[C];for(C=0;C<3;++C)S[C]-=E/w*y[C];return l(S,S),S}function p(y,m,_,d,S,w,E,C){this.center=i(_),this.up=i(d),this.right=i(S),this.radius=i([w]),this.angle=i([E,C]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(y,m),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var O=0;O<16;++O)this.computedMatrix[O]=.5;this.recalcMatrix(0)}var v=p.prototype;v.setDistanceLimits=function(y,m){y=y>0?Math.log(y):-1/0,m=m>0?Math.log(m):1/0,m=Math.max(m,y),this.radius.bounds[0][0]=y,this.radius.bounds[1][0]=m},v.getDistanceLimits=function(y){var m=this.radius.bounds[0];return y?(y[0]=Math.exp(m[0][0]),y[1]=Math.exp(m[1][0]),y):[Math.exp(m[0][0]),Math.exp(m[1][0])]},v.recalcMatrix=function(y){this.center.curve(y),this.up.curve(y),this.right.curve(y),this.radius.curve(y),this.angle.curve(y);for(var m=this.computedUp,_=this.computedRight,d=0,S=0,w=0;w<3;++w)S+=m[w]*_[w],d+=m[w]*m[w];var E=Math.sqrt(d),C=0;for(w=0;w<3;++w)_[w]-=m[w]*S/d,C+=_[w]*_[w],m[w]/=E;var O=Math.sqrt(C);for(w=0;w<3;++w)_[w]/=O;var P=this.computedToward;a(P,m,_),l(P,P);var z=Math.exp(this.computedRadius[0]),j=this.computedAngle[0],I=this.computedAngle[1],N=Math.cos(j),W=Math.sin(j),F=Math.cos(I),U=Math.sin(I),H=this.computedCenter,ne=N*F,$=W*F,K=U,Q=-N*U,Z=-W*U,X=F,te=this.computedEye,ae=this.computedMatrix;for(w=0;w<3;++w){var se=ne*_[w]+$*P[w]+K*m[w];ae[4*w+1]=Q*_[w]+Z*P[w]+X*m[w],ae[4*w+2]=se,ae[4*w+3]=0}var ce=ae[1],fe=ae[5],pe=ae[9],ge=ae[2],me=ae[6],be=ae[10],ke=fe*be-pe*me,ze=pe*ge-ce*be,ve=ce*me-fe*ge,oe=h(ke,ze,ve);for(ke/=oe,ze/=oe,ve/=oe,ae[0]=ke,ae[4]=ze,ae[8]=ve,w=0;w<3;++w)te[w]=H[w]+ae[2+4*w]*z;for(w=0;w<3;++w){C=0;for(var ie=0;ie<3;++ie)C+=ae[w+4*ie]*te[ie];ae[12+w]=-C}ae[15]=1},v.getMatrix=function(y,m){this.recalcMatrix(y);var _=this.computedMatrix;if(m){for(var d=0;d<16;++d)m[d]=_[d];return m}return _};var g=[0,0,0];v.rotate=function(y,m,_,d){if(this.angle.move(y,m,_),d){this.recalcMatrix(y);var S=this.computedMatrix;g[0]=S[2],g[1]=S[6],g[2]=S[10];for(var w=this.computedUp,E=this.computedRight,C=this.computedToward,O=0;O<3;++O)S[4*O]=w[O],S[4*O+1]=E[O],S[4*O+2]=C[O];for(r(S,S,d,g),O=0;O<3;++O)w[O]=S[4*O],E[O]=S[4*O+1];this.up.set(y,w[0],w[1],w[2]),this.right.set(y,E[0],E[1],E[2])}},v.pan=function(y,m,_,d){m=m||0,_=_||0,d=d||0,this.recalcMatrix(y);var S=this.computedMatrix,w=(Math.exp(this.computedRadius[0]),S[1]),E=S[5],C=S[9],O=h(w,E,C);w/=O,E/=O,C/=O;var P=S[0],z=S[4],j=S[8],I=P*w+z*E+j*C,N=h(P-=w*I,z-=E*I,j-=C*I),W=(P/=N)*m+w*_,F=(z/=N)*m+E*_,U=(j/=N)*m+C*_;this.center.move(y,W,F,U);var H=Math.exp(this.computedRadius[0]);H=Math.max(1e-4,H+d),this.radius.set(y,Math.log(H))},v.translate=function(y,m,_,d){this.center.move(y,m||0,_||0,d||0)},v.setMatrix=function(y,m,_,d){var S=1;typeof _=="number"&&(S=0|_),(S<0||S>3)&&(S=1);var w=(S+2)%3;m||(this.recalcMatrix(y),m=this.computedMatrix);var E=m[S],C=m[S+4],O=m[S+8];if(d){var P=Math.abs(E),z=Math.abs(C),j=Math.abs(O),I=Math.max(P,z,j);P===I?(E=E<0?-1:1,C=O=0):j===I?(O=O<0?-1:1,E=C=0):(C=C<0?-1:1,E=O=0)}else{var N=h(E,C,O);E/=N,C/=N,O/=N}var W,F,U=m[w],H=m[w+4],ne=m[w+8],$=U*E+H*C+ne*O,K=h(U-=E*$,H-=C*$,ne-=O*$),Q=C*(ne/=K)-O*(H/=K),Z=O*(U/=K)-E*ne,X=E*H-C*U,te=h(Q,Z,X);if(Q/=te,Z/=te,X/=te,this.center.jump(y,we,Me,Oe),this.radius.idle(y),this.up.jump(y,E,C,O),this.right.jump(y,U,H,ne),S===2){var ae=m[1],se=m[5],ce=m[9],fe=ae*U+se*H+ce*ne,pe=ae*Q+se*Z+ce*X;W=ke<0?-Math.PI/2:Math.PI/2,F=Math.atan2(pe,fe)}else{var ge=m[2],me=m[6],be=m[10],ke=ge*E+me*C+be*O,ze=ge*U+me*H+be*ne,ve=ge*Q+me*Z+be*X;W=Math.asin(c(ke)),F=Math.atan2(ve,ze)}this.angle.jump(y,F,W),this.recalcMatrix(y);var oe=m[2],ie=m[6],he=m[10],Se=this.computedMatrix;n(Se,m);var ye=Se[15],we=Se[12]/ye,Me=Se[13]/ye,Oe=Se[14]/ye,Ie=Math.exp(this.computedRadius[0]);this.center.jump(y,we-oe*Ie,Me-ie*Ie,Oe-he*Ie)},v.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},v.idle=function(y){this.center.idle(y),this.up.idle(y),this.right.idle(y),this.radius.idle(y),this.angle.idle(y)},v.flush=function(y){this.center.flush(y),this.up.flush(y),this.right.flush(y),this.radius.flush(y),this.angle.flush(y)},v.setDistance=function(y,m){m>0&&this.radius.set(y,Math.log(m))},v.lookAt=function(y,m,_,d){this.recalcMatrix(y),m=m||this.computedEye,_=_||this.computedCenter;var S=(d=d||this.computedUp)[0],w=d[1],E=d[2],C=h(S,w,E);if(!(C<1e-6)){S/=C,w/=C,E/=C;var O=m[0]-_[0],P=m[1]-_[1],z=m[2]-_[2],j=h(O,P,z);if(!(j<1e-6)){O/=j,P/=j,z/=j;var I=this.computedRight,N=I[0],W=I[1],F=I[2],U=S*N+w*W+E*F,H=h(N-=U*S,W-=U*w,F-=U*E);if(!(H<.01&&(H=h(N=w*z-E*P,W=E*O-S*z,F=S*P-w*O))<1e-6)){N/=H,W/=H,F/=H,this.up.set(y,S,w,E),this.right.set(y,N,W,F),this.center.set(y,_[0],_[1],_[2]),this.radius.set(y,Math.log(j));var ne=w*F-E*W,$=E*N-S*F,K=S*W-w*N,Q=h(ne,$,K),Z=S*O+w*P+E*z,X=N*O+W*P+F*z,te=(ne/=Q)*O+($/=Q)*P+(K/=Q)*z,ae=Math.asin(c(Z)),se=Math.atan2(te,X),ce=this.angle._state,fe=ce[ce.length-1],pe=ce[ce.length-2];fe%=2*Math.PI;var ge=Math.abs(fe+2*Math.PI-se),me=Math.abs(fe-se),be=Math.abs(fe-2*Math.PI-se);ge<me&&(fe+=2*Math.PI),be<me&&(fe-=2*Math.PI),this.angle.jump(this.angle.lastT(),fe,pe),this.angle.set(y,se,ae)}}}}},5250:function(f){f.exports=function(t,i,n){var r=t*i,a=o*t,l=a-(a-t),u=t-l,h=o*i,c=h-(h-i),x=i-c,p=u*x-(r-l*c-u*c-l*x);return n?(n[0]=p,n[1]=r,n):[p,r]};var o=+(Math.pow(2,27)+1)},9362:function(f){f.exports=function(o,t,i){var n=o+t,r=n-o,a=t-r,l=o-(n-r);return i?(i[0]=l+a,i[1]=n,i):[l+a,n]}},1888:function(f,o,t){var i=t(8828),n=t(1338),r=t(4793).hp;t.g.__TYPEDARRAY_POOL||(t.g.__TYPEDARRAY_POOL={UINT8:n([32,0]),UINT16:n([32,0]),UINT32:n([32,0]),BIGUINT64:n([32,0]),INT8:n([32,0]),INT16:n([32,0]),INT32:n([32,0]),BIGINT64:n([32,0]),FLOAT:n([32,0]),DOUBLE:n([32,0]),DATA:n([32,0]),UINT8C:n([32,0]),BUFFER:n([32,0])});var a=typeof Uint8ClampedArray<"u",l=typeof BigUint64Array<"u",u=typeof BigInt64Array<"u",h=t.g.__TYPEDARRAY_POOL;h.UINT8C||(h.UINT8C=n([32,0])),h.BIGUINT64||(h.BIGUINT64=n([32,0])),h.BIGINT64||(h.BIGINT64=n([32,0])),h.BUFFER||(h.BUFFER=n([32,0]));var c=h.DATA,x=h.BUFFER;function p(I){if(I){var N=I.length||I.byteLength,W=i.log2(N);c[W].push(I)}}function v(I){I=i.nextPow2(I);var N=i.log2(I),W=c[N];return W.length>0?W.pop():new ArrayBuffer(I)}function g(I){return new Uint8Array(v(I),0,I)}function y(I){return new Uint16Array(v(2*I),0,I)}function m(I){return new Uint32Array(v(4*I),0,I)}function _(I){return new Int8Array(v(I),0,I)}function d(I){return new Int16Array(v(2*I),0,I)}function S(I){return new Int32Array(v(4*I),0,I)}function w(I){return new Float32Array(v(4*I),0,I)}function E(I){return new Float64Array(v(8*I),0,I)}function C(I){return a?new Uint8ClampedArray(v(I),0,I):g(I)}function O(I){return l?new BigUint64Array(v(8*I),0,I):null}function P(I){return u?new BigInt64Array(v(8*I),0,I):null}function z(I){return new DataView(v(I),0,I)}function j(I){I=i.nextPow2(I);var N=i.log2(I),W=x[N];return W.length>0?W.pop():new r(I)}o.free=function(I){if(r.isBuffer(I))x[i.log2(I.length)].push(I);else{if(Object.prototype.toString.call(I)!=="[object ArrayBuffer]"&&(I=I.buffer),!I)return;var N=I.length||I.byteLength,W=0|i.log2(N);c[W].push(I)}},o.freeUint8=o.freeUint16=o.freeUint32=o.freeBigUint64=o.freeInt8=o.freeInt16=o.freeInt32=o.freeBigInt64=o.freeFloat32=o.freeFloat=o.freeFloat64=o.freeDouble=o.freeUint8Clamped=o.freeDataView=function(I){p(I.buffer)},o.freeArrayBuffer=p,o.freeBuffer=function(I){x[i.log2(I.length)].push(I)},o.malloc=function(I,N){if(N===void 0||N==="arraybuffer")return v(I);switch(N){case"uint8":return g(I);case"uint16":return y(I);case"uint32":return m(I);case"int8":return _(I);case"int16":return d(I);case"int32":return S(I);case"float":case"float32":return w(I);case"double":case"float64":return E(I);case"uint8_clamped":return C(I);case"bigint64":return P(I);case"biguint64":return O(I);case"buffer":return j(I);case"data":case"dataview":return z(I);default:return null}return null},o.mallocArrayBuffer=v,o.mallocUint8=g,o.mallocUint16=y,o.mallocUint32=m,o.mallocInt8=_,o.mallocInt16=d,o.mallocInt32=S,o.mallocFloat32=o.mallocFloat=w,o.mallocFloat64=o.mallocDouble=E,o.mallocUint8Clamped=C,o.mallocBigUint64=O,o.mallocBigInt64=P,o.mallocDataView=z,o.mallocBuffer=j,o.clearCache=function(){for(var I=0;I<32;++I)h.UINT8[I].length=0,h.UINT16[I].length=0,h.UINT32[I].length=0,h.INT8[I].length=0,h.INT16[I].length=0,h.INT32[I].length=0,h.FLOAT[I].length=0,h.DOUBLE[I].length=0,h.BIGUINT64[I].length=0,h.BIGINT64[I].length=0,h.UINT8C[I].length=0,c[I].length=0,x[I].length=0}},1755:function(f){function o(i){this.roots=new Array(i),this.ranks=new Array(i);for(var n=0;n<i;++n)this.roots[n]=n,this.ranks[n]=0}f.exports=o;var t=o.prototype;Object.defineProperty(t,"length",{get:function(){return this.roots.length}}),t.makeSet=function(){var i=this.roots.length;return this.roots.push(i),this.ranks.push(0),i},t.find=function(i){for(var n=i,r=this.roots;r[i]!==i;)i=r[i];for(;r[n]!==i;){var a=r[n];r[n]=i,n=a}return i},t.link=function(i,n){var r=this.find(i),a=this.find(n);if(r!==a){var l=this.ranks,u=this.roots,h=l[r],c=l[a];h<c?u[r]=a:c<h?u[a]=r:(u[a]=r,++l[r])}}},1682:function(f){f.exports=function(o,t,i){return o.length===0?o:t?(i||o.sort(t),function(n,r){for(var a=1,l=n.length,u=n[0],h=n[0],c=1;c<l;++c)if(h=u,r(u=n[c],h)){if(c===a){a++;continue}n[a++]=u}return n.length=a,n}(o,t)):(i||o.sort(),function(n){for(var r=1,a=n.length,l=n[0],u=n[0],h=1;h<a;++h,u=l)if(u=l,(l=n[h])!==u){if(h===r){r++;continue}n[r++]=l}return n.length=r,n}(o))}},4359:function(f,o,t){f.exports=function(a,l){return typeof l=="object"&&l!==null||(l={}),i(a,l.canvas||n,l.context||r,l)};var i=t(7718),n=null,r=null;typeof document<"u"&&((n=document.createElement("canvas")).width=8192,n.height=1024,r=n.getContext("2d"))},7718:function(f,o,t){f.exports=function(O,P,z,j){var I=64,N=1.25,W={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return j&&(j.size&&j.size>0&&(I=j.size),j.lineSpacing&&j.lineSpacing>0&&(N=j.lineSpacing),j.styletags&&j.styletags.breaklines&&(W.breaklines=!!j.styletags.breaklines),j.styletags&&j.styletags.bolds&&(W.bolds=!!j.styletags.bolds),j.styletags&&j.styletags.italics&&(W.italics=!!j.styletags.italics),j.styletags&&j.styletags.subscripts&&(W.subscripts=!!j.styletags.subscripts),j.styletags&&j.styletags.superscripts&&(W.superscripts=!!j.styletags.superscripts)),z.font=[j.fontStyle,j.fontVariant,j.fontWeight,I+"px",j.font].filter(function(F){return F}).join(" "),z.textAlign="start",z.textBaseline="alphabetic",z.direction="ltr",C(function(F,U,H,ne,$,K){H=H.replace(/\n/g,""),H=K.breaklines===!0?H.replace(/\<br\>/g,`
`):H.replace(/\<br\>/g," ");var Q="",Z=[];for(se=0;se<H.length;++se)Z[se]=Q;K.bolds===!0&&(Z=S(h,c,H,Z)),K.italics===!0&&(Z=S(x,p,H,Z)),K.superscripts===!0&&(Z=S(v,y,H,Z)),K.subscripts===!0&&(Z=S(m,d,H,Z));var X=[],te="";for(se=0;se<H.length;++se)Z[se]!==null&&(te+=H[se],X.push(Z[se]));var ae,se,ce,fe,pe,ge=te.split(`
`),me=ge.length,be=Math.round($*ne),ke=ne,ze=2*ne,ve=0,oe=me*be+ze;F.height<oe&&(F.height=oe),U.fillStyle="#000",U.fillRect(0,0,F.width,F.height),U.fillStyle="#fff";var ie=0,he="";function Se(){if(he!==""){var Ae=U.measureText(he).width;U.fillText(he,ke+ce,ze+fe),ce+=Ae}}function ye(){return Math.round(pe)+"px "}function we(Ae,Pe){var Ee=""+U.font;if(K.subscripts===!0){var Fe=Ae.indexOf(_),Ve=Pe.indexOf(_),Ye=Fe>-1?parseInt(Ae[1+Fe]):0,tt=Ve>-1?parseInt(Pe[1+Ve]):0;Ye!==tt&&(Ee=Ee.replace(ye(),"?px "),pe*=Math.pow(.75,tt-Ye),Ee=Ee.replace("?px ",ye())),fe+=.25*be*(tt-Ye)}if(K.superscripts===!0){var nt=Ae.indexOf(g),ht=Pe.indexOf(g),vt=nt>-1?parseInt(Ae[1+nt]):0,pt=ht>-1?parseInt(Pe[1+ht]):0;vt!==pt&&(Ee=Ee.replace(ye(),"?px "),pe*=Math.pow(.75,pt-vt),Ee=Ee.replace("?px ",ye())),fe-=.25*be*(pt-vt)}if(K.bolds===!0){var Qe=Ae.indexOf(c)>-1,Ke=Pe.indexOf(c)>-1;!Qe&&Ke&&(Ee=Mt?Ee.replace("italic ","italic bold "):"bold "+Ee),Qe&&!Ke&&(Ee=Ee.replace("bold ",""))}if(K.italics===!0){var Mt=Ae.indexOf(p)>-1,Ot=Pe.indexOf(p)>-1;!Mt&&Ot&&(Ee="italic "+Ee),Mt&&!Ot&&(Ee=Ee.replace("italic ",""))}U.font=Ee}for(ae=0;ae<me;++ae){var Me=ge[ae]+`
`;for(ce=0,fe=ae*be,pe=ne,he="",se=0;se<Me.length;++se){var Oe=se+ie<X.length?X[se+ie]:X[X.length-1];Q===Oe?he+=Me[se]:(Se(),he=Me[se],Oe!==void 0&&(we(Q,Oe),Q=Oe))}Se(),ie+=Me.length;var Ie=0|Math.round(ce+2*ke);ve<Ie&&(ve=Ie)}var de=ve,_e=ze+be*me;return n(U.getImageData(0,0,de,_e).data,[_e,de,4]).pick(-1,-1,0).transpose(1,0)}(P,z,O,I,N,W),j,I)},f.exports.processPixels=C;var i=t(3711),n=t(9618),r=t(5878),a=t(332),l=t(2538),u=t(2095),h="b",c="b|",x="i",p="i|",v="sup",g="+",y="+1",m="sub",_="-",d="-1";function S(O,P,z,j){for(var I="<"+O+">",N="</"+O+">",W=I.length,F=N.length,U=P[0]===g||P[0]===_,H=0,ne=-F;H>-1&&(H=z.indexOf(I,H))!==-1&&(ne=z.indexOf(N,H+W))!==-1&&!(ne<=H);){for(var $=H;$<ne+F;++$)if($<H+W||$>=ne)j[$]=null,z=z.substr(0,$)+" "+z.substr($+1);else if(j[$]!==null){var K=j[$].indexOf(P[0]);K===-1?j[$]+=P:U&&(j[$]=j[$].substr(0,K+1)+(1+parseInt(j[$][K+1]))+j[$].substr(K+2))}var Q=H+W,Z=z.substr(Q,ne-Q).indexOf(I);H=Z!==-1?Z:ne+F}return j}function w(O,P){var z=i(O,128);return P?r(z.cells,z.positions,.25):{edges:z.cells,positions:z.positions}}function E(O,P,z,j){var I=w(O,j),N=function(ae,se,ce){for(var fe=se.textAlign||"start",pe=se.textBaseline||"alphabetic",ge=[1<<30,1<<30],me=[0,0],be=ae.length,ke=0;ke<be;++ke)for(var ze=ae[ke],ve=0;ve<2;++ve)ge[ve]=0|Math.min(ge[ve],ze[ve]),me[ve]=0|Math.max(me[ve],ze[ve]);var oe=0;switch(fe){case"center":oe=-.5*(ge[0]+me[0]);break;case"right":case"end":oe=-me[0];break;case"left":case"start":oe=-ge[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+fe+"'")}var ie=0;switch(pe){case"hanging":case"top":ie=-ge[1];break;case"middle":ie=-.5*(ge[1]+me[1]);break;case"alphabetic":case"ideographic":ie=-3*ce;break;case"bottom":ie=-me[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+pe+"'")}var he=1/ce;return"lineHeight"in se?he*=+se.lineHeight:"width"in se?he=se.width/(me[0]-ge[0]):"height"in se&&(he=se.height/(me[1]-ge[1])),ae.map(function(Se){return[he*(Se[0]+oe),he*(Se[1]+ie)]})}(I.positions,P,z),W=I.edges,F=P.orientation==="ccw";if(a(N,W),P.polygons||P.polygon||P.polyline){for(var U=u(W,N),H=new Array(U.length),ne=0;ne<U.length;++ne){for(var $=U[ne],K=new Array($.length),Q=0;Q<$.length;++Q){for(var Z=$[Q],X=new Array(Z.length),te=0;te<Z.length;++te)X[te]=N[Z[te]].slice();F&&X.reverse(),K[Q]=X}H[ne]=K}return H}return P.triangles||P.triangulate||P.triangle?{cells:l(N,W,{delaunay:!1,exterior:!1,interior:!0}),positions:N}:{edges:W,positions:N}}function C(O,P,z){try{return E(O,P,z,!0)}catch{}try{return E(O,P,z,!1)}catch{}return P.polygons||P.polyline||P.polygon?[]:P.triangles||P.triangulate||P.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},1538:function(f){(function(){if(typeof ses>"u"||!ses.ok||ses.ok()){typeof ses<"u"&&(ses.weakMapPermitHostObjects=m);var o=!1;if(typeof WeakMap=="function"){var t=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var i=new t,n=Object.freeze({});if(i.set(n,1),i.get(n)===1)return void(f.exports=WeakMap);o=!0}}var r=Object.getOwnPropertyNames,a=Object.defineProperty,l=Object.isExtensible,u="weakmap:",h=u+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var c=new ArrayBuffer(25),x=new Uint8Array(c);crypto.getRandomValues(x),h=u+"rand:"+Array.prototype.map.call(x,function(E){return(E%36).toString(36)}).join("")+"___"}if(a(Object,"getOwnPropertyNames",{value:function(E){return r(E).filter(_)}}),"getPropertyNames"in Object){var p=Object.getPropertyNames;a(Object,"getPropertyNames",{value:function(E){return p(E).filter(_)}})}(function(){var E=Object.freeze;a(Object,"freeze",{value:function(P){return d(P),E(P)}});var C=Object.seal;a(Object,"seal",{value:function(P){return d(P),C(P)}});var O=Object.preventExtensions;a(Object,"preventExtensions",{value:function(P){return d(P),O(P)}})})();var v=!1,g=0,y=function(){this instanceof y||w();var E=[],C=[],O=g++;return Object.create(y.prototype,{get___:{value:S(function(P,z){var j,I=d(P);return I?O in I?I[O]:z:(j=E.indexOf(P))>=0?C[j]:z})},has___:{value:S(function(P){var z=d(P);return z?O in z:E.indexOf(P)>=0})},set___:{value:S(function(P,z){var j,I=d(P);return I?I[O]=z:(j=E.indexOf(P))>=0?C[j]=z:(j=E.length,C[j]=z,E[j]=P),this})},delete___:{value:S(function(P){var z,j,I=d(P);return I?O in I&&delete I[O]:!((z=E.indexOf(P))<0||(j=E.length-1,E[z]=void 0,C[z]=C[j],E[z]=E[j],E.length=j,C.length=j,0))})}})};y.prototype=Object.create(Object.prototype,{get:{value:function(E,C){return this.get___(E,C)},writable:!0,configurable:!0},has:{value:function(E){return this.has___(E)},writable:!0,configurable:!0},set:{value:function(E,C){return this.set___(E,C)},writable:!0,configurable:!0},delete:{value:function(E){return this.delete___(E)},writable:!0,configurable:!0}}),typeof t=="function"?function(){function E(){this instanceof y||w();var C,O=new t,P=void 0,z=!1;return C=o?function(j,I){return O.set(j,I),O.has(j)||(P||(P=new y),P.set(j,I)),this}:function(j,I){if(z)try{O.set(j,I)}catch{P||(P=new y),P.set___(j,I)}else O.set(j,I);return this},Object.create(y.prototype,{get___:{value:S(function(j,I){return P?O.has(j)?O.get(j):P.get___(j,I):O.get(j,I)})},has___:{value:S(function(j){return O.has(j)||!!P&&P.has___(j)})},set___:{value:S(C)},delete___:{value:S(function(j){var I=!!O.delete(j);return P&&P.delete___(j)||I})},permitHostObjects___:{value:S(function(j){if(j!==m)throw new Error("bogus call to permitHostObjects___");z=!0})}})}o&&typeof Proxy<"u"&&(Proxy=void 0),E.prototype=y.prototype,f.exports=E,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),f.exports=y)}function m(E){E.permitHostObjects___&&E.permitHostObjects___(m)}function _(E){return!(E.substr(0,8)==u&&E.substr(E.length-3)==="___")}function d(E){if(E!==Object(E))throw new TypeError("Not an object: "+E);var C=E[h];if(C&&C.key===E)return C;if(l(E)){C={key:E};try{return a(E,h,{value:C,writable:!1,enumerable:!1,configurable:!1}),C}catch{return}}}function S(E){return E.prototype=null,Object.freeze(E)}function w(){v||typeof console>"u"||(v=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}})()},236:function(f,o,t){var i=t(8284);f.exports=function(){var n={};return function(r){if((typeof r!="object"||r===null)&&typeof r!="function")throw new Error("Weakmap-shim: Key must be object");var a=r.valueOf(n);return a&&a.identity===n?a:i(r,n)}}},8284:function(f){f.exports=function(o,t){var i={identity:t},n=o.valueOf;return Object.defineProperty(o,"valueOf",{value:function(r){return r!==t?n.apply(this,arguments):i},writable:!0}),i}},606:function(f,o,t){var i=t(236);f.exports=function(){var n=i();return{get:function(r,a){var l=n(r);return l.hasOwnProperty("value")?l.value:a},set:function(r,a){return n(r).value=a,this},has:function(r){return"value"in n(r)},delete:function(r){return delete n(r).value}}}},3349:function(f){f.exports=function(o){var t={};return function(i,n,r){var a=i.dtype,l=i.order,u=[a,l.join()].join(),h=t[u];return h||(t[u]=h=o([a,l])),h(i.shape.slice(0),i.data,i.stride,0|i.offset,n,r)}}((function(){return function(o,t,i,n,r,a){var l=o[0],u=i[0],h=[0],c=u;n|=0;var x=0,p=u;for(x=0;x<l;++x){var v=t[n]-a,g=t[n+c]-a;v>=0!=g>=0&&r.push(h[0]+.5+.5*(v+g)/(v-g)),n+=p,++h[0]}}}).bind(void 0,{funcName:"zeroCrossings"}))},781:function(f,o,t){f.exports=function(n,r){var a=[];return r=+r||0,i(n.hi(n.shape[0]-1),a,r),a};var i=t(3349)},7790:function(){}},s={};function T(f){var o=s[f];if(o!==void 0)return o.exports;var t=s[f]={id:f,loaded:!1,exports:{}};return k[f].call(t.exports,t,t.exports,T),t.loaded=!0,t.exports}T.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),T.nmd=function(f){return f.paths=[],f.children||(f.children=[]),f};var b=T(1964);ee.exports=b})()},33576:function(ee,R,e){function M(oe,ie){for(var he=0;he<ie.length;he++){var Se=ie[he];Se.enumerable=Se.enumerable||!1,Se.configurable=!0,"value"in Se&&(Se.writable=!0),Object.defineProperty(oe,(ye=function(we,Me){if(b(we)!=="object"||we===null)return we;var Oe=we[Symbol.toPrimitive];if(Oe!==void 0){var Ie=Oe.call(we,"string");if(b(Ie)!=="object")return Ie;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(we)}(Se.key),b(ye)==="symbol"?ye:String(ye)),Se)}var ye}function k(oe){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ie){return ie.__proto__||Object.getPrototypeOf(ie)},k(oe)}function s(oe){if(oe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return oe}function T(oe,ie){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(he,Se){return he.__proto__=Se,he},T(oe,ie)}function b(oe){return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ie){return typeof ie}:function(ie){return ie&&typeof Symbol=="function"&&ie.constructor===Symbol&&ie!==Symbol.prototype?"symbol":typeof ie},b(oe)}var f=e(59968),o=e(35984),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;R.Buffer=r,R.SlowBuffer=function(oe){return+oe!=oe&&(oe=0),r.alloc(+oe)},R.INSPECT_MAX_BYTES=50;var i=2147483647;function n(oe){if(oe>i)throw new RangeError('The value "'+oe+'" is invalid for option "size"');var ie=new Uint8Array(oe);return Object.setPrototypeOf(ie,r.prototype),ie}function r(oe,ie,he){if(typeof oe=="number"){if(typeof ie=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(oe)}return a(oe,ie,he)}function a(oe,ie,he){if(typeof oe=="string")return function(we,Me){if(typeof Me=="string"&&Me!==""||(Me="utf8"),!r.isEncoding(Me))throw new TypeError("Unknown encoding: "+Me);var Oe=0|p(we,Me),Ie=n(Oe),de=Ie.write(we,Me);return de!==Oe&&(Ie=Ie.slice(0,de)),Ie}(oe,ie);if(ArrayBuffer.isView(oe))return function(we){if(me(we,Uint8Array)){var Me=new Uint8Array(we);return c(Me.buffer,Me.byteOffset,Me.byteLength)}return h(we)}(oe);if(oe==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+b(oe));if(me(oe,ArrayBuffer)||oe&&me(oe.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(me(oe,SharedArrayBuffer)||oe&&me(oe.buffer,SharedArrayBuffer)))return c(oe,ie,he);if(typeof oe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Se=oe.valueOf&&oe.valueOf();if(Se!=null&&Se!==oe)return r.from(Se,ie,he);var ye=function(we){if(r.isBuffer(we)){var Me=0|x(we.length),Oe=n(Me);return Oe.length===0||we.copy(Oe,0,0,Me),Oe}return we.length!==void 0?typeof we.length!="number"||be(we.length)?n(0):h(we):we.type==="Buffer"&&Array.isArray(we.data)?h(we.data):void 0}(oe);if(ye)return ye;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof oe[Symbol.toPrimitive]=="function")return r.from(oe[Symbol.toPrimitive]("string"),ie,he);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+b(oe))}function l(oe){if(typeof oe!="number")throw new TypeError('"size" argument must be of type number');if(oe<0)throw new RangeError('The value "'+oe+'" is invalid for option "size"')}function u(oe){return l(oe),n(oe<0?0:0|x(oe))}function h(oe){for(var ie=oe.length<0?0:0|x(oe.length),he=n(ie),Se=0;Se<ie;Se+=1)he[Se]=255&oe[Se];return he}function c(oe,ie,he){if(ie<0||oe.byteLength<ie)throw new RangeError('"offset" is outside of buffer bounds');if(oe.byteLength<ie+(he||0))throw new RangeError('"length" is outside of buffer bounds');var Se;return Se=ie===void 0&&he===void 0?new Uint8Array(oe):he===void 0?new Uint8Array(oe,ie):new Uint8Array(oe,ie,he),Object.setPrototypeOf(Se,r.prototype),Se}function x(oe){if(oe>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|oe}function p(oe,ie){if(r.isBuffer(oe))return oe.length;if(ArrayBuffer.isView(oe)||me(oe,ArrayBuffer))return oe.byteLength;if(typeof oe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+b(oe));var he=oe.length,Se=arguments.length>2&&arguments[2]===!0;if(!Se&&he===0)return 0;for(var ye=!1;;)switch(ie){case"ascii":case"latin1":case"binary":return he;case"utf8":case"utf-8":return fe(oe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*he;case"hex":return he>>>1;case"base64":return pe(oe).length;default:if(ye)return Se?-1:fe(oe).length;ie=(""+ie).toLowerCase(),ye=!0}}function v(oe,ie,he){var Se=!1;if((ie===void 0||ie<0)&&(ie=0),ie>this.length||((he===void 0||he>this.length)&&(he=this.length),he<=0)||(he>>>=0)<=(ie>>>=0))return"";for(oe||(oe="utf8");;)switch(oe){case"hex":return I(this,ie,he);case"utf8":case"utf-8":return O(this,ie,he);case"ascii":return z(this,ie,he);case"latin1":case"binary":return j(this,ie,he);case"base64":return C(this,ie,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,ie,he);default:if(Se)throw new TypeError("Unknown encoding: "+oe);oe=(oe+"").toLowerCase(),Se=!0}}function g(oe,ie,he){var Se=oe[ie];oe[ie]=oe[he],oe[he]=Se}function y(oe,ie,he,Se,ye){if(oe.length===0)return-1;if(typeof he=="string"?(Se=he,he=0):he>2147483647?he=2147483647:he<-2147483648&&(he=-2147483648),be(he=+he)&&(he=ye?0:oe.length-1),he<0&&(he=oe.length+he),he>=oe.length){if(ye)return-1;he=oe.length-1}else if(he<0){if(!ye)return-1;he=0}if(typeof ie=="string"&&(ie=r.from(ie,Se)),r.isBuffer(ie))return ie.length===0?-1:m(oe,ie,he,Se,ye);if(typeof ie=="number")return ie&=255,typeof Uint8Array.prototype.indexOf=="function"?ye?Uint8Array.prototype.indexOf.call(oe,ie,he):Uint8Array.prototype.lastIndexOf.call(oe,ie,he):m(oe,[ie],he,Se,ye);throw new TypeError("val must be string, number or Buffer")}function m(oe,ie,he,Se,ye){var we,Me=1,Oe=oe.length,Ie=ie.length;if(Se!==void 0&&((Se=String(Se).toLowerCase())==="ucs2"||Se==="ucs-2"||Se==="utf16le"||Se==="utf-16le")){if(oe.length<2||ie.length<2)return-1;Me=2,Oe/=2,Ie/=2,he/=2}function de(Ee,Fe){return Me===1?Ee[Fe]:Ee.readUInt16BE(Fe*Me)}if(ye){var _e=-1;for(we=he;we<Oe;we++)if(de(oe,we)===de(ie,_e===-1?0:we-_e)){if(_e===-1&&(_e=we),we-_e+1===Ie)return _e*Me}else _e!==-1&&(we-=we-_e),_e=-1}else for(he+Ie>Oe&&(he=Oe-Ie),we=he;we>=0;we--){for(var Ae=!0,Pe=0;Pe<Ie;Pe++)if(de(oe,we+Pe)!==de(ie,Pe)){Ae=!1;break}if(Ae)return we}return-1}function _(oe,ie,he,Se){he=Number(he)||0;var ye=oe.length-he;Se?(Se=Number(Se))>ye&&(Se=ye):Se=ye;var we,Me=ie.length;for(Se>Me/2&&(Se=Me/2),we=0;we<Se;++we){var Oe=parseInt(ie.substr(2*we,2),16);if(be(Oe))return we;oe[he+we]=Oe}return we}function d(oe,ie,he,Se){return ge(fe(ie,oe.length-he),oe,he,Se)}function S(oe,ie,he,Se){return ge(function(ye){for(var we=[],Me=0;Me<ye.length;++Me)we.push(255&ye.charCodeAt(Me));return we}(ie),oe,he,Se)}function w(oe,ie,he,Se){return ge(pe(ie),oe,he,Se)}function E(oe,ie,he,Se){return ge(function(ye,we){for(var Me,Oe,Ie,de=[],_e=0;_e<ye.length&&!((we-=2)<0);++_e)Oe=(Me=ye.charCodeAt(_e))>>8,Ie=Me%256,de.push(Ie),de.push(Oe);return de}(ie,oe.length-he),oe,he,Se)}function C(oe,ie,he){return ie===0&&he===oe.length?f.fromByteArray(oe):f.fromByteArray(oe.slice(ie,he))}function O(oe,ie,he){he=Math.min(oe.length,he);for(var Se=[],ye=ie;ye<he;){var we=oe[ye],Me=null,Oe=we>239?4:we>223?3:we>191?2:1;if(ye+Oe<=he){var Ie=void 0,de=void 0,_e=void 0,Ae=void 0;switch(Oe){case 1:we<128&&(Me=we);break;case 2:(192&(Ie=oe[ye+1]))==128&&(Ae=(31&we)<<6|63&Ie)>127&&(Me=Ae);break;case 3:Ie=oe[ye+1],de=oe[ye+2],(192&Ie)==128&&(192&de)==128&&(Ae=(15&we)<<12|(63&Ie)<<6|63&de)>2047&&(Ae<55296||Ae>57343)&&(Me=Ae);break;case 4:Ie=oe[ye+1],de=oe[ye+2],_e=oe[ye+3],(192&Ie)==128&&(192&de)==128&&(192&_e)==128&&(Ae=(15&we)<<18|(63&Ie)<<12|(63&de)<<6|63&_e)>65535&&Ae<1114112&&(Me=Ae)}}Me===null?(Me=65533,Oe=1):Me>65535&&(Me-=65536,Se.push(Me>>>10&1023|55296),Me=56320|1023&Me),Se.push(Me),ye+=Oe}return function(Pe){var Ee=Pe.length;if(Ee<=P)return String.fromCharCode.apply(String,Pe);for(var Fe="",Ve=0;Ve<Ee;)Fe+=String.fromCharCode.apply(String,Pe.slice(Ve,Ve+=P));return Fe}(Se)}R.kMaxLength=i,r.TYPED_ARRAY_SUPPORT=function(){try{var oe=new Uint8Array(1),ie={foo:function(){return 42}};return Object.setPrototypeOf(ie,Uint8Array.prototype),Object.setPrototypeOf(oe,ie),oe.foo()===42}catch{return!1}}(),r.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),r.poolSize=8192,r.from=function(oe,ie,he){return a(oe,ie,he)},Object.setPrototypeOf(r.prototype,Uint8Array.prototype),Object.setPrototypeOf(r,Uint8Array),r.alloc=function(oe,ie,he){return function(Se,ye,we){return l(Se),Se<=0?n(Se):ye!==void 0?typeof we=="string"?n(Se).fill(ye,we):n(Se).fill(ye):n(Se)}(oe,ie,he)},r.allocUnsafe=function(oe){return u(oe)},r.allocUnsafeSlow=function(oe){return u(oe)},r.isBuffer=function(oe){return oe!=null&&oe._isBuffer===!0&&oe!==r.prototype},r.compare=function(oe,ie){if(me(oe,Uint8Array)&&(oe=r.from(oe,oe.offset,oe.byteLength)),me(ie,Uint8Array)&&(ie=r.from(ie,ie.offset,ie.byteLength)),!r.isBuffer(oe)||!r.isBuffer(ie))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(oe===ie)return 0;for(var he=oe.length,Se=ie.length,ye=0,we=Math.min(he,Se);ye<we;++ye)if(oe[ye]!==ie[ye]){he=oe[ye],Se=ie[ye];break}return he<Se?-1:Se<he?1:0},r.isEncoding=function(oe){switch(String(oe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(oe,ie){if(!Array.isArray(oe))throw new TypeError('"list" argument must be an Array of Buffers');if(oe.length===0)return r.alloc(0);var he;if(ie===void 0)for(ie=0,he=0;he<oe.length;++he)ie+=oe[he].length;var Se=r.allocUnsafe(ie),ye=0;for(he=0;he<oe.length;++he){var we=oe[he];if(me(we,Uint8Array))ye+we.length>Se.length?(r.isBuffer(we)||(we=r.from(we)),we.copy(Se,ye)):Uint8Array.prototype.set.call(Se,we,ye);else{if(!r.isBuffer(we))throw new TypeError('"list" argument must be an Array of Buffers');we.copy(Se,ye)}ye+=we.length}return Se},r.byteLength=p,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var oe=this.length;if(oe%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ie=0;ie<oe;ie+=2)g(this,ie,ie+1);return this},r.prototype.swap32=function(){var oe=this.length;if(oe%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ie=0;ie<oe;ie+=4)g(this,ie,ie+3),g(this,ie+1,ie+2);return this},r.prototype.swap64=function(){var oe=this.length;if(oe%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ie=0;ie<oe;ie+=8)g(this,ie,ie+7),g(this,ie+1,ie+6),g(this,ie+2,ie+5),g(this,ie+3,ie+4);return this},r.prototype.toString=function(){var oe=this.length;return oe===0?"":arguments.length===0?O(this,0,oe):v.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(oe){if(!r.isBuffer(oe))throw new TypeError("Argument must be a Buffer");return this===oe||r.compare(this,oe)===0},r.prototype.inspect=function(){var oe="",ie=R.INSPECT_MAX_BYTES;return oe=this.toString("hex",0,ie).replace(/(.{2})/g,"$1 ").trim(),this.length>ie&&(oe+=" ... "),"<Buffer "+oe+">"},t&&(r.prototype[t]=r.prototype.inspect),r.prototype.compare=function(oe,ie,he,Se,ye){if(me(oe,Uint8Array)&&(oe=r.from(oe,oe.offset,oe.byteLength)),!r.isBuffer(oe))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+b(oe));if(ie===void 0&&(ie=0),he===void 0&&(he=oe?oe.length:0),Se===void 0&&(Se=0),ye===void 0&&(ye=this.length),ie<0||he>oe.length||Se<0||ye>this.length)throw new RangeError("out of range index");if(Se>=ye&&ie>=he)return 0;if(Se>=ye)return-1;if(ie>=he)return 1;if(this===oe)return 0;for(var we=(ye>>>=0)-(Se>>>=0),Me=(he>>>=0)-(ie>>>=0),Oe=Math.min(we,Me),Ie=this.slice(Se,ye),de=oe.slice(ie,he),_e=0;_e<Oe;++_e)if(Ie[_e]!==de[_e]){we=Ie[_e],Me=de[_e];break}return we<Me?-1:Me<we?1:0},r.prototype.includes=function(oe,ie,he){return this.indexOf(oe,ie,he)!==-1},r.prototype.indexOf=function(oe,ie,he){return y(this,oe,ie,he,!0)},r.prototype.lastIndexOf=function(oe,ie,he){return y(this,oe,ie,he,!1)},r.prototype.write=function(oe,ie,he,Se){if(ie===void 0)Se="utf8",he=this.length,ie=0;else if(he===void 0&&typeof ie=="string")Se=ie,he=this.length,ie=0;else{if(!isFinite(ie))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");ie>>>=0,isFinite(he)?(he>>>=0,Se===void 0&&(Se="utf8")):(Se=he,he=void 0)}var ye=this.length-ie;if((he===void 0||he>ye)&&(he=ye),oe.length>0&&(he<0||ie<0)||ie>this.length)throw new RangeError("Attempt to write outside buffer bounds");Se||(Se="utf8");for(var we=!1;;)switch(Se){case"hex":return _(this,oe,ie,he);case"utf8":case"utf-8":return d(this,oe,ie,he);case"ascii":case"latin1":case"binary":return S(this,oe,ie,he);case"base64":return w(this,oe,ie,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,oe,ie,he);default:if(we)throw new TypeError("Unknown encoding: "+Se);Se=(""+Se).toLowerCase(),we=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function z(oe,ie,he){var Se="";he=Math.min(oe.length,he);for(var ye=ie;ye<he;++ye)Se+=String.fromCharCode(127&oe[ye]);return Se}function j(oe,ie,he){var Se="";he=Math.min(oe.length,he);for(var ye=ie;ye<he;++ye)Se+=String.fromCharCode(oe[ye]);return Se}function I(oe,ie,he){var Se=oe.length;(!ie||ie<0)&&(ie=0),(!he||he<0||he>Se)&&(he=Se);for(var ye="",we=ie;we<he;++we)ye+=ke[oe[we]];return ye}function N(oe,ie,he){for(var Se=oe.slice(ie,he),ye="",we=0;we<Se.length-1;we+=2)ye+=String.fromCharCode(Se[we]+256*Se[we+1]);return ye}function W(oe,ie,he){if(oe%1!=0||oe<0)throw new RangeError("offset is not uint");if(oe+ie>he)throw new RangeError("Trying to access beyond buffer length")}function F(oe,ie,he,Se,ye,we){if(!r.isBuffer(oe))throw new TypeError('"buffer" argument must be a Buffer instance');if(ie>ye||ie<we)throw new RangeError('"value" argument is out of bounds');if(he+Se>oe.length)throw new RangeError("Index out of range")}function U(oe,ie,he,Se,ye){te(ie,Se,ye,oe,he,7);var we=Number(ie&BigInt(4294967295));oe[he++]=we,we>>=8,oe[he++]=we,we>>=8,oe[he++]=we,we>>=8,oe[he++]=we;var Me=Number(ie>>BigInt(32)&BigInt(4294967295));return oe[he++]=Me,Me>>=8,oe[he++]=Me,Me>>=8,oe[he++]=Me,Me>>=8,oe[he++]=Me,he}function H(oe,ie,he,Se,ye){te(ie,Se,ye,oe,he,7);var we=Number(ie&BigInt(4294967295));oe[he+7]=we,we>>=8,oe[he+6]=we,we>>=8,oe[he+5]=we,we>>=8,oe[he+4]=we;var Me=Number(ie>>BigInt(32)&BigInt(4294967295));return oe[he+3]=Me,Me>>=8,oe[he+2]=Me,Me>>=8,oe[he+1]=Me,Me>>=8,oe[he]=Me,he+8}function ne(oe,ie,he,Se,ye,we){if(he+Se>oe.length)throw new RangeError("Index out of range");if(he<0)throw new RangeError("Index out of range")}function $(oe,ie,he,Se,ye){return ie=+ie,he>>>=0,ye||ne(oe,0,he,4),o.write(oe,ie,he,Se,23,4),he+4}function K(oe,ie,he,Se,ye){return ie=+ie,he>>>=0,ye||ne(oe,0,he,8),o.write(oe,ie,he,Se,52,8),he+8}r.prototype.slice=function(oe,ie){var he=this.length;(oe=~~oe)<0?(oe+=he)<0&&(oe=0):oe>he&&(oe=he),(ie=ie===void 0?he:~~ie)<0?(ie+=he)<0&&(ie=0):ie>he&&(ie=he),ie<oe&&(ie=oe);var Se=this.subarray(oe,ie);return Object.setPrototypeOf(Se,r.prototype),Se},r.prototype.readUintLE=r.prototype.readUIntLE=function(oe,ie,he){oe>>>=0,ie>>>=0,he||W(oe,ie,this.length);for(var Se=this[oe],ye=1,we=0;++we<ie&&(ye*=256);)Se+=this[oe+we]*ye;return Se},r.prototype.readUintBE=r.prototype.readUIntBE=function(oe,ie,he){oe>>>=0,ie>>>=0,he||W(oe,ie,this.length);for(var Se=this[oe+--ie],ye=1;ie>0&&(ye*=256);)Se+=this[oe+--ie]*ye;return Se},r.prototype.readUint8=r.prototype.readUInt8=function(oe,ie){return oe>>>=0,ie||W(oe,1,this.length),this[oe]},r.prototype.readUint16LE=r.prototype.readUInt16LE=function(oe,ie){return oe>>>=0,ie||W(oe,2,this.length),this[oe]|this[oe+1]<<8},r.prototype.readUint16BE=r.prototype.readUInt16BE=function(oe,ie){return oe>>>=0,ie||W(oe,2,this.length),this[oe]<<8|this[oe+1]},r.prototype.readUint32LE=r.prototype.readUInt32LE=function(oe,ie){return oe>>>=0,ie||W(oe,4,this.length),(this[oe]|this[oe+1]<<8|this[oe+2]<<16)+16777216*this[oe+3]},r.prototype.readUint32BE=r.prototype.readUInt32BE=function(oe,ie){return oe>>>=0,ie||W(oe,4,this.length),16777216*this[oe]+(this[oe+1]<<16|this[oe+2]<<8|this[oe+3])},r.prototype.readBigUInt64LE=ze(function(oe){ae(oe>>>=0,"offset");var ie=this[oe],he=this[oe+7];ie!==void 0&&he!==void 0||se(oe,this.length-8);var Se=ie+this[++oe]*Math.pow(2,8)+this[++oe]*Math.pow(2,16)+this[++oe]*Math.pow(2,24),ye=this[++oe]+this[++oe]*Math.pow(2,8)+this[++oe]*Math.pow(2,16)+he*Math.pow(2,24);return BigInt(Se)+(BigInt(ye)<<BigInt(32))}),r.prototype.readBigUInt64BE=ze(function(oe){ae(oe>>>=0,"offset");var ie=this[oe],he=this[oe+7];ie!==void 0&&he!==void 0||se(oe,this.length-8);var Se=ie*Math.pow(2,24)+this[++oe]*Math.pow(2,16)+this[++oe]*Math.pow(2,8)+this[++oe],ye=this[++oe]*Math.pow(2,24)+this[++oe]*Math.pow(2,16)+this[++oe]*Math.pow(2,8)+he;return(BigInt(Se)<<BigInt(32))+BigInt(ye)}),r.prototype.readIntLE=function(oe,ie,he){oe>>>=0,ie>>>=0,he||W(oe,ie,this.length);for(var Se=this[oe],ye=1,we=0;++we<ie&&(ye*=256);)Se+=this[oe+we]*ye;return Se>=(ye*=128)&&(Se-=Math.pow(2,8*ie)),Se},r.prototype.readIntBE=function(oe,ie,he){oe>>>=0,ie>>>=0,he||W(oe,ie,this.length);for(var Se=ie,ye=1,we=this[oe+--Se];Se>0&&(ye*=256);)we+=this[oe+--Se]*ye;return we>=(ye*=128)&&(we-=Math.pow(2,8*ie)),we},r.prototype.readInt8=function(oe,ie){return oe>>>=0,ie||W(oe,1,this.length),128&this[oe]?-1*(255-this[oe]+1):this[oe]},r.prototype.readInt16LE=function(oe,ie){oe>>>=0,ie||W(oe,2,this.length);var he=this[oe]|this[oe+1]<<8;return 32768&he?4294901760|he:he},r.prototype.readInt16BE=function(oe,ie){oe>>>=0,ie||W(oe,2,this.length);var he=this[oe+1]|this[oe]<<8;return 32768&he?4294901760|he:he},r.prototype.readInt32LE=function(oe,ie){return oe>>>=0,ie||W(oe,4,this.length),this[oe]|this[oe+1]<<8|this[oe+2]<<16|this[oe+3]<<24},r.prototype.readInt32BE=function(oe,ie){return oe>>>=0,ie||W(oe,4,this.length),this[oe]<<24|this[oe+1]<<16|this[oe+2]<<8|this[oe+3]},r.prototype.readBigInt64LE=ze(function(oe){ae(oe>>>=0,"offset");var ie=this[oe],he=this[oe+7];ie!==void 0&&he!==void 0||se(oe,this.length-8);var Se=this[oe+4]+this[oe+5]*Math.pow(2,8)+this[oe+6]*Math.pow(2,16)+(he<<24);return(BigInt(Se)<<BigInt(32))+BigInt(ie+this[++oe]*Math.pow(2,8)+this[++oe]*Math.pow(2,16)+this[++oe]*Math.pow(2,24))}),r.prototype.readBigInt64BE=ze(function(oe){ae(oe>>>=0,"offset");var ie=this[oe],he=this[oe+7];ie!==void 0&&he!==void 0||se(oe,this.length-8);var Se=(ie<<24)+this[++oe]*Math.pow(2,16)+this[++oe]*Math.pow(2,8)+this[++oe];return(BigInt(Se)<<BigInt(32))+BigInt(this[++oe]*Math.pow(2,24)+this[++oe]*Math.pow(2,16)+this[++oe]*Math.pow(2,8)+he)}),r.prototype.readFloatLE=function(oe,ie){return oe>>>=0,ie||W(oe,4,this.length),o.read(this,oe,!0,23,4)},r.prototype.readFloatBE=function(oe,ie){return oe>>>=0,ie||W(oe,4,this.length),o.read(this,oe,!1,23,4)},r.prototype.readDoubleLE=function(oe,ie){return oe>>>=0,ie||W(oe,8,this.length),o.read(this,oe,!0,52,8)},r.prototype.readDoubleBE=function(oe,ie){return oe>>>=0,ie||W(oe,8,this.length),o.read(this,oe,!1,52,8)},r.prototype.writeUintLE=r.prototype.writeUIntLE=function(oe,ie,he,Se){oe=+oe,ie>>>=0,he>>>=0,Se||F(this,oe,ie,he,Math.pow(2,8*he)-1,0);var ye=1,we=0;for(this[ie]=255&oe;++we<he&&(ye*=256);)this[ie+we]=oe/ye&255;return ie+he},r.prototype.writeUintBE=r.prototype.writeUIntBE=function(oe,ie,he,Se){oe=+oe,ie>>>=0,he>>>=0,Se||F(this,oe,ie,he,Math.pow(2,8*he)-1,0);var ye=he-1,we=1;for(this[ie+ye]=255&oe;--ye>=0&&(we*=256);)this[ie+ye]=oe/we&255;return ie+he},r.prototype.writeUint8=r.prototype.writeUInt8=function(oe,ie,he){return oe=+oe,ie>>>=0,he||F(this,oe,ie,1,255,0),this[ie]=255&oe,ie+1},r.prototype.writeUint16LE=r.prototype.writeUInt16LE=function(oe,ie,he){return oe=+oe,ie>>>=0,he||F(this,oe,ie,2,65535,0),this[ie]=255&oe,this[ie+1]=oe>>>8,ie+2},r.prototype.writeUint16BE=r.prototype.writeUInt16BE=function(oe,ie,he){return oe=+oe,ie>>>=0,he||F(this,oe,ie,2,65535,0),this[ie]=oe>>>8,this[ie+1]=255&oe,ie+2},r.prototype.writeUint32LE=r.prototype.writeUInt32LE=function(oe,ie,he){return oe=+oe,ie>>>=0,he||F(this,oe,ie,4,4294967295,0),this[ie+3]=oe>>>24,this[ie+2]=oe>>>16,this[ie+1]=oe>>>8,this[ie]=255&oe,ie+4},r.prototype.writeUint32BE=r.prototype.writeUInt32BE=function(oe,ie,he){return oe=+oe,ie>>>=0,he||F(this,oe,ie,4,4294967295,0),this[ie]=oe>>>24,this[ie+1]=oe>>>16,this[ie+2]=oe>>>8,this[ie+3]=255&oe,ie+4},r.prototype.writeBigUInt64LE=ze(function(oe){return U(this,oe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),r.prototype.writeBigUInt64BE=ze(function(oe){return H(this,oe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),r.prototype.writeIntLE=function(oe,ie,he,Se){if(oe=+oe,ie>>>=0,!Se){var ye=Math.pow(2,8*he-1);F(this,oe,ie,he,ye-1,-ye)}var we=0,Me=1,Oe=0;for(this[ie]=255&oe;++we<he&&(Me*=256);)oe<0&&Oe===0&&this[ie+we-1]!==0&&(Oe=1),this[ie+we]=(oe/Me>>0)-Oe&255;return ie+he},r.prototype.writeIntBE=function(oe,ie,he,Se){if(oe=+oe,ie>>>=0,!Se){var ye=Math.pow(2,8*he-1);F(this,oe,ie,he,ye-1,-ye)}var we=he-1,Me=1,Oe=0;for(this[ie+we]=255&oe;--we>=0&&(Me*=256);)oe<0&&Oe===0&&this[ie+we+1]!==0&&(Oe=1),this[ie+we]=(oe/Me>>0)-Oe&255;return ie+he},r.prototype.writeInt8=function(oe,ie,he){return oe=+oe,ie>>>=0,he||F(this,oe,ie,1,127,-128),oe<0&&(oe=255+oe+1),this[ie]=255&oe,ie+1},r.prototype.writeInt16LE=function(oe,ie,he){return oe=+oe,ie>>>=0,he||F(this,oe,ie,2,32767,-32768),this[ie]=255&oe,this[ie+1]=oe>>>8,ie+2},r.prototype.writeInt16BE=function(oe,ie,he){return oe=+oe,ie>>>=0,he||F(this,oe,ie,2,32767,-32768),this[ie]=oe>>>8,this[ie+1]=255&oe,ie+2},r.prototype.writeInt32LE=function(oe,ie,he){return oe=+oe,ie>>>=0,he||F(this,oe,ie,4,2147483647,-2147483648),this[ie]=255&oe,this[ie+1]=oe>>>8,this[ie+2]=oe>>>16,this[ie+3]=oe>>>24,ie+4},r.prototype.writeInt32BE=function(oe,ie,he){return oe=+oe,ie>>>=0,he||F(this,oe,ie,4,2147483647,-2147483648),oe<0&&(oe=4294967295+oe+1),this[ie]=oe>>>24,this[ie+1]=oe>>>16,this[ie+2]=oe>>>8,this[ie+3]=255&oe,ie+4},r.prototype.writeBigInt64LE=ze(function(oe){return U(this,oe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),r.prototype.writeBigInt64BE=ze(function(oe){return H(this,oe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),r.prototype.writeFloatLE=function(oe,ie,he){return $(this,oe,ie,!0,he)},r.prototype.writeFloatBE=function(oe,ie,he){return $(this,oe,ie,!1,he)},r.prototype.writeDoubleLE=function(oe,ie,he){return K(this,oe,ie,!0,he)},r.prototype.writeDoubleBE=function(oe,ie,he){return K(this,oe,ie,!1,he)},r.prototype.copy=function(oe,ie,he,Se){if(!r.isBuffer(oe))throw new TypeError("argument should be a Buffer");if(he||(he=0),Se||Se===0||(Se=this.length),ie>=oe.length&&(ie=oe.length),ie||(ie=0),Se>0&&Se<he&&(Se=he),Se===he||oe.length===0||this.length===0)return 0;if(ie<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(Se<0)throw new RangeError("sourceEnd out of bounds");Se>this.length&&(Se=this.length),oe.length-ie<Se-he&&(Se=oe.length-ie+he);var ye=Se-he;return this===oe&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(ie,he,Se):Uint8Array.prototype.set.call(oe,this.subarray(he,Se),ie),ye},r.prototype.fill=function(oe,ie,he,Se){if(typeof oe=="string"){if(typeof ie=="string"?(Se=ie,ie=0,he=this.length):typeof he=="string"&&(Se=he,he=this.length),Se!==void 0&&typeof Se!="string")throw new TypeError("encoding must be a string");if(typeof Se=="string"&&!r.isEncoding(Se))throw new TypeError("Unknown encoding: "+Se);if(oe.length===1){var ye=oe.charCodeAt(0);(Se==="utf8"&&ye<128||Se==="latin1")&&(oe=ye)}}else typeof oe=="number"?oe&=255:typeof oe=="boolean"&&(oe=Number(oe));if(ie<0||this.length<ie||this.length<he)throw new RangeError("Out of range index");if(he<=ie)return this;var we;if(ie>>>=0,he=he===void 0?this.length:he>>>0,oe||(oe=0),typeof oe=="number")for(we=ie;we<he;++we)this[we]=oe;else{var Me=r.isBuffer(oe)?oe:r.from(oe,Se),Oe=Me.length;if(Oe===0)throw new TypeError('The value "'+oe+'" is invalid for argument "value"');for(we=0;we<he-ie;++we)this[we+ie]=Me[we%Oe]}return this};var Q={};function Z(oe,ie,he){Q[oe]=function(Se){function ye(){var Oe;return function(Ie,de){if(!(Ie instanceof de))throw new TypeError("Cannot call a class as a function")}(this,ye),Oe=function(Ie,de,_e){return de=k(de),function(Ae,Pe){if(Pe&&(b(Pe)==="object"||typeof Pe=="function"))return Pe;if(Pe!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s(Ae)}(Ie,function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{return!1}}()?Reflect.construct(de,[],k(Ie).constructor):de.apply(Ie,_e))}(this,ye),Object.defineProperty(s(Oe),"message",{value:ie.apply(s(Oe),arguments),writable:!0,configurable:!0}),Oe.name="".concat(Oe.name," [").concat(oe,"]"),Oe.stack,delete Oe.name,Oe}var we,Me;return function(Oe,Ie){if(typeof Ie!="function"&&Ie!==null)throw new TypeError("Super expression must either be null or a function");Oe.prototype=Object.create(Ie&&Ie.prototype,{constructor:{value:Oe,writable:!0,configurable:!0}}),Object.defineProperty(Oe,"prototype",{writable:!1}),Ie&&T(Oe,Ie)}(ye,Se),we=ye,(Me=[{key:"code",get:function(){return oe},set:function(Oe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Oe,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(oe,"]: ").concat(this.message)}}])&&M(we.prototype,Me),Object.defineProperty(we,"prototype",{writable:!1}),ye}(he)}function X(oe){for(var ie="",he=oe.length,Se=oe[0]==="-"?1:0;he>=Se+4;he-=3)ie="_".concat(oe.slice(he-3,he)).concat(ie);return"".concat(oe.slice(0,he)).concat(ie)}function te(oe,ie,he,Se,ye,we){if(oe>he||oe<ie){var Me,Oe=typeof ie=="bigint"?"n":"";throw Me=ie===0||ie===BigInt(0)?">= 0".concat(Oe," and < 2").concat(Oe," ** ").concat(8*(we+1)).concat(Oe):">= -(2".concat(Oe," ** ").concat(8*(we+1)-1).concat(Oe,") and < 2 ** ")+"".concat(8*(we+1)-1).concat(Oe),new Q.ERR_OUT_OF_RANGE("value",Me,oe)}(function(Ie,de,_e){ae(de,"offset"),Ie[de]!==void 0&&Ie[de+_e]!==void 0||se(de,Ie.length-(_e+1))})(Se,ye,we)}function ae(oe,ie){if(typeof oe!="number")throw new Q.ERR_INVALID_ARG_TYPE(ie,"number",oe)}function se(oe,ie,he){throw Math.floor(oe)!==oe?(ae(oe,he),new Q.ERR_OUT_OF_RANGE("offset","an integer",oe)):ie<0?new Q.ERR_BUFFER_OUT_OF_BOUNDS:new Q.ERR_OUT_OF_RANGE("offset",">= ".concat(0," and <= ").concat(ie),oe)}Z("ERR_BUFFER_OUT_OF_BOUNDS",function(oe){return oe?"".concat(oe," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),Z("ERR_INVALID_ARG_TYPE",function(oe,ie){return'The "'.concat(oe,'" argument must be of type number. Received type ').concat(b(ie))},TypeError),Z("ERR_OUT_OF_RANGE",function(oe,ie,he){var Se='The value of "'.concat(oe,'" is out of range.'),ye=he;return Number.isInteger(he)&&Math.abs(he)>Math.pow(2,32)?ye=X(String(he)):typeof he=="bigint"&&(ye=String(he),(he>Math.pow(BigInt(2),BigInt(32))||he<-Math.pow(BigInt(2),BigInt(32)))&&(ye=X(ye)),ye+="n"),Se+" It must be ".concat(ie,". Received ").concat(ye)},RangeError);var ce=/[^+/0-9A-Za-z-_]/g;function fe(oe,ie){var he;ie=ie||1/0;for(var Se=oe.length,ye=null,we=[],Me=0;Me<Se;++Me){if((he=oe.charCodeAt(Me))>55295&&he<57344){if(!ye){if(he>56319){(ie-=3)>-1&&we.push(239,191,189);continue}if(Me+1===Se){(ie-=3)>-1&&we.push(239,191,189);continue}ye=he;continue}if(he<56320){(ie-=3)>-1&&we.push(239,191,189),ye=he;continue}he=65536+(ye-55296<<10|he-56320)}else ye&&(ie-=3)>-1&&we.push(239,191,189);if(ye=null,he<128){if((ie-=1)<0)break;we.push(he)}else if(he<2048){if((ie-=2)<0)break;we.push(he>>6|192,63&he|128)}else if(he<65536){if((ie-=3)<0)break;we.push(he>>12|224,he>>6&63|128,63&he|128)}else{if(!(he<1114112))throw new Error("Invalid code point");if((ie-=4)<0)break;we.push(he>>18|240,he>>12&63|128,he>>6&63|128,63&he|128)}}return we}function pe(oe){return f.toByteArray(function(ie){if((ie=(ie=ie.split("=")[0]).trim().replace(ce,"")).length<2)return"";for(;ie.length%4!=0;)ie+="=";return ie}(oe))}function ge(oe,ie,he,Se){var ye;for(ye=0;ye<Se&&!(ye+he>=ie.length||ye>=oe.length);++ye)ie[ye+he]=oe[ye];return ye}function me(oe,ie){return oe instanceof ie||oe!=null&&oe.constructor!=null&&oe.constructor.name!=null&&oe.constructor.name===ie.name}function be(oe){return oe!=oe}var ke=function(){for(var oe="0123456789abcdef",ie=new Array(256),he=0;he<16;++he)for(var Se=16*he,ye=0;ye<16;++ye)ie[Se+ye]=oe[he]+oe[ye];return ie}();function ze(oe){return typeof BigInt>"u"?ve:oe}function ve(){throw new Error("BigInt not supported")}},25928:function(ee){ee.exports=k,ee.exports.isMobile=k,ee.exports.default=k;var R=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,e=/CrOS/,M=/android|ipad|playbook|silk/i;function k(s){s||(s={});var T=s.ua;if(T||typeof navigator>"u"||(T=navigator.userAgent),T&&T.headers&&typeof T.headers["user-agent"]=="string"&&(T=T.headers["user-agent"]),typeof T!="string")return!1;var b=R.test(T)&&!e.test(T)||!!s.tablet&&M.test(T);return!b&&s.tablet&&s.featureDetect&&navigator&&navigator.maxTouchPoints>1&&T.indexOf("Macintosh")!==-1&&T.indexOf("Safari")!==-1&&(b=!0),b}},48932:function(ee,R,e){e.r(R),e.d(R,{sankeyCenter:function(){return n},sankeyCircular:function(){return C},sankeyJustify:function(){return i},sankeyLeft:function(){return o},sankeyRight:function(){return t}});var M=e(84706),k=e(34712),s=e(10132),T=e(6688),b=e.n(T);function f(ge){return ge.target.depth}function o(ge){return ge.depth}function t(ge,me){return me-1-ge.height}function i(ge,me){return ge.sourceLinks.length?ge.depth:me-1}function n(ge){return ge.targetLinks.length?ge.depth:ge.sourceLinks.length?(0,M.SY)(ge.sourceLinks,f)-1:0}function r(ge){return function(){return ge}}var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ge){return typeof ge}:function(ge){return ge&&typeof Symbol=="function"&&ge.constructor===Symbol&&ge!==Symbol.prototype?"symbol":typeof ge};function l(ge,me){return h(ge.source,me.source)||ge.index-me.index}function u(ge,me){return h(ge.target,me.target)||ge.index-me.index}function h(ge,me){return ge.partOfCycle===me.partOfCycle?ge.y0-me.y0:ge.circularLinkType==="top"||me.circularLinkType==="bottom"?-1:1}function c(ge){return ge.value}function x(ge){return(ge.y0+ge.y1)/2}function p(ge){return x(ge.source)}function v(ge){return x(ge.target)}function g(ge){return ge.index}function y(ge){return ge.nodes}function m(ge){return ge.links}function _(ge,me){var be=ge.get(me);if(!be)throw new Error("missing: "+me);return be}function d(ge,me){return me(ge)}var S=25,w=10,E=.3;function C(){var ge,me,be=0,ke=0,ze=1,ve=1,oe=24,ie=g,he=i,Se=y,ye=m,we=32,Me=2,Oe=null;function Ie(){var _e={nodes:Se.apply(null,arguments),links:ye.apply(null,arguments)};(function(Pe){Pe.nodes.forEach(function(Fe,Ve){Fe.index=Ve,Fe.sourceLinks=[],Fe.targetLinks=[]});var Ee=(0,k.kH)(Pe.nodes,ie);Pe.links.forEach(function(Fe,Ve){Fe.index=Ve;var Ye=Fe.source,tt=Fe.target;(Ye===void 0?"undefined":a(Ye))!=="object"&&(Ye=Fe.source=_(Ee,Ye)),(tt===void 0?"undefined":a(tt))!=="object"&&(tt=Fe.target=_(Ee,tt)),Ye.sourceLinks.push(Fe),tt.targetLinks.push(Fe)})})(_e),function(Pe,Ee,Fe){var Ve=0;if(Fe===null){for(var Ye=[],tt=0;tt<Pe.links.length;tt++){var nt=Pe.links[tt],ht=nt.source.index,vt=nt.target.index;Ye[ht]||(Ye[ht]=[]),Ye[vt]||(Ye[vt]=[]),Ye[ht].indexOf(vt)===-1&&Ye[ht].push(vt)}var pt=b()(Ye);pt.sort(function(Mt,Ot){return Mt.length-Ot.length});var Qe={};for(tt=0;tt<pt.length;tt++){var Ke=pt[tt].slice(-2);Qe[Ke[0]]||(Qe[Ke[0]]={}),Qe[Ke[0]][Ke[1]]=!0}Pe.links.forEach(function(Mt){var Ot=Mt.target.index,Pt=Mt.source.index;Ot===Pt||Qe[Pt]&&Qe[Pt][Ot]?(Mt.circular=!0,Mt.circularLinkID=Ve,Ve+=1):Mt.circular=!1})}else Pe.links.forEach(function(Mt){Mt.source[Fe]<Mt.target[Fe]?Mt.circular=!1:(Mt.circular=!0,Mt.circularLinkID=Ve,Ve+=1)})}(_e,0,Oe),function(Pe){Pe.nodes.forEach(function(Ee){Ee.partOfCycle=!1,Ee.value=Math.max((0,M.oh)(Ee.sourceLinks,c),(0,M.oh)(Ee.targetLinks,c)),Ee.sourceLinks.forEach(function(Fe){Fe.circular&&(Ee.partOfCycle=!0,Ee.circularLinkType=Fe.circularLinkType)}),Ee.targetLinks.forEach(function(Fe){Fe.circular&&(Ee.partOfCycle=!0,Ee.circularLinkType=Fe.circularLinkType)})})}(_e),function(Pe){var Ee,Fe,Ve;for(Ee=Pe.nodes,Fe=[],Ve=0;Ee.length;++Ve,Ee=Fe,Fe=[])Ee.forEach(function(Ye){Ye.depth=Ve,Ye.sourceLinks.forEach(function(tt){Fe.indexOf(tt.target)<0&&!tt.circular&&Fe.push(tt.target)})});for(Ee=Pe.nodes,Fe=[],Ve=0;Ee.length;++Ve,Ee=Fe,Fe=[])Ee.forEach(function(Ye){Ye.height=Ve,Ye.targetLinks.forEach(function(tt){Fe.indexOf(tt.source)<0&&!tt.circular&&Fe.push(tt.source)})});Pe.nodes.forEach(function(Ye){Ye.column=Math.floor(he.call(null,Ye,Ve))})}(_e),O(_e,ie),function(Pe,Ee,Fe){var Ve=(0,k.UJ)().key(function(vt){return vt.column}).sortKeys(M.XE).entries(Pe.nodes).map(function(vt){return vt.values});(function(vt){if(me){var pt=1/0;Ve.forEach(function(Ot){var Pt=ve*me/(Ot.length+1);pt=Pt<pt?Pt:pt}),ge=pt}var Qe=(0,M.SY)(Ve,function(Ot){return(ve-ke-(Ot.length-1)*ge)/(0,M.oh)(Ot,c)});Qe*=E,Pe.links.forEach(function(Ot){Ot.width=Ot.value*Qe});var Ke=function(Ot){var Pt=0,St=0,He=0,We=0,Be=(0,M.kv)(Ot.nodes,function(Ge){return Ge.column});return Ot.links.forEach(function(Ge){Ge.circular&&(Ge.circularLinkType=="top"?Pt+=Ge.width:St+=Ge.width,Ge.target.column==0&&(We+=Ge.width),Ge.source.column==Be&&(He+=Ge.width))}),{top:Pt=Pt>0?Pt+S+w:Pt,bottom:St=St>0?St+S+w:St,left:We=We>0?We+S+w:We,right:He=He>0?He+S+w:He}}(Pe),Mt=function(Ot,Pt){var St=(0,M.kv)(Ot.nodes,function(ot){return ot.column}),He=ze-be,We=ve-ke,Be=He/(He+Pt.right+Pt.left),Ge=We/(We+Pt.top+Pt.bottom);return be=be*Be+Pt.left,ze=Pt.right==0?ze:ze*Be,ke=ke*Ge+Pt.top,ve*=Ge,Ot.nodes.forEach(function(ot){ot.x0=be+ot.column*((ze-be-oe)/St),ot.x1=ot.x0+oe}),Ge}(Pe,Ke);Qe*=Mt,Pe.links.forEach(function(Ot){Ot.width=Ot.value*Qe}),Ve.forEach(function(Ot){var Pt=Ot.length;Ot.forEach(function(St,He){St.depth==Ve.length-1&&Pt==1||St.depth==0&&Pt==1?(St.y0=ve/2-St.value*Qe,St.y1=St.y0+St.value*Qe):St.partOfCycle?z(St,vt)==0?(St.y0=ve/2+He,St.y1=St.y0+St.value*Qe):St.circularLinkType=="top"?(St.y0=ke+He,St.y1=St.y0+St.value*Qe):(St.y0=ve-St.value*Qe-He,St.y1=St.y0+St.value*Qe):Ke.top==0||Ke.bottom==0?(St.y0=(ve-ke)/Pt*He,St.y1=St.y0+St.value*Qe):(St.y0=(ve-ke)/2-Pt/2+He,St.y1=St.y0+St.value*Qe)})})})(Fe),ht();for(var Ye=1,tt=Ee;tt>0;--tt)nt(Ye*=.99,Fe),ht();function nt(vt,pt){var Qe=Ve.length;Ve.forEach(function(Ke){var Mt=Ke.length,Ot=Ke[0].depth;Ke.forEach(function(Pt){var St;if((Pt.sourceLinks.length||Pt.targetLinks.length)&&!(Pt.partOfCycle&&z(Pt,pt)>0))if(Ot==0&&Mt==1)St=Pt.y1-Pt.y0,Pt.y0=ve/2-St/2,Pt.y1=ve/2+St/2;else if(Ot==Qe-1&&Mt==1)St=Pt.y1-Pt.y0,Pt.y0=ve/2-St/2,Pt.y1=ve/2+St/2;else{var He=(0,M.mo)(Pt.sourceLinks,v),We=(0,M.mo)(Pt.targetLinks,p),Be=((He&&We?(He+We)/2:He||We)-x(Pt))*vt;Pt.y0+=Be,Pt.y1+=Be}})})}function ht(){Ve.forEach(function(vt){var pt,Qe,Ke,Mt=ke,Ot=vt.length;for(vt.sort(h),Ke=0;Ke<Ot;++Ke)(Qe=Mt-(pt=vt[Ke]).y0)>0&&(pt.y0+=Qe,pt.y1+=Qe),Mt=pt.y1+ge;if((Qe=Mt-ge-ve)>0)for(Mt=pt.y0-=Qe,pt.y1-=Qe,Ke=Ot-2;Ke>=0;--Ke)(Qe=(pt=vt[Ke]).y1+ge-Mt)>0&&(pt.y0-=Qe,pt.y1-=Qe),Mt=pt.y0})}}(_e,we,ie),de(_e);for(var Ae=0;Ae<4;Ae++)ae(_e,ve,ie),se(_e,0,ie),X(_e,ke,ve,ie),ae(_e,ve,ie),se(_e,0,ie);return function(Pe,Ee,Fe){var Ve=Pe.nodes,Ye=Pe.links,tt=!1,nt=!1;if(Ye.forEach(function(pt){pt.circularLinkType=="top"?tt=!0:pt.circularLinkType=="bottom"&&(nt=!0)}),tt==0||nt==0){var ht=(0,M.SY)(Ve,function(pt){return pt.y0}),vt=(Fe-Ee)/((0,M.kv)(Ve,function(pt){return pt.y1})-ht);Ve.forEach(function(pt){var Qe=(pt.y1-pt.y0)*vt;pt.y0=(pt.y0-ht)*vt,pt.y1=pt.y0+Qe}),Ye.forEach(function(pt){pt.y0=(pt.y0-ht)*vt,pt.y1=(pt.y1-ht)*vt,pt.width=pt.width*vt})}}(_e,ke,ve),N(_e,Me,ve,ie),_e}function de(_e){_e.nodes.forEach(function(Ae){Ae.sourceLinks.sort(u),Ae.targetLinks.sort(l)}),_e.nodes.forEach(function(Ae){var Pe=Ae.y0,Ee=Pe,Fe=Ae.y1,Ve=Fe;Ae.sourceLinks.forEach(function(Ye){Ye.circular?(Ye.y0=Fe-Ye.width/2,Fe-=Ye.width):(Ye.y0=Pe+Ye.width/2,Pe+=Ye.width)}),Ae.targetLinks.forEach(function(Ye){Ye.circular?(Ye.y1=Ve-Ye.width/2,Ve-=Ye.width):(Ye.y1=Ee+Ye.width/2,Ee+=Ye.width)})})}return Ie.nodeId=function(_e){return arguments.length?(ie=typeof _e=="function"?_e:r(_e),Ie):ie},Ie.nodeAlign=function(_e){return arguments.length?(he=typeof _e=="function"?_e:r(_e),Ie):he},Ie.nodeWidth=function(_e){return arguments.length?(oe=+_e,Ie):oe},Ie.nodePadding=function(_e){return arguments.length?(ge=+_e,Ie):ge},Ie.nodes=function(_e){return arguments.length?(Se=typeof _e=="function"?_e:r(_e),Ie):Se},Ie.links=function(_e){return arguments.length?(ye=typeof _e=="function"?_e:r(_e),Ie):ye},Ie.size=function(_e){return arguments.length?(be=ke=0,ze=+_e[0],ve=+_e[1],Ie):[ze-be,ve-ke]},Ie.extent=function(_e){return arguments.length?(be=+_e[0][0],ze=+_e[1][0],ke=+_e[0][1],ve=+_e[1][1],Ie):[[be,ke],[ze,ve]]},Ie.iterations=function(_e){return arguments.length?(we=+_e,Ie):we},Ie.circularLinkGap=function(_e){return arguments.length?(Me=+_e,Ie):Me},Ie.nodePaddingRatio=function(_e){return arguments.length?(me=+_e,Ie):me},Ie.sortNodes=function(_e){return arguments.length?(Oe=_e,Ie):Oe},Ie.update=function(_e){return O(_e,ie),de(_e),_e.links.forEach(function(Ae){Ae.circular&&(Ae.circularLinkType=Ae.y0+Ae.y1<ve?"top":"bottom",Ae.source.circularLinkType=Ae.circularLinkType,Ae.target.circularLinkType=Ae.circularLinkType)}),ae(_e,ve,ie,!1),se(_e,0,ie),N(_e,Me,ve,ie),_e},Ie}function O(ge,me){var be=0,ke=0;ge.links.forEach(function(ze){ze.circular&&(ze.source.circularLinkType||ze.target.circularLinkType?ze.circularLinkType=ze.source.circularLinkType?ze.source.circularLinkType:ze.target.circularLinkType:ze.circularLinkType=be<ke?"top":"bottom",ze.circularLinkType=="top"?be+=1:ke+=1,ge.nodes.forEach(function(ve){d(ve,me)!=d(ze.source,me)&&d(ve,me)!=d(ze.target,me)||(ve.circularLinkType=ze.circularLinkType)}))}),ge.links.forEach(function(ze){ze.circular&&(ze.source.circularLinkType==ze.target.circularLinkType&&(ze.circularLinkType=ze.source.circularLinkType),pe(ze,me)&&(ze.circularLinkType=ze.source.circularLinkType))})}function P(ge){var me=Math.abs(ge.y1-ge.y0),be=Math.abs(ge.target.x0-ge.source.x1);return Math.atan(be/me)}function z(ge,me){var be=0;ge.sourceLinks.forEach(function(ze){be=ze.circular&&!pe(ze,me)?be+1:be});var ke=0;return ge.targetLinks.forEach(function(ze){ke=ze.circular&&!pe(ze,me)?ke+1:ke}),be+ke}function j(ge){var me=ge.source.sourceLinks,be=0;me.forEach(function(ve){be=ve.circular?be+1:be});var ke=ge.target.targetLinks,ze=0;return ke.forEach(function(ve){ze=ve.circular?ze+1:ze}),!(be>1||ze>1)}function I(ge,me,be){return ge.sort(W),ge.forEach(function(ke,ze){var ve,oe,ie=0;if(pe(ke,be)&&j(ke))ke.circularPathData.verticalBuffer=ie+ke.width/2;else{for(var he=0;he<ze;he++)if(ve=ge[ze],oe=ge[he],!(ve.source.column<oe.target.column||ve.target.column>oe.source.column)){var Se=ge[he].circularPathData.verticalBuffer+ge[he].width/2+me;ie=Se>ie?Se:ie}ke.circularPathData.verticalBuffer=ie+ke.width/2}}),ge}function N(ge,me,be,ke){var ze=(0,M.SY)(ge.links,function(ve){return ve.source.y0});ge.links.forEach(function(ve){ve.circular&&(ve.circularPathData={})}),I(ge.links.filter(function(ve){return ve.circularLinkType=="top"}),me,ke),I(ge.links.filter(function(ve){return ve.circularLinkType=="bottom"}),me,ke),ge.links.forEach(function(ve){if(ve.circular){if(ve.circularPathData.arcRadius=ve.width+w,ve.circularPathData.leftNodeBuffer=5,ve.circularPathData.rightNodeBuffer=5,ve.circularPathData.sourceWidth=ve.source.x1-ve.source.x0,ve.circularPathData.sourceX=ve.source.x0+ve.circularPathData.sourceWidth,ve.circularPathData.targetX=ve.target.x0,ve.circularPathData.sourceY=ve.y0,ve.circularPathData.targetY=ve.y1,pe(ve,ke)&&j(ve))ve.circularPathData.leftSmallArcRadius=w+ve.width/2,ve.circularPathData.leftLargeArcRadius=w+ve.width/2,ve.circularPathData.rightSmallArcRadius=w+ve.width/2,ve.circularPathData.rightLargeArcRadius=w+ve.width/2,ve.circularLinkType=="bottom"?(ve.circularPathData.verticalFullExtent=ve.source.y1+S+ve.circularPathData.verticalBuffer,ve.circularPathData.verticalLeftInnerExtent=ve.circularPathData.verticalFullExtent-ve.circularPathData.leftLargeArcRadius,ve.circularPathData.verticalRightInnerExtent=ve.circularPathData.verticalFullExtent-ve.circularPathData.rightLargeArcRadius):(ve.circularPathData.verticalFullExtent=ve.source.y0-S-ve.circularPathData.verticalBuffer,ve.circularPathData.verticalLeftInnerExtent=ve.circularPathData.verticalFullExtent+ve.circularPathData.leftLargeArcRadius,ve.circularPathData.verticalRightInnerExtent=ve.circularPathData.verticalFullExtent+ve.circularPathData.rightLargeArcRadius);else{var oe=ve.source.column,ie=ve.circularLinkType,he=ge.links.filter(function(we){return we.source.column==oe&&we.circularLinkType==ie});ve.circularLinkType=="bottom"?he.sort(U):he.sort(F);var Se=0;he.forEach(function(we,Me){we.circularLinkID==ve.circularLinkID&&(ve.circularPathData.leftSmallArcRadius=w+ve.width/2+Se,ve.circularPathData.leftLargeArcRadius=w+ve.width/2+Me*me+Se),Se+=we.width}),oe=ve.target.column,he=ge.links.filter(function(we){return we.target.column==oe&&we.circularLinkType==ie}),ve.circularLinkType=="bottom"?he.sort(ne):he.sort(H),Se=0,he.forEach(function(we,Me){we.circularLinkID==ve.circularLinkID&&(ve.circularPathData.rightSmallArcRadius=w+ve.width/2+Se,ve.circularPathData.rightLargeArcRadius=w+ve.width/2+Me*me+Se),Se+=we.width}),ve.circularLinkType=="bottom"?(ve.circularPathData.verticalFullExtent=Math.max(be,ve.source.y1,ve.target.y1)+S+ve.circularPathData.verticalBuffer,ve.circularPathData.verticalLeftInnerExtent=ve.circularPathData.verticalFullExtent-ve.circularPathData.leftLargeArcRadius,ve.circularPathData.verticalRightInnerExtent=ve.circularPathData.verticalFullExtent-ve.circularPathData.rightLargeArcRadius):(ve.circularPathData.verticalFullExtent=ze-S-ve.circularPathData.verticalBuffer,ve.circularPathData.verticalLeftInnerExtent=ve.circularPathData.verticalFullExtent+ve.circularPathData.leftLargeArcRadius,ve.circularPathData.verticalRightInnerExtent=ve.circularPathData.verticalFullExtent+ve.circularPathData.rightLargeArcRadius)}ve.circularPathData.leftInnerExtent=ve.circularPathData.sourceX+ve.circularPathData.leftNodeBuffer,ve.circularPathData.rightInnerExtent=ve.circularPathData.targetX-ve.circularPathData.rightNodeBuffer,ve.circularPathData.leftFullExtent=ve.circularPathData.sourceX+ve.circularPathData.leftLargeArcRadius+ve.circularPathData.leftNodeBuffer,ve.circularPathData.rightFullExtent=ve.circularPathData.targetX-ve.circularPathData.rightLargeArcRadius-ve.circularPathData.rightNodeBuffer}if(ve.circular)ve.path=function(we){return we.circularLinkType=="top"?"M"+we.circularPathData.sourceX+" "+we.circularPathData.sourceY+" L"+we.circularPathData.leftInnerExtent+" "+we.circularPathData.sourceY+" A"+we.circularPathData.leftLargeArcRadius+" "+we.circularPathData.leftSmallArcRadius+" 0 0 0 "+we.circularPathData.leftFullExtent+" "+(we.circularPathData.sourceY-we.circularPathData.leftSmallArcRadius)+" L"+we.circularPathData.leftFullExtent+" "+we.circularPathData.verticalLeftInnerExtent+" A"+we.circularPathData.leftLargeArcRadius+" "+we.circularPathData.leftLargeArcRadius+" 0 0 0 "+we.circularPathData.leftInnerExtent+" "+we.circularPathData.verticalFullExtent+" L"+we.circularPathData.rightInnerExtent+" "+we.circularPathData.verticalFullExtent+" A"+we.circularPathData.rightLargeArcRadius+" "+we.circularPathData.rightLargeArcRadius+" 0 0 0 "+we.circularPathData.rightFullExtent+" "+we.circularPathData.verticalRightInnerExtent+" L"+we.circularPathData.rightFullExtent+" "+(we.circularPathData.targetY-we.circularPathData.rightSmallArcRadius)+" A"+we.circularPathData.rightLargeArcRadius+" "+we.circularPathData.rightSmallArcRadius+" 0 0 0 "+we.circularPathData.rightInnerExtent+" "+we.circularPathData.targetY+" L"+we.circularPathData.targetX+" "+we.circularPathData.targetY:"M"+we.circularPathData.sourceX+" "+we.circularPathData.sourceY+" L"+we.circularPathData.leftInnerExtent+" "+we.circularPathData.sourceY+" A"+we.circularPathData.leftLargeArcRadius+" "+we.circularPathData.leftSmallArcRadius+" 0 0 1 "+we.circularPathData.leftFullExtent+" "+(we.circularPathData.sourceY+we.circularPathData.leftSmallArcRadius)+" L"+we.circularPathData.leftFullExtent+" "+we.circularPathData.verticalLeftInnerExtent+" A"+we.circularPathData.leftLargeArcRadius+" "+we.circularPathData.leftLargeArcRadius+" 0 0 1 "+we.circularPathData.leftInnerExtent+" "+we.circularPathData.verticalFullExtent+" L"+we.circularPathData.rightInnerExtent+" "+we.circularPathData.verticalFullExtent+" A"+we.circularPathData.rightLargeArcRadius+" "+we.circularPathData.rightLargeArcRadius+" 0 0 1 "+we.circularPathData.rightFullExtent+" "+we.circularPathData.verticalRightInnerExtent+" L"+we.circularPathData.rightFullExtent+" "+(we.circularPathData.targetY+we.circularPathData.rightSmallArcRadius)+" A"+we.circularPathData.rightLargeArcRadius+" "+we.circularPathData.rightSmallArcRadius+" 0 0 1 "+we.circularPathData.rightInnerExtent+" "+we.circularPathData.targetY+" L"+we.circularPathData.targetX+" "+we.circularPathData.targetY}(ve);else{var ye=(0,s.ak)().source(function(we){return[we.source.x0+(we.source.x1-we.source.x0),we.y0]}).target(function(we){return[we.target.x0,we.y1]});ve.path=ye(ve)}})}function W(ge,me){return $(ge)==$(me)?ge.circularLinkType=="bottom"?U(ge,me):F(ge,me):$(me)-$(ge)}function F(ge,me){return ge.y0-me.y0}function U(ge,me){return me.y0-ge.y0}function H(ge,me){return ge.y1-me.y1}function ne(ge,me){return me.y1-ge.y1}function $(ge){return ge.target.column-ge.source.column}function K(ge){return ge.target.x0-ge.source.x1}function Q(ge,me){var be=P(ge),ke=K(me)/Math.tan(be);return fe(ge)=="up"?ge.y1+ke:ge.y1-ke}function Z(ge,me){var be=P(ge),ke=K(me)/Math.tan(be);return fe(ge)=="up"?ge.y1-ke:ge.y1+ke}function X(ge,me,be,ke){ge.links.forEach(function(ze){if(!ze.circular&&ze.target.column-ze.source.column>1){var ve=ze.source.column+1,oe=ze.target.column-1,ie=1,he=oe-ve+1;for(ie=1;ve<=oe;ve++,ie++)ge.nodes.forEach(function(Se){if(Se.column==ve){var ye,we=ie/(he+1),Me=Math.pow(1-we,3),Oe=3*we*Math.pow(1-we,2),Ie=3*Math.pow(we,2)*(1-we),de=Math.pow(we,3),_e=Me*ze.y0+Oe*ze.y0+Ie*ze.y1+de*ze.y1,Ae=_e-ze.width/2,Pe=_e+ze.width/2;Ae>Se.y0&&Ae<Se.y1?(ye=Se.y1-Ae+10,ye=Se.circularLinkType=="bottom"?ye:-ye,Se=te(Se,ye,me,be),ge.nodes.forEach(function(Ee){var Fe,Ve;d(Ee,ke)!=d(Se,ke)&&Ee.column==Se.column&&(Ve=Ee,(Fe=Se).y0>Ve.y0&&Fe.y0<Ve.y1||Fe.y1>Ve.y0&&Fe.y1<Ve.y1||Fe.y0<Ve.y0&&Fe.y1>Ve.y1)&&te(Ee,ye,me,be)})):(Pe>Se.y0&&Pe<Se.y1||Ae<Se.y0&&Pe>Se.y1)&&(ye=Pe-Se.y0+10,Se=te(Se,ye,me,be),ge.nodes.forEach(function(Ee){d(Ee,ke)!=d(Se,ke)&&Ee.column==Se.column&&Ee.y0<Se.y1&&Ee.y1>Se.y1&&te(Ee,ye,me,be)}))}})}})}function te(ge,me,be,ke){return ge.y0+me>=be&&ge.y1+me<=ke&&(ge.y0=ge.y0+me,ge.y1=ge.y1+me,ge.targetLinks.forEach(function(ze){ze.y1=ze.y1+me}),ge.sourceLinks.forEach(function(ze){ze.y0=ze.y0+me})),ge}function ae(ge,me,be,ke){ge.nodes.forEach(function(ze){ke&&ze.y+(ze.y1-ze.y0)>me&&(ze.y=ze.y-(ze.y+(ze.y1-ze.y0)-me));var ve=ge.links.filter(function(he){return d(he.source,be)==d(ze,be)}),oe=ve.length;oe>1&&ve.sort(function(he,Se){if(!he.circular&&!Se.circular){if(he.target.column==Se.target.column||!ce(he,Se))return he.y1-Se.y1;if(he.target.column>Se.target.column){var ye=Z(Se,he);return he.y1-ye}if(Se.target.column>he.target.column)return Z(he,Se)-Se.y1}return he.circular&&!Se.circular?he.circularLinkType=="top"?-1:1:Se.circular&&!he.circular?Se.circularLinkType=="top"?1:-1:he.circular&&Se.circular?he.circularLinkType===Se.circularLinkType&&he.circularLinkType=="top"?he.target.column===Se.target.column?he.target.y1-Se.target.y1:Se.target.column-he.target.column:he.circularLinkType===Se.circularLinkType&&he.circularLinkType=="bottom"?he.target.column===Se.target.column?Se.target.y1-he.target.y1:he.target.column-Se.target.column:he.circularLinkType=="top"?-1:1:void 0});var ie=ze.y0;ve.forEach(function(he){he.y0=ie+he.width/2,ie+=he.width}),ve.forEach(function(he,Se){if(he.circularLinkType=="bottom"){for(var ye=Se+1,we=0;ye<oe;ye++)we+=ve[ye].width;he.y0=ze.y1-we-he.width/2}})})}function se(ge,me,be){ge.nodes.forEach(function(ke){var ze=ge.links.filter(function(ie){return d(ie.target,be)==d(ke,be)}),ve=ze.length;ve>1&&ze.sort(function(ie,he){if(!ie.circular&&!he.circular){if(ie.source.column==he.source.column||!ce(ie,he))return ie.y0-he.y0;if(he.source.column<ie.source.column){var Se=Q(he,ie);return ie.y0-Se}if(ie.source.column<he.source.column)return Q(ie,he)-he.y0}return ie.circular&&!he.circular?ie.circularLinkType=="top"?-1:1:he.circular&&!ie.circular?he.circularLinkType=="top"?1:-1:ie.circular&&he.circular?ie.circularLinkType===he.circularLinkType&&ie.circularLinkType=="top"?ie.source.column===he.source.column?ie.source.y1-he.source.y1:ie.source.column-he.source.column:ie.circularLinkType===he.circularLinkType&&ie.circularLinkType=="bottom"?ie.source.column===he.source.column?ie.source.y1-he.source.y1:he.source.column-ie.source.column:ie.circularLinkType=="top"?-1:1:void 0});var oe=ke.y0;ze.forEach(function(ie){ie.y1=oe+ie.width/2,oe+=ie.width}),ze.forEach(function(ie,he){if(ie.circularLinkType=="bottom"){for(var Se=he+1,ye=0;Se<ve;Se++)ye+=ze[Se].width;ie.y1=ke.y1-ye-ie.width/2}})})}function ce(ge,me){return fe(ge)==fe(me)}function fe(ge){return ge.y0-ge.y1>0?"up":"down"}function pe(ge,me){return d(ge.source,me)==d(ge.target,me)}},26800:function(ee,R,e){e.r(R),e.d(R,{sankey:function(){return g},sankeyCenter:function(){return o},sankeyJustify:function(){return f},sankeyLeft:function(){return T},sankeyLinkHorizontal:function(){return d},sankeyRight:function(){return b}});var M=e(84706),k=e(34712);function s(S){return S.target.depth}function T(S){return S.depth}function b(S,w){return w-1-S.height}function f(S,w){return S.sourceLinks.length?S.depth:w-1}function o(S){return S.targetLinks.length?S.depth:S.sourceLinks.length?(0,M.SY)(S.sourceLinks,s)-1:0}function t(S){return function(){return S}}function i(S,w){return r(S.source,w.source)||S.index-w.index}function n(S,w){return r(S.target,w.target)||S.index-w.index}function r(S,w){return S.y0-w.y0}function a(S){return S.value}function l(S){return(S.y0+S.y1)/2}function u(S){return l(S.source)*S.value}function h(S){return l(S.target)*S.value}function c(S){return S.index}function x(S){return S.nodes}function p(S){return S.links}function v(S,w){var E=S.get(w);if(!E)throw new Error("missing: "+w);return E}function g(){var S=0,w=0,E=1,C=1,O=24,P=8,z=c,j=f,I=x,N=p,W=32;function F(){var H={nodes:I.apply(null,arguments),links:N.apply(null,arguments)};return function(ne){ne.nodes.forEach(function(K,Q){K.index=Q,K.sourceLinks=[],K.targetLinks=[]});var $=(0,k.kH)(ne.nodes,z);ne.links.forEach(function(K,Q){K.index=Q;var Z=K.source,X=K.target;typeof Z!="object"&&(Z=K.source=v($,Z)),typeof X!="object"&&(X=K.target=v($,X)),Z.sourceLinks.push(K),X.targetLinks.push(K)})}(H),function(ne){ne.nodes.forEach(function($){$.value=Math.max((0,M.oh)($.sourceLinks,a),(0,M.oh)($.targetLinks,a))})}(H),function(ne){var $,K,Q;for($=ne.nodes,K=[],Q=0;$.length;++Q,$=K,K=[])$.forEach(function(X){X.depth=Q,X.sourceLinks.forEach(function(te){K.indexOf(te.target)<0&&K.push(te.target)})});for($=ne.nodes,K=[],Q=0;$.length;++Q,$=K,K=[])$.forEach(function(X){X.height=Q,X.targetLinks.forEach(function(te){K.indexOf(te.source)<0&&K.push(te.source)})});var Z=(E-S-O)/(Q-1);ne.nodes.forEach(function(X){X.x1=(X.x0=S+Math.max(0,Math.min(Q-1,Math.floor(j.call(null,X,Q))))*Z)+O})}(H),function(ne){var $=(0,k.UJ)().key(function(ae){return ae.x0}).sortKeys(M.XE).entries(ne.nodes).map(function(ae){return ae.values});(function(){var ae=(0,M.kv)($,function(fe){return fe.length}),se=.6666666666666666*(C-w)/(ae-1);P>se&&(P=se);var ce=(0,M.SY)($,function(fe){return(C-w-(fe.length-1)*P)/(0,M.oh)(fe,a)});$.forEach(function(fe){fe.forEach(function(pe,ge){pe.y1=(pe.y0=ge)+pe.value*ce})}),ne.links.forEach(function(fe){fe.width=fe.value*ce})})(),te();for(var K=1,Q=W;Q>0;--Q)X(K*=.99),te(),Z(K),te();function Z(ae){$.forEach(function(se){se.forEach(function(ce){if(ce.targetLinks.length){var fe=((0,M.oh)(ce.targetLinks,u)/(0,M.oh)(ce.targetLinks,a)-l(ce))*ae;ce.y0+=fe,ce.y1+=fe}})})}function X(ae){$.slice().reverse().forEach(function(se){se.forEach(function(ce){if(ce.sourceLinks.length){var fe=((0,M.oh)(ce.sourceLinks,h)/(0,M.oh)(ce.sourceLinks,a)-l(ce))*ae;ce.y0+=fe,ce.y1+=fe}})})}function te(){$.forEach(function(ae){var se,ce,fe,pe=w,ge=ae.length;for(ae.sort(r),fe=0;fe<ge;++fe)(ce=pe-(se=ae[fe]).y0)>0&&(se.y0+=ce,se.y1+=ce),pe=se.y1+P;if((ce=pe-P-C)>0)for(pe=se.y0-=ce,se.y1-=ce,fe=ge-2;fe>=0;--fe)(ce=(se=ae[fe]).y1+P-pe)>0&&(se.y0-=ce,se.y1-=ce),pe=se.y0})}}(H),U(H),H}function U(H){H.nodes.forEach(function(ne){ne.sourceLinks.sort(n),ne.targetLinks.sort(i)}),H.nodes.forEach(function(ne){var $=ne.y0,K=$;ne.sourceLinks.forEach(function(Q){Q.y0=$+Q.width/2,$+=Q.width}),ne.targetLinks.forEach(function(Q){Q.y1=K+Q.width/2,K+=Q.width})})}return F.update=function(H){return U(H),H},F.nodeId=function(H){return arguments.length?(z=typeof H=="function"?H:t(H),F):z},F.nodeAlign=function(H){return arguments.length?(j=typeof H=="function"?H:t(H),F):j},F.nodeWidth=function(H){return arguments.length?(O=+H,F):O},F.nodePadding=function(H){return arguments.length?(P=+H,F):P},F.nodes=function(H){return arguments.length?(I=typeof H=="function"?H:t(H),F):I},F.links=function(H){return arguments.length?(N=typeof H=="function"?H:t(H),F):N},F.size=function(H){return arguments.length?(S=w=0,E=+H[0],C=+H[1],F):[E-S,C-w]},F.extent=function(H){return arguments.length?(S=+H[0][0],E=+H[1][0],w=+H[0][1],C=+H[1][1],F):[[S,w],[E,C]]},F.iterations=function(H){return arguments.length?(W=+H,F):W},F}var y=e(10132);function m(S){return[S.source.x1,S.y0]}function _(S){return[S.target.x0,S.y1]}function d(){return(0,y.ak)().source(m).target(_)}},33428:function(ee,R,e){var M,k;(function(){var s={version:"3.8.2"},T=[].slice,b=function(L){return T.call(L)},f=self.document;function o(L){return L&&(L.ownerDocument||L.document||L).documentElement}function t(L){return L&&(L.ownerDocument&&L.ownerDocument.defaultView||L.document&&L||L.defaultView)}if(f)try{b(f.documentElement.childNodes)[0].nodeType}catch{b=function(V){for(var J=V.length,re=new Array(J);J--;)re[J]=V[J];return re}}if(Date.now||(Date.now=function(){return+new Date}),f)try{f.createElement("DIV").style.setProperty("opacity",0,"")}catch{var i=this.Element.prototype,n=i.setAttribute,r=i.setAttributeNS,a=this.CSSStyleDeclaration.prototype,l=a.setProperty;i.setAttribute=function(V,J){n.call(this,V,J+"")},i.setAttributeNS=function(V,J,re){r.call(this,V,J,re+"")},a.setProperty=function(V,J,re){l.call(this,V,J+"",re)}}function u(L,V){return L<V?-1:L>V?1:L>=V?0:NaN}function h(L){return L===null?NaN:+L}function c(L){return!isNaN(L)}function x(L){return{left:function(V,J,re,ue){for(arguments.length<3&&(re=0),arguments.length<4&&(ue=V.length);re<ue;){var xe=re+ue>>>1;L(V[xe],J)<0?re=xe+1:ue=xe}return re},right:function(V,J,re,ue){for(arguments.length<3&&(re=0),arguments.length<4&&(ue=V.length);re<ue;){var xe=re+ue>>>1;L(V[xe],J)>0?ue=xe:re=xe+1}return re}}}s.ascending=u,s.descending=function(L,V){return V<L?-1:V>L?1:V>=L?0:NaN},s.min=function(L,V){var J,re,ue=-1,xe=L.length;if(arguments.length===1){for(;++ue<xe;)if((re=L[ue])!=null&&re>=re){J=re;break}for(;++ue<xe;)(re=L[ue])!=null&&J>re&&(J=re)}else{for(;++ue<xe;)if((re=V.call(L,L[ue],ue))!=null&&re>=re){J=re;break}for(;++ue<xe;)(re=V.call(L,L[ue],ue))!=null&&J>re&&(J=re)}return J},s.max=function(L,V){var J,re,ue=-1,xe=L.length;if(arguments.length===1){for(;++ue<xe;)if((re=L[ue])!=null&&re>=re){J=re;break}for(;++ue<xe;)(re=L[ue])!=null&&re>J&&(J=re)}else{for(;++ue<xe;)if((re=V.call(L,L[ue],ue))!=null&&re>=re){J=re;break}for(;++ue<xe;)(re=V.call(L,L[ue],ue))!=null&&re>J&&(J=re)}return J},s.extent=function(L,V){var J,re,ue,xe=-1,Le=L.length;if(arguments.length===1){for(;++xe<Le;)if((re=L[xe])!=null&&re>=re){J=ue=re;break}for(;++xe<Le;)(re=L[xe])!=null&&(J>re&&(J=re),ue<re&&(ue=re))}else{for(;++xe<Le;)if((re=V.call(L,L[xe],xe))!=null&&re>=re){J=ue=re;break}for(;++xe<Le;)(re=V.call(L,L[xe],xe))!=null&&(J>re&&(J=re),ue<re&&(ue=re))}return[J,ue]},s.sum=function(L,V){var J,re=0,ue=L.length,xe=-1;if(arguments.length===1)for(;++xe<ue;)c(J=+L[xe])&&(re+=J);else for(;++xe<ue;)c(J=+V.call(L,L[xe],xe))&&(re+=J);return re},s.mean=function(L,V){var J,re=0,ue=L.length,xe=-1,Le=ue;if(arguments.length===1)for(;++xe<ue;)c(J=h(L[xe]))?re+=J:--Le;else for(;++xe<ue;)c(J=h(V.call(L,L[xe],xe)))?re+=J:--Le;if(Le)return re/Le},s.quantile=function(L,V){var J=(L.length-1)*V+1,re=Math.floor(J),ue=+L[re-1],xe=J-re;return xe?ue+xe*(L[re]-ue):ue},s.median=function(L,V){var J,re=[],ue=L.length,xe=-1;if(arguments.length===1)for(;++xe<ue;)c(J=h(L[xe]))&&re.push(J);else for(;++xe<ue;)c(J=h(V.call(L,L[xe],xe)))&&re.push(J);if(re.length)return s.quantile(re.sort(u),.5)},s.variance=function(L,V){var J,re,ue=L.length,xe=0,Le=0,De=-1,Ue=0;if(arguments.length===1)for(;++De<ue;)c(J=h(L[De]))&&(Le+=(re=J-xe)*(J-(xe+=re/++Ue)));else for(;++De<ue;)c(J=h(V.call(L,L[De],De)))&&(Le+=(re=J-xe)*(J-(xe+=re/++Ue)));if(Ue>1)return Le/(Ue-1)},s.deviation=function(){var L=s.variance.apply(this,arguments);return L&&Math.sqrt(L)};var p=x(u);function v(L){return L.length}s.bisectLeft=p.left,s.bisect=s.bisectRight=p.right,s.bisector=function(L){return x(L.length===1?function(V,J){return u(L(V),J)}:L)},s.shuffle=function(L,V,J){(xe=arguments.length)<3&&(J=L.length,xe<2&&(V=0));for(var re,ue,xe=J-V;xe;)ue=Math.random()*xe--|0,re=L[xe+V],L[xe+V]=L[ue+V],L[ue+V]=re;return L},s.permute=function(L,V){for(var J=V.length,re=new Array(J);J--;)re[J]=L[V[J]];return re},s.pairs=function(L){for(var V=0,J=L.length-1,re=L[0],ue=new Array(J<0?0:J);V<J;)ue[V]=[re,re=L[++V]];return ue},s.transpose=function(L){if(!(ue=L.length))return[];for(var V=-1,J=s.min(L,v),re=new Array(J);++V<J;)for(var ue,xe=-1,Le=re[V]=new Array(ue);++xe<ue;)Le[xe]=L[xe][V];return re},s.zip=function(){return s.transpose(arguments)},s.keys=function(L){var V=[];for(var J in L)V.push(J);return V},s.values=function(L){var V=[];for(var J in L)V.push(L[J]);return V},s.entries=function(L){var V=[];for(var J in L)V.push({key:J,value:L[J]});return V},s.merge=function(L){for(var V,J,re,ue=L.length,xe=-1,Le=0;++xe<ue;)Le+=L[xe].length;for(J=new Array(Le);--ue>=0;)for(V=(re=L[ue]).length;--V>=0;)J[--Le]=re[V];return J};var g=Math.abs;function y(L,V){for(var J in V)Object.defineProperty(L.prototype,J,{value:V[J],enumerable:!1})}function m(){this._=Object.create(null)}s.range=function(L,V,J){if(arguments.length<3&&(J=1,arguments.length<2&&(V=L,L=0)),(V-L)/J==1/0)throw new Error("infinite range");var re,ue=[],xe=function(De){for(var Ue=1;De*Ue%1;)Ue*=10;return Ue}(g(J)),Le=-1;if(L*=xe,V*=xe,(J*=xe)<0)for(;(re=L+J*++Le)>V;)ue.push(re/xe);else for(;(re=L+J*++Le)<V;)ue.push(re/xe);return ue},s.map=function(L,V){var J=new m;if(L instanceof m)L.forEach(function(De,Ue){J.set(De,Ue)});else if(Array.isArray(L)){var re,ue=-1,xe=L.length;if(arguments.length===1)for(;++ue<xe;)J.set(ue,L[ue]);else for(;++ue<xe;)J.set(V.call(L,re=L[ue],ue),re)}else for(var Le in L)J.set(Le,L[Le]);return J};var _="__proto__",d="\0";function S(L){return(L+="")===_||L[0]===d?d+L:L}function w(L){return(L+="")[0]===d?L.slice(1):L}function E(L){return S(L)in this._}function C(L){return(L=S(L))in this._&&delete this._[L]}function O(){var L=[];for(var V in this._)L.push(w(V));return L}function P(){var L=0;for(var V in this._)++L;return L}function z(){for(var L in this._)return!1;return!0}function j(){this._=Object.create(null)}function I(L){return L}function N(L,V,J){return function(){var re=J.apply(V,arguments);return re===V?L:re}}function W(L,V){if(V in L)return V;V=V.charAt(0).toUpperCase()+V.slice(1);for(var J=0,re=F.length;J<re;++J){var ue=F[J]+V;if(ue in L)return ue}}y(m,{has:E,get:function(L){return this._[S(L)]},set:function(L,V){return this._[S(L)]=V},remove:C,keys:O,values:function(){var L=[];for(var V in this._)L.push(this._[V]);return L},entries:function(){var L=[];for(var V in this._)L.push({key:w(V),value:this._[V]});return L},size:P,empty:z,forEach:function(L){for(var V in this._)L.call(this,w(V),this._[V])}}),s.nest=function(){var L,V,J={},re=[],ue=[];function xe(De,Ue,qe){if(qe>=re.length)return V?V.call(J,Ue):L?Ue.sort(L):Ue;for(var $e,lt,ft,wt,Et=-1,At=Ue.length,Dt=re[qe++],Lt=new m;++Et<At;)(wt=Lt.get($e=Dt(lt=Ue[Et])))?wt.push(lt):Lt.set($e,[lt]);return De?(lt=De(),ft=function(Wt,Ht){lt.set(Wt,xe(De,Ht,qe))}):(lt={},ft=function(Wt,Ht){lt[Wt]=xe(De,Ht,qe)}),Lt.forEach(ft),lt}function Le(De,Ue){if(Ue>=re.length)return De;var qe=[],$e=ue[Ue++];return De.forEach(function(lt,ft){qe.push({key:lt,values:Le(ft,Ue)})}),$e?qe.sort(function(lt,ft){return $e(lt.key,ft.key)}):qe}return J.map=function(De,Ue){return xe(Ue,De,0)},J.entries=function(De){return Le(xe(s.map,De,0),0)},J.key=function(De){return re.push(De),J},J.sortKeys=function(De){return ue[re.length-1]=De,J},J.sortValues=function(De){return L=De,J},J.rollup=function(De){return V=De,J},J},s.set=function(L){var V=new j;if(L)for(var J=0,re=L.length;J<re;++J)V.add(L[J]);return V},y(j,{has:E,add:function(L){return this._[S(L+="")]=!0,L},remove:C,values:O,size:P,empty:z,forEach:function(L){for(var V in this._)L.call(this,w(V))}}),s.behavior={},s.rebind=function(L,V){for(var J,re=1,ue=arguments.length;++re<ue;)L[J=arguments[re]]=N(L,V,V[J]);return L};var F=["webkit","ms","moz","Moz","o","O"];function U(){}function H(){}function ne(L){var V=[],J=new m;function re(){for(var ue,xe=V,Le=-1,De=xe.length;++Le<De;)(ue=xe[Le].on)&&ue.apply(this,arguments);return L}return re.on=function(ue,xe){var Le,De=J.get(ue);return arguments.length<2?De&&De.on:(De&&(De.on=null,V=V.slice(0,Le=V.indexOf(De)).concat(V.slice(Le+1)),J.remove(ue)),xe&&V.push(J.set(ue,{on:xe})),L)},re}function $(){s.event.preventDefault()}function K(){for(var L,V=s.event;L=V.sourceEvent;)V=L;return V}function Q(L){for(var V=new H,J=0,re=arguments.length;++J<re;)V[arguments[J]]=ne(V);return V.of=function(ue,xe){return function(Le){try{var De=Le.sourceEvent=s.event;Le.target=L,s.event=Le,V[Le.type].apply(ue,xe)}finally{s.event=De}}},V}s.dispatch=function(){for(var L=new H,V=-1,J=arguments.length;++V<J;)L[arguments[V]]=ne(L);return L},H.prototype.on=function(L,V){var J=L.indexOf("."),re="";if(J>=0&&(re=L.slice(J+1),L=L.slice(0,J)),L)return arguments.length<2?this[L].on(re):this[L].on(re,V);if(arguments.length===2){if(V==null)for(L in this)this.hasOwnProperty(L)&&this[L].on(re,null);return this}},s.event=null,s.requote=function(L){return L.replace(Z,"\\$&")};var Z=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,X={}.__proto__?function(L,V){L.__proto__=V}:function(L,V){for(var J in V)L[J]=V[J]};function te(L){return X(L,fe),L}var ae=function(L,V){return V.querySelector(L)},se=function(L,V){return V.querySelectorAll(L)},ce=function(L,V){var J=L.matches||L[W(L,"matchesSelector")];return ce=function(re,ue){return J.call(re,ue)},ce(L,V)};typeof Sizzle=="function"&&(ae=function(L,V){return Sizzle(L,V)[0]||null},se=Sizzle,ce=Sizzle.matchesSelector),s.selection=function(){return s.select(f.documentElement)};var fe=s.selection.prototype=[];function pe(L){return typeof L=="function"?L:function(){return ae(L,this)}}function ge(L){return typeof L=="function"?L:function(){return se(L,this)}}fe.select=function(L){var V,J,re,ue,xe=[];L=pe(L);for(var Le=-1,De=this.length;++Le<De;){xe.push(V=[]),V.parentNode=(re=this[Le]).parentNode;for(var Ue=-1,qe=re.length;++Ue<qe;)(ue=re[Ue])?(V.push(J=L.call(ue,ue.__data__,Ue,Le)),J&&"__data__"in ue&&(J.__data__=ue.__data__)):V.push(null)}return te(xe)},fe.selectAll=function(L){var V,J,re=[];L=ge(L);for(var ue=-1,xe=this.length;++ue<xe;)for(var Le=this[ue],De=-1,Ue=Le.length;++De<Ue;)(J=Le[De])&&(re.push(V=b(L.call(J,J.__data__,De,ue))),V.parentNode=J);return te(re)};var me="http://www.w3.org/1999/xhtml",be={svg:"http://www.w3.org/2000/svg",xhtml:me,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ke(L,V){return L=s.ns.qualify(L),V==null?L.local?function(){this.removeAttributeNS(L.space,L.local)}:function(){this.removeAttribute(L)}:typeof V=="function"?L.local?function(){var J=V.apply(this,arguments);J==null?this.removeAttributeNS(L.space,L.local):this.setAttributeNS(L.space,L.local,J)}:function(){var J=V.apply(this,arguments);J==null?this.removeAttribute(L):this.setAttribute(L,J)}:L.local?function(){this.setAttributeNS(L.space,L.local,V)}:function(){this.setAttribute(L,V)}}function ze(L){return L.trim().replace(/\s+/g," ")}function ve(L){return new RegExp("(?:^|\\s+)"+s.requote(L)+"(?:\\s+|$)","g")}function oe(L){return(L+"").trim().split(/^|\s+/)}function ie(L,V){var J=(L=oe(L).map(he)).length;return typeof V=="function"?function(){for(var re=-1,ue=V.apply(this,arguments);++re<J;)L[re](this,ue)}:function(){for(var re=-1;++re<J;)L[re](this,V)}}function he(L){var V=ve(L);return function(J,re){if(ue=J.classList)return re?ue.add(L):ue.remove(L);var ue=J.getAttribute("class")||"";re?(V.lastIndex=0,V.test(ue)||J.setAttribute("class",ze(ue+" "+L))):J.setAttribute("class",ze(ue.replace(V," ")))}}function Se(L,V,J){return V==null?function(){this.style.removeProperty(L)}:typeof V=="function"?function(){var re=V.apply(this,arguments);re==null?this.style.removeProperty(L):this.style.setProperty(L,re,J)}:function(){this.style.setProperty(L,V,J)}}function ye(L,V){return V==null?function(){delete this[L]}:typeof V=="function"?function(){var J=V.apply(this,arguments);J==null?delete this[L]:this[L]=J}:function(){this[L]=V}}function we(L){return typeof L=="function"?L:(L=s.ns.qualify(L)).local?function(){return this.ownerDocument.createElementNS(L.space,L.local)}:function(){var V=this.ownerDocument,J=this.namespaceURI;return J===me&&V.documentElement.namespaceURI===me?V.createElement(L):V.createElementNS(J,L)}}function Me(){var L=this.parentNode;L&&L.removeChild(this)}function Oe(L){return{__data__:L}}function Ie(L){return function(){return ce(this,L)}}function de(L){return arguments.length||(L=u),function(V,J){return V&&J?L(V.__data__,J.__data__):!V-!J}}function _e(L,V){for(var J=0,re=L.length;J<re;J++)for(var ue,xe=L[J],Le=0,De=xe.length;Le<De;Le++)(ue=xe[Le])&&V(ue,Le,J);return L}function Ae(L){return X(L,Pe),L}s.ns={prefix:be,qualify:function(L){var V=L.indexOf(":"),J=L;return V>=0&&(J=L.slice(0,V))!=="xmlns"&&(L=L.slice(V+1)),be.hasOwnProperty(J)?{space:be[J],local:L}:L}},fe.attr=function(L,V){if(arguments.length<2){if(typeof L=="string"){var J=this.node();return(L=s.ns.qualify(L)).local?J.getAttributeNS(L.space,L.local):J.getAttribute(L)}for(V in L)this.each(ke(V,L[V]));return this}return this.each(ke(L,V))},fe.classed=function(L,V){if(arguments.length<2){if(typeof L=="string"){var J=this.node(),re=(L=oe(L)).length,ue=-1;if(V=J.classList){for(;++ue<re;)if(!V.contains(L[ue]))return!1}else for(V=J.getAttribute("class");++ue<re;)if(!ve(L[ue]).test(V))return!1;return!0}for(V in L)this.each(ie(V,L[V]));return this}return this.each(ie(L,V))},fe.style=function(L,V,J){var re=arguments.length;if(re<3){if(typeof L!="string"){for(J in re<2&&(V=""),L)this.each(Se(J,L[J],V));return this}if(re<2){var ue=this.node();return t(ue).getComputedStyle(ue,null).getPropertyValue(L)}J=""}return this.each(Se(L,V,J))},fe.property=function(L,V){if(arguments.length<2){if(typeof L=="string")return this.node()[L];for(V in L)this.each(ye(V,L[V]));return this}return this.each(ye(L,V))},fe.text=function(L){return arguments.length?this.each(typeof L=="function"?function(){var V=L.apply(this,arguments);this.textContent=V??""}:L==null?function(){this.textContent=""}:function(){this.textContent=L}):this.node().textContent},fe.html=function(L){return arguments.length?this.each(typeof L=="function"?function(){var V=L.apply(this,arguments);this.innerHTML=V??""}:L==null?function(){this.innerHTML=""}:function(){this.innerHTML=L}):this.node().innerHTML},fe.append=function(L){return L=we(L),this.select(function(){return this.appendChild(L.apply(this,arguments))})},fe.insert=function(L,V){return L=we(L),V=pe(V),this.select(function(){return this.insertBefore(L.apply(this,arguments),V.apply(this,arguments)||null)})},fe.remove=function(){return this.each(Me)},fe.data=function(L,V){var J,re,ue=-1,xe=this.length;if(!arguments.length){for(L=new Array(xe=(J=this[0]).length);++ue<xe;)(re=J[ue])&&(L[ue]=re.__data__);return L}function Le($e,lt){var ft,wt,Et,At=$e.length,Dt=lt.length,Lt=Math.min(At,Dt),Wt=new Array(Dt),Ht=new Array(Dt),jt=new Array(At);if(V){var hn,vn=new m,An=new Array(At);for(ft=-1;++ft<At;)(wt=$e[ft])&&(vn.has(hn=V.call(wt,wt.__data__,ft))?jt[ft]=wt:vn.set(hn,wt),An[ft]=hn);for(ft=-1;++ft<Dt;)(wt=vn.get(hn=V.call(lt,Et=lt[ft],ft)))?wt!==!0&&(Wt[ft]=wt,wt.__data__=Et):Ht[ft]=Oe(Et),vn.set(hn,!0);for(ft=-1;++ft<At;)ft in An&&vn.get(An[ft])!==!0&&(jt[ft]=$e[ft])}else{for(ft=-1;++ft<Lt;)wt=$e[ft],Et=lt[ft],wt?(wt.__data__=Et,Wt[ft]=wt):Ht[ft]=Oe(Et);for(;ft<Dt;++ft)Ht[ft]=Oe(lt[ft]);for(;ft<At;++ft)jt[ft]=$e[ft]}Ht.update=Wt,Ht.parentNode=Wt.parentNode=jt.parentNode=$e.parentNode,De.push(Ht),Ue.push(Wt),qe.push(jt)}var De=Ae([]),Ue=te([]),qe=te([]);if(typeof L=="function")for(;++ue<xe;)Le(J=this[ue],L.call(J,J.parentNode.__data__,ue));else for(;++ue<xe;)Le(J=this[ue],L);return Ue.enter=function(){return De},Ue.exit=function(){return qe},Ue},fe.datum=function(L){return arguments.length?this.property("__data__",L):this.property("__data__")},fe.filter=function(L){var V,J,re,ue=[];typeof L!="function"&&(L=Ie(L));for(var xe=0,Le=this.length;xe<Le;xe++){ue.push(V=[]),V.parentNode=(J=this[xe]).parentNode;for(var De=0,Ue=J.length;De<Ue;De++)(re=J[De])&&L.call(re,re.__data__,De,xe)&&V.push(re)}return te(ue)},fe.order=function(){for(var L=-1,V=this.length;++L<V;)for(var J,re=this[L],ue=re.length-1,xe=re[ue];--ue>=0;)(J=re[ue])&&(xe&&xe!==J.nextSibling&&xe.parentNode.insertBefore(J,xe),xe=J);return this},fe.sort=function(L){L=de.apply(this,arguments);for(var V=-1,J=this.length;++V<J;)this[V].sort(L);return this.order()},fe.each=function(L){return _e(this,function(V,J,re){L.call(V,V.__data__,J,re)})},fe.call=function(L){var V=b(arguments);return L.apply(V[0]=this,V),this},fe.empty=function(){return!this.node()},fe.node=function(){for(var L=0,V=this.length;L<V;L++)for(var J=this[L],re=0,ue=J.length;re<ue;re++){var xe=J[re];if(xe)return xe}return null},fe.size=function(){var L=0;return _e(this,function(){++L}),L};var Pe=[];function Ee(L,V,J){var re="__on"+L,ue=L.indexOf("."),xe=Ve;ue>0&&(L=L.slice(0,ue));var Le=Fe.get(L);function De(){var Ue=this[re];Ue&&(this.removeEventListener(L,Ue,Ue.$),delete this[re])}return Le&&(L=Le,xe=Ye),ue?V?function(){var Ue=xe(V,b(arguments));De.call(this),this.addEventListener(L,this[re]=Ue,Ue.$=J),Ue._=V}:De:V?U:function(){var Ue,qe=new RegExp("^__on([^.]+)"+s.requote(L)+"$");for(var $e in this)if(Ue=$e.match(qe)){var lt=this[$e];this.removeEventListener(Ue[1],lt,lt.$),delete this[$e]}}}s.selection.enter=Ae,s.selection.enter.prototype=Pe,Pe.append=fe.append,Pe.empty=fe.empty,Pe.node=fe.node,Pe.call=fe.call,Pe.size=fe.size,Pe.select=function(L){for(var V,J,re,ue,xe,Le=[],De=-1,Ue=this.length;++De<Ue;){re=(ue=this[De]).update,Le.push(V=[]),V.parentNode=ue.parentNode;for(var qe=-1,$e=ue.length;++qe<$e;)(xe=ue[qe])?(V.push(re[qe]=J=L.call(ue.parentNode,xe.__data__,qe,De)),J.__data__=xe.__data__):V.push(null)}return te(Le)},Pe.insert=function(L,V){var J,re,ue;return arguments.length<2&&(J=this,V=function(xe,Le,De){var Ue,qe=J[De].update,$e=qe.length;for(De!=ue&&(ue=De,re=0),Le>=re&&(re=Le+1);!(Ue=qe[re])&&++re<$e;);return Ue}),fe.insert.call(this,L,V)},s.select=function(L){var V;return typeof L=="string"?(V=[ae(L,f)]).parentNode=f.documentElement:(V=[L]).parentNode=o(L),te([V])},s.selectAll=function(L){var V;return typeof L=="string"?(V=b(se(L,f))).parentNode=f.documentElement:(V=b(L)).parentNode=null,te([V])},fe.on=function(L,V,J){var re=arguments.length;if(re<3){if(typeof L!="string"){for(J in re<2&&(V=!1),L)this.each(Ee(J,L[J],V));return this}if(re<2)return(re=this.node()["__on"+L])&&re._;J=!1}return this.each(Ee(L,V,J))};var Fe=s.map({mouseenter:"mouseover",mouseleave:"mouseout"});function Ve(L,V){return function(J){var re=s.event;s.event=J,V[0]=this.__data__;try{L.apply(this,V)}finally{s.event=re}}}function Ye(L,V){var J=Ve(L,V);return function(re){var ue=this,xe=re.relatedTarget;xe&&(xe===ue||8&xe.compareDocumentPosition(ue))||J.call(ue,re)}}f&&Fe.forEach(function(L){"on"+L in f&&Fe.remove(L)});var tt,nt=0;function ht(L){var V=".dragsuppress-"+ ++nt,J="click"+V,re=s.select(t(L)).on("touchmove"+V,$).on("dragstart"+V,$).on("selectstart"+V,$);if(tt==null&&(tt=!("onselectstart"in L)&&W(L.style,"userSelect")),tt){var ue=o(L).style,xe=ue[tt];ue[tt]="none"}return function(Le){if(re.on(V,null),tt&&(ue[tt]=xe),Le){var De=function(){re.on(J,null)};re.on(J,function(){$(),De()},!0),setTimeout(De,0)}}}s.mouse=function(L){return pt(L,K())};var vt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function pt(L,V){V.changedTouches&&(V=V.changedTouches[0]);var J=L.ownerSVGElement||L;if(J.createSVGPoint){var re=J.createSVGPoint();if(vt<0){var ue=t(L);if(ue.scrollX||ue.scrollY){var xe=(J=s.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();vt=!(xe.f||xe.e),J.remove()}}return vt?(re.x=V.pageX,re.y=V.pageY):(re.x=V.clientX,re.y=V.clientY),[(re=re.matrixTransform(L.getScreenCTM().inverse())).x,re.y]}var Le=L.getBoundingClientRect();return[V.clientX-Le.left-L.clientLeft,V.clientY-Le.top-L.clientTop]}function Qe(){return s.event.changedTouches[0].identifier}s.touch=function(L,V,J){if(arguments.length<3&&(J=V,V=K().changedTouches),V){for(var re,ue=0,xe=V.length;ue<xe;++ue)if((re=V[ue]).identifier===J)return pt(L,re)}},s.behavior.drag=function(){var L=Q(ue,"drag","dragstart","dragend"),V=null,J=xe(U,s.mouse,t,"mousemove","mouseup"),re=xe(Qe,s.touch,I,"touchmove","touchend");function ue(){this.on("mousedown.drag",J).on("touchstart.drag",re)}function xe(Le,De,Ue,qe,$e){return function(){var lt,ft=this,wt=s.event.target.correspondingElement||s.event.target,Et=ft.parentNode,At=L.of(ft,arguments),Dt=0,Lt=Le(),Wt=".drag"+(Lt==null?"":"-"+Lt),Ht=s.select(Ue(wt)).on(qe+Wt,function(){var vn,An,Ln=De(Et,Lt);Ln&&(vn=Ln[0]-hn[0],An=Ln[1]-hn[1],Dt|=vn|An,hn=Ln,At({type:"drag",x:Ln[0]+lt[0],y:Ln[1]+lt[1],dx:vn,dy:An}))}).on($e+Wt,function(){De(Et,Lt)&&(Ht.on(qe+Wt,null).on($e+Wt,null),jt(Dt),At({type:"dragend"}))}),jt=ht(wt),hn=De(Et,Lt);lt=V?[(lt=V.apply(ft,arguments)).x-hn[0],lt.y-hn[1]]:[0,0],At({type:"dragstart"})}}return ue.origin=function(Le){return arguments.length?(V=Le,ue):V},s.rebind(ue,L,"on")},s.touches=function(L,V){return arguments.length<2&&(V=K().touches),V?b(V).map(function(J){var re=pt(L,J);return re.identifier=J.identifier,re}):[]};var Ke=1e-6,Mt=Ke*Ke,Ot=Math.PI,Pt=2*Ot,St=Pt-Ke,He=Ot/2,We=Ot/180,Be=180/Ot;function Ge(L){return L>1?He:L<-1?-He:Math.asin(L)}function ot(L){return((L=Math.exp(L))+1/L)/2}var it=Math.SQRT2;s.interpolateZoom=function(L,V){var J,re,ue=L[0],xe=L[1],Le=L[2],De=V[0],Ue=V[1],qe=V[2],$e=De-ue,lt=Ue-xe,ft=$e*$e+lt*lt;if(ft<Mt)re=Math.log(qe/Le)/it,J=function(Wt){return[ue+Wt*$e,xe+Wt*lt,Le*Math.exp(it*Wt*re)]};else{var wt=Math.sqrt(ft),Et=(qe*qe-Le*Le+4*ft)/(2*Le*2*wt),At=(qe*qe-Le*Le-4*ft)/(2*qe*2*wt),Dt=Math.log(Math.sqrt(Et*Et+1)-Et),Lt=Math.log(Math.sqrt(At*At+1)-At);re=(Lt-Dt)/it,J=function(Wt){var Ht,jt=Wt*re,hn=ot(Dt),vn=Le/(2*wt)*(hn*(Ht=it*jt+Dt,((Ht=Math.exp(2*Ht))-1)/(Ht+1))-function(An){return((An=Math.exp(An))-1/An)/2}(Dt));return[ue+vn*$e,xe+vn*lt,Le*hn/ot(it*jt+Dt)]}}return J.duration=1e3*re,J},s.behavior.zoom=function(){var L,V,J,re,ue,xe,Le,De,Ue,qe={x:0,y:0,k:1},$e=[960,500],lt=je,ft=250,wt=0,Et="mousedown.zoom",At="mousemove.zoom",Dt="mouseup.zoom",Lt="touchstart.zoom",Wt=Q(Ht,"zoomstart","zoom","zoomend");function Ht(er){er.on(Et,Hn).on(gt+".zoom",vr).on("dblclick.zoom",Ar).on(Lt,or)}function jt(er){return[(er[0]-qe.x)/qe.k,(er[1]-qe.y)/qe.k]}function hn(er){qe.k=Math.max(lt[0],Math.min(lt[1],er))}function vn(er,ar){ar=function(xr){return[xr[0]*qe.k+qe.x,xr[1]*qe.k+qe.y]}(ar),qe.x+=er[0]-ar[0],qe.y+=er[1]-ar[1]}function An(er,ar,xr,fr){er.__chart__={x:qe.x,y:qe.y,k:qe.k},hn(Math.pow(2,fr)),vn(V=ar,xr),er=s.select(er),ft>0&&(er=er.transition().duration(ft)),er.call(Ht.event)}function Ln(){Le&&Le.domain(xe.range().map(function(er){return(er-qe.x)/qe.k}).map(xe.invert)),Ue&&Ue.domain(De.range().map(function(er){return(er-qe.y)/qe.k}).map(De.invert))}function jn(er){wt++||er({type:"zoomstart"})}function tr(er){Ln(),er({type:"zoom",scale:qe.k,translate:[qe.x,qe.y]})}function cr(er){--wt||(er({type:"zoomend"}),V=null)}function Hn(){var er=this,ar=Wt.of(er,arguments),xr=0,fr=s.select(t(er)).on(At,function(){xr=1,vn(s.mouse(er),wr),tr(ar)}).on(Dt,function(){fr.on(At,null).on(Dt,null),Er(xr),cr(ar)}),wr=jt(s.mouse(er)),Er=ht(er);wa.call(er),jn(ar)}function or(){var er,ar=this,xr=Wt.of(ar,arguments),fr={},wr=0,Er=".zoom-"+s.event.changedTouches[0].identifier,Rr="touchmove"+Er,Fr="touchend"+Er,jr=[],qr=s.select(ar),ui=ht(ar);function ki(){var pi=s.touches(ar);return er=qe.k,pi.forEach(function(Gr){Gr.identifier in fr&&(fr[Gr.identifier]=jt(Gr))}),pi}function ra(){var pi=s.event.target;s.select(pi).on(Rr,ji).on(Fr,Ki),jr.push(pi);for(var Gr=s.event.changedTouches,xi=0,ri=Gr.length;xi<ri;++xi)fr[Gr[xi].identifier]=null;var Xr=ki(),bi=Date.now();if(Xr.length===1){if(bi-ue<500){var Ai=Xr[0];An(ar,Ai,fr[Ai.identifier],Math.floor(Math.log(qe.k)/Math.LN2)+1),$()}ue=bi}else if(Xr.length>1){Ai=Xr[0];var Ii=Xr[1],vs=Ai[0]-Ii[0],ms=Ai[1]-Ii[1];wr=vs*vs+ms*ms}}function ji(){var pi,Gr,xi,ri,Xr=s.touches(ar);wa.call(ar);for(var bi=0,Ai=Xr.length;bi<Ai;++bi,ri=null)if(xi=Xr[bi],ri=fr[xi.identifier]){if(Gr)break;pi=xi,Gr=ri}if(ri){var Ii=(Ii=xi[0]-pi[0])*Ii+(Ii=xi[1]-pi[1])*Ii,vs=wr&&Math.sqrt(Ii/wr);pi=[(pi[0]+xi[0])/2,(pi[1]+xi[1])/2],Gr=[(Gr[0]+ri[0])/2,(Gr[1]+ri[1])/2],hn(vs*er)}ue=null,vn(pi,Gr),tr(xr)}function Ki(){if(s.event.touches.length){for(var pi=s.event.changedTouches,Gr=0,xi=pi.length;Gr<xi;++Gr)delete fr[pi[Gr].identifier];for(var ri in fr)return void ki()}s.selectAll(jr).on(Er,null),qr.on(Et,Hn).on(Lt,or),ui(),cr(xr)}ra(),jn(xr),qr.on(Et,null).on(Lt,ra)}function vr(){var er=Wt.of(this,arguments);re?clearTimeout(re):(wa.call(this),L=jt(V=J||s.mouse(this)),jn(er)),re=setTimeout(function(){re=null,cr(er)},50),$(),hn(Math.pow(2,.002*dt())*qe.k),vn(V,L),tr(er)}function Ar(){var er=s.mouse(this),ar=Math.log(qe.k)/Math.LN2;An(this,er,jt(er),s.event.shiftKey?Math.ceil(ar)-1:Math.floor(ar)+1)}return gt||(gt="onwheel"in f?(dt=function(){return-s.event.deltaY*(s.event.deltaMode?120:1)},"wheel"):"onmousewheel"in f?(dt=function(){return s.event.wheelDelta},"mousewheel"):(dt=function(){return-s.event.detail},"MozMousePixelScroll")),Ht.event=function(er){er.each(function(){var ar=Wt.of(this,arguments),xr=qe;Ei?s.select(this).transition().each("start.zoom",function(){qe=this.__chart__||{x:0,y:0,k:1},jn(ar)}).tween("zoom:zoom",function(){var fr=$e[0],wr=$e[1],Er=V?V[0]:fr/2,Rr=V?V[1]:wr/2,Fr=s.interpolateZoom([(Er-qe.x)/qe.k,(Rr-qe.y)/qe.k,fr/qe.k],[(Er-xr.x)/xr.k,(Rr-xr.y)/xr.k,fr/xr.k]);return function(jr){var qr=Fr(jr),ui=fr/qr[2];this.__chart__=qe={x:Er-qr[0]*ui,y:Rr-qr[1]*ui,k:ui},tr(ar)}}).each("interrupt.zoom",function(){cr(ar)}).each("end.zoom",function(){cr(ar)}):(this.__chart__=qe,jn(ar),tr(ar),cr(ar))})},Ht.translate=function(er){return arguments.length?(qe={x:+er[0],y:+er[1],k:qe.k},Ln(),Ht):[qe.x,qe.y]},Ht.scale=function(er){return arguments.length?(qe={x:qe.x,y:qe.y,k:null},hn(+er),Ln(),Ht):qe.k},Ht.scaleExtent=function(er){return arguments.length?(lt=er==null?je:[+er[0],+er[1]],Ht):lt},Ht.center=function(er){return arguments.length?(J=er&&[+er[0],+er[1]],Ht):J},Ht.size=function(er){return arguments.length?($e=er&&[+er[0],+er[1]],Ht):$e},Ht.duration=function(er){return arguments.length?(ft=+er,Ht):ft},Ht.x=function(er){return arguments.length?(Le=er,xe=er.copy(),qe={x:0,y:0,k:1},Ht):Le},Ht.y=function(er){return arguments.length?(Ue=er,De=er.copy(),qe={x:0,y:0,k:1},Ht):Ue},s.rebind(Ht,Wt,"on")};var dt,gt,je=[0,1/0];function Re(){}function rt(L,V,J){return this instanceof rt?(this.h=+L,this.s=+V,void(this.l=+J)):arguments.length<2?L instanceof rt?new rt(L.h,L.s,L.l):tn(""+L,wn,rt):new rt(L,V,J)}s.color=Re,Re.prototype.toString=function(){return this.rgb()+""},s.hsl=rt;var ct=rt.prototype=new Re;function ut(L,V,J){var re,ue;function xe(Le){return Math.round(255*function(De){return De>360?De-=360:De<0&&(De+=360),De<60?re+(ue-re)*De/60:De<180?ue:De<240?re+(ue-re)*(240-De)/60:re}(Le))}return L=isNaN(L)?0:(L%=360)<0?L+360:L,V=isNaN(V)||V<0?0:V>1?1:V,re=2*(J=J<0?0:J>1?1:J)-(ue=J<=.5?J*(1+V):J+V-J*V),new xn(xe(L+120),xe(L),xe(L-120))}function et(L,V,J){return this instanceof et?(this.h=+L,this.c=+V,void(this.l=+J)):arguments.length<2?L instanceof et?new et(L.h,L.c,L.l):function(re,ue,xe){return re>0?new et(Math.atan2(xe,ue)*Be,Math.sqrt(ue*ue+xe*xe),re):new et(NaN,NaN,re)}(L instanceof Tt?L.l:(L=mn((L=s.rgb(L)).r,L.g,L.b)).l,L.a,L.b):new et(L,V,J)}ct.brighter=function(L){return L=Math.pow(.7,arguments.length?L:1),new rt(this.h,this.s,this.l/L)},ct.darker=function(L){return L=Math.pow(.7,arguments.length?L:1),new rt(this.h,this.s,L*this.l)},ct.rgb=function(){return ut(this.h,this.s,this.l)},s.hcl=et;var xt=et.prototype=new Re;function mt(L,V,J){return isNaN(L)&&(L=0),isNaN(V)&&(V=0),new Tt(J,Math.cos(L*=We)*V,Math.sin(L)*V)}function Tt(L,V,J){return this instanceof Tt?(this.l=+L,this.a=+V,void(this.b=+J)):arguments.length<2?L instanceof Tt?new Tt(L.l,L.a,L.b):L instanceof et?mt(L.h,L.c,L.l):mn((L=xn(L)).r,L.g,L.b):new Tt(L,V,J)}xt.brighter=function(L){return new et(this.h,this.c,Math.min(100,this.l+yt*(arguments.length?L:1)))},xt.darker=function(L){return new et(this.h,this.c,Math.max(0,this.l-yt*(arguments.length?L:1)))},xt.rgb=function(){return mt(this.h,this.c,this.l).rgb()},s.lab=Tt;var yt=18,bt=.95047,zt=1,Ut=1.08883,en=Tt.prototype=new Re;function an(L,V,J){var re=(L+16)/116,ue=re+V/500,xe=re-J/200;return new xn(Kt(3.2404542*(ue=rn(ue)*bt)-1.5371385*(re=rn(re)*zt)-.4985314*(xe=rn(xe)*Ut)),Kt(-.969266*ue+1.8760108*re+.041556*xe),Kt(.0556434*ue-.2040259*re+1.0572252*xe))}function rn(L){return L>.206893034?L*L*L:(L-.13793103448275862)/7.787037}function qt(L){return L>.008856?Math.pow(L,.3333333333333333):7.787037*L+.13793103448275862}function Kt(L){return Math.round(255*(L<=.00304?12.92*L:1.055*Math.pow(L,.4166666666666667)-.055))}function xn(L,V,J){return this instanceof xn?(this.r=~~L,this.g=~~V,void(this.b=~~J)):arguments.length<2?L instanceof xn?new xn(L.r,L.g,L.b):tn(""+L,xn,ut):new xn(L,V,J)}function on(L){return new xn(L>>16,L>>8&255,255&L)}function Xt(L){return on(L)+""}en.brighter=function(L){return new Tt(Math.min(100,this.l+yt*(arguments.length?L:1)),this.a,this.b)},en.darker=function(L){return new Tt(Math.max(0,this.l-yt*(arguments.length?L:1)),this.a,this.b)},en.rgb=function(){return an(this.l,this.a,this.b)},s.rgb=xn;var ln=xn.prototype=new Re;function Jt(L){return L<16?"0"+Math.max(0,L).toString(16):Math.min(255,L).toString(16)}function tn(L,V,J){var re,ue,xe,Le=0,De=0,Ue=0;if(re=/([a-z]+)\((.*)\)/.exec(L=L.toLowerCase()))switch(ue=re[2].split(","),re[1]){case"hsl":return J(parseFloat(ue[0]),parseFloat(ue[1])/100,parseFloat(ue[2])/100);case"rgb":return V(yn(ue[0]),yn(ue[1]),yn(ue[2]))}return(xe=Mn.get(L))?V(xe.r,xe.g,xe.b):(L==null||L.charAt(0)!=="#"||isNaN(xe=parseInt(L.slice(1),16))||(L.length===4?(Le=(3840&xe)>>4,Le|=Le>>4,De=240&xe,De|=De>>4,Ue=15&xe,Ue|=Ue<<4):L.length===7&&(Le=(16711680&xe)>>16,De=(65280&xe)>>8,Ue=255&xe)),V(Le,De,Ue))}function wn(L,V,J){var re,ue,xe=Math.min(L/=255,V/=255,J/=255),Le=Math.max(L,V,J),De=Le-xe,Ue=(Le+xe)/2;return De?(ue=Ue<.5?De/(Le+xe):De/(2-Le-xe),re=L==Le?(V-J)/De+(V<J?6:0):V==Le?(J-L)/De+2:(L-V)/De+4,re*=60):(re=NaN,ue=Ue>0&&Ue<1?0:re),new rt(re,ue,Ue)}function mn(L,V,J){var re=qt((.4124564*(L=Cn(L))+.3575761*(V=Cn(V))+.1804375*(J=Cn(J)))/bt),ue=qt((.2126729*L+.7151522*V+.072175*J)/zt);return Tt(116*ue-16,500*(re-ue),200*(ue-qt((.0193339*L+.119192*V+.9503041*J)/Ut)))}function Cn(L){return(L/=255)<=.04045?L/12.92:Math.pow((L+.055)/1.055,2.4)}function yn(L){var V=parseFloat(L);return L.charAt(L.length-1)==="%"?Math.round(2.55*V):V}ln.brighter=function(L){L=Math.pow(.7,arguments.length?L:1);var V=this.r,J=this.g,re=this.b,ue=30;return V||J||re?(V&&V<ue&&(V=ue),J&&J<ue&&(J=ue),re&&re<ue&&(re=ue),new xn(Math.min(255,V/L),Math.min(255,J/L),Math.min(255,re/L))):new xn(ue,ue,ue)},ln.darker=function(L){return new xn((L=Math.pow(.7,arguments.length?L:1))*this.r,L*this.g,L*this.b)},ln.hsl=function(){return wn(this.r,this.g,this.b)},ln.toString=function(){return"#"+Jt(this.r)+Jt(this.g)+Jt(this.b)};var Mn=s.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function zn(L){return typeof L=="function"?L:function(){return L}}function Wn(L){return function(V,J,re){return arguments.length===2&&typeof J=="function"&&(re=J,J=null),sr(V,J,L,re)}}function sr(L,V,J,re){var ue={},xe=s.dispatch("beforesend","progress","load","error"),Le={},De=new XMLHttpRequest,Ue=null;function qe(){var $e,lt=De.status;if(!lt&&function(ft){var wt=ft.responseType;return wt&&wt!=="text"?ft.response:ft.responseText}(De)||lt>=200&&lt<300||lt===304){try{$e=J.call(ue,De)}catch(ft){return void xe.error.call(ue,ft)}xe.load.call(ue,$e)}else xe.error.call(ue,De)}return self.XDomainRequest&&!("withCredentials"in De)&&/^(http(s)?:)?\/\//.test(L)&&(De=new XDomainRequest),"onload"in De?De.onload=De.onerror=qe:De.onreadystatechange=function(){De.readyState>3&&qe()},De.onprogress=function($e){var lt=s.event;s.event=$e;try{xe.progress.call(ue,De)}finally{s.event=lt}},ue.header=function($e,lt){return $e=($e+"").toLowerCase(),arguments.length<2?Le[$e]:(lt==null?delete Le[$e]:Le[$e]=lt+"",ue)},ue.mimeType=function($e){return arguments.length?(V=$e==null?null:$e+"",ue):V},ue.responseType=function($e){return arguments.length?(Ue=$e,ue):Ue},ue.response=function($e){return J=$e,ue},["get","post"].forEach(function($e){ue[$e]=function(){return ue.send.apply(ue,[$e].concat(b(arguments)))}}),ue.send=function($e,lt,ft){if(arguments.length===2&&typeof lt=="function"&&(ft=lt,lt=null),De.open($e,L,!0),V==null||"accept"in Le||(Le.accept=V+",*/*"),De.setRequestHeader)for(var wt in Le)De.setRequestHeader(wt,Le[wt]);return V!=null&&De.overrideMimeType&&De.overrideMimeType(V),Ue!=null&&(De.responseType=Ue),ft!=null&&ue.on("error",ft).on("load",function(Et){ft(null,Et)}),xe.beforesend.call(ue,De),De.send(lt??null),ue},ue.abort=function(){return De.abort(),ue},s.rebind(ue,xe,"on"),re==null?ue:ue.get(function($e){return $e.length===1?function(lt,ft){$e(lt==null?ft:null)}:$e}(re))}Mn.forEach(function(L,V){Mn.set(L,on(V))}),s.functor=zn,s.xhr=Wn(I),s.dsv=function(L,V){var J=new RegExp('["'+L+`
]`),re=L.charCodeAt(0);function ue(qe,$e,lt){arguments.length<3&&(lt=$e,$e=null);var ft=sr(qe,V,$e==null?xe:Le($e),lt);return ft.row=function(wt){return arguments.length?ft.response(($e=wt)==null?xe:Le(wt)):$e},ft}function xe(qe){return ue.parse(qe.responseText)}function Le(qe){return function($e){return ue.parse($e.responseText,qe)}}function De(qe){return qe.map(Ue).join(L)}function Ue(qe){return J.test(qe)?'"'+qe.replace(/\"/g,'""')+'"':qe}return ue.parse=function(qe,$e){var lt;return ue.parseRows(qe,function(ft,wt){if(lt)return lt(ft,wt-1);var Et=function(At){for(var Dt={},Lt=ft.length,Wt=0;Wt<Lt;++Wt)Dt[ft[Wt]]=At[Wt];return Dt};lt=$e?function(At,Dt){return $e(Et(At),Dt)}:Et})},ue.parseRows=function(qe,$e){var lt,ft,wt={},Et={},At=[],Dt=qe.length,Lt=0,Wt=0;function Ht(){if(Lt>=Dt)return Et;if(ft)return ft=!1,wt;var hn=Lt;if(qe.charCodeAt(hn)===34){for(var vn=hn;vn++<Dt;)if(qe.charCodeAt(vn)===34){if(qe.charCodeAt(vn+1)!==34)break;++vn}return Lt=vn+2,(An=qe.charCodeAt(vn+1))===13?(ft=!0,qe.charCodeAt(vn+2)===10&&++Lt):An===10&&(ft=!0),qe.slice(hn+1,vn).replace(/""/g,'"')}for(;Lt<Dt;){var An,Ln=1;if((An=qe.charCodeAt(Lt++))===10)ft=!0;else if(An===13)ft=!0,qe.charCodeAt(Lt)===10&&(++Lt,++Ln);else if(An!==re)continue;return qe.slice(hn,Lt-Ln)}return qe.slice(hn)}for(;(lt=Ht())!==Et;){for(var jt=[];lt!==wt&&lt!==Et;)jt.push(lt),lt=Ht();$e&&(jt=$e(jt,Wt++))==null||At.push(jt)}return At},ue.format=function(qe){if(Array.isArray(qe[0]))return ue.formatRows(qe);var $e=new j,lt=[];return qe.forEach(function(ft){for(var wt in ft)$e.has(wt)||lt.push($e.add(wt))}),[lt.map(Ue).join(L)].concat(qe.map(function(ft){return lt.map(function(wt){return Ue(ft[wt])}).join(L)})).join(`
`)},ue.formatRows=function(qe){return qe.map(De).join(`
`)},ue},s.csv=s.dsv(",","text/csv"),s.tsv=s.dsv("	","text/tab-separated-values");var Fn,Yn,Xn,rr,Yt=this[W(this,"requestAnimationFrame")]||function(L){setTimeout(L,17)};function $t(L,V,J){var re=arguments.length;re<2&&(V=0),re<3&&(J=Date.now());var ue={c:L,t:J+V,n:null};return Yn?Yn.n=ue:Fn=ue,Yn=ue,Xn||(rr=clearTimeout(rr),Xn=1,Yt(Sn)),ue}function Sn(){var L=dn(),V=En()-L;V>24?(isFinite(V)&&(clearTimeout(rr),rr=setTimeout(Sn,V)),Xn=0):(Xn=1,Yt(Sn))}function dn(){for(var L=Date.now(),V=Fn;V;)L>=V.t&&V.c(L-V.t)&&(V.c=null),V=V.n;return L}function En(){for(var L,V=Fn,J=1/0;V;)V.c?(V.t<J&&(J=V.t),V=(L=V).n):V=L?L.n=V.n:Fn=V.n;return Yn=L,J}function Nn(L){return L[0]}function Bn(L){return L[1]}function $n(L){for(var V,J,re,ue=L.length,xe=[0,1],Le=2,De=2;De<ue;De++){for(;Le>1&&(V=L[xe[Le-2]],J=L[xe[Le-1]],re=L[De],(J[0]-V[0])*(re[1]-V[1])-(J[1]-V[1])*(re[0]-V[0])<=0);)--Le;xe[Le++]=De}return xe.slice(0,Le)}function lr(L,V){return L[0]-V[0]||L[1]-V[1]}s.timer=function(){$t.apply(this,arguments)},s.timer.flush=function(){dn(),En()},s.round=function(L,V){return V?Math.round(L*(V=Math.pow(10,V)))/V:Math.round(L)},s.geom={},s.geom.hull=function(L){var V=Nn,J=Bn;if(arguments.length)return re(L);function re(ue){if(ue.length<3)return[];var xe,Le=zn(V),De=zn(J),Ue=ue.length,qe=[],$e=[];for(xe=0;xe<Ue;xe++)qe.push([+Le.call(this,ue[xe],xe),+De.call(this,ue[xe],xe),xe]);for(qe.sort(lr),xe=0;xe<Ue;xe++)$e.push([qe[xe][0],-qe[xe][1]]);var lt=$n(qe),ft=$n($e),wt=ft[0]===lt[0],Et=ft[ft.length-1]===lt[lt.length-1],At=[];for(xe=lt.length-1;xe>=0;--xe)At.push(ue[qe[lt[xe]][2]]);for(xe=+wt;xe<ft.length-Et;++xe)At.push(ue[qe[ft[xe]][2]]);return At}return re.x=function(ue){return arguments.length?(V=ue,re):V},re.y=function(ue){return arguments.length?(J=ue,re):J},re},s.geom.polygon=function(L){return X(L,Gt),L};var Gt=s.geom.polygon.prototype=[];function gn(L,V,J){return(J[0]-V[0])*(L[1]-V[1])<(J[1]-V[1])*(L[0]-V[0])}function Ct(L,V,J,re){var ue=L[0],xe=J[0],Le=V[0]-ue,De=re[0]-xe,Ue=L[1],qe=J[1],$e=V[1]-Ue,lt=re[1]-qe,ft=(De*(Ue-qe)-lt*(ue-xe))/(lt*Le-De*$e);return[ue+ft*Le,Ue+ft*$e]}function Rt(L){var V=L[0],J=L[L.length-1];return!(V[0]-J[0]||V[1]-J[1])}Gt.area=function(){for(var L,V=-1,J=this.length,re=this[J-1],ue=0;++V<J;)L=re,re=this[V],ue+=L[1]*re[0]-L[0]*re[1];return .5*ue},Gt.centroid=function(L){var V,J,re=-1,ue=this.length,xe=0,Le=0,De=this[ue-1];for(arguments.length||(L=-1/(6*this.area()));++re<ue;)V=De,De=this[re],J=V[0]*De[1]-De[0]*V[1],xe+=(V[0]+De[0])*J,Le+=(V[1]+De[1])*J;return[xe*L,Le*L]},Gt.clip=function(L){for(var V,J,re,ue,xe,Le,De=Rt(L),Ue=-1,qe=this.length-Rt(this),$e=this[qe-1];++Ue<qe;){for(V=L.slice(),L.length=0,ue=this[Ue],xe=V[(re=V.length-De)-1],J=-1;++J<re;)gn(Le=V[J],$e,ue)?(gn(xe,$e,ue)||L.push(Ct(xe,Le,$e,ue)),L.push(Le)):gn(xe,$e,ue)&&L.push(Ct(xe,Le,$e,ue)),xe=Le;De&&L.push(L[0]),$e=ue}return L};var Zt,cn,fn,_n,pn,sn=[],Nt=[];function Ft(){oi(this),this.edge=this.site=this.circle=null}function Qt(L){var V=sn.pop()||new Ft;return V.site=L,V}function Tn(L){ir(L),fn.remove(L),sn.push(L),oi(L)}function Pn(L){var V=L.circle,J=V.x,re=V.cy,ue={x:J,y:re},xe=L.P,Le=L.N,De=[L];Tn(L);for(var Ue=xe;Ue.circle&&g(J-Ue.circle.x)<Ke&&g(re-Ue.circle.cy)<Ke;)xe=Ue.P,De.unshift(Ue),Tn(Ue),Ue=xe;De.unshift(Ue),ir(Ue);for(var qe=Le;qe.circle&&g(J-qe.circle.x)<Ke&&g(re-qe.circle.cy)<Ke;)Le=qe.N,De.push(qe),Tn(qe),qe=Le;De.push(qe),ir(qe);var $e,lt=De.length;for($e=1;$e<lt;++$e)qe=De[$e],Ue=De[$e-1],pr(qe.edge,Ue.site,qe.site,ue);Ue=De[0],(qe=De[lt-1]).edge=Qn(Ue.site,qe.site,null,ue),Gn(Ue),Gn(qe)}function On(L){for(var V,J,re,ue,xe=L.x,Le=L.y,De=fn._;De;)if((re=Dn(De,Le)-xe)>Ke)De=De.L;else{if(!((ue=xe-Zn(De,Le))>Ke)){re>-Ke?(V=De.P,J=De):ue>-Ke?(V=De,J=De.N):V=J=De;break}if(!De.R){V=De;break}De=De.R}var Ue=Qt(L);if(fn.insert(V,Ue),V||J){if(V===J)return ir(V),J=Qt(V.site),fn.insert(Ue,J),Ue.edge=J.edge=Qn(V.site,Ue.site),Gn(V),void Gn(J);if(J){ir(V),ir(J);var qe=V.site,$e=qe.x,lt=qe.y,ft=L.x-$e,wt=L.y-lt,Et=J.site,At=Et.x-$e,Dt=Et.y-lt,Lt=2*(ft*Dt-wt*At),Wt=ft*ft+wt*wt,Ht=At*At+Dt*Dt,jt={x:(Dt*Wt-wt*Ht)/Lt+$e,y:(ft*Ht-At*Wt)/Lt+lt};pr(J.edge,qe,Et,jt),Ue.edge=Qn(qe,L,null,jt),J.edge=Qn(L,Et,null,jt),Gn(V),Gn(J)}else Ue.edge=Qn(V.site,Ue.site)}}function Dn(L,V){var J=L.site,re=J.x,ue=J.y,xe=ue-V;if(!xe)return re;var Le=L.P;if(!Le)return-1/0;var De=(J=Le.site).x,Ue=J.y,qe=Ue-V;if(!qe)return De;var $e=De-re,lt=1/xe-1/qe,ft=$e/qe;return lt?(-ft+Math.sqrt(ft*ft-2*lt*($e*$e/(-2*qe)-Ue+qe/2+ue-xe/2)))/lt+re:(re+De)/2}function Zn(L,V){var J=L.N;if(J)return Dn(J,V);var re=L.site;return re.y===V?re.x:1/0}function qn(L){this.site=L,this.edges=[]}function Kn(L,V){return V.angle-L.angle}function Un(){oi(this),this.x=this.y=this.arc=this.site=this.cy=null}function Gn(L){var V=L.P,J=L.N;if(V&&J){var re=V.site,ue=L.site,xe=J.site;if(re!==xe){var Le=ue.x,De=ue.y,Ue=re.x-Le,qe=re.y-De,$e=xe.x-Le,lt=2*(Ue*(Dt=xe.y-De)-qe*$e);if(!(lt>=-Mt)){var ft=Ue*Ue+qe*qe,wt=$e*$e+Dt*Dt,Et=(Dt*ft-qe*wt)/lt,At=(Ue*wt-$e*ft)/lt,Dt=At+De,Lt=Nt.pop()||new Un;Lt.arc=L,Lt.site=ue,Lt.x=Et+Le,Lt.y=Dt+Math.sqrt(Et*Et+At*At),Lt.cy=Dt,L.circle=Lt;for(var Wt=null,Ht=pn._;Ht;)if(Lt.y<Ht.y||Lt.y===Ht.y&&Lt.x<=Ht.x){if(!Ht.L){Wt=Ht.P;break}Ht=Ht.L}else{if(!Ht.R){Wt=Ht;break}Ht=Ht.R}pn.insert(Wt,Lt),Wt||(_n=Lt)}}}}function ir(L){var V=L.circle;V&&(V.P||(_n=V.N),pn.remove(V),Nt.push(V),oi(V),L.circle=null)}function mr(L,V){var J=L.b;if(J)return!0;var re,ue,xe=L.a,Le=V[0][0],De=V[1][0],Ue=V[0][1],qe=V[1][1],$e=L.l,lt=L.r,ft=$e.x,wt=$e.y,Et=lt.x,At=lt.y,Dt=(ft+Et)/2,Lt=(wt+At)/2;if(At===wt){if(Dt<Le||Dt>=De)return;if(ft>Et){if(xe){if(xe.y>=qe)return}else xe={x:Dt,y:Ue};J={x:Dt,y:qe}}else{if(xe){if(xe.y<Ue)return}else xe={x:Dt,y:qe};J={x:Dt,y:Ue}}}else if(ue=Lt-(re=(ft-Et)/(At-wt))*Dt,re<-1||re>1)if(ft>Et){if(xe){if(xe.y>=qe)return}else xe={x:(Ue-ue)/re,y:Ue};J={x:(qe-ue)/re,y:qe}}else{if(xe){if(xe.y<Ue)return}else xe={x:(qe-ue)/re,y:qe};J={x:(Ue-ue)/re,y:Ue}}else if(wt<At){if(xe){if(xe.x>=De)return}else xe={x:Le,y:re*Le+ue};J={x:De,y:re*De+ue}}else{if(xe){if(xe.x<Le)return}else xe={x:De,y:re*De+ue};J={x:Le,y:re*Le+ue}}return L.a=xe,L.b=J,!0}function ur(L,V){this.l=L,this.r=V,this.a=this.b=null}function Qn(L,V,J,re){var ue=new ur(L,V);return Zt.push(ue),J&&pr(ue,L,V,J),re&&pr(ue,V,L,re),cn[L.i].edges.push(new Tr(ue,L,V)),cn[V.i].edges.push(new Tr(ue,V,L)),ue}function pr(L,V,J,re){L.a||L.b?L.l===J?L.b=re:L.a=re:(L.a=re,L.l=V,L.r=J)}function Tr(L,V,J){var re=L.a,ue=L.b;this.edge=L,this.site=V,this.angle=J?Math.atan2(J.y-V.y,J.x-V.x):L.l===V?Math.atan2(ue.x-re.x,re.y-ue.y):Math.atan2(re.x-ue.x,ue.y-re.y)}function Or(){this._=null}function oi(L){L.U=L.C=L.L=L.R=L.P=L.N=null}function gi(L,V){var J=V,re=V.R,ue=J.U;ue?ue.L===J?ue.L=re:ue.R=re:L._=re,re.U=ue,J.U=re,J.R=re.L,J.R&&(J.R.U=J),re.L=J}function Di(L,V){var J=V,re=V.L,ue=J.U;ue?ue.L===J?ue.L=re:ue.R=re:L._=re,re.U=ue,J.U=re,J.L=re.R,J.L&&(J.L.U=J),re.R=J}function ii(L){for(;L.L;)L=L.L;return L}function yi(L,V){var J,re,ue,xe=L.sort(oa).pop();for(Zt=[],cn=new Array(L.length),fn=new Or,pn=new Or;;)if(ue=_n,xe&&(!ue||xe.y<ue.y||xe.y===ue.y&&xe.x<ue.x))xe.x===J&&xe.y===re||(cn[xe.i]=new qn(xe),On(xe),J=xe.x,re=xe.y),xe=L.pop();else{if(!ue)break;Pn(ue.arc)}V&&(function(De){for(var Ue,qe,$e,lt,ft,wt=Zt,Et=(qe=De[0][0],$e=De[0][1],lt=De[1][0],ft=De[1][1],function(Dt){var Lt,Wt=Dt.a,Ht=Dt.b,jt=Wt.x,hn=Wt.y,vn=0,An=1,Ln=Ht.x-jt,jn=Ht.y-hn;if(Lt=qe-jt,Ln||!(Lt>0)){if(Lt/=Ln,Ln<0){if(Lt<vn)return;Lt<An&&(An=Lt)}else if(Ln>0){if(Lt>An)return;Lt>vn&&(vn=Lt)}if(Lt=lt-jt,Ln||!(Lt<0)){if(Lt/=Ln,Ln<0){if(Lt>An)return;Lt>vn&&(vn=Lt)}else if(Ln>0){if(Lt<vn)return;Lt<An&&(An=Lt)}if(Lt=$e-hn,jn||!(Lt>0)){if(Lt/=jn,jn<0){if(Lt<vn)return;Lt<An&&(An=Lt)}else if(jn>0){if(Lt>An)return;Lt>vn&&(vn=Lt)}if(Lt=ft-hn,jn||!(Lt<0)){if(Lt/=jn,jn<0){if(Lt>An)return;Lt>vn&&(vn=Lt)}else if(jn>0){if(Lt<vn)return;Lt<An&&(An=Lt)}return vn>0&&(Dt.a={x:jt+vn*Ln,y:hn+vn*jn}),An<1&&(Dt.b={x:jt+An*Ln,y:hn+An*jn}),Dt}}}}}),At=wt.length;At--;)(!mr(Ue=wt[At],De)||!Et(Ue)||g(Ue.a.x-Ue.b.x)<Ke&&g(Ue.a.y-Ue.b.y)<Ke)&&(Ue.a=Ue.b=null,wt.splice(At,1))}(V),function(De){for(var Ue,qe,$e,lt,ft,wt,Et,At,Dt,Lt,Wt=De[0][0],Ht=De[1][0],jt=De[0][1],hn=De[1][1],vn=cn,An=vn.length;An--;)if((ft=vn[An])&&ft.prepare())for(At=(Et=ft.edges).length,wt=0;wt<At;)$e=(Lt=Et[wt].end()).x,lt=Lt.y,Ue=(Dt=Et[++wt%At].start()).x,qe=Dt.y,(g($e-Ue)>Ke||g(lt-qe)>Ke)&&(Et.splice(wt,0,new Tr((Ln=ft.site,jn=Lt,tr=g($e-Wt)<Ke&&hn-lt>Ke?{x:Wt,y:g(Ue-Wt)<Ke?qe:hn}:g(lt-hn)<Ke&&Ht-$e>Ke?{x:g(qe-hn)<Ke?Ue:Ht,y:hn}:g($e-Ht)<Ke&&lt-jt>Ke?{x:Ht,y:g(Ue-Ht)<Ke?qe:jt}:g(lt-jt)<Ke&&$e-Wt>Ke?{x:g(qe-jt)<Ke?Ue:Wt,y:jt}:null,cr=void 0,(cr=new ur(Ln,null)).a=jn,cr.b=tr,Zt.push(cr),cr),ft.site,null)),++At);var Ln,jn,tr,cr}(V));var Le={cells:cn,edges:Zt};return fn=pn=Zt=cn=null,Le}function oa(L,V){return V.y-L.y||V.x-L.x}qn.prototype.prepare=function(){for(var L,V=this.edges,J=V.length;J--;)(L=V[J].edge).b&&L.a||V.splice(J,1);return V.sort(Kn),V.length},Tr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Or.prototype={insert:function(L,V){var J,re,ue;if(L){if(V.P=L,V.N=L.N,L.N&&(L.N.P=V),L.N=V,L.R){for(L=L.R;L.L;)L=L.L;L.L=V}else L.R=V;J=L}else this._?(L=ii(this._),V.P=null,V.N=L,L.P=L.L=V,J=L):(V.P=V.N=null,this._=V,J=null);for(V.L=V.R=null,V.U=J,V.C=!0,L=V;J&&J.C;)J===(re=J.U).L?(ue=re.R)&&ue.C?(J.C=ue.C=!1,re.C=!0,L=re):(L===J.R&&(gi(this,J),J=(L=J).U),J.C=!1,re.C=!0,Di(this,re)):(ue=re.L)&&ue.C?(J.C=ue.C=!1,re.C=!0,L=re):(L===J.L&&(Di(this,J),J=(L=J).U),J.C=!1,re.C=!0,gi(this,re)),J=L.U;this._.C=!1},remove:function(L){L.N&&(L.N.P=L.P),L.P&&(L.P.N=L.N),L.N=L.P=null;var V,J,re,ue=L.U,xe=L.L,Le=L.R;if(J=xe?Le?ii(Le):xe:Le,ue?ue.L===L?ue.L=J:ue.R=J:this._=J,xe&&Le?(re=J.C,J.C=L.C,J.L=xe,xe.U=J,J!==Le?(ue=J.U,J.U=L.U,L=J.R,ue.L=L,J.R=Le,Le.U=J):(J.U=ue,ue=J,L=J.R)):(re=L.C,L=J),L&&(L.U=ue),!re)if(L&&L.C)L.C=!1;else{do{if(L===this._)break;if(L===ue.L){if((V=ue.R).C&&(V.C=!1,ue.C=!0,gi(this,ue),V=ue.R),V.L&&V.L.C||V.R&&V.R.C){V.R&&V.R.C||(V.L.C=!1,V.C=!0,Di(this,V),V=ue.R),V.C=ue.C,ue.C=V.R.C=!1,gi(this,ue),L=this._;break}}else if((V=ue.L).C&&(V.C=!1,ue.C=!0,Di(this,ue),V=ue.L),V.L&&V.L.C||V.R&&V.R.C){V.L&&V.L.C||(V.R.C=!1,V.C=!0,gi(this,V),V=ue.L),V.C=ue.C,ue.C=V.L.C=!1,Di(this,ue),L=this._;break}V.C=!0,L=ue,ue=ue.U}while(!L.C);L&&(L.C=!1)}}},s.geom.voronoi=function(L){var V=Nn,J=Bn,re=V,ue=J,xe=Pr;if(L)return Le(L);function Le(Ue){var qe=new Array(Ue.length),$e=xe[0][0],lt=xe[0][1],ft=xe[1][0],wt=xe[1][1];return yi(De(Ue),xe).cells.forEach(function(Et,At){var Dt=Et.edges,Lt=Et.site;(qe[At]=Dt.length?Dt.map(function(Wt){var Ht=Wt.start();return[Ht.x,Ht.y]}):Lt.x>=$e&&Lt.x<=ft&&Lt.y>=lt&&Lt.y<=wt?[[$e,wt],[ft,wt],[ft,lt],[$e,lt]]:[]).point=Ue[At]}),qe}function De(Ue){return Ue.map(function(qe,$e){return{x:Math.round(re(qe,$e)/Ke)*Ke,y:Math.round(ue(qe,$e)/Ke)*Ke,i:$e}})}return Le.links=function(Ue){return yi(De(Ue)).edges.filter(function(qe){return qe.l&&qe.r}).map(function(qe){return{source:Ue[qe.l.i],target:Ue[qe.r.i]}})},Le.triangles=function(Ue){var qe=[];return yi(De(Ue)).cells.forEach(function($e,lt){for(var ft,wt,Et,At,Dt=$e.site,Lt=$e.edges.sort(Kn),Wt=-1,Ht=Lt.length,jt=Lt[Ht-1].edge,hn=jt.l===Dt?jt.r:jt.l;++Wt<Ht;)ft=hn,hn=(jt=Lt[Wt].edge).l===Dt?jt.r:jt.l,lt<ft.i&&lt<hn.i&&(Et=ft,At=hn,((wt=Dt).x-At.x)*(Et.y-wt.y)-(wt.x-Et.x)*(At.y-wt.y)<0)&&qe.push([Ue[lt],Ue[ft.i],Ue[hn.i]])}),qe},Le.x=function(Ue){return arguments.length?(re=zn(V=Ue),Le):V},Le.y=function(Ue){return arguments.length?(ue=zn(J=Ue),Le):J},Le.clipExtent=function(Ue){return arguments.length?(xe=Ue??Pr,Le):xe===Pr?null:xe},Le.size=function(Ue){return arguments.length?Le.clipExtent(Ue&&[[0,0],Ue]):xe===Pr?null:xe&&xe[1]},Le};var Pr=[[-1e6,-1e6],[1e6,1e6]];function Ri(L){return L.x}function Ma(L){return L.y}function Pi(L,V,J,re,ue,xe){if(!L(V,J,re,ue,xe)){var Le=.5*(J+ue),De=.5*(re+xe),Ue=V.nodes;Ue[0]&&Pi(L,Ue[0],J,re,Le,De),Ue[1]&&Pi(L,Ue[1],Le,re,ue,De),Ue[2]&&Pi(L,Ue[2],J,De,Le,xe),Ue[3]&&Pi(L,Ue[3],Le,De,ue,xe)}}function uo(L,V){L=s.rgb(L),V=s.rgb(V);var J=L.r,re=L.g,ue=L.b,xe=V.r-J,Le=V.g-re,De=V.b-ue;return function(Ue){return"#"+Jt(Math.round(J+xe*Ue))+Jt(Math.round(re+Le*Ue))+Jt(Math.round(ue+De*Ue))}}function ko(L,V){var J,re={},ue={};for(J in L)J in V?re[J]=Sa(L[J],V[J]):ue[J]=L[J];for(J in V)J in L||(ue[J]=V[J]);return function(xe){for(J in re)ue[J]=re[J](xe);return ue}}function Xi(L,V){return L=+L,V=+V,function(J){return L*(1-J)+V*J}}function Ka(L,V){var J,re,ue,xe=Ja.lastIndex=Ao.lastIndex=0,Le=-1,De=[],Ue=[];for(L+="",V+="";(J=Ja.exec(L))&&(re=Ao.exec(V));)(ue=re.index)>xe&&(ue=V.slice(xe,ue),De[Le]?De[Le]+=ue:De[++Le]=ue),(J=J[0])===(re=re[0])?De[Le]?De[Le]+=re:De[++Le]=re:(De[++Le]=null,Ue.push({i:Le,x:Xi(J,re)})),xe=Ao.lastIndex;return xe<V.length&&(ue=V.slice(xe),De[Le]?De[Le]+=ue:De[++Le]=ue),De.length<2?Ue[0]?(V=Ue[0].x,function(qe){return V(qe)+""}):function(){return V}:(V=Ue.length,function(qe){for(var $e,lt=0;lt<V;++lt)De[($e=Ue[lt]).i]=$e.x(qe);return De.join("")})}s.geom.delaunay=function(L){return s.geom.voronoi().triangles(L)},s.geom.quadtree=function(L,V,J,re,ue){var xe,Le=Nn,De=Bn;if(xe=arguments.length)return Le=Ri,De=Ma,xe===3&&(ue=J,re=V,J=V=0),Ue(L);function Ue(qe){var $e,lt,ft,wt,Et,At,Dt,Lt,Wt,Ht=zn(Le),jt=zn(De);if(V!=null)At=V,Dt=J,Lt=re,Wt=ue;else if(Lt=Wt=-(At=Dt=1/0),lt=[],ft=[],Et=qe.length,xe)for(wt=0;wt<Et;++wt)($e=qe[wt]).x<At&&(At=$e.x),$e.y<Dt&&(Dt=$e.y),$e.x>Lt&&(Lt=$e.x),$e.y>Wt&&(Wt=$e.y),lt.push($e.x),ft.push($e.y);else for(wt=0;wt<Et;++wt){var hn=+Ht($e=qe[wt],wt),vn=+jt($e,wt);hn<At&&(At=hn),vn<Dt&&(Dt=vn),hn>Lt&&(Lt=hn),vn>Wt&&(Wt=vn),lt.push(hn),ft.push(vn)}var An=Lt-At,Ln=Wt-Dt;function jn(Hn,or,vr,Ar,er,ar,xr,fr){if(!isNaN(vr)&&!isNaN(Ar))if(Hn.leaf){var wr=Hn.x,Er=Hn.y;if(wr!=null)if(g(wr-vr)+g(Er-Ar)<.01)tr(Hn,or,vr,Ar,er,ar,xr,fr);else{var Rr=Hn.point;Hn.x=Hn.y=Hn.point=null,tr(Hn,Rr,wr,Er,er,ar,xr,fr),tr(Hn,or,vr,Ar,er,ar,xr,fr)}else Hn.x=vr,Hn.y=Ar,Hn.point=or}else tr(Hn,or,vr,Ar,er,ar,xr,fr)}function tr(Hn,or,vr,Ar,er,ar,xr,fr){var wr=.5*(er+xr),Er=.5*(ar+fr),Rr=vr>=wr,Fr=Ar>=Er,jr=Fr<<1|Rr;Hn.leaf=!1,Rr?er=wr:xr=wr,Fr?ar=Er:fr=Er,jn(Hn=Hn.nodes[jr]||(Hn.nodes[jr]={leaf:!0,nodes:[],point:null,x:null,y:null}),or,vr,Ar,er,ar,xr,fr)}An>Ln?Wt=Dt+An:Lt=At+Ln;var cr={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(Hn){jn(cr,Hn,+Ht(Hn,++wt),+jt(Hn,wt),At,Dt,Lt,Wt)}};if(cr.visit=function(Hn){Pi(Hn,cr,At,Dt,Lt,Wt)},cr.find=function(Hn){return function(or,vr,Ar,er,ar,xr,fr){var wr,Er=1/0;return function Rr(Fr,jr,qr,ui,ki){if(!(jr>xr||qr>fr||ui<er||ki<ar)){if(ra=Fr.point){var ra,ji=vr-Fr.x,Ki=Ar-Fr.y,pi=ji*ji+Ki*Ki;if(pi<Er){var Gr=Math.sqrt(Er=pi);er=vr-Gr,ar=Ar-Gr,xr=vr+Gr,fr=Ar+Gr,wr=ra}}for(var xi=Fr.nodes,ri=.5*(jr+ui),Xr=.5*(qr+ki),bi=(Ar>=Xr)<<1|vr>=ri,Ai=bi+4;bi<Ai;++bi)if(Fr=xi[3&bi])switch(3&bi){case 0:Rr(Fr,jr,qr,ri,Xr);break;case 1:Rr(Fr,ri,qr,ui,Xr);break;case 2:Rr(Fr,jr,Xr,ri,ki);break;case 3:Rr(Fr,ri,Xr,ui,ki)}}}(or,er,ar,xr,fr),wr}(cr,Hn[0],Hn[1],At,Dt,Lt,Wt)},wt=-1,V==null){for(;++wt<Et;)jn(cr,qe[wt],lt[wt],ft[wt],At,Dt,Lt,Wt);--wt}else qe.forEach(cr.add);return lt=ft=qe=$e=null,cr}return Ue.x=function(qe){return arguments.length?(Le=qe,Ue):Le},Ue.y=function(qe){return arguments.length?(De=qe,Ue):De},Ue.extent=function(qe){return arguments.length?(qe==null?V=J=re=ue=null:(V=+qe[0][0],J=+qe[0][1],re=+qe[1][0],ue=+qe[1][1]),Ue):V==null?null:[[V,J],[re,ue]]},Ue.size=function(qe){return arguments.length?(qe==null?V=J=re=ue=null:(V=J=0,re=+qe[0],ue=+qe[1]),Ue):V==null?null:[re-V,ue-J]},Ue},s.interpolateRgb=uo,s.interpolateObject=ko,s.interpolateNumber=Xi,s.interpolateString=Ka;var Ja=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ao=new RegExp(Ja.source,"g");function Sa(L,V){for(var J,re=s.interpolators.length;--re>=0&&!(J=s.interpolators[re](L,V)););return J}function Ra(L,V){var J,re=[],ue=[],xe=L.length,Le=V.length,De=Math.min(L.length,V.length);for(J=0;J<De;++J)re.push(Sa(L[J],V[J]));for(;J<xe;++J)ue[J]=L[J];for(;J<Le;++J)ue[J]=V[J];return function(Ue){for(J=0;J<De;++J)ue[J]=re[J](Ue);return ue}}s.interpolate=Sa,s.interpolators=[function(L,V){var J=typeof V;return(J==="string"?Mn.has(V.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(V)?uo:Ka:V instanceof Re?uo:Array.isArray(V)?Ra:J==="object"&&isNaN(V)?ko:Xi)(L,V)}],s.interpolateArray=Ra;var Fa=function(){return I},ti=s.map({linear:Fa,poly:function(L){return function(V){return Math.pow(V,L)}},quad:function(){return Ba},cubic:function(){return Mo},sin:function(){return So},exp:function(){return fo},circle:function(){return Eo},elastic:function(L,V){var J;return arguments.length<2&&(V=.45),arguments.length?J=V/Pt*Math.asin(1/L):(L=1,J=V/4),function(re){return 1+L*Math.pow(2,-10*re)*Math.sin((re-J)*Pt/V)}},back:function(L){return L||(L=1.70158),function(V){return V*V*((L+1)*V-L)}},bounce:function(){return eo}}),Fi=s.map({in:I,out:co,"in-out":$a,"out-in":function(L){return $a(co(L))}});function co(L){return function(V){return 1-L(1-V)}}function $a(L){return function(V){return .5*(V<.5?L(2*V):2-L(2-2*V))}}function Ba(L){return L*L}function Mo(L){return L*L*L}function Qa(L){if(L<=0)return 0;if(L>=1)return 1;var V=L*L,J=V*L;return 4*(L<.5?J:3*(L-V)+J-.75)}function So(L){return 1-Math.cos(L*He)}function fo(L){return Math.pow(2,10*(L-1))}function Eo(L){return 1-Math.sqrt(1-L*L)}function eo(L){return L<.36363636363636365?7.5625*L*L:L<.7272727272727273?7.5625*(L-=.5454545454545454)*L+.75:L<.9090909090909091?7.5625*(L-=.8181818181818182)*L+.9375:7.5625*(L-=.9545454545454546)*L+.984375}function Ks(L,V){return V-=L,function(J){return Math.round(L+V*J)}}function Bs(L){var V,J,re,ue=[L.a,L.b],xe=[L.c,L.d],Le=al(ue),De=Ho(ue,xe),Ue=al(((V=xe)[0]+=(re=-De)*(J=ue)[0],V[1]+=re*J[1],V))||0;ue[0]*xe[1]<xe[0]*ue[1]&&(ue[0]*=-1,ue[1]*=-1,Le*=-1,De*=-1),this.rotate=(Le?Math.atan2(ue[1],ue[0]):Math.atan2(-xe[0],xe[1]))*Be,this.translate=[L.e,L.f],this.scale=[Le,Ue],this.skew=Ue?Math.atan2(De,Ue)*Be:0}function Ho(L,V){return L[0]*V[0]+L[1]*V[1]}function al(L){var V=Math.sqrt(Ho(L,L));return V&&(L[0]/=V,L[1]/=V),V}s.ease=function(L){var V,J=L.indexOf("-"),re=J>=0?L.slice(0,J):L,ue=J>=0?L.slice(J+1):"in";return re=ti.get(re)||Fa,ue=Fi.get(ue)||I,V=ue(re.apply(null,T.call(arguments,1))),function(xe){return xe<=0?0:xe>=1?1:V(xe)}},s.interpolateHcl=function(L,V){L=s.hcl(L),V=s.hcl(V);var J=L.h,re=L.c,ue=L.l,xe=V.h-J,Le=V.c-re,De=V.l-ue;return isNaN(Le)&&(Le=0,re=isNaN(re)?V.c:re),isNaN(xe)?(xe=0,J=isNaN(J)?V.h:J):xe>180?xe-=360:xe<-180&&(xe+=360),function(Ue){return mt(J+xe*Ue,re+Le*Ue,ue+De*Ue)+""}},s.interpolateHsl=function(L,V){L=s.hsl(L),V=s.hsl(V);var J=L.h,re=L.s,ue=L.l,xe=V.h-J,Le=V.s-re,De=V.l-ue;return isNaN(Le)&&(Le=0,re=isNaN(re)?V.s:re),isNaN(xe)?(xe=0,J=isNaN(J)?V.h:J):xe>180?xe-=360:xe<-180&&(xe+=360),function(Ue){return ut(J+xe*Ue,re+Le*Ue,ue+De*Ue)+""}},s.interpolateLab=function(L,V){L=s.lab(L),V=s.lab(V);var J=L.l,re=L.a,ue=L.b,xe=V.l-J,Le=V.a-re,De=V.b-ue;return function(Ue){return an(J+xe*Ue,re+Le*Ue,ue+De*Ue)+""}},s.interpolateRound=Ks,s.transform=function(L){var V=f.createElementNS(s.ns.prefix.svg,"g");return(s.transform=function(J){if(J!=null){V.setAttribute("transform",J);var re=V.transform.baseVal.consolidate()}return new Bs(re?re.matrix:ol)})(L)},Bs.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ol={a:1,b:0,c:0,d:1,e:0,f:0};function Go(L){return L.length?L.pop()+",":""}function sl(L,V){var J=[],re=[];return L=s.transform(L),V=s.transform(V),function(ue,xe,Le,De){if(ue[0]!==xe[0]||ue[1]!==xe[1]){var Ue=Le.push("translate(",null,",",null,")");De.push({i:Ue-4,x:Xi(ue[0],xe[0])},{i:Ue-2,x:Xi(ue[1],xe[1])})}else(xe[0]||xe[1])&&Le.push("translate("+xe+")")}(L.translate,V.translate,J,re),function(ue,xe,Le,De){ue!==xe?(ue-xe>180?xe+=360:xe-ue>180&&(ue+=360),De.push({i:Le.push(Go(Le)+"rotate(",null,")")-2,x:Xi(ue,xe)})):xe&&Le.push(Go(Le)+"rotate("+xe+")")}(L.rotate,V.rotate,J,re),function(ue,xe,Le,De){ue!==xe?De.push({i:Le.push(Go(Le)+"skewX(",null,")")-2,x:Xi(ue,xe)}):xe&&Le.push(Go(Le)+"skewX("+xe+")")}(L.skew,V.skew,J,re),function(ue,xe,Le,De){if(ue[0]!==xe[0]||ue[1]!==xe[1]){var Ue=Le.push(Go(Le)+"scale(",null,",",null,")");De.push({i:Ue-4,x:Xi(ue[0],xe[0])},{i:Ue-2,x:Xi(ue[1],xe[1])})}else xe[0]===1&&xe[1]===1||Le.push(Go(Le)+"scale("+xe+")")}(L.scale,V.scale,J,re),L=V=null,function(ue){for(var xe,Le=-1,De=re.length;++Le<De;)J[(xe=re[Le]).i]=xe.x(ue);return J.join("")}}function bl(L,V){return V=(V-=L=+L)||1/V,function(J){return(J-L)/V}}function _l(L,V){return V=(V-=L=+L)||1/V,function(J){return Math.max(0,Math.min(1,(J-L)/V))}}function Wo(L){for(var V=L.source,J=L.target,re=function(Le,De){if(Le===De)return Le;for(var Ue=to(Le),qe=to(De),$e=Ue.pop(),lt=qe.pop(),ft=null;$e===lt;)ft=$e,$e=Ue.pop(),lt=qe.pop();return ft}(V,J),ue=[V];V!==re;)V=V.parent,ue.push(V);for(var xe=ue.length;J!==re;)ue.splice(xe,0,J),J=J.parent;return ue}function to(L){for(var V=[],J=L.parent;J!=null;)V.push(L),L=J,J=J.parent;return V.push(L),V}function is(L){L.fixed|=2}function Yo(L){L.fixed&=-7}function bs(L){L.fixed|=4,L.px=L.x,L.py=L.y}function Xo(L){L.fixed&=-5}function Na(L,V,J){var re=0,ue=0;if(L.charge=0,!L.leaf)for(var xe,Le=L.nodes,De=Le.length,Ue=-1;++Ue<De;)(xe=Le[Ue])!=null&&(Na(xe,V,J),L.charge+=xe.charge,re+=xe.charge*xe.cx,ue+=xe.charge*xe.cy);if(L.point){L.leaf||(L.point.x+=Math.random()-.5,L.point.y+=Math.random()-.5);var qe=V*J[L.point.index];L.charge+=L.pointCharge=qe,re+=qe*L.point.x,ue+=qe*L.point.y}L.cx=re/L.charge,L.cy=ue/L.charge}s.interpolateTransform=sl,s.layout={},s.layout.bundle=function(){return function(L){for(var V=[],J=-1,re=L.length;++J<re;)V.push(Wo(L[J]));return V}},s.layout.chord=function(){var L,V,J,re,ue,xe,Le,De={},Ue=0;function qe(){var lt,ft,wt,Et,At,Dt={},Lt=[],Wt=s.range(re),Ht=[];for(L=[],V=[],lt=0,Et=-1;++Et<re;){for(ft=0,At=-1;++At<re;)ft+=J[Et][At];Lt.push(ft),Ht.push(s.range(re)),lt+=ft}for(ue&&Wt.sort(function(cr,Hn){return ue(Lt[cr],Lt[Hn])}),xe&&Ht.forEach(function(cr,Hn){cr.sort(function(or,vr){return xe(J[Hn][or],J[Hn][vr])})}),lt=(Pt-Ue*re)/lt,ft=0,Et=-1;++Et<re;){for(wt=ft,At=-1;++At<re;){var jt=Wt[Et],hn=Ht[jt][At],vn=J[jt][hn],An=ft,Ln=ft+=vn*lt;Dt[jt+"-"+hn]={index:jt,subindex:hn,startAngle:An,endAngle:Ln,value:vn}}V[jt]={index:jt,startAngle:wt,endAngle:ft,value:Lt[jt]},ft+=Ue}for(Et=-1;++Et<re;)for(At=Et-1;++At<re;){var jn=Dt[Et+"-"+At],tr=Dt[At+"-"+Et];(jn.value||tr.value)&&L.push(jn.value<tr.value?{source:tr,target:jn}:{source:jn,target:tr})}Le&&$e()}function $e(){L.sort(function(lt,ft){return Le((lt.source.value+lt.target.value)/2,(ft.source.value+ft.target.value)/2)})}return De.matrix=function(lt){return arguments.length?(re=(J=lt)&&J.length,L=V=null,De):J},De.padding=function(lt){return arguments.length?(Ue=lt,L=V=null,De):Ue},De.sortGroups=function(lt){return arguments.length?(ue=lt,L=V=null,De):ue},De.sortSubgroups=function(lt){return arguments.length?(xe=lt,L=null,De):xe},De.sortChords=function(lt){return arguments.length?(Le=lt,L&&$e(),De):Le},De.chords=function(){return L||qe(),L},De.groups=function(){return V||qe(),V},De},s.layout.force=function(){var L,V,J,re,ue,xe,Le={},De=s.dispatch("start","tick","end"),Ue=[1,1],qe=.9,$e=Js,lt=Lo,ft=-30,wt=ho,Et=.1,At=.64,Dt=[],Lt=[];function Wt(jt){return function(hn,vn,An,Ln){if(hn.point!==jt){var jn=hn.cx-jt.x,tr=hn.cy-jt.y,cr=Ln-vn,Hn=jn*jn+tr*tr;if(cr*cr/At<Hn){if(Hn<wt){var or=hn.charge/Hn;jt.px-=jn*or,jt.py-=tr*or}return!0}hn.point&&Hn&&Hn<wt&&(or=hn.pointCharge/Hn,jt.px-=jn*or,jt.py-=tr*or)}return!hn.charge}}function Ht(jt){jt.px=s.event.x,jt.py=s.event.y,Le.resume()}return Le.tick=function(){if((J*=.99)<.005)return L=null,De.end({type:"end",alpha:J=0}),!0;var jt,hn,vn,An,Ln,jn,tr,cr,Hn,or=Dt.length,vr=Lt.length;for(hn=0;hn<vr;++hn)An=(vn=Lt[hn]).source,(jn=(cr=(Ln=vn.target).x-An.x)*cr+(Hn=Ln.y-An.y)*Hn)&&(cr*=jn=J*ue[hn]*((jn=Math.sqrt(jn))-re[hn])/jn,Hn*=jn,Ln.x-=cr*(tr=An.weight+Ln.weight?An.weight/(An.weight+Ln.weight):.5),Ln.y-=Hn*tr,An.x+=cr*(tr=1-tr),An.y+=Hn*tr);if((tr=J*Et)&&(cr=Ue[0]/2,Hn=Ue[1]/2,hn=-1,tr))for(;++hn<or;)(vn=Dt[hn]).x+=(cr-vn.x)*tr,vn.y+=(Hn-vn.y)*tr;if(ft)for(Na(jt=s.geom.quadtree(Dt),J,xe),hn=-1;++hn<or;)(vn=Dt[hn]).fixed||jt.visit(Wt(vn));for(hn=-1;++hn<or;)(vn=Dt[hn]).fixed?(vn.x=vn.px,vn.y=vn.py):(vn.x-=(vn.px-(vn.px=vn.x))*qe,vn.y-=(vn.py-(vn.py=vn.y))*qe);De.tick({type:"tick",alpha:J})},Le.nodes=function(jt){return arguments.length?(Dt=jt,Le):Dt},Le.links=function(jt){return arguments.length?(Lt=jt,Le):Lt},Le.size=function(jt){return arguments.length?(Ue=jt,Le):Ue},Le.linkDistance=function(jt){return arguments.length?($e=typeof jt=="function"?jt:+jt,Le):$e},Le.distance=Le.linkDistance,Le.linkStrength=function(jt){return arguments.length?(lt=typeof jt=="function"?jt:+jt,Le):lt},Le.friction=function(jt){return arguments.length?(qe=+jt,Le):qe},Le.charge=function(jt){return arguments.length?(ft=typeof jt=="function"?jt:+jt,Le):ft},Le.chargeDistance=function(jt){return arguments.length?(wt=jt*jt,Le):Math.sqrt(wt)},Le.gravity=function(jt){return arguments.length?(Et=+jt,Le):Et},Le.theta=function(jt){return arguments.length?(At=jt*jt,Le):Math.sqrt(At)},Le.alpha=function(jt){return arguments.length?(jt=+jt,J?jt>0?J=jt:(L.c=null,L.t=NaN,L=null,De.end({type:"end",alpha:J=0})):jt>0&&(De.start({type:"start",alpha:J=jt}),L=$t(Le.tick)),Le):J},Le.start=function(){var jt,hn,vn,An=Dt.length,Ln=Lt.length,jn=Ue[0],tr=Ue[1];for(jt=0;jt<An;++jt)(vn=Dt[jt]).index=jt,vn.weight=0;for(jt=0;jt<Ln;++jt)typeof(vn=Lt[jt]).source=="number"&&(vn.source=Dt[vn.source]),typeof vn.target=="number"&&(vn.target=Dt[vn.target]),++vn.source.weight,++vn.target.weight;for(jt=0;jt<An;++jt)vn=Dt[jt],isNaN(vn.x)&&(vn.x=cr("x",jn)),isNaN(vn.y)&&(vn.y=cr("y",tr)),isNaN(vn.px)&&(vn.px=vn.x),isNaN(vn.py)&&(vn.py=vn.y);if(re=[],typeof $e=="function")for(jt=0;jt<Ln;++jt)re[jt]=+$e.call(this,Lt[jt],jt);else for(jt=0;jt<Ln;++jt)re[jt]=$e;if(ue=[],typeof lt=="function")for(jt=0;jt<Ln;++jt)ue[jt]=+lt.call(this,Lt[jt],jt);else for(jt=0;jt<Ln;++jt)ue[jt]=lt;if(xe=[],typeof ft=="function")for(jt=0;jt<An;++jt)xe[jt]=+ft.call(this,Dt[jt],jt);else for(jt=0;jt<An;++jt)xe[jt]=ft;function cr(Hn,or){if(!hn){for(hn=new Array(An),ar=0;ar<An;++ar)hn[ar]=[];for(ar=0;ar<Ln;++ar){var vr=Lt[ar];hn[vr.source.index].push(vr.target),hn[vr.target.index].push(vr.source)}}for(var Ar,er=hn[jt],ar=-1,xr=er.length;++ar<xr;)if(!isNaN(Ar=er[ar][Hn]))return Ar;return Math.random()*or}return Le.resume()},Le.resume=function(){return Le.alpha(.1)},Le.stop=function(){return Le.alpha(0)},Le.drag=function(){if(V||(V=s.behavior.drag().origin(I).on("dragstart.force",is).on("drag.force",Ht).on("dragend.force",Yo)),!arguments.length)return V;this.on("mouseover.force",bs).on("mouseout.force",Xo).call(V)},s.rebind(Le,De,"on")};var Js=20,Lo=1,ho=1/0;function po(L,V){return s.rebind(L,V,"sort","children","value"),L.nodes=L,L.links=os,L}function Co(L,V){for(var J=[L];(L=J.pop())!=null;)if(V(L),(ue=L.children)&&(re=ue.length))for(var re,ue;--re>=0;)J.push(ue[re])}function Ur(L,V){for(var J=[L],re=[];(L=J.pop())!=null;)if(re.push(L),(xe=L.children)&&(ue=xe.length))for(var ue,xe,Le=-1;++Le<ue;)J.push(xe[Le]);for(;(L=re.pop())!=null;)V(L)}function as(L){return L.children}function wl(L){return L.value}function Ns(L,V){return V.value-L.value}function os(L){return s.merge(L.map(function(V){return(V.children||[]).map(function(J){return{source:V,target:J}})}))}s.layout.hierarchy=function(){var L=Ns,V=as,J=wl;function re(ue){var xe,Le=[ue],De=[];for(ue.depth=0;(xe=Le.pop())!=null;)if(De.push(xe),(qe=V.call(re,xe,xe.depth))&&(Ue=qe.length)){for(var Ue,qe,$e;--Ue>=0;)Le.push($e=qe[Ue]),$e.parent=xe,$e.depth=xe.depth+1;J&&(xe.value=0),xe.children=qe}else J&&(xe.value=+J.call(re,xe,xe.depth)||0),delete xe.children;return Ur(ue,function(lt){var ft,wt;L&&(ft=lt.children)&&ft.sort(L),J&&(wt=lt.parent)&&(wt.value+=lt.value)}),De}return re.sort=function(ue){return arguments.length?(L=ue,re):L},re.children=function(ue){return arguments.length?(V=ue,re):V},re.value=function(ue){return arguments.length?(J=ue,re):J},re.revalue=function(ue){return J&&(Co(ue,function(xe){xe.children&&(xe.value=0)}),Ur(ue,function(xe){var Le;xe.children||(xe.value=+J.call(re,xe,xe.depth)||0),(Le=xe.parent)&&(Le.value+=xe.value)})),ue},re},s.layout.partition=function(){var L=s.layout.hierarchy(),V=[1,1];function J(xe,Le,De,Ue){var qe=xe.children;if(xe.x=Le,xe.y=xe.depth*Ue,xe.dx=De,xe.dy=Ue,qe&&($e=qe.length)){var $e,lt,ft,wt=-1;for(De=xe.value?De/xe.value:0;++wt<$e;)J(lt=qe[wt],Le,ft=lt.value*De,Ue),Le+=ft}}function re(xe){var Le=xe.children,De=0;if(Le&&(Ue=Le.length))for(var Ue,qe=-1;++qe<Ue;)De=Math.max(De,re(Le[qe]));return 1+De}function ue(xe,Le){var De=L.call(this,xe,Le);return J(De[0],0,V[0],V[1]/re(De[0])),De}return ue.size=function(xe){return arguments.length?(V=xe,ue):V},po(ue,L)},s.layout.pie=function(){var L=Number,V=ll,J=0,re=Pt,ue=0;function xe(Le){var De,Ue=Le.length,qe=Le.map(function(Wt,Ht){return+L.call(xe,Wt,Ht)}),$e=+(typeof J=="function"?J.apply(this,arguments):J),lt=(typeof re=="function"?re.apply(this,arguments):re)-$e,ft=Math.min(Math.abs(lt)/Ue,+(typeof ue=="function"?ue.apply(this,arguments):ue)),wt=ft*(lt<0?-1:1),Et=s.sum(qe),At=Et?(lt-Ue*wt)/Et:0,Dt=s.range(Ue),Lt=[];return V!=null&&Dt.sort(V===ll?function(Wt,Ht){return qe[Ht]-qe[Wt]}:function(Wt,Ht){return V(Le[Wt],Le[Ht])}),Dt.forEach(function(Wt){Lt[Wt]={data:Le[Wt],value:De=qe[Wt],startAngle:$e,endAngle:$e+=De*At+wt,padAngle:ft}}),Lt}return xe.value=function(Le){return arguments.length?(L=Le,xe):L},xe.sort=function(Le){return arguments.length?(V=Le,xe):V},xe.startAngle=function(Le){return arguments.length?(J=Le,xe):J},xe.endAngle=function(Le){return arguments.length?(re=Le,xe):re},xe.padAngle=function(Le){return arguments.length?(ue=Le,xe):ue},xe};var ll={};function Tl(L){return L.x}function js(L){return L.y}function kl(L,V,J){L.y0=V,L.y=J}s.layout.stack=function(){var L=I,V=go,J=ja,re=kl,ue=Tl,xe=js;function Le(De,Ue){if(!(ft=De.length))return De;var qe=De.map(function(Wt,Ht){return L.call(Le,Wt,Ht)}),$e=qe.map(function(Wt){return Wt.map(function(Ht,jt){return[ue.call(Le,Ht,jt),xe.call(Le,Ht,jt)]})}),lt=V.call(Le,$e,Ue);qe=s.permute(qe,lt),$e=s.permute($e,lt);var ft,wt,Et,At,Dt=J.call(Le,$e,Ue),Lt=qe[0].length;for(Et=0;Et<Lt;++Et)for(re.call(Le,qe[0][Et],At=Dt[Et],$e[0][Et][1]),wt=1;wt<ft;++wt)re.call(Le,qe[wt][Et],At+=$e[wt-1][Et][1],$e[wt][Et][1]);return De}return Le.values=function(De){return arguments.length?(L=De,Le):L},Le.order=function(De){return arguments.length?(V=typeof De=="function"?De:Oo.get(De)||go,Le):V},Le.offset=function(De){return arguments.length?(J=typeof De=="function"?De:Zo.get(De)||ja,Le):J},Le.x=function(De){return arguments.length?(ue=De,Le):ue},Le.y=function(De){return arguments.length?(xe=De,Le):xe},Le.out=function(De){return arguments.length?(re=De,Le):re},Le};var Oo=s.map({"inside-out":function(L){var V,J,re=L.length,ue=L.map(ss),xe=L.map(ul),Le=s.range(re).sort(function(lt,ft){return ue[lt]-ue[ft]}),De=0,Ue=0,qe=[],$e=[];for(V=0;V<re;++V)J=Le[V],De<Ue?(De+=xe[J],qe.push(J)):(Ue+=xe[J],$e.push(J));return $e.reverse().concat(qe)},reverse:function(L){return s.range(L.length).reverse()},default:go}),Zo=s.map({silhouette:function(L){var V,J,re,ue=L.length,xe=L[0].length,Le=[],De=0,Ue=[];for(J=0;J<xe;++J){for(V=0,re=0;V<ue;V++)re+=L[V][J][1];re>De&&(De=re),Le.push(re)}for(J=0;J<xe;++J)Ue[J]=(De-Le[J])/2;return Ue},wiggle:function(L){var V,J,re,ue,xe,Le,De,Ue,qe,$e=L.length,lt=L[0],ft=lt.length,wt=[];for(wt[0]=Ue=qe=0,J=1;J<ft;++J){for(V=0,ue=0;V<$e;++V)ue+=L[V][J][1];for(V=0,xe=0,De=lt[J][0]-lt[J-1][0];V<$e;++V){for(re=0,Le=(L[V][J][1]-L[V][J-1][1])/(2*De);re<V;++re)Le+=(L[re][J][1]-L[re][J-1][1])/De;xe+=Le*L[V][J][1]}wt[J]=Ue-=ue?xe/ue*De:0,Ue<qe&&(qe=Ue)}for(J=0;J<ft;++J)wt[J]-=qe;return wt},expand:function(L){var V,J,re,ue=L.length,xe=L[0].length,Le=1/ue,De=[];for(J=0;J<xe;++J){for(V=0,re=0;V<ue;V++)re+=L[V][J][1];if(re)for(V=0;V<ue;V++)L[V][J][1]/=re;else for(V=0;V<ue;V++)L[V][J][1]=Le}for(J=0;J<xe;++J)De[J]=0;return De},zero:ja});function go(L){return s.range(L.length)}function ja(L){for(var V=-1,J=L[0].length,re=[];++V<J;)re[V]=0;return re}function ss(L){for(var V,J=1,re=0,ue=L[0][1],xe=L.length;J<xe;++J)(V=L[J][1])>ue&&(re=J,ue=V);return re}function ul(L){return L.reduce(_s,0)}function _s(L,V){return L+V[1]}function Us(L,V){return ba(L,Math.ceil(Math.log(V.length)/Math.LN2+1))}function ba(L,V){for(var J=-1,re=+L[0],ue=(L[1]-re)/V,xe=[];++J<=V;)xe[J]=ue*J+re;return xe}function Vs(L){return[s.min(L),s.max(L)]}function cl(L,V){return L.value-V.value}function ls(L,V){var J=L._pack_next;L._pack_next=V,V._pack_prev=L,V._pack_next=J,J._pack_prev=V}function Ko(L,V){L._pack_next=V,V._pack_prev=L}function us(L,V){var J=V.x-L.x,re=V.y-L.y,ue=L.r+V.r;return .999*ue*ue>J*J+re*re}function Jo(L){if((V=L.children)&&(Ue=V.length)){var V,J,re,ue,xe,Le,De,Ue,qe=1/0,$e=-1/0,lt=1/0,ft=-1/0;if(V.forEach($o),(J=V[0]).x=-J.r,J.y=0,Ht(J),Ue>1&&((re=V[1]).x=re.r,re.y=0,Ht(re),Ue>2))for($r(J,re,ue=V[2]),Ht(ue),ls(J,ue),J._pack_prev=ue,ls(ue,re),re=J._pack_next,xe=3;xe<Ue;xe++){$r(J,re,ue=V[xe]);var wt=0,Et=1,At=1;for(Le=re._pack_next;Le!==re;Le=Le._pack_next,Et++)if(us(Le,ue)){wt=1;break}if(wt==1)for(De=J._pack_prev;De!==Le._pack_prev&&!us(De,ue);De=De._pack_prev,At++);wt?(Et<At||Et==At&&re.r<J.r?Ko(J,re=Le):Ko(J=De,re),xe--):(ls(J,ue),re=ue,Ht(ue))}var Dt=(qe+$e)/2,Lt=(lt+ft)/2,Wt=0;for(xe=0;xe<Ue;xe++)(ue=V[xe]).x-=Dt,ue.y-=Lt,Wt=Math.max(Wt,ue.r+Math.sqrt(ue.x*ue.x+ue.y*ue.y));L.r=Wt,V.forEach(ws)}function Ht(jt){qe=Math.min(jt.x-jt.r,qe),$e=Math.max(jt.x+jt.r,$e),lt=Math.min(jt.y-jt.r,lt),ft=Math.max(jt.y+jt.r,ft)}}function $o(L){L._pack_next=L._pack_prev=L}function ws(L){delete L._pack_next,delete L._pack_prev}function qs(L,V,J,re){var ue=L.children;if(L.x=V+=re*L.x,L.y=J+=re*L.y,L.r*=re,ue)for(var xe=-1,Le=ue.length;++xe<Le;)qs(ue[xe],V,J,re)}function $r(L,V,J){var re=L.r+J.r,ue=V.x-L.x,xe=V.y-L.y;if(re&&(ue||xe)){var Le=V.r+J.r,De=ue*ue+xe*xe,Ue=.5+((re*=re)-(Le*=Le))/(2*De),qe=Math.sqrt(Math.max(0,2*Le*(re+De)-(re-=De)*re-Le*Le))/(2*De);J.x=L.x+Ue*ue+qe*xe,J.y=L.y+Ue*xe-qe*ue}else J.x=L.x+re,J.y=L.y}function Po(L,V){return L.parent==V.parent?1:2}function Zi(L){var V=L.children;return V.length?V[0]:L.t}function Ua(L){var V,J=L.children;return(V=J.length)?J[V-1]:L.t}function Wr(L,V,J){var re=J/(V.i-L.i);V.c-=re,V.s+=J,L.c+=re,V.z+=J,V.m+=J}function Jr(L,V,J){return L.a.parent===V.parent?L.a:J}function _a(L){var V=L.children;return V&&V.length?_a(V[0]):L}function cs(L){var V,J=L.children;return J&&(V=J.length)?cs(J[V-1]):L}function Ts(L){return{x:L.x,y:L.y,dx:L.dx,dy:L.dy}}function Hs(L,V){var J=L.x+V[3],re=L.y+V[0],ue=L.dx-V[1]-V[3],xe=L.dy-V[0]-V[2];return ue<0&&(J+=ue/2,ue=0),xe<0&&(re+=xe/2,xe=0),{x:J,y:re,dx:ue,dy:xe}}function ks(L){var V=L[0],J=L[L.length-1];return V<J?[V,J]:[J,V]}function As(L){return L.rangeExtent?L.rangeExtent():ks(L.range())}function Ea(L,V,J,re){var ue=J(L[0],L[1]),xe=re(V[0],V[1]);return function(Le){return xe(ue(Le))}}function Io(L,V){var J,re=0,ue=L.length-1,xe=L[re],Le=L[ue];return Le<xe&&(J=re,re=ue,ue=J,J=xe,xe=Le,Le=J),L[re]=V.floor(xe),L[ue]=V.ceil(Le),L}function zo(L){return L?{floor:function(V){return Math.floor(V/L)*L},ceil:function(V){return Math.ceil(V/L)*L}}:ta}s.layout.histogram=function(){var L=!0,V=Number,J=Vs,re=Us;function ue(xe,Le){for(var De,Ue,qe=[],$e=xe.map(V,this),lt=J.call(this,$e,Le),ft=re.call(this,lt,$e,Le),wt=(Le=-1,$e.length),Et=ft.length-1,At=L?1:1/wt;++Le<Et;)(De=qe[Le]=[]).dx=ft[Le+1]-(De.x=ft[Le]),De.y=0;if(Et>0)for(Le=-1;++Le<wt;)(Ue=$e[Le])>=lt[0]&&Ue<=lt[1]&&((De=qe[s.bisect(ft,Ue,1,Et)-1]).y+=At,De.push(xe[Le]));return qe}return ue.value=function(xe){return arguments.length?(V=xe,ue):V},ue.range=function(xe){return arguments.length?(J=zn(xe),ue):J},ue.bins=function(xe){return arguments.length?(re=typeof xe=="number"?function(Le){return ba(Le,xe)}:zn(xe),ue):re},ue.frequency=function(xe){return arguments.length?(L=!!xe,ue):L},ue},s.layout.pack=function(){var L,V=s.layout.hierarchy().sort(cl),J=0,re=[1,1];function ue(xe,Le){var De=V.call(this,xe,Le),Ue=De[0],qe=re[0],$e=re[1],lt=L==null?Math.sqrt:typeof L=="function"?L:function(){return L};if(Ue.x=Ue.y=0,Ur(Ue,function(wt){wt.r=+lt(wt.value)}),Ur(Ue,Jo),J){var ft=J*(L?1:Math.max(2*Ue.r/qe,2*Ue.r/$e))/2;Ur(Ue,function(wt){wt.r+=ft}),Ur(Ue,Jo),Ur(Ue,function(wt){wt.r-=ft})}return qs(Ue,qe/2,$e/2,L?1:1/Math.max(2*Ue.r/qe,2*Ue.r/$e)),De}return ue.size=function(xe){return arguments.length?(re=xe,ue):re},ue.radius=function(xe){return arguments.length?(L=xe==null||typeof xe=="function"?xe:+xe,ue):L},ue.padding=function(xe){return arguments.length?(J=+xe,ue):J},po(ue,V)},s.layout.tree=function(){var L=s.layout.hierarchy().sort(null).value(null),V=Po,J=[1,1],re=null;function ue(Ue,qe){var $e=L.call(this,Ue,qe),lt=$e[0],ft=function(Ht){for(var jt,hn={A:null,children:[Ht]},vn=[hn];(jt=vn.pop())!=null;)for(var An,Ln=jt.children,jn=0,tr=Ln.length;jn<tr;++jn)vn.push((Ln[jn]=An={_:Ln[jn],parent:jt,children:(An=Ln[jn].children)&&An.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:jn}).a=An);return hn.children[0]}(lt);if(Ur(ft,xe),ft.parent.m=-ft.z,Co(ft,Le),re)Co(lt,De);else{var wt=lt,Et=lt,At=lt;Co(lt,function(Ht){Ht.x<wt.x&&(wt=Ht),Ht.x>Et.x&&(Et=Ht),Ht.depth>At.depth&&(At=Ht)});var Dt=V(wt,Et)/2-wt.x,Lt=J[0]/(Et.x+V(Et,wt)/2+Dt),Wt=J[1]/(At.depth||1);Co(lt,function(Ht){Ht.x=(Ht.x+Dt)*Lt,Ht.y=Ht.depth*Wt})}return $e}function xe(Ue){var qe=Ue.children,$e=Ue.parent.children,lt=Ue.i?$e[Ue.i-1]:null;if(qe.length){(function(wt){for(var Et,At=0,Dt=0,Lt=wt.children,Wt=Lt.length;--Wt>=0;)(Et=Lt[Wt]).z+=At,Et.m+=At,At+=Et.s+(Dt+=Et.c)})(Ue);var ft=(qe[0].z+qe[qe.length-1].z)/2;lt?(Ue.z=lt.z+V(Ue._,lt._),Ue.m=Ue.z-ft):Ue.z=ft}else lt&&(Ue.z=lt.z+V(Ue._,lt._));Ue.parent.A=function(wt,Et,At){if(Et){for(var Dt,Lt=wt,Wt=wt,Ht=Et,jt=Lt.parent.children[0],hn=Lt.m,vn=Wt.m,An=Ht.m,Ln=jt.m;Ht=Ua(Ht),Lt=Zi(Lt),Ht&&Lt;)jt=Zi(jt),(Wt=Ua(Wt)).a=wt,(Dt=Ht.z+An-Lt.z-hn+V(Ht._,Lt._))>0&&(Wr(Jr(Ht,wt,At),wt,Dt),hn+=Dt,vn+=Dt),An+=Ht.m,hn+=Lt.m,Ln+=jt.m,vn+=Wt.m;Ht&&!Ua(Wt)&&(Wt.t=Ht,Wt.m+=An-vn),Lt&&!Zi(jt)&&(jt.t=Lt,jt.m+=hn-Ln,At=wt)}return At}(Ue,lt,Ue.parent.A||$e[0])}function Le(Ue){Ue._.x=Ue.z+Ue.parent.m,Ue.m+=Ue.parent.m}function De(Ue){Ue.x*=J[0],Ue.y=Ue.depth*J[1]}return ue.separation=function(Ue){return arguments.length?(V=Ue,ue):V},ue.size=function(Ue){return arguments.length?(re=(J=Ue)==null?De:null,ue):re?null:J},ue.nodeSize=function(Ue){return arguments.length?(re=(J=Ue)==null?null:De,ue):re?J:null},po(ue,L)},s.layout.cluster=function(){var L=s.layout.hierarchy().sort(null).value(null),V=Po,J=[1,1],re=!1;function ue(xe,Le){var De,Ue=L.call(this,xe,Le),qe=Ue[0],$e=0;Ur(qe,function(At){var Dt=At.children;Dt&&Dt.length?(At.x=function(Lt){return Lt.reduce(function(Wt,Ht){return Wt+Ht.x},0)/Lt.length}(Dt),At.y=function(Lt){return 1+s.max(Lt,function(Wt){return Wt.y})}(Dt)):(At.x=De?$e+=V(At,De):0,At.y=0,De=At)});var lt=_a(qe),ft=cs(qe),wt=lt.x-V(lt,ft)/2,Et=ft.x+V(ft,lt)/2;return Ur(qe,re?function(At){At.x=(At.x-qe.x)*J[0],At.y=(qe.y-At.y)*J[1]}:function(At){At.x=(At.x-wt)/(Et-wt)*J[0],At.y=(1-(qe.y?At.y/qe.y:1))*J[1]}),Ue}return ue.separation=function(xe){return arguments.length?(V=xe,ue):V},ue.size=function(xe){return arguments.length?(re=(J=xe)==null,ue):re?null:J},ue.nodeSize=function(xe){return arguments.length?(re=(J=xe)!=null,ue):re?J:null},po(ue,L)},s.layout.treemap=function(){var L,V=s.layout.hierarchy(),J=Math.round,re=[1,1],ue=null,xe=Ts,Le=!1,De="squarify",Ue=.5*(1+Math.sqrt(5));function qe(At,Dt){for(var Lt,Wt,Ht=-1,jt=At.length;++Ht<jt;)Wt=(Lt=At[Ht]).value*(Dt<0?0:Dt),Lt.area=isNaN(Wt)||Wt<=0?0:Wt}function $e(At){var Dt=At.children;if(Dt&&Dt.length){var Lt,Wt,Ht,jt=xe(At),hn=[],vn=Dt.slice(),An=1/0,Ln=De==="slice"?jt.dx:De==="dice"?jt.dy:De==="slice-dice"?1&At.depth?jt.dy:jt.dx:Math.min(jt.dx,jt.dy);for(qe(vn,jt.dx*jt.dy/At.value),hn.area=0;(Ht=vn.length)>0;)hn.push(Lt=vn[Ht-1]),hn.area+=Lt.area,De!=="squarify"||(Wt=ft(hn,Ln))<=An?(vn.pop(),An=Wt):(hn.area-=hn.pop().area,wt(hn,Ln,jt,!1),Ln=Math.min(jt.dx,jt.dy),hn.length=hn.area=0,An=1/0);hn.length&&(wt(hn,Ln,jt,!0),hn.length=hn.area=0),Dt.forEach($e)}}function lt(At){var Dt=At.children;if(Dt&&Dt.length){var Lt,Wt=xe(At),Ht=Dt.slice(),jt=[];for(qe(Ht,Wt.dx*Wt.dy/At.value),jt.area=0;Lt=Ht.pop();)jt.push(Lt),jt.area+=Lt.area,Lt.z!=null&&(wt(jt,Lt.z?Wt.dx:Wt.dy,Wt,!Ht.length),jt.length=jt.area=0);Dt.forEach(lt)}}function ft(At,Dt){for(var Lt,Wt=At.area,Ht=0,jt=1/0,hn=-1,vn=At.length;++hn<vn;)(Lt=At[hn].area)&&(Lt<jt&&(jt=Lt),Lt>Ht&&(Ht=Lt));return Dt*=Dt,(Wt*=Wt)?Math.max(Dt*Ht*Ue/Wt,Wt/(Dt*jt*Ue)):1/0}function wt(At,Dt,Lt,Wt){var Ht,jt=-1,hn=At.length,vn=Lt.x,An=Lt.y,Ln=Dt?J(At.area/Dt):0;if(Dt==Lt.dx){for((Wt||Ln>Lt.dy)&&(Ln=Lt.dy);++jt<hn;)(Ht=At[jt]).x=vn,Ht.y=An,Ht.dy=Ln,vn+=Ht.dx=Math.min(Lt.x+Lt.dx-vn,Ln?J(Ht.area/Ln):0);Ht.z=!0,Ht.dx+=Lt.x+Lt.dx-vn,Lt.y+=Ln,Lt.dy-=Ln}else{for((Wt||Ln>Lt.dx)&&(Ln=Lt.dx);++jt<hn;)(Ht=At[jt]).x=vn,Ht.y=An,Ht.dx=Ln,An+=Ht.dy=Math.min(Lt.y+Lt.dy-An,Ln?J(Ht.area/Ln):0);Ht.z=!1,Ht.dy+=Lt.y+Lt.dy-An,Lt.x+=Ln,Lt.dx-=Ln}}function Et(At){var Dt=L||V(At),Lt=Dt[0];return Lt.x=Lt.y=0,Lt.value?(Lt.dx=re[0],Lt.dy=re[1]):Lt.dx=Lt.dy=0,L&&V.revalue(Lt),qe([Lt],Lt.dx*Lt.dy/Lt.value),(L?lt:$e)(Lt),Le&&(L=Dt),Dt}return Et.size=function(At){return arguments.length?(re=At,Et):re},Et.padding=function(At){if(!arguments.length)return ue;function Dt(Wt){return Hs(Wt,At)}var Lt;return xe=(ue=At)==null?Ts:(Lt=typeof At)=="function"?function(Wt){var Ht=At.call(Et,Wt,Wt.depth);return Ht==null?Ts(Wt):Hs(Wt,typeof Ht=="number"?[Ht,Ht,Ht,Ht]:Ht)}:(Lt==="number"&&(At=[At,At,At,At]),Dt),Et},Et.round=function(At){return arguments.length?(J=At?Math.round:Number,Et):J!=Number},Et.sticky=function(At){return arguments.length?(Le=At,L=null,Et):Le},Et.ratio=function(At){return arguments.length?(Ue=At,Et):Ue},Et.mode=function(At){return arguments.length?(De=At+"",Et):De},po(Et,V)},s.random={normal:function(L,V){var J=arguments.length;return J<2&&(V=1),J<1&&(L=0),function(){var re,ue,xe;do xe=(re=2*Math.random()-1)*re+(ue=2*Math.random()-1)*ue;while(!xe||xe>1);return L+V*re*Math.sqrt(-2*Math.log(xe)/xe)}},logNormal:function(){var L=s.random.normal.apply(s,arguments);return function(){return Math.exp(L())}},bates:function(L){var V=s.random.irwinHall(L);return function(){return V()/L}},irwinHall:function(L){return function(){for(var V=0,J=0;J<L;J++)V+=Math.random();return V}}},s.scale={};var ta={floor:I,ceil:I};function Ms(L,V,J,re){var ue=[],xe=[],Le=0,De=Math.min(L.length,V.length)-1;for(L[De]<L[0]&&(L=L.slice().reverse(),V=V.slice().reverse());++Le<=De;)ue.push(J(L[Le-1],L[Le])),xe.push(re(V[Le-1],V[Le]));return function(Ue){var qe=s.bisect(L,Ue,1,De)-1;return xe[qe](ue[qe](Ue))}}function La(L,V,J,re){var ue,xe;function Le(){var Ue=Math.min(L.length,V.length)>2?Ms:Ea,qe=re?_l:bl;return ue=Ue(L,V,qe,J),xe=Ue(V,L,qe,Sa),De}function De(Ue){return ue(Ue)}return De.invert=function(Ue){return xe(Ue)},De.domain=function(Ue){return arguments.length?(L=Ue.map(Number),Le()):L},De.range=function(Ue){return arguments.length?(V=Ue,Le()):V},De.rangeRound=function(Ue){return De.range(Ue).interpolate(Ks)},De.clamp=function(Ue){return arguments.length?(re=Ue,Le()):re},De.interpolate=function(Ue){return arguments.length?(J=Ue,Le()):J},De.ticks=function(Ue){return Hi(L,Ue)},De.tickFormat=function(Ue,qe){return d3_scale_linearTickFormat(L,Ue,qe)},De.nice=function(Ue){return qi(L,Ue),Le()},De.copy=function(){return La(L,V,J,re)},Le()}function Bi(L,V){return s.rebind(L,V,"range","rangeRound","interpolate","clamp")}function qi(L,V){return Io(L,zo(ai(L,V)[2])),Io(L,zo(ai(L,V)[2])),L}function ai(L,V){V==null&&(V=10);var J=ks(L),re=J[1]-J[0],ue=Math.pow(10,Math.floor(Math.log(re/V)/Math.LN10)),xe=V/re*ue;return xe<=.15?ue*=10:xe<=.35?ue*=5:xe<=.75&&(ue*=2),J[0]=Math.ceil(J[0]/ue)*ue,J[1]=Math.floor(J[1]/ue)*ue+.5*ue,J[2]=ue,J}function Hi(L,V){return s.range.apply(s,ai(L,V))}function no(L,V,J,re){function ue(De){return(J?Math.log(De<0?0:De):-Math.log(De>0?0:-De))/Math.log(V)}function xe(De){return J?Math.pow(V,De):-Math.pow(V,-De)}function Le(De){return L(ue(De))}return Le.invert=function(De){return xe(L.invert(De))},Le.domain=function(De){return arguments.length?(J=De[0]>=0,L.domain((re=De.map(Number)).map(ue)),Le):re},Le.base=function(De){return arguments.length?(V=+De,L.domain(re.map(ue)),Le):V},Le.nice=function(){var De=Io(re.map(ue),J?Math:Qo);return L.domain(De),re=De.map(xe),Le},Le.ticks=function(){var De=ks(re),Ue=[],qe=De[0],$e=De[1],lt=Math.floor(ue(qe)),ft=Math.ceil(ue($e)),wt=V%1?2:V;if(isFinite(ft-lt)){if(J){for(;lt<ft;lt++)for(var Et=1;Et<wt;Et++)Ue.push(xe(lt)*Et);Ue.push(xe(lt))}else for(Ue.push(xe(lt));lt++<ft;)for(Et=wt-1;Et>0;Et--)Ue.push(xe(lt)*Et);for(lt=0;Ue[lt]<qe;lt++);for(ft=Ue.length;Ue[ft-1]>$e;ft--);Ue=Ue.slice(lt,ft)}return Ue},Le.copy=function(){return no(L.copy(),V,J,re)},Bi(Le,L)}s.scale.linear=function(){return La([0,1],[0,1],Sa,!1)},s.scale.log=function(){return no(s.scale.linear().domain([0,1]),10,!0,[1,10])};var Qo={floor:function(L){return-Math.ceil(-L)},ceil:function(L){return-Math.floor(-L)}};function Va(L,V,J){var re=Do(V),ue=Do(1/V);function xe(Le){return L(re(Le))}return xe.invert=function(Le){return ue(L.invert(Le))},xe.domain=function(Le){return arguments.length?(L.domain((J=Le.map(Number)).map(re)),xe):J},xe.ticks=function(Le){return Hi(J,Le)},xe.tickFormat=function(Le,De){return d3_scale_linearTickFormat(J,Le,De)},xe.nice=function(Le){return xe.domain(qi(J,Le))},xe.exponent=function(Le){return arguments.length?(re=Do(V=Le),ue=Do(1/V),L.domain(J.map(re)),xe):V},xe.copy=function(){return Va(L.copy(),V,J)},Bi(xe,L)}function Do(L){return function(V){return V<0?-Math.pow(-V,L):Math.pow(V,L)}}function sa(L,V){var J,re,ue;function xe(De){return re[((J.get(De)||(V.t==="range"?J.set(De,L.push(De)):NaN))-1)%re.length]}function Le(De,Ue){return s.range(L.length).map(function(qe){return De+Ue*qe})}return xe.domain=function(De){if(!arguments.length)return L;L=[],J=new m;for(var Ue,qe=-1,$e=De.length;++qe<$e;)J.has(Ue=De[qe])||J.set(Ue,L.push(Ue));return xe[V.t].apply(xe,V.a)},xe.range=function(De){return arguments.length?(re=De,ue=0,V={t:"range",a:arguments},xe):re},xe.rangePoints=function(De,Ue){arguments.length<2&&(Ue=0);var qe=De[0],$e=De[1],lt=L.length<2?(qe=(qe+$e)/2,0):($e-qe)/(L.length-1+Ue);return re=Le(qe+lt*Ue/2,lt),ue=0,V={t:"rangePoints",a:arguments},xe},xe.rangeRoundPoints=function(De,Ue){arguments.length<2&&(Ue=0);var qe=De[0],$e=De[1],lt=L.length<2?(qe=$e=Math.round((qe+$e)/2),0):($e-qe)/(L.length-1+Ue)|0;return re=Le(qe+Math.round(lt*Ue/2+($e-qe-(L.length-1+Ue)*lt)/2),lt),ue=0,V={t:"rangeRoundPoints",a:arguments},xe},xe.rangeBands=function(De,Ue,qe){arguments.length<2&&(Ue=0),arguments.length<3&&(qe=Ue);var $e=De[1]<De[0],lt=De[$e-0],ft=(De[1-$e]-lt)/(L.length-Ue+2*qe);return re=Le(lt+ft*qe,ft),$e&&re.reverse(),ue=ft*(1-Ue),V={t:"rangeBands",a:arguments},xe},xe.rangeRoundBands=function(De,Ue,qe){arguments.length<2&&(Ue=0),arguments.length<3&&(qe=Ue);var $e=De[1]<De[0],lt=De[$e-0],ft=De[1-$e],wt=Math.floor((ft-lt)/(L.length-Ue+2*qe));return re=Le(lt+Math.round((ft-lt-(L.length-Ue)*wt)/2),wt),$e&&re.reverse(),ue=Math.round(wt*(1-Ue)),V={t:"rangeRoundBands",a:arguments},xe},xe.rangeBand=function(){return ue},xe.rangeExtent=function(){return ks(V.a[0])},xe.copy=function(){return sa(L,V)},xe.domain(L)}s.scale.pow=function(){return Va(s.scale.linear(),1,[0,1])},s.scale.sqrt=function(){return s.scale.pow().exponent(.5)},s.scale.ordinal=function(){return sa([],{t:"range",a:[[]]})},s.scale.category10=function(){return s.scale.ordinal().range(es)},s.scale.category20=function(){return s.scale.ordinal().range(vo)},s.scale.category20b=function(){return s.scale.ordinal().range(Ca)},s.scale.category20c=function(){return s.scale.ordinal().range(Oa)};var es=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Xt),vo=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Xt),Ca=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Xt),Oa=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Xt);function si(L,V){var J;function re(){var xe=0,Le=V.length;for(J=[];++xe<Le;)J[xe-1]=s.quantile(L,xe/Le);return ue}function ue(xe){if(!isNaN(xe=+xe))return V[s.bisect(J,xe)]}return ue.domain=function(xe){return arguments.length?(L=xe.map(h).filter(c).sort(u),re()):L},ue.range=function(xe){return arguments.length?(V=xe,re()):V},ue.quantiles=function(){return J},ue.invertExtent=function(xe){return(xe=V.indexOf(xe))<0?[NaN,NaN]:[xe>0?J[xe-1]:L[0],xe<J.length?J[xe]:L[L.length-1]]},ue.copy=function(){return si(L,V)},re()}function qa(L,V,J){var re,ue;function xe(De){return J[Math.max(0,Math.min(ue,Math.floor(re*(De-L))))]}function Le(){return re=J.length/(V-L),ue=J.length-1,xe}return xe.domain=function(De){return arguments.length?(L=+De[0],V=+De[De.length-1],Le()):[L,V]},xe.range=function(De){return arguments.length?(J=De,Le()):J},xe.invertExtent=function(De){return[De=(De=J.indexOf(De))<0?NaN:De/re+L,De+1/re]},xe.copy=function(){return qa(L,V,J)},Le()}function _r(L,V){function J(re){if(re<=re)return V[s.bisect(L,re)]}return J.domain=function(re){return arguments.length?(L=re,J):L},J.range=function(re){return arguments.length?(V=re,J):V},J.invertExtent=function(re){return re=V.indexOf(re),[L[re-1],L[re]]},J.copy=function(){return _r(L,V)},J}function Ss(L){function V(J){return+J}return V.invert=V,V.domain=V.range=function(J){return arguments.length?(L=J.map(V),V):L},V.ticks=function(J){return Hi(L,J)},V.tickFormat=function(J,re){return d3_scale_linearTickFormat(L,J,re)},V.copy=function(){return Ss(L)},V}function $s(){return 0}s.scale.quantile=function(){return si([],[])},s.scale.quantize=function(){return qa(0,1,[0,1])},s.scale.threshold=function(){return _r([.5],[0,1])},s.scale.identity=function(){return Ss([0,1])},s.svg={},s.svg.arc=function(){var L=Fo,V=ts,J=$s,re=Ro,ue=fs,xe=gr,Le=Es;function De(){var qe=Math.max(0,+L.apply(this,arguments)),$e=Math.max(0,+V.apply(this,arguments)),lt=ue.apply(this,arguments)-He,ft=xe.apply(this,arguments)-He,wt=Math.abs(ft-lt),Et=lt>ft?0:1;if($e<qe&&(At=$e,$e=qe,qe=At),wt>=St)return Ue($e,Et)+(qe?Ue(qe,1-Et):"")+"Z";var At,Dt,Lt,Wt,Ht,jt,hn,vn,An,Ln,jn,tr,cr=0,Hn=0,or=[];if((Wt=(+Le.apply(this,arguments)||0)/2)&&(Lt=re===Ro?Math.sqrt(qe*qe+$e*$e):+re.apply(this,arguments),Et||(Hn*=-1),$e&&(Hn=Ge(Lt/$e*Math.sin(Wt))),qe&&(cr=Ge(Lt/qe*Math.sin(Wt)))),$e){Ht=$e*Math.cos(lt+Hn),jt=$e*Math.sin(lt+Hn),hn=$e*Math.cos(ft-Hn),vn=$e*Math.sin(ft-Hn);var vr=Math.abs(ft-lt-2*Hn)<=Ot?0:1;if(Hn&&mo(Ht,jt,hn,vn)===Et^vr){var Ar=(lt+ft)/2;Ht=$e*Math.cos(Ar),jt=$e*Math.sin(Ar),hn=vn=null}}else Ht=jt=0;if(qe){An=qe*Math.cos(ft-cr),Ln=qe*Math.sin(ft-cr),jn=qe*Math.cos(lt+cr),tr=qe*Math.sin(lt+cr);var er=Math.abs(lt-ft+2*cr)<=Ot?0:1;if(cr&&mo(An,Ln,jn,tr)===1-Et^er){var ar=(lt+ft)/2;An=qe*Math.cos(ar),Ln=qe*Math.sin(ar),jn=tr=null}}else An=Ln=0;if(wt>Ke&&(At=Math.min(Math.abs($e-qe)/2,+J.apply(this,arguments)))>.001){Dt=qe<$e^Et?0:1;var xr=At,fr=At;if(wt<Ot){var wr=jn==null?[An,Ln]:hn==null?[Ht,jt]:Ct([Ht,jt],[jn,tr],[hn,vn],[An,Ln]),Er=Ht-wr[0],Rr=jt-wr[1],Fr=hn-wr[0],jr=vn-wr[1],qr=1/Math.sin(Math.acos((Er*Fr+Rr*jr)/(Math.sqrt(Er*Er+Rr*Rr)*Math.sqrt(Fr*Fr+jr*jr)))/2),ui=Math.sqrt(wr[0]*wr[0]+wr[1]*wr[1]);fr=Math.min(At,(qe-ui)/(qr-1)),xr=Math.min(At,($e-ui)/(qr+1))}if(hn!=null){var ki=Ni(jn==null?[An,Ln]:[jn,tr],[Ht,jt],$e,xr,Et),ra=Ni([hn,vn],[An,Ln],$e,xr,Et);At===xr?or.push("M",ki[0],"A",xr,",",xr," 0 0,",Dt," ",ki[1],"A",$e,",",$e," 0 ",1-Et^mo(ki[1][0],ki[1][1],ra[1][0],ra[1][1]),",",Et," ",ra[1],"A",xr,",",xr," 0 0,",Dt," ",ra[0]):or.push("M",ki[0],"A",xr,",",xr," 0 1,",Dt," ",ra[0])}else or.push("M",Ht,",",jt);if(jn!=null){var ji=Ni([Ht,jt],[jn,tr],qe,-fr,Et),Ki=Ni([An,Ln],hn==null?[Ht,jt]:[hn,vn],qe,-fr,Et);At===fr?or.push("L",Ki[0],"A",fr,",",fr," 0 0,",Dt," ",Ki[1],"A",qe,",",qe," 0 ",Et^mo(Ki[1][0],Ki[1][1],ji[1][0],ji[1][1]),",",1-Et," ",ji[1],"A",fr,",",fr," 0 0,",Dt," ",ji[0]):or.push("L",Ki[0],"A",fr,",",fr," 0 0,",Dt," ",ji[0])}else or.push("L",An,",",Ln)}else or.push("M",Ht,",",jt),hn!=null&&or.push("A",$e,",",$e," 0 ",vr,",",Et," ",hn,",",vn),or.push("L",An,",",Ln),jn!=null&&or.push("A",qe,",",qe," 0 ",er,",",1-Et," ",jn,",",tr);return or.push("Z"),or.join("")}function Ue(qe,$e){return"M0,"+qe+"A"+qe+","+qe+" 0 1,"+$e+" 0,"+-qe+"A"+qe+","+qe+" 0 1,"+$e+" 0,"+qe}return De.innerRadius=function(qe){return arguments.length?(L=zn(qe),De):L},De.outerRadius=function(qe){return arguments.length?(V=zn(qe),De):V},De.cornerRadius=function(qe){return arguments.length?(J=zn(qe),De):J},De.padRadius=function(qe){return arguments.length?(re=qe==Ro?Ro:zn(qe),De):re},De.startAngle=function(qe){return arguments.length?(ue=zn(qe),De):ue},De.endAngle=function(qe){return arguments.length?(xe=zn(qe),De):xe},De.padAngle=function(qe){return arguments.length?(Le=zn(qe),De):Le},De.centroid=function(){var qe=(+L.apply(this,arguments)+ +V.apply(this,arguments))/2,$e=(+ue.apply(this,arguments)+ +xe.apply(this,arguments))/2-He;return[Math.cos($e)*qe,Math.sin($e)*qe]},De};var Ro="auto";function Fo(L){return L.innerRadius}function ts(L){return L.outerRadius}function fs(L){return L.startAngle}function gr(L){return L.endAngle}function Es(L){return L&&L.padAngle}function mo(L,V,J,re){return(L-J)*V-(V-re)*L>0?0:1}function Ni(L,V,J,re,ue){var xe=L[0]-V[0],Le=L[1]-V[1],De=(ue?re:-re)/Math.sqrt(xe*xe+Le*Le),Ue=De*Le,qe=-De*xe,$e=L[0]+Ue,lt=L[1]+qe,ft=V[0]+Ue,wt=V[1]+qe,Et=($e+ft)/2,At=(lt+wt)/2,Dt=ft-$e,Lt=wt-lt,Wt=Dt*Dt+Lt*Lt,Ht=J-re,jt=$e*wt-ft*lt,hn=(Lt<0?-1:1)*Math.sqrt(Math.max(0,Ht*Ht*Wt-jt*jt)),vn=(jt*Lt-Dt*hn)/Wt,An=(-jt*Dt-Lt*hn)/Wt,Ln=(jt*Lt+Dt*hn)/Wt,jn=(-jt*Dt+Lt*hn)/Wt,tr=vn-Et,cr=An-At,Hn=Ln-Et,or=jn-At;return tr*tr+cr*cr>Hn*Hn+or*or&&(vn=Ln,An=jn),[[vn-Ue,An-qe],[vn*J/Ht,An*J/Ht]]}function Bo(){return!0}function Ha(L){var V=Nn,J=Bn,re=Bo,ue=na,xe=ue.key,Le=.7;function De(Ue){var qe,$e=[],lt=[],ft=-1,wt=Ue.length,Et=zn(V),At=zn(J);function Dt(){$e.push("M",ue(L(lt),Le))}for(;++ft<wt;)re.call(this,qe=Ue[ft],ft)?lt.push([+Et.call(this,qe,ft),+At.call(this,qe,ft)]):lt.length&&(Dt(),lt=[]);return lt.length&&Dt(),$e.length?$e.join(""):null}return De.x=function(Ue){return arguments.length?(V=Ue,De):V},De.y=function(Ue){return arguments.length?(J=Ue,De):J},De.defined=function(Ue){return arguments.length?(re=Ue,De):re},De.interpolate=function(Ue){return arguments.length?(xe=typeof Ue=="function"?ue=Ue:(ue=Pa.get(Ue)||na).key,De):xe},De.tension=function(Ue){return arguments.length?(Le=Ue,De):Le},De}s.svg.line=function(){return Ha(I)};var Pa=s.map({linear:na,"linear-closed":ro,step:function(L){for(var V=0,J=L.length,re=L[0],ue=[re[0],",",re[1]];++V<J;)ue.push("H",(re[0]+(re=L[V])[0])/2,"V",re[1]);return J>1&&ue.push("H",re[0]),ue.join("")},"step-before":Ia,"step-after":yo,basis:Hr,"basis-open":function(L){if(L.length<4)return na(L);for(var V,J=[],re=-1,ue=L.length,xe=[0],Le=[0];++re<3;)V=L[re],xe.push(V[0]),Le.push(V[1]);for(J.push(Gi(ua,xe)+","+Gi(ua,Le)),--re;++re<ue;)V=L[re],xe.shift(),xe.push(V[0]),Le.shift(),Le.push(V[1]),hs(J,xe,Le);return J.join("")},"basis-closed":function(L){for(var V,J,re=-1,ue=L.length,xe=ue+4,Le=[],De=[];++re<4;)J=L[re%ue],Le.push(J[0]),De.push(J[1]);for(V=[Gi(ua,Le),",",Gi(ua,De)],--re;++re<xe;)J=L[re%ue],Le.shift(),Le.push(J[0]),De.shift(),De.push(J[1]),hs(V,Le,De);return V.join("")},bundle:function(L,V){var J=L.length-1;if(J)for(var re,ue,xe=L[0][0],Le=L[0][1],De=L[J][0]-xe,Ue=L[J][1]-Le,qe=-1;++qe<=J;)ue=qe/J,(re=L[qe])[0]=V*re[0]+(1-V)*(xe+ue*De),re[1]=V*re[1]+(1-V)*(Le+ue*Ue);return Hr(L)},cardinal:function(L,V){return L.length<3?na(L):L[0]+Ls(L,No(L,V))},"cardinal-open":function(L,V){return L.length<4?na(L):L[1]+Ls(L.slice(1,-1),No(L,V))},"cardinal-closed":function(L,V){return L.length<3?ro(L):L[0]+Ls((L.push(L[0]),L),No([L[L.length-2]].concat(L,[L[1]]),V))},monotone:function(L){return L.length<3?na(L):L[0]+Ls(L,function(V){for(var J,re,ue,xe,Le=[],De=function($e){for(var lt=0,ft=$e.length-1,wt=[],Et=$e[0],At=$e[1],Dt=wt[0]=ps(Et,At);++lt<ft;)wt[lt]=(Dt+(Dt=ps(Et=At,At=$e[lt+1])))/2;return wt[lt]=Dt,wt}(V),Ue=-1,qe=V.length-1;++Ue<qe;)J=ps(V[Ue],V[Ue+1]),g(J)<Ke?De[Ue]=De[Ue+1]=0:(xe=(re=De[Ue]/J)*re+(ue=De[Ue+1]/J)*ue)>9&&(xe=3*J/Math.sqrt(xe),De[Ue]=xe*re,De[Ue+1]=xe*ue);for(Ue=-1;++Ue<=qe;)xe=(V[Math.min(qe,Ue+1)][0]-V[Math.max(0,Ue-1)][0])/(6*(1+De[Ue]*De[Ue])),Le.push([xe||0,De[Ue]*xe||0]);return Le}(L))}});function na(L){return L.length>1?L.join("L"):L+"Z"}function ro(L){return L.join("L")+"Z"}function Ia(L){for(var V=0,J=L.length,re=L[0],ue=[re[0],",",re[1]];++V<J;)ue.push("V",(re=L[V])[1],"H",re[0]);return ue.join("")}function yo(L){for(var V=0,J=L.length,re=L[0],ue=[re[0],",",re[1]];++V<J;)ue.push("H",(re=L[V])[0],"V",re[1]);return ue.join("")}function Ls(L,V){if(V.length<1||L.length!=V.length&&L.length!=V.length+2)return na(L);var J=L.length!=V.length,re="",ue=L[0],xe=L[1],Le=V[0],De=Le,Ue=1;if(J&&(re+="Q"+(xe[0]-2*Le[0]/3)+","+(xe[1]-2*Le[1]/3)+","+xe[0]+","+xe[1],ue=L[1],Ue=2),V.length>1){De=V[1],xe=L[Ue],Ue++,re+="C"+(ue[0]+Le[0])+","+(ue[1]+Le[1])+","+(xe[0]-De[0])+","+(xe[1]-De[1])+","+xe[0]+","+xe[1];for(var qe=2;qe<V.length;qe++,Ue++)xe=L[Ue],De=V[qe],re+="S"+(xe[0]-De[0])+","+(xe[1]-De[1])+","+xe[0]+","+xe[1]}if(J){var $e=L[Ue];re+="Q"+(xe[0]+2*De[0]/3)+","+(xe[1]+2*De[1]/3)+","+$e[0]+","+$e[1]}return re}function No(L,V){for(var J,re=[],ue=(1-V)/2,xe=L[0],Le=L[1],De=1,Ue=L.length;++De<Ue;)J=xe,xe=Le,Le=L[De],re.push([ue*(Le[0]-J[0]),ue*(Le[1]-J[1])]);return re}function Hr(L){if(L.length<3)return na(L);var V=1,J=L.length,re=L[0],ue=re[0],xe=re[1],Le=[ue,ue,ue,(re=L[1])[0]],De=[xe,xe,xe,re[1]],Ue=[ue,",",xe,"L",Gi(ua,Le),",",Gi(ua,De)];for(L.push(L[J-1]);++V<=J;)re=L[V],Le.shift(),Le.push(re[0]),De.shift(),De.push(re[1]),hs(Ue,Le,De);return L.pop(),Ue.push("L",re),Ue.join("")}function Gi(L,V){return L[0]*V[0]+L[1]*V[1]+L[2]*V[2]+L[3]*V[3]}Pa.forEach(function(L,V){V.key=L,V.closed=/-closed$/.test(L)});var la=[0,2/3,1/3,0],io=[0,1/3,2/3,0],ua=[0,1/6,2/3,1/6];function hs(L,V,J){L.push("C",Gi(la,V),",",Gi(la,J),",",Gi(io,V),",",Gi(io,J),",",Gi(ua,V),",",Gi(ua,J))}function ps(L,V){return(V[1]-L[1])/(V[0]-L[0])}function ca(L){for(var V,J,re,ue=-1,xe=L.length;++ue<xe;)J=(V=L[ue])[0],re=V[1]-He,V[0]=J*Math.cos(re),V[1]=J*Math.sin(re);return L}function Vr(L){var V=Nn,J=Nn,re=0,ue=Bn,xe=Bo,Le=na,De=Le.key,Ue=Le,qe="L",$e=.7;function lt(ft){var wt,Et,At,Dt=[],Lt=[],Wt=[],Ht=-1,jt=ft.length,hn=zn(V),vn=zn(re),An=V===J?function(){return Et}:zn(J),Ln=re===ue?function(){return At}:zn(ue);function jn(){Dt.push("M",Le(L(Wt),$e),qe,Ue(L(Lt.reverse()),$e),"Z")}for(;++Ht<jt;)xe.call(this,wt=ft[Ht],Ht)?(Lt.push([Et=+hn.call(this,wt,Ht),At=+vn.call(this,wt,Ht)]),Wt.push([+An.call(this,wt,Ht),+Ln.call(this,wt,Ht)])):Lt.length&&(jn(),Lt=[],Wt=[]);return Lt.length&&jn(),Dt.length?Dt.join(""):null}return lt.x=function(ft){return arguments.length?(V=J=ft,lt):J},lt.x0=function(ft){return arguments.length?(V=ft,lt):V},lt.x1=function(ft){return arguments.length?(J=ft,lt):J},lt.y=function(ft){return arguments.length?(re=ue=ft,lt):ue},lt.y0=function(ft){return arguments.length?(re=ft,lt):re},lt.y1=function(ft){return arguments.length?(ue=ft,lt):ue},lt.defined=function(ft){return arguments.length?(xe=ft,lt):xe},lt.interpolate=function(ft){return arguments.length?(De=typeof ft=="function"?Le=ft:(Le=Pa.get(ft)||na).key,Ue=Le.reverse||Le,qe=Le.closed?"M":"L",lt):De},lt.tension=function(ft){return arguments.length?($e=ft,lt):$e},lt}function ao(L){return L.source}function ns(L){return L.target}function Ga(L){return L.radius}function ds(L){return[L.x,L.y]}function gs(){return 64}function Wa(){return"circle"}function li(L){var V=Math.sqrt(L/Ot);return"M0,"+V+"A"+V+","+V+" 0 1,1 0,"+-V+"A"+V+","+V+" 0 1,1 0,"+V+"Z"}s.svg.line.radial=function(){var L=Ha(ca);return L.radius=L.x,delete L.x,L.angle=L.y,delete L.y,L},Ia.reverse=yo,yo.reverse=Ia,s.svg.area=function(){return Vr(I)},s.svg.area.radial=function(){var L=Vr(ca);return L.radius=L.x,delete L.x,L.innerRadius=L.x0,delete L.x0,L.outerRadius=L.x1,delete L.x1,L.angle=L.y,delete L.y,L.startAngle=L.y0,delete L.y0,L.endAngle=L.y1,delete L.y1,L},s.svg.chord=function(){var L=ao,V=ns,J=Ga,re=fs,ue=gr;function xe(qe,$e){var lt,ft,wt=Le(this,L,qe,$e),Et=Le(this,V,qe,$e);return"M"+wt.p0+De(wt.r,wt.p1,wt.a1-wt.a0)+(ft=Et,((lt=wt).a0==ft.a0&&lt.a1==ft.a1?Ue(wt.r,wt.p1,wt.r,wt.p0):Ue(wt.r,wt.p1,Et.r,Et.p0)+De(Et.r,Et.p1,Et.a1-Et.a0)+Ue(Et.r,Et.p1,wt.r,wt.p0))+"Z")}function Le(qe,$e,lt,ft){var wt=$e.call(qe,lt,ft),Et=J.call(qe,wt,ft),At=re.call(qe,wt,ft)-He,Dt=ue.call(qe,wt,ft)-He;return{r:Et,a0:At,a1:Dt,p0:[Et*Math.cos(At),Et*Math.sin(At)],p1:[Et*Math.cos(Dt),Et*Math.sin(Dt)]}}function De(qe,$e,lt){return"A"+qe+","+qe+" 0 "+ +(lt>Ot)+",1 "+$e}function Ue(qe,$e,lt,ft){return"Q 0,0 "+ft}return xe.radius=function(qe){return arguments.length?(J=zn(qe),xe):J},xe.source=function(qe){return arguments.length?(L=zn(qe),xe):L},xe.target=function(qe){return arguments.length?(V=zn(qe),xe):V},xe.startAngle=function(qe){return arguments.length?(re=zn(qe),xe):re},xe.endAngle=function(qe){return arguments.length?(ue=zn(qe),xe):ue},xe},s.svg.diagonal=function(){var L=ao,V=ns,J=ds;function re(ue,xe){var Le=L.call(this,ue,xe),De=V.call(this,ue,xe),Ue=(Le.y+De.y)/2,qe=[Le,{x:Le.x,y:Ue},{x:De.x,y:Ue},De];return"M"+(qe=qe.map(J))[0]+"C"+qe[1]+" "+qe[2]+" "+qe[3]}return re.source=function(ue){return arguments.length?(L=zn(ue),re):L},re.target=function(ue){return arguments.length?(V=zn(ue),re):V},re.projection=function(ue){return arguments.length?(J=ue,re):J},re},s.svg.diagonal.radial=function(){var L=s.svg.diagonal(),V=ds,J=L.projection;return L.projection=function(re){return arguments.length?J(function(ue){return function(){var xe=ue.apply(this,arguments),Le=xe[0],De=xe[1]-He;return[Le*Math.cos(De),Le*Math.sin(De)]}}(V=re)):V},L},s.svg.symbol=function(){var L=Wa,V=gs;function J(re,ue){return(rs.get(L.call(this,re,ue))||li)(V.call(this,re,ue))}return J.type=function(re){return arguments.length?(L=zn(re),J):L},J.size=function(re){return arguments.length?(V=zn(re),J):V},J};var rs=s.map({circle:li,cross:function(L){var V=Math.sqrt(L/5)/2;return"M"+-3*V+","+-V+"H"+-V+"V"+-3*V+"H"+V+"V"+-V+"H"+3*V+"V"+V+"H"+V+"V"+3*V+"H"+-V+"V"+V+"H"+-3*V+"Z"},diamond:function(L){var V=Math.sqrt(L/(2*Cr)),J=V*Cr;return"M0,"+-V+"L"+J+",0 0,"+V+" "+-J+",0Z"},square:function(L){var V=Math.sqrt(L)/2;return"M"+-V+","+-V+"L"+V+","+-V+" "+V+","+V+" "+-V+","+V+"Z"},"triangle-down":function(L){var V=Math.sqrt(L/kr),J=V*kr/2;return"M0,"+J+"L"+V+","+-J+" "+-V+","+-J+"Z"},"triangle-up":function(L){var V=Math.sqrt(L/kr),J=V*kr/2;return"M0,"+-J+"L"+V+","+J+" "+-V+","+J+"Z"}});s.svg.symbolTypes=rs.keys();var kr=Math.sqrt(3),Cr=Math.tan(30*We);fe.transition=function(L){for(var V,J,re=Ei||++fl,ue=hi(L),xe=[],Le=so||{time:Date.now(),ease:Qa,delay:0,duration:250},De=-1,Ue=this.length;++De<Ue;){xe.push(V=[]);for(var qe=this[De],$e=-1,lt=qe.length;++$e<lt;)(J=qe[$e])&&ga(J,$e,ue,re,Le),V.push(J)}return xo(xe,ue,re)},fe.interrupt=function(L){return this.each(L==null?wa:oo(hi(L)))};var wa=oo(hi());function oo(L){return function(){var V,J,re;(V=this[L])&&(re=V[J=V.active])&&(re.timer.c=null,re.timer.t=NaN,--V.count?delete V[J]:delete this[L],V.active+=.5,re.event&&re.event.interrupt.call(this,this.__data__,re.index))}}function xo(L,V,J){return X(L,Qr),L.namespace=V,L.id=J,L}var Ei,so,Qr=[],fl=0;function Ta(L,V,J,re){var ue=L.id,xe=L.namespace;return _e(L,typeof J=="function"?function(Le,De,Ue){Le[xe][ue].tween.set(V,re(J.call(Le,Le.__data__,De,Ue)))}:(J=re(J),function(Le){Le[xe][ue].tween.set(V,J)}))}function ni(L){return L==null&&(L=""),function(){this.textContent=L}}function hi(L){return L==null?"__transition__":"__transition_"+L+"__"}function ga(L,V,J,re,ue){var xe,Le,De,Ue,qe,$e=L[J]||(L[J]={active:0,count:0}),lt=$e[re];function ft(Et){var At=$e.active,Dt=$e[At];for(var Lt in Dt&&(Dt.timer.c=null,Dt.timer.t=NaN,--$e.count,delete $e[At],Dt.event&&Dt.event.interrupt.call(L,L.__data__,Dt.index)),$e)if(+Lt<re){var Wt=$e[Lt];Wt.timer.c=null,Wt.timer.t=NaN,--$e.count,delete $e[Lt]}Le.c=wt,$t(function(){return Le.c&&wt(Et||1)&&(Le.c=null,Le.t=NaN),1},0,xe),$e.active=re,lt.event&&lt.event.start.call(L,L.__data__,V),qe=[],lt.tween.forEach(function(Ht,jt){(jt=jt.call(L,L.__data__,V))&&qe.push(jt)}),Ue=lt.ease,De=lt.duration}function wt(Et){for(var At=Et/De,Dt=Ue(At),Lt=qe.length;Lt>0;)qe[--Lt].call(L,Dt);if(At>=1)return lt.event&&lt.event.end.call(L,L.__data__,V),--$e.count?delete $e[re]:delete L[J],1}lt||(xe=ue.time,Le=$t(function(Et){var At=lt.delay;if(Le.t=At+xe,At<=Et)return ft(Et-At);Le.c=ft},0,xe),lt=$e[re]={tween:new m,time:xe,timer:Le,delay:ue.delay,duration:ue.duration,ease:ue.ease,index:V},ue=null,++$e.count)}Qr.call=fe.call,Qr.empty=fe.empty,Qr.node=fe.node,Qr.size=fe.size,s.transition=function(L,V){return L&&L.transition?Ei?L.transition(V):L:s.selection().transition(L)},s.transition.prototype=Qr,Qr.select=function(L){var V,J,re,ue=this.id,xe=this.namespace,Le=[];L=pe(L);for(var De=-1,Ue=this.length;++De<Ue;){Le.push(V=[]);for(var qe=this[De],$e=-1,lt=qe.length;++$e<lt;)(re=qe[$e])&&(J=L.call(re,re.__data__,$e,De))?("__data__"in re&&(J.__data__=re.__data__),ga(J,$e,xe,ue,re[xe][ue]),V.push(J)):V.push(null)}return xo(Le,xe,ue)},Qr.selectAll=function(L){var V,J,re,ue,xe,Le=this.id,De=this.namespace,Ue=[];L=ge(L);for(var qe=-1,$e=this.length;++qe<$e;)for(var lt=this[qe],ft=-1,wt=lt.length;++ft<wt;)if(re=lt[ft]){xe=re[De][Le],J=L.call(re,re.__data__,ft,qe),Ue.push(V=[]);for(var Et=-1,At=J.length;++Et<At;)(ue=J[Et])&&ga(ue,Et,De,Le,xe),V.push(ue)}return xo(Ue,De,Le)},Qr.filter=function(L){var V,J,re=[];typeof L!="function"&&(L=Ie(L));for(var ue=0,xe=this.length;ue<xe;ue++){re.push(V=[]);for(var Le,De=0,Ue=(Le=this[ue]).length;De<Ue;De++)(J=Le[De])&&L.call(J,J.__data__,De,ue)&&V.push(J)}return xo(re,this.namespace,this.id)},Qr.tween=function(L,V){var J=this.id,re=this.namespace;return arguments.length<2?this.node()[re][J].tween.get(L):_e(this,V==null?function(ue){ue[re][J].tween.remove(L)}:function(ue){ue[re][J].tween.set(L,V)})},Qr.attr=function(L,V){if(arguments.length<2){for(V in L)this.attr(V,L[V]);return this}var J=L=="transform"?sl:Sa,re=s.ns.qualify(L);function ue(){this.removeAttribute(re)}function xe(){this.removeAttributeNS(re.space,re.local)}return Ta(this,"attr."+L,V,re.local?function(Le){return Le==null?xe:(Le+="",function(){var De,Ue=this.getAttributeNS(re.space,re.local);return Ue!==Le&&(De=J(Ue,Le),function(qe){this.setAttributeNS(re.space,re.local,De(qe))})})}:function(Le){return Le==null?ue:(Le+="",function(){var De,Ue=this.getAttribute(re);return Ue!==Le&&(De=J(Ue,Le),function(qe){this.setAttribute(re,De(qe))})})})},Qr.attrTween=function(L,V){var J=s.ns.qualify(L);return this.tween("attr."+L,J.local?function(re,ue){var xe=V.call(this,re,ue,this.getAttributeNS(J.space,J.local));return xe&&function(Le){this.setAttributeNS(J.space,J.local,xe(Le))}}:function(re,ue){var xe=V.call(this,re,ue,this.getAttribute(J));return xe&&function(Le){this.setAttribute(J,xe(Le))}})},Qr.style=function(L,V,J){var re=arguments.length;if(re<3){if(typeof L!="string"){for(J in re<2&&(V=""),L)this.style(J,L[J],V);return this}J=""}function ue(){this.style.removeProperty(L)}return Ta(this,"style."+L,V,function(xe){return xe==null?ue:(xe+="",function(){var Le,De=t(this).getComputedStyle(this,null).getPropertyValue(L);return De!==xe&&(Le=Sa(De,xe),function(Ue){this.style.setProperty(L,Le(Ue),J)})})})},Qr.styleTween=function(L,V,J){return arguments.length<3&&(J=""),this.tween("style."+L,function(re,ue){var xe=V.call(this,re,ue,t(this).getComputedStyle(this,null).getPropertyValue(L));return xe&&function(Le){this.style.setProperty(L,xe(Le),J)}})},Qr.text=function(L){return Ta(this,"text",L,ni)},Qr.remove=function(){var L=this.namespace;return this.each("end.transition",function(){var V;this[L].count<2&&(V=this.parentNode)&&V.removeChild(this)})},Qr.ease=function(L){var V=this.id,J=this.namespace;return arguments.length<1?this.node()[J][V].ease:(typeof L!="function"&&(L=s.ease.apply(s,arguments)),_e(this,function(re){re[J][V].ease=L}))},Qr.delay=function(L){var V=this.id,J=this.namespace;return arguments.length<1?this.node()[J][V].delay:_e(this,typeof L=="function"?function(re,ue,xe){re[J][V].delay=+L.call(re,re.__data__,ue,xe)}:(L=+L,function(re){re[J][V].delay=L}))},Qr.duration=function(L){var V=this.id,J=this.namespace;return arguments.length<1?this.node()[J][V].duration:_e(this,typeof L=="function"?function(re,ue,xe){re[J][V].duration=Math.max(1,L.call(re,re.__data__,ue,xe))}:(L=Math.max(1,L),function(re){re[J][V].duration=L}))},Qr.each=function(L,V){var J=this.id,re=this.namespace;if(arguments.length<2){var ue=so,xe=Ei;try{Ei=J,_e(this,function(Le,De,Ue){so=Le[re][J],L.call(Le,Le.__data__,De,Ue)})}finally{so=ue,Ei=xe}}else _e(this,function(Le){var De=Le[re][J];(De.event||(De.event=s.dispatch("start","end","interrupt"))).on(L,V)});return this},Qr.transition=function(){for(var L,V,J,re=this.id,ue=++fl,xe=this.namespace,Le=[],De=0,Ue=this.length;De<Ue;De++){Le.push(L=[]);for(var qe,$e=0,lt=(qe=this[De]).length;$e<lt;$e++)(V=qe[$e])&&ga(V,$e,xe,ue,{time:(J=V[xe][re]).time,ease:J.ease,delay:J.delay+J.duration,duration:J.duration}),L.push(V)}return xo(Le,xe,ue)},s.svg.axis=function(){var L,V=s.scale.linear(),J=jo,re=6,ue=6,xe=3,Le=[10],De=null;function Ue(qe){qe.each(function(){var $e,lt=s.select(this),ft=this.__chart__||V,wt=this.__chart__=V.copy(),Et=De??(wt.ticks?wt.ticks.apply(wt,Le):wt.domain()),At=L??(wt.tickFormat?wt.tickFormat.apply(wt,Le):I),Dt=lt.selectAll(".tick").data(Et,wt),Lt=Dt.enter().insert("g",".domain").attr("class","tick").style("opacity",Ke),Wt=s.transition(Dt.exit()).style("opacity",Ke).remove(),Ht=s.transition(Dt.order()).style("opacity",1),jt=Math.max(re,0)+xe,hn=As(wt),vn=lt.selectAll(".domain").data([0]),An=(vn.enter().append("path").attr("class","domain"),s.transition(vn));Lt.append("line"),Lt.append("text");var Ln,jn,tr,cr,Hn=Lt.select("line"),or=Ht.select("line"),vr=Dt.select("text").text(At),Ar=Lt.select("text"),er=Ht.select("text"),ar=J==="top"||J==="left"?-1:1;if(J==="bottom"||J==="top"?($e=Xe,Ln="x",tr="y",jn="x2",cr="y2",vr.attr("dy",ar<0?"0em":".71em").style("text-anchor","middle"),An.attr("d","M"+hn[0]+","+ar*ue+"V0H"+hn[1]+"V"+ar*ue)):($e=Je,Ln="y",tr="x",jn="y2",cr="x2",vr.attr("dy",".32em").style("text-anchor",ar<0?"end":"start"),An.attr("d","M"+ar*ue+","+hn[0]+"H0V"+hn[1]+"H"+ar*ue)),Hn.attr(cr,ar*re),Ar.attr(tr,ar*jt),or.attr(jn,0).attr(cr,ar*re),er.attr(Ln,0).attr(tr,ar*jt),wt.rangeBand){var xr=wt,fr=xr.rangeBand()/2;ft=wt=function(wr){return xr(wr)+fr}}else ft.rangeBand?ft=wt:Wt.call($e,wt,ft);Lt.call($e,ft,wt),Ht.call($e,wt,wt)})}return Ue.scale=function(qe){return arguments.length?(V=qe,Ue):V},Ue.orient=function(qe){return arguments.length?(J=qe in Qs?qe+"":jo,Ue):J},Ue.ticks=function(){return arguments.length?(Le=b(arguments),Ue):Le},Ue.tickValues=function(qe){return arguments.length?(De=qe,Ue):De},Ue.tickFormat=function(qe){return arguments.length?(L=qe,Ue):L},Ue.tickSize=function(qe){var $e=arguments.length;return $e?(re=+qe,ue=+arguments[$e-1],Ue):re},Ue.innerTickSize=function(qe){return arguments.length?(re=+qe,Ue):re},Ue.outerTickSize=function(qe){return arguments.length?(ue=+qe,Ue):ue},Ue.tickPadding=function(qe){return arguments.length?(xe=+qe,Ue):xe},Ue.tickSubdivide=function(){return arguments.length&&Ue},Ue};var jo="bottom",Qs={top:1,right:1,bottom:1,left:1};function Xe(L,V,J){L.attr("transform",function(re){var ue=V(re);return"translate("+(isFinite(ue)?ue:J(re))+",0)"})}function Je(L,V,J){L.attr("transform",function(re){var ue=V(re);return"translate(0,"+(isFinite(ue)?ue:J(re))+")"})}s.svg.brush=function(){var L,V,J=Q($e,"brushstart","brush","brushend"),re=null,ue=null,xe=[0,0],Le=[0,0],De=!0,Ue=!0,qe=B[0];function $e(At){At.each(function(){var Dt=s.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Et).on("touchstart.brush",Et),Lt=Dt.selectAll(".background").data([0]);Lt.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Dt.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Wt=Dt.selectAll(".resize").data(qe,I);Wt.exit().remove(),Wt.enter().append("g").attr("class",function(vn){return"resize "+vn}).style("cursor",function(vn){return at[vn]}).append("rect").attr("x",function(vn){return/[ew]$/.test(vn)?-3:null}).attr("y",function(vn){return/^[ns]/.test(vn)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Wt.style("display",$e.empty()?"none":null);var Ht,jt=s.transition(Dt),hn=s.transition(Lt);re&&(Ht=As(re),hn.attr("x",Ht[0]).attr("width",Ht[1]-Ht[0]),ft(jt)),ue&&(Ht=As(ue),hn.attr("y",Ht[0]).attr("height",Ht[1]-Ht[0]),wt(jt)),lt(jt)})}function lt(At){At.selectAll(".resize").attr("transform",function(Dt){return"translate("+xe[+/e$/.test(Dt)]+","+Le[+/^s/.test(Dt)]+")"})}function ft(At){At.select(".extent").attr("x",xe[0]),At.selectAll(".extent,.n>rect,.s>rect").attr("width",xe[1]-xe[0])}function wt(At){At.select(".extent").attr("y",Le[0]),At.selectAll(".extent,.e>rect,.w>rect").attr("height",Le[1]-Le[0])}function Et(){var At,Dt,Lt=this,Wt=s.select(s.event.target),Ht=J.of(Lt,arguments),jt=s.select(Lt),hn=Wt.datum(),vn=!/^(n|s)$/.test(hn)&&re,An=!/^(e|w)$/.test(hn)&&ue,Ln=Wt.classed("extent"),jn=ht(Lt),tr=s.mouse(Lt),cr=s.select(t(Lt)).on("keydown.brush",function(){s.event.keyCode==32&&(Ln||(At=null,tr[0]-=xe[1],tr[1]-=Le[1],Ln=2),$())}).on("keyup.brush",function(){s.event.keyCode==32&&Ln==2&&(tr[0]+=xe[1],tr[1]+=Le[1],Ln=0,$())});if(s.event.changedTouches?cr.on("touchmove.brush",vr).on("touchend.brush",er):cr.on("mousemove.brush",vr).on("mouseup.brush",er),jt.interrupt().selectAll("*").interrupt(),Ln)tr[0]=xe[0]-tr[0],tr[1]=Le[0]-tr[1];else if(hn){var Hn=+/w$/.test(hn),or=+/^n/.test(hn);Dt=[xe[1-Hn]-tr[0],Le[1-or]-tr[1]],tr[0]=xe[Hn],tr[1]=Le[or]}else s.event.altKey&&(At=tr.slice());function vr(){var ar=s.mouse(Lt),xr=!1;Dt&&(ar[0]+=Dt[0],ar[1]+=Dt[1]),Ln||(s.event.altKey?(At||(At=[(xe[0]+xe[1])/2,(Le[0]+Le[1])/2]),tr[0]=xe[+(ar[0]<At[0])],tr[1]=Le[+(ar[1]<At[1])]):At=null),vn&&Ar(ar,re,0)&&(ft(jt),xr=!0),An&&Ar(ar,ue,1)&&(wt(jt),xr=!0),xr&&(lt(jt),Ht({type:"brush",mode:Ln?"move":"resize"}))}function Ar(ar,xr,fr){var wr,Er,Rr=As(xr),Fr=Rr[0],jr=Rr[1],qr=tr[fr],ui=fr?Le:xe,ki=ui[1]-ui[0];if(Ln&&(Fr-=qr,jr-=ki+qr),wr=(fr?Ue:De)?Math.max(Fr,Math.min(jr,ar[fr])):ar[fr],Ln?Er=(wr+=qr)+ki:(At&&(qr=Math.max(Fr,Math.min(jr,2*At[fr]-wr))),qr<wr?(Er=wr,wr=qr):Er=qr),ui[0]!=wr||ui[1]!=Er)return fr?V=null:L=null,ui[0]=wr,ui[1]=Er,!0}function er(){vr(),jt.style("pointer-events","all").selectAll(".resize").style("display",$e.empty()?"none":null),s.select("body").style("cursor",null),cr.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),jn(),Ht({type:"brushend"})}jt.style("pointer-events","none").selectAll(".resize").style("display",null),s.select("body").style("cursor",Wt.style("cursor")),Ht({type:"brushstart"}),vr()}return $e.event=function(At){At.each(function(){var Dt=J.of(this,arguments),Lt={x:xe,y:Le,i:L,j:V},Wt=this.__chart__||Lt;this.__chart__=Lt,Ei?s.select(this).transition().each("start.brush",function(){L=Wt.i,V=Wt.j,xe=Wt.x,Le=Wt.y,Dt({type:"brushstart"})}).tween("brush:brush",function(){var Ht=Ra(xe,Lt.x),jt=Ra(Le,Lt.y);return L=V=null,function(hn){xe=Lt.x=Ht(hn),Le=Lt.y=jt(hn),Dt({type:"brush",mode:"resize"})}}).each("end.brush",function(){L=Lt.i,V=Lt.j,Dt({type:"brush",mode:"resize"}),Dt({type:"brushend"})}):(Dt({type:"brushstart"}),Dt({type:"brush",mode:"resize"}),Dt({type:"brushend"}))})},$e.x=function(At){return arguments.length?(qe=B[!(re=At)<<1|!ue],$e):re},$e.y=function(At){return arguments.length?(qe=B[!re<<1|!(ue=At)],$e):ue},$e.clamp=function(At){return arguments.length?(re&&ue?(De=!!At[0],Ue=!!At[1]):re?De=!!At:ue&&(Ue=!!At),$e):re&&ue?[De,Ue]:re?De:ue?Ue:null},$e.extent=function(At){var Dt,Lt,Wt,Ht,jt;return arguments.length?(re&&(Dt=At[0],Lt=At[1],ue&&(Dt=Dt[0],Lt=Lt[0]),L=[Dt,Lt],re.invert&&(Dt=re(Dt),Lt=re(Lt)),Lt<Dt&&(jt=Dt,Dt=Lt,Lt=jt),Dt==xe[0]&&Lt==xe[1]||(xe=[Dt,Lt])),ue&&(Wt=At[0],Ht=At[1],re&&(Wt=Wt[1],Ht=Ht[1]),V=[Wt,Ht],ue.invert&&(Wt=ue(Wt),Ht=ue(Ht)),Ht<Wt&&(jt=Wt,Wt=Ht,Ht=jt),Wt==Le[0]&&Ht==Le[1]||(Le=[Wt,Ht])),$e):(re&&(L?(Dt=L[0],Lt=L[1]):(Dt=xe[0],Lt=xe[1],re.invert&&(Dt=re.invert(Dt),Lt=re.invert(Lt)),Lt<Dt&&(jt=Dt,Dt=Lt,Lt=jt))),ue&&(V?(Wt=V[0],Ht=V[1]):(Wt=Le[0],Ht=Le[1],ue.invert&&(Wt=ue.invert(Wt),Ht=ue.invert(Ht)),Ht<Wt&&(jt=Wt,Wt=Ht,Ht=jt))),re&&ue?[[Dt,Wt],[Lt,Ht]]:re?[Dt,Lt]:ue&&[Wt,Ht])},$e.clear=function(){return $e.empty()||(xe=[0,0],Le=[0,0],L=V=null),$e},$e.empty=function(){return!!re&&xe[0]==xe[1]||!!ue&&Le[0]==Le[1]},s.rebind($e,J,"on")};var at={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},B=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function G(L){return JSON.parse(L.responseText)}function q(L){var V=f.createRange();return V.selectNode(f.body),V.createContextualFragment(L.responseText)}s.text=Wn(function(L){return L.responseText}),s.json=function(L,V){return sr(L,"application/json",G,V)},s.html=function(L,V){return sr(L,"text/html",q,V)},s.xml=Wn(function(L){return L.responseXML}),(k=typeof(M=s)=="function"?M.call(R,e,R,ee):M)===void 0||(ee.exports=k)}).apply(self)},3480:function(ee){ee.exports=function(){var R,e,M;function k(s,T){if(R)if(e){var b="var sharedChunk = {}; ("+R+")(sharedChunk); ("+e+")(sharedChunk);",f={};R(f),M=T(f),typeof window<"u"&&(M.workerUrl=window.URL.createObjectURL(new Blob([b],{type:"text/javascript"})))}else e=T;else R=T}return k(0,function(s){function T(A,D){return A(D={exports:{}},D.exports),D.exports}var b="1.13.4",f=o;function o(A,D,Y,le){this.cx=3*A,this.bx=3*(Y-A)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*D,this.by=3*(le-D)-this.cy,this.ay=1-this.cy-this.by,this.p1x=A,this.p1y=le,this.p2x=Y,this.p2y=le}o.prototype.sampleCurveX=function(A){return((this.ax*A+this.bx)*A+this.cx)*A},o.prototype.sampleCurveY=function(A){return((this.ay*A+this.by)*A+this.cy)*A},o.prototype.sampleCurveDerivativeX=function(A){return(3*this.ax*A+2*this.bx)*A+this.cx},o.prototype.solveCurveX=function(A,D){var Y,le,Te,Ce,Ne;for(D===void 0&&(D=1e-6),Te=A,Ne=0;Ne<8;Ne++){if(Ce=this.sampleCurveX(Te)-A,Math.abs(Ce)<D)return Te;var Ze=this.sampleCurveDerivativeX(Te);if(Math.abs(Ze)<1e-6)break;Te-=Ce/Ze}if((Te=A)<(Y=0))return Y;if(Te>(le=1))return le;for(;Y<le;){if(Ce=this.sampleCurveX(Te),Math.abs(Ce-A)<D)return Te;A>Ce?Y=Te:le=Te,Te=.5*(le-Y)+Y}return Te},o.prototype.solve=function(A,D){return this.sampleCurveY(this.solveCurveX(A,D))};var t=i;function i(A,D){this.x=A,this.y=D}i.prototype={clone:function(){return new i(this.x,this.y)},add:function(A){return this.clone()._add(A)},sub:function(A){return this.clone()._sub(A)},multByPoint:function(A){return this.clone()._multByPoint(A)},divByPoint:function(A){return this.clone()._divByPoint(A)},mult:function(A){return this.clone()._mult(A)},div:function(A){return this.clone()._div(A)},rotate:function(A){return this.clone()._rotate(A)},rotateAround:function(A,D){return this.clone()._rotateAround(A,D)},matMult:function(A){return this.clone()._matMult(A)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(A){return this.x===A.x&&this.y===A.y},dist:function(A){return Math.sqrt(this.distSqr(A))},distSqr:function(A){var D=A.x-this.x,Y=A.y-this.y;return D*D+Y*Y},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(A){return Math.atan2(this.y-A.y,this.x-A.x)},angleWith:function(A){return this.angleWithSep(A.x,A.y)},angleWithSep:function(A,D){return Math.atan2(this.x*D-this.y*A,this.x*A+this.y*D)},_matMult:function(A){var D=A[0]*this.x+A[1]*this.y,Y=A[2]*this.x+A[3]*this.y;return this.x=D,this.y=Y,this},_add:function(A){return this.x+=A.x,this.y+=A.y,this},_sub:function(A){return this.x-=A.x,this.y-=A.y,this},_mult:function(A){return this.x*=A,this.y*=A,this},_div:function(A){return this.x/=A,this.y/=A,this},_multByPoint:function(A){return this.x*=A.x,this.y*=A.y,this},_divByPoint:function(A){return this.x/=A.x,this.y/=A.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var A=this.y;return this.y=this.x,this.x=-A,this},_rotate:function(A){var D=Math.cos(A),Y=Math.sin(A),le=D*this.x-Y*this.y,Te=Y*this.x+D*this.y;return this.x=le,this.y=Te,this},_rotateAround:function(A,D){var Y=Math.cos(A),le=Math.sin(A),Te=D.x+Y*(this.x-D.x)-le*(this.y-D.y),Ce=D.y+le*(this.x-D.x)+Y*(this.y-D.y);return this.x=Te,this.y=Ce,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(A){return A instanceof i?A:Array.isArray(A)?new i(A[0],A[1]):A};var n=typeof self<"u"?self:{},r=Math.pow(2,53)-1;function a(A,D,Y,le){var Te=new f(A,D,Y,le);return function(Ce){return Te.solve(Ce)}}var l=a(.25,.1,.25,1);function u(A,D,Y){return Math.min(Y,Math.max(D,A))}function h(A,D,Y){var le=Y-D,Te=((A-D)%le+le)%le+D;return Te===D?Y:Te}function c(A){for(var D=[],Y=arguments.length-1;Y-- >0;)D[Y]=arguments[Y+1];for(var le=0,Te=D;le<Te.length;le+=1){var Ce=Te[le];for(var Ne in Ce)A[Ne]=Ce[Ne]}return A}var x=1;function p(){return x++}function v(){return function A(D){return D?(D^16*Math.random()>>D/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,A)}()}function g(A){return!!A&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(A)}function y(A,D){A.forEach(function(Y){D[Y]&&(D[Y]=D[Y].bind(D))})}function m(A,D){return A.indexOf(D,A.length-D.length)!==-1}function _(A,D,Y){var le={};for(var Te in A)le[Te]=D.call(Y||this,A[Te],Te,A);return le}function d(A,D,Y){var le={};for(var Te in A)D.call(Y||this,A[Te],Te,A)&&(le[Te]=A[Te]);return le}function S(A){return Array.isArray(A)?A.map(S):typeof A=="object"&&A?_(A,S):A}var w={};function E(A){w[A]||(typeof console<"u"&&console.warn(A),w[A]=!0)}function C(A,D,Y){return(Y.y-A.y)*(D.x-A.x)>(D.y-A.y)*(Y.x-A.x)}function O(A){for(var D=0,Y=0,le=A.length,Te=le-1,Ce=void 0,Ne=void 0;Y<le;Te=Y++)Ce=A[Y],D+=((Ne=A[Te]).x-Ce.x)*(Ce.y+Ne.y);return D}function P(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function z(A){var D={};if(A.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(le,Te,Ce,Ne){var Ze=Ce||Ne;return D[Te]=!Ze||Ze.toLowerCase(),""}),D["max-age"]){var Y=parseInt(D["max-age"],10);isNaN(Y)?delete D["max-age"]:D["max-age"]=Y}return D}var j=null;function I(A){if(j==null){var D=A.navigator?A.navigator.userAgent:null;j=!!A.safari||!(!D||!(/\b(iPad|iPhone|iPod)\b/.test(D)||D.match("Safari")&&!D.match("Chrome")))}return j}function N(A){try{var D=n[A];return D.setItem("_mapbox_test_",1),D.removeItem("_mapbox_test_"),!0}catch{return!1}}var W,F,U,H,ne=n.performance&&n.performance.now?n.performance.now.bind(n.performance):Date.now.bind(Date),$=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||n.msRequestAnimationFrame,K=n.cancelAnimationFrame||n.mozCancelAnimationFrame||n.webkitCancelAnimationFrame||n.msCancelAnimationFrame,Q={now:ne,frame:function(A){var D=$(A);return{cancel:function(){return K(D)}}},getImageData:function(A,D){D===void 0&&(D=0);var Y=n.document.createElement("canvas"),le=Y.getContext("2d");if(!le)throw new Error("failed to create canvas 2d context");return Y.width=A.width,Y.height=A.height,le.drawImage(A,0,0,A.width,A.height),le.getImageData(-D,-D,A.width+2*D,A.height+2*D)},resolveURL:function(A){return W||(W=n.document.createElement("a")),W.href=A,W.href},hardwareConcurrency:n.navigator&&n.navigator.hardwareConcurrency||4,get devicePixelRatio(){return n.devicePixelRatio},get prefersReducedMotion(){return!!n.matchMedia&&(F==null&&(F=n.matchMedia("(prefers-reduced-motion: reduce)")),F.matches)}},Z={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},X={supported:!1,testSupport:function(A){!te&&H&&(ae?se(A):U=A)}},te=!1,ae=!1;function se(A){var D=A.createTexture();A.bindTexture(A.TEXTURE_2D,D);try{if(A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,H),A.isContextLost())return;X.supported=!0}catch{}A.deleteTexture(D),te=!0}n.document&&((H=n.document.createElement("img")).onload=function(){U&&se(U),U=null,ae=!0},H.onerror=function(){te=!0,U=null},H.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var ce="01",fe=function(A,D){this._transformRequestFn=A,this._customAccessToken=D,this._createSkuToken()};function pe(A){return A.indexOf("mapbox:")===0}fe.prototype._createSkuToken=function(){var A=function(){for(var D="",Y=0;Y<10;Y++)D+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ce,D].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=A.token,this._skuTokenExpiresAt=A.tokenExpiresAt},fe.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},fe.prototype.transformRequest=function(A,D){return this._transformRequestFn&&this._transformRequestFn(A,D)||{url:A}},fe.prototype.normalizeStyleURL=function(A,D){if(!pe(A))return A;var Y=ke(A);return Y.path="/styles/v1"+Y.path,this._makeAPIURL(Y,this._customAccessToken||D)},fe.prototype.normalizeGlyphsURL=function(A,D){if(!pe(A))return A;var Y=ke(A);return Y.path="/fonts/v1"+Y.path,this._makeAPIURL(Y,this._customAccessToken||D)},fe.prototype.normalizeSourceURL=function(A,D){if(!pe(A))return A;var Y=ke(A);return Y.path="/v4/"+Y.authority+".json",Y.params.push("secure"),this._makeAPIURL(Y,this._customAccessToken||D)},fe.prototype.normalizeSpriteURL=function(A,D,Y,le){var Te=ke(A);return pe(A)?(Te.path="/styles/v1"+Te.path+"/sprite"+D+Y,this._makeAPIURL(Te,this._customAccessToken||le)):(Te.path+=""+D+Y,ze(Te))},fe.prototype.normalizeTileURL=function(A,D){if(this._isSkuTokenExpired()&&this._createSkuToken(),A&&!pe(A))return A;var Y=ke(A),le=Q.devicePixelRatio>=2||D===512?"@2x":"",Te=X.supported?".webp":"$1";Y.path=Y.path.replace(/(\.(png|jpg)\d*)(?=$)/,""+le+Te),Y.path=Y.path.replace(/^.+\/v4\//,"/"),Y.path="/v4"+Y.path;var Ce=this._customAccessToken||function(Ne){for(var Ze=0,st=Ne;Ze<st.length;Ze+=1){var _t=st[Ze].match(/^access_token=(.*)$/);if(_t)return _t[1]}return null}(Y.params)||Z.ACCESS_TOKEN;return Z.REQUIRE_ACCESS_TOKEN&&Ce&&this._skuToken&&Y.params.push("sku="+this._skuToken),this._makeAPIURL(Y,Ce)},fe.prototype.canonicalizeTileURL=function(A,D){var Y=ke(A);if(!Y.path.match(/(^\/v4\/)/)||!Y.path.match(/\.[\w]+$/))return A;var le="mapbox://tiles/";le+=Y.path.replace("/v4/","");var Te=Y.params;return D&&(Te=Te.filter(function(Ce){return!Ce.match(/^access_token=/)})),Te.length&&(le+="?"+Te.join("&")),le},fe.prototype.canonicalizeTileset=function(A,D){for(var Y=!!D&&pe(D),le=[],Te=0,Ce=A.tiles||[];Te<Ce.length;Te+=1){var Ne=Ce[Te];me(Ne)?le.push(this.canonicalizeTileURL(Ne,Y)):le.push(Ne)}return le},fe.prototype._makeAPIURL=function(A,D){var Y="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",le=ke(Z.API_URL);if(A.protocol=le.protocol,A.authority=le.authority,A.protocol==="http"){var Te=A.params.indexOf("secure");Te>=0&&A.params.splice(Te,1)}if(le.path!=="/"&&(A.path=""+le.path+A.path),!Z.REQUIRE_ACCESS_TOKEN)return ze(A);if(!(D=D||Z.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+Y);if(D[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+Y);return A.params=A.params.filter(function(Ce){return Ce.indexOf("access_token")===-1}),A.params.push("access_token="+D),ze(A)};var ge=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function me(A){return ge.test(A)}var be=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ke(A){var D=A.match(be);if(!D)throw new Error("Unable to parse URL object");return{protocol:D[1],authority:D[2],path:D[3]||"/",params:D[4]?D[4].split("&"):[]}}function ze(A){var D=A.params.length?"?"+A.params.join("&"):"";return A.protocol+"://"+A.authority+A.path+D}var ve="mapbox.eventData";function oe(A){if(!A)return null;var D,Y=A.split(".");if(!Y||Y.length!==3)return null;try{return JSON.parse((D=Y[1],decodeURIComponent(n.atob(D).split("").map(function(le){return"%"+("00"+le.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch{return null}}var ie=function(A){this.type=A,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};ie.prototype.getStorageKey=function(A){var D,Y,le=oe(Z.ACCESS_TOKEN);return D=le&&le.u?(Y=le.u,n.btoa(encodeURIComponent(Y).replace(/%([0-9A-F]{2})/g,function(Te,Ce){return String.fromCharCode(+("0x"+Ce))}))):Z.ACCESS_TOKEN||"",A?ve+"."+A+":"+D:ve+":"+D},ie.prototype.fetchEventData=function(){var A=N("localStorage"),D=this.getStorageKey(),Y=this.getStorageKey("uuid");if(A)try{var le=n.localStorage.getItem(D);le&&(this.eventData=JSON.parse(le));var Te=n.localStorage.getItem(Y);Te&&(this.anonId=Te)}catch{E("Unable to read from LocalStorage")}},ie.prototype.saveEventData=function(){var A=N("localStorage"),D=this.getStorageKey(),Y=this.getStorageKey("uuid");if(A)try{n.localStorage.setItem(Y,this.anonId),Object.keys(this.eventData).length>=1&&n.localStorage.setItem(D,JSON.stringify(this.eventData))}catch{E("Unable to write to LocalStorage")}},ie.prototype.processRequests=function(A){},ie.prototype.postEvent=function(A,D,Y,le){var Te=this;if(Z.EVENTS_URL){var Ce=ke(Z.EVENTS_URL);Ce.params.push("access_token="+(le||Z.ACCESS_TOKEN||""));var Ne={event:this.type,created:new Date(A).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:b,skuId:ce,userId:this.anonId},Ze=D?c(Ne,D):Ne,st={url:ze(Ce),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Ze])};this.pendingRequest=St(st,function(_t){Te.pendingRequest=null,Y(_t),Te.saveEventData(),Te.processRequests(le)})}},ie.prototype.queueRequest=function(A,D){this.queue.push(A),this.processRequests(D)};var he,Se,ye=function(A){function D(){A.call(this,"map.load"),this.success={},this.skuToken=""}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.postMapLoadEvent=function(Y,le,Te,Ce){this.skuToken=Te,(Z.EVENTS_URL&&Ce||Z.ACCESS_TOKEN&&Array.isArray(Y)&&Y.some(function(Ne){return pe(Ne)||me(Ne)}))&&this.queueRequest({id:le,timestamp:Date.now()},Ce)},D.prototype.processRequests=function(Y){var le=this;if(!this.pendingRequest&&this.queue.length!==0){var Te=this.queue.shift(),Ce=Te.id,Ne=Te.timestamp;Ce&&this.success[Ce]||(this.anonId||this.fetchEventData(),g(this.anonId)||(this.anonId=v()),this.postEvent(Ne,{skuToken:this.skuToken},function(Ze){Ze||Ce&&(le.success[Ce]=!0)},Y))}},D}(ie),we=function(A){function D(Y){A.call(this,"appUserTurnstile"),this._customAccessToken=Y}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.postTurnstileEvent=function(Y,le){Z.EVENTS_URL&&Z.ACCESS_TOKEN&&Array.isArray(Y)&&Y.some(function(Te){return pe(Te)||me(Te)})&&this.queueRequest(Date.now(),le)},D.prototype.processRequests=function(Y){var le=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var Te=oe(Z.ACCESS_TOKEN),Ce=Te?Te.u:Z.ACCESS_TOKEN,Ne=Ce!==this.eventData.tokenU;g(this.anonId)||(this.anonId=v(),Ne=!0);var Ze=this.queue.shift();if(this.eventData.lastSuccess){var st=new Date(this.eventData.lastSuccess),_t=new Date(Ze),kt=(Ze-this.eventData.lastSuccess)/864e5;Ne=Ne||kt>=1||kt<-1||st.getDate()!==_t.getDate()}else Ne=!0;if(!Ne)return this.processRequests();this.postEvent(Ze,{"enabled.telemetry":!1},function(It){It||(le.eventData.lastSuccess=Ze,le.eventData.tokenU=Ce)},Y)}},D}(ie),Me=new we,Oe=Me.postTurnstileEvent.bind(Me),Ie=new ye,de=Ie.postMapLoadEvent.bind(Ie),_e="mapbox-tiles",Ae=500,Pe=50,Ee=42e4;function Fe(){n.caches&&!he&&(he=n.caches.open(_e))}function Ve(A,D,Y){if(Fe(),he){var le={status:D.status,statusText:D.statusText,headers:new n.Headers};D.headers.forEach(function(Ce,Ne){return le.headers.set(Ne,Ce)});var Te=z(D.headers.get("Cache-Control")||"");Te["no-store"]||(Te["max-age"]&&le.headers.set("Expires",new Date(Y+1e3*Te["max-age"]).toUTCString()),new Date(le.headers.get("Expires")).getTime()-Y<Ee||function(Ce,Ne){if(Se===void 0)try{new Response(new ReadableStream),Se=!0}catch{Se=!1}Se?Ne(Ce.body):Ce.blob().then(Ne)}(D,function(Ce){var Ne=new n.Response(Ce,le);Fe(),he&&he.then(function(Ze){return Ze.put(Ye(A.url),Ne)}).catch(function(Ze){return E(Ze.message)})}))}}function Ye(A){var D=A.indexOf("?");return D<0?A:A.slice(0,D)}function tt(A,D){if(Fe(),!he)return D(null);var Y=Ye(A.url);he.then(function(le){le.match(Y).then(function(Te){var Ce=function(Ne){if(!Ne)return!1;var Ze=new Date(Ne.headers.get("Expires")||0),st=z(Ne.headers.get("Cache-Control")||"");return Ze>Date.now()&&!st["no-cache"]}(Te);le.delete(Y),Ce&&le.put(Y,Te.clone()),D(null,Te,Ce)}).catch(D)}).catch(D)}var nt,ht=1/0;function vt(){return nt==null&&(nt=n.OffscreenCanvas&&new n.OffscreenCanvas(1,1).getContext("2d")&&typeof n.createImageBitmap=="function"),nt}var pt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(pt);var Qe=function(A){function D(Y,le,Te){le===401&&me(Te)&&(Y+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),A.call(this,Y),this.status=le,this.url=Te,this.name=this.constructor.name,this.message=Y}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},D}(Error),Ke=P()?function(){return self.worker&&self.worker.referrer}:function(){return(n.location.protocol==="blob:"?n.parent:n).location.href};function Mt(A,D){var Y,le=new n.AbortController,Te=new n.Request(A.url,{method:A.method||"GET",body:A.body,credentials:A.credentials,headers:A.headers,referrer:Ke(),signal:le.signal}),Ce=!1,Ne=!1,Ze=(Y=Te.url).indexOf("sku=")>0&&me(Y);A.type==="json"&&Te.headers.set("Accept","application/json");var st=function(kt,It,Vt){if(!Ne){if(kt&&kt.message!=="SecurityError"&&E(kt),It&&Vt)return _t(It);var Bt=Date.now();n.fetch(Te).then(function(nn){if(nn.ok){var un=Ze?nn.clone():null;return _t(nn,un,Bt)}return D(new Qe(nn.statusText,nn.status,A.url))}).catch(function(nn){nn.code!==20&&D(new Error(nn.message))})}},_t=function(kt,It,Vt){(A.type==="arrayBuffer"?kt.arrayBuffer():A.type==="json"?kt.json():kt.text()).then(function(Bt){Ne||(It&&Vt&&Ve(Te,It,Vt),Ce=!0,D(null,Bt,kt.headers.get("Cache-Control"),kt.headers.get("Expires")))}).catch(function(Bt){Ne||D(new Error(Bt.message))})};return Ze?tt(Te,st):st(null,null),{cancel:function(){Ne=!0,Ce||le.abort()}}}var Ot=function(A,D){if(Y=A.url,!(/^file:/.test(Y)||/^file:/.test(Ke())&&!/^\w+:/.test(Y))){if(n.fetch&&n.Request&&n.AbortController&&n.Request.prototype.hasOwnProperty("signal"))return Mt(A,D);if(P()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",A,D,void 0,!0)}var Y;return function(le,Te){var Ce=new n.XMLHttpRequest;for(var Ne in Ce.open(le.method||"GET",le.url,!0),le.type==="arrayBuffer"&&(Ce.responseType="arraybuffer"),le.headers)Ce.setRequestHeader(Ne,le.headers[Ne]);return le.type==="json"&&(Ce.responseType="text",Ce.setRequestHeader("Accept","application/json")),Ce.withCredentials=le.credentials==="include",Ce.onerror=function(){Te(new Error(Ce.statusText))},Ce.onload=function(){if((Ce.status>=200&&Ce.status<300||Ce.status===0)&&Ce.response!==null){var Ze=Ce.response;if(le.type==="json")try{Ze=JSON.parse(Ce.response)}catch(st){return Te(st)}Te(null,Ze,Ce.getResponseHeader("Cache-Control"),Ce.getResponseHeader("Expires"))}else Te(new Qe(Ce.statusText,Ce.status,le.url))},Ce.send(le.body),{cancel:function(){return Ce.abort()}}}(A,D)},Pt=function(A,D){return Ot(c(A,{type:"arrayBuffer"}),D)},St=function(A,D){return Ot(c(A,{method:"POST"}),D)},He,We,Be="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";He=[],We=0;var Ge=function(A,D){if(X.supported&&(A.headers||(A.headers={}),A.headers.accept="image/webp,*/*"),We>=Z.MAX_PARALLEL_IMAGE_REQUESTS){var Y={requestParameters:A,callback:D,cancelled:!1,cancel:function(){this.cancelled=!0}};return He.push(Y),Y}We++;var le=!1,Te=function(){if(!le)for(le=!0,We--;He.length&&We<Z.MAX_PARALLEL_IMAGE_REQUESTS;){var Ne=He.shift(),Ze=Ne.requestParameters,st=Ne.callback;Ne.cancelled||(Ne.cancel=Ge(Ze,st).cancel)}},Ce=Pt(A,function(Ne,Ze,st,_t){Te(),Ne?D(Ne):Ze&&(vt()?function(kt,It){var Vt=new n.Blob([new Uint8Array(kt)],{type:"image/png"});n.createImageBitmap(Vt).then(function(Bt){It(null,Bt)}).catch(function(Bt){It(new Error("Could not load image because of "+Bt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(Ze,D):function(kt,It,Vt,Bt){var nn=new n.Image,un=n.URL;nn.onload=function(){It(null,nn),un.revokeObjectURL(nn.src),nn.onload=null,n.requestAnimationFrame(function(){nn.src=Be})},nn.onerror=function(){return It(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var kn=new n.Blob([new Uint8Array(kt)],{type:"image/png"});nn.cacheControl=Vt,nn.expires=Bt,nn.src=kt.byteLength?un.createObjectURL(kn):Be}(Ze,D,st,_t))});return{cancel:function(){Ce.cancel(),Te()}}};function ot(A,D,Y){Y[A]&&Y[A].indexOf(D)!==-1||(Y[A]=Y[A]||[],Y[A].push(D))}function it(A,D,Y){if(Y&&Y[A]){var le=Y[A].indexOf(D);le!==-1&&Y[A].splice(le,1)}}var dt=function(A,D){D===void 0&&(D={}),c(this,D),this.type=A},gt=function(A){function D(Y,le){le===void 0&&(le={}),A.call(this,"error",c({error:Y},le))}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D}(dt),je=function(){};je.prototype.on=function(A,D){return this._listeners=this._listeners||{},ot(A,D,this._listeners),this},je.prototype.off=function(A,D){return it(A,D,this._listeners),it(A,D,this._oneTimeListeners),this},je.prototype.once=function(A,D){return this._oneTimeListeners=this._oneTimeListeners||{},ot(A,D,this._oneTimeListeners),this},je.prototype.fire=function(A,D){typeof A=="string"&&(A=new dt(A,D||{}));var Y=A.type;if(this.listens(Y)){A.target=this;for(var le=0,Te=this._listeners&&this._listeners[Y]?this._listeners[Y].slice():[];le<Te.length;le+=1)Te[le].call(this,A);for(var Ce=0,Ne=this._oneTimeListeners&&this._oneTimeListeners[Y]?this._oneTimeListeners[Y].slice():[];Ce<Ne.length;Ce+=1){var Ze=Ne[Ce];it(Y,Ze,this._oneTimeListeners),Ze.call(this,A)}var st=this._eventedParent;st&&(c(A,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),st.fire(A))}else A instanceof gt&&console.error(A.error);return this},je.prototype.listens=function(A){return this._listeners&&this._listeners[A]&&this._listeners[A].length>0||this._oneTimeListeners&&this._oneTimeListeners[A]&&this._oneTimeListeners[A].length>0||this._eventedParent&&this._eventedParent.listens(A)},je.prototype.setEventedParent=function(A,D){return this._eventedParent=A,this._eventedParentData=D,this};var Re={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},rt=function(A,D,Y,le){this.message=(A?A+": ":"")+Y,le&&(this.identifier=le),D!=null&&D.__line__&&(this.line=D.__line__)};function ct(A){var D=A.key,Y=A.value;return Y?[new rt(D,Y,"constants have been deprecated as of v8")]:[]}function ut(A){for(var D=[],Y=arguments.length-1;Y-- >0;)D[Y]=arguments[Y+1];for(var le=0,Te=D;le<Te.length;le+=1){var Ce=Te[le];for(var Ne in Ce)A[Ne]=Ce[Ne]}return A}function et(A){return A instanceof Number||A instanceof String||A instanceof Boolean?A.valueOf():A}function xt(A){if(Array.isArray(A))return A.map(xt);if(A instanceof Object&&!(A instanceof Number||A instanceof String||A instanceof Boolean)){var D={};for(var Y in A)D[Y]=xt(A[Y]);return D}return et(A)}var mt=function(A){function D(Y,le){A.call(this,le),this.message=le,this.key=Y}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D}(Error),Tt=function(A,D){D===void 0&&(D=[]),this.parent=A,this.bindings={};for(var Y=0,le=D;Y<le.length;Y+=1){var Te=le[Y],Ce=Te[0],Ne=Te[1];this.bindings[Ce]=Ne}};Tt.prototype.concat=function(A){return new Tt(this,A)},Tt.prototype.get=function(A){if(this.bindings[A])return this.bindings[A];if(this.parent)return this.parent.get(A);throw new Error(A+" not found in scope.")},Tt.prototype.has=function(A){return!!this.bindings[A]||!!this.parent&&this.parent.has(A)};var yt={kind:"null"},bt={kind:"number"},zt={kind:"string"},Ut={kind:"boolean"},en={kind:"color"},an={kind:"object"},rn={kind:"value"},qt={kind:"collator"},Kt={kind:"formatted"},xn={kind:"resolvedImage"};function on(A,D){return{kind:"array",itemType:A,N:D}}function Xt(A){if(A.kind==="array"){var D=Xt(A.itemType);return typeof A.N=="number"?"array<"+D+", "+A.N+">":A.itemType.kind==="value"?"array":"array<"+D+">"}return A.kind}var ln=[yt,bt,zt,Ut,en,Kt,an,on(rn),xn];function Jt(A,D){if(D.kind==="error")return null;if(A.kind==="array"){if(D.kind==="array"&&(D.N===0&&D.itemType.kind==="value"||!Jt(A.itemType,D.itemType))&&(typeof A.N!="number"||A.N===D.N))return null}else{if(A.kind===D.kind)return null;if(A.kind==="value"){for(var Y=0,le=ln;Y<le.length;Y+=1)if(!Jt(le[Y],D))return null}}return"Expected "+Xt(A)+" but found "+Xt(D)+" instead."}function tn(A,D){return D.some(function(Y){return Y.kind===A.kind})}function wn(A,D){return D.some(function(Y){return Y==="null"?A===null:Y==="array"?Array.isArray(A):Y==="object"?A&&!Array.isArray(A)&&typeof A=="object":Y===typeof A})}var mn=T(function(A,D){var Y={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function le(st){return(st=Math.round(st))<0?0:st>255?255:st}function Te(st){return st<0?0:st>1?1:st}function Ce(st){return st[st.length-1]==="%"?le(parseFloat(st)/100*255):le(parseInt(st))}function Ne(st){return st[st.length-1]==="%"?Te(parseFloat(st)/100):Te(parseFloat(st))}function Ze(st,_t,kt){return kt<0?kt+=1:kt>1&&(kt-=1),6*kt<1?st+(_t-st)*kt*6:2*kt<1?_t:3*kt<2?st+(_t-st)*(2/3-kt)*6:st}try{D.parseCSSColor=function(st){var _t,kt=st.replace(/ /g,"").toLowerCase();if(kt in Y)return Y[kt].slice();if(kt[0]==="#")return kt.length===4?(_t=parseInt(kt.substr(1),16))>=0&&_t<=4095?[(3840&_t)>>4|(3840&_t)>>8,240&_t|(240&_t)>>4,15&_t|(15&_t)<<4,1]:null:kt.length===7&&(_t=parseInt(kt.substr(1),16))>=0&&_t<=16777215?[(16711680&_t)>>16,(65280&_t)>>8,255&_t,1]:null;var It=kt.indexOf("("),Vt=kt.indexOf(")");if(It!==-1&&Vt+1===kt.length){var Bt=kt.substr(0,It),nn=kt.substr(It+1,Vt-(It+1)).split(","),un=1;switch(Bt){case"rgba":if(nn.length!==4)return null;un=Ne(nn.pop());case"rgb":return nn.length!==3?null:[Ce(nn[0]),Ce(nn[1]),Ce(nn[2]),un];case"hsla":if(nn.length!==4)return null;un=Ne(nn.pop());case"hsl":if(nn.length!==3)return null;var kn=(parseFloat(nn[0])%360+360)%360/360,bn=Ne(nn[1]),In=Ne(nn[2]),Rn=In<=.5?In*(bn+1):In+bn-In*bn,Vn=2*In-Rn;return[le(255*Ze(Vn,Rn,kn+1/3)),le(255*Ze(Vn,Rn,kn)),le(255*Ze(Vn,Rn,kn-1/3)),un];default:return null}}return null}}catch{}}),Cn=mn.parseCSSColor,yn=function(A,D,Y,le){le===void 0&&(le=1),this.r=A,this.g=D,this.b=Y,this.a=le};yn.parse=function(A){if(A){if(A instanceof yn)return A;if(typeof A=="string"){var D=Cn(A);if(D)return new yn(D[0]/255*D[3],D[1]/255*D[3],D[2]/255*D[3],D[3])}}},yn.prototype.toString=function(){var A=this.toArray(),D=A[0],Y=A[1],le=A[2],Te=A[3];return"rgba("+Math.round(D)+","+Math.round(Y)+","+Math.round(le)+","+Te+")"},yn.prototype.toArray=function(){var A=this,D=A.r,Y=A.g,le=A.b,Te=A.a;return Te===0?[0,0,0,0]:[255*D/Te,255*Y/Te,255*le/Te,Te]},yn.black=new yn(0,0,0,1),yn.white=new yn(1,1,1,1),yn.transparent=new yn(0,0,0,0),yn.red=new yn(1,0,0,1);var Mn=function(A,D,Y){this.sensitivity=A?D?"variant":"case":D?"accent":"base",this.locale=Y,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Mn.prototype.compare=function(A,D){return this.collator.compare(A,D)},Mn.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var zn=function(A,D,Y,le,Te){this.text=A,this.image=D,this.scale=Y,this.fontStack=le,this.textColor=Te},Wn=function(A){this.sections=A};Wn.fromString=function(A){return new Wn([new zn(A,null,null,null,null)])},Wn.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(A){return A.text.length!==0||A.image&&A.image.name.length!==0})},Wn.factory=function(A){return A instanceof Wn?A:Wn.fromString(A)},Wn.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(A){return A.text}).join("")},Wn.prototype.serialize=function(){for(var A=["format"],D=0,Y=this.sections;D<Y.length;D+=1){var le=Y[D];if(le.image)A.push(["image",le.image.name]);else{A.push(le.text);var Te={};le.fontStack&&(Te["text-font"]=["literal",le.fontStack.split(",")]),le.scale&&(Te["font-scale"]=le.scale),le.textColor&&(Te["text-color"]=["rgba"].concat(le.textColor.toArray())),A.push(Te)}}return A};var sr=function(A){this.name=A.name,this.available=A.available};function Fn(A,D,Y,le){return typeof A=="number"&&A>=0&&A<=255&&typeof D=="number"&&D>=0&&D<=255&&typeof Y=="number"&&Y>=0&&Y<=255?le===void 0||typeof le=="number"&&le>=0&&le<=1?null:"Invalid rgba value ["+[A,D,Y,le].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof le=="number"?[A,D,Y,le]:[A,D,Y]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Yn(A){if(A===null||typeof A=="string"||typeof A=="boolean"||typeof A=="number"||A instanceof yn||A instanceof Mn||A instanceof Wn||A instanceof sr)return!0;if(Array.isArray(A)){for(var D=0,Y=A;D<Y.length;D+=1)if(!Yn(Y[D]))return!1;return!0}if(typeof A=="object"){for(var le in A)if(!Yn(A[le]))return!1;return!0}return!1}function Xn(A){if(A===null)return yt;if(typeof A=="string")return zt;if(typeof A=="boolean")return Ut;if(typeof A=="number")return bt;if(A instanceof yn)return en;if(A instanceof Mn)return qt;if(A instanceof Wn)return Kt;if(A instanceof sr)return xn;if(Array.isArray(A)){for(var D,Y=A.length,le=0,Te=A;le<Te.length;le+=1){var Ce=Xn(Te[le]);if(D){if(D===Ce)continue;D=rn;break}D=Ce}return on(D||rn,Y)}return an}function rr(A){var D=typeof A;return A===null?"":D==="string"||D==="number"||D==="boolean"?String(A):A instanceof yn||A instanceof Wn||A instanceof sr?A.toString():JSON.stringify(A)}sr.prototype.toString=function(){return this.name},sr.fromString=function(A){return A?new sr({name:A,available:!1}):null},sr.prototype.serialize=function(){return["image",this.name]};var Yt=function(A,D){this.type=A,this.value=D};Yt.parse=function(A,D){if(A.length!==2)return D.error("'literal' expression requires exactly one argument, but found "+(A.length-1)+" instead.");if(!Yn(A[1]))return D.error("invalid value");var Y=A[1],le=Xn(Y),Te=D.expectedType;return le.kind!=="array"||le.N!==0||!Te||Te.kind!=="array"||typeof Te.N=="number"&&Te.N!==0||(le=Te),new Yt(le,Y)},Yt.prototype.evaluate=function(){return this.value},Yt.prototype.eachChild=function(){},Yt.prototype.outputDefined=function(){return!0},Yt.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof yn?["rgba"].concat(this.value.toArray()):this.value instanceof Wn?this.value.serialize():this.value};var $t=function(A){this.name="ExpressionEvaluationError",this.message=A};$t.prototype.toJSON=function(){return this.message};var Sn={string:zt,number:bt,boolean:Ut,object:an},dn=function(A,D){this.type=A,this.args=D};dn.parse=function(A,D){if(A.length<2)return D.error("Expected at least one argument.");var Y,le=1,Te=A[0];if(Te==="array"){var Ce,Ne;if(A.length>2){var Ze=A[1];if(typeof Ze!="string"||!(Ze in Sn)||Ze==="object")return D.error('The item type argument of "array" must be one of string, number, boolean',1);Ce=Sn[Ze],le++}else Ce=rn;if(A.length>3){if(A[2]!==null&&(typeof A[2]!="number"||A[2]<0||A[2]!==Math.floor(A[2])))return D.error('The length argument to "array" must be a positive integer literal',2);Ne=A[2],le++}Y=on(Ce,Ne)}else Y=Sn[Te];for(var st=[];le<A.length;le++){var _t=D.parse(A[le],le,rn);if(!_t)return null;st.push(_t)}return new dn(Y,st)},dn.prototype.evaluate=function(A){for(var D=0;D<this.args.length;D++){var Y=this.args[D].evaluate(A);if(!Jt(this.type,Xn(Y)))return Y;if(D===this.args.length-1)throw new $t("Expected value to be of type "+Xt(this.type)+", but found "+Xt(Xn(Y))+" instead.")}return null},dn.prototype.eachChild=function(A){this.args.forEach(A)},dn.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},dn.prototype.serialize=function(){var A=this.type,D=[A.kind];if(A.kind==="array"){var Y=A.itemType;if(Y.kind==="string"||Y.kind==="number"||Y.kind==="boolean"){D.push(Y.kind);var le=A.N;(typeof le=="number"||this.args.length>1)&&D.push(le)}}return D.concat(this.args.map(function(Te){return Te.serialize()}))};var En=function(A){this.type=Kt,this.sections=A};En.parse=function(A,D){if(A.length<2)return D.error("Expected at least one argument.");var Y=A[1];if(!Array.isArray(Y)&&typeof Y=="object")return D.error("First argument must be an image or text section.");for(var le=[],Te=!1,Ce=1;Ce<=A.length-1;++Ce){var Ne=A[Ce];if(Te&&typeof Ne=="object"&&!Array.isArray(Ne)){Te=!1;var Ze=null;if(Ne["font-scale"]&&!(Ze=D.parse(Ne["font-scale"],1,bt)))return null;var st=null;if(Ne["text-font"]&&!(st=D.parse(Ne["text-font"],1,on(zt))))return null;var _t=null;if(Ne["text-color"]&&!(_t=D.parse(Ne["text-color"],1,en)))return null;var kt=le[le.length-1];kt.scale=Ze,kt.font=st,kt.textColor=_t}else{var It=D.parse(A[Ce],1,rn);if(!It)return null;var Vt=It.type.kind;if(Vt!=="string"&&Vt!=="value"&&Vt!=="null"&&Vt!=="resolvedImage")return D.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");Te=!0,le.push({content:It,scale:null,font:null,textColor:null})}}return new En(le)},En.prototype.evaluate=function(A){return new Wn(this.sections.map(function(D){var Y=D.content.evaluate(A);return Xn(Y)===xn?new zn("",Y,null,null,null):new zn(rr(Y),null,D.scale?D.scale.evaluate(A):null,D.font?D.font.evaluate(A).join(","):null,D.textColor?D.textColor.evaluate(A):null)}))},En.prototype.eachChild=function(A){for(var D=0,Y=this.sections;D<Y.length;D+=1){var le=Y[D];A(le.content),le.scale&&A(le.scale),le.font&&A(le.font),le.textColor&&A(le.textColor)}},En.prototype.outputDefined=function(){return!1},En.prototype.serialize=function(){for(var A=["format"],D=0,Y=this.sections;D<Y.length;D+=1){var le=Y[D];A.push(le.content.serialize());var Te={};le.scale&&(Te["font-scale"]=le.scale.serialize()),le.font&&(Te["text-font"]=le.font.serialize()),le.textColor&&(Te["text-color"]=le.textColor.serialize()),A.push(Te)}return A};var Nn=function(A){this.type=xn,this.input=A};Nn.parse=function(A,D){if(A.length!==2)return D.error("Expected two arguments.");var Y=D.parse(A[1],1,zt);return Y?new Nn(Y):D.error("No image name provided.")},Nn.prototype.evaluate=function(A){var D=this.input.evaluate(A),Y=sr.fromString(D);return Y&&A.availableImages&&(Y.available=A.availableImages.indexOf(D)>-1),Y},Nn.prototype.eachChild=function(A){A(this.input)},Nn.prototype.outputDefined=function(){return!1},Nn.prototype.serialize=function(){return["image",this.input.serialize()]};var Bn={"to-boolean":Ut,"to-color":en,"to-number":bt,"to-string":zt},$n=function(A,D){this.type=A,this.args=D};$n.parse=function(A,D){if(A.length<2)return D.error("Expected at least one argument.");var Y=A[0];if((Y==="to-boolean"||Y==="to-string")&&A.length!==2)return D.error("Expected one argument.");for(var le=Bn[Y],Te=[],Ce=1;Ce<A.length;Ce++){var Ne=D.parse(A[Ce],Ce,rn);if(!Ne)return null;Te.push(Ne)}return new $n(le,Te)},$n.prototype.evaluate=function(A){if(this.type.kind==="boolean")return!!this.args[0].evaluate(A);if(this.type.kind==="color"){for(var D,Y,le=0,Te=this.args;le<Te.length;le+=1){if(Y=null,(D=Te[le].evaluate(A))instanceof yn)return D;if(typeof D=="string"){var Ce=A.parseColor(D);if(Ce)return Ce}else if(Array.isArray(D)&&!(Y=D.length<3||D.length>4?"Invalid rbga value "+JSON.stringify(D)+": expected an array containing either three or four numeric values.":Fn(D[0],D[1],D[2],D[3])))return new yn(D[0]/255,D[1]/255,D[2]/255,D[3])}throw new $t(Y||"Could not parse color from value '"+(typeof D=="string"?D:String(JSON.stringify(D)))+"'")}if(this.type.kind==="number"){for(var Ne=null,Ze=0,st=this.args;Ze<st.length;Ze+=1){if((Ne=st[Ze].evaluate(A))===null)return 0;var _t=Number(Ne);if(!isNaN(_t))return _t}throw new $t("Could not convert "+JSON.stringify(Ne)+" to number.")}return this.type.kind==="formatted"?Wn.fromString(rr(this.args[0].evaluate(A))):this.type.kind==="resolvedImage"?sr.fromString(rr(this.args[0].evaluate(A))):rr(this.args[0].evaluate(A))},$n.prototype.eachChild=function(A){this.args.forEach(A)},$n.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},$n.prototype.serialize=function(){if(this.type.kind==="formatted")return new En([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Nn(this.args[0]).serialize();var A=["to-"+this.type.kind];return this.eachChild(function(D){A.push(D.serialize())}),A};var lr=["Unknown","Point","LineString","Polygon"],Gt=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Gt.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Gt.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?lr[this.feature.type]:this.feature.type:null},Gt.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Gt.prototype.canonicalID=function(){return this.canonical},Gt.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Gt.prototype.parseColor=function(A){var D=this._parseColorCache[A];return D||(D=this._parseColorCache[A]=yn.parse(A)),D};var gn=function(A,D,Y,le){this.name=A,this.type=D,this._evaluate=Y,this.args=le};gn.prototype.evaluate=function(A){return this._evaluate(A,this.args)},gn.prototype.eachChild=function(A){this.args.forEach(A)},gn.prototype.outputDefined=function(){return!1},gn.prototype.serialize=function(){return[this.name].concat(this.args.map(function(A){return A.serialize()}))},gn.parse=function(A,D){var Y,le=A[0],Te=gn.definitions[le];if(!Te)return D.error('Unknown expression "'+le+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Ce=Array.isArray(Te)?Te[0]:Te.type,Ne=Array.isArray(Te)?[[Te[1],Te[2]]]:Te.overloads,Ze=Ne.filter(function(Dr){var Sr=Dr[0];return!Array.isArray(Sr)||Sr.length===A.length-1}),st=null,_t=0,kt=Ze;_t<kt.length;_t+=1){var It=kt[_t],Vt=It[0],Bt=It[1];st=new ur(D.registry,D.path,null,D.scope);for(var nn=[],un=!1,kn=1;kn<A.length;kn++){var bn=A[kn],In=Array.isArray(Vt)?Vt[kn-1]:Vt.type,Rn=st.parse(bn,1+nn.length,In);if(!Rn){un=!0;break}nn.push(Rn)}if(!un)if(Array.isArray(Vt)&&Vt.length!==nn.length)st.error("Expected "+Vt.length+" arguments, but found "+nn.length+" instead.");else{for(var Vn=0;Vn<nn.length;Vn++){var Jn=Array.isArray(Vt)?Vt[Vn]:Vt.type,nr=nn[Vn];st.concat(Vn+1).checkSubtype(Jn,nr.type)}if(st.errors.length===0)return new gn(le,Ce,Bt,nn)}}if(Ze.length===1)(Y=D.errors).push.apply(Y,st.errors);else{for(var dr=(Ze.length?Ze:Ne).map(function(Dr){return Sr=Dr[0],Array.isArray(Sr)?"("+Sr.map(Xt).join(", ")+")":"("+Xt(Sr.type)+"...)";var Sr}).join(" | "),hr=[],yr=1;yr<A.length;yr++){var br=D.parse(A[yr],1+hr.length);if(!br)return null;hr.push(Xt(br.type))}D.error("Expected arguments of type "+dr+", but found ("+hr.join(", ")+") instead.")}return null},gn.register=function(A,D){for(var Y in gn.definitions=D,D)A[Y]=gn};var Ct=function(A,D,Y){this.type=qt,this.locale=Y,this.caseSensitive=A,this.diacriticSensitive=D};Ct.parse=function(A,D){if(A.length!==2)return D.error("Expected one argument.");var Y=A[1];if(typeof Y!="object"||Array.isArray(Y))return D.error("Collator options argument must be an object.");var le=D.parse(Y["case-sensitive"]!==void 0&&Y["case-sensitive"],1,Ut);if(!le)return null;var Te=D.parse(Y["diacritic-sensitive"]!==void 0&&Y["diacritic-sensitive"],1,Ut);if(!Te)return null;var Ce=null;return Y.locale&&!(Ce=D.parse(Y.locale,1,zt))?null:new Ct(le,Te,Ce)},Ct.prototype.evaluate=function(A){return new Mn(this.caseSensitive.evaluate(A),this.diacriticSensitive.evaluate(A),this.locale?this.locale.evaluate(A):null)},Ct.prototype.eachChild=function(A){A(this.caseSensitive),A(this.diacriticSensitive),this.locale&&A(this.locale)},Ct.prototype.outputDefined=function(){return!1},Ct.prototype.serialize=function(){var A={};return A["case-sensitive"]=this.caseSensitive.serialize(),A["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(A.locale=this.locale.serialize()),["collator",A]};var Rt=8192;function Zt(A,D){A[0]=Math.min(A[0],D[0]),A[1]=Math.min(A[1],D[1]),A[2]=Math.max(A[2],D[0]),A[3]=Math.max(A[3],D[1])}function cn(A,D){return!(A[0]<=D[0]||A[2]>=D[2]||A[1]<=D[1]||A[3]>=D[3])}function fn(A,D){var Y,le=(180+A[0])/360,Te=(Y=A[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+Y*Math.PI/360)))/360),Ce=Math.pow(2,D.z);return[Math.round(le*Ce*Rt),Math.round(Te*Ce*Rt)]}function _n(A,D,Y){return D[1]>A[1]!=Y[1]>A[1]&&A[0]<(Y[0]-D[0])*(A[1]-D[1])/(Y[1]-D[1])+D[0]}function pn(A,D){for(var Y=!1,le=0,Te=D.length;le<Te;le++)for(var Ce=D[le],Ne=0,Ze=Ce.length;Ne<Ze-1;Ne++){if(st=A,_t=Ce[Ne],kt=Ce[Ne+1],It=void 0,Vt=void 0,Bt=void 0,nn=void 0,It=st[0]-_t[0],Vt=st[1]-_t[1],Bt=st[0]-kt[0],nn=st[1]-kt[1],It*nn-Bt*Vt==0&&It*Bt<=0&&Vt*nn<=0)return!1;_n(A,Ce[Ne],Ce[Ne+1])&&(Y=!Y)}var st,_t,kt,It,Vt,Bt,nn;return Y}function sn(A,D){for(var Y=0;Y<D.length;Y++)if(pn(A,D[Y]))return!0;return!1}function Nt(A,D,Y,le){var Te=A[0]-Y[0],Ce=A[1]-Y[1],Ne=D[0]-Y[0],Ze=D[1]-Y[1],st=le[0]-Y[0],_t=le[1]-Y[1],kt=Te*_t-st*Ce,It=Ne*_t-st*Ze;return kt>0&&It<0||kt<0&&It>0}function Ft(A,D,Y){for(var le=0,Te=Y;le<Te.length;le+=1)for(var Ce=Te[le],Ne=0;Ne<Ce.length-1;++Ne)if(Ze=A,st=D,_t=Ce[Ne],kt=Ce[Ne+1],It=void 0,Vt=void 0,Bt=void 0,Bt=[st[0]-Ze[0],st[1]-Ze[1]],It=[kt[0]-_t[0],kt[1]-_t[1]],Vt=Bt,It[0]*Vt[1]-It[1]*Vt[0]!=0&&Nt(Ze,st,_t,kt)&&Nt(_t,kt,Ze,st))return!0;var Ze,st,_t,kt,It,Vt,Bt;return!1}function Qt(A,D){for(var Y=0;Y<A.length;++Y)if(!pn(A[Y],D))return!1;for(var le=0;le<A.length-1;++le)if(Ft(A[le],A[le+1],D))return!1;return!0}function Tn(A,D){for(var Y=0;Y<D.length;Y++)if(Qt(A,D[Y]))return!0;return!1}function Pn(A,D,Y){for(var le=[],Te=0;Te<A.length;Te++){for(var Ce=[],Ne=0;Ne<A[Te].length;Ne++){var Ze=fn(A[Te][Ne],Y);Zt(D,Ze),Ce.push(Ze)}le.push(Ce)}return le}function On(A,D,Y){for(var le=[],Te=0;Te<A.length;Te++){var Ce=Pn(A[Te],D,Y);le.push(Ce)}return le}function Dn(A,D,Y,le){if(A[0]<Y[0]||A[0]>Y[2]){var Te=.5*le,Ce=A[0]-Y[0]>Te?-le:Y[0]-A[0]>Te?le:0;Ce===0&&(Ce=A[0]-Y[2]>Te?-le:Y[2]-A[0]>Te?le:0),A[0]+=Ce}Zt(D,A)}function Zn(A,D,Y,le){for(var Te=Math.pow(2,le.z)*Rt,Ce=[le.x*Rt,le.y*Rt],Ne=[],Ze=0,st=A;Ze<st.length;Ze+=1)for(var _t=0,kt=st[Ze];_t<kt.length;_t+=1){var It=kt[_t],Vt=[It.x+Ce[0],It.y+Ce[1]];Dn(Vt,D,Y,Te),Ne.push(Vt)}return Ne}function qn(A,D,Y,le){for(var Te=Math.pow(2,le.z)*Rt,Ce=[le.x*Rt,le.y*Rt],Ne=[],Ze=0,st=A;Ze<st.length;Ze+=1){for(var _t=[],kt=0,It=st[Ze];kt<It.length;kt+=1){var Vt=It[kt],Bt=[Vt.x+Ce[0],Vt.y+Ce[1]];Zt(D,Bt),_t.push(Bt)}Ne.push(_t)}if(D[2]-D[0]<=Te/2){(In=D)[0]=In[1]=1/0,In[2]=In[3]=-1/0;for(var nn=0,un=Ne;nn<un.length;nn+=1)for(var kn=0,bn=un[nn];kn<bn.length;kn+=1)Dn(bn[kn],D,Y,Te)}var In;return Ne}var Kn=function(A,D){this.type=Ut,this.geojson=A,this.geometries=D};function Un(A){if(A instanceof gn&&(A.name==="get"&&A.args.length===1||A.name==="feature-state"||A.name==="has"&&A.args.length===1||A.name==="properties"||A.name==="geometry-type"||A.name==="id"||/^filter-/.test(A.name))||A instanceof Kn)return!1;var D=!0;return A.eachChild(function(Y){D&&!Un(Y)&&(D=!1)}),D}function Gn(A){if(A instanceof gn&&A.name==="feature-state")return!1;var D=!0;return A.eachChild(function(Y){D&&!Gn(Y)&&(D=!1)}),D}function ir(A,D){if(A instanceof gn&&D.indexOf(A.name)>=0)return!1;var Y=!0;return A.eachChild(function(le){Y&&!ir(le,D)&&(Y=!1)}),Y}Kn.parse=function(A,D){if(A.length!==2)return D.error("'within' expression requires exactly one argument, but found "+(A.length-1)+" instead.");if(Yn(A[1])){var Y=A[1];if(Y.type==="FeatureCollection")for(var le=0;le<Y.features.length;++le){var Te=Y.features[le].geometry.type;if(Te==="Polygon"||Te==="MultiPolygon")return new Kn(Y,Y.features[le].geometry)}else if(Y.type==="Feature"){var Ce=Y.geometry.type;if(Ce==="Polygon"||Ce==="MultiPolygon")return new Kn(Y,Y.geometry)}else if(Y.type==="Polygon"||Y.type==="MultiPolygon")return new Kn(Y,Y)}return D.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Kn.prototype.evaluate=function(A){if(A.geometry()!=null&&A.canonicalID()!=null){if(A.geometryType()==="Point")return function(D,Y){var le=[1/0,1/0,-1/0,-1/0],Te=[1/0,1/0,-1/0,-1/0],Ce=D.canonicalID();if(Y.type==="Polygon"){var Ne=Pn(Y.coordinates,Te,Ce),Ze=Zn(D.geometry(),le,Te,Ce);if(!cn(le,Te))return!1;for(var st=0,_t=Ze;st<_t.length;st+=1)if(!pn(_t[st],Ne))return!1}if(Y.type==="MultiPolygon"){var kt=On(Y.coordinates,Te,Ce),It=Zn(D.geometry(),le,Te,Ce);if(!cn(le,Te))return!1;for(var Vt=0,Bt=It;Vt<Bt.length;Vt+=1)if(!sn(Bt[Vt],kt))return!1}return!0}(A,this.geometries);if(A.geometryType()==="LineString")return function(D,Y){var le=[1/0,1/0,-1/0,-1/0],Te=[1/0,1/0,-1/0,-1/0],Ce=D.canonicalID();if(Y.type==="Polygon"){var Ne=Pn(Y.coordinates,Te,Ce),Ze=qn(D.geometry(),le,Te,Ce);if(!cn(le,Te))return!1;for(var st=0,_t=Ze;st<_t.length;st+=1)if(!Qt(_t[st],Ne))return!1}if(Y.type==="MultiPolygon"){var kt=On(Y.coordinates,Te,Ce),It=qn(D.geometry(),le,Te,Ce);if(!cn(le,Te))return!1;for(var Vt=0,Bt=It;Vt<Bt.length;Vt+=1)if(!Tn(Bt[Vt],kt))return!1}return!0}(A,this.geometries)}return!1},Kn.prototype.eachChild=function(){},Kn.prototype.outputDefined=function(){return!0},Kn.prototype.serialize=function(){return["within",this.geojson]};var mr=function(A,D){this.type=D.type,this.name=A,this.boundExpression=D};mr.parse=function(A,D){if(A.length!==2||typeof A[1]!="string")return D.error("'var' expression requires exactly one string literal argument.");var Y=A[1];return D.scope.has(Y)?new mr(Y,D.scope.get(Y)):D.error('Unknown variable "'+Y+'". Make sure "'+Y+'" has been bound in an enclosing "let" expression before using it.',1)},mr.prototype.evaluate=function(A){return this.boundExpression.evaluate(A)},mr.prototype.eachChild=function(){},mr.prototype.outputDefined=function(){return!1},mr.prototype.serialize=function(){return["var",this.name]};var ur=function(A,D,Y,le,Te){D===void 0&&(D=[]),le===void 0&&(le=new Tt),Te===void 0&&(Te=[]),this.registry=A,this.path=D,this.key=D.map(function(Ce){return"["+Ce+"]"}).join(""),this.scope=le,this.errors=Te,this.expectedType=Y};function Qn(A){if(A instanceof mr)return Qn(A.boundExpression);if(A instanceof gn&&A.name==="error"||A instanceof Ct||A instanceof Kn)return!1;var D=A instanceof $n||A instanceof dn,Y=!0;return A.eachChild(function(le){Y=D?Y&&Qn(le):Y&&le instanceof Yt}),!!Y&&Un(A)&&ir(A,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function pr(A,D){for(var Y,le,Te=A.length-1,Ce=0,Ne=Te,Ze=0;Ce<=Ne;)if(Y=A[Ze=Math.floor((Ce+Ne)/2)],le=A[Ze+1],Y<=D){if(Ze===Te||D<le)return Ze;Ce=Ze+1}else{if(!(Y>D))throw new $t("Input is not a number.");Ne=Ze-1}return 0}ur.prototype.parse=function(A,D,Y,le,Te){return Te===void 0&&(Te={}),D?this.concat(D,Y,le)._parse(A,Te):this._parse(A,Te)},ur.prototype._parse=function(A,D){function Y(_t,kt,It){return It==="assert"?new dn(kt,[_t]):It==="coerce"?new $n(kt,[_t]):_t}if(A!==null&&typeof A!="string"&&typeof A!="boolean"&&typeof A!="number"||(A=["literal",A]),Array.isArray(A)){if(A.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var le=A[0];if(typeof le!="string")return this.error("Expression name must be a string, but found "+typeof le+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var Te=this.registry[le];if(Te){var Ce=Te.parse(A,this);if(!Ce)return null;if(this.expectedType){var Ne=this.expectedType,Ze=Ce.type;if(Ne.kind!=="string"&&Ne.kind!=="number"&&Ne.kind!=="boolean"&&Ne.kind!=="object"&&Ne.kind!=="array"||Ze.kind!=="value")if(Ne.kind!=="color"&&Ne.kind!=="formatted"&&Ne.kind!=="resolvedImage"||Ze.kind!=="value"&&Ze.kind!=="string"){if(this.checkSubtype(Ne,Ze))return null}else Ce=Y(Ce,Ne,D.typeAnnotation||"coerce");else Ce=Y(Ce,Ne,D.typeAnnotation||"assert")}if(!(Ce instanceof Yt)&&Ce.type.kind!=="resolvedImage"&&Qn(Ce)){var st=new Gt;try{Ce=new Yt(Ce.type,Ce.evaluate(st))}catch(_t){return this.error(_t.message),null}}return Ce}return this.error('Unknown expression "'+le+'". If you wanted a literal array, use ["literal", [...]].',0)}return A===void 0?this.error("'undefined' value invalid. Use null instead."):typeof A=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof A+" instead.")},ur.prototype.concat=function(A,D,Y){var le=typeof A=="number"?this.path.concat(A):this.path,Te=Y?this.scope.concat(Y):this.scope;return new ur(this.registry,le,D||null,Te,this.errors)},ur.prototype.error=function(A){for(var D=[],Y=arguments.length-1;Y-- >0;)D[Y]=arguments[Y+1];var le=""+this.key+D.map(function(Te){return"["+Te+"]"}).join("");this.errors.push(new mt(le,A))},ur.prototype.checkSubtype=function(A,D){var Y=Jt(A,D);return Y&&this.error(Y),Y};var Tr=function(A,D,Y){this.type=A,this.input=D,this.labels=[],this.outputs=[];for(var le=0,Te=Y;le<Te.length;le+=1){var Ce=Te[le],Ne=Ce[0],Ze=Ce[1];this.labels.push(Ne),this.outputs.push(Ze)}};function Or(A,D,Y){return A*(1-Y)+D*Y}Tr.parse=function(A,D){if(A.length-1<4)return D.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if((A.length-1)%2!=0)return D.error("Expected an even number of arguments.");var Y=D.parse(A[1],1,bt);if(!Y)return null;var le=[],Te=null;D.expectedType&&D.expectedType.kind!=="value"&&(Te=D.expectedType);for(var Ce=1;Ce<A.length;Ce+=2){var Ne=Ce===1?-1/0:A[Ce],Ze=A[Ce+1],st=Ce,_t=Ce+1;if(typeof Ne!="number")return D.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',st);if(le.length&&le[le.length-1][0]>=Ne)return D.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',st);var kt=D.parse(Ze,_t,Te);if(!kt)return null;Te=Te||kt.type,le.push([Ne,kt])}return new Tr(Te,Y,le)},Tr.prototype.evaluate=function(A){var D=this.labels,Y=this.outputs;if(D.length===1)return Y[0].evaluate(A);var le=this.input.evaluate(A);if(le<=D[0])return Y[0].evaluate(A);var Te=D.length;return le>=D[Te-1]?Y[Te-1].evaluate(A):Y[pr(D,le)].evaluate(A)},Tr.prototype.eachChild=function(A){A(this.input);for(var D=0,Y=this.outputs;D<Y.length;D+=1)A(Y[D])},Tr.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})},Tr.prototype.serialize=function(){for(var A=["step",this.input.serialize()],D=0;D<this.labels.length;D++)D>0&&A.push(this.labels[D]),A.push(this.outputs[D].serialize());return A};var oi=Object.freeze({__proto__:null,number:Or,color:function(A,D,Y){return new yn(Or(A.r,D.r,Y),Or(A.g,D.g,Y),Or(A.b,D.b,Y),Or(A.a,D.a,Y))},array:function(A,D,Y){return A.map(function(le,Te){return Or(le,D[Te],Y)})}}),gi=.95047,Di=1,ii=1.08883,yi=4/29,oa=6/29,Pr=3*oa*oa,Ri=oa*oa*oa,Ma=Math.PI/180,Pi=180/Math.PI;function uo(A){return A>Ri?Math.pow(A,.3333333333333333):A/Pr+yi}function ko(A){return A>oa?A*A*A:Pr*(A-yi)}function Xi(A){return 255*(A<=.0031308?12.92*A:1.055*Math.pow(A,.4166666666666667)-.055)}function Ka(A){return(A/=255)<=.04045?A/12.92:Math.pow((A+.055)/1.055,2.4)}function Ja(A){var D=Ka(A.r),Y=Ka(A.g),le=Ka(A.b),Te=uo((.4124564*D+.3575761*Y+.1804375*le)/gi),Ce=uo((.2126729*D+.7151522*Y+.072175*le)/Di);return{l:116*Ce-16,a:500*(Te-Ce),b:200*(Ce-uo((.0193339*D+.119192*Y+.9503041*le)/ii)),alpha:A.a}}function Ao(A){var D=(A.l+16)/116,Y=isNaN(A.a)?D:D+A.a/500,le=isNaN(A.b)?D:D-A.b/200;return D=Di*ko(D),Y=gi*ko(Y),le=ii*ko(le),new yn(Xi(3.2404542*Y-1.5371385*D-.4985314*le),Xi(-.969266*Y+1.8760108*D+.041556*le),Xi(.0556434*Y-.2040259*D+1.0572252*le),A.alpha)}function Sa(A,D,Y){var le=D-A;return A+Y*(le>180||le<-180?le-360*Math.round(le/360):le)}var Ra={forward:Ja,reverse:Ao,interpolate:function(A,D,Y){return{l:Or(A.l,D.l,Y),a:Or(A.a,D.a,Y),b:Or(A.b,D.b,Y),alpha:Or(A.alpha,D.alpha,Y)}}},Fa={forward:function(A){var D=Ja(A),Y=D.l,le=D.a,Te=D.b,Ce=Math.atan2(Te,le)*Pi;return{h:Ce<0?Ce+360:Ce,c:Math.sqrt(le*le+Te*Te),l:Y,alpha:A.a}},reverse:function(A){var D=A.h*Ma,Y=A.c;return Ao({l:A.l,a:Math.cos(D)*Y,b:Math.sin(D)*Y,alpha:A.alpha})},interpolate:function(A,D,Y){return{h:Sa(A.h,D.h,Y),c:Or(A.c,D.c,Y),l:Or(A.l,D.l,Y),alpha:Or(A.alpha,D.alpha,Y)}}},ti=Object.freeze({__proto__:null,lab:Ra,hcl:Fa}),Fi=function(A,D,Y,le,Te){this.type=A,this.operator=D,this.interpolation=Y,this.input=le,this.labels=[],this.outputs=[];for(var Ce=0,Ne=Te;Ce<Ne.length;Ce+=1){var Ze=Ne[Ce],st=Ze[0],_t=Ze[1];this.labels.push(st),this.outputs.push(_t)}};function co(A,D,Y,le){var Te=le-Y,Ce=A-Y;return Te===0?0:D===1?Ce/Te:(Math.pow(D,Ce)-1)/(Math.pow(D,Te)-1)}Fi.interpolationFactor=function(A,D,Y,le){var Te=0;if(A.name==="exponential")Te=co(D,A.base,Y,le);else if(A.name==="linear")Te=co(D,1,Y,le);else if(A.name==="cubic-bezier"){var Ce=A.controlPoints;Te=new f(Ce[0],Ce[1],Ce[2],Ce[3]).solve(co(D,1,Y,le))}return Te},Fi.parse=function(A,D){var Y=A[0],le=A[1],Te=A[2],Ce=A.slice(3);if(!Array.isArray(le)||le.length===0)return D.error("Expected an interpolation type expression.",1);if(le[0]==="linear")le={name:"linear"};else if(le[0]==="exponential"){var Ne=le[1];if(typeof Ne!="number")return D.error("Exponential interpolation requires a numeric base.",1,1);le={name:"exponential",base:Ne}}else{if(le[0]!=="cubic-bezier")return D.error("Unknown interpolation type "+String(le[0]),1,0);var Ze=le.slice(1);if(Ze.length!==4||Ze.some(function(kn){return typeof kn!="number"||kn<0||kn>1}))return D.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);le={name:"cubic-bezier",controlPoints:Ze}}if(A.length-1<4)return D.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if((A.length-1)%2!=0)return D.error("Expected an even number of arguments.");if(!(Te=D.parse(Te,2,bt)))return null;var st=[],_t=null;Y==="interpolate-hcl"||Y==="interpolate-lab"?_t=en:D.expectedType&&D.expectedType.kind!=="value"&&(_t=D.expectedType);for(var kt=0;kt<Ce.length;kt+=2){var It=Ce[kt],Vt=Ce[kt+1],Bt=kt+3,nn=kt+4;if(typeof It!="number")return D.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Bt);if(st.length&&st[st.length-1][0]>=It)return D.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Bt);var un=D.parse(Vt,nn,_t);if(!un)return null;_t=_t||un.type,st.push([It,un])}return _t.kind==="number"||_t.kind==="color"||_t.kind==="array"&&_t.itemType.kind==="number"&&typeof _t.N=="number"?new Fi(_t,Y,le,Te,st):D.error("Type "+Xt(_t)+" is not interpolatable.")},Fi.prototype.evaluate=function(A){var D=this.labels,Y=this.outputs;if(D.length===1)return Y[0].evaluate(A);var le=this.input.evaluate(A);if(le<=D[0])return Y[0].evaluate(A);var Te=D.length;if(le>=D[Te-1])return Y[Te-1].evaluate(A);var Ce=pr(D,le),Ne=D[Ce],Ze=D[Ce+1],st=Fi.interpolationFactor(this.interpolation,le,Ne,Ze),_t=Y[Ce].evaluate(A),kt=Y[Ce+1].evaluate(A);return this.operator==="interpolate"?oi[this.type.kind.toLowerCase()](_t,kt,st):this.operator==="interpolate-hcl"?Fa.reverse(Fa.interpolate(Fa.forward(_t),Fa.forward(kt),st)):Ra.reverse(Ra.interpolate(Ra.forward(_t),Ra.forward(kt),st))},Fi.prototype.eachChild=function(A){A(this.input);for(var D=0,Y=this.outputs;D<Y.length;D+=1)A(Y[D])},Fi.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})},Fi.prototype.serialize=function(){var A;A=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var D=[this.operator,A,this.input.serialize()],Y=0;Y<this.labels.length;Y++)D.push(this.labels[Y],this.outputs[Y].serialize());return D};var $a=function(A,D){this.type=A,this.args=D};$a.parse=function(A,D){if(A.length<2)return D.error("Expectected at least one argument.");var Y=null,le=D.expectedType;le&&le.kind!=="value"&&(Y=le);for(var Te=[],Ce=0,Ne=A.slice(1);Ce<Ne.length;Ce+=1){var Ze=Ne[Ce],st=D.parse(Ze,1+Te.length,Y,void 0,{typeAnnotation:"omit"});if(!st)return null;Y=Y||st.type,Te.push(st)}var _t=le&&Te.some(function(kt){return Jt(le,kt.type)});return new $a(_t?rn:Y,Te)},$a.prototype.evaluate=function(A){for(var D,Y=null,le=0,Te=0,Ce=this.args;Te<Ce.length&&(le++,(Y=Ce[Te].evaluate(A))&&Y instanceof sr&&!Y.available&&(D||(D=Y.name),Y=null,le===this.args.length&&(Y=D)),Y===null);Te+=1);return Y},$a.prototype.eachChild=function(A){this.args.forEach(A)},$a.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},$a.prototype.serialize=function(){var A=["coalesce"];return this.eachChild(function(D){A.push(D.serialize())}),A};var Ba=function(A,D){this.type=D.type,this.bindings=[].concat(A),this.result=D};Ba.prototype.evaluate=function(A){return this.result.evaluate(A)},Ba.prototype.eachChild=function(A){for(var D=0,Y=this.bindings;D<Y.length;D+=1)A(Y[D][1]);A(this.result)},Ba.parse=function(A,D){if(A.length<4)return D.error("Expected at least 3 arguments, but found "+(A.length-1)+" instead.");for(var Y=[],le=1;le<A.length-1;le+=2){var Te=A[le];if(typeof Te!="string")return D.error("Expected string, but found "+typeof Te+" instead.",le);if(/[^a-zA-Z0-9_]/.test(Te))return D.error("Variable names must contain only alphanumeric characters or '_'.",le);var Ce=D.parse(A[le+1],le+1);if(!Ce)return null;Y.push([Te,Ce])}var Ne=D.parse(A[A.length-1],A.length-1,D.expectedType,Y);return Ne?new Ba(Y,Ne):null},Ba.prototype.outputDefined=function(){return this.result.outputDefined()},Ba.prototype.serialize=function(){for(var A=["let"],D=0,Y=this.bindings;D<Y.length;D+=1){var le=Y[D],Te=le[0],Ce=le[1];A.push(Te,Ce.serialize())}return A.push(this.result.serialize()),A};var Mo=function(A,D,Y){this.type=A,this.index=D,this.input=Y};Mo.parse=function(A,D){if(A.length!==3)return D.error("Expected 2 arguments, but found "+(A.length-1)+" instead.");var Y=D.parse(A[1],1,bt),le=D.parse(A[2],2,on(D.expectedType||rn));if(!Y||!le)return null;var Te=le.type;return new Mo(Te.itemType,Y,le)},Mo.prototype.evaluate=function(A){var D=this.index.evaluate(A),Y=this.input.evaluate(A);if(D<0)throw new $t("Array index out of bounds: "+D+" < 0.");if(D>=Y.length)throw new $t("Array index out of bounds: "+D+" > "+(Y.length-1)+".");if(D!==Math.floor(D))throw new $t("Array index must be an integer, but found "+D+" instead.");return Y[D]},Mo.prototype.eachChild=function(A){A(this.index),A(this.input)},Mo.prototype.outputDefined=function(){return!1},Mo.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Qa=function(A,D){this.type=Ut,this.needle=A,this.haystack=D};Qa.parse=function(A,D){if(A.length!==3)return D.error("Expected 2 arguments, but found "+(A.length-1)+" instead.");var Y=D.parse(A[1],1,rn),le=D.parse(A[2],2,rn);return Y&&le?tn(Y.type,[Ut,zt,bt,yt,rn])?new Qa(Y,le):D.error("Expected first argument to be of type boolean, string, number or null, but found "+Xt(Y.type)+" instead"):null},Qa.prototype.evaluate=function(A){var D=this.needle.evaluate(A),Y=this.haystack.evaluate(A);if(!Y)return!1;if(!wn(D,["boolean","string","number","null"]))throw new $t("Expected first argument to be of type boolean, string, number or null, but found "+Xt(Xn(D))+" instead.");if(!wn(Y,["string","array"]))throw new $t("Expected second argument to be of type array or string, but found "+Xt(Xn(Y))+" instead.");return Y.indexOf(D)>=0},Qa.prototype.eachChild=function(A){A(this.needle),A(this.haystack)},Qa.prototype.outputDefined=function(){return!0},Qa.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var So=function(A,D,Y){this.type=bt,this.needle=A,this.haystack=D,this.fromIndex=Y};So.parse=function(A,D){if(A.length<=2||A.length>=5)return D.error("Expected 3 or 4 arguments, but found "+(A.length-1)+" instead.");var Y=D.parse(A[1],1,rn),le=D.parse(A[2],2,rn);if(!Y||!le)return null;if(!tn(Y.type,[Ut,zt,bt,yt,rn]))return D.error("Expected first argument to be of type boolean, string, number or null, but found "+Xt(Y.type)+" instead");if(A.length===4){var Te=D.parse(A[3],3,bt);return Te?new So(Y,le,Te):null}return new So(Y,le)},So.prototype.evaluate=function(A){var D=this.needle.evaluate(A),Y=this.haystack.evaluate(A);if(!wn(D,["boolean","string","number","null"]))throw new $t("Expected first argument to be of type boolean, string, number or null, but found "+Xt(Xn(D))+" instead.");if(!wn(Y,["string","array"]))throw new $t("Expected second argument to be of type array or string, but found "+Xt(Xn(Y))+" instead.");if(this.fromIndex){var le=this.fromIndex.evaluate(A);return Y.indexOf(D,le)}return Y.indexOf(D)},So.prototype.eachChild=function(A){A(this.needle),A(this.haystack),this.fromIndex&&A(this.fromIndex)},So.prototype.outputDefined=function(){return!1},So.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var A=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),A]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var fo=function(A,D,Y,le,Te,Ce){this.inputType=A,this.type=D,this.input=Y,this.cases=le,this.outputs=Te,this.otherwise=Ce};fo.parse=function(A,D){if(A.length<5)return D.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if(A.length%2!=1)return D.error("Expected an even number of arguments.");var Y,le;D.expectedType&&D.expectedType.kind!=="value"&&(le=D.expectedType);for(var Te={},Ce=[],Ne=2;Ne<A.length-1;Ne+=2){var Ze=A[Ne],st=A[Ne+1];Array.isArray(Ze)||(Ze=[Ze]);var _t=D.concat(Ne);if(Ze.length===0)return _t.error("Expected at least one branch label.");for(var kt=0,It=Ze;kt<It.length;kt+=1){var Vt=It[kt];if(typeof Vt!="number"&&typeof Vt!="string")return _t.error("Branch labels must be numbers or strings.");if(typeof Vt=="number"&&Math.abs(Vt)>Number.MAX_SAFE_INTEGER)return _t.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Vt=="number"&&Math.floor(Vt)!==Vt)return _t.error("Numeric branch labels must be integer values.");if(Y){if(_t.checkSubtype(Y,Xn(Vt)))return null}else Y=Xn(Vt);if(Te[String(Vt)]!==void 0)return _t.error("Branch labels must be unique.");Te[String(Vt)]=Ce.length}var Bt=D.parse(st,Ne,le);if(!Bt)return null;le=le||Bt.type,Ce.push(Bt)}var nn=D.parse(A[1],1,rn);if(!nn)return null;var un=D.parse(A[A.length-1],A.length-1,le);return un?nn.type.kind!=="value"&&D.concat(1).checkSubtype(Y,nn.type)?null:new fo(Y,le,nn,Te,Ce,un):null},fo.prototype.evaluate=function(A){var D=this.input.evaluate(A);return(Xn(D)===this.inputType&&this.outputs[this.cases[D]]||this.otherwise).evaluate(A)},fo.prototype.eachChild=function(A){A(this.input),this.outputs.forEach(A),A(this.otherwise)},fo.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})&&this.otherwise.outputDefined()},fo.prototype.serialize=function(){for(var A=this,D=["match",this.input.serialize()],Y=[],le={},Te=0,Ce=Object.keys(this.cases).sort();Te<Ce.length;Te+=1){var Ne=Ce[Te];(It=le[this.cases[Ne]])===void 0?(le[this.cases[Ne]]=Y.length,Y.push([this.cases[Ne],[Ne]])):Y[It][1].push(Ne)}for(var Ze=function(Bt){return A.inputType.kind==="number"?Number(Bt):Bt},st=0,_t=Y;st<_t.length;st+=1){var kt=_t[st],It=kt[0],Vt=kt[1];Vt.length===1?D.push(Ze(Vt[0])):D.push(Vt.map(Ze)),D.push(this.outputs[outputIndex$1].serialize())}return D.push(this.otherwise.serialize()),D};var Eo=function(A,D,Y){this.type=A,this.branches=D,this.otherwise=Y};Eo.parse=function(A,D){if(A.length<4)return D.error("Expected at least 3 arguments, but found only "+(A.length-1)+".");if(A.length%2!=0)return D.error("Expected an odd number of arguments.");var Y;D.expectedType&&D.expectedType.kind!=="value"&&(Y=D.expectedType);for(var le=[],Te=1;Te<A.length-1;Te+=2){var Ce=D.parse(A[Te],Te,Ut);if(!Ce)return null;var Ne=D.parse(A[Te+1],Te+1,Y);if(!Ne)return null;le.push([Ce,Ne]),Y=Y||Ne.type}var Ze=D.parse(A[A.length-1],A.length-1,Y);return Ze?new Eo(Y,le,Ze):null},Eo.prototype.evaluate=function(A){for(var D=0,Y=this.branches;D<Y.length;D+=1){var le=Y[D],Te=le[0],Ce=le[1];if(Te.evaluate(A))return Ce.evaluate(A)}return this.otherwise.evaluate(A)},Eo.prototype.eachChild=function(A){for(var D=0,Y=this.branches;D<Y.length;D+=1){var le=Y[D],Te=le[0],Ce=le[1];A(Te),A(Ce)}A(this.otherwise)},Eo.prototype.outputDefined=function(){return this.branches.every(function(A){return A[0],A[1].outputDefined()})&&this.otherwise.outputDefined()},Eo.prototype.serialize=function(){var A=["case"];return this.eachChild(function(D){A.push(D.serialize())}),A};var eo=function(A,D,Y,le){this.type=A,this.input=D,this.beginIndex=Y,this.endIndex=le};function Ks(A,D){return A==="=="||A==="!="?D.kind==="boolean"||D.kind==="string"||D.kind==="number"||D.kind==="null"||D.kind==="value":D.kind==="string"||D.kind==="number"||D.kind==="value"}function Bs(A,D,Y,le){return le.compare(D,Y)===0}function Ho(A,D,Y){var le=A!=="=="&&A!=="!=";return function(){function Te(Ce,Ne,Ze){this.type=Ut,this.lhs=Ce,this.rhs=Ne,this.collator=Ze,this.hasUntypedArgument=Ce.type.kind==="value"||Ne.type.kind==="value"}return Te.parse=function(Ce,Ne){if(Ce.length!==3&&Ce.length!==4)return Ne.error("Expected two or three arguments.");var Ze=Ce[0],st=Ne.parse(Ce[1],1,rn);if(!st)return null;if(!Ks(Ze,st.type))return Ne.concat(1).error('"'+Ze+`" comparisons are not supported for type '`+Xt(st.type)+"'.");var _t=Ne.parse(Ce[2],2,rn);if(!_t)return null;if(!Ks(Ze,_t.type))return Ne.concat(2).error('"'+Ze+`" comparisons are not supported for type '`+Xt(_t.type)+"'.");if(st.type.kind!==_t.type.kind&&st.type.kind!=="value"&&_t.type.kind!=="value")return Ne.error("Cannot compare types '"+Xt(st.type)+"' and '"+Xt(_t.type)+"'.");le&&(st.type.kind==="value"&&_t.type.kind!=="value"?st=new dn(_t.type,[st]):st.type.kind!=="value"&&_t.type.kind==="value"&&(_t=new dn(st.type,[_t])));var kt=null;if(Ce.length===4){if(st.type.kind!=="string"&&_t.type.kind!=="string"&&st.type.kind!=="value"&&_t.type.kind!=="value")return Ne.error("Cannot use collator to compare non-string types.");if(!(kt=Ne.parse(Ce[3],3,qt)))return null}return new Te(st,_t,kt)},Te.prototype.evaluate=function(Ce){var Ne=this.lhs.evaluate(Ce),Ze=this.rhs.evaluate(Ce);if(le&&this.hasUntypedArgument){var st=Xn(Ne),_t=Xn(Ze);if(st.kind!==_t.kind||st.kind!=="string"&&st.kind!=="number")throw new $t('Expected arguments for "'+A+'" to be (string, string) or (number, number), but found ('+st.kind+", "+_t.kind+") instead.")}if(this.collator&&!le&&this.hasUntypedArgument){var kt=Xn(Ne),It=Xn(Ze);if(kt.kind!=="string"||It.kind!=="string")return D(Ce,Ne,Ze)}return this.collator?Y(Ce,Ne,Ze,this.collator.evaluate(Ce)):D(Ce,Ne,Ze)},Te.prototype.eachChild=function(Ce){Ce(this.lhs),Ce(this.rhs),this.collator&&Ce(this.collator)},Te.prototype.outputDefined=function(){return!0},Te.prototype.serialize=function(){var Ce=[A];return this.eachChild(function(Ne){Ce.push(Ne.serialize())}),Ce},Te}()}eo.parse=function(A,D){if(A.length<=2||A.length>=5)return D.error("Expected 3 or 4 arguments, but found "+(A.length-1)+" instead.");var Y=D.parse(A[1],1,rn),le=D.parse(A[2],2,bt);if(!Y||!le)return null;if(!tn(Y.type,[on(rn),zt,rn]))return D.error("Expected first argument to be of type array or string, but found "+Xt(Y.type)+" instead");if(A.length===4){var Te=D.parse(A[3],3,bt);return Te?new eo(Y.type,Y,le,Te):null}return new eo(Y.type,Y,le)},eo.prototype.evaluate=function(A){var D=this.input.evaluate(A),Y=this.beginIndex.evaluate(A);if(!wn(D,["string","array"]))throw new $t("Expected first argument to be of type array or string, but found "+Xt(Xn(D))+" instead.");if(this.endIndex){var le=this.endIndex.evaluate(A);return D.slice(Y,le)}return D.slice(Y)},eo.prototype.eachChild=function(A){A(this.input),A(this.beginIndex),this.endIndex&&A(this.endIndex)},eo.prototype.outputDefined=function(){return!1},eo.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var A=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),A]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var al=Ho("==",function(A,D,Y){return D===Y},Bs),ol=Ho("!=",function(A,D,Y){return D!==Y},function(A,D,Y,le){return!Bs(0,D,Y,le)}),Go=Ho("<",function(A,D,Y){return D<Y},function(A,D,Y,le){return le.compare(D,Y)<0}),sl=Ho(">",function(A,D,Y){return D>Y},function(A,D,Y,le){return le.compare(D,Y)>0}),bl=Ho("<=",function(A,D,Y){return D<=Y},function(A,D,Y,le){return le.compare(D,Y)<=0}),_l=Ho(">=",function(A,D,Y){return D>=Y},function(A,D,Y,le){return le.compare(D,Y)>=0}),Wo=function(A,D,Y,le,Te){this.type=zt,this.number=A,this.locale=D,this.currency=Y,this.minFractionDigits=le,this.maxFractionDigits=Te};Wo.parse=function(A,D){if(A.length!==3)return D.error("Expected two arguments.");var Y=D.parse(A[1],1,bt);if(!Y)return null;var le=A[2];if(typeof le!="object"||Array.isArray(le))return D.error("NumberFormat options argument must be an object.");var Te=null;if(le.locale&&!(Te=D.parse(le.locale,1,zt)))return null;var Ce=null;if(le.currency&&!(Ce=D.parse(le.currency,1,zt)))return null;var Ne=null;if(le["min-fraction-digits"]&&!(Ne=D.parse(le["min-fraction-digits"],1,bt)))return null;var Ze=null;return le["max-fraction-digits"]&&!(Ze=D.parse(le["max-fraction-digits"],1,bt))?null:new Wo(Y,Te,Ce,Ne,Ze)},Wo.prototype.evaluate=function(A){return new Intl.NumberFormat(this.locale?this.locale.evaluate(A):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(A):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(A):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(A):void 0}).format(this.number.evaluate(A))},Wo.prototype.eachChild=function(A){A(this.number),this.locale&&A(this.locale),this.currency&&A(this.currency),this.minFractionDigits&&A(this.minFractionDigits),this.maxFractionDigits&&A(this.maxFractionDigits)},Wo.prototype.outputDefined=function(){return!1},Wo.prototype.serialize=function(){var A={};return this.locale&&(A.locale=this.locale.serialize()),this.currency&&(A.currency=this.currency.serialize()),this.minFractionDigits&&(A["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(A["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),A]};var to=function(A){this.type=bt,this.input=A};to.parse=function(A,D){if(A.length!==2)return D.error("Expected 1 argument, but found "+(A.length-1)+" instead.");var Y=D.parse(A[1],1);return Y?Y.type.kind!=="array"&&Y.type.kind!=="string"&&Y.type.kind!=="value"?D.error("Expected argument of type string or array, but found "+Xt(Y.type)+" instead."):new to(Y):null},to.prototype.evaluate=function(A){var D=this.input.evaluate(A);if(typeof D=="string"||Array.isArray(D))return D.length;throw new $t("Expected value to be of type string or array, but found "+Xt(Xn(D))+" instead.")},to.prototype.eachChild=function(A){A(this.input)},to.prototype.outputDefined=function(){return!1},to.prototype.serialize=function(){var A=["length"];return this.eachChild(function(D){A.push(D.serialize())}),A};var is={"==":al,"!=":ol,">":sl,"<":Go,">=":_l,"<=":bl,array:dn,at:Mo,boolean:dn,case:Eo,coalesce:$a,collator:Ct,format:En,image:Nn,in:Qa,"index-of":So,interpolate:Fi,"interpolate-hcl":Fi,"interpolate-lab":Fi,length:to,let:Ba,literal:Yt,match:fo,number:dn,"number-format":Wo,object:dn,slice:eo,step:Tr,string:dn,"to-boolean":$n,"to-color":$n,"to-number":$n,"to-string":$n,var:mr,within:Kn};function Yo(A,D){var Y=D[0],le=D[1],Te=D[2],Ce=D[3];Y=Y.evaluate(A),le=le.evaluate(A),Te=Te.evaluate(A);var Ne=Ce?Ce.evaluate(A):1,Ze=Fn(Y,le,Te,Ne);if(Ze)throw new $t(Ze);return new yn(Y/255*Ne,le/255*Ne,Te/255*Ne,Ne)}function bs(A,D){return A in D}function Xo(A,D){var Y=D[A];return Y===void 0?null:Y}function Na(A){return{type:A}}function Js(A){return{result:"success",value:A}}function Lo(A){return{result:"error",value:A}}function ho(A){return A["property-type"]==="data-driven"||A["property-type"]==="cross-faded-data-driven"}function po(A){return!!A.expression&&A.expression.parameters.indexOf("zoom")>-1}function Co(A){return!!A.expression&&A.expression.interpolated}function Ur(A){return A instanceof Number?"number":A instanceof String?"string":A instanceof Boolean?"boolean":Array.isArray(A)?"array":A===null?"null":typeof A}function as(A){return typeof A=="object"&&A!==null&&!Array.isArray(A)}function wl(A){return A}function Ns(A,D){var Y,le,Te,Ce=D.type==="color",Ne=A.stops&&typeof A.stops[0][0]=="object",Ze=Ne||A.property!==void 0,st=Ne||!Ze,_t=A.type||(Co(D)?"exponential":"interval");if(Ce&&((A=ut({},A)).stops&&(A.stops=A.stops.map(function(hr){return[hr[0],yn.parse(hr[1])]})),A.default?A.default=yn.parse(A.default):A.default=yn.parse(D.default)),A.colorSpace&&A.colorSpace!=="rgb"&&!ti[A.colorSpace])throw new Error("Unknown color space: "+A.colorSpace);if(_t==="exponential")Y=js;else if(_t==="interval")Y=Tl;else if(_t==="categorical"){Y=ll,le=Object.create(null);for(var kt=0,It=A.stops;kt<It.length;kt+=1){var Vt=It[kt];le[Vt[0]]=Vt[1]}Te=typeof A.stops[0][0]}else{if(_t!=="identity")throw new Error('Unknown function type "'+_t+'"');Y=kl}if(Ne){for(var Bt={},nn=[],un=0;un<A.stops.length;un++){var kn=A.stops[un],bn=kn[0].zoom;Bt[bn]===void 0&&(Bt[bn]={zoom:bn,type:A.type,property:A.property,default:A.default,stops:[]},nn.push(bn)),Bt[bn].stops.push([kn[0].value,kn[1]])}for(var In=[],Rn=0,Vn=nn;Rn<Vn.length;Rn+=1){var Jn=Vn[Rn];In.push([Bt[Jn].zoom,Ns(Bt[Jn],D)])}var nr={name:"linear"};return{kind:"composite",interpolationType:nr,interpolationFactor:Fi.interpolationFactor.bind(void 0,nr),zoomStops:In.map(function(hr){return hr[0]}),evaluate:function(hr,yr){var br=hr.zoom;return js({stops:In,base:A.base},D,br).evaluate(br,yr)}}}if(st){var dr=_t==="exponential"?{name:"exponential",base:A.base!==void 0?A.base:1}:null;return{kind:"camera",interpolationType:dr,interpolationFactor:Fi.interpolationFactor.bind(void 0,dr),zoomStops:A.stops.map(function(hr){return hr[0]}),evaluate:function(hr){var yr=hr.zoom;return Y(A,D,yr,le,Te)}}}return{kind:"source",evaluate:function(hr,yr){var br=yr&&yr.properties?yr.properties[A.property]:void 0;return br===void 0?os(A.default,D.default):Y(A,D,br,le,Te)}}}function os(A,D,Y){return A!==void 0?A:D!==void 0?D:Y!==void 0?Y:void 0}function ll(A,D,Y,le,Te){return os(typeof Y===Te?le[Y]:void 0,A.default,D.default)}function Tl(A,D,Y){if(Ur(Y)!=="number")return os(A.default,D.default);var le=A.stops.length;if(le===1||Y<=A.stops[0][0])return A.stops[0][1];if(Y>=A.stops[le-1][0])return A.stops[le-1][1];var Te=pr(A.stops.map(function(Ce){return Ce[0]}),Y);return A.stops[Te][1]}function js(A,D,Y){var le=A.base!==void 0?A.base:1;if(Ur(Y)!=="number")return os(A.default,D.default);var Te=A.stops.length;if(Te===1||Y<=A.stops[0][0])return A.stops[0][1];if(Y>=A.stops[Te-1][0])return A.stops[Te-1][1];var Ce=pr(A.stops.map(function(It){return It[0]}),Y),Ne=function(It,Vt,Bt,nn){var un=nn-Bt,kn=It-Bt;return un===0?0:Vt===1?kn/un:(Math.pow(Vt,kn)-1)/(Math.pow(Vt,un)-1)}(Y,le,A.stops[Ce][0],A.stops[Ce+1][0]),Ze=A.stops[Ce][1],st=A.stops[Ce+1][1],_t=oi[D.type]||wl;if(A.colorSpace&&A.colorSpace!=="rgb"){var kt=ti[A.colorSpace];_t=function(It,Vt){return kt.reverse(kt.interpolate(kt.forward(It),kt.forward(Vt),Ne))}}return typeof Ze.evaluate=="function"?{evaluate:function(){for(var It=[],Vt=arguments.length;Vt--;)It[Vt]=arguments[Vt];var Bt=Ze.evaluate.apply(void 0,It),nn=st.evaluate.apply(void 0,It);if(Bt!==void 0&&nn!==void 0)return _t(Bt,nn,Ne)}}:_t(Ze,st,Ne)}function kl(A,D,Y){return D.type==="color"?Y=yn.parse(Y):D.type==="formatted"?Y=Wn.fromString(Y.toString()):D.type==="resolvedImage"?Y=sr.fromString(Y.toString()):Ur(Y)===D.type||D.type==="enum"&&D.values[Y]||(Y=void 0),os(Y,A.default,D.default)}gn.register(is,{error:[{kind:"error"},[zt],function(A,D){var Y=D[0];throw new $t(Y.evaluate(A))}],typeof:[zt,[rn],function(A,D){return Xt(Xn(D[0].evaluate(A)))}],"to-rgba":[on(bt,4),[en],function(A,D){return D[0].evaluate(A).toArray()}],rgb:[en,[bt,bt,bt],Yo],rgba:[en,[bt,bt,bt,bt],Yo],has:{type:Ut,overloads:[[[zt],function(A,D){return bs(D[0].evaluate(A),A.properties())}],[[zt,an],function(A,D){var Y=D[0],le=D[1];return bs(Y.evaluate(A),le.evaluate(A))}]]},get:{type:rn,overloads:[[[zt],function(A,D){return Xo(D[0].evaluate(A),A.properties())}],[[zt,an],function(A,D){var Y=D[0],le=D[1];return Xo(Y.evaluate(A),le.evaluate(A))}]]},"feature-state":[rn,[zt],function(A,D){return Xo(D[0].evaluate(A),A.featureState||{})}],properties:[an,[],function(A){return A.properties()}],"geometry-type":[zt,[],function(A){return A.geometryType()}],id:[rn,[],function(A){return A.id()}],zoom:[bt,[],function(A){return A.globals.zoom}],"heatmap-density":[bt,[],function(A){return A.globals.heatmapDensity||0}],"line-progress":[bt,[],function(A){return A.globals.lineProgress||0}],accumulated:[rn,[],function(A){return A.globals.accumulated===void 0?null:A.globals.accumulated}],"+":[bt,Na(bt),function(A,D){for(var Y=0,le=0,Te=D;le<Te.length;le+=1)Y+=Te[le].evaluate(A);return Y}],"*":[bt,Na(bt),function(A,D){for(var Y=1,le=0,Te=D;le<Te.length;le+=1)Y*=Te[le].evaluate(A);return Y}],"-":{type:bt,overloads:[[[bt,bt],function(A,D){var Y=D[0],le=D[1];return Y.evaluate(A)-le.evaluate(A)}],[[bt],function(A,D){return-D[0].evaluate(A)}]]},"/":[bt,[bt,bt],function(A,D){var Y=D[0],le=D[1];return Y.evaluate(A)/le.evaluate(A)}],"%":[bt,[bt,bt],function(A,D){var Y=D[0],le=D[1];return Y.evaluate(A)%le.evaluate(A)}],ln2:[bt,[],function(){return Math.LN2}],pi:[bt,[],function(){return Math.PI}],e:[bt,[],function(){return Math.E}],"^":[bt,[bt,bt],function(A,D){var Y=D[0],le=D[1];return Math.pow(Y.evaluate(A),le.evaluate(A))}],sqrt:[bt,[bt],function(A,D){var Y=D[0];return Math.sqrt(Y.evaluate(A))}],log10:[bt,[bt],function(A,D){var Y=D[0];return Math.log(Y.evaluate(A))/Math.LN10}],ln:[bt,[bt],function(A,D){var Y=D[0];return Math.log(Y.evaluate(A))}],log2:[bt,[bt],function(A,D){var Y=D[0];return Math.log(Y.evaluate(A))/Math.LN2}],sin:[bt,[bt],function(A,D){var Y=D[0];return Math.sin(Y.evaluate(A))}],cos:[bt,[bt],function(A,D){var Y=D[0];return Math.cos(Y.evaluate(A))}],tan:[bt,[bt],function(A,D){var Y=D[0];return Math.tan(Y.evaluate(A))}],asin:[bt,[bt],function(A,D){var Y=D[0];return Math.asin(Y.evaluate(A))}],acos:[bt,[bt],function(A,D){var Y=D[0];return Math.acos(Y.evaluate(A))}],atan:[bt,[bt],function(A,D){var Y=D[0];return Math.atan(Y.evaluate(A))}],min:[bt,Na(bt),function(A,D){return Math.min.apply(Math,D.map(function(Y){return Y.evaluate(A)}))}],max:[bt,Na(bt),function(A,D){return Math.max.apply(Math,D.map(function(Y){return Y.evaluate(A)}))}],abs:[bt,[bt],function(A,D){var Y=D[0];return Math.abs(Y.evaluate(A))}],round:[bt,[bt],function(A,D){var Y=D[0].evaluate(A);return Y<0?-Math.round(-Y):Math.round(Y)}],floor:[bt,[bt],function(A,D){var Y=D[0];return Math.floor(Y.evaluate(A))}],ceil:[bt,[bt],function(A,D){var Y=D[0];return Math.ceil(Y.evaluate(A))}],"filter-==":[Ut,[zt,rn],function(A,D){var Y=D[0],le=D[1];return A.properties()[Y.value]===le.value}],"filter-id-==":[Ut,[rn],function(A,D){var Y=D[0];return A.id()===Y.value}],"filter-type-==":[Ut,[zt],function(A,D){var Y=D[0];return A.geometryType()===Y.value}],"filter-<":[Ut,[zt,rn],function(A,D){var Y=D[0],le=D[1],Te=A.properties()[Y.value],Ce=le.value;return typeof Te==typeof Ce&&Te<Ce}],"filter-id-<":[Ut,[rn],function(A,D){var Y=D[0],le=A.id(),Te=Y.value;return typeof le==typeof Te&&le<Te}],"filter->":[Ut,[zt,rn],function(A,D){var Y=D[0],le=D[1],Te=A.properties()[Y.value],Ce=le.value;return typeof Te==typeof Ce&&Te>Ce}],"filter-id->":[Ut,[rn],function(A,D){var Y=D[0],le=A.id(),Te=Y.value;return typeof le==typeof Te&&le>Te}],"filter-<=":[Ut,[zt,rn],function(A,D){var Y=D[0],le=D[1],Te=A.properties()[Y.value],Ce=le.value;return typeof Te==typeof Ce&&Te<=Ce}],"filter-id-<=":[Ut,[rn],function(A,D){var Y=D[0],le=A.id(),Te=Y.value;return typeof le==typeof Te&&le<=Te}],"filter->=":[Ut,[zt,rn],function(A,D){var Y=D[0],le=D[1],Te=A.properties()[Y.value],Ce=le.value;return typeof Te==typeof Ce&&Te>=Ce}],"filter-id->=":[Ut,[rn],function(A,D){var Y=D[0],le=A.id(),Te=Y.value;return typeof le==typeof Te&&le>=Te}],"filter-has":[Ut,[rn],function(A,D){return D[0].value in A.properties()}],"filter-has-id":[Ut,[],function(A){return A.id()!==null&&A.id()!==void 0}],"filter-type-in":[Ut,[on(zt)],function(A,D){return D[0].value.indexOf(A.geometryType())>=0}],"filter-id-in":[Ut,[on(rn)],function(A,D){return D[0].value.indexOf(A.id())>=0}],"filter-in-small":[Ut,[zt,on(rn)],function(A,D){var Y=D[0];return D[1].value.indexOf(A.properties()[Y.value])>=0}],"filter-in-large":[Ut,[zt,on(rn)],function(A,D){var Y=D[0],le=D[1];return function(Te,Ce,Ne,Ze){for(;Ne<=Ze;){var st=Ne+Ze>>1;if(Ce[st]===Te)return!0;Ce[st]>Te?Ze=st-1:Ne=st+1}return!1}(A.properties()[Y.value],le.value,0,le.value.length-1)}],all:{type:Ut,overloads:[[[Ut,Ut],function(A,D){var Y=D[0],le=D[1];return Y.evaluate(A)&&le.evaluate(A)}],[Na(Ut),function(A,D){for(var Y=0,le=D;Y<le.length;Y+=1)if(!le[Y].evaluate(A))return!1;return!0}]]},any:{type:Ut,overloads:[[[Ut,Ut],function(A,D){var Y=D[0],le=D[1];return Y.evaluate(A)||le.evaluate(A)}],[Na(Ut),function(A,D){for(var Y=0,le=D;Y<le.length;Y+=1)if(le[Y].evaluate(A))return!0;return!1}]]},"!":[Ut,[Ut],function(A,D){return!D[0].evaluate(A)}],"is-supported-script":[Ut,[zt],function(A,D){var Y=D[0],le=A.globals&&A.globals.isSupportedScript;return!le||le(Y.evaluate(A))}],upcase:[zt,[zt],function(A,D){return D[0].evaluate(A).toUpperCase()}],downcase:[zt,[zt],function(A,D){return D[0].evaluate(A).toLowerCase()}],concat:[zt,Na(rn),function(A,D){return D.map(function(Y){return rr(Y.evaluate(A))}).join("")}],"resolved-locale":[zt,[qt],function(A,D){return D[0].evaluate(A).resolvedLocale()}]});var Oo=function(A,D){this.expression=A,this._warningHistory={},this._evaluator=new Gt,this._defaultValue=D?function(Y){return Y.type==="color"&&as(Y.default)?new yn(0,0,0,0):Y.type==="color"?yn.parse(Y.default)||null:Y.default===void 0?null:Y.default}(D):null,this._enumValues=D&&D.type==="enum"?D.values:null};function Zo(A){return Array.isArray(A)&&A.length>0&&typeof A[0]=="string"&&A[0]in is}function go(A,D){var Y=new ur(is,[],D?function(Te){var Ce={color:en,string:zt,number:bt,enum:zt,boolean:Ut,formatted:Kt,resolvedImage:xn};return Te.type==="array"?on(Ce[Te.value]||rn,Te.length):Ce[Te.type]}(D):void 0),le=Y.parse(A,void 0,void 0,void 0,D&&D.type==="string"?{typeAnnotation:"coerce"}:void 0);return le?Js(new Oo(le,D)):Lo(Y.errors)}Oo.prototype.evaluateWithoutErrorHandling=function(A,D,Y,le,Te,Ce){return this._evaluator.globals=A,this._evaluator.feature=D,this._evaluator.featureState=Y,this._evaluator.canonical=le,this._evaluator.availableImages=Te||null,this._evaluator.formattedSection=Ce,this.expression.evaluate(this._evaluator)},Oo.prototype.evaluate=function(A,D,Y,le,Te,Ce){this._evaluator.globals=A,this._evaluator.feature=D||null,this._evaluator.featureState=Y||null,this._evaluator.canonical=le,this._evaluator.availableImages=Te||null,this._evaluator.formattedSection=Ce||null;try{var Ne=this.expression.evaluate(this._evaluator);if(Ne==null||typeof Ne=="number"&&Ne!=Ne)return this._defaultValue;if(this._enumValues&&!(Ne in this._enumValues))throw new $t("Expected value to be one of "+Object.keys(this._enumValues).map(function(Ze){return JSON.stringify(Ze)}).join(", ")+", but found "+JSON.stringify(Ne)+" instead.");return Ne}catch(Ze){return this._warningHistory[Ze.message]||(this._warningHistory[Ze.message]=!0,typeof console<"u"&&console.warn(Ze.message)),this._defaultValue}};var ja=function(A,D){this.kind=A,this._styleExpression=D,this.isStateDependent=A!=="constant"&&!Gn(D.expression)};ja.prototype.evaluateWithoutErrorHandling=function(A,D,Y,le,Te,Ce){return this._styleExpression.evaluateWithoutErrorHandling(A,D,Y,le,Te,Ce)},ja.prototype.evaluate=function(A,D,Y,le,Te,Ce){return this._styleExpression.evaluate(A,D,Y,le,Te,Ce)};var ss=function(A,D,Y,le){this.kind=A,this.zoomStops=Y,this._styleExpression=D,this.isStateDependent=A!=="camera"&&!Gn(D.expression),this.interpolationType=le};function ul(A,D){if((A=go(A,D)).result==="error")return A;var Y=A.value.expression,le=Un(Y);if(!le&&!ho(D))return Lo([new mt("","data expressions not supported")]);var Te=ir(Y,["zoom"]);if(!Te&&!po(D))return Lo([new mt("","zoom expressions not supported")]);var Ce=Us(Y);if(!Ce&&!Te)return Lo([new mt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(Ce instanceof mt)return Lo([Ce]);if(Ce instanceof Fi&&!Co(D))return Lo([new mt("",'"interpolate" expressions cannot be used with this property')]);if(!Ce)return Js(new ja(le?"constant":"source",A.value));var Ne=Ce instanceof Fi?Ce.interpolation:void 0;return Js(new ss(le?"camera":"composite",A.value,Ce.labels,Ne))}ss.prototype.evaluateWithoutErrorHandling=function(A,D,Y,le,Te,Ce){return this._styleExpression.evaluateWithoutErrorHandling(A,D,Y,le,Te,Ce)},ss.prototype.evaluate=function(A,D,Y,le,Te,Ce){return this._styleExpression.evaluate(A,D,Y,le,Te,Ce)},ss.prototype.interpolationFactor=function(A,D,Y){return this.interpolationType?Fi.interpolationFactor(this.interpolationType,A,D,Y):0};var _s=function(A,D){this._parameters=A,this._specification=D,ut(this,Ns(this._parameters,this._specification))};function Us(A){var D=null;if(A instanceof Ba)D=Us(A.result);else if(A instanceof $a)for(var Y=0,le=A.args;Y<le.length;Y+=1){var Te=le[Y];if(D=Us(Te))break}else(A instanceof Tr||A instanceof Fi)&&A.input instanceof gn&&A.input.name==="zoom"&&(D=A);return D instanceof mt||A.eachChild(function(Ce){var Ne=Us(Ce);Ne instanceof mt?D=Ne:!D&&Ne?D=new mt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):D&&Ne&&D!==Ne&&(D=new mt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),D}function ba(A){var D=A.key,Y=A.value,le=A.valueSpec||{},Te=A.objectElementValidators||{},Ce=A.style,Ne=A.styleSpec,Ze=[],st=Ur(Y);if(st!=="object")return[new rt(D,Y,"object expected, "+st+" found")];for(var _t in Y){var kt=_t.split(".")[0],It=le[kt]||le["*"],Vt=void 0;if(Te[kt])Vt=Te[kt];else if(le[kt])Vt=La;else if(Te["*"])Vt=Te["*"];else{if(!le["*"]){Ze.push(new rt(D,Y[_t],'unknown property "'+_t+'"'));continue}Vt=La}Ze=Ze.concat(Vt({key:(D&&D+".")+_t,value:Y[_t],valueSpec:It,style:Ce,styleSpec:Ne,object:Y,objectKey:_t},Y))}for(var Bt in le)Te[Bt]||le[Bt].required&&le[Bt].default===void 0&&Y[Bt]===void 0&&Ze.push(new rt(D,Y,'missing required property "'+Bt+'"'));return Ze}function Vs(A){var D=A.value,Y=A.valueSpec,le=A.style,Te=A.styleSpec,Ce=A.key,Ne=A.arrayElementValidator||La;if(Ur(D)!=="array")return[new rt(Ce,D,"array expected, "+Ur(D)+" found")];if(Y.length&&D.length!==Y.length)return[new rt(Ce,D,"array length "+Y.length+" expected, length "+D.length+" found")];if(Y["min-length"]&&D.length<Y["min-length"])return[new rt(Ce,D,"array length at least "+Y["min-length"]+" expected, length "+D.length+" found")];var Ze={type:Y.value,values:Y.values};Te.$version<7&&(Ze.function=Y.function),Ur(Y.value)==="object"&&(Ze=Y.value);for(var st=[],_t=0;_t<D.length;_t++)st=st.concat(Ne({array:D,arrayIndex:_t,value:D[_t],valueSpec:Ze,style:le,styleSpec:Te,key:Ce+"["+_t+"]"}));return st}function cl(A){var D=A.key,Y=A.value,le=A.valueSpec,Te=Ur(Y);return Te==="number"&&Y!=Y&&(Te="NaN"),Te!=="number"?[new rt(D,Y,"number expected, "+Te+" found")]:"minimum"in le&&Y<le.minimum?[new rt(D,Y,Y+" is less than the minimum value "+le.minimum)]:"maximum"in le&&Y>le.maximum?[new rt(D,Y,Y+" is greater than the maximum value "+le.maximum)]:[]}function ls(A){var D,Y,le,Te=A.valueSpec,Ce=et(A.value.type),Ne={},Ze=Ce!=="categorical"&&A.value.property===void 0,st=!Ze,_t=Ur(A.value.stops)==="array"&&Ur(A.value.stops[0])==="array"&&Ur(A.value.stops[0][0])==="object",kt=ba({key:A.key,value:A.value,valueSpec:A.styleSpec.function,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{stops:function(Bt){if(Ce==="identity")return[new rt(Bt.key,Bt.value,'identity function may not have a "stops" property')];var nn=[],un=Bt.value;return nn=nn.concat(Vs({key:Bt.key,value:un,valueSpec:Bt.valueSpec,style:Bt.style,styleSpec:Bt.styleSpec,arrayElementValidator:It})),Ur(un)==="array"&&un.length===0&&nn.push(new rt(Bt.key,un,"array must have at least one stop")),nn},default:function(Bt){return La({key:Bt.key,value:Bt.value,valueSpec:Te,style:Bt.style,styleSpec:Bt.styleSpec})}}});return Ce==="identity"&&Ze&&kt.push(new rt(A.key,A.value,'missing required property "property"')),Ce==="identity"||A.value.stops||kt.push(new rt(A.key,A.value,'missing required property "stops"')),Ce==="exponential"&&A.valueSpec.expression&&!Co(A.valueSpec)&&kt.push(new rt(A.key,A.value,"exponential functions not supported")),A.styleSpec.$version>=8&&(st&&!ho(A.valueSpec)?kt.push(new rt(A.key,A.value,"property functions not supported")):Ze&&!po(A.valueSpec)&&kt.push(new rt(A.key,A.value,"zoom functions not supported"))),Ce!=="categorical"&&!_t||A.value.property!==void 0||kt.push(new rt(A.key,A.value,'"property" property is required')),kt;function It(Bt){var nn=[],un=Bt.value,kn=Bt.key;if(Ur(un)!=="array")return[new rt(kn,un,"array expected, "+Ur(un)+" found")];if(un.length!==2)return[new rt(kn,un,"array length 2 expected, length "+un.length+" found")];if(_t){if(Ur(un[0])!=="object")return[new rt(kn,un,"object expected, "+Ur(un[0])+" found")];if(un[0].zoom===void 0)return[new rt(kn,un,"object stop key must have zoom")];if(un[0].value===void 0)return[new rt(kn,un,"object stop key must have value")];if(le&&le>et(un[0].zoom))return[new rt(kn,un[0].zoom,"stop zoom values must appear in ascending order")];et(un[0].zoom)!==le&&(le=et(un[0].zoom),Y=void 0,Ne={}),nn=nn.concat(ba({key:kn+"[0]",value:un[0],valueSpec:{zoom:{}},style:Bt.style,styleSpec:Bt.styleSpec,objectElementValidators:{zoom:cl,value:Vt}}))}else nn=nn.concat(Vt({key:kn+"[0]",value:un[0],valueSpec:{},style:Bt.style,styleSpec:Bt.styleSpec},un));return Zo(xt(un[1]))?nn.concat([new rt(kn+"[1]",un[1],"expressions are not allowed in function stops.")]):nn.concat(La({key:kn+"[1]",value:un[1],valueSpec:Te,style:Bt.style,styleSpec:Bt.styleSpec}))}function Vt(Bt,nn){var un=Ur(Bt.value),kn=et(Bt.value),bn=Bt.value!==null?Bt.value:nn;if(D){if(un!==D)return[new rt(Bt.key,bn,un+" stop domain type must match previous stop domain type "+D)]}else D=un;if(un!=="number"&&un!=="string"&&un!=="boolean")return[new rt(Bt.key,bn,"stop domain value must be a number, string, or boolean")];if(un!=="number"&&Ce!=="categorical"){var In="number expected, "+un+" found";return ho(Te)&&Ce===void 0&&(In+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new rt(Bt.key,bn,In)]}return Ce!=="categorical"||un!=="number"||isFinite(kn)&&Math.floor(kn)===kn?Ce!=="categorical"&&un==="number"&&Y!==void 0&&kn<Y?[new rt(Bt.key,bn,"stop domain values must appear in ascending order")]:(Y=kn,Ce==="categorical"&&kn in Ne?[new rt(Bt.key,bn,"stop domain values must be unique")]:(Ne[kn]=!0,[])):[new rt(Bt.key,bn,"integer expected, found "+kn)]}}function Ko(A){var D=(A.expressionContext==="property"?ul:go)(xt(A.value),A.valueSpec);if(D.result==="error")return D.value.map(function(le){return new rt(""+A.key+le.key,A.value,le.message)});var Y=D.value.expression||D.value._styleExpression.expression;if(A.expressionContext==="property"&&A.propertyKey==="text-font"&&!Y.outputDefined())return[new rt(A.key,A.value,'Invalid data expression for "'+A.propertyKey+'". Output values must be contained as literals within the expression.')];if(A.expressionContext==="property"&&A.propertyType==="layout"&&!Gn(Y))return[new rt(A.key,A.value,'"feature-state" data expressions are not supported with layout properties.')];if(A.expressionContext==="filter"&&!Gn(Y))return[new rt(A.key,A.value,'"feature-state" data expressions are not supported with filters.')];if(A.expressionContext&&A.expressionContext.indexOf("cluster")===0){if(!ir(Y,["zoom","feature-state"]))return[new rt(A.key,A.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(A.expressionContext==="cluster-initial"&&!Un(Y))return[new rt(A.key,A.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function us(A){var D=A.key,Y=A.value,le=A.valueSpec,Te=[];return Array.isArray(le.values)?le.values.indexOf(et(Y))===-1&&Te.push(new rt(D,Y,"expected one of ["+le.values.join(", ")+"], "+JSON.stringify(Y)+" found")):Object.keys(le.values).indexOf(et(Y))===-1&&Te.push(new rt(D,Y,"expected one of ["+Object.keys(le.values).join(", ")+"], "+JSON.stringify(Y)+" found")),Te}function Jo(A){if(A===!0||A===!1)return!0;if(!Array.isArray(A)||A.length===0)return!1;switch(A[0]){case"has":return A.length>=2&&A[1]!=="$id"&&A[1]!=="$type";case"in":return A.length>=3&&(typeof A[1]!="string"||Array.isArray(A[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return A.length!==3||Array.isArray(A[1])||Array.isArray(A[2]);case"any":case"all":for(var D=0,Y=A.slice(1);D<Y.length;D+=1){var le=Y[D];if(!Jo(le)&&typeof le!="boolean")return!1}return!0;default:return!0}}_s.deserialize=function(A){return new _s(A._parameters,A._specification)},_s.serialize=function(A){return{_parameters:A._parameters,_specification:A._specification}};var $o={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ws(A){if(A==null)return{filter:function(){return!0},needGeometry:!1};Jo(A)||(A=Po(A));var D=go(A,$o);if(D.result==="error")throw new Error(D.value.map(function(Y){return Y.key+": "+Y.message}).join(", "));return{filter:function(Y,le,Te){return D.value.evaluate(Y,le,{},Te)},needGeometry:$r(A)}}function qs(A,D){return A<D?-1:A>D?1:0}function $r(A){if(!Array.isArray(A))return!1;if(A[0]==="within")return!0;for(var D=1;D<A.length;D++)if($r(A[D]))return!0;return!1}function Po(A){if(!A)return!0;var D,Y=A[0];return A.length<=1?Y!=="any":Y==="=="?Zi(A[1],A[2],"=="):Y==="!="?Jr(Zi(A[1],A[2],"==")):Y==="<"||Y===">"||Y==="<="||Y===">="?Zi(A[1],A[2],Y):Y==="any"?(D=A.slice(1),["any"].concat(D.map(Po))):Y==="all"?["all"].concat(A.slice(1).map(Po)):Y==="none"?["all"].concat(A.slice(1).map(Po).map(Jr)):Y==="in"?Ua(A[1],A.slice(2)):Y==="!in"?Jr(Ua(A[1],A.slice(2))):Y==="has"?Wr(A[1]):Y==="!has"?Jr(Wr(A[1])):Y!=="within"||A}function Zi(A,D,Y){switch(A){case"$type":return["filter-type-"+Y,D];case"$id":return["filter-id-"+Y,D];default:return["filter-"+Y,A,D]}}function Ua(A,D){if(D.length===0)return!1;switch(A){case"$type":return["filter-type-in",["literal",D]];case"$id":return["filter-id-in",["literal",D]];default:return D.length>200&&!D.some(function(Y){return typeof Y!=typeof D[0]})?["filter-in-large",A,["literal",D.sort(qs)]]:["filter-in-small",A,["literal",D]]}}function Wr(A){switch(A){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",A]}}function Jr(A){return["!",A]}function _a(A){return Jo(xt(A.value))?Ko(ut({},A,{expressionContext:"filter",valueSpec:{value:"boolean"}})):cs(A)}function cs(A){var D=A.value,Y=A.key;if(Ur(D)!=="array")return[new rt(Y,D,"array expected, "+Ur(D)+" found")];var le,Te=A.styleSpec,Ce=[];if(D.length<1)return[new rt(Y,D,"filter array must have at least 1 element")];switch(Ce=Ce.concat(us({key:Y+"[0]",value:D[0],valueSpec:Te.filter_operator,style:A.style,styleSpec:A.styleSpec})),et(D[0])){case"<":case"<=":case">":case">=":D.length>=2&&et(D[1])==="$type"&&Ce.push(new rt(Y,D,'"$type" cannot be use with operator "'+D[0]+'"'));case"==":case"!=":D.length!==3&&Ce.push(new rt(Y,D,'filter array for operator "'+D[0]+'" must have 3 elements'));case"in":case"!in":D.length>=2&&(le=Ur(D[1]))!=="string"&&Ce.push(new rt(Y+"[1]",D[1],"string expected, "+le+" found"));for(var Ne=2;Ne<D.length;Ne++)le=Ur(D[Ne]),et(D[1])==="$type"?Ce=Ce.concat(us({key:Y+"["+Ne+"]",value:D[Ne],valueSpec:Te.geometry_type,style:A.style,styleSpec:A.styleSpec})):le!=="string"&&le!=="number"&&le!=="boolean"&&Ce.push(new rt(Y+"["+Ne+"]",D[Ne],"string, number, or boolean expected, "+le+" found"));break;case"any":case"all":case"none":for(var Ze=1;Ze<D.length;Ze++)Ce=Ce.concat(cs({key:Y+"["+Ze+"]",value:D[Ze],style:A.style,styleSpec:A.styleSpec}));break;case"has":case"!has":le=Ur(D[1]),D.length!==2?Ce.push(new rt(Y,D,'filter array for "'+D[0]+'" operator must have 2 elements')):le!=="string"&&Ce.push(new rt(Y+"[1]",D[1],"string expected, "+le+" found"));break;case"within":le=Ur(D[1]),D.length!==2?Ce.push(new rt(Y,D,'filter array for "'+D[0]+'" operator must have 2 elements')):le!=="object"&&Ce.push(new rt(Y+"[1]",D[1],"object expected, "+le+" found"))}return Ce}function Ts(A,D){var Y=A.key,le=A.style,Te=A.styleSpec,Ce=A.value,Ne=A.objectKey,Ze=Te[D+"_"+A.layerType];if(!Ze)return[];var st=Ne.match(/^(.*)-transition$/);if(D==="paint"&&st&&Ze[st[1]]&&Ze[st[1]].transition)return La({key:Y,value:Ce,valueSpec:Te.transition,style:le,styleSpec:Te});var _t,kt=A.valueSpec||Ze[Ne];if(!kt)return[new rt(Y,Ce,'unknown property "'+Ne+'"')];if(Ur(Ce)==="string"&&ho(kt)&&!kt.tokens&&(_t=/^{([^}]+)}$/.exec(Ce)))return[new rt(Y,Ce,'"'+Ne+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(_t[1])+" }`.")];var It=[];return A.layerType==="symbol"&&(Ne==="text-field"&&le&&!le.glyphs&&It.push(new rt(Y,Ce,'use of "text-field" requires a style "glyphs" property')),Ne==="text-font"&&as(xt(Ce))&&et(Ce.type)==="identity"&&It.push(new rt(Y,Ce,'"text-font" does not support identity functions'))),It.concat(La({key:A.key,value:Ce,valueSpec:kt,style:le,styleSpec:Te,expressionContext:"property",propertyType:D,propertyKey:Ne}))}function Hs(A){return Ts(A,"paint")}function ks(A){return Ts(A,"layout")}function As(A){var D=[],Y=A.value,le=A.key,Te=A.style,Ce=A.styleSpec;Y.type||Y.ref||D.push(new rt(le,Y,'either "type" or "ref" is required'));var Ne,Ze=et(Y.type),st=et(Y.ref);if(Y.id)for(var _t=et(Y.id),kt=0;kt<A.arrayIndex;kt++){var It=Te.layers[kt];et(It.id)===_t&&D.push(new rt(le,Y.id,'duplicate layer id "'+Y.id+'", previously used at line '+It.id.__line__))}if("ref"in Y)["type","source","source-layer","filter","layout"].forEach(function(nn){nn in Y&&D.push(new rt(le,Y[nn],'"'+nn+'" is prohibited for ref layers'))}),Te.layers.forEach(function(nn){et(nn.id)===st&&(Ne=nn)}),Ne?Ne.ref?D.push(new rt(le,Y.ref,"ref cannot reference another ref layer")):Ze=et(Ne.type):D.push(new rt(le,Y.ref,'ref layer "'+st+'" not found'));else if(Ze!=="background")if(Y.source){var Vt=Te.sources&&Te.sources[Y.source],Bt=Vt&&et(Vt.type);Vt?Bt==="vector"&&Ze==="raster"?D.push(new rt(le,Y.source,'layer "'+Y.id+'" requires a raster source')):Bt==="raster"&&Ze!=="raster"?D.push(new rt(le,Y.source,'layer "'+Y.id+'" requires a vector source')):Bt!=="vector"||Y["source-layer"]?Bt==="raster-dem"&&Ze!=="hillshade"?D.push(new rt(le,Y.source,"raster-dem source can only be used with layer type 'hillshade'.")):Ze!=="line"||!Y.paint||!Y.paint["line-gradient"]||Bt==="geojson"&&Vt.lineMetrics||D.push(new rt(le,Y,'layer "'+Y.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):D.push(new rt(le,Y,'layer "'+Y.id+'" must specify a "source-layer"')):D.push(new rt(le,Y.source,'source "'+Y.source+'" not found'))}else D.push(new rt(le,Y,'missing required property "source"'));return D=D.concat(ba({key:le,value:Y,valueSpec:Ce.layer,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return La({key:le+".type",value:Y.type,valueSpec:Ce.layer.type,style:A.style,styleSpec:A.styleSpec,object:Y,objectKey:"type"})},filter:_a,layout:function(nn){return ba({layer:Y,key:nn.key,value:nn.value,style:nn.style,styleSpec:nn.styleSpec,objectElementValidators:{"*":function(un){return ks(ut({layerType:Ze},un))}}})},paint:function(nn){return ba({layer:Y,key:nn.key,value:nn.value,style:nn.style,styleSpec:nn.styleSpec,objectElementValidators:{"*":function(un){return Hs(ut({layerType:Ze},un))}}})}}})),D}function Ea(A){var D=A.value,Y=A.key,le=Ur(D);return le!=="string"?[new rt(Y,D,"string expected, "+le+" found")]:[]}var Io={promoteId:function(A){var D=A.key,Y=A.value;if(Ur(Y)==="string")return Ea({key:D,value:Y});var le=[];for(var Te in Y)le.push.apply(le,Ea({key:D+"."+Te,value:Y[Te]}));return le}};function zo(A){var D=A.value,Y=A.key,le=A.styleSpec,Te=A.style;if(!D.type)return[new rt(Y,D,'"type" is required')];var Ce,Ne=et(D.type);switch(Ne){case"vector":case"raster":case"raster-dem":return ba({key:Y,value:D,valueSpec:le["source_"+Ne.replace("-","_")],style:A.style,styleSpec:le,objectElementValidators:Io});case"geojson":if(Ce=ba({key:Y,value:D,valueSpec:le.source_geojson,style:Te,styleSpec:le,objectElementValidators:Io}),D.cluster)for(var Ze in D.clusterProperties){var st=D.clusterProperties[Ze],_t=st[0],kt=st[1],It=typeof _t=="string"?[_t,["accumulated"],["get",Ze]]:_t;Ce.push.apply(Ce,Ko({key:Y+"."+Ze+".map",value:kt,expressionContext:"cluster-map"})),Ce.push.apply(Ce,Ko({key:Y+"."+Ze+".reduce",value:It,expressionContext:"cluster-reduce"}))}return Ce;case"video":return ba({key:Y,value:D,valueSpec:le.source_video,style:Te,styleSpec:le});case"image":return ba({key:Y,value:D,valueSpec:le.source_image,style:Te,styleSpec:le});case"canvas":return[new rt(Y,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return us({key:Y+".type",value:D.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:Te,styleSpec:le})}}function ta(A){var D=A.value,Y=A.styleSpec,le=Y.light,Te=A.style,Ce=[],Ne=Ur(D);if(D===void 0)return Ce;if(Ne!=="object")return Ce.concat([new rt("light",D,"object expected, "+Ne+" found")]);for(var Ze in D){var st=Ze.match(/^(.*)-transition$/);Ce=st&&le[st[1]]&&le[st[1]].transition?Ce.concat(La({key:Ze,value:D[Ze],valueSpec:Y.transition,style:Te,styleSpec:Y})):le[Ze]?Ce.concat(La({key:Ze,value:D[Ze],valueSpec:le[Ze],style:Te,styleSpec:Y})):Ce.concat([new rt(Ze,D[Ze],'unknown property "'+Ze+'"')])}return Ce}var Ms={"*":function(){return[]},array:Vs,boolean:function(A){var D=A.value,Y=A.key,le=Ur(D);return le!=="boolean"?[new rt(Y,D,"boolean expected, "+le+" found")]:[]},number:cl,color:function(A){var D=A.key,Y=A.value,le=Ur(Y);return le!=="string"?[new rt(D,Y,"color expected, "+le+" found")]:Cn(Y)===null?[new rt(D,Y,'color expected, "'+Y+'" found')]:[]},constants:ct,enum:us,filter:_a,function:ls,layer:As,object:ba,source:zo,light:ta,string:Ea,formatted:function(A){return Ea(A).length===0?[]:Ko(A)},resolvedImage:function(A){return Ea(A).length===0?[]:Ko(A)}};function La(A){var D=A.value,Y=A.valueSpec,le=A.styleSpec;return Y.expression&&as(et(D))?ls(A):Y.expression&&Zo(xt(D))?Ko(A):Y.type&&Ms[Y.type]?Ms[Y.type](A):ba(ut({},A,{valueSpec:Y.type?le[Y.type]:Y}))}function Bi(A){var D=A.value,Y=A.key,le=Ea(A);return le.length||(D.indexOf("{fontstack}")===-1&&le.push(new rt(Y,D,'"glyphs" url must include a "{fontstack}" token')),D.indexOf("{range}")===-1&&le.push(new rt(Y,D,'"glyphs" url must include a "{range}" token'))),le}function qi(A,D){D===void 0&&(D=Re);var Y=[];return Y=Y.concat(La({key:"",value:A,valueSpec:D.$root,styleSpec:D,style:A,objectElementValidators:{glyphs:Bi,"*":function(){return[]}}})),A.constants&&(Y=Y.concat(ct({key:"constants",value:A.constants,style:A,styleSpec:D}))),ai(Y)}function ai(A){return[].concat(A).sort(function(D,Y){return D.line-Y.line})}function Hi(A){return function(){for(var D=[],Y=arguments.length;Y--;)D[Y]=arguments[Y];return ai(A.apply(this,D))}}qi.source=Hi(zo),qi.light=Hi(ta),qi.layer=Hi(As),qi.filter=Hi(_a),qi.paintProperty=Hi(Hs),qi.layoutProperty=Hi(ks);var no=qi,Qo=no.light,Va=no.paintProperty,Do=no.layoutProperty;function sa(A,D){var Y=!1;if(D&&D.length)for(var le=0,Te=D;le<Te.length;le+=1){var Ce=Te[le];A.fire(new gt(new Error(Ce.message))),Y=!0}return Y}var es=Ca,vo=3;function Ca(A,D,Y){var le=this.cells=[];if(A instanceof ArrayBuffer){this.arrayBuffer=A;var Te=new Int32Array(this.arrayBuffer);A=Te[0],D=Te[1],Y=Te[2],this.d=D+2*Y;for(var Ce=0;Ce<this.d*this.d;Ce++){var Ne=Te[vo+Ce],Ze=Te[vo+Ce+1];le.push(Ne===Ze?null:Te.subarray(Ne,Ze))}var st=Te[vo+le.length],_t=Te[vo+le.length+1];this.keys=Te.subarray(st,_t),this.bboxes=Te.subarray(_t),this.insert=this._insertReadonly}else{this.d=D+2*Y;for(var kt=0;kt<this.d*this.d;kt++)le.push([]);this.keys=[],this.bboxes=[]}this.n=D,this.extent=A,this.padding=Y,this.scale=D/A,this.uid=0;var It=Y/D*A;this.min=-It,this.max=A+It}Ca.prototype.insert=function(A,D,Y,le,Te){this._forEachCell(D,Y,le,Te,this._insertCell,this.uid++),this.keys.push(A),this.bboxes.push(D),this.bboxes.push(Y),this.bboxes.push(le),this.bboxes.push(Te)},Ca.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Ca.prototype._insertCell=function(A,D,Y,le,Te,Ce){this.cells[Te].push(Ce)},Ca.prototype.query=function(A,D,Y,le,Te){var Ce=this.min,Ne=this.max;if(A<=Ce&&D<=Ce&&Ne<=Y&&Ne<=le&&!Te)return Array.prototype.slice.call(this.keys);var Ze=[];return this._forEachCell(A,D,Y,le,this._queryCell,Ze,{},Te),Ze},Ca.prototype._queryCell=function(A,D,Y,le,Te,Ce,Ne,Ze){var st=this.cells[Te];if(st!==null)for(var _t=this.keys,kt=this.bboxes,It=0;It<st.length;It++){var Vt=st[It];if(Ne[Vt]===void 0){var Bt=4*Vt;(Ze?Ze(kt[Bt+0],kt[Bt+1],kt[Bt+2],kt[Bt+3]):A<=kt[Bt+2]&&D<=kt[Bt+3]&&Y>=kt[Bt+0]&&le>=kt[Bt+1])?(Ne[Vt]=!0,Ce.push(_t[Vt])):Ne[Vt]=!1}}},Ca.prototype._forEachCell=function(A,D,Y,le,Te,Ce,Ne,Ze){for(var st=this._convertToCellCoord(A),_t=this._convertToCellCoord(D),kt=this._convertToCellCoord(Y),It=this._convertToCellCoord(le),Vt=st;Vt<=kt;Vt++)for(var Bt=_t;Bt<=It;Bt++){var nn=this.d*Bt+Vt;if((!Ze||Ze(this._convertFromCellCoord(Vt),this._convertFromCellCoord(Bt),this._convertFromCellCoord(Vt+1),this._convertFromCellCoord(Bt+1)))&&Te.call(this,A,D,Y,le,nn,Ce,Ne,Ze))return}},Ca.prototype._convertFromCellCoord=function(A){return(A-this.padding)/this.scale},Ca.prototype._convertToCellCoord=function(A){return Math.max(0,Math.min(this.d-1,Math.floor(A*this.scale)+this.padding))},Ca.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var A=this.cells,D=vo+this.cells.length+1+1,Y=0,le=0;le<this.cells.length;le++)Y+=this.cells[le].length;var Te=new Int32Array(D+Y+this.keys.length+this.bboxes.length);Te[0]=this.extent,Te[1]=this.n,Te[2]=this.padding;for(var Ce=D,Ne=0;Ne<A.length;Ne++){var Ze=A[Ne];Te[vo+Ne]=Ce,Te.set(Ze,Ce),Ce+=Ze.length}return Te[vo+A.length]=Ce,Te.set(this.keys,Ce),Ce+=this.keys.length,Te[vo+A.length+1]=Ce,Te.set(this.bboxes,Ce),Ce+=this.bboxes.length,Te.buffer};var Oa=n.ImageData,si=n.ImageBitmap,qa={};function _r(A,D,Y){Y===void 0&&(Y={}),Object.defineProperty(D,"_classRegistryKey",{value:A,writeable:!1}),qa[A]={klass:D,omit:Y.omit||[],shallow:Y.shallow||[]}}for(var Ss in _r("Object",Object),es.serialize=function(A,D){var Y=A.toArrayBuffer();return D&&D.push(Y),{buffer:Y}},es.deserialize=function(A){return new es(A.buffer)},_r("Grid",es),_r("Color",yn),_r("Error",Error),_r("ResolvedImage",sr),_r("StylePropertyFunction",_s),_r("StyleExpression",Oo,{omit:["_evaluator"]}),_r("ZoomDependentExpression",ss),_r("ZoomConstantExpression",ja),_r("CompoundExpression",gn,{omit:["_evaluate"]}),is)is[Ss]._classRegistryKey||_r("Expression_"+Ss,is[Ss]);function $s(A){return A&&typeof ArrayBuffer<"u"&&(A instanceof ArrayBuffer||A.constructor&&A.constructor.name==="ArrayBuffer")}function Ro(A){return si&&A instanceof si}function Fo(A,D){if(A==null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp)return A;if($s(A)||Ro(A))return D&&D.push(A),A;if(ArrayBuffer.isView(A)){var Y=A;return D&&D.push(Y.buffer),Y}if(A instanceof Oa)return D&&D.push(A.data.buffer),A;if(Array.isArray(A)){for(var le=[],Te=0,Ce=A;Te<Ce.length;Te+=1){var Ne=Ce[Te];le.push(Fo(Ne,D))}return le}if(typeof A=="object"){var Ze=A.constructor,st=Ze._classRegistryKey;if(!st)throw new Error("can't serialize object of unregistered class");var _t=Ze.serialize?Ze.serialize(A,D):{};if(!Ze.serialize){for(var kt in A)if(A.hasOwnProperty(kt)&&!(qa[st].omit.indexOf(kt)>=0)){var It=A[kt];_t[kt]=qa[st].shallow.indexOf(kt)>=0?It:Fo(It,D)}A instanceof Error&&(_t.message=A.message)}if(_t.$name)throw new Error("$name property is reserved for worker serialization logic.");return st!=="Object"&&(_t.$name=st),_t}throw new Error("can't serialize object of type "+typeof A)}function ts(A){if(A==null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp||$s(A)||Ro(A)||ArrayBuffer.isView(A)||A instanceof Oa)return A;if(Array.isArray(A))return A.map(ts);if(typeof A=="object"){var D=A.$name||"Object",Y=qa[D].klass;if(!Y)throw new Error("can't deserialize unregistered class "+D);if(Y.deserialize)return Y.deserialize(A);for(var le=Object.create(Y.prototype),Te=0,Ce=Object.keys(A);Te<Ce.length;Te+=1){var Ne=Ce[Te];if(Ne!=="$name"){var Ze=A[Ne];le[Ne]=qa[D].shallow.indexOf(Ne)>=0?Ze:ts(Ze)}}return le}throw new Error("can't deserialize object of type "+typeof A)}var fs=function(){this.first=!0};fs.prototype.update=function(A,D){var Y=Math.floor(A);return this.first?(this.first=!1,this.lastIntegerZoom=Y,this.lastIntegerZoomTime=0,this.lastZoom=A,this.lastFloorZoom=Y,!0):(this.lastFloorZoom>Y?(this.lastIntegerZoom=Y+1,this.lastIntegerZoomTime=D):this.lastFloorZoom<Y&&(this.lastIntegerZoom=Y,this.lastIntegerZoomTime=D),A!==this.lastZoom&&(this.lastZoom=A,this.lastFloorZoom=Y,!0))};var gr={"Latin-1 Supplement":function(A){return A>=128&&A<=255},Arabic:function(A){return A>=1536&&A<=1791},"Arabic Supplement":function(A){return A>=1872&&A<=1919},"Arabic Extended-A":function(A){return A>=2208&&A<=2303},"Hangul Jamo":function(A){return A>=4352&&A<=4607},"Unified Canadian Aboriginal Syllabics":function(A){return A>=5120&&A<=5759},Khmer:function(A){return A>=6016&&A<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(A){return A>=6320&&A<=6399},"General Punctuation":function(A){return A>=8192&&A<=8303},"Letterlike Symbols":function(A){return A>=8448&&A<=8527},"Number Forms":function(A){return A>=8528&&A<=8591},"Miscellaneous Technical":function(A){return A>=8960&&A<=9215},"Control Pictures":function(A){return A>=9216&&A<=9279},"Optical Character Recognition":function(A){return A>=9280&&A<=9311},"Enclosed Alphanumerics":function(A){return A>=9312&&A<=9471},"Geometric Shapes":function(A){return A>=9632&&A<=9727},"Miscellaneous Symbols":function(A){return A>=9728&&A<=9983},"Miscellaneous Symbols and Arrows":function(A){return A>=11008&&A<=11263},"CJK Radicals Supplement":function(A){return A>=11904&&A<=12031},"Kangxi Radicals":function(A){return A>=12032&&A<=12255},"Ideographic Description Characters":function(A){return A>=12272&&A<=12287},"CJK Symbols and Punctuation":function(A){return A>=12288&&A<=12351},Hiragana:function(A){return A>=12352&&A<=12447},Katakana:function(A){return A>=12448&&A<=12543},Bopomofo:function(A){return A>=12544&&A<=12591},"Hangul Compatibility Jamo":function(A){return A>=12592&&A<=12687},Kanbun:function(A){return A>=12688&&A<=12703},"Bopomofo Extended":function(A){return A>=12704&&A<=12735},"CJK Strokes":function(A){return A>=12736&&A<=12783},"Katakana Phonetic Extensions":function(A){return A>=12784&&A<=12799},"Enclosed CJK Letters and Months":function(A){return A>=12800&&A<=13055},"CJK Compatibility":function(A){return A>=13056&&A<=13311},"CJK Unified Ideographs Extension A":function(A){return A>=13312&&A<=19903},"Yijing Hexagram Symbols":function(A){return A>=19904&&A<=19967},"CJK Unified Ideographs":function(A){return A>=19968&&A<=40959},"Yi Syllables":function(A){return A>=40960&&A<=42127},"Yi Radicals":function(A){return A>=42128&&A<=42191},"Hangul Jamo Extended-A":function(A){return A>=43360&&A<=43391},"Hangul Syllables":function(A){return A>=44032&&A<=55215},"Hangul Jamo Extended-B":function(A){return A>=55216&&A<=55295},"Private Use Area":function(A){return A>=57344&&A<=63743},"CJK Compatibility Ideographs":function(A){return A>=63744&&A<=64255},"Arabic Presentation Forms-A":function(A){return A>=64336&&A<=65023},"Vertical Forms":function(A){return A>=65040&&A<=65055},"CJK Compatibility Forms":function(A){return A>=65072&&A<=65103},"Small Form Variants":function(A){return A>=65104&&A<=65135},"Arabic Presentation Forms-B":function(A){return A>=65136&&A<=65279},"Halfwidth and Fullwidth Forms":function(A){return A>=65280&&A<=65519}};function Es(A){for(var D=0,Y=A;D<Y.length;D+=1)if(mo(Y[D].charCodeAt(0)))return!0;return!1}function mo(A){return!(A!==746&&A!==747&&(A<4352||!(gr["Bopomofo Extended"](A)||gr.Bopomofo(A)||gr["CJK Compatibility Forms"](A)&&!(A>=65097&&A<=65103)||gr["CJK Compatibility Ideographs"](A)||gr["CJK Compatibility"](A)||gr["CJK Radicals Supplement"](A)||gr["CJK Strokes"](A)||!(!gr["CJK Symbols and Punctuation"](A)||A>=12296&&A<=12305||A>=12308&&A<=12319||A===12336)||gr["CJK Unified Ideographs Extension A"](A)||gr["CJK Unified Ideographs"](A)||gr["Enclosed CJK Letters and Months"](A)||gr["Hangul Compatibility Jamo"](A)||gr["Hangul Jamo Extended-A"](A)||gr["Hangul Jamo Extended-B"](A)||gr["Hangul Jamo"](A)||gr["Hangul Syllables"](A)||gr.Hiragana(A)||gr["Ideographic Description Characters"](A)||gr.Kanbun(A)||gr["Kangxi Radicals"](A)||gr["Katakana Phonetic Extensions"](A)||gr.Katakana(A)&&A!==12540||!(!gr["Halfwidth and Fullwidth Forms"](A)||A===65288||A===65289||A===65293||A>=65306&&A<=65310||A===65339||A===65341||A===65343||A>=65371&&A<=65503||A===65507||A>=65512&&A<=65519)||!(!gr["Small Form Variants"](A)||A>=65112&&A<=65118||A>=65123&&A<=65126)||gr["Unified Canadian Aboriginal Syllabics"](A)||gr["Unified Canadian Aboriginal Syllabics Extended"](A)||gr["Vertical Forms"](A)||gr["Yijing Hexagram Symbols"](A)||gr["Yi Syllables"](A)||gr["Yi Radicals"](A))))}function Ni(A){return!(mo(A)||function(D){return!!(gr["Latin-1 Supplement"](D)&&(D===167||D===169||D===174||D===177||D===188||D===189||D===190||D===215||D===247)||gr["General Punctuation"](D)&&(D===8214||D===8224||D===8225||D===8240||D===8241||D===8251||D===8252||D===8258||D===8263||D===8264||D===8265||D===8273)||gr["Letterlike Symbols"](D)||gr["Number Forms"](D)||gr["Miscellaneous Technical"](D)&&(D>=8960&&D<=8967||D>=8972&&D<=8991||D>=8996&&D<=9e3||D===9003||D>=9085&&D<=9114||D>=9150&&D<=9165||D===9167||D>=9169&&D<=9179||D>=9186&&D<=9215)||gr["Control Pictures"](D)&&D!==9251||gr["Optical Character Recognition"](D)||gr["Enclosed Alphanumerics"](D)||gr["Geometric Shapes"](D)||gr["Miscellaneous Symbols"](D)&&!(D>=9754&&D<=9759)||gr["Miscellaneous Symbols and Arrows"](D)&&(D>=11026&&D<=11055||D>=11088&&D<=11097||D>=11192&&D<=11243)||gr["CJK Symbols and Punctuation"](D)||gr.Katakana(D)||gr["Private Use Area"](D)||gr["CJK Compatibility Forms"](D)||gr["Small Form Variants"](D)||gr["Halfwidth and Fullwidth Forms"](D)||D===8734||D===8756||D===8757||D>=9984&&D<=10087||D>=10102&&D<=10131||D===65532||D===65533)}(A))}function Bo(A){return gr.Arabic(A)||gr["Arabic Supplement"](A)||gr["Arabic Extended-A"](A)||gr["Arabic Presentation Forms-A"](A)||gr["Arabic Presentation Forms-B"](A)}function Ha(A){return A>=1424&&A<=2303||gr["Arabic Presentation Forms-A"](A)||gr["Arabic Presentation Forms-B"](A)}function Pa(A,D){return!(!D&&Ha(A)||A>=2304&&A<=3583||A>=3840&&A<=4255||gr.Khmer(A))}function na(A){for(var D=0,Y=A;D<Y.length;D+=1)if(Ha(Y[D].charCodeAt(0)))return!0;return!1}var ro="deferred",Ia="loading",yo="loaded",Ls="error",No=null,Hr="unavailable",Gi=null,la=function(A){A&&typeof A=="string"&&A.indexOf("NetworkError")>-1&&(Hr=Ls),No&&No(A)};function io(){ua.fire(new dt("pluginStateChange",{pluginStatus:Hr,pluginURL:Gi}))}var ua=new je,hs=function(){return Hr},ps=function(){if(Hr!==ro||!Gi)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Hr=Ia,io(),Gi&&Pt({url:Gi},function(A){A?la(A):(Hr=yo,io())})},ca={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Hr===yo||ca.applyArabicShaping!=null},isLoading:function(){return Hr===Ia},setState:function(A){Hr=A.pluginStatus,Gi=A.pluginURL},isParsed:function(){return ca.applyArabicShaping!=null&&ca.processBidirectionalText!=null&&ca.processStyledBidirectionalText!=null},getPluginURL:function(){return Gi}},Vr=function(A,D){this.zoom=A,D?(this.now=D.now,this.fadeDuration=D.fadeDuration,this.zoomHistory=D.zoomHistory,this.transition=D.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new fs,this.transition={})};Vr.prototype.isSupportedScript=function(A){return function(D,Y){for(var le=0,Te=D;le<Te.length;le+=1)if(!Pa(Te[le].charCodeAt(0),Y))return!1;return!0}(A,ca.isLoaded())},Vr.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Vr.prototype.getCrossfadeParameters=function(){var A=this.zoom,D=A-Math.floor(A),Y=this.crossFadingFactor();return A>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:D+(1-D)*Y}:{fromScale:.5,toScale:1,t:1-(1-Y)*D}};var ao=function(A,D){this.property=A,this.value=D,this.expression=function(Y,le){if(as(Y))return new _s(Y,le);if(Zo(Y)){var Te=ul(Y,le);if(Te.result==="error")throw new Error(Te.value.map(function(Ne){return Ne.key+": "+Ne.message}).join(", "));return Te.value}var Ce=Y;return typeof Y=="string"&&le.type==="color"&&(Ce=yn.parse(Y)),{kind:"constant",evaluate:function(){return Ce}}}(D===void 0?A.specification.default:D,A.specification)};ao.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},ao.prototype.possiblyEvaluate=function(A,D,Y){return this.property.possiblyEvaluate(this,A,D,Y)};var ns=function(A){this.property=A,this.value=new ao(A,void 0)};ns.prototype.transitioned=function(A,D){return new ds(this.property,this.value,D,c({},A.transition,this.transition),A.now)},ns.prototype.untransitioned=function(){return new ds(this.property,this.value,null,{},0)};var Ga=function(A){this._properties=A,this._values=Object.create(A.defaultTransitionablePropertyValues)};Ga.prototype.getValue=function(A){return S(this._values[A].value.value)},Ga.prototype.setValue=function(A,D){this._values.hasOwnProperty(A)||(this._values[A]=new ns(this._values[A].property)),this._values[A].value=new ao(this._values[A].property,D===null?void 0:S(D))},Ga.prototype.getTransition=function(A){return S(this._values[A].transition)},Ga.prototype.setTransition=function(A,D){this._values.hasOwnProperty(A)||(this._values[A]=new ns(this._values[A].property)),this._values[A].transition=S(D)||void 0},Ga.prototype.serialize=function(){for(var A={},D=0,Y=Object.keys(this._values);D<Y.length;D+=1){var le=Y[D],Te=this.getValue(le);Te!==void 0&&(A[le]=Te);var Ce=this.getTransition(le);Ce!==void 0&&(A[le+"-transition"]=Ce)}return A},Ga.prototype.transitioned=function(A,D){for(var Y=new gs(this._properties),le=0,Te=Object.keys(this._values);le<Te.length;le+=1){var Ce=Te[le];Y._values[Ce]=this._values[Ce].transitioned(A,D._values[Ce])}return Y},Ga.prototype.untransitioned=function(){for(var A=new gs(this._properties),D=0,Y=Object.keys(this._values);D<Y.length;D+=1){var le=Y[D];A._values[le]=this._values[le].untransitioned()}return A};var ds=function(A,D,Y,le,Te){this.property=A,this.value=D,this.begin=Te+le.delay||0,this.end=this.begin+le.duration||0,A.specification.transition&&(le.delay||le.duration)&&(this.prior=Y)};ds.prototype.possiblyEvaluate=function(A,D,Y){var le=A.now||0,Te=this.value.possiblyEvaluate(A,D,Y),Ce=this.prior;if(Ce){if(le>this.end)return this.prior=null,Te;if(this.value.isDataDriven())return this.prior=null,Te;if(le<this.begin)return Ce.possiblyEvaluate(A,D,Y);var Ne=(le-this.begin)/(this.end-this.begin);return this.property.interpolate(Ce.possiblyEvaluate(A,D,Y),Te,function(Ze){if(Ze<=0)return 0;if(Ze>=1)return 1;var st=Ze*Ze,_t=st*Ze;return 4*(Ze<.5?_t:3*(Ze-st)+_t-.75)}(Ne))}return Te};var gs=function(A){this._properties=A,this._values=Object.create(A.defaultTransitioningPropertyValues)};gs.prototype.possiblyEvaluate=function(A,D,Y){for(var le=new rs(this._properties),Te=0,Ce=Object.keys(this._values);Te<Ce.length;Te+=1){var Ne=Ce[Te];le._values[Ne]=this._values[Ne].possiblyEvaluate(A,D,Y)}return le},gs.prototype.hasTransition=function(){for(var A=0,D=Object.keys(this._values);A<D.length;A+=1){var Y=D[A];if(this._values[Y].prior)return!0}return!1};var Wa=function(A){this._properties=A,this._values=Object.create(A.defaultPropertyValues)};Wa.prototype.getValue=function(A){return S(this._values[A].value)},Wa.prototype.setValue=function(A,D){this._values[A]=new ao(this._values[A].property,D===null?void 0:S(D))},Wa.prototype.serialize=function(){for(var A={},D=0,Y=Object.keys(this._values);D<Y.length;D+=1){var le=Y[D],Te=this.getValue(le);Te!==void 0&&(A[le]=Te)}return A},Wa.prototype.possiblyEvaluate=function(A,D,Y){for(var le=new rs(this._properties),Te=0,Ce=Object.keys(this._values);Te<Ce.length;Te+=1){var Ne=Ce[Te];le._values[Ne]=this._values[Ne].possiblyEvaluate(A,D,Y)}return le};var li=function(A,D,Y){this.property=A,this.value=D,this.parameters=Y};li.prototype.isConstant=function(){return this.value.kind==="constant"},li.prototype.constantOr=function(A){return this.value.kind==="constant"?this.value.value:A},li.prototype.evaluate=function(A,D,Y,le){return this.property.evaluate(this.value,this.parameters,A,D,Y,le)};var rs=function(A){this._properties=A,this._values=Object.create(A.defaultPossiblyEvaluatedValues)};rs.prototype.get=function(A){return this._values[A]};var kr=function(A){this.specification=A};kr.prototype.possiblyEvaluate=function(A,D){return A.expression.evaluate(D)},kr.prototype.interpolate=function(A,D,Y){var le=oi[this.specification.type];return le?le(A,D,Y):A};var Cr=function(A,D){this.specification=A,this.overrides=D};Cr.prototype.possiblyEvaluate=function(A,D,Y,le){return A.expression.kind==="constant"||A.expression.kind==="camera"?new li(this,{kind:"constant",value:A.expression.evaluate(D,null,{},Y,le)},D):new li(this,A.expression,D)},Cr.prototype.interpolate=function(A,D,Y){if(A.value.kind!=="constant"||D.value.kind!=="constant")return A;if(A.value.value===void 0||D.value.value===void 0)return new li(this,{kind:"constant",value:void 0},A.parameters);var le=oi[this.specification.type];return le?new li(this,{kind:"constant",value:le(A.value.value,D.value.value,Y)},A.parameters):A},Cr.prototype.evaluate=function(A,D,Y,le,Te,Ce){return A.kind==="constant"?A.value:A.evaluate(D,Y,le,Te,Ce)};var wa=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.possiblyEvaluate=function(Y,le,Te,Ce){if(Y.value===void 0)return new li(this,{kind:"constant",value:void 0},le);if(Y.expression.kind==="constant"){var Ne=Y.expression.evaluate(le,null,{},Te,Ce),Ze=Y.property.specification.type==="resolvedImage"&&typeof Ne!="string"?Ne.name:Ne,st=this._calculate(Ze,Ze,Ze,le);return new li(this,{kind:"constant",value:st},le)}if(Y.expression.kind==="camera"){var _t=this._calculate(Y.expression.evaluate({zoom:le.zoom-1}),Y.expression.evaluate({zoom:le.zoom}),Y.expression.evaluate({zoom:le.zoom+1}),le);return new li(this,{kind:"constant",value:_t},le)}return new li(this,Y.expression,le)},D.prototype.evaluate=function(Y,le,Te,Ce,Ne,Ze){if(Y.kind==="source"){var st=Y.evaluate(le,Te,Ce,Ne,Ze);return this._calculate(st,st,st,le)}return Y.kind==="composite"?this._calculate(Y.evaluate({zoom:Math.floor(le.zoom)-1},Te,Ce),Y.evaluate({zoom:Math.floor(le.zoom)},Te,Ce),Y.evaluate({zoom:Math.floor(le.zoom)+1},Te,Ce),le):Y.value},D.prototype._calculate=function(Y,le,Te,Ce){return Ce.zoom>Ce.zoomHistory.lastIntegerZoom?{from:Y,to:le}:{from:Te,to:le}},D.prototype.interpolate=function(Y){return Y},D}(Cr),oo=function(A){this.specification=A};oo.prototype.possiblyEvaluate=function(A,D,Y,le){if(A.value!==void 0){if(A.expression.kind==="constant"){var Te=A.expression.evaluate(D,null,{},Y,le);return this._calculate(Te,Te,Te,D)}return this._calculate(A.expression.evaluate(new Vr(Math.floor(D.zoom-1),D)),A.expression.evaluate(new Vr(Math.floor(D.zoom),D)),A.expression.evaluate(new Vr(Math.floor(D.zoom+1),D)),D)}},oo.prototype._calculate=function(A,D,Y,le){return le.zoom>le.zoomHistory.lastIntegerZoom?{from:A,to:D}:{from:Y,to:D}},oo.prototype.interpolate=function(A){return A};var xo=function(A){this.specification=A};xo.prototype.possiblyEvaluate=function(A,D,Y,le){return!!A.expression.evaluate(D,null,{},Y,le)},xo.prototype.interpolate=function(){return!1};var Ei=function(A){for(var D in this.properties=A,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],A){var Y=A[D];Y.specification.overridable&&this.overridableProperties.push(D);var le=this.defaultPropertyValues[D]=new ao(Y,void 0),Te=this.defaultTransitionablePropertyValues[D]=new ns(Y);this.defaultTransitioningPropertyValues[D]=Te.untransitioned(),this.defaultPossiblyEvaluatedValues[D]=le.possiblyEvaluate({})}};_r("DataDrivenProperty",Cr),_r("DataConstantProperty",kr),_r("CrossFadedDataDrivenProperty",wa),_r("CrossFadedProperty",oo),_r("ColorRampProperty",xo);var so="-transition",Qr=function(A){function D(Y,le){if(A.call(this),this.id=Y.id,this.type=Y.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},Y.type!=="custom"&&(this.metadata=Y.metadata,this.minzoom=Y.minzoom,this.maxzoom=Y.maxzoom,Y.type!=="background"&&(this.source=Y.source,this.sourceLayer=Y["source-layer"],this.filter=Y.filter),le.layout&&(this._unevaluatedLayout=new Wa(le.layout)),le.paint)){for(var Te in this._transitionablePaint=new Ga(le.paint),Y.paint)this.setPaintProperty(Te,Y.paint[Te],{validate:!1});for(var Ce in Y.layout)this.setLayoutProperty(Ce,Y.layout[Ce],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new rs(le.paint)}}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},D.prototype.getLayoutProperty=function(Y){return Y==="visibility"?this.visibility:this._unevaluatedLayout.getValue(Y)},D.prototype.setLayoutProperty=function(Y,le,Te){if(Te===void 0&&(Te={}),le!=null){var Ce="layers."+this.id+".layout."+Y;if(this._validate(Do,Ce,Y,le,Te))return}Y!=="visibility"?this._unevaluatedLayout.setValue(Y,le):this.visibility=le},D.prototype.getPaintProperty=function(Y){return m(Y,so)?this._transitionablePaint.getTransition(Y.slice(0,-11)):this._transitionablePaint.getValue(Y)},D.prototype.setPaintProperty=function(Y,le,Te){if(Te===void 0&&(Te={}),le!=null){var Ce="layers."+this.id+".paint."+Y;if(this._validate(Va,Ce,Y,le,Te))return!1}if(m(Y,so))return this._transitionablePaint.setTransition(Y.slice(0,-11),le||void 0),!1;var Ne=this._transitionablePaint._values[Y],Ze=Ne.property.specification["property-type"]==="cross-faded-data-driven",st=Ne.value.isDataDriven(),_t=Ne.value;this._transitionablePaint.setValue(Y,le),this._handleSpecialPaintPropertyUpdate(Y);var kt=this._transitionablePaint._values[Y].value;return kt.isDataDriven()||st||Ze||this._handleOverridablePaintPropertyUpdate(Y,_t,kt)},D.prototype._handleSpecialPaintPropertyUpdate=function(Y){},D.prototype._handleOverridablePaintPropertyUpdate=function(Y,le,Te){return!1},D.prototype.isHidden=function(Y){return!!(this.minzoom&&Y<this.minzoom)||!!(this.maxzoom&&Y>=this.maxzoom)||this.visibility==="none"},D.prototype.updateTransitions=function(Y){this._transitioningPaint=this._transitionablePaint.transitioned(Y,this._transitioningPaint)},D.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},D.prototype.recalculate=function(Y,le){Y.getCrossfadeParameters&&(this._crossfadeParameters=Y.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(Y,void 0,le)),this.paint=this._transitioningPaint.possiblyEvaluate(Y,void 0,le)},D.prototype.serialize=function(){var Y={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(Y.layout=Y.layout||{},Y.layout.visibility=this.visibility),d(Y,function(le,Te){return!(le===void 0||Te==="layout"&&!Object.keys(le).length||Te==="paint"&&!Object.keys(le).length)})},D.prototype._validate=function(Y,le,Te,Ce,Ne){return Ne===void 0&&(Ne={}),(!Ne||Ne.validate!==!1)&&sa(this,Y.call(no,{key:le,layerType:this.type,objectKey:Te,value:Ce,styleSpec:Re,style:{glyphs:!0,sprite:!0}}))},D.prototype.is3D=function(){return!1},D.prototype.isTileClipped=function(){return!1},D.prototype.hasOffscreenPass=function(){return!1},D.prototype.resize=function(){},D.prototype.isStateDependent=function(){for(var Y in this.paint._values){var le=this.paint.get(Y);if(le instanceof li&&ho(le.property.specification)&&(le.value.kind==="source"||le.value.kind==="composite")&&le.value.isStateDependent)return!0}return!1},D}(je),fl={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Ta=function(A,D){this._structArray=A,this._pos1=D*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},ni=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function hi(A,D){D===void 0&&(D=1);var Y=0,le=0;return{members:A.map(function(Te){var Ce,Ne=(Ce=Te.type,fl[Ce].BYTES_PER_ELEMENT),Ze=Y=ga(Y,Math.max(D,Ne)),st=Te.components||1;return le=Math.max(le,Ne),Y+=Ne*st,{name:Te.name,type:Te.type,components:st,offset:Ze}}),size:ga(Y,Math.max(le,D)),alignment:D}}function ga(A,D){return Math.ceil(A/D)*D}ni.serialize=function(A,D){return A._trim(),D&&(A.isTransferred=!0,D.push(A.arrayBuffer)),{length:A.length,arrayBuffer:A.arrayBuffer}},ni.deserialize=function(A){var D=Object.create(this.prototype);return D.arrayBuffer=A.arrayBuffer,D.length=A.length,D.capacity=A.arrayBuffer.byteLength/D.bytesPerElement,D._refreshViews(),D},ni.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},ni.prototype.clear=function(){this.length=0},ni.prototype.resize=function(A){this.reserve(A),this.length=A},ni.prototype.reserve=function(A){if(A>this.capacity){this.capacity=Math.max(A,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var D=this.uint8;this._refreshViews(),D&&this.uint8.set(D)}},ni.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var jo=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le){var Te=this.length;return this.resize(Te+1),this.emplace(Te,Y,le)},D.prototype.emplace=function(Y,le,Te){var Ce=2*Y;return this.int16[Ce+0]=le,this.int16[Ce+1]=Te,Y},D}(ni);jo.prototype.bytesPerElement=4,_r("StructArrayLayout2i4",jo);var Qs=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le,Te,Ce){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,Y,le,Te,Ce)},D.prototype.emplace=function(Y,le,Te,Ce,Ne){var Ze=4*Y;return this.int16[Ze+0]=le,this.int16[Ze+1]=Te,this.int16[Ze+2]=Ce,this.int16[Ze+3]=Ne,Y},D}(ni);Qs.prototype.bytesPerElement=8,_r("StructArrayLayout4i8",Qs);var Xe=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le,Te,Ce,Ne,Ze){var st=this.length;return this.resize(st+1),this.emplace(st,Y,le,Te,Ce,Ne,Ze)},D.prototype.emplace=function(Y,le,Te,Ce,Ne,Ze,st){var _t=6*Y;return this.int16[_t+0]=le,this.int16[_t+1]=Te,this.int16[_t+2]=Ce,this.int16[_t+3]=Ne,this.int16[_t+4]=Ze,this.int16[_t+5]=st,Y},D}(ni);Xe.prototype.bytesPerElement=12,_r("StructArrayLayout2i4i12",Xe);var Je=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le,Te,Ce,Ne,Ze){var st=this.length;return this.resize(st+1),this.emplace(st,Y,le,Te,Ce,Ne,Ze)},D.prototype.emplace=function(Y,le,Te,Ce,Ne,Ze,st){var _t=4*Y,kt=8*Y;return this.int16[_t+0]=le,this.int16[_t+1]=Te,this.uint8[kt+4]=Ce,this.uint8[kt+5]=Ne,this.uint8[kt+6]=Ze,this.uint8[kt+7]=st,Y},D}(ni);Je.prototype.bytesPerElement=8,_r("StructArrayLayout2i4ub8",Je);var at=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le){var Te=this.length;return this.resize(Te+1),this.emplace(Te,Y,le)},D.prototype.emplace=function(Y,le,Te){var Ce=2*Y;return this.float32[Ce+0]=le,this.float32[Ce+1]=Te,Y},D}(ni);at.prototype.bytesPerElement=8,_r("StructArrayLayout2f8",at);var B=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le,Te,Ce,Ne,Ze,st,_t,kt,It){var Vt=this.length;return this.resize(Vt+1),this.emplace(Vt,Y,le,Te,Ce,Ne,Ze,st,_t,kt,It)},D.prototype.emplace=function(Y,le,Te,Ce,Ne,Ze,st,_t,kt,It,Vt){var Bt=10*Y;return this.uint16[Bt+0]=le,this.uint16[Bt+1]=Te,this.uint16[Bt+2]=Ce,this.uint16[Bt+3]=Ne,this.uint16[Bt+4]=Ze,this.uint16[Bt+5]=st,this.uint16[Bt+6]=_t,this.uint16[Bt+7]=kt,this.uint16[Bt+8]=It,this.uint16[Bt+9]=Vt,Y},D}(ni);B.prototype.bytesPerElement=20,_r("StructArrayLayout10ui20",B);var G=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le,Te,Ce,Ne,Ze,st,_t,kt,It,Vt,Bt){var nn=this.length;return this.resize(nn+1),this.emplace(nn,Y,le,Te,Ce,Ne,Ze,st,_t,kt,It,Vt,Bt)},D.prototype.emplace=function(Y,le,Te,Ce,Ne,Ze,st,_t,kt,It,Vt,Bt,nn){var un=12*Y;return this.int16[un+0]=le,this.int16[un+1]=Te,this.int16[un+2]=Ce,this.int16[un+3]=Ne,this.uint16[un+4]=Ze,this.uint16[un+5]=st,this.uint16[un+6]=_t,this.uint16[un+7]=kt,this.int16[un+8]=It,this.int16[un+9]=Vt,this.int16[un+10]=Bt,this.int16[un+11]=nn,Y},D}(ni);G.prototype.bytesPerElement=24,_r("StructArrayLayout4i4ui4i24",G);var q=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le,Te){var Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,Y,le,Te)},D.prototype.emplace=function(Y,le,Te,Ce){var Ne=3*Y;return this.float32[Ne+0]=le,this.float32[Ne+1]=Te,this.float32[Ne+2]=Ce,Y},D}(ni);q.prototype.bytesPerElement=12,_r("StructArrayLayout3f12",q);var L=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y){var le=this.length;return this.resize(le+1),this.emplace(le,Y)},D.prototype.emplace=function(Y,le){var Te=1*Y;return this.uint32[Te+0]=le,Y},D}(ni);L.prototype.bytesPerElement=4,_r("StructArrayLayout1ul4",L);var V=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le,Te,Ce,Ne,Ze,st,_t,kt){var It=this.length;return this.resize(It+1),this.emplace(It,Y,le,Te,Ce,Ne,Ze,st,_t,kt)},D.prototype.emplace=function(Y,le,Te,Ce,Ne,Ze,st,_t,kt,It){var Vt=10*Y,Bt=5*Y;return this.int16[Vt+0]=le,this.int16[Vt+1]=Te,this.int16[Vt+2]=Ce,this.int16[Vt+3]=Ne,this.int16[Vt+4]=Ze,this.int16[Vt+5]=st,this.uint32[Bt+3]=_t,this.uint16[Vt+8]=kt,this.uint16[Vt+9]=It,Y},D}(ni);V.prototype.bytesPerElement=20,_r("StructArrayLayout6i1ul2ui20",V);var J=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le,Te,Ce,Ne,Ze){var st=this.length;return this.resize(st+1),this.emplace(st,Y,le,Te,Ce,Ne,Ze)},D.prototype.emplace=function(Y,le,Te,Ce,Ne,Ze,st){var _t=6*Y;return this.int16[_t+0]=le,this.int16[_t+1]=Te,this.int16[_t+2]=Ce,this.int16[_t+3]=Ne,this.int16[_t+4]=Ze,this.int16[_t+5]=st,Y},D}(ni);J.prototype.bytesPerElement=12,_r("StructArrayLayout2i2i2i12",J);var re=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le,Te,Ce,Ne){var Ze=this.length;return this.resize(Ze+1),this.emplace(Ze,Y,le,Te,Ce,Ne)},D.prototype.emplace=function(Y,le,Te,Ce,Ne,Ze){var st=4*Y,_t=8*Y;return this.float32[st+0]=le,this.float32[st+1]=Te,this.float32[st+2]=Ce,this.int16[_t+6]=Ne,this.int16[_t+7]=Ze,Y},D}(ni);re.prototype.bytesPerElement=16,_r("StructArrayLayout2f1f2i16",re);var ue=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le,Te,Ce){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,Y,le,Te,Ce)},D.prototype.emplace=function(Y,le,Te,Ce,Ne){var Ze=12*Y,st=3*Y;return this.uint8[Ze+0]=le,this.uint8[Ze+1]=Te,this.float32[st+1]=Ce,this.float32[st+2]=Ne,Y},D}(ni);ue.prototype.bytesPerElement=12,_r("StructArrayLayout2ub2f12",ue);var xe=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le,Te){var Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,Y,le,Te)},D.prototype.emplace=function(Y,le,Te,Ce){var Ne=3*Y;return this.uint16[Ne+0]=le,this.uint16[Ne+1]=Te,this.uint16[Ne+2]=Ce,Y},D}(ni);xe.prototype.bytesPerElement=6,_r("StructArrayLayout3ui6",xe);var Le=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le,Te,Ce,Ne,Ze,st,_t,kt,It,Vt,Bt,nn,un,kn,bn,In){var Rn=this.length;return this.resize(Rn+1),this.emplace(Rn,Y,le,Te,Ce,Ne,Ze,st,_t,kt,It,Vt,Bt,nn,un,kn,bn,In)},D.prototype.emplace=function(Y,le,Te,Ce,Ne,Ze,st,_t,kt,It,Vt,Bt,nn,un,kn,bn,In,Rn){var Vn=24*Y,Jn=12*Y,nr=48*Y;return this.int16[Vn+0]=le,this.int16[Vn+1]=Te,this.uint16[Vn+2]=Ce,this.uint16[Vn+3]=Ne,this.uint32[Jn+2]=Ze,this.uint32[Jn+3]=st,this.uint32[Jn+4]=_t,this.uint16[Vn+10]=kt,this.uint16[Vn+11]=It,this.uint16[Vn+12]=Vt,this.float32[Jn+7]=Bt,this.float32[Jn+8]=nn,this.uint8[nr+36]=un,this.uint8[nr+37]=kn,this.uint8[nr+38]=bn,this.uint32[Jn+10]=In,this.int16[Vn+22]=Rn,Y},D}(ni);Le.prototype.bytesPerElement=48,_r("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Le);var De=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le,Te,Ce,Ne,Ze,st,_t,kt,It,Vt,Bt,nn,un,kn,bn,In,Rn,Vn,Jn,nr,dr,hr,yr,br,Dr,Sr,zr){var Lr=this.length;return this.resize(Lr+1),this.emplace(Lr,Y,le,Te,Ce,Ne,Ze,st,_t,kt,It,Vt,Bt,nn,un,kn,bn,In,Rn,Vn,Jn,nr,dr,hr,yr,br,Dr,Sr,zr)},D.prototype.emplace=function(Y,le,Te,Ce,Ne,Ze,st,_t,kt,It,Vt,Bt,nn,un,kn,bn,In,Rn,Vn,Jn,nr,dr,hr,yr,br,Dr,Sr,zr,Lr){var Mr=34*Y,Yr=17*Y;return this.int16[Mr+0]=le,this.int16[Mr+1]=Te,this.int16[Mr+2]=Ce,this.int16[Mr+3]=Ne,this.int16[Mr+4]=Ze,this.int16[Mr+5]=st,this.int16[Mr+6]=_t,this.int16[Mr+7]=kt,this.uint16[Mr+8]=It,this.uint16[Mr+9]=Vt,this.uint16[Mr+10]=Bt,this.uint16[Mr+11]=nn,this.uint16[Mr+12]=un,this.uint16[Mr+13]=kn,this.uint16[Mr+14]=bn,this.uint16[Mr+15]=In,this.uint16[Mr+16]=Rn,this.uint16[Mr+17]=Vn,this.uint16[Mr+18]=Jn,this.uint16[Mr+19]=nr,this.uint16[Mr+20]=dr,this.uint16[Mr+21]=hr,this.uint16[Mr+22]=yr,this.uint32[Yr+12]=br,this.float32[Yr+13]=Dr,this.float32[Yr+14]=Sr,this.float32[Yr+15]=zr,this.float32[Yr+16]=Lr,Y},D}(ni);De.prototype.bytesPerElement=68,_r("StructArrayLayout8i15ui1ul4f68",De);var Ue=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y){var le=this.length;return this.resize(le+1),this.emplace(le,Y)},D.prototype.emplace=function(Y,le){var Te=1*Y;return this.float32[Te+0]=le,Y},D}(ni);Ue.prototype.bytesPerElement=4,_r("StructArrayLayout1f4",Ue);var qe=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le,Te){var Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,Y,le,Te)},D.prototype.emplace=function(Y,le,Te,Ce){var Ne=3*Y;return this.int16[Ne+0]=le,this.int16[Ne+1]=Te,this.int16[Ne+2]=Ce,Y},D}(ni);qe.prototype.bytesPerElement=6,_r("StructArrayLayout3i6",qe);var $e=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le,Te){var Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,Y,le,Te)},D.prototype.emplace=function(Y,le,Te,Ce){var Ne=2*Y,Ze=4*Y;return this.uint32[Ne+0]=le,this.uint16[Ze+2]=Te,this.uint16[Ze+3]=Ce,Y},D}(ni);$e.prototype.bytesPerElement=8,_r("StructArrayLayout1ul2ui8",$e);var lt=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le){var Te=this.length;return this.resize(Te+1),this.emplace(Te,Y,le)},D.prototype.emplace=function(Y,le,Te){var Ce=2*Y;return this.uint16[Ce+0]=le,this.uint16[Ce+1]=Te,Y},D}(ni);lt.prototype.bytesPerElement=4,_r("StructArrayLayout2ui4",lt);var ft=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y){var le=this.length;return this.resize(le+1),this.emplace(le,Y)},D.prototype.emplace=function(Y,le){var Te=1*Y;return this.uint16[Te+0]=le,Y},D}(ni);ft.prototype.bytesPerElement=2,_r("StructArrayLayout1ui2",ft);var wt=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le,Te,Ce){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,Y,le,Te,Ce)},D.prototype.emplace=function(Y,le,Te,Ce,Ne){var Ze=4*Y;return this.float32[Ze+0]=le,this.float32[Ze+1]=Te,this.float32[Ze+2]=Ce,this.float32[Ze+3]=Ne,Y},D}(ni);wt.prototype.bytesPerElement=16,_r("StructArrayLayout4f16",wt);var Et=function(A){function D(){A.apply(this,arguments)}A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D;var Y={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return Y.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},Y.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},Y.x1.get=function(){return this._structArray.int16[this._pos2+2]},Y.y1.get=function(){return this._structArray.int16[this._pos2+3]},Y.x2.get=function(){return this._structArray.int16[this._pos2+4]},Y.y2.get=function(){return this._structArray.int16[this._pos2+5]},Y.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Y.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},Y.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Y.anchorPoint.get=function(){return new t(this.anchorPointX,this.anchorPointY)},Object.defineProperties(D.prototype,Y),D}(Ta);Et.prototype.size=20;var At=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.get=function(Y){return new Et(this,Y)},D}(V);_r("CollisionBoxArray",At);var Dt=function(A){function D(){A.apply(this,arguments)}A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D;var Y={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return Y.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Y.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Y.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Y.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},Y.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},Y.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Y.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},Y.segment.get=function(){return this._structArray.uint16[this._pos2+10]},Y.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},Y.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},Y.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},Y.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},Y.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},Y.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},Y.placedOrientation.set=function(le){this._structArray.uint8[this._pos1+37]=le},Y.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},Y.hidden.set=function(le){this._structArray.uint8[this._pos1+38]=le},Y.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},Y.crossTileID.set=function(le){this._structArray.uint32[this._pos4+10]=le},Y.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(D.prototype,Y),D}(Ta);Dt.prototype.size=48;var Lt=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.get=function(Y){return new Dt(this,Y)},D}(Le);_r("PlacedSymbolArray",Lt);var Wt=function(A){function D(){A.apply(this,arguments)}A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D;var Y={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return Y.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Y.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Y.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},Y.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},Y.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},Y.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},Y.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},Y.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},Y.key.get=function(){return this._structArray.uint16[this._pos2+8]},Y.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Y.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},Y.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},Y.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},Y.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},Y.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},Y.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},Y.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},Y.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},Y.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},Y.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},Y.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},Y.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},Y.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},Y.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},Y.crossTileID.set=function(le){this._structArray.uint32[this._pos4+12]=le},Y.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},Y.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},Y.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},Y.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(D.prototype,Y),D}(Ta);Wt.prototype.size=68;var Ht=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.get=function(Y){return new Wt(this,Y)},D}(De);_r("SymbolInstanceArray",Ht);var jt=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.getoffsetX=function(Y){return this.float32[1*Y+0]},D}(Ue);_r("GlyphOffsetArray",jt);var hn=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.getx=function(Y){return this.int16[3*Y+0]},D.prototype.gety=function(Y){return this.int16[3*Y+1]},D.prototype.gettileUnitDistanceFromAnchor=function(Y){return this.int16[3*Y+2]},D}(qe);_r("SymbolLineVertexArray",hn);var vn=function(A){function D(){A.apply(this,arguments)}A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D;var Y={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return Y.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},Y.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Y.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(D.prototype,Y),D}(Ta);vn.prototype.size=8;var An=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.get=function(Y){return new vn(this,Y)},D}($e);_r("FeatureIndexArray",An);var Ln=hi([{name:"a_pos",components:2,type:"Int16"}],4).members,jn=function(A){A===void 0&&(A=[]),this.segments=A};function tr(A,D){return 256*(A=u(Math.floor(A),0,255))+u(Math.floor(D),0,255)}jn.prototype.prepareSegment=function(A,D,Y,le){var Te=this.segments[this.segments.length-1];return A>jn.MAX_VERTEX_ARRAY_LENGTH&&E("Max vertices per segment is "+jn.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+A),(!Te||Te.vertexLength+A>jn.MAX_VERTEX_ARRAY_LENGTH||Te.sortKey!==le)&&(Te={vertexOffset:D.length,primitiveOffset:Y.length,vertexLength:0,primitiveLength:0},le!==void 0&&(Te.sortKey=le),this.segments.push(Te)),Te},jn.prototype.get=function(){return this.segments},jn.prototype.destroy=function(){for(var A=0,D=this.segments;A<D.length;A+=1){var Y=D[A];for(var le in Y.vaos)Y.vaos[le].destroy()}},jn.simpleSegment=function(A,D,Y,le){return new jn([{vertexOffset:A,primitiveOffset:D,vertexLength:Y,primitiveLength:le,vaos:{},sortKey:0}])},jn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,_r("SegmentVector",jn);var cr=hi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Hn=T(function(A){A.exports=function(D,Y){var le,Te,Ce,Ne,Ze,st,_t,kt;for(le=3&D.length,Te=D.length-le,Ce=Y,Ze=3432918353,st=461845907,kt=0;kt<Te;)_t=255&D.charCodeAt(kt)|(255&D.charCodeAt(++kt))<<8|(255&D.charCodeAt(++kt))<<16|(255&D.charCodeAt(++kt))<<24,++kt,Ce=27492+(65535&(Ne=5*(65535&(Ce=(Ce^=_t=(65535&(_t=(_t=(65535&_t)*Ze+(((_t>>>16)*Ze&65535)<<16)&4294967295)<<15|_t>>>17))*st+(((_t>>>16)*st&65535)<<16)&4294967295)<<13|Ce>>>19))+((5*(Ce>>>16)&65535)<<16)&4294967295))+((58964+(Ne>>>16)&65535)<<16);switch(_t=0,le){case 3:_t^=(255&D.charCodeAt(kt+2))<<16;case 2:_t^=(255&D.charCodeAt(kt+1))<<8;case 1:Ce^=_t=(65535&(_t=(_t=(65535&(_t^=255&D.charCodeAt(kt)))*Ze+(((_t>>>16)*Ze&65535)<<16)&4294967295)<<15|_t>>>17))*st+(((_t>>>16)*st&65535)<<16)&4294967295}return Ce^=D.length,Ce=2246822507*(65535&(Ce^=Ce>>>16))+((2246822507*(Ce>>>16)&65535)<<16)&4294967295,Ce=3266489909*(65535&(Ce^=Ce>>>13))+((3266489909*(Ce>>>16)&65535)<<16)&4294967295,(Ce^=Ce>>>16)>>>0}}),or=T(function(A){A.exports=function(D,Y){for(var le,Te=D.length,Ce=Y^Te,Ne=0;Te>=4;)le=1540483477*(65535&(le=255&D.charCodeAt(Ne)|(255&D.charCodeAt(++Ne))<<8|(255&D.charCodeAt(++Ne))<<16|(255&D.charCodeAt(++Ne))<<24))+((1540483477*(le>>>16)&65535)<<16),Ce=1540483477*(65535&Ce)+((1540483477*(Ce>>>16)&65535)<<16)^(le=1540483477*(65535&(le^=le>>>24))+((1540483477*(le>>>16)&65535)<<16)),Te-=4,++Ne;switch(Te){case 3:Ce^=(255&D.charCodeAt(Ne+2))<<16;case 2:Ce^=(255&D.charCodeAt(Ne+1))<<8;case 1:Ce=1540483477*(65535&(Ce^=255&D.charCodeAt(Ne)))+((1540483477*(Ce>>>16)&65535)<<16)}return Ce=1540483477*(65535&(Ce^=Ce>>>13))+((1540483477*(Ce>>>16)&65535)<<16),(Ce^=Ce>>>15)>>>0}}),vr=Hn,Ar=Hn,er=or;vr.murmur3=Ar,vr.murmur2=er;var ar=function(){this.ids=[],this.positions=[],this.indexed=!1};ar.prototype.add=function(A,D,Y,le){this.ids.push(fr(A)),this.positions.push(D,Y,le)},ar.prototype.getPositions=function(A){for(var D=fr(A),Y=0,le=this.ids.length-1;Y<le;){var Te=Y+le>>1;this.ids[Te]>=D?le=Te:Y=Te+1}for(var Ce=[];this.ids[Y]===D;){var Ne=this.positions[3*Y],Ze=this.positions[3*Y+1],st=this.positions[3*Y+2];Ce.push({index:Ne,start:Ze,end:st}),Y++}return Ce},ar.serialize=function(A,D){var Y=new Float64Array(A.ids),le=new Uint32Array(A.positions);return wr(Y,le,0,Y.length-1),D&&D.push(Y.buffer,le.buffer),{ids:Y,positions:le}},ar.deserialize=function(A){var D=new ar;return D.ids=A.ids,D.positions=A.positions,D.indexed=!0,D};var xr=Math.pow(2,53)-1;function fr(A){var D=+A;return!isNaN(D)&&D<=xr?D:vr(String(A))}function wr(A,D,Y,le){for(;Y<le;){for(var Te=A[Y+le>>1],Ce=Y-1,Ne=le+1;;){do Ce++;while(A[Ce]<Te);do Ne--;while(A[Ne]>Te);if(Ce>=Ne)break;Er(A,Ce,Ne),Er(D,3*Ce,3*Ne),Er(D,3*Ce+1,3*Ne+1),Er(D,3*Ce+2,3*Ne+2)}Ne-Y<le-Ne?(wr(A,D,Y,Ne),Y=Ne+1):(wr(A,D,Ne+1,le),le=Ne)}}function Er(A,D,Y){var le=A[D];A[D]=A[Y],A[Y]=le}_r("FeaturePositionMap",ar);var Rr=function(A,D){this.gl=A.gl,this.location=D},Fr=function(A){function D(Y,le){A.call(this,Y,le),this.current=0}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.set=function(Y){this.current!==Y&&(this.current=Y,this.gl.uniform1i(this.location,Y))},D}(Rr),jr=function(A){function D(Y,le){A.call(this,Y,le),this.current=0}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.set=function(Y){this.current!==Y&&(this.current=Y,this.gl.uniform1f(this.location,Y))},D}(Rr),qr=function(A){function D(Y,le){A.call(this,Y,le),this.current=[0,0]}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.set=function(Y){Y[0]===this.current[0]&&Y[1]===this.current[1]||(this.current=Y,this.gl.uniform2f(this.location,Y[0],Y[1]))},D}(Rr),ui=function(A){function D(Y,le){A.call(this,Y,le),this.current=[0,0,0]}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.set=function(Y){Y[0]===this.current[0]&&Y[1]===this.current[1]&&Y[2]===this.current[2]||(this.current=Y,this.gl.uniform3f(this.location,Y[0],Y[1],Y[2]))},D}(Rr),ki=function(A){function D(Y,le){A.call(this,Y,le),this.current=[0,0,0,0]}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.set=function(Y){Y[0]===this.current[0]&&Y[1]===this.current[1]&&Y[2]===this.current[2]&&Y[3]===this.current[3]||(this.current=Y,this.gl.uniform4f(this.location,Y[0],Y[1],Y[2],Y[3]))},D}(Rr),ra=function(A){function D(Y,le){A.call(this,Y,le),this.current=yn.transparent}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.set=function(Y){Y.r===this.current.r&&Y.g===this.current.g&&Y.b===this.current.b&&Y.a===this.current.a||(this.current=Y,this.gl.uniform4f(this.location,Y.r,Y.g,Y.b,Y.a))},D}(Rr),ji=new Float32Array(16),Ki=function(A){function D(Y,le){A.call(this,Y,le),this.current=ji}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.set=function(Y){if(Y[12]!==this.current[12]||Y[0]!==this.current[0])return this.current=Y,void this.gl.uniformMatrix4fv(this.location,!1,Y);for(var le=1;le<16;le++)if(Y[le]!==this.current[le]){this.current=Y,this.gl.uniformMatrix4fv(this.location,!1,Y);break}},D}(Rr);function pi(A){return[tr(255*A.r,255*A.g),tr(255*A.b,255*A.a)]}var Gr=function(A,D,Y){this.value=A,this.uniformNames=D.map(function(le){return"u_"+le}),this.type=Y};Gr.prototype.setUniform=function(A,D,Y){A.set(Y.constantOr(this.value))},Gr.prototype.getBinding=function(A,D,Y){return this.type==="color"?new ra(A,D):new jr(A,D)};var xi=function(A,D){this.uniformNames=D.map(function(Y){return"u_"+Y}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};xi.prototype.setConstantPatternPositions=function(A,D){this.pixelRatioFrom=D.pixelRatio,this.pixelRatioTo=A.pixelRatio,this.patternFrom=D.tlbr,this.patternTo=A.tlbr},xi.prototype.setUniform=function(A,D,Y,le){var Te=le==="u_pattern_to"?this.patternTo:le==="u_pattern_from"?this.patternFrom:le==="u_pixel_ratio_to"?this.pixelRatioTo:le==="u_pixel_ratio_from"?this.pixelRatioFrom:null;Te&&A.set(Te)},xi.prototype.getBinding=function(A,D,Y){return Y.substr(0,9)==="u_pattern"?new ki(A,D):new jr(A,D)};var ri=function(A,D,Y,le){this.expression=A,this.type=Y,this.maxValue=0,this.paintVertexAttributes=D.map(function(Te){return{name:"a_"+Te,type:"Float32",components:Y==="color"?2:1,offset:0}}),this.paintVertexArray=new le};ri.prototype.populatePaintArray=function(A,D,Y,le,Te){var Ce=this.paintVertexArray.length,Ne=this.expression.evaluate(new Vr(0),D,{},le,[],Te);this.paintVertexArray.resize(A),this._setPaintValue(Ce,A,Ne)},ri.prototype.updatePaintArray=function(A,D,Y,le){var Te=this.expression.evaluate({zoom:0},Y,le);this._setPaintValue(A,D,Te)},ri.prototype._setPaintValue=function(A,D,Y){if(this.type==="color")for(var le=pi(Y),Te=A;Te<D;Te++)this.paintVertexArray.emplace(Te,le[0],le[1]);else{for(var Ce=A;Ce<D;Ce++)this.paintVertexArray.emplace(Ce,Y);this.maxValue=Math.max(this.maxValue,Math.abs(Y))}},ri.prototype.upload=function(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ri.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Xr=function(A,D,Y,le,Te,Ce){this.expression=A,this.uniformNames=D.map(function(Ne){return"u_"+Ne+"_t"}),this.type=Y,this.useIntegerZoom=le,this.zoom=Te,this.maxValue=0,this.paintVertexAttributes=D.map(function(Ne){return{name:"a_"+Ne,type:"Float32",components:Y==="color"?4:2,offset:0}}),this.paintVertexArray=new Ce};Xr.prototype.populatePaintArray=function(A,D,Y,le,Te){var Ce=this.expression.evaluate(new Vr(this.zoom),D,{},le,[],Te),Ne=this.expression.evaluate(new Vr(this.zoom+1),D,{},le,[],Te),Ze=this.paintVertexArray.length;this.paintVertexArray.resize(A),this._setPaintValue(Ze,A,Ce,Ne)},Xr.prototype.updatePaintArray=function(A,D,Y,le){var Te=this.expression.evaluate({zoom:this.zoom},Y,le),Ce=this.expression.evaluate({zoom:this.zoom+1},Y,le);this._setPaintValue(A,D,Te,Ce)},Xr.prototype._setPaintValue=function(A,D,Y,le){if(this.type==="color")for(var Te=pi(Y),Ce=pi(le),Ne=A;Ne<D;Ne++)this.paintVertexArray.emplace(Ne,Te[0],Te[1],Ce[0],Ce[1]);else{for(var Ze=A;Ze<D;Ze++)this.paintVertexArray.emplace(Ze,Y,le);this.maxValue=Math.max(this.maxValue,Math.abs(Y),Math.abs(le))}},Xr.prototype.upload=function(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Xr.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Xr.prototype.setUniform=function(A,D){var Y=this.useIntegerZoom?Math.floor(D.zoom):D.zoom,le=u(this.expression.interpolationFactor(Y,this.zoom,this.zoom+1),0,1);A.set(le)},Xr.prototype.getBinding=function(A,D,Y){return new jr(A,D)};var bi=function(A,D,Y,le,Te,Ce){this.expression=A,this.type=D,this.useIntegerZoom=Y,this.zoom=le,this.layerId=Ce,this.zoomInPaintVertexArray=new Te,this.zoomOutPaintVertexArray=new Te};bi.prototype.populatePaintArray=function(A,D,Y){var le=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(A),this.zoomOutPaintVertexArray.resize(A),this._setPaintValues(le,A,D.patterns&&D.patterns[this.layerId],Y)},bi.prototype.updatePaintArray=function(A,D,Y,le,Te){this._setPaintValues(A,D,Y.patterns&&Y.patterns[this.layerId],Te)},bi.prototype._setPaintValues=function(A,D,Y,le){if(le&&Y){var Te=Y.min,Ce=Y.mid,Ne=Y.max,Ze=le[Te],st=le[Ce],_t=le[Ne];if(Ze&&st&&_t)for(var kt=A;kt<D;kt++)this.zoomInPaintVertexArray.emplace(kt,st.tl[0],st.tl[1],st.br[0],st.br[1],Ze.tl[0],Ze.tl[1],Ze.br[0],Ze.br[1],st.pixelRatio,Ze.pixelRatio),this.zoomOutPaintVertexArray.emplace(kt,st.tl[0],st.tl[1],st.br[0],st.br[1],_t.tl[0],_t.tl[1],_t.br[0],_t.br[1],st.pixelRatio,_t.pixelRatio)}},bi.prototype.upload=function(A){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=A.createVertexBuffer(this.zoomInPaintVertexArray,cr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=A.createVertexBuffer(this.zoomOutPaintVertexArray,cr.members,this.expression.isStateDependent))},bi.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ai=function(A,D,Y){this.binders={},this._buffers=[];var le=[];for(var Te in A.paint._values)if(Y(Te)){var Ce=A.paint.get(Te);if(Ce instanceof li&&ho(Ce.property.specification)){var Ne=vs(Te,A.type),Ze=Ce.value,st=Ce.property.specification.type,_t=Ce.property.useIntegerZoom,kt=Ce.property.specification["property-type"],It=kt==="cross-faded"||kt==="cross-faded-data-driven";if(Ze.kind==="constant")this.binders[Te]=It?new xi(Ze.value,Ne):new Gr(Ze.value,Ne,st),le.push("/u_"+Te);else if(Ze.kind==="source"||It){var Vt=ms(Te,st,"source");this.binders[Te]=It?new bi(Ze,st,_t,D,Vt,A.id):new ri(Ze,Ne,st,Vt),le.push("/a_"+Te)}else{var Bt=ms(Te,st,"composite");this.binders[Te]=new Xr(Ze,Ne,st,_t,D,Bt),le.push("/z_"+Te)}}}this.cacheKey=le.sort().join("")};Ai.prototype.getMaxValue=function(A){var D=this.binders[A];return D instanceof ri||D instanceof Xr?D.maxValue:0},Ai.prototype.populatePaintArrays=function(A,D,Y,le,Te){for(var Ce in this.binders){var Ne=this.binders[Ce];(Ne instanceof ri||Ne instanceof Xr||Ne instanceof bi)&&Ne.populatePaintArray(A,D,Y,le,Te)}},Ai.prototype.setConstantPatternPositions=function(A,D){for(var Y in this.binders){var le=this.binders[Y];le instanceof xi&&le.setConstantPatternPositions(A,D)}},Ai.prototype.updatePaintArrays=function(A,D,Y,le,Te){var Ce=!1;for(var Ne in A)for(var Ze=0,st=D.getPositions(Ne);Ze<st.length;Ze+=1){var _t=st[Ze],kt=Y.feature(_t.index);for(var It in this.binders){var Vt=this.binders[It];if((Vt instanceof ri||Vt instanceof Xr||Vt instanceof bi)&&Vt.expression.isStateDependent===!0){var Bt=le.paint.get(It);Vt.expression=Bt.value,Vt.updatePaintArray(_t.start,_t.end,kt,A[Ne],Te),Ce=!0}}}return Ce},Ai.prototype.defines=function(){var A=[];for(var D in this.binders){var Y=this.binders[D];(Y instanceof Gr||Y instanceof xi)&&A.push.apply(A,Y.uniformNames.map(function(le){return"#define HAS_UNIFORM_"+le}))}return A},Ai.prototype.getBinderAttributes=function(){var A=[];for(var D in this.binders){var Y=this.binders[D];if(Y instanceof ri||Y instanceof Xr)for(var le=0;le<Y.paintVertexAttributes.length;le++)A.push(Y.paintVertexAttributes[le].name);else if(Y instanceof bi)for(var Te=0;Te<cr.members.length;Te++)A.push(cr.members[Te].name)}return A},Ai.prototype.getBinderUniforms=function(){var A=[];for(var D in this.binders){var Y=this.binders[D];if(Y instanceof Gr||Y instanceof xi||Y instanceof Xr)for(var le=0,Te=Y.uniformNames;le<Te.length;le+=1){var Ce=Te[le];A.push(Ce)}}return A},Ai.prototype.getPaintVertexBuffers=function(){return this._buffers},Ai.prototype.getUniforms=function(A,D){var Y=[];for(var le in this.binders){var Te=this.binders[le];if(Te instanceof Gr||Te instanceof xi||Te instanceof Xr)for(var Ce=0,Ne=Te.uniformNames;Ce<Ne.length;Ce+=1){var Ze=Ne[Ce];if(D[Ze]){var st=Te.getBinding(A,D[Ze],Ze);Y.push({name:Ze,property:le,binding:st})}}}return Y},Ai.prototype.setUniforms=function(A,D,Y,le){for(var Te=0,Ce=D;Te<Ce.length;Te+=1){var Ne=Ce[Te],Ze=Ne.name,st=Ne.property,_t=Ne.binding;this.binders[st].setUniform(_t,le,Y.get(st),Ze)}},Ai.prototype.updatePaintBuffers=function(A){for(var D in this._buffers=[],this.binders){var Y=this.binders[D];if(A&&Y instanceof bi){var le=A.fromScale===2?Y.zoomInPaintVertexBuffer:Y.zoomOutPaintVertexBuffer;le&&this._buffers.push(le)}else(Y instanceof ri||Y instanceof Xr)&&Y.paintVertexBuffer&&this._buffers.push(Y.paintVertexBuffer)}},Ai.prototype.upload=function(A){for(var D in this.binders){var Y=this.binders[D];(Y instanceof ri||Y instanceof Xr||Y instanceof bi)&&Y.upload(A)}this.updatePaintBuffers()},Ai.prototype.destroy=function(){for(var A in this.binders){var D=this.binders[A];(D instanceof ri||D instanceof Xr||D instanceof bi)&&D.destroy()}};var Ii=function(A,D,Y){Y===void 0&&(Y=function(){return!0}),this.programConfigurations={};for(var le=0,Te=A;le<Te.length;le+=1){var Ce=Te[le];this.programConfigurations[Ce.id]=new Ai(Ce,D,Y)}this.needsUpload=!1,this._featureMap=new ar,this._bufferOffset=0};function vs(A,D){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[A]||[A.replace(D+"-","").replace(/-/g,"_")]}function ms(A,D,Y){var le={color:{source:at,composite:wt},number:{source:Ue,composite:at}},Te=function(Ce){return{"line-pattern":{source:B,composite:B},"fill-pattern":{source:B,composite:B},"fill-extrusion-pattern":{source:B,composite:B}}[Ce]}(A);return Te&&Te[Y]||le[D][Y]}Ii.prototype.populatePaintArrays=function(A,D,Y,le,Te,Ce){for(var Ne in this.programConfigurations)this.programConfigurations[Ne].populatePaintArrays(A,D,le,Te,Ce);D.id!==void 0&&this._featureMap.add(D.id,Y,this._bufferOffset,A),this._bufferOffset=A,this.needsUpload=!0},Ii.prototype.updatePaintArrays=function(A,D,Y,le){for(var Te=0,Ce=Y;Te<Ce.length;Te+=1){var Ne=Ce[Te];this.needsUpload=this.programConfigurations[Ne.id].updatePaintArrays(A,this._featureMap,D,Ne,le)||this.needsUpload}},Ii.prototype.get=function(A){return this.programConfigurations[A]},Ii.prototype.upload=function(A){if(this.needsUpload){for(var D in this.programConfigurations)this.programConfigurations[D].upload(A);this.needsUpload=!1}},Ii.prototype.destroy=function(){for(var A in this.programConfigurations)this.programConfigurations[A].destroy()},_r("ConstantBinder",Gr),_r("CrossFadedConstantBinder",xi),_r("SourceExpressionBinder",ri),_r("CrossFadedCompositeBinder",bi),_r("CompositeExpressionBinder",Xr),_r("ProgramConfiguration",Ai,{omit:["_buffers"]}),_r("ProgramConfigurationSet",Ii);var Zr=8192,Gs=Math.pow(2,14)-1,Cs=-Gs-1;function bo(A){for(var D=Zr/A.extent,Y=A.loadGeometry(),le=0;le<Y.length;le++)for(var Te=Y[le],Ce=0;Ce<Te.length;Ce++){var Ne=Te[Ce],Ze=Math.round(Ne.x*D),st=Math.round(Ne.y*D);Ne.x=u(Ze,Cs,Gs),Ne.y=u(st,Cs,Gs),(Ze<Ne.x||Ze>Ne.x+1||st<Ne.y||st>Ne.y+1)&&E("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return Y}function _i(A,D){return{type:A.type,id:A.id,properties:A.properties,geometry:D?bo(A):[]}}function ka(A,D,Y,le,Te){A.emplaceBack(2*D+(le+1)/2,2*Y+(Te+1)/2)}var Wi=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(D){return D.id}),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new jo,this.indexArray=new xe,this.segments=new jn,this.programConfigurations=new Ii(A.layers,A.zoom),this.stateDependentLayerIds=this.layers.filter(function(D){return D.isStateDependent()}).map(function(D){return D.id})};function Al(A,D){for(var Y=0;Y<A.length;Y++)if(Ws(D,A[Y]))return!0;for(var le=0;le<D.length;le++)if(Ws(A,D[le]))return!0;return!!hl(A,D)}function yc(A,D,Y){return!!Ws(A,D)||!!pl(D,A,Y)}function Pu(A,D){if(A.length===1)return zu(D,A[0]);for(var Y=0;Y<D.length;Y++)for(var le=D[Y],Te=0;Te<le.length;Te++)if(Ws(A,le[Te]))return!0;for(var Ce=0;Ce<A.length;Ce++)if(zu(D,A[Ce]))return!0;for(var Ne=0;Ne<D.length;Ne++)if(hl(A,D[Ne]))return!0;return!1}function xc(A,D,Y){if(A.length>1){if(hl(A,D))return!0;for(var le=0;le<D.length;le++)if(pl(D[le],A,Y))return!0}for(var Te=0;Te<A.length;Te++)if(pl(A[Te],D,Y))return!0;return!1}function hl(A,D){if(A.length===0||D.length===0)return!1;for(var Y=0;Y<A.length-1;Y++)for(var le=A[Y],Te=A[Y+1],Ce=0;Ce<D.length-1;Ce++)if(bc(le,Te,D[Ce],D[Ce+1]))return!0;return!1}function bc(A,D,Y,le){return C(A,Y,le)!==C(D,Y,le)&&C(A,D,Y)!==C(A,D,le)}function pl(A,D,Y){var le=Y*Y;if(D.length===1)return A.distSqr(D[0])<le;for(var Te=1;Te<D.length;Te++)if(Iu(A,D[Te-1],D[Te])<le)return!0;return!1}function Iu(A,D,Y){var le=D.distSqr(Y);if(le===0)return A.distSqr(D);var Te=((A.x-D.x)*(Y.x-D.x)+(A.y-D.y)*(Y.y-D.y))/le;return Te<0?A.distSqr(D):Te>1?A.distSqr(Y):A.distSqr(Y.sub(D)._mult(Te)._add(D))}function zu(A,D){for(var Y,le,Te,Ce=!1,Ne=0;Ne<A.length;Ne++)for(var Ze=0,st=(Y=A[Ne]).length-1;Ze<Y.length;st=Ze++)le=Y[Ze],Te=Y[st],le.y>D.y!=Te.y>D.y&&D.x<(Te.x-le.x)*(D.y-le.y)/(Te.y-le.y)+le.x&&(Ce=!Ce);return Ce}function Ws(A,D){for(var Y=!1,le=0,Te=A.length-1;le<A.length;Te=le++){var Ce=A[le],Ne=A[Te];Ce.y>D.y!=Ne.y>D.y&&D.x<(Ne.x-Ce.x)*(D.y-Ce.y)/(Ne.y-Ce.y)+Ce.x&&(Y=!Y)}return Y}function jh(A,D,Y){var le=Y[0],Te=Y[2];if(A.x<le.x&&D.x<le.x||A.x>Te.x&&D.x>Te.x||A.y<le.y&&D.y<le.y||A.y>Te.y&&D.y>Te.y)return!1;var Ce=C(A,D,Y[0]);return Ce!==C(A,D,Y[1])||Ce!==C(A,D,Y[2])||Ce!==C(A,D,Y[3])}function iu(A,D,Y){var le=D.paint.get(A).value;return le.kind==="constant"?le.value:Y.programConfigurations.get(D.id).getMaxValue(A)}function Du(A){return Math.sqrt(A[0]*A[0]+A[1]*A[1])}function Ru(A,D,Y,le,Te){if(!D[0]&&!D[1])return A;var Ce=t.convert(D)._mult(Te);Y==="viewport"&&Ce._rotate(-le);for(var Ne=[],Ze=0;Ze<A.length;Ze++){var st=A[Ze];Ne.push(st.sub(Ce))}return Ne}Wi.prototype.populate=function(A,D,Y){var le=this.layers[0],Te=[],Ce=null;le.type==="circle"&&(Ce=le.layout.get("circle-sort-key"));for(var Ne=0,Ze=A;Ne<Ze.length;Ne+=1){var st=Ze[Ne],_t=st.feature,kt=st.id,It=st.index,Vt=st.sourceLayerIndex,Bt=this.layers[0]._featureFilter.needGeometry,nn=_i(_t,Bt);if(this.layers[0]._featureFilter.filter(new Vr(this.zoom),nn,Y)){var un=Ce?Ce.evaluate(nn,{},Y):void 0,kn={id:kt,properties:_t.properties,type:_t.type,sourceLayerIndex:Vt,index:It,geometry:Bt?nn.geometry:bo(_t),patterns:{},sortKey:un};Te.push(kn)}}Ce&&Te.sort(function(yr,br){return yr.sortKey-br.sortKey});for(var bn=0,In=Te;bn<In.length;bn+=1){var Rn=In[bn],Vn=Rn,Jn=Vn.geometry,nr=Vn.index,dr=Vn.sourceLayerIndex,hr=A[nr].feature;this.addFeature(Rn,Jn,nr,Y),D.featureIndex.insert(hr,Jn,nr,dr,this.index)}},Wi.prototype.update=function(A,D,Y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,D,this.stateDependentLayers,Y)},Wi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Wi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Wi.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Ln),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},Wi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Wi.prototype.addFeature=function(A,D,Y,le){for(var Te=0,Ce=D;Te<Ce.length;Te+=1)for(var Ne=0,Ze=Ce[Te];Ne<Ze.length;Ne+=1){var st=Ze[Ne],_t=st.x,kt=st.y;if(!(_t<0||_t>=Zr||kt<0||kt>=Zr)){var It=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,A.sortKey),Vt=It.vertexLength;ka(this.layoutVertexArray,_t,kt,-1,-1),ka(this.layoutVertexArray,_t,kt,1,-1),ka(this.layoutVertexArray,_t,kt,1,1),ka(this.layoutVertexArray,_t,kt,-1,1),this.indexArray.emplaceBack(Vt,Vt+1,Vt+2),this.indexArray.emplaceBack(Vt,Vt+3,Vt+2),It.vertexLength+=4,It.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,Y,{},le)},_r("CircleBucket",Wi,{omit:["layers"]});var Uh=new Ei({"circle-sort-key":new Cr(Re.layout_circle["circle-sort-key"])}),Vh={paint:new Ei({"circle-radius":new Cr(Re.paint_circle["circle-radius"]),"circle-color":new Cr(Re.paint_circle["circle-color"]),"circle-blur":new Cr(Re.paint_circle["circle-blur"]),"circle-opacity":new Cr(Re.paint_circle["circle-opacity"]),"circle-translate":new kr(Re.paint_circle["circle-translate"]),"circle-translate-anchor":new kr(Re.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new kr(Re.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new kr(Re.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Cr(Re.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Cr(Re.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Cr(Re.paint_circle["circle-stroke-opacity"])}),layout:Uh},Uo=typeof Float32Array<"u"?Float32Array:Array;function _c(A){return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=1,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=1,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}function sf(A,D,Y){var le=D[0],Te=D[1],Ce=D[2],Ne=D[3],Ze=D[4],st=D[5],_t=D[6],kt=D[7],It=D[8],Vt=D[9],Bt=D[10],nn=D[11],un=D[12],kn=D[13],bn=D[14],In=D[15],Rn=Y[0],Vn=Y[1],Jn=Y[2],nr=Y[3];return A[0]=Rn*le+Vn*Ze+Jn*It+nr*un,A[1]=Rn*Te+Vn*st+Jn*Vt+nr*kn,A[2]=Rn*Ce+Vn*_t+Jn*Bt+nr*bn,A[3]=Rn*Ne+Vn*kt+Jn*nn+nr*In,Rn=Y[4],Vn=Y[5],Jn=Y[6],nr=Y[7],A[4]=Rn*le+Vn*Ze+Jn*It+nr*un,A[5]=Rn*Te+Vn*st+Jn*Vt+nr*kn,A[6]=Rn*Ce+Vn*_t+Jn*Bt+nr*bn,A[7]=Rn*Ne+Vn*kt+Jn*nn+nr*In,Rn=Y[8],Vn=Y[9],Jn=Y[10],nr=Y[11],A[8]=Rn*le+Vn*Ze+Jn*It+nr*un,A[9]=Rn*Te+Vn*st+Jn*Vt+nr*kn,A[10]=Rn*Ce+Vn*_t+Jn*Bt+nr*bn,A[11]=Rn*Ne+Vn*kt+Jn*nn+nr*In,Rn=Y[12],Vn=Y[13],Jn=Y[14],nr=Y[15],A[12]=Rn*le+Vn*Ze+Jn*It+nr*un,A[13]=Rn*Te+Vn*st+Jn*Vt+nr*kn,A[14]=Rn*Ce+Vn*_t+Jn*Bt+nr*bn,A[15]=Rn*Ne+Vn*kt+Jn*nn+nr*In,A}Math.hypot||(Math.hypot=function(){for(var A=arguments,D=0,Y=arguments.length;Y--;)D+=A[Y]*A[Y];return Math.sqrt(D)});var qh=sf,Fu,Hh=function(A,D,Y){return A[0]=D[0]-Y[0],A[1]=D[1]-Y[1],A[2]=D[2]-Y[2],A};function Bu(A,D,Y){var le=D[0],Te=D[1],Ce=D[2],Ne=D[3];return A[0]=Y[0]*le+Y[4]*Te+Y[8]*Ce+Y[12]*Ne,A[1]=Y[1]*le+Y[5]*Te+Y[9]*Ce+Y[13]*Ne,A[2]=Y[2]*le+Y[6]*Te+Y[10]*Ce+Y[14]*Ne,A[3]=Y[3]*le+Y[7]*Te+Y[11]*Ce+Y[15]*Ne,A}Fu=new Uo(3),Uo!=Float32Array&&(Fu[0]=0,Fu[1]=0,Fu[2]=0),function(){var A=new Uo(4);Uo!=Float32Array&&(A[0]=0,A[1]=0,A[2]=0,A[3]=0)}();var Gh=function(A){var D=A[0],Y=A[1];return D*D+Y*Y},Wh=(function(){var A=new Uo(2);Uo!=Float32Array&&(A[0]=0,A[1]=0)}(),function(A){function D(Y){A.call(this,Y,Vh)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.createBucket=function(Y){return new Wi(Y)},D.prototype.queryRadius=function(Y){var le=Y;return iu("circle-radius",this,le)+iu("circle-stroke-width",this,le)+Du(this.paint.get("circle-translate"))},D.prototype.queryIntersectsFeature=function(Y,le,Te,Ce,Ne,Ze,st,_t){for(var kt=Ru(Y,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Ze.angle,st),It=this.paint.get("circle-radius").evaluate(le,Te)+this.paint.get("circle-stroke-width").evaluate(le,Te),Vt=this.paint.get("circle-pitch-alignment")==="map",Bt=Vt?kt:function(dr,hr){return dr.map(function(yr){return lf(yr,hr)})}(kt,_t),nn=Vt?It*st:It,un=0,kn=Ce;un<kn.length;un+=1)for(var bn=0,In=kn[un];bn<In.length;bn+=1){var Rn=In[bn],Vn=Vt?Rn:lf(Rn,_t),Jn=nn,nr=Bu([],[Rn.x,Rn.y,0,1],_t);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Jn*=nr[3]/Ze.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Jn*=Ze.cameraToCenterDistance/nr[3]),yc(Bt,Vn,Jn))return!0}return!1},D}(Qr));function lf(A,D){var Y=Bu([],[A.x,A.y,0,1],D);return new t(Y[0]/Y[3],Y[1]/Y[3])}var uf=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D}(Wi);function wc(A,D,Y,le){var Te=D.width,Ce=D.height;if(le){if(le instanceof Uint8ClampedArray)le=new Uint8Array(le.buffer);else if(le.length!==Te*Ce*Y)throw new RangeError("mismatched image size")}else le=new Uint8Array(Te*Ce*Y);return A.width=Te,A.height=Ce,A.data=le,A}function cf(A,D,Y){var le=D.width,Te=D.height;if(le!==A.width||Te!==A.height){var Ce=wc({},{width:le,height:Te},Y);Tc(A,Ce,{x:0,y:0},{x:0,y:0},{width:Math.min(A.width,le),height:Math.min(A.height,Te)},Y),A.width=le,A.height=Te,A.data=Ce.data}}function Tc(A,D,Y,le,Te,Ce){if(Te.width===0||Te.height===0)return D;if(Te.width>A.width||Te.height>A.height||Y.x>A.width-Te.width||Y.y>A.height-Te.height)throw new RangeError("out of range source coordinates for image copy");if(Te.width>D.width||Te.height>D.height||le.x>D.width-Te.width||le.y>D.height-Te.height)throw new RangeError("out of range destination coordinates for image copy");for(var Ne=A.data,Ze=D.data,st=0;st<Te.height;st++)for(var _t=((Y.y+st)*A.width+Y.x)*Ce,kt=((le.y+st)*D.width+le.x)*Ce,It=0;It<Te.width*Ce;It++)Ze[kt+It]=Ne[_t+It];return D}_r("HeatmapBucket",uf,{omit:["layers"]});var Ml=function(A,D){wc(this,A,1,D)};Ml.prototype.resize=function(A){cf(this,A,1)},Ml.prototype.clone=function(){return new Ml({width:this.width,height:this.height},new Uint8Array(this.data))},Ml.copy=function(A,D,Y,le,Te){Tc(A,D,Y,le,Te,1)};var lo=function(A,D){wc(this,A,4,D)};lo.prototype.resize=function(A){cf(this,A,4)},lo.prototype.replace=function(A,D){D?this.data.set(A):A instanceof Uint8ClampedArray?this.data=new Uint8Array(A.buffer):this.data=A},lo.prototype.clone=function(){return new lo({width:this.width,height:this.height},new Uint8Array(this.data))},lo.copy=function(A,D,Y,le,Te){Tc(A,D,Y,le,Te,4)},_r("AlphaImage",Ml),_r("RGBAImage",lo);var Yh={paint:new Ei({"heatmap-radius":new Cr(Re.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Cr(Re.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new kr(Re.paint_heatmap["heatmap-intensity"]),"heatmap-color":new xo(Re.paint_heatmap["heatmap-color"]),"heatmap-opacity":new kr(Re.paint_heatmap["heatmap-opacity"])})};function ff(A){var D={},Y=A.resolution||256,le=A.clips?A.clips.length:1,Te=A.image||new lo({width:Y,height:le}),Ce=function(nn,un,kn){D[A.evaluationKey]=kn;var bn=A.expression.evaluate(D);Te.data[nn+un+0]=Math.floor(255*bn.r/bn.a),Te.data[nn+un+1]=Math.floor(255*bn.g/bn.a),Te.data[nn+un+2]=Math.floor(255*bn.b/bn.a),Te.data[nn+un+3]=Math.floor(255*bn.a)};if(A.clips)for(var Ne=0,Ze=0;Ne<le;++Ne,Ze+=4*Y)for(var st=0,_t=0;st<Y;st++,_t+=4){var kt=st/(Y-1),It=A.clips[Ne];Ce(Ze,_t,It.start*(1-kt)+It.end*kt)}else for(var Vt=0,Bt=0;Vt<Y;Vt++,Bt+=4)Ce(0,Bt,Vt/(Y-1));return Te}var Xh=function(A){function D(Y){A.call(this,Y,Yh),this._updateColorRamp()}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.createBucket=function(Y){return new uf(Y)},D.prototype._handleSpecialPaintPropertyUpdate=function(Y){Y==="heatmap-color"&&this._updateColorRamp()},D.prototype._updateColorRamp=function(){var Y=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=ff({expression:Y,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},D.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},D.prototype.queryRadius=function(){return 0},D.prototype.queryIntersectsFeature=function(){return!1},D.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},D}(Qr),Zh={paint:new Ei({"hillshade-illumination-direction":new kr(Re.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new kr(Re.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new kr(Re.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new kr(Re.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new kr(Re.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new kr(Re.paint_hillshade["hillshade-accent-color"])})},Kh=function(A){function D(Y){A.call(this,Y,Zh)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},D}(Qr),Jh=hi([{name:"a_pos",components:2,type:"Int16"}],4).members,kc=Nu,$h=Nu;function Nu(A,D,Y){Y=Y||2;var le,Te,Ce,Ne,Ze,st,_t,kt=D&&D.length,It=kt?D[0]*Y:A.length,Vt=hf(A,0,It,Y,!0),Bt=[];if(!Vt||Vt.next===Vt.prev)return Bt;if(kt&&(Vt=function(un,kn,bn,In){var Rn,Vn,Jn,nr=[];for(Rn=0,Vn=kn.length;Rn<Vn;Rn++)(Jn=hf(un,kn[Rn]*In,Rn<Vn-1?kn[Rn+1]*In:un.length,In,!1))===Jn.next&&(Jn.steiner=!0),nr.push(op(Jn));for(nr.sort(rp),Rn=0;Rn<nr.length;Rn++)ip(nr[Rn],bn),bn=dl(bn,bn.next);return bn}(A,D,Vt,Y)),A.length>80*Y){le=Ce=A[0],Te=Ne=A[1];for(var nn=Y;nn<It;nn+=Y)(Ze=A[nn])<le&&(le=Ze),(st=A[nn+1])<Te&&(Te=st),Ze>Ce&&(Ce=Ze),st>Ne&&(Ne=st);_t=(_t=Math.max(Ce-le,Ne-Te))!==0?1/_t:0}return au(Vt,Bt,Y,le,Te,_t),Bt}function hf(A,D,Y,le,Te){var Ce,Ne;if(Te===Sc(A,D,Y,le)>0)for(Ce=D;Ce<Y;Ce+=le)Ne=gf(Ce,A[Ce],A[Ce+1],Ne);else for(Ce=Y-le;Ce>=D;Ce-=le)Ne=gf(Ce,A[Ce],A[Ce+1],Ne);return Ne&&ju(Ne,Ne.next)&&(su(Ne),Ne=Ne.next),Ne}function dl(A,D){if(!A)return A;D||(D=A);var Y,le=A;do if(Y=!1,le.steiner||!ju(le,le.next)&&Ji(le.prev,le,le.next)!==0)le=le.next;else{if(su(le),(le=D=le.prev)===le.next)break;Y=!0}while(Y||le!==D);return D}function au(A,D,Y,le,Te,Ce,Ne){if(A){!Ne&&Ce&&function(kt,It,Vt,Bt){var nn=kt;do nn.z===null&&(nn.z=Ac(nn.x,nn.y,It,Vt,Bt)),nn.prevZ=nn.prev,nn.nextZ=nn.next,nn=nn.next;while(nn!==kt);nn.prevZ.nextZ=null,nn.prevZ=null,function(un){var kn,bn,In,Rn,Vn,Jn,nr,dr,hr=1;do{for(bn=un,un=null,Vn=null,Jn=0;bn;){for(Jn++,In=bn,nr=0,kn=0;kn<hr&&(nr++,In=In.nextZ);kn++);for(dr=hr;nr>0||dr>0&&In;)nr!==0&&(dr===0||!In||bn.z<=In.z)?(Rn=bn,bn=bn.nextZ,nr--):(Rn=In,In=In.nextZ,dr--),Vn?Vn.nextZ=Rn:un=Rn,Rn.prevZ=Vn,Vn=Rn;bn=In}Vn.nextZ=null,hr*=2}while(Jn>1)}(nn)}(A,le,Te,Ce);for(var Ze,st,_t=A;A.prev!==A.next;)if(Ze=A.prev,st=A.next,Ce?ep(A,le,Te,Ce):Qh(A))D.push(Ze.i/Y),D.push(A.i/Y),D.push(st.i/Y),su(A),A=st.next,_t=st.next;else if((A=st)===_t){Ne?Ne===1?au(A=tp(dl(A),D,Y),D,Y,le,Te,Ce,2):Ne===2&&np(A,D,Y,le,Te,Ce):au(dl(A),D,Y,le,Te,Ce,1);break}}}function Qh(A){var D=A.prev,Y=A,le=A.next;if(Ji(D,Y,le)>=0)return!1;for(var Te=A.next.next;Te!==A.prev;){if(Rl(D.x,D.y,Y.x,Y.y,le.x,le.y,Te.x,Te.y)&&Ji(Te.prev,Te,Te.next)>=0)return!1;Te=Te.next}return!0}function ep(A,D,Y,le){var Te=A.prev,Ce=A,Ne=A.next;if(Ji(Te,Ce,Ne)>=0)return!1;for(var Ze=Te.x<Ce.x?Te.x<Ne.x?Te.x:Ne.x:Ce.x<Ne.x?Ce.x:Ne.x,st=Te.y<Ce.y?Te.y<Ne.y?Te.y:Ne.y:Ce.y<Ne.y?Ce.y:Ne.y,_t=Te.x>Ce.x?Te.x>Ne.x?Te.x:Ne.x:Ce.x>Ne.x?Ce.x:Ne.x,kt=Te.y>Ce.y?Te.y>Ne.y?Te.y:Ne.y:Ce.y>Ne.y?Ce.y:Ne.y,It=Ac(Ze,st,D,Y,le),Vt=Ac(_t,kt,D,Y,le),Bt=A.prevZ,nn=A.nextZ;Bt&&Bt.z>=It&&nn&&nn.z<=Vt;){if(Bt!==A.prev&&Bt!==A.next&&Rl(Te.x,Te.y,Ce.x,Ce.y,Ne.x,Ne.y,Bt.x,Bt.y)&&Ji(Bt.prev,Bt,Bt.next)>=0||(Bt=Bt.prevZ,nn!==A.prev&&nn!==A.next&&Rl(Te.x,Te.y,Ce.x,Ce.y,Ne.x,Ne.y,nn.x,nn.y)&&Ji(nn.prev,nn,nn.next)>=0))return!1;nn=nn.nextZ}for(;Bt&&Bt.z>=It;){if(Bt!==A.prev&&Bt!==A.next&&Rl(Te.x,Te.y,Ce.x,Ce.y,Ne.x,Ne.y,Bt.x,Bt.y)&&Ji(Bt.prev,Bt,Bt.next)>=0)return!1;Bt=Bt.prevZ}for(;nn&&nn.z<=Vt;){if(nn!==A.prev&&nn!==A.next&&Rl(Te.x,Te.y,Ce.x,Ce.y,Ne.x,Ne.y,nn.x,nn.y)&&Ji(nn.prev,nn,nn.next)>=0)return!1;nn=nn.nextZ}return!0}function tp(A,D,Y){var le=A;do{var Te=le.prev,Ce=le.next.next;!ju(Te,Ce)&&pf(Te,le,le.next,Ce)&&ou(Te,Ce)&&ou(Ce,Te)&&(D.push(Te.i/Y),D.push(le.i/Y),D.push(Ce.i/Y),su(le),su(le.next),le=A=Ce),le=le.next}while(le!==A);return dl(le)}function np(A,D,Y,le,Te,Ce){var Ne=A;do{for(var Ze=Ne.next.next;Ze!==Ne.prev;){if(Ne.i!==Ze.i&&sp(Ne,Ze)){var st=df(Ne,Ze);return Ne=dl(Ne,Ne.next),st=dl(st,st.next),au(Ne,D,Y,le,Te,Ce),void au(st,D,Y,le,Te,Ce)}Ze=Ze.next}Ne=Ne.next}while(Ne!==A)}function rp(A,D){return A.x-D.x}function ip(A,D){if(D=function(le,Te){var Ce,Ne=Te,Ze=le.x,st=le.y,_t=-1/0;do{if(st<=Ne.y&&st>=Ne.next.y&&Ne.next.y!==Ne.y){var kt=Ne.x+(st-Ne.y)*(Ne.next.x-Ne.x)/(Ne.next.y-Ne.y);if(kt<=Ze&&kt>_t){if(_t=kt,kt===Ze){if(st===Ne.y)return Ne;if(st===Ne.next.y)return Ne.next}Ce=Ne.x<Ne.next.x?Ne:Ne.next}}Ne=Ne.next}while(Ne!==Te);if(!Ce)return null;if(Ze===_t)return Ce;var It,Vt=Ce,Bt=Ce.x,nn=Ce.y,un=1/0;Ne=Ce;do Ze>=Ne.x&&Ne.x>=Bt&&Ze!==Ne.x&&Rl(st<nn?Ze:_t,st,Bt,nn,st<nn?_t:Ze,st,Ne.x,Ne.y)&&(It=Math.abs(st-Ne.y)/(Ze-Ne.x),ou(Ne,le)&&(It<un||It===un&&(Ne.x>Ce.x||Ne.x===Ce.x&&ap(Ce,Ne)))&&(Ce=Ne,un=It)),Ne=Ne.next;while(Ne!==Vt);return Ce}(A,D)){var Y=df(D,A);dl(D,D.next),dl(Y,Y.next)}}function ap(A,D){return Ji(A.prev,A,D.prev)<0&&Ji(D.next,A,A.next)<0}function Ac(A,D,Y,le,Te){return(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=32767*(A-Y)*Te)|A<<8))|A<<4))|A<<2))|A<<1))|(D=1431655765&((D=858993459&((D=252645135&((D=16711935&((D=32767*(D-le)*Te)|D<<8))|D<<4))|D<<2))|D<<1))<<1}function op(A){var D=A,Y=A;do(D.x<Y.x||D.x===Y.x&&D.y<Y.y)&&(Y=D),D=D.next;while(D!==A);return Y}function Rl(A,D,Y,le,Te,Ce,Ne,Ze){return(Te-Ne)*(D-Ze)-(A-Ne)*(Ce-Ze)>=0&&(A-Ne)*(le-Ze)-(Y-Ne)*(D-Ze)>=0&&(Y-Ne)*(Ce-Ze)-(Te-Ne)*(le-Ze)>=0}function sp(A,D){return A.next.i!==D.i&&A.prev.i!==D.i&&!function(Y,le){var Te=Y;do{if(Te.i!==Y.i&&Te.next.i!==Y.i&&Te.i!==le.i&&Te.next.i!==le.i&&pf(Te,Te.next,Y,le))return!0;Te=Te.next}while(Te!==Y);return!1}(A,D)&&(ou(A,D)&&ou(D,A)&&function(Y,le){var Te=Y,Ce=!1,Ne=(Y.x+le.x)/2,Ze=(Y.y+le.y)/2;do Te.y>Ze!=Te.next.y>Ze&&Te.next.y!==Te.y&&Ne<(Te.next.x-Te.x)*(Ze-Te.y)/(Te.next.y-Te.y)+Te.x&&(Ce=!Ce),Te=Te.next;while(Te!==Y);return Ce}(A,D)&&(Ji(A.prev,A,D.prev)||Ji(A,D.prev,D))||ju(A,D)&&Ji(A.prev,A,A.next)>0&&Ji(D.prev,D,D.next)>0)}function Ji(A,D,Y){return(D.y-A.y)*(Y.x-D.x)-(D.x-A.x)*(Y.y-D.y)}function ju(A,D){return A.x===D.x&&A.y===D.y}function pf(A,D,Y,le){var Te=Vu(Ji(A,D,Y)),Ce=Vu(Ji(A,D,le)),Ne=Vu(Ji(Y,le,A)),Ze=Vu(Ji(Y,le,D));return Te!==Ce&&Ne!==Ze||!(Te!==0||!Uu(A,Y,D))||!(Ce!==0||!Uu(A,le,D))||!(Ne!==0||!Uu(Y,A,le))||!(Ze!==0||!Uu(Y,D,le))}function Uu(A,D,Y){return D.x<=Math.max(A.x,Y.x)&&D.x>=Math.min(A.x,Y.x)&&D.y<=Math.max(A.y,Y.y)&&D.y>=Math.min(A.y,Y.y)}function Vu(A){return A>0?1:A<0?-1:0}function ou(A,D){return Ji(A.prev,A,A.next)<0?Ji(A,D,A.next)>=0&&Ji(A,A.prev,D)>=0:Ji(A,D,A.prev)<0||Ji(A,A.next,D)<0}function df(A,D){var Y=new Mc(A.i,A.x,A.y),le=new Mc(D.i,D.x,D.y),Te=A.next,Ce=D.prev;return A.next=D,D.prev=A,Y.next=Te,Te.prev=Y,le.next=Y,Y.prev=le,Ce.next=le,le.prev=Ce,le}function gf(A,D,Y,le){var Te=new Mc(A,D,Y);return le?(Te.next=le.next,Te.prev=le,le.next.prev=Te,le.next=Te):(Te.prev=Te,Te.next=Te),Te}function su(A){A.next.prev=A.prev,A.prev.next=A.next,A.prevZ&&(A.prevZ.nextZ=A.nextZ),A.nextZ&&(A.nextZ.prevZ=A.prevZ)}function Mc(A,D,Y){this.i=A,this.x=D,this.y=Y,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Sc(A,D,Y,le){for(var Te=0,Ce=D,Ne=Y-le;Ce<Y;Ce+=le)Te+=(A[Ne]-A[Ce])*(A[Ce+1]+A[Ne+1]),Ne=Ce;return Te}function lp(A,D,Y,le,Te){vf(A,D,Y,le||A.length-1,Te||up)}function vf(A,D,Y,le,Te){for(;le>Y;){if(le-Y>600){var Ce=le-Y+1,Ne=D-Y+1,Ze=Math.log(Ce),st=.5*Math.exp(2*Ze/3),_t=.5*Math.sqrt(Ze*st*(Ce-st)/Ce)*(Ne-Ce/2<0?-1:1);vf(A,D,Math.max(Y,Math.floor(D-Ne*st/Ce+_t)),Math.min(le,Math.floor(D+(Ce-Ne)*st/Ce+_t)),Te)}var kt=A[D],It=Y,Vt=le;for(lu(A,Y,D),Te(A[le],kt)>0&&lu(A,Y,le);It<Vt;){for(lu(A,It,Vt),It++,Vt--;Te(A[It],kt)<0;)It++;for(;Te(A[Vt],kt)>0;)Vt--}Te(A[Y],kt)===0?lu(A,Y,Vt):lu(A,++Vt,le),Vt<=D&&(Y=Vt+1),D<=Vt&&(le=Vt-1)}}function lu(A,D,Y){var le=A[D];A[D]=A[Y],A[Y]=le}function up(A,D){return A<D?-1:A>D?1:0}function Ec(A,D){var Y=A.length;if(Y<=1)return[A];for(var le,Te,Ce=[],Ne=0;Ne<Y;Ne++){var Ze=O(A[Ne]);Ze!==0&&(A[Ne].area=Math.abs(Ze),Te===void 0&&(Te=Ze<0),Te===Ze<0?(le&&Ce.push(le),le=[A[Ne]]):le.push(A[Ne]))}if(le&&Ce.push(le),D>1)for(var st=0;st<Ce.length;st++)Ce[st].length<=D||(lp(Ce[st],D,1,Ce[st].length-1,cp),Ce[st]=Ce[st].slice(0,D));return Ce}function cp(A,D){return D.area-A.area}function Lc(A,D,Y){for(var le=Y.patternDependencies,Te=!1,Ce=0,Ne=D;Ce<Ne.length;Ce+=1){var Ze=Ne[Ce].paint.get(A+"-pattern");Ze.isConstant()||(Te=!0);var st=Ze.constantOr(null);st&&(Te=!0,le[st.to]=!0,le[st.from]=!0)}return Te}function Cc(A,D,Y,le,Te){for(var Ce=Te.patternDependencies,Ne=0,Ze=D;Ne<Ze.length;Ne+=1){var st=Ze[Ne],_t=st.paint.get(A+"-pattern").value;if(_t.kind!=="constant"){var kt=_t.evaluate({zoom:le-1},Y,{},Te.availableImages),It=_t.evaluate({zoom:le},Y,{},Te.availableImages),Vt=_t.evaluate({zoom:le+1},Y,{},Te.availableImages);kt=kt&&kt.name?kt.name:kt,It=It&&It.name?It.name:It,Vt=Vt&&Vt.name?Vt.name:Vt,Ce[kt]=!0,Ce[It]=!0,Ce[Vt]=!0,Y.patterns[st.id]={min:kt,mid:It,max:Vt}}}return Y}Nu.deviation=function(A,D,Y,le){var Te=D&&D.length,Ce=Te?D[0]*Y:A.length,Ne=Math.abs(Sc(A,0,Ce,Y));if(Te)for(var Ze=0,st=D.length;Ze<st;Ze++){var _t=D[Ze]*Y,kt=Ze<st-1?D[Ze+1]*Y:A.length;Ne-=Math.abs(Sc(A,_t,kt,Y))}var It=0;for(Ze=0;Ze<le.length;Ze+=3){var Vt=le[Ze]*Y,Bt=le[Ze+1]*Y,nn=le[Ze+2]*Y;It+=Math.abs((A[Vt]-A[nn])*(A[Bt+1]-A[Vt+1])-(A[Vt]-A[Bt])*(A[nn+1]-A[Vt+1]))}return Ne===0&&It===0?0:Math.abs((It-Ne)/Ne)},Nu.flatten=function(A){for(var D=A[0][0].length,Y={vertices:[],holes:[],dimensions:D},le=0,Te=0;Te<A.length;Te++){for(var Ce=0;Ce<A[Te].length;Ce++)for(var Ne=0;Ne<D;Ne++)Y.vertices.push(A[Te][Ce][Ne]);Te>0&&(le+=A[Te-1].length,Y.holes.push(le))}return Y},kc.default=$h;var Os=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(D){return D.id}),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new jo,this.indexArray=new xe,this.indexArray2=new lt,this.programConfigurations=new Ii(A.layers,A.zoom),this.segments=new jn,this.segments2=new jn,this.stateDependentLayerIds=this.layers.filter(function(D){return D.isStateDependent()}).map(function(D){return D.id})};Os.prototype.populate=function(A,D,Y){this.hasPattern=Lc("fill",this.layers,D);for(var le=this.layers[0].layout.get("fill-sort-key"),Te=[],Ce=0,Ne=A;Ce<Ne.length;Ce+=1){var Ze=Ne[Ce],st=Ze.feature,_t=Ze.id,kt=Ze.index,It=Ze.sourceLayerIndex,Vt=this.layers[0]._featureFilter.needGeometry,Bt=_i(st,Vt);if(this.layers[0]._featureFilter.filter(new Vr(this.zoom),Bt,Y)){var nn=le?le.evaluate(Bt,{},Y,D.availableImages):void 0,un={id:_t,properties:st.properties,type:st.type,sourceLayerIndex:It,index:kt,geometry:Vt?Bt.geometry:bo(st),patterns:{},sortKey:nn};Te.push(un)}}le&&Te.sort(function(yr,br){return yr.sortKey-br.sortKey});for(var kn=0,bn=Te;kn<bn.length;kn+=1){var In=bn[kn],Rn=In,Vn=Rn.geometry,Jn=Rn.index,nr=Rn.sourceLayerIndex;if(this.hasPattern){var dr=Cc("fill",this.layers,In,this.zoom,D);this.patternFeatures.push(dr)}else this.addFeature(In,Vn,Jn,Y,{});var hr=A[Jn].feature;D.featureIndex.insert(hr,Vn,Jn,nr,this.index)}},Os.prototype.update=function(A,D,Y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,D,this.stateDependentLayers,Y)},Os.prototype.addFeatures=function(A,D,Y){for(var le=0,Te=this.patternFeatures;le<Te.length;le+=1){var Ce=Te[le];this.addFeature(Ce,Ce.geometry,Ce.index,D,Y)}},Os.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Os.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Os.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Jh),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.indexBuffer2=A.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(A),this.uploaded=!0},Os.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Os.prototype.addFeature=function(A,D,Y,le,Te){for(var Ce=0,Ne=Ec(D,500);Ce<Ne.length;Ce+=1){for(var Ze=Ne[Ce],st=0,_t=0,kt=Ze;_t<kt.length;_t+=1)st+=kt[_t].length;for(var It=this.segments.prepareSegment(st,this.layoutVertexArray,this.indexArray),Vt=It.vertexLength,Bt=[],nn=[],un=0,kn=Ze;un<kn.length;un+=1){var bn=kn[un];if(bn.length!==0){bn!==Ze[0]&&nn.push(Bt.length/2);var In=this.segments2.prepareSegment(bn.length,this.layoutVertexArray,this.indexArray2),Rn=In.vertexLength;this.layoutVertexArray.emplaceBack(bn[0].x,bn[0].y),this.indexArray2.emplaceBack(Rn+bn.length-1,Rn),Bt.push(bn[0].x),Bt.push(bn[0].y);for(var Vn=1;Vn<bn.length;Vn++)this.layoutVertexArray.emplaceBack(bn[Vn].x,bn[Vn].y),this.indexArray2.emplaceBack(Rn+Vn-1,Rn+Vn),Bt.push(bn[Vn].x),Bt.push(bn[Vn].y);In.vertexLength+=bn.length,In.primitiveLength+=bn.length}}for(var Jn=kc(Bt,nn),nr=0;nr<Jn.length;nr+=3)this.indexArray.emplaceBack(Vt+Jn[nr],Vt+Jn[nr+1],Vt+Jn[nr+2]);It.vertexLength+=st,It.primitiveLength+=Jn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,Y,Te,le)},_r("FillBucket",Os,{omit:["layers","patternFeatures"]});var fp=new Ei({"fill-sort-key":new Cr(Re.layout_fill["fill-sort-key"])}),hp={paint:new Ei({"fill-antialias":new kr(Re.paint_fill["fill-antialias"]),"fill-opacity":new Cr(Re.paint_fill["fill-opacity"]),"fill-color":new Cr(Re.paint_fill["fill-color"]),"fill-outline-color":new Cr(Re.paint_fill["fill-outline-color"]),"fill-translate":new kr(Re.paint_fill["fill-translate"]),"fill-translate-anchor":new kr(Re.paint_fill["fill-translate-anchor"]),"fill-pattern":new wa(Re.paint_fill["fill-pattern"])}),layout:fp},pp=function(A){function D(Y){A.call(this,Y,hp)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.recalculate=function(Y,le){A.prototype.recalculate.call(this,Y,le);var Te=this.paint._values["fill-outline-color"];Te.value.kind==="constant"&&Te.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},D.prototype.createBucket=function(Y){return new Os(Y)},D.prototype.queryRadius=function(){return Du(this.paint.get("fill-translate"))},D.prototype.queryIntersectsFeature=function(Y,le,Te,Ce,Ne,Ze,st){return Pu(Ru(Y,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Ze.angle,st),Ce)},D.prototype.isTileClipped=function(){return!0},D}(Qr),dp=hi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,mf=Fl;function Fl(A,D,Y,le,Te){this.properties={},this.extent=Y,this.type=0,this._pbf=A,this._geometry=-1,this._keys=le,this._values=Te,A.readFields(gp,this,D)}function gp(A,D,Y){A==1?D.id=Y.readVarint():A==2?function(le,Te){for(var Ce=le.readVarint()+le.pos;le.pos<Ce;){var Ne=Te._keys[le.readVarint()],Ze=Te._values[le.readVarint()];Te.properties[Ne]=Ze}}(Y,D):A==3?D.type=Y.readVarint():A==4&&(D._geometry=Y.pos)}function vp(A){for(var D,Y,le=0,Te=0,Ce=A.length,Ne=Ce-1;Te<Ce;Ne=Te++)D=A[Te],le+=((Y=A[Ne]).x-D.x)*(D.y+Y.y);return le}Fl.types=["Unknown","Point","LineString","Polygon"],Fl.prototype.loadGeometry=function(){var A=this._pbf;A.pos=this._geometry;for(var D,Y=A.readVarint()+A.pos,le=1,Te=0,Ce=0,Ne=0,Ze=[];A.pos<Y;){if(Te<=0){var st=A.readVarint();le=7&st,Te=st>>3}if(Te--,le===1||le===2)Ce+=A.readSVarint(),Ne+=A.readSVarint(),le===1&&(D&&Ze.push(D),D=[]),D.push(new t(Ce,Ne));else{if(le!==7)throw new Error("unknown command "+le);D&&D.push(D[0].clone())}}return D&&Ze.push(D),Ze},Fl.prototype.bbox=function(){var A=this._pbf;A.pos=this._geometry;for(var D=A.readVarint()+A.pos,Y=1,le=0,Te=0,Ce=0,Ne=1/0,Ze=-1/0,st=1/0,_t=-1/0;A.pos<D;){if(le<=0){var kt=A.readVarint();Y=7&kt,le=kt>>3}if(le--,Y===1||Y===2)(Te+=A.readSVarint())<Ne&&(Ne=Te),Te>Ze&&(Ze=Te),(Ce+=A.readSVarint())<st&&(st=Ce),Ce>_t&&(_t=Ce);else if(Y!==7)throw new Error("unknown command "+Y)}return[Ne,st,Ze,_t]},Fl.prototype.toGeoJSON=function(A,D,Y){var le,Te,Ce=this.extent*Math.pow(2,Y),Ne=this.extent*A,Ze=this.extent*D,st=this.loadGeometry(),_t=Fl.types[this.type];function kt(Bt){for(var nn=0;nn<Bt.length;nn++){var un=Bt[nn],kn=180-360*(un.y+Ze)/Ce;Bt[nn]=[360*(un.x+Ne)/Ce-180,360/Math.PI*Math.atan(Math.exp(kn*Math.PI/180))-90]}}switch(this.type){case 1:var It=[];for(le=0;le<st.length;le++)It[le]=st[le][0];kt(st=It);break;case 2:for(le=0;le<st.length;le++)kt(st[le]);break;case 3:for(st=function(Bt){var nn=Bt.length;if(nn<=1)return[Bt];for(var un,kn,bn=[],In=0;In<nn;In++){var Rn=vp(Bt[In]);Rn!==0&&(kn===void 0&&(kn=Rn<0),kn===Rn<0?(un&&bn.push(un),un=[Bt[In]]):un.push(Bt[In]))}return un&&bn.push(un),bn}(st),le=0;le<st.length;le++)for(Te=0;Te<st[le].length;Te++)kt(st[le][Te])}st.length===1?st=st[0]:_t="Multi"+_t;var Vt={type:"Feature",geometry:{type:_t,coordinates:st},properties:this.properties};return"id"in this&&(Vt.id=this.id),Vt};var yf=xf;function xf(A,D){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=A,this._keys=[],this._values=[],this._features=[],A.readFields(mp,this,D),this.length=this._features.length}function mp(A,D,Y){A===15?D.version=Y.readVarint():A===1?D.name=Y.readString():A===5?D.extent=Y.readVarint():A===2?D._features.push(Y.pos):A===3?D._keys.push(Y.readString()):A===4&&D._values.push(function(le){for(var Te=null,Ce=le.readVarint()+le.pos;le.pos<Ce;){var Ne=le.readVarint()>>3;Te=Ne===1?le.readString():Ne===2?le.readFloat():Ne===3?le.readDouble():Ne===4?le.readVarint64():Ne===5?le.readVarint():Ne===6?le.readSVarint():Ne===7?le.readBoolean():null}return Te}(Y))}function yp(A,D,Y){if(A===3){var le=new yf(Y,Y.readVarint()+Y.pos);le.length&&(D[le.name]=le)}}xf.prototype.feature=function(A){if(A<0||A>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[A];var D=this._pbf.readVarint()+this._pbf.pos;return new mf(this._pbf,D,this.extent,this._keys,this._values)};var Bl={VectorTile:function(A,D){this.layers=A.readFields(yp,{},D)},VectorTileFeature:mf,VectorTileLayer:yf},xp=Bl.VectorTileFeature.types,Oc=Math.pow(2,13);function uu(A,D,Y,le,Te,Ce,Ne,Ze){A.emplaceBack(D,Y,2*Math.floor(le*Oc)+Ne,Te*Oc*2,Ce*Oc*2,Math.round(Ze))}var Ps=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(D){return D.id}),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new Xe,this.indexArray=new xe,this.programConfigurations=new Ii(A.layers,A.zoom),this.segments=new jn,this.stateDependentLayerIds=this.layers.filter(function(D){return D.isStateDependent()}).map(function(D){return D.id})};function bp(A,D){return A.x===D.x&&(A.x<0||A.x>Zr)||A.y===D.y&&(A.y<0||A.y>Zr)}Ps.prototype.populate=function(A,D,Y){this.features=[],this.hasPattern=Lc("fill-extrusion",this.layers,D);for(var le=0,Te=A;le<Te.length;le+=1){var Ce=Te[le],Ne=Ce.feature,Ze=Ce.id,st=Ce.index,_t=Ce.sourceLayerIndex,kt=this.layers[0]._featureFilter.needGeometry,It=_i(Ne,kt);if(this.layers[0]._featureFilter.filter(new Vr(this.zoom),It,Y)){var Vt={id:Ze,sourceLayerIndex:_t,index:st,geometry:kt?It.geometry:bo(Ne),properties:Ne.properties,type:Ne.type,patterns:{}};this.hasPattern?this.features.push(Cc("fill-extrusion",this.layers,Vt,this.zoom,D)):this.addFeature(Vt,Vt.geometry,st,Y,{}),D.featureIndex.insert(Ne,Vt.geometry,st,_t,this.index,!0)}}},Ps.prototype.addFeatures=function(A,D,Y){for(var le=0,Te=this.features;le<Te.length;le+=1){var Ce=Te[le],Ne=Ce.geometry;this.addFeature(Ce,Ne,Ce.index,D,Y)}},Ps.prototype.update=function(A,D,Y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,D,this.stateDependentLayers,Y)},Ps.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ps.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ps.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,dp),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},Ps.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ps.prototype.addFeature=function(A,D,Y,le,Te){for(var Ce=0,Ne=Ec(D,500);Ce<Ne.length;Ce+=1){for(var Ze=Ne[Ce],st=0,_t=0,kt=Ze;_t<kt.length;_t+=1)st+=kt[_t].length;for(var It=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Vt=0,Bt=Ze;Vt<Bt.length;Vt+=1){var nn=Bt[Vt];if(nn.length!==0&&!((Yr=nn).every(function(Br){return Br.x<0})||Yr.every(function(Br){return Br.x>Zr})||Yr.every(function(Br){return Br.y<0})||Yr.every(function(Br){return Br.y>Zr})))for(var un=0,kn=0;kn<nn.length;kn++){var bn=nn[kn];if(kn>=1){var In=nn[kn-1];if(!bp(bn,In)){It.vertexLength+4>jn.MAX_VERTEX_ARRAY_LENGTH&&(It=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Rn=bn.sub(In)._perp()._unit(),Vn=In.dist(bn);un+Vn>32768&&(un=0),uu(this.layoutVertexArray,bn.x,bn.y,Rn.x,Rn.y,0,0,un),uu(this.layoutVertexArray,bn.x,bn.y,Rn.x,Rn.y,0,1,un),un+=Vn,uu(this.layoutVertexArray,In.x,In.y,Rn.x,Rn.y,0,0,un),uu(this.layoutVertexArray,In.x,In.y,Rn.x,Rn.y,0,1,un);var Jn=It.vertexLength;this.indexArray.emplaceBack(Jn,Jn+2,Jn+1),this.indexArray.emplaceBack(Jn+1,Jn+2,Jn+3),It.vertexLength+=4,It.primitiveLength+=2}}}}if(It.vertexLength+st>jn.MAX_VERTEX_ARRAY_LENGTH&&(It=this.segments.prepareSegment(st,this.layoutVertexArray,this.indexArray)),xp[A.type]==="Polygon"){for(var nr=[],dr=[],hr=It.vertexLength,yr=0,br=Ze;yr<br.length;yr+=1){var Dr=br[yr];if(Dr.length!==0){Dr!==Ze[0]&&dr.push(nr.length/2);for(var Sr=0;Sr<Dr.length;Sr++){var zr=Dr[Sr];uu(this.layoutVertexArray,zr.x,zr.y,0,0,1,1,0),nr.push(zr.x),nr.push(zr.y)}}}for(var Lr=kc(nr,dr),Mr=0;Mr<Lr.length;Mr+=3)this.indexArray.emplaceBack(hr+Lr[Mr],hr+Lr[Mr+2],hr+Lr[Mr+1]);It.primitiveLength+=Lr.length/3,It.vertexLength+=st}}var Yr;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,Y,Te,le)},_r("FillExtrusionBucket",Ps,{omit:["layers","features"]});var _p={paint:new Ei({"fill-extrusion-opacity":new kr(Re["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Cr(Re["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new kr(Re["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new kr(Re["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new wa(Re["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Cr(Re["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Cr(Re["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new kr(Re["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},wp=function(A){function D(Y){A.call(this,Y,_p)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.createBucket=function(Y){return new Ps(Y)},D.prototype.queryRadius=function(){return Du(this.paint.get("fill-extrusion-translate"))},D.prototype.is3D=function(){return!0},D.prototype.queryIntersectsFeature=function(Y,le,Te,Ce,Ne,Ze,st,_t){var kt=Ru(Y,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Ze.angle,st),It=this.paint.get("fill-extrusion-height").evaluate(le,Te),Vt=this.paint.get("fill-extrusion-base").evaluate(le,Te),Bt=function(un,kn,bn,In){for(var Rn=[],Vn=0,Jn=un;Vn<Jn.length;Vn+=1){var nr=Jn[Vn],dr=[nr.x,nr.y,In,1];Bu(dr,dr,kn),Rn.push(new t(dr[0]/dr[3],dr[1]/dr[3]))}return Rn}(kt,_t,0,0),nn=function(un,kn,bn,In){for(var Rn=[],Vn=[],Jn=In[8]*kn,nr=In[9]*kn,dr=In[10]*kn,hr=In[11]*kn,yr=In[8]*bn,br=In[9]*bn,Dr=In[10]*bn,Sr=In[11]*bn,zr=0,Lr=un;zr<Lr.length;zr+=1){for(var Mr=[],Yr=[],Br=0,vi=Lr[zr];Br<vi.length;Br+=1){var Ir=vi[Br],fi=Ir.x,Ti=Ir.y,Mi=In[0]*fi+In[4]*Ti+In[12],Si=In[1]*fi+In[5]*Ti+In[13],mi=In[2]*fi+In[6]*Ti+In[14],ea=In[3]*fi+In[7]*Ti+In[15],Oi=mi+dr,ha=ea+hr,Aa=Mi+yr,ma=Si+br,Xa=mi+Dr,ya=ea+Sr,ia=new t((Mi+Jn)/ha,(Si+nr)/ha);ia.z=Oi/ha,Mr.push(ia);var xa=new t(Aa/ya,ma/ya);xa.z=Xa/ya,Yr.push(xa)}Rn.push(Mr),Vn.push(Yr)}return[Rn,Vn]}(Ce,Vt,It,_t);return function(un,kn,bn){var In=1/0;Pu(bn,kn)&&(In=bf(bn,kn[0]));for(var Rn=0;Rn<kn.length;Rn++)for(var Vn=kn[Rn],Jn=un[Rn],nr=0;nr<Vn.length-1;nr++){var dr=Vn[nr],hr=Vn[nr+1],yr=Jn[nr],br=[dr,hr,Jn[nr+1],yr,dr];Al(bn,br)&&(In=Math.min(In,bf(bn,br)))}return In!==1/0&&In}(nn[0],nn[1],Bt)},D}(Qr);function cu(A,D){return A.x*D.x+A.y*D.y}function bf(A,D){if(A.length===1){for(var Y,le=0,Te=D[le++];!Y||Te.equals(Y);)if(!(Y=D[le++]))return 1/0;for(;le<D.length;le++){var Ce=D[le],Ne=A[0],Ze=Y.sub(Te),st=Ce.sub(Te),_t=Ne.sub(Te),kt=cu(Ze,Ze),It=cu(Ze,st),Vt=cu(st,st),Bt=cu(_t,Ze),nn=cu(_t,st),un=kt*Vt-It*It,kn=(Vt*Bt-It*nn)/un,bn=(kt*nn-It*Bt)/un,In=1-kn-bn,Rn=Te.z*In+Y.z*kn+Ce.z*bn;if(isFinite(Rn))return Rn}return 1/0}for(var Vn=1/0,Jn=0,nr=D;Jn<nr.length;Jn+=1){var dr=nr[Jn];Vn=Math.min(Vn,dr.z)}return Vn}var Tp=hi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,kp=hi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Ap=Bl.VectorTileFeature.types,Mp=Math.cos(Math.PI/180*37.5),_f=Math.pow(2,14)/.5,Ya=function(A){var D=this;this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(Y){return Y.id}),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(Y){D.gradients[Y.id]={}}),this.layoutVertexArray=new Je,this.layoutVertexArray2=new at,this.indexArray=new xe,this.programConfigurations=new Ii(A.layers,A.zoom),this.segments=new jn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(Y){return Y.isStateDependent()}).map(function(Y){return Y.id})};Ya.prototype.populate=function(A,D,Y){this.hasPattern=Lc("line",this.layers,D);for(var le=this.layers[0].layout.get("line-sort-key"),Te=[],Ce=0,Ne=A;Ce<Ne.length;Ce+=1){var Ze=Ne[Ce],st=Ze.feature,_t=Ze.id,kt=Ze.index,It=Ze.sourceLayerIndex,Vt=this.layers[0]._featureFilter.needGeometry,Bt=_i(st,Vt);if(this.layers[0]._featureFilter.filter(new Vr(this.zoom),Bt,Y)){var nn=le?le.evaluate(Bt,{},Y):void 0,un={id:_t,properties:st.properties,type:st.type,sourceLayerIndex:It,index:kt,geometry:Vt?Bt.geometry:bo(st),patterns:{},sortKey:nn};Te.push(un)}}le&&Te.sort(function(yr,br){return yr.sortKey-br.sortKey});for(var kn=0,bn=Te;kn<bn.length;kn+=1){var In=bn[kn],Rn=In,Vn=Rn.geometry,Jn=Rn.index,nr=Rn.sourceLayerIndex;if(this.hasPattern){var dr=Cc("line",this.layers,In,this.zoom,D);this.patternFeatures.push(dr)}else this.addFeature(In,Vn,Jn,Y,{});var hr=A[Jn].feature;D.featureIndex.insert(hr,Vn,Jn,nr,this.index)}},Ya.prototype.update=function(A,D,Y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,D,this.stateDependentLayers,Y)},Ya.prototype.addFeatures=function(A,D,Y){for(var le=0,Te=this.patternFeatures;le<Te.length;le+=1){var Ce=Te[le];this.addFeature(Ce,Ce.geometry,Ce.index,D,Y)}},Ya.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ya.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ya.prototype.upload=function(A){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=A.createVertexBuffer(this.layoutVertexArray2,kp)),this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Tp),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},Ya.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ya.prototype.lineFeatureClips=function(A){if(A.properties&&A.properties.hasOwnProperty("mapbox_clip_start")&&A.properties.hasOwnProperty("mapbox_clip_end"))return{start:+A.properties.mapbox_clip_start,end:+A.properties.mapbox_clip_end}},Ya.prototype.addFeature=function(A,D,Y,le,Te){var Ce=this.layers[0].layout,Ne=Ce.get("line-join").evaluate(A,{}),Ze=Ce.get("line-cap"),st=Ce.get("line-miter-limit"),_t=Ce.get("line-round-limit");this.lineClips=this.lineFeatureClips(A);for(var kt=0,It=D;kt<It.length;kt+=1){var Vt=It[kt];this.addLine(Vt,A,Ne,Ze,st,_t)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,Y,Te,le)},Ya.prototype.addLine=function(A,D,Y,le,Te,Ce){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var Ne=0;Ne<A.length-1;Ne++)this.totalDistance+=A[Ne].dist(A[Ne+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var Ze=Ap[D.type]==="Polygon",st=A.length;st>=2&&A[st-1].equals(A[st-2]);)st--;for(var _t=0;_t<st-1&&A[_t].equals(A[_t+1]);)_t++;if(!(st<(Ze?3:2))){Y==="bevel"&&(Te=1.05);var kt,It=this.overscaling<=16?15*Zr/(512*this.overscaling):0,Vt=this.segments.prepareSegment(10*st,this.layoutVertexArray,this.indexArray),Bt=void 0,nn=void 0,un=void 0,kn=void 0;this.e1=this.e2=-1,Ze&&(kt=A[st-2],kn=A[_t].sub(kt)._unit()._perp());for(var bn=_t;bn<st;bn++)if(!(nn=bn===st-1?Ze?A[_t+1]:void 0:A[bn+1])||!A[bn].equals(nn)){kn&&(un=kn),kt&&(Bt=kt),kt=A[bn],kn=nn?nn.sub(kt)._unit()._perp():un;var In=(un=un||kn).add(kn);In.x===0&&In.y===0||In._unit();var Rn=un.x*kn.x+un.y*kn.y,Vn=In.x*kn.x+In.y*kn.y,Jn=Vn!==0?1/Vn:1/0,nr=2*Math.sqrt(2-2*Vn),dr=Vn<Mp&&Bt&&nn,hr=un.x*kn.y-un.y*kn.x>0;if(dr&&bn>_t){var yr=kt.dist(Bt);if(yr>2*It){var br=kt.sub(kt.sub(Bt)._mult(It/yr)._round());this.updateDistance(Bt,br),this.addCurrentVertex(br,un,0,0,Vt),Bt=br}}var Dr=Bt&&nn,Sr=Dr?Y:Ze?"butt":le;if(Dr&&Sr==="round"&&(Jn<Ce?Sr="miter":Jn<=2&&(Sr="fakeround")),Sr==="miter"&&Jn>Te&&(Sr="bevel"),Sr==="bevel"&&(Jn>2&&(Sr="flipbevel"),Jn<Te&&(Sr="miter")),Bt&&this.updateDistance(Bt,kt),Sr==="miter")In._mult(Jn),this.addCurrentVertex(kt,In,0,0,Vt);else if(Sr==="flipbevel"){if(Jn>100)In=kn.mult(-1);else{var zr=Jn*un.add(kn).mag()/un.sub(kn).mag();In._perp()._mult(zr*(hr?-1:1))}this.addCurrentVertex(kt,In,0,0,Vt),this.addCurrentVertex(kt,In.mult(-1),0,0,Vt)}else if(Sr==="bevel"||Sr==="fakeround"){var Lr=-Math.sqrt(Jn*Jn-1),Mr=hr?Lr:0,Yr=hr?0:Lr;if(Bt&&this.addCurrentVertex(kt,un,Mr,Yr,Vt),Sr==="fakeround")for(var Br=Math.round(180*nr/Math.PI/20),vi=1;vi<Br;vi++){var Ir=vi/Br;if(Ir!==.5){var fi=Ir-.5;Ir+=Ir*fi*(Ir-1)*((1.0904+Rn*(Rn*(3.55645-1.43519*Rn)-3.2452))*fi*fi+(.848013+Rn*(.215638*Rn-1.06021)))}var Ti=kn.sub(un)._mult(Ir)._add(un)._unit()._mult(hr?-1:1);this.addHalfVertex(kt,Ti.x,Ti.y,!1,hr,0,Vt)}nn&&this.addCurrentVertex(kt,kn,-Mr,-Yr,Vt)}else if(Sr==="butt")this.addCurrentVertex(kt,In,0,0,Vt);else if(Sr==="square"){var Mi=Bt?1:-1;this.addCurrentVertex(kt,In,Mi,Mi,Vt)}else Sr==="round"&&(Bt&&(this.addCurrentVertex(kt,un,0,0,Vt),this.addCurrentVertex(kt,un,1,1,Vt,!0)),nn&&(this.addCurrentVertex(kt,kn,-1,-1,Vt,!0),this.addCurrentVertex(kt,kn,0,0,Vt)));if(dr&&bn<st-1){var Si=kt.dist(nn);if(Si>2*It){var mi=kt.add(nn.sub(kt)._mult(It/Si)._round());this.updateDistance(kt,mi),this.addCurrentVertex(mi,kn,0,0,Vt),kt=mi}}}}},Ya.prototype.addCurrentVertex=function(A,D,Y,le,Te,Ce){Ce===void 0&&(Ce=!1);var Ne=D.x+D.y*Y,Ze=D.y-D.x*Y,st=-D.x+D.y*le,_t=-D.y-D.x*le;this.addHalfVertex(A,Ne,Ze,Ce,!1,Y,Te),this.addHalfVertex(A,st,_t,Ce,!0,-le,Te),this.distance>_f/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(A,D,Y,le,Te,Ce))},Ya.prototype.addHalfVertex=function(A,D,Y,le,Te,Ce,Ne){var Ze=A.x,st=A.y,_t=.5*(this.lineClips?this.scaledDistance*(_f-1):this.scaledDistance);if(this.layoutVertexArray.emplaceBack((Ze<<1)+(le?1:0),(st<<1)+(Te?1:0),Math.round(63*D)+128,Math.round(63*Y)+128,1+(Ce===0?0:Ce<0?-1:1)|(63&_t)<<2,_t>>6),this.lineClips){var kt=(this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start);this.layoutVertexArray2.emplaceBack(kt,this.lineClipsArray.length)}var It=Ne.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,It),Ne.primitiveLength++),Te?this.e2=It:this.e1=It},Ya.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Ya.prototype.updateDistance=function(A,D){this.distance+=A.dist(D),this.updateScaledDistance()},_r("LineBucket",Ya,{omit:["layers","patternFeatures"]});var Sp=new Ei({"line-cap":new kr(Re.layout_line["line-cap"]),"line-join":new Cr(Re.layout_line["line-join"]),"line-miter-limit":new kr(Re.layout_line["line-miter-limit"]),"line-round-limit":new kr(Re.layout_line["line-round-limit"]),"line-sort-key":new Cr(Re.layout_line["line-sort-key"])}),wf={paint:new Ei({"line-opacity":new Cr(Re.paint_line["line-opacity"]),"line-color":new Cr(Re.paint_line["line-color"]),"line-translate":new kr(Re.paint_line["line-translate"]),"line-translate-anchor":new kr(Re.paint_line["line-translate-anchor"]),"line-width":new Cr(Re.paint_line["line-width"]),"line-gap-width":new Cr(Re.paint_line["line-gap-width"]),"line-offset":new Cr(Re.paint_line["line-offset"]),"line-blur":new Cr(Re.paint_line["line-blur"]),"line-dasharray":new oo(Re.paint_line["line-dasharray"]),"line-pattern":new wa(Re.paint_line["line-pattern"]),"line-gradient":new xo(Re.paint_line["line-gradient"])}),layout:Sp},Ep=function(A){function D(){A.apply(this,arguments)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.possiblyEvaluate=function(Y,le){return le=new Vr(Math.floor(le.zoom),{now:le.now,fadeDuration:le.fadeDuration,zoomHistory:le.zoomHistory,transition:le.transition}),A.prototype.possiblyEvaluate.call(this,Y,le)},D.prototype.evaluate=function(Y,le,Te,Ce){return le=c({},le,{zoom:Math.floor(le.zoom)}),A.prototype.evaluate.call(this,Y,le,Te,Ce)},D}(Cr),Tf=new Ep(wf.paint.properties["line-width"].specification);Tf.useIntegerZoom=!0;var Lp=function(A){function D(Y){A.call(this,Y,wf),this.gradientVersion=0}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype._handleSpecialPaintPropertyUpdate=function(Y){if(Y==="line-gradient"){var le=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=le._styleExpression.expression instanceof Tr,this.gradientVersion=(this.gradientVersion+1)%r}},D.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},D.prototype.recalculate=function(Y,le){A.prototype.recalculate.call(this,Y,le),this.paint._values["line-floorwidth"]=Tf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,Y)},D.prototype.createBucket=function(Y){return new Ya(Y)},D.prototype.queryRadius=function(Y){var le=Y,Te=kf(iu("line-width",this,le),iu("line-gap-width",this,le)),Ce=iu("line-offset",this,le);return Te/2+Math.abs(Ce)+Du(this.paint.get("line-translate"))},D.prototype.queryIntersectsFeature=function(Y,le,Te,Ce,Ne,Ze,st){var _t=Ru(Y,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Ze.angle,st),kt=st/2*kf(this.paint.get("line-width").evaluate(le,Te),this.paint.get("line-gap-width").evaluate(le,Te)),It=this.paint.get("line-offset").evaluate(le,Te);return It&&(Ce=function(Vt,Bt){for(var nn=[],un=new t(0,0),kn=0;kn<Vt.length;kn++){for(var bn=Vt[kn],In=[],Rn=0;Rn<bn.length;Rn++){var Vn=bn[Rn-1],Jn=bn[Rn],nr=bn[Rn+1],dr=Rn===0?un:Jn.sub(Vn)._unit()._perp(),hr=Rn===bn.length-1?un:nr.sub(Jn)._unit()._perp(),yr=dr._add(hr)._unit(),br=yr.x*hr.x+yr.y*hr.y;yr._mult(1/br),In.push(yr._mult(Bt)._add(Jn))}nn.push(In)}return nn}(Ce,It*st)),function(Vt,Bt,nn){for(var un=0;un<Bt.length;un++){var kn=Bt[un];if(Vt.length>=3){for(var bn=0;bn<kn.length;bn++)if(Ws(Vt,kn[bn]))return!0}if(xc(Vt,kn,nn))return!0}return!1}(_t,Ce,kt)},D.prototype.isTileClipped=function(){return!0},D}(Qr);function kf(A,D){return D>0?D+2*A:A}var Cp=hi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Op=hi([{name:"a_projected_pos",components:3,type:"Float32"}],4),Pp=(hi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),hi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Af=(hi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),hi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Ip=hi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function zp(A,D,Y){return A.sections.forEach(function(le){le.text=function(Te,Ce,Ne){var Ze=Ce.layout.get("text-transform").evaluate(Ne,{});return Ze==="uppercase"?Te=Te.toLocaleUpperCase():Ze==="lowercase"&&(Te=Te.toLocaleLowerCase()),ca.applyArabicShaping&&(Te=ca.applyArabicShaping(Te)),Te}(le.text,D,Y)}),A}hi([{name:"triangle",components:3,type:"Uint16"}]),hi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),hi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),hi([{type:"Float32",name:"offsetX"}]),hi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var fu={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},va=24,Mf=function(A,D,Y,le,Te){var Ce,Ne,Ze=8*Te-le-1,st=(1<<Ze)-1,_t=st>>1,kt=-7,It=Te-1,Vt=-1,Bt=A[D+It];for(It+=Vt,Ce=Bt&(1<<-kt)-1,Bt>>=-kt,kt+=Ze;kt>0;Ce=256*Ce+A[D+It],It+=Vt,kt-=8);for(Ne=Ce&(1<<-kt)-1,Ce>>=-kt,kt+=le;kt>0;Ne=256*Ne+A[D+It],It+=Vt,kt-=8);if(Ce===0)Ce=1-_t;else{if(Ce===st)return Ne?NaN:1/0*(Bt?-1:1);Ne+=Math.pow(2,le),Ce-=_t}return(Bt?-1:1)*Ne*Math.pow(2,Ce-le)},Sf=function(A,D,Y,le,Te,Ce){var Ne,Ze,st,_t=8*Ce-Te-1,kt=(1<<_t)-1,It=kt>>1,Vt=Te===23?Math.pow(2,-24)-Math.pow(2,-77):0,Bt=0,nn=1,un=D<0||D===0&&1/D<0?1:0;for(D=Math.abs(D),isNaN(D)||D===1/0?(Ze=isNaN(D)?1:0,Ne=kt):(Ne=Math.floor(Math.log(D)/Math.LN2),D*(st=Math.pow(2,-Ne))<1&&(Ne--,st*=2),(D+=Ne+It>=1?Vt/st:Vt*Math.pow(2,1-It))*st>=2&&(Ne++,st/=2),Ne+It>=kt?(Ze=0,Ne=kt):Ne+It>=1?(Ze=(D*st-1)*Math.pow(2,Te),Ne+=It):(Ze=D*Math.pow(2,It-1)*Math.pow(2,Te),Ne=0));Te>=8;A[Y+Bt]=255&Ze,Bt+=nn,Ze/=256,Te-=8);for(Ne=Ne<<Te|Ze,_t+=Te;_t>0;A[Y+Bt]=255&Ne,Bt+=nn,Ne/=256,_t-=8);A[Y+Bt-nn]|=128*un},qu=wi;function wi(A){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(A)?A:new Uint8Array(A||0),this.pos=0,this.type=0,this.length=this.buf.length}wi.Varint=0,wi.Fixed64=1,wi.Bytes=2,wi.Fixed32=5;var Pc=4294967296,Ef=1/Pc,Lf=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function el(A){return A.type===wi.Bytes?A.readVarint()+A.pos:A.pos+1}function Nl(A,D,Y){return Y?4294967296*D+(A>>>0):4294967296*(D>>>0)+(A>>>0)}function Cf(A,D,Y){var le=D<=16383?1:D<=2097151?2:D<=268435455?3:Math.floor(Math.log(D)/(7*Math.LN2));Y.realloc(le);for(var Te=Y.pos-1;Te>=A;Te--)Y.buf[Te+le]=Y.buf[Te]}function Dp(A,D){for(var Y=0;Y<A.length;Y++)D.writeVarint(A[Y])}function Rp(A,D){for(var Y=0;Y<A.length;Y++)D.writeSVarint(A[Y])}function Fp(A,D){for(var Y=0;Y<A.length;Y++)D.writeFloat(A[Y])}function Bp(A,D){for(var Y=0;Y<A.length;Y++)D.writeDouble(A[Y])}function Np(A,D){for(var Y=0;Y<A.length;Y++)D.writeBoolean(A[Y])}function jp(A,D){for(var Y=0;Y<A.length;Y++)D.writeFixed32(A[Y])}function Up(A,D){for(var Y=0;Y<A.length;Y++)D.writeSFixed32(A[Y])}function Vp(A,D){for(var Y=0;Y<A.length;Y++)D.writeFixed64(A[Y])}function qp(A,D){for(var Y=0;Y<A.length;Y++)D.writeSFixed64(A[Y])}function Hu(A,D){return(A[D]|A[D+1]<<8|A[D+2]<<16)+16777216*A[D+3]}function jl(A,D,Y){A[Y]=D,A[Y+1]=D>>>8,A[Y+2]=D>>>16,A[Y+3]=D>>>24}function Of(A,D){return(A[D]|A[D+1]<<8|A[D+2]<<16)+(A[D+3]<<24)}wi.prototype={destroy:function(){this.buf=null},readFields:function(A,D,Y){for(Y=Y||this.length;this.pos<Y;){var le=this.readVarint(),Te=le>>3,Ce=this.pos;this.type=7&le,A(Te,D,this),this.pos===Ce&&this.skip(le)}return D},readMessage:function(A,D){return this.readFields(A,D,this.readVarint()+this.pos)},readFixed32:function(){var A=Hu(this.buf,this.pos);return this.pos+=4,A},readSFixed32:function(){var A=Of(this.buf,this.pos);return this.pos+=4,A},readFixed64:function(){var A=Hu(this.buf,this.pos)+Hu(this.buf,this.pos+4)*Pc;return this.pos+=8,A},readSFixed64:function(){var A=Hu(this.buf,this.pos)+Of(this.buf,this.pos+4)*Pc;return this.pos+=8,A},readFloat:function(){var A=Mf(this.buf,this.pos,!0,23,4);return this.pos+=4,A},readDouble:function(){var A=Mf(this.buf,this.pos,!0,52,8);return this.pos+=8,A},readVarint:function(A){var D,Y,le=this.buf;return D=127&(Y=le[this.pos++]),Y<128?D:(D|=(127&(Y=le[this.pos++]))<<7,Y<128?D:(D|=(127&(Y=le[this.pos++]))<<14,Y<128?D:(D|=(127&(Y=le[this.pos++]))<<21,Y<128?D:function(Te,Ce,Ne){var Ze,st,_t=Ne.buf;if(Ze=(112&(st=_t[Ne.pos++]))>>4,st<128||(Ze|=(127&(st=_t[Ne.pos++]))<<3,st<128)||(Ze|=(127&(st=_t[Ne.pos++]))<<10,st<128)||(Ze|=(127&(st=_t[Ne.pos++]))<<17,st<128)||(Ze|=(127&(st=_t[Ne.pos++]))<<24,st<128)||(Ze|=(1&(st=_t[Ne.pos++]))<<31,st<128))return Nl(Te,Ze,Ce);throw new Error("Expected varint not more than 10 bytes")}(D|=(15&(Y=le[this.pos]))<<28,A,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var A=this.readVarint();return A%2==1?(A+1)/-2:A/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var A=this.readVarint()+this.pos,D=this.pos;return this.pos=A,A-D>=12&&Lf?function(Y,le,Te){return Lf.decode(Y.subarray(le,Te))}(this.buf,D,A):function(Y,le,Te){for(var Ce="",Ne=le;Ne<Te;){var Ze,st,_t,kt=Y[Ne],It=null,Vt=kt>239?4:kt>223?3:kt>191?2:1;if(Ne+Vt>Te)break;Vt===1?kt<128&&(It=kt):Vt===2?(192&(Ze=Y[Ne+1]))==128&&(It=(31&kt)<<6|63&Ze)<=127&&(It=null):Vt===3?(Ze=Y[Ne+1],st=Y[Ne+2],(192&Ze)==128&&(192&st)==128&&((It=(15&kt)<<12|(63&Ze)<<6|63&st)<=2047||It>=55296&&It<=57343)&&(It=null)):Vt===4&&(Ze=Y[Ne+1],st=Y[Ne+2],_t=Y[Ne+3],(192&Ze)==128&&(192&st)==128&&(192&_t)==128&&((It=(15&kt)<<18|(63&Ze)<<12|(63&st)<<6|63&_t)<=65535||It>=1114112)&&(It=null)),It===null?(It=65533,Vt=1):It>65535&&(It-=65536,Ce+=String.fromCharCode(It>>>10&1023|55296),It=56320|1023&It),Ce+=String.fromCharCode(It),Ne+=Vt}return Ce}(this.buf,D,A)},readBytes:function(){var A=this.readVarint()+this.pos,D=this.buf.subarray(this.pos,A);return this.pos=A,D},readPackedVarint:function(A,D){if(this.type!==wi.Bytes)return A.push(this.readVarint(D));var Y=el(this);for(A=A||[];this.pos<Y;)A.push(this.readVarint(D));return A},readPackedSVarint:function(A){if(this.type!==wi.Bytes)return A.push(this.readSVarint());var D=el(this);for(A=A||[];this.pos<D;)A.push(this.readSVarint());return A},readPackedBoolean:function(A){if(this.type!==wi.Bytes)return A.push(this.readBoolean());var D=el(this);for(A=A||[];this.pos<D;)A.push(this.readBoolean());return A},readPackedFloat:function(A){if(this.type!==wi.Bytes)return A.push(this.readFloat());var D=el(this);for(A=A||[];this.pos<D;)A.push(this.readFloat());return A},readPackedDouble:function(A){if(this.type!==wi.Bytes)return A.push(this.readDouble());var D=el(this);for(A=A||[];this.pos<D;)A.push(this.readDouble());return A},readPackedFixed32:function(A){if(this.type!==wi.Bytes)return A.push(this.readFixed32());var D=el(this);for(A=A||[];this.pos<D;)A.push(this.readFixed32());return A},readPackedSFixed32:function(A){if(this.type!==wi.Bytes)return A.push(this.readSFixed32());var D=el(this);for(A=A||[];this.pos<D;)A.push(this.readSFixed32());return A},readPackedFixed64:function(A){if(this.type!==wi.Bytes)return A.push(this.readFixed64());var D=el(this);for(A=A||[];this.pos<D;)A.push(this.readFixed64());return A},readPackedSFixed64:function(A){if(this.type!==wi.Bytes)return A.push(this.readSFixed64());var D=el(this);for(A=A||[];this.pos<D;)A.push(this.readSFixed64());return A},skip:function(A){var D=7&A;if(D===wi.Varint)for(;this.buf[this.pos++]>127;);else if(D===wi.Bytes)this.pos=this.readVarint()+this.pos;else if(D===wi.Fixed32)this.pos+=4;else{if(D!==wi.Fixed64)throw new Error("Unimplemented type: "+D);this.pos+=8}},writeTag:function(A,D){this.writeVarint(A<<3|D)},realloc:function(A){for(var D=this.length||16;D<this.pos+A;)D*=2;if(D!==this.length){var Y=new Uint8Array(D);Y.set(this.buf),this.buf=Y,this.length=D}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(A){this.realloc(4),jl(this.buf,A,this.pos),this.pos+=4},writeSFixed32:function(A){this.realloc(4),jl(this.buf,A,this.pos),this.pos+=4},writeFixed64:function(A){this.realloc(8),jl(this.buf,-1&A,this.pos),jl(this.buf,Math.floor(A*Ef),this.pos+4),this.pos+=8},writeSFixed64:function(A){this.realloc(8),jl(this.buf,-1&A,this.pos),jl(this.buf,Math.floor(A*Ef),this.pos+4),this.pos+=8},writeVarint:function(A){(A=+A||0)>268435455||A<0?function(D,Y){var le,Te;if(D>=0?(le=D%4294967296|0,Te=D/4294967296|0):(Te=~(-D/4294967296),4294967295^(le=~(-D%4294967296))?le=le+1|0:(le=0,Te=Te+1|0)),D>=18446744073709552e3||D<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Y.realloc(10),function(Ce,Ne,Ze){Ze.buf[Ze.pos++]=127&Ce|128,Ce>>>=7,Ze.buf[Ze.pos++]=127&Ce|128,Ce>>>=7,Ze.buf[Ze.pos++]=127&Ce|128,Ce>>>=7,Ze.buf[Ze.pos++]=127&Ce|128,Ce>>>=7,Ze.buf[Ze.pos]=127&Ce}(le,0,Y),function(Ce,Ne){var Ze=(7&Ce)<<4;Ne.buf[Ne.pos++]|=Ze|((Ce>>>=3)?128:0),Ce&&(Ne.buf[Ne.pos++]=127&Ce|((Ce>>>=7)?128:0),Ce&&(Ne.buf[Ne.pos++]=127&Ce|((Ce>>>=7)?128:0),Ce&&(Ne.buf[Ne.pos++]=127&Ce|((Ce>>>=7)?128:0),Ce&&(Ne.buf[Ne.pos++]=127&Ce|((Ce>>>=7)?128:0),Ce&&(Ne.buf[Ne.pos++]=127&Ce)))))}(Te,Y)}(A,this):(this.realloc(4),this.buf[this.pos++]=127&A|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=A>>>7&127))))},writeSVarint:function(A){this.writeVarint(A<0?2*-A-1:2*A)},writeBoolean:function(A){this.writeVarint(!!A)},writeString:function(A){A=String(A),this.realloc(4*A.length),this.pos++;var D=this.pos;this.pos=function(le,Te,Ce){for(var Ne,Ze,st=0;st<Te.length;st++){if((Ne=Te.charCodeAt(st))>55295&&Ne<57344){if(!Ze){Ne>56319||st+1===Te.length?(le[Ce++]=239,le[Ce++]=191,le[Ce++]=189):Ze=Ne;continue}if(Ne<56320){le[Ce++]=239,le[Ce++]=191,le[Ce++]=189,Ze=Ne;continue}Ne=Ze-55296<<10|Ne-56320|65536,Ze=null}else Ze&&(le[Ce++]=239,le[Ce++]=191,le[Ce++]=189,Ze=null);Ne<128?le[Ce++]=Ne:(Ne<2048?le[Ce++]=Ne>>6|192:(Ne<65536?le[Ce++]=Ne>>12|224:(le[Ce++]=Ne>>18|240,le[Ce++]=Ne>>12&63|128),le[Ce++]=Ne>>6&63|128),le[Ce++]=63&Ne|128)}return Ce}(this.buf,A,this.pos);var Y=this.pos-D;Y>=128&&Cf(D,Y,this),this.pos=D-1,this.writeVarint(Y),this.pos+=Y},writeFloat:function(A){this.realloc(4),Sf(this.buf,A,this.pos,!0,23,4),this.pos+=4},writeDouble:function(A){this.realloc(8),Sf(this.buf,A,this.pos,!0,52,8),this.pos+=8},writeBytes:function(A){var D=A.length;this.writeVarint(D),this.realloc(D);for(var Y=0;Y<D;Y++)this.buf[this.pos++]=A[Y]},writeRawMessage:function(A,D){this.pos++;var Y=this.pos;A(D,this);var le=this.pos-Y;le>=128&&Cf(Y,le,this),this.pos=Y-1,this.writeVarint(le),this.pos+=le},writeMessage:function(A,D,Y){this.writeTag(A,wi.Bytes),this.writeRawMessage(D,Y)},writePackedVarint:function(A,D){D.length&&this.writeMessage(A,Dp,D)},writePackedSVarint:function(A,D){D.length&&this.writeMessage(A,Rp,D)},writePackedBoolean:function(A,D){D.length&&this.writeMessage(A,Np,D)},writePackedFloat:function(A,D){D.length&&this.writeMessage(A,Fp,D)},writePackedDouble:function(A,D){D.length&&this.writeMessage(A,Bp,D)},writePackedFixed32:function(A,D){D.length&&this.writeMessage(A,jp,D)},writePackedSFixed32:function(A,D){D.length&&this.writeMessage(A,Up,D)},writePackedFixed64:function(A,D){D.length&&this.writeMessage(A,Vp,D)},writePackedSFixed64:function(A,D){D.length&&this.writeMessage(A,qp,D)},writeBytesField:function(A,D){this.writeTag(A,wi.Bytes),this.writeBytes(D)},writeFixed32Field:function(A,D){this.writeTag(A,wi.Fixed32),this.writeFixed32(D)},writeSFixed32Field:function(A,D){this.writeTag(A,wi.Fixed32),this.writeSFixed32(D)},writeFixed64Field:function(A,D){this.writeTag(A,wi.Fixed64),this.writeFixed64(D)},writeSFixed64Field:function(A,D){this.writeTag(A,wi.Fixed64),this.writeSFixed64(D)},writeVarintField:function(A,D){this.writeTag(A,wi.Varint),this.writeVarint(D)},writeSVarintField:function(A,D){this.writeTag(A,wi.Varint),this.writeSVarint(D)},writeStringField:function(A,D){this.writeTag(A,wi.Bytes),this.writeString(D)},writeFloatField:function(A,D){this.writeTag(A,wi.Fixed32),this.writeFloat(D)},writeDoubleField:function(A,D){this.writeTag(A,wi.Fixed64),this.writeDouble(D)},writeBooleanField:function(A,D){this.writeVarintField(A,!!D)}};var Ic=3;function Hp(A,D,Y){A===1&&Y.readMessage(Gp,D)}function Gp(A,D,Y){if(A===3){var le=Y.readMessage(Wp,{}),Te=le.id,Ce=le.bitmap,Ne=le.width,Ze=le.height,st=le.left,_t=le.top,kt=le.advance;D.push({id:Te,bitmap:new Ml({width:Ne+2*Ic,height:Ze+2*Ic},Ce),metrics:{width:Ne,height:Ze,left:st,top:_t,advance:kt}})}}function Wp(A,D,Y){A===1?D.id=Y.readVarint():A===2?D.bitmap=Y.readBytes():A===3?D.width=Y.readVarint():A===4?D.height=Y.readVarint():A===5?D.left=Y.readSVarint():A===6?D.top=Y.readSVarint():A===7&&(D.advance=Y.readVarint())}var Pf=Ic;function If(A){for(var D=0,Y=0,le=0,Te=A;le<Te.length;le+=1){var Ce=Te[le];D+=Ce.w*Ce.h,Y=Math.max(Y,Ce.w)}A.sort(function(un,kn){return kn.h-un.h});for(var Ne=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(D/.95)),Y),h:1/0}],Ze=0,st=0,_t=0,kt=A;_t<kt.length;_t+=1)for(var It=kt[_t],Vt=Ne.length-1;Vt>=0;Vt--){var Bt=Ne[Vt];if(!(It.w>Bt.w||It.h>Bt.h)){if(It.x=Bt.x,It.y=Bt.y,st=Math.max(st,It.y+It.h),Ze=Math.max(Ze,It.x+It.w),It.w===Bt.w&&It.h===Bt.h){var nn=Ne.pop();Vt<Ne.length&&(Ne[Vt]=nn)}else It.h===Bt.h?(Bt.x+=It.w,Bt.w-=It.w):It.w===Bt.w?(Bt.y+=It.h,Bt.h-=It.h):(Ne.push({x:Bt.x+It.w,y:Bt.y,w:Bt.w-It.w,h:It.h}),Bt.y+=It.h,Bt.h-=It.h);break}}return{w:Ze,h:st,fill:D/(Ze*st)||0}}var _o=1,Gu=function(A,D){var Y=D.pixelRatio,le=D.version,Te=D.stretchX,Ce=D.stretchY,Ne=D.content;this.paddedRect=A,this.pixelRatio=Y,this.stretchX=Te,this.stretchY=Ce,this.content=Ne,this.version=le},hu={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};hu.tl.get=function(){return[this.paddedRect.x+_o,this.paddedRect.y+_o]},hu.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-_o,this.paddedRect.y+this.paddedRect.h-_o]},hu.tlbr.get=function(){return this.tl.concat(this.br)},hu.displaySize.get=function(){return[(this.paddedRect.w-2*_o)/this.pixelRatio,(this.paddedRect.h-2*_o)/this.pixelRatio]},Object.defineProperties(Gu.prototype,hu);var pu=function(A,D){var Y={},le={};this.haveRenderCallbacks=[];var Te=[];this.addImages(A,Y,Te),this.addImages(D,le,Te);var Ce=If(Te),Ne=Ce.w,Ze=Ce.h,st=new lo({width:Ne||1,height:Ze||1});for(var _t in A){var kt=A[_t],It=Y[_t].paddedRect;lo.copy(kt.data,st,{x:0,y:0},{x:It.x+_o,y:It.y+_o},kt.data)}for(var Vt in D){var Bt=D[Vt],nn=le[Vt].paddedRect,un=nn.x+_o,kn=nn.y+_o,bn=Bt.data.width,In=Bt.data.height;lo.copy(Bt.data,st,{x:0,y:0},{x:un,y:kn},Bt.data),lo.copy(Bt.data,st,{x:0,y:In-1},{x:un,y:kn-1},{width:bn,height:1}),lo.copy(Bt.data,st,{x:0,y:0},{x:un,y:kn+In},{width:bn,height:1}),lo.copy(Bt.data,st,{x:bn-1,y:0},{x:un-1,y:kn},{width:1,height:In}),lo.copy(Bt.data,st,{x:0,y:0},{x:un+bn,y:kn},{width:1,height:In})}this.image=st,this.iconPositions=Y,this.patternPositions=le};pu.prototype.addImages=function(A,D,Y){for(var le in A){var Te=A[le],Ce={x:0,y:0,w:Te.data.width+2*_o,h:Te.data.height+2*_o};Y.push(Ce),D[le]=new Gu(Ce,Te),Te.hasRenderCallback&&this.haveRenderCallbacks.push(le)}},pu.prototype.patchUpdatedImages=function(A,D){for(var Y in A.dispatchRenderCallbacks(this.haveRenderCallbacks),A.updatedImages)this.patchUpdatedImage(this.iconPositions[Y],A.getImage(Y),D),this.patchUpdatedImage(this.patternPositions[Y],A.getImage(Y),D)},pu.prototype.patchUpdatedImage=function(A,D,Y){if(A&&D&&A.version!==D.version){A.version=D.version;var le=A.tl,Te=le[0],Ce=le[1];Y.update(D.data,void 0,{x:Te,y:Ce})}},_r("ImagePosition",Gu),_r("ImageAtlas",pu);var Vo={horizontal:1,vertical:2,horizontalOnly:3},du=-17,Ul=function(){this.scale=1,this.fontStack="",this.imageName=null};Ul.forText=function(A,D){var Y=new Ul;return Y.scale=A||1,Y.fontStack=D,Y},Ul.forImage=function(A){var D=new Ul;return D.imageName=A,D};var za=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Wu(A,D,Y,le,Te,Ce,Ne,Ze,st,_t,kt,It,Vt,Bt,nn,un){var kn,bn=za.fromFeature(A,Te);It===Vo.vertical&&bn.verticalizePunctuation();var In=ca.processBidirectionalText,Rn=ca.processStyledBidirectionalText;if(In&&bn.sections.length===1){kn=[];for(var Vn=0,Jn=In(bn.toString(),zc(bn,_t,Ce,D,le,Bt,nn));Vn<Jn.length;Vn+=1){var nr=Jn[Vn],dr=new za;dr.text=nr,dr.sections=bn.sections;for(var hr=0;hr<nr.length;hr++)dr.sectionIndex.push(0);kn.push(dr)}}else if(Rn){kn=[];for(var yr=0,br=Rn(bn.text,bn.sectionIndex,zc(bn,_t,Ce,D,le,Bt,nn));yr<br.length;yr+=1){var Dr=br[yr],Sr=new za;Sr.text=Dr[0],Sr.sectionIndex=Dr[1],Sr.sections=bn.sections,kn.push(Sr)}}else kn=function(Mr,Yr){for(var Br=[],vi=Mr.text,Ir=0,fi=0,Ti=Yr;fi<Ti.length;fi+=1){var Mi=Ti[fi];Br.push(Mr.substring(Ir,Mi)),Ir=Mi}return Ir<vi.length&&Br.push(Mr.substring(Ir,vi.length)),Br}(bn,zc(bn,_t,Ce,D,le,Bt,nn));var zr=[],Lr={positionedLines:zr,text:bn.toString(),top:kt[1],bottom:kt[1],left:kt[0],right:kt[0],writingMode:It,iconsInText:!1,verticalizable:!1};return function(Mr,Yr,Br,vi,Ir,fi,Ti,Mi,Si,mi,ea,Oi){for(var ha=0,Aa=du,ma=0,Xa=0,ya=Mi==="right"?1:Mi==="left"?0:.5,ia=0,xa=0,pa=Ir;xa<pa.length;xa+=1){var aa=pa[xa];aa.trim();var Nr=aa.getMaxScale(),Kr=(Nr-1)*va,Ui={positionedGlyphs:[],lineOffset:0};Mr.positionedLines[ia]=Ui;var di=Ui.positionedGlyphs,zi=0;if(aa.length()){for(var Ci=0;Ci<aa.length();Ci++){var ei=aa.getSection(Ci),Vi=aa.getSectionIndex(Ci),Za=aa.getCharCode(Ci),To=0,Da=null,zs=null,rl=null,da=va,Ds=!(Si===Vo.horizontal||!ea&&!mo(Za)||ea&&(Yu[Za]||Bo(Za)));if(ei.imageName){var ys=vi[ei.imageName];if(!ys)continue;rl=ei.imageName,Mr.iconsInText=Mr.iconsInText||!0,zs=ys.paddedRect;var xs=ys.displaySize;ei.scale=ei.scale*va/Oi,Da={width:xs[0],height:xs[1],left:_o,top:-Pf,advance:Ds?xs[1]:xs[0]},To=Kr+(va-xs[1]*ei.scale),da=Da.advance;var Cl=Ds?xs[0]*ei.scale-va*Nr:xs[1]*ei.scale-va*Nr;Cl>0&&Cl>zi&&(zi=Cl)}else{var nc=Br[ei.fontStack],Ol=nc&&nc[Za];if(Ol&&Ol.rect)zs=Ol.rect,Da=Ol.metrics;else{var rc=Yr[ei.fontStack],yu=rc&&rc[Za];if(!yu)continue;Da=yu.metrics}To=(Nr-ei.scale)*va}Ds?(Mr.verticalizable=!0,di.push({glyph:Za,imageName:rl,x:ha,y:Aa+To,vertical:Ds,scale:ei.scale,fontStack:ei.fontStack,sectionIndex:Vi,metrics:Da,rect:zs}),ha+=da*ei.scale+mi):(di.push({glyph:Za,imageName:rl,x:ha,y:Aa+To,vertical:Ds,scale:ei.scale,fontStack:ei.fontStack,sectionIndex:Vi,metrics:Da,rect:zs}),ha+=Da.advance*ei.scale+mi)}if(di.length!==0){var Hc=ha-mi;ma=Math.max(Hc,ma),Xp(di,0,di.length-1,ya,zi)}ha=0;var ic=fi*Nr+zi;Ui.lineOffset=Math.max(zi,Kr),Aa+=ic,Xa=Math.max(ic,Xa),++ia}else Aa+=fi,++ia}var Jl=Aa-du,ac=Dc(Ti),oc=ac.horizontalAlign,xu=ac.verticalAlign;(function(Gc,bu,Pl,$l,sc,lc,Ql,uc,cc){var _u=(bu-Pl)*sc,wu=0;wu=lc!==Ql?-uc*$l-du:(-$l*cc+.5)*Ql;for(var Il=0,Tu=Gc;Il<Tu.length;Il+=1)for(var zl=0,ku=Tu[Il].positionedGlyphs;zl<ku.length;zl+=1){var Au=ku[zl];Au.x+=_u,Au.y+=wu}})(Mr.positionedLines,ya,oc,xu,ma,Xa,fi,Jl,Ir.length),Mr.top+=-xu*Jl,Mr.bottom=Mr.top+Jl,Mr.left+=-oc*ma,Mr.right=Mr.left+ma}(Lr,D,Y,le,kn,Ne,Ze,st,It,_t,Vt,un),!function(Mr){for(var Yr=0,Br=Mr;Yr<Br.length;Yr+=1)if(Br[Yr].positionedGlyphs.length!==0)return!1;return!0}(zr)&&Lr}za.fromFeature=function(A,D){for(var Y=new za,le=0;le<A.sections.length;le++){var Te=A.sections[le];Te.image?Y.addImageSection(Te):Y.addTextSection(Te,D)}return Y},za.prototype.length=function(){return this.text.length},za.prototype.getSection=function(A){return this.sections[this.sectionIndex[A]]},za.prototype.getSectionIndex=function(A){return this.sectionIndex[A]},za.prototype.getCharCode=function(A){return this.text.charCodeAt(A)},za.prototype.verticalizePunctuation=function(){this.text=function(A){for(var D="",Y=0;Y<A.length;Y++){var le=A.charCodeAt(Y+1)||null,Te=A.charCodeAt(Y-1)||null;le&&Ni(le)&&!fu[A[Y+1]]||Te&&Ni(Te)&&!fu[A[Y-1]]||!fu[A[Y]]?D+=A[Y]:D+=fu[A[Y]]}return D}(this.text)},za.prototype.trim=function(){for(var A=0,D=0;D<this.text.length&&Yu[this.text.charCodeAt(D)];D++)A++;for(var Y=this.text.length,le=this.text.length-1;le>=0&&le>=A&&Yu[this.text.charCodeAt(le)];le--)Y--;this.text=this.text.substring(A,Y),this.sectionIndex=this.sectionIndex.slice(A,Y)},za.prototype.substring=function(A,D){var Y=new za;return Y.text=this.text.substring(A,D),Y.sectionIndex=this.sectionIndex.slice(A,D),Y.sections=this.sections,Y},za.prototype.toString=function(){return this.text},za.prototype.getMaxScale=function(){var A=this;return this.sectionIndex.reduce(function(D,Y){return Math.max(D,A.sections[Y].scale)},0)},za.prototype.addTextSection=function(A,D){this.text+=A.text,this.sections.push(Ul.forText(A.scale,A.fontStack||D));for(var Y=this.sections.length-1,le=0;le<A.text.length;++le)this.sectionIndex.push(Y)},za.prototype.addImageSection=function(A){var D=A.image?A.image.name:"";if(D.length!==0){var Y=this.getNextImageSectionCharCode();Y?(this.text+=String.fromCharCode(Y),this.sections.push(Ul.forImage(D)),this.sectionIndex.push(this.sections.length-1)):E("Reached maximum number of images 6401")}else E("Can't add FormattedSection with an empty image.")},za.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Yu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},wo={};function zf(A,D,Y,le,Te,Ce){if(D.imageName){var Ne=le[D.imageName];return Ne?Ne.displaySize[0]*D.scale*va/Ce+Te:0}var Ze=Y[D.fontStack],st=Ze&&Ze[A];return st?st.metrics.advance*D.scale+Te:0}function Df(A,D,Y,le){var Te=Math.pow(A-D,2);return le?A<D?Te/2:2*Te:Te+Math.abs(Y)*Y}function Yp(A,D,Y){var le=0;return A===10&&(le-=1e4),Y&&(le+=150),A!==40&&A!==65288||(le+=50),D!==41&&D!==65289||(le+=50),le}function Rf(A,D,Y,le,Te,Ce){for(var Ne=null,Ze=Df(D,Y,Te,Ce),st=0,_t=le;st<_t.length;st+=1){var kt=_t[st],It=Df(D-kt.x,Y,Te,Ce)+kt.badness;It<=Ze&&(Ne=kt,Ze=It)}return{index:A,x:D,priorBreak:Ne,badness:Ze}}function Ff(A){return A?Ff(A.priorBreak).concat(A.index):[]}function zc(A,D,Y,le,Te,Ce,Ne){if(Ce!=="point")return[];if(!A)return[];for(var Ze=[],st=function(kn,bn,In,Rn,Vn,Jn){for(var nr=0,dr=0;dr<kn.length();dr++){var hr=kn.getSection(dr);nr+=zf(kn.getCharCode(dr),hr,Rn,Vn,bn,Jn)}return nr/Math.max(1,Math.ceil(nr/In))}(A,D,Y,le,Te,Ne),_t=A.text.indexOf("")>=0,kt=0,It=0;It<A.length();It++){var Vt=A.getSection(It),Bt=A.getCharCode(It);if(Yu[Bt]||(kt+=zf(Bt,Vt,le,Te,D,Ne)),It<A.length()-1){var nn=!((un=Bt)<11904||!(gr["Bopomofo Extended"](un)||gr.Bopomofo(un)||gr["CJK Compatibility Forms"](un)||gr["CJK Compatibility Ideographs"](un)||gr["CJK Compatibility"](un)||gr["CJK Radicals Supplement"](un)||gr["CJK Strokes"](un)||gr["CJK Symbols and Punctuation"](un)||gr["CJK Unified Ideographs Extension A"](un)||gr["CJK Unified Ideographs"](un)||gr["Enclosed CJK Letters and Months"](un)||gr["Halfwidth and Fullwidth Forms"](un)||gr.Hiragana(un)||gr["Ideographic Description Characters"](un)||gr["Kangxi Radicals"](un)||gr["Katakana Phonetic Extensions"](un)||gr.Katakana(un)||gr["Vertical Forms"](un)||gr["Yi Radicals"](un)||gr["Yi Syllables"](un)));(wo[Bt]||nn||Vt.imageName)&&Ze.push(Rf(It+1,kt,st,Ze,Yp(Bt,A.getCharCode(It+1),nn&&_t),!1))}}var un;return Ff(Rf(A.length(),kt,st,Ze,0,!0))}function Dc(A){var D=.5,Y=.5;switch(A){case"right":case"top-right":case"bottom-right":D=1;break;case"left":case"top-left":case"bottom-left":D=0}switch(A){case"bottom":case"bottom-right":case"bottom-left":Y=1;break;case"top":case"top-right":case"top-left":Y=0}return{horizontalAlign:D,verticalAlign:Y}}function Xp(A,D,Y,le,Te){if(le||Te)for(var Ce=A[Y],Ne=Ce.metrics.advance*Ce.scale,Ze=(A[Y].x+Ne)*le,st=D;st<=Y;st++)A[st].x-=Ze,A[st].y+=Te}function Bf(A,D,Y,le,Te,Ce){var Ne,Ze=A.image;if(Ze.content){var st=Ze.content,_t=Ze.pixelRatio||1;Ne=[st[0]/_t,st[1]/_t,Ze.displaySize[0]-st[2]/_t,Ze.displaySize[1]-st[3]/_t]}var kt,It,Vt,Bt,nn=D.left*Ce,un=D.right*Ce;Y==="width"||Y==="both"?(Bt=Te[0]+nn-le[3],It=Te[0]+un+le[1]):It=(Bt=Te[0]+(nn+un-Ze.displaySize[0])/2)+Ze.displaySize[0];var kn=D.top*Ce,bn=D.bottom*Ce;return Y==="height"||Y==="both"?(kt=Te[1]+kn-le[0],Vt=Te[1]+bn+le[2]):Vt=(kt=Te[1]+(kn+bn-Ze.displaySize[1])/2)+Ze.displaySize[1],{image:Ze,top:kt,right:It,bottom:Vt,left:Bt,collisionPadding:Ne}}wo[10]=!0,wo[32]=!0,wo[38]=!0,wo[40]=!0,wo[41]=!0,wo[43]=!0,wo[45]=!0,wo[47]=!0,wo[173]=!0,wo[183]=!0,wo[8203]=!0,wo[8208]=!0,wo[8211]=!0,wo[8231]=!0;var Vl=function(A){function D(Y,le,Te,Ce){A.call(this,Y,le),this.angle=Te,Ce!==void 0&&(this.segment=Ce)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.clone=function(){return new D(this.x,this.y,this.angle,this.segment)},D}(t);_r("Anchor",Vl);var Is=128;function Rc(A,D){var Y=D.expression;if(Y.kind==="constant")return{kind:"constant",layoutSize:Y.evaluate(new Vr(A+1))};if(Y.kind==="source")return{kind:"source"};for(var le=Y.zoomStops,Te=Y.interpolationType,Ce=0;Ce<le.length&&le[Ce]<=A;)Ce++;for(var Ne=Ce=Math.max(0,Ce-1);Ne<le.length&&le[Ne]<A+1;)Ne++;Ne=Math.min(le.length-1,Ne);var Ze=le[Ce],st=le[Ne];return Y.kind==="composite"?{kind:"composite",minZoom:Ze,maxZoom:st,interpolationType:Te}:{kind:"camera",minZoom:Ze,maxZoom:st,minSize:Y.evaluate(new Vr(Ze)),maxSize:Y.evaluate(new Vr(st)),interpolationType:Te}}function Nf(A,D,Y){var le=D.uSize,Te=D.uSizeT,Ce=Y.lowerSize,Ne=Y.upperSize;return A.kind==="source"?Ce/Is:A.kind==="composite"?Or(Ce/Is,Ne/Is,Te):le}function jf(A,D){var Y=0,le=0;if(A.kind==="constant")le=A.layoutSize;else if(A.kind!=="source"){var Te=A.interpolationType,Ce=A.minZoom,Ne=A.maxZoom,Ze=Te?u(Fi.interpolationFactor(Te,D,Ce,Ne),0,1):0;A.kind==="camera"?le=Or(A.minSize,A.maxSize,Ze):Y=Ze}return{uSizeT:Y,uSize:le}}var Zp=Object.freeze({__proto__:null,getSizeData:Rc,evaluateSizeForFeature:Nf,evaluateSizeForZoom:jf,SIZE_PACK_FACTOR:Is});function Uf(A,D,Y,le,Te){if(D.segment===void 0)return!0;for(var Ce=D,Ne=D.segment+1,Ze=0;Ze>-Y/2;){if(--Ne<0)return!1;Ze-=A[Ne].dist(Ce),Ce=A[Ne]}Ze+=A[Ne].dist(A[Ne+1]),Ne++;for(var st=[],_t=0;Ze<Y/2;){var kt=A[Ne-1],It=A[Ne],Vt=A[Ne+1];if(!Vt)return!1;var Bt=kt.angleTo(It)-It.angleTo(Vt);for(Bt=Math.abs((Bt+3*Math.PI)%(2*Math.PI)-Math.PI),st.push({distance:Ze,angleDelta:Bt}),_t+=Bt;Ze-st[0].distance>le;)_t-=st.shift().angleDelta;if(_t>Te)return!1;Ne++,Ze+=It.dist(Vt)}return!0}function Vf(A){for(var D=0,Y=0;Y<A.length-1;Y++)D+=A[Y].dist(A[Y+1]);return D}function qf(A,D,Y){return A?.6*D*Y:0}function Hf(A,D){return Math.max(A?A.right-A.left:0,D?D.right-D.left:0)}function Kp(A,D,Y,le,Te,Ce){for(var Ne=qf(Y,Te,Ce),Ze=Hf(Y,le)*Ce,st=0,_t=Vf(A)/2,kt=0;kt<A.length-1;kt++){var It=A[kt],Vt=A[kt+1],Bt=It.dist(Vt);if(st+Bt>_t){var nn=(_t-st)/Bt,un=Or(It.x,Vt.x,nn),kn=Or(It.y,Vt.y,nn),bn=new Vl(un,kn,Vt.angleTo(It),kt);return bn._round(),!Ne||Uf(A,bn,Ze,Ne,D)?bn:void 0}st+=Bt}}function Jp(A,D,Y,le,Te,Ce,Ne,Ze,st){var _t=qf(le,Ce,Ne),kt=Hf(le,Te),It=kt*Ne,Vt=A[0].x===0||A[0].x===st||A[0].y===0||A[0].y===st;return D-It<D/4&&(D=It+D/4),Gf(A,Vt?D/2*Ze%D:(kt/2+2*Ce)*Ne*Ze%D,D,_t,Y,It,Vt,!1,st)}function Gf(A,D,Y,le,Te,Ce,Ne,Ze,st){for(var _t=Ce/2,kt=Vf(A),It=0,Vt=D-Y,Bt=[],nn=0;nn<A.length-1;nn++){for(var un=A[nn],kn=A[nn+1],bn=un.dist(kn),In=kn.angleTo(un);Vt+Y<It+bn;){var Rn=((Vt+=Y)-It)/bn,Vn=Or(un.x,kn.x,Rn),Jn=Or(un.y,kn.y,Rn);if(Vn>=0&&Vn<st&&Jn>=0&&Jn<st&&Vt-_t>=0&&Vt+_t<=kt){var nr=new Vl(Vn,Jn,In,nn);nr._round(),le&&!Uf(A,nr,Ce,le,Te)||Bt.push(nr)}}It+=bn}return Ze||Bt.length||Ne||(Bt=Gf(A,It/2,Y,le,Te,Ce,Ne,!0,st)),Bt}function Wf(A,D,Y,le,Te){for(var Ce=[],Ne=0;Ne<A.length;Ne++)for(var Ze=A[Ne],st=void 0,_t=0;_t<Ze.length-1;_t++){var kt=Ze[_t],It=Ze[_t+1];kt.x<D&&It.x<D||(kt.x<D?kt=new t(D,kt.y+(It.y-kt.y)*((D-kt.x)/(It.x-kt.x)))._round():It.x<D&&(It=new t(D,kt.y+(It.y-kt.y)*((D-kt.x)/(It.x-kt.x)))._round()),kt.y<Y&&It.y<Y||(kt.y<Y?kt=new t(kt.x+(It.x-kt.x)*((Y-kt.y)/(It.y-kt.y)),Y)._round():It.y<Y&&(It=new t(kt.x+(It.x-kt.x)*((Y-kt.y)/(It.y-kt.y)),Y)._round()),kt.x>=le&&It.x>=le||(kt.x>=le?kt=new t(le,kt.y+(It.y-kt.y)*((le-kt.x)/(It.x-kt.x)))._round():It.x>=le&&(It=new t(le,kt.y+(It.y-kt.y)*((le-kt.x)/(It.x-kt.x)))._round()),kt.y>=Te&&It.y>=Te||(kt.y>=Te?kt=new t(kt.x+(It.x-kt.x)*((Te-kt.y)/(It.y-kt.y)),Te)._round():It.y>=Te&&(It=new t(kt.x+(It.x-kt.x)*((Te-kt.y)/(It.y-kt.y)),Te)._round()),st&&kt.equals(st[st.length-1])||(st=[kt],Ce.push(st)),st.push(It)))))}return Ce}var ql=_o;function Yf(A,D,Y,le){var Te=[],Ce=A.image,Ne=Ce.pixelRatio,Ze=Ce.paddedRect.w-2*ql,st=Ce.paddedRect.h-2*ql,_t=A.right-A.left,kt=A.bottom-A.top,It=Ce.stretchX||[[0,Ze]],Vt=Ce.stretchY||[[0,st]],Bt=function(fi,Ti){return fi+Ti[1]-Ti[0]},nn=It.reduce(Bt,0),un=Vt.reduce(Bt,0),kn=Ze-nn,bn=st-un,In=0,Rn=nn,Vn=0,Jn=un,nr=0,dr=kn,hr=0,yr=bn;if(Ce.content&&le){var br=Ce.content;In=Xu(It,0,br[0]),Vn=Xu(Vt,0,br[1]),Rn=Xu(It,br[0],br[2]),Jn=Xu(Vt,br[1],br[3]),nr=br[0]-In,hr=br[1]-Vn,dr=br[2]-br[0]-Rn,yr=br[3]-br[1]-Jn}var Dr=function(fi,Ti,Mi,Si){var mi=Zu(fi.stretch-In,Rn,_t,A.left),ea=Ku(fi.fixed-nr,dr,fi.stretch,nn),Oi=Zu(Ti.stretch-Vn,Jn,kt,A.top),ha=Ku(Ti.fixed-hr,yr,Ti.stretch,un),Aa=Zu(Mi.stretch-In,Rn,_t,A.left),ma=Ku(Mi.fixed-nr,dr,Mi.stretch,nn),Xa=Zu(Si.stretch-Vn,Jn,kt,A.top),ya=Ku(Si.fixed-hr,yr,Si.stretch,un),ia=new t(mi,Oi),xa=new t(Aa,Oi),pa=new t(Aa,Xa),aa=new t(mi,Xa),Nr=new t(ea/Ne,ha/Ne),Kr=new t(ma/Ne,ya/Ne),Ui=D*Math.PI/180;if(Ui){var di=Math.sin(Ui),zi=Math.cos(Ui),Ci=[zi,-di,di,zi];ia._matMult(Ci),xa._matMult(Ci),aa._matMult(Ci),pa._matMult(Ci)}var ei=fi.stretch+fi.fixed,Vi=Mi.stretch+Mi.fixed,Za=Ti.stretch+Ti.fixed,To=Si.stretch+Si.fixed;return{tl:ia,tr:xa,bl:aa,br:pa,tex:{x:Ce.paddedRect.x+ql+ei,y:Ce.paddedRect.y+ql+Za,w:Vi-ei,h:To-Za},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Nr,pixelOffsetBR:Kr,minFontScaleX:dr/Ne/_t,minFontScaleY:yr/Ne/kt,isSDF:Y}};if(le&&(Ce.stretchX||Ce.stretchY))for(var Sr=Xf(It,kn,nn),zr=Xf(Vt,bn,un),Lr=0;Lr<Sr.length-1;Lr++)for(var Mr=Sr[Lr],Yr=Sr[Lr+1],Br=0;Br<zr.length-1;Br++){var vi=zr[Br],Ir=zr[Br+1];Te.push(Dr(Mr,vi,Yr,Ir))}else Te.push(Dr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ze+1},{fixed:0,stretch:st+1}));return Te}function Xu(A,D,Y){for(var le=0,Te=0,Ce=A;Te<Ce.length;Te+=1){var Ne=Ce[Te];le+=Math.max(D,Math.min(Y,Ne[1]))-Math.max(D,Math.min(Y,Ne[0]))}return le}function Xf(A,D,Y){for(var le=[{fixed:-ql,stretch:0}],Te=0,Ce=A;Te<Ce.length;Te+=1){var Ne=Ce[Te],Ze=Ne[0],st=Ne[1],_t=le[le.length-1];le.push({fixed:Ze-_t.stretch,stretch:_t.stretch}),le.push({fixed:Ze-_t.stretch,stretch:_t.stretch+(st-Ze)})}return le.push({fixed:D+ql,stretch:Y}),le}function Zu(A,D,Y,le){return A/D*Y+le}function Ku(A,D,Y,le){return A-D*Y/le}var Ju=function(A,D,Y,le,Te,Ce,Ne,Ze,st,_t){if(this.boxStartIndex=A.length,st){var kt=Ce.top,It=Ce.bottom,Vt=Ce.collisionPadding;Vt&&(kt-=Vt[1],It+=Vt[3]);var Bt=It-kt;Bt>0&&(Bt=Math.max(10,Bt),this.circleDiameter=Bt)}else{var nn=Ce.top*Ne-Ze,un=Ce.bottom*Ne+Ze,kn=Ce.left*Ne-Ze,bn=Ce.right*Ne+Ze,In=Ce.collisionPadding;if(In&&(kn-=In[0]*Ne,nn-=In[1]*Ne,bn+=In[2]*Ne,un+=In[3]*Ne),_t){var Rn=new t(kn,nn),Vn=new t(bn,nn),Jn=new t(kn,un),nr=new t(bn,un),dr=_t*Math.PI/180;Rn._rotate(dr),Vn._rotate(dr),Jn._rotate(dr),nr._rotate(dr),kn=Math.min(Rn.x,Vn.x,Jn.x,nr.x),bn=Math.max(Rn.x,Vn.x,Jn.x,nr.x),nn=Math.min(Rn.y,Vn.y,Jn.y,nr.y),un=Math.max(Rn.y,Vn.y,Jn.y,nr.y)}A.emplaceBack(D.x,D.y,kn,nn,bn,un,Y,le,Te)}this.boxEndIndex=A.length},Hl=function(A,D){if(A===void 0&&(A=[]),D===void 0&&(D=$p),this.data=A,this.length=this.data.length,this.compare=D,this.length>0)for(var Y=(this.length>>1)-1;Y>=0;Y--)this._down(Y)};function $p(A,D){return A<D?-1:A>D?1:0}function Qp(A,D,Y){Y===void 0&&(Y=!1);for(var le=1/0,Te=1/0,Ce=-1/0,Ne=-1/0,Ze=A[0],st=0;st<Ze.length;st++){var _t=Ze[st];(!st||_t.x<le)&&(le=_t.x),(!st||_t.y<Te)&&(Te=_t.y),(!st||_t.x>Ce)&&(Ce=_t.x),(!st||_t.y>Ne)&&(Ne=_t.y)}var kt=Ce-le,It=Ne-Te,Vt=Math.min(kt,It),Bt=Vt/2,nn=new Hl([],ed);if(Vt===0)return new t(le,Te);for(var un=le;un<Ce;un+=Vt)for(var kn=Te;kn<Ne;kn+=Vt)nn.push(new Gl(un+Bt,kn+Bt,Bt,A));for(var bn=function(Vn){for(var Jn=0,nr=0,dr=0,hr=Vn[0],yr=0,br=hr.length,Dr=br-1;yr<br;Dr=yr++){var Sr=hr[yr],zr=hr[Dr],Lr=Sr.x*zr.y-zr.x*Sr.y;nr+=(Sr.x+zr.x)*Lr,dr+=(Sr.y+zr.y)*Lr,Jn+=3*Lr}return new Gl(nr/Jn,dr/Jn,0,Vn)}(A),In=nn.length;nn.length;){var Rn=nn.pop();(Rn.d>bn.d||!bn.d)&&(bn=Rn,Y&&console.log("found best %d after %d probes",Math.round(1e4*Rn.d)/1e4,In)),Rn.max-bn.d<=D||(Bt=Rn.h/2,nn.push(new Gl(Rn.p.x-Bt,Rn.p.y-Bt,Bt,A)),nn.push(new Gl(Rn.p.x+Bt,Rn.p.y-Bt,Bt,A)),nn.push(new Gl(Rn.p.x-Bt,Rn.p.y+Bt,Bt,A)),nn.push(new Gl(Rn.p.x+Bt,Rn.p.y+Bt,Bt,A)),In+=4)}return Y&&(console.log("num probes: "+In),console.log("best distance: "+bn.d)),bn.p}function ed(A,D){return D.max-A.max}function Gl(A,D,Y,le){this.p=new t(A,D),this.h=Y,this.d=function(Te,Ce){for(var Ne=!1,Ze=1/0,st=0;st<Ce.length;st++)for(var _t=Ce[st],kt=0,It=_t.length,Vt=It-1;kt<It;Vt=kt++){var Bt=_t[kt],nn=_t[Vt];Bt.y>Te.y!=nn.y>Te.y&&Te.x<(nn.x-Bt.x)*(Te.y-Bt.y)/(nn.y-Bt.y)+Bt.x&&(Ne=!Ne),Ze=Math.min(Ze,Iu(Te,Bt,nn))}return(Ne?1:-1)*Math.sqrt(Ze)}(this.p,le),this.max=this.d+this.h*Math.SQRT2}Hl.prototype.push=function(A){this.data.push(A),this.length++,this._up(this.length-1)},Hl.prototype.pop=function(){if(this.length!==0){var A=this.data[0],D=this.data.pop();return this.length--,this.length>0&&(this.data[0]=D,this._down(0)),A}},Hl.prototype.peek=function(){return this.data[0]},Hl.prototype._up=function(A){for(var D=this.data,Y=this.compare,le=D[A];A>0;){var Te=A-1>>1,Ce=D[Te];if(Y(le,Ce)>=0)break;D[A]=Ce,A=Te}D[A]=le},Hl.prototype._down=function(A){for(var D=this.data,Y=this.compare,le=this.length>>1,Te=D[A];A<le;){var Ce=1+(A<<1),Ne=D[Ce],Ze=Ce+1;if(Ze<this.length&&Y(D[Ze],Ne)<0&&(Ce=Ze,Ne=D[Ze]),Y(Ne,Te)>=0)break;D[A]=Ne,A=Ce}D[A]=Te};var Wl=7,Fc=Number.POSITIVE_INFINITY;function Zf(A,D){return D[1]!==Fc?function(Y,le,Te){var Ce=0,Ne=0;switch(le=Math.abs(le),Te=Math.abs(Te),Y){case"top-right":case"top-left":case"top":Ne=Te-Wl;break;case"bottom-right":case"bottom-left":case"bottom":Ne=-Te+Wl}switch(Y){case"top-right":case"bottom-right":case"right":Ce=-le;break;case"top-left":case"bottom-left":case"left":Ce=le}return[Ce,Ne]}(A,D[0],D[1]):function(Y,le){var Te=0,Ce=0;le<0&&(le=0);var Ne=le/Math.sqrt(2);switch(Y){case"top-right":case"top-left":Ce=Ne-Wl;break;case"bottom-right":case"bottom-left":Ce=-Ne+Wl;break;case"bottom":Ce=-le+Wl;break;case"top":Ce=le-Wl}switch(Y){case"top-right":case"bottom-right":Te=-Ne;break;case"top-left":case"bottom-left":Te=Ne;break;case"left":Te=le;break;case"right":Te=-le}return[Te,Ce]}(A,D[0])}function Bc(A){switch(A){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var gu=255,vl=gu*Is;function Kf(A,D,Y,le,Te,Ce,Ne,Ze,st,_t,kt,It,Vt,Bt,nn){var un=function(Vn,Jn,nr,dr,hr,yr,br,Dr){for(var Sr=dr.layout.get("text-rotate").evaluate(yr,{})*Math.PI/180,zr=[],Lr=0,Mr=Jn.positionedLines;Lr<Mr.length;Lr+=1)for(var Yr=Mr[Lr],Br=0,vi=Yr.positionedGlyphs;Br<vi.length;Br+=1){var Ir=vi[Br];if(Ir.rect){var fi=Ir.rect||{},Ti=Pf+1,Mi=!0,Si=1,mi=0,ea=(hr||Dr)&&Ir.vertical,Oi=Ir.metrics.advance*Ir.scale/2;if(Dr&&Jn.verticalizable){var ha=(Ir.scale-1)*va,Aa=(va-Ir.metrics.width*Ir.scale)/2;mi=Yr.lineOffset/2-(Ir.imageName?-Aa:ha)}if(Ir.imageName){var ma=br[Ir.imageName];Mi=ma.sdf,Si=ma.pixelRatio,Ti=_o/Si}var Xa=hr?[Ir.x+Oi,Ir.y]:[0,0],ya=hr?[0,0]:[Ir.x+Oi+nr[0],Ir.y+nr[1]-mi],ia=[0,0];ea&&(ia=ya,ya=[0,0]);var xa=(Ir.metrics.left-Ti)*Ir.scale-Oi+ya[0],pa=(-Ir.metrics.top-Ti)*Ir.scale+ya[1],aa=xa+fi.w*Ir.scale/Si,Nr=pa+fi.h*Ir.scale/Si,Kr=new t(xa,pa),Ui=new t(aa,pa),di=new t(xa,Nr),zi=new t(aa,Nr);if(ea){var Ci=new t(-Oi,Oi-du),ei=-Math.PI/2,Vi=va/2-Oi,Za=Ir.imageName?Vi:0,To=new t(5-du-Vi,-Za),Da=new(Function.prototype.bind.apply(t,[null].concat(ia)));Kr._rotateAround(ei,Ci)._add(To)._add(Da),Ui._rotateAround(ei,Ci)._add(To)._add(Da),di._rotateAround(ei,Ci)._add(To)._add(Da),zi._rotateAround(ei,Ci)._add(To)._add(Da)}if(Sr){var zs=Math.sin(Sr),rl=Math.cos(Sr),da=[rl,-zs,zs,rl];Kr._matMult(da),Ui._matMult(da),di._matMult(da),zi._matMult(da)}var Ds=new t(0,0),ys=new t(0,0);zr.push({tl:Kr,tr:Ui,bl:di,br:zi,tex:fi,writingMode:Jn.writingMode,glyphOffset:Xa,sectionIndex:Ir.sectionIndex,isSDF:Mi,pixelOffsetTL:Ds,pixelOffsetBR:ys,minFontScaleX:0,minFontScaleY:0})}}return zr}(0,Y,Ze,Te,Ce,Ne,le,A.allowVerticalPlacement),kn=A.textSizeData,bn=null;kn.kind==="source"?(bn=[Is*Te.layout.get("text-size").evaluate(Ne,{})])[0]>vl&&E(A.layerIds[0]+': Value for "text-size" is >= '+gu+'. Reduce your "text-size".'):kn.kind==="composite"&&((bn=[Is*Bt.compositeTextSizes[0].evaluate(Ne,{},nn),Is*Bt.compositeTextSizes[1].evaluate(Ne,{},nn)])[0]>vl||bn[1]>vl)&&E(A.layerIds[0]+': Value for "text-size" is >= '+gu+'. Reduce your "text-size".'),A.addSymbols(A.text,un,bn,Ze,Ce,Ne,_t,D,st.lineStartIndex,st.lineLength,Vt,nn);for(var In=0,Rn=kt;In<Rn.length;In+=1)It[Rn[In]]=A.text.placedSymbolArray.length-1;return 4*un.length}function Jf(A){for(var D in A)return A[D];return null}function td(A,D,Y,le){var Te=A.compareText;if(D in Te){for(var Ce=Te[D],Ne=Ce.length-1;Ne>=0;Ne--)if(le.dist(Ce[Ne])<Y)return!0}else Te[D]=[];return Te[D].push(le),!1}var nd=Bl.VectorTileFeature.types,rd=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function $u(A,D,Y,le,Te,Ce,Ne,Ze,st,_t,kt,It,Vt){var Bt=Ze?Math.min(vl,Math.round(Ze[0])):0,nn=Ze?Math.min(vl,Math.round(Ze[1])):0;A.emplaceBack(D,Y,Math.round(32*le),Math.round(32*Te),Ce,Ne,(Bt<<1)+(st?1:0),nn,16*_t,16*kt,256*It,256*Vt)}function Nc(A,D,Y){A.emplaceBack(D.x,D.y,Y),A.emplaceBack(D.x,D.y,Y),A.emplaceBack(D.x,D.y,Y),A.emplaceBack(D.x,D.y,Y)}function id(A){for(var D=0,Y=A.sections;D<Y.length;D+=1)if(na(Y[D].text))return!0;return!1}var Yl=function(A){this.layoutVertexArray=new G,this.indexArray=new xe,this.programConfigurations=A,this.segments=new jn,this.dynamicLayoutVertexArray=new q,this.opacityVertexArray=new L,this.placedSymbolArray=new Lt};Yl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Yl.prototype.upload=function(A,D,Y,le){this.isEmpty()||(Y&&(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Cp.members),this.indexBuffer=A.createIndexBuffer(this.indexArray,D),this.dynamicLayoutVertexBuffer=A.createVertexBuffer(this.dynamicLayoutVertexArray,Op.members,!0),this.opacityVertexBuffer=A.createVertexBuffer(this.opacityVertexArray,rd,!0),this.opacityVertexBuffer.itemSize=1),(Y||le)&&this.programConfigurations.upload(A))},Yl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},_r("SymbolBuffers",Yl);var vu=function(A,D,Y){this.layoutVertexArray=new A,this.layoutAttributes=D,this.indexArray=new Y,this.segments=new jn,this.collisionVertexArray=new ue};vu.prototype.upload=function(A){this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=A.createVertexBuffer(this.collisionVertexArray,Pp.members,!0)},vu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},_r("CollisionBuffers",vu);var ci=function(A){this.collisionBoxArray=A.collisionBoxArray,this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(Ne){return Ne.id}),this.index=A.index,this.pixelRatio=A.pixelRatio,this.sourceLayerIndex=A.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=_c([]),this.placementViewportMatrix=_c([]);var D=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Rc(this.zoom,D["text-size"]),this.iconSizeData=Rc(this.zoom,D["icon-size"]);var Y=this.layers[0].layout,le=Y.get("symbol-sort-key"),Te=Y.get("symbol-z-order");this.canOverlap=Y.get("text-allow-overlap")||Y.get("icon-allow-overlap")||Y.get("text-ignore-placement")||Y.get("icon-ignore-placement"),this.sortFeaturesByKey=Te!=="viewport-y"&&le.constantOr(1)!==void 0;var Ce=Te==="viewport-y"||Te==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Ce&&this.canOverlap,Y.get("symbol-placement")==="point"&&(this.writingModes=Y.get("text-writing-mode").map(function(Ne){return Vo[Ne]})),this.stateDependentLayerIds=this.layers.filter(function(Ne){return Ne.isStateDependent()}).map(function(Ne){return Ne.id}),this.sourceID=A.sourceID};ci.prototype.createArrays=function(){this.text=new Yl(new Ii(this.layers,this.zoom,function(A){return/^text/.test(A)})),this.icon=new Yl(new Ii(this.layers,this.zoom,function(A){return/^icon/.test(A)})),this.glyphOffsetArray=new jt,this.lineVertexArray=new hn,this.symbolInstances=new Ht},ci.prototype.calculateGlyphDependencies=function(A,D,Y,le,Te){for(var Ce=0;Ce<A.length;Ce++)if(D[A.charCodeAt(Ce)]=!0,(Y||le)&&Te){var Ne=fu[A.charAt(Ce)];Ne&&(D[Ne.charCodeAt(0)]=!0)}},ci.prototype.populate=function(A,D,Y){var le=this.layers[0],Te=le.layout,Ce=Te.get("text-font"),Ne=Te.get("text-field"),Ze=Te.get("icon-image"),st=(Ne.value.kind!=="constant"||Ne.value.value instanceof Wn&&!Ne.value.value.isEmpty()||Ne.value.value.toString().length>0)&&(Ce.value.kind!=="constant"||Ce.value.value.length>0),_t=Ze.value.kind!=="constant"||!!Ze.value.value||Object.keys(Ze.parameters).length>0,kt=Te.get("symbol-sort-key");if(this.features=[],st||_t){for(var It=D.iconDependencies,Vt=D.glyphDependencies,Bt=D.availableImages,nn=new Vr(this.zoom),un=0,kn=A;un<kn.length;un+=1){var bn=kn[un],In=bn.feature,Rn=bn.id,Vn=bn.index,Jn=bn.sourceLayerIndex,nr=le._featureFilter.needGeometry,dr=_i(In,nr);if(le._featureFilter.filter(nn,dr,Y)){nr||(dr.geometry=bo(In));var hr=void 0;if(st){var yr=le.getValueAndResolveTokens("text-field",dr,Y,Bt),br=Wn.factory(yr);id(br)&&(this.hasRTLText=!0),(!this.hasRTLText||hs()==="unavailable"||this.hasRTLText&&ca.isParsed())&&(hr=zp(br,le,dr))}var Dr=void 0;if(_t){var Sr=le.getValueAndResolveTokens("icon-image",dr,Y,Bt);Dr=Sr instanceof sr?Sr:sr.fromString(Sr)}if(hr||Dr){var zr=this.sortFeaturesByKey?kt.evaluate(dr,{},Y):void 0,Lr={id:Rn,text:hr,icon:Dr,index:Vn,sourceLayerIndex:Jn,geometry:dr.geometry,properties:In.properties,type:nd[In.type],sortKey:zr};if(this.features.push(Lr),Dr&&(It[Dr.name]=!0),hr){var Mr=Ce.evaluate(dr,{},Y).join(","),Yr=Te.get("text-rotation-alignment")==="map"&&Te.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Vo.vertical)>=0;for(var Br=0,vi=hr.sections;Br<vi.length;Br+=1){var Ir=vi[Br];if(Ir.image)It[Ir.image.name]=!0;else{var fi=Es(hr.toString()),Ti=Ir.fontStack||Mr,Mi=Vt[Ti]=Vt[Ti]||{};this.calculateGlyphDependencies(Ir.text,Mi,Yr,this.allowVerticalPlacement,fi)}}}}}}Te.get("symbol-placement")==="line"&&(this.features=function(Si){var mi={},ea={},Oi=[],ha=0;function Aa(zi){Oi.push(Si[zi]),ha++}function ma(zi,Ci,ei){var Vi=ea[zi];return delete ea[zi],ea[Ci]=Vi,Oi[Vi].geometry[0].pop(),Oi[Vi].geometry[0]=Oi[Vi].geometry[0].concat(ei[0]),Vi}function Xa(zi,Ci,ei){var Vi=mi[Ci];return delete mi[Ci],mi[zi]=Vi,Oi[Vi].geometry[0].shift(),Oi[Vi].geometry[0]=ei[0].concat(Oi[Vi].geometry[0]),Vi}function ya(zi,Ci,ei){var Vi=ei?Ci[0][Ci[0].length-1]:Ci[0][0];return zi+":"+Vi.x+":"+Vi.y}for(var ia=0;ia<Si.length;ia++){var xa=Si[ia],pa=xa.geometry,aa=xa.text?xa.text.toString():null;if(aa){var Nr=ya(aa,pa),Kr=ya(aa,pa,!0);if(Nr in ea&&Kr in mi&&ea[Nr]!==mi[Kr]){var Ui=Xa(Nr,Kr,pa),di=ma(Nr,Kr,Oi[Ui].geometry);delete mi[Nr],delete ea[Kr],ea[ya(aa,Oi[di].geometry,!0)]=di,Oi[Ui].geometry=null}else Nr in ea?ma(Nr,Kr,pa):Kr in mi?Xa(Nr,Kr,pa):(Aa(ia),mi[Nr]=ha-1,ea[Kr]=ha-1)}else Aa(ia)}return Oi.filter(function(zi){return zi.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Si,mi){return Si.sortKey-mi.sortKey})}},ci.prototype.update=function(A,D,Y){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(A,D,this.layers,Y),this.icon.programConfigurations.updatePaintArrays(A,D,this.layers,Y))},ci.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},ci.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},ci.prototype.upload=function(A){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(A),this.iconCollisionBox.upload(A)),this.text.upload(A,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(A,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},ci.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},ci.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},ci.prototype.addToLineVertexArray=function(A,D){var Y=this.lineVertexArray.length;if(A.segment!==void 0){for(var le=A.dist(D[A.segment+1]),Te=A.dist(D[A.segment]),Ce={},Ne=A.segment+1;Ne<D.length;Ne++)Ce[Ne]={x:D[Ne].x,y:D[Ne].y,tileUnitDistanceFromAnchor:le},Ne<D.length-1&&(le+=D[Ne+1].dist(D[Ne]));for(var Ze=A.segment||0;Ze>=0;Ze--)Ce[Ze]={x:D[Ze].x,y:D[Ze].y,tileUnitDistanceFromAnchor:Te},Ze>0&&(Te+=D[Ze-1].dist(D[Ze]));for(var st=0;st<D.length;st++){var _t=Ce[st];this.lineVertexArray.emplaceBack(_t.x,_t.y,_t.tileUnitDistanceFromAnchor)}}return{lineStartIndex:Y,lineLength:this.lineVertexArray.length-Y}},ci.prototype.addSymbols=function(A,D,Y,le,Te,Ce,Ne,Ze,st,_t,kt,It){for(var Vt=A.indexArray,Bt=A.layoutVertexArray,nn=A.segments.prepareSegment(4*D.length,Bt,Vt,this.canOverlap?Ce.sortKey:void 0),un=this.glyphOffsetArray.length,kn=nn.vertexLength,bn=this.allowVerticalPlacement&&Ne===Vo.vertical?Math.PI/2:0,In=Ce.text&&Ce.text.sections,Rn=0;Rn<D.length;Rn++){var Vn=D[Rn],Jn=Vn.tl,nr=Vn.tr,dr=Vn.bl,hr=Vn.br,yr=Vn.tex,br=Vn.pixelOffsetTL,Dr=Vn.pixelOffsetBR,Sr=Vn.minFontScaleX,zr=Vn.minFontScaleY,Lr=Vn.glyphOffset,Mr=Vn.isSDF,Yr=Vn.sectionIndex,Br=nn.vertexLength,vi=Lr[1];$u(Bt,Ze.x,Ze.y,Jn.x,vi+Jn.y,yr.x,yr.y,Y,Mr,br.x,br.y,Sr,zr),$u(Bt,Ze.x,Ze.y,nr.x,vi+nr.y,yr.x+yr.w,yr.y,Y,Mr,Dr.x,br.y,Sr,zr),$u(Bt,Ze.x,Ze.y,dr.x,vi+dr.y,yr.x,yr.y+yr.h,Y,Mr,br.x,Dr.y,Sr,zr),$u(Bt,Ze.x,Ze.y,hr.x,vi+hr.y,yr.x+yr.w,yr.y+yr.h,Y,Mr,Dr.x,Dr.y,Sr,zr),Nc(A.dynamicLayoutVertexArray,Ze,bn),Vt.emplaceBack(Br,Br+1,Br+2),Vt.emplaceBack(Br+1,Br+2,Br+3),nn.vertexLength+=4,nn.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Lr[0]),Rn!==D.length-1&&Yr===D[Rn+1].sectionIndex||A.programConfigurations.populatePaintArrays(Bt.length,Ce,Ce.index,{},It,In&&In[Yr])}A.placedSymbolArray.emplaceBack(Ze.x,Ze.y,un,this.glyphOffsetArray.length-un,kn,st,_t,Ze.segment,Y?Y[0]:0,Y?Y[1]:0,le[0],le[1],Ne,0,!1,0,kt)},ci.prototype._addCollisionDebugVertex=function(A,D,Y,le,Te,Ce){return D.emplaceBack(0,0),A.emplaceBack(Y.x,Y.y,le,Te,Math.round(Ce.x),Math.round(Ce.y))},ci.prototype.addCollisionDebugVertices=function(A,D,Y,le,Te,Ce,Ne){var Ze=Te.segments.prepareSegment(4,Te.layoutVertexArray,Te.indexArray),st=Ze.vertexLength,_t=Te.layoutVertexArray,kt=Te.collisionVertexArray,It=Ne.anchorX,Vt=Ne.anchorY;this._addCollisionDebugVertex(_t,kt,Ce,It,Vt,new t(A,D)),this._addCollisionDebugVertex(_t,kt,Ce,It,Vt,new t(Y,D)),this._addCollisionDebugVertex(_t,kt,Ce,It,Vt,new t(Y,le)),this._addCollisionDebugVertex(_t,kt,Ce,It,Vt,new t(A,le)),Ze.vertexLength+=4;var Bt=Te.indexArray;Bt.emplaceBack(st,st+1),Bt.emplaceBack(st+1,st+2),Bt.emplaceBack(st+2,st+3),Bt.emplaceBack(st+3,st),Ze.primitiveLength+=4},ci.prototype.addDebugCollisionBoxes=function(A,D,Y,le){for(var Te=A;Te<D;Te++){var Ce=this.collisionBoxArray.get(Te),Ne=Ce.x1,Ze=Ce.y1,st=Ce.x2,_t=Ce.y2;this.addCollisionDebugVertices(Ne,Ze,st,_t,le?this.textCollisionBox:this.iconCollisionBox,Ce.anchorPoint,Y)}},ci.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new vu(J,Af.members,lt),this.iconCollisionBox=new vu(J,Af.members,lt);for(var A=0;A<this.symbolInstances.length;A++){var D=this.symbolInstances.get(A);this.addDebugCollisionBoxes(D.textBoxStartIndex,D.textBoxEndIndex,D,!0),this.addDebugCollisionBoxes(D.verticalTextBoxStartIndex,D.verticalTextBoxEndIndex,D,!0),this.addDebugCollisionBoxes(D.iconBoxStartIndex,D.iconBoxEndIndex,D,!1),this.addDebugCollisionBoxes(D.verticalIconBoxStartIndex,D.verticalIconBoxEndIndex,D,!1)}},ci.prototype._deserializeCollisionBoxesForSymbol=function(A,D,Y,le,Te,Ce,Ne,Ze,st){for(var _t={},kt=D;kt<Y;kt++){var It=A.get(kt);_t.textBox={x1:It.x1,y1:It.y1,x2:It.x2,y2:It.y2,anchorPointX:It.anchorPointX,anchorPointY:It.anchorPointY},_t.textFeatureIndex=It.featureIndex;break}for(var Vt=le;Vt<Te;Vt++){var Bt=A.get(Vt);_t.verticalTextBox={x1:Bt.x1,y1:Bt.y1,x2:Bt.x2,y2:Bt.y2,anchorPointX:Bt.anchorPointX,anchorPointY:Bt.anchorPointY},_t.verticalTextFeatureIndex=Bt.featureIndex;break}for(var nn=Ce;nn<Ne;nn++){var un=A.get(nn);_t.iconBox={x1:un.x1,y1:un.y1,x2:un.x2,y2:un.y2,anchorPointX:un.anchorPointX,anchorPointY:un.anchorPointY},_t.iconFeatureIndex=un.featureIndex;break}for(var kn=Ze;kn<st;kn++){var bn=A.get(kn);_t.verticalIconBox={x1:bn.x1,y1:bn.y1,x2:bn.x2,y2:bn.y2,anchorPointX:bn.anchorPointX,anchorPointY:bn.anchorPointY},_t.verticalIconFeatureIndex=bn.featureIndex;break}return _t},ci.prototype.deserializeCollisionBoxes=function(A){this.collisionArrays=[];for(var D=0;D<this.symbolInstances.length;D++){var Y=this.symbolInstances.get(D);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(A,Y.textBoxStartIndex,Y.textBoxEndIndex,Y.verticalTextBoxStartIndex,Y.verticalTextBoxEndIndex,Y.iconBoxStartIndex,Y.iconBoxEndIndex,Y.verticalIconBoxStartIndex,Y.verticalIconBoxEndIndex))}},ci.prototype.hasTextData=function(){return this.text.segments.get().length>0},ci.prototype.hasIconData=function(){return this.icon.segments.get().length>0},ci.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},ci.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},ci.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},ci.prototype.addIndicesForPlacedSymbol=function(A,D){for(var Y=A.placedSymbolArray.get(D),le=Y.vertexStartIndex+4*Y.numGlyphs,Te=Y.vertexStartIndex;Te<le;Te+=4)A.indexArray.emplaceBack(Te,Te+1,Te+2),A.indexArray.emplaceBack(Te+1,Te+2,Te+3)},ci.prototype.getSortedSymbolIndexes=function(A){if(this.sortedAngle===A&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var D=Math.sin(A),Y=Math.cos(A),le=[],Te=[],Ce=[],Ne=0;Ne<this.symbolInstances.length;++Ne){Ce.push(Ne);var Ze=this.symbolInstances.get(Ne);le.push(0|Math.round(D*Ze.anchorX+Y*Ze.anchorY)),Te.push(Ze.featureIndex)}return Ce.sort(function(st,_t){return le[st]-le[_t]||Te[_t]-Te[st]}),Ce},ci.prototype.addToSortKeyRanges=function(A,D){var Y=this.sortKeyRanges[this.sortKeyRanges.length-1];Y&&Y.sortKey===D?Y.symbolInstanceEnd=A+1:this.sortKeyRanges.push({sortKey:D,symbolInstanceStart:A,symbolInstanceEnd:A+1})},ci.prototype.sortFeatures=function(A){var D=this;if(this.sortFeaturesByY&&this.sortedAngle!==A&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(A),this.sortedAngle=A,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var Y=0,le=this.symbolInstanceIndexes;Y<le.length;Y+=1){var Te=le[Y],Ce=this.symbolInstances.get(Te);this.featureSortOrder.push(Ce.featureIndex),[Ce.rightJustifiedTextSymbolIndex,Ce.centerJustifiedTextSymbolIndex,Ce.leftJustifiedTextSymbolIndex].forEach(function(Ne,Ze,st){Ne>=0&&st.indexOf(Ne)===Ze&&D.addIndicesForPlacedSymbol(D.text,Ne)}),Ce.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Ce.verticalPlacedTextSymbolIndex),Ce.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Ce.placedIconSymbolIndex),Ce.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Ce.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},_r("SymbolBucket",ci,{omit:["layers","collisionBoxArray","features","compareText"]}),ci.MAX_GLYPHS=65535,ci.addDynamicAttributes=Nc;var ad=new Ei({"symbol-placement":new kr(Re.layout_symbol["symbol-placement"]),"symbol-spacing":new kr(Re.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new kr(Re.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Cr(Re.layout_symbol["symbol-sort-key"]),"symbol-z-order":new kr(Re.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new kr(Re.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new kr(Re.layout_symbol["icon-ignore-placement"]),"icon-optional":new kr(Re.layout_symbol["icon-optional"]),"icon-rotation-alignment":new kr(Re.layout_symbol["icon-rotation-alignment"]),"icon-size":new Cr(Re.layout_symbol["icon-size"]),"icon-text-fit":new kr(Re.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new kr(Re.layout_symbol["icon-text-fit-padding"]),"icon-image":new Cr(Re.layout_symbol["icon-image"]),"icon-rotate":new Cr(Re.layout_symbol["icon-rotate"]),"icon-padding":new kr(Re.layout_symbol["icon-padding"]),"icon-keep-upright":new kr(Re.layout_symbol["icon-keep-upright"]),"icon-offset":new Cr(Re.layout_symbol["icon-offset"]),"icon-anchor":new Cr(Re.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new kr(Re.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new kr(Re.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new kr(Re.layout_symbol["text-rotation-alignment"]),"text-field":new Cr(Re.layout_symbol["text-field"]),"text-font":new Cr(Re.layout_symbol["text-font"]),"text-size":new Cr(Re.layout_symbol["text-size"]),"text-max-width":new Cr(Re.layout_symbol["text-max-width"]),"text-line-height":new kr(Re.layout_symbol["text-line-height"]),"text-letter-spacing":new Cr(Re.layout_symbol["text-letter-spacing"]),"text-justify":new Cr(Re.layout_symbol["text-justify"]),"text-radial-offset":new Cr(Re.layout_symbol["text-radial-offset"]),"text-variable-anchor":new kr(Re.layout_symbol["text-variable-anchor"]),"text-anchor":new Cr(Re.layout_symbol["text-anchor"]),"text-max-angle":new kr(Re.layout_symbol["text-max-angle"]),"text-writing-mode":new kr(Re.layout_symbol["text-writing-mode"]),"text-rotate":new Cr(Re.layout_symbol["text-rotate"]),"text-padding":new kr(Re.layout_symbol["text-padding"]),"text-keep-upright":new kr(Re.layout_symbol["text-keep-upright"]),"text-transform":new Cr(Re.layout_symbol["text-transform"]),"text-offset":new Cr(Re.layout_symbol["text-offset"]),"text-allow-overlap":new kr(Re.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new kr(Re.layout_symbol["text-ignore-placement"]),"text-optional":new kr(Re.layout_symbol["text-optional"])}),jc={paint:new Ei({"icon-opacity":new Cr(Re.paint_symbol["icon-opacity"]),"icon-color":new Cr(Re.paint_symbol["icon-color"]),"icon-halo-color":new Cr(Re.paint_symbol["icon-halo-color"]),"icon-halo-width":new Cr(Re.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Cr(Re.paint_symbol["icon-halo-blur"]),"icon-translate":new kr(Re.paint_symbol["icon-translate"]),"icon-translate-anchor":new kr(Re.paint_symbol["icon-translate-anchor"]),"text-opacity":new Cr(Re.paint_symbol["text-opacity"]),"text-color":new Cr(Re.paint_symbol["text-color"],{runtimeType:en,getOverride:function(A){return A.textColor},hasOverride:function(A){return!!A.textColor}}),"text-halo-color":new Cr(Re.paint_symbol["text-halo-color"]),"text-halo-width":new Cr(Re.paint_symbol["text-halo-width"]),"text-halo-blur":new Cr(Re.paint_symbol["text-halo-blur"]),"text-translate":new kr(Re.paint_symbol["text-translate"]),"text-translate-anchor":new kr(Re.paint_symbol["text-translate-anchor"])}),layout:ad},Xl=function(A){this.type=A.property.overrides?A.property.overrides.runtimeType:yt,this.defaultValue=A};Xl.prototype.evaluate=function(A){if(A.formattedSection){var D=this.defaultValue.property.overrides;if(D&&D.hasOverride(A.formattedSection))return D.getOverride(A.formattedSection)}return A.feature&&A.featureState?this.defaultValue.evaluate(A.feature,A.featureState):this.defaultValue.property.specification.default},Xl.prototype.eachChild=function(A){this.defaultValue.isConstant()||A(this.defaultValue.value._styleExpression.expression)},Xl.prototype.outputDefined=function(){return!1},Xl.prototype.serialize=function(){return null},_r("FormatSectionOverride",Xl,{omit:["defaultValue"]});var od=function(A){function D(Y){A.call(this,Y,jc)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.recalculate=function(Y,le){if(A.prototype.recalculate.call(this,Y,le),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var Te=this.layout.get("text-writing-mode");if(Te){for(var Ce=[],Ne=0,Ze=Te;Ne<Ze.length;Ne+=1){var st=Ze[Ne];Ce.indexOf(st)<0&&Ce.push(st)}this.layout._values["text-writing-mode"]=Ce}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},D.prototype.getValueAndResolveTokens=function(Y,le,Te,Ce){var Ne=this.layout.get(Y).evaluate(le,{},Te,Ce),Ze=this._unevaluatedLayout._values[Y];return Ze.isDataDriven()||Zo(Ze.value)||!Ne?Ne:function(st,_t){return _t.replace(/{([^{}]+)}/g,function(kt,It){return It in st?String(st[It]):""})}(le.properties,Ne)},D.prototype.createBucket=function(Y){return new ci(Y)},D.prototype.queryRadius=function(){return 0},D.prototype.queryIntersectsFeature=function(){return!1},D.prototype._setPaintOverrides=function(){for(var Y=0,le=jc.paint.overridableProperties;Y<le.length;Y+=1){var Te=le[Y];if(D.hasPaintOverride(this.layout,Te)){var Ce,Ne=this.paint.get(Te),Ze=new Xl(Ne),st=new Oo(Ze,Ne.property.specification);Ce=Ne.value.kind==="constant"||Ne.value.kind==="source"?new ja("source",st):new ss("composite",st,Ne.value.zoomStops,Ne.value._interpolationType),this.paint._values[Te]=new li(Ne.property,Ce,Ne.parameters)}}},D.prototype._handleOverridablePaintPropertyUpdate=function(Y,le,Te){return!(!this.layout||le.isDataDriven()||Te.isDataDriven())&&D.hasPaintOverride(this.layout,Y)},D.hasPaintOverride=function(Y,le){var Te=Y.get("text-field"),Ce=jc.paint.properties[le],Ne=!1,Ze=function(kt){for(var It=0,Vt=kt;It<Vt.length;It+=1){var Bt=Vt[It];if(Ce.overrides&&Ce.overrides.hasOverride(Bt))return void(Ne=!0)}};if(Te.value.kind==="constant"&&Te.value.value instanceof Wn)Ze(Te.value.value.sections);else if(Te.value.kind==="source"){var st=function(kt){if(!Ne)if(kt instanceof Yt&&Xn(kt.value)===Kt){var It=kt.value;Ze(It.sections)}else kt instanceof En?Ze(kt.sections):kt.eachChild(st)},_t=Te.value;_t._styleExpression&&st(_t._styleExpression.expression)}return Ne},D}(Qr),sd={paint:new Ei({"background-color":new kr(Re.paint_background["background-color"]),"background-pattern":new oo(Re.paint_background["background-pattern"]),"background-opacity":new kr(Re.paint_background["background-opacity"])})},ld=function(A){function D(Y){A.call(this,Y,sd)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D}(Qr),ud={paint:new Ei({"raster-opacity":new kr(Re.paint_raster["raster-opacity"]),"raster-hue-rotate":new kr(Re.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new kr(Re.paint_raster["raster-brightness-min"]),"raster-brightness-max":new kr(Re.paint_raster["raster-brightness-max"]),"raster-saturation":new kr(Re.paint_raster["raster-saturation"]),"raster-contrast":new kr(Re.paint_raster["raster-contrast"]),"raster-resampling":new kr(Re.paint_raster["raster-resampling"]),"raster-fade-duration":new kr(Re.paint_raster["raster-fade-duration"])})},cd=function(A){function D(Y){A.call(this,Y,ud)}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D}(Qr),fd=function(A){function D(Y){A.call(this,Y,{}),this.implementation=Y}return A&&(D.__proto__=A),D.prototype=Object.create(A&&A.prototype),D.prototype.constructor=D,D.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},D.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},D.prototype.recalculate=function(){},D.prototype.updateTransitions=function(){},D.prototype.hasTransition=function(){},D.prototype.serialize=function(){},D.prototype.onAdd=function(Y){this.implementation.onAdd&&this.implementation.onAdd(Y,Y.painter.context.gl)},D.prototype.onRemove=function(Y){this.implementation.onRemove&&this.implementation.onRemove(Y,Y.painter.context.gl)},D}(Qr),hd={circle:Wh,heatmap:Xh,hillshade:Kh,fill:pp,"fill-extrusion":wp,line:Lp,symbol:od,background:ld,raster:cd},$f=n.HTMLImageElement,Qf=n.HTMLCanvasElement,eh=n.HTMLVideoElement,th=n.ImageData,Qu=n.ImageBitmap,Sl=function(A,D,Y,le){this.context=A,this.format=Y,this.texture=A.gl.createTexture(),this.update(D,le)};Sl.prototype.update=function(A,D,Y){var le=A.width,Te=A.height,Ce=!(this.size&&this.size[0]===le&&this.size[1]===Te||Y),Ne=this.context,Ze=Ne.gl;if(this.useMipmap=!!(D&&D.useMipmap),Ze.bindTexture(Ze.TEXTURE_2D,this.texture),Ne.pixelStoreUnpackFlipY.set(!1),Ne.pixelStoreUnpack.set(1),Ne.pixelStoreUnpackPremultiplyAlpha.set(this.format===Ze.RGBA&&(!D||D.premultiply!==!1)),Ce)this.size=[le,Te],A instanceof $f||A instanceof Qf||A instanceof eh||A instanceof th||Qu&&A instanceof Qu?Ze.texImage2D(Ze.TEXTURE_2D,0,this.format,this.format,Ze.UNSIGNED_BYTE,A):Ze.texImage2D(Ze.TEXTURE_2D,0,this.format,le,Te,0,this.format,Ze.UNSIGNED_BYTE,A.data);else{var st=Y||{x:0,y:0},_t=st.x,kt=st.y;A instanceof $f||A instanceof Qf||A instanceof eh||A instanceof th||Qu&&A instanceof Qu?Ze.texSubImage2D(Ze.TEXTURE_2D,0,_t,kt,Ze.RGBA,Ze.UNSIGNED_BYTE,A):Ze.texSubImage2D(Ze.TEXTURE_2D,0,_t,kt,le,Te,Ze.RGBA,Ze.UNSIGNED_BYTE,A.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Ze.generateMipmap(Ze.TEXTURE_2D)},Sl.prototype.bind=function(A,D,Y){var le=this.context.gl;le.bindTexture(le.TEXTURE_2D,this.texture),Y!==le.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(Y=le.LINEAR),A!==this.filter&&(le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MAG_FILTER,A),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MIN_FILTER,Y||A),this.filter=A),D!==this.wrap&&(le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_S,D),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_T,D),this.wrap=D)},Sl.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Sl.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Uc=function(A){var D=this;this._callback=A,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){D._triggered=!1,D._callback()})};Uc.prototype.trigger=function(){var A=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){A._triggered=!1,A._callback()},0))},Uc.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Zl=function(A,D,Y){this.target=A,this.parent=D,this.mapId=Y,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},y(["receive","process"],this),this.invoker=new Uc(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=P()?A:n};function nh(A,D,Y){var le=2*Math.PI*6378137/256/Math.pow(2,Y);return[A*le-2*Math.PI*6378137/2,D*le-2*Math.PI*6378137/2]}Zl.prototype.send=function(A,D,Y,le,Te){var Ce=this;Te===void 0&&(Te=!1);var Ne=Math.round(1e18*Math.random()).toString(36).substring(0,10);Y&&(this.callbacks[Ne]=Y);var Ze=I(this.globalScope)?void 0:[];return this.target.postMessage({id:Ne,type:A,hasCallback:!!Y,targetMapId:le,mustQueue:Te,sourceMapId:this.mapId,data:Fo(D,Ze)},Ze),{cancel:function(){Y&&delete Ce.callbacks[Ne],Ce.target.postMessage({id:Ne,type:"<cancel>",targetMapId:le,sourceMapId:Ce.mapId})}}},Zl.prototype.receive=function(A){var D=A.data,Y=D.id;if(Y&&(!D.targetMapId||this.mapId===D.targetMapId))if(D.type==="<cancel>"){delete this.tasks[Y];var le=this.cancelCallbacks[Y];delete this.cancelCallbacks[Y],le&&le()}else P()||D.mustQueue?(this.tasks[Y]=D,this.taskQueue.push(Y),this.invoker.trigger()):this.processTask(Y,D)},Zl.prototype.process=function(){if(this.taskQueue.length){var A=this.taskQueue.shift(),D=this.tasks[A];delete this.tasks[A],this.taskQueue.length&&this.invoker.trigger(),D&&this.processTask(A,D)}},Zl.prototype.processTask=function(A,D){var Y=this;if(D.type==="<response>"){var le=this.callbacks[A];delete this.callbacks[A],le&&(D.error?le(ts(D.error)):le(null,ts(D.data)))}else{var Te=!1,Ce=I(this.globalScope)?void 0:[],Ne=D.hasCallback?function(kt,It){Te=!0,delete Y.cancelCallbacks[A],Y.target.postMessage({id:A,type:"<response>",sourceMapId:Y.mapId,error:kt?Fo(kt):null,data:Fo(It,Ce)},Ce)}:function(kt){Te=!0},Ze=null,st=ts(D.data);if(this.parent[D.type])Ze=this.parent[D.type](D.sourceMapId,st,Ne);else if(this.parent.getWorkerSource){var _t=D.type.split(".");Ze=this.parent.getWorkerSource(D.sourceMapId,_t[0],st.source)[_t[1]](st,Ne)}else Ne(new Error("Could not find function "+D.type));!Te&&Ze&&Ze.cancel&&(this.cancelCallbacks[A]=Ze.cancel)}},Zl.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var $i=function(A,D){A&&(D?this.setSouthWest(A).setNorthEast(D):A.length===4?this.setSouthWest([A[0],A[1]]).setNorthEast([A[2],A[3]]):this.setSouthWest(A[0]).setNorthEast(A[1]))};$i.prototype.setNorthEast=function(A){return this._ne=A instanceof Li?new Li(A.lng,A.lat):Li.convert(A),this},$i.prototype.setSouthWest=function(A){return this._sw=A instanceof Li?new Li(A.lng,A.lat):Li.convert(A),this},$i.prototype.extend=function(A){var D,Y,le=this._sw,Te=this._ne;if(A instanceof Li)D=A,Y=A;else{if(!(A instanceof $i)){if(Array.isArray(A)){if(A.length===4||A.every(Array.isArray)){var Ce=A;return this.extend($i.convert(Ce))}var Ne=A;return this.extend(Li.convert(Ne))}return this}if(D=A._sw,Y=A._ne,!D||!Y)return this}return le||Te?(le.lng=Math.min(D.lng,le.lng),le.lat=Math.min(D.lat,le.lat),Te.lng=Math.max(Y.lng,Te.lng),Te.lat=Math.max(Y.lat,Te.lat)):(this._sw=new Li(D.lng,D.lat),this._ne=new Li(Y.lng,Y.lat)),this},$i.prototype.getCenter=function(){return new Li((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},$i.prototype.getSouthWest=function(){return this._sw},$i.prototype.getNorthEast=function(){return this._ne},$i.prototype.getNorthWest=function(){return new Li(this.getWest(),this.getNorth())},$i.prototype.getSouthEast=function(){return new Li(this.getEast(),this.getSouth())},$i.prototype.getWest=function(){return this._sw.lng},$i.prototype.getSouth=function(){return this._sw.lat},$i.prototype.getEast=function(){return this._ne.lng},$i.prototype.getNorth=function(){return this._ne.lat},$i.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},$i.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},$i.prototype.isEmpty=function(){return!(this._sw&&this._ne)},$i.prototype.contains=function(A){var D=Li.convert(A),Y=D.lng,le=D.lat,Te=this._sw.lat<=le&&le<=this._ne.lat,Ce=this._sw.lng<=Y&&Y<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Ce=this._sw.lng>=Y&&Y>=this._ne.lng),Te&&Ce},$i.convert=function(A){return!A||A instanceof $i?A:new $i(A)};var rh=63710088e-1,Li=function(A,D){if(isNaN(A)||isNaN(D))throw new Error("Invalid LngLat object: ("+A+", "+D+")");if(this.lng=+A,this.lat=+D,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Li.prototype.wrap=function(){return new Li(h(this.lng,-180,180),this.lat)},Li.prototype.toArray=function(){return[this.lng,this.lat]},Li.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Li.prototype.distanceTo=function(A){var D=Math.PI/180,Y=this.lat*D,le=A.lat*D,Te=Math.sin(Y)*Math.sin(le)+Math.cos(Y)*Math.cos(le)*Math.cos((A.lng-this.lng)*D);return rh*Math.acos(Math.min(Te,1))},Li.prototype.toBounds=function(A){A===void 0&&(A=0);var D=360*A/40075017,Y=D/Math.cos(Math.PI/180*this.lat);return new $i(new Li(this.lng-Y,this.lat-D),new Li(this.lng+Y,this.lat+D))},Li.convert=function(A){if(A instanceof Li)return A;if(Array.isArray(A)&&(A.length===2||A.length===3))return new Li(Number(A[0]),Number(A[1]));if(!Array.isArray(A)&&typeof A=="object"&&A!==null)return new Li(Number("lng"in A?A.lng:A.lon),Number(A.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var ih=2*Math.PI*rh;function ah(A){return ih*Math.cos(A*Math.PI/180)}function oh(A){return(180+A)/360}function sh(A){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A*Math.PI/360)))/360}function lh(A,D){return A/ah(D)}function Vc(A){var D=180-360*A;return 360/Math.PI*Math.atan(Math.exp(D*Math.PI/180))-90}var El=function(A,D,Y){Y===void 0&&(Y=0),this.x=+A,this.y=+D,this.z=+Y};El.fromLngLat=function(A,D){D===void 0&&(D=0);var Y=Li.convert(A);return new El(oh(Y.lng),sh(Y.lat),lh(D,Y.lat))},El.prototype.toLngLat=function(){return new Li(360*this.x-180,Vc(this.y))},El.prototype.toAltitude=function(){return A=this.z,D=this.y,A*ah(Vc(D));var A,D},El.prototype.meterInMercatorCoordinateUnits=function(){return 1/ih*(A=Vc(this.y),1/Math.cos(A*Math.PI/180));var A};var Ll=function(A,D,Y){this.z=A,this.x=D,this.y=Y,this.key=mu(0,A,A,D,Y)};Ll.prototype.equals=function(A){return this.z===A.z&&this.x===A.x&&this.y===A.y},Ll.prototype.url=function(A,D){var Y,le,Te,Ce,Ne,Ze=(Y=this.x,le=this.y,Te=this.z,Ce=nh(256*Y,256*(le=Math.pow(2,Te)-le-1),Te),Ne=nh(256*(Y+1),256*(le+1),Te),Ce[0]+","+Ce[1]+","+Ne[0]+","+Ne[1]),st=function(_t,kt,It){for(var Vt,Bt="",nn=_t;nn>0;nn--)Bt+=(kt&(Vt=1<<nn-1)?1:0)+(It&Vt?2:0);return Bt}(this.z,this.x,this.y);return A[(this.x+this.y)%A.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(D==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",st).replace("{bbox-epsg-3857}",Ze)},Ll.prototype.getTilePoint=function(A){var D=Math.pow(2,this.z);return new t((A.x*D-this.x)*Zr,(A.y*D-this.y)*Zr)},Ll.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var uh=function(A,D){this.wrap=A,this.canonical=D,this.key=mu(A,D.z,D.z,D.x,D.y)},Qi=function(A,D,Y,le,Te){this.overscaledZ=A,this.wrap=D,this.canonical=new Ll(Y,+le,+Te),this.key=mu(D,A,Y,le,Te)};function mu(A,D,Y,le,Te){(A*=2)<0&&(A=-1*A-1);var Ce=1<<Y;return(Ce*Ce*A+Ce*Te+le).toString(36)+Y.toString(36)+D.toString(36)}Qi.prototype.equals=function(A){return this.overscaledZ===A.overscaledZ&&this.wrap===A.wrap&&this.canonical.equals(A.canonical)},Qi.prototype.scaledTo=function(A){var D=this.canonical.z-A;return A>this.canonical.z?new Qi(A,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Qi(A,this.wrap,A,this.canonical.x>>D,this.canonical.y>>D)},Qi.prototype.calculateScaledKey=function(A,D){var Y=this.canonical.z-A;return A>this.canonical.z?mu(this.wrap*+D,A,this.canonical.z,this.canonical.x,this.canonical.y):mu(this.wrap*+D,A,A,this.canonical.x>>Y,this.canonical.y>>Y)},Qi.prototype.isChildOf=function(A){if(A.wrap!==this.wrap)return!1;var D=this.canonical.z-A.canonical.z;return A.overscaledZ===0||A.overscaledZ<this.overscaledZ&&A.canonical.x===this.canonical.x>>D&&A.canonical.y===this.canonical.y>>D},Qi.prototype.children=function(A){if(this.overscaledZ>=A)return[new Qi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var D=this.canonical.z+1,Y=2*this.canonical.x,le=2*this.canonical.y;return[new Qi(D,this.wrap,D,Y,le),new Qi(D,this.wrap,D,Y+1,le),new Qi(D,this.wrap,D,Y,le+1),new Qi(D,this.wrap,D,Y+1,le+1)]},Qi.prototype.isLessThan=function(A){return this.wrap<A.wrap||!(this.wrap>A.wrap)&&(this.overscaledZ<A.overscaledZ||!(this.overscaledZ>A.overscaledZ)&&(this.canonical.x<A.canonical.x||!(this.canonical.x>A.canonical.x)&&this.canonical.y<A.canonical.y))},Qi.prototype.wrapped=function(){return new Qi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Qi.prototype.unwrapTo=function(A){return new Qi(this.overscaledZ,A,this.canonical.z,this.canonical.x,this.canonical.y)},Qi.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Qi.prototype.toUnwrapped=function(){return new uh(this.wrap,this.canonical)},Qi.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Qi.prototype.getTilePoint=function(A){return this.canonical.getTilePoint(new El(A.x-this.wrap,A.y))},_r("CanonicalTileID",Ll),_r("OverscaledTileID",Qi,{omit:["posMatrix"]});var tl=function(A,D,Y){if(this.uid=A,D.height!==D.width)throw new RangeError("DEM tiles must be square");if(Y&&Y!=="mapbox"&&Y!=="terrarium")return E('"'+Y+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=D.height;var le=this.dim=D.height-2;this.data=new Uint32Array(D.data.buffer),this.encoding=Y||"mapbox";for(var Te=0;Te<le;Te++)this.data[this._idx(-1,Te)]=this.data[this._idx(0,Te)],this.data[this._idx(le,Te)]=this.data[this._idx(le-1,Te)],this.data[this._idx(Te,-1)]=this.data[this._idx(Te,0)],this.data[this._idx(Te,le)]=this.data[this._idx(Te,le-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(le,-1)]=this.data[this._idx(le-1,0)],this.data[this._idx(-1,le)]=this.data[this._idx(0,le-1)],this.data[this._idx(le,le)]=this.data[this._idx(le-1,le-1)]};tl.prototype.get=function(A,D){var Y=new Uint8Array(this.data.buffer),le=4*this._idx(A,D);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(Y[le],Y[le+1],Y[le+2])},tl.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,.00390625,32768]:[6553.6,25.6,.1,1e4]},tl.prototype._idx=function(A,D){if(A<-1||A>=this.dim+1||D<-1||D>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(D+1)*this.stride+(A+1)},tl.prototype._unpackMapbox=function(A,D,Y){return(256*A*256+256*D+Y)/10-1e4},tl.prototype._unpackTerrarium=function(A,D,Y){return 256*A+D+Y/256-32768},tl.prototype.getPixels=function(){return new lo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},tl.prototype.backfillBorder=function(A,D,Y){if(this.dim!==A.dim)throw new Error("dem dimension mismatch");var le=D*this.dim,Te=D*this.dim+this.dim,Ce=Y*this.dim,Ne=Y*this.dim+this.dim;switch(D){case-1:le=Te-1;break;case 1:Te=le+1}switch(Y){case-1:Ce=Ne-1;break;case 1:Ne=Ce+1}for(var Ze=-D*this.dim,st=-Y*this.dim,_t=Ce;_t<Ne;_t++)for(var kt=le;kt<Te;kt++)this.data[this._idx(kt,_t)]=A.data[this._idx(kt+Ze,_t+st)]},_r("DEMData",tl);var ec=function(A){this._stringToNumber={},this._numberToString=[];for(var D=0;D<A.length;D++){var Y=A[D];this._stringToNumber[Y]=D,this._numberToString[D]=Y}};ec.prototype.encode=function(A){return this._stringToNumber[A]},ec.prototype.decode=function(A){return this._numberToString[A]};var tc=function(A,D,Y,le,Te){this.type="Feature",this._vectorTileFeature=A,A._z=D,A._x=Y,A._y=le,this.properties=A.properties,this.id=Te},qc={geometry:{configurable:!0}};qc.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},qc.geometry.set=function(A){this._geometry=A},tc.prototype.toJSON=function(){var A={geometry:this.geometry};for(var D in this)D!=="_geometry"&&D!=="_vectorTileFeature"&&(A[D]=this[D]);return A},Object.defineProperties(tc.prototype,qc);var Kl=function(){this.state={},this.stateChanges={},this.deletedStates={}};Kl.prototype.updateState=function(A,D,Y){var le=String(D);if(this.stateChanges[A]=this.stateChanges[A]||{},this.stateChanges[A][le]=this.stateChanges[A][le]||{},c(this.stateChanges[A][le],Y),this.deletedStates[A]===null)for(var Te in this.deletedStates[A]={},this.state[A])Te!==le&&(this.deletedStates[A][Te]=null);else if(this.deletedStates[A]&&this.deletedStates[A][le]===null)for(var Ce in this.deletedStates[A][le]={},this.state[A][le])Y[Ce]||(this.deletedStates[A][le][Ce]=null);else for(var Ne in Y)this.deletedStates[A]&&this.deletedStates[A][le]&&this.deletedStates[A][le][Ne]===null&&delete this.deletedStates[A][le][Ne]},Kl.prototype.removeFeatureState=function(A,D,Y){if(this.deletedStates[A]!==null){var le=String(D);if(this.deletedStates[A]=this.deletedStates[A]||{},Y&&D!==void 0)this.deletedStates[A][le]!==null&&(this.deletedStates[A][le]=this.deletedStates[A][le]||{},this.deletedStates[A][le][Y]=null);else if(D!==void 0)if(this.stateChanges[A]&&this.stateChanges[A][le])for(Y in this.deletedStates[A][le]={},this.stateChanges[A][le])this.deletedStates[A][le][Y]=null;else this.deletedStates[A][le]=null;else this.deletedStates[A]=null}},Kl.prototype.getState=function(A,D){var Y=String(D),le=this.state[A]||{},Te=this.stateChanges[A]||{},Ce=c({},le[Y],Te[Y]);if(this.deletedStates[A]===null)return{};if(this.deletedStates[A]){var Ne=this.deletedStates[A][D];if(Ne===null)return{};for(var Ze in Ne)delete Ce[Ze]}return Ce},Kl.prototype.initializeTileState=function(A,D){A.setFeatureState(this.state,D)},Kl.prototype.coalesceChanges=function(A,D){var Y={};for(var le in this.stateChanges){this.state[le]=this.state[le]||{};var Te={};for(var Ce in this.stateChanges[le])this.state[le][Ce]||(this.state[le][Ce]={}),c(this.state[le][Ce],this.stateChanges[le][Ce]),Te[Ce]=this.state[le][Ce];Y[le]=Te}for(var Ne in this.deletedStates){this.state[Ne]=this.state[Ne]||{};var Ze={};if(this.deletedStates[Ne]===null)for(var st in this.state[Ne])Ze[st]={},this.state[Ne][st]={};else for(var _t in this.deletedStates[Ne]){if(this.deletedStates[Ne][_t]===null)this.state[Ne][_t]={};else for(var kt=0,It=Object.keys(this.deletedStates[Ne][_t]);kt<It.length;kt+=1){var Vt=It[kt];delete this.state[Ne][_t][Vt]}Ze[_t]=this.state[Ne][_t]}Y[Ne]=Y[Ne]||{},c(Y[Ne],Ze)}if(this.stateChanges={},this.deletedStates={},Object.keys(Y).length!==0)for(var Bt in A)A[Bt].setFeatureState(Y,D)};var nl=function(A,D){this.tileID=A,this.x=A.canonical.x,this.y=A.canonical.y,this.z=A.canonical.z,this.grid=new es(Zr,16,0),this.grid3D=new es(Zr,16,0),this.featureIndexArray=new An,this.promoteId=D};function ch(A,D,Y,le,Te){return _(A,function(Ce,Ne){var Ze=D instanceof rs?D.get(Ne):null;return Ze&&Ze.evaluate?Ze.evaluate(Y,le,Te):Ze})}function fh(A){for(var D=1/0,Y=1/0,le=-1/0,Te=-1/0,Ce=0,Ne=A;Ce<Ne.length;Ce+=1){var Ze=Ne[Ce];D=Math.min(D,Ze.x),Y=Math.min(Y,Ze.y),le=Math.max(le,Ze.x),Te=Math.max(Te,Ze.y)}return{minX:D,minY:Y,maxX:le,maxY:Te}}function pd(A,D){return D-A}nl.prototype.insert=function(A,D,Y,le,Te,Ce){var Ne=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(Y,le,Te);for(var Ze=Ce?this.grid3D:this.grid,st=0;st<D.length;st++){for(var _t=D[st],kt=[1/0,1/0,-1/0,-1/0],It=0;It<_t.length;It++){var Vt=_t[It];kt[0]=Math.min(kt[0],Vt.x),kt[1]=Math.min(kt[1],Vt.y),kt[2]=Math.max(kt[2],Vt.x),kt[3]=Math.max(kt[3],Vt.y)}kt[0]<Zr&&kt[1]<Zr&&kt[2]>=0&&kt[3]>=0&&Ze.insert(Ne,kt[0],kt[1],kt[2],kt[3])}},nl.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Bl.VectorTile(new qu(this.rawTileData)).layers,this.sourceLayerCoder=new ec(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},nl.prototype.query=function(A,D,Y,le){var Te=this;this.loadVTLayers();for(var Ce=A.params||{},Ne=Zr/A.tileSize/A.scale,Ze=ws(Ce.filter),st=A.queryGeometry,_t=A.queryPadding*Ne,kt=fh(st),It=this.grid.query(kt.minX-_t,kt.minY-_t,kt.maxX+_t,kt.maxY+_t),Vt=fh(A.cameraQueryGeometry),Bt=0,nn=this.grid3D.query(Vt.minX-_t,Vt.minY-_t,Vt.maxX+_t,Vt.maxY+_t,function(Vn,Jn,nr,dr){return function(hr,yr,br,Dr,Sr){for(var zr=0,Lr=hr;zr<Lr.length;zr+=1){var Mr=Lr[zr];if(yr<=Mr.x&&br<=Mr.y&&Dr>=Mr.x&&Sr>=Mr.y)return!0}var Yr=[new t(yr,br),new t(yr,Sr),new t(Dr,Sr),new t(Dr,br)];if(hr.length>2){for(var Br=0,vi=Yr;Br<vi.length;Br+=1)if(Ws(hr,vi[Br]))return!0}for(var Ir=0;Ir<hr.length-1;Ir++)if(jh(hr[Ir],hr[Ir+1],Yr))return!0;return!1}(A.cameraQueryGeometry,Vn-_t,Jn-_t,nr+_t,dr+_t)});Bt<nn.length;Bt+=1){var un=nn[Bt];It.push(un)}It.sort(pd);for(var kn,bn={},In=function(Vn){var Jn=It[Vn];if(Jn!==kn){kn=Jn;var nr=Te.featureIndexArray.get(Jn),dr=null;Te.loadMatchingFeature(bn,nr.bucketIndex,nr.sourceLayerIndex,nr.featureIndex,Ze,Ce.layers,Ce.availableImages,D,Y,le,function(hr,yr,br){return dr||(dr=bo(hr)),yr.queryIntersectsFeature(st,hr,br,dr,Te.z,A.transform,Ne,A.pixelPosMatrix)})}},Rn=0;Rn<It.length;Rn++)In(Rn);return bn},nl.prototype.loadMatchingFeature=function(A,D,Y,le,Te,Ce,Ne,Ze,st,_t,kt){var It=this.bucketLayerIDs[D];if(!Ce||function(hr,yr){for(var br=0;br<hr.length;br++)if(yr.indexOf(hr[br])>=0)return!0;return!1}(Ce,It)){var Vt=this.sourceLayerCoder.decode(Y),Bt=this.vtLayers[Vt].feature(le);if(Te.needGeometry){var nn=_i(Bt,!0);if(!Te.filter(new Vr(this.tileID.overscaledZ),nn,this.tileID.canonical))return}else if(!Te.filter(new Vr(this.tileID.overscaledZ),Bt))return;for(var un=this.getId(Bt,Vt),kn=0;kn<It.length;kn++){var bn=It[kn];if(!(Ce&&Ce.indexOf(bn)<0)){var In=Ze[bn];if(In){var Rn={};un!==void 0&&_t&&(Rn=_t.getState(In.sourceLayer||"_geojsonTileLayer",un));var Vn=c({},st[bn]);Vn.paint=ch(Vn.paint,In.paint,Bt,Rn,Ne),Vn.layout=ch(Vn.layout,In.layout,Bt,Rn,Ne);var Jn=!kt||kt(Bt,In,Rn);if(Jn){var nr=new tc(Bt,this.z,this.x,this.y,un);nr.layer=Vn;var dr=A[bn];dr===void 0&&(dr=A[bn]=[]),dr.push({featureIndex:le,feature:nr,intersectionZ:Jn})}}}}}},nl.prototype.lookupSymbolFeatures=function(A,D,Y,le,Te,Ce,Ne,Ze){var st={};this.loadVTLayers();for(var _t=ws(Te),kt=0,It=A;kt<It.length;kt+=1){var Vt=It[kt];this.loadMatchingFeature(st,Y,le,Vt,_t,Ce,Ne,Ze,D)}return st},nl.prototype.hasLayer=function(A){for(var D=0,Y=this.bucketLayerIDs;D<Y.length;D+=1)for(var le=0,Te=Y[D];le<Te.length;le+=1)if(A===Te[le])return!0;return!1},nl.prototype.getId=function(A,D){var Y=A.id;if(this.promoteId){var le=typeof this.promoteId=="string"?this.promoteId:this.promoteId[D];typeof(Y=A.properties[le])=="boolean"&&(Y=Number(Y))}return Y},_r("FeatureIndex",nl,{omit:["rawTileData","sourceLayerCoder"]});var fa=function(A,D){this.tileID=A,this.uid=p(),this.uses=0,this.tileSize=D,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};fa.prototype.registerFadeDuration=function(A){var D=A+this.timeAdded;D<Q.now()||this.fadeEndTime&&D<this.fadeEndTime||(this.fadeEndTime=D)},fa.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},fa.prototype.loadVectorData=function(A,D,Y){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",A){for(var le in A.featureIndex&&(this.latestFeatureIndex=A.featureIndex,A.rawTileData?(this.latestRawTileData=A.rawTileData,this.latestFeatureIndex.rawTileData=A.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=A.collisionBoxArray,this.buckets=function(_t,kt){var It={};if(!kt)return It;for(var Vt=function(){var un=nn[Bt],kn=un.layerIds.map(function(Vn){return kt.getLayer(Vn)}).filter(Boolean);if(kn.length!==0){un.layers=kn,un.stateDependentLayerIds&&(un.stateDependentLayers=un.stateDependentLayerIds.map(function(Vn){return kn.filter(function(Jn){return Jn.id===Vn})[0]}));for(var bn=0,In=kn;bn<In.length;bn+=1){var Rn=In[bn];It[Rn.id]=un}}},Bt=0,nn=_t;Bt<nn.length;Bt+=1)Vt();return It}(A.buckets,D.style),this.hasSymbolBuckets=!1,this.buckets){var Te=this.buckets[le];if(Te instanceof ci){if(this.hasSymbolBuckets=!0,!Y)break;Te.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Ce in this.buckets){var Ne=this.buckets[Ce];if(Ne instanceof ci&&Ne.hasRTLText){this.hasRTLText=!0,ca.isLoading()||ca.isLoaded()||hs()!=="deferred"||ps();break}}for(var Ze in this.queryPadding=0,this.buckets){var st=this.buckets[Ze];this.queryPadding=Math.max(this.queryPadding,D.style.getLayer(Ze).queryRadius(st))}A.imageAtlas&&(this.imageAtlas=A.imageAtlas),A.glyphAtlasImage&&(this.glyphAtlasImage=A.glyphAtlasImage)}else this.collisionBoxArray=new At},fa.prototype.unloadVectorData=function(){for(var A in this.buckets)this.buckets[A].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},fa.prototype.getBucket=function(A){return this.buckets[A.id]},fa.prototype.upload=function(A){for(var D in this.buckets){var Y=this.buckets[D];Y.uploadPending()&&Y.upload(A)}var le=A.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Sl(A,this.imageAtlas.image,le.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Sl(A,this.glyphAtlasImage,le.ALPHA),this.glyphAtlasImage=null)},fa.prototype.prepare=function(A){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(A,this.imageAtlasTexture)},fa.prototype.queryRenderedFeatures=function(A,D,Y,le,Te,Ce,Ne,Ze,st,_t){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:le,cameraQueryGeometry:Te,scale:Ce,tileSize:this.tileSize,pixelPosMatrix:_t,transform:Ze,params:Ne,queryPadding:this.queryPadding*st},A,D,Y):{}},fa.prototype.querySourceFeatures=function(A,D){var Y=this.latestFeatureIndex;if(Y&&Y.rawTileData){var le=Y.loadVTLayers(),Te=D?D.sourceLayer:"",Ce=le._geojsonTileLayer||le[Te];if(Ce)for(var Ne=ws(D&&D.filter),Ze=this.tileID.canonical,st=Ze.z,_t=Ze.x,kt=Ze.y,It={z:st,x:_t,y:kt},Vt=0;Vt<Ce.length;Vt++){var Bt=Ce.feature(Vt);if(Ne.needGeometry){var nn=_i(Bt,!0);if(!Ne.filter(new Vr(this.tileID.overscaledZ),nn,this.tileID.canonical))continue}else if(!Ne.filter(new Vr(this.tileID.overscaledZ),Bt))continue;var un=Y.getId(Bt,Te),kn=new tc(Bt,st,_t,kt,un);kn.tile=It,A.push(kn)}}},fa.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},fa.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},fa.prototype.setExpiryData=function(A){var D=this.expirationTime;if(A.cacheControl){var Y=z(A.cacheControl);Y["max-age"]&&(this.expirationTime=Date.now()+1e3*Y["max-age"])}else A.expires&&(this.expirationTime=new Date(A.expires).getTime());if(this.expirationTime){var le=Date.now(),Te=!1;if(this.expirationTime>le)Te=!1;else if(D)if(this.expirationTime<D)Te=!0;else{var Ce=this.expirationTime-D;Ce?this.expirationTime=le+Math.max(Ce,3e4):Te=!0}else Te=!0;Te?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},fa.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},fa.prototype.setFeatureState=function(A,D){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(A).length!==0){var Y=this.latestFeatureIndex.loadVTLayers();for(var le in this.buckets)if(D.style.hasLayer(le)){var Te=this.buckets[le],Ce=Te.layers[0].sourceLayer||"_geojsonTileLayer",Ne=Y[Ce],Ze=A[Ce];if(Ne&&Ze&&Object.keys(Ze).length!==0){Te.update(Ze,Ne,this.imageAtlas&&this.imageAtlas.patternPositions||{});var st=D&&D.style&&D.style.getLayer(le);st&&(this.queryPadding=Math.max(this.queryPadding,st.queryRadius(Te)))}}}},fa.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},fa.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Q.now()},fa.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},fa.prototype.setHoldDuration=function(A){this.symbolFadeHoldUntil=Q.now()+A},fa.prototype.setDependencies=function(A,D){for(var Y={},le=0,Te=D;le<Te.length;le+=1)Y[Te[le]]=!0;this.dependencies[A]=Y},fa.prototype.hasDependency=function(A,D){for(var Y=0,le=A;Y<le.length;Y+=1){var Te=le[Y],Ce=this.dependencies[Te];if(Ce){for(var Ne=0,Ze=D;Ne<Ze.length;Ne+=1)if(Ce[Ze[Ne]])return!0}}return!1};var ml=n.performance,hh=function(A){this._marks={start:[A.url,"start"].join("#"),end:[A.url,"end"].join("#"),measure:A.url.toString()},ml.mark(this._marks.start)};hh.prototype.finish=function(){ml.mark(this._marks.end);var A=ml.getEntriesByName(this._marks.measure);return A.length===0&&(ml.measure(this._marks.measure,this._marks.start,this._marks.end),A=ml.getEntriesByName(this._marks.measure),ml.clearMarks(this._marks.start),ml.clearMarks(this._marks.end),ml.clearMeasures(this._marks.measure)),A},s.Actor=Zl,s.AlphaImage=Ml,s.CanonicalTileID=Ll,s.CollisionBoxArray=At,s.Color=yn,s.DEMData=tl,s.DataConstantProperty=kr,s.DictionaryCoder=ec,s.EXTENT=Zr,s.ErrorEvent=gt,s.EvaluationParameters=Vr,s.Event=dt,s.Evented=je,s.FeatureIndex=nl,s.FillBucket=Os,s.FillExtrusionBucket=Ps,s.ImageAtlas=pu,s.ImagePosition=Gu,s.LineBucket=Ya,s.LngLat=Li,s.LngLatBounds=$i,s.MercatorCoordinate=El,s.ONE_EM=va,s.OverscaledTileID=Qi,s.Point=t,s.Point$1=t,s.Properties=Ei,s.Protobuf=qu,s.RGBAImage=lo,s.RequestManager=fe,s.RequestPerformance=hh,s.ResourceType=pt,s.SegmentVector=jn,s.SourceFeatureState=Kl,s.StructArrayLayout1ui2=ft,s.StructArrayLayout2f1f2i16=re,s.StructArrayLayout2i4=jo,s.StructArrayLayout3ui6=xe,s.StructArrayLayout4i8=Qs,s.SymbolBucket=ci,s.Texture=Sl,s.Tile=fa,s.Transitionable=Ga,s.Uniform1f=jr,s.Uniform1i=Fr,s.Uniform2f=qr,s.Uniform3f=ui,s.Uniform4f=ki,s.UniformColor=ra,s.UniformMatrix4f=Ki,s.UnwrappedTileID=uh,s.ValidationError=rt,s.WritingMode=Vo,s.ZoomHistory=fs,s.add=function(A,D,Y){return A[0]=D[0]+Y[0],A[1]=D[1]+Y[1],A[2]=D[2]+Y[2],A},s.addDynamicAttributes=Nc,s.asyncAll=function(A,D,Y){if(!A.length)return Y(null,[]);var le=A.length,Te=new Array(A.length),Ce=null;A.forEach(function(Ne,Ze){D(Ne,function(st,_t){st&&(Ce=st),Te[Ze]=_t,--le==0&&Y(Ce,Te)})})},s.bezier=a,s.bindAll=y,s.browser=Q,s.cacheEntryPossiblyAdded=function(A){++ht>Pe&&(A.getActor().send("enforceCacheSizeLimit",Ae),ht=0)},s.clamp=u,s.clearTileCache=function(A){var D=n.caches.delete(_e);A&&D.catch(A).then(function(){return A()})},s.clipLine=Wf,s.clone=function(A){var D=new Uo(16);return D[0]=A[0],D[1]=A[1],D[2]=A[2],D[3]=A[3],D[4]=A[4],D[5]=A[5],D[6]=A[6],D[7]=A[7],D[8]=A[8],D[9]=A[9],D[10]=A[10],D[11]=A[11],D[12]=A[12],D[13]=A[13],D[14]=A[14],D[15]=A[15],D},s.clone$1=S,s.clone$2=function(A){var D=new Uo(3);return D[0]=A[0],D[1]=A[1],D[2]=A[2],D},s.collisionCircleLayout=Ip,s.config=Z,s.create=function(){var A=new Uo(16);return Uo!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=0,A[12]=0,A[13]=0,A[14]=0),A[0]=1,A[5]=1,A[10]=1,A[15]=1,A},s.create$1=function(){var A=new Uo(9);return Uo!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[5]=0,A[6]=0,A[7]=0),A[0]=1,A[4]=1,A[8]=1,A},s.create$2=function(){var A=new Uo(4);return Uo!=Float32Array&&(A[1]=0,A[2]=0),A[0]=1,A[3]=1,A},s.createCommonjsModule=T,s.createExpression=go,s.createLayout=hi,s.createStyleLayer=function(A){return A.type==="custom"?new fd(A):new hd[A.type](A)},s.cross=function(A,D,Y){var le=D[0],Te=D[1],Ce=D[2],Ne=Y[0],Ze=Y[1],st=Y[2];return A[0]=Te*st-Ce*Ze,A[1]=Ce*Ne-le*st,A[2]=le*Ze-Te*Ne,A},s.deepEqual=function A(D,Y){if(Array.isArray(D)){if(!Array.isArray(Y)||D.length!==Y.length)return!1;for(var le=0;le<D.length;le++)if(!A(D[le],Y[le]))return!1;return!0}if(typeof D=="object"&&D!==null&&Y!==null){if(typeof Y!="object"||Object.keys(D).length!==Object.keys(Y).length)return!1;for(var Te in D)if(!A(D[Te],Y[Te]))return!1;return!0}return D===Y},s.dot=function(A,D){return A[0]*D[0]+A[1]*D[1]+A[2]*D[2]},s.dot$1=function(A,D){return A[0]*D[0]+A[1]*D[1]+A[2]*D[2]+A[3]*D[3]},s.ease=l,s.emitValidationErrors=sa,s.endsWith=m,s.enforceCacheSizeLimit=function(A){Fe(),he&&he.then(function(D){D.keys().then(function(Y){for(var le=0;le<Y.length-A;le++)D.delete(Y[le])})})},s.evaluateSizeForFeature=Nf,s.evaluateSizeForZoom=jf,s.evaluateVariableOffset=Zf,s.evented=ua,s.extend=c,s.featureFilter=ws,s.filterObject=d,s.fromRotation=function(A,D){var Y=Math.sin(D),le=Math.cos(D);return A[0]=le,A[1]=Y,A[2]=0,A[3]=-Y,A[4]=le,A[5]=0,A[6]=0,A[7]=0,A[8]=1,A},s.getAnchorAlignment=Dc,s.getAnchorJustification=Bc,s.getArrayBuffer=Pt,s.getImage=Ge,s.getJSON=function(A,D){return Ot(c(A,{type:"json"}),D)},s.getRTLTextPluginStatus=hs,s.getReferrer=Ke,s.getVideo=function(A,D){var Y,le,Te=n.document.createElement("video");Te.muted=!0,Te.onloadstart=function(){D(null,Te)};for(var Ce=0;Ce<A.length;Ce++){var Ne=n.document.createElement("source");Y=A[Ce],le=void 0,(le=n.document.createElement("a")).href=Y,le.protocol===n.document.location.protocol&&le.host===n.document.location.host||(Te.crossOrigin="Anonymous"),Ne.src=A[Ce],Te.appendChild(Ne)}return{cancel:function(){}}},s.identity=_c,s.invert=function(A,D){var Y=D[0],le=D[1],Te=D[2],Ce=D[3],Ne=D[4],Ze=D[5],st=D[6],_t=D[7],kt=D[8],It=D[9],Vt=D[10],Bt=D[11],nn=D[12],un=D[13],kn=D[14],bn=D[15],In=Y*Ze-le*Ne,Rn=Y*st-Te*Ne,Vn=Y*_t-Ce*Ne,Jn=le*st-Te*Ze,nr=le*_t-Ce*Ze,dr=Te*_t-Ce*st,hr=kt*un-It*nn,yr=kt*kn-Vt*nn,br=kt*bn-Bt*nn,Dr=It*kn-Vt*un,Sr=It*bn-Bt*un,zr=Vt*bn-Bt*kn,Lr=In*zr-Rn*Sr+Vn*Dr+Jn*br-nr*yr+dr*hr;return Lr?(Lr=1/Lr,A[0]=(Ze*zr-st*Sr+_t*Dr)*Lr,A[1]=(Te*Sr-le*zr-Ce*Dr)*Lr,A[2]=(un*dr-kn*nr+bn*Jn)*Lr,A[3]=(Vt*nr-It*dr-Bt*Jn)*Lr,A[4]=(st*br-Ne*zr-_t*yr)*Lr,A[5]=(Y*zr-Te*br+Ce*yr)*Lr,A[6]=(kn*Vn-nn*dr-bn*Rn)*Lr,A[7]=(kt*dr-Vt*Vn+Bt*Rn)*Lr,A[8]=(Ne*Sr-Ze*br+_t*hr)*Lr,A[9]=(le*br-Y*Sr-Ce*hr)*Lr,A[10]=(nn*nr-un*Vn+bn*In)*Lr,A[11]=(It*Vn-kt*nr-Bt*In)*Lr,A[12]=(Ze*yr-Ne*Dr-st*hr)*Lr,A[13]=(Y*Dr-le*yr+Te*hr)*Lr,A[14]=(un*Rn-nn*Jn-kn*In)*Lr,A[15]=(kt*Jn-It*Rn+Vt*In)*Lr,A):null},s.isChar=gr,s.isMapboxURL=pe,s.keysDifference=function(A,D){var Y=[];for(var le in A)le in D||Y.push(le);return Y},s.makeRequest=Ot,s.mapObject=_,s.mercatorXfromLng=oh,s.mercatorYfromLat=sh,s.mercatorZfromAltitude=lh,s.mul=qh,s.multiply=sf,s.mvt=Bl,s.nextPowerOfTwo=function(A){return A<=1?1:Math.pow(2,Math.ceil(Math.log(A)/Math.LN2))},s.normalize=function(A,D){var Y=D[0],le=D[1],Te=D[2],Ce=Y*Y+le*le+Te*Te;return Ce>0&&(Ce=1/Math.sqrt(Ce)),A[0]=D[0]*Ce,A[1]=D[1]*Ce,A[2]=D[2]*Ce,A},s.number=Or,s.offscreenCanvasSupported=vt,s.ortho=function(A,D,Y,le,Te,Ce,Ne){var Ze=1/(D-Y),st=1/(le-Te),_t=1/(Ce-Ne);return A[0]=-2*Ze,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=-2*st,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=2*_t,A[11]=0,A[12]=(D+Y)*Ze,A[13]=(Te+le)*st,A[14]=(Ne+Ce)*_t,A[15]=1,A},s.parseGlyphPBF=function(A){return new qu(A).readFields(Hp,[])},s.pbf=qu,s.performSymbolLayout=function(A,D,Y,le,Te,Ce,Ne){A.createArrays();var Ze=512*A.overscaling;A.tilePixelRatio=Zr/Ze,A.compareText={},A.iconsNeedLinear=!1;var st=A.layers[0].layout,_t=A.layers[0]._unevaluatedLayout._values,kt={};if(A.textSizeData.kind==="composite"){var It=A.textSizeData,Vt=It.minZoom,Bt=It.maxZoom;kt.compositeTextSizes=[_t["text-size"].possiblyEvaluate(new Vr(Vt),Ne),_t["text-size"].possiblyEvaluate(new Vr(Bt),Ne)]}if(A.iconSizeData.kind==="composite"){var nn=A.iconSizeData,un=nn.minZoom,kn=nn.maxZoom;kt.compositeIconSizes=[_t["icon-size"].possiblyEvaluate(new Vr(un),Ne),_t["icon-size"].possiblyEvaluate(new Vr(kn),Ne)]}kt.layoutTextSize=_t["text-size"].possiblyEvaluate(new Vr(A.zoom+1),Ne),kt.layoutIconSize=_t["icon-size"].possiblyEvaluate(new Vr(A.zoom+1),Ne),kt.textMaxSize=_t["text-size"].possiblyEvaluate(new Vr(18));for(var bn=st.get("text-line-height")*va,In=st.get("text-rotation-alignment")==="map"&&st.get("symbol-placement")!=="point",Rn=st.get("text-keep-upright"),Vn=st.get("text-size"),Jn=function(){var hr=dr[nr],yr=st.get("text-font").evaluate(hr,{},Ne).join(","),br=Vn.evaluate(hr,{},Ne),Dr=kt.layoutTextSize.evaluate(hr,{},Ne),Sr=kt.layoutIconSize.evaluate(hr,{},Ne),zr={horizontal:{},vertical:void 0},Lr=hr.text,Mr=[0,0];if(Lr){var Yr=Lr.toString(),Br=st.get("text-letter-spacing").evaluate(hr,{},Ne)*va,vi=function(Nr){for(var Kr=0,Ui=Nr;Kr<Ui.length;Kr+=1)if(di=Ui[Kr].charCodeAt(0),gr.Arabic(di)||gr["Arabic Supplement"](di)||gr["Arabic Extended-A"](di)||gr["Arabic Presentation Forms-A"](di)||gr["Arabic Presentation Forms-B"](di))return!1;var di;return!0}(Yr)?Br:0,Ir=st.get("text-anchor").evaluate(hr,{},Ne),fi=st.get("text-variable-anchor");if(!fi){var Ti=st.get("text-radial-offset").evaluate(hr,{},Ne);Mr=Ti?Zf(Ir,[Ti*va,Fc]):st.get("text-offset").evaluate(hr,{},Ne).map(function(Nr){return Nr*va})}var Mi=In?"center":st.get("text-justify").evaluate(hr,{},Ne),Si=st.get("symbol-placement"),mi=Si==="point"?st.get("text-max-width").evaluate(hr,{},Ne)*va:0,ea=function(){A.allowVerticalPlacement&&Es(Yr)&&(zr.vertical=Wu(Lr,D,Y,Te,yr,mi,bn,Ir,"left",vi,Mr,Vo.vertical,!0,Si,Dr,br))};if(!In&&fi){for(var Oi=Mi==="auto"?fi.map(function(Nr){return Bc(Nr)}):[Mi],ha=!1,Aa=0;Aa<Oi.length;Aa++){var ma=Oi[Aa];if(!zr.horizontal[ma])if(ha)zr.horizontal[ma]=zr.horizontal[0];else{var Xa=Wu(Lr,D,Y,Te,yr,mi,bn,"center",ma,vi,Mr,Vo.horizontal,!1,Si,Dr,br);Xa&&(zr.horizontal[ma]=Xa,ha=Xa.positionedLines.length===1)}}ea()}else{Mi==="auto"&&(Mi=Bc(Ir));var ya=Wu(Lr,D,Y,Te,yr,mi,bn,Ir,Mi,vi,Mr,Vo.horizontal,!1,Si,Dr,br);ya&&(zr.horizontal[Mi]=ya),ea(),Es(Yr)&&In&&Rn&&(zr.vertical=Wu(Lr,D,Y,Te,yr,mi,bn,Ir,Mi,vi,Mr,Vo.vertical,!1,Si,Dr,br))}}var ia=void 0,xa=!1;if(hr.icon&&hr.icon.name){var pa=le[hr.icon.name];pa&&(ia=function(Nr,Kr,Ui){var di=Dc(Ui),zi=di.horizontalAlign,Ci=di.verticalAlign,ei=Kr[0],Vi=Kr[1],Za=ei-Nr.displaySize[0]*zi,To=Za+Nr.displaySize[0],Da=Vi-Nr.displaySize[1]*Ci;return{image:Nr,top:Da,bottom:Da+Nr.displaySize[1],left:Za,right:To}}(Te[hr.icon.name],st.get("icon-offset").evaluate(hr,{},Ne),st.get("icon-anchor").evaluate(hr,{},Ne)),xa=pa.sdf,A.sdfIcons===void 0?A.sdfIcons=pa.sdf:A.sdfIcons!==pa.sdf&&E("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(pa.pixelRatio!==A.pixelRatio||st.get("icon-rotate").constantOr(1)!==0)&&(A.iconsNeedLinear=!0))}var aa=Jf(zr.horizontal)||zr.vertical;A.iconsInText=!!aa&&aa.iconsInText,(aa||ia)&&function(Nr,Kr,Ui,di,zi,Ci,ei,Vi,Za,To,Da){var zs=Ci.textMaxSize.evaluate(Kr,{});zs===void 0&&(zs=ei);var rl,da=Nr.layers[0].layout,Ds=da.get("icon-offset").evaluate(Kr,{},Da),ys=Jf(Ui.horizontal),xs=24,Cl=ei/xs,nc=Nr.tilePixelRatio*Cl,Ol=Nr.tilePixelRatio*zs/xs,rc=Nr.tilePixelRatio*Vi,yu=Nr.tilePixelRatio*da.get("symbol-spacing"),Hc=da.get("text-padding")*Nr.tilePixelRatio,ic=da.get("icon-padding")*Nr.tilePixelRatio,Jl=da.get("text-max-angle")/180*Math.PI,ac=da.get("text-rotation-alignment")==="map"&&da.get("symbol-placement")!=="point",oc=da.get("icon-rotation-alignment")==="map"&&da.get("symbol-placement")!=="point",xu=da.get("symbol-placement"),Gc=yu/2,bu=da.get("icon-text-fit");di&&bu!=="none"&&(Nr.allowVerticalPlacement&&Ui.vertical&&(rl=Bf(di,Ui.vertical,bu,da.get("icon-text-fit-padding"),Ds,Cl)),ys&&(di=Bf(di,ys,bu,da.get("icon-text-fit-padding"),Ds,Cl)));var Pl=function(dd,Mu){Mu.x<0||Mu.x>=Zr||Mu.y<0||Mu.y>=Zr||function(Yi,Rs,gd,yl,Jc,mh,fc,Ys,hc,Su,pc,dc,$c,yh,Eu,xh,bh,_h,wh,Th,qo,gc,kh,Xs,vd){var Ah,Dl,eu,tu,nu,ru=Yi.addToLineVertexArray(Rs,gd),Mh=0,Sh=0,Eh=0,Lh=0,Qc=-1,ef=-1,il={},Ch=vr(""),tf=0,nf=0;if(Ys._unevaluatedLayout.getValue("text-radial-offset")===void 0?(tf=(Ah=Ys.layout.get("text-offset").evaluate(qo,{},Xs).map(function(Cu){return Cu*va}))[0],nf=Ah[1]):(tf=Ys.layout.get("text-radial-offset").evaluate(qo,{},Xs)*va,nf=Fc),Yi.allowVerticalPlacement&&yl.vertical){var Oh=Ys.layout.get("text-rotate").evaluate(qo,{},Xs)+90,md=yl.vertical;tu=new Ju(hc,Rs,Su,pc,dc,md,$c,yh,Eu,Oh),fc&&(nu=new Ju(hc,Rs,Su,pc,dc,fc,bh,_h,Eu,Oh))}if(Jc){var rf=Ys.layout.get("icon-rotate").evaluate(qo,{}),Ph=Ys.layout.get("icon-text-fit")!=="none",Ih=Yf(Jc,rf,kh,Ph),af=fc?Yf(fc,rf,kh,Ph):void 0;eu=new Ju(hc,Rs,Su,pc,dc,Jc,bh,_h,!1,rf),Mh=4*Ih.length;var zh=Yi.iconSizeData,Lu=null;zh.kind==="source"?(Lu=[Is*Ys.layout.get("icon-size").evaluate(qo,{})])[0]>vl&&E(Yi.layerIds[0]+': Value for "icon-size" is >= '+gu+'. Reduce your "icon-size".'):zh.kind==="composite"&&((Lu=[Is*gc.compositeIconSizes[0].evaluate(qo,{},Xs),Is*gc.compositeIconSizes[1].evaluate(qo,{},Xs)])[0]>vl||Lu[1]>vl)&&E(Yi.layerIds[0]+': Value for "icon-size" is >= '+gu+'. Reduce your "icon-size".'),Yi.addSymbols(Yi.icon,Ih,Lu,Th,wh,qo,!1,Rs,ru.lineStartIndex,ru.lineLength,-1,Xs),Qc=Yi.icon.placedSymbolArray.length-1,af&&(Sh=4*af.length,Yi.addSymbols(Yi.icon,af,Lu,Th,wh,qo,Vo.vertical,Rs,ru.lineStartIndex,ru.lineLength,-1,Xs),ef=Yi.icon.placedSymbolArray.length-1)}for(var Dh in yl.horizontal){var vc=yl.horizontal[Dh];if(!Dl){Ch=vr(vc.text);var yd=Ys.layout.get("text-rotate").evaluate(qo,{},Xs);Dl=new Ju(hc,Rs,Su,pc,dc,vc,$c,yh,Eu,yd)}var Rh=vc.positionedLines.length===1;if(Eh+=Kf(Yi,Rs,vc,mh,Ys,Eu,qo,xh,ru,yl.vertical?Vo.horizontal:Vo.horizontalOnly,Rh?Object.keys(yl.horizontal):[Dh],il,Qc,gc,Xs),Rh)break}yl.vertical&&(Lh+=Kf(Yi,Rs,yl.vertical,mh,Ys,Eu,qo,xh,ru,Vo.vertical,["vertical"],il,ef,gc,Xs));var xd=Dl?Dl.boxStartIndex:Yi.collisionBoxArray.length,bd=Dl?Dl.boxEndIndex:Yi.collisionBoxArray.length,_d=tu?tu.boxStartIndex:Yi.collisionBoxArray.length,wd=tu?tu.boxEndIndex:Yi.collisionBoxArray.length,Td=eu?eu.boxStartIndex:Yi.collisionBoxArray.length,kd=eu?eu.boxEndIndex:Yi.collisionBoxArray.length,Ad=nu?nu.boxStartIndex:Yi.collisionBoxArray.length,Md=nu?nu.boxEndIndex:Yi.collisionBoxArray.length,Zs=-1,mc=function(Cu,Bh){return Cu&&Cu.circleDiameter?Math.max(Cu.circleDiameter,Bh):Bh};Zs=mc(Dl,Zs),Zs=mc(tu,Zs),Zs=mc(eu,Zs);var Fh=(Zs=mc(nu,Zs))>-1?1:0;Fh&&(Zs*=vd/va),Yi.glyphOffsetArray.length>=ci.MAX_GLYPHS&&E("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),qo.sortKey!==void 0&&Yi.addToSortKeyRanges(Yi.symbolInstances.length,qo.sortKey),Yi.symbolInstances.emplaceBack(Rs.x,Rs.y,il.right>=0?il.right:-1,il.center>=0?il.center:-1,il.left>=0?il.left:-1,il.vertical||-1,Qc,ef,Ch,xd,bd,_d,wd,Td,kd,Ad,Md,Su,Eh,Lh,Mh,Sh,Fh,0,$c,tf,nf,Zs)}(Nr,Mu,dd,Ui,di,zi,rl,Nr.layers[0],Nr.collisionBoxArray,Kr.index,Kr.sourceLayerIndex,Nr.index,nc,Hc,ac,Za,rc,ic,oc,Ds,Kr,Ci,To,Da,ei)};if(xu==="line")for(var $l=0,sc=Wf(Kr.geometry,0,0,Zr,Zr);$l<sc.length;$l+=1)for(var lc=sc[$l],Ql=0,uc=Jp(lc,yu,Jl,Ui.vertical||ys,di,xs,Ol,Nr.overscaling,Zr);Ql<uc.length;Ql+=1){var cc=uc[Ql];ys&&td(Nr,ys.text,Gc,cc)||Pl(lc,cc)}else if(xu==="line-center")for(var _u=0,wu=Kr.geometry;_u<wu.length;_u+=1){var Il=wu[_u];if(Il.length>1){var Tu=Kp(Il,Jl,Ui.vertical||ys,di,xs,Ol);Tu&&Pl(Il,Tu)}}else if(Kr.type==="Polygon")for(var zl=0,ku=Ec(Kr.geometry,0);zl<ku.length;zl+=1){var Au=ku[zl],ph=Qp(Au,16);Pl(Au[0],new Vl(ph.x,ph.y,0))}else if(Kr.type==="LineString")for(var Wc=0,dh=Kr.geometry;Wc<dh.length;Wc+=1){var Yc=dh[Wc];Pl(Yc,new Vl(Yc[0].x,Yc[0].y,0))}else if(Kr.type==="Point")for(var Xc=0,gh=Kr.geometry;Xc<gh.length;Xc+=1)for(var Zc=0,vh=gh[Xc];Zc<vh.length;Zc+=1){var Kc=vh[Zc];Pl([Kc],new Vl(Kc.x,Kc.y,0))}}(A,hr,zr,ia,le,kt,Dr,Sr,Mr,xa,Ne)},nr=0,dr=A.features;nr<dr.length;nr+=1)Jn();Ce&&A.generateCollisionDebugBuffers()},s.perspective=function(A,D,Y,le,Te){var Ce,Ne=1/Math.tan(D/2);return A[0]=Ne/Y,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=Ne,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=-1,A[12]=0,A[13]=0,A[15]=0,Te!=null&&Te!==1/0?(Ce=1/(le-Te),A[10]=(Te+le)*Ce,A[14]=2*Te*le*Ce):(A[10]=-1,A[14]=-2*le),A},s.pick=function(A,D){for(var Y={},le=0;le<D.length;le++){var Te=D[le];Te in A&&(Y[Te]=A[Te])}return Y},s.plugin=ca,s.polygonIntersectsPolygon=Al,s.postMapLoadEvent=de,s.postTurnstileEvent=Oe,s.potpack=If,s.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],s.register=_r,s.registerForPluginStateChange=function(A){return A({pluginStatus:Hr,pluginURL:Gi}),ua.on("pluginStateChange",A),A},s.renderColorRamp=ff,s.rotate=function(A,D,Y){var le=D[0],Te=D[1],Ce=D[2],Ne=D[3],Ze=Math.sin(Y),st=Math.cos(Y);return A[0]=le*st+Ce*Ze,A[1]=Te*st+Ne*Ze,A[2]=le*-Ze+Ce*st,A[3]=Te*-Ze+Ne*st,A},s.rotateX=function(A,D,Y){var le=Math.sin(Y),Te=Math.cos(Y),Ce=D[4],Ne=D[5],Ze=D[6],st=D[7],_t=D[8],kt=D[9],It=D[10],Vt=D[11];return D!==A&&(A[0]=D[0],A[1]=D[1],A[2]=D[2],A[3]=D[3],A[12]=D[12],A[13]=D[13],A[14]=D[14],A[15]=D[15]),A[4]=Ce*Te+_t*le,A[5]=Ne*Te+kt*le,A[6]=Ze*Te+It*le,A[7]=st*Te+Vt*le,A[8]=_t*Te-Ce*le,A[9]=kt*Te-Ne*le,A[10]=It*Te-Ze*le,A[11]=Vt*Te-st*le,A},s.rotateZ=function(A,D,Y){var le=Math.sin(Y),Te=Math.cos(Y),Ce=D[0],Ne=D[1],Ze=D[2],st=D[3],_t=D[4],kt=D[5],It=D[6],Vt=D[7];return D!==A&&(A[8]=D[8],A[9]=D[9],A[10]=D[10],A[11]=D[11],A[12]=D[12],A[13]=D[13],A[14]=D[14],A[15]=D[15]),A[0]=Ce*Te+_t*le,A[1]=Ne*Te+kt*le,A[2]=Ze*Te+It*le,A[3]=st*Te+Vt*le,A[4]=_t*Te-Ce*le,A[5]=kt*Te-Ne*le,A[6]=It*Te-Ze*le,A[7]=Vt*Te-st*le,A},s.scale=function(A,D,Y){var le=Y[0],Te=Y[1],Ce=Y[2];return A[0]=D[0]*le,A[1]=D[1]*le,A[2]=D[2]*le,A[3]=D[3]*le,A[4]=D[4]*Te,A[5]=D[5]*Te,A[6]=D[6]*Te,A[7]=D[7]*Te,A[8]=D[8]*Ce,A[9]=D[9]*Ce,A[10]=D[10]*Ce,A[11]=D[11]*Ce,A[12]=D[12],A[13]=D[13],A[14]=D[14],A[15]=D[15],A},s.scale$1=function(A,D,Y){return A[0]=D[0]*Y,A[1]=D[1]*Y,A[2]=D[2]*Y,A[3]=D[3]*Y,A},s.scale$2=function(A,D,Y){return A[0]=D[0]*Y,A[1]=D[1]*Y,A[2]=D[2]*Y,A},s.setCacheLimits=function(A,D){Ae=A,Pe=D},s.setRTLTextPlugin=function(A,D,Y){if(Y===void 0&&(Y=!1),Hr===ro||Hr===Ia||Hr===yo)throw new Error("setRTLTextPlugin cannot be called multiple times.");Gi=Q.resolveURL(A),Hr=ro,No=D,io(),Y||ps()},s.sphericalToCartesian=function(A){var D=A[0],Y=A[1],le=A[2];return Y+=90,Y*=Math.PI/180,le*=Math.PI/180,{x:D*Math.cos(Y)*Math.sin(le),y:D*Math.sin(Y)*Math.sin(le),z:D*Math.cos(le)}},s.sqrLen=Gh,s.styleSpec=Re,s.sub=Hh,s.symbolSize=Zp,s.transformMat3=function(A,D,Y){var le=D[0],Te=D[1],Ce=D[2];return A[0]=le*Y[0]+Te*Y[3]+Ce*Y[6],A[1]=le*Y[1]+Te*Y[4]+Ce*Y[7],A[2]=le*Y[2]+Te*Y[5]+Ce*Y[8],A},s.transformMat4=Bu,s.translate=function(A,D,Y){var le,Te,Ce,Ne,Ze,st,_t,kt,It,Vt,Bt,nn,un=Y[0],kn=Y[1],bn=Y[2];return D===A?(A[12]=D[0]*un+D[4]*kn+D[8]*bn+D[12],A[13]=D[1]*un+D[5]*kn+D[9]*bn+D[13],A[14]=D[2]*un+D[6]*kn+D[10]*bn+D[14],A[15]=D[3]*un+D[7]*kn+D[11]*bn+D[15]):(le=D[0],Te=D[1],Ce=D[2],Ne=D[3],Ze=D[4],st=D[5],_t=D[6],kt=D[7],It=D[8],Vt=D[9],Bt=D[10],nn=D[11],A[0]=le,A[1]=Te,A[2]=Ce,A[3]=Ne,A[4]=Ze,A[5]=st,A[6]=_t,A[7]=kt,A[8]=It,A[9]=Vt,A[10]=Bt,A[11]=nn,A[12]=le*un+Ze*kn+It*bn+D[12],A[13]=Te*un+st*kn+Vt*bn+D[13],A[14]=Ce*un+_t*kn+Bt*bn+D[14],A[15]=Ne*un+kt*kn+nn*bn+D[15]),A},s.triggerPluginCompletionEvent=la,s.uniqueId=p,s.validateCustomStyleLayer=function(A){var D=[],Y=A.id;return Y===void 0&&D.push({message:"layers."+Y+': missing required property "id"'}),A.render===void 0&&D.push({message:"layers."+Y+': missing required method "render"'}),A.renderingMode&&A.renderingMode!=="2d"&&A.renderingMode!=="3d"&&D.push({message:"layers."+Y+': property "renderingMode" must be either "2d" or "3d"'}),D},s.validateLight=Qo,s.validateStyle=no,s.values=function(A){var D=[];for(var Y in A)D.push(A[Y]);return D},s.vectorTile=Bl,s.version=b,s.warnOnce=E,s.webpSupported=X,s.window=n,s.wrap=h}),k(0,function(s){function T(He){var We=typeof He;if(We==="number"||We==="boolean"||We==="string"||He==null)return JSON.stringify(He);if(Array.isArray(He)){for(var Be="[",Ge=0,ot=He;Ge<ot.length;Ge+=1)Be+=T(ot[Ge])+",";return Be+"]"}for(var it=Object.keys(He).sort(),dt="{",gt=0;gt<it.length;gt++)dt+=JSON.stringify(it[gt])+":"+T(He[it[gt]])+",";return dt+"}"}function b(He){for(var We="",Be=0,Ge=s.refProperties;Be<Ge.length;Be+=1)We+="/"+T(He[Ge[Be]]);return We}var f=function(He){this.keyCache={},He&&this.replace(He)};f.prototype.replace=function(He){this._layerConfigs={},this._layers={},this.update(He,[])},f.prototype.update=function(He,We){for(var Be=this,Ge=0,ot=He;Ge<ot.length;Ge+=1){var it=ot[Ge];this._layerConfigs[it.id]=it;var dt=this._layers[it.id]=s.createStyleLayer(it);dt._featureFilter=s.featureFilter(dt.filter),this.keyCache[it.id]&&delete this.keyCache[it.id]}for(var gt=0,je=We;gt<je.length;gt+=1){var Re=je[gt];delete this.keyCache[Re],delete this._layerConfigs[Re],delete this._layers[Re]}this.familiesBySource={};for(var rt=0,ct=function(bt,zt){for(var Ut={},en=0;en<bt.length;en++){var an=zt&&zt[bt[en].id]||b(bt[en]);zt&&(zt[bt[en].id]=an);var rn=Ut[an];rn||(rn=Ut[an]=[]),rn.push(bt[en])}var qt=[];for(var Kt in Ut)qt.push(Ut[Kt]);return qt}(s.values(this._layerConfigs),this.keyCache);rt<ct.length;rt+=1){var ut=ct[rt].map(function(bt){return Be._layers[bt.id]}),et=ut[0];if(et.visibility!=="none"){var xt=et.source||"",mt=this.familiesBySource[xt];mt||(mt=this.familiesBySource[xt]={});var Tt=et.sourceLayer||"_geojsonTileLayer",yt=mt[Tt];yt||(yt=mt[Tt]=[]),yt.push(ut)}}};var o=function(He){var We={},Be=[];for(var Ge in He){var ot=He[Ge],it=We[Ge]={};for(var dt in ot){var gt=ot[+dt];if(gt&&gt.bitmap.width!==0&&gt.bitmap.height!==0){var je={x:0,y:0,w:gt.bitmap.width+2,h:gt.bitmap.height+2};Be.push(je),it[dt]={rect:je,metrics:gt.metrics}}}}var Re=s.potpack(Be),rt=Re.w,ct=Re.h,ut=new s.AlphaImage({width:rt||1,height:ct||1});for(var et in He){var xt=He[et];for(var mt in xt){var Tt=xt[+mt];if(Tt&&Tt.bitmap.width!==0&&Tt.bitmap.height!==0){var yt=We[et][mt].rect;s.AlphaImage.copy(Tt.bitmap,ut,{x:0,y:0},{x:yt.x+1,y:yt.y+1},Tt.bitmap)}}}this.image=ut,this.positions=We};s.register("GlyphAtlas",o);var t=function(He){this.tileID=new s.OverscaledTileID(He.tileID.overscaledZ,He.tileID.wrap,He.tileID.canonical.z,He.tileID.canonical.x,He.tileID.canonical.y),this.uid=He.uid,this.zoom=He.zoom,this.pixelRatio=He.pixelRatio,this.tileSize=He.tileSize,this.source=He.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=He.showCollisionBoxes,this.collectResourceTiming=!!He.collectResourceTiming,this.returnDependencies=!!He.returnDependencies,this.promoteId=He.promoteId};function i(He,We,Be){for(var Ge=new s.EvaluationParameters(We),ot=0,it=He;ot<it.length;ot+=1)it[ot].recalculate(Ge,Be)}function n(He,We){var Be=s.getArrayBuffer(He.request,function(Ge,ot,it,dt){Ge?We(Ge):ot&&We(null,{vectorTile:new s.vectorTile.VectorTile(new s.pbf(ot)),rawData:ot,cacheControl:it,expires:dt})});return function(){Be.cancel(),We()}}t.prototype.parse=function(He,We,Be,Ge,ot){var it=this;this.status="parsing",this.data=He,this.collisionBoxArray=new s.CollisionBoxArray;var dt=new s.DictionaryCoder(Object.keys(He.layers).sort()),gt=new s.FeatureIndex(this.tileID,this.promoteId);gt.bucketLayerIDs=[];var je,Re,rt,ct,ut={},et={featureIndex:gt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Be},xt=We.familiesBySource[this.source];for(var mt in xt){var Tt=He.layers[mt];if(Tt){Tt.version===1&&s.warnOnce('Vector tile source "'+this.source+'" layer "'+mt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var yt=dt.encode(mt),bt=[],zt=0;zt<Tt.length;zt++){var Ut=Tt.feature(zt),en=gt.getId(Ut,mt);bt.push({feature:Ut,id:en,index:zt,sourceLayerIndex:yt})}for(var an=0,rn=xt[mt];an<rn.length;an+=1){var qt=rn[an],Kt=qt[0];Kt.minzoom&&this.zoom<Math.floor(Kt.minzoom)||Kt.maxzoom&&this.zoom>=Kt.maxzoom||Kt.visibility!=="none"&&(i(qt,this.zoom,Be),(ut[Kt.id]=Kt.createBucket({index:gt.bucketLayerIDs.length,layers:qt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:yt,sourceID:this.source})).populate(bt,et,this.tileID.canonical),gt.bucketLayerIDs.push(qt.map(function(Jt){return Jt.id})))}}}var xn=s.mapObject(et.glyphDependencies,function(Jt){return Object.keys(Jt).map(Number)});Object.keys(xn).length?Ge.send("getGlyphs",{uid:this.uid,stacks:xn},function(Jt,tn){je||(je=Jt,Re=tn,ln.call(it))}):Re={};var on=Object.keys(et.iconDependencies);on.length?Ge.send("getImages",{icons:on,source:this.source,tileID:this.tileID,type:"icons"},function(Jt,tn){je||(je=Jt,rt=tn,ln.call(it))}):rt={};var Xt=Object.keys(et.patternDependencies);function ln(){if(je)return ot(je);if(Re&&rt&&ct){var Jt=new o(Re),tn=new s.ImageAtlas(rt,ct);for(var wn in ut){var mn=ut[wn];mn instanceof s.SymbolBucket?(i(mn.layers,this.zoom,Be),s.performSymbolLayout(mn,Re,Jt.positions,rt,tn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):mn.hasPattern&&(mn instanceof s.LineBucket||mn instanceof s.FillBucket||mn instanceof s.FillExtrusionBucket)&&(i(mn.layers,this.zoom,Be),mn.addFeatures(et,this.tileID.canonical,tn.patternPositions))}this.status="done",ot(null,{buckets:s.values(ut).filter(function(Cn){return!Cn.isEmpty()}),featureIndex:gt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Jt.image,imageAtlas:tn,glyphMap:this.returnDependencies?Re:null,iconMap:this.returnDependencies?rt:null,glyphPositions:this.returnDependencies?Jt.positions:null})}}Xt.length?Ge.send("getImages",{icons:Xt,source:this.source,tileID:this.tileID,type:"patterns"},function(Jt,tn){je||(je=Jt,ct=tn,ln.call(it))}):ct={},ln.call(this)};var r=function(He,We,Be,Ge){this.actor=He,this.layerIndex=We,this.availableImages=Be,this.loadVectorData=Ge||n,this.loading={},this.loaded={}};r.prototype.loadTile=function(He,We){var Be=this,Ge=He.uid;this.loading||(this.loading={});var ot=!!(He&&He.request&&He.request.collectResourceTiming)&&new s.RequestPerformance(He.request),it=this.loading[Ge]=new t(He);it.abort=this.loadVectorData(He,function(dt,gt){if(delete Be.loading[Ge],dt||!gt)return it.status="done",Be.loaded[Ge]=it,We(dt);var je=gt.rawData,Re={};gt.expires&&(Re.expires=gt.expires),gt.cacheControl&&(Re.cacheControl=gt.cacheControl);var rt={};if(ot){var ct=ot.finish();ct&&(rt.resourceTiming=JSON.parse(JSON.stringify(ct)))}it.vectorTile=gt.vectorTile,it.parse(gt.vectorTile,Be.layerIndex,Be.availableImages,Be.actor,function(ut,et){if(ut||!et)return We(ut);We(null,s.extend({rawTileData:je.slice(0)},et,Re,rt))}),Be.loaded=Be.loaded||{},Be.loaded[Ge]=it})},r.prototype.reloadTile=function(He,We){var Be=this,Ge=this.loaded,ot=He.uid,it=this;if(Ge&&Ge[ot]){var dt=Ge[ot];dt.showCollisionBoxes=He.showCollisionBoxes;var gt=function(je,Re){var rt=dt.reloadCallback;rt&&(delete dt.reloadCallback,dt.parse(dt.vectorTile,it.layerIndex,Be.availableImages,it.actor,rt)),We(je,Re)};dt.status==="parsing"?dt.reloadCallback=gt:dt.status==="done"&&(dt.vectorTile?dt.parse(dt.vectorTile,this.layerIndex,this.availableImages,this.actor,gt):gt())}},r.prototype.abortTile=function(He,We){var Be=this.loading,Ge=He.uid;Be&&Be[Ge]&&Be[Ge].abort&&(Be[Ge].abort(),delete Be[Ge]),We()},r.prototype.removeTile=function(He,We){var Be=this.loaded,Ge=He.uid;Be&&Be[Ge]&&delete Be[Ge],We()};var a=s.window.ImageBitmap,l=function(){this.loaded={}};l.prototype.loadTile=function(He,We){var Be=He.uid,Ge=He.encoding,ot=He.rawImageData,it=a&&ot instanceof a?this.getImageData(ot):ot,dt=new s.DEMData(Be,it,Ge);this.loaded=this.loaded||{},this.loaded[Be]=dt,We(null,dt)},l.prototype.getImageData=function(He){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(He.width,He.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=He.width,this.offscreenCanvas.height=He.height,this.offscreenCanvasContext.drawImage(He,0,0,He.width,He.height);var We=this.offscreenCanvasContext.getImageData(-1,-1,He.width+2,He.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new s.RGBAImage({width:We.width,height:We.height},We.data)},l.prototype.removeTile=function(He){var We=this.loaded,Be=He.uid;We&&We[Be]&&delete We[Be]};var u=function He(We,Be){var Ge,ot=We&&We.type;if(ot==="FeatureCollection")for(Ge=0;Ge<We.features.length;Ge++)He(We.features[Ge],Be);else if(ot==="GeometryCollection")for(Ge=0;Ge<We.geometries.length;Ge++)He(We.geometries[Ge],Be);else if(ot==="Feature")He(We.geometry,Be);else if(ot==="Polygon")h(We.coordinates,Be);else if(ot==="MultiPolygon")for(Ge=0;Ge<We.coordinates.length;Ge++)h(We.coordinates[Ge],Be);return We};function h(He,We){if(He.length!==0){c(He[0],We);for(var Be=1;Be<He.length;Be++)c(He[Be],!We)}}function c(He,We){for(var Be=0,Ge=0,ot=He.length,it=ot-1;Ge<ot;it=Ge++)Be+=(He[Ge][0]-He[it][0])*(He[it][1]+He[Ge][1]);Be>=0!=!!We&&He.reverse()}var x=s.vectorTile.VectorTileFeature.prototype.toGeoJSON,p=function(He){this._feature=He,this.extent=s.EXTENT,this.type=He.type,this.properties=He.tags,"id"in He&&!isNaN(He.id)&&(this.id=parseInt(He.id,10))};p.prototype.loadGeometry=function(){if(this._feature.type===1){for(var He=[],We=0,Be=this._feature.geometry;We<Be.length;We+=1){var Ge=Be[We];He.push([new s.Point$1(Ge[0],Ge[1])])}return He}for(var ot=[],it=0,dt=this._feature.geometry;it<dt.length;it+=1){for(var gt=[],je=0,Re=dt[it];je<Re.length;je+=1){var rt=Re[je];gt.push(new s.Point$1(rt[0],rt[1]))}ot.push(gt)}return ot},p.prototype.toGeoJSON=function(He,We,Be){return x.call(this,He,We,Be)};var v=function(He){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.EXTENT,this.length=He.length,this._features=He};v.prototype.feature=function(He){return new p(this._features[He])};var g=s.vectorTile.VectorTileFeature,y=m;function m(He,We){this.options=We||{},this.features=He,this.length=He.length}function _(He,We){this.id=typeof He.id=="number"?He.id:void 0,this.type=He.type,this.rawGeometry=He.type===1?[He.geometry]:He.geometry,this.properties=He.tags,this.extent=We||4096}m.prototype.feature=function(He){return new _(this.features[He],this.options.extent)},_.prototype.loadGeometry=function(){var He=this.rawGeometry;this.geometry=[];for(var We=0;We<He.length;We++){for(var Be=He[We],Ge=[],ot=0;ot<Be.length;ot++)Ge.push(new s.Point$1(Be[ot][0],Be[ot][1]));this.geometry.push(Ge)}return this.geometry},_.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var He=this.geometry,We=1/0,Be=-1/0,Ge=1/0,ot=-1/0,it=0;it<He.length;it++)for(var dt=He[it],gt=0;gt<dt.length;gt++){var je=dt[gt];We=Math.min(We,je.x),Be=Math.max(Be,je.x),Ge=Math.min(Ge,je.y),ot=Math.max(ot,je.y)}return[We,Ge,Be,ot]},_.prototype.toGeoJSON=g.prototype.toGeoJSON;var d=C,S=C,w=function(He,We){We=We||{};var Be={};for(var Ge in He)Be[Ge]=new y(He[Ge].features,We),Be[Ge].name=Ge,Be[Ge].version=We.version,Be[Ge].extent=We.extent;return C({layers:Be})},E=y;function C(He){var We=new s.pbf;return function(Be,Ge){for(var ot in Be.layers)Ge.writeMessage(3,O,Be.layers[ot])}(He,We),We.finish()}function O(He,We){var Be;We.writeVarintField(15,He.version||1),We.writeStringField(1,He.name||""),We.writeVarintField(5,He.extent||4096);var Ge={keys:[],values:[],keycache:{},valuecache:{}};for(Be=0;Be<He.length;Be++)Ge.feature=He.feature(Be),We.writeMessage(2,P,Ge);var ot=Ge.keys;for(Be=0;Be<ot.length;Be++)We.writeStringField(3,ot[Be]);var it=Ge.values;for(Be=0;Be<it.length;Be++)We.writeMessage(4,W,it[Be])}function P(He,We){var Be=He.feature;Be.id!==void 0&&We.writeVarintField(1,Be.id),We.writeMessage(2,z,He),We.writeVarintField(3,Be.type),We.writeMessage(4,N,Be)}function z(He,We){var Be=He.feature,Ge=He.keys,ot=He.values,it=He.keycache,dt=He.valuecache;for(var gt in Be.properties){var je=it[gt];je===void 0&&(Ge.push(gt),je=Ge.length-1,it[gt]=je),We.writeVarint(je);var Re=Be.properties[gt],rt=typeof Re;rt!=="string"&&rt!=="boolean"&&rt!=="number"&&(Re=JSON.stringify(Re));var ct=rt+":"+Re,ut=dt[ct];ut===void 0&&(ot.push(Re),ut=ot.length-1,dt[ct]=ut),We.writeVarint(ut)}}function j(He,We){return(We<<3)+(7&He)}function I(He){return He<<1^He>>31}function N(He,We){for(var Be=He.loadGeometry(),Ge=He.type,ot=0,it=0,dt=Be.length,gt=0;gt<dt;gt++){var je=Be[gt],Re=1;Ge===1&&(Re=je.length),We.writeVarint(j(1,Re));for(var rt=Ge===3?je.length-1:je.length,ct=0;ct<rt;ct++){ct===1&&Ge!==1&&We.writeVarint(j(2,rt-1));var ut=je[ct].x-ot,et=je[ct].y-it;We.writeVarint(I(ut)),We.writeVarint(I(et)),ot+=ut,it+=et}Ge===3&&We.writeVarint(j(7,1))}}function W(He,We){var Be=typeof He;Be==="string"?We.writeStringField(1,He):Be==="boolean"?We.writeBooleanField(7,He):Be==="number"&&(He%1!=0?We.writeDoubleField(3,He):He<0?We.writeSVarintField(6,He):We.writeVarintField(5,He))}function F(He,We,Be,Ge,ot,it){if(!(ot-Ge<=Be)){var dt=Ge+ot>>1;U(He,We,dt,Ge,ot,it%2),F(He,We,Be,Ge,dt-1,it+1),F(He,We,Be,dt+1,ot,it+1)}}function U(He,We,Be,Ge,ot,it){for(;ot>Ge;){if(ot-Ge>600){var dt=ot-Ge+1,gt=Be-Ge+1,je=Math.log(dt),Re=.5*Math.exp(2*je/3),rt=.5*Math.sqrt(je*Re*(dt-Re)/dt)*(gt-dt/2<0?-1:1);U(He,We,Be,Math.max(Ge,Math.floor(Be-gt*Re/dt+rt)),Math.min(ot,Math.floor(Be+(dt-gt)*Re/dt+rt)),it)}var ct=We[2*Be+it],ut=Ge,et=ot;for(H(He,We,Ge,Be),We[2*ot+it]>ct&&H(He,We,Ge,ot);ut<et;){for(H(He,We,ut,et),ut++,et--;We[2*ut+it]<ct;)ut++;for(;We[2*et+it]>ct;)et--}We[2*Ge+it]===ct?H(He,We,Ge,et):H(He,We,++et,ot),et<=Be&&(Ge=et+1),Be<=et&&(ot=et-1)}}function H(He,We,Be,Ge){ne(He,Be,Ge),ne(We,2*Be,2*Ge),ne(We,2*Be+1,2*Ge+1)}function ne(He,We,Be){var Ge=He[We];He[We]=He[Be],He[Be]=Ge}function $(He,We,Be,Ge){var ot=He-Be,it=We-Ge;return ot*ot+it*it}d.fromVectorTileJs=S,d.fromGeojsonVt=w,d.GeoJSONWrapper=E;var K=function(He){return He[0]},Q=function(He){return He[1]},Z=function(He,We,Be,Ge,ot){We===void 0&&(We=K),Be===void 0&&(Be=Q),Ge===void 0&&(Ge=64),ot===void 0&&(ot=Float64Array),this.nodeSize=Ge,this.points=He;for(var it=He.length<65536?Uint16Array:Uint32Array,dt=this.ids=new it(He.length),gt=this.coords=new ot(2*He.length),je=0;je<He.length;je++)dt[je]=je,gt[2*je]=We(He[je]),gt[2*je+1]=Be(He[je]);F(dt,gt,Ge,0,dt.length-1,0)};Z.prototype.range=function(He,We,Be,Ge){return function(ot,it,dt,gt,je,Re,rt){for(var ct,ut,et=[0,ot.length-1,0],xt=[];et.length;){var mt=et.pop(),Tt=et.pop(),yt=et.pop();if(Tt-yt<=rt)for(var bt=yt;bt<=Tt;bt++)ct=it[2*bt],ut=it[2*bt+1],ct>=dt&&ct<=je&&ut>=gt&&ut<=Re&&xt.push(ot[bt]);else{var zt=Math.floor((yt+Tt)/2);ct=it[2*zt],ut=it[2*zt+1],ct>=dt&&ct<=je&&ut>=gt&&ut<=Re&&xt.push(ot[zt]);var Ut=(mt+1)%2;(mt===0?dt<=ct:gt<=ut)&&(et.push(yt),et.push(zt-1),et.push(Ut)),(mt===0?je>=ct:Re>=ut)&&(et.push(zt+1),et.push(Tt),et.push(Ut))}}return xt}(this.ids,this.coords,He,We,Be,Ge,this.nodeSize)},Z.prototype.within=function(He,We,Be){return function(Ge,ot,it,dt,gt,je){for(var Re=[0,Ge.length-1,0],rt=[],ct=gt*gt;Re.length;){var ut=Re.pop(),et=Re.pop(),xt=Re.pop();if(et-xt<=je)for(var mt=xt;mt<=et;mt++)$(ot[2*mt],ot[2*mt+1],it,dt)<=ct&&rt.push(Ge[mt]);else{var Tt=Math.floor((xt+et)/2),yt=ot[2*Tt],bt=ot[2*Tt+1];$(yt,bt,it,dt)<=ct&&rt.push(Ge[Tt]);var zt=(ut+1)%2;(ut===0?it-gt<=yt:dt-gt<=bt)&&(Re.push(xt),Re.push(Tt-1),Re.push(zt)),(ut===0?it+gt>=yt:dt+gt>=bt)&&(Re.push(Tt+1),Re.push(et),Re.push(zt))}}return rt}(this.ids,this.coords,He,We,Be,this.nodeSize)};var X={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(He){return He}},te=function(He){this.options=me(Object.create(X),He),this.trees=new Array(this.options.maxZoom+1)};function ae(He,We,Be,Ge,ot){return{x:He,y:We,zoom:1/0,id:Be,parentId:-1,numPoints:Ge,properties:ot}}function se(He,We){var Be=He.geometry.coordinates,Ge=Be[0],ot=Be[1];return{x:pe(Ge),y:ge(ot),zoom:1/0,index:We,parentId:-1}}function ce(He){return{type:"Feature",id:He.id,properties:fe(He),geometry:{type:"Point",coordinates:[(Ge=He.x,360*(Ge-.5)),(We=He.y,Be=(180-360*We)*Math.PI/180,360*Math.atan(Math.exp(Be))/Math.PI-90)]}};var We,Be,Ge}function fe(He){var We=He.numPoints,Be=We>=1e4?Math.round(We/1e3)+"k":We>=1e3?Math.round(We/100)/10+"k":We;return me(me({},He.properties),{cluster:!0,cluster_id:He.id,point_count:We,point_count_abbreviated:Be})}function pe(He){return He/360+.5}function ge(He){var We=Math.sin(He*Math.PI/180),Be=.5-.25*Math.log((1+We)/(1-We))/Math.PI;return Be<0?0:Be>1?1:Be}function me(He,We){for(var Be in We)He[Be]=We[Be];return He}function be(He){return He.x}function ke(He){return He.y}function ze(He,We,Be,Ge){for(var ot,it=Ge,dt=Be-We>>1,gt=Be-We,je=He[We],Re=He[We+1],rt=He[Be],ct=He[Be+1],ut=We+3;ut<Be;ut+=3){var et=ve(He[ut],He[ut+1],je,Re,rt,ct);if(et>it)ot=ut,it=et;else if(et===it){var xt=Math.abs(ut-dt);xt<gt&&(ot=ut,gt=xt)}}it>Ge&&(ot-We>3&&ze(He,We,ot,Ge),He[ot+2]=it,Be-ot>3&&ze(He,ot,Be,Ge))}function ve(He,We,Be,Ge,ot,it){var dt=ot-Be,gt=it-Ge;if(dt!==0||gt!==0){var je=((He-Be)*dt+(We-Ge)*gt)/(dt*dt+gt*gt);je>1?(Be=ot,Ge=it):je>0&&(Be+=dt*je,Ge+=gt*je)}return(dt=He-Be)*dt+(gt=We-Ge)*gt}function oe(He,We,Be,Ge){var ot={id:He===void 0?null:He,type:We,geometry:Be,tags:Ge,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(it){var dt=it.geometry,gt=it.type;if(gt==="Point"||gt==="MultiPoint"||gt==="LineString")ie(it,dt);else if(gt==="Polygon"||gt==="MultiLineString")for(var je=0;je<dt.length;je++)ie(it,dt[je]);else if(gt==="MultiPolygon")for(je=0;je<dt.length;je++)for(var Re=0;Re<dt[je].length;Re++)ie(it,dt[je][Re])}(ot),ot}function ie(He,We){for(var Be=0;Be<We.length;Be+=3)He.minX=Math.min(He.minX,We[Be]),He.minY=Math.min(He.minY,We[Be+1]),He.maxX=Math.max(He.maxX,We[Be]),He.maxY=Math.max(He.maxY,We[Be+1])}function he(He,We,Be,Ge){if(We.geometry){var ot=We.geometry.coordinates,it=We.geometry.type,dt=Math.pow(Be.tolerance/((1<<Be.maxZoom)*Be.extent),2),gt=[],je=We.id;if(Be.promoteId?je=We.properties[Be.promoteId]:Be.generateId&&(je=Ge||0),it==="Point")Se(ot,gt);else if(it==="MultiPoint")for(var Re=0;Re<ot.length;Re++)Se(ot[Re],gt);else if(it==="LineString")ye(ot,gt,dt,!1);else if(it==="MultiLineString"){if(Be.lineMetrics){for(Re=0;Re<ot.length;Re++)gt=[],ye(ot[Re],gt,dt,!1),He.push(oe(je,"LineString",gt,We.properties));return}we(ot,gt,dt,!1)}else if(it==="Polygon")we(ot,gt,dt,!0);else{if(it!=="MultiPolygon"){if(it==="GeometryCollection"){for(Re=0;Re<We.geometry.geometries.length;Re++)he(He,{id:je,geometry:We.geometry.geometries[Re],properties:We.properties},Be,Ge);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Re=0;Re<ot.length;Re++){var rt=[];we(ot[Re],rt,dt,!0),gt.push(rt)}}He.push(oe(je,it,gt,We.properties))}}function Se(He,We){We.push(Me(He[0])),We.push(Oe(He[1])),We.push(0)}function ye(He,We,Be,Ge){for(var ot,it,dt=0,gt=0;gt<He.length;gt++){var je=Me(He[gt][0]),Re=Oe(He[gt][1]);We.push(je),We.push(Re),We.push(0),gt>0&&(dt+=Ge?(ot*Re-je*it)/2:Math.sqrt(Math.pow(je-ot,2)+Math.pow(Re-it,2))),ot=je,it=Re}var rt=We.length-3;We[2]=1,ze(We,0,rt,Be),We[rt+2]=1,We.size=Math.abs(dt),We.start=0,We.end=We.size}function we(He,We,Be,Ge){for(var ot=0;ot<He.length;ot++){var it=[];ye(He[ot],it,Be,Ge),We.push(it)}}function Me(He){return He/360+.5}function Oe(He){var We=Math.sin(He*Math.PI/180),Be=.5-.25*Math.log((1+We)/(1-We))/Math.PI;return Be<0?0:Be>1?1:Be}function Ie(He,We,Be,Ge,ot,it,dt,gt){if(Ge/=We,it>=(Be/=We)&&dt<Ge)return He;if(dt<Be||it>=Ge)return null;for(var je=[],Re=0;Re<He.length;Re++){var rt=He[Re],ct=rt.geometry,ut=rt.type,et=ot===0?rt.minX:rt.minY,xt=ot===0?rt.maxX:rt.maxY;if(et>=Be&&xt<Ge)je.push(rt);else if(!(xt<Be||et>=Ge)){var mt=[];if(ut==="Point"||ut==="MultiPoint")de(ct,mt,Be,Ge,ot);else if(ut==="LineString")_e(ct,mt,Be,Ge,ot,!1,gt.lineMetrics);else if(ut==="MultiLineString")Pe(ct,mt,Be,Ge,ot,!1);else if(ut==="Polygon")Pe(ct,mt,Be,Ge,ot,!0);else if(ut==="MultiPolygon")for(var Tt=0;Tt<ct.length;Tt++){var yt=[];Pe(ct[Tt],yt,Be,Ge,ot,!0),yt.length&&mt.push(yt)}if(mt.length){if(gt.lineMetrics&&ut==="LineString"){for(Tt=0;Tt<mt.length;Tt++)je.push(oe(rt.id,ut,mt[Tt],rt.tags));continue}ut!=="LineString"&&ut!=="MultiLineString"||(mt.length===1?(ut="LineString",mt=mt[0]):ut="MultiLineString"),ut!=="Point"&&ut!=="MultiPoint"||(ut=mt.length===3?"Point":"MultiPoint"),je.push(oe(rt.id,ut,mt,rt.tags))}}}return je.length?je:null}function de(He,We,Be,Ge,ot){for(var it=0;it<He.length;it+=3){var dt=He[it+ot];dt>=Be&&dt<=Ge&&(We.push(He[it]),We.push(He[it+1]),We.push(He[it+2]))}}function _e(He,We,Be,Ge,ot,it,dt){for(var gt,je,Re=Ae(He),rt=ot===0?Fe:Ve,ct=He.start,ut=0;ut<He.length-3;ut+=3){var et=He[ut],xt=He[ut+1],mt=He[ut+2],Tt=He[ut+3],yt=He[ut+4],bt=ot===0?et:xt,zt=ot===0?Tt:yt,Ut=!1;dt&&(gt=Math.sqrt(Math.pow(et-Tt,2)+Math.pow(xt-yt,2))),bt<Be?zt>Be&&(je=rt(Re,et,xt,Tt,yt,Be),dt&&(Re.start=ct+gt*je)):bt>Ge?zt<Ge&&(je=rt(Re,et,xt,Tt,yt,Ge),dt&&(Re.start=ct+gt*je)):Ee(Re,et,xt,mt),zt<Be&&bt>=Be&&(je=rt(Re,et,xt,Tt,yt,Be),Ut=!0),zt>Ge&&bt<=Ge&&(je=rt(Re,et,xt,Tt,yt,Ge),Ut=!0),!it&&Ut&&(dt&&(Re.end=ct+gt*je),We.push(Re),Re=Ae(He)),dt&&(ct+=gt)}var en=He.length-3;et=He[en],xt=He[en+1],mt=He[en+2],(bt=ot===0?et:xt)>=Be&&bt<=Ge&&Ee(Re,et,xt,mt),en=Re.length-3,it&&en>=3&&(Re[en]!==Re[0]||Re[en+1]!==Re[1])&&Ee(Re,Re[0],Re[1],Re[2]),Re.length&&We.push(Re)}function Ae(He){var We=[];return We.size=He.size,We.start=He.start,We.end=He.end,We}function Pe(He,We,Be,Ge,ot,it){for(var dt=0;dt<He.length;dt++)_e(He[dt],We,Be,Ge,ot,it,!1)}function Ee(He,We,Be,Ge){He.push(We),He.push(Be),He.push(Ge)}function Fe(He,We,Be,Ge,ot,it){var dt=(it-We)/(Ge-We);return He.push(it),He.push(Be+(ot-Be)*dt),He.push(1),dt}function Ve(He,We,Be,Ge,ot,it){var dt=(it-Be)/(ot-Be);return He.push(We+(Ge-We)*dt),He.push(it),He.push(1),dt}function Ye(He,We){for(var Be=[],Ge=0;Ge<He.length;Ge++){var ot,it=He[Ge],dt=it.type;if(dt==="Point"||dt==="MultiPoint"||dt==="LineString")ot=tt(it.geometry,We);else if(dt==="MultiLineString"||dt==="Polygon"){ot=[];for(var gt=0;gt<it.geometry.length;gt++)ot.push(tt(it.geometry[gt],We))}else if(dt==="MultiPolygon")for(ot=[],gt=0;gt<it.geometry.length;gt++){for(var je=[],Re=0;Re<it.geometry[gt].length;Re++)je.push(tt(it.geometry[gt][Re],We));ot.push(je)}Be.push(oe(it.id,dt,ot,it.tags))}return Be}function tt(He,We){var Be=[];Be.size=He.size,He.start!==void 0&&(Be.start=He.start,Be.end=He.end);for(var Ge=0;Ge<He.length;Ge+=3)Be.push(He[Ge]+We,He[Ge+1],He[Ge+2]);return Be}function nt(He,We){if(He.transformed)return He;var Be,Ge,ot,it=1<<He.z,dt=He.x,gt=He.y;for(Be=0;Be<He.features.length;Be++){var je=He.features[Be],Re=je.geometry,rt=je.type;if(je.geometry=[],rt===1)for(Ge=0;Ge<Re.length;Ge+=2)je.geometry.push(ht(Re[Ge],Re[Ge+1],We,it,dt,gt));else for(Ge=0;Ge<Re.length;Ge++){var ct=[];for(ot=0;ot<Re[Ge].length;ot+=2)ct.push(ht(Re[Ge][ot],Re[Ge][ot+1],We,it,dt,gt));je.geometry.push(ct)}}return He.transformed=!0,He}function ht(He,We,Be,Ge,ot,it){return[Math.round(Be*(He*Ge-ot)),Math.round(Be*(We*Ge-it))]}function vt(He,We,Be,Ge,ot){for(var it=We===ot.maxZoom?0:ot.tolerance/((1<<We)*ot.extent),dt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Be,y:Ge,z:We,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},gt=0;gt<He.length;gt++){dt.numFeatures++,pt(dt,He[gt],it,ot);var je=He[gt].minX,Re=He[gt].minY,rt=He[gt].maxX,ct=He[gt].maxY;je<dt.minX&&(dt.minX=je),Re<dt.minY&&(dt.minY=Re),rt>dt.maxX&&(dt.maxX=rt),ct>dt.maxY&&(dt.maxY=ct)}return dt}function pt(He,We,Be,Ge){var ot=We.geometry,it=We.type,dt=[];if(it==="Point"||it==="MultiPoint")for(var gt=0;gt<ot.length;gt+=3)dt.push(ot[gt]),dt.push(ot[gt+1]),He.numPoints++,He.numSimplified++;else if(it==="LineString")Qe(dt,ot,He,Be,!1,!1);else if(it==="MultiLineString"||it==="Polygon")for(gt=0;gt<ot.length;gt++)Qe(dt,ot[gt],He,Be,it==="Polygon",gt===0);else if(it==="MultiPolygon")for(var je=0;je<ot.length;je++){var Re=ot[je];for(gt=0;gt<Re.length;gt++)Qe(dt,Re[gt],He,Be,!0,gt===0)}if(dt.length){var rt=We.tags||null;if(it==="LineString"&&Ge.lineMetrics){for(var ct in rt={},We.tags)rt[ct]=We.tags[ct];rt.mapbox_clip_start=ot.start/ot.size,rt.mapbox_clip_end=ot.end/ot.size}var ut={geometry:dt,type:it==="Polygon"||it==="MultiPolygon"?3:it==="LineString"||it==="MultiLineString"?2:1,tags:rt};We.id!==null&&(ut.id=We.id),He.features.push(ut)}}function Qe(He,We,Be,Ge,ot,it){var dt=Ge*Ge;if(Ge>0&&We.size<(ot?dt:Ge))Be.numPoints+=We.length/3;else{for(var gt=[],je=0;je<We.length;je+=3)(Ge===0||We[je+2]>dt)&&(Be.numSimplified++,gt.push(We[je]),gt.push(We[je+1])),Be.numPoints++;ot&&function(Re,rt){for(var ct=0,ut=0,et=Re.length,xt=et-2;ut<et;xt=ut,ut+=2)ct+=(Re[ut]-Re[xt])*(Re[ut+1]+Re[xt+1]);if(ct>0===rt)for(ut=0,et=Re.length;ut<et/2;ut+=2){var mt=Re[ut],Tt=Re[ut+1];Re[ut]=Re[et-2-ut],Re[ut+1]=Re[et-1-ut],Re[et-2-ut]=mt,Re[et-1-ut]=Tt}}(gt,it),He.push(gt)}}function Ke(He,We){var Be=(We=this.options=function(ot,it){for(var dt in it)ot[dt]=it[dt];return ot}(Object.create(this.options),We)).debug;if(Be&&console.time("preprocess data"),We.maxZoom<0||We.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(We.promoteId&&We.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ge=function(ot,it){var dt=[];if(ot.type==="FeatureCollection")for(var gt=0;gt<ot.features.length;gt++)he(dt,ot.features[gt],it,gt);else ot.type==="Feature"?he(dt,ot,it):he(dt,{geometry:ot},it);return dt}(He,We);this.tiles={},this.tileCoords=[],Be&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",We.indexMaxZoom,We.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Ge=function(ot,it){var dt=it.buffer/it.extent,gt=ot,je=Ie(ot,1,-1-dt,dt,0,-1,2,it),Re=Ie(ot,1,1-dt,2+dt,0,-1,2,it);return(je||Re)&&(gt=Ie(ot,1,-dt,1+dt,0,-1,2,it)||[],je&&(gt=Ye(je,1).concat(gt)),Re&&(gt=gt.concat(Ye(Re,-1)))),gt}(Ge,We)).length&&this.splitTile(Ge,0,0,0),Be&&(Ge.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Mt(He,We,Be){return 32*((1<<He)*Be+We)+He}function Ot(He,We){var Be=He.tileID.canonical;if(!this._geoJSONIndex)return We(null,null);var Ge=this._geoJSONIndex.getTile(Be.z,Be.x,Be.y);if(!Ge)return We(null,null);var ot=new v(Ge.features),it=d(ot);it.byteOffset===0&&it.byteLength===it.buffer.byteLength||(it=new Uint8Array(it)),We(null,{vectorTile:ot,rawData:it.buffer})}te.prototype.load=function(He){var We=this.options,Be=We.log,Ge=We.minZoom,ot=We.maxZoom,it=We.nodeSize;Be&&console.time("total time");var dt="prepare "+He.length+" points";Be&&console.time(dt),this.points=He;for(var gt=[],je=0;je<He.length;je++)He[je].geometry&&gt.push(se(He[je],je));this.trees[ot+1]=new Z(gt,be,ke,it,Float32Array),Be&&console.timeEnd(dt);for(var Re=ot;Re>=Ge;Re--){var rt=+Date.now();gt=this._cluster(gt,Re),this.trees[Re]=new Z(gt,be,ke,it,Float32Array),Be&&console.log("z%d: %d clusters in %dms",Re,gt.length,+Date.now()-rt)}return Be&&console.timeEnd("total time"),this},te.prototype.getClusters=function(He,We){var Be=((He[0]+180)%360+360)%360-180,Ge=Math.max(-90,Math.min(90,He[1])),ot=He[2]===180?180:((He[2]+180)%360+360)%360-180,it=Math.max(-90,Math.min(90,He[3]));if(He[2]-He[0]>=360)Be=-180,ot=180;else if(Be>ot){var dt=this.getClusters([Be,Ge,180,it],We),gt=this.getClusters([-180,Ge,ot,it],We);return dt.concat(gt)}for(var je=this.trees[this._limitZoom(We)],Re=[],rt=0,ct=je.range(pe(Be),ge(it),pe(ot),ge(Ge));rt<ct.length;rt+=1){var ut=ct[rt],et=je.points[ut];Re.push(et.numPoints?ce(et):this.points[et.index])}return Re},te.prototype.getChildren=function(He){var We=this._getOriginId(He),Be=this._getOriginZoom(He),Ge="No cluster with the specified id.",ot=this.trees[Be];if(!ot)throw new Error(Ge);var it=ot.points[We];if(!it)throw new Error(Ge);for(var dt=this.options.radius/(this.options.extent*Math.pow(2,Be-1)),gt=[],je=0,Re=ot.within(it.x,it.y,dt);je<Re.length;je+=1){var rt=Re[je],ct=ot.points[rt];ct.parentId===He&&gt.push(ct.numPoints?ce(ct):this.points[ct.index])}if(gt.length===0)throw new Error(Ge);return gt},te.prototype.getLeaves=function(He,We,Be){We=We||10,Be=Be||0;var Ge=[];return this._appendLeaves(Ge,He,We,Be,0),Ge},te.prototype.getTile=function(He,We,Be){var Ge=this.trees[this._limitZoom(He)],ot=Math.pow(2,He),it=this.options,dt=it.extent,gt=it.radius/dt,je=(Be-gt)/ot,Re=(Be+1+gt)/ot,rt={features:[]};return this._addTileFeatures(Ge.range((We-gt)/ot,je,(We+1+gt)/ot,Re),Ge.points,We,Be,ot,rt),We===0&&this._addTileFeatures(Ge.range(1-gt/ot,je,1,Re),Ge.points,ot,Be,ot,rt),We===ot-1&&this._addTileFeatures(Ge.range(0,je,gt/ot,Re),Ge.points,-1,Be,ot,rt),rt.features.length?rt:null},te.prototype.getClusterExpansionZoom=function(He){for(var We=this._getOriginZoom(He)-1;We<=this.options.maxZoom;){var Be=this.getChildren(He);if(We++,Be.length!==1)break;He=Be[0].properties.cluster_id}return We},te.prototype._appendLeaves=function(He,We,Be,Ge,ot){for(var it=0,dt=this.getChildren(We);it<dt.length;it+=1){var gt=dt[it],je=gt.properties;if(je&&je.cluster?ot+je.point_count<=Ge?ot+=je.point_count:ot=this._appendLeaves(He,je.cluster_id,Be,Ge,ot):ot<Ge?ot++:He.push(gt),He.length===Be)break}return ot},te.prototype._addTileFeatures=function(He,We,Be,Ge,ot,it){for(var dt=0,gt=He;dt<gt.length;dt+=1){var je=We[gt[dt]],Re=je.numPoints,rt={type:1,geometry:[[Math.round(this.options.extent*(je.x*ot-Be)),Math.round(this.options.extent*(je.y*ot-Ge))]],tags:Re?fe(je):this.points[je.index].properties},ct=void 0;Re?ct=je.id:this.options.generateId?ct=je.index:this.points[je.index].id&&(ct=this.points[je.index].id),ct!==void 0&&(rt.id=ct),it.features.push(rt)}},te.prototype._limitZoom=function(He){return Math.max(this.options.minZoom,Math.min(+He,this.options.maxZoom+1))},te.prototype._cluster=function(He,We){for(var Be=[],Ge=this.options,ot=Ge.radius,it=Ge.extent,dt=Ge.reduce,gt=Ge.minPoints,je=ot/(it*Math.pow(2,We)),Re=0;Re<He.length;Re++){var rt=He[Re];if(!(rt.zoom<=We)){rt.zoom=We;for(var ct=this.trees[We+1],ut=ct.within(rt.x,rt.y,je),et=rt.numPoints||1,xt=et,mt=0,Tt=ut;mt<Tt.length;mt+=1){var yt=Tt[mt],bt=ct.points[yt];bt.zoom>We&&(xt+=bt.numPoints||1)}if(xt>=gt){for(var zt=rt.x*et,Ut=rt.y*et,en=dt&&et>1?this._map(rt,!0):null,an=(Re<<5)+(We+1)+this.points.length,rn=0,qt=ut;rn<qt.length;rn+=1){var Kt=qt[rn],xn=ct.points[Kt];if(!(xn.zoom<=We)){xn.zoom=We;var on=xn.numPoints||1;zt+=xn.x*on,Ut+=xn.y*on,xn.parentId=an,dt&&(en||(en=this._map(rt,!0)),dt(en,this._map(xn)))}}rt.parentId=an,Be.push(ae(zt/xt,Ut/xt,an,xt,en))}else if(Be.push(rt),xt>1)for(var Xt=0,ln=ut;Xt<ln.length;Xt+=1){var Jt=ln[Xt],tn=ct.points[Jt];tn.zoom<=We||(tn.zoom=We,Be.push(tn))}}}return Be},te.prototype._getOriginId=function(He){return He-this.points.length>>5},te.prototype._getOriginZoom=function(He){return(He-this.points.length)%32},te.prototype._map=function(He,We){if(He.numPoints)return We?me({},He.properties):He.properties;var Be=this.points[He.index].properties,Ge=this.options.map(Be);return We&&Ge===Be?me({},Ge):Ge},Ke.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ke.prototype.splitTile=function(He,We,Be,Ge,ot,it,dt){for(var gt=[He,We,Be,Ge],je=this.options,Re=je.debug;gt.length;){Ge=gt.pop(),Be=gt.pop(),We=gt.pop(),He=gt.pop();var rt=1<<We,ct=Mt(We,Be,Ge),ut=this.tiles[ct];if(!ut&&(Re>1&&console.time("creation"),ut=this.tiles[ct]=vt(He,We,Be,Ge,je),this.tileCoords.push({z:We,x:Be,y:Ge}),Re)){Re>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",We,Be,Ge,ut.numFeatures,ut.numPoints,ut.numSimplified),console.timeEnd("creation"));var et="z"+We;this.stats[et]=(this.stats[et]||0)+1,this.total++}if(ut.source=He,ot){if(We===je.maxZoom||We===ot)continue;var xt=1<<ot-We;if(Be!==Math.floor(it/xt)||Ge!==Math.floor(dt/xt))continue}else if(We===je.indexMaxZoom||ut.numPoints<=je.indexMaxPoints)continue;if(ut.source=null,He.length!==0){Re>1&&console.time("clipping");var mt,Tt,yt,bt,zt,Ut,en=.5*je.buffer/je.extent,an=.5-en,rn=.5+en,qt=1+en;mt=Tt=yt=bt=null,zt=Ie(He,rt,Be-en,Be+rn,0,ut.minX,ut.maxX,je),Ut=Ie(He,rt,Be+an,Be+qt,0,ut.minX,ut.maxX,je),He=null,zt&&(mt=Ie(zt,rt,Ge-en,Ge+rn,1,ut.minY,ut.maxY,je),Tt=Ie(zt,rt,Ge+an,Ge+qt,1,ut.minY,ut.maxY,je),zt=null),Ut&&(yt=Ie(Ut,rt,Ge-en,Ge+rn,1,ut.minY,ut.maxY,je),bt=Ie(Ut,rt,Ge+an,Ge+qt,1,ut.minY,ut.maxY,je),Ut=null),Re>1&&console.timeEnd("clipping"),gt.push(mt||[],We+1,2*Be,2*Ge),gt.push(Tt||[],We+1,2*Be,2*Ge+1),gt.push(yt||[],We+1,2*Be+1,2*Ge),gt.push(bt||[],We+1,2*Be+1,2*Ge+1)}}},Ke.prototype.getTile=function(He,We,Be){var Ge=this.options,ot=Ge.extent,it=Ge.debug;if(He<0||He>24)return null;var dt=1<<He,gt=Mt(He,We=(We%dt+dt)%dt,Be);if(this.tiles[gt])return nt(this.tiles[gt],ot);it>1&&console.log("drilling down to z%d-%d-%d",He,We,Be);for(var je,Re=He,rt=We,ct=Be;!je&&Re>0;)Re--,rt=Math.floor(rt/2),ct=Math.floor(ct/2),je=this.tiles[Mt(Re,rt,ct)];return je&&je.source?(it>1&&console.log("found parent tile z%d-%d-%d",Re,rt,ct),it>1&&console.time("drilling down"),this.splitTile(je.source,Re,rt,ct,He,We,Be),it>1&&console.timeEnd("drilling down"),this.tiles[gt]?nt(this.tiles[gt],ot):null):null};var Pt=function(He){function We(Be,Ge,ot,it){He.call(this,Be,Ge,ot,Ot),it&&(this.loadGeoJSON=it)}return He&&(We.__proto__=He),We.prototype=Object.create(He&&He.prototype),We.prototype.constructor=We,We.prototype.loadData=function(Be,Ge){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Ge,this._pendingLoadDataParams=Be,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},We.prototype._loadData=function(){var Be=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Ge=this._pendingCallback,ot=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var it=!!(ot&&ot.request&&ot.request.collectResourceTiming)&&new s.RequestPerformance(ot.request);this.loadGeoJSON(ot,function(dt,gt){if(dt||!gt)return Ge(dt);if(typeof gt!="object")return Ge(new Error("Input data given to '"+ot.source+"' is not a valid GeoJSON object."));u(gt,!0);try{if(ot.filter){var je=s.createExpression(ot.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(je.result==="error")throw new Error(je.value.map(function(ut){return ut.key+": "+ut.message}).join(", "));var Re=gt.features.filter(function(ut){return je.value.evaluate({zoom:0},ut)});gt={type:"FeatureCollection",features:Re}}Be._geoJSONIndex=ot.cluster?new te(function(ut){var et=ut.superclusterOptions,xt=ut.clusterProperties;if(!xt||!et)return et;for(var mt={},Tt={},yt={accumulated:null,zoom:0},bt={properties:null},zt=Object.keys(xt),Ut=0,en=zt;Ut<en.length;Ut+=1){var an=en[Ut],rn=xt[an],qt=rn[0],Kt=rn[1],xn=s.createExpression(Kt),on=s.createExpression(typeof qt=="string"?[qt,["accumulated"],["get",an]]:qt);mt[an]=xn.value,Tt[an]=on.value}return et.map=function(Xt){bt.properties=Xt;for(var ln={},Jt=0,tn=zt;Jt<tn.length;Jt+=1){var wn=tn[Jt];ln[wn]=mt[wn].evaluate(yt,bt)}return ln},et.reduce=function(Xt,ln){bt.properties=ln;for(var Jt=0,tn=zt;Jt<tn.length;Jt+=1){var wn=tn[Jt];yt.accumulated=Xt[wn],Xt[wn]=Tt[wn].evaluate(yt,bt)}},et}(ot)).load(gt.features):function(ut,et){return new Ke(ut,et)}(gt,ot.geojsonVtOptions)}catch(ut){return Ge(ut)}Be.loaded={};var rt={};if(it){var ct=it.finish();ct&&(rt.resourceTiming={},rt.resourceTiming[ot.source]=JSON.parse(JSON.stringify(ct)))}Ge(null,rt)})}},We.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},We.prototype.reloadTile=function(Be,Ge){var ot=this.loaded,it=Be.uid;return ot&&ot[it]?He.prototype.reloadTile.call(this,Be,Ge):this.loadTile(Be,Ge)},We.prototype.loadGeoJSON=function(Be,Ge){if(Be.request)s.getJSON(Be.request,Ge);else{if(typeof Be.data!="string")return Ge(new Error("Input data given to '"+Be.source+"' is not a valid GeoJSON object."));try{return Ge(null,JSON.parse(Be.data))}catch{return Ge(new Error("Input data given to '"+Be.source+"' is not a valid GeoJSON object."))}}},We.prototype.removeSource=function(Be,Ge){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Ge()},We.prototype.getClusterExpansionZoom=function(Be,Ge){try{Ge(null,this._geoJSONIndex.getClusterExpansionZoom(Be.clusterId))}catch(ot){Ge(ot)}},We.prototype.getClusterChildren=function(Be,Ge){try{Ge(null,this._geoJSONIndex.getChildren(Be.clusterId))}catch(ot){Ge(ot)}},We.prototype.getClusterLeaves=function(Be,Ge){try{Ge(null,this._geoJSONIndex.getLeaves(Be.clusterId,Be.limit,Be.offset))}catch(ot){Ge(ot)}},We}(r),St=function(He){var We=this;this.self=He,this.actor=new s.Actor(He,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:r,geojson:Pt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Be,Ge){if(We.workerSourceTypes[Be])throw new Error('Worker source with name "'+Be+'" already registered.');We.workerSourceTypes[Be]=Ge},this.self.registerRTLTextPlugin=function(Be){if(s.plugin.isParsed())throw new Error("RTL text plugin already registered.");s.plugin.applyArabicShaping=Be.applyArabicShaping,s.plugin.processBidirectionalText=Be.processBidirectionalText,s.plugin.processStyledBidirectionalText=Be.processStyledBidirectionalText}};return St.prototype.setReferrer=function(He,We){this.referrer=We},St.prototype.setImages=function(He,We,Be){for(var Ge in this.availableImages[He]=We,this.workerSources[He]){var ot=this.workerSources[He][Ge];for(var it in ot)ot[it].availableImages=We}Be()},St.prototype.setLayers=function(He,We,Be){this.getLayerIndex(He).replace(We),Be()},St.prototype.updateLayers=function(He,We,Be){this.getLayerIndex(He).update(We.layers,We.removedIds),Be()},St.prototype.loadTile=function(He,We,Be){this.getWorkerSource(He,We.type,We.source).loadTile(We,Be)},St.prototype.loadDEMTile=function(He,We,Be){this.getDEMWorkerSource(He,We.source).loadTile(We,Be)},St.prototype.reloadTile=function(He,We,Be){this.getWorkerSource(He,We.type,We.source).reloadTile(We,Be)},St.prototype.abortTile=function(He,We,Be){this.getWorkerSource(He,We.type,We.source).abortTile(We,Be)},St.prototype.removeTile=function(He,We,Be){this.getWorkerSource(He,We.type,We.source).removeTile(We,Be)},St.prototype.removeDEMTile=function(He,We){this.getDEMWorkerSource(He,We.source).removeTile(We)},St.prototype.removeSource=function(He,We,Be){if(this.workerSources[He]&&this.workerSources[He][We.type]&&this.workerSources[He][We.type][We.source]){var Ge=this.workerSources[He][We.type][We.source];delete this.workerSources[He][We.type][We.source],Ge.removeSource!==void 0?Ge.removeSource(We,Be):Be()}},St.prototype.loadWorkerSource=function(He,We,Be){try{this.self.importScripts(We.url),Be()}catch(Ge){Be(Ge.toString())}},St.prototype.syncRTLPluginState=function(He,We,Be){try{s.plugin.setState(We);var Ge=s.plugin.getPluginURL();if(s.plugin.isLoaded()&&!s.plugin.isParsed()&&Ge!=null){this.self.importScripts(Ge);var ot=s.plugin.isParsed();Be(ot?void 0:new Error("RTL Text Plugin failed to import scripts from "+Ge),ot)}}catch(it){Be(it.toString())}},St.prototype.getAvailableImages=function(He){var We=this.availableImages[He];return We||(We=[]),We},St.prototype.getLayerIndex=function(He){var We=this.layerIndexes[He];return We||(We=this.layerIndexes[He]=new f),We},St.prototype.getWorkerSource=function(He,We,Be){var Ge=this;if(this.workerSources[He]||(this.workerSources[He]={}),this.workerSources[He][We]||(this.workerSources[He][We]={}),!this.workerSources[He][We][Be]){var ot={send:function(it,dt,gt){Ge.actor.send(it,dt,gt,He)}};this.workerSources[He][We][Be]=new this.workerSourceTypes[We](ot,this.getLayerIndex(He),this.getAvailableImages(He))}return this.workerSources[He][We][Be]},St.prototype.getDEMWorkerSource=function(He,We){return this.demWorkerSources[He]||(this.demWorkerSources[He]={}),this.demWorkerSources[He][We]||(this.demWorkerSources[He][We]=new l),this.demWorkerSources[He][We]},St.prototype.enforceCacheSizeLimit=function(He,We){s.enforceCacheSizeLimit(We)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new St(self)),St}),k(0,function(s){var T=s.createCommonjsModule(function(B){function G(V){return!q(V)}function q(V){return typeof window<"u"&&typeof document<"u"?Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var re,ue,xe=new Blob([""],{type:"text/javascript"}),Le=URL.createObjectURL(xe);try{ue=new Worker(Le),re=!0}catch{re=!1}return ue&&ue.terminate(),URL.revokeObjectURL(Le),re}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var re=document.createElement("canvas");re.width=re.height=1;var ue=re.getContext("2d");if(!ue)return!1;var xe=ue.getImageData(0,0,1,1);return xe&&xe.width===re.width}()?(J=V&&V.failIfMajorPerformanceCaveat,L[J]===void 0&&(L[J]=function(re){var ue=function(Le){var De=document.createElement("canvas"),Ue=Object.create(G.webGLContextAttributes);return Ue.failIfMajorPerformanceCaveat=Le,De.probablySupportsContext?De.probablySupportsContext("webgl",Ue)||De.probablySupportsContext("experimental-webgl",Ue):De.supportsContext?De.supportsContext("webgl",Ue)||De.supportsContext("experimental-webgl",Ue):De.getContext("webgl",Ue)||De.getContext("experimental-webgl",Ue)}(re);if(!ue)return!1;var xe=ue.createShader(ue.VERTEX_SHADER);return!(!xe||ue.isContextLost())&&(ue.shaderSource(xe,"void main() {}"),ue.compileShader(xe),ue.getShaderParameter(xe,ue.COMPILE_STATUS)===!0)}(J)),L[J]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser";var J}B.exports?B.exports=G:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=G,window.mapboxgl.notSupportedReason=q);var L={};G.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),b={create:function(B,G,q){var L=s.window.document.createElement(B);return G!==void 0&&(L.className=G),q&&q.appendChild(L),L},createNS:function(B,G){return s.window.document.createElementNS(B,G)}},f=s.window.document&&s.window.document.documentElement.style;function o(B){if(!f)return B[0];for(var G=0;G<B.length;G++)if(B[G]in f)return B[G];return B[0]}var t,i=o(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);b.disableDrag=function(){f&&i&&(t=f[i],f[i]="none")},b.enableDrag=function(){f&&i&&(f[i]=t)};var n=o(["transform","WebkitTransform"]);b.setTransform=function(B,G){B.style[n]=G};var r=!1;try{var a=Object.defineProperty({},"passive",{get:function(){r=!0}});s.window.addEventListener("test",a,a),s.window.removeEventListener("test",a,a)}catch{r=!1}b.addEventListener=function(B,G,q,L){L===void 0&&(L={}),"passive"in L&&r?B.addEventListener(G,q,L):B.addEventListener(G,q,L.capture)},b.removeEventListener=function(B,G,q,L){L===void 0&&(L={}),"passive"in L&&r?B.removeEventListener(G,q,L):B.removeEventListener(G,q,L.capture)};var l=function(B){B.preventDefault(),B.stopPropagation(),s.window.removeEventListener("click",l,!0)};function u(B){var G=B.userImage;return!!(G&&G.render&&G.render())&&(B.data.replace(new Uint8Array(G.data.buffer)),!0)}b.suppressClick=function(){s.window.addEventListener("click",l,!0),s.window.setTimeout(function(){s.window.removeEventListener("click",l,!0)},0)},b.mousePos=function(B,G){var q=B.getBoundingClientRect();return new s.Point(G.clientX-q.left-B.clientLeft,G.clientY-q.top-B.clientTop)},b.touchPos=function(B,G){for(var q=B.getBoundingClientRect(),L=[],V=0;V<G.length;V++)L.push(new s.Point(G[V].clientX-q.left-B.clientLeft,G[V].clientY-q.top-B.clientTop));return L},b.mouseButton=function(B){return s.window.InstallTrigger!==void 0&&B.button===2&&B.ctrlKey&&s.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:B.button},b.remove=function(B){B.parentNode&&B.parentNode.removeChild(B)};var h=function(B){function G(){B.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.RGBAImage({width:1,height:1}),this.dirty=!0}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.isLoaded=function(){return this.loaded},G.prototype.setLoaded=function(q){if(this.loaded!==q&&(this.loaded=q,q)){for(var L=0,V=this.requestors;L<V.length;L+=1){var J=V[L],re=J.ids,ue=J.callback;this._notify(re,ue)}this.requestors=[]}},G.prototype.getImage=function(q){return this.images[q]},G.prototype.addImage=function(q,L){this._validate(q,L)&&(this.images[q]=L)},G.prototype._validate=function(q,L){var V=!0;return this._validateStretch(L.stretchX,L.data&&L.data.width)||(this.fire(new s.ErrorEvent(new Error('Image "'+q+'" has invalid "stretchX" value'))),V=!1),this._validateStretch(L.stretchY,L.data&&L.data.height)||(this.fire(new s.ErrorEvent(new Error('Image "'+q+'" has invalid "stretchY" value'))),V=!1),this._validateContent(L.content,L)||(this.fire(new s.ErrorEvent(new Error('Image "'+q+'" has invalid "content" value'))),V=!1),V},G.prototype._validateStretch=function(q,L){if(!q)return!0;for(var V=0,J=0,re=q;J<re.length;J+=1){var ue=re[J];if(ue[0]<V||ue[1]<ue[0]||L<ue[1])return!1;V=ue[1]}return!0},G.prototype._validateContent=function(q,L){return!(q&&(q.length!==4||q[0]<0||L.data.width<q[0]||q[1]<0||L.data.height<q[1]||q[2]<0||L.data.width<q[2]||q[3]<0||L.data.height<q[3]||q[2]<q[0]||q[3]<q[1]))},G.prototype.updateImage=function(q,L){var V=this.images[q];L.version=V.version+1,this.images[q]=L,this.updatedImages[q]=!0},G.prototype.removeImage=function(q){var L=this.images[q];delete this.images[q],delete this.patterns[q],L.userImage&&L.userImage.onRemove&&L.userImage.onRemove()},G.prototype.listImages=function(){return Object.keys(this.images)},G.prototype.getImages=function(q,L){var V=!0;if(!this.isLoaded())for(var J=0,re=q;J<re.length;J+=1){var ue=re[J];this.images[ue]||(V=!1)}this.isLoaded()||V?this._notify(q,L):this.requestors.push({ids:q,callback:L})},G.prototype._notify=function(q,L){for(var V={},J=0,re=q;J<re.length;J+=1){var ue=re[J];this.images[ue]||this.fire(new s.Event("styleimagemissing",{id:ue}));var xe=this.images[ue];xe?V[ue]={data:xe.data.clone(),pixelRatio:xe.pixelRatio,sdf:xe.sdf,version:xe.version,stretchX:xe.stretchX,stretchY:xe.stretchY,content:xe.content,hasRenderCallback:!!(xe.userImage&&xe.userImage.render)}:s.warnOnce('Image "'+ue+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}L(null,V)},G.prototype.getPixelSize=function(){var q=this.atlasImage;return{width:q.width,height:q.height}},G.prototype.getPattern=function(q){var L=this.patterns[q],V=this.getImage(q);if(!V)return null;if(L&&L.position.version===V.version)return L.position;if(L)L.position.version=V.version;else{var J={w:V.data.width+2,h:V.data.height+2,x:0,y:0},re=new s.ImagePosition(J,V);this.patterns[q]={bin:J,position:re}}return this._updatePatternAtlas(),this.patterns[q].position},G.prototype.bind=function(q){var L=q.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new s.Texture(q,this.atlasImage,L.RGBA),this.atlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE)},G.prototype._updatePatternAtlas=function(){var q=[];for(var L in this.patterns)q.push(this.patterns[L].bin);var V=s.potpack(q),J=V.w,re=V.h,ue=this.atlasImage;for(var xe in ue.resize({width:J||1,height:re||1}),this.patterns){var Le=this.patterns[xe].bin,De=Le.x+1,Ue=Le.y+1,qe=this.images[xe].data,$e=qe.width,lt=qe.height;s.RGBAImage.copy(qe,ue,{x:0,y:0},{x:De,y:Ue},{width:$e,height:lt}),s.RGBAImage.copy(qe,ue,{x:0,y:lt-1},{x:De,y:Ue-1},{width:$e,height:1}),s.RGBAImage.copy(qe,ue,{x:0,y:0},{x:De,y:Ue+lt},{width:$e,height:1}),s.RGBAImage.copy(qe,ue,{x:$e-1,y:0},{x:De-1,y:Ue},{width:1,height:lt}),s.RGBAImage.copy(qe,ue,{x:0,y:0},{x:De+$e,y:Ue},{width:1,height:lt})}this.dirty=!0},G.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},G.prototype.dispatchRenderCallbacks=function(q){for(var L=0,V=q;L<V.length;L+=1){var J=V[L];if(!this.callbackDispatchedThisFrame[J]){this.callbackDispatchedThisFrame[J]=!0;var re=this.images[J];u(re)&&this.updateImage(J,re)}}},G}(s.Evented),c=v,x=v,p=1e20;function v(B,G,q,L,V,J){this.fontSize=B||24,this.buffer=G===void 0?3:G,this.cutoff=L||.25,this.fontFamily=V||"sans-serif",this.fontWeight=J||"normal",this.radius=q||8;var re=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=re,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(re*re),this.gridInner=new Float64Array(re*re),this.f=new Float64Array(re),this.d=new Float64Array(re),this.z=new Float64Array(re+1),this.v=new Int16Array(re),this.middle=Math.round(re/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function g(B,G,q,L,V,J,re){for(var ue=0;ue<G;ue++){for(var xe=0;xe<q;xe++)L[xe]=B[xe*G+ue];for(y(L,V,J,re,q),xe=0;xe<q;xe++)B[xe*G+ue]=V[xe]}for(xe=0;xe<q;xe++){for(ue=0;ue<G;ue++)L[ue]=B[xe*G+ue];for(y(L,V,J,re,G),ue=0;ue<G;ue++)B[xe*G+ue]=Math.sqrt(V[ue])}}function y(B,G,q,L,V){q[0]=0,L[0]=-p,L[1]=+p;for(var J=1,re=0;J<V;J++){for(var ue=(B[J]+J*J-(B[q[re]]+q[re]*q[re]))/(2*J-2*q[re]);ue<=L[re];)re--,ue=(B[J]+J*J-(B[q[re]]+q[re]*q[re]))/(2*J-2*q[re]);q[++re]=J,L[re]=ue,L[re+1]=+p}for(J=0,re=0;J<V;J++){for(;L[re+1]<J;)re++;G[J]=(J-q[re])*(J-q[re])+B[q[re]]}}v.prototype.draw=function(B){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(B,this.buffer,this.middle);for(var G=this.ctx.getImageData(0,0,this.size,this.size),q=new Uint8ClampedArray(this.size*this.size),L=0;L<this.size*this.size;L++){var V=G.data[4*L+3]/255;this.gridOuter[L]=V===1?0:V===0?p:Math.pow(Math.max(0,.5-V),2),this.gridInner[L]=V===1?p:V===0?0:Math.pow(Math.max(0,V-.5),2)}for(g(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),g(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),L=0;L<this.size*this.size;L++){var J=this.gridOuter[L]-this.gridInner[L];q[L]=Math.max(0,Math.min(255,Math.round(255-255*(J/this.radius+this.cutoff))))}return q},c.default=x;var m=function(B,G){this.requestManager=B,this.localIdeographFontFamily=G,this.entries={}};m.prototype.setURL=function(B){this.url=B},m.prototype.getGlyphs=function(B,G){var q=this,L=[];for(var V in B)for(var J=0,re=B[V];J<re.length;J+=1){var ue=re[J];L.push({stack:V,id:ue})}s.asyncAll(L,function(xe,Le){var De=xe.stack,Ue=xe.id,qe=q.entries[De];qe||(qe=q.entries[De]={glyphs:{},requests:{},ranges:{}});var $e=qe.glyphs[Ue];if($e===void 0){if($e=q._tinySDF(qe,De,Ue))return qe.glyphs[Ue]=$e,void Le(null,{stack:De,id:Ue,glyph:$e});var lt=Math.floor(Ue/256);if(256*lt>65535)Le(new Error("glyphs > 65535 not supported"));else if(qe.ranges[lt])Le(null,{stack:De,id:Ue,glyph:$e});else{var ft=qe.requests[lt];ft||(ft=qe.requests[lt]=[],m.loadGlyphRange(De,lt,q.url,q.requestManager,function(wt,Et){if(Et){for(var At in Et)q._doesCharSupportLocalGlyph(+At)||(qe.glyphs[+At]=Et[+At]);qe.ranges[lt]=!0}for(var Dt=0,Lt=ft;Dt<Lt.length;Dt+=1)(0,Lt[Dt])(wt,Et);delete qe.requests[lt]})),ft.push(function(wt,Et){wt?Le(wt):Et&&Le(null,{stack:De,id:Ue,glyph:Et[Ue]||null})})}}else Le(null,{stack:De,id:Ue,glyph:$e})},function(xe,Le){if(xe)G(xe);else if(Le){for(var De={},Ue=0,qe=Le;Ue<qe.length;Ue+=1){var $e=qe[Ue],lt=$e.stack,ft=$e.id,wt=$e.glyph;(De[lt]||(De[lt]={}))[ft]=wt&&{id:wt.id,bitmap:wt.bitmap.clone(),metrics:wt.metrics}}G(null,De)}})},m.prototype._doesCharSupportLocalGlyph=function(B){return!!this.localIdeographFontFamily&&(s.isChar["CJK Unified Ideographs"](B)||s.isChar["Hangul Syllables"](B)||s.isChar.Hiragana(B)||s.isChar.Katakana(B))},m.prototype._tinySDF=function(B,G,q){var L=this.localIdeographFontFamily;if(L&&this._doesCharSupportLocalGlyph(q)){var V=B.tinySDF;if(!V){var J="400";/bold/i.test(G)?J="900":/medium/i.test(G)?J="500":/light/i.test(G)&&(J="200"),V=B.tinySDF=new m.TinySDF(24,3,8,.25,L,J)}return{id:q,bitmap:new s.AlphaImage({width:30,height:30},V.draw(String.fromCharCode(q))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},m.loadGlyphRange=function(B,G,q,L,V){var J=256*G,re=J+255,ue=L.transformRequest(L.normalizeGlyphsURL(q).replace("{fontstack}",B).replace("{range}",J+"-"+re),s.ResourceType.Glyphs);s.getArrayBuffer(ue,function(xe,Le){if(xe)V(xe);else if(Le){for(var De={},Ue=0,qe=s.parseGlyphPBF(Le);Ue<qe.length;Ue+=1){var $e=qe[Ue];De[$e.id]=$e}V(null,De)}})},m.TinySDF=c;var _=function(){this.specification=s.styleSpec.light.position};_.prototype.possiblyEvaluate=function(B,G){return s.sphericalToCartesian(B.expression.evaluate(G))},_.prototype.interpolate=function(B,G,q){return{x:s.number(B.x,G.x,q),y:s.number(B.y,G.y,q),z:s.number(B.z,G.z,q)}};var d=new s.Properties({anchor:new s.DataConstantProperty(s.styleSpec.light.anchor),position:new _,color:new s.DataConstantProperty(s.styleSpec.light.color),intensity:new s.DataConstantProperty(s.styleSpec.light.intensity)}),S="-transition",w=function(B){function G(q){B.call(this),this._transitionable=new s.Transitionable(d),this.setLight(q),this._transitioning=this._transitionable.untransitioned()}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getLight=function(){return this._transitionable.serialize()},G.prototype.setLight=function(q,L){if(L===void 0&&(L={}),!this._validate(s.validateLight,q,L))for(var V in q){var J=q[V];s.endsWith(V,S)?this._transitionable.setTransition(V.slice(0,-11),J):this._transitionable.setValue(V,J)}},G.prototype.updateTransitions=function(q){this._transitioning=this._transitionable.transitioned(q,this._transitioning)},G.prototype.hasTransition=function(){return this._transitioning.hasTransition()},G.prototype.recalculate=function(q){this.properties=this._transitioning.possiblyEvaluate(q)},G.prototype._validate=function(q,L,V){return(!V||V.validate!==!1)&&s.emitValidationErrors(this,q.call(s.validateStyle,s.extend({value:L,style:{glyphs:!0,sprite:!0},styleSpec:s.styleSpec})))},G}(s.Evented),E=function(B,G){this.width=B,this.height=G,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};E.prototype.getDash=function(B,G){var q=B.join(",")+String(G);return this.dashEntry[q]||(this.dashEntry[q]=this.addDash(B,G)),this.dashEntry[q]},E.prototype.getDashRanges=function(B,G,q){var L=[],V=B.length%2==1?-B[B.length-1]*q:0,J=B[0]*q,re=!0;L.push({left:V,right:J,isDash:re,zeroLength:B[0]===0});for(var ue=B[0],xe=1;xe<B.length;xe++){re=!re;var Le=B[xe];V=ue*q,J=(ue+=Le)*q,L.push({left:V,right:J,isDash:re,zeroLength:Le===0})}return L},E.prototype.addRoundDash=function(B,G,q){for(var L=G/2,V=-q;V<=q;V++)for(var J=this.nextRow+q+V,re=this.width*J,ue=0,xe=B[ue],Le=0;Le<this.width;Le++){Le/xe.right>1&&(xe=B[++ue]);var De=Math.abs(Le-xe.left),Ue=Math.abs(Le-xe.right),qe=Math.min(De,Ue),$e=void 0,lt=V/q*(L+1);if(xe.isDash){var ft=L-Math.abs(lt);$e=Math.sqrt(qe*qe+ft*ft)}else $e=L-Math.sqrt(qe*qe+lt*lt);this.data[re+Le]=Math.max(0,Math.min(255,$e+128))}},E.prototype.addRegularDash=function(B){for(var G=B.length-1;G>=0;--G){var q=B[G],L=B[G+1];q.zeroLength?B.splice(G,1):L&&L.isDash===q.isDash&&(L.left=q.left,B.splice(G,1))}var V=B[0],J=B[B.length-1];V.isDash===J.isDash&&(V.left=J.left-this.width,J.right=V.right+this.width);for(var re=this.width*this.nextRow,ue=0,xe=B[ue],Le=0;Le<this.width;Le++){Le/xe.right>1&&(xe=B[++ue]);var De=Math.abs(Le-xe.left),Ue=Math.abs(Le-xe.right),qe=Math.min(De,Ue),$e=xe.isDash?qe:-qe;this.data[re+Le]=Math.max(0,Math.min(255,$e+128))}},E.prototype.addDash=function(B,G){var q=G?7:0,L=2*q+1;if(this.nextRow+L>this.height)return s.warnOnce("LineAtlas out of space"),null;for(var V=0,J=0;J<B.length;J++)V+=B[J];if(V!==0){var re=this.width/V,ue=this.getDashRanges(B,this.width,re);G?this.addRoundDash(ue,re,q):this.addRegularDash(ue)}var xe={y:(this.nextRow+q+.5)/this.height,height:2*q/this.height,width:V};return this.nextRow+=L,this.dirty=!0,xe},E.prototype.bind=function(B){var G=B.gl;this.texture?(G.bindTexture(G.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,G.texSubImage2D(G.TEXTURE_2D,0,0,0,this.width,this.height,G.ALPHA,G.UNSIGNED_BYTE,this.data))):(this.texture=G.createTexture(),G.bindTexture(G.TEXTURE_2D,this.texture),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_S,G.REPEAT),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_T,G.REPEAT),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MIN_FILTER,G.LINEAR),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MAG_FILTER,G.LINEAR),G.texImage2D(G.TEXTURE_2D,0,G.ALPHA,this.width,this.height,0,G.ALPHA,G.UNSIGNED_BYTE,this.data))};var C=function B(G,q){this.workerPool=G,this.actors=[],this.currentActor=0,this.id=s.uniqueId();for(var L=this.workerPool.acquire(this.id),V=0;V<L.length;V++){var J=L[V],re=new B.Actor(J,q,this.id);re.name="Worker "+V,this.actors.push(re)}};function O(B,G,q){var L=function(V,J){if(V)return q(V);if(J){var re=s.pick(s.extend(J,B),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);J.vector_layers&&(re.vectorLayers=J.vector_layers,re.vectorLayerIds=re.vectorLayers.map(function(ue){return ue.id})),re.tiles=G.canonicalizeTileset(re,B.url),q(null,re)}};return B.url?s.getJSON(G.transformRequest(G.normalizeSourceURL(B.url),s.ResourceType.Source),L):s.browser.frame(function(){return L(null,B)})}C.prototype.broadcast=function(B,G,q){q=q||function(){},s.asyncAll(this.actors,function(L,V){L.send(B,G,V)},q)},C.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},C.prototype.remove=function(){this.actors.forEach(function(B){B.remove()}),this.actors=[],this.workerPool.release(this.id)},C.Actor=s.Actor;var P=function(B,G,q){this.bounds=s.LngLatBounds.convert(this.validateBounds(B)),this.minzoom=G||0,this.maxzoom=q||24};P.prototype.validateBounds=function(B){return Array.isArray(B)&&B.length===4?[Math.max(-180,B[0]),Math.max(-90,B[1]),Math.min(180,B[2]),Math.min(90,B[3])]:[-180,-90,180,90]},P.prototype.contains=function(B){var G=Math.pow(2,B.z),q=Math.floor(s.mercatorXfromLng(this.bounds.getWest())*G),L=Math.floor(s.mercatorYfromLat(this.bounds.getNorth())*G),V=Math.ceil(s.mercatorXfromLng(this.bounds.getEast())*G),J=Math.ceil(s.mercatorYfromLat(this.bounds.getSouth())*G);return B.x>=q&&B.x<V&&B.y>=L&&B.y<J};var z=function(B){function G(q,L,V,J){if(B.call(this),this.id=q,this.dispatcher=V,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.extend(this,s.pick(L,["url","scheme","tileSize","promoteId"])),this._options=s.extend({type:"vector"},L),this._collectResourceTiming=L.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(J)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){var q=this;this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,function(L,V){q._tileJSONRequest=null,q._loaded=!0,L?q.fire(new s.ErrorEvent(L)):V&&(s.extend(q,V),V.bounds&&(q.tileBounds=new P(V.bounds,q.minzoom,q.maxzoom)),s.postTurnstileEvent(V.tiles,q.map._requestManager._customAccessToken),s.postMapLoadEvent(V.tiles,q.map._getMapId(),q.map._requestManager._skuToken,q.map._requestManager._customAccessToken),q.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),q.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})))})},G.prototype.loaded=function(){return this._loaded},G.prototype.hasTile=function(q){return!this.tileBounds||this.tileBounds.contains(q.canonical)},G.prototype.onAdd=function(q){this.map=q,this.load()},G.prototype.setSourceProperty=function(q){this._tileJSONRequest&&this._tileJSONRequest.cancel(),q(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},G.prototype.setTiles=function(q){var L=this;return this.setSourceProperty(function(){L._options.tiles=q}),this},G.prototype.setUrl=function(q){var L=this;return this.setSourceProperty(function(){L.url=q,L._options.url=q}),this},G.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},G.prototype.serialize=function(){return s.extend({},this._options)},G.prototype.loadTile=function(q,L){var V=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme)),J={request:this.map._requestManager.transformRequest(V,s.ResourceType.Tile),uid:q.uid,tileID:q.tileID,zoom:q.tileID.overscaledZ,tileSize:this.tileSize*q.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:s.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function re(ue,xe){return delete q.request,q.aborted?L(null):ue&&ue.status!==404?L(ue):(xe&&xe.resourceTiming&&(q.resourceTiming=xe.resourceTiming),this.map._refreshExpiredTiles&&xe&&q.setExpiryData(xe),q.loadVectorData(xe,this.map.painter),s.cacheEntryPossiblyAdded(this.dispatcher),L(null),void(q.reloadCallback&&(this.loadTile(q,q.reloadCallback),q.reloadCallback=null)))}J.request.collectResourceTiming=this._collectResourceTiming,q.actor&&q.state!=="expired"?q.state==="loading"?q.reloadCallback=L:q.request=q.actor.send("reloadTile",J,re.bind(this)):(q.actor=this.dispatcher.getActor(),q.request=q.actor.send("loadTile",J,re.bind(this)))},G.prototype.abortTile=function(q){q.request&&(q.request.cancel(),delete q.request),q.actor&&q.actor.send("abortTile",{uid:q.uid,type:this.type,source:this.id},void 0)},G.prototype.unloadTile=function(q){q.unloadVectorData(),q.actor&&q.actor.send("removeTile",{uid:q.uid,type:this.type,source:this.id},void 0)},G.prototype.hasTransition=function(){return!1},G}(s.Evented),j=function(B){function G(q,L,V,J){B.call(this),this.id=q,this.dispatcher=V,this.setEventedParent(J),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.extend({type:"raster"},L),s.extend(this,s.pick(L,["url","scheme","tileSize"]))}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){var q=this;this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,function(L,V){q._tileJSONRequest=null,q._loaded=!0,L?q.fire(new s.ErrorEvent(L)):V&&(s.extend(q,V),V.bounds&&(q.tileBounds=new P(V.bounds,q.minzoom,q.maxzoom)),s.postTurnstileEvent(V.tiles),s.postMapLoadEvent(V.tiles,q.map._getMapId(),q.map._requestManager._skuToken),q.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),q.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})))})},G.prototype.loaded=function(){return this._loaded},G.prototype.onAdd=function(q){this.map=q,this.load()},G.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},G.prototype.serialize=function(){return s.extend({},this._options)},G.prototype.hasTile=function(q){return!this.tileBounds||this.tileBounds.contains(q.canonical)},G.prototype.loadTile=function(q,L){var V=this,J=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);q.request=s.getImage(this.map._requestManager.transformRequest(J,s.ResourceType.Tile),function(re,ue){if(delete q.request,q.aborted)q.state="unloaded",L(null);else if(re)q.state="errored",L(re);else if(ue){V.map._refreshExpiredTiles&&q.setExpiryData(ue),delete ue.cacheControl,delete ue.expires;var xe=V.map.painter.context,Le=xe.gl;q.texture=V.map.painter.getTileTexture(ue.width),q.texture?q.texture.update(ue,{useMipmap:!0}):(q.texture=new s.Texture(xe,ue,Le.RGBA,{useMipmap:!0}),q.texture.bind(Le.LINEAR,Le.CLAMP_TO_EDGE,Le.LINEAR_MIPMAP_NEAREST),xe.extTextureFilterAnisotropic&&Le.texParameterf(Le.TEXTURE_2D,xe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,xe.extTextureFilterAnisotropicMax)),q.state="loaded",s.cacheEntryPossiblyAdded(V.dispatcher),L(null)}})},G.prototype.abortTile=function(q,L){q.request&&(q.request.cancel(),delete q.request),L()},G.prototype.unloadTile=function(q,L){q.texture&&this.map.painter.saveTileTexture(q.texture),L()},G.prototype.hasTransition=function(){return!1},G}(s.Evented),I=function(B){function G(q,L,V,J){B.call(this,q,L,V,J),this.type="raster-dem",this.maxzoom=22,this._options=s.extend({type:"raster-dem"},L),this.encoding=L.encoding||"mapbox"}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},G.prototype.loadTile=function(q,L){var V=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function J(re,ue){re&&(q.state="errored",L(re)),ue&&(q.dem=ue,q.needsHillshadePrepare=!0,q.state="loaded",L(null))}q.request=s.getImage(this.map._requestManager.transformRequest(V,s.ResourceType.Tile),(function(re,ue){if(delete q.request,q.aborted)q.state="unloaded",L(null);else if(re)q.state="errored",L(re);else if(ue){this.map._refreshExpiredTiles&&q.setExpiryData(ue),delete ue.cacheControl,delete ue.expires;var xe=s.window.ImageBitmap&&ue instanceof s.window.ImageBitmap&&s.offscreenCanvasSupported()?ue:s.browser.getImageData(ue,1),Le={uid:q.uid,coord:q.tileID,source:this.id,rawImageData:xe,encoding:this.encoding};q.actor&&q.state!=="expired"||(q.actor=this.dispatcher.getActor(),q.actor.send("loadDEMTile",Le,J.bind(this)))}}).bind(this)),q.neighboringTiles=this._getNeighboringTiles(q.tileID)},G.prototype._getNeighboringTiles=function(q){var L=q.canonical,V=Math.pow(2,L.z),J=(L.x-1+V)%V,re=L.x===0?q.wrap-1:q.wrap,ue=(L.x+1+V)%V,xe=L.x+1===V?q.wrap+1:q.wrap,Le={};return Le[new s.OverscaledTileID(q.overscaledZ,re,L.z,J,L.y).key]={backfilled:!1},Le[new s.OverscaledTileID(q.overscaledZ,xe,L.z,ue,L.y).key]={backfilled:!1},L.y>0&&(Le[new s.OverscaledTileID(q.overscaledZ,re,L.z,J,L.y-1).key]={backfilled:!1},Le[new s.OverscaledTileID(q.overscaledZ,q.wrap,L.z,L.x,L.y-1).key]={backfilled:!1},Le[new s.OverscaledTileID(q.overscaledZ,xe,L.z,ue,L.y-1).key]={backfilled:!1}),L.y+1<V&&(Le[new s.OverscaledTileID(q.overscaledZ,re,L.z,J,L.y+1).key]={backfilled:!1},Le[new s.OverscaledTileID(q.overscaledZ,q.wrap,L.z,L.x,L.y+1).key]={backfilled:!1},Le[new s.OverscaledTileID(q.overscaledZ,xe,L.z,ue,L.y+1).key]={backfilled:!1}),Le},G.prototype.unloadTile=function(q){q.demTexture&&this.map.painter.saveTileTexture(q.demTexture),q.fbo&&(q.fbo.destroy(),delete q.fbo),q.dem&&delete q.dem,delete q.neighboringTiles,q.state="unloaded",q.actor&&q.actor.send("removeDEMTile",{uid:q.uid,source:this.id})},G}(j),N=function(B){function G(q,L,V,J){B.call(this),this.id=q,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=V.getActor(),this.setEventedParent(J),this._data=L.data,this._options=s.extend({},L),this._collectResourceTiming=L.collectResourceTiming,this._resourceTiming=[],L.maxzoom!==void 0&&(this.maxzoom=L.maxzoom),L.type&&(this.type=L.type),L.attribution&&(this.attribution=L.attribution),this.promoteId=L.promoteId;var re=s.EXTENT/this.tileSize;this.workerOptions=s.extend({source:this.id,cluster:L.cluster||!1,geojsonVtOptions:{buffer:(L.buffer!==void 0?L.buffer:128)*re,tolerance:(L.tolerance!==void 0?L.tolerance:.375)*re,extent:s.EXTENT,maxZoom:this.maxzoom,lineMetrics:L.lineMetrics||!1,generateId:L.generateId||!1},superclusterOptions:{maxZoom:L.clusterMaxZoom!==void 0?Math.min(L.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,L.clusterMinPoints||2),extent:s.EXTENT,radius:(L.clusterRadius||50)*re,log:!1,generateId:L.generateId||!1},clusterProperties:L.clusterProperties,filter:L.filter},L.workerOptions)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){var q=this;this.fire(new s.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(L){if(L)q.fire(new s.ErrorEvent(L));else{var V={dataType:"source",sourceDataType:"metadata"};q._collectResourceTiming&&q._resourceTiming&&q._resourceTiming.length>0&&(V.resourceTiming=q._resourceTiming,q._resourceTiming=[]),q.fire(new s.Event("data",V))}})},G.prototype.onAdd=function(q){this.map=q,this.load()},G.prototype.setData=function(q){var L=this;return this._data=q,this.fire(new s.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(V){if(V)L.fire(new s.ErrorEvent(V));else{var J={dataType:"source",sourceDataType:"content"};L._collectResourceTiming&&L._resourceTiming&&L._resourceTiming.length>0&&(J.resourceTiming=L._resourceTiming,L._resourceTiming=[]),L.fire(new s.Event("data",J))}}),this},G.prototype.getClusterExpansionZoom=function(q,L){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:q,source:this.id},L),this},G.prototype.getClusterChildren=function(q,L){return this.actor.send("geojson.getClusterChildren",{clusterId:q,source:this.id},L),this},G.prototype.getClusterLeaves=function(q,L,V,J){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:q,limit:L,offset:V},J),this},G.prototype._updateWorkerData=function(q){var L=this;this._loaded=!1;var V=s.extend({},this.workerOptions),J=this._data;typeof J=="string"?(V.request=this.map._requestManager.transformRequest(s.browser.resolveURL(J),s.ResourceType.Source),V.request.collectResourceTiming=this._collectResourceTiming):V.data=JSON.stringify(J),this.actor.send(this.type+".loadData",V,function(re,ue){L._removed||ue&&ue.abandoned||(L._loaded=!0,ue&&ue.resourceTiming&&ue.resourceTiming[L.id]&&(L._resourceTiming=ue.resourceTiming[L.id].slice(0)),L.actor.send(L.type+".coalesce",{source:V.source},null),q(re))})},G.prototype.loaded=function(){return this._loaded},G.prototype.loadTile=function(q,L){var V=this,J=q.actor?"reloadTile":"loadTile";q.actor=this.actor;var re={type:this.type,uid:q.uid,tileID:q.tileID,zoom:q.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:s.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};q.request=this.actor.send(J,re,function(ue,xe){return delete q.request,q.unloadVectorData(),q.aborted?L(null):ue?L(ue):(q.loadVectorData(xe,V.map.painter,J==="reloadTile"),L(null))})},G.prototype.abortTile=function(q){q.request&&(q.request.cancel(),delete q.request),q.aborted=!0},G.prototype.unloadTile=function(q){q.unloadVectorData(),this.actor.send("removeTile",{uid:q.uid,type:this.type,source:this.id})},G.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},G.prototype.serialize=function(){return s.extend({},this._options,{type:this.type,data:this._data})},G.prototype.hasTransition=function(){return!1},G}(s.Evented),W=s.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),F=function(B){function G(q,L,V,J){B.call(this),this.id=q,this.dispatcher=V,this.coordinates=L.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(J),this.options=L}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(q,L){var V=this;this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this.url=this.options.url,s.getImage(this.map._requestManager.transformRequest(this.url,s.ResourceType.Image),function(J,re){V._loaded=!0,J?V.fire(new s.ErrorEvent(J)):re&&(V.image=re,q&&(V.coordinates=q),L&&L(),V._finishLoading())})},G.prototype.loaded=function(){return this._loaded},G.prototype.updateImage=function(q){var L=this;return this.image&&q.url?(this.options.url=q.url,this.load(q.coordinates,function(){L.texture=null}),this):this},G.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})))},G.prototype.onAdd=function(q){this.map=q,this.load()},G.prototype.setCoordinates=function(q){var L=this;this.coordinates=q;var V=q.map(s.MercatorCoordinate.fromLngLat);this.tileID=function(re){for(var ue=1/0,xe=1/0,Le=-1/0,De=-1/0,Ue=0,qe=re;Ue<qe.length;Ue+=1){var $e=qe[Ue];ue=Math.min(ue,$e.x),xe=Math.min(xe,$e.y),Le=Math.max(Le,$e.x),De=Math.max(De,$e.y)}var lt=Le-ue,ft=De-xe,wt=Math.max(lt,ft),Et=Math.max(0,Math.floor(-Math.log(wt)/Math.LN2)),At=Math.pow(2,Et);return new s.CanonicalTileID(Et,Math.floor((ue+Le)/2*At),Math.floor((xe+De)/2*At))}(V),this.minzoom=this.maxzoom=this.tileID.z;var J=V.map(function(re){return L.tileID.getTilePoint(re)._round()});return this._boundsArray=new s.StructArrayLayout4i8,this._boundsArray.emplaceBack(J[0].x,J[0].y,0,0),this._boundsArray.emplaceBack(J[1].x,J[1].y,s.EXTENT,0),this._boundsArray.emplaceBack(J[3].x,J[3].y,0,s.EXTENT),this._boundsArray.emplaceBack(J[2].x,J[2].y,s.EXTENT,s.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})),this},G.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var q=this.map.painter.context,L=q.gl;for(var V in this.boundsBuffer||(this.boundsBuffer=q.createVertexBuffer(this._boundsArray,W.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new s.Texture(q,this.image,L.RGBA),this.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE)),this.tiles){var J=this.tiles[V];J.state!=="loaded"&&(J.state="loaded",J.texture=this.texture)}}},G.prototype.loadTile=function(q,L){this.tileID&&this.tileID.equals(q.tileID.canonical)?(this.tiles[String(q.tileID.wrap)]=q,q.buckets={},L(null)):(q.state="errored",L(null))},G.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},G.prototype.hasTransition=function(){return!1},G}(s.Evented),U=function(B){function G(q,L,V,J){B.call(this,q,L,V,J),this.roundZoom=!0,this.type="video",this.options=L}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){var q=this;this._loaded=!1;var L=this.options;this.urls=[];for(var V=0,J=L.urls;V<J.length;V+=1){var re=J[V];this.urls.push(this.map._requestManager.transformRequest(re,s.ResourceType.Source).url)}s.getVideo(this.urls,function(ue,xe){q._loaded=!0,ue?q.fire(new s.ErrorEvent(ue)):xe&&(q.video=xe,q.video.loop=!0,q.video.addEventListener("playing",function(){q.map.triggerRepaint()}),q.map&&q.video.play(),q._finishLoading())})},G.prototype.pause=function(){this.video&&this.video.pause()},G.prototype.play=function(){this.video&&this.video.play()},G.prototype.seek=function(q){if(this.video){var L=this.video.seekable;q<L.start(0)||q>L.end(0)?this.fire(new s.ErrorEvent(new s.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+L.start(0)+" and "+L.end(0)+"-second mark."))):this.video.currentTime=q}},G.prototype.getVideo=function(){return this.video},G.prototype.onAdd=function(q){this.map||(this.map=q,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},G.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var q=this.map.painter.context,L=q.gl;for(var V in this.boundsBuffer||(this.boundsBuffer=q.createVertexBuffer(this._boundsArray,W.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE),L.texSubImage2D(L.TEXTURE_2D,0,0,0,L.RGBA,L.UNSIGNED_BYTE,this.video)):(this.texture=new s.Texture(q,this.video,L.RGBA),this.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE)),this.tiles){var J=this.tiles[V];J.state!=="loaded"&&(J.state="loaded",J.texture=this.texture)}}},G.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},G.prototype.hasTransition=function(){return this.video&&!this.video.paused},G}(F),H=function(B){function G(q,L,V,J){B.call(this,q,L,V,J),L.coordinates?Array.isArray(L.coordinates)&&L.coordinates.length===4&&!L.coordinates.some(function(re){return!Array.isArray(re)||re.length!==2||re.some(function(ue){return typeof ue!="number"})})||this.fire(new s.ErrorEvent(new s.ValidationError("sources."+q,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.ErrorEvent(new s.ValidationError("sources."+q,null,'missing required property "coordinates"'))),L.animate&&typeof L.animate!="boolean"&&this.fire(new s.ErrorEvent(new s.ValidationError("sources."+q,null,'optional "animate" property must be a boolean value'))),L.canvas?typeof L.canvas=="string"||L.canvas instanceof s.window.HTMLCanvasElement||this.fire(new s.ErrorEvent(new s.ValidationError("sources."+q,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.ErrorEvent(new s.ValidationError("sources."+q,null,'missing required property "canvas"'))),this.options=L,this.animate=L.animate===void 0||L.animate}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof s.window.HTMLCanvasElement?this.options.canvas:s.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},G.prototype.getCanvas=function(){return this.canvas},G.prototype.onAdd=function(q){this.map=q,this.load(),this.canvas&&this.animate&&this.play()},G.prototype.onRemove=function(){this.pause()},G.prototype.prepare=function(){var q=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,q=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,q=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var L=this.map.painter.context,V=L.gl;for(var J in this.boundsBuffer||(this.boundsBuffer=L.createVertexBuffer(this._boundsArray,W.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(q||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new s.Texture(L,this.canvas,V.RGBA,{premultiply:!0}),this.tiles){var re=this.tiles[J];re.state!=="loaded"&&(re.state="loaded",re.texture=this.texture)}}},G.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},G.prototype.hasTransition=function(){return this._playing},G.prototype._hasInvalidDimensions=function(){for(var q=0,L=[this.canvas.width,this.canvas.height];q<L.length;q+=1){var V=L[q];if(isNaN(V)||V<=0)return!0}return!1},G}(F),ne={vector:z,raster:j,"raster-dem":I,geojson:N,video:U,image:F,canvas:H};function $(B,G){var q=s.identity([]);return s.translate(q,q,[1,1,0]),s.scale(q,q,[.5*B.width,.5*B.height,1]),s.multiply(q,q,B.calculatePosMatrix(G.toUnwrapped()))}function K(B,G,q,L,V,J){var re=function(ft,wt,Et){if(ft)for(var At=0,Dt=ft;At<Dt.length;At+=1){var Lt=wt[Dt[At]];if(Lt&&Lt.source===Et&&Lt.type==="fill-extrusion")return!0}else for(var Wt in wt){var Ht=wt[Wt];if(Ht.source===Et&&Ht.type==="fill-extrusion")return!0}return!1}(V&&V.layers,G,B.id),ue=J.maxPitchScaleFactor(),xe=B.tilesIn(L,ue,re);xe.sort(Q);for(var Le=[],De=0,Ue=xe;De<Ue.length;De+=1){var qe=Ue[De];Le.push({wrappedTileID:qe.tileID.wrapped().key,queryResults:qe.tile.queryRenderedFeatures(G,q,B._state,qe.queryGeometry,qe.cameraQueryGeometry,qe.scale,V,J,ue,$(B.transform,qe.tileID))})}var $e=function(ft){for(var wt={},Et={},At=0,Dt=ft;At<Dt.length;At+=1){var Lt=Dt[At],Wt=Lt.queryResults,Ht=Lt.wrappedTileID,jt=Et[Ht]=Et[Ht]||{};for(var hn in Wt)for(var vn=Wt[hn],An=jt[hn]=jt[hn]||{},Ln=wt[hn]=wt[hn]||[],jn=0,tr=vn;jn<tr.length;jn+=1){var cr=tr[jn];An[cr.featureIndex]||(An[cr.featureIndex]=!0,Ln.push(cr))}}return wt}(Le);for(var lt in $e)$e[lt].forEach(function(ft){var wt=ft.feature,Et=B.getFeatureState(wt.layer["source-layer"],wt.id);wt.source=wt.layer.source,wt.layer["source-layer"]&&(wt.sourceLayer=wt.layer["source-layer"]),wt.state=Et});return $e}function Q(B,G){var q=B.tileID,L=G.tileID;return q.overscaledZ-L.overscaledZ||q.canonical.y-L.canonical.y||q.wrap-L.wrap||q.canonical.x-L.canonical.x}var Z=function(B,G){this.max=B,this.onRemove=G,this.reset()};Z.prototype.reset=function(){for(var B in this.data)for(var G=0,q=this.data[B];G<q.length;G+=1){var L=q[G];L.timeout&&clearTimeout(L.timeout),this.onRemove(L.value)}return this.data={},this.order=[],this},Z.prototype.add=function(B,G,q){var L=this,V=B.wrapped().key;this.data[V]===void 0&&(this.data[V]=[]);var J={value:G,timeout:void 0};if(q!==void 0&&(J.timeout=setTimeout(function(){L.remove(B,J)},q)),this.data[V].push(J),this.order.push(V),this.order.length>this.max){var re=this._getAndRemoveByKey(this.order[0]);re&&this.onRemove(re)}return this},Z.prototype.has=function(B){return B.wrapped().key in this.data},Z.prototype.getAndRemove=function(B){return this.has(B)?this._getAndRemoveByKey(B.wrapped().key):null},Z.prototype._getAndRemoveByKey=function(B){var G=this.data[B].shift();return G.timeout&&clearTimeout(G.timeout),this.data[B].length===0&&delete this.data[B],this.order.splice(this.order.indexOf(B),1),G.value},Z.prototype.getByKey=function(B){var G=this.data[B];return G?G[0].value:null},Z.prototype.get=function(B){return this.has(B)?this.data[B.wrapped().key][0].value:null},Z.prototype.remove=function(B,G){if(!this.has(B))return this;var q=B.wrapped().key,L=G===void 0?0:this.data[q].indexOf(G),V=this.data[q][L];return this.data[q].splice(L,1),V.timeout&&clearTimeout(V.timeout),this.data[q].length===0&&delete this.data[q],this.onRemove(V.value),this.order.splice(this.order.indexOf(q),1),this},Z.prototype.setMaxSize=function(B){for(this.max=B;this.order.length>this.max;){var G=this._getAndRemoveByKey(this.order[0]);G&&this.onRemove(G)}return this},Z.prototype.filter=function(B){var G=[];for(var q in this.data)for(var L=0,V=this.data[q];L<V.length;L+=1){var J=V[L];B(J.value)||G.push(J)}for(var re=0,ue=G;re<ue.length;re+=1){var xe=ue[re];this.remove(xe.value.tileID,xe)}};var X=function(B,G,q){this.context=B;var L=B.gl;this.buffer=L.createBuffer(),this.dynamicDraw=!!q,this.context.unbindVAO(),B.bindElementBuffer.set(this.buffer),L.bufferData(L.ELEMENT_ARRAY_BUFFER,G.arrayBuffer,this.dynamicDraw?L.DYNAMIC_DRAW:L.STATIC_DRAW),this.dynamicDraw||delete G.arrayBuffer};X.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},X.prototype.updateData=function(B){var G=this.context.gl;this.context.unbindVAO(),this.bind(),G.bufferSubData(G.ELEMENT_ARRAY_BUFFER,0,B.arrayBuffer)},X.prototype.destroy=function(){var B=this.context.gl;this.buffer&&(B.deleteBuffer(this.buffer),delete this.buffer)};var te={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},ae=function(B,G,q,L){this.length=G.length,this.attributes=q,this.itemSize=G.bytesPerElement,this.dynamicDraw=L,this.context=B;var V=B.gl;this.buffer=V.createBuffer(),B.bindVertexBuffer.set(this.buffer),V.bufferData(V.ARRAY_BUFFER,G.arrayBuffer,this.dynamicDraw?V.DYNAMIC_DRAW:V.STATIC_DRAW),this.dynamicDraw||delete G.arrayBuffer};ae.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},ae.prototype.updateData=function(B){var G=this.context.gl;this.bind(),G.bufferSubData(G.ARRAY_BUFFER,0,B.arrayBuffer)},ae.prototype.enableAttributes=function(B,G){for(var q=0;q<this.attributes.length;q++){var L=this.attributes[q],V=G.attributes[L.name];V!==void 0&&B.enableVertexAttribArray(V)}},ae.prototype.setVertexAttribPointers=function(B,G,q){for(var L=0;L<this.attributes.length;L++){var V=this.attributes[L],J=G.attributes[V.name];J!==void 0&&B.vertexAttribPointer(J,V.components,B[te[V.type]],!1,this.itemSize,V.offset+this.itemSize*(q||0))}},ae.prototype.destroy=function(){var B=this.context.gl;this.buffer&&(B.deleteBuffer(this.buffer),delete this.buffer)};var se=function(B){this.gl=B.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};se.prototype.get=function(){return this.current},se.prototype.set=function(B){},se.prototype.getDefault=function(){return this.default},se.prototype.setDefault=function(){this.set(this.default)};var ce=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return s.Color.transparent},G.prototype.set=function(q){var L=this.current;(q.r!==L.r||q.g!==L.g||q.b!==L.b||q.a!==L.a||this.dirty)&&(this.gl.clearColor(q.r,q.g,q.b,q.a),this.current=q,this.dirty=!1)},G}(se),fe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 1},G.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.clearDepth(q),this.current=q,this.dirty=!1)},G}(se),pe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 0},G.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.clearStencil(q),this.current=q,this.dirty=!1)},G}(se),ge=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return[!0,!0,!0,!0]},G.prototype.set=function(q){var L=this.current;(q[0]!==L[0]||q[1]!==L[1]||q[2]!==L[2]||q[3]!==L[3]||this.dirty)&&(this.gl.colorMask(q[0],q[1],q[2],q[3]),this.current=q,this.dirty=!1)},G}(se),me=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!0},G.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.depthMask(q),this.current=q,this.dirty=!1)},G}(se),be=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 255},G.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.stencilMask(q),this.current=q,this.dirty=!1)},G}(se),ke=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},G.prototype.set=function(q){var L=this.current;(q.func!==L.func||q.ref!==L.ref||q.mask!==L.mask||this.dirty)&&(this.gl.stencilFunc(q.func,q.ref,q.mask),this.current=q,this.dirty=!1)},G}(se),ze=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){var q=this.gl;return[q.KEEP,q.KEEP,q.KEEP]},G.prototype.set=function(q){var L=this.current;(q[0]!==L[0]||q[1]!==L[1]||q[2]!==L[2]||this.dirty)&&(this.gl.stencilOp(q[0],q[1],q[2]),this.current=q,this.dirty=!1)},G}(se),ve=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(q){if(q!==this.current||this.dirty){var L=this.gl;q?L.enable(L.STENCIL_TEST):L.disable(L.STENCIL_TEST),this.current=q,this.dirty=!1}},G}(se),oe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return[0,1]},G.prototype.set=function(q){var L=this.current;(q[0]!==L[0]||q[1]!==L[1]||this.dirty)&&(this.gl.depthRange(q[0],q[1]),this.current=q,this.dirty=!1)},G}(se),ie=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(q){if(q!==this.current||this.dirty){var L=this.gl;q?L.enable(L.DEPTH_TEST):L.disable(L.DEPTH_TEST),this.current=q,this.dirty=!1}},G}(se),he=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.LESS},G.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.depthFunc(q),this.current=q,this.dirty=!1)},G}(se),Se=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(q){if(q!==this.current||this.dirty){var L=this.gl;q?L.enable(L.BLEND):L.disable(L.BLEND),this.current=q,this.dirty=!1}},G}(se),ye=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){var q=this.gl;return[q.ONE,q.ZERO]},G.prototype.set=function(q){var L=this.current;(q[0]!==L[0]||q[1]!==L[1]||this.dirty)&&(this.gl.blendFunc(q[0],q[1]),this.current=q,this.dirty=!1)},G}(se),we=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return s.Color.transparent},G.prototype.set=function(q){var L=this.current;(q.r!==L.r||q.g!==L.g||q.b!==L.b||q.a!==L.a||this.dirty)&&(this.gl.blendColor(q.r,q.g,q.b,q.a),this.current=q,this.dirty=!1)},G}(se),Me=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.FUNC_ADD},G.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.blendEquation(q),this.current=q,this.dirty=!1)},G}(se),Oe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(q){if(q!==this.current||this.dirty){var L=this.gl;q?L.enable(L.CULL_FACE):L.disable(L.CULL_FACE),this.current=q,this.dirty=!1}},G}(se),Ie=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.BACK},G.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.cullFace(q),this.current=q,this.dirty=!1)},G}(se),de=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.CCW},G.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.frontFace(q),this.current=q,this.dirty=!1)},G}(se),_e=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.useProgram(q),this.current=q,this.dirty=!1)},G}(se),Ae=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.TEXTURE0},G.prototype.set=function(q){(q!==this.current||this.dirty)&&(this.gl.activeTexture(q),this.current=q,this.dirty=!1)},G}(se),Pe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){var q=this.gl;return[0,0,q.drawingBufferWidth,q.drawingBufferHeight]},G.prototype.set=function(q){var L=this.current;(q[0]!==L[0]||q[1]!==L[1]||q[2]!==L[2]||q[3]!==L[3]||this.dirty)&&(this.gl.viewport(q[0],q[1],q[2],q[3]),this.current=q,this.dirty=!1)},G}(se),Ee=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(q){if(q!==this.current||this.dirty){var L=this.gl;L.bindFramebuffer(L.FRAMEBUFFER,q),this.current=q,this.dirty=!1}},G}(se),Fe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(q){if(q!==this.current||this.dirty){var L=this.gl;L.bindRenderbuffer(L.RENDERBUFFER,q),this.current=q,this.dirty=!1}},G}(se),Ve=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(q){if(q!==this.current||this.dirty){var L=this.gl;L.bindTexture(L.TEXTURE_2D,q),this.current=q,this.dirty=!1}},G}(se),Ye=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(q){if(q!==this.current||this.dirty){var L=this.gl;L.bindBuffer(L.ARRAY_BUFFER,q),this.current=q,this.dirty=!1}},G}(se),tt=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(q){var L=this.gl;L.bindBuffer(L.ELEMENT_ARRAY_BUFFER,q),this.current=q,this.dirty=!1},G}(se),nt=function(B){function G(q){B.call(this,q),this.vao=q.extVertexArrayObject}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(q){this.vao&&(q!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(q),this.current=q,this.dirty=!1)},G}(se),ht=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 4},G.prototype.set=function(q){if(q!==this.current||this.dirty){var L=this.gl;L.pixelStorei(L.UNPACK_ALIGNMENT,q),this.current=q,this.dirty=!1}},G}(se),vt=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(q){if(q!==this.current||this.dirty){var L=this.gl;L.pixelStorei(L.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q),this.current=q,this.dirty=!1}},G}(se),pt=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(q){if(q!==this.current||this.dirty){var L=this.gl;L.pixelStorei(L.UNPACK_FLIP_Y_WEBGL,q),this.current=q,this.dirty=!1}},G}(se),Qe=function(B){function G(q,L){B.call(this,q),this.context=q,this.parent=L}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G}(se),Ke=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.setDirty=function(){this.dirty=!0},G.prototype.set=function(q){if(q!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var L=this.gl;L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_2D,q,0),this.current=q,this.dirty=!1}},G}(Qe),Mt=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.set=function(q){if(q!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var L=this.gl;L.framebufferRenderbuffer(L.FRAMEBUFFER,L.DEPTH_ATTACHMENT,L.RENDERBUFFER,q),this.current=q,this.dirty=!1}},G}(Qe),Ot=function(B,G,q,L){this.context=B,this.width=G,this.height=q;var V=B.gl,J=this.framebuffer=V.createFramebuffer();this.colorAttachment=new Ke(B,J),L&&(this.depthAttachment=new Mt(B,J))};Ot.prototype.destroy=function(){var B=this.context.gl,G=this.colorAttachment.get();if(G&&B.deleteTexture(G),this.depthAttachment){var q=this.depthAttachment.get();q&&B.deleteRenderbuffer(q)}B.deleteFramebuffer(this.framebuffer)};var Pt=function(B,G,q){this.func=B,this.mask=G,this.range=q};Pt.ReadOnly=!1,Pt.ReadWrite=!0,Pt.disabled=new Pt(519,Pt.ReadOnly,[0,1]);var St=7680,He=function(B,G,q,L,V,J){this.test=B,this.ref=G,this.mask=q,this.fail=L,this.depthFail=V,this.pass=J};He.disabled=new He({func:519,mask:0},0,0,St,St,St);var We=function(B,G,q){this.blendFunction=B,this.blendColor=G,this.mask=q};We.Replace=[1,0],We.disabled=new We(We.Replace,s.Color.transparent,[!1,!1,!1,!1]),We.unblended=new We(We.Replace,s.Color.transparent,[!0,!0,!0,!0]),We.alphaBlended=new We([1,771],s.Color.transparent,[!0,!0,!0,!0]);var Be=function(B,G,q){this.enable=B,this.mode=G,this.frontFace=q};Be.disabled=new Be(!1,1029,2305),Be.backCCW=new Be(!0,1029,2305);var Ge=function(B){this.gl=B,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ce(this),this.clearDepth=new fe(this),this.clearStencil=new pe(this),this.colorMask=new ge(this),this.depthMask=new me(this),this.stencilMask=new be(this),this.stencilFunc=new ke(this),this.stencilOp=new ze(this),this.stencilTest=new ve(this),this.depthRange=new oe(this),this.depthTest=new ie(this),this.depthFunc=new he(this),this.blend=new Se(this),this.blendFunc=new ye(this),this.blendColor=new we(this),this.blendEquation=new Me(this),this.cullFace=new Oe(this),this.cullFaceSide=new Ie(this),this.frontFace=new de(this),this.program=new _e(this),this.activeTexture=new Ae(this),this.viewport=new Pe(this),this.bindFramebuffer=new Ee(this),this.bindRenderbuffer=new Fe(this),this.bindTexture=new Ve(this),this.bindVertexBuffer=new Ye(this),this.bindElementBuffer=new tt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new nt(this),this.pixelStoreUnpack=new ht(this),this.pixelStoreUnpackPremultiplyAlpha=new vt(this),this.pixelStoreUnpackFlipY=new pt(this),this.extTextureFilterAnisotropic=B.getExtension("EXT_texture_filter_anisotropic")||B.getExtension("MOZ_EXT_texture_filter_anisotropic")||B.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=B.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=B.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(B.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=B.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=B.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=B.getParameter(B.MAX_TEXTURE_SIZE)};Ge.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ge.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ge.prototype.createIndexBuffer=function(B,G){return new X(this,B,G)},Ge.prototype.createVertexBuffer=function(B,G,q){return new ae(this,B,G,q)},Ge.prototype.createRenderbuffer=function(B,G,q){var L=this.gl,V=L.createRenderbuffer();return this.bindRenderbuffer.set(V),L.renderbufferStorage(L.RENDERBUFFER,B,G,q),this.bindRenderbuffer.set(null),V},Ge.prototype.createFramebuffer=function(B,G,q){return new Ot(this,B,G,q)},Ge.prototype.clear=function(B){var G=B.color,q=B.depth,L=this.gl,V=0;G&&(V|=L.COLOR_BUFFER_BIT,this.clearColor.set(G),this.colorMask.set([!0,!0,!0,!0])),q!==void 0&&(V|=L.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(q),this.depthMask.set(!0)),L.clear(V)},Ge.prototype.setCullFace=function(B){B.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(B.mode),this.frontFace.set(B.frontFace))},Ge.prototype.setDepthMode=function(B){B.func!==this.gl.ALWAYS||B.mask?(this.depthTest.set(!0),this.depthFunc.set(B.func),this.depthMask.set(B.mask),this.depthRange.set(B.range)):this.depthTest.set(!1)},Ge.prototype.setStencilMode=function(B){B.test.func!==this.gl.ALWAYS||B.mask?(this.stencilTest.set(!0),this.stencilMask.set(B.mask),this.stencilOp.set([B.fail,B.depthFail,B.pass]),this.stencilFunc.set({func:B.test.func,ref:B.ref,mask:B.test.mask})):this.stencilTest.set(!1)},Ge.prototype.setColorMode=function(B){s.deepEqual(B.blendFunction,We.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(B.blendFunction),this.blendColor.set(B.blendColor)),this.colorMask.set(B.mask)},Ge.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ot=function(B){function G(q,L,V){var J=this;B.call(this),this.id=q,this.dispatcher=V,this.on("data",function(re){re.dataType==="source"&&re.sourceDataType==="metadata"&&(J._sourceLoaded=!0),J._sourceLoaded&&!J._paused&&re.dataType==="source"&&re.sourceDataType==="content"&&(J.reload(),J.transform&&J.update(J.transform))}),this.on("error",function(){J._sourceErrored=!0}),this._source=function(re,ue,xe,Le){var De=new ne[ue.type](re,ue,xe,Le);if(De.id!==re)throw new Error("Expected Source id to be "+re+" instead of "+De.id);return s.bindAll(["load","abort","unload","serialize","prepare"],De),De}(q,L,V,this),this._tiles={},this._cache=new Z(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new s.SourceFeatureState}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.onAdd=function(q){this.map=q,this._maxTileCacheSize=q?q._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(q)},G.prototype.onRemove=function(q){this._source&&this._source.onRemove&&this._source.onRemove(q)},G.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var q in this._tiles){var L=this._tiles[q];if(L.state!=="loaded"&&L.state!=="errored")return!1}return!0},G.prototype.getSource=function(){return this._source},G.prototype.pause=function(){this._paused=!0},G.prototype.resume=function(){if(this._paused){var q=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,q&&this.reload(),this.transform&&this.update(this.transform)}},G.prototype._loadTile=function(q,L){return this._source.loadTile(q,L)},G.prototype._unloadTile=function(q){if(this._source.unloadTile)return this._source.unloadTile(q,function(){})},G.prototype._abortTile=function(q){if(this._source.abortTile)return this._source.abortTile(q,function(){})},G.prototype.serialize=function(){return this._source.serialize()},G.prototype.prepare=function(q){for(var L in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var V=this._tiles[L];V.upload(q),V.prepare(this.map.style.imageManager)}},G.prototype.getIds=function(){return s.values(this._tiles).map(function(q){return q.tileID}).sort(it).map(function(q){return q.key})},G.prototype.getRenderableIds=function(q){var L=this,V=[];for(var J in this._tiles)this._isIdRenderable(J,q)&&V.push(this._tiles[J]);return q?V.sort(function(re,ue){var xe=re.tileID,Le=ue.tileID,De=new s.Point(xe.canonical.x,xe.canonical.y)._rotate(L.transform.angle),Ue=new s.Point(Le.canonical.x,Le.canonical.y)._rotate(L.transform.angle);return xe.overscaledZ-Le.overscaledZ||Ue.y-De.y||Ue.x-De.x}).map(function(re){return re.tileID.key}):V.map(function(re){return re.tileID}).sort(it).map(function(re){return re.key})},G.prototype.hasRenderableParent=function(q){var L=this.findLoadedParent(q,0);return!!L&&this._isIdRenderable(L.tileID.key)},G.prototype._isIdRenderable=function(q,L){return this._tiles[q]&&this._tiles[q].hasData()&&!this._coveredTiles[q]&&(L||!this._tiles[q].holdingForFade())},G.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var q in this._cache.reset(),this._tiles)this._tiles[q].state!=="errored"&&this._reloadTile(q,"reloading")},G.prototype._reloadTile=function(q,L){var V=this._tiles[q];V&&(V.state!=="loading"&&(V.state=L),this._loadTile(V,this._tileLoaded.bind(this,V,q,L)))},G.prototype._tileLoaded=function(q,L,V,J){if(J)return q.state="errored",void(J.status!==404?this._source.fire(new s.ErrorEvent(J,{tile:q})):this.update(this.transform));q.timeAdded=s.browser.now(),V==="expired"&&(q.refreshedUponExpiration=!0),this._setTileReloadTimer(L,q),this.getSource().type==="raster-dem"&&q.dem&&this._backfillDEM(q),this._state.initializeTileState(q,this.map?this.map.painter:null),this._source.fire(new s.Event("data",{dataType:"source",tile:q,coord:q.tileID}))},G.prototype._backfillDEM=function(q){for(var L=this.getRenderableIds(),V=0;V<L.length;V++){var J=L[V];if(q.neighboringTiles&&q.neighboringTiles[J]){var re=this.getTileByID(J);ue(q,re),ue(re,q)}}function ue(xe,Le){xe.needsHillshadePrepare=!0;var De=Le.tileID.canonical.x-xe.tileID.canonical.x,Ue=Le.tileID.canonical.y-xe.tileID.canonical.y,qe=Math.pow(2,xe.tileID.canonical.z),$e=Le.tileID.key;De===0&&Ue===0||Math.abs(Ue)>1||(Math.abs(De)>1&&(Math.abs(De+qe)===1?De+=qe:Math.abs(De-qe)===1&&(De-=qe)),Le.dem&&xe.dem&&(xe.dem.backfillBorder(Le.dem,De,Ue),xe.neighboringTiles&&xe.neighboringTiles[$e]&&(xe.neighboringTiles[$e].backfilled=!0)))}},G.prototype.getTile=function(q){return this.getTileByID(q.key)},G.prototype.getTileByID=function(q){return this._tiles[q]},G.prototype._retainLoadedChildren=function(q,L,V,J){for(var re in this._tiles){var ue=this._tiles[re];if(!(J[re]||!ue.hasData()||ue.tileID.overscaledZ<=L||ue.tileID.overscaledZ>V)){for(var xe=ue.tileID;ue&&ue.tileID.overscaledZ>L+1;){var Le=ue.tileID.scaledTo(ue.tileID.overscaledZ-1);(ue=this._tiles[Le.key])&&ue.hasData()&&(xe=Le)}for(var De=xe;De.overscaledZ>L;)if(q[(De=De.scaledTo(De.overscaledZ-1)).key]){J[xe.key]=xe;break}}}},G.prototype.findLoadedParent=function(q,L){if(q.key in this._loadedParentTiles){var V=this._loadedParentTiles[q.key];return V&&V.tileID.overscaledZ>=L?V:null}for(var J=q.overscaledZ-1;J>=L;J--){var re=q.scaledTo(J),ue=this._getLoadedTile(re);if(ue)return ue}},G.prototype._getLoadedTile=function(q){var L=this._tiles[q.key];return L&&L.hasData()?L:this._cache.getByKey(q.wrapped().key)},G.prototype.updateCacheSize=function(q){var L=(Math.ceil(q.width/this._source.tileSize)+1)*(Math.ceil(q.height/this._source.tileSize)+1),V=Math.floor(5*L),J=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,V):V;this._cache.setMaxSize(J)},G.prototype.handleWrapJump=function(q){var L=(q-(this._prevLng===void 0?q:this._prevLng))/360,V=Math.round(L);if(this._prevLng=q,V){var J={};for(var re in this._tiles){var ue=this._tiles[re];ue.tileID=ue.tileID.unwrapTo(ue.tileID.wrap+V),J[ue.tileID.key]=ue}for(var xe in this._tiles=J,this._timers)clearTimeout(this._timers[xe]),delete this._timers[xe];for(var Le in this._tiles){var De=this._tiles[Le];this._setTileReloadTimer(Le,De)}}},G.prototype.update=function(q){var L=this;if(this.transform=q,this._sourceLoaded&&!this._paused){var V;this.updateCacheSize(q),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?V=q.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(jt){return new s.OverscaledTileID(jt.canonical.z,jt.wrap,jt.canonical.z,jt.canonical.x,jt.canonical.y)}):(V=q.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(V=V.filter(function(jt){return L._source.hasTile(jt)}))):V=[];var J=q.coveringZoomLevel(this._source),re=Math.max(J-G.maxOverzooming,this._source.minzoom),ue=Math.max(J+G.maxUnderzooming,this._source.minzoom),xe=this._updateRetainedTiles(V,J);if(dt(this._source.type)){for(var Le={},De={},Ue=0,qe=Object.keys(xe);Ue<qe.length;Ue+=1){var $e=qe[Ue],lt=xe[$e],ft=this._tiles[$e];if(ft&&!(ft.fadeEndTime&&ft.fadeEndTime<=s.browser.now())){var wt=this.findLoadedParent(lt,re);wt&&(this._addTile(wt.tileID),Le[wt.tileID.key]=wt.tileID),De[$e]=lt}}for(var Et in this._retainLoadedChildren(De,J,ue,xe),Le)xe[Et]||(this._coveredTiles[Et]=!0,xe[Et]=Le[Et])}for(var At in xe)this._tiles[At].clearFadeHold();for(var Dt=0,Lt=s.keysDifference(this._tiles,xe);Dt<Lt.length;Dt+=1){var Wt=Lt[Dt],Ht=this._tiles[Wt];Ht.hasSymbolBuckets&&!Ht.holdingForFade()?Ht.setHoldDuration(this.map._fadeDuration):Ht.hasSymbolBuckets&&!Ht.symbolFadeFinished()||this._removeTile(Wt)}this._updateLoadedParentTileCache()}},G.prototype.releaseSymbolFadeTiles=function(){for(var q in this._tiles)this._tiles[q].holdingForFade()&&this._removeTile(q)},G.prototype._updateRetainedTiles=function(q,L){for(var V={},J={},re=Math.max(L-G.maxOverzooming,this._source.minzoom),ue=Math.max(L+G.maxUnderzooming,this._source.minzoom),xe={},Le=0,De=q;Le<De.length;Le+=1){var Ue=De[Le],qe=this._addTile(Ue);V[Ue.key]=Ue,qe.hasData()||L<this._source.maxzoom&&(xe[Ue.key]=Ue)}this._retainLoadedChildren(xe,L,ue,V);for(var $e=0,lt=q;$e<lt.length;$e+=1){var ft=lt[$e],wt=this._tiles[ft.key];if(!wt.hasData()){if(L+1>this._source.maxzoom){var Et=ft.children(this._source.maxzoom)[0],At=this.getTile(Et);if(At&&At.hasData()){V[Et.key]=Et;continue}}else{var Dt=ft.children(this._source.maxzoom);if(V[Dt[0].key]&&V[Dt[1].key]&&V[Dt[2].key]&&V[Dt[3].key])continue}for(var Lt=wt.wasRequested(),Wt=ft.overscaledZ-1;Wt>=re;--Wt){var Ht=ft.scaledTo(Wt);if(J[Ht.key]||(J[Ht.key]=!0,!(wt=this.getTile(Ht))&&Lt&&(wt=this._addTile(Ht)),wt&&(V[Ht.key]=Ht,Lt=wt.wasRequested(),wt.hasData())))break}}}return V},G.prototype._updateLoadedParentTileCache=function(){for(var q in this._loadedParentTiles={},this._tiles){for(var L=[],V=void 0,J=this._tiles[q].tileID;J.overscaledZ>0;){if(J.key in this._loadedParentTiles){V=this._loadedParentTiles[J.key];break}L.push(J.key);var re=J.scaledTo(J.overscaledZ-1);if(V=this._getLoadedTile(re))break;J=re}for(var ue=0,xe=L;ue<xe.length;ue+=1){var Le=xe[ue];this._loadedParentTiles[Le]=V}}},G.prototype._addTile=function(q){var L=this._tiles[q.key];if(L)return L;(L=this._cache.getAndRemove(q))&&(this._setTileReloadTimer(q.key,L),L.tileID=q,this._state.initializeTileState(L,this.map?this.map.painter:null),this._cacheTimers[q.key]&&(clearTimeout(this._cacheTimers[q.key]),delete this._cacheTimers[q.key],this._setTileReloadTimer(q.key,L)));var V=!!L;return V||(L=new s.Tile(q,this._source.tileSize*q.overscaleFactor()),this._loadTile(L,this._tileLoaded.bind(this,L,q.key,L.state))),L?(L.uses++,this._tiles[q.key]=L,V||this._source.fire(new s.Event("dataloading",{tile:L,coord:L.tileID,dataType:"source"})),L):null},G.prototype._setTileReloadTimer=function(q,L){var V=this;q in this._timers&&(clearTimeout(this._timers[q]),delete this._timers[q]);var J=L.getExpiryTimeout();J&&(this._timers[q]=setTimeout(function(){V._reloadTile(q,"expired"),delete V._timers[q]},J))},G.prototype._removeTile=function(q){var L=this._tiles[q];L&&(L.uses--,delete this._tiles[q],this._timers[q]&&(clearTimeout(this._timers[q]),delete this._timers[q]),L.uses>0||(L.hasData()&&L.state!=="reloading"?this._cache.add(L.tileID,L,L.getExpiryTimeout()):(L.aborted=!0,this._abortTile(L),this._unloadTile(L))))},G.prototype.clearTiles=function(){for(var q in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(q);this._cache.reset()},G.prototype.tilesIn=function(q,L,V){var J=this,re=[],ue=this.transform;if(!ue)return re;for(var xe=V?ue.getCameraQueryGeometry(q):q,Le=q.map(function(Wt){return ue.pointCoordinate(Wt)}),De=xe.map(function(Wt){return ue.pointCoordinate(Wt)}),Ue=this.getIds(),qe=1/0,$e=1/0,lt=-1/0,ft=-1/0,wt=0,Et=De;wt<Et.length;wt+=1){var At=Et[wt];qe=Math.min(qe,At.x),$e=Math.min($e,At.y),lt=Math.max(lt,At.x),ft=Math.max(ft,At.y)}for(var Dt=function(Wt){var Ht=J._tiles[Ue[Wt]];if(!Ht.holdingForFade()){var jt=Ht.tileID,hn=Math.pow(2,ue.zoom-Ht.tileID.overscaledZ),vn=L*Ht.queryPadding*s.EXTENT/Ht.tileSize/hn,An=[jt.getTilePoint(new s.MercatorCoordinate(qe,$e)),jt.getTilePoint(new s.MercatorCoordinate(lt,ft))];if(An[0].x-vn<s.EXTENT&&An[0].y-vn<s.EXTENT&&An[1].x+vn>=0&&An[1].y+vn>=0){var Ln=Le.map(function(tr){return jt.getTilePoint(tr)}),jn=De.map(function(tr){return jt.getTilePoint(tr)});re.push({tile:Ht,tileID:jt,queryGeometry:Ln,cameraQueryGeometry:jn,scale:hn})}}},Lt=0;Lt<Ue.length;Lt++)Dt(Lt);return re},G.prototype.getVisibleCoordinates=function(q){for(var L=this,V=this.getRenderableIds(q).map(function(xe){return L._tiles[xe].tileID}),J=0,re=V;J<re.length;J+=1){var ue=re[J];ue.posMatrix=this.transform.calculatePosMatrix(ue.toUnwrapped())}return V},G.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(dt(this._source.type))for(var q in this._tiles){var L=this._tiles[q];if(L.fadeEndTime!==void 0&&L.fadeEndTime>=s.browser.now())return!0}return!1},G.prototype.setFeatureState=function(q,L,V){q=q||"_geojsonTileLayer",this._state.updateState(q,L,V)},G.prototype.removeFeatureState=function(q,L,V){q=q||"_geojsonTileLayer",this._state.removeFeatureState(q,L,V)},G.prototype.getFeatureState=function(q,L){return q=q||"_geojsonTileLayer",this._state.getState(q,L)},G.prototype.setDependencies=function(q,L,V){var J=this._tiles[q];J&&J.setDependencies(L,V)},G.prototype.reloadTilesForDependencies=function(q,L){for(var V in this._tiles)this._tiles[V].hasDependency(q,L)&&this._reloadTile(V,"reloading");this._cache.filter(function(J){return!J.hasDependency(q,L)})},G}(s.Evented);function it(B,G){var q=Math.abs(2*B.wrap)-+(B.wrap<0),L=Math.abs(2*G.wrap)-+(G.wrap<0);return B.overscaledZ-G.overscaledZ||L-q||G.canonical.y-B.canonical.y||G.canonical.x-B.canonical.x}function dt(B){return B==="raster"||B==="image"||B==="video"}function gt(){return new s.window.Worker(at.workerUrl)}ot.maxOverzooming=10,ot.maxUnderzooming=3;var je="mapboxgl_preloaded_worker_pool",Re=function(){this.active={}};Re.prototype.acquire=function(B){if(!this.workers)for(this.workers=[];this.workers.length<Re.workerCount;)this.workers.push(new gt);return this.active[B]=!0,this.workers.slice()},Re.prototype.release=function(B){delete this.active[B],this.numActive()===0&&(this.workers.forEach(function(G){G.terminate()}),this.workers=null)},Re.prototype.isPreloaded=function(){return!!this.active[je]},Re.prototype.numActive=function(){return Object.keys(this.active).length};var rt,ct=Math.floor(s.browser.hardwareConcurrency/2);function ut(){return rt||(rt=new Re),rt}function et(B,G){var q={};for(var L in B)L!=="ref"&&(q[L]=B[L]);return s.refProperties.forEach(function(V){V in G&&(q[V]=G[V])}),q}function xt(B){B=B.slice();for(var G=Object.create(null),q=0;q<B.length;q++)G[B[q].id]=B[q];for(var L=0;L<B.length;L++)"ref"in B[L]&&(B[L]=et(B[L],G[B[L].ref]));return B}Re.workerCount=Math.max(Math.min(ct,6),1);var mt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Tt(B,G,q){q.push({command:mt.addSource,args:[B,G[B]]})}function yt(B,G,q){G.push({command:mt.removeSource,args:[B]}),q[B]=!0}function bt(B,G,q,L){yt(B,q,L),Tt(B,G,q)}function zt(B,G,q){var L;for(L in B[q])if(B[q].hasOwnProperty(L)&&L!=="data"&&!s.deepEqual(B[q][L],G[q][L]))return!1;for(L in G[q])if(G[q].hasOwnProperty(L)&&L!=="data"&&!s.deepEqual(B[q][L],G[q][L]))return!1;return!0}function Ut(B,G,q,L,V,J){var re;for(re in G=G||{},B=B||{})B.hasOwnProperty(re)&&(s.deepEqual(B[re],G[re])||q.push({command:J,args:[L,re,G[re],V]}));for(re in G)G.hasOwnProperty(re)&&!B.hasOwnProperty(re)&&(s.deepEqual(B[re],G[re])||q.push({command:J,args:[L,re,G[re],V]}))}function en(B){return B.id}function an(B,G){return B[G.id]=G,B}function rn(B,G){if(!B)return[{command:mt.setStyle,args:[G]}];var q=[];try{if(!s.deepEqual(B.version,G.version))return[{command:mt.setStyle,args:[G]}];s.deepEqual(B.center,G.center)||q.push({command:mt.setCenter,args:[G.center]}),s.deepEqual(B.zoom,G.zoom)||q.push({command:mt.setZoom,args:[G.zoom]}),s.deepEqual(B.bearing,G.bearing)||q.push({command:mt.setBearing,args:[G.bearing]}),s.deepEqual(B.pitch,G.pitch)||q.push({command:mt.setPitch,args:[G.pitch]}),s.deepEqual(B.sprite,G.sprite)||q.push({command:mt.setSprite,args:[G.sprite]}),s.deepEqual(B.glyphs,G.glyphs)||q.push({command:mt.setGlyphs,args:[G.glyphs]}),s.deepEqual(B.transition,G.transition)||q.push({command:mt.setTransition,args:[G.transition]}),s.deepEqual(B.light,G.light)||q.push({command:mt.setLight,args:[G.light]});var L={},V=[];(function(re,ue,xe,Le){var De;for(De in ue=ue||{},re=re||{})re.hasOwnProperty(De)&&(ue.hasOwnProperty(De)||yt(De,xe,Le));for(De in ue)ue.hasOwnProperty(De)&&(re.hasOwnProperty(De)?s.deepEqual(re[De],ue[De])||(re[De].type==="geojson"&&ue[De].type==="geojson"&&zt(re,ue,De)?xe.push({command:mt.setGeoJSONSourceData,args:[De,ue[De].data]}):bt(De,ue,xe,Le)):Tt(De,ue,xe))})(B.sources,G.sources,V,L);var J=[];B.layers&&B.layers.forEach(function(re){L[re.source]?q.push({command:mt.removeLayer,args:[re.id]}):J.push(re)}),q=q.concat(V),function(re,ue,xe){ue=ue||[];var Le,De,Ue,qe,$e,lt,ft,wt=(re=re||[]).map(en),Et=ue.map(en),At=re.reduce(an,{}),Dt=ue.reduce(an,{}),Lt=wt.slice(),Wt=Object.create(null);for(Le=0,De=0;Le<wt.length;Le++)Ue=wt[Le],Dt.hasOwnProperty(Ue)?De++:(xe.push({command:mt.removeLayer,args:[Ue]}),Lt.splice(Lt.indexOf(Ue,De),1));for(Le=0,De=0;Le<Et.length;Le++)Ue=Et[Et.length-1-Le],Lt[Lt.length-1-Le]!==Ue&&(At.hasOwnProperty(Ue)?(xe.push({command:mt.removeLayer,args:[Ue]}),Lt.splice(Lt.lastIndexOf(Ue,Lt.length-De),1)):De++,lt=Lt[Lt.length-Le],xe.push({command:mt.addLayer,args:[Dt[Ue],lt]}),Lt.splice(Lt.length-Le,0,Ue),Wt[Ue]=!0);for(Le=0;Le<Et.length;Le++)if(qe=At[Ue=Et[Le]],$e=Dt[Ue],!Wt[Ue]&&!s.deepEqual(qe,$e))if(s.deepEqual(qe.source,$e.source)&&s.deepEqual(qe["source-layer"],$e["source-layer"])&&s.deepEqual(qe.type,$e.type)){for(ft in Ut(qe.layout,$e.layout,xe,Ue,null,mt.setLayoutProperty),Ut(qe.paint,$e.paint,xe,Ue,null,mt.setPaintProperty),s.deepEqual(qe.filter,$e.filter)||xe.push({command:mt.setFilter,args:[Ue,$e.filter]}),s.deepEqual(qe.minzoom,$e.minzoom)&&s.deepEqual(qe.maxzoom,$e.maxzoom)||xe.push({command:mt.setLayerZoomRange,args:[Ue,$e.minzoom,$e.maxzoom]}),qe)qe.hasOwnProperty(ft)&&ft!=="layout"&&ft!=="paint"&&ft!=="filter"&&ft!=="metadata"&&ft!=="minzoom"&&ft!=="maxzoom"&&(ft.indexOf("paint.")===0?Ut(qe[ft],$e[ft],xe,Ue,ft.slice(6),mt.setPaintProperty):s.deepEqual(qe[ft],$e[ft])||xe.push({command:mt.setLayerProperty,args:[Ue,ft,$e[ft]]}));for(ft in $e)$e.hasOwnProperty(ft)&&!qe.hasOwnProperty(ft)&&ft!=="layout"&&ft!=="paint"&&ft!=="filter"&&ft!=="metadata"&&ft!=="minzoom"&&ft!=="maxzoom"&&(ft.indexOf("paint.")===0?Ut(qe[ft],$e[ft],xe,Ue,ft.slice(6),mt.setPaintProperty):s.deepEqual(qe[ft],$e[ft])||xe.push({command:mt.setLayerProperty,args:[Ue,ft,$e[ft]]}))}else xe.push({command:mt.removeLayer,args:[Ue]}),lt=Lt[Lt.lastIndexOf(Ue)+1],xe.push({command:mt.addLayer,args:[$e,lt]})}(J,G.layers,q)}catch(re){console.warn("Unable to compute style diff:",re),q=[{command:mt.setStyle,args:[G]}]}return q}var qt=function(B,G){this.reset(B,G)};qt.prototype.reset=function(B,G){this.points=B||[],this._distances=[0];for(var q=1;q<this.points.length;q++)this._distances[q]=this._distances[q-1]+this.points[q].dist(this.points[q-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(G||0,.5*this.length),this.paddedLength=this.length-2*this.padding},qt.prototype.lerp=function(B){if(this.points.length===1)return this.points[0];B=s.clamp(B,0,1);for(var G=1,q=this._distances[G],L=B*this.paddedLength+this.padding;q<L&&G<this._distances.length;)q=this._distances[++G];var V=G-1,J=this._distances[V],re=q-J,ue=re>0?(L-J)/re:0;return this.points[V].mult(1-ue).add(this.points[G].mult(ue))};var Kt=function(B,G,q){var L=this.boxCells=[],V=this.circleCells=[];this.xCellCount=Math.ceil(B/q),this.yCellCount=Math.ceil(G/q);for(var J=0;J<this.xCellCount*this.yCellCount;J++)L.push([]),V.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=B,this.height=G,this.xScale=this.xCellCount/B,this.yScale=this.yCellCount/G,this.boxUid=0,this.circleUid=0};function xn(B,G,q,L,V){var J=s.create();return G?(s.scale(J,J,[1/V,1/V,1]),q||s.rotateZ(J,J,L.angle)):s.multiply(J,L.labelPlaneMatrix,B),J}function on(B,G,q,L,V){if(G){var J=s.clone(B);return s.scale(J,J,[V,V,1]),q||s.rotateZ(J,J,-L.angle),J}return L.glCoordMatrix}function Xt(B,G){var q=[B.x,B.y,0,1];sr(q,q,G);var L=q[3];return{point:new s.Point(q[0]/L,q[1]/L),signedDistanceFromCamera:L}}function ln(B,G){return .5+B/G*.5}function Jt(B,G){var q=B[0]/B[3],L=B[1]/B[3];return q>=-G[0]&&q<=G[0]&&L>=-G[1]&&L<=G[1]}function tn(B,G,q,L,V,J,re,ue){var xe=L?B.textSizeData:B.iconSizeData,Le=s.evaluateSizeForZoom(xe,q.transform.zoom),De=[256/q.width*2+1,256/q.height*2+1],Ue=L?B.text.dynamicLayoutVertexArray:B.icon.dynamicLayoutVertexArray;Ue.clear();for(var qe=B.lineVertexArray,$e=L?B.text.placedSymbolArray:B.icon.placedSymbolArray,lt=q.transform.width/q.transform.height,ft=!1,wt=0;wt<$e.length;wt++){var Et=$e.get(wt);if(Et.hidden||Et.writingMode===s.WritingMode.vertical&&!ft)Wn(Et.numGlyphs,Ue);else{ft=!1;var At=[Et.anchorX,Et.anchorY,0,1];if(s.transformMat4(At,At,G),Jt(At,De)){var Dt=At[3],Lt=ln(q.transform.cameraToCenterDistance,Dt),Wt=s.evaluateSizeForFeature(xe,Le,Et),Ht=re?Wt/Lt:Wt*Lt,jt=new s.Point(Et.anchorX,Et.anchorY),hn=Xt(jt,V).point,vn={},An=Cn(Et,Ht,!1,ue,G,V,J,B.glyphOffsetArray,qe,Ue,hn,jt,vn,lt);ft=An.useVertical,(An.notEnoughRoom||ft||An.needsFlipping&&Cn(Et,Ht,!0,ue,G,V,J,B.glyphOffsetArray,qe,Ue,hn,jt,vn,lt).notEnoughRoom)&&Wn(Et.numGlyphs,Ue)}else Wn(Et.numGlyphs,Ue)}}L?B.text.dynamicLayoutVertexBuffer.updateData(Ue):B.icon.dynamicLayoutVertexBuffer.updateData(Ue)}function wn(B,G,q,L,V,J,re,ue,xe,Le,De){var Ue=ue.glyphStartIndex+ue.numGlyphs,qe=ue.lineStartIndex,$e=ue.lineStartIndex+ue.lineLength,lt=G.getoffsetX(ue.glyphStartIndex),ft=G.getoffsetX(Ue-1),wt=Mn(B*lt,q,L,V,J,re,ue.segment,qe,$e,xe,Le,De);if(!wt)return null;var Et=Mn(B*ft,q,L,V,J,re,ue.segment,qe,$e,xe,Le,De);return Et?{first:wt,last:Et}:null}function mn(B,G,q,L){return B===s.WritingMode.horizontal&&Math.abs(q.y-G.y)>Math.abs(q.x-G.x)*L?{useVertical:!0}:(B===s.WritingMode.vertical?G.y<q.y:G.x>q.x)?{needsFlipping:!0}:null}function Cn(B,G,q,L,V,J,re,ue,xe,Le,De,Ue,qe,$e){var lt,ft=G/24,wt=B.lineOffsetX*ft,Et=B.lineOffsetY*ft;if(B.numGlyphs>1){var At=B.glyphStartIndex+B.numGlyphs,Dt=B.lineStartIndex,Lt=B.lineStartIndex+B.lineLength,Wt=wn(ft,ue,wt,Et,q,De,Ue,B,xe,J,qe);if(!Wt)return{notEnoughRoom:!0};var Ht=Xt(Wt.first.point,re).point,jt=Xt(Wt.last.point,re).point;if(L&&!q){var hn=mn(B.writingMode,Ht,jt,$e);if(hn)return hn}lt=[Wt.first];for(var vn=B.glyphStartIndex+1;vn<At-1;vn++)lt.push(Mn(ft*ue.getoffsetX(vn),wt,Et,q,De,Ue,B.segment,Dt,Lt,xe,J,qe));lt.push(Wt.last)}else{if(L&&!q){var An=Xt(Ue,V).point,Ln=B.lineStartIndex+B.segment+1,jn=new s.Point(xe.getx(Ln),xe.gety(Ln)),tr=Xt(jn,V),cr=tr.signedDistanceFromCamera>0?tr.point:yn(Ue,jn,An,1,V),Hn=mn(B.writingMode,An,cr,$e);if(Hn)return Hn}var or=Mn(ft*ue.getoffsetX(B.glyphStartIndex),wt,Et,q,De,Ue,B.segment,B.lineStartIndex,B.lineStartIndex+B.lineLength,xe,J,qe);if(!or)return{notEnoughRoom:!0};lt=[or]}for(var vr=0,Ar=lt;vr<Ar.length;vr+=1){var er=Ar[vr];s.addDynamicAttributes(Le,er.point,er.angle)}return{}}function yn(B,G,q,L,V){var J=Xt(B.add(B.sub(G)._unit()),V).point,re=q.sub(J);return q.add(re._mult(L/re.mag()))}function Mn(B,G,q,L,V,J,re,ue,xe,Le,De,Ue){var qe=L?B-G:B+G,$e=qe>0?1:-1,lt=0;L&&($e*=-1,lt=Math.PI),$e<0&&(lt+=Math.PI);for(var ft=$e>0?ue+re:ue+re+1,wt=V,Et=V,At=0,Dt=0,Lt=Math.abs(qe),Wt=[];At+Dt<=Lt;){if((ft+=$e)<ue||ft>=xe)return null;if(Et=wt,Wt.push(wt),(wt=Ue[ft])===void 0){var Ht=new s.Point(Le.getx(ft),Le.gety(ft)),jt=Xt(Ht,De);if(jt.signedDistanceFromCamera>0)wt=Ue[ft]=jt.point;else{var hn=ft-$e;wt=yn(At===0?J:new s.Point(Le.getx(hn),Le.gety(hn)),Ht,Et,Lt-At+1,De)}}At+=Dt,Dt=Et.dist(wt)}var vn=(Lt-At)/Dt,An=wt.sub(Et),Ln=An.mult(vn)._add(Et);Ln._add(An._unit()._perp()._mult(q*$e));var jn=lt+Math.atan2(wt.y-Et.y,wt.x-Et.x);return Wt.push(Ln),{point:Ln,angle:jn,path:Wt}}Kt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Kt.prototype.insert=function(B,G,q,L,V){this._forEachCell(G,q,L,V,this._insertBoxCell,this.boxUid++),this.boxKeys.push(B),this.bboxes.push(G),this.bboxes.push(q),this.bboxes.push(L),this.bboxes.push(V)},Kt.prototype.insertCircle=function(B,G,q,L){this._forEachCell(G-L,q-L,G+L,q+L,this._insertCircleCell,this.circleUid++),this.circleKeys.push(B),this.circles.push(G),this.circles.push(q),this.circles.push(L)},Kt.prototype._insertBoxCell=function(B,G,q,L,V,J){this.boxCells[V].push(J)},Kt.prototype._insertCircleCell=function(B,G,q,L,V,J){this.circleCells[V].push(J)},Kt.prototype._query=function(B,G,q,L,V,J){if(q<0||B>this.width||L<0||G>this.height)return!V&&[];var re=[];if(B<=0&&G<=0&&this.width<=q&&this.height<=L){if(V)return!0;for(var ue=0;ue<this.boxKeys.length;ue++)re.push({key:this.boxKeys[ue],x1:this.bboxes[4*ue],y1:this.bboxes[4*ue+1],x2:this.bboxes[4*ue+2],y2:this.bboxes[4*ue+3]});for(var xe=0;xe<this.circleKeys.length;xe++){var Le=this.circles[3*xe],De=this.circles[3*xe+1],Ue=this.circles[3*xe+2];re.push({key:this.circleKeys[xe],x1:Le-Ue,y1:De-Ue,x2:Le+Ue,y2:De+Ue})}return J?re.filter(J):re}var qe={hitTest:V,seenUids:{box:{},circle:{}}};return this._forEachCell(B,G,q,L,this._queryCell,re,qe,J),V?re.length>0:re},Kt.prototype._queryCircle=function(B,G,q,L,V){var J=B-q,re=B+q,ue=G-q,xe=G+q;if(re<0||J>this.width||xe<0||ue>this.height)return!L&&[];var Le=[],De={hitTest:L,circle:{x:B,y:G,radius:q},seenUids:{box:{},circle:{}}};return this._forEachCell(J,ue,re,xe,this._queryCellCircle,Le,De,V),L?Le.length>0:Le},Kt.prototype.query=function(B,G,q,L,V){return this._query(B,G,q,L,!1,V)},Kt.prototype.hitTest=function(B,G,q,L,V){return this._query(B,G,q,L,!0,V)},Kt.prototype.hitTestCircle=function(B,G,q,L){return this._queryCircle(B,G,q,!0,L)},Kt.prototype._queryCell=function(B,G,q,L,V,J,re,ue){var xe=re.seenUids,Le=this.boxCells[V];if(Le!==null)for(var De=this.bboxes,Ue=0,qe=Le;Ue<qe.length;Ue+=1){var $e=qe[Ue];if(!xe.box[$e]){xe.box[$e]=!0;var lt=4*$e;if(B<=De[lt+2]&&G<=De[lt+3]&&q>=De[lt+0]&&L>=De[lt+1]&&(!ue||ue(this.boxKeys[$e]))){if(re.hitTest)return J.push(!0),!0;J.push({key:this.boxKeys[$e],x1:De[lt],y1:De[lt+1],x2:De[lt+2],y2:De[lt+3]})}}}var ft=this.circleCells[V];if(ft!==null)for(var wt=this.circles,Et=0,At=ft;Et<At.length;Et+=1){var Dt=At[Et];if(!xe.circle[Dt]){xe.circle[Dt]=!0;var Lt=3*Dt;if(this._circleAndRectCollide(wt[Lt],wt[Lt+1],wt[Lt+2],B,G,q,L)&&(!ue||ue(this.circleKeys[Dt]))){if(re.hitTest)return J.push(!0),!0;var Wt=wt[Lt],Ht=wt[Lt+1],jt=wt[Lt+2];J.push({key:this.circleKeys[Dt],x1:Wt-jt,y1:Ht-jt,x2:Wt+jt,y2:Ht+jt})}}}},Kt.prototype._queryCellCircle=function(B,G,q,L,V,J,re,ue){var xe=re.circle,Le=re.seenUids,De=this.boxCells[V];if(De!==null)for(var Ue=this.bboxes,qe=0,$e=De;qe<$e.length;qe+=1){var lt=$e[qe];if(!Le.box[lt]){Le.box[lt]=!0;var ft=4*lt;if(this._circleAndRectCollide(xe.x,xe.y,xe.radius,Ue[ft+0],Ue[ft+1],Ue[ft+2],Ue[ft+3])&&(!ue||ue(this.boxKeys[lt])))return J.push(!0),!0}}var wt=this.circleCells[V];if(wt!==null)for(var Et=this.circles,At=0,Dt=wt;At<Dt.length;At+=1){var Lt=Dt[At];if(!Le.circle[Lt]){Le.circle[Lt]=!0;var Wt=3*Lt;if(this._circlesCollide(Et[Wt],Et[Wt+1],Et[Wt+2],xe.x,xe.y,xe.radius)&&(!ue||ue(this.circleKeys[Lt])))return J.push(!0),!0}}},Kt.prototype._forEachCell=function(B,G,q,L,V,J,re,ue){for(var xe=this._convertToXCellCoord(B),Le=this._convertToYCellCoord(G),De=this._convertToXCellCoord(q),Ue=this._convertToYCellCoord(L),qe=xe;qe<=De;qe++)for(var $e=Le;$e<=Ue;$e++){var lt=this.xCellCount*$e+qe;if(V.call(this,B,G,q,L,lt,J,re,ue))return}},Kt.prototype._convertToXCellCoord=function(B){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(B*this.xScale)))},Kt.prototype._convertToYCellCoord=function(B){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(B*this.yScale)))},Kt.prototype._circlesCollide=function(B,G,q,L,V,J){var re=L-B,ue=V-G,xe=q+J;return xe*xe>re*re+ue*ue},Kt.prototype._circleAndRectCollide=function(B,G,q,L,V,J,re){var ue=(J-L)/2,xe=Math.abs(B-(L+ue));if(xe>ue+q)return!1;var Le=(re-V)/2,De=Math.abs(G-(V+Le));if(De>Le+q)return!1;if(xe<=ue||De<=Le)return!0;var Ue=xe-ue,qe=De-Le;return Ue*Ue+qe*qe<=q*q};var zn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Wn(B,G){for(var q=0;q<B;q++){var L=G.length;G.resize(L+4),G.float32.set(zn,3*L)}}function sr(B,G,q){var L=G[0],V=G[1];return B[0]=q[0]*L+q[4]*V+q[12],B[1]=q[1]*L+q[5]*V+q[13],B[3]=q[3]*L+q[7]*V+q[15],B}var Fn=100,Yn=function(B,G,q){G===void 0&&(G=new Kt(B.width+200,B.height+200,25)),q===void 0&&(q=new Kt(B.width+200,B.height+200,25)),this.transform=B,this.grid=G,this.ignoredGrid=q,this.pitchfactor=Math.cos(B._pitch)*B.cameraToCenterDistance,this.screenRightBoundary=B.width+Fn,this.screenBottomBoundary=B.height+Fn,this.gridRightBoundary=B.width+200,this.gridBottomBoundary=B.height+200};function Xn(B,G,q){return G*(s.EXTENT/(B.tileSize*Math.pow(2,q-B.tileID.overscaledZ)))}Yn.prototype.placeCollisionBox=function(B,G,q,L,V){var J=this.projectAndGetPerspectiveRatio(L,B.anchorPointX,B.anchorPointY),re=q*J.perspectiveRatio,ue=B.x1*re+J.point.x,xe=B.y1*re+J.point.y,Le=B.x2*re+J.point.x,De=B.y2*re+J.point.y;return!this.isInsideGrid(ue,xe,Le,De)||!G&&this.grid.hitTest(ue,xe,Le,De,V)?{box:[],offscreen:!1}:{box:[ue,xe,Le,De],offscreen:this.isOffscreen(ue,xe,Le,De)}},Yn.prototype.placeCollisionCircles=function(B,G,q,L,V,J,re,ue,xe,Le,De,Ue,qe){var $e=[],lt=new s.Point(G.anchorX,G.anchorY),ft=Xt(lt,J),wt=ln(this.transform.cameraToCenterDistance,ft.signedDistanceFromCamera),Et=(Le?V/wt:V*wt)/s.ONE_EM,At=Xt(lt,re).point,Dt=wn(Et,L,G.lineOffsetX*Et,G.lineOffsetY*Et,!1,At,lt,G,q,re,{}),Lt=!1,Wt=!1,Ht=!0;if(Dt){for(var jt=.5*Ue*wt+qe,hn=new s.Point(-100,-100),vn=new s.Point(this.screenRightBoundary,this.screenBottomBoundary),An=new qt,Ln=Dt.first,jn=Dt.last,tr=[],cr=Ln.path.length-1;cr>=1;cr--)tr.push(Ln.path[cr]);for(var Hn=1;Hn<jn.path.length;Hn++)tr.push(jn.path[Hn]);var or=2.5*jt;if(ue){var vr=tr.map(function(Gr){return Xt(Gr,ue)});tr=vr.some(function(Gr){return Gr.signedDistanceFromCamera<=0})?[]:vr.map(function(Gr){return Gr.point})}var Ar=[];if(tr.length>0){for(var er=tr[0].clone(),ar=tr[0].clone(),xr=1;xr<tr.length;xr++)er.x=Math.min(er.x,tr[xr].x),er.y=Math.min(er.y,tr[xr].y),ar.x=Math.max(ar.x,tr[xr].x),ar.y=Math.max(ar.y,tr[xr].y);Ar=er.x>=hn.x&&ar.x<=vn.x&&er.y>=hn.y&&ar.y<=vn.y?[tr]:ar.x<hn.x||er.x>vn.x||ar.y<hn.y||er.y>vn.y?[]:s.clipLine([tr],hn.x,hn.y,vn.x,vn.y)}for(var fr=0,wr=Ar;fr<wr.length;fr+=1){var Er=wr[fr];An.reset(Er,.25*jt);var Rr;Rr=An.length<=.5*jt?1:Math.ceil(An.paddedLength/or)+1;for(var Fr=0;Fr<Rr;Fr++){var jr=Fr/Math.max(Rr-1,1),qr=An.lerp(jr),ui=qr.x+Fn,ki=qr.y+Fn;$e.push(ui,ki,jt,0);var ra=ui-jt,ji=ki-jt,Ki=ui+jt,pi=ki+jt;if(Ht=Ht&&this.isOffscreen(ra,ji,Ki,pi),Wt=Wt||this.isInsideGrid(ra,ji,Ki,pi),!B&&this.grid.hitTestCircle(ui,ki,jt,De)&&(Lt=!0,!xe))return{circles:[],offscreen:!1,collisionDetected:Lt}}}}return{circles:!xe&&Lt||!Wt?[]:$e,offscreen:Ht,collisionDetected:Lt}},Yn.prototype.queryRenderedSymbols=function(B){if(B.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var G=[],q=1/0,L=1/0,V=-1/0,J=-1/0,re=0,ue=B;re<ue.length;re+=1){var xe=ue[re],Le=new s.Point(xe.x+Fn,xe.y+Fn);q=Math.min(q,Le.x),L=Math.min(L,Le.y),V=Math.max(V,Le.x),J=Math.max(J,Le.y),G.push(Le)}for(var De={},Ue={},qe=0,$e=this.grid.query(q,L,V,J).concat(this.ignoredGrid.query(q,L,V,J));qe<$e.length;qe+=1){var lt=$e[qe],ft=lt.key;if(De[ft.bucketInstanceId]===void 0&&(De[ft.bucketInstanceId]={}),!De[ft.bucketInstanceId][ft.featureIndex]){var wt=[new s.Point(lt.x1,lt.y1),new s.Point(lt.x2,lt.y1),new s.Point(lt.x2,lt.y2),new s.Point(lt.x1,lt.y2)];s.polygonIntersectsPolygon(G,wt)&&(De[ft.bucketInstanceId][ft.featureIndex]=!0,Ue[ft.bucketInstanceId]===void 0&&(Ue[ft.bucketInstanceId]=[]),Ue[ft.bucketInstanceId].push(ft.featureIndex))}}return Ue},Yn.prototype.insertCollisionBox=function(B,G,q,L,V){var J={bucketInstanceId:q,featureIndex:L,collisionGroupID:V};(G?this.ignoredGrid:this.grid).insert(J,B[0],B[1],B[2],B[3])},Yn.prototype.insertCollisionCircles=function(B,G,q,L,V){for(var J=G?this.ignoredGrid:this.grid,re={bucketInstanceId:q,featureIndex:L,collisionGroupID:V},ue=0;ue<B.length;ue+=4)J.insertCircle(re,B[ue],B[ue+1],B[ue+2])},Yn.prototype.projectAndGetPerspectiveRatio=function(B,G,q){var L=[G,q,0,1];return sr(L,L,B),{point:new s.Point((L[0]/L[3]+1)/2*this.transform.width+Fn,(-L[1]/L[3]+1)/2*this.transform.height+Fn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/L[3]*.5}},Yn.prototype.isOffscreen=function(B,G,q,L){return q<Fn||B>=this.screenRightBoundary||L<Fn||G>this.screenBottomBoundary},Yn.prototype.isInsideGrid=function(B,G,q,L){return q>=0&&B<this.gridRightBoundary&&L>=0&&G<this.gridBottomBoundary},Yn.prototype.getViewportMatrix=function(){var B=s.identity([]);return s.translate(B,B,[-100,-100,0]),B};var rr=function(B,G,q,L){this.opacity=B?Math.max(0,Math.min(1,B.opacity+(B.placed?G:-G))):L&&q?1:0,this.placed=q};rr.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Yt=function(B,G,q,L,V){this.text=new rr(B?B.text:null,G,q,V),this.icon=new rr(B?B.icon:null,G,L,V)};Yt.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var $t=function(B,G,q){this.text=B,this.icon=G,this.skipFade=q},Sn=function(){this.invProjMatrix=s.create(),this.viewportMatrix=s.create(),this.circles=[]},dn=function(B,G,q,L,V){this.bucketInstanceId=B,this.featureIndex=G,this.sourceLayerIndex=q,this.bucketIndex=L,this.tileID=V},En=function(B){this.crossSourceCollisions=B,this.maxGroupID=0,this.collisionGroups={}};function Nn(B,G,q,L,V){var J=s.getAnchorAlignment(B),re=-(J.horizontalAlign-.5)*G,ue=-(J.verticalAlign-.5)*q,xe=s.evaluateVariableOffset(B,L);return new s.Point(re+xe[0]*V,ue+xe[1]*V)}function Bn(B,G,q,L,V,J){var re=B.x1,ue=B.x2,xe=B.y1,Le=B.y2,De=B.anchorPointX,Ue=B.anchorPointY,qe=new s.Point(G,q);return L&&qe._rotate(V?J:-J),{x1:re+qe.x,y1:xe+qe.y,x2:ue+qe.x,y2:Le+qe.y,anchorPointX:De,anchorPointY:Ue}}En.prototype.get=function(B){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[B]){var G=++this.maxGroupID;this.collisionGroups[B]={ID:G,predicate:function(q){return q.collisionGroupID===G}}}return this.collisionGroups[B]};var $n=function(B,G,q,L){this.transform=B.clone(),this.collisionIndex=new Yn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=G,this.retainedQueryData={},this.collisionGroups=new En(q),this.collisionCircleArrays={},this.prevPlacement=L,L&&(L.prevPlacement=void 0),this.placedOrientations={}};function lr(B,G,q,L,V){B.emplaceBack(G?1:0,q?1:0,L||0,V||0),B.emplaceBack(G?1:0,q?1:0,L||0,V||0),B.emplaceBack(G?1:0,q?1:0,L||0,V||0),B.emplaceBack(G?1:0,q?1:0,L||0,V||0)}$n.prototype.getBucketParts=function(B,G,q,L){var V=q.getBucket(G),J=q.latestFeatureIndex;if(V&&J&&G.id===V.layerIds[0]){var re=q.collisionBoxArray,ue=V.layers[0].layout,xe=Math.pow(2,this.transform.zoom-q.tileID.overscaledZ),Le=q.tileSize/s.EXTENT,De=this.transform.calculatePosMatrix(q.tileID.toUnwrapped()),Ue=ue.get("text-pitch-alignment")==="map",qe=ue.get("text-rotation-alignment")==="map",$e=Xn(q,1,this.transform.zoom),lt=xn(De,Ue,qe,this.transform,$e),ft=null;if(Ue){var wt=on(De,Ue,qe,this.transform,$e);ft=s.multiply([],this.transform.labelPlaneMatrix,wt)}this.retainedQueryData[V.bucketInstanceId]=new dn(V.bucketInstanceId,J,V.sourceLayerIndex,V.index,q.tileID);var Et={bucket:V,layout:ue,posMatrix:De,textLabelPlaneMatrix:lt,labelToScreenMatrix:ft,scale:xe,textPixelRatio:Le,holdingForFade:q.holdingForFade(),collisionBoxArray:re,partiallyEvaluatedTextSize:s.evaluateSizeForZoom(V.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(V.sourceID)};if(L)for(var At=0,Dt=V.sortKeyRanges;At<Dt.length;At+=1){var Lt=Dt[At],Wt=Lt.sortKey,Ht=Lt.symbolInstanceStart,jt=Lt.symbolInstanceEnd;B.push({sortKey:Wt,symbolInstanceStart:Ht,symbolInstanceEnd:jt,parameters:Et})}else B.push({symbolInstanceStart:0,symbolInstanceEnd:V.symbolInstances.length,parameters:Et})}},$n.prototype.attemptAnchorPlacement=function(B,G,q,L,V,J,re,ue,xe,Le,De,Ue,qe,$e,lt){var ft,wt=[Ue.textOffset0,Ue.textOffset1],Et=Nn(B,q,L,wt,V),At=this.collisionIndex.placeCollisionBox(Bn(G,Et.x,Et.y,J,re,this.transform.angle),De,ue,xe,Le.predicate);if(!lt||this.collisionIndex.placeCollisionBox(Bn(lt,Et.x,Et.y,J,re,this.transform.angle),De,ue,xe,Le.predicate).box.length!==0)return At.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Ue.crossTileID]&&this.prevPlacement.placements[Ue.crossTileID]&&this.prevPlacement.placements[Ue.crossTileID].text&&(ft=this.prevPlacement.variableOffsets[Ue.crossTileID].anchor),this.variableOffsets[Ue.crossTileID]={textOffset:wt,width:q,height:L,anchor:B,textBoxScale:V,prevAnchor:ft},this.markUsedJustification(qe,B,Ue,$e),qe.allowVerticalPlacement&&(this.markUsedOrientation(qe,$e,Ue),this.placedOrientations[Ue.crossTileID]=$e),{shift:Et,placedGlyphBoxes:At}):void 0},$n.prototype.placeLayerBucketPart=function(B,G,q){var L=this,V=B.parameters,J=V.bucket,re=V.layout,ue=V.posMatrix,xe=V.textLabelPlaneMatrix,Le=V.labelToScreenMatrix,De=V.textPixelRatio,Ue=V.holdingForFade,qe=V.collisionBoxArray,$e=V.partiallyEvaluatedTextSize,lt=V.collisionGroup,ft=re.get("text-optional"),wt=re.get("icon-optional"),Et=re.get("text-allow-overlap"),At=re.get("icon-allow-overlap"),Dt=re.get("text-rotation-alignment")==="map",Lt=re.get("text-pitch-alignment")==="map",Wt=re.get("icon-text-fit")!=="none",Ht=re.get("symbol-z-order")==="viewport-y",jt=Et&&(At||!J.hasIconData()||wt),hn=At&&(Et||!J.hasTextData()||ft);!J.collisionArrays&&qe&&J.deserializeCollisionBoxes(qe);var vn=function(Hn,or){if(!G[Hn.crossTileID])if(Ue)L.placements[Hn.crossTileID]=new $t(!1,!1,!1);else{var vr,Ar=!1,er=!1,ar=!0,xr=null,fr={box:null,offscreen:null},wr={box:null,offscreen:null},Er=null,Rr=null,Fr=0,jr=0,qr=0;or.textFeatureIndex?Fr=or.textFeatureIndex:Hn.useRuntimeCollisionCircles&&(Fr=Hn.featureIndex),or.verticalTextFeatureIndex&&(jr=or.verticalTextFeatureIndex);var ui=or.textBox;if(ui){var ki=function(_i){var ka=s.WritingMode.horizontal;if(J.allowVerticalPlacement&&!_i&&L.prevPlacement){var Wi=L.prevPlacement.placedOrientations[Hn.crossTileID];Wi&&(L.placedOrientations[Hn.crossTileID]=Wi,ka=Wi,L.markUsedOrientation(J,ka,Hn))}return ka},ra=function(_i,ka){if(J.allowVerticalPlacement&&Hn.numVerticalGlyphVertices>0&&or.verticalTextBox)for(var Wi=0,Al=J.writingModes;Wi<Al.length&&(Al[Wi]===s.WritingMode.vertical?(fr=ka(),wr=fr):fr=_i(),!(fr&&fr.box&&fr.box.length));Wi+=1);else fr=_i()};if(re.get("text-variable-anchor")){var ji=re.get("text-variable-anchor");if(L.prevPlacement&&L.prevPlacement.variableOffsets[Hn.crossTileID]){var Ki=L.prevPlacement.variableOffsets[Hn.crossTileID];ji.indexOf(Ki.anchor)>0&&(ji=ji.filter(function(_i){return _i!==Ki.anchor})).unshift(Ki.anchor)}var pi=function(_i,ka,Wi){for(var Al=_i.x2-_i.x1,yc=_i.y2-_i.y1,Pu=Hn.textBoxScale,xc=Wt&&!At?ka:null,hl={box:[],offscreen:!1},bc=Et?2*ji.length:ji.length,pl=0;pl<bc;++pl){var Iu=ji[pl%ji.length],zu=pl>=ji.length,Ws=L.attemptAnchorPlacement(Iu,_i,Al,yc,Pu,Dt,Lt,De,ue,lt,zu,Hn,J,Wi,xc);if(Ws&&(hl=Ws.placedGlyphBoxes)&&hl.box&&hl.box.length){Ar=!0,xr=Ws.shift;break}}return hl};ra(function(){return pi(ui,or.iconBox,s.WritingMode.horizontal)},function(){var _i=or.verticalTextBox,ka=fr&&fr.box&&fr.box.length;return J.allowVerticalPlacement&&!ka&&Hn.numVerticalGlyphVertices>0&&_i?pi(_i,or.verticalIconBox,s.WritingMode.vertical):{box:null,offscreen:null}}),fr&&(Ar=fr.box,ar=fr.offscreen);var Gr=ki(fr&&fr.box);if(!Ar&&L.prevPlacement){var xi=L.prevPlacement.variableOffsets[Hn.crossTileID];xi&&(L.variableOffsets[Hn.crossTileID]=xi,L.markUsedJustification(J,xi.anchor,Hn,Gr))}}else{var ri=function(_i,ka){var Wi=L.collisionIndex.placeCollisionBox(_i,Et,De,ue,lt.predicate);return Wi&&Wi.box&&Wi.box.length&&(L.markUsedOrientation(J,ka,Hn),L.placedOrientations[Hn.crossTileID]=ka),Wi};ra(function(){return ri(ui,s.WritingMode.horizontal)},function(){var _i=or.verticalTextBox;return J.allowVerticalPlacement&&Hn.numVerticalGlyphVertices>0&&_i?ri(_i,s.WritingMode.vertical):{box:null,offscreen:null}}),ki(fr&&fr.box&&fr.box.length)}}if(Ar=(vr=fr)&&vr.box&&vr.box.length>0,ar=vr&&vr.offscreen,Hn.useRuntimeCollisionCircles){var Xr=J.text.placedSymbolArray.get(Hn.centerJustifiedTextSymbolIndex),bi=s.evaluateSizeForFeature(J.textSizeData,$e,Xr),Ai=re.get("text-padding"),Ii=Hn.collisionCircleDiameter;Er=L.collisionIndex.placeCollisionCircles(Et,Xr,J.lineVertexArray,J.glyphOffsetArray,bi,ue,xe,Le,q,Lt,lt.predicate,Ii,Ai),Ar=Et||Er.circles.length>0&&!Er.collisionDetected,ar=ar&&Er.offscreen}if(or.iconFeatureIndex&&(qr=or.iconFeatureIndex),or.iconBox){var vs=function(_i){var ka=Wt&&xr?Bn(_i,xr.x,xr.y,Dt,Lt,L.transform.angle):_i;return L.collisionIndex.placeCollisionBox(ka,At,De,ue,lt.predicate)};er=wr&&wr.box&&wr.box.length&&or.verticalIconBox?(Rr=vs(or.verticalIconBox)).box.length>0:(Rr=vs(or.iconBox)).box.length>0,ar=ar&&Rr.offscreen}var ms=ft||Hn.numHorizontalGlyphVertices===0&&Hn.numVerticalGlyphVertices===0,Zr=wt||Hn.numIconVertices===0;if(ms||Zr?Zr?ms||(er=er&&Ar):Ar=er&&Ar:er=Ar=er&&Ar,Ar&&vr&&vr.box&&(wr&&wr.box&&jr?L.collisionIndex.insertCollisionBox(vr.box,re.get("text-ignore-placement"),J.bucketInstanceId,jr,lt.ID):L.collisionIndex.insertCollisionBox(vr.box,re.get("text-ignore-placement"),J.bucketInstanceId,Fr,lt.ID)),er&&Rr&&L.collisionIndex.insertCollisionBox(Rr.box,re.get("icon-ignore-placement"),J.bucketInstanceId,qr,lt.ID),Er&&(Ar&&L.collisionIndex.insertCollisionCircles(Er.circles,re.get("text-ignore-placement"),J.bucketInstanceId,Fr,lt.ID),q)){var Gs=J.bucketInstanceId,Cs=L.collisionCircleArrays[Gs];Cs===void 0&&(Cs=L.collisionCircleArrays[Gs]=new Sn);for(var bo=0;bo<Er.circles.length;bo+=4)Cs.circles.push(Er.circles[bo+0]),Cs.circles.push(Er.circles[bo+1]),Cs.circles.push(Er.circles[bo+2]),Cs.circles.push(Er.collisionDetected?1:0)}L.placements[Hn.crossTileID]=new $t(Ar||jt,er||hn,ar||J.justReloaded),G[Hn.crossTileID]=!0}};if(Ht)for(var An=J.getSortedSymbolIndexes(this.transform.angle),Ln=An.length-1;Ln>=0;--Ln){var jn=An[Ln];vn(J.symbolInstances.get(jn),J.collisionArrays[jn])}else for(var tr=B.symbolInstanceStart;tr<B.symbolInstanceEnd;tr++)vn(J.symbolInstances.get(tr),J.collisionArrays[tr]);if(q&&J.bucketInstanceId in this.collisionCircleArrays){var cr=this.collisionCircleArrays[J.bucketInstanceId];s.invert(cr.invProjMatrix,ue),cr.viewportMatrix=this.collisionIndex.getViewportMatrix()}J.justReloaded=!1},$n.prototype.markUsedJustification=function(B,G,q,L){var V,J={left:q.leftJustifiedTextSymbolIndex,center:q.centerJustifiedTextSymbolIndex,right:q.rightJustifiedTextSymbolIndex};V=L===s.WritingMode.vertical?q.verticalPlacedTextSymbolIndex:J[s.getAnchorJustification(G)];for(var re=0,ue=[q.leftJustifiedTextSymbolIndex,q.centerJustifiedTextSymbolIndex,q.rightJustifiedTextSymbolIndex,q.verticalPlacedTextSymbolIndex];re<ue.length;re+=1){var xe=ue[re];xe>=0&&(B.text.placedSymbolArray.get(xe).crossTileID=V>=0&&xe!==V?0:q.crossTileID)}},$n.prototype.markUsedOrientation=function(B,G,q){for(var L=G===s.WritingMode.horizontal||G===s.WritingMode.horizontalOnly?G:0,V=G===s.WritingMode.vertical?G:0,J=0,re=[q.leftJustifiedTextSymbolIndex,q.centerJustifiedTextSymbolIndex,q.rightJustifiedTextSymbolIndex];J<re.length;J+=1){var ue=re[J];B.text.placedSymbolArray.get(ue).placedOrientation=L}q.verticalPlacedTextSymbolIndex&&(B.text.placedSymbolArray.get(q.verticalPlacedTextSymbolIndex).placedOrientation=V)},$n.prototype.commit=function(B){this.commitTime=B,this.zoomAtLastRecencyCheck=this.transform.zoom;var G=this.prevPlacement,q=!1;this.prevZoomAdjustment=G?G.zoomAdjustment(this.transform.zoom):0;var L=G?G.symbolFadeChange(B):1,V=G?G.opacities:{},J=G?G.variableOffsets:{},re=G?G.placedOrientations:{};for(var ue in this.placements){var xe=this.placements[ue],Le=V[ue];Le?(this.opacities[ue]=new Yt(Le,L,xe.text,xe.icon),q=q||xe.text!==Le.text.placed||xe.icon!==Le.icon.placed):(this.opacities[ue]=new Yt(null,L,xe.text,xe.icon,xe.skipFade),q=q||xe.text||xe.icon)}for(var De in V){var Ue=V[De];if(!this.opacities[De]){var qe=new Yt(Ue,L,!1,!1);qe.isHidden()||(this.opacities[De]=qe,q=q||Ue.text.placed||Ue.icon.placed)}}for(var $e in J)this.variableOffsets[$e]||!this.opacities[$e]||this.opacities[$e].isHidden()||(this.variableOffsets[$e]=J[$e]);for(var lt in re)this.placedOrientations[lt]||!this.opacities[lt]||this.opacities[lt].isHidden()||(this.placedOrientations[lt]=re[lt]);q?this.lastPlacementChangeTime=B:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=G?G.lastPlacementChangeTime:B)},$n.prototype.updateLayerOpacities=function(B,G){for(var q={},L=0,V=G;L<V.length;L+=1){var J=V[L],re=J.getBucket(B);re&&J.latestFeatureIndex&&B.id===re.layerIds[0]&&this.updateBucketOpacities(re,q,J.collisionBoxArray)}},$n.prototype.updateBucketOpacities=function(B,G,q){var L=this;B.hasTextData()&&B.text.opacityVertexArray.clear(),B.hasIconData()&&B.icon.opacityVertexArray.clear(),B.hasIconCollisionBoxData()&&B.iconCollisionBox.collisionVertexArray.clear(),B.hasTextCollisionBoxData()&&B.textCollisionBox.collisionVertexArray.clear();var V=B.layers[0].layout,J=new Yt(null,0,!1,!1,!0),re=V.get("text-allow-overlap"),ue=V.get("icon-allow-overlap"),xe=V.get("text-variable-anchor"),Le=V.get("text-rotation-alignment")==="map",De=V.get("text-pitch-alignment")==="map",Ue=V.get("icon-text-fit")!=="none",qe=new Yt(null,0,re&&(ue||!B.hasIconData()||V.get("icon-optional")),ue&&(re||!B.hasTextData()||V.get("text-optional")),!0);!B.collisionArrays&&q&&(B.hasIconCollisionBoxData()||B.hasTextCollisionBoxData())&&B.deserializeCollisionBoxes(q);for(var $e=function(Et,At,Dt){for(var Lt=0;Lt<At/4;Lt++)Et.opacityVertexArray.emplaceBack(Dt)},lt=function(Et){var At=B.symbolInstances.get(Et),Dt=At.numHorizontalGlyphVertices,Lt=At.numVerticalGlyphVertices,Wt=At.crossTileID,Ht=G[Wt],jt=L.opacities[Wt];Ht?jt=J:jt||(jt=qe,L.opacities[Wt]=jt),G[Wt]=!0;var hn=Dt>0||Lt>0,vn=At.numIconVertices>0,An=L.placedOrientations[At.crossTileID],Ln=An===s.WritingMode.vertical,jn=An===s.WritingMode.horizontal||An===s.WritingMode.horizontalOnly;if(hn){var tr=_n(jt.text),cr=Ln?pn:tr;$e(B.text,Dt,cr);var Hn=jn?pn:tr;$e(B.text,Lt,Hn);var or=jt.text.isHidden();[At.rightJustifiedTextSymbolIndex,At.centerJustifiedTextSymbolIndex,At.leftJustifiedTextSymbolIndex].forEach(function(qr){qr>=0&&(B.text.placedSymbolArray.get(qr).hidden=or||Ln?1:0)}),At.verticalPlacedTextSymbolIndex>=0&&(B.text.placedSymbolArray.get(At.verticalPlacedTextSymbolIndex).hidden=or||jn?1:0);var vr=L.variableOffsets[At.crossTileID];vr&&L.markUsedJustification(B,vr.anchor,At,An);var Ar=L.placedOrientations[At.crossTileID];Ar&&(L.markUsedJustification(B,"left",At,Ar),L.markUsedOrientation(B,Ar,At))}if(vn){var er=_n(jt.icon),ar=!(Ue&&At.verticalPlacedIconSymbolIndex&&Ln);if(At.placedIconSymbolIndex>=0){var xr=ar?er:pn;$e(B.icon,At.numIconVertices,xr),B.icon.placedSymbolArray.get(At.placedIconSymbolIndex).hidden=jt.icon.isHidden()}if(At.verticalPlacedIconSymbolIndex>=0){var fr=ar?pn:er;$e(B.icon,At.numVerticalIconVertices,fr),B.icon.placedSymbolArray.get(At.verticalPlacedIconSymbolIndex).hidden=jt.icon.isHidden()}}if(B.hasIconCollisionBoxData()||B.hasTextCollisionBoxData()){var wr=B.collisionArrays[Et];if(wr){var Er=new s.Point(0,0);if(wr.textBox||wr.verticalTextBox){var Rr=!0;if(xe){var Fr=L.variableOffsets[Wt];Fr?(Er=Nn(Fr.anchor,Fr.width,Fr.height,Fr.textOffset,Fr.textBoxScale),Le&&Er._rotate(De?L.transform.angle:-L.transform.angle)):Rr=!1}wr.textBox&&lr(B.textCollisionBox.collisionVertexArray,jt.text.placed,!Rr||Ln,Er.x,Er.y),wr.verticalTextBox&&lr(B.textCollisionBox.collisionVertexArray,jt.text.placed,!Rr||jn,Er.x,Er.y)}var jr=!!(!jn&&wr.verticalIconBox);wr.iconBox&&lr(B.iconCollisionBox.collisionVertexArray,jt.icon.placed,jr,Ue?Er.x:0,Ue?Er.y:0),wr.verticalIconBox&&lr(B.iconCollisionBox.collisionVertexArray,jt.icon.placed,!jr,Ue?Er.x:0,Ue?Er.y:0)}}},ft=0;ft<B.symbolInstances.length;ft++)lt(ft);if(B.sortFeatures(this.transform.angle),this.retainedQueryData[B.bucketInstanceId]&&(this.retainedQueryData[B.bucketInstanceId].featureSortOrder=B.featureSortOrder),B.hasTextData()&&B.text.opacityVertexBuffer&&B.text.opacityVertexBuffer.updateData(B.text.opacityVertexArray),B.hasIconData()&&B.icon.opacityVertexBuffer&&B.icon.opacityVertexBuffer.updateData(B.icon.opacityVertexArray),B.hasIconCollisionBoxData()&&B.iconCollisionBox.collisionVertexBuffer&&B.iconCollisionBox.collisionVertexBuffer.updateData(B.iconCollisionBox.collisionVertexArray),B.hasTextCollisionBoxData()&&B.textCollisionBox.collisionVertexBuffer&&B.textCollisionBox.collisionVertexBuffer.updateData(B.textCollisionBox.collisionVertexArray),B.bucketInstanceId in this.collisionCircleArrays){var wt=this.collisionCircleArrays[B.bucketInstanceId];B.placementInvProjMatrix=wt.invProjMatrix,B.placementViewportMatrix=wt.viewportMatrix,B.collisionCircleArray=wt.circles,delete this.collisionCircleArrays[B.bucketInstanceId]}},$n.prototype.symbolFadeChange=function(B){return this.fadeDuration===0?1:(B-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},$n.prototype.zoomAdjustment=function(B){return Math.max(0,(this.transform.zoom-B)/1.5)},$n.prototype.hasTransitions=function(B){return this.stale||B-this.lastPlacementChangeTime<this.fadeDuration},$n.prototype.stillRecent=function(B,G){var q=this.zoomAtLastRecencyCheck===G?1-this.zoomAdjustment(G):1;return this.zoomAtLastRecencyCheck=G,this.commitTime+this.fadeDuration*q>B},$n.prototype.setStale=function(){this.stale=!0};var Gt=Math.pow(2,25),gn=Math.pow(2,24),Ct=Math.pow(2,17),Rt=Math.pow(2,16),Zt=Math.pow(2,9),cn=Math.pow(2,8),fn=Math.pow(2,1);function _n(B){if(B.opacity===0&&!B.placed)return 0;if(B.opacity===1&&B.placed)return 4294967295;var G=B.placed?1:0,q=Math.floor(127*B.opacity);return q*Gt+G*gn+q*Ct+G*Rt+q*Zt+G*cn+q*fn+G}var pn=0,sn=function(B){this._sortAcrossTiles=B.layout.get("symbol-z-order")!=="viewport-y"&&B.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};sn.prototype.continuePlacement=function(B,G,q,L,V){for(var J=this._bucketParts;this._currentTileIndex<B.length;){var re=B[this._currentTileIndex];if(G.getBucketParts(J,L,re,this._sortAcrossTiles),this._currentTileIndex++,V())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,J.sort(function(xe,Le){return xe.sortKey-Le.sortKey}));this._currentPartIndex<J.length;){var ue=J[this._currentPartIndex];if(G.placeLayerBucketPart(ue,this._seenCrossTileIDs,q),this._currentPartIndex++,V())return!0}return!1};var Nt=function(B,G,q,L,V,J,re){this.placement=new $n(B,V,J,re),this._currentPlacementIndex=G.length-1,this._forceFullPlacement=q,this._showCollisionBoxes=L,this._done=!1};Nt.prototype.isDone=function(){return this._done},Nt.prototype.continuePlacement=function(B,G,q){for(var L=this,V=s.browser.now(),J=function(){var xe=s.browser.now()-V;return!L._forceFullPlacement&&xe>2};this._currentPlacementIndex>=0;){var re=G[B[this._currentPlacementIndex]],ue=this.placement.collisionIndex.transform.zoom;if(re.type==="symbol"&&(!re.minzoom||re.minzoom<=ue)&&(!re.maxzoom||re.maxzoom>ue)){if(this._inProgressLayer||(this._inProgressLayer=new sn(re)),this._inProgressLayer.continuePlacement(q[re.source],this.placement,this._showCollisionBoxes,re,J))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Nt.prototype.commit=function(B){return this.placement.commit(B),this.placement};var Ft=512/s.EXTENT/2,Qt=function(B,G,q){this.tileID=B,this.indexedSymbolInstances={},this.bucketInstanceId=q;for(var L=0;L<G.length;L++){var V=G.get(L),J=V.key;this.indexedSymbolInstances[J]||(this.indexedSymbolInstances[J]=[]),this.indexedSymbolInstances[J].push({crossTileID:V.crossTileID,coord:this.getScaledCoordinates(V,B)})}};Qt.prototype.getScaledCoordinates=function(B,G){var q=G.canonical.z-this.tileID.canonical.z,L=Ft/Math.pow(2,q);return{x:Math.floor((G.canonical.x*s.EXTENT+B.anchorX)*L),y:Math.floor((G.canonical.y*s.EXTENT+B.anchorY)*L)}},Qt.prototype.findMatches=function(B,G,q){for(var L=this.tileID.canonical.z<G.canonical.z?1:Math.pow(2,this.tileID.canonical.z-G.canonical.z),V=0;V<B.length;V++){var J=B.get(V);if(!J.crossTileID){var re=this.indexedSymbolInstances[J.key];if(re)for(var ue=this.getScaledCoordinates(J,G),xe=0,Le=re;xe<Le.length;xe+=1){var De=Le[xe];if(Math.abs(De.coord.x-ue.x)<=L&&Math.abs(De.coord.y-ue.y)<=L&&!q[De.crossTileID]){q[De.crossTileID]=!0,J.crossTileID=De.crossTileID;break}}}}};var Tn=function(){this.maxCrossTileID=0};Tn.prototype.generate=function(){return++this.maxCrossTileID};var Pn=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Pn.prototype.handleWrapJump=function(B){var G=Math.round((B-this.lng)/360);if(G!==0)for(var q in this.indexes){var L=this.indexes[q],V={};for(var J in L){var re=L[J];re.tileID=re.tileID.unwrapTo(re.tileID.wrap+G),V[re.tileID.key]=re}this.indexes[q]=V}this.lng=B},Pn.prototype.addBucket=function(B,G,q){if(this.indexes[B.overscaledZ]&&this.indexes[B.overscaledZ][B.key]){if(this.indexes[B.overscaledZ][B.key].bucketInstanceId===G.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(B.overscaledZ,this.indexes[B.overscaledZ][B.key])}for(var L=0;L<G.symbolInstances.length;L++)G.symbolInstances.get(L).crossTileID=0;this.usedCrossTileIDs[B.overscaledZ]||(this.usedCrossTileIDs[B.overscaledZ]={});var V=this.usedCrossTileIDs[B.overscaledZ];for(var J in this.indexes){var re=this.indexes[J];if(Number(J)>B.overscaledZ)for(var ue in re){var xe=re[ue];xe.tileID.isChildOf(B)&&xe.findMatches(G.symbolInstances,B,V)}else{var Le=re[B.scaledTo(Number(J)).key];Le&&Le.findMatches(G.symbolInstances,B,V)}}for(var De=0;De<G.symbolInstances.length;De++){var Ue=G.symbolInstances.get(De);Ue.crossTileID||(Ue.crossTileID=q.generate(),V[Ue.crossTileID]=!0)}return this.indexes[B.overscaledZ]===void 0&&(this.indexes[B.overscaledZ]={}),this.indexes[B.overscaledZ][B.key]=new Qt(B,G.symbolInstances,G.bucketInstanceId),!0},Pn.prototype.removeBucketCrossTileIDs=function(B,G){for(var q in G.indexedSymbolInstances)for(var L=0,V=G.indexedSymbolInstances[q];L<V.length;L+=1){var J=V[L];delete this.usedCrossTileIDs[B][J.crossTileID]}},Pn.prototype.removeStaleBuckets=function(B){var G=!1;for(var q in this.indexes){var L=this.indexes[q];for(var V in L)B[L[V].bucketInstanceId]||(this.removeBucketCrossTileIDs(q,L[V]),delete L[V],G=!0)}return G};var On=function(){this.layerIndexes={},this.crossTileIDs=new Tn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};On.prototype.addLayer=function(B,G,q){var L=this.layerIndexes[B.id];L===void 0&&(L=this.layerIndexes[B.id]=new Pn);var V=!1,J={};L.handleWrapJump(q);for(var re=0,ue=G;re<ue.length;re+=1){var xe=ue[re],Le=xe.getBucket(B);Le&&B.id===Le.layerIds[0]&&(Le.bucketInstanceId||(Le.bucketInstanceId=++this.maxBucketInstanceId),L.addBucket(xe.tileID,Le,this.crossTileIDs)&&(V=!0),J[Le.bucketInstanceId]=!0)}return L.removeStaleBuckets(J)&&(V=!0),V},On.prototype.pruneUnusedLayers=function(B){var G={};for(var q in B.forEach(function(L){G[L]=!0}),this.layerIndexes)G[q]||delete this.layerIndexes[q]};var Dn=function(B,G){return s.emitValidationErrors(B,G&&G.filter(function(q){return q.identifier!=="source.canvas"}))},Zn=s.pick(mt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),qn=s.pick(mt,["setCenter","setZoom","setBearing","setPitch"]),Kn=function(){var B={},G=s.styleSpec.$version;for(var q in s.styleSpec.$root){var L=s.styleSpec.$root[q];if(L.required){var V;(V=q==="version"?G:L.type==="array"?[]:{})!=null&&(B[q]=V)}}return B}(),Un=function(B){function G(q,L){var V=this;L===void 0&&(L={}),B.call(this),this.map=q,this.dispatcher=new C(ut(),this),this.imageManager=new h,this.imageManager.setEventedParent(this),this.glyphManager=new m(q._requestManager,L.localIdeographFontFamily),this.lineAtlas=new E(256,512),this.crossTileSymbolIndex=new On,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",s.getReferrer());var J=this;this._rtlTextPluginCallback=G.registerForPluginStateChange(function(re){var ue={pluginStatus:re.pluginStatus,pluginURL:re.pluginURL};J.dispatcher.broadcast("syncRTLPluginState",ue,function(xe,Le){if(s.triggerPluginCompletionEvent(xe),Le&&Le.every(function(Ue){return Ue}))for(var De in J.sourceCaches)J.sourceCaches[De].reload()})}),this.on("data",function(re){if(re.dataType==="source"&&re.sourceDataType==="metadata"){var ue=V.sourceCaches[re.sourceId];if(ue){var xe=ue.getSource();if(xe&&xe.vectorLayerIds)for(var Le in V._layers){var De=V._layers[Le];De.source===xe.id&&V._validateLayer(De)}}}})}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.loadURL=function(q,L){var V=this;L===void 0&&(L={}),this.fire(new s.Event("dataloading",{dataType:"style"}));var J=typeof L.validate=="boolean"?L.validate:!s.isMapboxURL(q);q=this.map._requestManager.normalizeStyleURL(q,L.accessToken);var re=this.map._requestManager.transformRequest(q,s.ResourceType.Style);this._request=s.getJSON(re,function(ue,xe){V._request=null,ue?V.fire(new s.ErrorEvent(ue)):xe&&V._load(xe,J)})},G.prototype.loadJSON=function(q,L){var V=this;L===void 0&&(L={}),this.fire(new s.Event("dataloading",{dataType:"style"})),this._request=s.browser.frame(function(){V._request=null,V._load(q,L.validate!==!1)})},G.prototype.loadEmpty=function(){this.fire(new s.Event("dataloading",{dataType:"style"})),this._load(Kn,!1)},G.prototype._load=function(q,L){if(!L||!Dn(this,s.validateStyle(q))){for(var V in this._loaded=!0,this.stylesheet=q,q.sources)this.addSource(V,q.sources[V],{validate:!1});q.sprite?this._loadSprite(q.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(q.glyphs);var J=xt(this.stylesheet.layers);this._order=J.map(function(Le){return Le.id}),this._layers={},this._serializedLayers={};for(var re=0,ue=J;re<ue.length;re+=1){var xe=ue[re];(xe=s.createStyleLayer(xe)).setEventedParent(this,{layer:{id:xe.id}}),this._layers[xe.id]=xe,this._serializedLayers[xe.id]=xe.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.fire(new s.Event("data",{dataType:"style"})),this.fire(new s.Event("style.load"))}},G.prototype._loadSprite=function(q){var L=this;this._spriteRequest=function(V,J,re){var ue,xe,Le,De=s.browser.devicePixelRatio>1?"@2x":"",Ue=s.getJSON(J.transformRequest(J.normalizeSpriteURL(V,De,".json"),s.ResourceType.SpriteJSON),function(lt,ft){Ue=null,Le||(Le=lt,ue=ft,$e())}),qe=s.getImage(J.transformRequest(J.normalizeSpriteURL(V,De,".png"),s.ResourceType.SpriteImage),function(lt,ft){qe=null,Le||(Le=lt,xe=ft,$e())});function $e(){if(Le)re(Le);else if(ue&&xe){var lt=s.browser.getImageData(xe),ft={};for(var wt in ue){var Et=ue[wt],At=Et.width,Dt=Et.height,Lt=Et.x,Wt=Et.y,Ht=Et.sdf,jt=Et.pixelRatio,hn=Et.stretchX,vn=Et.stretchY,An=Et.content,Ln=new s.RGBAImage({width:At,height:Dt});s.RGBAImage.copy(lt,Ln,{x:Lt,y:Wt},{x:0,y:0},{width:At,height:Dt}),ft[wt]={data:Ln,pixelRatio:jt,sdf:Ht,stretchX:hn,stretchY:vn,content:An}}re(null,ft)}}return{cancel:function(){Ue&&(Ue.cancel(),Ue=null),qe&&(qe.cancel(),qe=null)}}}(q,this.map._requestManager,function(V,J){if(L._spriteRequest=null,V)L.fire(new s.ErrorEvent(V));else if(J)for(var re in J)L.imageManager.addImage(re,J[re]);L.imageManager.setLoaded(!0),L._availableImages=L.imageManager.listImages(),L.dispatcher.broadcast("setImages",L._availableImages),L.fire(new s.Event("data",{dataType:"style"}))})},G.prototype._validateLayer=function(q){var L=this.sourceCaches[q.source];if(L){var V=q.sourceLayer;if(V){var J=L.getSource();(J.type==="geojson"||J.vectorLayerIds&&J.vectorLayerIds.indexOf(V)===-1)&&this.fire(new s.ErrorEvent(new Error('Source layer "'+V+'" does not exist on source "'+J.id+'" as specified by style layer "'+q.id+'"')))}}},G.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var q in this.sourceCaches)if(!this.sourceCaches[q].loaded())return!1;return!!this.imageManager.isLoaded()},G.prototype._serializeLayers=function(q){for(var L=[],V=0,J=q;V<J.length;V+=1){var re=J[V],ue=this._layers[re];ue.type!=="custom"&&L.push(ue.serialize())}return L},G.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var q in this.sourceCaches)if(this.sourceCaches[q].hasTransition())return!0;for(var L in this._layers)if(this._layers[L].hasTransition())return!0;return!1},G.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},G.prototype.update=function(q){if(this._loaded){var L=this._changed;if(this._changed){var V=Object.keys(this._updatedLayers),J=Object.keys(this._removedLayers);for(var re in(V.length||J.length)&&this._updateWorkerLayers(V,J),this._updatedSources){var ue=this._updatedSources[re];ue==="reload"?this._reloadSource(re):ue==="clear"&&this._clearSource(re)}for(var xe in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[xe].updateTransitions(q);this.light.updateTransitions(q),this._resetUpdates()}var Le={};for(var De in this.sourceCaches){var Ue=this.sourceCaches[De];Le[De]=Ue.used,Ue.used=!1}for(var qe=0,$e=this._order;qe<$e.length;qe+=1){var lt=$e[qe],ft=this._layers[lt];ft.recalculate(q,this._availableImages),!ft.isHidden(q.zoom)&&ft.source&&(this.sourceCaches[ft.source].used=!0)}for(var wt in Le){var Et=this.sourceCaches[wt];Le[wt]!==Et.used&&Et.fire(new s.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:wt}))}this.light.recalculate(q),this.z=q.zoom,L&&this.fire(new s.Event("data",{dataType:"style"}))}},G.prototype._updateTilesForChangedImages=function(){var q=Object.keys(this._changedImages);if(q.length){for(var L in this.sourceCaches)this.sourceCaches[L].reloadTilesForDependencies(["icons","patterns"],q);this._changedImages={}}},G.prototype._updateWorkerLayers=function(q,L){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(q),removedIds:L})},G.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},G.prototype.setState=function(q){var L=this;if(this._checkLoaded(),Dn(this,s.validateStyle(q)))return!1;(q=s.clone$1(q)).layers=xt(q.layers);var V=rn(this.serialize(),q).filter(function(re){return!(re.command in qn)});if(V.length===0)return!1;var J=V.filter(function(re){return!(re.command in Zn)});if(J.length>0)throw new Error("Unimplemented: "+J.map(function(re){return re.command}).join(", ")+".");return V.forEach(function(re){re.command!=="setTransition"&&L[re.command].apply(L,re.args)}),this.stylesheet=q,!0},G.prototype.addImage=function(q,L){if(this.getImage(q))return this.fire(new s.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(q,L),this._afterImageUpdated(q)},G.prototype.updateImage=function(q,L){this.imageManager.updateImage(q,L)},G.prototype.getImage=function(q){return this.imageManager.getImage(q)},G.prototype.removeImage=function(q){if(!this.getImage(q))return this.fire(new s.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(q),this._afterImageUpdated(q)},G.prototype._afterImageUpdated=function(q){this._availableImages=this.imageManager.listImages(),this._changedImages[q]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))},G.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},G.prototype.addSource=function(q,L,V){var J=this;if(V===void 0&&(V={}),this._checkLoaded(),this.sourceCaches[q]!==void 0)throw new Error("There is already a source with this ID");if(!L.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(L).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(L.type)>=0&&this._validate(s.validateStyle.source,"sources."+q,L,null,V))){this.map&&this.map._collectResourceTiming&&(L.collectResourceTiming=!0);var re=this.sourceCaches[q]=new ot(q,L,this.dispatcher);re.style=this,re.setEventedParent(this,function(){return{isSourceLoaded:J.loaded(),source:re.serialize(),sourceId:q}}),re.onAdd(this.map),this._changed=!0}},G.prototype.removeSource=function(q){if(this._checkLoaded(),this.sourceCaches[q]===void 0)throw new Error("There is no source with this ID");for(var L in this._layers)if(this._layers[L].source===q)return this.fire(new s.ErrorEvent(new Error('Source "'+q+'" cannot be removed while layer "'+L+'" is using it.')));var V=this.sourceCaches[q];delete this.sourceCaches[q],delete this._updatedSources[q],V.fire(new s.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:q})),V.setEventedParent(null),V.clearTiles(),V.onRemove&&V.onRemove(this.map),this._changed=!0},G.prototype.setGeoJSONSourceData=function(q,L){this._checkLoaded(),this.sourceCaches[q].getSource().setData(L),this._changed=!0},G.prototype.getSource=function(q){return this.sourceCaches[q]&&this.sourceCaches[q].getSource()},G.prototype.addLayer=function(q,L,V){V===void 0&&(V={}),this._checkLoaded();var J=q.id;if(this.getLayer(J))this.fire(new s.ErrorEvent(new Error('Layer with id "'+J+'" already exists on this map')));else{var re;if(q.type==="custom"){if(Dn(this,s.validateCustomStyleLayer(q)))return;re=s.createStyleLayer(q)}else{if(typeof q.source=="object"&&(this.addSource(J,q.source),q=s.clone$1(q),q=s.extend(q,{source:J})),this._validate(s.validateStyle.layer,"layers."+J,q,{arrayIndex:-1},V))return;re=s.createStyleLayer(q),this._validateLayer(re),re.setEventedParent(this,{layer:{id:J}}),this._serializedLayers[re.id]=re.serialize()}var ue=L?this._order.indexOf(L):this._order.length;if(L&&ue===-1)this.fire(new s.ErrorEvent(new Error('Layer with id "'+L+'" does not exist on this map.')));else{if(this._order.splice(ue,0,J),this._layerOrderChanged=!0,this._layers[J]=re,this._removedLayers[J]&&re.source&&re.type!=="custom"){var xe=this._removedLayers[J];delete this._removedLayers[J],xe.type!==re.type?this._updatedSources[re.source]="clear":(this._updatedSources[re.source]="reload",this.sourceCaches[re.source].pause())}this._updateLayer(re),re.onAdd&&re.onAdd(this.map)}}},G.prototype.moveLayer=function(q,L){if(this._checkLoaded(),this._changed=!0,this._layers[q]){if(q!==L){var V=this._order.indexOf(q);this._order.splice(V,1);var J=L?this._order.indexOf(L):this._order.length;L&&J===-1?this.fire(new s.ErrorEvent(new Error('Layer with id "'+L+'" does not exist on this map.'))):(this._order.splice(J,0,q),this._layerOrderChanged=!0)}}else this.fire(new s.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be moved.")))},G.prototype.removeLayer=function(q){this._checkLoaded();var L=this._layers[q];if(L){L.setEventedParent(null);var V=this._order.indexOf(q);this._order.splice(V,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[q]=L,delete this._layers[q],delete this._serializedLayers[q],delete this._updatedLayers[q],delete this._updatedPaintProps[q],L.onRemove&&L.onRemove(this.map)}else this.fire(new s.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be removed.")))},G.prototype.getLayer=function(q){return this._layers[q]},G.prototype.hasLayer=function(q){return q in this._layers},G.prototype.setLayerZoomRange=function(q,L,V){this._checkLoaded();var J=this.getLayer(q);J?J.minzoom===L&&J.maxzoom===V||(L!=null&&(J.minzoom=L),V!=null&&(J.maxzoom=V),this._updateLayer(J)):this.fire(new s.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot have zoom extent.")))},G.prototype.setFilter=function(q,L,V){V===void 0&&(V={}),this._checkLoaded();var J=this.getLayer(q);if(J){if(!s.deepEqual(J.filter,L))return L==null?(J.filter=void 0,void this._updateLayer(J)):void(this._validate(s.validateStyle.filter,"layers."+J.id+".filter",L,null,V)||(J.filter=s.clone$1(L),this._updateLayer(J)))}else this.fire(new s.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be filtered.")))},G.prototype.getFilter=function(q){return s.clone$1(this.getLayer(q).filter)},G.prototype.setLayoutProperty=function(q,L,V,J){J===void 0&&(J={}),this._checkLoaded();var re=this.getLayer(q);re?s.deepEqual(re.getLayoutProperty(L),V)||(re.setLayoutProperty(L,V,J),this._updateLayer(re)):this.fire(new s.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be styled.")))},G.prototype.getLayoutProperty=function(q,L){var V=this.getLayer(q);if(V)return V.getLayoutProperty(L);this.fire(new s.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style.")))},G.prototype.setPaintProperty=function(q,L,V,J){J===void 0&&(J={}),this._checkLoaded();var re=this.getLayer(q);re?s.deepEqual(re.getPaintProperty(L),V)||(re.setPaintProperty(L,V,J)&&this._updateLayer(re),this._changed=!0,this._updatedPaintProps[q]=!0):this.fire(new s.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be styled.")))},G.prototype.getPaintProperty=function(q,L){return this.getLayer(q).getPaintProperty(L)},G.prototype.setFeatureState=function(q,L){this._checkLoaded();var V=q.source,J=q.sourceLayer,re=this.sourceCaches[V];if(re!==void 0){var ue=re.getSource().type;ue==="geojson"&&J?this.fire(new s.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):ue!=="vector"||J?(q.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),re.setFeatureState(J,q.id,L)):this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new s.ErrorEvent(new Error("The source '"+V+"' does not exist in the map's style.")))},G.prototype.removeFeatureState=function(q,L){this._checkLoaded();var V=q.source,J=this.sourceCaches[V];if(J!==void 0){var re=J.getSource().type,ue=re==="vector"?q.sourceLayer:void 0;re!=="vector"||ue?L&&typeof q.id!="string"&&typeof q.id!="number"?this.fire(new s.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):J.removeFeatureState(ue,q.id,L):this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new s.ErrorEvent(new Error("The source '"+V+"' does not exist in the map's style.")))},G.prototype.getFeatureState=function(q){this._checkLoaded();var L=q.source,V=q.sourceLayer,J=this.sourceCaches[L];if(J!==void 0){if(J.getSource().type!=="vector"||V)return q.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),J.getFeatureState(V,q.id);this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new s.ErrorEvent(new Error("The source '"+L+"' does not exist in the map's style.")))},G.prototype.getTransition=function(){return s.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},G.prototype.serialize=function(){return s.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:s.mapObject(this.sourceCaches,function(q){return q.serialize()}),layers:this._serializeLayers(this._order)},function(q){return q!==void 0})},G.prototype._updateLayer=function(q){this._updatedLayers[q.id]=!0,q.source&&!this._updatedSources[q.source]&&this.sourceCaches[q.source].getSource().type!=="raster"&&(this._updatedSources[q.source]="reload",this.sourceCaches[q.source].pause()),this._changed=!0},G.prototype._flattenAndSortRenderedFeatures=function(q){for(var L=this,V=function(An){return L._layers[An].type==="fill-extrusion"},J={},re=[],ue=this._order.length-1;ue>=0;ue--){var xe=this._order[ue];if(V(xe)){J[xe]=ue;for(var Le=0,De=q;Le<De.length;Le+=1){var Ue=De[Le][xe];if(Ue)for(var qe=0,$e=Ue;qe<$e.length;qe+=1){var lt=$e[qe];re.push(lt)}}}}re.sort(function(An,Ln){return Ln.intersectionZ-An.intersectionZ});for(var ft=[],wt=this._order.length-1;wt>=0;wt--){var Et=this._order[wt];if(V(Et))for(var At=re.length-1;At>=0;At--){var Dt=re[At].feature;if(J[Dt.layer.id]<wt)break;ft.push(Dt),re.pop()}else for(var Lt=0,Wt=q;Lt<Wt.length;Lt+=1){var Ht=Wt[Lt][Et];if(Ht)for(var jt=0,hn=Ht;jt<hn.length;jt+=1){var vn=hn[jt];ft.push(vn.feature)}}}return ft},G.prototype.queryRenderedFeatures=function(q,L,V){L&&L.filter&&this._validate(s.validateStyle.filter,"queryRenderedFeatures.filter",L.filter,null,L);var J={};if(L&&L.layers){if(!Array.isArray(L.layers))return this.fire(new s.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var re=0,ue=L.layers;re<ue.length;re+=1){var xe=ue[re],Le=this._layers[xe];if(!Le)return this.fire(new s.ErrorEvent(new Error("The layer '"+xe+"' does not exist in the map's style and cannot be queried for features."))),[];J[Le.source]=!0}}var De=[];for(var Ue in L.availableImages=this._availableImages,this.sourceCaches)L.layers&&!J[Ue]||De.push(K(this.sourceCaches[Ue],this._layers,this._serializedLayers,q,L,V));return this.placement&&De.push(function(qe,$e,lt,ft,wt,Et,At){for(var Dt={},Lt=Et.queryRenderedSymbols(ft),Wt=[],Ht=0,jt=Object.keys(Lt).map(Number);Ht<jt.length;Ht+=1){var hn=jt[Ht];Wt.push(At[hn])}Wt.sort(Q);for(var vn=function(){var cr=Ln[An],Hn=cr.featureIndex.lookupSymbolFeatures(Lt[cr.bucketInstanceId],$e,cr.bucketIndex,cr.sourceLayerIndex,wt.filter,wt.layers,wt.availableImages,qe);for(var or in Hn){var vr=Dt[or]=Dt[or]||[],Ar=Hn[or];Ar.sort(function(fr,wr){var Er=cr.featureSortOrder;if(Er){var Rr=Er.indexOf(fr.featureIndex);return Er.indexOf(wr.featureIndex)-Rr}return wr.featureIndex-fr.featureIndex});for(var er=0,ar=Ar;er<ar.length;er+=1){var xr=ar[er];vr.push(xr)}}},An=0,Ln=Wt;An<Ln.length;An+=1)vn();var jn=function(cr){Dt[cr].forEach(function(Hn){var or=Hn.feature,vr=qe[cr],Ar=lt[vr.source].getFeatureState(or.layer["source-layer"],or.id);or.source=or.layer.source,or.layer["source-layer"]&&(or.sourceLayer=or.layer["source-layer"]),or.state=Ar})};for(var tr in Dt)jn(tr);return Dt}(this._layers,this._serializedLayers,this.sourceCaches,q,L,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(De)},G.prototype.querySourceFeatures=function(q,L){L&&L.filter&&this._validate(s.validateStyle.filter,"querySourceFeatures.filter",L.filter,null,L);var V=this.sourceCaches[q];return V?function(J,re){for(var ue=J.getRenderableIds().map(function($e){return J.getTileByID($e)}),xe=[],Le={},De=0;De<ue.length;De++){var Ue=ue[De],qe=Ue.tileID.canonical.key;Le[qe]||(Le[qe]=!0,Ue.querySourceFeatures(xe,re))}return xe}(V,L):[]},G.prototype.addSourceType=function(q,L,V){return G.getSourceType(q)?V(new Error('A source type called "'+q+'" already exists.')):(G.setSourceType(q,L),L.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:q,url:L.workerSourceURL},V):V(null,null))},G.prototype.getLight=function(){return this.light.getLight()},G.prototype.setLight=function(q,L){L===void 0&&(L={}),this._checkLoaded();var V=this.light.getLight(),J=!1;for(var re in q)if(!s.deepEqual(q[re],V[re])){J=!0;break}if(J){var ue={now:s.browser.now(),transition:s.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(q,L),this.light.updateTransitions(ue)}},G.prototype._validate=function(q,L,V,J,re){return re===void 0&&(re={}),(!re||re.validate!==!1)&&Dn(this,q.call(s.validateStyle,s.extend({key:L,style:this.serialize(),value:V,styleSpec:s.styleSpec},J)))},G.prototype._remove=function(){for(var q in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),s.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[q].setEventedParent(null);for(var L in this.sourceCaches)this.sourceCaches[L].clearTiles(),this.sourceCaches[L].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},G.prototype._clearSource=function(q){this.sourceCaches[q].clearTiles()},G.prototype._reloadSource=function(q){this.sourceCaches[q].resume(),this.sourceCaches[q].reload()},G.prototype._updateSources=function(q){for(var L in this.sourceCaches)this.sourceCaches[L].update(q)},G.prototype._generateCollisionBoxes=function(){for(var q in this.sourceCaches)this._reloadSource(q)},G.prototype._updatePlacement=function(q,L,V,J,re){re===void 0&&(re=!1);for(var ue=!1,xe=!1,Le={},De=0,Ue=this._order;De<Ue.length;De+=1){var qe=Ue[De],$e=this._layers[qe];if($e.type==="symbol"){if(!Le[$e.source]){var lt=this.sourceCaches[$e.source];Le[$e.source]=lt.getRenderableIds(!0).map(function(Lt){return lt.getTileByID(Lt)}).sort(function(Lt,Wt){return Wt.tileID.overscaledZ-Lt.tileID.overscaledZ||(Lt.tileID.isLessThan(Wt.tileID)?-1:1)})}var ft=this.crossTileSymbolIndex.addLayer($e,Le[$e.source],q.center.lng);ue=ue||ft}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((re=re||this._layerOrderChanged||V===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.browser.now(),q.zoom))&&(this.pauseablePlacement=new Nt(q,this._order,re,L,V,J,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Le),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.browser.now()),xe=!0),ue&&this.pauseablePlacement.placement.setStale()),xe||ue)for(var wt=0,Et=this._order;wt<Et.length;wt+=1){var At=Et[wt],Dt=this._layers[At];Dt.type==="symbol"&&this.placement.updateLayerOpacities(Dt,Le[Dt.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.browser.now())},G.prototype._releaseSymbolFadeTiles=function(){for(var q in this.sourceCaches)this.sourceCaches[q].releaseSymbolFadeTiles()},G.prototype.getImages=function(q,L,V){this.imageManager.getImages(L.icons,V),this._updateTilesForChangedImages();var J=this.sourceCaches[L.source];J&&J.setDependencies(L.tileID.key,L.type,L.icons)},G.prototype.getGlyphs=function(q,L,V){this.glyphManager.getGlyphs(L.stacks,V)},G.prototype.getResource=function(q,L,V){return s.makeRequest(L,V)},G}(s.Evented);Un.getSourceType=function(B){return ne[B]},Un.setSourceType=function(B,G){ne[B]=G},Un.registerForPluginStateChange=s.registerForPluginStateChange;var Gn=s.createLayout([{name:"a_pos",type:"Int16",components:2}]),ir=ti(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),mr=ti(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),ur=ti(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Qn=ti(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),pr=ti("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Tr=ti(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Or=ti(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),oi=ti("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),gi=ti("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Di=ti("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),ii=ti(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),yi=ti(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),oa=ti(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Pr=ti(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Ri=ti(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Ma=ti(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Pi=ti(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),uo=ti(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),ko=ti(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Xi=ti(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Ka=ti(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Ja=ti(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Ao=ti(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Sa=ti(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Ra=ti(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Fa=ti(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function ti(B,G){var q=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,L=G.match(/attribute ([\w]+) ([\w]+)/g),V=B.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),J=G.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),re=J?J.concat(V):V,ue={};return{fragmentSource:B=B.replace(q,function(xe,Le,De,Ue,qe){return ue[qe]=!0,Le==="define"?`
#ifndef HAS_UNIFORM_u_`+qe+`
varying `+De+" "+Ue+" "+qe+`;
#else
uniform `+De+" "+Ue+" u_"+qe+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+qe+`
    `+De+" "+Ue+" "+qe+" = u_"+qe+`;
#endif
`}),vertexSource:G=G.replace(q,function(xe,Le,De,Ue,qe){var $e=Ue==="float"?"vec2":"vec4",lt=qe.match(/color/)?"color":$e;return ue[qe]?Le==="define"?`
#ifndef HAS_UNIFORM_u_`+qe+`
uniform lowp float u_`+qe+`_t;
attribute `+De+" "+$e+" a_"+qe+`;
varying `+De+" "+Ue+" "+qe+`;
#else
uniform `+De+" "+Ue+" u_"+qe+`;
#endif
`:lt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+qe+`
    `+qe+" = a_"+qe+`;
#else
    `+De+" "+Ue+" "+qe+" = u_"+qe+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+qe+`
    `+qe+" = unpack_mix_"+lt+"(a_"+qe+", u_"+qe+`_t);
#else
    `+De+" "+Ue+" "+qe+" = u_"+qe+`;
#endif
`:Le==="define"?`
#ifndef HAS_UNIFORM_u_`+qe+`
uniform lowp float u_`+qe+`_t;
attribute `+De+" "+$e+" a_"+qe+`;
#else
uniform `+De+" "+Ue+" u_"+qe+`;
#endif
`:lt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+qe+`
    `+De+" "+Ue+" "+qe+" = a_"+qe+`;
#else
    `+De+" "+Ue+" "+qe+" = u_"+qe+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+qe+`
    `+De+" "+Ue+" "+qe+" = unpack_mix_"+lt+"(a_"+qe+", u_"+qe+`_t);
#else
    `+De+" "+Ue+" "+qe+" = u_"+qe+`;
#endif
`}),staticAttributes:L,staticUniforms:re}}var Fi=Object.freeze({__proto__:null,prelude:ir,background:mr,backgroundPattern:ur,circle:Qn,clippingMask:pr,heatmap:Tr,heatmapTexture:Or,collisionBox:oi,collisionCircle:gi,debug:Di,fill:ii,fillOutline:yi,fillOutlinePattern:oa,fillPattern:Pr,fillExtrusion:Ri,fillExtrusionPattern:Ma,hillshadePrepare:Pi,hillshade:uo,line:ko,lineGradient:Xi,linePattern:Ka,lineSDF:Ja,raster:Ao,symbolIcon:Sa,symbolSDF:Ra,symbolTextAndIcon:Fa}),co=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function $a(B){for(var G=[],q=0;q<B.length;q++)if(B[q]!==null){var L=B[q].split(" ");G.push(L.pop())}return G}co.prototype.bind=function(B,G,q,L,V,J,re,ue){this.context=B;for(var xe=this.boundPaintVertexBuffers.length!==L.length,Le=0;!xe&&Le<L.length;Le++)this.boundPaintVertexBuffers[Le]!==L[Le]&&(xe=!0);var De=!this.vao||this.boundProgram!==G||this.boundLayoutVertexBuffer!==q||xe||this.boundIndexBuffer!==V||this.boundVertexOffset!==J||this.boundDynamicVertexBuffer!==re||this.boundDynamicVertexBuffer2!==ue;!B.extVertexArrayObject||De?this.freshBind(G,q,L,V,J,re,ue):(B.bindVertexArrayOES.set(this.vao),re&&re.bind(),V&&V.dynamicDraw&&V.bind(),ue&&ue.bind())},co.prototype.freshBind=function(B,G,q,L,V,J,re){var ue,xe=B.numAttributes,Le=this.context,De=Le.gl;if(Le.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Le.extVertexArrayObject.createVertexArrayOES(),Le.bindVertexArrayOES.set(this.vao),ue=0,this.boundProgram=B,this.boundLayoutVertexBuffer=G,this.boundPaintVertexBuffers=q,this.boundIndexBuffer=L,this.boundVertexOffset=V,this.boundDynamicVertexBuffer=J,this.boundDynamicVertexBuffer2=re;else{ue=Le.currentNumAttributes||0;for(var Ue=xe;Ue<ue;Ue++)De.disableVertexAttribArray(Ue)}G.enableAttributes(De,B);for(var qe=0,$e=q;qe<$e.length;qe+=1)$e[qe].enableAttributes(De,B);J&&J.enableAttributes(De,B),re&&re.enableAttributes(De,B),G.bind(),G.setVertexAttribPointers(De,B,V);for(var lt=0,ft=q;lt<ft.length;lt+=1){var wt=ft[lt];wt.bind(),wt.setVertexAttribPointers(De,B,V)}J&&(J.bind(),J.setVertexAttribPointers(De,B,V)),L&&L.bind(),re&&(re.bind(),re.setVertexAttribPointers(De,B,V)),Le.currentNumAttributes=xe},co.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Ba=function(B,G,q,L,V,J){var re=B.gl;this.program=re.createProgram();for(var ue=$a(q.staticAttributes),xe=L?L.getBinderAttributes():[],Le=ue.concat(xe),De=q.staticUniforms?$a(q.staticUniforms):[],Ue=L?L.getBinderUniforms():[],qe=[],$e=0,lt=De.concat(Ue);$e<lt.length;$e+=1){var ft=lt[$e];qe.indexOf(ft)<0&&qe.push(ft)}var wt=L?L.defines():[];J&&wt.push("#define OVERDRAW_INSPECTOR;");var Et=wt.concat(ir.fragmentSource,q.fragmentSource).join(`
`),At=wt.concat(ir.vertexSource,q.vertexSource).join(`
`),Dt=re.createShader(re.FRAGMENT_SHADER);if(re.isContextLost())this.failedToCreate=!0;else{re.shaderSource(Dt,Et),re.compileShader(Dt),re.attachShader(this.program,Dt);var Lt=re.createShader(re.VERTEX_SHADER);if(re.isContextLost())this.failedToCreate=!0;else{re.shaderSource(Lt,At),re.compileShader(Lt),re.attachShader(this.program,Lt),this.attributes={};var Wt={};this.numAttributes=Le.length;for(var Ht=0;Ht<this.numAttributes;Ht++)Le[Ht]&&(re.bindAttribLocation(this.program,Ht,Le[Ht]),this.attributes[Le[Ht]]=Ht);re.linkProgram(this.program),re.deleteShader(Lt),re.deleteShader(Dt);for(var jt=0;jt<qe.length;jt++){var hn=qe[jt];if(hn&&!Wt[hn]){var vn=re.getUniformLocation(this.program,hn);vn&&(Wt[hn]=vn)}}this.fixedUniforms=V(B,Wt),this.binderUniforms=L?L.getUniforms(B,Wt):[]}}};function Mo(B,G,q){var L=1/Xn(q,1,G.transform.tileZoom),V=Math.pow(2,q.tileID.overscaledZ),J=q.tileSize*Math.pow(2,G.transform.tileZoom)/V,re=J*(q.tileID.canonical.x+q.tileID.wrap*V),ue=J*q.tileID.canonical.y;return{u_image:0,u_texsize:q.imageAtlasTexture.size,u_scale:[L,B.fromScale,B.toScale],u_fade:B.t,u_pixel_coord_upper:[re>>16,ue>>16],u_pixel_coord_lower:[65535&re,65535&ue]}}Ba.prototype.draw=function(B,G,q,L,V,J,re,ue,xe,Le,De,Ue,qe,$e,lt,ft){var wt,Et=B.gl;if(!this.failedToCreate){for(var At in B.program.set(this.program),B.setDepthMode(q),B.setStencilMode(L),B.setColorMode(V),B.setCullFace(J),this.fixedUniforms)this.fixedUniforms[At].set(re[At]);$e&&$e.setUniforms(B,this.binderUniforms,Ue,{zoom:qe});for(var Dt=(wt={},wt[Et.LINES]=2,wt[Et.TRIANGLES]=3,wt[Et.LINE_STRIP]=1,wt)[G],Lt=0,Wt=De.get();Lt<Wt.length;Lt+=1){var Ht=Wt[Lt],jt=Ht.vaos||(Ht.vaos={});(jt[ue]||(jt[ue]=new co)).bind(B,this,xe,$e?$e.getPaintVertexBuffers():[],Le,Ht.vertexOffset,lt,ft),Et.drawElements(G,Ht.primitiveLength*Dt,Et.UNSIGNED_SHORT,Ht.primitiveOffset*Dt*2)}}};var Qa=function(B,G,q,L){var V=G.style.light,J=V.properties.get("position"),re=[J.x,J.y,J.z],ue=s.create$1();V.properties.get("anchor")==="viewport"&&s.fromRotation(ue,-G.transform.angle),s.transformMat3(re,re,ue);var xe=V.properties.get("color");return{u_matrix:B,u_lightpos:re,u_lightintensity:V.properties.get("intensity"),u_lightcolor:[xe.r,xe.g,xe.b],u_vertical_gradient:+q,u_opacity:L}},So=function(B,G,q,L,V,J,re){return s.extend(Qa(B,G,q,L),Mo(J,G,re),{u_height_factor:-Math.pow(2,V.overscaledZ)/re.tileSize/8})},fo=function(B){return{u_matrix:B}},Eo=function(B,G,q,L){return s.extend(fo(B),Mo(q,G,L))},eo=function(B,G){return{u_matrix:B,u_world:G}},Ks=function(B,G,q,L,V){return s.extend(Eo(B,G,q,L),{u_world:V})},Bs=function(B,G,q,L){var V,J,re=B.transform;if(L.paint.get("circle-pitch-alignment")==="map"){var ue=Xn(q,1,re.zoom);V=!0,J=[ue,ue]}else V=!1,J=re.pixelsToGLUnits;return{u_camera_to_center_distance:re.cameraToCenterDistance,u_scale_with_map:+(L.paint.get("circle-pitch-scale")==="map"),u_matrix:B.translatePosMatrix(G.posMatrix,q,L.paint.get("circle-translate"),L.paint.get("circle-translate-anchor")),u_pitch_with_map:+V,u_device_pixel_ratio:s.browser.devicePixelRatio,u_extrude_scale:J}},Ho=function(B,G,q){var L=Xn(q,1,G.zoom),V=Math.pow(2,G.zoom-q.tileID.overscaledZ),J=q.tileID.overscaleFactor();return{u_matrix:B,u_camera_to_center_distance:G.cameraToCenterDistance,u_pixels_to_tile_units:L,u_extrude_scale:[G.pixelsToGLUnits[0]/(L*V),G.pixelsToGLUnits[1]/(L*V)],u_overscale_factor:J}},al=function(B,G,q){return{u_matrix:B,u_inv_matrix:G,u_camera_to_center_distance:q.cameraToCenterDistance,u_viewport_size:[q.width,q.height]}},ol=function(B,G,q){return q===void 0&&(q=1),{u_matrix:B,u_color:G,u_overlay:0,u_overlay_scale:q}},Go=function(B){return{u_matrix:B}},sl=function(B,G,q,L){return{u_matrix:B,u_extrude_scale:Xn(G,1,q),u_intensity:L}},bl=function(B,G,q,L){var V=s.create();s.ortho(V,0,B.width,B.height,0,0,1);var J=B.context.gl;return{u_matrix:V,u_world:[J.drawingBufferWidth,J.drawingBufferHeight],u_image:q,u_color_ramp:L,u_opacity:G.paint.get("heatmap-opacity")}},_l=function(B,G,q){var L=q.paint.get("hillshade-shadow-color"),V=q.paint.get("hillshade-highlight-color"),J=q.paint.get("hillshade-accent-color"),re=q.paint.get("hillshade-illumination-direction")*(Math.PI/180);q.paint.get("hillshade-illumination-anchor")==="viewport"&&(re-=B.transform.angle);var ue,xe,Le,De=!B.options.moving;return{u_matrix:B.transform.calculatePosMatrix(G.tileID.toUnwrapped(),De),u_image:0,u_latrange:(ue=G.tileID,xe=Math.pow(2,ue.canonical.z),Le=ue.canonical.y,[new s.MercatorCoordinate(0,Le/xe).toLngLat().lat,new s.MercatorCoordinate(0,(Le+1)/xe).toLngLat().lat]),u_light:[q.paint.get("hillshade-exaggeration"),re],u_shadow:L,u_highlight:V,u_accent:J}},Wo=function(B,G){var q=G.stride,L=s.create();return s.ortho(L,0,s.EXTENT,-s.EXTENT,0,0,1),s.translate(L,L,[0,-s.EXTENT,0]),{u_matrix:L,u_image:1,u_dimension:[q,q],u_zoom:B.overscaledZ,u_unpack:G.getUnpackVector()}},to=function(B,G,q){var L=B.transform;return{u_matrix:Na(B,G,q),u_ratio:1/Xn(G,1,L.zoom),u_device_pixel_ratio:s.browser.devicePixelRatio,u_units_to_pixels:[1/L.pixelsToGLUnits[0],1/L.pixelsToGLUnits[1]]}},is=function(B,G,q,L){return s.extend(to(B,G,q),{u_image:0,u_image_height:L})},Yo=function(B,G,q,L){var V=B.transform,J=Xo(G,V);return{u_matrix:Na(B,G,q),u_texsize:G.imageAtlasTexture.size,u_ratio:1/Xn(G,1,V.zoom),u_device_pixel_ratio:s.browser.devicePixelRatio,u_image:0,u_scale:[J,L.fromScale,L.toScale],u_fade:L.t,u_units_to_pixels:[1/V.pixelsToGLUnits[0],1/V.pixelsToGLUnits[1]]}},bs=function(B,G,q,L,V){var J=B.transform,re=B.lineAtlas,ue=Xo(G,J),xe=q.layout.get("line-cap")==="round",Le=re.getDash(L.from,xe),De=re.getDash(L.to,xe),Ue=Le.width*V.fromScale,qe=De.width*V.toScale;return s.extend(to(B,G,q),{u_patternscale_a:[ue/Ue,-Le.height/2],u_patternscale_b:[ue/qe,-De.height/2],u_sdfgamma:re.width/(256*Math.min(Ue,qe)*s.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Le.y,u_tex_y_b:De.y,u_mix:V.t})};function Xo(B,G){return 1/Xn(B,1,G.tileZoom)}function Na(B,G,q){return B.translatePosMatrix(G.tileID.posMatrix,G,q.paint.get("line-translate"),q.paint.get("line-translate-anchor"))}var Js=function(B,G,q,L,V){return{u_matrix:B,u_tl_parent:G,u_scale_parent:q,u_buffer_scale:1,u_fade_t:L.mix,u_opacity:L.opacity*V.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:V.paint.get("raster-brightness-min"),u_brightness_high:V.paint.get("raster-brightness-max"),u_saturation_factor:(re=V.paint.get("raster-saturation"),re>0?1-1/(1.001-re):-re),u_contrast_factor:(J=V.paint.get("raster-contrast"),J>0?1/(1-J):1+J),u_spin_weights:Lo(V.paint.get("raster-hue-rotate"))};var J,re};function Lo(B){B*=Math.PI/180;var G=Math.sin(B),q=Math.cos(B);return[(2*q+1)/3,(-Math.sqrt(3)*G-q+1)/3,(Math.sqrt(3)*G-q+1)/3]}var ho,po=function(B,G,q,L,V,J,re,ue,xe,Le){var De=V.transform;return{u_is_size_zoom_constant:+(B==="constant"||B==="source"),u_is_size_feature_constant:+(B==="constant"||B==="camera"),u_size_t:G?G.uSizeT:0,u_size:G?G.uSize:0,u_camera_to_center_distance:De.cameraToCenterDistance,u_pitch:De.pitch/360*2*Math.PI,u_rotate_symbol:+q,u_aspect_ratio:De.width/De.height,u_fade_change:V.options.fadeDuration?V.symbolFadeChange:1,u_matrix:J,u_label_plane_matrix:re,u_coord_matrix:ue,u_is_text:+xe,u_pitch_with_map:+L,u_texsize:Le,u_texture:0}},Co=function(B,G,q,L,V,J,re,ue,xe,Le,De){var Ue=V.transform;return s.extend(po(B,G,q,L,V,J,re,ue,xe,Le),{u_gamma_scale:L?Math.cos(Ue._pitch)*Ue.cameraToCenterDistance:1,u_device_pixel_ratio:s.browser.devicePixelRatio,u_is_halo:+De})},Ur=function(B,G,q,L,V,J,re,ue,xe,Le){return s.extend(Co(B,G,q,L,V,J,re,ue,!0,xe,!0),{u_texsize_icon:Le,u_texture_icon:1})},as=function(B,G,q){return{u_matrix:B,u_opacity:G,u_color:q}},wl=function(B,G,q,L,V,J){return s.extend(function(re,ue,xe,Le){var De=xe.imageManager.getPattern(re.from.toString()),Ue=xe.imageManager.getPattern(re.to.toString()),qe=xe.imageManager.getPixelSize(),$e=qe.width,lt=qe.height,ft=Math.pow(2,Le.tileID.overscaledZ),wt=Le.tileSize*Math.pow(2,xe.transform.tileZoom)/ft,Et=wt*(Le.tileID.canonical.x+Le.tileID.wrap*ft),At=wt*Le.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:De.tl,u_pattern_br_a:De.br,u_pattern_tl_b:Ue.tl,u_pattern_br_b:Ue.br,u_texsize:[$e,lt],u_mix:ue.t,u_pattern_size_a:De.displaySize,u_pattern_size_b:Ue.displaySize,u_scale_a:ue.fromScale,u_scale_b:ue.toScale,u_tile_units_to_pixels:1/Xn(Le,1,xe.transform.tileZoom),u_pixel_coord_upper:[Et>>16,At>>16],u_pixel_coord_lower:[65535&Et,65535&At]}}(L,J,q,V),{u_matrix:B,u_opacity:G})},Ns={fillExtrusion:function(B,G){return{u_matrix:new s.UniformMatrix4f(B,G.u_matrix),u_lightpos:new s.Uniform3f(B,G.u_lightpos),u_lightintensity:new s.Uniform1f(B,G.u_lightintensity),u_lightcolor:new s.Uniform3f(B,G.u_lightcolor),u_vertical_gradient:new s.Uniform1f(B,G.u_vertical_gradient),u_opacity:new s.Uniform1f(B,G.u_opacity)}},fillExtrusionPattern:function(B,G){return{u_matrix:new s.UniformMatrix4f(B,G.u_matrix),u_lightpos:new s.Uniform3f(B,G.u_lightpos),u_lightintensity:new s.Uniform1f(B,G.u_lightintensity),u_lightcolor:new s.Uniform3f(B,G.u_lightcolor),u_vertical_gradient:new s.Uniform1f(B,G.u_vertical_gradient),u_height_factor:new s.Uniform1f(B,G.u_height_factor),u_image:new s.Uniform1i(B,G.u_image),u_texsize:new s.Uniform2f(B,G.u_texsize),u_pixel_coord_upper:new s.Uniform2f(B,G.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(B,G.u_pixel_coord_lower),u_scale:new s.Uniform3f(B,G.u_scale),u_fade:new s.Uniform1f(B,G.u_fade),u_opacity:new s.Uniform1f(B,G.u_opacity)}},fill:function(B,G){return{u_matrix:new s.UniformMatrix4f(B,G.u_matrix)}},fillPattern:function(B,G){return{u_matrix:new s.UniformMatrix4f(B,G.u_matrix),u_image:new s.Uniform1i(B,G.u_image),u_texsize:new s.Uniform2f(B,G.u_texsize),u_pixel_coord_upper:new s.Uniform2f(B,G.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(B,G.u_pixel_coord_lower),u_scale:new s.Uniform3f(B,G.u_scale),u_fade:new s.Uniform1f(B,G.u_fade)}},fillOutline:function(B,G){return{u_matrix:new s.UniformMatrix4f(B,G.u_matrix),u_world:new s.Uniform2f(B,G.u_world)}},fillOutlinePattern:function(B,G){return{u_matrix:new s.UniformMatrix4f(B,G.u_matrix),u_world:new s.Uniform2f(B,G.u_world),u_image:new s.Uniform1i(B,G.u_image),u_texsize:new s.Uniform2f(B,G.u_texsize),u_pixel_coord_upper:new s.Uniform2f(B,G.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(B,G.u_pixel_coord_lower),u_scale:new s.Uniform3f(B,G.u_scale),u_fade:new s.Uniform1f(B,G.u_fade)}},circle:function(B,G){return{u_camera_to_center_distance:new s.Uniform1f(B,G.u_camera_to_center_distance),u_scale_with_map:new s.Uniform1i(B,G.u_scale_with_map),u_pitch_with_map:new s.Uniform1i(B,G.u_pitch_with_map),u_extrude_scale:new s.Uniform2f(B,G.u_extrude_scale),u_device_pixel_ratio:new s.Uniform1f(B,G.u_device_pixel_ratio),u_matrix:new s.UniformMatrix4f(B,G.u_matrix)}},collisionBox:function(B,G){return{u_matrix:new s.UniformMatrix4f(B,G.u_matrix),u_camera_to_center_distance:new s.Uniform1f(B,G.u_camera_to_center_distance),u_pixels_to_tile_units:new s.Uniform1f(B,G.u_pixels_to_tile_units),u_extrude_scale:new s.Uniform2f(B,G.u_extrude_scale),u_overscale_factor:new s.Uniform1f(B,G.u_overscale_factor)}},collisionCircle:function(B,G){return{u_matrix:new s.UniformMatrix4f(B,G.u_matrix),u_inv_matrix:new s.UniformMatrix4f(B,G.u_inv_matrix),u_camera_to_center_distance:new s.Uniform1f(B,G.u_camera_to_center_distance),u_viewport_size:new s.Uniform2f(B,G.u_viewport_size)}},debug:function(B,G){return{u_color:new s.UniformColor(B,G.u_color),u_matrix:new s.UniformMatrix4f(B,G.u_matrix),u_overlay:new s.Uniform1i(B,G.u_overlay),u_overlay_scale:new s.Uniform1f(B,G.u_overlay_scale)}},clippingMask:function(B,G){return{u_matrix:new s.UniformMatrix4f(B,G.u_matrix)}},heatmap:function(B,G){return{u_extrude_scale:new s.Uniform1f(B,G.u_extrude_scale),u_intensity:new s.Uniform1f(B,G.u_intensity),u_matrix:new s.UniformMatrix4f(B,G.u_matrix)}},heatmapTexture:function(B,G){return{u_matrix:new s.UniformMatrix4f(B,G.u_matrix),u_world:new s.Uniform2f(B,G.u_world),u_image:new s.Uniform1i(B,G.u_image),u_color_ramp:new s.Uniform1i(B,G.u_color_ramp),u_opacity:new s.Uniform1f(B,G.u_opacity)}},hillshade:function(B,G){return{u_matrix:new s.UniformMatrix4f(B,G.u_matrix),u_image:new s.Uniform1i(B,G.u_image),u_latrange:new s.Uniform2f(B,G.u_latrange),u_light:new s.Uniform2f(B,G.u_light),u_shadow:new s.UniformColor(B,G.u_shadow),u_highlight:new s.UniformColor(B,G.u_highlight),u_accent:new s.UniformColor(B,G.u_accent)}},hillshadePrepare:function(B,G){return{u_matrix:new s.UniformMatrix4f(B,G.u_matrix),u_image:new s.Uniform1i(B,G.u_image),u_dimension:new s.Uniform2f(B,G.u_dimension),u_zoom:new s.Uniform1f(B,G.u_zoom),u_unpack:new s.Uniform4f(B,G.u_unpack)}},line:function(B,G){return{u_matrix:new s.UniformMatrix4f(B,G.u_matrix),u_ratio:new s.Uniform1f(B,G.u_ratio),u_device_pixel_ratio:new s.Uniform1f(B,G.u_device_pixel_ratio),u_units_to_pixels:new s.Uniform2f(B,G.u_units_to_pixels)}},lineGradient:function(B,G){return{u_matrix:new s.UniformMatrix4f(B,G.u_matrix),u_ratio:new s.Uniform1f(B,G.u_ratio),u_device_pixel_ratio:new s.Uniform1f(B,G.u_device_pixel_ratio),u_units_to_pixels:new s.Uniform2f(B,G.u_units_to_pixels),u_image:new s.Uniform1i(B,G.u_image),u_image_height:new s.Uniform1f(B,G.u_image_height)}},linePattern:function(B,G){return{u_matrix:new s.UniformMatrix4f(B,G.u_matrix),u_texsize:new s.Uniform2f(B,G.u_texsize),u_ratio:new s.Uniform1f(B,G.u_ratio),u_device_pixel_ratio:new s.Uniform1f(B,G.u_device_pixel_ratio),u_image:new s.Uniform1i(B,G.u_image),u_units_to_pixels:new s.Uniform2f(B,G.u_units_to_pixels),u_scale:new s.Uniform3f(B,G.u_scale),u_fade:new s.Uniform1f(B,G.u_fade)}},lineSDF:function(B,G){return{u_matrix:new s.UniformMatrix4f(B,G.u_matrix),u_ratio:new s.Uniform1f(B,G.u_ratio),u_device_pixel_ratio:new s.Uniform1f(B,G.u_device_pixel_ratio),u_units_to_pixels:new s.Uniform2f(B,G.u_units_to_pixels),u_patternscale_a:new s.Uniform2f(B,G.u_patternscale_a),u_patternscale_b:new s.Uniform2f(B,G.u_patternscale_b),u_sdfgamma:new s.Uniform1f(B,G.u_sdfgamma),u_image:new s.Uniform1i(B,G.u_image),u_tex_y_a:new s.Uniform1f(B,G.u_tex_y_a),u_tex_y_b:new s.Uniform1f(B,G.u_tex_y_b),u_mix:new s.Uniform1f(B,G.u_mix)}},raster:function(B,G){return{u_matrix:new s.UniformMatrix4f(B,G.u_matrix),u_tl_parent:new s.Uniform2f(B,G.u_tl_parent),u_scale_parent:new s.Uniform1f(B,G.u_scale_parent),u_buffer_scale:new s.Uniform1f(B,G.u_buffer_scale),u_fade_t:new s.Uniform1f(B,G.u_fade_t),u_opacity:new s.Uniform1f(B,G.u_opacity),u_image0:new s.Uniform1i(B,G.u_image0),u_image1:new s.Uniform1i(B,G.u_image1),u_brightness_low:new s.Uniform1f(B,G.u_brightness_low),u_brightness_high:new s.Uniform1f(B,G.u_brightness_high),u_saturation_factor:new s.Uniform1f(B,G.u_saturation_factor),u_contrast_factor:new s.Uniform1f(B,G.u_contrast_factor),u_spin_weights:new s.Uniform3f(B,G.u_spin_weights)}},symbolIcon:function(B,G){return{u_is_size_zoom_constant:new s.Uniform1i(B,G.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(B,G.u_is_size_feature_constant),u_size_t:new s.Uniform1f(B,G.u_size_t),u_size:new s.Uniform1f(B,G.u_size),u_camera_to_center_distance:new s.Uniform1f(B,G.u_camera_to_center_distance),u_pitch:new s.Uniform1f(B,G.u_pitch),u_rotate_symbol:new s.Uniform1i(B,G.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(B,G.u_aspect_ratio),u_fade_change:new s.Uniform1f(B,G.u_fade_change),u_matrix:new s.UniformMatrix4f(B,G.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(B,G.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(B,G.u_coord_matrix),u_is_text:new s.Uniform1i(B,G.u_is_text),u_pitch_with_map:new s.Uniform1i(B,G.u_pitch_with_map),u_texsize:new s.Uniform2f(B,G.u_texsize),u_texture:new s.Uniform1i(B,G.u_texture)}},symbolSDF:function(B,G){return{u_is_size_zoom_constant:new s.Uniform1i(B,G.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(B,G.u_is_size_feature_constant),u_size_t:new s.Uniform1f(B,G.u_size_t),u_size:new s.Uniform1f(B,G.u_size),u_camera_to_center_distance:new s.Uniform1f(B,G.u_camera_to_center_distance),u_pitch:new s.Uniform1f(B,G.u_pitch),u_rotate_symbol:new s.Uniform1i(B,G.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(B,G.u_aspect_ratio),u_fade_change:new s.Uniform1f(B,G.u_fade_change),u_matrix:new s.UniformMatrix4f(B,G.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(B,G.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(B,G.u_coord_matrix),u_is_text:new s.Uniform1i(B,G.u_is_text),u_pitch_with_map:new s.Uniform1i(B,G.u_pitch_with_map),u_texsize:new s.Uniform2f(B,G.u_texsize),u_texture:new s.Uniform1i(B,G.u_texture),u_gamma_scale:new s.Uniform1f(B,G.u_gamma_scale),u_device_pixel_ratio:new s.Uniform1f(B,G.u_device_pixel_ratio),u_is_halo:new s.Uniform1i(B,G.u_is_halo)}},symbolTextAndIcon:function(B,G){return{u_is_size_zoom_constant:new s.Uniform1i(B,G.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(B,G.u_is_size_feature_constant),u_size_t:new s.Uniform1f(B,G.u_size_t),u_size:new s.Uniform1f(B,G.u_size),u_camera_to_center_distance:new s.Uniform1f(B,G.u_camera_to_center_distance),u_pitch:new s.Uniform1f(B,G.u_pitch),u_rotate_symbol:new s.Uniform1i(B,G.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(B,G.u_aspect_ratio),u_fade_change:new s.Uniform1f(B,G.u_fade_change),u_matrix:new s.UniformMatrix4f(B,G.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(B,G.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(B,G.u_coord_matrix),u_is_text:new s.Uniform1i(B,G.u_is_text),u_pitch_with_map:new s.Uniform1i(B,G.u_pitch_with_map),u_texsize:new s.Uniform2f(B,G.u_texsize),u_texsize_icon:new s.Uniform2f(B,G.u_texsize_icon),u_texture:new s.Uniform1i(B,G.u_texture),u_texture_icon:new s.Uniform1i(B,G.u_texture_icon),u_gamma_scale:new s.Uniform1f(B,G.u_gamma_scale),u_device_pixel_ratio:new s.Uniform1f(B,G.u_device_pixel_ratio),u_is_halo:new s.Uniform1i(B,G.u_is_halo)}},background:function(B,G){return{u_matrix:new s.UniformMatrix4f(B,G.u_matrix),u_opacity:new s.Uniform1f(B,G.u_opacity),u_color:new s.UniformColor(B,G.u_color)}},backgroundPattern:function(B,G){return{u_matrix:new s.UniformMatrix4f(B,G.u_matrix),u_opacity:new s.Uniform1f(B,G.u_opacity),u_image:new s.Uniform1i(B,G.u_image),u_pattern_tl_a:new s.Uniform2f(B,G.u_pattern_tl_a),u_pattern_br_a:new s.Uniform2f(B,G.u_pattern_br_a),u_pattern_tl_b:new s.Uniform2f(B,G.u_pattern_tl_b),u_pattern_br_b:new s.Uniform2f(B,G.u_pattern_br_b),u_texsize:new s.Uniform2f(B,G.u_texsize),u_mix:new s.Uniform1f(B,G.u_mix),u_pattern_size_a:new s.Uniform2f(B,G.u_pattern_size_a),u_pattern_size_b:new s.Uniform2f(B,G.u_pattern_size_b),u_scale_a:new s.Uniform1f(B,G.u_scale_a),u_scale_b:new s.Uniform1f(B,G.u_scale_b),u_pixel_coord_upper:new s.Uniform2f(B,G.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(B,G.u_pixel_coord_lower),u_tile_units_to_pixels:new s.Uniform1f(B,G.u_tile_units_to_pixels)}}};function os(B,G,q,L,V,J,re){for(var ue=B.context,xe=ue.gl,Le=B.useProgram("collisionBox"),De=[],Ue=0,qe=0,$e=0;$e<L.length;$e++){var lt=L[$e],ft=G.getTile(lt),wt=ft.getBucket(q);if(wt){var Et=lt.posMatrix;V[0]===0&&V[1]===0||(Et=B.translatePosMatrix(lt.posMatrix,ft,V,J));var At=re?wt.textCollisionBox:wt.iconCollisionBox,Dt=wt.collisionCircleArray;if(Dt.length>0){var Lt=s.create(),Wt=Et;s.mul(Lt,wt.placementInvProjMatrix,B.transform.glCoordMatrix),s.mul(Lt,Lt,wt.placementViewportMatrix),De.push({circleArray:Dt,circleOffset:qe,transform:Wt,invTransform:Lt}),qe=Ue+=Dt.length/4}At&&Le.draw(ue,xe.LINES,Pt.disabled,He.disabled,B.colorModeForRenderPass(),Be.disabled,Ho(Et,B.transform,ft),q.id,At.layoutVertexBuffer,At.indexBuffer,At.segments,null,B.transform.zoom,null,null,At.collisionVertexBuffer)}}if(re&&De.length){var Ht=B.useProgram("collisionCircle"),jt=new s.StructArrayLayout2f1f2i16;jt.resize(4*Ue),jt._trim();for(var hn=0,vn=0,An=De;vn<An.length;vn+=1)for(var Ln=An[vn],jn=0;jn<Ln.circleArray.length/4;jn++){var tr=4*jn,cr=Ln.circleArray[tr+0],Hn=Ln.circleArray[tr+1],or=Ln.circleArray[tr+2],vr=Ln.circleArray[tr+3];jt.emplace(hn++,cr,Hn,or,vr,0),jt.emplace(hn++,cr,Hn,or,vr,1),jt.emplace(hn++,cr,Hn,or,vr,2),jt.emplace(hn++,cr,Hn,or,vr,3)}(!ho||ho.length<2*Ue)&&(ho=function(Er){var Rr=2*Er,Fr=new s.StructArrayLayout3ui6;Fr.resize(Rr),Fr._trim();for(var jr=0;jr<Rr;jr++){var qr=6*jr;Fr.uint16[qr+0]=4*jr+0,Fr.uint16[qr+1]=4*jr+1,Fr.uint16[qr+2]=4*jr+2,Fr.uint16[qr+3]=4*jr+2,Fr.uint16[qr+4]=4*jr+3,Fr.uint16[qr+5]=4*jr+0}return Fr}(Ue));for(var Ar=ue.createIndexBuffer(ho,!0),er=ue.createVertexBuffer(jt,s.collisionCircleLayout.members,!0),ar=0,xr=De;ar<xr.length;ar+=1){var fr=xr[ar],wr=al(fr.transform,fr.invTransform,B.transform);Ht.draw(ue,xe.TRIANGLES,Pt.disabled,He.disabled,B.colorModeForRenderPass(),Be.disabled,wr,q.id,er,Ar,s.SegmentVector.simpleSegment(0,2*fr.circleOffset,fr.circleArray.length,fr.circleArray.length/2),null,B.transform.zoom,null,null,null)}er.destroy(),Ar.destroy()}}var ll=s.identity(new Float32Array(16));function Tl(B,G,q,L,V,J){var re=s.getAnchorAlignment(B),ue=-(re.horizontalAlign-.5)*G,xe=-(re.verticalAlign-.5)*q,Le=s.evaluateVariableOffset(B,L);return new s.Point((ue/V+Le[0])*J,(xe/V+Le[1])*J)}function js(B,G,q,L,V,J,re,ue,xe,Le,De){var Ue=B.text.placedSymbolArray,qe=B.text.dynamicLayoutVertexArray,$e=B.icon.dynamicLayoutVertexArray,lt={};qe.clear();for(var ft=0;ft<Ue.length;ft++){var wt=Ue.get(ft),Et=B.allowVerticalPlacement&&!wt.placedOrientation,At=wt.hidden||!wt.crossTileID||Et?null:L[wt.crossTileID];if(At){var Dt=new s.Point(wt.anchorX,wt.anchorY),Lt=Xt(Dt,q?ue:re),Wt=ln(J.cameraToCenterDistance,Lt.signedDistanceFromCamera),Ht=V.evaluateSizeForFeature(B.textSizeData,Le,wt)*Wt/s.ONE_EM;q&&(Ht*=B.tilePixelRatio/xe);for(var jt=At.width,hn=At.height,vn=Tl(At.anchor,jt,hn,At.textOffset,At.textBoxScale,Ht),An=q?Xt(Dt.add(vn),re).point:Lt.point.add(G?vn.rotate(-J.angle):vn),Ln=B.allowVerticalPlacement&&wt.placedOrientation===s.WritingMode.vertical?Math.PI/2:0,jn=0;jn<wt.numGlyphs;jn++)s.addDynamicAttributes(qe,An,Ln);De&&wt.associatedIconIndex>=0&&(lt[wt.associatedIconIndex]={shiftedAnchor:An,angle:Ln})}else Wn(wt.numGlyphs,qe)}if(De){$e.clear();for(var tr=B.icon.placedSymbolArray,cr=0;cr<tr.length;cr++){var Hn=tr.get(cr);if(Hn.hidden)Wn(Hn.numGlyphs,$e);else{var or=lt[cr];if(or)for(var vr=0;vr<Hn.numGlyphs;vr++)s.addDynamicAttributes($e,or.shiftedAnchor,or.angle);else Wn(Hn.numGlyphs,$e)}}B.icon.dynamicLayoutVertexBuffer.updateData($e)}B.text.dynamicLayoutVertexBuffer.updateData(qe)}function kl(B,G,q){return q.iconsInText&&G?"symbolTextAndIcon":B?"symbolSDF":"symbolIcon"}function Oo(B,G,q,L,V,J,re,ue,xe,Le,De,Ue){for(var qe=B.context,$e=qe.gl,lt=B.transform,ft=ue==="map",wt=xe==="map",Et=ft&&q.layout.get("symbol-placement")!=="point",At=ft&&!wt&&!Et,Dt=q.layout.get("symbol-sort-key").constantOr(1)!==void 0,Lt=!1,Wt=B.depthModeForSublayer(0,Pt.ReadOnly),Ht=q.layout.get("text-variable-anchor"),jt=[],hn=0,vn=L;hn<vn.length;hn+=1){var An=vn[hn],Ln=G.getTile(An),jn=Ln.getBucket(q);if(jn){var tr=V?jn.text:jn.icon;if(tr&&tr.segments.get().length){var cr=tr.programConfigurations.get(q.id),Hn=V||jn.sdfIcons,or=V?jn.textSizeData:jn.iconSizeData,vr=wt||lt.pitch!==0,Ar=B.useProgram(kl(Hn,V,jn),cr),er=s.evaluateSizeForZoom(or,lt.zoom),ar=void 0,xr=[0,0],fr=void 0,wr=void 0,Er=null,Rr=void 0;if(V){if(fr=Ln.glyphAtlasTexture,wr=$e.LINEAR,ar=Ln.glyphAtlasTexture.size,jn.iconsInText){xr=Ln.imageAtlasTexture.size,Er=Ln.imageAtlasTexture;var Fr=or.kind==="composite"||or.kind==="camera";Rr=vr||B.options.rotating||B.options.zooming||Fr?$e.LINEAR:$e.NEAREST}}else{var jr=q.layout.get("icon-size").constantOr(0)!==1||jn.iconsNeedLinear;fr=Ln.imageAtlasTexture,wr=Hn||B.options.rotating||B.options.zooming||jr||vr?$e.LINEAR:$e.NEAREST,ar=Ln.imageAtlasTexture.size}var qr=Xn(Ln,1,B.transform.zoom),ui=xn(An.posMatrix,wt,ft,B.transform,qr),ki=on(An.posMatrix,wt,ft,B.transform,qr),ra=Ht&&jn.hasTextData(),ji=q.layout.get("icon-text-fit")!=="none"&&ra&&jn.hasIconData();Et&&tn(jn,An.posMatrix,B,V,ui,ki,wt,Le);var Ki=B.translatePosMatrix(An.posMatrix,Ln,J,re),pi=Et||V&&Ht||ji?ll:ui,Gr=B.translatePosMatrix(ki,Ln,J,re,!0),xi=Hn&&q.paint.get(V?"text-halo-width":"icon-halo-width").constantOr(1)!==0,ri={program:Ar,buffers:tr,uniformValues:Hn?jn.iconsInText?Ur(or.kind,er,At,wt,B,Ki,pi,Gr,ar,xr):Co(or.kind,er,At,wt,B,Ki,pi,Gr,V,ar,!0):po(or.kind,er,At,wt,B,Ki,pi,Gr,V,ar),atlasTexture:fr,atlasTextureIcon:Er,atlasInterpolation:wr,atlasInterpolationIcon:Rr,isSDF:Hn,hasHalo:xi};if(Dt&&jn.canOverlap){Lt=!0;for(var Xr=0,bi=tr.segments.get();Xr<bi.length;Xr+=1){var Ai=bi[Xr];jt.push({segments:new s.SegmentVector([Ai]),sortKey:Ai.sortKey,state:ri})}}else jt.push({segments:tr.segments,sortKey:0,state:ri})}}}Lt&&jt.sort(function(Cs,bo){return Cs.sortKey-bo.sortKey});for(var Ii=0,vs=jt;Ii<vs.length;Ii+=1){var ms=vs[Ii],Zr=ms.state;if(qe.activeTexture.set($e.TEXTURE0),Zr.atlasTexture.bind(Zr.atlasInterpolation,$e.CLAMP_TO_EDGE),Zr.atlasTextureIcon&&(qe.activeTexture.set($e.TEXTURE1),Zr.atlasTextureIcon&&Zr.atlasTextureIcon.bind(Zr.atlasInterpolationIcon,$e.CLAMP_TO_EDGE)),Zr.isSDF){var Gs=Zr.uniformValues;Zr.hasHalo&&(Gs.u_is_halo=1,Zo(Zr.buffers,ms.segments,q,B,Zr.program,Wt,De,Ue,Gs)),Gs.u_is_halo=0}Zo(Zr.buffers,ms.segments,q,B,Zr.program,Wt,De,Ue,Zr.uniformValues)}}function Zo(B,G,q,L,V,J,re,ue,xe){var Le=L.context,De=Le.gl;V.draw(Le,De.TRIANGLES,J,re,ue,Be.disabled,xe,q.id,B.layoutVertexBuffer,B.indexBuffer,G,q.paint,L.transform.zoom,B.programConfigurations.get(q.id),B.dynamicLayoutVertexBuffer,B.opacityVertexBuffer)}function go(B,G,q,L,V,J,re){var ue,xe,Le,De,Ue,qe=B.context.gl,$e=q.paint.get("fill-pattern"),lt=$e&&$e.constantOr(1),ft=q.getCrossfadeParameters();re?(xe=lt&&!q.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ue=qe.LINES):(xe=lt?"fillPattern":"fill",ue=qe.TRIANGLES);for(var wt=0,Et=L;wt<Et.length;wt+=1){var At=Et[wt],Dt=G.getTile(At);if(!lt||Dt.patternsLoaded()){var Lt=Dt.getBucket(q);if(Lt){var Wt=Lt.programConfigurations.get(q.id),Ht=B.useProgram(xe,Wt);lt&&(B.context.activeTexture.set(qe.TEXTURE0),Dt.imageAtlasTexture.bind(qe.LINEAR,qe.CLAMP_TO_EDGE),Wt.updatePaintBuffers(ft));var jt=$e.constantOr(null);if(jt&&Dt.imageAtlas){var hn=Dt.imageAtlas,vn=hn.patternPositions[jt.to.toString()],An=hn.patternPositions[jt.from.toString()];vn&&An&&Wt.setConstantPatternPositions(vn,An)}var Ln=B.translatePosMatrix(At.posMatrix,Dt,q.paint.get("fill-translate"),q.paint.get("fill-translate-anchor"));if(re){De=Lt.indexBuffer2,Ue=Lt.segments2;var jn=[qe.drawingBufferWidth,qe.drawingBufferHeight];Le=xe==="fillOutlinePattern"&&lt?Ks(Ln,B,ft,Dt,jn):eo(Ln,jn)}else De=Lt.indexBuffer,Ue=Lt.segments,Le=lt?Eo(Ln,B,ft,Dt):fo(Ln);Ht.draw(B.context,ue,V,B.stencilModeForClipping(At),J,Be.disabled,Le,q.id,Lt.layoutVertexBuffer,De,Ue,q.paint,B.transform.zoom,Wt)}}}}function ja(B,G,q,L,V,J,re){for(var ue=B.context,xe=ue.gl,Le=q.paint.get("fill-extrusion-pattern"),De=Le.constantOr(1),Ue=q.getCrossfadeParameters(),qe=q.paint.get("fill-extrusion-opacity"),$e=0,lt=L;$e<lt.length;$e+=1){var ft=lt[$e],wt=G.getTile(ft),Et=wt.getBucket(q);if(Et){var At=Et.programConfigurations.get(q.id),Dt=B.useProgram(De?"fillExtrusionPattern":"fillExtrusion",At);De&&(B.context.activeTexture.set(xe.TEXTURE0),wt.imageAtlasTexture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE),At.updatePaintBuffers(Ue));var Lt=Le.constantOr(null);if(Lt&&wt.imageAtlas){var Wt=wt.imageAtlas,Ht=Wt.patternPositions[Lt.to.toString()],jt=Wt.patternPositions[Lt.from.toString()];Ht&&jt&&At.setConstantPatternPositions(Ht,jt)}var hn=B.translatePosMatrix(ft.posMatrix,wt,q.paint.get("fill-extrusion-translate"),q.paint.get("fill-extrusion-translate-anchor")),vn=q.paint.get("fill-extrusion-vertical-gradient"),An=De?So(hn,B,vn,qe,ft,Ue,wt):Qa(hn,B,vn,qe);Dt.draw(ue,ue.gl.TRIANGLES,V,J,re,Be.backCCW,An,q.id,Et.layoutVertexBuffer,Et.indexBuffer,Et.segments,q.paint,B.transform.zoom,At)}}}function ss(B,G,q,L,V,J){var re=B.context,ue=re.gl,xe=G.fbo;if(xe){var Le=B.useProgram("hillshade");re.activeTexture.set(ue.TEXTURE0),ue.bindTexture(ue.TEXTURE_2D,xe.colorAttachment.get());var De=_l(B,G,q);Le.draw(re,ue.TRIANGLES,L,V,J,Be.disabled,De,q.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments)}}function ul(B,G,q,L,V,J){var re=B.context,ue=re.gl,xe=G.dem;if(xe&&xe.data){var Le=xe.dim,De=xe.stride,Ue=xe.getPixels();if(re.activeTexture.set(ue.TEXTURE1),re.pixelStoreUnpackPremultiplyAlpha.set(!1),G.demTexture=G.demTexture||B.getTileTexture(De),G.demTexture){var qe=G.demTexture;qe.update(Ue,{premultiply:!1}),qe.bind(ue.NEAREST,ue.CLAMP_TO_EDGE)}else G.demTexture=new s.Texture(re,Ue,ue.RGBA,{premultiply:!1}),G.demTexture.bind(ue.NEAREST,ue.CLAMP_TO_EDGE);re.activeTexture.set(ue.TEXTURE0);var $e=G.fbo;if(!$e){var lt=new s.Texture(re,{width:Le,height:Le,data:null},ue.RGBA);lt.bind(ue.LINEAR,ue.CLAMP_TO_EDGE),($e=G.fbo=re.createFramebuffer(Le,Le,!0)).colorAttachment.set(lt.texture)}re.bindFramebuffer.set($e.framebuffer),re.viewport.set([0,0,Le,Le]),B.useProgram("hillshadePrepare").draw(re,ue.TRIANGLES,L,V,J,Be.disabled,Wo(G.tileID,xe),q.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments),G.needsHillshadePrepare=!1}}function _s(B,G,q,L,V){var J=L.paint.get("raster-fade-duration");if(J>0){var re=s.browser.now(),ue=(re-B.timeAdded)/J,xe=G?(re-G.timeAdded)/J:-1,Le=q.getSource(),De=V.coveringZoomLevel({tileSize:Le.tileSize,roundZoom:Le.roundZoom}),Ue=!G||Math.abs(G.tileID.overscaledZ-De)>Math.abs(B.tileID.overscaledZ-De),qe=Ue&&B.refreshedUponExpiration?1:s.clamp(Ue?ue:1-xe,0,1);return B.refreshedUponExpiration&&ue>=1&&(B.refreshedUponExpiration=!1),G?{opacity:1,mix:1-qe}:{opacity:qe,mix:0}}return{opacity:1,mix:0}}var Us=new s.Color(1,0,0,1),ba=new s.Color(0,1,0,1),Vs=new s.Color(0,0,1,1),cl=new s.Color(1,0,1,1),ls=new s.Color(0,1,1,1);function Ko(B){var G=B.transform.padding;us(B,B.transform.height-(G.top||0),3,Us),us(B,G.bottom||0,3,ba),Jo(B,G.left||0,3,Vs),Jo(B,B.transform.width-(G.right||0),3,cl);var q=B.transform.centerPoint;(function(L,V,J,re){var ue=20,xe=2;$o(L,V-xe/2,J-ue/2,xe,ue,re),$o(L,V-ue/2,J-xe/2,ue,xe,re)})(B,q.x,B.transform.height-q.y,ls)}function us(B,G,q,L){$o(B,0,G+q/2,B.transform.width,q,L)}function Jo(B,G,q,L){$o(B,G-q/2,0,q,B.transform.height,L)}function $o(B,G,q,L,V,J){var re=B.context,ue=re.gl;ue.enable(ue.SCISSOR_TEST),ue.scissor(G*s.browser.devicePixelRatio,q*s.browser.devicePixelRatio,L*s.browser.devicePixelRatio,V*s.browser.devicePixelRatio),re.clear({color:J}),ue.disable(ue.SCISSOR_TEST)}function ws(B,G,q){var L=B.context,V=L.gl,J=q.posMatrix,re=B.useProgram("debug"),ue=Pt.disabled,xe=He.disabled,Le=B.colorModeForRenderPass(),De="$debug";L.activeTexture.set(V.TEXTURE0),B.emptyTexture.bind(V.LINEAR,V.CLAMP_TO_EDGE),re.draw(L,V.LINE_STRIP,ue,xe,Le,Be.disabled,ol(J,s.Color.red),De,B.debugBuffer,B.tileBorderIndexBuffer,B.debugSegments);var Ue=G.getTileByID(q.key).latestRawTileData,qe=Ue&&Ue.byteLength||0,$e=Math.floor(qe/1024),lt=G.getTile(q).tileSize,ft=512/Math.min(lt,512)*(q.overscaledZ/B.transform.zoom)*.5,wt=q.canonical.toString();q.overscaledZ!==q.canonical.z&&(wt+=" => "+q.overscaledZ),function(Et,At){Et.initDebugOverlayCanvas();var Dt=Et.debugOverlayCanvas,Lt=Et.context.gl,Wt=Et.debugOverlayCanvas.getContext("2d");Wt.clearRect(0,0,Dt.width,Dt.height),Wt.shadowColor="white",Wt.shadowBlur=2,Wt.lineWidth=1.5,Wt.strokeStyle="white",Wt.textBaseline="top",Wt.font="bold 36px Open Sans, sans-serif",Wt.fillText(At,5,5),Wt.strokeText(At,5,5),Et.debugOverlayTexture.update(Dt),Et.debugOverlayTexture.bind(Lt.LINEAR,Lt.CLAMP_TO_EDGE)}(B,wt+" "+$e+"kb"),re.draw(L,V.TRIANGLES,ue,xe,We.alphaBlended,Be.disabled,ol(J,s.Color.transparent,ft),De,B.debugBuffer,B.quadTriangleIndexBuffer,B.debugSegments)}var qs={symbol:function(B,G,q,L,V){if(B.renderPass==="translucent"){var J=He.disabled,re=B.colorModeForRenderPass();q.layout.get("text-variable-anchor")&&function(ue,xe,Le,De,Ue,qe,$e){for(var lt=xe.transform,ft=Ue==="map",wt=qe==="map",Et=0,At=ue;Et<At.length;Et+=1){var Dt=At[Et],Lt=De.getTile(Dt),Wt=Lt.getBucket(Le);if(Wt&&Wt.text&&Wt.text.segments.get().length){var Ht=Wt.textSizeData,jt=s.evaluateSizeForZoom(Ht,lt.zoom),hn=Xn(Lt,1,xe.transform.zoom),vn=xn(Dt.posMatrix,wt,ft,xe.transform,hn),An=Le.layout.get("icon-text-fit")!=="none"&&Wt.hasIconData();if(jt){var Ln=Math.pow(2,lt.zoom-Lt.tileID.overscaledZ);js(Wt,ft,wt,$e,s.symbolSize,lt,vn,Dt.posMatrix,Ln,jt,An)}}}}(L,B,q,G,q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),V),q.paint.get("icon-opacity").constantOr(1)!==0&&Oo(B,G,q,L,!1,q.paint.get("icon-translate"),q.paint.get("icon-translate-anchor"),q.layout.get("icon-rotation-alignment"),q.layout.get("icon-pitch-alignment"),q.layout.get("icon-keep-upright"),J,re),q.paint.get("text-opacity").constantOr(1)!==0&&Oo(B,G,q,L,!0,q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),q.layout.get("text-keep-upright"),J,re),G.map.showCollisionBoxes&&(os(B,G,q,L,q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),!0),os(B,G,q,L,q.paint.get("icon-translate"),q.paint.get("icon-translate-anchor"),!1))}},circle:function(B,G,q,L){if(B.renderPass==="translucent"){var V=q.paint.get("circle-opacity"),J=q.paint.get("circle-stroke-width"),re=q.paint.get("circle-stroke-opacity"),ue=q.layout.get("circle-sort-key").constantOr(1)!==void 0;if(V.constantOr(1)!==0||J.constantOr(1)!==0&&re.constantOr(1)!==0){for(var xe=B.context,Le=xe.gl,De=B.depthModeForSublayer(0,Pt.ReadOnly),Ue=He.disabled,qe=B.colorModeForRenderPass(),$e=[],lt=0;lt<L.length;lt++){var ft=L[lt],wt=G.getTile(ft),Et=wt.getBucket(q);if(Et){var At=Et.programConfigurations.get(q.id),Dt={programConfiguration:At,program:B.useProgram("circle",At),layoutVertexBuffer:Et.layoutVertexBuffer,indexBuffer:Et.indexBuffer,uniformValues:Bs(B,ft,wt,q)};if(ue)for(var Lt=0,Wt=Et.segments.get();Lt<Wt.length;Lt+=1){var Ht=Wt[Lt];$e.push({segments:new s.SegmentVector([Ht]),sortKey:Ht.sortKey,state:Dt})}else $e.push({segments:Et.segments,sortKey:0,state:Dt})}}ue&&$e.sort(function(vr,Ar){return vr.sortKey-Ar.sortKey});for(var jt=0,hn=$e;jt<hn.length;jt+=1){var vn=hn[jt],An=vn.state,Ln=An.programConfiguration,jn=An.program,tr=An.layoutVertexBuffer,cr=An.indexBuffer,Hn=An.uniformValues,or=vn.segments;jn.draw(xe,Le.TRIANGLES,De,Ue,qe,Be.disabled,Hn,q.id,tr,cr,or,q.paint,B.transform.zoom,Ln)}}}},heatmap:function(B,G,q,L){if(q.paint.get("heatmap-opacity")!==0)if(B.renderPass==="offscreen"){var V=B.context,J=V.gl,re=He.disabled,ue=new We([J.ONE,J.ONE],s.Color.transparent,[!0,!0,!0,!0]);(function(ft,wt,Et){var At=ft.gl;ft.activeTexture.set(At.TEXTURE1),ft.viewport.set([0,0,wt.width/4,wt.height/4]);var Dt=Et.heatmapFbo;if(Dt)At.bindTexture(At.TEXTURE_2D,Dt.colorAttachment.get()),ft.bindFramebuffer.set(Dt.framebuffer);else{var Lt=At.createTexture();At.bindTexture(At.TEXTURE_2D,Lt),At.texParameteri(At.TEXTURE_2D,At.TEXTURE_WRAP_S,At.CLAMP_TO_EDGE),At.texParameteri(At.TEXTURE_2D,At.TEXTURE_WRAP_T,At.CLAMP_TO_EDGE),At.texParameteri(At.TEXTURE_2D,At.TEXTURE_MIN_FILTER,At.LINEAR),At.texParameteri(At.TEXTURE_2D,At.TEXTURE_MAG_FILTER,At.LINEAR),Dt=Et.heatmapFbo=ft.createFramebuffer(wt.width/4,wt.height/4,!1),function(Wt,Ht,jt,hn){var vn=Wt.gl,An=Wt.extRenderToTextureHalfFloat?Wt.extTextureHalfFloat.HALF_FLOAT_OES:vn.UNSIGNED_BYTE;vn.texImage2D(vn.TEXTURE_2D,0,vn.RGBA,Ht.width/4,Ht.height/4,0,vn.RGBA,An,null),hn.colorAttachment.set(jt)}(ft,wt,Lt,Dt)}})(V,B,q),V.clear({color:s.Color.transparent});for(var xe=0;xe<L.length;xe++){var Le=L[xe];if(!G.hasRenderableParent(Le)){var De=G.getTile(Le),Ue=De.getBucket(q);if(Ue){var qe=Ue.programConfigurations.get(q.id),$e=B.useProgram("heatmap",qe),lt=B.transform.zoom;$e.draw(V,J.TRIANGLES,Pt.disabled,re,ue,Be.disabled,sl(Le.posMatrix,De,lt,q.paint.get("heatmap-intensity")),q.id,Ue.layoutVertexBuffer,Ue.indexBuffer,Ue.segments,q.paint,B.transform.zoom,qe)}}}V.viewport.set([0,0,B.width,B.height])}else B.renderPass==="translucent"&&(B.context.setColorMode(B.colorModeForRenderPass()),function(ft,wt){var Et=ft.context,At=Et.gl,Dt=wt.heatmapFbo;if(Dt){Et.activeTexture.set(At.TEXTURE0),At.bindTexture(At.TEXTURE_2D,Dt.colorAttachment.get()),Et.activeTexture.set(At.TEXTURE1);var Lt=wt.colorRampTexture;Lt||(Lt=wt.colorRampTexture=new s.Texture(Et,wt.colorRamp,At.RGBA)),Lt.bind(At.LINEAR,At.CLAMP_TO_EDGE),ft.useProgram("heatmapTexture").draw(Et,At.TRIANGLES,Pt.disabled,He.disabled,ft.colorModeForRenderPass(),Be.disabled,bl(ft,wt,0,1),wt.id,ft.viewportBuffer,ft.quadTriangleIndexBuffer,ft.viewportSegments,wt.paint,ft.transform.zoom)}}(B,q))},line:function(B,G,q,L){if(B.renderPass==="translucent"){var V=q.paint.get("line-opacity"),J=q.paint.get("line-width");if(V.constantOr(1)!==0&&J.constantOr(1)!==0)for(var re=B.depthModeForSublayer(0,Pt.ReadOnly),ue=B.colorModeForRenderPass(),xe=q.paint.get("line-dasharray"),Le=q.paint.get("line-pattern"),De=Le.constantOr(1),Ue=q.paint.get("line-gradient"),qe=q.getCrossfadeParameters(),$e=De?"linePattern":xe?"lineSDF":Ue?"lineGradient":"line",lt=B.context,ft=lt.gl,wt=!0,Et=0,At=L;Et<At.length;Et+=1){var Dt=At[Et],Lt=G.getTile(Dt);if(!De||Lt.patternsLoaded()){var Wt=Lt.getBucket(q);if(Wt){var Ht=Wt.programConfigurations.get(q.id),jt=B.context.program.get(),hn=B.useProgram($e,Ht),vn=wt||hn.program!==jt,An=Le.constantOr(null);if(An&&Lt.imageAtlas){var Ln=Lt.imageAtlas,jn=Ln.patternPositions[An.to.toString()],tr=Ln.patternPositions[An.from.toString()];jn&&tr&&Ht.setConstantPatternPositions(jn,tr)}var cr=De?Yo(B,Lt,q,qe):xe?bs(B,Lt,q,xe,qe):Ue?is(B,Lt,q,Wt.lineClipsArray.length):to(B,Lt,q);if(De)lt.activeTexture.set(ft.TEXTURE0),Lt.imageAtlasTexture.bind(ft.LINEAR,ft.CLAMP_TO_EDGE),Ht.updatePaintBuffers(qe);else if(xe&&(vn||B.lineAtlas.dirty))lt.activeTexture.set(ft.TEXTURE0),B.lineAtlas.bind(lt);else if(Ue){var Hn=Wt.gradients[q.id],or=Hn.texture;if(q.gradientVersion!==Hn.version){var vr=256;if(q.stepInterpolant){var Ar=G.getSource().maxzoom,er=Dt.canonical.z===Ar?Math.ceil(1<<B.transform.maxZoom-Dt.canonical.z):1,ar=Wt.maxLineLength/s.EXTENT*1024*er;vr=s.clamp(s.nextPowerOfTwo(ar),256,lt.maxTextureSize)}Hn.gradient=s.renderColorRamp({expression:q.gradientExpression(),evaluationKey:"lineProgress",resolution:vr,image:Hn.gradient||void 0,clips:Wt.lineClipsArray}),Hn.texture?Hn.texture.update(Hn.gradient):Hn.texture=new s.Texture(lt,Hn.gradient,ft.RGBA),Hn.version=q.gradientVersion,or=Hn.texture}lt.activeTexture.set(ft.TEXTURE0),or.bind(q.stepInterpolant?ft.NEAREST:ft.LINEAR,ft.CLAMP_TO_EDGE)}hn.draw(lt,ft.TRIANGLES,re,B.stencilModeForClipping(Dt),ue,Be.disabled,cr,q.id,Wt.layoutVertexBuffer,Wt.indexBuffer,Wt.segments,q.paint,B.transform.zoom,Ht,Wt.layoutVertexBuffer2),wt=!1}}}}},fill:function(B,G,q,L){var V=q.paint.get("fill-color"),J=q.paint.get("fill-opacity");if(J.constantOr(1)!==0){var re=B.colorModeForRenderPass(),ue=q.paint.get("fill-pattern"),xe=B.opaquePassEnabledForLayer()&&!ue.constantOr(1)&&V.constantOr(s.Color.transparent).a===1&&J.constantOr(0)===1?"opaque":"translucent";if(B.renderPass===xe){var Le=B.depthModeForSublayer(1,B.renderPass==="opaque"?Pt.ReadWrite:Pt.ReadOnly);go(B,G,q,L,Le,re,!1)}if(B.renderPass==="translucent"&&q.paint.get("fill-antialias")){var De=B.depthModeForSublayer(q.getPaintProperty("fill-outline-color")?2:0,Pt.ReadOnly);go(B,G,q,L,De,re,!0)}}},"fill-extrusion":function(B,G,q,L){var V=q.paint.get("fill-extrusion-opacity");if(V!==0&&B.renderPass==="translucent"){var J=new Pt(B.context.gl.LEQUAL,Pt.ReadWrite,B.depthRangeFor3D);if(V!==1||q.paint.get("fill-extrusion-pattern").constantOr(1))ja(B,G,q,L,J,He.disabled,We.disabled),ja(B,G,q,L,J,B.stencilModeFor3D(),B.colorModeForRenderPass());else{var re=B.colorModeForRenderPass();ja(B,G,q,L,J,He.disabled,re)}}},hillshade:function(B,G,q,L){if(B.renderPass==="offscreen"||B.renderPass==="translucent"){for(var V=B.context,J=B.depthModeForSublayer(0,Pt.ReadOnly),re=B.colorModeForRenderPass(),ue=B.renderPass==="translucent"?B.stencilConfigForOverlap(L):[{},L],xe=ue[0],Le=0,De=ue[1];Le<De.length;Le+=1){var Ue=De[Le],qe=G.getTile(Ue);qe.needsHillshadePrepare&&B.renderPass==="offscreen"?ul(B,qe,q,J,He.disabled,re):B.renderPass==="translucent"&&ss(B,qe,q,J,xe[Ue.overscaledZ],re)}V.viewport.set([0,0,B.width,B.height])}},raster:function(B,G,q,L){if(B.renderPass==="translucent"&&q.paint.get("raster-opacity")!==0&&L.length)for(var V=B.context,J=V.gl,re=G.getSource(),ue=B.useProgram("raster"),xe=B.colorModeForRenderPass(),Le=re instanceof F?[{},L]:B.stencilConfigForOverlap(L),De=Le[0],Ue=Le[1],qe=Ue[Ue.length-1].overscaledZ,$e=!B.options.moving,lt=0,ft=Ue;lt<ft.length;lt+=1){var wt=ft[lt],Et=B.depthModeForSublayer(wt.overscaledZ-qe,q.paint.get("raster-opacity")===1?Pt.ReadWrite:Pt.ReadOnly,J.LESS),At=G.getTile(wt),Dt=B.transform.calculatePosMatrix(wt.toUnwrapped(),$e);At.registerFadeDuration(q.paint.get("raster-fade-duration"));var Lt=G.findLoadedParent(wt,0),Wt=_s(At,Lt,G,q,B.transform),Ht=void 0,jt=void 0,hn=q.paint.get("raster-resampling")==="nearest"?J.NEAREST:J.LINEAR;V.activeTexture.set(J.TEXTURE0),At.texture.bind(hn,J.CLAMP_TO_EDGE,J.LINEAR_MIPMAP_NEAREST),V.activeTexture.set(J.TEXTURE1),Lt?(Lt.texture.bind(hn,J.CLAMP_TO_EDGE,J.LINEAR_MIPMAP_NEAREST),Ht=Math.pow(2,Lt.tileID.overscaledZ-At.tileID.overscaledZ),jt=[At.tileID.canonical.x*Ht%1,At.tileID.canonical.y*Ht%1]):At.texture.bind(hn,J.CLAMP_TO_EDGE,J.LINEAR_MIPMAP_NEAREST);var vn=Js(Dt,jt||[0,0],Ht||1,Wt,q);re instanceof F?ue.draw(V,J.TRIANGLES,Et,He.disabled,xe,Be.disabled,vn,q.id,re.boundsBuffer,B.quadTriangleIndexBuffer,re.boundsSegments):ue.draw(V,J.TRIANGLES,Et,De[wt.overscaledZ],xe,Be.disabled,vn,q.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments)}},background:function(B,G,q){var L=q.paint.get("background-color"),V=q.paint.get("background-opacity");if(V!==0){var J=B.context,re=J.gl,ue=B.transform,xe=ue.tileSize,Le=q.paint.get("background-pattern");if(!B.isPatternMissing(Le)){var De=!Le&&L.a===1&&V===1&&B.opaquePassEnabledForLayer()?"opaque":"translucent";if(B.renderPass===De){var Ue=He.disabled,qe=B.depthModeForSublayer(0,De==="opaque"?Pt.ReadWrite:Pt.ReadOnly),$e=B.colorModeForRenderPass(),lt=B.useProgram(Le?"backgroundPattern":"background"),ft=ue.coveringTiles({tileSize:xe});Le&&(J.activeTexture.set(re.TEXTURE0),B.imageManager.bind(B.context));for(var wt=q.getCrossfadeParameters(),Et=0,At=ft;Et<At.length;Et+=1){var Dt=At[Et],Lt=B.transform.calculatePosMatrix(Dt.toUnwrapped()),Wt=Le?wl(Lt,V,B,Le,{tileID:Dt,tileSize:xe},wt):as(Lt,V,L);lt.draw(J,re.TRIANGLES,qe,Ue,$e,Be.disabled,Wt,q.id,B.tileExtentBuffer,B.quadTriangleIndexBuffer,B.tileExtentSegments)}}}}},debug:function(B,G,q){for(var L=0;L<q.length;L++)ws(B,G,q[L])},custom:function(B,G,q){var L=B.context,V=q.implementation;if(B.renderPass==="offscreen"){var J=V.prerender;J&&(B.setCustomLayerDefaults(),L.setColorMode(B.colorModeForRenderPass()),J.call(V,L.gl,B.transform.customLayerMatrix()),L.setDirty(),B.setBaseState())}else if(B.renderPass==="translucent"){B.setCustomLayerDefaults(),L.setColorMode(B.colorModeForRenderPass()),L.setStencilMode(He.disabled);var re=V.renderingMode==="3d"?new Pt(B.context.gl.LEQUAL,Pt.ReadWrite,B.depthRangeFor3D):B.depthModeForSublayer(0,Pt.ReadOnly);L.setDepthMode(re),V.render(L.gl,B.transform.customLayerMatrix()),L.setDirty(),B.setBaseState(),L.bindFramebuffer.set(null)}}},$r=function(B,G){this.context=new Ge(B),this.transform=G,this._tileTextures={},this.setup(),this.numSublayers=ot.maxUnderzooming+ot.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new On,this.gpuTimers={}};$r.prototype.resize=function(B,G){if(this.width=B*s.browser.devicePixelRatio,this.height=G*s.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var q=0,L=this.style._order;q<L.length;q+=1){var V=L[q];this.style._layers[V].resize()}},$r.prototype.setup=function(){var B=this.context,G=new s.StructArrayLayout2i4;G.emplaceBack(0,0),G.emplaceBack(s.EXTENT,0),G.emplaceBack(0,s.EXTENT),G.emplaceBack(s.EXTENT,s.EXTENT),this.tileExtentBuffer=B.createVertexBuffer(G,Gn.members),this.tileExtentSegments=s.SegmentVector.simpleSegment(0,0,4,2);var q=new s.StructArrayLayout2i4;q.emplaceBack(0,0),q.emplaceBack(s.EXTENT,0),q.emplaceBack(0,s.EXTENT),q.emplaceBack(s.EXTENT,s.EXTENT),this.debugBuffer=B.createVertexBuffer(q,Gn.members),this.debugSegments=s.SegmentVector.simpleSegment(0,0,4,5);var L=new s.StructArrayLayout4i8;L.emplaceBack(0,0,0,0),L.emplaceBack(s.EXTENT,0,s.EXTENT,0),L.emplaceBack(0,s.EXTENT,0,s.EXTENT),L.emplaceBack(s.EXTENT,s.EXTENT,s.EXTENT,s.EXTENT),this.rasterBoundsBuffer=B.createVertexBuffer(L,W.members),this.rasterBoundsSegments=s.SegmentVector.simpleSegment(0,0,4,2);var V=new s.StructArrayLayout2i4;V.emplaceBack(0,0),V.emplaceBack(1,0),V.emplaceBack(0,1),V.emplaceBack(1,1),this.viewportBuffer=B.createVertexBuffer(V,Gn.members),this.viewportSegments=s.SegmentVector.simpleSegment(0,0,4,2);var J=new s.StructArrayLayout1ui2;J.emplaceBack(0),J.emplaceBack(1),J.emplaceBack(3),J.emplaceBack(2),J.emplaceBack(0),this.tileBorderIndexBuffer=B.createIndexBuffer(J);var re=new s.StructArrayLayout3ui6;re.emplaceBack(0,1,2),re.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=B.createIndexBuffer(re),this.emptyTexture=new s.Texture(B,{width:1,height:1,data:new Uint8Array([0,0,0,0])},B.gl.RGBA);var ue=this.context.gl;this.stencilClearMode=new He({func:ue.ALWAYS,mask:0},0,255,ue.ZERO,ue.ZERO,ue.ZERO)},$r.prototype.clearStencil=function(){var B=this.context,G=B.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var q=s.create();s.ortho(q,0,this.width,this.height,0,0,1),s.scale(q,q,[G.drawingBufferWidth,G.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(B,G.TRIANGLES,Pt.disabled,this.stencilClearMode,We.disabled,Be.disabled,Go(q),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},$r.prototype._renderTileClippingMasks=function(B,G){if(this.currentStencilSource!==B.source&&B.isTileClipped()&&G&&G.length){this.currentStencilSource=B.source;var q=this.context,L=q.gl;this.nextStencilID+G.length>256&&this.clearStencil(),q.setColorMode(We.disabled),q.setDepthMode(Pt.disabled);var V=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var J=0,re=G;J<re.length;J+=1){var ue=re[J],xe=this._tileClippingMaskIDs[ue.key]=this.nextStencilID++;V.draw(q,L.TRIANGLES,Pt.disabled,new He({func:L.ALWAYS,mask:0},xe,255,L.KEEP,L.KEEP,L.REPLACE),We.disabled,Be.disabled,Go(ue.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},$r.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var B=this.nextStencilID++,G=this.context.gl;return new He({func:G.NOTEQUAL,mask:255},B,255,G.KEEP,G.KEEP,G.REPLACE)},$r.prototype.stencilModeForClipping=function(B){var G=this.context.gl;return new He({func:G.EQUAL,mask:255},this._tileClippingMaskIDs[B.key],0,G.KEEP,G.KEEP,G.REPLACE)},$r.prototype.stencilConfigForOverlap=function(B){var G,q=this.context.gl,L=B.sort(function(xe,Le){return Le.overscaledZ-xe.overscaledZ}),V=L[L.length-1].overscaledZ,J=L[0].overscaledZ-V+1;if(J>1){this.currentStencilSource=void 0,this.nextStencilID+J>256&&this.clearStencil();for(var re={},ue=0;ue<J;ue++)re[ue+V]=new He({func:q.GEQUAL,mask:255},ue+this.nextStencilID,255,q.KEEP,q.KEEP,q.REPLACE);return this.nextStencilID+=J,[re,L]}return[(G={},G[V]=He.disabled,G),L]},$r.prototype.colorModeForRenderPass=function(){var B=this.context.gl;if(this._showOverdrawInspector){var G=.125;return new We([B.CONSTANT_COLOR,B.ONE],new s.Color(G,G,G,0),[!0,!0,!0,!0])}return this.renderPass==="opaque"?We.unblended:We.alphaBlended},$r.prototype.depthModeForSublayer=function(B,G,q){if(!this.opaquePassEnabledForLayer())return Pt.disabled;var L=1-((1+this.currentLayer)*this.numSublayers+B)*this.depthEpsilon;return new Pt(q||this.context.gl.LEQUAL,G,[L,L])},$r.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},$r.prototype.render=function(B,G){var q=this;this.style=B,this.options=G,this.lineAtlas=B.lineAtlas,this.imageManager=B.imageManager,this.glyphManager=B.glyphManager,this.symbolFadeChange=B.placement.symbolFadeChange(s.browser.now()),this.imageManager.beginFrame();var L=this.style._order,V=this.style.sourceCaches;for(var J in V){var re=V[J];re.used&&re.prepare(this.context)}var ue,xe,Le={},De={},Ue={};for(var qe in V){var $e=V[qe];Le[qe]=$e.getVisibleCoordinates(),De[qe]=Le[qe].slice().reverse(),Ue[qe]=$e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var lt=0;lt<L.length;lt++){var ft=L[lt];if(this.style._layers[ft].is3D()){this.opaquePassCutoff=lt;break}}this.renderPass="offscreen";for(var wt=0,Et=L;wt<Et.length;wt+=1){var At=Et[wt],Dt=this.style._layers[At];if(Dt.hasOffscreenPass()&&!Dt.isHidden(this.transform.zoom)){var Lt=De[Dt.source];(Dt.type==="custom"||Lt.length)&&this.renderLayer(this,V[Dt.source],Dt,Lt)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:G.showOverdrawInspector?s.Color.black:s.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=G.showOverdrawInspector,this.depthRangeFor3D=[0,1-(B._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=L.length-1;this.currentLayer>=0;this.currentLayer--){var Wt=this.style._layers[L[this.currentLayer]],Ht=V[Wt.source],jt=Le[Wt.source];this._renderTileClippingMasks(Wt,jt),this.renderLayer(this,Ht,Wt,jt)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<L.length;this.currentLayer++){var hn=this.style._layers[L[this.currentLayer]],vn=V[hn.source],An=(hn.type==="symbol"?Ue:De)[hn.source];this._renderTileClippingMasks(hn,Le[hn.source]),this.renderLayer(this,vn,hn,An)}this.options.showTileBoundaries&&(s.values(this.style._layers).forEach(function(Ln){Ln.source&&!Ln.isHidden(q.transform.zoom)&&(Ln.source!==(xe&&xe.id)&&(xe=q.style.sourceCaches[Ln.source]),(!ue||ue.getSource().maxzoom<xe.getSource().maxzoom)&&(ue=xe))}),ue&&qs.debug(this,ue,ue.getVisibleCoordinates())),this.options.showPadding&&Ko(this),this.context.setDefault()},$r.prototype.renderLayer=function(B,G,q,L){q.isHidden(this.transform.zoom)||(q.type==="background"||q.type==="custom"||L.length)&&(this.id=q.id,this.gpuTimingStart(q),qs[q.type](B,G,q,L,this.style.placement.variableOffsets),this.gpuTimingEnd())},$r.prototype.gpuTimingStart=function(B){if(this.options.gpuTiming){var G=this.context.extTimerQuery,q=this.gpuTimers[B.id];q||(q=this.gpuTimers[B.id]={calls:0,cpuTime:0,query:G.createQueryEXT()}),q.calls++,G.beginQueryEXT(G.TIME_ELAPSED_EXT,q.query)}},$r.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var B=this.context.extTimerQuery;B.endQueryEXT(B.TIME_ELAPSED_EXT)}},$r.prototype.collectGpuTimers=function(){var B=this.gpuTimers;return this.gpuTimers={},B},$r.prototype.queryGpuTimers=function(B){var G={};for(var q in B){var L=B[q],V=this.context.extTimerQuery,J=V.getQueryObjectEXT(L.query,V.QUERY_RESULT_EXT)/1e6;V.deleteQueryEXT(L.query),G[q]=J}return G},$r.prototype.translatePosMatrix=function(B,G,q,L,V){if(!q[0]&&!q[1])return B;var J=V?L==="map"?this.transform.angle:0:L==="viewport"?-this.transform.angle:0;if(J){var re=Math.sin(J),ue=Math.cos(J);q=[q[0]*ue-q[1]*re,q[0]*re+q[1]*ue]}var xe=[V?q[0]:Xn(G,q[0],this.transform.zoom),V?q[1]:Xn(G,q[1],this.transform.zoom),0],Le=new Float32Array(16);return s.translate(Le,B,xe),Le},$r.prototype.saveTileTexture=function(B){var G=this._tileTextures[B.size[0]];G?G.push(B):this._tileTextures[B.size[0]]=[B]},$r.prototype.getTileTexture=function(B){var G=this._tileTextures[B];return G&&G.length>0?G.pop():null},$r.prototype.isPatternMissing=function(B){if(!B)return!1;if(!B.from||!B.to)return!0;var G=this.imageManager.getPattern(B.from.toString()),q=this.imageManager.getPattern(B.to.toString());return!G||!q},$r.prototype.useProgram=function(B,G){this.cache=this.cache||{};var q=""+B+(G?G.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[q]||(this.cache[q]=new Ba(this.context,B,Fi[B],G,Ns[B],this._showOverdrawInspector)),this.cache[q]},$r.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},$r.prototype.setBaseState=function(){var B=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(B.FUNC_ADD)},$r.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=s.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var B=this.context.gl;this.debugOverlayTexture=new s.Texture(this.context,this.debugOverlayCanvas,B.RGBA)}},$r.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Po=function(B,G){this.points=B,this.planes=G};Po.fromInvProjectionMatrix=function(B,G,q){var L=Math.pow(2,q),V=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(re){return s.transformMat4([],re,B)}).map(function(re){return s.scale$1([],re,1/re[3]/G*L)}),J=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(re){var ue=s.sub([],V[re[0]],V[re[1]]),xe=s.sub([],V[re[2]],V[re[1]]),Le=s.normalize([],s.cross([],ue,xe)),De=-s.dot(Le,V[re[1]]);return Le.concat(De)});return new Po(V,J)};var Zi=function(B,G){this.min=B,this.max=G,this.center=s.scale$2([],s.add([],this.min,this.max),.5)};Zi.prototype.quadrant=function(B){for(var G=[B%2==0,B<2],q=s.clone$2(this.min),L=s.clone$2(this.max),V=0;V<G.length;V++)q[V]=G[V]?this.min[V]:this.center[V],L[V]=G[V]?this.center[V]:this.max[V];return L[2]=this.max[2],new Zi(q,L)},Zi.prototype.distanceX=function(B){return Math.max(Math.min(this.max[0],B[0]),this.min[0])-B[0]},Zi.prototype.distanceY=function(B){return Math.max(Math.min(this.max[1],B[1]),this.min[1])-B[1]},Zi.prototype.intersects=function(B){for(var G=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],q=!0,L=0;L<B.planes.length;L++){for(var V=B.planes[L],J=0,re=0;re<G.length;re++)J+=s.dot$1(V,G[re])>=0;if(J===0)return 0;J!==G.length&&(q=!1)}if(q)return 2;for(var ue=0;ue<3;ue++){for(var xe=Number.MAX_VALUE,Le=-Number.MAX_VALUE,De=0;De<B.points.length;De++){var Ue=B.points[De][ue]-this.min[ue];xe=Math.min(xe,Ue),Le=Math.max(Le,Ue)}if(Le<0||xe>this.max[ue]-this.min[ue])return 0}return 1};var Ua=function(B,G,q,L){if(B===void 0&&(B=0),G===void 0&&(G=0),q===void 0&&(q=0),L===void 0&&(L=0),isNaN(B)||B<0||isNaN(G)||G<0||isNaN(q)||q<0||isNaN(L)||L<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=B,this.bottom=G,this.left=q,this.right=L};Ua.prototype.interpolate=function(B,G,q){return G.top!=null&&B.top!=null&&(this.top=s.number(B.top,G.top,q)),G.bottom!=null&&B.bottom!=null&&(this.bottom=s.number(B.bottom,G.bottom,q)),G.left!=null&&B.left!=null&&(this.left=s.number(B.left,G.left,q)),G.right!=null&&B.right!=null&&(this.right=s.number(B.right,G.right,q)),this},Ua.prototype.getCenter=function(B,G){var q=s.clamp((this.left+B-this.right)/2,0,B),L=s.clamp((this.top+G-this.bottom)/2,0,G);return new s.Point(q,L)},Ua.prototype.equals=function(B){return this.top===B.top&&this.bottom===B.bottom&&this.left===B.left&&this.right===B.right},Ua.prototype.clone=function(){return new Ua(this.top,this.bottom,this.left,this.right)},Ua.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Wr=function(B,G,q,L,V){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=V===void 0||V,this._minZoom=B||0,this._maxZoom=G||22,this._minPitch=q??0,this._maxPitch=L??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new s.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ua,this._posMatrixCache={},this._alignedPosMatrixCache={}},Jr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Wr.prototype.clone=function(){var B=new Wr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return B.tileSize=this.tileSize,B.latRange=this.latRange,B.width=this.width,B.height=this.height,B._center=this._center,B.zoom=this.zoom,B.angle=this.angle,B._fov=this._fov,B._pitch=this._pitch,B._unmodified=this._unmodified,B._edgeInsets=this._edgeInsets.clone(),B._calcMatrices(),B},Jr.minZoom.get=function(){return this._minZoom},Jr.minZoom.set=function(B){this._minZoom!==B&&(this._minZoom=B,this.zoom=Math.max(this.zoom,B))},Jr.maxZoom.get=function(){return this._maxZoom},Jr.maxZoom.set=function(B){this._maxZoom!==B&&(this._maxZoom=B,this.zoom=Math.min(this.zoom,B))},Jr.minPitch.get=function(){return this._minPitch},Jr.minPitch.set=function(B){this._minPitch!==B&&(this._minPitch=B,this.pitch=Math.max(this.pitch,B))},Jr.maxPitch.get=function(){return this._maxPitch},Jr.maxPitch.set=function(B){this._maxPitch!==B&&(this._maxPitch=B,this.pitch=Math.min(this.pitch,B))},Jr.renderWorldCopies.get=function(){return this._renderWorldCopies},Jr.renderWorldCopies.set=function(B){B===void 0?B=!0:B===null&&(B=!1),this._renderWorldCopies=B},Jr.worldSize.get=function(){return this.tileSize*this.scale},Jr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Jr.size.get=function(){return new s.Point(this.width,this.height)},Jr.bearing.get=function(){return-this.angle/Math.PI*180},Jr.bearing.set=function(B){var G=-s.wrap(B,-180,180)*Math.PI/180;this.angle!==G&&(this._unmodified=!1,this.angle=G,this._calcMatrices(),this.rotationMatrix=s.create$2(),s.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Jr.pitch.get=function(){return this._pitch/Math.PI*180},Jr.pitch.set=function(B){var G=s.clamp(B,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==G&&(this._unmodified=!1,this._pitch=G,this._calcMatrices())},Jr.fov.get=function(){return this._fov/Math.PI*180},Jr.fov.set=function(B){B=Math.max(.01,Math.min(60,B)),this._fov!==B&&(this._unmodified=!1,this._fov=B/180*Math.PI,this._calcMatrices())},Jr.zoom.get=function(){return this._zoom},Jr.zoom.set=function(B){var G=Math.min(Math.max(B,this.minZoom),this.maxZoom);this._zoom!==G&&(this._unmodified=!1,this._zoom=G,this.scale=this.zoomScale(G),this.tileZoom=Math.floor(G),this.zoomFraction=G-this.tileZoom,this._constrain(),this._calcMatrices())},Jr.center.get=function(){return this._center},Jr.center.set=function(B){B.lat===this._center.lat&&B.lng===this._center.lng||(this._unmodified=!1,this._center=B,this._constrain(),this._calcMatrices())},Jr.padding.get=function(){return this._edgeInsets.toJSON()},Jr.padding.set=function(B){this._edgeInsets.equals(B)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,B,1),this._calcMatrices())},Jr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Wr.prototype.isPaddingEqual=function(B){return this._edgeInsets.equals(B)},Wr.prototype.interpolatePadding=function(B,G,q){this._unmodified=!1,this._edgeInsets.interpolate(B,G,q),this._constrain(),this._calcMatrices()},Wr.prototype.coveringZoomLevel=function(B){var G=(B.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/B.tileSize));return Math.max(0,G)},Wr.prototype.getVisibleUnwrappedCoordinates=function(B){var G=[new s.UnwrappedTileID(0,B)];if(this._renderWorldCopies)for(var q=this.pointCoordinate(new s.Point(0,0)),L=this.pointCoordinate(new s.Point(this.width,0)),V=this.pointCoordinate(new s.Point(this.width,this.height)),J=this.pointCoordinate(new s.Point(0,this.height)),re=Math.floor(Math.min(q.x,L.x,V.x,J.x)),ue=Math.floor(Math.max(q.x,L.x,V.x,J.x)),xe=re-1;xe<=ue+1;xe++)xe!==0&&G.push(new s.UnwrappedTileID(xe,B));return G},Wr.prototype.coveringTiles=function(B){var G=this.coveringZoomLevel(B),q=G;if(B.minzoom!==void 0&&G<B.minzoom)return[];B.maxzoom!==void 0&&G>B.maxzoom&&(G=B.maxzoom);var L=s.MercatorCoordinate.fromLngLat(this.center),V=Math.pow(2,G),J=[V*L.x,V*L.y,0],re=Po.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,G),ue=B.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ue=G);var xe=function(An){return{aabb:new Zi([An*V,0,0],[(An+1)*V,V,0]),zoom:0,x:0,y:0,wrap:An,fullyVisible:!1}},Le=[],De=[],Ue=G,qe=B.reparseOverscaled?q:G;if(this._renderWorldCopies)for(var $e=1;$e<=3;$e++)Le.push(xe(-$e)),Le.push(xe($e));for(Le.push(xe(0));Le.length>0;){var lt=Le.pop(),ft=lt.x,wt=lt.y,Et=lt.fullyVisible;if(!Et){var At=lt.aabb.intersects(re);if(At===0)continue;Et=At===2}var Dt=lt.aabb.distanceX(J),Lt=lt.aabb.distanceY(J),Wt=Math.max(Math.abs(Dt),Math.abs(Lt)),Ht=3+(1<<Ue-lt.zoom)-2;if(lt.zoom===Ue||Wt>Ht&&lt.zoom>=ue)De.push({tileID:new s.OverscaledTileID(lt.zoom===Ue?qe:lt.zoom,lt.wrap,lt.zoom,ft,wt),distanceSq:s.sqrLen([J[0]-.5-ft,J[1]-.5-wt])});else for(var jt=0;jt<4;jt++){var hn=(ft<<1)+jt%2,vn=(wt<<1)+(jt>>1);Le.push({aabb:lt.aabb.quadrant(jt),zoom:lt.zoom+1,x:hn,y:vn,wrap:lt.wrap,fullyVisible:Et})}}return De.sort(function(An,Ln){return An.distanceSq-Ln.distanceSq}).map(function(An){return An.tileID})},Wr.prototype.resize=function(B,G){this.width=B,this.height=G,this.pixelsToGLUnits=[2/B,-2/G],this._constrain(),this._calcMatrices()},Jr.unmodified.get=function(){return this._unmodified},Wr.prototype.zoomScale=function(B){return Math.pow(2,B)},Wr.prototype.scaleZoom=function(B){return Math.log(B)/Math.LN2},Wr.prototype.project=function(B){var G=s.clamp(B.lat,-this.maxValidLatitude,this.maxValidLatitude);return new s.Point(s.mercatorXfromLng(B.lng)*this.worldSize,s.mercatorYfromLat(G)*this.worldSize)},Wr.prototype.unproject=function(B){return new s.MercatorCoordinate(B.x/this.worldSize,B.y/this.worldSize).toLngLat()},Jr.point.get=function(){return this.project(this.center)},Wr.prototype.setLocationAtPoint=function(B,G){var q=this.pointCoordinate(G),L=this.pointCoordinate(this.centerPoint),V=this.locationCoordinate(B),J=new s.MercatorCoordinate(V.x-(q.x-L.x),V.y-(q.y-L.y));this.center=this.coordinateLocation(J),this._renderWorldCopies&&(this.center=this.center.wrap())},Wr.prototype.locationPoint=function(B){return this.coordinatePoint(this.locationCoordinate(B))},Wr.prototype.pointLocation=function(B){return this.coordinateLocation(this.pointCoordinate(B))},Wr.prototype.locationCoordinate=function(B){return s.MercatorCoordinate.fromLngLat(B)},Wr.prototype.coordinateLocation=function(B){return B.toLngLat()},Wr.prototype.pointCoordinate=function(B){var G=[B.x,B.y,0,1],q=[B.x,B.y,1,1];s.transformMat4(G,G,this.pixelMatrixInverse),s.transformMat4(q,q,this.pixelMatrixInverse);var L=G[3],V=q[3],J=G[0]/L,re=q[0]/V,ue=G[1]/L,xe=q[1]/V,Le=G[2]/L,De=q[2]/V,Ue=Le===De?0:(0-Le)/(De-Le);return new s.MercatorCoordinate(s.number(J,re,Ue)/this.worldSize,s.number(ue,xe,Ue)/this.worldSize)},Wr.prototype.coordinatePoint=function(B){var G=[B.x*this.worldSize,B.y*this.worldSize,0,1];return s.transformMat4(G,G,this.pixelMatrix),new s.Point(G[0]/G[3],G[1]/G[3])},Wr.prototype.getBounds=function(){return new s.LngLatBounds().extend(this.pointLocation(new s.Point(0,0))).extend(this.pointLocation(new s.Point(this.width,0))).extend(this.pointLocation(new s.Point(this.width,this.height))).extend(this.pointLocation(new s.Point(0,this.height)))},Wr.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new s.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Wr.prototype.setMaxBounds=function(B){B?(this.lngRange=[B.getWest(),B.getEast()],this.latRange=[B.getSouth(),B.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Wr.prototype.calculatePosMatrix=function(B,G){G===void 0&&(G=!1);var q=B.key,L=G?this._alignedPosMatrixCache:this._posMatrixCache;if(L[q])return L[q];var V=B.canonical,J=this.worldSize/this.zoomScale(V.z),re=V.x+Math.pow(2,V.z)*B.wrap,ue=s.identity(new Float64Array(16));return s.translate(ue,ue,[re*J,V.y*J,0]),s.scale(ue,ue,[J/s.EXTENT,J/s.EXTENT,1]),s.multiply(ue,G?this.alignedProjMatrix:this.projMatrix,ue),L[q]=new Float32Array(ue),L[q]},Wr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Wr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var B,G,q,L,V=-90,J=90,re=-180,ue=180,xe=this.size,Le=this._unmodified;if(this.latRange){var De=this.latRange;V=s.mercatorYfromLat(De[1])*this.worldSize,B=(J=s.mercatorYfromLat(De[0])*this.worldSize)-V<xe.y?xe.y/(J-V):0}if(this.lngRange){var Ue=this.lngRange;re=s.mercatorXfromLng(Ue[0])*this.worldSize,G=(ue=s.mercatorXfromLng(Ue[1])*this.worldSize)-re<xe.x?xe.x/(ue-re):0}var qe=this.point,$e=Math.max(G||0,B||0);if($e)return this.center=this.unproject(new s.Point(G?(ue+re)/2:qe.x,B?(J+V)/2:qe.y)),this.zoom+=this.scaleZoom($e),this._unmodified=Le,void(this._constraining=!1);if(this.latRange){var lt=qe.y,ft=xe.y/2;lt-ft<V&&(L=V+ft),lt+ft>J&&(L=J-ft)}if(this.lngRange){var wt=qe.x,Et=xe.x/2;wt-Et<re&&(q=re+Et),wt+Et>ue&&(q=ue-Et)}q===void 0&&L===void 0||(this.center=this.unproject(new s.Point(q!==void 0?q:qe.x,L!==void 0?L:qe.y))),this._unmodified=Le,this._constraining=!1}},Wr.prototype._calcMatrices=function(){if(this.height){var B=this._fov/2,G=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(B)*this.height;var q=Math.PI/2+this._pitch,L=this._fov*(.5+G.y/this.height),V=Math.sin(L)*this.cameraToCenterDistance/Math.sin(s.clamp(Math.PI-q-L,.01,Math.PI-.01)),J=this.point,re=J.x,ue=J.y,xe=1.01*(Math.cos(Math.PI/2-this._pitch)*V+this.cameraToCenterDistance),Le=this.height/50,De=new Float64Array(16);s.perspective(De,this._fov,this.width/this.height,Le,xe),De[8]=2*-G.x/this.width,De[9]=2*G.y/this.height,s.scale(De,De,[1,-1,1]),s.translate(De,De,[0,0,-this.cameraToCenterDistance]),s.rotateX(De,De,this._pitch),s.rotateZ(De,De,this.angle),s.translate(De,De,[-re,-ue,0]),this.mercatorMatrix=s.scale([],De,[this.worldSize,this.worldSize,this.worldSize]),s.scale(De,De,[1,1,s.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=De,this.invProjMatrix=s.invert([],this.projMatrix);var Ue=this.width%2/2,qe=this.height%2/2,$e=Math.cos(this.angle),lt=Math.sin(this.angle),ft=re-Math.round(re)+$e*Ue+lt*qe,wt=ue-Math.round(ue)+$e*qe+lt*Ue,Et=new Float64Array(De);if(s.translate(Et,Et,[ft>.5?ft-1:ft,wt>.5?wt-1:wt,0]),this.alignedProjMatrix=Et,De=s.create(),s.scale(De,De,[this.width/2,-this.height/2,1]),s.translate(De,De,[1,-1,0]),this.labelPlaneMatrix=De,De=s.create(),s.scale(De,De,[1,-1,1]),s.translate(De,De,[-1,-1,0]),s.scale(De,De,[2/this.width,2/this.height,1]),this.glCoordMatrix=De,this.pixelMatrix=s.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(De=s.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=De,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Wr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var B=this.pointCoordinate(new s.Point(0,0)),G=[B.x*this.worldSize,B.y*this.worldSize,0,1];return s.transformMat4(G,G,this.pixelMatrix)[3]/this.cameraToCenterDistance},Wr.prototype.getCameraPoint=function(){var B=this._pitch,G=Math.tan(B)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.Point(0,G))},Wr.prototype.getCameraQueryGeometry=function(B){var G=this.getCameraPoint();if(B.length===1)return[B[0],G];for(var q=G.x,L=G.y,V=G.x,J=G.y,re=0,ue=B;re<ue.length;re+=1){var xe=ue[re];q=Math.min(q,xe.x),L=Math.min(L,xe.y),V=Math.max(V,xe.x),J=Math.max(J,xe.y)}return[new s.Point(q,L),new s.Point(V,L),new s.Point(V,J),new s.Point(q,J),new s.Point(q,L)]},Object.defineProperties(Wr.prototype,Jr);var _a=function(B){var G,q,L,V,J;this._hashName=B&&encodeURIComponent(B),s.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(G=this._updateHashUnthrottled.bind(this),q=300,L=!1,V=null,J=function(){V=null,L&&(G(),V=setTimeout(J,q),L=!1)},function(){return L=!0,V||J(),V})};_a.prototype.addTo=function(B){return this._map=B,s.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},_a.prototype.remove=function(){return s.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},_a.prototype.getHashString=function(B){var G=this._map.getCenter(),q=Math.round(100*this._map.getZoom())/100,L=Math.ceil((q*Math.LN2+Math.log(512/360/.5))/Math.LN10),V=Math.pow(10,L),J=Math.round(G.lng*V)/V,re=Math.round(G.lat*V)/V,ue=this._map.getBearing(),xe=this._map.getPitch(),Le="";if(Le+=B?"/"+J+"/"+re+"/"+q:q+"/"+re+"/"+J,(ue||xe)&&(Le+="/"+Math.round(10*ue)/10),xe&&(Le+="/"+Math.round(xe)),this._hashName){var De=this._hashName,Ue=!1,qe=s.window.location.hash.slice(1).split("&").map(function($e){var lt=$e.split("=")[0];return lt===De?(Ue=!0,lt+"="+Le):$e}).filter(function($e){return $e});return Ue||qe.push(De+"="+Le),"#"+qe.join("&")}return"#"+Le},_a.prototype._getCurrentHash=function(){var B,G=this,q=s.window.location.hash.replace("#","");return this._hashName?(q.split("&").map(function(L){return L.split("=")}).forEach(function(L){L[0]===G._hashName&&(B=L)}),(B&&B[1]||"").split("/")):q.split("/")},_a.prototype._onHashChange=function(){var B=this._getCurrentHash();if(B.length>=3&&!B.some(function(q){return isNaN(q)})){var G=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(B[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+B[2],+B[1]],zoom:+B[0],bearing:G,pitch:+(B[4]||0)}),!0}return!1},_a.prototype._updateHashUnthrottled=function(){var B=s.window.location.href.replace(/(#.+)?$/,this.getHashString());try{s.window.history.replaceState(s.window.history.state,null,B)}catch{}};var cs={linearity:.3,easing:s.bezier(0,0,.3,1)},Ts=s.extend({deceleration:2500,maxSpeed:1400},cs),Hs=s.extend({deceleration:20,maxSpeed:1400},cs),ks=s.extend({deceleration:1e3,maxSpeed:360},cs),As=s.extend({deceleration:1e3,maxSpeed:90},cs),Ea=function(B){this._map=B,this.clear()};function Io(B,G){(!B.duration||B.duration<G.duration)&&(B.duration=G.duration,B.easing=G.easing)}function zo(B,G,q){var L=q.maxSpeed,V=q.linearity,J=q.deceleration,re=s.clamp(B*V/(G/1e3),-L,L),ue=Math.abs(re)/(J*V);return{easing:q.easing,duration:1e3*ue,amount:re*(ue/2)}}Ea.prototype.clear=function(){this._inertiaBuffer=[]},Ea.prototype.record=function(B){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.browser.now(),settings:B})},Ea.prototype._drainInertiaBuffer=function(){for(var B=this._inertiaBuffer,G=s.browser.now();B.length>0&&G-B[0].time>160;)B.shift()},Ea.prototype._onMoveEnd=function(B){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var G={zoom:0,bearing:0,pitch:0,pan:new s.Point(0,0),pinchAround:void 0,around:void 0},q=0,L=this._inertiaBuffer;q<L.length;q+=1){var V=L[q].settings;G.zoom+=V.zoomDelta||0,G.bearing+=V.bearingDelta||0,G.pitch+=V.pitchDelta||0,V.panDelta&&G.pan._add(V.panDelta),V.around&&(G.around=V.around),V.pinchAround&&(G.pinchAround=V.pinchAround)}var J=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,re={};if(G.pan.mag()){var ue=zo(G.pan.mag(),J,s.extend({},Ts,B||{}));re.offset=G.pan.mult(ue.amount/G.pan.mag()),re.center=this._map.transform.center,Io(re,ue)}if(G.zoom){var xe=zo(G.zoom,J,Hs);re.zoom=this._map.transform.zoom+xe.amount,Io(re,xe)}if(G.bearing){var Le=zo(G.bearing,J,ks);re.bearing=this._map.transform.bearing+s.clamp(Le.amount,-179,179),Io(re,Le)}if(G.pitch){var De=zo(G.pitch,J,As);re.pitch=this._map.transform.pitch+De.amount,Io(re,De)}if(re.zoom||re.bearing){var Ue=G.pinchAround===void 0?G.around:G.pinchAround;re.around=Ue?this._map.unproject(Ue):this._map.getCenter()}return this.clear(),s.extend(re,{noMoveStart:!0})}};var ta=function(B){function G(L,V,J,re){re===void 0&&(re={});var ue=b.mousePos(V.getCanvasContainer(),J),xe=V.unproject(ue);B.call(this,L,s.extend({point:ue,lngLat:xe,originalEvent:J},re)),this._defaultPrevented=!1,this.target=V}B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G;var q={defaultPrevented:{configurable:!0}};return G.prototype.preventDefault=function(){this._defaultPrevented=!0},q.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(G.prototype,q),G}(s.Event),Ms=function(B){function G(L,V,J){var re=L==="touchend"?J.changedTouches:J.touches,ue=b.touchPos(V.getCanvasContainer(),re),xe=ue.map(function(Ue){return V.unproject(Ue)}),Le=ue.reduce(function(Ue,qe,$e,lt){return Ue.add(qe.div(lt.length))},new s.Point(0,0)),De=V.unproject(Le);B.call(this,L,{points:ue,point:Le,lngLats:xe,lngLat:De,originalEvent:J}),this._defaultPrevented=!1}B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G;var q={defaultPrevented:{configurable:!0}};return G.prototype.preventDefault=function(){this._defaultPrevented=!0},q.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(G.prototype,q),G}(s.Event),La=function(B){function G(L,V,J){B.call(this,L,{originalEvent:J}),this._defaultPrevented=!1}B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G;var q={defaultPrevented:{configurable:!0}};return G.prototype.preventDefault=function(){this._defaultPrevented=!0},q.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(G.prototype,q),G}(s.Event),Bi=function(B,G){this._map=B,this._clickTolerance=G.clickTolerance};Bi.prototype.reset=function(){delete this._mousedownPos},Bi.prototype.wheel=function(B){return this._firePreventable(new La(B.type,this._map,B))},Bi.prototype.mousedown=function(B,G){return this._mousedownPos=G,this._firePreventable(new ta(B.type,this._map,B))},Bi.prototype.mouseup=function(B){this._map.fire(new ta(B.type,this._map,B))},Bi.prototype.click=function(B,G){this._mousedownPos&&this._mousedownPos.dist(G)>=this._clickTolerance||this._map.fire(new ta(B.type,this._map,B))},Bi.prototype.dblclick=function(B){return this._firePreventable(new ta(B.type,this._map,B))},Bi.prototype.mouseover=function(B){this._map.fire(new ta(B.type,this._map,B))},Bi.prototype.mouseout=function(B){this._map.fire(new ta(B.type,this._map,B))},Bi.prototype.touchstart=function(B){return this._firePreventable(new Ms(B.type,this._map,B))},Bi.prototype.touchmove=function(B){this._map.fire(new Ms(B.type,this._map,B))},Bi.prototype.touchend=function(B){this._map.fire(new Ms(B.type,this._map,B))},Bi.prototype.touchcancel=function(B){this._map.fire(new Ms(B.type,this._map,B))},Bi.prototype._firePreventable=function(B){if(this._map.fire(B),B.defaultPrevented)return{}},Bi.prototype.isEnabled=function(){return!0},Bi.prototype.isActive=function(){return!1},Bi.prototype.enable=function(){},Bi.prototype.disable=function(){};var qi=function(B){this._map=B};qi.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},qi.prototype.mousemove=function(B){this._map.fire(new ta(B.type,this._map,B))},qi.prototype.mousedown=function(){this._delayContextMenu=!0},qi.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ta("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},qi.prototype.contextmenu=function(B){this._delayContextMenu?this._contextMenuEvent=B:this._map.fire(new ta(B.type,this._map,B)),this._map.listens("contextmenu")&&B.preventDefault()},qi.prototype.isEnabled=function(){return!0},qi.prototype.isActive=function(){return!1},qi.prototype.enable=function(){},qi.prototype.disable=function(){};var ai=function(B,G){this._map=B,this._el=B.getCanvasContainer(),this._container=B.getContainer(),this._clickTolerance=G.clickTolerance||1};function Hi(B,G){for(var q={},L=0;L<B.length;L++)q[B[L].identifier]=G[L];return q}ai.prototype.isEnabled=function(){return!!this._enabled},ai.prototype.isActive=function(){return!!this._active},ai.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ai.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ai.prototype.mousedown=function(B,G){this.isEnabled()&&B.shiftKey&&B.button===0&&(b.disableDrag(),this._startPos=this._lastPos=G,this._active=!0)},ai.prototype.mousemoveWindow=function(B,G){if(this._active){var q=G;if(!(this._lastPos.equals(q)||!this._box&&q.dist(this._startPos)<this._clickTolerance)){var L=this._startPos;this._lastPos=q,this._box||(this._box=b.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",B));var V=Math.min(L.x,q.x),J=Math.max(L.x,q.x),re=Math.min(L.y,q.y),ue=Math.max(L.y,q.y);b.setTransform(this._box,"translate("+V+"px,"+re+"px)"),this._box.style.width=J-V+"px",this._box.style.height=ue-re+"px"}}},ai.prototype.mouseupWindow=function(B,G){var q=this;if(this._active&&B.button===0){var L=this._startPos,V=G;if(this.reset(),b.suppressClick(),L.x!==V.x||L.y!==V.y)return this._map.fire(new s.Event("boxzoomend",{originalEvent:B})),{cameraAnimation:function(J){return J.fitScreenCoordinates(L,V,q._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",B)}},ai.prototype.keydown=function(B){this._active&&B.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",B))},ai.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(b.remove(this._box),this._box=null),b.enableDrag(),delete this._startPos,delete this._lastPos},ai.prototype._fireEvent=function(B,G){return this._map.fire(new s.Event(B,{originalEvent:G}))};var no=function(B){this.reset(),this.numTouches=B.numTouches};no.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},no.prototype.touchstart=function(B,G,q){(this.centroid||q.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=B.timeStamp),q.length===this.numTouches&&(this.centroid=function(L){for(var V=new s.Point(0,0),J=0,re=L;J<re.length;J+=1){var ue=re[J];V._add(ue)}return V.div(L.length)}(G),this.touches=Hi(q,G)))},no.prototype.touchmove=function(B,G,q){if(!this.aborted&&this.centroid){var L=Hi(q,G);for(var V in this.touches){var J=this.touches[V],re=L[V];(!re||re.dist(J)>30)&&(this.aborted=!0)}}},no.prototype.touchend=function(B,G,q){if((!this.centroid||B.timeStamp-this.startTime>500)&&(this.aborted=!0),q.length===0){var L=!this.aborted&&this.centroid;if(this.reset(),L)return L}};var Qo=function(B){this.singleTap=new no(B),this.numTaps=B.numTaps,this.reset()};Qo.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Qo.prototype.touchstart=function(B,G,q){this.singleTap.touchstart(B,G,q)},Qo.prototype.touchmove=function(B,G,q){this.singleTap.touchmove(B,G,q)},Qo.prototype.touchend=function(B,G,q){var L=this.singleTap.touchend(B,G,q);if(L){var V=B.timeStamp-this.lastTime<500,J=!this.lastTap||this.lastTap.dist(L)<30;if(V&&J||this.reset(),this.count++,this.lastTime=B.timeStamp,this.lastTap=L,this.count===this.numTaps)return this.reset(),L}};var Va=function(){this._zoomIn=new Qo({numTouches:1,numTaps:2}),this._zoomOut=new Qo({numTouches:2,numTaps:1}),this.reset()};Va.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Va.prototype.touchstart=function(B,G,q){this._zoomIn.touchstart(B,G,q),this._zoomOut.touchstart(B,G,q)},Va.prototype.touchmove=function(B,G,q){this._zoomIn.touchmove(B,G,q),this._zoomOut.touchmove(B,G,q)},Va.prototype.touchend=function(B,G,q){var L=this,V=this._zoomIn.touchend(B,G,q),J=this._zoomOut.touchend(B,G,q);return V?(this._active=!0,B.preventDefault(),setTimeout(function(){return L.reset()},0),{cameraAnimation:function(re){return re.easeTo({duration:300,zoom:re.getZoom()+1,around:re.unproject(V)},{originalEvent:B})}}):J?(this._active=!0,B.preventDefault(),setTimeout(function(){return L.reset()},0),{cameraAnimation:function(re){return re.easeTo({duration:300,zoom:re.getZoom()-1,around:re.unproject(J)},{originalEvent:B})}}):void 0},Va.prototype.touchcancel=function(){this.reset()},Va.prototype.enable=function(){this._enabled=!0},Va.prototype.disable=function(){this._enabled=!1,this.reset()},Va.prototype.isEnabled=function(){return this._enabled},Va.prototype.isActive=function(){return this._active};var Do={};Do[0]=1,Do[2]=2;var sa=function(B){this.reset(),this._clickTolerance=B.clickTolerance||1};sa.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},sa.prototype._correctButton=function(B,G){return!1},sa.prototype._move=function(B,G){return{}},sa.prototype.mousedown=function(B,G){if(!this._lastPoint){var q=b.mouseButton(B);this._correctButton(B,q)&&(this._lastPoint=G,this._eventButton=q)}},sa.prototype.mousemoveWindow=function(B,G){var q=this._lastPoint;if(q){if(B.preventDefault(),function(L,V){var J=Do[V];return L.buttons===void 0||(L.buttons&J)!==J}(B,this._eventButton))this.reset();else if(this._moved||!(G.dist(q)<this._clickTolerance))return this._moved=!0,this._lastPoint=G,this._move(q,G)}},sa.prototype.mouseupWindow=function(B){this._lastPoint&&b.mouseButton(B)===this._eventButton&&(this._moved&&b.suppressClick(),this.reset())},sa.prototype.enable=function(){this._enabled=!0},sa.prototype.disable=function(){this._enabled=!1,this.reset()},sa.prototype.isEnabled=function(){return this._enabled},sa.prototype.isActive=function(){return this._active};var es=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.mousedown=function(q,L){B.prototype.mousedown.call(this,q,L),this._lastPoint&&(this._active=!0)},G.prototype._correctButton=function(q,L){return L===0&&!q.ctrlKey},G.prototype._move=function(q,L){return{around:L,panDelta:L.sub(q)}},G}(sa),vo=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype._correctButton=function(q,L){return L===0&&q.ctrlKey||L===2},G.prototype._move=function(q,L){var V=.8*(L.x-q.x);if(V)return this._active=!0,{bearingDelta:V}},G.prototype.contextmenu=function(q){q.preventDefault()},G}(sa),Ca=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype._correctButton=function(q,L){return L===0&&q.ctrlKey||L===2},G.prototype._move=function(q,L){var V=-.5*(L.y-q.y);if(V)return this._active=!0,{pitchDelta:V}},G.prototype.contextmenu=function(q){q.preventDefault()},G}(sa),Oa=function(B){this._minTouches=1,this._clickTolerance=B.clickTolerance||1,this.reset()};Oa.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new s.Point(0,0)},Oa.prototype.touchstart=function(B,G,q){return this._calculateTransform(B,G,q)},Oa.prototype.touchmove=function(B,G,q){if(this._active&&!(q.length<this._minTouches))return B.preventDefault(),this._calculateTransform(B,G,q)},Oa.prototype.touchend=function(B,G,q){this._calculateTransform(B,G,q),this._active&&q.length<this._minTouches&&this.reset()},Oa.prototype.touchcancel=function(){this.reset()},Oa.prototype._calculateTransform=function(B,G,q){q.length>0&&(this._active=!0);var L=Hi(q,G),V=new s.Point(0,0),J=new s.Point(0,0),re=0;for(var ue in L){var xe=L[ue],Le=this._touches[ue];Le&&(V._add(xe),J._add(xe.sub(Le)),re++,L[ue]=xe)}if(this._touches=L,!(re<this._minTouches)&&J.mag()){var De=J.div(re);if(this._sum._add(De),!(this._sum.mag()<this._clickTolerance))return{around:V.div(re),panDelta:De}}},Oa.prototype.enable=function(){this._enabled=!0},Oa.prototype.disable=function(){this._enabled=!1,this.reset()},Oa.prototype.isEnabled=function(){return this._enabled},Oa.prototype.isActive=function(){return this._active};var si=function(){this.reset()};function qa(B,G,q){for(var L=0;L<B.length;L++)if(B[L].identifier===q)return G[L]}si.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},si.prototype._start=function(B){},si.prototype._move=function(B,G,q){return{}},si.prototype.touchstart=function(B,G,q){this._firstTwoTouches||q.length<2||(this._firstTwoTouches=[q[0].identifier,q[1].identifier],this._start([G[0],G[1]]))},si.prototype.touchmove=function(B,G,q){if(this._firstTwoTouches){B.preventDefault();var L=this._firstTwoTouches,V=L[0],J=L[1],re=qa(q,G,V),ue=qa(q,G,J);if(re&&ue){var xe=this._aroundCenter?null:re.add(ue).div(2);return this._move([re,ue],xe,B)}}},si.prototype.touchend=function(B,G,q){if(this._firstTwoTouches){var L=this._firstTwoTouches,V=L[0],J=L[1],re=qa(q,G,V),ue=qa(q,G,J);re&&ue||(this._active&&b.suppressClick(),this.reset())}},si.prototype.touchcancel=function(){this.reset()},si.prototype.enable=function(B){this._enabled=!0,this._aroundCenter=!!B&&B.around==="center"},si.prototype.disable=function(){this._enabled=!1,this.reset()},si.prototype.isEnabled=function(){return this._enabled},si.prototype.isActive=function(){return this._active};function _r(B,G){return Math.log(B/G)/Math.LN2}var Ss=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.reset=function(){B.prototype.reset.call(this),delete this._distance,delete this._startDistance},G.prototype._start=function(q){this._startDistance=this._distance=q[0].dist(q[1])},G.prototype._move=function(q,L){var V=this._distance;if(this._distance=q[0].dist(q[1]),this._active||!(Math.abs(_r(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:_r(this._distance,V),pinchAround:L}},G}(si);function $s(B,G){return 180*B.angleWith(G)/Math.PI}var Ro=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.reset=function(){B.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},G.prototype._start=function(q){this._startVector=this._vector=q[0].sub(q[1]),this._minDiameter=q[0].dist(q[1])},G.prototype._move=function(q,L){var V=this._vector;if(this._vector=q[0].sub(q[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:$s(this._vector,V),pinchAround:L}},G.prototype._isBelowThreshold=function(q){this._minDiameter=Math.min(this._minDiameter,q.mag());var L=25/(Math.PI*this._minDiameter)*360,V=$s(q,this._startVector);return Math.abs(V)<L},G}(si);function Fo(B){return Math.abs(B.y)>Math.abs(B.x)}var ts=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.reset=function(){B.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},G.prototype._start=function(q){this._lastPoints=q,Fo(q[0].sub(q[1]))&&(this._valid=!1)},G.prototype._move=function(q,L,V){var J=q[0].sub(this._lastPoints[0]),re=q[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(J,re,V.timeStamp),this._valid)return this._lastPoints=q,this._active=!0,{pitchDelta:(J.y+re.y)/2*-.5}},G.prototype.gestureBeginsVertically=function(q,L,V){if(this._valid!==void 0)return this._valid;var J=q.mag()>=2,re=L.mag()>=2;if(J||re){if(!J||!re)return this._firstMove===void 0&&(this._firstMove=V),V-this._firstMove<100&&void 0;var ue=q.y>0==L.y>0;return Fo(q)&&Fo(L)&&ue}},G}(si),fs={panStep:100,bearingStep:15,pitchStep:10},gr=function(){var B=fs;this._panStep=B.panStep,this._bearingStep=B.bearingStep,this._pitchStep=B.pitchStep,this._rotationDisabled=!1};function Es(B){return B*(2-B)}gr.prototype.reset=function(){this._active=!1},gr.prototype.keydown=function(B){var G=this;if(!(B.altKey||B.ctrlKey||B.metaKey)){var q=0,L=0,V=0,J=0,re=0;switch(B.keyCode){case 61:case 107:case 171:case 187:q=1;break;case 189:case 109:case 173:q=-1;break;case 37:B.shiftKey?L=-1:(B.preventDefault(),J=-1);break;case 39:B.shiftKey?L=1:(B.preventDefault(),J=1);break;case 38:B.shiftKey?V=1:(B.preventDefault(),re=-1);break;case 40:B.shiftKey?V=-1:(B.preventDefault(),re=1);break;default:return}return this._rotationDisabled&&(L=0,V=0),{cameraAnimation:function(ue){var xe=ue.getZoom();ue.easeTo({duration:300,easeId:"keyboardHandler",easing:Es,zoom:q?Math.round(xe)+q*(B.shiftKey?2:1):xe,bearing:ue.getBearing()+L*G._bearingStep,pitch:ue.getPitch()+V*G._pitchStep,offset:[-J*G._panStep,-re*G._panStep],center:ue.getCenter()},{originalEvent:B})}}}},gr.prototype.enable=function(){this._enabled=!0},gr.prototype.disable=function(){this._enabled=!1,this.reset()},gr.prototype.isEnabled=function(){return this._enabled},gr.prototype.isActive=function(){return this._active},gr.prototype.disableRotation=function(){this._rotationDisabled=!0},gr.prototype.enableRotation=function(){this._rotationDisabled=!1};var mo=4.000244140625,Ni=function(B,G){this._map=B,this._el=B.getCanvasContainer(),this._handler=G,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,s.bindAll(["_onTimeout"],this)};Ni.prototype.setZoomRate=function(B){this._defaultZoomRate=B},Ni.prototype.setWheelZoomRate=function(B){this._wheelZoomRate=B},Ni.prototype.isEnabled=function(){return!!this._enabled},Ni.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Ni.prototype.isZooming=function(){return!!this._zooming},Ni.prototype.enable=function(B){this.isEnabled()||(this._enabled=!0,this._aroundCenter=B&&B.around==="center")},Ni.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ni.prototype.wheel=function(B){if(this.isEnabled()){var G=B.deltaMode===s.window.WheelEvent.DOM_DELTA_LINE?40*B.deltaY:B.deltaY,q=s.browser.now(),L=q-(this._lastWheelEventTime||0);this._lastWheelEventTime=q,G!==0&&G%mo==0?this._type="wheel":G!==0&&Math.abs(G)<4?this._type="trackpad":L>400?(this._type=null,this._lastValue=G,this._timeout=setTimeout(this._onTimeout,40,B)):this._type||(this._type=Math.abs(L*G)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,G+=this._lastValue)),B.shiftKey&&G&&(G/=4),this._type&&(this._lastWheelEvent=B,this._delta-=G,this._active||this._start(B)),B.preventDefault()}},Ni.prototype._onTimeout=function(B){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(B)},Ni.prototype._start=function(B){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var G=b.mousePos(this._el,B);this._around=s.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(G)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Ni.prototype.renderFrame=function(){var B=this;if(this._frameId&&(this._frameId=null,this.isActive())){var G=this._map.transform;if(this._delta!==0){var q=this._type==="wheel"&&Math.abs(this._delta)>mo?this._wheelZoomRate:this._defaultZoomRate,L=2/(1+Math.exp(-Math.abs(this._delta*q)));this._delta<0&&L!==0&&(L=1/L);var V=typeof this._targetZoom=="number"?G.zoomScale(this._targetZoom):G.scale;this._targetZoom=Math.min(G.maxZoom,Math.max(G.minZoom,G.scaleZoom(V*L))),this._type==="wheel"&&(this._startZoom=G.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var J,re=typeof this._targetZoom=="number"?this._targetZoom:G.zoom,ue=this._startZoom,xe=this._easing,Le=!1;if(this._type==="wheel"&&ue&&xe){var De=Math.min((s.browser.now()-this._lastWheelEventTime)/200,1),Ue=xe(De);J=s.number(ue,re,Ue),De<1?this._frameId||(this._frameId=!0):Le=!0}else J=re,Le=!0;return this._active=!0,Le&&(this._active=!1,this._finishTimeout=setTimeout(function(){B._zooming=!1,B._handler._triggerRenderFrame(),delete B._targetZoom,delete B._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Le,zoomDelta:J-G.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Ni.prototype._smoothOutEasing=function(B){var G=s.ease;if(this._prevEase){var q=this._prevEase,L=(s.browser.now()-q.start)/q.duration,V=q.easing(L+.01)-q.easing(L),J=.27/Math.sqrt(V*V+1e-4)*.01,re=Math.sqrt(.0729-J*J);G=s.bezier(J,re,.25,1)}return this._prevEase={start:s.browser.now(),duration:B,easing:G},G},Ni.prototype.reset=function(){this._active=!1};var Bo=function(B,G){this._clickZoom=B,this._tapZoom=G};Bo.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Bo.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Bo.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Bo.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Ha=function(){this.reset()};Ha.prototype.reset=function(){this._active=!1},Ha.prototype.dblclick=function(B,G){return B.preventDefault(),{cameraAnimation:function(q){q.easeTo({duration:300,zoom:q.getZoom()+(B.shiftKey?-1:1),around:q.unproject(G)},{originalEvent:B})}}},Ha.prototype.enable=function(){this._enabled=!0},Ha.prototype.disable=function(){this._enabled=!1,this.reset()},Ha.prototype.isEnabled=function(){return this._enabled},Ha.prototype.isActive=function(){return this._active};var Pa=function(){this._tap=new Qo({numTouches:1,numTaps:1}),this.reset()};Pa.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Pa.prototype.touchstart=function(B,G,q){this._swipePoint||(this._tapTime&&B.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?q.length>0&&(this._swipePoint=G[0],this._swipeTouch=q[0].identifier):this._tap.touchstart(B,G,q))},Pa.prototype.touchmove=function(B,G,q){if(this._tapTime){if(this._swipePoint){if(q[0].identifier!==this._swipeTouch)return;var L=G[0],V=L.y-this._swipePoint.y;return this._swipePoint=L,B.preventDefault(),this._active=!0,{zoomDelta:V/128}}}else this._tap.touchmove(B,G,q)},Pa.prototype.touchend=function(B,G,q){this._tapTime?this._swipePoint&&q.length===0&&this.reset():this._tap.touchend(B,G,q)&&(this._tapTime=B.timeStamp)},Pa.prototype.touchcancel=function(){this.reset()},Pa.prototype.enable=function(){this._enabled=!0},Pa.prototype.disable=function(){this._enabled=!1,this.reset()},Pa.prototype.isEnabled=function(){return this._enabled},Pa.prototype.isActive=function(){return this._active};var na=function(B,G,q){this._el=B,this._mousePan=G,this._touchPan=q};na.prototype.enable=function(B){this._inertiaOptions=B||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},na.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},na.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},na.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var ro=function(B,G,q){this._pitchWithRotate=B.pitchWithRotate,this._mouseRotate=G,this._mousePitch=q};ro.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},ro.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},ro.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},ro.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Ia=function(B,G,q,L){this._el=B,this._touchZoom=G,this._touchRotate=q,this._tapDragZoom=L,this._rotationDisabled=!1,this._enabled=!0};Ia.prototype.enable=function(B){this._touchZoom.enable(B),this._rotationDisabled||this._touchRotate.enable(B),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Ia.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Ia.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Ia.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Ia.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Ia.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var yo=function(B){return B.zoom||B.drag||B.pitch||B.rotate},Ls=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G}(s.Event);function No(B){return B.panDelta&&B.panDelta.mag()||B.zoomDelta||B.bearingDelta||B.pitchDelta}var Hr=function(B,G){this._map=B,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ea(B),this._bearingSnap=G.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(G),s.bindAll(["handleEvent","handleWindowEvent"],this);var q=this._el;this._listeners=[[q,"touchstart",{passive:!0}],[q,"touchmove",{passive:!1}],[q,"touchend",void 0],[q,"touchcancel",void 0],[q,"mousedown",void 0],[q,"mousemove",void 0],[q,"mouseup",void 0],[s.window.document,"mousemove",{capture:!0}],[s.window.document,"mouseup",void 0],[q,"mouseover",void 0],[q,"mouseout",void 0],[q,"dblclick",void 0],[q,"click",void 0],[q,"keydown",{capture:!1}],[q,"keyup",void 0],[q,"wheel",{passive:!1}],[q,"contextmenu",void 0],[s.window,"blur",void 0]];for(var L=0,V=this._listeners;L<V.length;L+=1){var J=V[L],re=J[0],ue=J[1],xe=J[2];b.addEventListener(re,ue,re===s.window.document?this.handleWindowEvent:this.handleEvent,xe)}};Hr.prototype.destroy=function(){for(var B=0,G=this._listeners;B<G.length;B+=1){var q=G[B],L=q[0],V=q[1],J=q[2];b.removeEventListener(L,V,L===s.window.document?this.handleWindowEvent:this.handleEvent,J)}},Hr.prototype._addDefaultHandlers=function(B){var G=this._map,q=G.getCanvasContainer();this._add("mapEvent",new Bi(G,B));var L=G.boxZoom=new ai(G,B);this._add("boxZoom",L);var V=new Va,J=new Ha;G.doubleClickZoom=new Bo(J,V),this._add("tapZoom",V),this._add("clickZoom",J);var re=new Pa;this._add("tapDragZoom",re);var ue=G.touchPitch=new ts;this._add("touchPitch",ue);var xe=new vo(B),Le=new Ca(B);G.dragRotate=new ro(B,xe,Le),this._add("mouseRotate",xe,["mousePitch"]),this._add("mousePitch",Le,["mouseRotate"]);var De=new es(B),Ue=new Oa(B);G.dragPan=new na(q,De,Ue),this._add("mousePan",De),this._add("touchPan",Ue,["touchZoom","touchRotate"]);var qe=new Ro,$e=new Ss;G.touchZoomRotate=new Ia(q,$e,qe,re),this._add("touchRotate",qe,["touchPan","touchZoom"]),this._add("touchZoom",$e,["touchPan","touchRotate"]);var lt=G.scrollZoom=new Ni(G,this);this._add("scrollZoom",lt,["mousePan"]);var ft=G.keyboard=new gr;this._add("keyboard",ft),this._add("blockableMapEvent",new qi(G));for(var wt=0,Et=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];wt<Et.length;wt+=1){var At=Et[wt];B.interactive&&B[At]&&G[At].enable(B[At])}},Hr.prototype._add=function(B,G,q){this._handlers.push({handlerName:B,handler:G,allowed:q}),this._handlersById[B]=G},Hr.prototype.stop=function(B){if(!this._updatingCamera){for(var G=0,q=this._handlers;G<q.length;G+=1)q[G].handler.reset();this._inertia.clear(),this._fireEvents({},{},B),this._changes=[]}},Hr.prototype.isActive=function(){for(var B=0,G=this._handlers;B<G.length;B+=1)if(G[B].handler.isActive())return!0;return!1},Hr.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Hr.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Hr.prototype.isMoving=function(){return!!yo(this._eventsInProgress)||this.isZooming()},Hr.prototype._blockedByActive=function(B,G,q){for(var L in B)if(L!==q&&(!G||G.indexOf(L)<0))return!0;return!1},Hr.prototype.handleWindowEvent=function(B){this.handleEvent(B,B.type+"Window")},Hr.prototype._getMapTouches=function(B){for(var G=[],q=0,L=B;q<L.length;q+=1){var V=L[q],J=V.target;this._el.contains(J)&&G.push(V)}return G},Hr.prototype.handleEvent=function(B,G){if(B.type!=="blur"){this._updatingCamera=!0;for(var q=B.type==="renderFrame"?void 0:B,L={needsRenderFrame:!1},V={},J={},re=B.touches?this._getMapTouches(B.touches):void 0,ue=re?b.touchPos(this._el,re):b.mousePos(this._el,B),xe=0,Le=this._handlers;xe<Le.length;xe+=1){var De=Le[xe],Ue=De.handlerName,qe=De.handler,$e=De.allowed;if(qe.isEnabled()){var lt=void 0;this._blockedByActive(J,$e,Ue)?qe.reset():qe[G||B.type]&&(lt=qe[G||B.type](B,ue,re),this.mergeHandlerResult(L,V,lt,Ue,q),lt&&lt.needsRenderFrame&&this._triggerRenderFrame()),(lt||qe.isActive())&&(J[Ue]=qe)}}var ft={};for(var wt in this._previousActiveHandlers)J[wt]||(ft[wt]=q);this._previousActiveHandlers=J,(Object.keys(ft).length||No(L))&&(this._changes.push([L,V,ft]),this._triggerRenderFrame()),(Object.keys(J).length||No(L))&&this._map._stop(!0),this._updatingCamera=!1;var Et=L.cameraAnimation;Et&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Et(this._map))}else this.stop(!0)},Hr.prototype.mergeHandlerResult=function(B,G,q,L,V){if(q){s.extend(B,q);var J={handlerName:L,originalEvent:q.originalEvent||V};q.zoomDelta!==void 0&&(G.zoom=J),q.panDelta!==void 0&&(G.drag=J),q.pitchDelta!==void 0&&(G.pitch=J),q.bearingDelta!==void 0&&(G.rotate=J)}},Hr.prototype._applyChanges=function(){for(var B={},G={},q={},L=0,V=this._changes;L<V.length;L+=1){var J=V[L],re=J[0],ue=J[1],xe=J[2];re.panDelta&&(B.panDelta=(B.panDelta||new s.Point(0,0))._add(re.panDelta)),re.zoomDelta&&(B.zoomDelta=(B.zoomDelta||0)+re.zoomDelta),re.bearingDelta&&(B.bearingDelta=(B.bearingDelta||0)+re.bearingDelta),re.pitchDelta&&(B.pitchDelta=(B.pitchDelta||0)+re.pitchDelta),re.around!==void 0&&(B.around=re.around),re.pinchAround!==void 0&&(B.pinchAround=re.pinchAround),re.noInertia&&(B.noInertia=re.noInertia),s.extend(G,ue),s.extend(q,xe)}this._updateMapTransform(B,G,q),this._changes=[]},Hr.prototype._updateMapTransform=function(B,G,q){var L=this._map,V=L.transform;if(!No(B))return this._fireEvents(G,q,!0);var J=B.panDelta,re=B.zoomDelta,ue=B.bearingDelta,xe=B.pitchDelta,Le=B.around,De=B.pinchAround;De!==void 0&&(Le=De),L._stop(!0),Le=Le||L.transform.centerPoint;var Ue=V.pointLocation(J?Le.sub(J):Le);ue&&(V.bearing+=ue),xe&&(V.pitch+=xe),re&&(V.zoom+=re),V.setLocationAtPoint(Ue,Le),this._map._update(),B.noInertia||this._inertia.record(B),this._fireEvents(G,q,!0)},Hr.prototype._fireEvents=function(B,G,q){var L=this,V=yo(this._eventsInProgress),J=yo(B),re={};for(var ue in B){var xe=B[ue].originalEvent;this._eventsInProgress[ue]||(re[ue+"start"]=xe),this._eventsInProgress[ue]=B[ue]}for(var Le in!V&&J&&this._fireEvent("movestart",J.originalEvent),re)this._fireEvent(Le,re[Le]);for(var De in J&&this._fireEvent("move",J.originalEvent),B){var Ue=B[De].originalEvent;this._fireEvent(De,Ue)}var qe,$e={};for(var lt in this._eventsInProgress){var ft=this._eventsInProgress[lt],wt=ft.handlerName,Et=ft.originalEvent;this._handlersById[wt].isActive()||(delete this._eventsInProgress[lt],qe=G[wt]||Et,$e[lt+"end"]=qe)}for(var At in $e)this._fireEvent(At,$e[At]);var Dt=yo(this._eventsInProgress);if(q&&(V||J)&&!Dt){this._updatingCamera=!0;var Lt=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Wt=function(Ht){return Ht!==0&&-L._bearingSnap<Ht&&Ht<L._bearingSnap};Lt?(Wt(Lt.bearing||this._map.getBearing())&&(Lt.bearing=0),this._map.easeTo(Lt,{originalEvent:qe})):(this._map.fire(new s.Event("moveend",{originalEvent:qe})),Wt(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Hr.prototype._fireEvent=function(B,G){this._map.fire(new s.Event(B,G?{originalEvent:G}:{}))},Hr.prototype._requestFrame=function(){var B=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(G){delete B._frameId,B.handleEvent(new Ls("renderFrame",{timeStamp:G})),B._applyChanges()})},Hr.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Gi=function(B){function G(q,L){B.call(this),this._moving=!1,this._zooming=!1,this.transform=q,this._bearingSnap=L.bearingSnap,s.bindAll(["_renderFrameCallback"],this)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getCenter=function(){return new s.LngLat(this.transform.center.lng,this.transform.center.lat)},G.prototype.setCenter=function(q,L){return this.jumpTo({center:q},L)},G.prototype.panBy=function(q,L,V){return q=s.Point.convert(q).mult(-1),this.panTo(this.transform.center,s.extend({offset:q},L),V)},G.prototype.panTo=function(q,L,V){return this.easeTo(s.extend({center:q},L),V)},G.prototype.getZoom=function(){return this.transform.zoom},G.prototype.setZoom=function(q,L){return this.jumpTo({zoom:q},L),this},G.prototype.zoomTo=function(q,L,V){return this.easeTo(s.extend({zoom:q},L),V)},G.prototype.zoomIn=function(q,L){return this.zoomTo(this.getZoom()+1,q,L),this},G.prototype.zoomOut=function(q,L){return this.zoomTo(this.getZoom()-1,q,L),this},G.prototype.getBearing=function(){return this.transform.bearing},G.prototype.setBearing=function(q,L){return this.jumpTo({bearing:q},L),this},G.prototype.getPadding=function(){return this.transform.padding},G.prototype.setPadding=function(q,L){return this.jumpTo({padding:q},L),this},G.prototype.rotateTo=function(q,L,V){return this.easeTo(s.extend({bearing:q},L),V)},G.prototype.resetNorth=function(q,L){return this.rotateTo(0,s.extend({duration:1e3},q),L),this},G.prototype.resetNorthPitch=function(q,L){return this.easeTo(s.extend({bearing:0,pitch:0,duration:1e3},q),L),this},G.prototype.snapToNorth=function(q,L){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(q,L):this},G.prototype.getPitch=function(){return this.transform.pitch},G.prototype.setPitch=function(q,L){return this.jumpTo({pitch:q},L),this},G.prototype.cameraForBounds=function(q,L){q=s.LngLatBounds.convert(q);var V=L&&L.bearing||0;return this._cameraForBoxAndBearing(q.getNorthWest(),q.getSouthEast(),V,L)},G.prototype._cameraForBoxAndBearing=function(q,L,V,J){var re={top:0,bottom:0,right:0,left:0};if(typeof(J=s.extend({padding:re,offset:[0,0],maxZoom:this.transform.maxZoom},J)).padding=="number"){var ue=J.padding;J.padding={top:ue,bottom:ue,right:ue,left:ue}}J.padding=s.extend(re,J.padding);var xe=this.transform,Le=xe.padding,De=xe.project(s.LngLat.convert(q)),Ue=xe.project(s.LngLat.convert(L)),qe=De.rotate(-V*Math.PI/180),$e=Ue.rotate(-V*Math.PI/180),lt=new s.Point(Math.max(qe.x,$e.x),Math.max(qe.y,$e.y)),ft=new s.Point(Math.min(qe.x,$e.x),Math.min(qe.y,$e.y)),wt=lt.sub(ft),Et=(xe.width-(Le.left+Le.right+J.padding.left+J.padding.right))/wt.x,At=(xe.height-(Le.top+Le.bottom+J.padding.top+J.padding.bottom))/wt.y;if(!(At<0||Et<0)){var Dt=Math.min(xe.scaleZoom(xe.scale*Math.min(Et,At)),J.maxZoom),Lt=typeof J.offset.x=="number"?new s.Point(J.offset.x,J.offset.y):s.Point.convert(J.offset),Wt=(J.padding.left-J.padding.right)/2,Ht=(J.padding.top-J.padding.bottom)/2,jt=new s.Point(Wt,Ht).rotate(V*Math.PI/180),hn=Lt.add(jt).mult(xe.scale/xe.zoomScale(Dt));return{center:xe.unproject(De.add(Ue).div(2).sub(hn)),zoom:Dt,bearing:V}}s.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},G.prototype.fitBounds=function(q,L,V){return this._fitInternal(this.cameraForBounds(q,L),L,V)},G.prototype.fitScreenCoordinates=function(q,L,V,J,re){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(s.Point.convert(q)),this.transform.pointLocation(s.Point.convert(L)),V,J),J,re)},G.prototype._fitInternal=function(q,L,V){return q?(delete(L=s.extend(q,L)).padding,L.linear?this.easeTo(L,V):this.flyTo(L,V)):this},G.prototype.jumpTo=function(q,L){this.stop();var V=this.transform,J=!1,re=!1,ue=!1;return"zoom"in q&&V.zoom!==+q.zoom&&(J=!0,V.zoom=+q.zoom),q.center!==void 0&&(V.center=s.LngLat.convert(q.center)),"bearing"in q&&V.bearing!==+q.bearing&&(re=!0,V.bearing=+q.bearing),"pitch"in q&&V.pitch!==+q.pitch&&(ue=!0,V.pitch=+q.pitch),q.padding==null||V.isPaddingEqual(q.padding)||(V.padding=q.padding),this.fire(new s.Event("movestart",L)).fire(new s.Event("move",L)),J&&this.fire(new s.Event("zoomstart",L)).fire(new s.Event("zoom",L)).fire(new s.Event("zoomend",L)),re&&this.fire(new s.Event("rotatestart",L)).fire(new s.Event("rotate",L)).fire(new s.Event("rotateend",L)),ue&&this.fire(new s.Event("pitchstart",L)).fire(new s.Event("pitch",L)).fire(new s.Event("pitchend",L)),this.fire(new s.Event("moveend",L))},G.prototype.easeTo=function(q,L){var V=this;this._stop(!1,q.easeId),((q=s.extend({offset:[0,0],duration:500,easing:s.ease},q)).animate===!1||!q.essential&&s.browser.prefersReducedMotion)&&(q.duration=0);var J=this.transform,re=this.getZoom(),ue=this.getBearing(),xe=this.getPitch(),Le=this.getPadding(),De="zoom"in q?+q.zoom:re,Ue="bearing"in q?this._normalizeBearing(q.bearing,ue):ue,qe="pitch"in q?+q.pitch:xe,$e="padding"in q?q.padding:J.padding,lt=s.Point.convert(q.offset),ft=J.centerPoint.add(lt),wt=J.pointLocation(ft),Et=s.LngLat.convert(q.center||wt);this._normalizeCenter(Et);var At,Dt,Lt=J.project(wt),Wt=J.project(Et).sub(Lt),Ht=J.zoomScale(De-re);q.around&&(At=s.LngLat.convert(q.around),Dt=J.locationPoint(At));var jt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||De!==re,this._rotating=this._rotating||ue!==Ue,this._pitching=this._pitching||qe!==xe,this._padding=!J.isPaddingEqual($e),this._easeId=q.easeId,this._prepareEase(L,q.noMoveStart,jt),this._ease(function(hn){if(V._zooming&&(J.zoom=s.number(re,De,hn)),V._rotating&&(J.bearing=s.number(ue,Ue,hn)),V._pitching&&(J.pitch=s.number(xe,qe,hn)),V._padding&&(J.interpolatePadding(Le,$e,hn),ft=J.centerPoint.add(lt)),At)J.setLocationAtPoint(At,Dt);else{var vn=J.zoomScale(J.zoom-re),An=De>re?Math.min(2,Ht):Math.max(.5,Ht),Ln=Math.pow(An,1-hn),jn=J.unproject(Lt.add(Wt.mult(hn*Ln)).mult(vn));J.setLocationAtPoint(J.renderWorldCopies?jn.wrap():jn,ft)}V._fireMoveEvents(L)},function(hn){V._afterEase(L,hn)},q),this},G.prototype._prepareEase=function(q,L,V){V===void 0&&(V={}),this._moving=!0,L||V.moving||this.fire(new s.Event("movestart",q)),this._zooming&&!V.zooming&&this.fire(new s.Event("zoomstart",q)),this._rotating&&!V.rotating&&this.fire(new s.Event("rotatestart",q)),this._pitching&&!V.pitching&&this.fire(new s.Event("pitchstart",q))},G.prototype._fireMoveEvents=function(q){this.fire(new s.Event("move",q)),this._zooming&&this.fire(new s.Event("zoom",q)),this._rotating&&this.fire(new s.Event("rotate",q)),this._pitching&&this.fire(new s.Event("pitch",q))},G.prototype._afterEase=function(q,L){if(!this._easeId||!L||this._easeId!==L){delete this._easeId;var V=this._zooming,J=this._rotating,re=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,V&&this.fire(new s.Event("zoomend",q)),J&&this.fire(new s.Event("rotateend",q)),re&&this.fire(new s.Event("pitchend",q)),this.fire(new s.Event("moveend",q))}},G.prototype.flyTo=function(q,L){var V=this;if(!q.essential&&s.browser.prefersReducedMotion){var J=s.pick(q,["center","zoom","bearing","pitch","around"]);return this.jumpTo(J,L)}this.stop(),q=s.extend({offset:[0,0],speed:1.2,curve:1.42,easing:s.ease},q);var re=this.transform,ue=this.getZoom(),xe=this.getBearing(),Le=this.getPitch(),De=this.getPadding(),Ue="zoom"in q?s.clamp(+q.zoom,re.minZoom,re.maxZoom):ue,qe="bearing"in q?this._normalizeBearing(q.bearing,xe):xe,$e="pitch"in q?+q.pitch:Le,lt="padding"in q?q.padding:re.padding,ft=re.zoomScale(Ue-ue),wt=s.Point.convert(q.offset),Et=re.centerPoint.add(wt),At=re.pointLocation(Et),Dt=s.LngLat.convert(q.center||At);this._normalizeCenter(Dt);var Lt=re.project(At),Wt=re.project(Dt).sub(Lt),Ht=q.curve,jt=Math.max(re.width,re.height),hn=jt/ft,vn=Wt.mag();if("minZoom"in q){var An=s.clamp(Math.min(q.minZoom,ue,Ue),re.minZoom,re.maxZoom),Ln=jt/re.zoomScale(An-ue);Ht=Math.sqrt(Ln/vn*2)}var jn=Ht*Ht;function tr(fr){var wr=(hn*hn-jt*jt+(fr?-1:1)*jn*jn*vn*vn)/(2*(fr?hn:jt)*jn*vn);return Math.log(Math.sqrt(wr*wr+1)-wr)}function cr(fr){return(Math.exp(fr)-Math.exp(-fr))/2}function Hn(fr){return(Math.exp(fr)+Math.exp(-fr))/2}var or=tr(0),vr=function(fr){return Hn(or)/Hn(or+Ht*fr)},Ar=function(fr){return jt*((Hn(or)*(cr(wr=or+Ht*fr)/Hn(wr))-cr(or))/jn)/vn;var wr},er=(tr(1)-or)/Ht;if(Math.abs(vn)<1e-6||!isFinite(er)){if(Math.abs(jt-hn)<1e-6)return this.easeTo(q,L);var ar=hn<jt?-1:1;er=Math.abs(Math.log(hn/jt))/Ht,Ar=function(){return 0},vr=function(fr){return Math.exp(ar*Ht*fr)}}if("duration"in q)q.duration=+q.duration;else{var xr="screenSpeed"in q?+q.screenSpeed/Ht:+q.speed;q.duration=1e3*er/xr}return q.maxDuration&&q.duration>q.maxDuration&&(q.duration=0),this._zooming=!0,this._rotating=xe!==qe,this._pitching=$e!==Le,this._padding=!re.isPaddingEqual(lt),this._prepareEase(L,!1),this._ease(function(fr){var wr=fr*er,Er=1/vr(wr);re.zoom=fr===1?Ue:ue+re.scaleZoom(Er),V._rotating&&(re.bearing=s.number(xe,qe,fr)),V._pitching&&(re.pitch=s.number(Le,$e,fr)),V._padding&&(re.interpolatePadding(De,lt,fr),Et=re.centerPoint.add(wt));var Rr=fr===1?Dt:re.unproject(Lt.add(Wt.mult(Ar(wr))).mult(Er));re.setLocationAtPoint(re.renderWorldCopies?Rr.wrap():Rr,Et),V._fireMoveEvents(L)},function(){return V._afterEase(L)},q),this},G.prototype.isEasing=function(){return!!this._easeFrameId},G.prototype.stop=function(){return this._stop()},G.prototype._stop=function(q,L){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var V=this._onEaseEnd;delete this._onEaseEnd,V.call(this,L)}if(!q){var J=this.handlers;J&&J.stop(!1)}return this},G.prototype._ease=function(q,L,V){V.animate===!1||V.duration===0?(q(1),L()):(this._easeStart=s.browser.now(),this._easeOptions=V,this._onEaseFrame=q,this._onEaseEnd=L,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},G.prototype._renderFrameCallback=function(){var q=Math.min((s.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(q)),q<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},G.prototype._normalizeBearing=function(q,L){q=s.wrap(q,-180,180);var V=Math.abs(q-L);return Math.abs(q-360-L)<V&&(q-=360),Math.abs(q+360-L)<V&&(q+=360),q},G.prototype._normalizeCenter=function(q){var L=this.transform;if(L.renderWorldCopies&&!L.lngRange){var V=q.lng-L.center.lng;q.lng+=V>180?-360:V<-180?360:0}},G}(s.Evented),la=function(B){B===void 0&&(B={}),this.options=B,s.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};la.prototype.getDefaultPosition=function(){return"bottom-right"},la.prototype.onAdd=function(B){var G=this.options&&this.options.compact;return this._map=B,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=b.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=b.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),G&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),G===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},la.prototype.onRemove=function(){b.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},la.prototype._setElementTitle=function(B,G){var q=this._map._getUIString("AttributionControl."+G);B.title=q,B.setAttribute("aria-label",q)},la.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},la.prototype._updateEditLink=function(){var B=this._editLink;B||(B=this._editLink=this._container.querySelector(".mapbox-improve-map"));var G=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||s.config.ACCESS_TOKEN}];if(B){var q=G.reduce(function(L,V,J){return V.value&&(L+=V.key+"="+V.value+(J<G.length-1?"&":"")),L},"?");B.href=s.config.FEEDBACK_URL+"/"+q+(this._map._hash?this._map._hash.getHashString(!0):""),B.rel="noopener nofollow",this._setElementTitle(B,"MapFeedback")}},la.prototype._updateData=function(B){!B||B.sourceDataType!=="metadata"&&B.sourceDataType!=="visibility"&&B.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},la.prototype._updateAttributions=function(){if(this._map.style){var B=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?B=B.concat(this.options.customAttribution.map(function(ue){return typeof ue!="string"?"":ue})):typeof this.options.customAttribution=="string"&&B.push(this.options.customAttribution)),this._map.style.stylesheet){var G=this._map.style.stylesheet;this.styleOwner=G.owner,this.styleId=G.id}var q=this._map.style.sourceCaches;for(var L in q){var V=q[L];if(V.used){var J=V.getSource();J.attribution&&B.indexOf(J.attribution)<0&&B.push(J.attribution)}}B.sort(function(ue,xe){return ue.length-xe.length});var re=(B=B.filter(function(ue,xe){for(var Le=xe+1;Le<B.length;Le++)if(B[Le].indexOf(ue)>=0)return!1;return!0})).join(" | ");re!==this._attribHTML&&(this._attribHTML=re,B.length?(this._innerContainer.innerHTML=re,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},la.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var io=function(){s.bindAll(["_updateLogo"],this),s.bindAll(["_updateCompact"],this)};io.prototype.onAdd=function(B){this._map=B,this._container=b.create("div","mapboxgl-ctrl");var G=b.create("a","mapboxgl-ctrl-logo");return G.target="_blank",G.rel="noopener nofollow",G.href="https://www.mapbox.com/",G.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),G.setAttribute("rel","noopener nofollow"),this._container.appendChild(G),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},io.prototype.onRemove=function(){b.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},io.prototype.getDefaultPosition=function(){return"bottom-left"},io.prototype._updateLogo=function(B){B&&B.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},io.prototype._logoRequired=function(){if(this._map.style){var B=this._map.style.sourceCaches;for(var G in B)if(B[G].getSource().mapbox_logo)return!0;return!1}},io.prototype._updateCompact=function(){var B=this._container.children;if(B.length){var G=B[0];this._map.getCanvasContainer().offsetWidth<250?G.classList.add("mapboxgl-compact"):G.classList.remove("mapboxgl-compact")}};var ua=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};ua.prototype.add=function(B){var G=++this._id;return this._queue.push({callback:B,id:G,cancelled:!1}),G},ua.prototype.remove=function(B){for(var G=this._currentlyRunning,q=0,L=G?this._queue.concat(G):this._queue;q<L.length;q+=1){var V=L[q];if(V.id===B)return void(V.cancelled=!0)}},ua.prototype.run=function(B){B===void 0&&(B=0);var G=this._currentlyRunning=this._queue;this._queue=[];for(var q=0,L=G;q<L.length;q+=1){var V=L[q];if(!V.cancelled&&(V.callback(B),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},ua.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var hs={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},ps=s.window.HTMLImageElement,ca=s.window.HTMLElement,Vr=s.window.ImageBitmap,ao=60,ns={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:ao,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Ga=function(B){function G(L){var V=this;if((L=s.extend({},ns,L)).minZoom!=null&&L.maxZoom!=null&&L.minZoom>L.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(L.minPitch!=null&&L.maxPitch!=null&&L.minPitch>L.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(L.minPitch!=null&&L.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(L.maxPitch!=null&&L.maxPitch>ao)throw new Error("maxPitch must be less than or equal to 60");var J=new Wr(L.minZoom,L.maxZoom,L.minPitch,L.maxPitch,L.renderWorldCopies);if(B.call(this,J,L),this._interactive=L.interactive,this._maxTileCacheSize=L.maxTileCacheSize,this._failIfMajorPerformanceCaveat=L.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=L.preserveDrawingBuffer,this._antialias=L.antialias,this._trackResize=L.trackResize,this._bearingSnap=L.bearingSnap,this._refreshExpiredTiles=L.refreshExpiredTiles,this._fadeDuration=L.fadeDuration,this._crossSourceCollisions=L.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=L.collectResourceTiming,this._renderTaskQueue=new ua,this._controls=[],this._mapId=s.uniqueId(),this._locale=s.extend({},hs,L.locale),this._clickTolerance=L.clickTolerance,this._requestManager=new s.RequestManager(L.transformRequest,L.accessToken),typeof L.container=="string"){if(this._container=s.window.document.getElementById(L.container),!this._container)throw new Error("Container '"+L.container+"' not found.")}else{if(!(L.container instanceof ca))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=L.container}if(L.maxBounds&&this.setMaxBounds(L.maxBounds),s.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return V._update(!1)}),this.on("moveend",function(){return V._update(!1)}),this.on("zoom",function(){return V._update(!0)}),s.window!==void 0&&(s.window.addEventListener("online",this._onWindowOnline,!1),s.window.addEventListener("resize",this._onWindowResize,!1),s.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Hr(this,L);var re=typeof L.hash=="string"&&L.hash||void 0;this._hash=L.hash&&new _a(re).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:L.center,zoom:L.zoom,bearing:L.bearing,pitch:L.pitch}),L.bounds&&(this.resize(),this.fitBounds(L.bounds,s.extend({},L.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=L.localIdeographFontFamily,L.style&&this.setStyle(L.style,{localIdeographFontFamily:L.localIdeographFontFamily}),L.attributionControl&&this.addControl(new la({customAttribution:L.customAttribution})),this.addControl(new io,L.logoPosition),this.on("style.load",function(){V.transform.unmodified&&V.jumpTo(V.style.stylesheet)}),this.on("data",function(ue){V._update(ue.dataType==="style"),V.fire(new s.Event(ue.dataType+"data",ue))}),this.on("dataloading",function(ue){V.fire(new s.Event(ue.dataType+"dataloading",ue))})}B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G;var q={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return G.prototype._getMapId=function(){return this._mapId},G.prototype.addControl=function(L,V){if(V===void 0&&(V=L.getDefaultPosition?L.getDefaultPosition():"top-right"),!L||!L.onAdd)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var J=L.onAdd(this);this._controls.push(L);var re=this._controlPositions[V];return V.indexOf("bottom")!==-1?re.insertBefore(J,re.firstChild):re.appendChild(J),this},G.prototype.removeControl=function(L){if(!L||!L.onRemove)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var V=this._controls.indexOf(L);return V>-1&&this._controls.splice(V,1),L.onRemove(this),this},G.prototype.hasControl=function(L){return this._controls.indexOf(L)>-1},G.prototype.resize=function(L){var V=this._containerDimensions(),J=V[0],re=V[1];this._resizeCanvas(J,re),this.transform.resize(J,re),this.painter.resize(J,re);var ue=!this._moving;return ue&&(this.stop(),this.fire(new s.Event("movestart",L)).fire(new s.Event("move",L))),this.fire(new s.Event("resize",L)),ue&&this.fire(new s.Event("moveend",L)),this},G.prototype.getBounds=function(){return this.transform.getBounds()},G.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},G.prototype.setMaxBounds=function(L){return this.transform.setMaxBounds(s.LngLatBounds.convert(L)),this._update()},G.prototype.setMinZoom=function(L){if((L=L??-2)>=-2&&L<=this.transform.maxZoom)return this.transform.minZoom=L,this._update(),this.getZoom()<L&&this.setZoom(L),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},G.prototype.getMinZoom=function(){return this.transform.minZoom},G.prototype.setMaxZoom=function(L){if((L=L??22)>=this.transform.minZoom)return this.transform.maxZoom=L,this._update(),this.getZoom()>L&&this.setZoom(L),this;throw new Error("maxZoom must be greater than the current minZoom")},G.prototype.getMaxZoom=function(){return this.transform.maxZoom},G.prototype.setMinPitch=function(L){if((L=L??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(L>=0&&L<=this.transform.maxPitch)return this.transform.minPitch=L,this._update(),this.getPitch()<L&&this.setPitch(L),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},G.prototype.getMinPitch=function(){return this.transform.minPitch},G.prototype.setMaxPitch=function(L){if((L=L??ao)>ao)throw new Error("maxPitch must be less than or equal to 60");if(L>=this.transform.minPitch)return this.transform.maxPitch=L,this._update(),this.getPitch()>L&&this.setPitch(L),this;throw new Error("maxPitch must be greater than the current minPitch")},G.prototype.getMaxPitch=function(){return this.transform.maxPitch},G.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},G.prototype.setRenderWorldCopies=function(L){return this.transform.renderWorldCopies=L,this._update()},G.prototype.project=function(L){return this.transform.locationPoint(s.LngLat.convert(L))},G.prototype.unproject=function(L){return this.transform.pointLocation(s.Point.convert(L))},G.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},G.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},G.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},G.prototype._createDelegatedListener=function(L,V,J){var re,ue=this;if(L==="mouseenter"||L==="mouseover"){var xe=!1;return{layer:V,listener:J,delegates:{mousemove:function(De){var Ue=ue.getLayer(V)?ue.queryRenderedFeatures(De.point,{layers:[V]}):[];Ue.length?xe||(xe=!0,J.call(ue,new ta(L,ue,De.originalEvent,{features:Ue}))):xe=!1},mouseout:function(){xe=!1}}}}if(L==="mouseleave"||L==="mouseout"){var Le=!1;return{layer:V,listener:J,delegates:{mousemove:function(De){(ue.getLayer(V)?ue.queryRenderedFeatures(De.point,{layers:[V]}):[]).length?Le=!0:Le&&(Le=!1,J.call(ue,new ta(L,ue,De.originalEvent)))},mouseout:function(De){Le&&(Le=!1,J.call(ue,new ta(L,ue,De.originalEvent)))}}}}return{layer:V,listener:J,delegates:(re={},re[L]=function(De){var Ue=ue.getLayer(V)?ue.queryRenderedFeatures(De.point,{layers:[V]}):[];Ue.length&&(De.features=Ue,J.call(ue,De),delete De.features)},re)}},G.prototype.on=function(L,V,J){if(J===void 0)return B.prototype.on.call(this,L,V);var re=this._createDelegatedListener(L,V,J);for(var ue in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[L]=this._delegatedListeners[L]||[],this._delegatedListeners[L].push(re),re.delegates)this.on(ue,re.delegates[ue]);return this},G.prototype.once=function(L,V,J){if(J===void 0)return B.prototype.once.call(this,L,V);var re=this._createDelegatedListener(L,V,J);for(var ue in re.delegates)this.once(ue,re.delegates[ue]);return this},G.prototype.off=function(L,V,J){var re=this;return J===void 0?B.prototype.off.call(this,L,V):(this._delegatedListeners&&this._delegatedListeners[L]&&function(ue){for(var xe=ue[L],Le=0;Le<xe.length;Le++){var De=xe[Le];if(De.layer===V&&De.listener===J){for(var Ue in De.delegates)re.off(Ue,De.delegates[Ue]);return xe.splice(Le,1),re}}}(this._delegatedListeners),this)},G.prototype.queryRenderedFeatures=function(L,V){if(!this.style)return[];var J;if(V!==void 0||L===void 0||L instanceof s.Point||Array.isArray(L)||(V=L,L=void 0),V=V||{},(L=L||[[0,0],[this.transform.width,this.transform.height]])instanceof s.Point||typeof L[0]=="number")J=[s.Point.convert(L)];else{var re=s.Point.convert(L[0]),ue=s.Point.convert(L[1]);J=[re,new s.Point(ue.x,re.y),ue,new s.Point(re.x,ue.y),re]}return this.style.queryRenderedFeatures(J,V,this.transform)},G.prototype.querySourceFeatures=function(L,V){return this.style.querySourceFeatures(L,V)},G.prototype.setStyle=function(L,V){return(V=s.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},V)).diff!==!1&&V.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&L?(this._diffStyle(L,V),this):(this._localIdeographFontFamily=V.localIdeographFontFamily,this._updateStyle(L,V))},G.prototype._getUIString=function(L){var V=this._locale[L];if(V==null)throw new Error("Missing UI string '"+L+"'");return V},G.prototype._updateStyle=function(L,V){return this.style&&(this.style.setEventedParent(null),this.style._remove()),L?(this.style=new Un(this,V||{}),this.style.setEventedParent(this,{style:this.style}),typeof L=="string"?this.style.loadURL(L):this.style.loadJSON(L),this):(delete this.style,this)},G.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Un(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},G.prototype._diffStyle=function(L,V){var J=this;if(typeof L=="string"){var re=this._requestManager.normalizeStyleURL(L),ue=this._requestManager.transformRequest(re,s.ResourceType.Style);s.getJSON(ue,function(xe,Le){xe?J.fire(new s.ErrorEvent(xe)):Le&&J._updateDiff(Le,V)})}else typeof L=="object"&&this._updateDiff(L,V)},G.prototype._updateDiff=function(L,V){try{this.style.setState(L)&&this._update(!0)}catch(J){s.warnOnce("Unable to perform style diff: "+(J.message||J.error||J)+".  Rebuilding the style from scratch."),this._updateStyle(L,V)}},G.prototype.getStyle=function(){if(this.style)return this.style.serialize()},G.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():s.warnOnce("There is no style added to the map.")},G.prototype.addSource=function(L,V){return this._lazyInitEmptyStyle(),this.style.addSource(L,V),this._update(!0)},G.prototype.isSourceLoaded=function(L){var V=this.style&&this.style.sourceCaches[L];if(V!==void 0)return V.loaded();this.fire(new s.ErrorEvent(new Error("There is no source with ID '"+L+"'")))},G.prototype.areTilesLoaded=function(){var L=this.style&&this.style.sourceCaches;for(var V in L){var J=L[V]._tiles;for(var re in J){var ue=J[re];if(ue.state!=="loaded"&&ue.state!=="errored")return!1}}return!0},G.prototype.addSourceType=function(L,V,J){return this._lazyInitEmptyStyle(),this.style.addSourceType(L,V,J)},G.prototype.removeSource=function(L){return this.style.removeSource(L),this._update(!0)},G.prototype.getSource=function(L){return this.style.getSource(L)},G.prototype.addImage=function(L,V,J){J===void 0&&(J={});var re=J.pixelRatio;re===void 0&&(re=1);var ue=J.sdf;ue===void 0&&(ue=!1);var xe=J.stretchX,Le=J.stretchY,De=J.content;if(this._lazyInitEmptyStyle(),V instanceof ps||Vr&&V instanceof Vr){var Ue=s.browser.getImageData(V),qe=Ue.width,$e=Ue.height,lt=Ue.data;this.style.addImage(L,{data:new s.RGBAImage({width:qe,height:$e},lt),pixelRatio:re,stretchX:xe,stretchY:Le,content:De,sdf:ue,version:0})}else{if(V.width===void 0||V.height===void 0)return this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var ft=V.width,wt=V.height,Et=V.data,At=V;this.style.addImage(L,{data:new s.RGBAImage({width:ft,height:wt},new Uint8Array(Et)),pixelRatio:re,stretchX:xe,stretchY:Le,content:De,sdf:ue,version:0,userImage:At}),At.onAdd&&At.onAdd(this,L)}},G.prototype.updateImage=function(L,V){var J=this.style.getImage(L);if(!J)return this.fire(new s.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var re=V instanceof ps||Vr&&V instanceof Vr?s.browser.getImageData(V):V,ue=re.width,xe=re.height,Le=re.data;if(ue===void 0||xe===void 0)return this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(ue!==J.data.width||xe!==J.data.height)return this.fire(new s.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var De=!(V instanceof ps||Vr&&V instanceof Vr);J.data.replace(Le,De),this.style.updateImage(L,J)},G.prototype.hasImage=function(L){return L?!!this.style.getImage(L):(this.fire(new s.ErrorEvent(new Error("Missing required image id"))),!1)},G.prototype.removeImage=function(L){this.style.removeImage(L)},G.prototype.loadImage=function(L,V){s.getImage(this._requestManager.transformRequest(L,s.ResourceType.Image),V)},G.prototype.listImages=function(){return this.style.listImages()},G.prototype.addLayer=function(L,V){return this._lazyInitEmptyStyle(),this.style.addLayer(L,V),this._update(!0)},G.prototype.moveLayer=function(L,V){return this.style.moveLayer(L,V),this._update(!0)},G.prototype.removeLayer=function(L){return this.style.removeLayer(L),this._update(!0)},G.prototype.getLayer=function(L){return this.style.getLayer(L)},G.prototype.setLayerZoomRange=function(L,V,J){return this.style.setLayerZoomRange(L,V,J),this._update(!0)},G.prototype.setFilter=function(L,V,J){return J===void 0&&(J={}),this.style.setFilter(L,V,J),this._update(!0)},G.prototype.getFilter=function(L){return this.style.getFilter(L)},G.prototype.setPaintProperty=function(L,V,J,re){return re===void 0&&(re={}),this.style.setPaintProperty(L,V,J,re),this._update(!0)},G.prototype.getPaintProperty=function(L,V){return this.style.getPaintProperty(L,V)},G.prototype.setLayoutProperty=function(L,V,J,re){return re===void 0&&(re={}),this.style.setLayoutProperty(L,V,J,re),this._update(!0)},G.prototype.getLayoutProperty=function(L,V){return this.style.getLayoutProperty(L,V)},G.prototype.setLight=function(L,V){return V===void 0&&(V={}),this._lazyInitEmptyStyle(),this.style.setLight(L,V),this._update(!0)},G.prototype.getLight=function(){return this.style.getLight()},G.prototype.setFeatureState=function(L,V){return this.style.setFeatureState(L,V),this._update()},G.prototype.removeFeatureState=function(L,V){return this.style.removeFeatureState(L,V),this._update()},G.prototype.getFeatureState=function(L){return this.style.getFeatureState(L)},G.prototype.getContainer=function(){return this._container},G.prototype.getCanvasContainer=function(){return this._canvasContainer},G.prototype.getCanvas=function(){return this._canvas},G.prototype._containerDimensions=function(){var L=0,V=0;return this._container&&(L=this._container.clientWidth||400,V=this._container.clientHeight||300),[L,V]},G.prototype._detectMissingCSS=function(){s.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&s.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},G.prototype._setupContainer=function(){var L=this._container;L.classList.add("mapboxgl-map"),(this._missingCSSCanary=b.create("div","mapboxgl-canary",L)).style.visibility="hidden",this._detectMissingCSS();var V=this._canvasContainer=b.create("div","mapboxgl-canvas-container",L);this._interactive&&V.classList.add("mapboxgl-interactive"),this._canvas=b.create("canvas","mapboxgl-canvas",V),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var J=this._containerDimensions();this._resizeCanvas(J[0],J[1]);var re=this._controlContainer=b.create("div","mapboxgl-control-container",L),ue=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(xe){ue[xe]=b.create("div","mapboxgl-ctrl-"+xe,re)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},G.prototype._resizeCanvas=function(L,V){var J=s.browser.devicePixelRatio||1;this._canvas.width=J*L,this._canvas.height=J*V,this._canvas.style.width=L+"px",this._canvas.style.height=V+"px"},G.prototype._setupPainter=function(){var L=s.extend({},T.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),V=this._canvas.getContext("webgl",L)||this._canvas.getContext("experimental-webgl",L);V?(this.painter=new $r(V,this.transform),s.webpSupported.testSupport(V)):this.fire(new s.ErrorEvent(new Error("Failed to initialize WebGL")))},G.prototype._contextLost=function(L){L.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new s.Event("webglcontextlost",{originalEvent:L}))},G.prototype._contextRestored=function(L){this._setupPainter(),this.resize(),this._update(),this.fire(new s.Event("webglcontextrestored",{originalEvent:L}))},G.prototype._onMapScroll=function(L){if(L.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},G.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},G.prototype._update=function(L){return this.style?(this._styleDirty=this._styleDirty||L,this._sourcesDirty=!0,this.triggerRepaint(),this):this},G.prototype._requestRenderFrame=function(L){return this._update(),this._renderTaskQueue.add(L)},G.prototype._cancelRenderFrame=function(L){this._renderTaskQueue.remove(L)},G.prototype._render=function(L){var V,J=this,re=0,ue=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(V=ue.createQueryEXT(),ue.beginQueryEXT(ue.TIME_ELAPSED_EXT,V),re=s.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(L),!this._removed){var xe=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Le=this.transform.zoom,De=s.browser.now();this.style.zoomHistory.update(Le,De);var Ue=new s.EvaluationParameters(Le,{now:De,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),qe=Ue.crossFadingFactor();qe===1&&qe===this._crossFadingFactor||(xe=!0,this._crossFadingFactor=qe),this.style.update(Ue)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new s.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new s.Event("load"))),this.style&&(this.style.hasTransitions()||xe)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var $e=s.browser.now()-re;ue.endQueryEXT(ue.TIME_ELAPSED_EXT,V),setTimeout(function(){var wt=ue.getQueryObjectEXT(V,ue.QUERY_RESULT_EXT)/1e6;ue.deleteQueryEXT(V),J.fire(new s.Event("gpu-timing-frame",{cpuTime:$e,gpuTime:wt}))},50)}if(this.listens("gpu-timing-layer")){var lt=this.painter.collectGpuTimers();setTimeout(function(){var wt=J.painter.queryGpuTimers(lt);J.fire(new s.Event("gpu-timing-layer",{layerTimes:wt}))},50)}var ft=this._sourcesDirty||this._styleDirty||this._placementDirty;return ft||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.Event("idle")),!this._loaded||this._fullyLoaded||ft||(this._fullyLoaded=!0),this}},G.prototype.remove=function(){this._hash&&this._hash.remove();for(var L=0,V=this._controls;L<V.length;L+=1)V[L].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),s.window!==void 0&&(s.window.removeEventListener("resize",this._onWindowResize,!1),s.window.removeEventListener("orientationchange",this._onWindowResize,!1),s.window.removeEventListener("online",this._onWindowOnline,!1));var J=this.painter.context.gl.getExtension("WEBGL_lose_context");J&&J.loseContext&&J.loseContext(),ds(this._canvasContainer),ds(this._controlContainer),ds(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new s.Event("remove"))},G.prototype.triggerRepaint=function(){var L=this;this.style&&!this._frame&&(this._frame=s.browser.frame(function(V){L._frame=null,L._render(V)}))},G.prototype._onWindowOnline=function(){this._update()},G.prototype._onWindowResize=function(L){this._trackResize&&this.resize({originalEvent:L})._update()},q.showTileBoundaries.get=function(){return!!this._showTileBoundaries},q.showTileBoundaries.set=function(L){this._showTileBoundaries!==L&&(this._showTileBoundaries=L,this._update())},q.showPadding.get=function(){return!!this._showPadding},q.showPadding.set=function(L){this._showPadding!==L&&(this._showPadding=L,this._update())},q.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},q.showCollisionBoxes.set=function(L){this._showCollisionBoxes!==L&&(this._showCollisionBoxes=L,L?this.style._generateCollisionBoxes():this._update())},q.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},q.showOverdrawInspector.set=function(L){this._showOverdrawInspector!==L&&(this._showOverdrawInspector=L,this._update())},q.repaint.get=function(){return!!this._repaint},q.repaint.set=function(L){this._repaint!==L&&(this._repaint=L,this.triggerRepaint())},q.vertices.get=function(){return!!this._vertices},q.vertices.set=function(L){this._vertices=L,this._update()},G.prototype._setCacheLimits=function(L,V){s.setCacheLimits(L,V)},q.version.get=function(){return s.version},Object.defineProperties(G.prototype,q),G}(Gi);function ds(B){B.parentNode&&B.parentNode.removeChild(B)}var gs={showCompass:!0,showZoom:!0,visualizePitch:!1},Wa=function(B){var G=this;this.options=s.extend({},gs,B),this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(q){return q.preventDefault()}),this.options.showZoom&&(s.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(q){return G._map.zoomIn({},{originalEvent:q})}),b.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(q){return G._map.zoomOut({},{originalEvent:q})}),b.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(s.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(q){G.options.visualizePitch?G._map.resetNorthPitch({},{originalEvent:q}):G._map.resetNorth({},{originalEvent:q})}),this._compassIcon=b.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Wa.prototype._updateZoomButtons=function(){var B=this._map.getZoom(),G=B===this._map.getMaxZoom(),q=B===this._map.getMinZoom();this._zoomInButton.disabled=G,this._zoomOutButton.disabled=q,this._zoomInButton.setAttribute("aria-disabled",G.toString()),this._zoomOutButton.setAttribute("aria-disabled",q.toString())},Wa.prototype._rotateCompassArrow=function(){var B=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=B},Wa.prototype.onAdd=function(B){return this._map=B,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new li(this._map,this._compass,this.options.visualizePitch)),this._container},Wa.prototype.onRemove=function(){b.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Wa.prototype._createButton=function(B,G){var q=b.create("button",B,this._container);return q.type="button",q.addEventListener("click",G),q},Wa.prototype._setButtonTitle=function(B,G){var q=this._map._getUIString("NavigationControl."+G);B.title=q,B.setAttribute("aria-label",q)};var li=function(B,G,q){q===void 0&&(q=!1),this._clickTolerance=10,this.element=G,this.mouseRotate=new vo({clickTolerance:B.dragRotate._mouseRotate._clickTolerance}),this.map=B,q&&(this.mousePitch=new Ca({clickTolerance:B.dragRotate._mousePitch._clickTolerance})),s.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),b.addEventListener(G,"mousedown",this.mousedown),b.addEventListener(G,"touchstart",this.touchstart,{passive:!1}),b.addEventListener(G,"touchmove",this.touchmove),b.addEventListener(G,"touchend",this.touchend),b.addEventListener(G,"touchcancel",this.reset)};function rs(B,G,q){if(B=new s.LngLat(B.lng,B.lat),G){var L=new s.LngLat(B.lng-360,B.lat),V=new s.LngLat(B.lng+360,B.lat),J=q.locationPoint(B).distSqr(G);q.locationPoint(L).distSqr(G)<J?B=L:q.locationPoint(V).distSqr(G)<J&&(B=V)}for(;Math.abs(B.lng-q.center.lng)>180;){var re=q.locationPoint(B);if(re.x>=0&&re.y>=0&&re.x<=q.width&&re.y<=q.height)break;B.lng>q.center.lng?B.lng-=360:B.lng+=360}return B}li.prototype.down=function(B,G){this.mouseRotate.mousedown(B,G),this.mousePitch&&this.mousePitch.mousedown(B,G),b.disableDrag()},li.prototype.move=function(B,G){var q=this.map,L=this.mouseRotate.mousemoveWindow(B,G);if(L&&L.bearingDelta&&q.setBearing(q.getBearing()+L.bearingDelta),this.mousePitch){var V=this.mousePitch.mousemoveWindow(B,G);V&&V.pitchDelta&&q.setPitch(q.getPitch()+V.pitchDelta)}},li.prototype.off=function(){var B=this.element;b.removeEventListener(B,"mousedown",this.mousedown),b.removeEventListener(B,"touchstart",this.touchstart,{passive:!1}),b.removeEventListener(B,"touchmove",this.touchmove),b.removeEventListener(B,"touchend",this.touchend),b.removeEventListener(B,"touchcancel",this.reset),this.offTemp()},li.prototype.offTemp=function(){b.enableDrag(),b.removeEventListener(s.window,"mousemove",this.mousemove),b.removeEventListener(s.window,"mouseup",this.mouseup)},li.prototype.mousedown=function(B){this.down(s.extend({},B,{ctrlKey:!0,preventDefault:function(){return B.preventDefault()}}),b.mousePos(this.element,B)),b.addEventListener(s.window,"mousemove",this.mousemove),b.addEventListener(s.window,"mouseup",this.mouseup)},li.prototype.mousemove=function(B){this.move(B,b.mousePos(this.element,B))},li.prototype.mouseup=function(B){this.mouseRotate.mouseupWindow(B),this.mousePitch&&this.mousePitch.mouseupWindow(B),this.offTemp()},li.prototype.touchstart=function(B){B.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=b.touchPos(this.element,B.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return B.preventDefault()}},this._startPos))},li.prototype.touchmove=function(B){B.targetTouches.length!==1?this.reset():(this._lastPos=b.touchPos(this.element,B.targetTouches)[0],this.move({preventDefault:function(){return B.preventDefault()}},this._lastPos))},li.prototype.touchend=function(B){B.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},li.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var kr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Cr(B,G,q){var L=B.classList;for(var V in kr)L.remove("mapboxgl-"+q+"-anchor-"+V);L.add("mapboxgl-"+q+"-anchor-"+G)}var wa,oo=function(B){function G(q,L){if(B.call(this),(q instanceof s.window.HTMLElement||L)&&(q=s.extend({element:q},L)),s.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=q&&q.anchor||"center",this._color=q&&q.color||"#3FB1CE",this._scale=q&&q.scale||1,this._draggable=q&&q.draggable||!1,this._clickTolerance=q&&q.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=q&&q.rotation||0,this._rotationAlignment=q&&q.rotationAlignment||"auto",this._pitchAlignment=q&&q.pitchAlignment&&q.pitchAlignment!=="auto"?q.pitchAlignment:this._rotationAlignment,q&&q.element)this._element=q.element,this._offset=s.Point.convert(q&&q.offset||[0,0]);else{this._defaultMarker=!0,this._element=b.create("div"),this._element.setAttribute("aria-label","Map marker");var V=b.createNS("http://www.w3.org/2000/svg","svg");V.setAttributeNS(null,"display","block"),V.setAttributeNS(null,"height","41px"),V.setAttributeNS(null,"width","27px"),V.setAttributeNS(null,"viewBox","0 0 27 41");var J=b.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"stroke","none"),J.setAttributeNS(null,"stroke-width","1"),J.setAttributeNS(null,"fill","none"),J.setAttributeNS(null,"fill-rule","evenodd");var re=b.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"fill-rule","nonzero");var ue=b.createNS("http://www.w3.org/2000/svg","g");ue.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ue.setAttributeNS(null,"fill","#000000");for(var xe=0,Le=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];xe<Le.length;xe+=1){var De=Le[xe],Ue=b.createNS("http://www.w3.org/2000/svg","ellipse");Ue.setAttributeNS(null,"opacity","0.04"),Ue.setAttributeNS(null,"cx","10.5"),Ue.setAttributeNS(null,"cy","5.80029008"),Ue.setAttributeNS(null,"rx",De.rx),Ue.setAttributeNS(null,"ry",De.ry),ue.appendChild(Ue)}var qe=b.createNS("http://www.w3.org/2000/svg","g");qe.setAttributeNS(null,"fill",this._color);var $e=b.createNS("http://www.w3.org/2000/svg","path");$e.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),qe.appendChild($e);var lt=b.createNS("http://www.w3.org/2000/svg","g");lt.setAttributeNS(null,"opacity","0.25"),lt.setAttributeNS(null,"fill","#000000");var ft=b.createNS("http://www.w3.org/2000/svg","path");ft.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),lt.appendChild(ft);var wt=b.createNS("http://www.w3.org/2000/svg","g");wt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),wt.setAttributeNS(null,"fill","#FFFFFF");var Et=b.createNS("http://www.w3.org/2000/svg","g");Et.setAttributeNS(null,"transform","translate(8.0, 8.0)");var At=b.createNS("http://www.w3.org/2000/svg","circle");At.setAttributeNS(null,"fill","#000000"),At.setAttributeNS(null,"opacity","0.25"),At.setAttributeNS(null,"cx","5.5"),At.setAttributeNS(null,"cy","5.5"),At.setAttributeNS(null,"r","5.4999962");var Dt=b.createNS("http://www.w3.org/2000/svg","circle");Dt.setAttributeNS(null,"fill","#FFFFFF"),Dt.setAttributeNS(null,"cx","5.5"),Dt.setAttributeNS(null,"cy","5.5"),Dt.setAttributeNS(null,"r","5.4999962"),Et.appendChild(At),Et.appendChild(Dt),re.appendChild(ue),re.appendChild(qe),re.appendChild(lt),re.appendChild(wt),re.appendChild(Et),V.appendChild(re),V.setAttributeNS(null,"height",41*this._scale+"px"),V.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(V),this._offset=s.Point.convert(q&&q.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Lt){Lt.preventDefault()}),this._element.addEventListener("mousedown",function(Lt){Lt.preventDefault()}),Cr(this._element,this._anchor,"marker"),this._popup=null}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.addTo=function(q){return this.remove(),this._map=q,q.getCanvasContainer().appendChild(this._element),q.on("move",this._update),q.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},G.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),b.remove(this._element),this._popup&&this._popup.remove(),this},G.prototype.getLngLat=function(){return this._lngLat},G.prototype.setLngLat=function(q){return this._lngLat=s.LngLat.convert(q),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},G.prototype.getElement=function(){return this._element},G.prototype.setPopup=function(q){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),q){if(!("offset"in q.options)){var L=13.5,V=Math.sqrt(Math.pow(L,2)/2);q.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[V,-1*(24.6+V)],"bottom-right":[-V,-1*(24.6+V)],left:[L,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=q,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},G.prototype._onKeyPress=function(q){var L=q.code,V=q.charCode||q.keyCode;L!=="Space"&&L!=="Enter"&&V!==32&&V!==13||this.togglePopup()},G.prototype._onMapClick=function(q){var L=q.originalEvent.target,V=this._element;this._popup&&(L===V||V.contains(L))&&this.togglePopup()},G.prototype.getPopup=function(){return this._popup},G.prototype.togglePopup=function(){var q=this._popup;return q?(q.isOpen()?q.remove():q.addTo(this._map),this):this},G.prototype._update=function(q){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=rs(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var L="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?L="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(L="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var V="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?V="rotateX(0deg)":this._pitchAlignment==="map"&&(V="rotateX("+this._map.getPitch()+"deg)"),q&&q.type!=="moveend"||(this._pos=this._pos.round()),b.setTransform(this._element,kr[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+V+" "+L)}},G.prototype.getOffset=function(){return this._offset},G.prototype.setOffset=function(q){return this._offset=s.Point.convert(q),this._update(),this},G.prototype._onMove=function(q){if(!this._isDragging){var L=this._clickTolerance||this._map._clickTolerance;this._isDragging=q.point.dist(this._pointerdownPos)>=L}this._isDragging&&(this._pos=q.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.Event("dragstart"))),this.fire(new s.Event("drag")))},G.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.Event("dragend")),this._state="inactive"},G.prototype._addDragHandler=function(q){this._element.contains(q.originalEvent.target)&&(q.preventDefault(),this._positionDelta=q.point.sub(this._pos).add(this._offset),this._pointerdownPos=q.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},G.prototype.setDraggable=function(q){return this._draggable=!!q,this._map&&(q?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},G.prototype.isDraggable=function(){return this._draggable},G.prototype.setRotation=function(q){return this._rotation=q||0,this._update(),this},G.prototype.getRotation=function(){return this._rotation},G.prototype.setRotationAlignment=function(q){return this._rotationAlignment=q||"auto",this._update(),this},G.prototype.getRotationAlignment=function(){return this._rotationAlignment},G.prototype.setPitchAlignment=function(q){return this._pitchAlignment=q&&q!=="auto"?q:this._rotationAlignment,this._update(),this},G.prototype.getPitchAlignment=function(){return this._pitchAlignment},G}(s.Evented),xo={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Ei=0,so=!1,Qr=function(B){function G(q){B.call(this),this.options=s.extend({},xo,q),s.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.onAdd=function(q){return this._map=q,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),L=this._setupUI,wa!==void 0?L(wa):s.window.navigator.permissions!==void 0?s.window.navigator.permissions.query({name:"geolocation"}).then(function(V){wa=V.state!=="denied",L(wa)}):(wa=!!s.window.navigator.geolocation,L(wa)),this._container;var L},G.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(s.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),b.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ei=0,so=!1},G.prototype._isOutOfMapMaxBounds=function(q){var L=this._map.getMaxBounds(),V=q.coords;return L&&(V.longitude<L.getWest()||V.longitude>L.getEast()||V.latitude<L.getSouth()||V.latitude>L.getNorth())},G.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},G.prototype._onSuccess=function(q){if(this._map){if(this._isOutOfMapMaxBounds(q))return this._setErrorState(),this.fire(new s.Event("outofmaxbounds",q)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=q,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(q),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(q),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("geolocate",q)),this._finish()}},G.prototype._updateCamera=function(q){var L=new s.LngLat(q.coords.longitude,q.coords.latitude),V=q.coords.accuracy,J=this._map.getBearing(),re=s.extend({bearing:J},this.options.fitBoundsOptions);this._map.fitBounds(L.toBounds(V),re,{geolocateSource:!0})},G.prototype._updateMarker=function(q){if(q){var L=new s.LngLat(q.coords.longitude,q.coords.latitude);this._accuracyCircleMarker.setLngLat(L).addTo(this._map),this._userLocationDotMarker.setLngLat(L).addTo(this._map),this._accuracy=q.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},G.prototype._updateCircleRadius=function(){var q=this._map._container.clientHeight/2,L=this._map.unproject([0,q]),V=this._map.unproject([1,q]),J=L.distanceTo(V),re=Math.ceil(2*this._accuracy/J);this._circleElement.style.width=re+"px",this._circleElement.style.height=re+"px"},G.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},G.prototype._onError=function(q){if(this._map){if(this.options.trackUserLocation)if(q.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var L=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=L,this._geolocateButton.setAttribute("aria-label",L),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(q.code===3&&so)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("error",q)),this._finish()}},G.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},G.prototype._setupUI=function(q){var L=this;if(this._container.addEventListener("contextmenu",function(re){return re.preventDefault()}),this._geolocateButton=b.create("button","mapboxgl-ctrl-geolocate",this._container),b.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",q===!1){s.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var V=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=V,this._geolocateButton.setAttribute("aria-label",V)}else{var J=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=J,this._geolocateButton.setAttribute("aria-label",J)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=b.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new oo(this._dotElement),this._circleElement=b.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new oo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(re){var ue=re.originalEvent&&re.originalEvent.type==="resize";re.geolocateSource||L._watchState!=="ACTIVE_LOCK"||ue||(L._watchState="BACKGROUND",L._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),L._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),L.fire(new s.Event("trackuserlocationend")))})},G.prototype.trigger=function(){if(!this._setup)return s.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ei--,so=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new s.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var q;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Ei>1?(q={maximumAge:6e5,timeout:0},so=!0):(q=this.options.positionOptions,so=!1),this._geolocationWatchID=s.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,q)}}else s.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},G.prototype._clearWatch=function(){s.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},G}(s.Evented),fl={maxWidth:100,unit:"metric"},Ta=function(B){this.options=s.extend({},fl,B),s.bindAll(["_onMove","setUnit"],this)};function ni(B,G,q){var L=q&&q.maxWidth||100,V=B._container.clientHeight/2,J=B.unproject([0,V]),re=B.unproject([L,V]),ue=J.distanceTo(re);if(q&&q.unit==="imperial"){var xe=3.2808*ue;xe>5280?hi(G,L,xe/5280,B._getUIString("ScaleControl.Miles")):hi(G,L,xe,B._getUIString("ScaleControl.Feet"))}else q&&q.unit==="nautical"?hi(G,L,ue/1852,B._getUIString("ScaleControl.NauticalMiles")):ue>=1e3?hi(G,L,ue/1e3,B._getUIString("ScaleControl.Kilometers")):hi(G,L,ue,B._getUIString("ScaleControl.Meters"))}function hi(B,G,q,L){var V,J,re,ue=(V=q,(J=Math.pow(10,(""+Math.floor(V)).length-1))*((re=V/J)>=10?10:re>=5?5:re>=3?3:re>=2?2:re>=1?1:function(Le){var De=Math.pow(10,Math.ceil(-Math.log(Le)/Math.LN10));return Math.round(Le*De)/De}(re))),xe=ue/q;B.style.width=G*xe+"px",B.innerHTML=ue+"&nbsp;"+L}Ta.prototype.getDefaultPosition=function(){return"bottom-left"},Ta.prototype._onMove=function(){ni(this._map,this._container,this.options)},Ta.prototype.onAdd=function(B){return this._map=B,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",B.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ta.prototype.onRemove=function(){b.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ta.prototype.setUnit=function(B){this.options.unit=B,ni(this._map,this._container,this.options)};var ga=function(B){this._fullscreen=!1,B&&B.container&&(B.container instanceof s.window.HTMLElement?this._container=B.container:s.warnOnce("Full screen control 'container' must be a DOM element.")),s.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in s.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in s.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in s.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in s.window.document&&(this._fullscreenchange="MSFullscreenChange")};ga.prototype.onAdd=function(B){return this._map=B,this._container||(this._container=this._map.getContainer()),this._controlContainer=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",s.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},ga.prototype.onRemove=function(){b.remove(this._controlContainer),this._map=null,s.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},ga.prototype._checkFullscreenSupport=function(){return!!(s.window.document.fullscreenEnabled||s.window.document.mozFullScreenEnabled||s.window.document.msFullscreenEnabled||s.window.document.webkitFullscreenEnabled)},ga.prototype._setupUI=function(){var B=this._fullscreenButton=b.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);b.create("span","mapboxgl-ctrl-icon",B).setAttribute("aria-hidden",!0),B.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),s.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},ga.prototype._updateTitle=function(){var B=this._getTitle();this._fullscreenButton.setAttribute("aria-label",B),this._fullscreenButton.title=B},ga.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},ga.prototype._isFullscreen=function(){return this._fullscreen},ga.prototype._changeIcon=function(){(s.window.document.fullscreenElement||s.window.document.mozFullScreenElement||s.window.document.webkitFullscreenElement||s.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},ga.prototype._onClickFullscreen=function(){this._isFullscreen()?s.window.document.exitFullscreen?s.window.document.exitFullscreen():s.window.document.mozCancelFullScreen?s.window.document.mozCancelFullScreen():s.window.document.msExitFullscreen?s.window.document.msExitFullscreen():s.window.document.webkitCancelFullScreen&&s.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var jo={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Qs=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Xe=function(B){function G(q){B.call(this),this.options=s.extend(Object.create(jo),q),s.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.addTo=function(q){return this._map&&this.remove(),this._map=q,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new s.Event("open")),this},G.prototype.isOpen=function(){return!!this._map},G.prototype.remove=function(){return this._content&&b.remove(this._content),this._container&&(b.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new s.Event("close")),this},G.prototype.getLngLat=function(){return this._lngLat},G.prototype.setLngLat=function(q){return this._lngLat=s.LngLat.convert(q),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},G.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},G.prototype.getElement=function(){return this._container},G.prototype.setText=function(q){return this.setDOMContent(s.window.document.createTextNode(q))},G.prototype.setHTML=function(q){var L,V=s.window.document.createDocumentFragment(),J=s.window.document.createElement("body");for(J.innerHTML=q;L=J.firstChild;)V.appendChild(L);return this.setDOMContent(V)},G.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},G.prototype.setMaxWidth=function(q){return this.options.maxWidth=q,this._update(),this},G.prototype.setDOMContent=function(q){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=b.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(q),this._createCloseButton(),this._update(),this._focusFirstElement(),this},G.prototype.addClassName=function(q){this._container&&this._container.classList.add(q)},G.prototype.removeClassName=function(q){this._container&&this._container.classList.remove(q)},G.prototype.setOffset=function(q){return this.options.offset=q,this._update(),this},G.prototype.toggleClassName=function(q){if(this._container)return this._container.classList.toggle(q)},G.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=b.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},G.prototype._onMouseUp=function(q){this._update(q.point)},G.prototype._onMouseMove=function(q){this._update(q.point)},G.prototype._onDrag=function(q){this._update(q.point)},G.prototype._update=function(q){var L=this,V=this._lngLat||this._trackPointer;if(this._map&&V&&this._content&&(this._container||(this._container=b.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=b.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(qe){return L._container.classList.add(qe)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=rs(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||q)){var J=this._pos=this._trackPointer&&q?q:this._map.project(this._lngLat),re=this.options.anchor,ue=Je(this.options.offset);if(!re){var xe,Le=this._container.offsetWidth,De=this._container.offsetHeight;xe=J.y+ue.bottom.y<De?["top"]:J.y>this._map.transform.height-De?["bottom"]:[],J.x<Le/2?xe.push("left"):J.x>this._map.transform.width-Le/2&&xe.push("right"),re=xe.length===0?"bottom":xe.join("-")}var Ue=J.add(ue[re]).round();b.setTransform(this._container,kr[re]+" translate("+Ue.x+"px,"+Ue.y+"px)"),Cr(this._container,re,"popup")}},G.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var q=this._container.querySelector(Qs);q&&q.focus()}},G.prototype._onClose=function(){this.remove()},G}(s.Evented);function Je(B){if(B){if(typeof B=="number"){var G=Math.round(Math.sqrt(.5*Math.pow(B,2)));return{center:new s.Point(0,0),top:new s.Point(0,B),"top-left":new s.Point(G,G),"top-right":new s.Point(-G,G),bottom:new s.Point(0,-B),"bottom-left":new s.Point(G,-G),"bottom-right":new s.Point(-G,-G),left:new s.Point(B,0),right:new s.Point(-B,0)}}if(B instanceof s.Point||Array.isArray(B)){var q=s.Point.convert(B);return{center:q,top:q,"top-left":q,"top-right":q,bottom:q,"bottom-left":q,"bottom-right":q,left:q,right:q}}return{center:s.Point.convert(B.center||[0,0]),top:s.Point.convert(B.top||[0,0]),"top-left":s.Point.convert(B["top-left"]||[0,0]),"top-right":s.Point.convert(B["top-right"]||[0,0]),bottom:s.Point.convert(B.bottom||[0,0]),"bottom-left":s.Point.convert(B["bottom-left"]||[0,0]),"bottom-right":s.Point.convert(B["bottom-right"]||[0,0]),left:s.Point.convert(B.left||[0,0]),right:s.Point.convert(B.right||[0,0])}}return Je(new s.Point(0,0))}var at={version:s.version,supported:T,setRTLTextPlugin:s.setRTLTextPlugin,getRTLTextPluginStatus:s.getRTLTextPluginStatus,Map:Ga,NavigationControl:Wa,GeolocateControl:Qr,AttributionControl:la,ScaleControl:Ta,FullscreenControl:ga,Popup:Xe,Marker:oo,Style:Un,LngLat:s.LngLat,LngLatBounds:s.LngLatBounds,Point:s.Point,MercatorCoordinate:s.MercatorCoordinate,Evented:s.Evented,config:s.config,prewarm:function(){ut().acquire(je)},clearPrewarmedResources:function(){var B=rt;B&&(B.isPreloaded()&&B.numActive()===1?(B.release(je),rt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return s.config.ACCESS_TOKEN},set accessToken(B){s.config.ACCESS_TOKEN=B},get baseApiUrl(){return s.config.API_URL},set baseApiUrl(B){s.config.API_URL=B},get workerCount(){return Re.workerCount},set workerCount(B){Re.workerCount=B},get maxParallelImageRequests(){return s.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(B){s.config.MAX_PARALLEL_IMAGE_REQUESTS=B},clearStorage:function(B){s.clearTileCache(B)},workerUrl:""};return at}),M}()},3108:function(ee,R,e){ee.exports=e(26099)},26099:function(ee,R,e){var M=e(64928),k=e(32420),s=e(51160),T=e(76752),b=e(55616),f=e(31264),o=e(47520),t=e(18400),i=e(72512),n=e(76244);function r(a,l){for(var u=l[0],h=l[1],c=1/(l[2]-u),x=1/(l[3]-h),p=new Array(a.length),v=0,g=a.length/2;v<g;v++)p[2*v]=k((a[2*v]-u)*c,0,1),p[2*v+1]=k((a[2*v+1]-h)*x,0,1);return p}ee.exports=function(a,l){l||(l={}),a=o(a,"float64"),l=b(l,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var u=f(l.maxDepth,255),h=f(l.bounds,T(a,2));h[0]===h[2]&&h[2]++,h[1]===h[3]&&h[3]++;var c,x=r(a,h),p=a.length>>>1;l.dtype||(l.dtype="array"),typeof l.dtype=="string"?c=new(i(l.dtype))(p):l.dtype&&(c=l.dtype,Array.isArray(c)&&(c.length=p));for(var v=0;v<p;++v)c[v]=v;var g=[],y=[],m=[],_=[];(function z(j,I,N,W,F,U){if(!W.length)return null;var H=g[F]||(g[F]=[]),ne=m[F]||(m[F]=[]),$=y[F]||(y[F]=[]),K=H.length;if(++F>u||U>1073741824){for(var Q=0;Q<W.length;Q++)H.push(W[Q]),ne.push(U),$.push(null,null,null,null);return K}if(H.push(W[0]),ne.push(U),W.length<=1)return $.push(null,null,null,null),K;for(var Z=.5*N,X=j+Z,te=I+Z,ae=[],se=[],ce=[],fe=[],pe=1,ge=W.length;pe<ge;pe++){var me=W[pe],be=x[2*me],ke=x[2*me+1];be<X?ke<te?ae.push(me):se.push(me):ke<te?ce.push(me):fe.push(me)}return U<<=2,$.push(z(j,I,Z,ae,F,U),z(j,te,Z,se,F,U+1),z(X,I,Z,ce,F,U+2),z(X,te,Z,fe,F,U+3)),K})(0,0,1,c,0,1);for(var d=0,S=0;S<g.length;S++){var w=g[S];if(c.set)c.set(w,d);else for(var E=0,C=w.length;E<C;E++)c[E+d]=w[E];var O=d+g[S].length;_[S]=[d,O],d=O}return c.range=function(){for(var z,j=[],I=arguments.length;I--;)j[I]=arguments[I];if(t(j[j.length-1])){var N=j.pop();j.length||N.x==null&&N.l==null&&N.left==null||(j=[N],z={}),z=b(N,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else z={};j.length||(j=h);var W,F=s.apply(void 0,j),U=[Math.min(F.x,F.x+F.width),Math.min(F.y,F.y+F.height),Math.max(F.x,F.x+F.width),Math.max(F.y,F.y+F.height)],H=U[0],ne=U[1],$=U[2],K=U[3],Q=r([H,ne,$,K],h),Z=Q[0],X=Q[1],te=Q[2],ae=Q[3],se=f(z.level,g.length);if(z.d!=null&&(typeof z.d=="number"?W=[z.d,z.d]:z.d.length&&(W=z.d),se=Math.min(Math.max(Math.ceil(-n(Math.abs(W[0])/(h[2]-h[0]))),Math.ceil(-n(Math.abs(W[1])/(h[3]-h[1])))),se)),se=Math.min(se,g.length),z.lod)return function(fe,pe,ge,me,be){for(var ke=[],ze=0;ze<be;ze++){var ve=m[ze],oe=_[ze][0],ie=P(fe,pe,ze),he=P(ge,me,ze),Se=M.ge(ve,ie),ye=M.gt(ve,he,Se,ve.length-1);ke[ze]=[Se+oe,ye+oe]}return ke}(Z,X,te,ae,se);var ce=[];return function fe(pe,ge,me,be,ke,ze){if(ke!==null&&ze!==null&&!(Z>pe+me||X>ge+me||te<pe||ae<ge||be>=se||ke===ze)){var ve=g[be];ze===void 0&&(ze=ve.length);for(var oe=ke;oe<ze;oe++){var ie=ve[oe],he=a[2*ie],Se=a[2*ie+1];he>=H&&he<=$&&Se>=ne&&Se<=K&&ce.push(ie)}var ye=y[be],we=ye[4*ke+0],Me=ye[4*ke+1],Oe=ye[4*ke+2],Ie=ye[4*ke+3],de=function(Pe,Ee){for(var Fe=null,Ve=0;Fe===null;)if(Fe=Pe[4*Ee+Ve],++Ve>Pe.length)return null;return Fe}(ye,ke+1),_e=.5*me,Ae=be+1;fe(pe,ge,_e,Ae,we,Me||Oe||Ie||de),fe(pe,ge+_e,_e,Ae,Me,Oe||Ie||de),fe(pe+_e,ge,_e,Ae,Oe,Ie||de),fe(pe+_e,ge+_e,_e,Ae,Ie,de)}}(0,0,1,0,0,1),ce},c;function P(z,j,I){for(var N=1,W=.5,F=.5,U=.5,H=0;H<I;H++)N<<=2,N+=z<W?j<F?0:1:j<F?2:3,U*=.5,W+=z<W?-U:U,F+=j<F?-U:U;return N}}},40440:function(ee,R,e){Object.defineProperty(R,"__esModule",{value:!0});var M=e(3256),k=6378137;function s(f){var o=0;if(f&&f.length>0){o+=Math.abs(T(f[0]));for(var t=1;t<f.length;t++)o-=Math.abs(T(f[t]))}return o}function T(f){var o,t,i,n,r,a,l=0,u=f.length;if(u>2){for(a=0;a<u;a++)a===u-2?(i=u-2,n=u-1,r=0):a===u-1?(i=u-1,n=0,r=1):(i=a,n=a+1,r=a+2),o=f[i],t=f[n],l+=(b(f[r][0])-b(o[0]))*Math.sin(b(t[1]));l=l*k*k/2}return l}function b(f){return f*Math.PI/180}R.default=function(f){return M.geomReduce(f,function(o,t){return o+function(i){var n,r=0;switch(i.type){case"Polygon":return s(i.coordinates);case"MultiPolygon":for(n=0;n<i.coordinates.length;n++)r+=s(i.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)},0)}},46284:function(ee,R){function e(a,l,u){u===void 0&&(u={});var h={type:"Feature"};return(u.id===0||u.id)&&(h.id=u.id),u.bbox&&(h.bbox=u.bbox),h.properties=l||{},h.geometry=a,h}function M(a,l,u){if(u===void 0&&(u={}),!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!r(a[0])||!r(a[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:a},l,u)}function k(a,l,u){u===void 0&&(u={});for(var h=0,c=a;h<c.length;h++){var x=c[h];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var p=0;p<x[x.length-1].length;p++)if(x[x.length-1][p]!==x[0][p])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},l,u)}function s(a,l,u){if(u===void 0&&(u={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},l,u)}function T(a,l){l===void 0&&(l={});var u={type:"FeatureCollection"};return l.id&&(u.id=l.id),l.bbox&&(u.bbox=l.bbox),u.features=a,u}function b(a,l,u){return u===void 0&&(u={}),e({type:"MultiLineString",coordinates:a},l,u)}function f(a,l,u){return u===void 0&&(u={}),e({type:"MultiPoint",coordinates:a},l,u)}function o(a,l,u){return u===void 0&&(u={}),e({type:"MultiPolygon",coordinates:a},l,u)}function t(a,l){l===void 0&&(l="kilometers");var u=R.factors[l];if(!u)throw new Error(l+" units is invalid");return a*u}function i(a,l){l===void 0&&(l="kilometers");var u=R.factors[l];if(!u)throw new Error(l+" units is invalid");return a/u}function n(a){return a%(2*Math.PI)*180/Math.PI}function r(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)}Object.defineProperty(R,"__esModule",{value:!0}),R.earthRadius=63710088e-1,R.factors={centimeters:100*R.earthRadius,centimetres:100*R.earthRadius,degrees:R.earthRadius/111325,feet:3.28084*R.earthRadius,inches:39.37*R.earthRadius,kilometers:R.earthRadius/1e3,kilometres:R.earthRadius/1e3,meters:R.earthRadius,metres:R.earthRadius,miles:R.earthRadius/1609.344,millimeters:1e3*R.earthRadius,millimetres:1e3*R.earthRadius,nauticalmiles:R.earthRadius/1852,radians:1,yards:1.0936*R.earthRadius},R.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/R.earthRadius,yards:1.0936133},R.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},R.feature=e,R.geometry=function(a,l,u){switch(a){case"Point":return M(l).geometry;case"LineString":return s(l).geometry;case"Polygon":return k(l).geometry;case"MultiPoint":return f(l).geometry;case"MultiLineString":return b(l).geometry;case"MultiPolygon":return o(l).geometry;default:throw new Error(a+" is invalid")}},R.point=M,R.points=function(a,l,u){return u===void 0&&(u={}),T(a.map(function(h){return M(h,l)}),u)},R.polygon=k,R.polygons=function(a,l,u){return u===void 0&&(u={}),T(a.map(function(h){return k(h,l)}),u)},R.lineString=s,R.lineStrings=function(a,l,u){return u===void 0&&(u={}),T(a.map(function(h){return s(h,l)}),u)},R.featureCollection=T,R.multiLineString=b,R.multiPoint=f,R.multiPolygon=o,R.geometryCollection=function(a,l,u){return u===void 0&&(u={}),e({type:"GeometryCollection",geometries:a},l,u)},R.round=function(a,l){if(l===void 0&&(l=0),l&&!(l>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,l||0);return Math.round(a*u)/u},R.radiansToLength=t,R.lengthToRadians=i,R.lengthToDegrees=function(a,l){return n(i(a,l))},R.bearingToAzimuth=function(a){var l=a%360;return l<0&&(l+=360),l},R.radiansToDegrees=n,R.degreesToRadians=function(a){return a%360*Math.PI/180},R.convertLength=function(a,l,u){if(l===void 0&&(l="kilometers"),u===void 0&&(u="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(i(a,l),u)},R.convertArea=function(a,l,u){if(l===void 0&&(l="meters"),u===void 0&&(u="kilometers"),!(a>=0))throw new Error("area must be a positive number");var h=R.areaFactors[l];if(!h)throw new Error("invalid original units");var c=R.areaFactors[u];if(!c)throw new Error("invalid final units");return a/h*c},R.isNumber=r,R.isObject=function(a){return!!a&&a.constructor===Object},R.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(a.length!==4&&a.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(l){if(!r(l))throw new Error("bbox must only contain numbers")})},R.validateId=function(a){if(!a)throw new Error("id is required");if(["string","number"].indexOf(typeof a)===-1)throw new Error("id must be a number or a string")}},3256:function(ee,R,e){Object.defineProperty(R,"__esModule",{value:!0});var M=e(46284);function k(i,n,r){if(i!==null)for(var a,l,u,h,c,x,p,v,g=0,y=0,m=i.type,_=m==="FeatureCollection",d=m==="Feature",S=_?i.features.length:1,w=0;w<S;w++){c=(v=!!(p=_?i.features[w].geometry:d?i.geometry:i)&&p.type==="GeometryCollection")?p.geometries.length:1;for(var E=0;E<c;E++){var C=0,O=0;if((h=v?p.geometries[E]:p)!==null){x=h.coordinates;var P=h.type;switch(g=!r||P!=="Polygon"&&P!=="MultiPolygon"?0:1,P){case null:break;case"Point":if(n(x,y,w,C,O)===!1)return!1;y++,C++;break;case"LineString":case"MultiPoint":for(a=0;a<x.length;a++){if(n(x[a],y,w,C,O)===!1)return!1;y++,P==="MultiPoint"&&C++}P==="LineString"&&C++;break;case"Polygon":case"MultiLineString":for(a=0;a<x.length;a++){for(l=0;l<x[a].length-g;l++){if(n(x[a][l],y,w,C,O)===!1)return!1;y++}P==="MultiLineString"&&C++,P==="Polygon"&&O++}P==="Polygon"&&C++;break;case"MultiPolygon":for(a=0;a<x.length;a++){for(O=0,l=0;l<x[a].length;l++){for(u=0;u<x[a][l].length-g;u++){if(n(x[a][l][u],y,w,C,O)===!1)return!1;y++}O++}C++}break;case"GeometryCollection":for(a=0;a<h.geometries.length;a++)if(k(h.geometries[a],n,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function s(i,n){var r;switch(i.type){case"FeatureCollection":for(r=0;r<i.features.length&&n(i.features[r].properties,r)!==!1;r++);break;case"Feature":n(i.properties,0)}}function T(i,n){if(i.type==="Feature")n(i,0);else if(i.type==="FeatureCollection")for(var r=0;r<i.features.length&&n(i.features[r],r)!==!1;r++);}function b(i,n){var r,a,l,u,h,c,x,p,v,g,y=0,m=i.type==="FeatureCollection",_=i.type==="Feature",d=m?i.features.length:1;for(r=0;r<d;r++){for(c=m?i.features[r].geometry:_?i.geometry:i,p=m?i.features[r].properties:_?i.properties:{},v=m?i.features[r].bbox:_?i.bbox:void 0,g=m?i.features[r].id:_?i.id:void 0,h=(x=!!c&&c.type==="GeometryCollection")?c.geometries.length:1,l=0;l<h;l++)if((u=x?c.geometries[l]:c)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(n(u,y,p,v,g)===!1)return!1;break;case"GeometryCollection":for(a=0;a<u.geometries.length;a++)if(n(u.geometries[a],y,p,v,g)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(n(null,y,p,v,g)===!1)return!1;y++}}function f(i,n){b(i,function(r,a,l,u,h){var c,x=r===null?null:r.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return n(M.feature(r,l,{bbox:u,id:h}),a,0)!==!1&&void 0}switch(x){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var p=0;p<r.coordinates.length;p++){var v={type:c,coordinates:r.coordinates[p]};if(n(M.feature(v,l),a,p)===!1)return!1}})}function o(i,n){f(i,function(r,a,l){var u=0;if(r.geometry){var h=r.geometry.type;if(h!=="Point"&&h!=="MultiPoint"){var c,x=0,p=0,v=0;return k(r,function(g,y,m,_,d){if(c===void 0||a>x||_>p||d>v)return c=g,x=a,p=_,v=d,void(u=0);var S=M.lineString([c,g],r.properties);if(n(S,a,l,d,u)===!1)return!1;u++,c=g})!==!1&&void 0}}})}function t(i,n){if(!i)throw new Error("geojson is required");f(i,function(r,a,l){if(r.geometry!==null){var u=r.geometry.type,h=r.geometry.coordinates;switch(u){case"LineString":if(n(r,a,l,0,0)===!1)return!1;break;case"Polygon":for(var c=0;c<h.length;c++)if(n(M.lineString(h[c],r.properties),a,l,c)===!1)return!1}}})}R.coordEach=k,R.coordReduce=function(i,n,r,a){var l=r;return k(i,function(u,h,c,x,p){l=h===0&&r===void 0?u:n(l,u,h,c,x,p)},a),l},R.propEach=s,R.propReduce=function(i,n,r){var a=r;return s(i,function(l,u){a=u===0&&r===void 0?l:n(a,l,u)}),a},R.featureEach=T,R.featureReduce=function(i,n,r){var a=r;return T(i,function(l,u){a=u===0&&r===void 0?l:n(a,l,u)}),a},R.coordAll=function(i){var n=[];return k(i,function(r){n.push(r)}),n},R.geomEach=b,R.geomReduce=function(i,n,r){var a=r;return b(i,function(l,u,h,c,x){a=u===0&&r===void 0?l:n(a,l,u,h,c,x)}),a},R.flattenEach=f,R.flattenReduce=function(i,n,r){var a=r;return f(i,function(l,u,h){a=u===0&&h===0&&r===void 0?l:n(a,l,u,h)}),a},R.segmentEach=o,R.segmentReduce=function(i,n,r){var a=r,l=!1;return o(i,function(u,h,c,x,p){a=l===!1&&r===void 0?u:n(a,u,h,c,x,p),l=!0}),a},R.lineEach=t,R.lineReduce=function(i,n,r){var a=r;return t(i,function(l,u,h,c){a=u===0&&r===void 0?l:n(a,l,u,h,c)}),a},R.findSegment=function(i,n){if(n=n||{},!M.isObject(n))throw new Error("options is invalid");var r,a=n.featureIndex||0,l=n.multiFeatureIndex||0,u=n.geometryIndex||0,h=n.segmentIndex||0,c=n.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),c=c||i.features[a].properties,r=i.features[a].geometry;break;case"Feature":c=c||i.properties,r=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=i;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var x=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return h<0&&(h=x.length+h-1),M.lineString([x[h],x[h+1]],c,n);case"Polygon":return u<0&&(u=x.length+u),h<0&&(h=x[u].length+h-1),M.lineString([x[u][h],x[u][h+1]],c,n);case"MultiLineString":return l<0&&(l=x.length+l),h<0&&(h=x[l].length+h-1),M.lineString([x[l][h],x[l][h+1]],c,n);case"MultiPolygon":return l<0&&(l=x.length+l),u<0&&(u=x[l].length+u),h<0&&(h=x[l][u].length-h-1),M.lineString([x[l][u][h],x[l][u][h+1]],c,n)}throw new Error("geojson is invalid")},R.findPoint=function(i,n){if(n=n||{},!M.isObject(n))throw new Error("options is invalid");var r,a=n.featureIndex||0,l=n.multiFeatureIndex||0,u=n.geometryIndex||0,h=n.coordIndex||0,c=n.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),c=c||i.features[a].properties,r=i.features[a].geometry;break;case"Feature":c=c||i.properties,r=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=i;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var x=r.coordinates;switch(r.type){case"Point":return M.point(x,c,n);case"MultiPoint":return l<0&&(l=x.length+l),M.point(x[l],c,n);case"LineString":return h<0&&(h=x.length+h),M.point(x[h],c,n);case"Polygon":return u<0&&(u=x.length+u),h<0&&(h=x[u].length+h),M.point(x[u][h],c,n);case"MultiLineString":return l<0&&(l=x.length+l),h<0&&(h=x[l].length+h),M.point(x[l][h],c,n);case"MultiPolygon":return l<0&&(l=x.length+l),u<0&&(u=x[l].length+u),h<0&&(h=x[l][u].length-h),M.point(x[l][u][h],c,n)}throw new Error("geojson is invalid")}},42428:function(ee,R,e){Object.defineProperty(R,"__esModule",{value:!0});var M=e(84880);function k(s){var T=[1/0,1/0,-1/0,-1/0];return M.coordEach(s,function(b){T[0]>b[0]&&(T[0]=b[0]),T[1]>b[1]&&(T[1]=b[1]),T[2]<b[0]&&(T[2]=b[0]),T[3]<b[1]&&(T[3]=b[1])}),T}k.default=k,R.default=k},76796:function(ee,R){function e(a,l,u){u===void 0&&(u={});var h={type:"Feature"};return(u.id===0||u.id)&&(h.id=u.id),u.bbox&&(h.bbox=u.bbox),h.properties=l||{},h.geometry=a,h}function M(a,l,u){if(u===void 0&&(u={}),!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!r(a[0])||!r(a[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:a},l,u)}function k(a,l,u){u===void 0&&(u={});for(var h=0,c=a;h<c.length;h++){var x=c[h];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var p=0;p<x[x.length-1].length;p++)if(x[x.length-1][p]!==x[0][p])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},l,u)}function s(a,l,u){if(u===void 0&&(u={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},l,u)}function T(a,l){l===void 0&&(l={});var u={type:"FeatureCollection"};return l.id&&(u.id=l.id),l.bbox&&(u.bbox=l.bbox),u.features=a,u}function b(a,l,u){return u===void 0&&(u={}),e({type:"MultiLineString",coordinates:a},l,u)}function f(a,l,u){return u===void 0&&(u={}),e({type:"MultiPoint",coordinates:a},l,u)}function o(a,l,u){return u===void 0&&(u={}),e({type:"MultiPolygon",coordinates:a},l,u)}function t(a,l){l===void 0&&(l="kilometers");var u=R.factors[l];if(!u)throw new Error(l+" units is invalid");return a*u}function i(a,l){l===void 0&&(l="kilometers");var u=R.factors[l];if(!u)throw new Error(l+" units is invalid");return a/u}function n(a){return a%(2*Math.PI)*180/Math.PI}function r(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)}Object.defineProperty(R,"__esModule",{value:!0}),R.earthRadius=63710088e-1,R.factors={centimeters:100*R.earthRadius,centimetres:100*R.earthRadius,degrees:R.earthRadius/111325,feet:3.28084*R.earthRadius,inches:39.37*R.earthRadius,kilometers:R.earthRadius/1e3,kilometres:R.earthRadius/1e3,meters:R.earthRadius,metres:R.earthRadius,miles:R.earthRadius/1609.344,millimeters:1e3*R.earthRadius,millimetres:1e3*R.earthRadius,nauticalmiles:R.earthRadius/1852,radians:1,yards:1.0936*R.earthRadius},R.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/R.earthRadius,yards:1.0936133},R.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},R.feature=e,R.geometry=function(a,l,u){switch(a){case"Point":return M(l).geometry;case"LineString":return s(l).geometry;case"Polygon":return k(l).geometry;case"MultiPoint":return f(l).geometry;case"MultiLineString":return b(l).geometry;case"MultiPolygon":return o(l).geometry;default:throw new Error(a+" is invalid")}},R.point=M,R.points=function(a,l,u){return u===void 0&&(u={}),T(a.map(function(h){return M(h,l)}),u)},R.polygon=k,R.polygons=function(a,l,u){return u===void 0&&(u={}),T(a.map(function(h){return k(h,l)}),u)},R.lineString=s,R.lineStrings=function(a,l,u){return u===void 0&&(u={}),T(a.map(function(h){return s(h,l)}),u)},R.featureCollection=T,R.multiLineString=b,R.multiPoint=f,R.multiPolygon=o,R.geometryCollection=function(a,l,u){return u===void 0&&(u={}),e({type:"GeometryCollection",geometries:a},l,u)},R.round=function(a,l){if(l===void 0&&(l=0),l&&!(l>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,l||0);return Math.round(a*u)/u},R.radiansToLength=t,R.lengthToRadians=i,R.lengthToDegrees=function(a,l){return n(i(a,l))},R.bearingToAzimuth=function(a){var l=a%360;return l<0&&(l+=360),l},R.radiansToDegrees=n,R.degreesToRadians=function(a){return a%360*Math.PI/180},R.convertLength=function(a,l,u){if(l===void 0&&(l="kilometers"),u===void 0&&(u="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(i(a,l),u)},R.convertArea=function(a,l,u){if(l===void 0&&(l="meters"),u===void 0&&(u="kilometers"),!(a>=0))throw new Error("area must be a positive number");var h=R.areaFactors[l];if(!h)throw new Error("invalid original units");var c=R.areaFactors[u];if(!c)throw new Error("invalid final units");return a/h*c},R.isNumber=r,R.isObject=function(a){return!!a&&a.constructor===Object},R.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(a.length!==4&&a.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(l){if(!r(l))throw new Error("bbox must only contain numbers")})},R.validateId=function(a){if(!a)throw new Error("id is required");if(["string","number"].indexOf(typeof a)===-1)throw new Error("id must be a number or a string")}},84880:function(ee,R,e){Object.defineProperty(R,"__esModule",{value:!0});var M=e(76796);function k(i,n,r){if(i!==null)for(var a,l,u,h,c,x,p,v,g=0,y=0,m=i.type,_=m==="FeatureCollection",d=m==="Feature",S=_?i.features.length:1,w=0;w<S;w++){c=(v=!!(p=_?i.features[w].geometry:d?i.geometry:i)&&p.type==="GeometryCollection")?p.geometries.length:1;for(var E=0;E<c;E++){var C=0,O=0;if((h=v?p.geometries[E]:p)!==null){x=h.coordinates;var P=h.type;switch(g=!r||P!=="Polygon"&&P!=="MultiPolygon"?0:1,P){case null:break;case"Point":if(n(x,y,w,C,O)===!1)return!1;y++,C++;break;case"LineString":case"MultiPoint":for(a=0;a<x.length;a++){if(n(x[a],y,w,C,O)===!1)return!1;y++,P==="MultiPoint"&&C++}P==="LineString"&&C++;break;case"Polygon":case"MultiLineString":for(a=0;a<x.length;a++){for(l=0;l<x[a].length-g;l++){if(n(x[a][l],y,w,C,O)===!1)return!1;y++}P==="MultiLineString"&&C++,P==="Polygon"&&O++}P==="Polygon"&&C++;break;case"MultiPolygon":for(a=0;a<x.length;a++){for(O=0,l=0;l<x[a].length;l++){for(u=0;u<x[a][l].length-g;u++){if(n(x[a][l][u],y,w,C,O)===!1)return!1;y++}O++}C++}break;case"GeometryCollection":for(a=0;a<h.geometries.length;a++)if(k(h.geometries[a],n,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function s(i,n){var r;switch(i.type){case"FeatureCollection":for(r=0;r<i.features.length&&n(i.features[r].properties,r)!==!1;r++);break;case"Feature":n(i.properties,0)}}function T(i,n){if(i.type==="Feature")n(i,0);else if(i.type==="FeatureCollection")for(var r=0;r<i.features.length&&n(i.features[r],r)!==!1;r++);}function b(i,n){var r,a,l,u,h,c,x,p,v,g,y=0,m=i.type==="FeatureCollection",_=i.type==="Feature",d=m?i.features.length:1;for(r=0;r<d;r++){for(c=m?i.features[r].geometry:_?i.geometry:i,p=m?i.features[r].properties:_?i.properties:{},v=m?i.features[r].bbox:_?i.bbox:void 0,g=m?i.features[r].id:_?i.id:void 0,h=(x=!!c&&c.type==="GeometryCollection")?c.geometries.length:1,l=0;l<h;l++)if((u=x?c.geometries[l]:c)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(n(u,y,p,v,g)===!1)return!1;break;case"GeometryCollection":for(a=0;a<u.geometries.length;a++)if(n(u.geometries[a],y,p,v,g)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(n(null,y,p,v,g)===!1)return!1;y++}}function f(i,n){b(i,function(r,a,l,u,h){var c,x=r===null?null:r.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return n(M.feature(r,l,{bbox:u,id:h}),a,0)!==!1&&void 0}switch(x){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var p=0;p<r.coordinates.length;p++){var v={type:c,coordinates:r.coordinates[p]};if(n(M.feature(v,l),a,p)===!1)return!1}})}function o(i,n){f(i,function(r,a,l){var u=0;if(r.geometry){var h=r.geometry.type;if(h!=="Point"&&h!=="MultiPoint"){var c,x=0,p=0,v=0;return k(r,function(g,y,m,_,d){if(c===void 0||a>x||_>p||d>v)return c=g,x=a,p=_,v=d,void(u=0);var S=M.lineString([c,g],r.properties);if(n(S,a,l,d,u)===!1)return!1;u++,c=g})!==!1&&void 0}}})}function t(i,n){if(!i)throw new Error("geojson is required");f(i,function(r,a,l){if(r.geometry!==null){var u=r.geometry.type,h=r.geometry.coordinates;switch(u){case"LineString":if(n(r,a,l,0,0)===!1)return!1;break;case"Polygon":for(var c=0;c<h.length;c++)if(n(M.lineString(h[c],r.properties),a,l,c)===!1)return!1}}})}R.coordEach=k,R.coordReduce=function(i,n,r,a){var l=r;return k(i,function(u,h,c,x,p){l=h===0&&r===void 0?u:n(l,u,h,c,x,p)},a),l},R.propEach=s,R.propReduce=function(i,n,r){var a=r;return s(i,function(l,u){a=u===0&&r===void 0?l:n(a,l,u)}),a},R.featureEach=T,R.featureReduce=function(i,n,r){var a=r;return T(i,function(l,u){a=u===0&&r===void 0?l:n(a,l,u)}),a},R.coordAll=function(i){var n=[];return k(i,function(r){n.push(r)}),n},R.geomEach=b,R.geomReduce=function(i,n,r){var a=r;return b(i,function(l,u,h,c,x){a=u===0&&r===void 0?l:n(a,l,u,h,c,x)}),a},R.flattenEach=f,R.flattenReduce=function(i,n,r){var a=r;return f(i,function(l,u,h){a=u===0&&h===0&&r===void 0?l:n(a,l,u,h)}),a},R.segmentEach=o,R.segmentReduce=function(i,n,r){var a=r,l=!1;return o(i,function(u,h,c,x,p){a=l===!1&&r===void 0?u:n(a,u,h,c,x,p),l=!0}),a},R.lineEach=t,R.lineReduce=function(i,n,r){var a=r;return t(i,function(l,u,h,c){a=u===0&&r===void 0?l:n(a,l,u,h,c)}),a},R.findSegment=function(i,n){if(n=n||{},!M.isObject(n))throw new Error("options is invalid");var r,a=n.featureIndex||0,l=n.multiFeatureIndex||0,u=n.geometryIndex||0,h=n.segmentIndex||0,c=n.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),c=c||i.features[a].properties,r=i.features[a].geometry;break;case"Feature":c=c||i.properties,r=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=i;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var x=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return h<0&&(h=x.length+h-1),M.lineString([x[h],x[h+1]],c,n);case"Polygon":return u<0&&(u=x.length+u),h<0&&(h=x[u].length+h-1),M.lineString([x[u][h],x[u][h+1]],c,n);case"MultiLineString":return l<0&&(l=x.length+l),h<0&&(h=x[l].length+h-1),M.lineString([x[l][h],x[l][h+1]],c,n);case"MultiPolygon":return l<0&&(l=x.length+l),u<0&&(u=x[l].length+u),h<0&&(h=x[l][u].length-h-1),M.lineString([x[l][u][h],x[l][u][h+1]],c,n)}throw new Error("geojson is invalid")},R.findPoint=function(i,n){if(n=n||{},!M.isObject(n))throw new Error("options is invalid");var r,a=n.featureIndex||0,l=n.multiFeatureIndex||0,u=n.geometryIndex||0,h=n.coordIndex||0,c=n.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),c=c||i.features[a].properties,r=i.features[a].geometry;break;case"Feature":c=c||i.properties,r=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=i;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var x=r.coordinates;switch(r.type){case"Point":return M.point(x,c,n);case"MultiPoint":return l<0&&(l=x.length+l),M.point(x[l],c,n);case"LineString":return h<0&&(h=x.length+h),M.point(x[h],c,n);case"Polygon":return u<0&&(u=x.length+u),h<0&&(h=x[u].length+h),M.point(x[u][h],c,n);case"MultiLineString":return l<0&&(l=x.length+l),h<0&&(h=x[l].length+h),M.point(x[l][h],c,n);case"MultiPolygon":return l<0&&(l=x.length+l),u<0&&(u=x[l].length+u),h<0&&(h=x[l][u].length-h),M.point(x[l][u][h],c,n)}throw new Error("geojson is invalid")}},77844:function(ee,R,e){Object.defineProperty(R,"__esModule",{value:!0});var M=e(43752),k=e(49840);R.default=function(s,T){T===void 0&&(T={});var b=0,f=0,o=0;return M.coordEach(s,function(t){b+=t[0],f+=t[1],o++}),k.point([b/o,f/o],T.properties)}},49840:function(ee,R){function e(a,l,u){u===void 0&&(u={});var h={type:"Feature"};return(u.id===0||u.id)&&(h.id=u.id),u.bbox&&(h.bbox=u.bbox),h.properties=l||{},h.geometry=a,h}function M(a,l,u){return u===void 0&&(u={}),e({type:"Point",coordinates:a},l,u)}function k(a,l,u){u===void 0&&(u={});for(var h=0,c=a;h<c.length;h++){var x=c[h];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var p=0;p<x[x.length-1].length;p++)if(x[x.length-1][p]!==x[0][p])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},l,u)}function s(a,l,u){if(u===void 0&&(u={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},l,u)}function T(a,l){l===void 0&&(l={});var u={type:"FeatureCollection"};return l.id&&(u.id=l.id),l.bbox&&(u.bbox=l.bbox),u.features=a,u}function b(a,l,u){return u===void 0&&(u={}),e({type:"MultiLineString",coordinates:a},l,u)}function f(a,l,u){return u===void 0&&(u={}),e({type:"MultiPoint",coordinates:a},l,u)}function o(a,l,u){return u===void 0&&(u={}),e({type:"MultiPolygon",coordinates:a},l,u)}function t(a,l){l===void 0&&(l="kilometers");var u=R.factors[l];if(!u)throw new Error(l+" units is invalid");return a*u}function i(a,l){l===void 0&&(l="kilometers");var u=R.factors[l];if(!u)throw new Error(l+" units is invalid");return a/u}function n(a){return a%(2*Math.PI)*180/Math.PI}function r(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)&&!/^\s*$/.test(a)}Object.defineProperty(R,"__esModule",{value:!0}),R.earthRadius=63710088e-1,R.factors={centimeters:100*R.earthRadius,centimetres:100*R.earthRadius,degrees:R.earthRadius/111325,feet:3.28084*R.earthRadius,inches:39.37*R.earthRadius,kilometers:R.earthRadius/1e3,kilometres:R.earthRadius/1e3,meters:R.earthRadius,metres:R.earthRadius,miles:R.earthRadius/1609.344,millimeters:1e3*R.earthRadius,millimetres:1e3*R.earthRadius,nauticalmiles:R.earthRadius/1852,radians:1,yards:R.earthRadius/1.0936},R.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/R.earthRadius,yards:.91441111923921},R.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},R.feature=e,R.geometry=function(a,l,u){switch(a){case"Point":return M(l).geometry;case"LineString":return s(l).geometry;case"Polygon":return k(l).geometry;case"MultiPoint":return f(l).geometry;case"MultiLineString":return b(l).geometry;case"MultiPolygon":return o(l).geometry;default:throw new Error(a+" is invalid")}},R.point=M,R.points=function(a,l,u){return u===void 0&&(u={}),T(a.map(function(h){return M(h,l)}),u)},R.polygon=k,R.polygons=function(a,l,u){return u===void 0&&(u={}),T(a.map(function(h){return k(h,l)}),u)},R.lineString=s,R.lineStrings=function(a,l,u){return u===void 0&&(u={}),T(a.map(function(h){return s(h,l)}),u)},R.featureCollection=T,R.multiLineString=b,R.multiPoint=f,R.multiPolygon=o,R.geometryCollection=function(a,l,u){return u===void 0&&(u={}),e({type:"GeometryCollection",geometries:a},l,u)},R.round=function(a,l){if(l===void 0&&(l=0),l&&!(l>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,l||0);return Math.round(a*u)/u},R.radiansToLength=t,R.lengthToRadians=i,R.lengthToDegrees=function(a,l){return n(i(a,l))},R.bearingToAzimuth=function(a){var l=a%360;return l<0&&(l+=360),l},R.radiansToDegrees=n,R.degreesToRadians=function(a){return a%360*Math.PI/180},R.convertLength=function(a,l,u){if(l===void 0&&(l="kilometers"),u===void 0&&(u="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(i(a,l),u)},R.convertArea=function(a,l,u){if(l===void 0&&(l="meters"),u===void 0&&(u="kilometers"),!(a>=0))throw new Error("area must be a positive number");var h=R.areaFactors[l];if(!h)throw new Error("invalid original units");var c=R.areaFactors[u];if(!c)throw new Error("invalid final units");return a/h*c},R.isNumber=r,R.isObject=function(a){return!!a&&a.constructor===Object},R.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(a.length!==4&&a.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(l){if(!r(l))throw new Error("bbox must only contain numbers")})},R.validateId=function(a){if(!a)throw new Error("id is required");if(["string","number"].indexOf(typeof a)===-1)throw new Error("id must be a number or a string")},R.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},R.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},R.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},R.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},R.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},R.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},R.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},43752:function(ee,R,e){Object.defineProperty(R,"__esModule",{value:!0});var M=e(49840);function k(i,n,r){if(i!==null)for(var a,l,u,h,c,x,p,v,g=0,y=0,m=i.type,_=m==="FeatureCollection",d=m==="Feature",S=_?i.features.length:1,w=0;w<S;w++){c=(v=!!(p=_?i.features[w].geometry:d?i.geometry:i)&&p.type==="GeometryCollection")?p.geometries.length:1;for(var E=0;E<c;E++){var C=0,O=0;if((h=v?p.geometries[E]:p)!==null){x=h.coordinates;var P=h.type;switch(g=!r||P!=="Polygon"&&P!=="MultiPolygon"?0:1,P){case null:break;case"Point":if(n(x,y,w,C,O)===!1)return!1;y++,C++;break;case"LineString":case"MultiPoint":for(a=0;a<x.length;a++){if(n(x[a],y,w,C,O)===!1)return!1;y++,P==="MultiPoint"&&C++}P==="LineString"&&C++;break;case"Polygon":case"MultiLineString":for(a=0;a<x.length;a++){for(l=0;l<x[a].length-g;l++){if(n(x[a][l],y,w,C,O)===!1)return!1;y++}P==="MultiLineString"&&C++,P==="Polygon"&&O++}P==="Polygon"&&C++;break;case"MultiPolygon":for(a=0;a<x.length;a++){for(O=0,l=0;l<x[a].length;l++){for(u=0;u<x[a][l].length-g;u++){if(n(x[a][l][u],y,w,C,O)===!1)return!1;y++}O++}C++}break;case"GeometryCollection":for(a=0;a<h.geometries.length;a++)if(k(h.geometries[a],n,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function s(i,n){var r;switch(i.type){case"FeatureCollection":for(r=0;r<i.features.length&&n(i.features[r].properties,r)!==!1;r++);break;case"Feature":n(i.properties,0)}}function T(i,n){if(i.type==="Feature")n(i,0);else if(i.type==="FeatureCollection")for(var r=0;r<i.features.length&&n(i.features[r],r)!==!1;r++);}function b(i,n){var r,a,l,u,h,c,x,p,v,g,y=0,m=i.type==="FeatureCollection",_=i.type==="Feature",d=m?i.features.length:1;for(r=0;r<d;r++){for(c=m?i.features[r].geometry:_?i.geometry:i,p=m?i.features[r].properties:_?i.properties:{},v=m?i.features[r].bbox:_?i.bbox:void 0,g=m?i.features[r].id:_?i.id:void 0,h=(x=!!c&&c.type==="GeometryCollection")?c.geometries.length:1,l=0;l<h;l++)if((u=x?c.geometries[l]:c)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(n(u,y,p,v,g)===!1)return!1;break;case"GeometryCollection":for(a=0;a<u.geometries.length;a++)if(n(u.geometries[a],y,p,v,g)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(n(null,y,p,v,g)===!1)return!1;y++}}function f(i,n){b(i,function(r,a,l,u,h){var c,x=r===null?null:r.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return n(M.feature(r,l,{bbox:u,id:h}),a,0)!==!1&&void 0}switch(x){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var p=0;p<r.coordinates.length;p++){var v={type:c,coordinates:r.coordinates[p]};if(n(M.feature(v,l),a,p)===!1)return!1}})}function o(i,n){f(i,function(r,a,l){var u=0;if(r.geometry){var h=r.geometry.type;if(h!=="Point"&&h!=="MultiPoint"){var c,x=0,p=0,v=0;return k(r,function(g,y,m,_,d){if(c===void 0||a>x||_>p||d>v)return c=g,x=a,p=_,v=d,void(u=0);var S=M.lineString([c,g],r.properties);if(n(S,a,l,d,u)===!1)return!1;u++,c=g})!==!1&&void 0}}})}function t(i,n){if(!i)throw new Error("geojson is required");f(i,function(r,a,l){if(r.geometry!==null){var u=r.geometry.type,h=r.geometry.coordinates;switch(u){case"LineString":if(n(r,a,l,0,0)===!1)return!1;break;case"Polygon":for(var c=0;c<h.length;c++)if(n(M.lineString(h[c],r.properties),a,l,c)===!1)return!1}}})}R.coordEach=k,R.coordReduce=function(i,n,r,a){var l=r;return k(i,function(u,h,c,x,p){l=h===0&&r===void 0?u:n(l,u,h,c,x,p)},a),l},R.propEach=s,R.propReduce=function(i,n,r){var a=r;return s(i,function(l,u){a=u===0&&r===void 0?l:n(a,l,u)}),a},R.featureEach=T,R.featureReduce=function(i,n,r){var a=r;return T(i,function(l,u){a=u===0&&r===void 0?l:n(a,l,u)}),a},R.coordAll=function(i){var n=[];return k(i,function(r){n.push(r)}),n},R.geomEach=b,R.geomReduce=function(i,n,r){var a=r;return b(i,function(l,u,h,c,x){a=u===0&&r===void 0?l:n(a,l,u,h,c,x)}),a},R.flattenEach=f,R.flattenReduce=function(i,n,r){var a=r;return f(i,function(l,u,h){a=u===0&&h===0&&r===void 0?l:n(a,l,u,h)}),a},R.segmentEach=o,R.segmentReduce=function(i,n,r){var a=r,l=!1;return o(i,function(u,h,c,x,p){a=l===!1&&r===void 0?u:n(a,u,h,c,x,p),l=!0}),a},R.lineEach=t,R.lineReduce=function(i,n,r){var a=r;return t(i,function(l,u,h,c){a=u===0&&r===void 0?l:n(a,l,u,h,c)}),a},R.findSegment=function(i,n){if(n=n||{},!M.isObject(n))throw new Error("options is invalid");var r,a=n.featureIndex||0,l=n.multiFeatureIndex||0,u=n.geometryIndex||0,h=n.segmentIndex||0,c=n.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),c=c||i.features[a].properties,r=i.features[a].geometry;break;case"Feature":c=c||i.properties,r=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=i;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var x=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return h<0&&(h=x.length+h-1),M.lineString([x[h],x[h+1]],c,n);case"Polygon":return u<0&&(u=x.length+u),h<0&&(h=x[u].length+h-1),M.lineString([x[u][h],x[u][h+1]],c,n);case"MultiLineString":return l<0&&(l=x.length+l),h<0&&(h=x[l].length+h-1),M.lineString([x[l][h],x[l][h+1]],c,n);case"MultiPolygon":return l<0&&(l=x.length+l),u<0&&(u=x[l].length+u),h<0&&(h=x[l][u].length-h-1),M.lineString([x[l][u][h],x[l][u][h+1]],c,n)}throw new Error("geojson is invalid")},R.findPoint=function(i,n){if(n=n||{},!M.isObject(n))throw new Error("options is invalid");var r,a=n.featureIndex||0,l=n.multiFeatureIndex||0,u=n.geometryIndex||0,h=n.coordIndex||0,c=n.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),c=c||i.features[a].properties,r=i.features[a].geometry;break;case"Feature":c=c||i.properties,r=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=i;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var x=r.coordinates;switch(r.type){case"Point":return M.point(x,c,n);case"MultiPoint":return l<0&&(l=x.length+l),M.point(x[l],c,n);case"LineString":return h<0&&(h=x.length+h),M.point(x[h],c,n);case"Polygon":return u<0&&(u=x.length+u),h<0&&(h=x[u].length+h),M.point(x[u][h],c,n);case"MultiLineString":return l<0&&(l=x.length+l),h<0&&(h=x[l].length+h),M.point(x[l][h],c,n);case"MultiPolygon":return l<0&&(l=x.length+l),u<0&&(u=x[l].length+u),h<0&&(h=x[l][u].length-h),M.point(x[l][u][h],c,n)}throw new Error("geojson is invalid")}},49972:function(ee){ee.exports=function(R){var e=0,M=0,k=0,s=0;return R.map(function(T){var b=(T=T.slice())[0],f=b.toUpperCase();if(b!=f)switch(T[0]=f,b){case"a":T[6]+=k,T[7]+=s;break;case"v":T[1]+=s;break;case"h":T[1]+=k;break;default:for(var o=1;o<T.length;)T[o++]+=k,T[o++]+=s}switch(f){case"Z":k=e,s=M;break;case"H":k=T[1];break;case"V":s=T[1];break;case"M":k=e=T[1],s=M=T[2];break;default:k=T[T.length-2],s=T[T.length-1]}return T})}},76752:function(ee){ee.exports=function(R,e){if(!R||R.length==null)throw Error("Argument should be an array");e=e==null?1:Math.floor(e);for(var M=Array(2*e),k=0;k<e;k++){for(var s=-1/0,T=1/0,b=k,f=R.length;b<f;b+=e)R[b]>s&&(s=R[b]),R[b]<T&&(T=R[b]);M[k]=T,M[e+k]=s}return M}},10272:function(ee){ee.exports=function(R,e,M){if(typeof Array.prototype.findIndex=="function")return R.findIndex(e,M);if(typeof e!="function")throw new TypeError("predicate must be a function");var k=Object(R),s=k.length;if(s===0)return-1;for(var T=0;T<s;T++)if(e.call(M,k[T],T,k))return T;return-1}},71152:function(ee,R,e){var M=e(76752);ee.exports=function(k,s,T){if(!k||k.length==null)throw Error("Argument should be an array");s==null&&(s=1),T==null&&(T=M(k,s));for(var b=0;b<s;b++){var f=T[s+b],o=T[b],t=b,i=k.length;if(f===1/0&&o===-1/0)for(t=b;t<i;t+=s)k[t]=k[t]===f?1:k[t]===o?0:.5;else if(f===1/0)for(t=b;t<i;t+=s)k[t]=k[t]===f?1:0;else if(o===-1/0)for(t=b;t<i;t+=s)k[t]=k[t]===o?0:1;else{var n=f-o;for(t=b;t<i;t+=s)isNaN(k[t])||(k[t]=n===0?.5:(k[t]-o)/n)}}return k}},67752:function(ee){ee.exports=function(R,e){var M=typeof R=="number",k=typeof e=="number";M&&!k?(e=R,R=0):M||k||(R=0,e=0);var s=(e|=0)-(R|=0);if(s<0)throw new Error("array length must be positive");for(var T=new Array(s),b=0,f=R;b<s;b++,f++)T[b]=f;return T}},45408:function(ee,R,e){var M=e(4168);function k(I){return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},k(I)}var s,T,b=e(86832).codes,f=b.ERR_AMBIGUOUS_ARGUMENT,o=b.ERR_INVALID_ARG_TYPE,t=b.ERR_INVALID_ARG_VALUE,i=b.ERR_INVALID_RETURN_VALUE,n=b.ERR_MISSING_ARGS,r=e(26144),a=e(35840).inspect,l=e(35840).types,u=l.isPromise,h=l.isRegExp,c=Object.assign?Object.assign:e(60964).assign,x=Object.is?Object.is:e(39896);function p(){var I=e(25116);s=I.isDeepEqual,T=I.isDeepStrictEqual}var v=!1,g=ee.exports=d,y={};function m(I){throw I.message instanceof Error?I.message:new r(I)}function _(I,N,W,F){if(!W){var U=!1;if(N===0)U=!0,F="No value argument passed to `assert.ok()`";else if(F instanceof Error)throw F;var H=new r({actual:W,expected:!0,message:F,operator:"==",stackStartFn:I});throw H.generatedMessage=U,H}}function d(){for(var I=arguments.length,N=new Array(I),W=0;W<I;W++)N[W]=arguments[W];_.apply(void 0,[d,N.length].concat(N))}g.fail=function I(N,W,F,U,H){var ne,$=arguments.length;if($===0?ne="Failed":$===1?(F=N,N=void 0):(v===!1&&(v=!0,(M.emitWarning?M.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),$===2&&(U="!=")),F instanceof Error)throw F;var K={actual:N,expected:W,operator:U===void 0?"fail":U,stackStartFn:H||I};F!==void 0&&(K.message=F);var Q=new r(K);throw ne&&(Q.message=ne,Q.generatedMessage=!0),Q},g.AssertionError=r,g.ok=d,g.equal=function I(N,W,F){if(arguments.length<2)throw new n("actual","expected");N!=W&&m({actual:N,expected:W,message:F,operator:"==",stackStartFn:I})},g.notEqual=function I(N,W,F){if(arguments.length<2)throw new n("actual","expected");N==W&&m({actual:N,expected:W,message:F,operator:"!=",stackStartFn:I})},g.deepEqual=function I(N,W,F){if(arguments.length<2)throw new n("actual","expected");s===void 0&&p(),s(N,W)||m({actual:N,expected:W,message:F,operator:"deepEqual",stackStartFn:I})},g.notDeepEqual=function I(N,W,F){if(arguments.length<2)throw new n("actual","expected");s===void 0&&p(),s(N,W)&&m({actual:N,expected:W,message:F,operator:"notDeepEqual",stackStartFn:I})},g.deepStrictEqual=function I(N,W,F){if(arguments.length<2)throw new n("actual","expected");s===void 0&&p(),T(N,W)||m({actual:N,expected:W,message:F,operator:"deepStrictEqual",stackStartFn:I})},g.notDeepStrictEqual=function I(N,W,F){if(arguments.length<2)throw new n("actual","expected");s===void 0&&p(),T(N,W)&&m({actual:N,expected:W,message:F,operator:"notDeepStrictEqual",stackStartFn:I})},g.strictEqual=function I(N,W,F){if(arguments.length<2)throw new n("actual","expected");x(N,W)||m({actual:N,expected:W,message:F,operator:"strictEqual",stackStartFn:I})},g.notStrictEqual=function I(N,W,F){if(arguments.length<2)throw new n("actual","expected");x(N,W)&&m({actual:N,expected:W,message:F,operator:"notStrictEqual",stackStartFn:I})};var S=function I(N,W,F){var U=this;(function(H,ne){if(!(H instanceof ne))throw new TypeError("Cannot call a class as a function")})(this,I),W.forEach(function(H){H in N&&(F!==void 0&&typeof F[H]=="string"&&h(N[H])&&N[H].test(F[H])?U[H]=F[H]:U[H]=N[H])})};function w(I,N,W,F){if(typeof N!="function"){if(h(N))return N.test(I);if(arguments.length===2)throw new o("expected",["Function","RegExp"],N);if(k(I)!=="object"||I===null){var U=new r({actual:I,expected:N,message:W,operator:"deepStrictEqual",stackStartFn:F});throw U.operator=F.name,U}var H=Object.keys(N);if(N instanceof Error)H.push("name","message");else if(H.length===0)throw new t("error",N,"may not be an empty object");return s===void 0&&p(),H.forEach(function(ne){typeof I[ne]=="string"&&h(N[ne])&&N[ne].test(I[ne])||function($,K,Q,Z,X,te){if(!(Q in $)||!T($[Q],K[Q])){if(!Z){var ae=new S($,X),se=new S(K,X,$),ce=new r({actual:ae,expected:se,operator:"deepStrictEqual",stackStartFn:te});throw ce.actual=$,ce.expected=K,ce.operator=te.name,ce}m({actual:$,expected:K,message:Z,operator:te.name,stackStartFn:te})}}(I,N,ne,W,H,F)}),!0}return N.prototype!==void 0&&I instanceof N||!Error.isPrototypeOf(N)&&N.call({},I)===!0}function E(I){if(typeof I!="function")throw new o("fn","Function",I);try{I()}catch(N){return N}return y}function C(I){return u(I)||I!==null&&k(I)==="object"&&typeof I.then=="function"&&typeof I.catch=="function"}function O(I){return Promise.resolve().then(function(){var N;if(typeof I=="function"){if(!C(N=I()))throw new i("instance of Promise","promiseFn",N)}else{if(!C(I))throw new o("promiseFn",["Function","Promise"],I);N=I}return Promise.resolve().then(function(){return N}).then(function(){return y}).catch(function(W){return W})})}function P(I,N,W,F){if(typeof W=="string"){if(arguments.length===4)throw new o("error",["Object","Error","Function","RegExp"],W);if(k(N)==="object"&&N!==null){if(N.message===W)throw new f("error/message",'The error message "'.concat(N.message,'" is identical to the message.'))}else if(N===W)throw new f("error/message",'The error "'.concat(N,'" is identical to the message.'));F=W,W=void 0}else if(W!=null&&k(W)!=="object"&&typeof W!="function")throw new o("error",["Object","Error","Function","RegExp"],W);if(N===y){var U="";W&&W.name&&(U+=" (".concat(W.name,")")),U+=F?": ".concat(F):".";var H=I.name==="rejects"?"rejection":"exception";m({actual:void 0,expected:W,operator:I.name,message:"Missing expected ".concat(H).concat(U),stackStartFn:I})}if(W&&!w(N,W,F,I))throw N}function z(I,N,W,F){if(N!==y){if(typeof W=="string"&&(F=W,W=void 0),!W||w(N,W)){var U=F?": ".concat(F):".",H=I.name==="doesNotReject"?"rejection":"exception";m({actual:N,expected:W,operator:I.name,message:"Got unwanted ".concat(H).concat(U,`
`)+'Actual message: "'.concat(N&&N.message,'"'),stackStartFn:I})}throw N}}function j(){for(var I=arguments.length,N=new Array(I),W=0;W<I;W++)N[W]=arguments[W];_.apply(void 0,[j,N.length].concat(N))}g.throws=function I(N){for(var W=arguments.length,F=new Array(W>1?W-1:0),U=1;U<W;U++)F[U-1]=arguments[U];P.apply(void 0,[I,E(N)].concat(F))},g.rejects=function I(N){for(var W=arguments.length,F=new Array(W>1?W-1:0),U=1;U<W;U++)F[U-1]=arguments[U];return O(N).then(function(H){return P.apply(void 0,[I,H].concat(F))})},g.doesNotThrow=function I(N){for(var W=arguments.length,F=new Array(W>1?W-1:0),U=1;U<W;U++)F[U-1]=arguments[U];z.apply(void 0,[I,E(N)].concat(F))},g.doesNotReject=function I(N){for(var W=arguments.length,F=new Array(W>1?W-1:0),U=1;U<W;U++)F[U-1]=arguments[U];return O(N).then(function(H){return z.apply(void 0,[I,H].concat(F))})},g.ifError=function I(N){if(N!=null){var W="ifError got unwanted exception: ";k(N)==="object"&&typeof N.message=="string"?N.message.length===0&&N.constructor?W+=N.constructor.name:W+=N.message:W+=a(N);var F=new r({actual:N,expected:null,operator:"ifError",message:W,stackStartFn:I}),U=N.stack;if(typeof U=="string"){var H=U.split(`
`);H.shift();for(var ne=F.stack.split(`
`),$=0;$<H.length;$++){var K=ne.indexOf(H[$]);if(K!==-1){ne=ne.slice(0,K);break}}F.stack="".concat(ne.join(`
`),`
`).concat(H.join(`
`))}throw F}},g.strict=c(j,g,{equal:g.strictEqual,deepEqual:g.deepStrictEqual,notEqual:g.notStrictEqual,notDeepEqual:g.notDeepStrictEqual}),g.strict.strict=g.strict},26144:function(ee,R,e){var M=e(4168);function k(m,_,d){return _ in m?Object.defineProperty(m,_,{value:d,enumerable:!0,configurable:!0,writable:!0}):m[_]=d,m}function s(m,_){for(var d=0;d<_.length;d++){var S=_[d];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(m,S.key,S)}}function T(m,_){return!_||n(_)!=="object"&&typeof _!="function"?b(m):_}function b(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function f(m){var _=typeof Map=="function"?new Map:void 0;return f=function(d){if(d===null||(S=d,Function.toString.call(S).indexOf("[native code]")===-1))return d;var S;if(typeof d!="function")throw new TypeError("Super expression must either be null or a function");if(_!==void 0){if(_.has(d))return _.get(d);_.set(d,w)}function w(){return o(d,arguments,i(this).constructor)}return w.prototype=Object.create(d.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),t(w,d)},f(m)}function o(m,_,d){return o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(S,w,E){var C=[null];C.push.apply(C,w);var O=new(Function.bind.apply(S,C));return E&&t(O,E.prototype),O},o.apply(null,arguments)}function t(m,_){return t=Object.setPrototypeOf||function(d,S){return d.__proto__=S,d},t(m,_)}function i(m){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)},i(m)}function n(m){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},n(m)}var r=e(35840).inspect,a=e(86832).codes.ERR_INVALID_ARG_TYPE;function l(m,_,d){return(d===void 0||d>m.length)&&(d=m.length),m.substring(d-_.length,d)===_}var u="",h="",c="",x="",p={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function v(m){var _=Object.keys(m),d=Object.create(Object.getPrototypeOf(m));return _.forEach(function(S){d[S]=m[S]}),Object.defineProperty(d,"message",{value:m.message}),d}function g(m){return r(m,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var y=function(m){function _(w){var E;if(function(ne,$){if(!(ne instanceof $))throw new TypeError("Cannot call a class as a function")}(this,_),n(w)!=="object"||w===null)throw new a("options","Object",w);var C=w.message,O=w.operator,P=w.stackStartFn,z=w.actual,j=w.expected,I=Error.stackTraceLimit;if(Error.stackTraceLimit=0,C!=null)E=T(this,i(_).call(this,String(C)));else if(M.stderr&&M.stderr.isTTY&&(M.stderr&&M.stderr.getColorDepth&&M.stderr.getColorDepth()!==1?(u="\x1B[34m",h="\x1B[32m",x="\x1B[39m",c="\x1B[31m"):(u="",h="",x="",c="")),n(z)==="object"&&z!==null&&n(j)==="object"&&j!==null&&"stack"in z&&z instanceof Error&&"stack"in j&&j instanceof Error&&(z=v(z),j=v(j)),O==="deepStrictEqual"||O==="strictEqual")E=T(this,i(_).call(this,function(ne,$,K){var Q="",Z="",X=0,te="",ae=!1,se=g(ne),ce=se.split(`
`),fe=g($).split(`
`),pe=0,ge="";if(K==="strictEqual"&&n(ne)==="object"&&n($)==="object"&&ne!==null&&$!==null&&(K="strictEqualObject"),ce.length===1&&fe.length===1&&ce[0]!==fe[0]){var me=ce[0].length+fe[0].length;if(me<=10){if(!(n(ne)==="object"&&ne!==null||n($)==="object"&&$!==null||ne===0&&$===0))return"".concat(p[K],`

`)+"".concat(ce[0]," !== ").concat(fe[0],`
`)}else if(K!=="strictEqualObject"&&me<(M.stderr&&M.stderr.isTTY?M.stderr.columns:80)){for(;ce[0][pe]===fe[0][pe];)pe++;pe>2&&(ge=`
  `.concat(function(Oe,Ie){if(Ie=Math.floor(Ie),Oe.length==0||Ie==0)return"";var de=Oe.length*Ie;for(Ie=Math.floor(Math.log(Ie)/Math.log(2));Ie;)Oe+=Oe,Ie--;return Oe+Oe.substring(0,de-Oe.length)}(" ",pe),"^"),pe=0)}}for(var be=ce[ce.length-1],ke=fe[fe.length-1];be===ke&&(pe++<2?te=`
  `.concat(be).concat(te):Q=be,ce.pop(),fe.pop(),ce.length!==0&&fe.length!==0);)be=ce[ce.length-1],ke=fe[fe.length-1];var ze=Math.max(ce.length,fe.length);if(ze===0){var ve=se.split(`
`);if(ve.length>30)for(ve[26]="".concat(u,"...").concat(x);ve.length>27;)ve.pop();return"".concat(p.notIdentical,`

`).concat(ve.join(`
`),`
`)}pe>3&&(te=`
`.concat(u,"...").concat(x).concat(te),ae=!0),Q!==""&&(te=`
  `.concat(Q).concat(te),Q="");var oe=0,ie=p[K]+`
`.concat(h,"+ actual").concat(x," ").concat(c,"- expected").concat(x),he=" ".concat(u,"...").concat(x," Lines skipped");for(pe=0;pe<ze;pe++){var Se=pe-X;if(ce.length<pe+1)Se>1&&pe>2&&(Se>4?(Z+=`
`.concat(u,"...").concat(x),ae=!0):Se>3&&(Z+=`
  `.concat(fe[pe-2]),oe++),Z+=`
  `.concat(fe[pe-1]),oe++),X=pe,Q+=`
`.concat(c,"-").concat(x," ").concat(fe[pe]),oe++;else if(fe.length<pe+1)Se>1&&pe>2&&(Se>4?(Z+=`
`.concat(u,"...").concat(x),ae=!0):Se>3&&(Z+=`
  `.concat(ce[pe-2]),oe++),Z+=`
  `.concat(ce[pe-1]),oe++),X=pe,Z+=`
`.concat(h,"+").concat(x," ").concat(ce[pe]),oe++;else{var ye=fe[pe],we=ce[pe],Me=we!==ye&&(!l(we,",")||we.slice(0,-1)!==ye);Me&&l(ye,",")&&ye.slice(0,-1)===we&&(Me=!1,we+=","),Me?(Se>1&&pe>2&&(Se>4?(Z+=`
`.concat(u,"...").concat(x),ae=!0):Se>3&&(Z+=`
  `.concat(ce[pe-2]),oe++),Z+=`
  `.concat(ce[pe-1]),oe++),X=pe,Z+=`
`.concat(h,"+").concat(x," ").concat(we),Q+=`
`.concat(c,"-").concat(x," ").concat(ye),oe+=2):(Z+=Q,Q="",Se!==1&&pe!==0||(Z+=`
  `.concat(we),oe++))}if(oe>20&&pe<ze-2)return"".concat(ie).concat(he,`
`).concat(Z,`
`).concat(u,"...").concat(x).concat(Q,`
`)+"".concat(u,"...").concat(x)}return"".concat(ie).concat(ae?he:"",`
`).concat(Z).concat(Q).concat(te).concat(ge)}(z,j,O)));else if(O==="notDeepStrictEqual"||O==="notStrictEqual"){var N=p[O],W=g(z).split(`
`);if(O==="notStrictEqual"&&n(z)==="object"&&z!==null&&(N=p.notStrictEqualObject),W.length>30)for(W[26]="".concat(u,"...").concat(x);W.length>27;)W.pop();E=W.length===1?T(this,i(_).call(this,"".concat(N," ").concat(W[0]))):T(this,i(_).call(this,"".concat(N,`

`).concat(W.join(`
`),`
`)))}else{var F=g(z),U="",H=p[O];O==="notDeepEqual"||O==="notEqual"?(F="".concat(p[O],`

`).concat(F)).length>1024&&(F="".concat(F.slice(0,1021),"...")):(U="".concat(g(j)),F.length>512&&(F="".concat(F.slice(0,509),"...")),U.length>512&&(U="".concat(U.slice(0,509),"...")),O==="deepEqual"||O==="equal"?F="".concat(H,`

`).concat(F,`

should equal

`):U=" ".concat(O," ").concat(U)),E=T(this,i(_).call(this,"".concat(F).concat(U)))}return Error.stackTraceLimit=I,E.generatedMessage=!C,Object.defineProperty(b(E),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),E.code="ERR_ASSERTION",E.actual=z,E.expected=j,E.operator=O,Error.captureStackTrace&&Error.captureStackTrace(b(E),P),E.stack,E.name="AssertionError",T(E)}var d,S;return function(w,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(E&&E.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),E&&t(w,E)}(_,m),d=_,S=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:r.custom,value:function(w,E){return r(this,function(C){for(var O=1;O<arguments.length;O++){var P=arguments[O]!=null?arguments[O]:{},z=Object.keys(P);typeof Object.getOwnPropertySymbols=="function"&&(z=z.concat(Object.getOwnPropertySymbols(P).filter(function(j){return Object.getOwnPropertyDescriptor(P,j).enumerable}))),z.forEach(function(j){k(C,j,P[j])})}return C}({},E,{customInspect:!1,depth:0}))}}],S&&s(d.prototype,S),_}(f(Error));ee.exports=y},86832:function(ee,R,e){function M(i){return M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},M(i)}function k(i){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},k(i)}function s(i,n){return s=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},s(i,n)}var T,b,f={};function o(i,n,r){r||(r=Error);var a=function(l){function u(h,c,x){var p;return function(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}(this,u),p=function(v,g){return!g||M(g)!=="object"&&typeof g!="function"?function(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}(v):g}(this,k(u).call(this,function(v,g,y){return typeof n=="string"?n:n(v,g,y)}(h,c,x))),p.code=i,p}return function(h,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(c&&c.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),c&&s(h,c)}(u,l),u}(r);f[i]=a}function t(i,n){if(Array.isArray(i)){var r=i.length;return i=i.map(function(a){return String(a)}),r>2?"one of ".concat(n," ").concat(i.slice(0,r-1).join(", "),", or ")+i[r-1]:r===2?"one of ".concat(n," ").concat(i[0]," or ").concat(i[1]):"of ".concat(n," ").concat(i[0])}return"of ".concat(n," ").concat(String(i))}o("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),o("ERR_INVALID_ARG_TYPE",function(i,n,r){var a,l,u,h,c;if(T===void 0&&(T=e(45408)),T(typeof i=="string","'name' must be a string"),typeof n=="string"&&(l="not ",n.substr(0,4)===l)?(a="must not be",n=n.replace(/^not /,"")):a="must be",function(p,v,g){return(g===void 0||g>p.length)&&(g=p.length),p.substring(g-9,g)===v}(i," argument"))u="The ".concat(i," ").concat(a," ").concat(t(n,"type"));else{var x=(typeof c!="number"&&(c=0),c+1>(h=i).length||h.indexOf(".",c)===-1?"argument":"property");u='The "'.concat(i,'" ').concat(x," ").concat(a," ").concat(t(n,"type"))}return u+". Received type ".concat(M(r))},TypeError),o("ERR_INVALID_ARG_VALUE",function(i,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";b===void 0&&(b=e(35840));var a=b.inspect(n);return a.length>128&&(a="".concat(a.slice(0,128),"...")),"The argument '".concat(i,"' ").concat(r,". Received ").concat(a)},TypeError),o("ERR_INVALID_RETURN_VALUE",function(i,n,r){var a;return a=r&&r.constructor&&r.constructor.name?"instance of ".concat(r.constructor.name):"type ".concat(M(r)),"Expected ".concat(i,' to be returned from the "').concat(n,'"')+" function but got ".concat(a,".")},TypeError),o("ERR_MISSING_ARGS",function(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];T===void 0&&(T=e(45408)),T(n.length>0,"At least one arg needs to be specified");var a="The ",l=n.length;switch(n=n.map(function(u){return'"'.concat(u,'"')}),l){case 1:a+="".concat(n[0]," argument");break;case 2:a+="".concat(n[0]," and ").concat(n[1]," arguments");break;default:a+=n.slice(0,l-1).join(", "),a+=", and ".concat(n[l-1]," arguments")}return"".concat(a," must be specified")},TypeError),ee.exports.codes=f},25116:function(ee,R,e){function M(X,te){return function(ae){if(Array.isArray(ae))return ae}(X)||function(ae,se){var ce=[],fe=!0,pe=!1,ge=void 0;try{for(var me,be=ae[Symbol.iterator]();!(fe=(me=be.next()).done)&&(ce.push(me.value),!se||ce.length!==se);fe=!0);}catch(ke){pe=!0,ge=ke}finally{try{fe||be.return==null||be.return()}finally{if(pe)throw ge}}return ce}(X,te)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function k(X){return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(te){return typeof te}:function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},k(X)}var s=/a/g.flags!==void 0,T=function(X){var te=[];return X.forEach(function(ae){return te.push(ae)}),te},b=function(X){var te=[];return X.forEach(function(ae,se){return te.push([se,ae])}),te},f=Object.is?Object.is:e(39896),o=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},t=Number.isNaN?Number.isNaN:e(1560);function i(X){return X.call.bind(X)}var n=i(Object.prototype.hasOwnProperty),r=i(Object.prototype.propertyIsEnumerable),a=i(Object.prototype.toString),l=e(35840).types,u=l.isAnyArrayBuffer,h=l.isArrayBufferView,c=l.isDate,x=l.isMap,p=l.isRegExp,v=l.isSet,g=l.isNativeError,y=l.isBoxedPrimitive,m=l.isNumberObject,_=l.isStringObject,d=l.isBooleanObject,S=l.isBigIntObject,w=l.isSymbolObject,E=l.isFloat32Array,C=l.isFloat64Array;function O(X){if(X.length===0||X.length>10)return!0;for(var te=0;te<X.length;te++){var ae=X.charCodeAt(te);if(ae<48||ae>57)return!0}return X.length===10&&X>=Math.pow(2,32)}function P(X){return Object.keys(X).filter(O).concat(o(X).filter(Object.prototype.propertyIsEnumerable.bind(X)))}function z(X,te){if(X===te)return 0;for(var ae=X.length,se=te.length,ce=0,fe=Math.min(ae,se);ce<fe;++ce)if(X[ce]!==te[ce]){ae=X[ce],se=te[ce];break}return ae<se?-1:se<ae?1:0}var j=0,I=1,N=2,W=3;function F(X,te,ae,se){if(X===te)return X!==0||!ae||f(X,te);if(ae){if(k(X)!=="object")return typeof X=="number"&&t(X)&&t(te);if(k(te)!=="object"||X===null||te===null||Object.getPrototypeOf(X)!==Object.getPrototypeOf(te))return!1}else{if(X===null||k(X)!=="object")return(te===null||k(te)!=="object")&&X==te;if(te===null||k(te)!=="object")return!1}var ce,fe,pe,ge,me=a(X);if(me!==a(te))return!1;if(Array.isArray(X)){if(X.length!==te.length)return!1;var be=P(X),ke=P(te);return be.length===ke.length&&H(X,te,ae,se,I,be)}if(me==="[object Object]"&&(!x(X)&&x(te)||!v(X)&&v(te)))return!1;if(c(X)){if(!c(te)||Date.prototype.getTime.call(X)!==Date.prototype.getTime.call(te))return!1}else if(p(X)){if(!p(te)||(pe=X,ge=te,!(s?pe.source===ge.source&&pe.flags===ge.flags:RegExp.prototype.toString.call(pe)===RegExp.prototype.toString.call(ge))))return!1}else if(g(X)||X instanceof Error){if(X.message!==te.message||X.name!==te.name)return!1}else{if(h(X)){if(ae||!E(X)&&!C(X)){if(!function(oe,ie){return oe.byteLength===ie.byteLength&&z(new Uint8Array(oe.buffer,oe.byteOffset,oe.byteLength),new Uint8Array(ie.buffer,ie.byteOffset,ie.byteLength))===0}(X,te))return!1}else if(!function(oe,ie){if(oe.byteLength!==ie.byteLength)return!1;for(var he=0;he<oe.byteLength;he++)if(oe[he]!==ie[he])return!1;return!0}(X,te))return!1;var ze=P(X),ve=P(te);return ze.length===ve.length&&H(X,te,ae,se,j,ze)}if(v(X))return!(!v(te)||X.size!==te.size)&&H(X,te,ae,se,N);if(x(X))return!(!x(te)||X.size!==te.size)&&H(X,te,ae,se,W);if(u(X)){if(fe=te,(ce=X).byteLength!==fe.byteLength||z(new Uint8Array(ce),new Uint8Array(fe))!==0)return!1}else if(y(X)&&!function(oe,ie){return m(oe)?m(ie)&&f(Number.prototype.valueOf.call(oe),Number.prototype.valueOf.call(ie)):_(oe)?_(ie)&&String.prototype.valueOf.call(oe)===String.prototype.valueOf.call(ie):d(oe)?d(ie)&&Boolean.prototype.valueOf.call(oe)===Boolean.prototype.valueOf.call(ie):S(oe)?S(ie)&&BigInt.prototype.valueOf.call(oe)===BigInt.prototype.valueOf.call(ie):w(ie)&&Symbol.prototype.valueOf.call(oe)===Symbol.prototype.valueOf.call(ie)}(X,te))return!1}return H(X,te,ae,se,j)}function U(X,te){return te.filter(function(ae){return r(X,ae)})}function H(X,te,ae,se,ce,fe){if(arguments.length===5){fe=Object.keys(X);var pe=Object.keys(te);if(fe.length!==pe.length)return!1}for(var ge=0;ge<fe.length;ge++)if(!n(te,fe[ge]))return!1;if(ae&&arguments.length===5){var me=o(X);if(me.length!==0){var be=0;for(ge=0;ge<me.length;ge++){var ke=me[ge];if(r(X,ke)){if(!r(te,ke))return!1;fe.push(ke),be++}else if(r(te,ke))return!1}var ze=o(te);if(me.length!==ze.length&&U(te,ze).length!==be)return!1}else{var ve=o(te);if(ve.length!==0&&U(te,ve).length!==0)return!1}}if(fe.length===0&&(ce===j||ce===I&&X.length===0||X.size===0))return!0;if(se===void 0)se={val1:new Map,val2:new Map,position:0};else{var oe=se.val1.get(X);if(oe!==void 0){var ie=se.val2.get(te);if(ie!==void 0)return oe===ie}se.position++}se.val1.set(X,se.position),se.val2.set(te,se.position);var he=function(Se,ye,we,Me,Oe,Ie){var de=0;if(Ie===N){if(!function(Ee,Fe,Ve,Ye){for(var tt=null,nt=T(Ee),ht=0;ht<nt.length;ht++){var vt=nt[ht];if(k(vt)==="object"&&vt!==null)tt===null&&(tt=new Set),tt.add(vt);else if(!Fe.has(vt)){if(Ve||!K(Ee,Fe,vt))return!1;tt===null&&(tt=new Set),tt.add(vt)}}if(tt!==null){for(var pt=T(Fe),Qe=0;Qe<pt.length;Qe++){var Ke=pt[Qe];if(k(Ke)==="object"&&Ke!==null){if(!ne(tt,Ke,Ve,Ye))return!1}else if(!Ve&&!Ee.has(Ke)&&!ne(tt,Ke,Ve,Ye))return!1}return tt.size===0}return!0}(Se,ye,we,Oe))return!1}else if(Ie===W){if(!function(Ee,Fe,Ve,Ye){for(var tt=null,nt=b(Ee),ht=0;ht<nt.length;ht++){var vt=M(nt[ht],2),pt=vt[0],Qe=vt[1];if(k(pt)==="object"&&pt!==null)tt===null&&(tt=new Set),tt.add(pt);else{var Ke=Fe.get(pt);if(Ke===void 0&&!Fe.has(pt)||!F(Qe,Ke,Ve,Ye)){if(Ve||!Q(Ee,Fe,pt,Qe,Ye))return!1;tt===null&&(tt=new Set),tt.add(pt)}}}if(tt!==null){for(var Mt=b(Fe),Ot=0;Ot<Mt.length;Ot++){var Pt=M(Mt[Ot],2),St=(pt=Pt[0],Pt[1]);if(k(pt)==="object"&&pt!==null){if(!Z(tt,Ee,pt,St,Ve,Ye))return!1}else if(!(Ve||Ee.has(pt)&&F(Ee.get(pt),St,!1,Ye)||Z(tt,Ee,pt,St,!1,Ye)))return!1}return tt.size===0}return!0}(Se,ye,we,Oe))return!1}else if(Ie===I)for(;de<Se.length;de++){if(!n(Se,de)){if(n(ye,de))return!1;for(var _e=Object.keys(Se);de<_e.length;de++){var Ae=_e[de];if(!n(ye,Ae)||!F(Se[Ae],ye[Ae],we,Oe))return!1}return _e.length===Object.keys(ye).length}if(!n(ye,de)||!F(Se[de],ye[de],we,Oe))return!1}for(de=0;de<Me.length;de++){var Pe=Me[de];if(!F(Se[Pe],ye[Pe],we,Oe))return!1}return!0}(X,te,ae,fe,se,ce);return se.val1.delete(X),se.val2.delete(te),he}function ne(X,te,ae,se){for(var ce=T(X),fe=0;fe<ce.length;fe++){var pe=ce[fe];if(F(te,pe,ae,se))return X.delete(pe),!0}return!1}function $(X){switch(k(X)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":X=+X;case"number":if(t(X))return!1}return!0}function K(X,te,ae){var se=$(ae);return se??(te.has(se)&&!X.has(se))}function Q(X,te,ae,se,ce){var fe=$(ae);if(fe!=null)return fe;var pe=te.get(fe);return!(pe===void 0&&!te.has(fe)||!F(se,pe,!1,ce))&&!X.has(fe)&&F(se,pe,!1,ce)}function Z(X,te,ae,se,ce,fe){for(var pe=T(X),ge=0;ge<pe.length;ge++){var me=pe[ge];if(F(ae,me,ce,fe)&&F(se,te.get(me),ce,fe))return X.delete(me),!0}return!1}ee.exports={isDeepEqual:function(X,te){return F(X,te,!1)},isDeepStrictEqual:function(X,te){return F(X,te,!0)}}},83160:function(ee,R,e){e.r(R),e.d(R,{decode:function(){return b},encode:function(){return T}});for(var M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k=typeof Uint8Array>"u"?[]:new Uint8Array(256),s=0;s<64;s++)k[M.charCodeAt(s)]=s;var T=function(f){var o,t=new Uint8Array(f),i=t.length,n="";for(o=0;o<i;o+=3)n+=M[t[o]>>2],n+=M[(3&t[o])<<4|t[o+1]>>4],n+=M[(15&t[o+1])<<2|t[o+2]>>6],n+=M[63&t[o+2]];return i%3==2?n=n.substring(0,n.length-1)+"=":i%3==1&&(n=n.substring(0,n.length-2)+"=="),n},b=function(f){var o,t,i,n,r,a=.75*f.length,l=f.length,u=0;f[f.length-1]==="="&&(a--,f[f.length-2]==="="&&a--);var h=new ArrayBuffer(a),c=new Uint8Array(h);for(o=0;o<l;o+=4)t=k[f.charCodeAt(o)],i=k[f.charCodeAt(o+1)],n=k[f.charCodeAt(o+2)],r=k[f.charCodeAt(o+3)],c[u++]=t<<2|i>>4,c[u++]=(15&i)<<4|n>>2,c[u++]=(3&n)<<6|63&r;return h}},59968:function(ee,R){R.byteLength=function(o){var t=b(o),i=t[0],n=t[1];return 3*(i+n)/4-n},R.toByteArray=function(o){var t,i,n=b(o),r=n[0],a=n[1],l=new k(function(c,x,p){return 3*(x+p)/4-p}(0,r,a)),u=0,h=a>0?r-4:r;for(i=0;i<h;i+=4)t=M[o.charCodeAt(i)]<<18|M[o.charCodeAt(i+1)]<<12|M[o.charCodeAt(i+2)]<<6|M[o.charCodeAt(i+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return a===2&&(t=M[o.charCodeAt(i)]<<2|M[o.charCodeAt(i+1)]>>4,l[u++]=255&t),a===1&&(t=M[o.charCodeAt(i)]<<10|M[o.charCodeAt(i+1)]<<4|M[o.charCodeAt(i+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l},R.fromByteArray=function(o){for(var t,i=o.length,n=i%3,r=[],a=16383,l=0,u=i-n;l<u;l+=a)r.push(f(o,l,l+a>u?u:l+a));return n===1?(t=o[i-1],r.push(e[t>>2]+e[t<<4&63]+"==")):n===2&&(t=(o[i-2]<<8)+o[i-1],r.push(e[t>>10]+e[t>>4&63]+e[t<<2&63]+"=")),r.join("")};for(var e=[],M=[],k=typeof Uint8Array<"u"?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=0;T<64;++T)e[T]=s[T],M[s.charCodeAt(T)]=T;function b(o){var t=o.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=o.indexOf("=");return i===-1&&(i=t),[i,i===t?0:4-i%4]}function f(o,t,i){for(var n,r,a=[],l=t;l<i;l+=3)n=(o[l]<<16&16711680)+(o[l+1]<<8&65280)+(255&o[l+2]),a.push(e[(r=n)>>18&63]+e[r>>12&63]+e[r>>6&63]+e[63&r]);return a.join("")}M[45]=62,M[95]=63},64928:function(ee){function R(b,f,o,t,i){for(var n=i+1;t<=i;){var r=t+i>>>1,a=b[r];(o!==void 0?o(a,f):a-f)>=0?(n=r,i=r-1):t=r+1}return n}function e(b,f,o,t,i){for(var n=i+1;t<=i;){var r=t+i>>>1,a=b[r];(o!==void 0?o(a,f):a-f)>0?(n=r,i=r-1):t=r+1}return n}function M(b,f,o,t,i){for(var n=t-1;t<=i;){var r=t+i>>>1,a=b[r];(o!==void 0?o(a,f):a-f)<0?(n=r,t=r+1):i=r-1}return n}function k(b,f,o,t,i){for(var n=t-1;t<=i;){var r=t+i>>>1,a=b[r];(o!==void 0?o(a,f):a-f)<=0?(n=r,t=r+1):i=r-1}return n}function s(b,f,o,t,i){for(;t<=i;){var n=t+i>>>1,r=b[n],a=o!==void 0?o(r,f):r-f;if(a===0)return n;a<=0?t=n+1:i=n-1}return-1}function T(b,f,o,t,i,n){return typeof o=="function"?n(b,f,o,t===void 0?0:0|t,i===void 0?b.length-1:0|i):n(b,f,void 0,o===void 0?0:0|o,t===void 0?b.length-1:0|t)}ee.exports={ge:function(b,f,o,t,i){return T(b,f,o,t,i,R)},gt:function(b,f,o,t,i){return T(b,f,o,t,i,e)},lt:function(b,f,o,t,i){return T(b,f,o,t,i,M)},le:function(b,f,o,t,i){return T(b,f,o,t,i,k)},eq:function(b,f,o,t,i){return T(b,f,o,t,i,s)}}},308:function(ee,R){function e(k){var s=32;return(k&=-k)&&s--,65535&k&&(s-=16),16711935&k&&(s-=8),252645135&k&&(s-=4),858993459&k&&(s-=2),1431655765&k&&(s-=1),s}R.INT_BITS=32,R.INT_MAX=2147483647,R.INT_MIN=-2147483648,R.sign=function(k){return(k>0)-(k<0)},R.abs=function(k){var s=k>>31;return(k^s)-s},R.min=function(k,s){return s^(k^s)&-(k<s)},R.max=function(k,s){return k^(k^s)&-(k<s)},R.isPow2=function(k){return!(k&k-1||!k)},R.log2=function(k){var s,T;return s=(k>65535)<<4,s|=T=((k>>>=s)>255)<<3,s|=T=((k>>>=T)>15)<<2,(s|=T=((k>>>=T)>3)<<1)|(k>>>=T)>>1},R.log10=function(k){return k>=1e9?9:k>=1e8?8:k>=1e7?7:k>=1e6?6:k>=1e5?5:k>=1e4?4:k>=1e3?3:k>=100?2:k>=10?1:0},R.popCount=function(k){return 16843009*((k=(858993459&(k-=k>>>1&1431655765))+(k>>>2&858993459))+(k>>>4)&252645135)>>>24},R.countTrailingZeros=e,R.nextPow2=function(k){return k+=k===0,--k,k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,1+(k|=k>>>16)},R.prevPow2=function(k){return k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,(k|=k>>>16)-(k>>>1)},R.parity=function(k){return k^=k>>>16,k^=k>>>8,k^=k>>>4,27030>>>(k&=15)&1};var M=new Array(256);(function(k){for(var s=0;s<256;++s){var T=s,b=s,f=7;for(T>>>=1;T;T>>>=1)b<<=1,b|=1&T,--f;k[s]=b<<f&255}})(M),R.reverse=function(k){return M[255&k]<<24|M[k>>>8&255]<<16|M[k>>>16&255]<<8|M[k>>>24&255]},R.interleave2=function(k,s){return(k=1431655765&((k=858993459&((k=252645135&((k=16711935&((k&=65535)|k<<8))|k<<4))|k<<2))|k<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s&=65535)|s<<8))|s<<4))|s<<2))|s<<1))<<1},R.deinterleave2=function(k,s){return(k=65535&((k=16711935&((k=252645135&((k=858993459&((k=k>>>s&1431655765)|k>>>1))|k>>>2))|k>>>4))|k>>>16))<<16>>16},R.interleave3=function(k,s,T){return k=1227133513&((k=3272356035&((k=251719695&((k=4278190335&((k&=1023)|k<<16))|k<<8))|k<<4))|k<<2),(k|=(s=1227133513&((s=3272356035&((s=251719695&((s=4278190335&((s&=1023)|s<<16))|s<<8))|s<<4))|s<<2))<<1)|(T=1227133513&((T=3272356035&((T=251719695&((T=4278190335&((T&=1023)|T<<16))|T<<8))|T<<4))|T<<2))<<2},R.deinterleave3=function(k,s){return(k=1023&((k=4278190335&((k=251719695&((k=3272356035&((k=k>>>s&1227133513)|k>>>2))|k>>>4))|k>>>8))|k>>>16))<<22>>22},R.nextCombination=function(k){var s=k|k-1;return s+1|(~s&-~s)-1>>>e(k)+1}},29620:function(ee,R,e){var M=e(32420);ee.exports=function(b,f){f||(f={});var o,t,i,n,r,a,l,u,h,c,x,p=f.cutoff==null?.25:f.cutoff,v=f.radius==null?8:f.radius,g=f.channel||0;if(ArrayBuffer.isView(b)||Array.isArray(b)){if(!f.width||!f.height)throw Error("For raw data width and height should be provided by options");o=f.width,t=f.height,n=b,a=f.stride?f.stride:Math.floor(b.length/o/t)}else window.HTMLCanvasElement&&b instanceof window.HTMLCanvasElement?(l=(u=b).getContext("2d"),o=u.width,t=u.height,n=(h=l.getImageData(0,0,o,t)).data,a=4):window.CanvasRenderingContext2D&&b instanceof window.CanvasRenderingContext2D?(l=b,o=(u=b.canvas).width,t=u.height,n=(h=l.getImageData(0,0,o,t)).data,a=4):window.ImageData&&b instanceof window.ImageData&&(h=b,o=b.width,t=b.height,n=h.data,a=4);if(i=Math.max(o,t),window.Uint8ClampedArray&&n instanceof window.Uint8ClampedArray||window.Uint8Array&&n instanceof window.Uint8Array)for(r=n,n=Array(o*t),c=0,x=r.length;c<x;c++)n[c]=r[c*a+g]/255;else if(a!==1)throw Error("Raw data can have only 1 value per pixel");var y=Array(o*t),m=Array(o*t),_=Array(i),d=Array(i),S=Array(i+1),w=Array(i);for(c=0,x=o*t;c<x;c++){var E=n[c];y[c]=E===1?0:E===0?k:Math.pow(Math.max(0,.5-E),2),m[c]=E===1?k:E===0?0:Math.pow(Math.max(0,E-.5),2)}s(y,o,t,_,d,w,S),s(m,o,t,_,d,w,S);var C=window.Float32Array?new Float32Array(o*t):new Array(o*t);for(c=0,x=o*t;c<x;c++)C[c]=M(1-((y[c]-m[c])/v+p),0,1);return C};var k=1e20;function s(b,f,o,t,i,n,r){for(var a=0;a<f;a++){for(var l=0;l<o;l++)t[l]=b[l*f+a];for(T(t,i,n,r,o),l=0;l<o;l++)b[l*f+a]=i[l]}for(l=0;l<o;l++){for(a=0;a<f;a++)t[a]=b[l*f+a];for(T(t,i,n,r,f),a=0;a<f;a++)b[l*f+a]=Math.sqrt(i[a])}}function T(b,f,o,t,i){o[0]=0,t[0]=-k,t[1]=+k;for(var n=1,r=0;n<i;n++){for(var a=(b[n]+n*n-(b[o[r]]+o[r]*o[r]))/(2*n-2*o[r]);a<=t[r];)r--,a=(b[n]+n*n-(b[o[r]]+o[r]*o[r]))/(2*n-2*o[r]);o[++r]=n,t[r]=a,t[r+1]=+k}for(n=0,r=0;n<i;n++){for(;t[r+1]<n;)r++;f[n]=(n-o[r])*(n-o[r])+b[o[r]]}}},99676:function(ee,R,e){var M=e(53664),k=e(57916),s=k(M("String.prototype.indexOf"));ee.exports=function(T,b){var f=M(T,!!b);return typeof f=="function"&&s(T,".prototype.")>-1?k(f):f}},57916:function(ee,R,e){var M=e(8844),k=e(53664),s=e(14500),T=k("%TypeError%"),b=k("%Function.prototype.apply%"),f=k("%Function.prototype.call%"),o=k("%Reflect.apply%",!0)||M.call(f,b),t=k("%Object.defineProperty%",!0),i=k("%Math.max%");if(t)try{t({},"a",{value:1})}catch{t=null}ee.exports=function(r){if(typeof r!="function")throw new T("a function is required");var a=o(M,f,arguments);return s(a,1+i(0,r.length-(arguments.length-1)),!0)};var n=function(){return o(M,b,arguments)};t?t(ee.exports,"apply",{value:n}):ee.exports.apply=n},32420:function(ee){ee.exports=function(R,e,M){return e<M?R<e?e:R>M?M:R:R<M?M:R>e?e:R}},3808:function(ee,R,e){var M=e(32420);function k(s,T){T==null&&(T=!0);var b=s[0],f=s[1],o=s[2],t=s[3];return t==null&&(t=T?1:255),T&&(b*=255,f*=255,o*=255,t*=255),16777216*(b=255&M(b,0,255))+((f=255&M(f,0,255))<<16)+((o=255&M(o,0,255))<<8)+(255&M(t,0,255))}ee.exports=k,ee.exports.to=k,ee.exports.from=function(s,T){var b=(s=+s)>>>24,f=(16711680&s)>>>16,o=(65280&s)>>>8,t=255&s;return T===!1?[b,f,o,t]:[b/255,f/255,o/255,t/255]}},17592:function(ee){ee.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},72160:function(ee,R,e){var M=e(96824),k=e(32420),s=e(72512);ee.exports=function(T,b){b!=="float"&&b||(b="array"),b==="uint"&&(b="uint8"),b==="uint_clamped"&&(b="uint8_clamped");var f=new(s(b))(4),o=b!=="uint8"&&b!=="uint8_clamped";return T.length&&typeof T!="string"||((T=M(T))[0]/=255,T[1]/=255,T[2]/=255),function(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||!!(Array.isArray(t)&&(t[0]>1||t[0]===0)&&(t[1]>1||t[1]===0)&&(t[2]>1||t[2]===0)&&(!t[3]||t[3]>1))}(T)?(f[0]=T[0],f[1]=T[1],f[2]=T[2],f[3]=T[3]!=null?T[3]:255,o&&(f[0]/=255,f[1]/=255,f[2]/=255,f[3]/=255),f):(o?(f[0]=T[0],f[1]=T[1],f[2]=T[2],f[3]=T[3]!=null?T[3]:1):(f[0]=k(Math.floor(255*T[0]),0,255),f[1]=k(Math.floor(255*T[1]),0,255),f[2]=k(Math.floor(255*T[2]),0,255),f[3]=T[3]==null?255:k(Math.floor(255*T[3]),0,255)),f)}},96824:function(ee,R,e){var M=e(95532),k=e(53576),s=e(32420);ee.exports=function(T){var b,f=M(T);return f.space?((b=Array(3))[0]=s(f.values[0],0,255),b[1]=s(f.values[1],0,255),b[2]=s(f.values[2],0,255),f.space[0]==="h"&&(b=k.rgb(b)),b.push(s(f.alpha,0,1)),b):[]}},95532:function(ee,R,e){var M=e(17592);ee.exports=function(s){var T,b,f=[],o=1;if(typeof s=="string")if(s=s.toLowerCase(),M[s])f=M[s].slice(),b="rgb";else if(s==="transparent")o=0,b="rgb",f=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(s)){var t=s.slice(1);o=1,(r=t.length)<=4?(f=[parseInt(t[0]+t[0],16),parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16)],r===4&&(o=parseInt(t[3]+t[3],16)/255)):(f=[parseInt(t[0]+t[1],16),parseInt(t[2]+t[3],16),parseInt(t[4]+t[5],16)],r===8&&(o=parseInt(t[6]+t[7],16)/255)),f[0]||(f[0]=0),f[1]||(f[1]=0),f[2]||(f[2]=0),b="rgb"}else if(T=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(s)){var i=T[1],n=i==="rgb";b=t=i.replace(/a$/,"");var r=t==="cmyk"?4:t==="gray"?1:3;f=T[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(a,l){if(/%$/.test(a))return l===r?parseFloat(a)/100:t==="rgb"?255*parseFloat(a)/100:parseFloat(a);if(t[l]==="h"){if(/deg$/.test(a))return parseFloat(a);if(k[a]!==void 0)return k[a]}return parseFloat(a)}),i===t&&f.push(1),o=n||f[r]===void 0?1:f[r],f=f.slice(0,r)}else s.length>10&&/[0-9](?:\s|\/)/.test(s)&&(f=s.match(/([0-9]+)/g).map(function(a){return parseFloat(a)}),b=s.match(/([a-z])/gi).join("").toLowerCase());else isNaN(s)?Array.isArray(s)||s.length?(f=[s[0],s[1],s[2]],b="rgb",o=s.length===4?s[3]:1):s instanceof Object&&(s.r!=null||s.red!=null||s.R!=null?(b="rgb",f=[s.r||s.red||s.R||0,s.g||s.green||s.G||0,s.b||s.blue||s.B||0]):(b="hsl",f=[s.h||s.hue||s.H||0,s.s||s.saturation||s.S||0,s.l||s.lightness||s.L||s.b||s.brightness]),o=s.a||s.alpha||s.opacity||1,s.opacity!=null&&(o/=100)):(b="rgb",f=[s>>>16,(65280&s)>>>8,255&s]);return{space:b,values:f,alpha:o}};var k={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},53576:function(ee,R,e){var M=e(19336);ee.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(k){var s,T,b,f,o,t=k[0]/360,i=k[1]/100,n=k[2]/100;if(i===0)return[o=255*n,o,o];s=2*n-(T=n<.5?n*(1+i):n+i-n*i),f=[0,0,0];for(var r=0;r<3;r++)(b=t+.3333333333333333*-(r-1))<0?b++:b>1&&b--,o=6*b<1?s+6*(T-s)*b:2*b<1?T:3*b<2?s+(T-s)*(.6666666666666666-b)*6:s,f[r]=255*o;return f}},M.hsl=function(k){var s,T,b=k[0]/255,f=k[1]/255,o=k[2]/255,t=Math.min(b,f,o),i=Math.max(b,f,o),n=i-t;return i===t?s=0:b===i?s=(f-o)/n:f===i?s=2+(o-b)/n:o===i&&(s=4+(b-f)/n),(s=Math.min(60*s,360))<0&&(s+=360),T=(t+i)/2,[s,100*(i===t?0:T<=.5?n/(i+t):n/(2-i-t)),100*T]}},19336:function(ee){ee.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},36116:function(ee){ee.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|)o.?tom(e|)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},42771:function(ee,R,e){ee.exports={parse:e(46416),stringify:e(49395)}},8744:function(ee,R,e){var M=e(30584);ee.exports={isSize:function(k){return/^[\d\.]/.test(k)||k.indexOf("/")!==-1||M.indexOf(k)!==-1}}},46416:function(ee,R,e){var M=e(92384),k=e(68194),s=e(3748),T=e(2904),b=e(47916),f=e(7294),o=e(39956),t=e(8744).isSize;ee.exports=n;var i=n.cache={};function n(a){if(typeof a!="string")throw new Error("Font argument must be a string.");if(i[a])return i[a];if(a==="")throw new Error("Cannot parse an empty string.");if(s.indexOf(a)!==-1)return i[a]={system:a};for(var l,u={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},h=o(a,/\s+/);l=h.shift();){if(k.indexOf(l)!==-1)return["style","variant","weight","stretch"].forEach(function(x){u[x]=l}),i[a]=u;if(b.indexOf(l)===-1)if(l!=="normal"&&l!=="small-caps")if(f.indexOf(l)===-1){if(T.indexOf(l)===-1){if(t(l)){var c=o(l,"/");if(u.size=c[0],c[1]!=null?u.lineHeight=r(c[1]):h[0]==="/"&&(h.shift(),u.lineHeight=r(h.shift())),!h.length)throw new Error("Missing required font-family.");return u.family=o(h.join(" "),/\s*,\s*/).map(M),i[a]=u}throw new Error("Unknown or unsupported font token: "+l)}u.weight=l}else u.stretch=l;else u.variant=l;else u.style=l}throw new Error("Missing required font-size.")}function r(a){var l=parseFloat(a);return l.toString()===a?l:a}},49395:function(ee,R,e){var M=e(55616),k=e(8744).isSize,s=a(e(68194)),T=a(e(3748)),b=a(e(2904)),f=a(e(47916)),o=a(e(7294)),t={normal:1,"small-caps":1},i={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},n="serif";function r(l,u){if(l&&!u[l]&&!s[l])throw Error("Unknown keyword `"+l+"`");return l}function a(l){for(var u={},h=0;h<l.length;h++)u[l[h]]=1;return u}ee.exports=function(l){if((l=M(l,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return l.system&&r(l.system,T),l.system;if(r(l.style,f),r(l.variant,t),r(l.weight,b),r(l.stretch,o),l.size==null&&(l.size="1rem"),typeof l.size=="number"&&(l.size+="px"),!k)throw Error("Bad size value `"+l.size+"`");l.family||(l.family=n),Array.isArray(l.family)&&(l.family.length||(l.family=[n]),l.family=l.family.map(function(h){return i[h]?h:'"'+h+'"'}).join(", "));var u=[];return u.push(l.style),l.variant!==l.style&&u.push(l.variant),l.weight!==l.variant&&l.weight!==l.style&&u.push(l.weight),l.stretch!==l.weight&&l.stretch!==l.variant&&l.stretch!==l.style&&u.push(l.stretch),u.push(l.size+(l.lineHeight==null||l.lineHeight==="normal"||l.lineHeight+""=="1"?"":"/"+l.lineHeight)),u.push(l.family),u.filter(Boolean).join(" ")}},27940:function(ee,R,e){var M,k=e(81680),s=e(18496),T=e(87396),b=e(95920),f=e(50868),o=e(84323),t=Function.prototype.bind,i=Object.defineProperty,n=Object.prototype.hasOwnProperty;M=function(r,a,l){var u,h=s(a)&&T(a.value);return delete(u=b(a)).writable,delete u.value,u.get=function(){return!l.overwriteDefinition&&n.call(this,r)?h:(a.value=t.call(h,l.resolveContext?l.resolveContext(this):this),i(this,r,a),this[r])},u},ee.exports=function(r){var a=f(arguments[1]);return k(a.resolveContext)&&T(a.resolveContext),o(r,function(l,u){return M(u,l,a)})}},21092:function(ee,R,e){var M=e(81680),k=e(85488),s=e(38452),T=e(50868),b=e(71056),f=ee.exports=function(o,t){var i,n,r,a,l;return arguments.length<2||typeof o!="string"?(a=t,t=o,o=null):a=arguments[2],M(o)?(i=b.call(o,"c"),n=b.call(o,"e"),r=b.call(o,"w")):(i=r=!0,n=!1),l={value:t,configurable:i,enumerable:n,writable:r},a?s(T(a),l):l};f.gs=function(o,t,i){var n,r,a,l;return typeof o!="string"?(a=i,i=t,t=o,o=null):a=arguments[3],M(t)?k(t)?M(i)?k(i)||(a=i,i=void 0):i=void 0:(a=t,t=i=void 0):t=void 0,M(o)?(n=b.call(o,"c"),r=b.call(o,"e")):(n=!0,r=!1),l={get:t,set:i,configurable:n,enumerable:r},a?s(T(a),l):l}},84706:function(ee,R,e){function M(r,a){return r<a?-1:r>a?1:r>=a?0:NaN}e.d(R,{XE:function(){return M},kv:function(){return T},mo:function(){return f},Uf:function(){return o},SY:function(){return t},ik:function(){return i},oh:function(){return n}}),(k=M).length===1&&(s=k,k=function(r,a){return M(s(r),a)});var k,s;function T(r,a){var l,u,h=r.length,c=-1;if(a==null){for(;++c<h;)if((l=r[c])!=null&&l>=l)for(u=l;++c<h;)(l=r[c])!=null&&l>u&&(u=l)}else for(;++c<h;)if((l=a(r[c],c,r))!=null&&l>=l)for(u=l;++c<h;)(l=a(r[c],c,r))!=null&&l>u&&(u=l);return u}function b(r){return r===null?NaN:+r}function f(r,a){var l,u=r.length,h=u,c=-1,x=0;if(a==null)for(;++c<u;)isNaN(l=b(r[c]))?--h:x+=l;else for(;++c<u;)isNaN(l=b(a(r[c],c,r)))?--h:x+=l;if(h)return x/h}function o(r){for(var a,l,u,h=r.length,c=-1,x=0;++c<h;)x+=r[c].length;for(l=new Array(x);--h>=0;)for(a=(u=r[h]).length;--a>=0;)l[--x]=u[a];return l}function t(r,a){var l,u,h=r.length,c=-1;if(a==null){for(;++c<h;)if((l=r[c])!=null&&l>=l)for(u=l;++c<h;)(l=r[c])!=null&&u>l&&(u=l)}else for(;++c<h;)if((l=a(r[c],c,r))!=null&&l>=l)for(u=l;++c<h;)(l=a(r[c],c,r))!=null&&u>l&&(u=l);return u}function i(r,a,l){r=+r,a=+a,l=(h=arguments.length)<2?(a=r,r=0,1):h<3?1:+l;for(var u=-1,h=0|Math.max(0,Math.ceil((a-r)/l)),c=new Array(h);++u<h;)c[u]=r+u*l;return c}function n(r,a){var l,u=r.length,h=-1,c=0;if(a==null)for(;++h<u;)(l=+r[h])&&(c+=l);else for(;++h<u;)(l=+a(r[h],h,r))&&(c+=l);return c}},34712:function(ee,R,e){e.d(R,{kH:function(){return T},UJ:function(){return b}});var M="$";function k(){}function s(a,l){var u=new k;if(a instanceof k)a.each(function(v,g){u.set(g,v)});else if(Array.isArray(a)){var h,c=-1,x=a.length;if(l==null)for(;++c<x;)u.set(c,a[c]);else for(;++c<x;)u.set(l(h=a[c],c,a),h)}else if(a)for(var p in a)u.set(p,a[p]);return u}k.prototype=s.prototype={constructor:k,has:function(a){return M+a in this},get:function(a){return this[M+a]},set:function(a,l){return this[M+a]=l,this},remove:function(a){var l=M+a;return l in this&&delete this[l]},clear:function(){for(var a in this)a[0]===M&&delete this[a]},keys:function(){var a=[];for(var l in this)l[0]===M&&a.push(l.slice(1));return a},values:function(){var a=[];for(var l in this)l[0]===M&&a.push(this[l]);return a},entries:function(){var a=[];for(var l in this)l[0]===M&&a.push({key:l.slice(1),value:this[l]});return a},size:function(){var a=0;for(var l in this)l[0]===M&&++a;return a},empty:function(){for(var a in this)if(a[0]===M)return!1;return!0},each:function(a){for(var l in this)l[0]===M&&a(this[l],l.slice(1),this)}};var T=s;function b(){var a,l,u,h=[],c=[];function x(v,g,y,m){if(g>=h.length)return a!=null&&v.sort(a),l!=null?l(v):v;for(var _,d,S,w=-1,E=v.length,C=h[g++],O=T(),P=y();++w<E;)(S=O.get(_=C(d=v[w])+""))?S.push(d):O.set(_,[d]);return O.each(function(z,j){m(P,j,x(z,g,y,m))}),P}function p(v,g){if(++g>h.length)return v;var y,m=c[g-1];return l!=null&&g>=h.length?y=v.entries():(y=[],v.each(function(_,d){y.push({key:d,values:p(_,g)})})),m!=null?y.sort(function(_,d){return m(_.key,d.key)}):y}return u={object:function(v){return x(v,0,f,o)},map:function(v){return x(v,0,t,i)},entries:function(v){return p(x(v,0,t,i),0)},key:function(v){return h.push(v),u},sortKeys:function(v){return c[h.length-1]=v,u},sortValues:function(v){return a=v,u},rollup:function(v){return l=v,u}}}function f(){return{}}function o(a,l,u){a[l]=u}function t(){return T()}function i(a,l,u){a.set(l,u)}function n(){}var r=T.prototype;n.prototype={constructor:n,has:r.has,add:function(a){return this[M+(a+="")]=a,this},remove:r.remove,clear:r.clear,values:r.keys,size:r.size,empty:r.empty,each:r.each}},49812:function(ee,R,e){function M(me,be){var ke;function ze(){var ve,oe,ie=ke.length,he=0,Se=0;for(ve=0;ve<ie;++ve)he+=(oe=ke[ve]).x,Se+=oe.y;for(he=he/ie-me,Se=Se/ie-be,ve=0;ve<ie;++ve)(oe=ke[ve]).x-=he,oe.y-=Se}return me==null&&(me=0),be==null&&(be=0),ze.initialize=function(ve){ke=ve},ze.x=function(ve){return arguments.length?(me=+ve,ze):me},ze.y=function(ve){return arguments.length?(be=+ve,ze):be},ze}function k(me){return function(){return me}}function s(){return 1e-6*(Math.random()-.5)}function T(me,be,ke,ze){if(isNaN(be)||isNaN(ke))return me;var ve,oe,ie,he,Se,ye,we,Me,Oe,Ie=me._root,de={data:ze},_e=me._x0,Ae=me._y0,Pe=me._x1,Ee=me._y1;if(!Ie)return me._root=de,me;for(;Ie.length;)if((ye=be>=(oe=(_e+Pe)/2))?_e=oe:Pe=oe,(we=ke>=(ie=(Ae+Ee)/2))?Ae=ie:Ee=ie,ve=Ie,!(Ie=Ie[Me=we<<1|ye]))return ve[Me]=de,me;if(he=+me._x.call(null,Ie.data),Se=+me._y.call(null,Ie.data),be===he&&ke===Se)return de.next=Ie,ve?ve[Me]=de:me._root=de,me;do ve=ve?ve[Me]=new Array(4):me._root=new Array(4),(ye=be>=(oe=(_e+Pe)/2))?_e=oe:Pe=oe,(we=ke>=(ie=(Ae+Ee)/2))?Ae=ie:Ee=ie;while((Me=we<<1|ye)==(Oe=(Se>=ie)<<1|he>=oe));return ve[Oe]=Ie,ve[Me]=de,me}function b(me,be,ke,ze,ve){this.node=me,this.x0=be,this.y0=ke,this.x1=ze,this.y1=ve}function f(me){return me[0]}function o(me){return me[1]}function t(me,be,ke){var ze=new i(be??f,ke??o,NaN,NaN,NaN,NaN);return me==null?ze:ze.addAll(me)}function i(me,be,ke,ze,ve,oe){this._x=me,this._y=be,this._x0=ke,this._y0=ze,this._x1=ve,this._y1=oe,this._root=void 0}function n(me){for(var be={data:me.data},ke=be;me=me.next;)ke=ke.next={data:me.data};return be}e.r(R),e.d(R,{forceCenter:function(){return M},forceCollide:function(){return u},forceLink:function(){return p},forceManyBody:function(){return ce},forceRadial:function(){return fe},forceSimulation:function(){return se},forceX:function(){return pe},forceY:function(){return ge}});var r=t.prototype=i.prototype;function a(me){return me.x+me.vx}function l(me){return me.y+me.vy}function u(me){var be,ke,ze=1,ve=1;function oe(){for(var Se,ye,we,Me,Oe,Ie,de,_e=be.length,Ae=0;Ae<ve;++Ae)for(ye=t(be,a,l).visitAfter(ie),Se=0;Se<_e;++Se)we=be[Se],Ie=ke[we.index],de=Ie*Ie,Me=we.x+we.vx,Oe=we.y+we.vy,ye.visit(Pe);function Pe(Ee,Fe,Ve,Ye,tt){var nt=Ee.data,ht=Ee.r,vt=Ie+ht;if(!nt)return Fe>Me+vt||Ye<Me-vt||Ve>Oe+vt||tt<Oe-vt;if(nt.index>we.index){var pt=Me-nt.x-nt.vx,Qe=Oe-nt.y-nt.vy,Ke=pt*pt+Qe*Qe;Ke<vt*vt&&(pt===0&&(Ke+=(pt=s())*pt),Qe===0&&(Ke+=(Qe=s())*Qe),Ke=(vt-(Ke=Math.sqrt(Ke)))/Ke*ze,we.vx+=(pt*=Ke)*(vt=(ht*=ht)/(de+ht)),we.vy+=(Qe*=Ke)*vt,nt.vx-=pt*(vt=1-vt),nt.vy-=Qe*vt)}}}function ie(Se){if(Se.data)return Se.r=ke[Se.data.index];for(var ye=Se.r=0;ye<4;++ye)Se[ye]&&Se[ye].r>Se.r&&(Se.r=Se[ye].r)}function he(){if(be){var Se,ye,we=be.length;for(ke=new Array(we),Se=0;Se<we;++Se)ye=be[Se],ke[ye.index]=+me(ye,Se,be)}}return typeof me!="function"&&(me=k(me==null?1:+me)),oe.initialize=function(Se){be=Se,he()},oe.iterations=function(Se){return arguments.length?(ve=+Se,oe):ve},oe.strength=function(Se){return arguments.length?(ze=+Se,oe):ze},oe.radius=function(Se){return arguments.length?(me=typeof Se=="function"?Se:k(+Se),he(),oe):me},oe}r.copy=function(){var me,be,ke=new i(this._x,this._y,this._x0,this._y0,this._x1,this._y1),ze=this._root;if(!ze)return ke;if(!ze.length)return ke._root=n(ze),ke;for(me=[{source:ze,target:ke._root=new Array(4)}];ze=me.pop();)for(var ve=0;ve<4;++ve)(be=ze.source[ve])&&(be.length?me.push({source:be,target:ze.target[ve]=new Array(4)}):ze.target[ve]=n(be));return ke},r.add=function(me){var be=+this._x.call(null,me),ke=+this._y.call(null,me);return T(this.cover(be,ke),be,ke,me)},r.addAll=function(me){var be,ke,ze,ve,oe=me.length,ie=new Array(oe),he=new Array(oe),Se=1/0,ye=1/0,we=-1/0,Me=-1/0;for(ke=0;ke<oe;++ke)isNaN(ze=+this._x.call(null,be=me[ke]))||isNaN(ve=+this._y.call(null,be))||(ie[ke]=ze,he[ke]=ve,ze<Se&&(Se=ze),ze>we&&(we=ze),ve<ye&&(ye=ve),ve>Me&&(Me=ve));if(Se>we||ye>Me)return this;for(this.cover(Se,ye).cover(we,Me),ke=0;ke<oe;++ke)T(this,ie[ke],he[ke],me[ke]);return this},r.cover=function(me,be){if(isNaN(me=+me)||isNaN(be=+be))return this;var ke=this._x0,ze=this._y0,ve=this._x1,oe=this._y1;if(isNaN(ke))ve=(ke=Math.floor(me))+1,oe=(ze=Math.floor(be))+1;else{for(var ie,he,Se=ve-ke,ye=this._root;ke>me||me>=ve||ze>be||be>=oe;)switch(he=(be<ze)<<1|me<ke,(ie=new Array(4))[he]=ye,ye=ie,Se*=2,he){case 0:ve=ke+Se,oe=ze+Se;break;case 1:ke=ve-Se,oe=ze+Se;break;case 2:ve=ke+Se,ze=oe-Se;break;case 3:ke=ve-Se,ze=oe-Se}this._root&&this._root.length&&(this._root=ye)}return this._x0=ke,this._y0=ze,this._x1=ve,this._y1=oe,this},r.data=function(){var me=[];return this.visit(function(be){if(!be.length)do me.push(be.data);while(be=be.next)}),me},r.extent=function(me){return arguments.length?this.cover(+me[0][0],+me[0][1]).cover(+me[1][0],+me[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},r.find=function(me,be,ke){var ze,ve,oe,ie,he,Se,ye,we=this._x0,Me=this._y0,Oe=this._x1,Ie=this._y1,de=[],_e=this._root;for(_e&&de.push(new b(_e,we,Me,Oe,Ie)),ke==null?ke=1/0:(we=me-ke,Me=be-ke,Oe=me+ke,Ie=be+ke,ke*=ke);Se=de.pop();)if(!(!(_e=Se.node)||(ve=Se.x0)>Oe||(oe=Se.y0)>Ie||(ie=Se.x1)<we||(he=Se.y1)<Me))if(_e.length){var Ae=(ve+ie)/2,Pe=(oe+he)/2;de.push(new b(_e[3],Ae,Pe,ie,he),new b(_e[2],ve,Pe,Ae,he),new b(_e[1],Ae,oe,ie,Pe),new b(_e[0],ve,oe,Ae,Pe)),(ye=(be>=Pe)<<1|me>=Ae)&&(Se=de[de.length-1],de[de.length-1]=de[de.length-1-ye],de[de.length-1-ye]=Se)}else{var Ee=me-+this._x.call(null,_e.data),Fe=be-+this._y.call(null,_e.data),Ve=Ee*Ee+Fe*Fe;if(Ve<ke){var Ye=Math.sqrt(ke=Ve);we=me-Ye,Me=be-Ye,Oe=me+Ye,Ie=be+Ye,ze=_e.data}}return ze},r.remove=function(me){if(isNaN(oe=+this._x.call(null,me))||isNaN(ie=+this._y.call(null,me)))return this;var be,ke,ze,ve,oe,ie,he,Se,ye,we,Me,Oe,Ie=this._root,de=this._x0,_e=this._y0,Ae=this._x1,Pe=this._y1;if(!Ie)return this;if(Ie.length)for(;;){if((ye=oe>=(he=(de+Ae)/2))?de=he:Ae=he,(we=ie>=(Se=(_e+Pe)/2))?_e=Se:Pe=Se,be=Ie,!(Ie=Ie[Me=we<<1|ye]))return this;if(!Ie.length)break;(be[Me+1&3]||be[Me+2&3]||be[Me+3&3])&&(ke=be,Oe=Me)}for(;Ie.data!==me;)if(ze=Ie,!(Ie=Ie.next))return this;return(ve=Ie.next)&&delete Ie.next,ze?(ve?ze.next=ve:delete ze.next,this):be?(ve?be[Me]=ve:delete be[Me],(Ie=be[0]||be[1]||be[2]||be[3])&&Ie===(be[3]||be[2]||be[1]||be[0])&&!Ie.length&&(ke?ke[Oe]=Ie:this._root=Ie),this):(this._root=ve,this)},r.removeAll=function(me){for(var be=0,ke=me.length;be<ke;++be)this.remove(me[be]);return this},r.root=function(){return this._root},r.size=function(){var me=0;return this.visit(function(be){if(!be.length)do++me;while(be=be.next)}),me},r.visit=function(me){var be,ke,ze,ve,oe,ie,he=[],Se=this._root;for(Se&&he.push(new b(Se,this._x0,this._y0,this._x1,this._y1));be=he.pop();)if(!me(Se=be.node,ze=be.x0,ve=be.y0,oe=be.x1,ie=be.y1)&&Se.length){var ye=(ze+oe)/2,we=(ve+ie)/2;(ke=Se[3])&&he.push(new b(ke,ye,we,oe,ie)),(ke=Se[2])&&he.push(new b(ke,ze,we,ye,ie)),(ke=Se[1])&&he.push(new b(ke,ye,ve,oe,we)),(ke=Se[0])&&he.push(new b(ke,ze,ve,ye,we))}return this},r.visitAfter=function(me){var be,ke=[],ze=[];for(this._root&&ke.push(new b(this._root,this._x0,this._y0,this._x1,this._y1));be=ke.pop();){var ve=be.node;if(ve.length){var oe,ie=be.x0,he=be.y0,Se=be.x1,ye=be.y1,we=(ie+Se)/2,Me=(he+ye)/2;(oe=ve[0])&&ke.push(new b(oe,ie,he,we,Me)),(oe=ve[1])&&ke.push(new b(oe,we,he,Se,Me)),(oe=ve[2])&&ke.push(new b(oe,ie,Me,we,ye)),(oe=ve[3])&&ke.push(new b(oe,we,Me,Se,ye))}ze.push(be)}for(;be=ze.pop();)me(be.node,be.x0,be.y0,be.x1,be.y1);return this},r.x=function(me){return arguments.length?(this._x=me,this):this._x},r.y=function(me){return arguments.length?(this._y=me,this):this._y};var h=e(34712);function c(me){return me.index}function x(me,be){var ke=me.get(be);if(!ke)throw new Error("missing: "+be);return ke}function p(me){var be,ke,ze,ve,oe,ie=c,he=function(de){return 1/Math.min(ve[de.source.index],ve[de.target.index])},Se=k(30),ye=1;function we(de){for(var _e=0,Ae=me.length;_e<ye;++_e)for(var Pe,Ee,Fe,Ve,Ye,tt,nt,ht=0;ht<Ae;++ht)Ee=(Pe=me[ht]).source,Ve=(Fe=Pe.target).x+Fe.vx-Ee.x-Ee.vx||s(),Ye=Fe.y+Fe.vy-Ee.y-Ee.vy||s(),Ve*=tt=((tt=Math.sqrt(Ve*Ve+Ye*Ye))-ke[ht])/tt*de*be[ht],Ye*=tt,Fe.vx-=Ve*(nt=oe[ht]),Fe.vy-=Ye*nt,Ee.vx+=Ve*(nt=1-nt),Ee.vy+=Ye*nt}function Me(){if(ze){var de,_e,Ae=ze.length,Pe=me.length,Ee=(0,h.kH)(ze,ie);for(de=0,ve=new Array(Ae);de<Pe;++de)(_e=me[de]).index=de,typeof _e.source!="object"&&(_e.source=x(Ee,_e.source)),typeof _e.target!="object"&&(_e.target=x(Ee,_e.target)),ve[_e.source.index]=(ve[_e.source.index]||0)+1,ve[_e.target.index]=(ve[_e.target.index]||0)+1;for(de=0,oe=new Array(Pe);de<Pe;++de)_e=me[de],oe[de]=ve[_e.source.index]/(ve[_e.source.index]+ve[_e.target.index]);be=new Array(Pe),Oe(),ke=new Array(Pe),Ie()}}function Oe(){if(ze)for(var de=0,_e=me.length;de<_e;++de)be[de]=+he(me[de],de,me)}function Ie(){if(ze)for(var de=0,_e=me.length;de<_e;++de)ke[de]=+Se(me[de],de,me)}return me==null&&(me=[]),we.initialize=function(de){ze=de,Me()},we.links=function(de){return arguments.length?(me=de,Me(),we):me},we.id=function(de){return arguments.length?(ie=de,we):ie},we.iterations=function(de){return arguments.length?(ye=+de,we):ye},we.strength=function(de){return arguments.length?(he=typeof de=="function"?de:k(+de),Oe(),we):he},we.distance=function(de){return arguments.length?(Se=typeof de=="function"?de:k(+de),Ie(),we):Se},we}var v={value:function(){}};function g(){for(var me,be=0,ke=arguments.length,ze={};be<ke;++be){if(!(me=arguments[be]+"")||me in ze||/[\s.]/.test(me))throw new Error("illegal type: "+me);ze[me]=[]}return new y(ze)}function y(me){this._=me}function m(me,be){for(var ke,ze=0,ve=me.length;ze<ve;++ze)if((ke=me[ze]).name===be)return ke.value}function _(me,be,ke){for(var ze=0,ve=me.length;ze<ve;++ze)if(me[ze].name===be){me[ze]=v,me=me.slice(0,ze).concat(me.slice(ze+1));break}return ke!=null&&me.push({name:be,value:ke}),me}y.prototype=g.prototype={constructor:y,on:function(me,be){var ke,ze,ve=this._,oe=(ze=ve,(me+"").trim().split(/^|\s+/).map(function(Se){var ye="",we=Se.indexOf(".");if(we>=0&&(ye=Se.slice(we+1),Se=Se.slice(0,we)),Se&&!ze.hasOwnProperty(Se))throw new Error("unknown type: "+Se);return{type:Se,name:ye}})),ie=-1,he=oe.length;if(!(arguments.length<2)){if(be!=null&&typeof be!="function")throw new Error("invalid callback: "+be);for(;++ie<he;)if(ke=(me=oe[ie]).type)ve[ke]=_(ve[ke],me.name,be);else if(be==null)for(ke in ve)ve[ke]=_(ve[ke],me.name,null);return this}for(;++ie<he;)if((ke=(me=oe[ie]).type)&&(ke=m(ve[ke],me.name)))return ke},copy:function(){var me={},be=this._;for(var ke in be)me[ke]=be[ke].slice();return new y(me)},call:function(me,be){if((ke=arguments.length-2)>0)for(var ke,ze,ve=new Array(ke),oe=0;oe<ke;++oe)ve[oe]=arguments[oe+2];if(!this._.hasOwnProperty(me))throw new Error("unknown type: "+me);for(oe=0,ke=(ze=this._[me]).length;oe<ke;++oe)ze[oe].value.apply(be,ve)},apply:function(me,be,ke){if(!this._.hasOwnProperty(me))throw new Error("unknown type: "+me);for(var ze=this._[me],ve=0,oe=ze.length;ve<oe;++ve)ze[ve].value.apply(be,ke)}};var d,S,w=g,E=0,C=0,O=0,P=1e3,z=0,j=0,I=0,N=typeof performance=="object"&&performance.now?performance:Date,W=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(me){setTimeout(me,17)};function F(){return j||(W(U),j=N.now()+I)}function U(){j=0}function H(){this._call=this._time=this._next=null}function ne(me,be,ke){var ze=new H;return ze.restart(me,be,ke),ze}function $(){j=(z=N.now())+I,E=C=0;try{(function(){F(),++E;for(var me,be=d;be;)(me=j-be._time)>=0&&be._call.call(null,me),be=be._next;--E})()}finally{E=0,function(){for(var me,be,ke=d,ze=1/0;ke;)ke._call?(ze>ke._time&&(ze=ke._time),me=ke,ke=ke._next):(be=ke._next,ke._next=null,ke=me?me._next=be:d=be);S=me,Q(ze)}(),j=0}}function K(){var me=N.now(),be=me-z;be>P&&(I-=be,z=me)}function Q(me){E||(C&&(C=clearTimeout(C)),me-j>24?(me<1/0&&(C=setTimeout($,me-N.now()-I)),O&&(O=clearInterval(O))):(O||(z=N.now(),O=setInterval(K,P)),E=1,W($)))}function Z(me){return me.x}function X(me){return me.y}H.prototype=ne.prototype={constructor:H,restart:function(me,be,ke){if(typeof me!="function")throw new TypeError("callback is not a function");ke=(ke==null?F():+ke)+(be==null?0:+be),this._next||S===this||(S?S._next=this:d=this,S=this),this._call=me,this._time=ke,Q()},stop:function(){this._call&&(this._call=null,this._time=1/0,Q())}};var te=10,ae=Math.PI*(3-Math.sqrt(5));function se(me){var be,ke=1,ze=.001,ve=1-Math.pow(ze,1/300),oe=0,ie=.6,he=(0,h.kH)(),Se=ne(we),ye=w("tick","end");function we(){Me(),ye.call("tick",be),ke<ze&&(Se.stop(),ye.call("end",be))}function Me(de){var _e,Ae,Pe=me.length;de===void 0&&(de=1);for(var Ee=0;Ee<de;++Ee)for(ke+=(oe-ke)*ve,he.each(function(Fe){Fe(ke)}),_e=0;_e<Pe;++_e)(Ae=me[_e]).fx==null?Ae.x+=Ae.vx*=ie:(Ae.x=Ae.fx,Ae.vx=0),Ae.fy==null?Ae.y+=Ae.vy*=ie:(Ae.y=Ae.fy,Ae.vy=0);return be}function Oe(){for(var de,_e=0,Ae=me.length;_e<Ae;++_e){if((de=me[_e]).index=_e,de.fx!=null&&(de.x=de.fx),de.fy!=null&&(de.y=de.fy),isNaN(de.x)||isNaN(de.y)){var Pe=te*Math.sqrt(_e),Ee=_e*ae;de.x=Pe*Math.cos(Ee),de.y=Pe*Math.sin(Ee)}(isNaN(de.vx)||isNaN(de.vy))&&(de.vx=de.vy=0)}}function Ie(de){return de.initialize&&de.initialize(me),de}return me==null&&(me=[]),Oe(),be={tick:Me,restart:function(){return Se.restart(we),be},stop:function(){return Se.stop(),be},nodes:function(de){return arguments.length?(me=de,Oe(),he.each(Ie),be):me},alpha:function(de){return arguments.length?(ke=+de,be):ke},alphaMin:function(de){return arguments.length?(ze=+de,be):ze},alphaDecay:function(de){return arguments.length?(ve=+de,be):+ve},alphaTarget:function(de){return arguments.length?(oe=+de,be):oe},velocityDecay:function(de){return arguments.length?(ie=1-de,be):1-ie},force:function(de,_e){return arguments.length>1?(_e==null?he.remove(de):he.set(de,Ie(_e)),be):he.get(de)},find:function(de,_e,Ae){var Pe,Ee,Fe,Ve,Ye,tt=0,nt=me.length;for(Ae==null?Ae=1/0:Ae*=Ae,tt=0;tt<nt;++tt)(Fe=(Pe=de-(Ve=me[tt]).x)*Pe+(Ee=_e-Ve.y)*Ee)<Ae&&(Ye=Ve,Ae=Fe);return Ye},on:function(de,_e){return arguments.length>1?(ye.on(de,_e),be):ye.on(de)}}}function ce(){var me,be,ke,ze,ve=k(-30),oe=1,ie=1/0,he=.81;function Se(Oe){var Ie,de=me.length,_e=t(me,Z,X).visitAfter(we);for(ke=Oe,Ie=0;Ie<de;++Ie)be=me[Ie],_e.visit(Me)}function ye(){if(me){var Oe,Ie,de=me.length;for(ze=new Array(de),Oe=0;Oe<de;++Oe)Ie=me[Oe],ze[Ie.index]=+ve(Ie,Oe,me)}}function we(Oe){var Ie,de,_e,Ae,Pe,Ee=0,Fe=0;if(Oe.length){for(_e=Ae=Pe=0;Pe<4;++Pe)(Ie=Oe[Pe])&&(de=Math.abs(Ie.value))&&(Ee+=Ie.value,Fe+=de,_e+=de*Ie.x,Ae+=de*Ie.y);Oe.x=_e/Fe,Oe.y=Ae/Fe}else{(Ie=Oe).x=Ie.data.x,Ie.y=Ie.data.y;do Ee+=ze[Ie.data.index];while(Ie=Ie.next)}Oe.value=Ee}function Me(Oe,Ie,de,_e){if(!Oe.value)return!0;var Ae=Oe.x-be.x,Pe=Oe.y-be.y,Ee=_e-Ie,Fe=Ae*Ae+Pe*Pe;if(Ee*Ee/he<Fe)return Fe<ie&&(Ae===0&&(Fe+=(Ae=s())*Ae),Pe===0&&(Fe+=(Pe=s())*Pe),Fe<oe&&(Fe=Math.sqrt(oe*Fe)),be.vx+=Ae*Oe.value*ke/Fe,be.vy+=Pe*Oe.value*ke/Fe),!0;if(!(Oe.length||Fe>=ie)){(Oe.data!==be||Oe.next)&&(Ae===0&&(Fe+=(Ae=s())*Ae),Pe===0&&(Fe+=(Pe=s())*Pe),Fe<oe&&(Fe=Math.sqrt(oe*Fe)));do Oe.data!==be&&(Ee=ze[Oe.data.index]*ke/Fe,be.vx+=Ae*Ee,be.vy+=Pe*Ee);while(Oe=Oe.next)}}return Se.initialize=function(Oe){me=Oe,ye()},Se.strength=function(Oe){return arguments.length?(ve=typeof Oe=="function"?Oe:k(+Oe),ye(),Se):ve},Se.distanceMin=function(Oe){return arguments.length?(oe=Oe*Oe,Se):Math.sqrt(oe)},Se.distanceMax=function(Oe){return arguments.length?(ie=Oe*Oe,Se):Math.sqrt(ie)},Se.theta=function(Oe){return arguments.length?(he=Oe*Oe,Se):Math.sqrt(he)},Se}function fe(me,be,ke){var ze,ve,oe,ie=k(.1);function he(ye){for(var we=0,Me=ze.length;we<Me;++we){var Oe=ze[we],Ie=Oe.x-be||1e-6,de=Oe.y-ke||1e-6,_e=Math.sqrt(Ie*Ie+de*de),Ae=(oe[we]-_e)*ve[we]*ye/_e;Oe.vx+=Ie*Ae,Oe.vy+=de*Ae}}function Se(){if(ze){var ye,we=ze.length;for(ve=new Array(we),oe=new Array(we),ye=0;ye<we;++ye)oe[ye]=+me(ze[ye],ye,ze),ve[ye]=isNaN(oe[ye])?0:+ie(ze[ye],ye,ze)}}return typeof me!="function"&&(me=k(+me)),be==null&&(be=0),ke==null&&(ke=0),he.initialize=function(ye){ze=ye,Se()},he.strength=function(ye){return arguments.length?(ie=typeof ye=="function"?ye:k(+ye),Se(),he):ie},he.radius=function(ye){return arguments.length?(me=typeof ye=="function"?ye:k(+ye),Se(),he):me},he.x=function(ye){return arguments.length?(be=+ye,he):be},he.y=function(ye){return arguments.length?(ke=+ye,he):ke},he}function pe(me){var be,ke,ze,ve=k(.1);function oe(he){for(var Se,ye=0,we=be.length;ye<we;++ye)(Se=be[ye]).vx+=(ze[ye]-Se.x)*ke[ye]*he}function ie(){if(be){var he,Se=be.length;for(ke=new Array(Se),ze=new Array(Se),he=0;he<Se;++he)ke[he]=isNaN(ze[he]=+me(be[he],he,be))?0:+ve(be[he],he,be)}}return typeof me!="function"&&(me=k(me==null?0:+me)),oe.initialize=function(he){be=he,ie()},oe.strength=function(he){return arguments.length?(ve=typeof he=="function"?he:k(+he),ie(),oe):ve},oe.x=function(he){return arguments.length?(me=typeof he=="function"?he:k(+he),ie(),oe):me},oe}function ge(me){var be,ke,ze,ve=k(.1);function oe(he){for(var Se,ye=0,we=be.length;ye<we;++ye)(Se=be[ye]).vy+=(ze[ye]-Se.y)*ke[ye]*he}function ie(){if(be){var he,Se=be.length;for(ke=new Array(Se),ze=new Array(Se),he=0;he<Se;++he)ke[he]=isNaN(ze[he]=+me(be[he],he,be))?0:+ve(be[he],he,be)}}return typeof me!="function"&&(me=k(me==null?0:+me)),oe.initialize=function(he){be=he,ie()},oe.strength=function(he){return arguments.length?(ve=typeof he=="function"?he:k(+he),ie(),oe):ve},oe.y=function(he){return arguments.length?(me=typeof he=="function"?he:k(+he),ie(),oe):me},oe}},57624:function(ee,R,e){function M(u,h){if((c=(u=h?u.toExponential(h-1):u.toExponential()).indexOf("e"))<0)return null;var c,x=u.slice(0,c);return[x.length>1?x[0]+x.slice(2):x,+u.slice(c+1)]}e.d(R,{E9:function(){return n},SO:function(){return l}});var k,s=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function T(u){if(!(h=s.exec(u)))throw new Error("invalid format: "+u);var h;return new b({fill:h[1],align:h[2],sign:h[3],symbol:h[4],zero:h[5],width:h[6],comma:h[7],precision:h[8]&&h[8].slice(1),trim:h[9],type:h[10]})}function b(u){this.fill=u.fill===void 0?" ":u.fill+"",this.align=u.align===void 0?">":u.align+"",this.sign=u.sign===void 0?"-":u.sign+"",this.symbol=u.symbol===void 0?"":u.symbol+"",this.zero=!!u.zero,this.width=u.width===void 0?void 0:+u.width,this.comma=!!u.comma,this.precision=u.precision===void 0?void 0:+u.precision,this.trim=!!u.trim,this.type=u.type===void 0?"":u.type+""}function f(u,h){var c=M(u,h);if(!c)return u+"";var x=c[0],p=c[1];return p<0?"0."+new Array(-p).join("0")+x:x.length>p+1?x.slice(0,p+1)+"."+x.slice(p+1):x+new Array(p-x.length+2).join("0")}T.prototype=b.prototype,b.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,0|this.width))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var o={"%":function(u,h){return(100*u).toFixed(h)},b:function(u){return Math.round(u).toString(2)},c:function(u){return u+""},d:function(u){return Math.abs(u=Math.round(u))>=1e21?u.toLocaleString("en").replace(/,/g,""):u.toString(10)},e:function(u,h){return u.toExponential(h)},f:function(u,h){return u.toFixed(h)},g:function(u,h){return u.toPrecision(h)},o:function(u){return Math.round(u).toString(8)},p:function(u,h){return f(100*u,h)},r:f,s:function(u,h){var c=M(u,h);if(!c)return u+"";var x=c[0],p=c[1],v=p-(k=3*Math.max(-8,Math.min(8,Math.floor(p/3))))+1,g=x.length;return v===g?x:v>g?x+new Array(v-g+1).join("0"):v>0?x.slice(0,v)+"."+x.slice(v):"0."+new Array(1-v).join("0")+M(u,Math.max(0,h+v-1))[0]},X:function(u){return Math.round(u).toString(16).toUpperCase()},x:function(u){return Math.round(u).toString(16)}};function t(u){return u}var i,n,r=Array.prototype.map,a=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function l(u){var h,c,x=u.grouping===void 0||u.thousands===void 0?t:(h=r.call(u.grouping,Number),c=u.thousands+"",function(w,E){for(var C=w.length,O=[],P=0,z=h[0],j=0;C>0&&z>0&&(j+z+1>E&&(z=Math.max(1,E-j)),O.push(w.substring(C-=z,C+z)),!((j+=z+1)>E));)z=h[P=(P+1)%h.length];return O.reverse().join(c)}),p=u.currency===void 0?"":u.currency[0]+"",v=u.currency===void 0?"":u.currency[1]+"",g=u.decimal===void 0?".":u.decimal+"",y=u.numerals===void 0?t:function(w){return function(E){return E.replace(/[0-9]/g,function(C){return w[+C]})}}(r.call(u.numerals,String)),m=u.percent===void 0?"%":u.percent+"",_=u.minus===void 0?"-":u.minus+"",d=u.nan===void 0?"NaN":u.nan+"";function S(w){var E=(w=T(w)).fill,C=w.align,O=w.sign,P=w.symbol,z=w.zero,j=w.width,I=w.comma,N=w.precision,W=w.trim,F=w.type;F==="n"?(I=!0,F="g"):o[F]||(N===void 0&&(N=12),W=!0,F="g"),(z||E==="0"&&C==="=")&&(z=!0,E="0",C="=");var U=P==="$"?p:P==="#"&&/[boxX]/.test(F)?"0"+F.toLowerCase():"",H=P==="$"?v:/[%p]/.test(F)?m:"",ne=o[F],$=/[defgprs%]/.test(F);function K(Q){var Z,X,te,ae=U,se=H;if(F==="c")se=ne(Q)+se,Q="";else{var ce=(Q=+Q)<0||1/Q<0;if(Q=isNaN(Q)?d:ne(Math.abs(Q),N),W&&(Q=function(ge){e:for(var me,be=ge.length,ke=1,ze=-1;ke<be;++ke)switch(ge[ke]){case".":ze=me=ke;break;case"0":ze===0&&(ze=ke),me=ke;break;default:if(!+ge[ke])break e;ze>0&&(ze=0)}return ze>0?ge.slice(0,ze)+ge.slice(me+1):ge}(Q)),ce&&+Q==0&&O!=="+"&&(ce=!1),ae=(ce?O==="("?O:_:O==="-"||O==="("?"":O)+ae,se=(F==="s"?a[8+k/3]:"")+se+(ce&&O==="("?")":""),$){for(Z=-1,X=Q.length;++Z<X;)if(48>(te=Q.charCodeAt(Z))||te>57){se=(te===46?g+Q.slice(Z+1):Q.slice(Z))+se,Q=Q.slice(0,Z);break}}}I&&!z&&(Q=x(Q,1/0));var fe=ae.length+Q.length+se.length,pe=fe<j?new Array(j-fe+1).join(E):"";switch(I&&z&&(Q=x(pe+Q,pe.length?j-se.length:1/0),pe=""),C){case"<":Q=ae+Q+se+pe;break;case"=":Q=ae+pe+Q+se;break;case"^":Q=pe.slice(0,fe=pe.length>>1)+ae+Q+se+pe.slice(fe);break;default:Q=pe+ae+Q+se}return y(Q)}return N=N===void 0?6:/[gprs]/.test(F)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N)),K.toString=function(){return w+""},K}return{format:S,formatPrefix:function(w,E){var C,O=S(((w=T(w)).type="f",w)),P=3*Math.max(-8,Math.min(8,Math.floor((C=E,((C=M(Math.abs(C)))?C[1]:NaN)/3)))),z=Math.pow(10,-P),j=a[8+P/3];return function(I){return O(z*I)+j}}}}i=l({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),n=i.format,i.formatPrefix},87108:function(ee,R,e){e.r(R),e.d(R,{geoAiry:function(){return I},geoAiryRaw:function(){return j},geoAitoff:function(){return W},geoAitoffRaw:function(){return N},geoArmadillo:function(){return U},geoArmadilloRaw:function(){return F},geoAugust:function(){return ne},geoAugustRaw:function(){return H},geoBaker:function(){return Z},geoBakerRaw:function(){return Q},geoBerghaus:function(){return ae},geoBerghausRaw:function(){return te},geoBertin1953:function(){return ke},geoBertin1953Raw:function(){return be},geoBoggs:function(){return we},geoBoggsRaw:function(){return ye},geoBonne:function(){return _e},geoBonneRaw:function(){return de},geoBottomley:function(){return Pe},geoBottomleyRaw:function(){return Ae},geoBromley:function(){return Fe},geoBromleyRaw:function(){return Ee},geoChamberlin:function(){return Ke},geoChamberlinAfrica:function(){return Qe},geoChamberlinRaw:function(){return vt},geoCollignon:function(){return Ot},geoCollignonRaw:function(){return Mt},geoCraig:function(){return St},geoCraigRaw:function(){return Pt},geoCraster:function(){return Be},geoCrasterRaw:function(){return We},geoCylindricalEqualArea:function(){return ot},geoCylindricalEqualAreaRaw:function(){return Ge},geoCylindricalStereographic:function(){return dt},geoCylindricalStereographicRaw:function(){return it},geoEckert1:function(){return je},geoEckert1Raw:function(){return gt},geoEckert2:function(){return rt},geoEckert2Raw:function(){return Re},geoEckert3:function(){return ut},geoEckert3Raw:function(){return ct},geoEckert4:function(){return xt},geoEckert4Raw:function(){return et},geoEckert5:function(){return Tt},geoEckert5Raw:function(){return mt},geoEckert6:function(){return bt},geoEckert6Raw:function(){return yt},geoEisenlohr:function(){return en},geoEisenlohrRaw:function(){return Ut},geoFahey:function(){return qt},geoFaheyRaw:function(){return rn},geoFoucaut:function(){return xn},geoFoucautRaw:function(){return Kt},geoFoucautSinusoidal:function(){return Xt},geoFoucautSinusoidalRaw:function(){return on},geoGilbert:function(){return mn},geoGingery:function(){return zn},geoGingeryRaw:function(){return Cn},geoGinzburg4:function(){return Fn},geoGinzburg4Raw:function(){return sr},geoGinzburg5:function(){return Xn},geoGinzburg5Raw:function(){return Yn},geoGinzburg6:function(){return Yt},geoGinzburg6Raw:function(){return rr},geoGinzburg8:function(){return Sn},geoGinzburg8Raw:function(){return $t},geoGinzburg9:function(){return En},geoGinzburg9Raw:function(){return dn},geoGringorten:function(){return $n},geoGringortenQuincuncial:function(){return sa},geoGringortenRaw:function(){return Bn},geoGuyou:function(){return Ct},geoGuyouRaw:function(){return gn},geoHammer:function(){return pe},geoHammerRaw:function(){return ce},geoHammerRetroazimuthal:function(){return fn},geoHammerRetroazimuthalRaw:function(){return Zt},geoHealpix:function(){return On},geoHealpixRaw:function(){return Ft},geoHill:function(){return Zn},geoHillRaw:function(){return Dn},geoHomolosine:function(){return mr},geoHomolosineRaw:function(){return ir},geoHufnagel:function(){return Qn},geoHufnagelRaw:function(){return ur},geoHyperelliptical:function(){return oi},geoHyperellipticalRaw:function(){return Or},geoInterrupt:function(){return ii},geoInterruptedBoggs:function(){return oa},geoInterruptedHomolosine:function(){return Ri},geoInterruptedMollweide:function(){return Pi},geoInterruptedMollweideHemispheres:function(){return ko},geoInterruptedQuarticAuthalic:function(){return Tl},geoInterruptedSinuMollweide:function(){return Ka},geoInterruptedSinusoidal:function(){return Ao},geoKavrayskiy7:function(){return Ra},geoKavrayskiy7Raw:function(){return Sa},geoLagrange:function(){return ti},geoLagrangeRaw:function(){return Fa},geoLarrivee:function(){return $a},geoLarriveeRaw:function(){return co},geoLaskowski:function(){return Mo},geoLaskowskiRaw:function(){return Ba},geoLittrow:function(){return So},geoLittrowRaw:function(){return Qa},geoLoximuthal:function(){return Eo},geoLoximuthalRaw:function(){return fo},geoMiller:function(){return Ks},geoMillerRaw:function(){return eo},geoModifiedStereographic:function(){return Yo},geoModifiedStereographicAlaska:function(){return bl},geoModifiedStereographicGs48:function(){return _l},geoModifiedStereographicGs50:function(){return Wo},geoModifiedStereographicLee:function(){return is},geoModifiedStereographicMiller:function(){return to},geoModifiedStereographicRaw:function(){return Bs},geoMollweide:function(){return ie},geoMollweideRaw:function(){return oe},geoMtFlatPolarParabolic:function(){return Js},geoMtFlatPolarParabolicRaw:function(){return Na},geoMtFlatPolarQuartic:function(){return ho},geoMtFlatPolarQuarticRaw:function(){return Lo},geoMtFlatPolarSinusoidal:function(){return Co},geoMtFlatPolarSinusoidalRaw:function(){return po},geoNaturalEarth:function(){return Ur.c},geoNaturalEarth2:function(){return wl},geoNaturalEarth2Raw:function(){return as},geoNaturalEarthRaw:function(){return Ur.g},geoNellHammer:function(){return os},geoNellHammerRaw:function(){return Ns},geoNicolosi:function(){return kl},geoNicolosiRaw:function(){return js},geoPatterson:function(){return cl},geoPattersonRaw:function(){return Vs},geoPeirceQuincuncial:function(){return es},geoPierceQuincuncial:function(){return es},geoPolyconic:function(){return Ko},geoPolyconicRaw:function(){return ls},geoPolyhedral:function(){return $r},geoPolyhedralButterfly:function(){return cs},geoPolyhedralCollignon:function(){return ks},geoPolyhedralWaterman:function(){return As},geoProject:function(){return Ms},geoQuantize:function(){return vo},geoQuincuncial:function(){return Do},geoRectangularPolyconic:function(){return Oa},geoRectangularPolyconicRaw:function(){return Ca},geoRobinson:function(){return _r},geoRobinsonRaw:function(){return qa},geoSatellite:function(){return $s},geoSatelliteRaw:function(){return Ss},geoSinuMollweide:function(){return Gn},geoSinuMollweideRaw:function(){return Un},geoSinusoidal:function(){return Ie},geoSinusoidalRaw:function(){return Oe},geoStitch:function(){return Gi},geoTimes:function(){return io},geoTimesRaw:function(){return la},geoTwoPointAzimuthal:function(){return ca},geoTwoPointAzimuthalRaw:function(){return hs},geoTwoPointAzimuthalUsa:function(){return ps},geoTwoPointEquidistant:function(){return ns},geoTwoPointEquidistantRaw:function(){return Vr},geoTwoPointEquidistantUsa:function(){return ao},geoVanDerGrinten:function(){return ds},geoVanDerGrinten2:function(){return Wa},geoVanDerGrinten2Raw:function(){return gs},geoVanDerGrinten3:function(){return rs},geoVanDerGrinten3Raw:function(){return li},geoVanDerGrinten4:function(){return Cr},geoVanDerGrinten4Raw:function(){return kr},geoVanDerGrintenRaw:function(){return Ga},geoWagner:function(){return oo},geoWagner4:function(){return fl},geoWagner4Raw:function(){return Qr},geoWagner6:function(){return ni},geoWagner6Raw:function(){return Ta},geoWagner7:function(){return xo},geoWagnerRaw:function(){return wa},geoWiechel:function(){return ga},geoWiechelRaw:function(){return hi},geoWinkel3:function(){return Qs},geoWinkel3Raw:function(){return jo}});var M=e(87952),k=Math.abs,s=Math.atan,T=Math.atan2,b=Math.cos,f=Math.exp,o=Math.floor,t=Math.log,i=Math.max,n=Math.min,r=Math.pow,a=Math.round,l=Math.sign||function(Xe){return Xe>0?1:Xe<0?-1:0},u=Math.sin,h=Math.tan,c=1e-6,x=1e-12,p=Math.PI,v=p/2,g=p/4,y=Math.SQRT1_2,m=O(2),_=O(p),d=2*p,S=180/p,w=p/180;function E(Xe){return Xe>1?v:Xe<-1?-v:Math.asin(Xe)}function C(Xe){return Xe>1?0:Xe<-1?p:Math.acos(Xe)}function O(Xe){return Xe>0?Math.sqrt(Xe):0}function P(Xe){return(f(Xe)-f(-Xe))/2}function z(Xe){return(f(Xe)+f(-Xe))/2}function j(Xe){var Je=h(Xe/2),at=2*t(b(Xe/2))/(Je*Je);function B(G,q){var L=b(G),V=b(q),J=u(q),re=V*L,ue=-((1-re?t((1+re)/2)/(1-re):-.5)+at/(1+re));return[ue*V*u(G),ue*J]}return B.invert=function(G,q){var L,V=O(G*G+q*q),J=-Xe/2,re=50;if(!V)return[0,0];do{var ue=J/2,xe=b(ue),Le=u(ue),De=Le/xe,Ue=-t(k(xe));J-=L=(2/De*Ue-at*De-V)/(-Ue/(Le*Le)+1-at/(2*xe*xe))*(xe<0?.7:1)}while(k(L)>c&&--re>0);var qe=u(J);return[T(G*qe,V*b(J)),E(q*qe/V)]},B}function I(){var Xe=v,Je=(0,M.U)(j),at=Je(Xe);return at.radius=function(B){return arguments.length?Je(Xe=B*w):Xe*S},at.scale(179.976).clipAngle(147)}function N(Xe,Je){var at=b(Je),B=function(G){return G?G/Math.sin(G):1}(C(at*b(Xe/=2)));return[2*at*u(Xe)*B,u(Je)*B]}function W(){return(0,M.c)(N).scale(152.63)}function F(Xe){var Je=u(Xe),at=b(Xe),B=Xe>=0?1:-1,G=h(B*Xe),q=(1+Je-at)/2;function L(V,J){var re=b(J),ue=b(V/=2);return[(1+re)*u(V),(B*J>-T(ue,G)-.001?0:10*-B)+q+u(J)*at-(1+re)*Je*ue]}return L.invert=function(V,J){var re=0,ue=0,xe=50;do{var Le=b(re),De=u(re),Ue=b(ue),qe=u(ue),$e=1+Ue,lt=$e*De-V,ft=q+qe*at-$e*Je*Le-J,wt=$e*Le/2,Et=-De*qe,At=Je*$e*De/2,Dt=at*Ue+Je*Le*qe,Lt=Et*At-Dt*wt,Wt=(ft*Et-lt*Dt)/Lt/2,Ht=(lt*At-ft*wt)/Lt;k(Ht)>2&&(Ht/=2),re-=Wt,ue-=Ht}while((k(Wt)>c||k(Ht)>c)&&--xe>0);return B*ue>-T(b(re),G)-.001?[2*re,ue]:null},L}function U(){var Xe=20*w,Je=Xe>=0?1:-1,at=h(Je*Xe),B=(0,M.U)(F),G=B(Xe),q=G.stream;return G.parallel=function(L){return arguments.length?(at=h((Je=(Xe=L*w)>=0?1:-1)*Xe),B(Xe)):Xe*S},G.stream=function(L){var V=G.rotate(),J=q(L),re=(G.rotate([0,0]),q(L)),ue=G.precision();return G.rotate(V),J.sphere=function(){re.polygonStart(),re.lineStart();for(var xe=-180*Je;Je*xe<180;xe+=90*Je)re.point(xe,90*Je);if(Xe)for(;Je*(xe-=3*Je*ue)>=-180;)re.point(xe,Je*-T(b(xe*w/2),at)*S);re.lineEnd(),re.polygonEnd()},J},G.scale(218.695).center([0,28.0974])}function H(Xe,Je){var at=h(Je/2),B=O(1-at*at),G=1+B*b(Xe/=2),q=u(Xe)*B/G,L=at/G,V=q*q,J=L*L;return[1.3333333333333333*q*(3+V-3*J),1.3333333333333333*L*(3+3*V-J)]}function ne(){return(0,M.c)(H).scale(66.1603)}N.invert=function(Xe,Je){if(!(Xe*Xe+4*Je*Je>p*p+c)){var at=Xe,B=Je,G=25;do{var q,L=u(at),V=u(at/2),J=b(at/2),re=u(B),ue=b(B),xe=u(2*B),Le=re*re,De=ue*ue,Ue=V*V,qe=1-De*J*J,$e=qe?C(ue*J)*O(q=1/qe):q=0,lt=2*$e*ue*V-Xe,ft=$e*re-Je,wt=q*(De*Ue+$e*ue*J*Le),Et=q*(.5*L*xe-2*$e*re*V),At=.25*q*(xe*V-$e*re*De*L),Dt=q*(Le*J+$e*Ue*ue),Lt=Et*At-Dt*wt;if(!Lt)break;var Wt=(ft*Et-lt*Dt)/Lt,Ht=(lt*At-ft*wt)/Lt;at-=Wt,B-=Ht}while((k(Wt)>c||k(Ht)>c)&&--G>0);return[at,B]}},H.invert=function(Xe,Je){if(Je*=.375,!(Xe*=.375)&&k(Je)>1)return null;var at=1+Xe*Xe+Je*Je,B=O((at-O(at*at-4*Je*Je))/2),G=E(B)/3,q=B?function(re){return t(re+O(re*re-1))}(k(Je/B))/3:function(re){return t(re+O(re*re+1))}(k(Xe))/3,L=b(G),V=z(q),J=V*V-L*L;return[2*l(Xe)*T(P(q)*L,.25-J),2*l(Je)*T(V*u(G),.25+J)]};var $=O(8),K=t(1+m);function Q(Xe,Je){var at=k(Je);return at<g?[Xe,t(h(g+Je/2))]:[Xe*b(at)*(2*m-1/u(at)),l(Je)*(2*m*(at-g)-t(h(at/2)))]}function Z(){return(0,M.c)(Q).scale(112.314)}Q.invert=function(Xe,Je){if((B=k(Je))<K)return[Xe,2*s(f(Je))-v];var at,B,G=g,q=25;do{var L=b(G/2),V=h(G/2);G-=at=($*(G-g)-t(V)-B)/($-L*L/(2*V))}while(k(at)>x&&--q>0);return[Xe/(b(G)*($-1/u(G))),l(Je)*G]};var X=e(69020);function te(Xe){var Je=2*p/Xe;function at(B,G){var q=(0,X.O)(B,G);if(k(B)>v){var L=T(q[1],q[0]),V=O(q[0]*q[0]+q[1]*q[1]),J=Je*a((L-v)/Je)+v,re=T(u(L-=J),2-b(L));L=J+E(p/V*u(re))-re,q[0]=V*b(L),q[1]=V*u(L)}return q}return at.invert=function(B,G){var q=O(B*B+G*G);if(q>v){var L=T(G,B),V=Je*a((L-v)/Je)+v,J=L>V?-1:1,re=q*b(V-L),ue=1/h(J*C((re-p)/O(p*(p-2*re)+q*q)));L=V+2*s((ue+J*O(ue*ue-3))/3),B=q*b(L),G=q*u(L)}return X.O.invert(B,G)},at}function ae(){var Xe=5,Je=(0,M.U)(te),at=Je(Xe),B=at.stream,G=.01,q=-b(G*w),L=u(G*w);return at.lobes=function(V){return arguments.length?Je(Xe=+V):Xe},at.stream=function(V){var J=at.rotate(),re=B(V),ue=(at.rotate([0,0]),B(V));return at.rotate(J),re.sphere=function(){ue.polygonStart(),ue.lineStart();for(var xe=0,Le=360/Xe,De=2*p/Xe,Ue=90-180/Xe,qe=v;xe<Xe;++xe,Ue-=Le,qe-=De)ue.point(T(L*b(qe),q)*S,E(L*u(qe))*S),Ue<-90?(ue.point(-90,-180-Ue-G),ue.point(-90,-180-Ue+G)):(ue.point(90,Ue+G),ue.point(90,Ue-G));ue.lineEnd(),ue.polygonEnd()},re},at.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}var se=e(54724);function ce(Xe,Je){if(arguments.length<2&&(Je=Xe),Je===1)return se.y;if(Je===1/0)return fe;function at(B,G){var q=(0,se.y)(B/Je,G);return q[0]*=Xe,q}return at.invert=function(B,G){var q=se.y.invert(B/Xe,G);return q[0]*=Je,q},at}function fe(Xe,Je){return[Xe*b(Je)/b(Je/=2),2*u(Je)]}function pe(){var Xe=2,Je=(0,M.U)(ce),at=Je(Xe);return at.coefficient=function(B){return arguments.length?Je(Xe=+B):Xe},at.scale(169.529)}function ge(Xe,Je,at){var B,G,q,L=100;at=at===void 0?0:+at,Je=+Je;do(G=Xe(at))===(q=Xe(at+c))&&(q=G+c),at-=B=-1*c*(G-Je)/(G-q);while(L-- >0&&k(B)>c);return L<0?NaN:at}function me(Xe,Je,at){return Je===void 0&&(Je=40),at===void 0&&(at=x),function(B,G,q,L){var V,J,re;q=q===void 0?0:+q,L=L===void 0?0:+L;for(var ue=0;ue<Je;ue++){var xe=Xe(q,L),Le=xe[0]-B,De=xe[1]-G;if(k(Le)<at&&k(De)<at)break;var Ue=Le*Le+De*De;if(Ue>V)q-=J/=2,L-=re/=2;else{V=Ue;var qe=(q>0?-1:1)*at,$e=(L>0?-1:1)*at,lt=Xe(q+qe,L),ft=Xe(q,L+$e),wt=(lt[0]-xe[0])/qe,Et=(lt[1]-xe[1])/qe,At=(ft[0]-xe[0])/$e,Dt=(ft[1]-xe[1])/$e,Lt=Dt*wt-Et*At,Wt=(k(Lt)<.5?.5:1)/Lt;if(q+=J=(De*At-Le*Dt)*Wt,L+=re=(Le*Et-De*wt)*Wt,k(J)<at&&k(re)<at)break}}return[q,L]}}function be(){var Xe=ce(1.68,2);function Je(at,B){if(at+B<-1.4){var G=(at-B+1.6)*(at+B+1.4)/8;at+=G,B-=.8*G*u(B+p/2)}var q=Xe(at,B),L=(1-b(at*B))/12;return q[1]<0&&(q[0]*=1+L),q[1]>0&&(q[1]*=1+L/1.5*q[0]*q[0]),q}return Je.invert=me(Je),Je}function ke(){return(0,M.c)(be()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function ze(Xe,Je){var at,B=Xe*u(Je),G=30;do Je-=at=(Je+u(Je)-B)/(1+b(Je));while(k(at)>c&&--G>0);return Je/2}function ve(Xe,Je,at){function B(G,q){return[Xe*G*b(q=ze(at,q)),Je*u(q)]}return B.invert=function(G,q){return q=E(q/Je),[G/(Xe*b(q)),E((2*q+u(2*q))/at)]},B}fe.invert=function(Xe,Je){var at=2*E(Je/2);return[Xe*b(at/2)/b(at),at]};var oe=ve(m/v,m,p);function ie(){return(0,M.c)(oe).scale(169.529)}var he=2.00276,Se=1.11072;function ye(Xe,Je){var at=ze(p,Je);return[he*Xe/(1/b(Je)+Se/b(at)),(Je+m*u(at))/he]}function we(){return(0,M.c)(ye).scale(160.857)}function Me(Xe){var Je=0,at=(0,M.U)(Xe),B=at(Je);return B.parallel=function(G){return arguments.length?at(Je=G*w):Je*S},B}function Oe(Xe,Je){return[Xe*b(Je),Je]}function Ie(){return(0,M.c)(Oe).scale(152.63)}function de(Xe){if(!Xe)return Oe;var Je=1/h(Xe);function at(B,G){var q=Je+Xe-G,L=q&&B*b(G)/q;return[q*u(L),Je-q*b(L)]}return at.invert=function(B,G){var q=O(B*B+(G=Je-G)*G),L=Je+Xe-q;return[q/b(L)*T(B,G),L]},at}function _e(){return Me(de).scale(123.082).center([0,26.1441]).parallel(45)}function Ae(Xe){function Je(at,B){var G=v-B,q=G&&at*Xe*u(G)/G;return[G*u(q)/Xe,v-G*b(q)]}return Je.invert=function(at,B){var G=at*Xe,q=v-B,L=O(G*G+q*q),V=T(G,q);return[(L?L/u(L):1)*V/Xe,v-L]},Je}function Pe(){var Xe=.5,Je=(0,M.U)(Ae),at=Je(Xe);return at.fraction=function(B){return arguments.length?Je(Xe=+B):Xe},at.scale(158.837)}ye.invert=function(Xe,Je){var at,B,G=he*Je,q=Je<0?-g:g,L=25;do B=G-m*u(q),q-=at=(u(2*q)+2*q-p*u(B))/(2*b(2*q)+2+p*b(B)*m*b(q));while(k(at)>c&&--L>0);return B=G-m*u(q),[Xe*(1/b(B)+Se/b(q))/he,B]},Oe.invert=function(Xe,Je){return[Xe/b(Je),Je]};var Ee=ve(1,4/p,p);function Fe(){return(0,M.c)(Ee).scale(152.63)}var Ve=e(24052),Ye=e(92992);function tt(Xe,Je,at,B,G,q){var L,V=b(q);if(k(Xe)>1||k(q)>1)L=C(at*G+Je*B*V);else{var J=u(Xe/2),re=u(q/2);L=2*E(O(J*J+Je*B*re*re))}return k(L)>c?[L,T(B*u(q),Je*G-at*B*V)]:[0,0]}function nt(Xe,Je,at){return C((Xe*Xe+Je*Je-at*at)/(2*Xe*Je))}function ht(Xe){return Xe-2*p*o((Xe+p)/(2*p))}function vt(Xe,Je,at){for(var B,G=[[Xe[0],Xe[1],u(Xe[1]),b(Xe[1])],[Je[0],Je[1],u(Je[1]),b(Je[1])],[at[0],at[1],u(at[1]),b(at[1])]],q=G[2],L=0;L<3;++L,q=B)B=G[L],q.v=tt(B[1]-q[1],q[3],q[2],B[3],B[2],B[0]-q[0]),q.point=[0,0];var V=nt(G[0].v[0],G[2].v[0],G[1].v[0]),J=nt(G[0].v[0],G[1].v[0],G[2].v[0]),re=p-V;G[2].point[1]=0,G[0].point[0]=-(G[1].point[0]=G[0].v[0]/2);var ue=[G[2].point[0]=G[0].point[0]+G[2].v[0]*b(V),2*(G[0].point[1]=G[1].point[1]=G[2].v[0]*u(V))];return function(xe,Le){var De,Ue=u(Le),qe=b(Le),$e=new Array(3);for(De=0;De<3;++De){var lt=G[De];if($e[De]=tt(Le-lt[1],lt[3],lt[2],qe,Ue,xe-lt[0]),!$e[De][0])return lt.point;$e[De][1]=ht($e[De][1]-lt.v[1])}var ft=ue.slice();for(De=0;De<3;++De){var wt=De==2?0:De+1,Et=nt(G[De].v[0],$e[De][0],$e[wt][0]);$e[De][1]<0&&(Et=-Et),De?De==1?(Et=J-Et,ft[0]-=$e[De][0]*b(Et),ft[1]-=$e[De][0]*u(Et)):(Et=re-Et,ft[0]+=$e[De][0]*b(Et),ft[1]+=$e[De][0]*u(Et)):(ft[0]+=$e[De][0]*b(Et),ft[1]-=$e[De][0]*u(Et))}return ft[0]/=3,ft[1]/=3,ft}}function pt(Xe){return Xe[0]*=w,Xe[1]*=w,Xe}function Qe(){return Ke([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function Ke(Xe,Je,at){var B=(0,Ve.c)({type:"MultiPoint",coordinates:[Xe,Je,at]}),G=[-B[0],-B[1]],q=(0,Ye.c)(G),L=vt(pt(q(Xe)),pt(q(Je)),pt(q(at)));L.invert=me(L);var V=(0,M.c)(L).rotate(G),J=V.center;return delete V.rotate,V.center=function(re){return arguments.length?J(q(re)):q.invert(J())},V.clipAngle(90)}function Mt(Xe,Je){var at=O(1-u(Je));return[2/_*Xe*at,_*(1-at)]}function Ot(){return(0,M.c)(Mt).scale(95.6464).center([0,30])}function Pt(Xe){var Je=h(Xe);function at(B,G){return[B,(B?B/u(B):1)*(u(G)*b(B)-Je*b(G))]}return at.invert=Je?function(B,G){B&&(G*=u(B)/B);var q=b(B);return[B,2*T(O(q*q+Je*Je-G*G)-q,Je-G)]}:function(B,G){return[B,E(B?G*h(B)/B:G)]},at}function St(){return Me(Pt).scale(249.828).clipAngle(90)}Mt.invert=function(Xe,Je){var at=(at=Je/_-1)*at;return[at>0?Xe*O(p/at)/2:0,E(1-at)]};var He=O(3);function We(Xe,Je){return[He*Xe*(2*b(2*Je/3)-1)/_,He*_*u(Je/3)]}function Be(){return(0,M.c)(We).scale(156.19)}function Ge(Xe){var Je=b(Xe);function at(B,G){return[B*Je,u(G)/Je]}return at.invert=function(B,G){return[B/Je,E(G*Je)]},at}function ot(){return Me(Ge).parallel(38.58).scale(195.044)}function it(Xe){var Je=b(Xe);function at(B,G){return[B*Je,(1+Je)*h(G/2)]}return at.invert=function(B,G){return[B/Je,2*s(G/(1+Je))]},at}function dt(){return Me(it).scale(124.75)}function gt(Xe,Je){var at=O(8/(3*p));return[at*Xe*(1-k(Je)/p),at*Je]}function je(){return(0,M.c)(gt).scale(165.664)}function Re(Xe,Je){var at=O(4-3*u(k(Je)));return[2/O(6*p)*Xe*at,l(Je)*O(2*p/3)*(2-at)]}function rt(){return(0,M.c)(Re).scale(165.664)}function ct(Xe,Je){var at=O(p*(4+p));return[2/at*Xe*(1+O(1-4*Je*Je/(p*p))),4/at*Je]}function ut(){return(0,M.c)(ct).scale(180.739)}function et(Xe,Je){var at=(2+v)*u(Je);Je/=2;for(var B=0,G=1/0;B<10&&k(G)>c;B++){var q=b(Je);Je-=G=(Je+u(Je)*(q+2)-at)/(2*q*(1+q))}return[2/O(p*(4+p))*Xe*(1+b(Je)),2*O(p/(4+p))*u(Je)]}function xt(){return(0,M.c)(et).scale(180.739)}function mt(Xe,Je){return[Xe*(1+b(Je))/O(2+p),2*Je/O(2+p)]}function Tt(){return(0,M.c)(mt).scale(173.044)}function yt(Xe,Je){for(var at=(1+v)*u(Je),B=0,G=1/0;B<10&&k(G)>c;B++)Je-=G=(Je+u(Je)-at)/(1+b(Je));return at=O(2+p),[Xe*(1+b(Je))/at,2*Je/at]}function bt(){return(0,M.c)(yt).scale(173.044)}We.invert=function(Xe,Je){var at=3*E(Je/(He*_));return[_*Xe/(He*(2*b(2*at/3)-1)),at]},gt.invert=function(Xe,Je){var at=O(8/(3*p)),B=Je/at;return[Xe/(at*(1-k(B)/p)),B]},Re.invert=function(Xe,Je){var at=2-k(Je)/O(2*p/3);return[Xe*O(6*p)/(2*at),l(Je)*E((4-at*at)/3)]},ct.invert=function(Xe,Je){var at=O(p*(4+p))/2;return[Xe*at/(1+O(1-Je*Je*(4+p)/(4*p))),Je*at/2]},et.invert=function(Xe,Je){var at=Je*O((4+p)/p)/2,B=E(at),G=b(B);return[Xe/(2/O(p*(4+p))*(1+G)),E((B+at*(G+2))/(2+v))]},mt.invert=function(Xe,Je){var at=O(2+p),B=Je*at/2;return[at*Xe/(1+b(B)),B]},yt.invert=function(Xe,Je){var at=1+v,B=O(at/2);return[2*Xe*B/(1+b(Je*=B)),E((Je+u(Je))/at)]};var zt=3+2*m;function Ut(Xe,Je){var at=u(Xe/=2),B=b(Xe),G=O(b(Je)),q=b(Je/=2),L=u(Je)/(q+m*B*G),V=O(2/(1+L*L)),J=O((m*q+(B+at)*G)/(m*q+(B-at)*G));return[zt*(V*(J-1/J)-2*t(J)),zt*(V*L*(J+1/J)-2*s(L))]}function en(){return(0,M.c)(Ut).scale(62.5271)}Ut.invert=function(Xe,Je){if(!(at=H.invert(Xe/1.2,1.065*Je)))return null;var at,B=at[0],G=at[1],q=20;Xe/=zt,Je/=zt;do{var L=B/2,V=G/2,J=u(L),re=b(L),ue=u(V),xe=b(V),Le=b(G),De=O(Le),Ue=ue/(xe+m*re*De),qe=Ue*Ue,$e=O(2/(1+qe)),lt=(m*xe+(re+J)*De)/(m*xe+(re-J)*De),ft=O(lt),wt=ft-1/ft,Et=ft+1/ft,At=$e*wt-2*t(ft)-Xe,Dt=$e*Ue*Et-2*s(Ue)-Je,Lt=ue&&y*De*J*qe/ue,Wt=(m*re*xe+De)/(2*(xe+m*re*De)*(xe+m*re*De)*De),Ht=-.5*Ue*$e*$e*$e,jt=Ht*Lt,hn=Ht*Wt,vn=(vn=2*xe+m*De*(re-J))*vn*ft,An=(m*re*xe*De+Le)/vn,Ln=-m*J*ue/(De*vn),jn=wt*jt-2*An/ft+$e*(An+An/lt),tr=wt*hn-2*Ln/ft+$e*(Ln+Ln/lt),cr=Ue*Et*jt-2*Lt/(1+qe)+$e*Et*Lt+$e*Ue*(An-An/lt),Hn=Ue*Et*hn-2*Wt/(1+qe)+$e*Et*Wt+$e*Ue*(Ln-Ln/lt),or=tr*cr-Hn*jn;if(!or)break;var vr=(Dt*tr-At*Hn)/or,Ar=(At*cr-Dt*jn)/or;B-=vr,G=i(-v,n(v,G-Ar))}while((k(vr)>c||k(Ar)>c)&&--q>0);return k(k(G)-v)<c?[0,G]:q&&[B,G]};var an=b(35*w);function rn(Xe,Je){var at=h(Je/2);return[Xe*an*O(1-at*at),(1+an)*at]}function qt(){return(0,M.c)(rn).scale(137.152)}function Kt(Xe,Je){var at=Je/2,B=b(at);return[2*Xe/_*b(Je)*B*B,_*h(at)]}function xn(){return(0,M.c)(Kt).scale(135.264)}function on(Xe){var Je=1-Xe,at=G(p,0)[0]-G(-p,0)[0],B=O(2*(G(0,v)[1]-G(0,-v)[1])/at);function G(V,J){var re=b(J),ue=u(J);return[re/(Je+Xe*re)*V,Je*J+Xe*ue]}function q(V,J){var re=G(V,J);return[re[0]*B,re[1]/B]}function L(V){return q(0,V)[1]}return q.invert=function(V,J){var re=ge(L,J);return[V/B*(Xe+Je/b(re)),re]},q}function Xt(){var Xe=.5,Je=(0,M.U)(on),at=Je(Xe);return at.alpha=function(B){return arguments.length?Je(Xe=+B):Xe},at.scale(168.725)}rn.invert=function(Xe,Je){var at=Je/(1+an);return[Xe&&Xe/(an*O(1-at*at)),2*s(at)]},Kt.invert=function(Xe,Je){var at=s(Je/_),B=b(at),G=2*at;return[Xe*_/2/(b(G)*B*B),G]};var ln=e(4888),Jt=e(69604);function tn(Xe){return[Xe[0]/2,E(h(Xe[1]/2*w))*S]}function wn(Xe){return[2*Xe[0],2*s(u(Xe[1]*w))*S]}function mn(Xe){Xe==null&&(Xe=ln.c);var Je=Xe(),at=(0,Jt.c)().scale(S).precision(0).clipAngle(null).translate([0,0]);function B(q){return Je(tn(q))}function G(q){B[q]=function(){return arguments.length?(Je[q].apply(Je,arguments),B):Je[q]()}}return Je.invert&&(B.invert=function(q){return wn(Je.invert(q))}),B.stream=function(q){var L=Je.stream(q),V=at.stream({point:function(J,re){L.point(J/2,E(h(-re/2*w))*S)},lineStart:function(){L.lineStart()},lineEnd:function(){L.lineEnd()},polygonStart:function(){L.polygonStart()},polygonEnd:function(){L.polygonEnd()}});return V.sphere=L.sphere,V},B.rotate=function(q){return arguments.length?(at.rotate(q),B):at.rotate()},B.center=function(q){return arguments.length?(Je.center(tn(q)),B):wn(Je.center())},G("angle"),G("clipAngle"),G("clipExtent"),G("fitExtent"),G("fitHeight"),G("fitSize"),G("fitWidth"),G("scale"),G("translate"),G("precision"),B.scale(249.5)}function Cn(Xe,Je){var at=2*p/Je,B=Xe*Xe;function G(q,L){var V=(0,X.O)(q,L),J=V[0],re=V[1],ue=J*J+re*re;if(ue>B){var xe=O(ue),Le=T(re,J),De=at*a(Le/at),Ue=Le-De,qe=Xe*b(Ue),$e=(Xe*u(Ue)-Ue*u(qe))/(v-qe),lt=yn(Ue,$e),ft=(p-Xe)/Mn(lt,qe,p);J=xe;var wt,Et=50;do J-=wt=(Xe+Mn(lt,qe,J)*ft-xe)/(lt(J)*ft);while(k(wt)>c&&--Et>0);re=Ue*u(J),J<v&&(re-=$e*(J-v));var At=u(De),Dt=b(De);V[0]=J*Dt-re*At,V[1]=J*At+re*Dt}return V}return G.invert=function(q,L){var V=q*q+L*L;if(V>B){var J=O(V),re=T(L,q),ue=at*a(re/at),xe=re-ue;q=J*b(xe),L=J*u(xe);for(var Le=q-v,De=u(q),Ue=L/De,qe=q<v?1/0:0,$e=10;;){var lt=Xe*u(Ue),ft=Xe*b(Ue),wt=u(ft),Et=v-ft,At=(lt-Ue*wt)/Et,Dt=yn(Ue,At);if(k(qe)<x||!--$e)break;Ue-=qe=(Ue*De-At*Le-L)/(De-2*Le*(Et*(ft+Ue*lt*b(ft)-wt)-lt*(lt-Ue*wt))/(Et*Et))}q=(J=Xe+Mn(Dt,ft,q)*(p-Xe)/Mn(Dt,ft,p))*b(re=ue+Ue),L=J*u(re)}return X.O.invert(q,L)},G}function yn(Xe,Je){return function(at){var B=Xe*b(at);return at<v&&(B-=Je),O(1+B*B)}}function Mn(Xe,Je,at){for(var B=(at-Je)/50,G=Xe(Je)+Xe(at),q=1,L=Je;q<50;++q)G+=2*Xe(L+=B);return .5*G*B}function zn(){var Xe=6,Je=30*w,at=b(Je),B=u(Je),G=(0,M.U)(Cn),q=G(Je,Xe),L=q.stream,V=-b(.01*w),J=u(.01*w);return q.radius=function(re){return arguments.length?(at=b(Je=re*w),B=u(Je),G(Je,Xe)):Je*S},q.lobes=function(re){return arguments.length?G(Je,Xe=+re):Xe},q.stream=function(re){var ue=q.rotate(),xe=L(re),Le=(q.rotate([0,0]),L(re));return q.rotate(ue),xe.sphere=function(){Le.polygonStart(),Le.lineStart();for(var De=0,Ue=2*p/Xe,qe=0;De<Xe;++De,qe-=Ue)Le.point(T(J*b(qe),V)*S,E(J*u(qe))*S),Le.point(T(B*b(qe-Ue/2),at)*S,E(B*u(qe-Ue/2))*S);Le.lineEnd(),Le.polygonEnd()},xe},q.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function Wn(Xe,Je,at,B,G,q,L,V){function J(re,ue){if(!ue)return[Xe*re/p,0];var xe=ue*ue,Le=Xe+xe*(Je+xe*(at+xe*B)),De=ue*(G-1+xe*(q-V+xe*L)),Ue=(Le*Le+De*De)/(2*De),qe=re*E(Le/Ue)/p;return[Ue*u(qe),ue*(1+xe*V)+Ue*(1-b(qe))]}return arguments.length<8&&(V=0),J.invert=function(re,ue){var xe,Le,De=p*re/Xe,Ue=ue,qe=50;do{var $e=Ue*Ue,lt=Xe+$e*(Je+$e*(at+$e*B)),ft=Ue*(G-1+$e*(q-V+$e*L)),wt=lt*lt+ft*ft,Et=2*ft,At=wt/Et,Dt=At*At,Lt=E(lt/At)/p,Wt=De*Lt,Ht=lt*lt,jt=(2*Je+$e*(4*at+6*$e*B))*Ue,hn=G+$e*(3*q+5*$e*L),vn=(2*(lt*jt+ft*(hn-1))*Et-wt*(2*(hn-1)))/(Et*Et),An=b(Wt),Ln=u(Wt),jn=At*An,tr=At*Ln,cr=De/p*(1/O(1-Ht/Dt))*(jt*At-lt*vn)/Dt,Hn=tr-re,or=Ue*(1+$e*V)+At-jn-ue,vr=vn*Ln+jn*cr,Ar=jn*Lt,er=1+vn-(vn*An-tr*cr),ar=tr*Lt,xr=vr*ar-er*Ar;if(!xr)break;De-=xe=(or*vr-Hn*er)/xr,Ue-=Le=(Hn*ar-or*Ar)/xr}while((k(xe)>c||k(Le)>c)&&--qe>0);return[De,Ue]},J}var sr=Wn(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function Fn(){return(0,M.c)(sr).scale(149.995)}var Yn=Wn(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function Xn(){return(0,M.c)(Yn).scale(153.93)}var rr=Wn(5/6*p,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Yt(){return(0,M.c)(rr).scale(130.945)}function $t(Xe,Je){var at=Xe*Xe,B=Je*Je;return[Xe*(1-.162388*B)*(.87-952426e-9*at*at),Je*(1+B/12)]}function Sn(){return(0,M.c)($t).scale(131.747)}$t.invert=function(Xe,Je){var at,B=Xe,G=Je,q=50;do{var L=G*G;G-=at=(G*(1+L/12)-Je)/(1+L/4)}while(k(at)>c&&--q>0);q=50,Xe/=1-.162388*L;do{var V=(V=B*B)*V;B-=at=(B*(.87-952426e-9*V)-Xe)/(.87-.00476213*V)}while(k(at)>c&&--q>0);return[B,G]};var dn=Wn(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function En(){return(0,M.c)(dn).scale(131.087)}function Nn(Xe){var Je=Xe(v,0)[0]-Xe(-v,0)[0];function at(B,G){var q=B>0?-.5:.5,L=Xe(B+q*p,G);return L[0]-=q*Je,L}return Xe.invert&&(at.invert=function(B,G){var q=B>0?-.5:.5,L=Xe.invert(B+q*Je,G),V=L[0]-q*p;return V<-p?V+=2*p:V>p&&(V-=2*p),L[0]=V,L}),at}function Bn(Xe,Je){var at=l(Xe),B=l(Je),G=b(Je),q=b(Xe)*G,L=u(Xe)*G,V=u(B*Je);Xe=k(T(L,V)),Je=E(q),k(Xe-v)>c&&(Xe%=v);var J=function(re,ue){if(ue===v)return[0,0];var xe,Le,De=u(ue),Ue=De*De,qe=Ue*Ue,$e=1+qe,lt=1+3*qe,ft=1-qe,wt=E(1/O($e)),Et=ft+Ue*$e*wt,At=(1-De)/Et,Dt=O(At),Lt=At*$e,Wt=O(Lt),Ht=Dt*ft;if(re===0)return[0,-(Ht+Ue*Wt)];var jt,hn=b(ue),vn=1/hn,An=2*De*hn,Ln=(-Et*hn-(1-De)*((-3*Ue+wt*lt)*An))/(Et*Et),jn=-vn*An,tr=-vn*(Ue*$e*Ln+At*lt*An),cr=-2*vn*(ft*(.5*Ln/Dt)-2*Ue*Dt*An),Hn=4*re/p;if(re>.222*p||ue<p/4&&re>.175*p){if(xe=(Ht+Ue*O(Lt*(1+qe)-Ht*Ht))/(1+qe),re>p/4)return[xe,xe];var or=xe,vr=.5*xe;xe=.5*(vr+or),Le=50;do{var Ar=xe*(cr+jn*O(Lt-xe*xe))+tr*E(xe/Wt)-Hn;if(!Ar)break;Ar<0?vr=xe:or=xe,xe=.5*(vr+or)}while(k(or-vr)>c&&--Le>0)}else{xe=c,Le=25;do{var er=xe*xe,ar=O(Lt-er),xr=cr+jn*ar,fr=xe*xr+tr*E(xe/Wt)-Hn;xe-=jt=ar?fr/(xr+(tr-jn*er)/ar):0}while(k(jt)>c&&--Le>0)}return[xe,-Ht-Ue*O(Lt-xe*xe)]}(Xe>p/4?v-Xe:Xe,Je);return Xe>p/4&&(V=J[0],J[0]=-J[1],J[1]=-V),J[0]*=at,J[1]*=-B,J}function $n(){return(0,M.c)(Nn(Bn)).scale(239.75)}function lr(Xe,Je){var at,B,G,q,L,V;if(Je<c)return[(q=u(Xe))-(at=Je*(Xe-q*(B=b(Xe)))/4)*B,B+at*q,1-Je*q*q/2,Xe-at];if(Je>=1-c)return at=(1-Je)/4,G=1/(B=z(Xe)),[(q=((V=f(2*(V=Xe)))-1)/(V+1))+at*((L=B*P(Xe))-Xe)/(B*B),G-at*q*G*(L-Xe),G+at*q*G*(L+Xe),2*s(f(Xe))-v+at*(L-Xe)/B];var J=[1,0,0,0,0,0,0,0,0],re=[O(Je),0,0,0,0,0,0,0,0],ue=0;for(B=O(1-Je),L=1;k(re[ue]/J[ue])>c&&ue<8;)at=J[ue++],re[ue]=(at-B)/2,J[ue]=(at+B)/2,B=O(at*B),L*=2;G=L*J[ue]*Xe;do G=(E(q=re[ue]*u(B=G)/J[ue])+G)/2;while(--ue);return[u(G),q=b(G),q/b(G-B),G]}function Gt(Xe,Je){if(!Je)return Xe;if(Je===1)return t(h(Xe/2+g));for(var at=1,B=O(1-Je),G=O(Je),q=0;k(G)>c;q++){if(Xe%p){var L=s(B*h(Xe)/at);L<0&&(L+=p),Xe+=L+~~(Xe/p)*p}else Xe+=Xe;G=(at+B)/2,B=O(at*B),G=((at=G)-B)/2}return Xe/(r(2,q)*at)}function gn(Xe,Je){var at=(m-1)/(m+1),B=O(1-at*at),G=Gt(v,B*B),q=t(h(p/4+k(Je)/2)),L=f(-1*q)/O(at),V=function(re,ue){var xe=re*re,Le=ue+1,De=1-xe-ue*ue;return[.5*((re>=0?v:-v)-T(De,2*re)),-.25*t(De*De+4*xe)+.5*t(Le*Le+xe)]}(L*b(-1*Xe),L*u(-1*Xe)),J=function(re,ue,xe){var Le=k(re),De=P(k(ue));if(Le){var Ue=1/u(Le),qe=1/(h(Le)*h(Le)),$e=-(qe+xe*(De*De*Ue*Ue)-1+xe),lt=(-$e+O($e*$e-(xe-1)*qe*4))/2;return[Gt(s(1/O(lt)),xe)*l(re),Gt(s(O((lt/qe-1)/xe)),1-xe)*l(ue)]}return[0,Gt(s(De),1-xe)*l(ue)]}(V[0],V[1],B*B);return[-J[1],(Je>=0?1:-1)*(.5*G-J[0])]}function Ct(){return(0,M.c)(Nn(gn)).scale(151.496)}Bn.invert=function(Xe,Je){k(Xe)>1&&(Xe=2*l(Xe)-Xe),k(Je)>1&&(Je=2*l(Je)-Je);var at=l(Xe),B=l(Je),G=-at*Xe,q=-B*Je,L=q/G<1,V=function(xe,Le){for(var De=0,Ue=1,qe=.5,$e=50;;){var lt=qe*qe,ft=O(qe),wt=E(1/O(1+lt)),Et=1-lt+qe*(1+lt)*wt,At=(1-ft)/Et,Dt=O(At),Lt=At*(1+lt),Wt=Dt*(1-lt),Ht=O(Lt-xe*xe),jt=Le+Wt+qe*Ht;if(k(Ue-De)<x||--$e==0||jt===0)break;jt>0?De=qe:Ue=qe,qe=.5*(De+Ue)}if(!$e)return null;var hn=E(ft),vn=b(hn),An=1/vn,Ln=2*ft*vn,jn=(-Et*vn-(-3*qe+wt*(1+3*lt))*Ln*(1-ft))/(Et*Et);return[p/4*(xe*(-2*An*((1-lt)*(.5*jn/Dt)-2*qe*Dt*Ln)+-An*Ln*Ht)+-An*(qe*(1+lt)*jn+At*(1+3*lt)*Ln)*E(xe/O(Lt))),hn]}(L?q:G,L?G:q),J=V[0],re=V[1],ue=b(re);return L&&(J=-v-J),[at*(T(u(J)*ue,-u(re))+p),B*E(b(J)*ue)]},gn.invert=function(Xe,Je){var at,B,G,q,L,V,J=(m-1)/(m+1),re=O(1-J*J),ue=(B=-Xe,G=re*re,(at=.5*Gt(v,re*re)-Je)?(q=lr(at,G),B?(V=(L=lr(B,1-G))[1]*L[1]+G*q[0]*q[0]*L[0]*L[0],[[q[0]*L[2]/V,q[1]*q[2]*L[0]*L[1]/V],[q[1]*L[1]/V,-q[0]*q[2]*L[0]*L[2]/V],[q[2]*L[1]*L[2]/V,-G*q[0]*q[1]*L[0]/V]]):[[q[0],0],[q[1],0],[q[2],0]]):[[0,(L=lr(B,1-G))[0]/L[1]],[1/L[1],0],[L[2]/L[1],0]]),xe=function(Le,De){var Ue=De[0]*De[0]+De[1]*De[1];return[(Le[0]*De[0]+Le[1]*De[1])/Ue,(Le[1]*De[0]-Le[0]*De[1])/Ue]}(ue[0],ue[1]);return[T(xe[1],xe[0])/-1,2*s(f(-.5*t(J*xe[0]*xe[0]+J*xe[1]*xe[1])))-v]};var Rt=e(61780);function Zt(Xe){var Je=u(Xe),at=b(Xe),B=cn(Xe);function G(q,L){var V=B(q,L);q=V[0],L=V[1];var J=u(L),re=b(L),ue=b(q),xe=C(Je*J+at*re*ue),Le=u(xe),De=k(Le)>c?xe/Le:1;return[De*at*u(q),(k(q)>v?De:-De)*(Je*re-at*J*ue)]}return B.invert=cn(-Xe),G.invert=function(q,L){var V=O(q*q+L*L),J=-u(V),re=b(V),ue=V*re,xe=-L*J,Le=V*Je,De=O(ue*ue+xe*xe-Le*Le),Ue=T(ue*Le+xe*De,xe*Le-ue*De),qe=(V>v?-1:1)*T(q*J,V*b(Ue)*re+L*u(Ue)*J);return B.invert(qe,Ue)},G}function cn(Xe){var Je=u(Xe),at=b(Xe);return function(B,G){var q=b(G),L=b(B)*q,V=u(B)*q,J=u(G);return[T(V,L*at-J*Je),E(J*at+L*Je)]}}function fn(){var Xe=0,Je=(0,M.U)(Zt),at=Je(Xe),B=at.rotate,G=at.stream,q=(0,Rt.c)();return at.parallel=function(L){if(!arguments.length)return Xe*S;var V=at.rotate();return Je(Xe=L*w).rotate(V)},at.rotate=function(L){return arguments.length?(B.call(at,[L[0],L[1]-Xe*S]),q.center([-L[0],-L[1]]),at):((L=B.call(at))[1]+=Xe*S,L)},at.stream=function(L){return(L=G(L)).sphere=function(){L.polygonStart();var V,J=q.radius(89.99)().coordinates[0],re=J.length-1,ue=-1;for(L.lineStart();++ue<re;)L.point((V=J[ue])[0],V[1]);for(L.lineEnd(),re=(J=q.radius(90.01)().coordinates[0]).length-1,L.lineStart();--ue>=0;)L.point((V=J[ue])[0],V[1]);L.lineEnd(),L.polygonEnd()},L},at.scale(79.4187).parallel(45).clipAngle(179.999)}var _n=e(84706),pn=e(16016),sn=E(1-1/3)*S,Nt=Ge(0);function Ft(Xe){var Je=sn*w,at=Mt(p,Je)[0]-Mt(-p,Je)[0],B=Nt(0,Je)[1],G=Mt(0,Je)[1],q=_-G,L=d/Xe,V=4/d,J=B+q*q*4/d;function re(ue,xe){var Le,De=k(xe);if(De>Je){var Ue=n(Xe-1,i(0,o((ue+p)/L)));(Le=Mt(ue+=p*(Xe-1)/Xe-Ue*L,De))[0]=Le[0]*d/at-d*(Xe-1)/(2*Xe)+Ue*d/Xe,Le[1]=B+4*(Le[1]-G)*q/d,xe<0&&(Le[1]=-Le[1])}else Le=Nt(ue,xe);return Le[0]*=V,Le[1]/=J,Le}return re.invert=function(ue,xe){ue/=V;var Le=k(xe*=J);if(Le>B){var De=n(Xe-1,i(0,o((ue+p)/L)));ue=(ue+p*(Xe-1)/Xe-De*L)*at/d;var Ue=Mt.invert(ue,.25*(Le-B)*d/q+G);return Ue[0]-=p*(Xe-1)/Xe-De*L,xe<0&&(Ue[1]=-Ue[1]),Ue}return Nt.invert(ue,xe)},re}function Qt(Xe,Je){return[Xe,1&Je?90-c:sn]}function Tn(Xe,Je){return[Xe,1&Je?-90+c:-sn]}function Pn(Xe){return[Xe[0]*(1-c),Xe[1]]}function On(){var Xe=4,Je=(0,M.U)(Ft),at=Je(Xe),B=at.stream;return at.lobes=function(G){return arguments.length?Je(Xe=+G):Xe},at.stream=function(G){var q=at.rotate(),L=B(G),V=(at.rotate([0,0]),B(G));return at.rotate(q),L.sphere=function(){var J,re;(0,pn.c)((J=180/Xe,re=[].concat((0,_n.ik)(-180,180+J/2,J).map(Qt),(0,_n.ik)(180,-180-J/2,-J).map(Tn)),{type:"Polygon",coordinates:[J===180?re.map(Pn):re]}),V)},L},at.scale(239.75)}function Dn(Xe){var Je,at=1+Xe,B=E(u(1/at)),G=2*O(p/(Je=p+4*B*at)),q=.5*G*(at+O(Xe*(2+Xe))),L=Xe*Xe,V=at*at;function J(re,ue){var xe,Le,De=1-u(ue);if(De&&De<2){var Ue,qe=v-ue,$e=25;do{var lt=u(qe),ft=b(qe),wt=B+T(lt,at-ft),Et=1+V-2*at*ft;qe-=Ue=(qe-L*B-at*lt+Et*wt-.5*De*Je)/(2*at*lt*wt)}while(k(Ue)>x&&--$e>0);xe=G*O(Et),Le=re*wt/p}else xe=G*(Xe+De),Le=re*B/p;return[xe*u(Le),q-xe*b(Le)]}return J.invert=function(re,ue){var xe=re*re+(ue-=q)*ue,Le=(1+V-xe/(G*G))/(2*at),De=C(Le),Ue=u(De),qe=B+T(Ue,at-Le);return[E(re/O(xe))*p/qe,E(1-2*(De-L*B-at*Ue+(1+V-2*at*Le)*qe)/Je)]},J}function Zn(){var Xe=1,Je=(0,M.U)(Dn),at=Je(Xe);return at.ratio=function(B){return arguments.length?Je(Xe=+B):Xe},at.scale(167.774).center([0,18.67])}var qn=.7109889596207567,Kn=.0528035274542;function Un(Xe,Je){return Je>-qn?((Xe=oe(Xe,Je))[1]+=Kn,Xe):Oe(Xe,Je)}function Gn(){return(0,M.c)(Un).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function ir(Xe,Je){return k(Je)>qn?((Xe=oe(Xe,Je))[1]-=Je>0?Kn:-Kn,Xe):Oe(Xe,Je)}function mr(){return(0,M.c)(ir).scale(152.63)}function ur(Xe,Je,at,B){var G=O(4*p/(2*at+(1+Xe-Je/2)*u(2*at)+(Xe+Je)/2*u(4*at)+Je/2*u(6*at))),q=O(B*u(at)*O((1+Xe*b(2*at)+Je*b(4*at))/(1+Xe+Je))),L=at*J(1);function V(xe){return O(1+Xe*b(2*xe)+Je*b(4*xe))}function J(xe){var Le=xe*at;return(2*Le+(1+Xe-Je/2)*u(2*Le)+(Xe+Je)/2*u(4*Le)+Je/2*u(6*Le))/at}function re(xe){return V(xe)*u(xe)}var ue=function(xe,Le){var De=at*ge(J,L*u(Le)/at,Le/p);isNaN(De)&&(De=at*l(Le));var Ue=G*V(De);return[Ue*q*xe/p*b(De),Ue/q*u(De)]};return ue.invert=function(xe,Le){var De=ge(re,Le*q/G);return[xe*p/(b(De)*G*q*V(De)),E(at*J(De/at)/L)]},at===0&&(G=O(B/p),(ue=function(xe,Le){return[xe*G,u(Le)/G]}).invert=function(xe,Le){return[xe/G,E(Le*G)]}),ue}function Qn(){var Xe=1,Je=0,at=45*w,B=2,G=(0,M.U)(ur),q=G(Xe,Je,at,B);return q.a=function(L){return arguments.length?G(Xe=+L,Je,at,B):Xe},q.b=function(L){return arguments.length?G(Xe,Je=+L,at,B):Je},q.psiMax=function(L){return arguments.length?G(Xe,Je,at=+L*w,B):at*S},q.ratio=function(L){return arguments.length?G(Xe,Je,at,B=+L):B},q.scale(180.739)}function pr(Xe,Je,at,B,G,q,L,V,J,re,ue){if(ue.nanEncountered)return NaN;var xe,Le,De,Ue,qe,$e,lt,ft,wt,Et;if(Le=Xe(Je+.25*(xe=at-Je)),De=Xe(at-.25*xe),isNaN(Le))ue.nanEncountered=!0;else{if(!isNaN(De))return Et=(($e=(Ue=xe*(B+4*Le+G)/12)+(qe=xe*(G+4*De+q)/12))-L)/15,re>J?(ue.maxDepthCount++,$e+Et):Math.abs(Et)<V?$e+Et:(ft=pr(Xe,Je,lt=Je+.5*xe,B,Le,G,Ue,.5*V,J,re+1,ue),isNaN(ft)?(ue.nanEncountered=!0,NaN):(wt=pr(Xe,lt,at,G,De,q,qe,.5*V,J,re+1,ue),isNaN(wt)?(ue.nanEncountered=!0,NaN):ft+wt));ue.nanEncountered=!0}}function Tr(Xe,Je,at,B,G){G===void 0&&(G=20);var q=Xe(Je),L=Xe(.5*(Je+at)),V=Xe(at);return pr(Xe,Je,at,q,L,V,(q+4*L+V)*(at-Je)/6,B,G,1,{maxDepthCount:0,nanEncountered:!1})}function Or(Xe,Je,at){function B(De){return Xe+(1-Xe)*r(1-r(De,Je),1/Je)}function G(De){return Tr(B,0,De,1e-4)}for(var q=1/G(1),L=1e3,V=1.00000001*q,J=[],re=0;re<=L;re++)J.push(G(re/L)*V);function ue(De){var Ue=0,qe=L,$e=500;do J[$e]>De?qe=$e:Ue=$e,$e=Ue+qe>>1;while($e>Ue);var lt=J[$e+1]-J[$e];return lt&&(lt=(De-J[$e+1])/lt),($e+1+lt)/L}var xe=2*ue(1)/p*q/at,Le=function(De,Ue){var qe=ue(k(u(Ue))),$e=B(qe)*De;return qe/=xe,[$e,Ue>=0?qe:-qe]};return Le.invert=function(De,Ue){var qe;return k(Ue*=xe)<1&&(qe=l(Ue)*E(G(k(Ue))*q)),[De/B(k(Ue)),qe]},Le}function oi(){var Xe=0,Je=2.5,at=1.183136,B=(0,M.U)(Or),G=B(Xe,Je,at);return G.alpha=function(q){return arguments.length?B(Xe=+q,Je,at):Xe},G.k=function(q){return arguments.length?B(Xe,Je=+q,at):Je},G.gamma=function(q){return arguments.length?B(Xe,Je,at=+q):at},G.scale(152.63)}function gi(Xe,Je){return k(Xe[0]-Je[0])<c&&k(Xe[1]-Je[1])<c}function Di(Xe,Je){for(var at,B,G,q=-1,L=Xe.length,V=Xe[0],J=[];++q<L;){B=((at=Xe[q])[0]-V[0])/Je,G=(at[1]-V[1])/Je;for(var re=0;re<Je;++re)J.push([V[0]+re*B,V[1]+re*G]);V=at}return J.push(at),J}function ii(Xe,Je,at){var B,G;function q(J,re){for(var ue=re<0?-1:1,xe=Je[+(re<0)],Le=0,De=xe.length-1;Le<De&&J>xe[Le][2][0];++Le);var Ue=Xe(J-xe[Le][1][0],re);return Ue[0]+=Xe(xe[Le][1][0],ue*re>ue*xe[Le][0][1]?xe[Le][0][1]:re)[0],Ue}at?q.invert=at(q):Xe.invert&&(q.invert=function(J,re){for(var ue=G[+(re<0)],xe=Je[+(re<0)],Le=0,De=ue.length;Le<De;++Le){var Ue=ue[Le];if(Ue[0][0]<=J&&J<Ue[1][0]&&Ue[0][1]<=re&&re<Ue[1][1]){var qe=Xe.invert(J-Xe(xe[Le][1][0],0)[0],re);return qe[0]+=xe[Le][1][0],gi(q(qe[0],qe[1]),[J,re])?qe:null}}});var L=(0,M.c)(q),V=L.stream;return L.stream=function(J){var re=L.rotate(),ue=V(J),xe=(L.rotate([0,0]),V(J));return L.rotate(re),ue.sphere=function(){(0,pn.c)(B,xe)},ue},L.lobes=function(J){return arguments.length?(B=function(re){var ue,xe,Le,De,Ue,qe,$e,lt=[],ft=re[0].length;for($e=0;$e<ft;++$e)xe=(ue=re[0][$e])[0][0],Le=ue[0][1],De=ue[1][1],Ue=ue[2][0],qe=ue[2][1],lt.push(Di([[xe+c,Le+c],[xe+c,De-c],[Ue-c,De-c],[Ue-c,qe+c]],30));for($e=re[1].length-1;$e>=0;--$e)xe=(ue=re[1][$e])[0][0],Le=ue[0][1],De=ue[1][1],Ue=ue[2][0],qe=ue[2][1],lt.push(Di([[Ue-c,qe-c],[Ue-c,De+c],[xe+c,De+c],[xe+c,Le-c]],30));return{type:"Polygon",coordinates:[(0,_n.Uf)(lt)]}}(J),Je=J.map(function(re){return re.map(function(ue){return[[ue[0][0]*w,ue[0][1]*w],[ue[1][0]*w,ue[1][1]*w],[ue[2][0]*w,ue[2][1]*w]]})}),G=Je.map(function(re){return re.map(function(ue){var xe,Le=Xe(ue[0][0],ue[0][1])[0],De=Xe(ue[2][0],ue[2][1])[0],Ue=Xe(ue[1][0],ue[0][1])[1],qe=Xe(ue[1][0],ue[1][1])[1];return Ue>qe&&(xe=Ue,Ue=qe,qe=xe),[[Le,Ue],[De,qe]]})}),L):Je.map(function(re){return re.map(function(ue){return[[ue[0][0]*S,ue[0][1]*S],[ue[1][0]*S,ue[1][1]*S],[ue[2][0]*S,ue[2][1]*S]]})})},Je!=null&&L.lobes(Je),L}Un.invert=function(Xe,Je){return Je>-qn?oe.invert(Xe,Je-Kn):Oe.invert(Xe,Je)},ir.invert=function(Xe,Je){return k(Je)>qn?oe.invert(Xe,Je+(Je>0?Kn:-Kn)):Oe.invert(Xe,Je)};var yi=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function oa(){return ii(ye,yi).scale(160.857)}var Pr=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Ri(){return ii(ir,Pr).scale(152.63)}var Ma=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Pi(){return ii(oe,Ma).scale(169.529)}var uo=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function ko(){return ii(oe,uo).scale(169.529).rotate([20,0])}var Xi=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function Ka(){return ii(Un,Xi,me).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var Ja=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Ao(){return ii(Oe,Ja).scale(152.63).rotate([-20,0])}function Sa(Xe,Je){return[3/d*Xe*O(p*p/3-Je*Je),Je]}function Ra(){return(0,M.c)(Sa).scale(158.837)}function Fa(Xe){function Je(at,B){if(k(k(B)-v)<c)return[0,B<0?-2:2];var G=u(B),q=r((1+G)/(1-G),Xe/2),L=.5*(q+1/q)+b(at*=Xe);return[2*u(at)/L,(q-1/q)/L]}return Je.invert=function(at,B){var G=k(B);if(k(G-2)<c)return at?null:[0,l(B)*v];if(G>2)return null;var q=(at/=2)*at,L=(B/=2)*B,V=2*B/(1+q+L);return V=r((1+V)/(1-V),1/Xe),[T(2*at,1-q-L)/Xe,E((V-1)/(V+1))]},Je}function ti(){var Xe=.5,Je=(0,M.U)(Fa),at=Je(Xe);return at.spacing=function(B){return arguments.length?Je(Xe=+B):Xe},at.scale(124.75)}Sa.invert=function(Xe,Je){return[d/3*Xe/O(p*p/3-Je*Je),Je]};var Fi=p/m;function co(Xe,Je){return[Xe*(1+O(b(Je)))/2,Je/(b(Je/2)*b(Xe/6))]}function $a(){return(0,M.c)(co).scale(97.2672)}function Ba(Xe,Je){var at=Xe*Xe,B=Je*Je;return[Xe*(.975534+B*(-.0143059*at-.119161+-.0547009*B)),Je*(1.00384+at*(.0802894+-.02855*B+199025e-9*at)+B*(.0998909+-.0491032*B))]}function Mo(){return(0,M.c)(Ba).scale(139.98)}function Qa(Xe,Je){return[u(Xe)/b(Je),h(Je)*b(Xe)]}function So(){return(0,M.c)(Qa).scale(144.049).clipAngle(89.999)}function fo(Xe){var Je=b(Xe),at=h(g+Xe/2);function B(G,q){var L=q-Xe,V=k(L)<c?G*Je:k(V=g+q/2)<c||k(k(V)-v)<c?0:G*L/t(h(V)/at);return[V,L]}return B.invert=function(G,q){var L,V=q+Xe;return[k(q)<c?G/Je:k(L=g+V/2)<c||k(k(L)-v)<c?0:G*t(h(L)/at)/q,V]},B}function Eo(){return Me(fo).parallel(40).scale(158.837)}function eo(Xe,Je){return[Xe,1.25*t(h(g+.4*Je))]}function Ks(){return(0,M.c)(eo).scale(108.318)}function Bs(Xe){var Je=Xe.length-1;function at(B,G){for(var q,L=b(G),V=2/(1+L*b(B)),J=V*L*u(B),re=V*u(G),ue=Je,xe=Xe[ue],Le=xe[0],De=xe[1];--ue>=0;)Le=(xe=Xe[ue])[0]+J*(q=Le)-re*De,De=xe[1]+J*De+re*q;return[Le=J*(q=Le)-re*De,De=J*De+re*q]}return at.invert=function(B,G){var q=20,L=B,V=G;do{for(var J,re=Je,ue=Xe[re],xe=ue[0],Le=ue[1],De=0,Ue=0;--re>=0;)De=xe+L*(J=De)-V*Ue,Ue=Le+L*Ue+V*J,xe=(ue=Xe[re])[0]+L*(J=xe)-V*Le,Le=ue[1]+L*Le+V*J;var qe,$e,lt=(De=xe+L*(J=De)-V*Ue)*De+(Ue=Le+L*Ue+V*J)*Ue;L-=qe=((xe=L*(J=xe)-V*Le-B)*De+(Le=L*Le+V*J-G)*Ue)/lt,V-=$e=(Le*De-xe*Ue)/lt}while(k(qe)+k($e)>c*c&&--q>0);if(q){var ft=O(L*L+V*V),wt=2*s(.5*ft),Et=u(wt);return[T(L*Et,ft*b(wt)),ft?E(V*Et/ft):0]}},at}co.invert=function(Xe,Je){var at=k(Xe),B=k(Je),G=c,q=v;B<Fi?q*=B/Fi:G+=6*C(Fi/B);for(var L=0;L<25;L++){var V=u(q),J=O(b(q)),re=u(q/2),ue=b(q/2),xe=u(G/6),Le=b(G/6),De=.5*G*(1+J)-at,Ue=q/(ue*Le)-B,qe=J?-.25*G*V/J:0,$e=.5*(1+J),lt=(1+.5*q*re/ue)/(ue*Le),ft=q/ue*(xe/6)/(Le*Le),wt=qe*ft-lt*$e,Et=(De*ft-Ue*$e)/wt,At=(Ue*qe-De*lt)/wt;if(q-=Et,G-=At,k(Et)<c&&k(At)<c)break}return[Xe<0?-G:G,Je<0?-q:q]},Ba.invert=function(Xe,Je){var at=l(Xe)*p,B=Je/2,G=50;do{var q=at*at,L=B*B,V=at*B,J=at*(.975534+L*(-.0143059*q-.119161+-.0547009*L))-Xe,re=B*(1.00384+q*(.0802894+-.02855*L+199025e-9*q)+L*(.0998909+-.0491032*L))-Je,ue=.975534-L*(.119161+3*q*.0143059+.0547009*L),xe=-V*(.238322+.2188036*L+.0286118*q),Le=V*(.1605788+7961e-7*q+-.0571*L),De=1.00384+q*(.0802894+199025e-9*q)+L*(3*(.0998909-.02855*q)-.245516*L),Ue=xe*Le-De*ue,qe=(re*xe-J*De)/Ue,$e=(J*Le-re*ue)/Ue;at-=qe,B-=$e}while((k(qe)>c||k($e)>c)&&--G>0);return G&&[at,B]},Qa.invert=function(Xe,Je){var at=Xe*Xe,B=Je*Je+1,G=at+B,q=Xe?y*O((G-O(G*G-4*at))/at):1/O(B);return[E(Xe*q),l(Je)*C(q)]},eo.invert=function(Xe,Je){return[Xe,2.5*s(f(.8*Je))-.625*p]};var Ho=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],al=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],ol=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Go=[[.9245,0],[0,0],[.01943,0]],sl=[[.721316,0],[0,0],[-.00881625,-.00617325]];function bl(){return Yo(Ho,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function _l(){return Yo(al,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function Wo(){return Yo(ol,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function to(){return Yo(Go,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function is(){return Yo(sl,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Yo(Xe,Je){var at=(0,M.c)(Bs(Xe)).rotate(Je).clipAngle(90),B=(0,Ye.c)(Je),G=at.center;return delete at.rotate,at.center=function(q){return arguments.length?G(B(q)):B.invert(G())},at}var bs=O(6),Xo=O(7);function Na(Xe,Je){var at=E(7*u(Je)/(3*bs));return[bs*Xe*(2*b(2*at/3)-1)/Xo,9*u(at/3)/Xo]}function Js(){return(0,M.c)(Na).scale(164.859)}function Lo(Xe,Je){for(var at,B=(1+y)*u(Je),G=Je,q=0;q<25&&(G-=at=(u(G/2)+u(G)-B)/(.5*b(G/2)+b(G)),!(k(at)<c));q++);return[Xe*(1+2*b(G)/b(G/2))/(3*m),2*O(3)*u(G/2)/O(2+m)]}function ho(){return(0,M.c)(Lo).scale(188.209)}function po(Xe,Je){for(var at,B=O(6/(4+p)),G=(1+p/4)*u(Je),q=Je/2,L=0;L<25&&(q-=at=(q/2+u(q)-G)/(.5+b(q)),!(k(at)<c));L++);return[B*(.5+b(q))*Xe/1.5,B*q]}function Co(){return(0,M.c)(po).scale(166.518)}Na.invert=function(Xe,Je){var at=3*E(Je*Xo/9);return[Xe*Xo/(bs*(2*b(2*at/3)-1)),E(3*u(at)*bs/7)]},Lo.invert=function(Xe,Je){var at=Je*O(2+m)/(2*O(3)),B=2*E(at);return[3*m*Xe/(1+2*b(B)/b(B/2)),E((at+u(B))/(1+y))]},po.invert=function(Xe,Je){var at=O(6/(4+p)),B=Je/at;return k(k(B)-v)<c&&(B=B<0?-v:v),[1.5*Xe/(at*(.5+b(B))),E((B/2+u(B))/(1+p/4))]};var Ur=e(47984);function as(Xe,Je){var at=Je*Je,B=at*at,G=at*B;return[Xe*(.84719-.13063*at+G*G*(.05494*at-.04515-.02326*B+.00331*G)),Je*(1.01183+B*B*(.01926*at-.02625-.00396*B))]}function wl(){return(0,M.c)(as).scale(175.295)}function Ns(Xe,Je){return[Xe*(1+b(Je))/2,2*(Je-h(Je/2))]}function os(){return(0,M.c)(Ns).scale(152.63)}as.invert=function(Xe,Je){var at,B,G,q,L=Je,V=25;do L-=at=(L*(1.01183+(G=(B=L*L)*B)*G*(.01926*B-.02625-.00396*G))-Je)/(1.01183+G*G*(.21186*B-.23625+-.05148*G));while(k(at)>x&&--V>0);return[Xe/(.84719-.13063*(B=L*L)+(q=B*(G=B*B))*q*(.05494*B-.04515-.02326*G+.00331*q)),L]},Ns.invert=function(Xe,Je){for(var at=Je/2,B=0,G=1/0;B<10&&k(G)>c;++B){var q=b(Je/2);Je-=G=(Je-h(Je/2)-at)/(1-.5/(q*q))}return[2*Xe/(1+b(Je)),Je]};var ll=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Tl(){return ii(ce(1/0),ll).rotate([20,0]).scale(152.63)}function js(Xe,Je){var at=u(Je),B=b(Je),G=l(Xe);if(Xe===0||k(Je)===v)return[0,Je];if(Je===0)return[Xe,0];if(k(Xe)===v)return[Xe*B,v*at];var q=p/(2*Xe)-2*Xe/p,L=2*Je/p,V=(1-L*L)/(at-L),J=q*q,re=V*V,ue=1+J/re,xe=1+re/J,Le=(q*at/V-q/2)/ue,De=(re*at/J+V/2)/xe,Ue=De*De-(re*at*at/J+V*at-1)/xe;return[v*(Le+O(Le*Le+B*B/ue)*G),v*(De+O(Ue<0?0:Ue)*l(-Je*q)*G)]}function kl(){return(0,M.c)(js).scale(127.267)}js.invert=function(Xe,Je){var at=(Xe/=v)*Xe,B=at+(Je/=v)*Je,G=p*p;return[Xe?(B-1+O((1-B)*(1-B)+4*at))/(2*Xe)*v:0,ge(function(q){return B*(p*u(q)-2*q)*p+4*q*q*(Je-u(q))+2*p*q-G*Je},0)]};var Oo=1.0148,Zo=.23185,go=-.14499,ja=.02406,ss=Oo,ul=5*Zo,_s=7*go,Us=9*ja,ba=1.790857183;function Vs(Xe,Je){var at=Je*Je;return[Xe,Je*(Oo+at*at*(Zo+at*(go+ja*at)))]}function cl(){return(0,M.c)(Vs).scale(139.319)}function ls(Xe,Je){if(k(Je)<c)return[Xe,0];var at=h(Je),B=Xe*u(Je);return[u(B)/at,Je+(1-b(B))/at]}function Ko(){return(0,M.c)(ls).scale(103.74)}Vs.invert=function(Xe,Je){Je>ba?Je=ba:Je<-1.790857183&&(Je=-1.790857183);var at,B=Je;do{var G=B*B;B-=at=(B*(Oo+G*G*(Zo+G*(go+ja*G)))-Je)/(ss+G*G*(ul+G*(_s+Us*G)))}while(k(at)>c);return[Xe,B]},ls.invert=function(Xe,Je){if(k(Je)<c)return[Xe,0];var at,B=Xe*Xe+Je*Je,G=.5*Je,q=10;do{var L=h(G),V=1/b(G),J=B-2*Je*G+G*G;G-=at=(L*J+2*(G-Je))/(2+J*V*V+2*(G-Je)*L)}while(k(at)>c&&--q>0);return L=h(G),[(k(Je)<k(G+1/L)?E(Xe*L):l(Je)*l(Xe)*(C(k(Xe*L))+v))/u(G),G]};var us=e(13696),Jo=e(27284);function $o(Xe,Je){return[Xe[0]*Je[0]+Xe[1]*Je[3],Xe[0]*Je[1]+Xe[1]*Je[4],Xe[0]*Je[2]+Xe[1]*Je[5]+Xe[2],Xe[3]*Je[0]+Xe[4]*Je[3],Xe[3]*Je[1]+Xe[4]*Je[4],Xe[3]*Je[2]+Xe[4]*Je[5]+Xe[5]]}function ws(Xe,Je){return[Xe[0]-Je[0],Xe[1]-Je[1]]}function qs(Xe){return O(Xe[0]*Xe[0]+Xe[1]*Xe[1])}function $r(Xe,Je,at){function B(V,J){var re,ue=Je(V,J),xe=ue.project([V*S,J*S]);return(re=ue.transform)?[re[0]*xe[0]+re[1]*xe[1]+re[2],-(re[3]*xe[0]+re[4]*xe[1]+re[5])]:(xe[1]=-xe[1],xe)}function G(V,J){var re=V.project.invert,ue=V.transform,xe=J;if(ue&&(ue=function($e){var lt=1/($e[0]*$e[4]-$e[1]*$e[3]);return[lt*$e[4],-lt*$e[1],lt*($e[1]*$e[5]-$e[2]*$e[4]),-lt*$e[3],lt*$e[0],lt*($e[2]*$e[3]-$e[0]*$e[5])]}(ue),xe=[ue[0]*xe[0]+ue[1]*xe[1]+ue[2],ue[3]*xe[0]+ue[4]*xe[1]+ue[5]]),re&&V===function($e){return Je($e[0]*w,$e[1]*w)}(Le=re(xe)))return Le;for(var Le,De=V.children,Ue=0,qe=De&&De.length;Ue<qe;++Ue)if(Le=G(De[Ue],J))return Le}(function V(J,re){if(J.edges=function(At){for(var Dt=At.length,Lt=[],Wt=At[Dt-1],Ht=0;Ht<Dt;++Ht)Lt.push([Wt,Wt=At[Ht]]);return Lt}(J.face),re.face){var ue=J.shared=function(At,Dt){for(var Lt,Wt,Ht=At.length,jt=null,hn=0;hn<Ht;++hn){Lt=At[hn];for(var vn=Dt.length;--vn>=0;)if(Wt=Dt[vn],Lt[0]===Wt[0]&&Lt[1]===Wt[1]){if(jt)return[jt,Lt];jt=Lt}}}(J.face,re.face),xe=(qe=ue.map(re.project),$e=ue.map(J.project),lt=ws(qe[1],qe[0]),ft=ws($e[1],$e[0]),wt=function(At,Dt){return T(At[0]*Dt[1]-At[1]*Dt[0],At[0]*Dt[0]+At[1]*Dt[1])}(lt,ft),Et=qs(lt)/qs(ft),$o([1,0,qe[0][0],0,1,qe[0][1]],$o([Et,0,0,0,Et,0],$o([b(wt),u(wt),0,-u(wt),b(wt),0],[1,0,-$e[0][0],0,1,-$e[0][1]]))));J.transform=re.transform?$o(re.transform,xe):xe;for(var Le=re.edges,De=0,Ue=Le.length;De<Ue;++De)Zi(ue[0],Le[De][1])&&Zi(ue[1],Le[De][0])&&(Le[De]=J),Zi(ue[0],Le[De][0])&&Zi(ue[1],Le[De][1])&&(Le[De]=J);for(De=0,Ue=(Le=J.edges).length;De<Ue;++De)Zi(ue[0],Le[De][0])&&Zi(ue[1],Le[De][1])&&(Le[De]=re),Zi(ue[0],Le[De][1])&&Zi(ue[1],Le[De][0])&&(Le[De]=re)}else J.transform=re.transform;var qe,$e,lt,ft,wt,Et;return J.children&&J.children.forEach(function(At){V(At,J)}),J})(Xe,{transform:null}),Ua(Xe)&&(B.invert=function(V,J){var re=G(Xe,[V,-J]);return re&&(re[0]*=w,re[1]*=w,re)});var q=(0,M.c)(B),L=q.stream;return q.stream=function(V){var J=q.rotate(),re=L(V),ue=(q.rotate([0,0]),L(V));return q.rotate(J),re.sphere=function(){ue.polygonStart(),ue.lineStart(),Po(ue,Xe),ue.lineEnd(),ue.polygonEnd()},re},q.angle(at==null?-30:at*S)}function Po(Xe,Je,at){var B,G,q=Je.edges,L=q.length,V={type:"MultiPoint",coordinates:Je.face},J=Je.face.filter(function(qe){return k(qe[1])!==90}),re=(0,us.c)({type:"MultiPoint",coordinates:J}),ue=!1,xe=-1,Le=re[1][0]-re[0][0],De=Le===180||Le===360?[(re[0][0]+re[1][0])/2,(re[0][1]+re[1][1])/2]:(0,Ve.c)(V);if(at)for(;++xe<L&&q[xe]!==at;);++xe;for(var Ue=0;Ue<L;++Ue)G=q[(Ue+xe)%L],Array.isArray(G)?(ue||(Xe.point((B=(0,Jo.c)(G[0],De)(c))[0],B[1]),ue=!0),Xe.point((B=(0,Jo.c)(G[1],De)(c))[0],B[1])):(ue=!1,G!==at&&Po(Xe,G,Je))}function Zi(Xe,Je){return Xe&&Je&&Xe[0]===Je[0]&&Xe[1]===Je[1]}function Ua(Xe){return Xe.project.invert||Xe.children&&Xe.children.some(Ua)}var Wr=e(53285),Jr=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],_a=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Xe){return Xe.map(function(Je){return Jr[Je]})});function cs(Xe){Xe=Xe||function(at){var B=(0,Ve.c)({type:"MultiPoint",coordinates:at});return(0,Wr.c)().scale(1).translate([0,0]).rotate([-B[0],-B[1]])};var Je=_a.map(function(at){return{face:at,project:Xe(at)}});return[-1,0,0,1,0,1,4,5].forEach(function(at,B){var G=Je[at];G&&(G.children||(G.children=[])).push(Je[B])}),$r(Je[0],function(at,B){return Je[at<-p/2?B<0?6:4:at<0?B<0?2:0:at<p/2?B<0?3:1:B<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var Ts=2/O(3);function Hs(Xe,Je){var at=Mt(Xe,Je);return[at[0]*Ts,at[1]]}function ks(Xe){Xe=Xe||function(at){var B=(0,Ve.c)({type:"MultiPoint",coordinates:at});return(0,M.c)(Hs).translate([0,0]).scale(1).rotate(B[1]>0?[-B[0],0]:[180-B[0],180])};var Je=_a.map(function(at){return{face:at,project:Xe(at)}});return[-1,0,0,1,0,1,4,5].forEach(function(at,B){var G=Je[at];G&&(G.children||(G.children=[])).push(Je[B])}),$r(Je[0],function(at,B){return Je[at<-p/2?B<0?6:4:at<0?B<0?2:0:at<p/2?B<0?3:1:B<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function As(Xe){Xe=Xe||function(q){var L=q.length===6?(0,Ve.c)({type:"MultiPoint",coordinates:q}):q[0];return(0,Wr.c)().scale(1).translate([0,0]).rotate([-L[0],-L[1]])};var Je=_a.map(function(q){for(var L,V=q.map(zo),J=V.length,re=V[J-1],ue=[],xe=0;xe<J;++xe)L=V[xe],ue.push(Io([.9486832980505138*re[0]+.31622776601683794*L[0],.9486832980505138*re[1]+.31622776601683794*L[1],.9486832980505138*re[2]+.31622776601683794*L[2]]),Io([.9486832980505138*L[0]+.31622776601683794*re[0],.9486832980505138*L[1]+.31622776601683794*re[1],.9486832980505138*L[2]+.31622776601683794*re[2]])),re=L;return ue}),at=[],B=[-1,0,0,1,0,1,4,5];Je.forEach(function(q,L){for(var V,J,re=_a[L],ue=re.length,xe=at[L]=[],Le=0;Le<ue;++Le)Je.push([re[Le],q[(2*Le+2)%(2*ue)],q[(2*Le+1)%(2*ue)]]),B.push(L),xe.push((V=zo(q[(2*Le+2)%(2*ue)]),J=zo(q[(2*Le+1)%(2*ue)]),[V[1]*J[2]-V[2]*J[1],V[2]*J[0]-V[0]*J[2],V[0]*J[1]-V[1]*J[0]]))});var G=Je.map(function(q){return{project:Xe(q),face:q}});return B.forEach(function(q,L){var V=G[q];V&&(V.children||(V.children=[])).push(G[L])}),$r(G[0],function(q,L){var V=b(L),J=[V*b(q),V*u(q),u(L)],re=q<-p/2?L<0?6:4:q<0?L<0?2:0:q<p/2?L<0?3:1:L<0?7:5,ue=at[re];return G[Ea(ue[0],J)<0?8+3*re:Ea(ue[1],J)<0?8+3*re+1:Ea(ue[2],J)<0?8+3*re+2:re]}).angle(-30).scale(110.625).center([0,45])}function Ea(Xe,Je){for(var at=0,B=Xe.length,G=0;at<B;++at)G+=Xe[at]*Je[at];return G}function Io(Xe){return[T(Xe[1],Xe[0])*S,E(i(-1,n(1,Xe[2])))*S]}function zo(Xe){var Je=Xe[0]*w,at=Xe[1]*w,B=b(at);return[B*b(Je),B*u(Je),u(at)]}function ta(){}function Ms(Xe,Je){var at,B=Je.stream;if(!B)throw new Error("invalid projection");switch(Xe&&Xe.type){case"Feature":at=Bi;break;case"FeatureCollection":at=La;break;default:at=qi}return at(Xe,B)}function La(Xe,Je){return{type:"FeatureCollection",features:Xe.features.map(function(at){return Bi(at,Je)})}}function Bi(Xe,Je){return{type:"Feature",id:Xe.id,properties:Xe.properties,geometry:qi(Xe.geometry,Je)}}function qi(Xe,Je){if(!Xe)return null;if(Xe.type==="GeometryCollection")return function(B,G){return{type:"GeometryCollection",geometries:B.geometries.map(function(q){return qi(q,G)})}}(Xe,Je);var at;switch(Xe.type){case"Point":case"MultiPoint":at=no;break;case"LineString":case"MultiLineString":at=Qo;break;case"Polygon":case"MultiPolygon":case"Sphere":at=Va;break;default:return null}return(0,pn.c)(Xe,Je(at)),at.result()}Hs.invert=function(Xe,Je){return Mt.invert(Xe/Ts,Je)};var ai=[],Hi=[],no={point:function(Xe,Je){ai.push([Xe,Je])},result:function(){var Xe=ai.length?ai.length<2?{type:"Point",coordinates:ai[0]}:{type:"MultiPoint",coordinates:ai}:null;return ai=[],Xe}},Qo={lineStart:ta,point:function(Xe,Je){ai.push([Xe,Je])},lineEnd:function(){ai.length&&(Hi.push(ai),ai=[])},result:function(){var Xe=Hi.length?Hi.length<2?{type:"LineString",coordinates:Hi[0]}:{type:"MultiLineString",coordinates:Hi}:null;return Hi=[],Xe}},Va={polygonStart:ta,lineStart:ta,point:function(Xe,Je){ai.push([Xe,Je])},lineEnd:function(){var Xe=ai.length;if(Xe){do ai.push(ai[0].slice());while(++Xe<4);Hi.push(ai),ai=[]}},polygonEnd:ta,result:function(){if(!Hi.length)return null;var Xe=[],Je=[];return Hi.forEach(function(at){(function(B){if((G=B.length)<4)return!1;for(var G,q=0,L=B[G-1][1]*B[0][0]-B[G-1][0]*B[0][1];++q<G;)L+=B[q-1][1]*B[q][0]-B[q-1][0]*B[q][1];return L<=0})(at)?Xe.push([at]):Je.push(at)}),Je.forEach(function(at){var B=at[0];Xe.some(function(G){if(function(q,L){for(var V=L[0],J=L[1],re=!1,ue=0,xe=q.length,Le=xe-1;ue<xe;Le=ue++){var De=q[ue],Ue=De[0],qe=De[1],$e=q[Le],lt=$e[0],ft=$e[1];qe>J^ft>J&&V<(lt-Ue)*(J-qe)/(ft-qe)+Ue&&(re=!re)}return re}(G[0],B))return G.push(at),!0})||Xe.push([at])}),Hi=[],Xe.length?Xe.length>1?{type:"MultiPolygon",coordinates:Xe}:{type:"Polygon",coordinates:Xe[0]}:null}};function Do(Xe){var Je=Xe(v,0)[0]-Xe(-v,0)[0];function at(B,G){var q=k(B)<v,L=Xe(q?B:B>0?B-p:B+p,G),V=(L[0]-L[1])*y,J=(L[0]+L[1])*y;if(q)return[V,J];var re=Je*y,ue=V>0^J>0?-1:1;return[ue*V-l(J)*re,ue*J-l(V)*re]}return Xe.invert&&(at.invert=function(B,G){var q=(B+G)*y,L=(G-B)*y,V=k(q)<.5*Je&&k(L)<.5*Je;if(!V){var J=Je*y,re=q>0^L>0?-1:1,ue=-re*B+(L>0?1:-1)*J,xe=-re*G+(q>0?1:-1)*J;q=(-ue-xe)*y,L=(ue-xe)*y}var Le=Xe.invert(q,L);return V||(Le[0]+=q>0?p:-p),Le}),(0,M.c)(at).rotate([-90,-90,45]).clipAngle(179.999)}function sa(){return Do(Bn).scale(176.423)}function es(){return Do(gn).scale(111.48)}function vo(Xe,Je){if(!(0<=(Je=+Je)&&Je<=20))throw new Error("invalid digits");function at(re){var ue=re.length,xe=2,Le=new Array(ue);for(Le[0]=+re[0].toFixed(Je),Le[1]=+re[1].toFixed(Je);xe<ue;)Le[xe]=re[xe],++xe;return Le}function B(re){return re.map(at)}function G(re){for(var ue=at(re[0]),xe=[ue],Le=1;Le<re.length;Le++){var De=at(re[Le]);(De.length>2||De[0]!=ue[0]||De[1]!=ue[1])&&(xe.push(De),ue=De)}return xe.length===1&&re.length>1&&xe.push(at(re[re.length-1])),xe}function q(re){return re.map(G)}function L(re){if(re==null)return re;var ue;switch(re.type){case"GeometryCollection":ue={type:"GeometryCollection",geometries:re.geometries.map(L)};break;case"Point":ue={type:"Point",coordinates:at(re.coordinates)};break;case"MultiPoint":ue={type:re.type,coordinates:B(re.coordinates)};break;case"LineString":ue={type:re.type,coordinates:G(re.coordinates)};break;case"MultiLineString":case"Polygon":ue={type:re.type,coordinates:q(re.coordinates)};break;case"MultiPolygon":ue={type:"MultiPolygon",coordinates:re.coordinates.map(q)};break;default:return re}return re.bbox!=null&&(ue.bbox=re.bbox),ue}function V(re){var ue={type:"Feature",properties:re.properties,geometry:L(re.geometry)};return re.id!=null&&(ue.id=re.id),re.bbox!=null&&(ue.bbox=re.bbox),ue}if(Xe!=null)switch(Xe.type){case"Feature":return V(Xe);case"FeatureCollection":var J={type:"FeatureCollection",features:Xe.features.map(V)};return Xe.bbox!=null&&(J.bbox=Xe.bbox),J;default:return L(Xe)}return Xe}function Ca(Xe){var Je=u(Xe);function at(B,G){var q=Je?h(B*Je/2)/Je:B/2;if(!G)return[2*q,-Xe];var L=2*s(q*u(G)),V=1/h(G);return[u(L)*V,G+(1-b(L))*V-Xe]}return at.invert=function(B,G){if(k(G+=Xe)<c)return[Je?2*s(Je*B/2)/Je:B,0];var q,L=B*B+G*G,V=0,J=10;do{var re=h(V),ue=1/b(V),xe=L-2*G*V+V*V;V-=q=(re*xe+2*(V-G))/(2+xe*ue*ue+2*(V-G)*re)}while(k(q)>c&&--J>0);var Le=B*(re=h(V)),De=h(k(G)<k(V+1/re)?.5*E(Le):.5*C(Le)+p/4)/u(V);return[Je?2*s(Je*De)/Je:2*De,V]},at}function Oa(){return Me(Ca).scale(131.215)}var si=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function qa(Xe,Je){var at,B=n(18,36*k(Je)/p),G=o(B),q=B-G,L=(at=si[G])[0],V=at[1],J=(at=si[++G])[0],re=at[1],ue=(at=si[n(19,++G)])[0],xe=at[1];return[Xe*(J+q*(ue-L)/2+q*q*(ue-2*J+L)/2),(Je>0?v:-v)*(re+q*(xe-V)/2+q*q*(xe-2*re+V)/2)]}function _r(){return(0,M.c)(qa).scale(152.63)}function Ss(Xe,Je){var at=function(L){function V(J,re){var ue=b(re),xe=(L-1)/(L-ue*b(J));return[xe*ue*u(J),xe*u(re)]}return V.invert=function(J,re){var ue=J*J+re*re,xe=O(ue),Le=(L-O(1-ue*(L+1)/(L-1)))/((L-1)/xe+xe/(L-1));return[T(J*Le,xe*O(1-Le*Le)),xe?E(re*Le/xe):0]},V}(Xe);if(!Je)return at;var B=b(Je),G=u(Je);function q(L,V){var J=at(L,V),re=J[1],ue=re*G/(Xe-1)+B;return[J[0]*B/ue,re/ue]}return q.invert=function(L,V){var J=(Xe-1)/(Xe-1-V*G);return at.invert(J*L,J*V*B)},q}function $s(){var Xe=2,Je=0,at=(0,M.U)(Ss),B=at(Xe,Je);return B.distance=function(G){return arguments.length?at(Xe=+G,Je):Xe},B.tilt=function(G){return arguments.length?at(Xe,Je=G*w):Je*S},B.scale(432.147).clipAngle(C(1/Xe)*S-1e-6)}si.forEach(function(Xe){Xe[1]*=1.0144}),qa.invert=function(Xe,Je){var at=Je/v,B=90*at,G=n(18,k(B/5)),q=i(0,o(G));do{var L=si[q][1],V=si[q+1][1],J=si[n(19,q+2)][1],re=J-L,ue=J-2*V+L,xe=2*(k(at)-V)/re,Le=ue/re,De=xe*(1-Le*xe*(1-2*Le*xe));if(De>=0||q===1){B=(Je>=0?5:-5)*(De+G);var Ue,qe=50;do De=(G=n(18,k(B)/5))-(q=o(G)),L=si[q][1],V=si[q+1][1],J=si[n(19,q+2)][1],B-=(Ue=(Je>=0?v:-v)*(V+De*(J-L)/2+De*De*(J-2*V+L)/2)-Je)*S;while(k(Ue)>x&&--qe>0);break}}while(--q>=0);var $e=si[q][0],lt=si[q+1][0],ft=si[n(19,q+2)][0];return[Xe/(lt+De*(ft-$e)/2+De*De*(ft-2*lt+$e)/2),B*w]};var Ro=1e-4,Fo=1e4,ts=-180,fs=ts+Ro,gr=180,Es=gr-Ro,mo=-90,Ni=mo+Ro,Bo=90,Ha=Bo-Ro;function Pa(Xe){return Xe.length>0}function na(Xe){return Xe===mo||Xe===Bo?[0,Xe]:[ts,(Je=Xe,Math.floor(Je*Fo)/Fo)];var Je}function ro(Xe){var Je=Xe[0],at=Xe[1],B=!1;return Je<=fs?(Je=ts,B=!0):Je>=Es&&(Je=gr,B=!0),at<=Ni?(at=mo,B=!0):at>=Ha&&(at=Bo,B=!0),B?[Je,at]:Xe}function Ia(Xe){return Xe.map(ro)}function yo(Xe,Je,at){for(var B=0,G=Xe.length;B<G;++B){var q=Xe[B].slice();at.push({index:-1,polygon:Je,ring:q});for(var L=0,V=q.length;L<V;++L){var J=q[L],re=J[0],ue=J[1];if(re<=fs||re>=Es||ue<=Ni||ue>=Ha){q[L]=ro(J);for(var xe=L+1;xe<V;++xe){var Le=q[xe],De=Le[0],Ue=Le[1];if(De>fs&&De<Es&&Ue>Ni&&Ue<Ha)break}if(xe===L+1)continue;if(L){var qe={index:-1,polygon:Je,ring:q.slice(0,L+1)};qe.ring[qe.ring.length-1]=na(ue),at[at.length-1]=qe}else at.pop();if(xe>=V)break;at.push({index:-1,polygon:Je,ring:q=q.slice(xe-1)}),q[0]=na(q[0][1]),L=-1,V=q.length}}}}function Ls(Xe){var Je,at,B,G,q,L,V=Xe.length,J={},re={};for(Je=0;Je<V;++Je)B=(at=Xe[Je]).ring[0],q=at.ring[at.ring.length-1],B[0]!==q[0]||B[1]!==q[1]?(at.index=Je,J[B]=re[q]=at):(at.polygon.push(at.ring),Xe[Je]=null);for(Je=0;Je<V;++Je)if(at=Xe[Je]){if(B=at.ring[0],q=at.ring[at.ring.length-1],G=re[B],L=J[q],delete J[B],delete re[q],B[0]===q[0]&&B[1]===q[1]){at.polygon.push(at.ring);continue}G?(delete re[B],delete J[G.ring[0]],G.ring.pop(),Xe[G.index]=null,at={index:-1,polygon:G.polygon,ring:G.ring.concat(at.ring)},G===L?at.polygon.push(at.ring):(at.index=V++,Xe.push(J[at.ring[0]]=re[at.ring[at.ring.length-1]]=at))):L?(delete J[q],delete re[L.ring[L.ring.length-1]],at.ring.pop(),at={index:V++,polygon:L.polygon,ring:at.ring.concat(L.ring)},Xe[L.index]=null,Xe.push(J[at.ring[0]]=re[at.ring[at.ring.length-1]]=at)):(at.ring.push(at.ring[0]),at.polygon.push(at.ring))}}function No(Xe){var Je={type:"Feature",geometry:Hr(Xe.geometry)};return Xe.id!=null&&(Je.id=Xe.id),Xe.bbox!=null&&(Je.bbox=Xe.bbox),Xe.properties!=null&&(Je.properties=Xe.properties),Je}function Hr(Xe){if(Xe==null)return Xe;var Je,at,B,G;switch(Xe.type){case"GeometryCollection":Je={type:"GeometryCollection",geometries:Xe.geometries.map(Hr)};break;case"Point":Je={type:"Point",coordinates:ro(Xe.coordinates)};break;case"MultiPoint":case"LineString":Je={type:Xe.type,coordinates:Ia(Xe.coordinates)};break;case"MultiLineString":Je={type:"MultiLineString",coordinates:Xe.coordinates.map(Ia)};break;case"Polygon":var q=[];yo(Xe.coordinates,q,at=[]),Ls(at),Je={type:"Polygon",coordinates:q};break;case"MultiPolygon":at=[],B=-1,G=Xe.coordinates.length;for(var L=new Array(G);++B<G;)yo(Xe.coordinates[B],L[B]=[],at);Ls(at),Je={type:"MultiPolygon",coordinates:L.filter(Pa)};break;default:return Xe}return Xe.bbox!=null&&(Je.bbox=Xe.bbox),Je}function Gi(Xe){if(Xe==null)return Xe;switch(Xe.type){case"Feature":return No(Xe);case"FeatureCollection":var Je={type:"FeatureCollection",features:Xe.features.map(No)};return Xe.bbox!=null&&(Je.bbox=Xe.bbox),Je;default:return Hr(Xe)}}function la(Xe,Je){var at=h(Je/2),B=u(g*at);return[Xe*(.74482-.34588*B*B),1.70711*at]}function io(){return(0,M.c)(la).scale(146.153)}function ua(Xe,Je,at){var B=(0,Jo.c)(Je,at),G=B(.5),q=(0,Ye.c)([-G[0],-G[1]])(Je),L=B.distance/2,V=-E(u(q[1]*w)/u(L)),J=[-G[0],-G[1],-(q[0]>0?p-V:V)*S],re=(0,M.c)(Xe(L)).rotate(J),ue=(0,Ye.c)(J),xe=re.center;return delete re.rotate,re.center=function(Le){return arguments.length?xe(ue(Le)):ue.invert(xe())},re.clipAngle(90)}function hs(Xe){var Je=b(Xe);function at(B,G){var q=(0,Wr.Y)(B,G);return q[0]*=Je,q}return at.invert=function(B,G){return Wr.Y.invert(B/Je,G)},at}function ps(){return ca([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function ca(Xe,Je){return ua(hs,Xe,Je)}function Vr(Xe){if(!(Xe*=2))return X.O;var Je=-Xe/2,at=-Je,B=Xe*Xe,G=h(at),q=.5/u(at);function L(V,J){var re=C(b(J)*b(V-Je)),ue=C(b(J)*b(V-at));return[((re*=re)-(ue*=ue))/(2*Xe),(J<0?-1:1)*O(4*B*ue-(B-re+ue)*(B-re+ue))/(2*Xe)]}return L.invert=function(V,J){var re,ue,xe=J*J,Le=b(O(xe+(re=V+Je)*re)),De=b(O(xe+(re=V+at)*re));return[T(ue=Le-De,re=(Le+De)*G),(J<0?-1:1)*C(O(re*re+ue*ue)*q)]},L}function ao(){return ns([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function ns(Xe,Je){return ua(Vr,Xe,Je)}function Ga(Xe,Je){if(k(Je)<c)return[Xe,0];var at=k(Je/v),B=E(at);if(k(Xe)<c||k(k(Je)-v)<c)return[0,l(Je)*p*h(B/2)];var G=b(B),q=k(p/Xe-Xe/p)/2,L=q*q,V=G/(at+G-1),J=V*(2/at-1),re=J*J,ue=re+L,xe=V-re,Le=L+V;return[l(Xe)*p*(q*xe+O(L*xe*xe-ue*(V*V-re)))/ue,l(Je)*p*(J*Le-q*O((L+1)*ue-Le*Le))/ue]}function ds(){return(0,M.c)(Ga).scale(79.4183)}function gs(Xe,Je){if(k(Je)<c)return[Xe,0];var at=k(Je/v),B=E(at);if(k(Xe)<c||k(k(Je)-v)<c)return[0,l(Je)*p*h(B/2)];var G=b(B),q=k(p/Xe-Xe/p)/2,L=q*q,V=G*(O(1+L)-q*G)/(1+L*at*at);return[l(Xe)*p*V,l(Je)*p*O(1-V*(2*q+V))]}function Wa(){return(0,M.c)(gs).scale(79.4183)}function li(Xe,Je){if(k(Je)<c)return[Xe,0];var at=Je/v,B=E(at);if(k(Xe)<c||k(k(Je)-v)<c)return[0,p*h(B/2)];var G=(p/Xe-Xe/p)/2,q=at/(1+b(B));return[p*(l(Xe)*O(G*G+1-q*q)-G),p*q]}function rs(){return(0,M.c)(li).scale(79.4183)}function kr(Xe,Je){if(!Je)return[Xe,0];var at=k(Je);if(!Xe||at===v)return[0,Je];var B=at/v,G=B*B,q=(8*B-G*(G+2)-5)/(2*G*(B-1)),L=q*q,V=B*q,J=G+L+2*V,re=B+3*q,ue=Xe/v,xe=ue+1/ue,Le=l(k(Xe)-v)*O(xe*xe-4),De=Le*Le,Ue=(Le*(J+L-1)+2*O(J*(G+L*De-1)+(1-G)*(G*(re*re+4*L)+12*V*L+4*L*L)))/(4*J+De);return[l(Xe)*v*Ue,l(Je)*v*O(1+Le*k(Ue)-Ue*Ue)]}function Cr(){return(0,M.c)(kr).scale(127.16)}function wa(Xe,Je,at,B){var G=p/3;Xe=i(Xe,c),Je=i(Je,c),Xe=n(Xe,v),Je=n(Je,p-c),at=i(at,0),at=n(at,100-c);var q=(B=i(B,c))/100,L=C((at/100+1)*b(G))/G,V=u(Xe)/u(L*v),J=Je/p,re=O(q*u(Xe/2)/u(Je/2));return function(ue,xe,Le,De,Ue){function qe($e,lt){var ft=Le*u(De*lt),wt=O(1-ft*ft),Et=O(2/(1+wt*b($e*=Ue)));return[ue*wt*Et*u($e),xe*ft*Et]}return qe.invert=function($e,lt){var ft=$e/ue,wt=lt/xe,Et=O(ft*ft+wt*wt),At=2*E(Et/2);return[T($e*h(At),ue*Et)/Ue,Et&&E(lt*u(At)/(xe*Le*Et))/De]},qe}(re/O(J*V*L),1/(re*O(J*V*L)),V,L,J)}function oo(){var Xe=65*w,Je=60*w,at=20,B=200,G=(0,M.U)(wa),q=G(Xe,Je,at,B);return q.poleline=function(L){return arguments.length?G(Xe=+L*w,Je,at,B):Xe*S},q.parallels=function(L){return arguments.length?G(Xe,Je=+L*w,at,B):Je*S},q.inflation=function(L){return arguments.length?G(Xe,Je,at=+L,B):at},q.ratio=function(L){return arguments.length?G(Xe,Je,at,B=+L):B},q.scale(163.775)}function xo(){return oo().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}la.invert=function(Xe,Je){var at=Je/1.70711,B=u(g*at);return[Xe/(.74482-.34588*B*B),2*s(at)]},Ga.invert=function(Xe,Je){if(k(Je)<c)return[Xe,0];if(k(Xe)<c)return[0,v*u(2*s(Je/p))];var at=(Xe/=p)*Xe,B=(Je/=p)*Je,G=at+B,q=G*G,L=-k(Je)*(1+G),V=L-2*B+at,J=-2*L+1+2*B+q,re=B/J+(2*V*V*V/(J*J*J)-9*L*V/(J*J))/27,ue=(L-V*V/(3*J))/J,xe=2*O(-ue/3),Le=C(3*re/(ue*xe))/3;return[p*(G-1+O(1+2*(at-B)+q))/(2*Xe),l(Je)*p*(-xe*b(Le+p/3)-V/(3*J))]},gs.invert=function(Xe,Je){if(!Xe)return[0,v*u(2*s(Je/p))];var at=k(Xe/p),B=(1-at*at-(Je/=p)*Je)/(2*at),G=O(B*B+1);return[l(Xe)*p*(G-B),l(Je)*v*u(2*T(O((1-2*B*at)*(B+G)-at),O(G+B+at)))]},li.invert=function(Xe,Je){if(!Je)return[Xe,0];var at=Je/p,B=(p*p*(1-at*at)-Xe*Xe)/(2*p*Xe);return[Xe?p*(l(Xe)*O(B*B+1)-B):0,v*u(2*s(at))]},kr.invert=function(Xe,Je){var at;if(!Xe||!Je)return[Xe,Je];Je/=p;var B=l(Xe)*Xe/v,G=(B*B-1+4*Je*Je)/k(B),q=G*G,L=2*Je,V=50;do{var J=L*L,re=(8*L-J*(J+2)-5)/(2*J*(L-1)),ue=(3*L-J*L-10)/(2*J*L),xe=re*re,Le=L*re,De=L+re,Ue=De*De,qe=L+3*re,$e=-2*De*(4*Le*xe+(1-4*J+3*J*J)*(1+ue)+xe*(14*J-6-q+(8*J-8-2*q)*ue)+Le*(12*J-8+(10*J-10-q)*ue)),lt=O(Ue*(J+xe*q-1)+(1-J)*(J*(qe*qe+4*xe)+xe*(12*Le+4*xe)));L-=at=(G*(Ue+xe-1)+2*lt-B*(4*Ue+q))/(G*(2*re*ue+2*De*(1+ue))+$e/lt-8*De*(G*(-1+xe+Ue)+2*lt)*(1+ue)/(q+4*Ue))}while(at>c&&--V>0);return[l(Xe)*(O(G*G+4)+G)*p/4,v*L]};var Ei=4*p+3*O(3),so=2*O(2*p*O(3)/Ei),Qr=ve(so*O(3)/p,so,Ei/6);function fl(){return(0,M.c)(Qr).scale(176.84)}function Ta(Xe,Je){return[Xe*O(1-3*Je*Je/(p*p)),Je]}function ni(){return(0,M.c)(Ta).scale(152.63)}function hi(Xe,Je){var at=b(Je),B=b(Xe)*at,G=1-B,q=b(Xe=T(u(Xe)*at,-u(Je))),L=u(Xe);return[L*(at=O(1-B*B))-q*G,-q*at-L*G]}function ga(){return(0,M.c)(hi).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function jo(Xe,Je){var at=N(Xe,Je);return[(at[0]+Xe/v)/2,(at[1]+Je)/2]}function Qs(){return(0,M.c)(jo).scale(158.837)}Ta.invert=function(Xe,Je){return[Xe/O(1-3*Je*Je/(p*p)),Je]},hi.invert=function(Xe,Je){var at=(Xe*Xe+Je*Je)/-2,B=O(-at*(2+at)),G=Je*at+Xe*B,q=Xe*at-Je*B,L=O(q*q+G*G);return[T(B*G,L*(1+at)),L?-E(B*q/L):0]},jo.invert=function(Xe,Je){var at=Xe,B=Je,G=25;do{var q,L=b(B),V=u(B),J=u(2*B),re=V*V,ue=L*L,xe=u(at),Le=b(at/2),De=u(at/2),Ue=De*De,qe=1-ue*Le*Le,$e=qe?C(L*Le)*O(q=1/qe):q=0,lt=.5*(2*$e*L*De+at/v)-Xe,ft=.5*($e*V+B)-Je,wt=.5*q*(ue*Ue+$e*L*Le*re)+.5/v,Et=q*(xe*J/4-$e*V*De),At=.125*q*(J*De-$e*V*ue*xe),Dt=.5*q*(re*Le+$e*Ue*L)+.5,Lt=Et*At-Dt*wt,Wt=(ft*Et-lt*Dt)/Lt,Ht=(lt*At-ft*wt)/Lt;at-=Wt,B-=Ht}while((k(Wt)>c||k(Ht)>c)&&--G>0);return[at,B]}},88728:function(ee,R,e){function M(){return new k}function k(){this.reset()}e.d(R,{c:function(){return M}}),k.prototype={constructor:k,reset:function(){this.s=this.t=0},add:function(b){T(s,b,this.t),T(this,s.s,this.s),this.s?this.t+=s.t:this.s=s.t},valueOf:function(){return this.s}};var s=new k;function T(b,f,o){var t=b.s=f+o,i=t-f,n=t-i;b.t=f-n+(o-i)}},95384:function(ee,R,e){e.d(R,{cp:function(){return x},mQ:function(){return n},oB:function(){return a}});var M,k,s,T,b,f=e(88728),o=e(64528),t=e(70932),i=e(16016),n=(0,f.c)(),r=(0,f.c)(),a={point:t.c,lineStart:t.c,lineEnd:t.c,polygonStart:function(){n.reset(),a.lineStart=l,a.lineEnd=u},polygonEnd:function(){var p=+n;r.add(p<0?o.kD+p:p),this.lineStart=this.lineEnd=this.point=t.c},sphere:function(){r.add(o.kD)}};function l(){a.point=h}function u(){c(M,k)}function h(p,v){a.point=c,M=p,k=v,p*=o.qw,v*=o.qw,s=p,T=(0,o.W8)(v=v/2+o.wL),b=(0,o.g$)(v)}function c(p,v){p*=o.qw,v=(v*=o.qw)/2+o.wL;var g=p-s,y=g>=0?1:-1,m=y*g,_=(0,o.W8)(v),d=(0,o.g$)(v),S=b*d,w=T*_+S*(0,o.W8)(m),E=S*y*(0,o.g$)(m);n.add((0,o.WE)(E,w)),s=p,T=_,b=d}function x(p){return r.reset(),(0,i.c)(p,a),2*r}},13696:function(ee,R,e){e.d(R,{c:function(){return C}});var M,k,s,T,b,f,o,t,i,n,r=e(88728),a=e(95384),l=e(84220),u=e(64528),h=e(16016),c=(0,r.c)(),x={point:p,lineStart:g,lineEnd:y,polygonStart:function(){x.point=m,x.lineStart=_,x.lineEnd=d,c.reset(),a.oB.polygonStart()},polygonEnd:function(){a.oB.polygonEnd(),x.point=p,x.lineStart=g,x.lineEnd=y,a.mQ<0?(M=-(s=180),k=-(T=90)):c>u.Gg?T=90:c<-u.Gg&&(k=-90),n[0]=M,n[1]=s},sphere:function(){M=-(s=180),k=-(T=90)}};function p(O,P){i.push(n=[M=O,s=O]),P<k&&(k=P),P>T&&(T=P)}function v(O,P){var z=(0,l.ux)([O*u.qw,P*u.qw]);if(t){var j=(0,l.CW)(t,z),I=[j[1],-j[0],0],N=(0,l.CW)(I,j);(0,l.cJ)(N),N=(0,l.G)(N);var W,F=O-b,U=F>0?1:-1,H=N[0]*u.oh*U,ne=(0,u.a2)(F)>180;ne^(U*b<H&&H<U*O)?(W=N[1]*u.oh)>T&&(T=W):ne^(U*b<(H=(H+360)%360-180)&&H<U*O)?(W=-N[1]*u.oh)<k&&(k=W):(P<k&&(k=P),P>T&&(T=P)),ne?O<b?S(M,O)>S(M,s)&&(s=O):S(O,s)>S(M,s)&&(M=O):s>=M?(O<M&&(M=O),O>s&&(s=O)):O>b?S(M,O)>S(M,s)&&(s=O):S(O,s)>S(M,s)&&(M=O)}else i.push(n=[M=O,s=O]);P<k&&(k=P),P>T&&(T=P),t=z,b=O}function g(){x.point=v}function y(){n[0]=M,n[1]=s,x.point=p,t=null}function m(O,P){if(t){var z=O-b;c.add((0,u.a2)(z)>180?z+(z>0?360:-360):z)}else f=O,o=P;a.oB.point(O,P),v(O,P)}function _(){a.oB.lineStart()}function d(){m(f,o),a.oB.lineEnd(),(0,u.a2)(c)>u.Gg&&(M=-(s=180)),n[0]=M,n[1]=s,t=null}function S(O,P){return(P-=O)<0?P+360:P}function w(O,P){return O[0]-P[0]}function E(O,P){return O[0]<=O[1]?O[0]<=P&&P<=O[1]:P<O[0]||O[1]<P}function C(O){var P,z,j,I,N,W,F;if(T=s=-(M=k=1/0),i=[],(0,h.c)(O,x),z=i.length){for(i.sort(w),P=1,N=[j=i[0]];P<z;++P)E(j,(I=i[P])[0])||E(j,I[1])?(S(j[0],I[1])>S(j[0],j[1])&&(j[1]=I[1]),S(I[0],j[1])>S(j[0],j[1])&&(j[0]=I[0])):N.push(j=I);for(W=-1/0,P=0,j=N[z=N.length-1];P<=z;j=I,++P)I=N[P],(F=S(j[1],I[0]))>W&&(W=F,M=I[0],s=j[1])}return i=n=null,M===1/0||k===1/0?[[NaN,NaN],[NaN,NaN]]:[[M,k],[s,T]]}},84220:function(ee,R,e){e.d(R,{CW:function(){return b},Ez:function(){return T},G:function(){return k},cJ:function(){return t},mg:function(){return f},ux:function(){return s},wx:function(){return o}});var M=e(64528);function k(i){return[(0,M.WE)(i[1],i[0]),(0,M.qR)(i[2])]}function s(i){var n=i[0],r=i[1],a=(0,M.W8)(r);return[a*(0,M.W8)(n),a*(0,M.g$)(n),(0,M.g$)(r)]}function T(i,n){return i[0]*n[0]+i[1]*n[1]+i[2]*n[2]}function b(i,n){return[i[1]*n[2]-i[2]*n[1],i[2]*n[0]-i[0]*n[2],i[0]*n[1]-i[1]*n[0]]}function f(i,n){i[0]+=n[0],i[1]+=n[1],i[2]+=n[2]}function o(i,n){return[i[0]*n,i[1]*n,i[2]*n]}function t(i){var n=(0,M._I)(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);i[0]/=n,i[1]/=n,i[2]/=n}},24052:function(ee,R,e){e.d(R,{c:function(){return z}});var M,k,s,T,b,f,o,t,i,n,r,a,l,u,h,c,x=e(64528),p=e(70932),v=e(16016),g={sphere:p.c,point:y,lineStart:_,lineEnd:w,polygonStart:function(){g.lineStart=E,g.lineEnd=C},polygonEnd:function(){g.lineStart=_,g.lineEnd=w}};function y(j,I){j*=x.qw,I*=x.qw;var N=(0,x.W8)(I);m(N*(0,x.W8)(j),N*(0,x.g$)(j),(0,x.g$)(I))}function m(j,I,N){++M,s+=(j-s)/M,T+=(I-T)/M,b+=(N-b)/M}function _(){g.point=d}function d(j,I){j*=x.qw,I*=x.qw;var N=(0,x.W8)(I);u=N*(0,x.W8)(j),h=N*(0,x.g$)(j),c=(0,x.g$)(I),g.point=S,m(u,h,c)}function S(j,I){j*=x.qw,I*=x.qw;var N=(0,x.W8)(I),W=N*(0,x.W8)(j),F=N*(0,x.g$)(j),U=(0,x.g$)(I),H=(0,x.WE)((0,x._I)((H=h*U-c*F)*H+(H=c*W-u*U)*H+(H=u*F-h*W)*H),u*W+h*F+c*U);k+=H,f+=H*(u+(u=W)),o+=H*(h+(h=F)),t+=H*(c+(c=U)),m(u,h,c)}function w(){g.point=y}function E(){g.point=O}function C(){P(a,l),g.point=y}function O(j,I){a=j,l=I,j*=x.qw,I*=x.qw,g.point=P;var N=(0,x.W8)(I);u=N*(0,x.W8)(j),h=N*(0,x.g$)(j),c=(0,x.g$)(I),m(u,h,c)}function P(j,I){j*=x.qw,I*=x.qw;var N=(0,x.W8)(I),W=N*(0,x.W8)(j),F=N*(0,x.g$)(j),U=(0,x.g$)(I),H=h*U-c*F,ne=c*W-u*U,$=u*F-h*W,K=(0,x._I)(H*H+ne*ne+$*$),Q=(0,x.qR)(K),Z=K&&-Q/K;i+=Z*H,n+=Z*ne,r+=Z*$,k+=Q,f+=Q*(u+(u=W)),o+=Q*(h+(h=F)),t+=Q*(c+(c=U)),m(u,h,c)}function z(j){M=k=s=T=b=f=o=t=i=n=r=0,(0,v.c)(j,g);var I=i,N=n,W=r,F=I*I+N*N+W*W;return F<x.a8&&(I=f,N=o,W=t,k<x.Gg&&(I=s,N=T,W=b),(F=I*I+N*N+W*W)<x.a8)?[NaN,NaN]:[(0,x.WE)(N,I)*x.oh,(0,x.qR)(W/(0,x._I)(F))*x.oh]}},61780:function(ee,R,e){e.d(R,{Q:function(){return b},c:function(){return o}});var M=e(84220);function k(t){return function(){return t}}var s=e(64528),T=e(92992);function b(t,i,n,r,a,l){if(n){var u=(0,s.W8)(i),h=(0,s.g$)(i),c=r*n;a==null?(a=i+r*s.kD,l=i-c/2):(a=f(u,a),l=f(u,l),(r>0?a<l:a>l)&&(a+=r*s.kD));for(var x,p=a;r>0?p>l:p<l;p-=c)x=(0,M.G)([u,-h*(0,s.W8)(p),-h*(0,s.g$)(p)]),t.point(x[0],x[1])}}function f(t,i){(i=(0,M.ux)(i))[0]-=t,(0,M.cJ)(i);var n=(0,s.mE)(-i[1]);return((-i[2]<0?-n:n)+s.kD-s.Gg)%s.kD}function o(){var t,i,n=k([0,0]),r=k(90),a=k(6),l={point:function(h,c){t.push(h=i(h,c)),h[0]*=s.oh,h[1]*=s.oh}};function u(){var h=n.apply(this,arguments),c=r.apply(this,arguments)*s.qw,x=a.apply(this,arguments)*s.qw;return t=[],i=(0,T.O)(-h[0]*s.qw,-h[1]*s.qw,0).invert,b(l,c,x,1),h={type:"Polygon",coordinates:[t]},t=i=null,h}return u.center=function(h){return arguments.length?(n=typeof h=="function"?h:k([+h[0],+h[1]]),u):n},u.radius=function(h){return arguments.length?(r=typeof h=="function"?h:k(+h),u):r},u.precision=function(h){return arguments.length?(a=typeof h=="function"?h:k(+h),u):a},u}},78284:function(ee,R,e){var M=e(14229),k=e(64528);R.c=(0,M.c)(function(){return!0},function(s){var T,b=NaN,f=NaN,o=NaN;return{lineStart:function(){s.lineStart(),T=1},point:function(t,i){var n=t>0?k.pi:-k.pi,r=(0,k.a2)(t-b);(0,k.a2)(r-k.pi)<k.Gg?(s.point(b,f=(f+i)/2>0?k.or:-k.or),s.point(o,f),s.lineEnd(),s.lineStart(),s.point(n,f),s.point(t,f),T=0):o!==n&&r>=k.pi&&((0,k.a2)(b-o)<k.Gg&&(b-=o*k.Gg),(0,k.a2)(t-n)<k.Gg&&(t-=n*k.Gg),f=function(a,l,u,h){var c,x,p=(0,k.g$)(a-u);return(0,k.a2)(p)>k.Gg?(0,k.MQ)(((0,k.g$)(l)*(x=(0,k.W8)(h))*(0,k.g$)(u)-(0,k.g$)(h)*(c=(0,k.W8)(l))*(0,k.g$)(a))/(c*x*p)):(l+h)/2}(b,f,t,i),s.point(o,f),s.lineEnd(),s.lineStart(),s.point(n,f),T=0),s.point(b=t,f=i),o=n},lineEnd:function(){s.lineEnd(),b=f=NaN},clean:function(){return 2-T}}},function(s,T,b,f){var o;if(s==null)o=b*k.or,f.point(-k.pi,o),f.point(0,o),f.point(k.pi,o),f.point(k.pi,0),f.point(k.pi,-o),f.point(0,-o),f.point(-k.pi,-o),f.point(-k.pi,0),f.point(-k.pi,o);else if((0,k.a2)(s[0]-T[0])>k.Gg){var t=s[0]<T[0]?k.pi:-k.pi;o=b*t/2,f.point(-t,o),f.point(0,o),f.point(t,o)}else f.point(T[0],T[1])},[-k.pi,-k.or])},97208:function(ee,R,e){e.d(R,{c:function(){return k}});var M=e(70932);function k(){var s,T=[];return{point:function(b,f,o){s.push([b,f,o])},lineStart:function(){T.push(s=[])},lineEnd:M.c,rejoin:function(){T.length>1&&T.push(T.pop().concat(T.shift()))},result:function(){var b=T;return T=[],s=null,b}}}},2728:function(ee,R,e){e.d(R,{c:function(){return f}});var M=e(84220),k=e(61780),s=e(64528),T=e(41860),b=e(14229);function f(o){var t=(0,s.W8)(o),i=6*s.qw,n=t>0,r=(0,s.a2)(t)>s.Gg;function a(h,c){return(0,s.W8)(h)*(0,s.W8)(c)>t}function l(h,c,x){var p=(0,M.ux)(h),v=(0,M.ux)(c),g=[1,0,0],y=(0,M.CW)(p,v),m=(0,M.Ez)(y,y),_=y[0],d=m-_*_;if(!d)return!x&&h;var S=t*m/d,w=-t*_/d,E=(0,M.CW)(g,y),C=(0,M.wx)(g,S),O=(0,M.wx)(y,w);(0,M.mg)(C,O);var P=E,z=(0,M.Ez)(C,P),j=(0,M.Ez)(P,P),I=z*z-j*((0,M.Ez)(C,C)-1);if(!(I<0)){var N=(0,s._I)(I),W=(0,M.wx)(P,(-z-N)/j);if((0,M.mg)(W,C),W=(0,M.G)(W),!x)return W;var F,U=h[0],H=c[0],ne=h[1],$=c[1];H<U&&(F=U,U=H,H=F);var K=H-U,Q=(0,s.a2)(K-s.pi)<s.Gg;if(!Q&&$<ne&&(F=ne,ne=$,$=F),Q||K<s.Gg?Q?ne+$>0^W[1]<((0,s.a2)(W[0]-U)<s.Gg?ne:$):ne<=W[1]&&W[1]<=$:K>s.pi^(U<=W[0]&&W[0]<=H)){var Z=(0,M.wx)(P,(-z+N)/j);return(0,M.mg)(Z,C),[W,(0,M.G)(Z)]}}}function u(h,c){var x=n?o:s.pi-o,p=0;return h<-x?p|=1:h>x&&(p|=2),c<-x?p|=4:c>x&&(p|=8),p}return(0,b.c)(a,function(h){var c,x,p,v,g;return{lineStart:function(){v=p=!1,g=1},point:function(y,m){var _,d=[y,m],S=a(y,m),w=n?S?0:u(y,m):S?u(y+(y<0?s.pi:-s.pi),m):0;if(!c&&(v=p=S)&&h.lineStart(),S!==p&&(!(_=l(c,d))||(0,T.c)(c,_)||(0,T.c)(d,_))&&(d[2]=1),S!==p)g=0,S?(h.lineStart(),_=l(d,c),h.point(_[0],_[1])):(_=l(c,d),h.point(_[0],_[1],2),h.lineEnd()),c=_;else if(r&&c&&n^S){var E;w&x||!(E=l(d,c,!0))||(g=0,n?(h.lineStart(),h.point(E[0][0],E[0][1]),h.point(E[1][0],E[1][1]),h.lineEnd()):(h.point(E[1][0],E[1][1]),h.lineEnd(),h.lineStart(),h.point(E[0][0],E[0][1],3)))}!S||c&&(0,T.c)(c,d)||h.point(d[0],d[1]),c=d,p=S,x=w},lineEnd:function(){p&&h.lineEnd(),c=null},clean:function(){return g|(v&&p)<<1}}},function(h,c,x,p){(0,k.Q)(p,o,i,x,h,c)},n?[0,-o]:[-s.pi,o-s.pi])}},14229:function(ee,R,e){e.d(R,{c:function(){return f}});var M=e(97208),k=e(32232),s=e(64528),T=e(58196),b=e(84706);function f(i,n,r,a){return function(l){var u,h,c,x=n(l),p=(0,M.c)(),v=n(p),g=!1,y={point:m,lineStart:d,lineEnd:S,polygonStart:function(){y.point=w,y.lineStart=E,y.lineEnd=C,h=[],u=[]},polygonEnd:function(){y.point=m,y.lineStart=d,y.lineEnd=S,h=(0,b.Uf)(h);var O=(0,T.c)(u,a);h.length?(g||(l.polygonStart(),g=!0),(0,k.c)(h,t,O,r,l)):O&&(g||(l.polygonStart(),g=!0),l.lineStart(),r(null,null,1,l),l.lineEnd()),g&&(l.polygonEnd(),g=!1),h=u=null},sphere:function(){l.polygonStart(),l.lineStart(),r(null,null,1,l),l.lineEnd(),l.polygonEnd()}};function m(O,P){i(O,P)&&l.point(O,P)}function _(O,P){x.point(O,P)}function d(){y.point=_,x.lineStart()}function S(){y.point=m,x.lineEnd()}function w(O,P){c.push([O,P]),v.point(O,P)}function E(){v.lineStart(),c=[]}function C(){w(c[0][0],c[0][1]),v.lineEnd();var O,P,z,j,I=v.clean(),N=p.result(),W=N.length;if(c.pop(),u.push(c),c=null,W)if(1&I){if((P=(z=N[0]).length-1)>0){for(g||(l.polygonStart(),g=!0),l.lineStart(),O=0;O<P;++O)l.point((j=z[O])[0],j[1]);l.lineEnd()}}else W>1&&2&I&&N.push(N.pop().concat(N.shift())),h.push(N.filter(o))}return y}}function o(i){return i.length>1}function t(i,n){return((i=i.x)[0]<0?i[1]-s.or-s.Gg:s.or-i[1])-((n=n.x)[0]<0?n[1]-s.or-s.Gg:s.or-n[1])}},21676:function(ee,R,e){e.d(R,{c:function(){return o}});var M=e(64528),k=e(97208),s=e(32232),T=e(84706),b=1e9,f=-b;function o(t,i,n,r){function a(x,p){return t<=x&&x<=n&&i<=p&&p<=r}function l(x,p,v,g){var y=0,m=0;if(x==null||(y=u(x,v))!==(m=u(p,v))||c(x,p)<0^v>0)do g.point(y===0||y===3?t:n,y>1?r:i);while((y=(y+v+4)%4)!==m);else g.point(p[0],p[1])}function u(x,p){return(0,M.a2)(x[0]-t)<M.Gg?p>0?0:3:(0,M.a2)(x[0]-n)<M.Gg?p>0?2:1:(0,M.a2)(x[1]-i)<M.Gg?p>0?1:0:p>0?3:2}function h(x,p){return c(x.x,p.x)}function c(x,p){var v=u(x,1),g=u(p,1);return v!==g?v-g:v===0?p[1]-x[1]:v===1?x[0]-p[0]:v===2?x[1]-p[1]:p[0]-x[0]}return function(x){var p,v,g,y,m,_,d,S,w,E,C,O=x,P=(0,k.c)(),z={point:j,lineStart:function(){z.point=I,v&&v.push(g=[]),E=!0,w=!1,d=S=NaN},lineEnd:function(){p&&(I(y,m),_&&w&&P.rejoin(),p.push(P.result())),z.point=j,w&&O.lineEnd()},polygonStart:function(){O=P,p=[],v=[],C=!0},polygonEnd:function(){var N=function(){for(var U=0,H=0,ne=v.length;H<ne;++H)for(var $,K,Q=v[H],Z=1,X=Q.length,te=Q[0],ae=te[0],se=te[1];Z<X;++Z)$=ae,K=se,ae=(te=Q[Z])[0],se=te[1],K<=r?se>r&&(ae-$)*(r-K)>(se-K)*(t-$)&&++U:se<=r&&(ae-$)*(r-K)<(se-K)*(t-$)&&--U;return U}(),W=C&&N,F=(p=(0,T.Uf)(p)).length;(W||F)&&(x.polygonStart(),W&&(x.lineStart(),l(null,null,1,x),x.lineEnd()),F&&(0,s.c)(p,h,N,l,x),x.polygonEnd()),O=x,p=v=g=null}};function j(N,W){a(N,W)&&O.point(N,W)}function I(N,W){var F=a(N,W);if(v&&g.push([N,W]),E)y=N,m=W,_=F,E=!1,F&&(O.lineStart(),O.point(N,W));else if(F&&w)O.point(N,W);else{var U=[d=Math.max(f,Math.min(b,d)),S=Math.max(f,Math.min(b,S))],H=[N=Math.max(f,Math.min(b,N)),W=Math.max(f,Math.min(b,W))];(function(ne,$,K,Q,Z,X){var te,ae=ne[0],se=ne[1],ce=0,fe=1,pe=$[0]-ae,ge=$[1]-se;if(te=K-ae,pe||!(te>0)){if(te/=pe,pe<0){if(te<ce)return;te<fe&&(fe=te)}else if(pe>0){if(te>fe)return;te>ce&&(ce=te)}if(te=Z-ae,pe||!(te<0)){if(te/=pe,pe<0){if(te>fe)return;te>ce&&(ce=te)}else if(pe>0){if(te<ce)return;te<fe&&(fe=te)}if(te=Q-se,ge||!(te>0)){if(te/=ge,ge<0){if(te<ce)return;te<fe&&(fe=te)}else if(ge>0){if(te>fe)return;te>ce&&(ce=te)}if(te=X-se,ge||!(te<0)){if(te/=ge,ge<0){if(te>fe)return;te>ce&&(ce=te)}else if(ge>0){if(te<ce)return;te<fe&&(fe=te)}return ce>0&&(ne[0]=ae+ce*pe,ne[1]=se+ce*ge),fe<1&&($[0]=ae+fe*pe,$[1]=se+fe*ge),!0}}}}})(U,H,t,i,n,r)?(w||(O.lineStart(),O.point(U[0],U[1])),O.point(H[0],H[1]),F||O.lineEnd(),C=!1):F&&(O.lineStart(),O.point(N,W),C=!1)}d=N,S=W,w=F}return z}}},32232:function(ee,R,e){e.d(R,{c:function(){return T}});var M=e(41860),k=e(64528);function s(f,o,t,i){this.x=f,this.z=o,this.o=t,this.e=i,this.v=!1,this.n=this.p=null}function T(f,o,t,i,n){var r,a,l=[],u=[];if(f.forEach(function(g){if(!((y=g.length-1)<=0)){var y,m,_=g[0],d=g[y];if((0,M.c)(_,d)){if(!_[2]&&!d[2]){for(n.lineStart(),r=0;r<y;++r)n.point((_=g[r])[0],_[1]);return void n.lineEnd()}d[0]+=2*k.Gg}l.push(m=new s(_,g,null,!0)),u.push(m.o=new s(_,null,m,!1)),l.push(m=new s(d,g,null,!1)),u.push(m.o=new s(d,null,m,!0))}}),l.length){for(u.sort(o),b(l),b(u),r=0,a=u.length;r<a;++r)u[r].e=t=!t;for(var h,c,x=l[0];;){for(var p=x,v=!0;p.v;)if((p=p.n)===x)return;h=p.z,n.lineStart();do{if(p.v=p.o.v=!0,p.e){if(v)for(r=0,a=h.length;r<a;++r)n.point((c=h[r])[0],c[1]);else i(p.x,p.n.x,1,n);p=p.n}else{if(v)for(h=p.p.z,r=h.length-1;r>=0;--r)n.point((c=h[r])[0],c[1]);else i(p.x,p.p.x,-1,n);p=p.p}h=(p=p.o).z,v=!v}while(!p.v);n.lineEnd()}}}function b(f){if(o=f.length){for(var o,t,i=0,n=f[0];++i<o;)n.n=t=f[i],t.p=n,n=t;n.n=t=f[0],t.p=n}}},68120:function(ee,R,e){function M(k,s){function T(b,f){return b=k(b,f),s(b[0],b[1])}return k.invert&&s.invert&&(T.invert=function(b,f){return(b=s.invert(b,f))&&k.invert(b[0],b[1])}),T}e.d(R,{c:function(){return M}})},7376:function(ee,R,e){function M(k){return k}e.d(R,{c:function(){return M}})},83356:function(ee,R,e){e.r(R),e.d(R,{geoAlbers:function(){return ut},geoAlbersUsa:function(){return xt},geoArea:function(){return M.cp},geoAzimuthalEqualArea:function(){return mt.c},geoAzimuthalEqualAreaRaw:function(){return mt.y},geoAzimuthalEquidistant:function(){return Tt.c},geoAzimuthalEquidistantRaw:function(){return Tt.O},geoBounds:function(){return k.c},geoCentroid:function(){return s.c},geoCircle:function(){return T.c},geoClipAntimeridian:function(){return b.c},geoClipCircle:function(){return f.c},geoClipExtent:function(){return t},geoClipRectangle:function(){return o.c},geoConicConformal:function(){return rn},geoConicConformalRaw:function(){return an},geoConicEqualArea:function(){return ct},geoConicEqualAreaRaw:function(){return rt},geoConicEquidistant:function(){return xn},geoConicEquidistantRaw:function(){return Kt},geoContains:function(){return N},geoDistance:function(){return S},geoEqualEarth:function(){return mn},geoEqualEarthRaw:function(){return wn},geoEquirectangular:function(){return qt.c},geoEquirectangularRaw:function(){return qt.u},geoGnomonic:function(){return Cn.c},geoGnomonicRaw:function(){return Cn.Y},geoGraticule:function(){return H},geoGraticule10:function(){return ne},geoIdentity:function(){return Mn},geoInterpolate:function(){return X.c},geoLength:function(){return m},geoMercator:function(){return zt},geoMercatorRaw:function(){return bt},geoNaturalEarth1:function(){return zn.c},geoNaturalEarth1Raw:function(){return zn.g},geoOrthographic:function(){return Wn.c},geoOrthographicRaw:function(){return Wn.t},geoPath:function(){return gt},geoProjection:function(){return je.c},geoProjectionMutator:function(){return je.U},geoRotation:function(){return yt.c},geoStereographic:function(){return Yn},geoStereographicRaw:function(){return Fn},geoStream:function(){return c.c},geoTransform:function(){return yn.c},geoTransverseMercator:function(){return rr},geoTransverseMercatorRaw:function(){return Xn}});var M=e(95384),k=e(13696),s=e(24052),T=e(61780),b=e(78284),f=e(2728),o=e(21676);function t(){var Yt,$t,Sn,dn=0,En=0,Nn=960,Bn=500;return Sn={stream:function($n){return Yt&&$t===$n?Yt:Yt=(0,o.c)(dn,En,Nn,Bn)($t=$n)},extent:function($n){return arguments.length?(dn=+$n[0][0],En=+$n[0][1],Nn=+$n[1][0],Bn=+$n[1][1],Yt=$t=null,Sn):[[dn,En],[Nn,Bn]]}}}var i,n,r,a=e(58196),l=e(88728),u=e(64528),h=e(70932),c=e(16016),x=(0,l.c)(),p={sphere:h.c,point:h.c,lineStart:function(){p.point=g,p.lineEnd=v},lineEnd:h.c,polygonStart:h.c,polygonEnd:h.c};function v(){p.point=p.lineEnd=h.c}function g(Yt,$t){Yt*=u.qw,$t*=u.qw,i=Yt,n=(0,u.g$)($t),r=(0,u.W8)($t),p.point=y}function y(Yt,$t){Yt*=u.qw,$t*=u.qw;var Sn=(0,u.g$)($t),dn=(0,u.W8)($t),En=(0,u.a2)(Yt-i),Nn=(0,u.W8)(En),Bn=dn*(0,u.g$)(En),$n=r*Sn-n*dn*Nn,lr=n*Sn+r*dn*Nn;x.add((0,u.WE)((0,u._I)(Bn*Bn+$n*$n),lr)),i=Yt,n=Sn,r=dn}function m(Yt){return x.reset(),(0,c.c)(Yt,p),+x}var _=[null,null],d={type:"LineString",coordinates:_};function S(Yt,$t){return _[0]=Yt,_[1]=$t,m(d)}var w={Feature:function(Yt,$t){return C(Yt.geometry,$t)},FeatureCollection:function(Yt,$t){for(var Sn=Yt.features,dn=-1,En=Sn.length;++dn<En;)if(C(Sn[dn].geometry,$t))return!0;return!1}},E={Sphere:function(){return!0},Point:function(Yt,$t){return O(Yt.coordinates,$t)},MultiPoint:function(Yt,$t){for(var Sn=Yt.coordinates,dn=-1,En=Sn.length;++dn<En;)if(O(Sn[dn],$t))return!0;return!1},LineString:function(Yt,$t){return P(Yt.coordinates,$t)},MultiLineString:function(Yt,$t){for(var Sn=Yt.coordinates,dn=-1,En=Sn.length;++dn<En;)if(P(Sn[dn],$t))return!0;return!1},Polygon:function(Yt,$t){return z(Yt.coordinates,$t)},MultiPolygon:function(Yt,$t){for(var Sn=Yt.coordinates,dn=-1,En=Sn.length;++dn<En;)if(z(Sn[dn],$t))return!0;return!1},GeometryCollection:function(Yt,$t){for(var Sn=Yt.geometries,dn=-1,En=Sn.length;++dn<En;)if(C(Sn[dn],$t))return!0;return!1}};function C(Yt,$t){return!(!Yt||!E.hasOwnProperty(Yt.type))&&E[Yt.type](Yt,$t)}function O(Yt,$t){return S(Yt,$t)===0}function P(Yt,$t){for(var Sn,dn,En,Nn=0,Bn=Yt.length;Nn<Bn;Nn++){if((dn=S(Yt[Nn],$t))===0||Nn>0&&(En=S(Yt[Nn],Yt[Nn-1]))>0&&Sn<=En&&dn<=En&&(Sn+dn-En)*(1-Math.pow((Sn-dn)/En,2))<u.a8*En)return!0;Sn=dn}return!1}function z(Yt,$t){return!!(0,a.c)(Yt.map(j),I($t))}function j(Yt){return(Yt=Yt.map(I)).pop(),Yt}function I(Yt){return[Yt[0]*u.qw,Yt[1]*u.qw]}function N(Yt,$t){return(Yt&&w.hasOwnProperty(Yt.type)?w[Yt.type]:C)(Yt,$t)}var W=e(84706);function F(Yt,$t,Sn){var dn=(0,W.ik)(Yt,$t-u.Gg,Sn).concat($t);return function(En){return dn.map(function(Nn){return[En,Nn]})}}function U(Yt,$t,Sn){var dn=(0,W.ik)(Yt,$t-u.Gg,Sn).concat($t);return function(En){return dn.map(function(Nn){return[Nn,En]})}}function H(){var Yt,$t,Sn,dn,En,Nn,Bn,$n,lr,Gt,gn,Ct,Rt=10,Zt=Rt,cn=90,fn=360,_n=2.5;function pn(){return{type:"MultiLineString",coordinates:sn()}}function sn(){return(0,W.ik)((0,u.Km)(dn/cn)*cn,Sn,cn).map(gn).concat((0,W.ik)((0,u.Km)($n/fn)*fn,Bn,fn).map(Ct)).concat((0,W.ik)((0,u.Km)($t/Rt)*Rt,Yt,Rt).filter(function(Nt){return(0,u.a2)(Nt%cn)>u.Gg}).map(lr)).concat((0,W.ik)((0,u.Km)(Nn/Zt)*Zt,En,Zt).filter(function(Nt){return(0,u.a2)(Nt%fn)>u.Gg}).map(Gt))}return pn.lines=function(){return sn().map(function(Nt){return{type:"LineString",coordinates:Nt}})},pn.outline=function(){return{type:"Polygon",coordinates:[gn(dn).concat(Ct(Bn).slice(1),gn(Sn).reverse().slice(1),Ct($n).reverse().slice(1))]}},pn.extent=function(Nt){return arguments.length?pn.extentMajor(Nt).extentMinor(Nt):pn.extentMinor()},pn.extentMajor=function(Nt){return arguments.length?(dn=+Nt[0][0],Sn=+Nt[1][0],$n=+Nt[0][1],Bn=+Nt[1][1],dn>Sn&&(Nt=dn,dn=Sn,Sn=Nt),$n>Bn&&(Nt=$n,$n=Bn,Bn=Nt),pn.precision(_n)):[[dn,$n],[Sn,Bn]]},pn.extentMinor=function(Nt){return arguments.length?($t=+Nt[0][0],Yt=+Nt[1][0],Nn=+Nt[0][1],En=+Nt[1][1],$t>Yt&&(Nt=$t,$t=Yt,Yt=Nt),Nn>En&&(Nt=Nn,Nn=En,En=Nt),pn.precision(_n)):[[$t,Nn],[Yt,En]]},pn.step=function(Nt){return arguments.length?pn.stepMajor(Nt).stepMinor(Nt):pn.stepMinor()},pn.stepMajor=function(Nt){return arguments.length?(cn=+Nt[0],fn=+Nt[1],pn):[cn,fn]},pn.stepMinor=function(Nt){return arguments.length?(Rt=+Nt[0],Zt=+Nt[1],pn):[Rt,Zt]},pn.precision=function(Nt){return arguments.length?(_n=+Nt,lr=F(Nn,En,90),Gt=U($t,Yt,_n),gn=F($n,Bn,90),Ct=U(dn,Sn,_n),pn):_n},pn.extentMajor([[-180,-90+u.Gg],[180,90-u.Gg]]).extentMinor([[-180,-80-u.Gg],[180,80+u.Gg]])}function ne(){return H()()}var $,K,Q,Z,X=e(27284),te=e(7376),ae=(0,l.c)(),se=(0,l.c)(),ce={point:h.c,lineStart:h.c,lineEnd:h.c,polygonStart:function(){ce.lineStart=fe,ce.lineEnd=me},polygonEnd:function(){ce.lineStart=ce.lineEnd=ce.point=h.c,ae.add((0,u.a2)(se)),se.reset()},result:function(){var Yt=ae/2;return ae.reset(),Yt}};function fe(){ce.point=pe}function pe(Yt,$t){ce.point=ge,$=Q=Yt,K=Z=$t}function ge(Yt,$t){se.add(Z*Yt-Q*$t),Q=Yt,Z=$t}function me(){ge($,K)}var be,ke,ze,ve,oe=ce,ie=e(73784),he=0,Se=0,ye=0,we=0,Me=0,Oe=0,Ie=0,de=0,_e=0,Ae={point:Pe,lineStart:Ee,lineEnd:Ye,polygonStart:function(){Ae.lineStart=tt,Ae.lineEnd=nt},polygonEnd:function(){Ae.point=Pe,Ae.lineStart=Ee,Ae.lineEnd=Ye},result:function(){var Yt=_e?[Ie/_e,de/_e]:Oe?[we/Oe,Me/Oe]:ye?[he/ye,Se/ye]:[NaN,NaN];return he=Se=ye=we=Me=Oe=Ie=de=_e=0,Yt}};function Pe(Yt,$t){he+=Yt,Se+=$t,++ye}function Ee(){Ae.point=Fe}function Fe(Yt,$t){Ae.point=Ve,Pe(ze=Yt,ve=$t)}function Ve(Yt,$t){var Sn=Yt-ze,dn=$t-ve,En=(0,u._I)(Sn*Sn+dn*dn);we+=En*(ze+Yt)/2,Me+=En*(ve+$t)/2,Oe+=En,Pe(ze=Yt,ve=$t)}function Ye(){Ae.point=Pe}function tt(){Ae.point=ht}function nt(){vt(be,ke)}function ht(Yt,$t){Ae.point=vt,Pe(be=ze=Yt,ke=ve=$t)}function vt(Yt,$t){var Sn=Yt-ze,dn=$t-ve,En=(0,u._I)(Sn*Sn+dn*dn);we+=En*(ze+Yt)/2,Me+=En*(ve+$t)/2,Oe+=En,Ie+=(En=ve*Yt-ze*$t)*(ze+Yt),de+=En*(ve+$t),_e+=3*En,Pe(ze=Yt,ve=$t)}var pt=Ae;function Qe(Yt){this._context=Yt}Qe.prototype={_radius:4.5,pointRadius:function(Yt){return this._radius=Yt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(Yt,$t){switch(this._point){case 0:this._context.moveTo(Yt,$t),this._point=1;break;case 1:this._context.lineTo(Yt,$t);break;default:this._context.moveTo(Yt+this._radius,$t),this._context.arc(Yt,$t,this._radius,0,u.kD)}},result:h.c};var Ke,Mt,Ot,Pt,St,He=(0,l.c)(),We={point:h.c,lineStart:function(){We.point=Be},lineEnd:function(){Ke&&Ge(Mt,Ot),We.point=h.c},polygonStart:function(){Ke=!0},polygonEnd:function(){Ke=null},result:function(){var Yt=+He;return He.reset(),Yt}};function Be(Yt,$t){We.point=Ge,Mt=Pt=Yt,Ot=St=$t}function Ge(Yt,$t){Pt-=Yt,St-=$t,He.add((0,u._I)(Pt*Pt+St*St)),Pt=Yt,St=$t}var ot=We;function it(){this._string=[]}function dt(Yt){return"m0,"+Yt+"a"+Yt+","+Yt+" 0 1,1 0,"+-2*Yt+"a"+Yt+","+Yt+" 0 1,1 0,"+2*Yt+"z"}function gt(Yt,$t){var Sn,dn,En=4.5;function Nn(Bn){return Bn&&(typeof En=="function"&&dn.pointRadius(+En.apply(this,arguments)),(0,c.c)(Bn,Sn(dn))),dn.result()}return Nn.area=function(Bn){return(0,c.c)(Bn,Sn(oe)),oe.result()},Nn.measure=function(Bn){return(0,c.c)(Bn,Sn(ot)),ot.result()},Nn.bounds=function(Bn){return(0,c.c)(Bn,Sn(ie.c)),ie.c.result()},Nn.centroid=function(Bn){return(0,c.c)(Bn,Sn(pt)),pt.result()},Nn.projection=function(Bn){return arguments.length?(Sn=Bn==null?(Yt=null,te.c):(Yt=Bn).stream,Nn):Yt},Nn.context=function(Bn){return arguments.length?(dn=Bn==null?($t=null,new it):new Qe($t=Bn),typeof En!="function"&&dn.pointRadius(En),Nn):$t},Nn.pointRadius=function(Bn){return arguments.length?(En=typeof Bn=="function"?Bn:(dn.pointRadius(+Bn),+Bn),Nn):En},Nn.projection(Yt).context($t)}it.prototype={_radius:4.5,_circle:dt(4.5),pointRadius:function(Yt){return(Yt=+Yt)!==this._radius&&(this._radius=Yt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(Yt,$t){switch(this._point){case 0:this._string.push("M",Yt,",",$t),this._point=1;break;case 1:this._string.push("L",Yt,",",$t);break;default:this._circle==null&&(this._circle=dt(this._radius)),this._string.push("M",Yt,",",$t,this._circle)}},result:function(){if(this._string.length){var Yt=this._string.join("");return this._string=[],Yt}return null}};var je=e(87952);function Re(Yt){var $t=0,Sn=u.pi/3,dn=(0,je.U)(Yt),En=dn($t,Sn);return En.parallels=function(Nn){return arguments.length?dn($t=Nn[0]*u.qw,Sn=Nn[1]*u.qw):[$t*u.oh,Sn*u.oh]},En}function rt(Yt,$t){var Sn=(0,u.g$)(Yt),dn=(Sn+(0,u.g$)($t))/2;if((0,u.a2)(dn)<u.Gg)return function($n){var lr=(0,u.W8)($n);function Gt(gn,Ct){return[gn*lr,(0,u.g$)(Ct)/lr]}return Gt.invert=function(gn,Ct){return[gn/lr,(0,u.qR)(Ct*lr)]},Gt}(Yt);var En=1+Sn*(2*dn-Sn),Nn=(0,u._I)(En)/dn;function Bn($n,lr){var Gt=(0,u._I)(En-2*dn*(0,u.g$)(lr))/dn;return[Gt*(0,u.g$)($n*=dn),Nn-Gt*(0,u.W8)($n)]}return Bn.invert=function($n,lr){var Gt=Nn-lr,gn=(0,u.WE)($n,(0,u.a2)(Gt))*(0,u.kq)(Gt);return Gt*dn<0&&(gn-=u.pi*(0,u.kq)($n)*(0,u.kq)(Gt)),[gn/dn,(0,u.qR)((En-($n*$n+Gt*Gt)*dn*dn)/(2*dn))]},Bn}function ct(){return Re(rt).scale(155.424).center([0,33.6442])}function ut(){return ct().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var et=e(86420);function xt(){var Yt,$t,Sn,dn,En,Nn,Bn=ut(),$n=ct().rotate([154,0]).center([-2,58.5]).parallels([55,65]),lr=ct().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Gt={point:function(Rt,Zt){Nn=[Rt,Zt]}};function gn(Rt){var Zt=Rt[0],cn=Rt[1];return Nn=null,Sn.point(Zt,cn),Nn||(dn.point(Zt,cn),Nn)||(En.point(Zt,cn),Nn)}function Ct(){return Yt=$t=null,gn}return gn.invert=function(Rt){var Zt=Bn.scale(),cn=Bn.translate(),fn=(Rt[0]-cn[0])/Zt,_n=(Rt[1]-cn[1])/Zt;return(_n>=.12&&_n<.234&&fn>=-.425&&fn<-.214?$n:_n>=.166&&_n<.234&&fn>=-.214&&fn<-.115?lr:Bn).invert(Rt)},gn.stream=function(Rt){return Yt&&$t===Rt?Yt:(Zt=[Bn.stream($t=Rt),$n.stream(Rt),lr.stream(Rt)],cn=Zt.length,Yt={point:function(fn,_n){for(var pn=-1;++pn<cn;)Zt[pn].point(fn,_n)},sphere:function(){for(var fn=-1;++fn<cn;)Zt[fn].sphere()},lineStart:function(){for(var fn=-1;++fn<cn;)Zt[fn].lineStart()},lineEnd:function(){for(var fn=-1;++fn<cn;)Zt[fn].lineEnd()},polygonStart:function(){for(var fn=-1;++fn<cn;)Zt[fn].polygonStart()},polygonEnd:function(){for(var fn=-1;++fn<cn;)Zt[fn].polygonEnd()}});var Zt,cn},gn.precision=function(Rt){return arguments.length?(Bn.precision(Rt),$n.precision(Rt),lr.precision(Rt),Ct()):Bn.precision()},gn.scale=function(Rt){return arguments.length?(Bn.scale(Rt),$n.scale(.35*Rt),lr.scale(Rt),gn.translate(Bn.translate())):Bn.scale()},gn.translate=function(Rt){if(!arguments.length)return Bn.translate();var Zt=Bn.scale(),cn=+Rt[0],fn=+Rt[1];return Sn=Bn.translate(Rt).clipExtent([[cn-.455*Zt,fn-.238*Zt],[cn+.455*Zt,fn+.238*Zt]]).stream(Gt),dn=$n.translate([cn-.307*Zt,fn+.201*Zt]).clipExtent([[cn-.425*Zt+u.Gg,fn+.12*Zt+u.Gg],[cn-.214*Zt-u.Gg,fn+.234*Zt-u.Gg]]).stream(Gt),En=lr.translate([cn-.205*Zt,fn+.212*Zt]).clipExtent([[cn-.214*Zt+u.Gg,fn+.166*Zt+u.Gg],[cn-.115*Zt-u.Gg,fn+.234*Zt-u.Gg]]).stream(Gt),Ct()},gn.fitExtent=function(Rt,Zt){return(0,et.QX)(gn,Rt,Zt)},gn.fitSize=function(Rt,Zt){return(0,et.UV)(gn,Rt,Zt)},gn.fitWidth=function(Rt,Zt){return(0,et.Qx)(gn,Rt,Zt)},gn.fitHeight=function(Rt,Zt){return(0,et.OW)(gn,Rt,Zt)},gn.scale(1070)}var mt=e(54724),Tt=e(69020),yt=e(92992);function bt(Yt,$t){return[Yt,(0,u.Yz)((0,u.a6)((u.or+$t)/2))]}function zt(){return Ut(bt).scale(961/u.kD)}function Ut(Yt){var $t,Sn,dn,En=(0,je.c)(Yt),Nn=En.center,Bn=En.scale,$n=En.translate,lr=En.clipExtent,Gt=null;function gn(){var Ct=u.pi*Bn(),Rt=En((0,yt.c)(En.rotate()).invert([0,0]));return lr(Gt==null?[[Rt[0]-Ct,Rt[1]-Ct],[Rt[0]+Ct,Rt[1]+Ct]]:Yt===bt?[[Math.max(Rt[0]-Ct,Gt),$t],[Math.min(Rt[0]+Ct,Sn),dn]]:[[Gt,Math.max(Rt[1]-Ct,$t)],[Sn,Math.min(Rt[1]+Ct,dn)]])}return En.scale=function(Ct){return arguments.length?(Bn(Ct),gn()):Bn()},En.translate=function(Ct){return arguments.length?($n(Ct),gn()):$n()},En.center=function(Ct){return arguments.length?(Nn(Ct),gn()):Nn()},En.clipExtent=function(Ct){return arguments.length?(Ct==null?Gt=$t=Sn=dn=null:(Gt=+Ct[0][0],$t=+Ct[0][1],Sn=+Ct[1][0],dn=+Ct[1][1]),gn()):Gt==null?null:[[Gt,$t],[Sn,dn]]},gn()}function en(Yt){return(0,u.a6)((u.or+Yt)/2)}function an(Yt,$t){var Sn=(0,u.W8)(Yt),dn=Yt===$t?(0,u.g$)(Yt):(0,u.Yz)(Sn/(0,u.W8)($t))/(0,u.Yz)(en($t)/en(Yt)),En=Sn*(0,u.g3)(en(Yt),dn)/dn;if(!dn)return bt;function Nn(Bn,$n){En>0?$n<-u.or+u.Gg&&($n=-u.or+u.Gg):$n>u.or-u.Gg&&($n=u.or-u.Gg);var lr=En/(0,u.g3)(en($n),dn);return[lr*(0,u.g$)(dn*Bn),En-lr*(0,u.W8)(dn*Bn)]}return Nn.invert=function(Bn,$n){var lr=En-$n,Gt=(0,u.kq)(dn)*(0,u._I)(Bn*Bn+lr*lr),gn=(0,u.WE)(Bn,(0,u.a2)(lr))*(0,u.kq)(lr);return lr*dn<0&&(gn-=u.pi*(0,u.kq)(Bn)*(0,u.kq)(lr)),[gn/dn,2*(0,u.MQ)((0,u.g3)(En/Gt,1/dn))-u.or]},Nn}function rn(){return Re(an).scale(109.5).parallels([30,30])}bt.invert=function(Yt,$t){return[Yt,2*(0,u.MQ)((0,u.oN)($t))-u.or]};var qt=e(69604);function Kt(Yt,$t){var Sn=(0,u.W8)(Yt),dn=Yt===$t?(0,u.g$)(Yt):(Sn-(0,u.W8)($t))/($t-Yt),En=Sn/dn+Yt;if((0,u.a2)(dn)<u.Gg)return qt.u;function Nn(Bn,$n){var lr=En-$n,Gt=dn*Bn;return[lr*(0,u.g$)(Gt),En-lr*(0,u.W8)(Gt)]}return Nn.invert=function(Bn,$n){var lr=En-$n,Gt=(0,u.WE)(Bn,(0,u.a2)(lr))*(0,u.kq)(lr);return lr*dn<0&&(Gt-=u.pi*(0,u.kq)(Bn)*(0,u.kq)(lr)),[Gt/dn,En-(0,u.kq)(dn)*(0,u._I)(Bn*Bn+lr*lr)]},Nn}function xn(){return Re(Kt).scale(131.154).center([0,13.9389])}var on=1.340264,Xt=-.081106,ln=893e-6,Jt=.003796,tn=(0,u._I)(3)/2;function wn(Yt,$t){var Sn=(0,u.qR)(tn*(0,u.g$)($t)),dn=Sn*Sn,En=dn*dn*dn;return[Yt*(0,u.W8)(Sn)/(tn*(on+3*Xt*dn+En*(7*ln+9*Jt*dn))),Sn*(on+Xt*dn+En*(ln+Jt*dn))]}function mn(){return(0,je.c)(wn).scale(177.158)}wn.invert=function(Yt,$t){for(var Sn,dn=$t,En=dn*dn,Nn=En*En*En,Bn=0;Bn<12&&(Nn=(En=(dn-=Sn=(dn*(on+Xt*En+Nn*(ln+Jt*En))-$t)/(on+3*Xt*En+Nn*(7*ln+9*Jt*En)))*dn)*En*En,!((0,u.a2)(Sn)<u.a8));++Bn);return[tn*Yt*(on+3*Xt*En+Nn*(7*ln+9*Jt*En))/(0,u.W8)(dn),(0,u.qR)((0,u.g$)(dn)/tn)]};var Cn=e(53285),yn=e(15196);function Mn(){var Yt,$t,Sn,dn,En,Nn,Bn,$n=1,lr=0,Gt=0,gn=1,Ct=1,Rt=0,Zt=null,cn=1,fn=1,_n=(0,yn.s)({point:function(Ft,Qt){var Tn=Nt([Ft,Qt]);this.stream.point(Tn[0],Tn[1])}}),pn=te.c;function sn(){return cn=$n*gn,fn=$n*Ct,Nn=Bn=null,Nt}function Nt(Ft){var Qt=Ft[0]*cn,Tn=Ft[1]*fn;if(Rt){var Pn=Tn*Yt-Qt*$t;Qt=Qt*Yt+Tn*$t,Tn=Pn}return[Qt+lr,Tn+Gt]}return Nt.invert=function(Ft){var Qt=Ft[0]-lr,Tn=Ft[1]-Gt;if(Rt){var Pn=Tn*Yt+Qt*$t;Qt=Qt*Yt-Tn*$t,Tn=Pn}return[Qt/cn,Tn/fn]},Nt.stream=function(Ft){return Nn&&Bn===Ft?Nn:Nn=_n(pn(Bn=Ft))},Nt.postclip=function(Ft){return arguments.length?(pn=Ft,Zt=Sn=dn=En=null,sn()):pn},Nt.clipExtent=function(Ft){return arguments.length?(pn=Ft==null?(Zt=Sn=dn=En=null,te.c):(0,o.c)(Zt=+Ft[0][0],Sn=+Ft[0][1],dn=+Ft[1][0],En=+Ft[1][1]),sn()):Zt==null?null:[[Zt,Sn],[dn,En]]},Nt.scale=function(Ft){return arguments.length?($n=+Ft,sn()):$n},Nt.translate=function(Ft){return arguments.length?(lr=+Ft[0],Gt=+Ft[1],sn()):[lr,Gt]},Nt.angle=function(Ft){return arguments.length?(Rt=Ft%360*u.qw,$t=(0,u.g$)(Rt),Yt=(0,u.W8)(Rt),sn()):Rt*u.oh},Nt.reflectX=function(Ft){return arguments.length?(gn=Ft?-1:1,sn()):gn<0},Nt.reflectY=function(Ft){return arguments.length?(Ct=Ft?-1:1,sn()):Ct<0},Nt.fitExtent=function(Ft,Qt){return(0,et.QX)(Nt,Ft,Qt)},Nt.fitSize=function(Ft,Qt){return(0,et.UV)(Nt,Ft,Qt)},Nt.fitWidth=function(Ft,Qt){return(0,et.Qx)(Nt,Ft,Qt)},Nt.fitHeight=function(Ft,Qt){return(0,et.OW)(Nt,Ft,Qt)},Nt}var zn=e(47984),Wn=e(4888),sr=e(62280);function Fn(Yt,$t){var Sn=(0,u.W8)($t),dn=1+(0,u.W8)(Yt)*Sn;return[Sn*(0,u.g$)(Yt)/dn,(0,u.g$)($t)/dn]}function Yn(){return(0,je.c)(Fn).scale(250).clipAngle(142)}function Xn(Yt,$t){return[(0,u.Yz)((0,u.a6)((u.or+$t)/2)),-Yt]}function rr(){var Yt=Ut(Xn),$t=Yt.center,Sn=Yt.rotate;return Yt.center=function(dn){return arguments.length?$t([-dn[1],dn[0]]):[(dn=$t())[1],-dn[0]]},Yt.rotate=function(dn){return arguments.length?Sn([dn[0],dn[1],dn.length>2?dn[2]+90:90]):[(dn=Sn())[0],dn[1],dn[2]-90]},Sn([0,0,90]).scale(159.155)}Fn.invert=(0,sr.g)(function(Yt){return 2*(0,u.MQ)(Yt)}),Xn.invert=function(Yt,$t){return[-$t,2*(0,u.MQ)((0,u.oN)(Yt))-u.or]}},27284:function(ee,R,e){e.d(R,{c:function(){return k}});var M=e(64528);function k(s,T){var b=s[0]*M.qw,f=s[1]*M.qw,o=T[0]*M.qw,t=T[1]*M.qw,i=(0,M.W8)(f),n=(0,M.g$)(f),r=(0,M.W8)(t),a=(0,M.g$)(t),l=i*(0,M.W8)(b),u=i*(0,M.g$)(b),h=r*(0,M.W8)(o),c=r*(0,M.g$)(o),x=2*(0,M.qR)((0,M._I)((0,M.SD)(t-f)+i*r*(0,M.SD)(o-b))),p=(0,M.g$)(x),v=x?function(g){var y=(0,M.g$)(g*=x)/p,m=(0,M.g$)(x-g)/p,_=m*l+y*h,d=m*u+y*c,S=m*n+y*a;return[(0,M.WE)(d,_)*M.oh,(0,M.WE)(S,(0,M._I)(_*_+d*d))*M.oh]}:function(){return[b*M.oh,f*M.oh]};return v.distance=x,v}},64528:function(ee,R,e){e.d(R,{Gg:function(){return M},Km:function(){return l},MQ:function(){return n},SD:function(){return _},W8:function(){return a},WE:function(){return r},Yz:function(){return h},_I:function(){return v},a2:function(){return i},a6:function(){return g},a8:function(){return k},g$:function(){return x},g3:function(){return c},kD:function(){return f},kq:function(){return p},mE:function(){return y},oN:function(){return u},oh:function(){return o},or:function(){return T},pi:function(){return s},qR:function(){return m},qw:function(){return t},wL:function(){return b}});var M=1e-6,k=1e-12,s=Math.PI,T=s/2,b=s/4,f=2*s,o=180/s,t=s/180,i=Math.abs,n=Math.atan,r=Math.atan2,a=Math.cos,l=Math.ceil,u=Math.exp,h=Math.log,c=Math.pow,x=Math.sin,p=Math.sign||function(d){return d>0?1:d<0?-1:0},v=Math.sqrt,g=Math.tan;function y(d){return d>1?0:d<-1?s:Math.acos(d)}function m(d){return d>1?T:d<-1?-T:Math.asin(d)}function _(d){return(d=x(d/2))*d}},70932:function(ee,R,e){function M(){}e.d(R,{c:function(){return M}})},73784:function(ee,R,e){var M=e(70932),k=1/0,s=k,T=-k,b=T,f={point:function(o,t){o<k&&(k=o),o>T&&(T=o),t<s&&(s=t),t>b&&(b=t)},lineStart:M.c,lineEnd:M.c,polygonStart:M.c,polygonEnd:M.c,result:function(){var o=[[k,s],[T,b]];return T=b=-(s=k=1/0),o}};R.c=f},41860:function(ee,R,e){e.d(R,{c:function(){return k}});var M=e(64528);function k(s,T){return(0,M.a2)(s[0]-T[0])<M.Gg&&(0,M.a2)(s[1]-T[1])<M.Gg}},58196:function(ee,R,e){e.d(R,{c:function(){return f}});var M=e(88728),k=e(84220),s=e(64528),T=(0,M.c)();function b(o){return(0,s.a2)(o[0])<=s.pi?o[0]:(0,s.kq)(o[0])*(((0,s.a2)(o[0])+s.pi)%s.kD-s.pi)}function f(o,t){var i=b(t),n=t[1],r=(0,s.g$)(n),a=[(0,s.g$)(i),-(0,s.W8)(i),0],l=0,u=0;T.reset(),r===1?n=s.or+s.Gg:r===-1&&(n=-s.or-s.Gg);for(var h=0,c=o.length;h<c;++h)if(p=(x=o[h]).length)for(var x,p,v=x[p-1],g=b(v),y=v[1]/2+s.wL,m=(0,s.g$)(y),_=(0,s.W8)(y),d=0;d<p;++d,g=w,m=C,_=O,v=S){var S=x[d],w=b(S),E=S[1]/2+s.wL,C=(0,s.g$)(E),O=(0,s.W8)(E),P=w-g,z=P>=0?1:-1,j=z*P,I=j>s.pi,N=m*C;if(T.add((0,s.WE)(N*z*(0,s.g$)(j),_*O+N*(0,s.W8)(j))),l+=I?P+z*s.kD:P,I^g>=i^w>=i){var W=(0,k.CW)((0,k.ux)(v),(0,k.ux)(S));(0,k.cJ)(W);var F=(0,k.CW)(a,W);(0,k.cJ)(F);var U=(I^P>=0?-1:1)*(0,s.qR)(F[2]);(n>U||n===U&&(W[0]||W[1]))&&(u+=I^P>=0?1:-1)}}return(l<-s.Gg||l<s.Gg&&T<-s.Gg)^1&u}},62280:function(ee,R,e){e.d(R,{a:function(){return k},g:function(){return s}});var M=e(64528);function k(T){return function(b,f){var o=(0,M.W8)(b),t=(0,M.W8)(f),i=T(o*t);return[i*t*(0,M.g$)(b),i*(0,M.g$)(f)]}}function s(T){return function(b,f){var o=(0,M._I)(b*b+f*f),t=T(o),i=(0,M.g$)(t),n=(0,M.W8)(t);return[(0,M.WE)(b*i,o*n),(0,M.qR)(o&&f*i/o)]}}},54724:function(ee,R,e){e.d(R,{c:function(){return b},y:function(){return T}});var M=e(64528),k=e(62280),s=e(87952),T=(0,k.a)(function(f){return(0,M._I)(2/(1+f))});function b(){return(0,s.c)(T).scale(124.75).clipAngle(179.999)}T.invert=(0,k.g)(function(f){return 2*(0,M.qR)(f/2)})},69020:function(ee,R,e){e.d(R,{O:function(){return T},c:function(){return b}});var M=e(64528),k=e(62280),s=e(87952),T=(0,k.a)(function(f){return(f=(0,M.mE)(f))&&f/(0,M.g$)(f)});function b(){return(0,s.c)(T).scale(79.4188).clipAngle(179.999)}T.invert=(0,k.g)(function(f){return f})},69604:function(ee,R,e){e.d(R,{c:function(){return s},u:function(){return k}});var M=e(87952);function k(T,b){return[T,b]}function s(){return(0,M.c)(k).scale(152.63)}k.invert=k},86420:function(ee,R,e){e.d(R,{OW:function(){return o},QX:function(){return T},Qx:function(){return f},UV:function(){return b}});var M=e(16016),k=e(73784);function s(t,i,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),(0,M.c)(n,t.stream(k.c)),i(k.c.result()),r!=null&&t.clipExtent(r),t}function T(t,i,n){return s(t,function(r){var a=i[1][0]-i[0][0],l=i[1][1]-i[0][1],u=Math.min(a/(r[1][0]-r[0][0]),l/(r[1][1]-r[0][1])),h=+i[0][0]+(a-u*(r[1][0]+r[0][0]))/2,c=+i[0][1]+(l-u*(r[1][1]+r[0][1]))/2;t.scale(150*u).translate([h,c])},n)}function b(t,i,n){return T(t,[[0,0],i],n)}function f(t,i,n){return s(t,function(r){var a=+i,l=a/(r[1][0]-r[0][0]),u=(a-l*(r[1][0]+r[0][0]))/2,h=-l*r[0][1];t.scale(150*l).translate([u,h])},n)}function o(t,i,n){return s(t,function(r){var a=+i,l=a/(r[1][1]-r[0][1]),u=-l*r[0][0],h=(a-l*(r[1][1]+r[0][1]))/2;t.scale(150*l).translate([u,h])},n)}},53285:function(ee,R,e){e.d(R,{Y:function(){return T},c:function(){return b}});var M=e(64528),k=e(62280),s=e(87952);function T(f,o){var t=(0,M.W8)(o),i=(0,M.W8)(f)*t;return[t*(0,M.g$)(f)/i,(0,M.g$)(o)/i]}function b(){return(0,s.c)(T).scale(144.049).clipAngle(60)}T.invert=(0,k.g)(M.MQ)},87952:function(ee,R,e){e.d(R,{c:function(){return x},U:function(){return p}});var M=e(78284),k=e(2728),s=e(21676),T=e(68120),b=e(7376),f=e(64528),o=e(92992),t=e(15196),i=e(86420),n=e(84220),r=16,a=(0,f.W8)(30*f.qw);function l(v,g){return+g?function(y,m){function _(d,S,w,E,C,O,P,z,j,I,N,W,F,U){var H=P-d,ne=z-S,$=H*H+ne*ne;if($>4*m&&F--){var K=E+I,Q=C+N,Z=O+W,X=(0,f._I)(K*K+Q*Q+Z*Z),te=(0,f.qR)(Z/=X),ae=(0,f.a2)((0,f.a2)(Z)-1)<f.Gg||(0,f.a2)(w-j)<f.Gg?(w+j)/2:(0,f.WE)(Q,K),se=y(ae,te),ce=se[0],fe=se[1],pe=ce-d,ge=fe-S,me=ne*pe-H*ge;(me*me/$>m||(0,f.a2)((H*pe+ne*ge)/$-.5)>.3||E*I+C*N+O*W<a)&&(_(d,S,w,E,C,O,ce,fe,ae,K/=X,Q/=X,Z,F,U),U.point(ce,fe),_(ce,fe,ae,K,Q,Z,P,z,j,I,N,W,F,U))}}return function(d){var S,w,E,C,O,P,z,j,I,N,W,F,U={point:H,lineStart:ne,lineEnd:K,polygonStart:function(){d.polygonStart(),U.lineStart=Q},polygonEnd:function(){d.polygonEnd(),U.lineStart=ne}};function H(te,ae){te=y(te,ae),d.point(te[0],te[1])}function ne(){j=NaN,U.point=$,d.lineStart()}function $(te,ae){var se=(0,n.ux)([te,ae]),ce=y(te,ae);_(j,I,z,N,W,F,j=ce[0],I=ce[1],z=te,N=se[0],W=se[1],F=se[2],r,d),d.point(j,I)}function K(){U.point=H,d.lineEnd()}function Q(){ne(),U.point=Z,U.lineEnd=X}function Z(te,ae){$(S=te,ae),w=j,E=I,C=N,O=W,P=F,U.point=$}function X(){_(j,I,z,N,W,F,w,E,S,C,O,P,r,d),U.lineEnd=K,K()}return U}}(v,g):function(y){return(0,t.s)({point:function(m,_){m=y(m,_),this.stream.point(m[0],m[1])}})}(v)}var u=(0,t.s)({point:function(v,g){this.stream.point(v*f.qw,g*f.qw)}});function h(v,g,y,m,_){function d(S,w){return[g+v*(S*=m),y-v*(w*=_)]}return d.invert=function(S,w){return[(S-g)/v*m,(y-w)/v*_]},d}function c(v,g,y,m,_,d){var S=(0,f.W8)(d),w=(0,f.g$)(d),E=S*v,C=w*v,O=S/v,P=w/v,z=(w*y-S*g)/v,j=(w*g+S*y)/v;function I(N,W){return[E*(N*=m)-C*(W*=_)+g,y-C*N-E*W]}return I.invert=function(N,W){return[m*(O*N-P*W+z),_*(j-P*N-O*W)]},I}function x(v){return p(function(){return v})()}function p(v){var g,y,m,_,d,S,w,E,C,O,P=150,z=480,j=250,I=0,N=0,W=0,F=0,U=0,H=0,ne=1,$=1,K=null,Q=M.c,Z=null,X=b.c,te=.5;function ae(pe){return E(pe[0]*f.qw,pe[1]*f.qw)}function se(pe){return(pe=E.invert(pe[0],pe[1]))&&[pe[0]*f.oh,pe[1]*f.oh]}function ce(){var pe=c(P,0,0,ne,$,H).apply(null,g(I,N)),ge=(H?c:h)(P,z-pe[0],j-pe[1],ne,$,H);return y=(0,o.O)(W,F,U),w=(0,T.c)(g,ge),E=(0,T.c)(y,w),S=l(w,te),fe()}function fe(){return C=O=null,ae}return ae.stream=function(pe){return C&&O===pe?C:C=u(function(ge){return(0,t.s)({point:function(me,be){var ke=ge(me,be);return this.stream.point(ke[0],ke[1])}})}(y)(Q(S(X(O=pe)))))},ae.preclip=function(pe){return arguments.length?(Q=pe,K=void 0,fe()):Q},ae.postclip=function(pe){return arguments.length?(X=pe,Z=m=_=d=null,fe()):X},ae.clipAngle=function(pe){return arguments.length?(Q=+pe?(0,k.c)(K=pe*f.qw):(K=null,M.c),fe()):K*f.oh},ae.clipExtent=function(pe){return arguments.length?(X=pe==null?(Z=m=_=d=null,b.c):(0,s.c)(Z=+pe[0][0],m=+pe[0][1],_=+pe[1][0],d=+pe[1][1]),fe()):Z==null?null:[[Z,m],[_,d]]},ae.scale=function(pe){return arguments.length?(P=+pe,ce()):P},ae.translate=function(pe){return arguments.length?(z=+pe[0],j=+pe[1],ce()):[z,j]},ae.center=function(pe){return arguments.length?(I=pe[0]%360*f.qw,N=pe[1]%360*f.qw,ce()):[I*f.oh,N*f.oh]},ae.rotate=function(pe){return arguments.length?(W=pe[0]%360*f.qw,F=pe[1]%360*f.qw,U=pe.length>2?pe[2]%360*f.qw:0,ce()):[W*f.oh,F*f.oh,U*f.oh]},ae.angle=function(pe){return arguments.length?(H=pe%360*f.qw,ce()):H*f.oh},ae.reflectX=function(pe){return arguments.length?(ne=pe?-1:1,ce()):ne<0},ae.reflectY=function(pe){return arguments.length?($=pe?-1:1,ce()):$<0},ae.precision=function(pe){return arguments.length?(S=l(w,te=pe*pe),fe()):(0,f._I)(te)},ae.fitExtent=function(pe,ge){return(0,i.QX)(ae,pe,ge)},ae.fitSize=function(pe,ge){return(0,i.UV)(ae,pe,ge)},ae.fitWidth=function(pe,ge){return(0,i.Qx)(ae,pe,ge)},ae.fitHeight=function(pe,ge){return(0,i.OW)(ae,pe,ge)},function(){return g=v.apply(this,arguments),ae.invert=g.invert&&se,ce()}}},47984:function(ee,R,e){e.d(R,{c:function(){return T},g:function(){return s}});var M=e(87952),k=e(64528);function s(b,f){var o=f*f,t=o*o;return[b*(.8707-.131979*o+t*(t*(.003971*o-.001529*t)-.013791)),f*(1.007226+o*(.015085+t*(.028874*o-.044475-.005916*t)))]}function T(){return(0,M.c)(s).scale(175.295)}s.invert=function(b,f){var o,t=f,i=25;do{var n=t*t,r=n*n;t-=o=(t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))-f)/(1.007226+n*(.045255+r*(.259866*n-.311325-.06507600000000001*r)))}while((0,k.a2)(o)>k.Gg&&--i>0);return[b/(.8707+(n=t*t)*(n*(n*n*n*(.003971-.001529*n)-.013791)-.131979)),t]}},4888:function(ee,R,e){e.d(R,{c:function(){return b},t:function(){return T}});var M=e(64528),k=e(62280),s=e(87952);function T(f,o){return[(0,M.W8)(o)*(0,M.g$)(f),(0,M.g$)(o)]}function b(){return(0,s.c)(T).scale(249.5).clipAngle(90+M.Gg)}T.invert=(0,k.g)(M.qR)},92992:function(ee,R,e){e.d(R,{O:function(){return T},c:function(){return t}});var M=e(68120),k=e(64528);function s(i,n){return[(0,k.a2)(i)>k.pi?i+Math.round(-i/k.kD)*k.kD:i,n]}function T(i,n,r){return(i%=k.kD)?n||r?(0,M.c)(f(i),o(n,r)):f(i):n||r?o(n,r):s}function b(i){return function(n,r){return[(n+=i)>k.pi?n-k.kD:n<-k.pi?n+k.kD:n,r]}}function f(i){var n=b(i);return n.invert=b(-i),n}function o(i,n){var r=(0,k.W8)(i),a=(0,k.g$)(i),l=(0,k.W8)(n),u=(0,k.g$)(n);function h(c,x){var p=(0,k.W8)(x),v=(0,k.W8)(c)*p,g=(0,k.g$)(c)*p,y=(0,k.g$)(x),m=y*r+v*a;return[(0,k.WE)(g*l-m*u,v*r-y*a),(0,k.qR)(m*l+g*u)]}return h.invert=function(c,x){var p=(0,k.W8)(x),v=(0,k.W8)(c)*p,g=(0,k.g$)(c)*p,y=(0,k.g$)(x),m=y*l-g*u;return[(0,k.WE)(g*l+y*u,v*r+m*a),(0,k.qR)(m*r-v*a)]},h}function t(i){function n(r){return(r=i(r[0]*k.qw,r[1]*k.qw))[0]*=k.oh,r[1]*=k.oh,r}return i=T(i[0]*k.qw,i[1]*k.qw,i.length>2?i[2]*k.qw:0),n.invert=function(r){return(r=i.invert(r[0]*k.qw,r[1]*k.qw))[0]*=k.oh,r[1]*=k.oh,r},n}s.invert=s},16016:function(ee,R,e){function M(o,t){o&&s.hasOwnProperty(o.type)&&s[o.type](o,t)}e.d(R,{c:function(){return f}});var k={Feature:function(o,t){M(o.geometry,t)},FeatureCollection:function(o,t){for(var i=o.features,n=-1,r=i.length;++n<r;)M(i[n].geometry,t)}},s={Sphere:function(o,t){t.sphere()},Point:function(o,t){o=o.coordinates,t.point(o[0],o[1],o[2])},MultiPoint:function(o,t){for(var i=o.coordinates,n=-1,r=i.length;++n<r;)o=i[n],t.point(o[0],o[1],o[2])},LineString:function(o,t){T(o.coordinates,t,0)},MultiLineString:function(o,t){for(var i=o.coordinates,n=-1,r=i.length;++n<r;)T(i[n],t,0)},Polygon:function(o,t){b(o.coordinates,t)},MultiPolygon:function(o,t){for(var i=o.coordinates,n=-1,r=i.length;++n<r;)b(i[n],t)},GeometryCollection:function(o,t){for(var i=o.geometries,n=-1,r=i.length;++n<r;)M(i[n],t)}};function T(o,t,i){var n,r=-1,a=o.length-i;for(t.lineStart();++r<a;)n=o[r],t.point(n[0],n[1],n[2]);t.lineEnd()}function b(o,t){var i=-1,n=o.length;for(t.polygonStart();++i<n;)T(o[i],t,1);t.polygonEnd()}function f(o,t){o&&k.hasOwnProperty(o.type)?k[o.type](o,t):M(o,t)}},15196:function(ee,R,e){function M(T){return{stream:k(T)}}function k(T){return function(b){var f=new s;for(var o in T)f[o]=T[o];return f.stream=b,f}}function s(){}e.d(R,{c:function(){return M},s:function(){return k}}),s.prototype={constructor:s,point:function(T,b){this.stream.point(T,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},74148:function(ee,R,e){function M(ie,he){return ie.parent===he.parent?1:2}function k(ie,he){return ie+he.x}function s(ie,he){return Math.max(ie,he.y)}function T(){var ie=M,he=1,Se=1,ye=!1;function we(Me){var Oe,Ie=0;Me.eachAfter(function(Ee){var Fe=Ee.children;Fe?(Ee.x=function(Ve){return Ve.reduce(k,0)/Ve.length}(Fe),Ee.y=function(Ve){return 1+Ve.reduce(s,0)}(Fe)):(Ee.x=Oe?Ie+=ie(Ee,Oe):0,Ee.y=0,Oe=Ee)});var de=function(Ee){for(var Fe;Fe=Ee.children;)Ee=Fe[0];return Ee}(Me),_e=function(Ee){for(var Fe;Fe=Ee.children;)Ee=Fe[Fe.length-1];return Ee}(Me),Ae=de.x-ie(de,_e)/2,Pe=_e.x+ie(_e,de)/2;return Me.eachAfter(ye?function(Ee){Ee.x=(Ee.x-Me.x)*he,Ee.y=(Me.y-Ee.y)*Se}:function(Ee){Ee.x=(Ee.x-Ae)/(Pe-Ae)*he,Ee.y=(1-(Me.y?Ee.y/Me.y:1))*Se})}return we.separation=function(Me){return arguments.length?(ie=Me,we):ie},we.size=function(Me){return arguments.length?(ye=!1,he=+Me[0],Se=+Me[1],we):ye?null:[he,Se]},we.nodeSize=function(Me){return arguments.length?(ye=!0,he=+Me[0],Se=+Me[1],we):ye?[he,Se]:null},we}function b(ie){var he=0,Se=ie.children,ye=Se&&Se.length;if(ye)for(;--ye>=0;)he+=Se[ye].value;else he=1;ie.value=he}function f(ie,he){var Se,ye,we,Me,Oe,Ie=new n(ie),de=+ie.value&&(Ie.value=ie.value),_e=[Ie];for(he==null&&(he=o);Se=_e.pop();)if(de&&(Se.value=+Se.data.value),(we=he(Se.data))&&(Oe=we.length))for(Se.children=new Array(Oe),Me=Oe-1;Me>=0;--Me)_e.push(ye=Se.children[Me]=new n(we[Me])),ye.parent=Se,ye.depth=Se.depth+1;return Ie.eachBefore(i)}function o(ie){return ie.children}function t(ie){ie.data=ie.data.data}function i(ie){var he=0;do ie.height=he;while((ie=ie.parent)&&ie.height<++he)}function n(ie){this.data=ie,this.depth=this.height=0,this.parent=null}e.r(R),e.d(R,{cluster:function(){return T},hierarchy:function(){return f},pack:function(){return P},packEnclose:function(){return a},packSiblings:function(){return S},partition:function(){return F},stratify:function(){return Q},tree:function(){return fe},treemap:function(){return ke},treemapBinary:function(){return ze},treemapDice:function(){return W},treemapResquarify:function(){return oe},treemapSlice:function(){return pe},treemapSliceDice:function(){return ve},treemapSquarify:function(){return be}}),n.prototype=f.prototype={constructor:n,count:function(){return this.eachAfter(b)},each:function(ie){var he,Se,ye,we,Me=this,Oe=[Me];do for(he=Oe.reverse(),Oe=[];Me=he.pop();)if(ie(Me),Se=Me.children)for(ye=0,we=Se.length;ye<we;++ye)Oe.push(Se[ye]);while(Oe.length);return this},eachAfter:function(ie){for(var he,Se,ye,we=this,Me=[we],Oe=[];we=Me.pop();)if(Oe.push(we),he=we.children)for(Se=0,ye=he.length;Se<ye;++Se)Me.push(he[Se]);for(;we=Oe.pop();)ie(we);return this},eachBefore:function(ie){for(var he,Se,ye=this,we=[ye];ye=we.pop();)if(ie(ye),he=ye.children)for(Se=he.length-1;Se>=0;--Se)we.push(he[Se]);return this},sum:function(ie){return this.eachAfter(function(he){for(var Se=+ie(he.data)||0,ye=he.children,we=ye&&ye.length;--we>=0;)Se+=ye[we].value;he.value=Se})},sort:function(ie){return this.eachBefore(function(he){he.children&&he.children.sort(ie)})},path:function(ie){for(var he=this,Se=function(Me,Oe){if(Me===Oe)return Me;var Ie=Me.ancestors(),de=Oe.ancestors(),_e=null;for(Me=Ie.pop(),Oe=de.pop();Me===Oe;)_e=Me,Me=Ie.pop(),Oe=de.pop();return _e}(he,ie),ye=[he];he!==Se;)he=he.parent,ye.push(he);for(var we=ye.length;ie!==Se;)ye.splice(we,0,ie),ie=ie.parent;return ye},ancestors:function(){for(var ie=this,he=[ie];ie=ie.parent;)he.push(ie);return he},descendants:function(){var ie=[];return this.each(function(he){ie.push(he)}),ie},leaves:function(){var ie=[];return this.eachBefore(function(he){he.children||ie.push(he)}),ie},links:function(){var ie=this,he=[];return ie.each(function(Se){Se!==ie&&he.push({source:Se.parent,target:Se})}),he},copy:function(){return f(this).eachBefore(t)}};var r=Array.prototype.slice;function a(ie){for(var he,Se,ye=0,we=(ie=function(Oe){for(var Ie,de,_e=Oe.length;_e;)de=Math.random()*_e--|0,Ie=Oe[_e],Oe[_e]=Oe[de],Oe[de]=Ie;return Oe}(r.call(ie))).length,Me=[];ye<we;)he=ie[ye],Se&&h(Se,he)?++ye:(Se=x(Me=l(Me,he)),ye=0);return Se}function l(ie,he){var Se,ye;if(c(he,ie))return[he];for(Se=0;Se<ie.length;++Se)if(u(he,ie[Se])&&c(p(ie[Se],he),ie))return[ie[Se],he];for(Se=0;Se<ie.length-1;++Se)for(ye=Se+1;ye<ie.length;++ye)if(u(p(ie[Se],ie[ye]),he)&&u(p(ie[Se],he),ie[ye])&&u(p(ie[ye],he),ie[Se])&&c(v(ie[Se],ie[ye],he),ie))return[ie[Se],ie[ye],he];throw new Error}function u(ie,he){var Se=ie.r-he.r,ye=he.x-ie.x,we=he.y-ie.y;return Se<0||Se*Se<ye*ye+we*we}function h(ie,he){var Se=ie.r-he.r+1e-6,ye=he.x-ie.x,we=he.y-ie.y;return Se>0&&Se*Se>ye*ye+we*we}function c(ie,he){for(var Se=0;Se<he.length;++Se)if(!h(ie,he[Se]))return!1;return!0}function x(ie){switch(ie.length){case 1:return{x:(he=ie[0]).x,y:he.y,r:he.r};case 2:return p(ie[0],ie[1]);case 3:return v(ie[0],ie[1],ie[2])}var he}function p(ie,he){var Se=ie.x,ye=ie.y,we=ie.r,Me=he.x,Oe=he.y,Ie=he.r,de=Me-Se,_e=Oe-ye,Ae=Ie-we,Pe=Math.sqrt(de*de+_e*_e);return{x:(Se+Me+de/Pe*Ae)/2,y:(ye+Oe+_e/Pe*Ae)/2,r:(Pe+we+Ie)/2}}function v(ie,he,Se){var ye=ie.x,we=ie.y,Me=ie.r,Oe=he.x,Ie=he.y,de=he.r,_e=Se.x,Ae=Se.y,Pe=Se.r,Ee=ye-Oe,Fe=ye-_e,Ve=we-Ie,Ye=we-Ae,tt=de-Me,nt=Pe-Me,ht=ye*ye+we*we-Me*Me,vt=ht-Oe*Oe-Ie*Ie+de*de,pt=ht-_e*_e-Ae*Ae+Pe*Pe,Qe=Fe*Ve-Ee*Ye,Ke=(Ve*pt-Ye*vt)/(2*Qe)-ye,Mt=(Ye*tt-Ve*nt)/Qe,Ot=(Fe*vt-Ee*pt)/(2*Qe)-we,Pt=(Ee*nt-Fe*tt)/Qe,St=Mt*Mt+Pt*Pt-1,He=2*(Me+Ke*Mt+Ot*Pt),We=Ke*Ke+Ot*Ot-Me*Me,Be=-(St?(He+Math.sqrt(He*He-4*St*We))/(2*St):We/He);return{x:ye+Ke+Mt*Be,y:we+Ot+Pt*Be,r:Be}}function g(ie,he,Se){var ye,we,Me,Oe,Ie=ie.x-he.x,de=ie.y-he.y,_e=Ie*Ie+de*de;_e?(we=he.r+Se.r,we*=we,Oe=ie.r+Se.r,we>(Oe*=Oe)?(ye=(_e+Oe-we)/(2*_e),Me=Math.sqrt(Math.max(0,Oe/_e-ye*ye)),Se.x=ie.x-ye*Ie-Me*de,Se.y=ie.y-ye*de+Me*Ie):(ye=(_e+we-Oe)/(2*_e),Me=Math.sqrt(Math.max(0,we/_e-ye*ye)),Se.x=he.x+ye*Ie-Me*de,Se.y=he.y+ye*de+Me*Ie)):(Se.x=he.x+Se.r,Se.y=he.y)}function y(ie,he){var Se=ie.r+he.r-1e-6,ye=he.x-ie.x,we=he.y-ie.y;return Se>0&&Se*Se>ye*ye+we*we}function m(ie){var he=ie._,Se=ie.next._,ye=he.r+Se.r,we=(he.x*Se.r+Se.x*he.r)/ye,Me=(he.y*Se.r+Se.y*he.r)/ye;return we*we+Me*Me}function _(ie){this._=ie,this.next=null,this.previous=null}function d(ie){if(!(we=ie.length))return 0;var he,Se,ye,we,Me,Oe,Ie,de,_e,Ae,Pe;if((he=ie[0]).x=0,he.y=0,!(we>1))return he.r;if(Se=ie[1],he.x=-Se.r,Se.x=he.r,Se.y=0,!(we>2))return he.r+Se.r;g(Se,he,ye=ie[2]),he=new _(he),Se=new _(Se),ye=new _(ye),he.next=ye.previous=Se,Se.next=he.previous=ye,ye.next=Se.previous=he;e:for(Ie=3;Ie<we;++Ie){g(he._,Se._,ye=ie[Ie]),ye=new _(ye),de=Se.next,_e=he.previous,Ae=Se._.r,Pe=he._.r;do if(Ae<=Pe){if(y(de._,ye._)){Se=de,he.next=Se,Se.previous=he,--Ie;continue e}Ae+=de._.r,de=de.next}else{if(y(_e._,ye._)){(he=_e).next=Se,Se.previous=he,--Ie;continue e}Pe+=_e._.r,_e=_e.previous}while(de!==_e.next);for(ye.previous=he,ye.next=Se,he.next=Se.previous=Se=ye,Me=m(he);(ye=ye.next)!==Se;)(Oe=m(ye))<Me&&(he=ye,Me=Oe);Se=he.next}for(he=[Se._],ye=Se;(ye=ye.next)!==Se;)he.push(ye._);for(ye=a(he),Ie=0;Ie<we;++Ie)(he=ie[Ie]).x-=ye.x,he.y-=ye.y;return ye.r}function S(ie){return d(ie),ie}function w(ie){if(typeof ie!="function")throw new Error;return ie}function E(){return 0}function C(ie){return function(){return ie}}function O(ie){return Math.sqrt(ie.value)}function P(){var ie=null,he=1,Se=1,ye=E;function we(Me){return Me.x=he/2,Me.y=Se/2,ie?Me.eachBefore(z(ie)).eachAfter(j(ye,.5)).eachBefore(I(1)):Me.eachBefore(z(O)).eachAfter(j(E,1)).eachAfter(j(ye,Me.r/Math.min(he,Se))).eachBefore(I(Math.min(he,Se)/(2*Me.r))),Me}return we.radius=function(Me){return arguments.length?(ie=(Oe=Me)==null?null:w(Oe),we):ie;var Oe},we.size=function(Me){return arguments.length?(he=+Me[0],Se=+Me[1],we):[he,Se]},we.padding=function(Me){return arguments.length?(ye=typeof Me=="function"?Me:C(+Me),we):ye},we}function z(ie){return function(he){he.children||(he.r=Math.max(0,+ie(he)||0))}}function j(ie,he){return function(Se){if(ye=Se.children){var ye,we,Me,Oe=ye.length,Ie=ie(Se)*he||0;if(Ie)for(we=0;we<Oe;++we)ye[we].r+=Ie;if(Me=d(ye),Ie)for(we=0;we<Oe;++we)ye[we].r-=Ie;Se.r=Me+Ie}}}function I(ie){return function(he){var Se=he.parent;he.r*=ie,Se&&(he.x=Se.x+ie*he.x,he.y=Se.y+ie*he.y)}}function N(ie){ie.x0=Math.round(ie.x0),ie.y0=Math.round(ie.y0),ie.x1=Math.round(ie.x1),ie.y1=Math.round(ie.y1)}function W(ie,he,Se,ye,we){for(var Me,Oe=ie.children,Ie=-1,de=Oe.length,_e=ie.value&&(ye-he)/ie.value;++Ie<de;)(Me=Oe[Ie]).y0=Se,Me.y1=we,Me.x0=he,Me.x1=he+=Me.value*_e}function F(){var ie=1,he=1,Se=0,ye=!1;function we(Me){var Oe=Me.height+1;return Me.x0=Me.y0=Se,Me.x1=ie,Me.y1=he/Oe,Me.eachBefore(function(Ie,de){return function(_e){_e.children&&W(_e,_e.x0,Ie*(_e.depth+1)/de,_e.x1,Ie*(_e.depth+2)/de);var Ae=_e.x0,Pe=_e.y0,Ee=_e.x1-Se,Fe=_e.y1-Se;Ee<Ae&&(Ae=Ee=(Ae+Ee)/2),Fe<Pe&&(Pe=Fe=(Pe+Fe)/2),_e.x0=Ae,_e.y0=Pe,_e.x1=Ee,_e.y1=Fe}}(he,Oe)),ye&&Me.eachBefore(N),Me}return we.round=function(Me){return arguments.length?(ye=!!Me,we):ye},we.size=function(Me){return arguments.length?(ie=+Me[0],he=+Me[1],we):[ie,he]},we.padding=function(Me){return arguments.length?(Se=+Me,we):Se},we}var U="$",H={depth:-1},ne={};function $(ie){return ie.id}function K(ie){return ie.parentId}function Q(){var ie=$,he=K;function Se(ye){var we,Me,Oe,Ie,de,_e,Ae,Pe=ye.length,Ee=new Array(Pe),Fe={};for(Me=0;Me<Pe;++Me)we=ye[Me],de=Ee[Me]=new n(we),(_e=ie(we,Me,ye))!=null&&(_e+="")&&(Fe[Ae=U+(de.id=_e)]=Ae in Fe?ne:de);for(Me=0;Me<Pe;++Me)if(de=Ee[Me],(_e=he(ye[Me],Me,ye))!=null&&(_e+="")){if(!(Ie=Fe[U+_e]))throw new Error("missing: "+_e);if(Ie===ne)throw new Error("ambiguous: "+_e);Ie.children?Ie.children.push(de):Ie.children=[de],de.parent=Ie}else{if(Oe)throw new Error("multiple roots");Oe=de}if(!Oe)throw new Error("no root");if(Oe.parent=H,Oe.eachBefore(function(Ve){Ve.depth=Ve.parent.depth+1,--Pe}).eachBefore(i),Oe.parent=null,Pe>0)throw new Error("cycle");return Oe}return Se.id=function(ye){return arguments.length?(ie=w(ye),Se):ie},Se.parentId=function(ye){return arguments.length?(he=w(ye),Se):he},Se}function Z(ie,he){return ie.parent===he.parent?1:2}function X(ie){var he=ie.children;return he?he[0]:ie.t}function te(ie){var he=ie.children;return he?he[he.length-1]:ie.t}function ae(ie,he,Se){var ye=Se/(he.i-ie.i);he.c-=ye,he.s+=Se,ie.c+=ye,he.z+=Se,he.m+=Se}function se(ie,he,Se){return ie.a.parent===he.parent?ie.a:Se}function ce(ie,he){this._=ie,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=he}function fe(){var ie=Z,he=1,Se=1,ye=null;function we(de){var _e=function(nt){for(var ht,vt,pt,Qe,Ke,Mt=new ce(nt,0),Ot=[Mt];ht=Ot.pop();)if(pt=ht._.children)for(ht.children=new Array(Ke=pt.length),Qe=Ke-1;Qe>=0;--Qe)Ot.push(vt=ht.children[Qe]=new ce(pt[Qe],Qe)),vt.parent=ht;return(Mt.parent=new ce(null,0)).children=[Mt],Mt}(de);if(_e.eachAfter(Me),_e.parent.m=-_e.z,_e.eachBefore(Oe),ye)de.eachBefore(Ie);else{var Ae=de,Pe=de,Ee=de;de.eachBefore(function(nt){nt.x<Ae.x&&(Ae=nt),nt.x>Pe.x&&(Pe=nt),nt.depth>Ee.depth&&(Ee=nt)});var Fe=Ae===Pe?1:ie(Ae,Pe)/2,Ve=Fe-Ae.x,Ye=he/(Pe.x+Fe+Ve),tt=Se/(Ee.depth||1);de.eachBefore(function(nt){nt.x=(nt.x+Ve)*Ye,nt.y=nt.depth*tt})}return de}function Me(de){var _e=de.children,Ae=de.parent.children,Pe=de.i?Ae[de.i-1]:null;if(_e){(function(Fe){for(var Ve,Ye=0,tt=0,nt=Fe.children,ht=nt.length;--ht>=0;)(Ve=nt[ht]).z+=Ye,Ve.m+=Ye,Ye+=Ve.s+(tt+=Ve.c)})(de);var Ee=(_e[0].z+_e[_e.length-1].z)/2;Pe?(de.z=Pe.z+ie(de._,Pe._),de.m=de.z-Ee):de.z=Ee}else Pe&&(de.z=Pe.z+ie(de._,Pe._));de.parent.A=function(Fe,Ve,Ye){if(Ve){for(var tt,nt=Fe,ht=Fe,vt=Ve,pt=nt.parent.children[0],Qe=nt.m,Ke=ht.m,Mt=vt.m,Ot=pt.m;vt=te(vt),nt=X(nt),vt&&nt;)pt=X(pt),(ht=te(ht)).a=Fe,(tt=vt.z+Mt-nt.z-Qe+ie(vt._,nt._))>0&&(ae(se(vt,Fe,Ye),Fe,tt),Qe+=tt,Ke+=tt),Mt+=vt.m,Qe+=nt.m,Ot+=pt.m,Ke+=ht.m;vt&&!te(ht)&&(ht.t=vt,ht.m+=Mt-Ke),nt&&!X(pt)&&(pt.t=nt,pt.m+=Qe-Ot,Ye=Fe)}return Ye}(de,Pe,de.parent.A||Ae[0])}function Oe(de){de._.x=de.z+de.parent.m,de.m+=de.parent.m}function Ie(de){de.x*=he,de.y=de.depth*Se}return we.separation=function(de){return arguments.length?(ie=de,we):ie},we.size=function(de){return arguments.length?(ye=!1,he=+de[0],Se=+de[1],we):ye?null:[he,Se]},we.nodeSize=function(de){return arguments.length?(ye=!0,he=+de[0],Se=+de[1],we):ye?[he,Se]:null},we}function pe(ie,he,Se,ye,we){for(var Me,Oe=ie.children,Ie=-1,de=Oe.length,_e=ie.value&&(we-Se)/ie.value;++Ie<de;)(Me=Oe[Ie]).x0=he,Me.x1=ye,Me.y0=Se,Me.y1=Se+=Me.value*_e}ce.prototype=Object.create(n.prototype);var ge=(1+Math.sqrt(5))/2;function me(ie,he,Se,ye,we,Me){for(var Oe,Ie,de,_e,Ae,Pe,Ee,Fe,Ve,Ye,tt,nt=[],ht=he.children,vt=0,pt=0,Qe=ht.length,Ke=he.value;vt<Qe;){de=we-Se,_e=Me-ye;do Ae=ht[pt++].value;while(!Ae&&pt<Qe);for(Pe=Ee=Ae,tt=Ae*Ae*(Ye=Math.max(_e/de,de/_e)/(Ke*ie)),Ve=Math.max(Ee/tt,tt/Pe);pt<Qe;++pt){if(Ae+=Ie=ht[pt].value,Ie<Pe&&(Pe=Ie),Ie>Ee&&(Ee=Ie),tt=Ae*Ae*Ye,(Fe=Math.max(Ee/tt,tt/Pe))>Ve){Ae-=Ie;break}Ve=Fe}nt.push(Oe={value:Ae,dice:de<_e,children:ht.slice(vt,pt)}),Oe.dice?W(Oe,Se,ye,we,Ke?ye+=_e*Ae/Ke:Me):pe(Oe,Se,ye,Ke?Se+=de*Ae/Ke:we,Me),Ke-=Ae,vt=pt}return nt}var be=function ie(he){function Se(ye,we,Me,Oe,Ie){me(he,ye,we,Me,Oe,Ie)}return Se.ratio=function(ye){return ie((ye=+ye)>1?ye:1)},Se}(ge);function ke(){var ie=be,he=!1,Se=1,ye=1,we=[0],Me=E,Oe=E,Ie=E,de=E,_e=E;function Ae(Ee){return Ee.x0=Ee.y0=0,Ee.x1=Se,Ee.y1=ye,Ee.eachBefore(Pe),we=[0],he&&Ee.eachBefore(N),Ee}function Pe(Ee){var Fe=we[Ee.depth],Ve=Ee.x0+Fe,Ye=Ee.y0+Fe,tt=Ee.x1-Fe,nt=Ee.y1-Fe;tt<Ve&&(Ve=tt=(Ve+tt)/2),nt<Ye&&(Ye=nt=(Ye+nt)/2),Ee.x0=Ve,Ee.y0=Ye,Ee.x1=tt,Ee.y1=nt,Ee.children&&(Fe=we[Ee.depth+1]=Me(Ee)/2,Ve+=_e(Ee)-Fe,Ye+=Oe(Ee)-Fe,(tt-=Ie(Ee)-Fe)<Ve&&(Ve=tt=(Ve+tt)/2),(nt-=de(Ee)-Fe)<Ye&&(Ye=nt=(Ye+nt)/2),ie(Ee,Ve,Ye,tt,nt))}return Ae.round=function(Ee){return arguments.length?(he=!!Ee,Ae):he},Ae.size=function(Ee){return arguments.length?(Se=+Ee[0],ye=+Ee[1],Ae):[Se,ye]},Ae.tile=function(Ee){return arguments.length?(ie=w(Ee),Ae):ie},Ae.padding=function(Ee){return arguments.length?Ae.paddingInner(Ee).paddingOuter(Ee):Ae.paddingInner()},Ae.paddingInner=function(Ee){return arguments.length?(Me=typeof Ee=="function"?Ee:C(+Ee),Ae):Me},Ae.paddingOuter=function(Ee){return arguments.length?Ae.paddingTop(Ee).paddingRight(Ee).paddingBottom(Ee).paddingLeft(Ee):Ae.paddingTop()},Ae.paddingTop=function(Ee){return arguments.length?(Oe=typeof Ee=="function"?Ee:C(+Ee),Ae):Oe},Ae.paddingRight=function(Ee){return arguments.length?(Ie=typeof Ee=="function"?Ee:C(+Ee),Ae):Ie},Ae.paddingBottom=function(Ee){return arguments.length?(de=typeof Ee=="function"?Ee:C(+Ee),Ae):de},Ae.paddingLeft=function(Ee){return arguments.length?(_e=typeof Ee=="function"?Ee:C(+Ee),Ae):_e},Ae}function ze(ie,he,Se,ye,we){var Me,Oe,Ie=ie.children,de=Ie.length,_e=new Array(de+1);for(_e[0]=Oe=Me=0;Me<de;++Me)_e[Me+1]=Oe+=Ie[Me].value;(function Ae(Pe,Ee,Fe,Ve,Ye,tt,nt){if(Pe>=Ee-1){var ht=Ie[Pe];return ht.x0=Ve,ht.y0=Ye,ht.x1=tt,void(ht.y1=nt)}for(var vt=_e[Pe],pt=Fe/2+vt,Qe=Pe+1,Ke=Ee-1;Qe<Ke;){var Mt=Qe+Ke>>>1;_e[Mt]<pt?Qe=Mt+1:Ke=Mt}pt-_e[Qe-1]<_e[Qe]-pt&&Pe+1<Qe&&--Qe;var Ot=_e[Qe]-vt,Pt=Fe-Ot;if(tt-Ve>nt-Ye){var St=(Ve*Pt+tt*Ot)/Fe;Ae(Pe,Qe,Ot,Ve,Ye,St,nt),Ae(Qe,Ee,Pt,St,Ye,tt,nt)}else{var He=(Ye*Pt+nt*Ot)/Fe;Ae(Pe,Qe,Ot,Ve,Ye,tt,He),Ae(Qe,Ee,Pt,Ve,He,tt,nt)}})(0,de,ie.value,he,Se,ye,we)}function ve(ie,he,Se,ye,we){(1&ie.depth?pe:W)(ie,he,Se,ye,we)}var oe=function ie(he){function Se(ye,we,Me,Oe,Ie){if((de=ye._squarify)&&de.ratio===he)for(var de,_e,Ae,Pe,Ee,Fe=-1,Ve=de.length,Ye=ye.value;++Fe<Ve;){for(Ae=(_e=de[Fe]).children,Pe=_e.value=0,Ee=Ae.length;Pe<Ee;++Pe)_e.value+=Ae[Pe].value;_e.dice?W(_e,we,Me,Oe,Me+=(Ie-Me)*_e.value/Ye):pe(_e,we,Me,we+=(Oe-we)*_e.value/Ye,Ie),Ye-=_e.value}else ye._squarify=de=me(he,ye,we,Me,Oe,Ie),de.ratio=he}return Se.ratio=function(ye){return ie((ye=+ye)>1?ye:1)},Se}(ge)},10132:function(ee,R,e){e.d(R,{ak:function(){return h}});var M=Math.PI,k=2*M,s=1e-6,T=k-s;function b(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function f(){return new b}b.prototype=f.prototype={constructor:b,moveTo:function(c,x){this._+="M"+(this._x0=this._x1=+c)+","+(this._y0=this._y1=+x)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(c,x){this._+="L"+(this._x1=+c)+","+(this._y1=+x)},quadraticCurveTo:function(c,x,p,v){this._+="Q"+ +c+","+ +x+","+(this._x1=+p)+","+(this._y1=+v)},bezierCurveTo:function(c,x,p,v,g,y){this._+="C"+ +c+","+ +x+","+ +p+","+ +v+","+(this._x1=+g)+","+(this._y1=+y)},arcTo:function(c,x,p,v,g){c=+c,x=+x,p=+p,v=+v,g=+g;var y=this._x1,m=this._y1,_=p-c,d=v-x,S=y-c,w=m-x,E=S*S+w*w;if(g<0)throw new Error("negative radius: "+g);if(this._x1===null)this._+="M"+(this._x1=c)+","+(this._y1=x);else if(E>s)if(Math.abs(w*_-d*S)>s&&g){var C=p-y,O=v-m,P=_*_+d*d,z=C*C+O*O,j=Math.sqrt(P),I=Math.sqrt(E),N=g*Math.tan((M-Math.acos((P+E-z)/(2*j*I)))/2),W=N/I,F=N/j;Math.abs(W-1)>s&&(this._+="L"+(c+W*S)+","+(x+W*w)),this._+="A"+g+","+g+",0,0,"+ +(w*C>S*O)+","+(this._x1=c+F*_)+","+(this._y1=x+F*d)}else this._+="L"+(this._x1=c)+","+(this._y1=x)},arc:function(c,x,p,v,g,y){c=+c,x=+x,y=!!y;var m=(p=+p)*Math.cos(v),_=p*Math.sin(v),d=c+m,S=x+_,w=1^y,E=y?v-g:g-v;if(p<0)throw new Error("negative radius: "+p);this._x1===null?this._+="M"+d+","+S:(Math.abs(this._x1-d)>s||Math.abs(this._y1-S)>s)&&(this._+="L"+d+","+S),p&&(E<0&&(E=E%k+k),E>T?this._+="A"+p+","+p+",0,1,"+w+","+(c-m)+","+(x-_)+"A"+p+","+p+",0,1,"+w+","+(this._x1=d)+","+(this._y1=S):E>s&&(this._+="A"+p+","+p+",0,"+ +(E>=M)+","+w+","+(this._x1=c+p*Math.cos(g))+","+(this._y1=x+p*Math.sin(g))))},rect:function(c,x,p,v){this._+="M"+(this._x0=this._x1=+c)+","+(this._y0=this._y1=+x)+"h"+ +p+"v"+ +v+"h"+-p+"Z"},toString:function(){return this._}};var o=f,t=Array.prototype.slice;function i(c){return function(){return c}}function n(c){return c[0]}function r(c){return c[1]}function a(c){return c.source}function l(c){return c.target}function u(c,x,p,v,g){c.moveTo(x,p),c.bezierCurveTo(x=(x+v)/2,p,x,g,v,g)}function h(){return function(c){var x=a,p=l,v=n,g=r,y=null;function m(){var _,d=t.call(arguments),S=x.apply(this,d),w=p.apply(this,d);if(y||(y=_=o()),c(y,+v.apply(this,(d[0]=S,d)),+g.apply(this,d),+v.apply(this,(d[0]=w,d)),+g.apply(this,d)),_)return y=null,_+""||null}return m.source=function(_){return arguments.length?(x=_,m):x},m.target=function(_){return arguments.length?(p=_,m):p},m.x=function(_){return arguments.length?(v=typeof _=="function"?_:i(+_),m):v},m.y=function(_){return arguments.length?(g=typeof _=="function"?_:i(+_),m):g},m.context=function(_){return arguments.length?(y=_??null,m):y},m}(u)}},94336:function(ee,R,e){e.d(R,{Yn:function(){return a},m_:function(){return n},E9:function(){return l}});var M=e(8208),k=e(58931),s=e(46192),T=e(68936),b=e(32171),f=e(53528);function o(Qe){if(0<=Qe.y&&Qe.y<100){var Ke=new Date(-1,Qe.m,Qe.d,Qe.H,Qe.M,Qe.S,Qe.L);return Ke.setFullYear(Qe.y),Ke}return new Date(Qe.y,Qe.m,Qe.d,Qe.H,Qe.M,Qe.S,Qe.L)}function t(Qe){if(0<=Qe.y&&Qe.y<100){var Ke=new Date(Date.UTC(-1,Qe.m,Qe.d,Qe.H,Qe.M,Qe.S,Qe.L));return Ke.setUTCFullYear(Qe.y),Ke}return new Date(Date.UTC(Qe.y,Qe.m,Qe.d,Qe.H,Qe.M,Qe.S,Qe.L))}function i(Qe,Ke,Mt){return{y:Qe,m:Ke,d:Mt,H:0,M:0,S:0,L:0}}function n(Qe){var Ke=Qe.dateTime,Mt=Qe.date,Ot=Qe.time,Pt=Qe.periods,St=Qe.days,He=Qe.shortDays,We=Qe.months,Be=Qe.shortMonths,Ge=g(Pt),ot=y(Pt),it=g(St),dt=y(St),gt=g(He),je=y(He),Re=g(We),rt=y(We),ct=g(Be),ut=y(Be),et={a:function(zt){return He[zt.getDay()]},A:function(zt){return St[zt.getDay()]},b:function(zt){return Be[zt.getMonth()]},B:function(zt){return We[zt.getMonth()]},c:null,d:Q,e:Q,f:se,H:Z,I:X,j:te,L:ae,m:ce,M:fe,p:function(zt){return Pt[+(zt.getHours()>=12)]},q:function(zt){return 1+~~(zt.getMonth()/3)},Q:vt,s:pt,S:pe,u:ge,U:me,V:be,w:ke,W:ze,x:null,X:null,y:ve,Y:oe,Z:ie,"%":ht},xt={a:function(zt){return He[zt.getUTCDay()]},A:function(zt){return St[zt.getUTCDay()]},b:function(zt){return Be[zt.getUTCMonth()]},B:function(zt){return We[zt.getUTCMonth()]},c:null,d:he,e:he,f:Oe,H:Se,I:ye,j:we,L:Me,m:Ie,M:de,p:function(zt){return Pt[+(zt.getUTCHours()>=12)]},q:function(zt){return 1+~~(zt.getUTCMonth()/3)},Q:vt,s:pt,S:_e,u:Ae,U:Pe,V:Ee,w:Fe,W:Ve,x:null,X:null,y:Ye,Y:tt,Z:nt,"%":ht},mt={a:function(zt,Ut,en){var an=gt.exec(Ut.slice(en));return an?(zt.w=je[an[0].toLowerCase()],en+an[0].length):-1},A:function(zt,Ut,en){var an=it.exec(Ut.slice(en));return an?(zt.w=dt[an[0].toLowerCase()],en+an[0].length):-1},b:function(zt,Ut,en){var an=ct.exec(Ut.slice(en));return an?(zt.m=ut[an[0].toLowerCase()],en+an[0].length):-1},B:function(zt,Ut,en){var an=Re.exec(Ut.slice(en));return an?(zt.m=rt[an[0].toLowerCase()],en+an[0].length):-1},c:function(zt,Ut,en){return bt(zt,Ke,Ut,en)},d:j,e:j,f:H,H:N,I:N,j:I,L:U,m:z,M:W,p:function(zt,Ut,en){var an=Ge.exec(Ut.slice(en));return an?(zt.p=ot[an[0].toLowerCase()],en+an[0].length):-1},q:P,Q:$,s:K,S:F,u:_,U:d,V:S,w:m,W:w,x:function(zt,Ut,en){return bt(zt,Mt,Ut,en)},X:function(zt,Ut,en){return bt(zt,Ot,Ut,en)},y:C,Y:E,Z:O,"%":ne};function Tt(zt,Ut){return function(en){var an,rn,qt,Kt=[],xn=-1,on=0,Xt=zt.length;for(en instanceof Date||(en=new Date(+en));++xn<Xt;)zt.charCodeAt(xn)===37&&(Kt.push(zt.slice(on,xn)),(rn=u[an=zt.charAt(++xn)])!=null?an=zt.charAt(++xn):rn=an==="e"?" ":"0",(qt=Ut[an])&&(an=qt(en,rn)),Kt.push(an),on=xn+1);return Kt.push(zt.slice(on,xn)),Kt.join("")}}function yt(zt,Ut){return function(en){var an,rn,qt=i(1900,void 0,1);if(bt(qt,zt,en+="",0)!=en.length)return null;if("Q"in qt)return new Date(qt.Q);if("s"in qt)return new Date(1e3*qt.s+("L"in qt?qt.L:0));if(Ut&&!("Z"in qt)&&(qt.Z=0),"p"in qt&&(qt.H=qt.H%12+12*qt.p),qt.m===void 0&&(qt.m="q"in qt?qt.q:0),"V"in qt){if(qt.V<1||qt.V>53)return null;"w"in qt||(qt.w=1),"Z"in qt?(rn=(an=t(i(qt.y,0,1))).getUTCDay(),an=rn>4||rn===0?M.ot.ceil(an):(0,M.ot)(an),an=k.c.offset(an,7*(qt.V-1)),qt.y=an.getUTCFullYear(),qt.m=an.getUTCMonth(),qt.d=an.getUTCDate()+(qt.w+6)%7):(rn=(an=o(i(qt.y,0,1))).getDay(),an=rn>4||rn===0?s.qT.ceil(an):(0,s.qT)(an),an=T.c.offset(an,7*(qt.V-1)),qt.y=an.getFullYear(),qt.m=an.getMonth(),qt.d=an.getDate()+(qt.w+6)%7)}else("W"in qt||"U"in qt)&&("w"in qt||(qt.w="u"in qt?qt.u%7:"W"in qt?1:0),rn="Z"in qt?t(i(qt.y,0,1)).getUTCDay():o(i(qt.y,0,1)).getDay(),qt.m=0,qt.d="W"in qt?(qt.w+6)%7+7*qt.W-(rn+5)%7:qt.w+7*qt.U-(rn+6)%7);return"Z"in qt?(qt.H+=qt.Z/100|0,qt.M+=qt.Z%100,t(qt)):o(qt)}}function bt(zt,Ut,en,an){for(var rn,qt,Kt=0,xn=Ut.length,on=en.length;Kt<xn;){if(an>=on)return-1;if((rn=Ut.charCodeAt(Kt++))===37){if(rn=Ut.charAt(Kt++),!(qt=mt[rn in u?Ut.charAt(Kt++):rn])||(an=qt(zt,en,an))<0)return-1}else if(rn!=en.charCodeAt(an++))return-1}return an}return et.x=Tt(Mt,et),et.X=Tt(Ot,et),et.c=Tt(Ke,et),xt.x=Tt(Mt,xt),xt.X=Tt(Ot,xt),xt.c=Tt(Ke,xt),{format:function(zt){var Ut=Tt(zt+="",et);return Ut.toString=function(){return zt},Ut},parse:function(zt){var Ut=yt(zt+="",!1);return Ut.toString=function(){return zt},Ut},utcFormat:function(zt){var Ut=Tt(zt+="",xt);return Ut.toString=function(){return zt},Ut},utcParse:function(zt){var Ut=yt(zt+="",!0);return Ut.toString=function(){return zt},Ut}}}var r,a,l,u={"-":"",_:" ",0:"0"},h=/^\s*\d+/,c=/^%/,x=/[\\^$*+?|[\]().{}]/g;function p(Qe,Ke,Mt){var Ot=Qe<0?"-":"",Pt=(Ot?-Qe:Qe)+"",St=Pt.length;return Ot+(St<Mt?new Array(Mt-St+1).join(Ke)+Pt:Pt)}function v(Qe){return Qe.replace(x,"\\$&")}function g(Qe){return new RegExp("^(?:"+Qe.map(v).join("|")+")","i")}function y(Qe){for(var Ke={},Mt=-1,Ot=Qe.length;++Mt<Ot;)Ke[Qe[Mt].toLowerCase()]=Mt;return Ke}function m(Qe,Ke,Mt){var Ot=h.exec(Ke.slice(Mt,Mt+1));return Ot?(Qe.w=+Ot[0],Mt+Ot[0].length):-1}function _(Qe,Ke,Mt){var Ot=h.exec(Ke.slice(Mt,Mt+1));return Ot?(Qe.u=+Ot[0],Mt+Ot[0].length):-1}function d(Qe,Ke,Mt){var Ot=h.exec(Ke.slice(Mt,Mt+2));return Ot?(Qe.U=+Ot[0],Mt+Ot[0].length):-1}function S(Qe,Ke,Mt){var Ot=h.exec(Ke.slice(Mt,Mt+2));return Ot?(Qe.V=+Ot[0],Mt+Ot[0].length):-1}function w(Qe,Ke,Mt){var Ot=h.exec(Ke.slice(Mt,Mt+2));return Ot?(Qe.W=+Ot[0],Mt+Ot[0].length):-1}function E(Qe,Ke,Mt){var Ot=h.exec(Ke.slice(Mt,Mt+4));return Ot?(Qe.y=+Ot[0],Mt+Ot[0].length):-1}function C(Qe,Ke,Mt){var Ot=h.exec(Ke.slice(Mt,Mt+2));return Ot?(Qe.y=+Ot[0]+(+Ot[0]>68?1900:2e3),Mt+Ot[0].length):-1}function O(Qe,Ke,Mt){var Ot=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(Ke.slice(Mt,Mt+6));return Ot?(Qe.Z=Ot[1]?0:-(Ot[2]+(Ot[3]||"00")),Mt+Ot[0].length):-1}function P(Qe,Ke,Mt){var Ot=h.exec(Ke.slice(Mt,Mt+1));return Ot?(Qe.q=3*Ot[0]-3,Mt+Ot[0].length):-1}function z(Qe,Ke,Mt){var Ot=h.exec(Ke.slice(Mt,Mt+2));return Ot?(Qe.m=Ot[0]-1,Mt+Ot[0].length):-1}function j(Qe,Ke,Mt){var Ot=h.exec(Ke.slice(Mt,Mt+2));return Ot?(Qe.d=+Ot[0],Mt+Ot[0].length):-1}function I(Qe,Ke,Mt){var Ot=h.exec(Ke.slice(Mt,Mt+3));return Ot?(Qe.m=0,Qe.d=+Ot[0],Mt+Ot[0].length):-1}function N(Qe,Ke,Mt){var Ot=h.exec(Ke.slice(Mt,Mt+2));return Ot?(Qe.H=+Ot[0],Mt+Ot[0].length):-1}function W(Qe,Ke,Mt){var Ot=h.exec(Ke.slice(Mt,Mt+2));return Ot?(Qe.M=+Ot[0],Mt+Ot[0].length):-1}function F(Qe,Ke,Mt){var Ot=h.exec(Ke.slice(Mt,Mt+2));return Ot?(Qe.S=+Ot[0],Mt+Ot[0].length):-1}function U(Qe,Ke,Mt){var Ot=h.exec(Ke.slice(Mt,Mt+3));return Ot?(Qe.L=+Ot[0],Mt+Ot[0].length):-1}function H(Qe,Ke,Mt){var Ot=h.exec(Ke.slice(Mt,Mt+6));return Ot?(Qe.L=Math.floor(Ot[0]/1e3),Mt+Ot[0].length):-1}function ne(Qe,Ke,Mt){var Ot=c.exec(Ke.slice(Mt,Mt+1));return Ot?Mt+Ot[0].length:-1}function $(Qe,Ke,Mt){var Ot=h.exec(Ke.slice(Mt));return Ot?(Qe.Q=+Ot[0],Mt+Ot[0].length):-1}function K(Qe,Ke,Mt){var Ot=h.exec(Ke.slice(Mt));return Ot?(Qe.s=+Ot[0],Mt+Ot[0].length):-1}function Q(Qe,Ke){return p(Qe.getDate(),Ke,2)}function Z(Qe,Ke){return p(Qe.getHours(),Ke,2)}function X(Qe,Ke){return p(Qe.getHours()%12||12,Ke,2)}function te(Qe,Ke){return p(1+T.c.count((0,b.c)(Qe),Qe),Ke,3)}function ae(Qe,Ke){return p(Qe.getMilliseconds(),Ke,3)}function se(Qe,Ke){return ae(Qe,Ke)+"000"}function ce(Qe,Ke){return p(Qe.getMonth()+1,Ke,2)}function fe(Qe,Ke){return p(Qe.getMinutes(),Ke,2)}function pe(Qe,Ke){return p(Qe.getSeconds(),Ke,2)}function ge(Qe){var Ke=Qe.getDay();return Ke===0?7:Ke}function me(Qe,Ke){return p(s.uU.count((0,b.c)(Qe)-1,Qe),Ke,2)}function be(Qe,Ke){var Mt=Qe.getDay();return Qe=Mt>=4||Mt===0?(0,s.kD)(Qe):s.kD.ceil(Qe),p(s.kD.count((0,b.c)(Qe),Qe)+((0,b.c)(Qe).getDay()===4),Ke,2)}function ke(Qe){return Qe.getDay()}function ze(Qe,Ke){return p(s.qT.count((0,b.c)(Qe)-1,Qe),Ke,2)}function ve(Qe,Ke){return p(Qe.getFullYear()%100,Ke,2)}function oe(Qe,Ke){return p(Qe.getFullYear()%1e4,Ke,4)}function ie(Qe){var Ke=Qe.getTimezoneOffset();return(Ke>0?"-":(Ke*=-1,"+"))+p(Ke/60|0,"0",2)+p(Ke%60,"0",2)}function he(Qe,Ke){return p(Qe.getUTCDate(),Ke,2)}function Se(Qe,Ke){return p(Qe.getUTCHours(),Ke,2)}function ye(Qe,Ke){return p(Qe.getUTCHours()%12||12,Ke,2)}function we(Qe,Ke){return p(1+k.c.count((0,f.c)(Qe),Qe),Ke,3)}function Me(Qe,Ke){return p(Qe.getUTCMilliseconds(),Ke,3)}function Oe(Qe,Ke){return Me(Qe,Ke)+"000"}function Ie(Qe,Ke){return p(Qe.getUTCMonth()+1,Ke,2)}function de(Qe,Ke){return p(Qe.getUTCMinutes(),Ke,2)}function _e(Qe,Ke){return p(Qe.getUTCSeconds(),Ke,2)}function Ae(Qe){var Ke=Qe.getUTCDay();return Ke===0?7:Ke}function Pe(Qe,Ke){return p(M.EV.count((0,f.c)(Qe)-1,Qe),Ke,2)}function Ee(Qe,Ke){var Mt=Qe.getUTCDay();return Qe=Mt>=4||Mt===0?(0,M.yA)(Qe):M.yA.ceil(Qe),p(M.yA.count((0,f.c)(Qe),Qe)+((0,f.c)(Qe).getUTCDay()===4),Ke,2)}function Fe(Qe){return Qe.getUTCDay()}function Ve(Qe,Ke){return p(M.ot.count((0,f.c)(Qe)-1,Qe),Ke,2)}function Ye(Qe,Ke){return p(Qe.getUTCFullYear()%100,Ke,2)}function tt(Qe,Ke){return p(Qe.getUTCFullYear()%1e4,Ke,4)}function nt(){return"+0000"}function ht(){return"%"}function vt(Qe){return+Qe}function pt(Qe){return Math.floor(+Qe/1e3)}r=n({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),a=r.format,r.parse,l=r.utcFormat,r.utcParse},68936:function(ee,R,e){e.d(R,{m:function(){return T}});var M=e(81628),k=e(69792),s=(0,M.c)(function(b){b.setHours(0,0,0,0)},function(b,f){b.setDate(b.getDate()+f)},function(b,f){return(f-b-(f.getTimezoneOffset()-b.getTimezoneOffset())*k.iy)/k.SK},function(b){return b.getDate()-1});R.c=s;var T=s.range},69792:function(ee,R,e){e.d(R,{KK:function(){return b},SK:function(){return T},cg:function(){return s},iy:function(){return k},yc:function(){return M}});var M=1e3,k=6e4,s=36e5,T=864e5,b=6048e5},73220:function(ee,R,e){e.r(R),e.d(R,{timeDay:function(){return h.c},timeDays:function(){return h.m},timeFriday:function(){return c.iB},timeFridays:function(){return c.sJ},timeHour:function(){return l},timeHours:function(){return u},timeInterval:function(){return M.c},timeMillisecond:function(){return s},timeMilliseconds:function(){return T},timeMinute:function(){return n},timeMinutes:function(){return r},timeMonday:function(){return c.qT},timeMondays:function(){return c.QP},timeMonth:function(){return p},timeMonths:function(){return v},timeSaturday:function(){return c.Wc},timeSaturdays:function(){return c.aI},timeSecond:function(){return o},timeSeconds:function(){return t},timeSunday:function(){return c.uU},timeSundays:function(){return c.Ab},timeThursday:function(){return c.kD},timeThursdays:function(){return c.eC},timeTuesday:function(){return c.Mf},timeTuesdays:function(){return c.Oc},timeWednesday:function(){return c.eg},timeWednesdays:function(){return c.sn},timeWeek:function(){return c.uU},timeWeeks:function(){return c.Ab},timeYear:function(){return g.c},timeYears:function(){return g.Q},utcDay:function(){return E.c},utcDays:function(){return E.o},utcFriday:function(){return C.od},utcFridays:function(){return C.iG},utcHour:function(){return S},utcHours:function(){return w},utcMillisecond:function(){return s},utcMilliseconds:function(){return T},utcMinute:function(){return m},utcMinutes:function(){return _},utcMonday:function(){return C.ot},utcMondays:function(){return C.iO},utcMonth:function(){return P},utcMonths:function(){return z},utcSaturday:function(){return C.Ad},utcSaturdays:function(){return C.K8},utcSecond:function(){return o},utcSeconds:function(){return t},utcSunday:function(){return C.EV},utcSundays:function(){return C.Wq},utcThursday:function(){return C.yA},utcThursdays:function(){return C.ob},utcTuesday:function(){return C.sG},utcTuesdays:function(){return C.kl},utcWednesday:function(){return C._6},utcWednesdays:function(){return C.W_},utcWeek:function(){return C.EV},utcWeeks:function(){return C.Wq},utcYear:function(){return j.c},utcYears:function(){return j.i}});var M=e(81628),k=(0,M.c)(function(){},function(I,N){I.setTime(+I+N)},function(I,N){return N-I});k.every=function(I){return I=Math.floor(I),isFinite(I)&&I>0?I>1?(0,M.c)(function(N){N.setTime(Math.floor(N/I)*I)},function(N,W){N.setTime(+N+W*I)},function(N,W){return(W-N)/I}):k:null};var s=k,T=k.range,b=e(69792),f=(0,M.c)(function(I){I.setTime(I-I.getMilliseconds())},function(I,N){I.setTime(+I+N*b.yc)},function(I,N){return(N-I)/b.yc},function(I){return I.getUTCSeconds()}),o=f,t=f.range,i=(0,M.c)(function(I){I.setTime(I-I.getMilliseconds()-I.getSeconds()*b.yc)},function(I,N){I.setTime(+I+N*b.iy)},function(I,N){return(N-I)/b.iy},function(I){return I.getMinutes()}),n=i,r=i.range,a=(0,M.c)(function(I){I.setTime(I-I.getMilliseconds()-I.getSeconds()*b.yc-I.getMinutes()*b.iy)},function(I,N){I.setTime(+I+N*b.cg)},function(I,N){return(N-I)/b.cg},function(I){return I.getHours()}),l=a,u=a.range,h=e(68936),c=e(46192),x=(0,M.c)(function(I){I.setDate(1),I.setHours(0,0,0,0)},function(I,N){I.setMonth(I.getMonth()+N)},function(I,N){return N.getMonth()-I.getMonth()+12*(N.getFullYear()-I.getFullYear())},function(I){return I.getMonth()}),p=x,v=x.range,g=e(32171),y=(0,M.c)(function(I){I.setUTCSeconds(0,0)},function(I,N){I.setTime(+I+N*b.iy)},function(I,N){return(N-I)/b.iy},function(I){return I.getUTCMinutes()}),m=y,_=y.range,d=(0,M.c)(function(I){I.setUTCMinutes(0,0,0)},function(I,N){I.setTime(+I+N*b.cg)},function(I,N){return(N-I)/b.cg},function(I){return I.getUTCHours()}),S=d,w=d.range,E=e(58931),C=e(8208),O=(0,M.c)(function(I){I.setUTCDate(1),I.setUTCHours(0,0,0,0)},function(I,N){I.setUTCMonth(I.getUTCMonth()+N)},function(I,N){return N.getUTCMonth()-I.getUTCMonth()+12*(N.getUTCFullYear()-I.getUTCFullYear())},function(I){return I.getUTCMonth()}),P=O,z=O.range,j=e(53528)},81628:function(ee,R,e){e.d(R,{c:function(){return s}});var M=new Date,k=new Date;function s(T,b,f,o){function t(i){return T(i=arguments.length===0?new Date:new Date(+i)),i}return t.floor=function(i){return T(i=new Date(+i)),i},t.ceil=function(i){return T(i=new Date(i-1)),b(i,1),T(i),i},t.round=function(i){var n=t(i),r=t.ceil(i);return i-n<r-i?n:r},t.offset=function(i,n){return b(i=new Date(+i),n==null?1:Math.floor(n)),i},t.range=function(i,n,r){var a,l=[];if(i=t.ceil(i),r=r==null?1:Math.floor(r),!(i<n&&r>0))return l;do l.push(a=new Date(+i)),b(i,r),T(i);while(a<i&&i<n);return l},t.filter=function(i){return s(function(n){if(n>=n)for(;T(n),!i(n);)n.setTime(n-1)},function(n,r){if(n>=n)if(r<0)for(;++r<=0;)for(;b(n,-1),!i(n););else for(;--r>=0;)for(;b(n,1),!i(n););})},f&&(t.count=function(i,n){return M.setTime(+i),k.setTime(+n),T(M),T(k),Math.floor(f(M,k))},t.every=function(i){return i=Math.floor(i),isFinite(i)&&i>0?i>1?t.filter(o?function(n){return o(n)%i==0}:function(n){return t.count(0,n)%i==0}):t:null}),t}},58931:function(ee,R,e){e.d(R,{o:function(){return T}});var M=e(81628),k=e(69792),s=(0,M.c)(function(b){b.setUTCHours(0,0,0,0)},function(b,f){b.setUTCDate(b.getUTCDate()+f)},function(b,f){return(f-b)/k.SK},function(b){return b.getUTCDate()-1});R.c=s;var T=s.range},8208:function(ee,R,e){e.d(R,{Ad:function(){return n},EV:function(){return T},K8:function(){return x},W_:function(){return u},Wq:function(){return r},_6:function(){return o},iG:function(){return c},iO:function(){return a},kl:function(){return l},ob:function(){return h},od:function(){return i},ot:function(){return b},sG:function(){return f},yA:function(){return t}});var M=e(81628),k=e(69792);function s(p){return(0,M.c)(function(v){v.setUTCDate(v.getUTCDate()-(v.getUTCDay()+7-p)%7),v.setUTCHours(0,0,0,0)},function(v,g){v.setUTCDate(v.getUTCDate()+7*g)},function(v,g){return(g-v)/k.KK})}var T=s(0),b=s(1),f=s(2),o=s(3),t=s(4),i=s(5),n=s(6),r=T.range,a=b.range,l=f.range,u=o.range,h=t.range,c=i.range,x=n.range},53528:function(ee,R,e){e.d(R,{i:function(){return s}});var M=e(81628),k=(0,M.c)(function(T){T.setUTCMonth(0,1),T.setUTCHours(0,0,0,0)},function(T,b){T.setUTCFullYear(T.getUTCFullYear()+b)},function(T,b){return b.getUTCFullYear()-T.getUTCFullYear()},function(T){return T.getUTCFullYear()});k.every=function(T){return isFinite(T=Math.floor(T))&&T>0?(0,M.c)(function(b){b.setUTCFullYear(Math.floor(b.getUTCFullYear()/T)*T),b.setUTCMonth(0,1),b.setUTCHours(0,0,0,0)},function(b,f){b.setUTCFullYear(b.getUTCFullYear()+f*T)}):null},R.c=k;var s=k.range},46192:function(ee,R,e){e.d(R,{Ab:function(){return r},Mf:function(){return f},Oc:function(){return l},QP:function(){return a},Wc:function(){return n},aI:function(){return x},eC:function(){return h},eg:function(){return o},iB:function(){return i},kD:function(){return t},qT:function(){return b},sJ:function(){return c},sn:function(){return u},uU:function(){return T}});var M=e(81628),k=e(69792);function s(p){return(0,M.c)(function(v){v.setDate(v.getDate()-(v.getDay()+7-p)%7),v.setHours(0,0,0,0)},function(v,g){v.setDate(v.getDate()+7*g)},function(v,g){return(g-v-(g.getTimezoneOffset()-v.getTimezoneOffset())*k.iy)/k.KK})}var T=s(0),b=s(1),f=s(2),o=s(3),t=s(4),i=s(5),n=s(6),r=T.range,a=b.range,l=f.range,u=o.range,h=t.range,c=i.range,x=n.range},32171:function(ee,R,e){e.d(R,{Q:function(){return s}});var M=e(81628),k=(0,M.c)(function(T){T.setMonth(0,1),T.setHours(0,0,0,0)},function(T,b){T.setFullYear(T.getFullYear()+b)},function(T,b){return b.getFullYear()-T.getFullYear()},function(T){return T.getFullYear()});k.every=function(T){return isFinite(T=Math.floor(T))&&T>0?(0,M.c)(function(b){b.setFullYear(Math.floor(b.getFullYear()/T)*T),b.setMonth(0,1),b.setHours(0,0,0,0)},function(b,f){b.setFullYear(b.getFullYear()+f*T)}):null},R.c=k;var s=k.range},64348:function(ee,R,e){var M=e(39640)(),k=e(53664),s=M&&k("%Object.defineProperty%",!0);if(s)try{s({},"a",{value:1})}catch{s=!1}var T=k("%SyntaxError%"),b=k("%TypeError%"),f=e(2304);ee.exports=function(o,t,i){if(!o||typeof o!="object"&&typeof o!="function")throw new b("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new b("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new b("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new b("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new b("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new b("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,r=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,l=arguments.length>6&&arguments[6],u=!!f&&f(o,t);if(s)s(o,t,{configurable:a===null&&u?u.configurable:!a,enumerable:n===null&&u?u.enumerable:!n,value:i,writable:r===null&&u?u.writable:!r});else{if(!l&&(n||r||a))throw new T("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");o[t]=i}}},81288:function(ee,R,e){var M=e(41820),k=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",s=Object.prototype.toString,T=Array.prototype.concat,b=Object.defineProperty,f=e(39640)(),o=b&&f,t=function(n,r,a,l){if(r in n){if(l===!0){if(n[r]===a)return}else if(typeof(u=l)!="function"||s.call(u)!=="[object Function]"||!l())return}var u;o?b(n,r,{configurable:!0,enumerable:!1,value:a,writable:!0}):n[r]=a},i=function(n,r){var a=arguments.length>2?arguments[2]:{},l=M(r);k&&(l=T.call(l,Object.getOwnPropertySymbols(r)));for(var u=0;u<l.length;u+=1)t(n,l[u],r[l[u]],a[l[u]])};i.supportsDescriptors=!!o,ee.exports=i},31264:function(ee){ee.exports=function(){for(var R=0;R<arguments.length;R++)if(arguments[R]!==void 0)return arguments[R]}},63768:function(ee){ee.exports=M;var R=(M.canvas=document.createElement("canvas")).getContext("2d"),e=k([32,126]);function M(s,T){Array.isArray(s)&&(s=s.join(", "));var b,f={},o=16,t=.05;T&&(T.length===2&&typeof T[0]=="number"?b=k(T):Array.isArray(T)?b=T:(T.o?b=k(T.o):T.pairs&&(b=T.pairs),T.fontSize&&(o=T.fontSize),T.threshold!=null&&(t=T.threshold))),b||(b=e),R.font=o+"px "+s;for(var i=0;i<b.length;i++){var n=b[i],r=R.measureText(n[0]).width+R.measureText(n[1]).width,a=R.measureText(n).width;if(Math.abs(r-a)>o*t){var l=(a-r)/o;f[n]=1e3*l}}return f}function k(s){for(var T=[],b=s[0];b<=s[1];b++)for(var f=String.fromCharCode(b),o=s[0];o<s[1];o++){var t=f+String.fromCharCode(o);T.push(t)}return T}M.createPairs=k,M.ascii=e},22235:function(ee,R,e){var M=e(49972),k=e(48816),s={M:"moveTo",C:"bezierCurveTo"};ee.exports=function(T,b){T.beginPath(),k(M(b)).forEach(function(f){var o=f[0],t=f.slice(1);T[s[o]].apply(T,t)}),T.closePath()}},72512:function(ee){ee.exports=function(R){switch(R){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},10352:function(ee){function R(e,M,k){var s=0|e[k];if(s<=0)return[];var T,b=new Array(s);if(k===e.length-1)for(T=0;T<s;++T)b[T]=M;else for(T=0;T<s;++T)b[T]=R(e,M,k+1);return b}ee.exports=function(e,M){switch(M===void 0&&(M=0),typeof e){case"number":if(e>0)return function(k,s){var T,b;for(T=new Array(k),b=0;b<k;++b)T[b]=s;return T}(0|e,M);break;case"object":if(typeof e.length=="number")return R(e,M,0)}return[]}},28912:function(ee){function R(S,w,E){E=E||2;var C,O,P,z,j,I,N,W=w&&w.length,F=W?w[0]*E:S.length,U=e(S,0,F,E,!0),H=[];if(!U||U.next===U.prev)return H;if(W&&(U=function($,K,Q,Z){var X,te,ae,se=[];for(X=0,te=K.length;X<te;X++)(ae=e($,K[X]*Z,X<te-1?K[X+1]*Z:$.length,Z,!1))===ae.next&&(ae.steiner=!0),se.push(r(ae));for(se.sort(o),X=0;X<se.length;X++)t(se[X],Q),Q=M(Q,Q.next);return Q}(S,w,U,E)),S.length>80*E){C=P=S[0],O=z=S[1];for(var ne=E;ne<F;ne+=E)(j=S[ne])<C&&(C=j),(I=S[ne+1])<O&&(O=I),j>P&&(P=j),I>z&&(z=I);N=(N=Math.max(P-C,z-O))!==0?1/N:0}return k(U,H,E,C,O,N),H}function e(S,w,E,C,O){var P,z;if(O===d(S,w,E,C)>0)for(P=w;P<E;P+=C)z=y(P,S[P],S[P+1],z);else for(P=E-C;P>=w;P-=C)z=y(P,S[P],S[P+1],z);return z&&h(z,z.next)&&(m(z),z=z.next),z}function M(S,w){if(!S)return S;w||(w=S);var E,C=S;do if(E=!1,C.steiner||!h(C,C.next)&&u(C.prev,C,C.next)!==0)C=C.next;else{if(m(C),(C=w=C.prev)===C.next)break;E=!0}while(E||C!==w);return w}function k(S,w,E,C,O,P,z){if(S){!z&&P&&function(W,F,U,H){var ne=W;do ne.z===null&&(ne.z=n(ne.x,ne.y,F,U,H)),ne.prevZ=ne.prev,ne.nextZ=ne.next,ne=ne.next;while(ne!==W);ne.prevZ.nextZ=null,ne.prevZ=null,function($){var K,Q,Z,X,te,ae,se,ce,fe=1;do{for(Q=$,$=null,te=null,ae=0;Q;){for(ae++,Z=Q,se=0,K=0;K<fe&&(se++,Z=Z.nextZ);K++);for(ce=fe;se>0||ce>0&&Z;)se!==0&&(ce===0||!Z||Q.z<=Z.z)?(X=Q,Q=Q.nextZ,se--):(X=Z,Z=Z.nextZ,ce--),te?te.nextZ=X:$=X,X.prevZ=te,te=X;Q=Z}te.nextZ=null,fe*=2}while(ae>1)}(ne)}(S,C,O,P);for(var j,I,N=S;S.prev!==S.next;)if(j=S.prev,I=S.next,P?T(S,C,O,P):s(S))w.push(j.i/E),w.push(S.i/E),w.push(I.i/E),m(S),S=I.next,N=I.next;else if((S=I)===N){z?z===1?k(S=b(M(S),w,E),w,E,C,O,P,2):z===2&&f(S,w,E,C,O,P):k(M(S),w,E,C,O,P,1);break}}}function s(S){var w=S.prev,E=S,C=S.next;if(u(w,E,C)>=0)return!1;for(var O=S.next.next;O!==S.prev;){if(a(w.x,w.y,E.x,E.y,C.x,C.y,O.x,O.y)&&u(O.prev,O,O.next)>=0)return!1;O=O.next}return!0}function T(S,w,E,C){var O=S.prev,P=S,z=S.next;if(u(O,P,z)>=0)return!1;for(var j=O.x<P.x?O.x<z.x?O.x:z.x:P.x<z.x?P.x:z.x,I=O.y<P.y?O.y<z.y?O.y:z.y:P.y<z.y?P.y:z.y,N=O.x>P.x?O.x>z.x?O.x:z.x:P.x>z.x?P.x:z.x,W=O.y>P.y?O.y>z.y?O.y:z.y:P.y>z.y?P.y:z.y,F=n(j,I,w,E,C),U=n(N,W,w,E,C),H=S.prevZ,ne=S.nextZ;H&&H.z>=F&&ne&&ne.z<=U;){if(H!==S.prev&&H!==S.next&&a(O.x,O.y,P.x,P.y,z.x,z.y,H.x,H.y)&&u(H.prev,H,H.next)>=0||(H=H.prevZ,ne!==S.prev&&ne!==S.next&&a(O.x,O.y,P.x,P.y,z.x,z.y,ne.x,ne.y)&&u(ne.prev,ne,ne.next)>=0))return!1;ne=ne.nextZ}for(;H&&H.z>=F;){if(H!==S.prev&&H!==S.next&&a(O.x,O.y,P.x,P.y,z.x,z.y,H.x,H.y)&&u(H.prev,H,H.next)>=0)return!1;H=H.prevZ}for(;ne&&ne.z<=U;){if(ne!==S.prev&&ne!==S.next&&a(O.x,O.y,P.x,P.y,z.x,z.y,ne.x,ne.y)&&u(ne.prev,ne,ne.next)>=0)return!1;ne=ne.nextZ}return!0}function b(S,w,E){var C=S;do{var O=C.prev,P=C.next.next;!h(O,P)&&c(O,C,C.next,P)&&v(O,P)&&v(P,O)&&(w.push(O.i/E),w.push(C.i/E),w.push(P.i/E),m(C),m(C.next),C=S=P),C=C.next}while(C!==S);return M(C)}function f(S,w,E,C,O,P){var z=S;do{for(var j=z.next.next;j!==z.prev;){if(z.i!==j.i&&l(z,j)){var I=g(z,j);return z=M(z,z.next),I=M(I,I.next),k(z,w,E,C,O,P),void k(I,w,E,C,O,P)}j=j.next}z=z.next}while(z!==S)}function o(S,w){return S.x-w.x}function t(S,w){if(w=function(C,O){var P,z=O,j=C.x,I=C.y,N=-1/0;do{if(I<=z.y&&I>=z.next.y&&z.next.y!==z.y){var W=z.x+(I-z.y)*(z.next.x-z.x)/(z.next.y-z.y);if(W<=j&&W>N){if(N=W,W===j){if(I===z.y)return z;if(I===z.next.y)return z.next}P=z.x<z.next.x?z:z.next}}z=z.next}while(z!==O);if(!P)return null;if(j===N)return P;var F,U=P,H=P.x,ne=P.y,$=1/0;z=P;do j>=z.x&&z.x>=H&&j!==z.x&&a(I<ne?j:N,I,H,ne,I<ne?N:j,I,z.x,z.y)&&(F=Math.abs(I-z.y)/(j-z.x),v(z,C)&&(F<$||F===$&&(z.x>P.x||z.x===P.x&&i(P,z)))&&(P=z,$=F)),z=z.next;while(z!==U);return P}(S,w),w){var E=g(w,S);M(w,w.next),M(E,E.next)}}function i(S,w){return u(S.prev,S,w.prev)<0&&u(w.next,S,S.next)<0}function n(S,w,E,C,O){return(S=1431655765&((S=858993459&((S=252645135&((S=16711935&((S=32767*(S-E)*O)|S<<8))|S<<4))|S<<2))|S<<1))|(w=1431655765&((w=858993459&((w=252645135&((w=16711935&((w=32767*(w-C)*O)|w<<8))|w<<4))|w<<2))|w<<1))<<1}function r(S){var w=S,E=S;do(w.x<E.x||w.x===E.x&&w.y<E.y)&&(E=w),w=w.next;while(w!==S);return E}function a(S,w,E,C,O,P,z,j){return(O-z)*(w-j)-(S-z)*(P-j)>=0&&(S-z)*(C-j)-(E-z)*(w-j)>=0&&(E-z)*(P-j)-(O-z)*(C-j)>=0}function l(S,w){return S.next.i!==w.i&&S.prev.i!==w.i&&!function(E,C){var O=E;do{if(O.i!==E.i&&O.next.i!==E.i&&O.i!==C.i&&O.next.i!==C.i&&c(O,O.next,E,C))return!0;O=O.next}while(O!==E);return!1}(S,w)&&(v(S,w)&&v(w,S)&&function(E,C){var O=E,P=!1,z=(E.x+C.x)/2,j=(E.y+C.y)/2;do O.y>j!=O.next.y>j&&O.next.y!==O.y&&z<(O.next.x-O.x)*(j-O.y)/(O.next.y-O.y)+O.x&&(P=!P),O=O.next;while(O!==E);return P}(S,w)&&(u(S.prev,S,w.prev)||u(S,w.prev,w))||h(S,w)&&u(S.prev,S,S.next)>0&&u(w.prev,w,w.next)>0)}function u(S,w,E){return(w.y-S.y)*(E.x-w.x)-(w.x-S.x)*(E.y-w.y)}function h(S,w){return S.x===w.x&&S.y===w.y}function c(S,w,E,C){var O=p(u(S,w,E)),P=p(u(S,w,C)),z=p(u(E,C,S)),j=p(u(E,C,w));return O!==P&&z!==j||!(O!==0||!x(S,E,w))||!(P!==0||!x(S,C,w))||!(z!==0||!x(E,S,C))||!(j!==0||!x(E,w,C))}function x(S,w,E){return w.x<=Math.max(S.x,E.x)&&w.x>=Math.min(S.x,E.x)&&w.y<=Math.max(S.y,E.y)&&w.y>=Math.min(S.y,E.y)}function p(S){return S>0?1:S<0?-1:0}function v(S,w){return u(S.prev,S,S.next)<0?u(S,w,S.next)>=0&&u(S,S.prev,w)>=0:u(S,w,S.prev)<0||u(S,S.next,w)<0}function g(S,w){var E=new _(S.i,S.x,S.y),C=new _(w.i,w.x,w.y),O=S.next,P=w.prev;return S.next=w,w.prev=S,E.next=O,O.prev=E,C.next=E,E.prev=C,P.next=C,C.prev=P,C}function y(S,w,E,C){var O=new _(S,w,E);return C?(O.next=C.next,O.prev=C,C.next.prev=O,C.next=O):(O.prev=O,O.next=O),O}function m(S){S.next.prev=S.prev,S.prev.next=S.next,S.prevZ&&(S.prevZ.nextZ=S.nextZ),S.nextZ&&(S.nextZ.prevZ=S.prevZ)}function _(S,w,E){this.i=S,this.x=w,this.y=E,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function d(S,w,E,C){for(var O=0,P=w,z=E-C;P<E;P+=C)O+=(S[z]-S[P])*(S[P+1]+S[z+1]),z=P;return O}ee.exports=R,ee.exports.default=R,R.deviation=function(S,w,E,C){var O=w&&w.length,P=O?w[0]*E:S.length,z=Math.abs(d(S,0,P,E));if(O)for(var j=0,I=w.length;j<I;j++){var N=w[j]*E,W=j<I-1?w[j+1]*E:S.length;z-=Math.abs(d(S,N,W,E))}var F=0;for(j=0;j<C.length;j+=3){var U=C[j]*E,H=C[j+1]*E,ne=C[j+2]*E;F+=Math.abs((S[U]-S[ne])*(S[H+1]-S[U+1])-(S[U]-S[H])*(S[ne+1]-S[U+1]))}return z===0&&F===0?0:Math.abs((F-z)/z)},R.flatten=function(S){for(var w=S[0][0].length,E={vertices:[],holes:[],dimensions:w},C=0,O=0;O<S.length;O++){for(var P=0;P<S[O].length;P++)for(var z=0;z<w;z++)E.vertices.push(S[O][P][z]);O>0&&(C+=S[O-1].length,E.holes.push(C))}return E}},6688:function(ee,R,e){var M=e(78484);ee.exports=function(k,s){var T,b=[],f=[],o=[],t={},i=[];function n(v){o[v]=!1,t.hasOwnProperty(v)&&Object.keys(t[v]).forEach(function(g){delete t[v][g],o[g]&&n(g)})}function r(v){var g,y,m=!1;for(f.push(v),o[v]=!0,g=0;g<i[v].length;g++)(y=i[v][g])===T?(a(T,f),m=!0):o[y]||(m=r(y));if(m)n(v);else for(g=0;g<i[v].length;g++){y=i[v][g];var _=t[y];_||(_={},t[y]=_),_[y]=!0}return f.pop(),m}function a(v,g){var y=[].concat(g).concat(v);s?s(r):b.push(y)}function l(v){(function(E){for(var C=0;C<k.length;C++)C<E&&(k[C]=[]),k[C]=k[C].filter(function(O){return O>=E})})(v);for(var g,y=M(k).components.filter(function(E){return E.length>1}),m=1/0,_=0;_<y.length;_++)for(var d=0;d<y[_].length;d++)y[_][d]<m&&(m=y[_][d],g=_);var S=y[g];if(!S)return!1;var w=k.map(function(E,C){return S.indexOf(C)===-1?[]:E.filter(function(O){return S.indexOf(O)!==-1})});return{leastVertex:m,adjList:w}}T=0;for(var u=k.length;T<u;){var h=l(T);if(T=h.leastVertex,i=h.adjList){for(var c=0;c<i.length;c++)for(var x=0;x<i[c].length;x++){var p=i[c][x];o[+p]=!1,t[p]={}}r(T),T+=1}else T=u}return s?void 0:b}},41476:function(ee,R,e){var M=e(9252);ee.exports=function(){return M(this).length=0,this}},74772:function(ee,R,e){ee.exports=e(44716)()?Array.from:e(80816)},44716:function(ee){ee.exports=function(){var R,e,M=Array.from;return typeof M=="function"&&(e=M(R=["raz","dwa"]),!!(e&&e!==R&&e[1]==="dwa"))}},80816:function(ee,R,e){var M=e(92664).iterator,k=e(60948),s=e(17024),T=e(81304),b=e(34044),f=e(9252),o=e(42584),t=e(29768),i=Array.isArray,n=Function.prototype.call,r={configurable:!0,enumerable:!0,writable:!0,value:null},a=Object.defineProperty;ee.exports=function(l){var u,h,c,x,p,v,g,y,m,_,d=arguments[1],S=arguments[2];if(l=Object(f(l)),o(d)&&b(d),this&&this!==Array&&s(this))u=this;else{if(!d){if(k(l))return(p=l.length)!==1?Array.apply(null,l):((x=new Array(1))[0]=l[0],x);if(i(l)){for(x=new Array(p=l.length),h=0;h<p;++h)x[h]=l[h];return x}}x=[]}if(!i(l)){if((m=l[M])!==void 0){for(g=b(m).call(l),u&&(x=new u),y=g.next(),h=0;!y.done;)_=d?n.call(d,S,y.value,h):y.value,u?(r.value=_,a(x,h,r)):x[h]=_,y=g.next(),++h;p=h}else if(t(l)){for(p=l.length,u&&(x=new u),h=0,c=0;h<p;++h)_=l[h],h+1<p&&(v=_.charCodeAt(0))>=55296&&v<=56319&&(_+=l[++h]),_=d?n.call(d,S,_,c):_,u?(r.value=_,a(x,c,r)):x[c]=_,++c;p=c}}if(p===void 0)for(p=T(l.length),u&&(x=new u(p)),h=0;h<p;++h)_=d?n.call(d,S,l[h],h):l[h],u?(r.value=_,a(x,h,r)):x[h]=_;return u&&(r.value=null,x.length=p),x}},60948:function(ee){var R=Object.prototype.toString,e=R.call(function(){return arguments}());ee.exports=function(M){return R.call(M)===e}},17024:function(ee){var R=Object.prototype.toString,e=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);ee.exports=function(M){return typeof M=="function"&&e(R.call(M))}},33208:function(ee){ee.exports=function(){}},85608:function(ee,R,e){ee.exports=e(37328)()?Math.sign:e(92928)},37328:function(ee){ee.exports=function(){var R=Math.sign;return typeof R=="function"&&R(10)===1&&R(-20)===-1}},92928:function(ee){ee.exports=function(R){return R=Number(R),isNaN(R)||R===0?R:R>0?1:-1}},96936:function(ee,R,e){var M=e(85608),k=Math.abs,s=Math.floor;ee.exports=function(T){return isNaN(T)?0:(T=Number(T))!==0&&isFinite(T)?M(T)*s(k(T)):T}},81304:function(ee,R,e){var M=e(96936),k=Math.max;ee.exports=function(s){return k(0,M(s))}},14428:function(ee,R,e){var M=e(34044),k=e(9252),s=Function.prototype.bind,T=Function.prototype.call,b=Object.keys,f=Object.prototype.propertyIsEnumerable;ee.exports=function(o,t){return function(i,n){var r,a=arguments[2],l=arguments[3];return i=Object(k(i)),M(n),r=b(i),l&&r.sort(typeof l=="function"?s.call(l,i):void 0),typeof o!="function"&&(o=r[o]),T.call(o,r,function(u,h){return f.call(i,u)?T.call(n,a,i[u],u,i,h):t})}}},38452:function(ee,R,e){ee.exports=e(96276)()?Object.assign:e(81892)},96276:function(ee){ee.exports=function(){var R,e=Object.assign;return typeof e=="function"&&(e(R={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),R.foo+R.bar+R.trzy==="razdwatrzy")}},81892:function(ee,R,e){var M=e(54768),k=e(9252),s=Math.max;ee.exports=function(T,b){var f,o,t,i=s(arguments.length,2);for(T=Object(k(T)),t=function(n){try{T[n]=b[n]}catch(r){f||(f=r)}},o=1;o<i;++o)M(b=arguments[o]).forEach(t);if(f!==void 0)throw f;return T}},95920:function(ee,R,e){var M=e(74772),k=e(38452),s=e(9252);ee.exports=function(T){var b=Object(s(T)),f=arguments[1],o=Object(arguments[2]);if(b!==T&&!f)return b;var t={};return f?M(f,function(i){(o.ensure||i in T)&&(t[i]=T[i])}):k(t,T),t}},14452:function(ee,R,e){var M,k,s,T,b=Object.create;e(63092)()||(M=e(8672)),ee.exports=M?M.level!==1?b:(k={},s={},T={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(f){s[f]=f!=="__proto__"?T:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(k,s),Object.defineProperty(M,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:k}),function(f,o){return b(f===null?k:f,o)}):b},42748:function(ee,R,e){ee.exports=e(14428)("forEach")},69127:function(ee,R,e){var M=e(42584),k={function:!0,object:!0};ee.exports=function(s){return M(s)&&k[typeof s]||!1}},42584:function(ee,R,e){var M=e(33208)();ee.exports=function(k){return k!==M&&k!==null}},54768:function(ee,R,e){ee.exports=e(87888)()?Object.keys:e(89592)},87888:function(ee){ee.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},89592:function(ee,R,e){var M=e(42584),k=Object.keys;ee.exports=function(s){return k(M(s)?Object(s):s)}},84323:function(ee,R,e){var M=e(34044),k=e(42748),s=Function.prototype.call;ee.exports=function(T,b){var f={},o=arguments[2];return M(b),k(T,function(t,i,n,r){f[i]=s.call(b,o,t,i,n,r)}),f}},50868:function(ee,R,e){var M=e(42584),k=Array.prototype.forEach,s=Object.create;ee.exports=function(T){var b=s(null);return k.call(arguments,function(f){M(f)&&function(o,t){var i;for(i in o)t[i]=o[i]}(Object(f),b)}),b}},69932:function(ee,R,e){ee.exports=e(63092)()?Object.setPrototypeOf:e(8672)},63092:function(ee){var R=Object.create,e=Object.getPrototypeOf,M={};ee.exports=function(){var k=Object.setPrototypeOf;return typeof k=="function"&&e(k((arguments[0]||R)(null),M))===M}},8672:function(ee,R,e){var M,k,s,T,b=e(69127),f=e(9252),o=Object.prototype.isPrototypeOf,t=Object.defineProperty,i={configurable:!0,enumerable:!1,writable:!0,value:void 0};M=function(n,r){if(f(n),r===null||b(r))return n;throw new TypeError("Prototype must be null or an object")},ee.exports=(k=function(){var n,r=Object.create(null),a={},l=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(l){try{(n=l.set).call(r,a)}catch{}if(Object.getPrototypeOf(r)===a)return{set:n,level:2}}return r.__proto__=a,Object.getPrototypeOf(r)===a?{level:2}:((r={}).__proto__=a,Object.getPrototypeOf(r)===a&&{level:1})}(),k?(k.level===2?k.set?(T=k.set,s=function(n,r){return T.call(M(n,r),r),n}):s=function(n,r){return M(n,r).__proto__=r,n}:s=function n(r,a){var l;return M(r,a),(l=o.call(n.nullPolyfill,r))&&delete n.nullPolyfill.__proto__,a===null&&(a=n.nullPolyfill),r.__proto__=a,l&&t(n.nullPolyfill,"__proto__",i),r},Object.defineProperty(s,"level",{configurable:!1,enumerable:!1,writable:!1,value:k.level})):null),e(14452)},34044:function(ee){ee.exports=function(R){if(typeof R!="function")throw new TypeError(R+" is not a function");return R}},92584:function(ee,R,e){var M=e(69127);ee.exports=function(k){if(!M(k))throw new TypeError(k+" is not an Object");return k}},9252:function(ee,R,e){var M=e(42584);ee.exports=function(k){if(!M(k))throw new TypeError("Cannot use null or undefined");return k}},71056:function(ee,R,e){ee.exports=e(42976)()?String.prototype.contains:e(93040)},42976:function(ee){var R="razdwatrzy";ee.exports=function(){return typeof R.contains=="function"&&R.contains("dwa")===!0&&R.contains("foo")===!1}},93040:function(ee){var R=String.prototype.indexOf;ee.exports=function(e){return R.call(this,e,arguments[1])>-1}},29768:function(ee){var R=Object.prototype.toString,e=R.call("");ee.exports=function(M){return typeof M=="string"||M&&typeof M=="object"&&(M instanceof String||R.call(M)===e)||!1}},82252:function(ee){var R=Object.create(null),e=Math.random;ee.exports=function(){var M;do M=e().toString(36).slice(2);while(R[M]);return M}},52104:function(ee,R,e){var M,k=e(69932),s=e(71056),T=e(21092),b=e(92664),f=e(85512),o=Object.defineProperty;M=ee.exports=function(t,i){if(!(this instanceof M))throw new TypeError("Constructor requires 'new'");f.call(this,t),i=i?s.call(i,"key+value")?"key+value":s.call(i,"key")?"key":"value":"value",o(this,"__kind__",T("",i))},k&&k(M,f),delete M.prototype.constructor,M.prototype=Object.create(f.prototype,{_resolve:T(function(t){return this.__kind__==="value"?this.__list__[t]:this.__kind__==="key+value"?[t,this.__list__[t]]:t})}),o(M.prototype,b.toStringTag,T("c","Array Iterator"))},76024:function(ee,R,e){var M=e(60948),k=e(34044),s=e(29768),T=e(76252),b=Array.isArray,f=Function.prototype.call,o=Array.prototype.some;ee.exports=function(t,i){var n,r,a,l,u,h,c,x,p=arguments[2];if(b(t)||M(t)?n="array":s(t)?n="string":t=T(t),k(i),a=function(){l=!0},n!=="array")if(n!=="string")for(r=t.next();!r.done;){if(f.call(i,p,r.value,a),l)return;r=t.next()}else for(h=t.length,u=0;u<h&&(c=t[u],u+1<h&&(x=c.charCodeAt(0))>=55296&&x<=56319&&(c+=t[++u]),f.call(i,p,c,a),!l);++u);else o.call(t,function(v){return f.call(i,p,v,a),l})}},76252:function(ee,R,e){var M=e(60948),k=e(29768),s=e(52104),T=e(80940),b=e(52891),f=e(92664).iterator;ee.exports=function(o){return typeof b(o)[f]=="function"?o[f]():M(o)?new s(o):k(o)?new T(o):new s(o)}},85512:function(ee,R,e){var M,k=e(41476),s=e(38452),T=e(34044),b=e(9252),f=e(21092),o=e(27940),t=e(92664),i=Object.defineProperty,n=Object.defineProperties;ee.exports=M=function(r,a){if(!(this instanceof M))throw new TypeError("Constructor requires 'new'");n(this,{__list__:f("w",b(r)),__context__:f("w",a),__nextIndex__:f("w",0)}),a&&(T(a.on),a.on("_add",this._onAdd),a.on("_delete",this._onDelete),a.on("_clear",this._onClear))},delete M.prototype.constructor,n(M.prototype,s({_next:f(function(){var r;if(this.__list__)return this.__redo__&&(r=this.__redo__.shift())!==void 0?r:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:f(function(){return this._createResult(this._next())}),_createResult:f(function(r){return r===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(r)}}),_resolve:f(function(r){return this.__list__[r]}),_unBind:f(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:f(function(){return"[object "+(this[t.toStringTag]||"Object")+"]"})},o({_onAdd:f(function(r){r>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(a,l){a>=r&&(this.__redo__[l]=++a)},this),this.__redo__.push(r)):i(this,"__redo__",f("c",[r])))}),_onDelete:f(function(r){var a;r>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&((a=this.__redo__.indexOf(r))!==-1&&this.__redo__.splice(a,1),this.__redo__.forEach(function(l,u){l>r&&(this.__redo__[u]=--l)},this)))}),_onClear:f(function(){this.__redo__&&k.call(this.__redo__),this.__nextIndex__=0})}))),i(M.prototype,t.iterator,f(function(){return this}))},76368:function(ee,R,e){var M=e(60948),k=e(42584),s=e(29768),T=e(92664).iterator,b=Array.isArray;ee.exports=function(f){return!(!k(f)||!b(f)&&!s(f)&&!M(f)&&typeof f[T]!="function")}},80940:function(ee,R,e){var M,k=e(69932),s=e(21092),T=e(92664),b=e(85512),f=Object.defineProperty;M=ee.exports=function(o){if(!(this instanceof M))throw new TypeError("Constructor requires 'new'");o=String(o),b.call(this,o),f(this,"__length__",s("",o.length))},k&&k(M,b),delete M.prototype.constructor,M.prototype=Object.create(b.prototype,{_next:s(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:s(function(o){var t,i=this.__list__[o];return this.__nextIndex__===this.__length__?i:(t=i.charCodeAt(0))>=55296&&t<=56319?i+this.__list__[this.__nextIndex__++]:i})}),f(M.prototype,T.toStringTag,s("c","String Iterator"))},52891:function(ee,R,e){var M=e(76368);ee.exports=function(k){if(!M(k))throw new TypeError(k+" is not iterable");return k}},60964:function(ee){function R(e,M){if(e==null)throw new TypeError("Cannot convert first argument to object");for(var k=Object(e),s=1;s<arguments.length;s++){var T=arguments[s];if(T!=null)for(var b=Object.keys(Object(T)),f=0,o=b.length;f<o;f++){var t=b[f],i=Object.getOwnPropertyDescriptor(T,t);i!==void 0&&i.enumerable&&(k[t]=T[t])}}return k}ee.exports={assign:R,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:R})}}},92664:function(ee,R,e){ee.exports=e(43580)()?e(12296).Symbol:e(18376)},43580:function(ee,R,e){var M=e(12296),k={object:!0,symbol:!0};ee.exports=function(){var s,T=M.Symbol;if(typeof T!="function")return!1;s=T("test symbol");try{String(s)}catch{return!1}return!!k[typeof T.iterator]&&!!k[typeof T.toPrimitive]&&!!k[typeof T.toStringTag]}},53908:function(ee){ee.exports=function(R){return!!R&&(typeof R=="symbol"||!!R.constructor&&R.constructor.name==="Symbol"&&R[R.constructor.toStringTag]==="Symbol")}},96863:function(ee,R,e){var M=e(21092),k=Object.create,s=Object.defineProperty,T=Object.prototype,b=k(null);ee.exports=function(f){for(var o,t,i=0;b[f+(i||"")];)++i;return b[f+=i||""]=!0,s(T,o="@@"+f,M.gs(null,function(n){t||(t=!0,s(this,o,M(n)),t=!1)})),o}},53540:function(ee,R,e){var M=e(21092),k=e(12296).Symbol;ee.exports=function(s){return Object.defineProperties(s,{hasInstance:M("",k&&k.hasInstance||s("hasInstance")),isConcatSpreadable:M("",k&&k.isConcatSpreadable||s("isConcatSpreadable")),iterator:M("",k&&k.iterator||s("iterator")),match:M("",k&&k.match||s("match")),replace:M("",k&&k.replace||s("replace")),search:M("",k&&k.search||s("search")),species:M("",k&&k.species||s("species")),split:M("",k&&k.split||s("split")),toPrimitive:M("",k&&k.toPrimitive||s("toPrimitive")),toStringTag:M("",k&&k.toStringTag||s("toStringTag")),unscopables:M("",k&&k.unscopables||s("unscopables"))})}},73852:function(ee,R,e){var M=e(21092),k=e(63948),s=Object.create(null);ee.exports=function(T){return Object.defineProperties(T,{for:M(function(b){return s[b]?s[b]:s[b]=T(String(b))}),keyFor:M(function(b){var f;for(f in k(b),s)if(s[f]===b)return f})})}},18376:function(ee,R,e){var M,k,s,T=e(21092),b=e(63948),f=e(12296).Symbol,o=e(96863),t=e(53540),i=e(73852),n=Object.create,r=Object.defineProperties,a=Object.defineProperty;if(typeof f=="function")try{String(f()),s=!0}catch{}else f=null;k=function(l){if(this instanceof k)throw new TypeError("Symbol is not a constructor");return M(l)},ee.exports=M=function l(u){var h;if(this instanceof l)throw new TypeError("Symbol is not a constructor");return s?f(u):(h=n(k.prototype),u=u===void 0?"":String(u),r(h,{__description__:T("",u),__name__:T("",o(u))}))},t(M),i(M),r(k.prototype,{constructor:T(M),toString:T("",function(){return this.__name__})}),r(M.prototype,{toString:T(function(){return"Symbol ("+b(this).__description__+")"}),valueOf:T(function(){return b(this)})}),a(M.prototype,M.toPrimitive,T("",function(){var l=b(this);return typeof l=="symbol"?l:l.toString()})),a(M.prototype,M.toStringTag,T("c","Symbol")),a(k.prototype,M.toStringTag,T("c",M.prototype[M.toStringTag])),a(k.prototype,M.toPrimitive,T("c",M.prototype[M.toPrimitive]))},63948:function(ee,R,e){var M=e(53908);ee.exports=function(k){if(!M(k))throw new TypeError(k+" is not a symbol");return k}},60463:function(ee,R,e){ee.exports=e(96979)()?WeakMap:e(64864)},96979:function(ee){ee.exports=function(){var R,e;if(typeof WeakMap!="function")return!1;try{R=new WeakMap([[e={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return String(R)==="[object WeakMap]"&&typeof R.set=="function"&&R.set({},1)===R&&typeof R.delete=="function"&&typeof R.has=="function"&&R.get(e)==="one"}},69876:function(ee){ee.exports=typeof WeakMap=="function"&&Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"},64864:function(ee,R,e){var M,k=e(42584),s=e(69932),T=e(92584),b=e(9252),f=e(82252),o=e(21092),t=e(76252),i=e(76024),n=e(92664).toStringTag,r=e(69876),a=Array.isArray,l=Object.defineProperty,u=Object.prototype.hasOwnProperty,h=Object.getPrototypeOf;ee.exports=M=function(){var c,x=arguments[0];if(!(this instanceof M))throw new TypeError("Constructor requires 'new'");return c=r&&s&&WeakMap!==M?s(new WeakMap,h(this)):this,k(x)&&(a(x)||(x=t(x))),l(c,"__weakMapData__",o("c","$weakMap$"+f())),x&&i(x,function(p){b(p),c.set(p[0],p[1])}),c},r&&(s&&s(M,WeakMap),M.prototype=Object.create(WeakMap.prototype,{constructor:o(M)})),Object.defineProperties(M.prototype,{delete:o(function(c){return!!u.call(T(c),this.__weakMapData__)&&(delete c[this.__weakMapData__],!0)}),get:o(function(c){if(u.call(T(c),this.__weakMapData__))return c[this.__weakMapData__]}),has:o(function(c){return u.call(T(c),this.__weakMapData__)}),set:o(function(c,x){return l(T(c),this.__weakMapData__,o("c",x)),this}),toString:o(function(){return"[object WeakMap]"})}),l(M.prototype,n,o("c","WeakMap"))},61252:function(ee){var R,e=typeof Reflect=="object"?Reflect:null,M=e&&typeof e.apply=="function"?e.apply:function(u,h,c){return Function.prototype.apply.call(u,h,c)};R=e&&typeof e.ownKeys=="function"?e.ownKeys:Object.getOwnPropertySymbols?function(u){return Object.getOwnPropertyNames(u).concat(Object.getOwnPropertySymbols(u))}:function(u){return Object.getOwnPropertyNames(u)};var k=Number.isNaN||function(u){return u!=u};function s(){s.init.call(this)}ee.exports=s,ee.exports.once=function(u,h){return new Promise(function(c,x){function p(g){u.removeListener(h,v),x(g)}function v(){typeof u.removeListener=="function"&&u.removeListener("error",p),c([].slice.call(arguments))}l(u,h,v,{once:!0}),h!=="error"&&function(g,y,m){typeof g.on=="function"&&l(g,"error",y,{once:!0})}(u,p)})},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var T=10;function b(u){if(typeof u!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof u)}function f(u){return u._maxListeners===void 0?s.defaultMaxListeners:u._maxListeners}function o(u,h,c,x){var p,v,g,y;if(b(c),(v=u._events)===void 0?(v=u._events=Object.create(null),u._eventsCount=0):(v.newListener!==void 0&&(u.emit("newListener",h,c.listener?c.listener:c),v=u._events),g=v[h]),g===void 0)g=v[h]=c,++u._eventsCount;else if(typeof g=="function"?g=v[h]=x?[c,g]:[g,c]:x?g.unshift(c):g.push(c),(p=f(u))>0&&g.length>p&&!g.warned){g.warned=!0;var m=new Error("Possible EventEmitter memory leak detected. "+g.length+" "+String(h)+" listeners added. Use emitter.setMaxListeners() to increase limit");m.name="MaxListenersExceededWarning",m.emitter=u,m.type=h,m.count=g.length,y=m,console&&console.warn&&console.warn(y)}return u}function t(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function i(u,h,c){var x={fired:!1,wrapFn:void 0,target:u,type:h,listener:c},p=t.bind(x);return p.listener=c,x.wrapFn=p,p}function n(u,h,c){var x=u._events;if(x===void 0)return[];var p=x[h];return p===void 0?[]:typeof p=="function"?c?[p.listener||p]:[p]:c?function(v){for(var g=new Array(v.length),y=0;y<g.length;++y)g[y]=v[y].listener||v[y];return g}(p):a(p,p.length)}function r(u){var h=this._events;if(h!==void 0){var c=h[u];if(typeof c=="function")return 1;if(c!==void 0)return c.length}return 0}function a(u,h){for(var c=new Array(h),x=0;x<h;++x)c[x]=u[x];return c}function l(u,h,c,x){if(typeof u.on=="function")x.once?u.once(h,c):u.on(h,c);else{if(typeof u.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof u);u.addEventListener(h,function p(v){x.once&&u.removeEventListener(h,p),c(v)})}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return T},set:function(u){if(typeof u!="number"||u<0||k(u))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+u+".");T=u}}),s.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(u){if(typeof u!="number"||u<0||k(u))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+u+".");return this._maxListeners=u,this},s.prototype.getMaxListeners=function(){return f(this)},s.prototype.emit=function(u){for(var h=[],c=1;c<arguments.length;c++)h.push(arguments[c]);var x=u==="error",p=this._events;if(p!==void 0)x=x&&p.error===void 0;else if(!x)return!1;if(x){var v;if(h.length>0&&(v=h[0]),v instanceof Error)throw v;var g=new Error("Unhandled error."+(v?" ("+v.message+")":""));throw g.context=v,g}var y=p[u];if(y===void 0)return!1;if(typeof y=="function")M(y,this,h);else{var m=y.length,_=a(y,m);for(c=0;c<m;++c)M(_[c],this,h)}return!0},s.prototype.addListener=function(u,h){return o(this,u,h,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(u,h){return o(this,u,h,!0)},s.prototype.once=function(u,h){return b(h),this.on(u,i(this,u,h)),this},s.prototype.prependOnceListener=function(u,h){return b(h),this.prependListener(u,i(this,u,h)),this},s.prototype.removeListener=function(u,h){var c,x,p,v,g;if(b(h),(x=this._events)===void 0)return this;if((c=x[u])===void 0)return this;if(c===h||c.listener===h)--this._eventsCount==0?this._events=Object.create(null):(delete x[u],x.removeListener&&this.emit("removeListener",u,c.listener||h));else if(typeof c!="function"){for(p=-1,v=c.length-1;v>=0;v--)if(c[v]===h||c[v].listener===h){g=c[v].listener,p=v;break}if(p<0)return this;p===0?c.shift():function(y,m){for(;m+1<y.length;m++)y[m]=y[m+1];y.pop()}(c,p),c.length===1&&(x[u]=c[0]),x.removeListener!==void 0&&this.emit("removeListener",u,g||h)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(u){var h,c,x;if((c=this._events)===void 0)return this;if(c.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):c[u]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete c[u]),this;if(arguments.length===0){var p,v=Object.keys(c);for(x=0;x<v.length;++x)(p=v[x])!=="removeListener"&&this.removeAllListeners(p);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(h=c[u])=="function")this.removeListener(u,h);else if(h!==void 0)for(x=h.length-1;x>=0;x--)this.removeListener(u,h[x]);return this},s.prototype.listeners=function(u){return n(this,u,!0)},s.prototype.rawListeners=function(u){return n(this,u,!1)},s.listenerCount=function(u,h){return typeof u.listenerCount=="function"?u.listenerCount(h):r.call(u,h)},s.prototype.listenerCount=r,s.prototype.eventNames=function(){return this._eventsCount>0?R(this._events):[]}},39072:function(ee){var R=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};ee.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return R()}try{return __global__||R()}finally{delete Object.prototype.__global__}}()},12296:function(ee,R,e){ee.exports=e(45072)()?globalThis:e(39072)},45072:function(ee){ee.exports=function(){return typeof globalThis=="object"&&!!globalThis&&globalThis.Array===Array}},38248:function(ee,R,e){var M=e(94576);ee.exports=function(k){var s=typeof k;if(s==="string"){var T=k;if((k=+k)==0&&M(T))return!1}else if(s!=="number")return!1;return k-k<1}},47520:function(ee,R,e){var M=e(72512);ee.exports=function(k,s,T){if(!k)throw new TypeError("must specify data as first parameter");if(T=0|+(T||0),Array.isArray(k)&&k[0]&&typeof k[0][0]=="number"){var b,f,o,t,i=k[0].length,n=k.length*i;s&&typeof s!="string"||(s=new(M(s||"float32"))(n+T));var r=s.length-T;if(n!==r)throw new Error("source length "+n+" ("+i+"x"+k.length+") does not match destination length "+r);for(b=0,o=T;b<k.length;b++)for(f=0;f<i;f++)s[o++]=k[b][f]===null?NaN:k[b][f]}else if(s&&typeof s!="string")s.set(k,T);else{var a=M(s||"float32");if(Array.isArray(k)||s==="array")for(b=0,o=T,t=(s=new a(k.length+T)).length;o<t;o++,b++)s[o]=k[b]===null?NaN:k[b];else T===0?s=new a(k):(s=new a(k.length+T)).set(k,T)}return s}},33888:function(ee,R,e){var M=e(49395),k=[32,126];ee.exports=function(s){var T=(s=s||{}).shape?s.shape:s.canvas?[s.canvas.width,s.canvas.height]:[512,512],b=s.canvas||document.createElement("canvas"),f=s.font,o=typeof s.step=="number"?[s.step,s.step]:s.step||[32,32],t=s.chars||k;if(f&&typeof f!="string"&&(f=M(f)),Array.isArray(t)){if(t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"){for(var i=[],n=t[0],r=0;n<=t[1];n++)i[r++]=String.fromCharCode(n);t=i}}else t=String(t).split("");T=T.slice(),b.width=T[0],b.height=T[1];var a=b.getContext("2d");a.fillStyle="#000",a.fillRect(0,0,b.width,b.height),a.font=f,a.textAlign="center",a.textBaseline="middle",a.fillStyle="#fff";var l=o[0]/2,u=o[1]/2;for(n=0;n<t.length;n++)a.fillText(t[n],l,u),(l+=o[0])>T[0]-o[0]/2&&(l=o[0]/2,u+=o[1]);return b}},71920:function(ee){function R(s,T){T||(T={}),(typeof s=="string"||Array.isArray(s))&&(T.family=s);var b=Array.isArray(T.family)?T.family.join(", "):T.family;if(!b)throw Error("`family` must be defined");var f=T.size||T.fontSize||T.em||48,o=T.weight||T.fontWeight||"",t=(s=[T.style||T.fontStyle||"",o,f].join(" ")+"px "+b,T.origin||"top");if(R.cache[b]&&f<=R.cache[b].em)return e(R.cache[b],t);var i=T.canvas||R.canvas,n=i.getContext("2d"),r={upper:T.upper!==void 0?T.upper:"H",lower:T.lower!==void 0?T.lower:"x",descent:T.descent!==void 0?T.descent:"p",ascent:T.ascent!==void 0?T.ascent:"h",tittle:T.tittle!==void 0?T.tittle:"i",overshoot:T.overshoot!==void 0?T.overshoot:"O"},a=Math.ceil(1.5*f);i.height=a,i.width=.5*a,n.font=s;var l="H",u={top:0};n.clearRect(0,0,a,a),n.textBaseline="top",n.fillStyle="black",n.fillText(l,0,0);var h=M(n.getImageData(0,0,a,a));n.clearRect(0,0,a,a),n.textBaseline="bottom",n.fillText(l,0,a);var c=M(n.getImageData(0,0,a,a));u.lineHeight=u.bottom=a-c+h,n.clearRect(0,0,a,a),n.textBaseline="alphabetic",n.fillText(l,0,a);var x=a-M(n.getImageData(0,0,a,a))-1+h;u.baseline=u.alphabetic=x,n.clearRect(0,0,a,a),n.textBaseline="middle",n.fillText(l,0,.5*a);var p=M(n.getImageData(0,0,a,a));u.median=u.middle=a-p-1+h-.5*a,n.clearRect(0,0,a,a),n.textBaseline="hanging",n.fillText(l,0,.5*a);var v=M(n.getImageData(0,0,a,a));u.hanging=a-v-1+h-.5*a,n.clearRect(0,0,a,a),n.textBaseline="ideographic",n.fillText(l,0,a);var g=M(n.getImageData(0,0,a,a));if(u.ideographic=a-g-1+h,r.upper&&(n.clearRect(0,0,a,a),n.textBaseline="top",n.fillText(r.upper,0,0),u.upper=M(n.getImageData(0,0,a,a)),u.capHeight=u.baseline-u.upper),r.lower&&(n.clearRect(0,0,a,a),n.textBaseline="top",n.fillText(r.lower,0,0),u.lower=M(n.getImageData(0,0,a,a)),u.xHeight=u.baseline-u.lower),r.tittle&&(n.clearRect(0,0,a,a),n.textBaseline="top",n.fillText(r.tittle,0,0),u.tittle=M(n.getImageData(0,0,a,a))),r.ascent&&(n.clearRect(0,0,a,a),n.textBaseline="top",n.fillText(r.ascent,0,0),u.ascent=M(n.getImageData(0,0,a,a))),r.descent&&(n.clearRect(0,0,a,a),n.textBaseline="top",n.fillText(r.descent,0,0),u.descent=k(n.getImageData(0,0,a,a))),r.overshoot){n.clearRect(0,0,a,a),n.textBaseline="top",n.fillText(r.overshoot,0,0);var y=k(n.getImageData(0,0,a,a));u.overshoot=y-x}for(var m in u)u[m]/=f;return u.em=f,R.cache[b]=u,e(u,t)}function e(s,T){var b={};for(var f in typeof T=="string"&&(T=s[T]),s)f!=="em"&&(b[f]=s[f]-T);return b}function M(s){for(var T=s.height,b=s.data,f=3;f<b.length;f+=4)if(b[f]!==0)return Math.floor(.25*(f-3)/T)}function k(s){for(var T=s.height,b=s.data,f=b.length-1;f>0;f-=4)if(b[f]!==0)return Math.floor(.25*(f-3)/T)}ee.exports=R,R.canvas=document.createElement("canvas"),R.cache={}},46492:function(ee,R,e){var M=e(90720),k=Object.prototype.toString,s=Object.prototype.hasOwnProperty;ee.exports=function(T,b,f){if(!M(b))throw new TypeError("iterator must be a function");var o;arguments.length>=3&&(o=f),k.call(T)==="[object Array]"?function(t,i,n){for(var r=0,a=t.length;r<a;r++)s.call(t,r)&&(n==null?i(t[r],r,t):i.call(n,t[r],r,t))}(T,b,o):typeof T=="string"?function(t,i,n){for(var r=0,a=t.length;r<a;r++)n==null?i(t.charAt(r),r,t):i.call(n,t.charAt(r),r,t)}(T,b,o):function(t,i,n){for(var r in t)s.call(t,r)&&(n==null?i(t[r],r,t):i.call(n,t[r],r,t))}(T,b,o)}},74336:function(ee){var R=Object.prototype.toString,e=Math.max,M=function(k,s){for(var T=[],b=0;b<k.length;b+=1)T[b]=k[b];for(var f=0;f<s.length;f+=1)T[f+k.length]=s[f];return T};ee.exports=function(k){var s=this;if(typeof s!="function"||R.apply(s)!=="[object Function]")throw new TypeError("Function.prototype.bind called on incompatible "+s);for(var T,b=function(n,r){for(var a=[],l=1,u=0;l<n.length;l+=1,u+=1)a[u]=n[l];return a}(arguments),f=e(0,s.length-b.length),o=[],t=0;t<f;t++)o[t]="$"+t;if(T=Function("binder","return function ("+function(n,r){for(var a="",l=0;l<n.length;l+=1)a+=n[l],l+1<n.length&&(a+=",");return a}(o)+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof T){var n=s.apply(this,M(b,arguments));return Object(n)===n?n:this}return s.apply(k,M(b,arguments))}),s.prototype){var i=function(){};i.prototype=s.prototype,T.prototype=new i,i.prototype=null}return T}},8844:function(ee,R,e){var M=e(74336);ee.exports=Function.prototype.bind||M},13380:function(ee){ee.exports=function(R,e){if(typeof R!="string")throw new TypeError("must specify type string");if(e=e||{},typeof document>"u"&&!e.canvas)return null;var M=e.canvas||document.createElement("canvas");typeof e.width=="number"&&(M.width=e.width),typeof e.height=="number"&&(M.height=e.height);var k,s=e;try{var T=[R];R.indexOf("webgl")===0&&T.push("experimental-"+R);for(var b=0;b<T.length;b++)if(k=M.getContext(T[b],s))return k}catch{k=null}return k||null}},53664:function(ee,R,e){var M,k=SyntaxError,s=Function,T=TypeError,b=function(C){try{return s('"use strict"; return ('+C+").constructor;")()}catch{}},f=Object.getOwnPropertyDescriptor;if(f)try{f({},"")}catch{f=null}var o=function(){throw new T},t=f?function(){try{return o}catch{try{return f(arguments,"callee").get}catch{return o}}}():o,i=e(71080)(),n=e(69572)(),r=Object.getPrototypeOf||(n?function(C){return C.__proto__}:null),a={},l=typeof Uint8Array<"u"&&r?r(Uint8Array):M,u={"%AggregateError%":typeof AggregateError>"u"?M:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?M:ArrayBuffer,"%ArrayIteratorPrototype%":i&&r?r([][Symbol.iterator]()):M,"%AsyncFromSyncIteratorPrototype%":M,"%AsyncFunction%":a,"%AsyncGenerator%":a,"%AsyncGeneratorFunction%":a,"%AsyncIteratorPrototype%":a,"%Atomics%":typeof Atomics>"u"?M:Atomics,"%BigInt%":typeof BigInt>"u"?M:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?M:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?M:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?M:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?M:Float32Array,"%Float64Array%":typeof Float64Array>"u"?M:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?M:FinalizationRegistry,"%Function%":s,"%GeneratorFunction%":a,"%Int8Array%":typeof Int8Array>"u"?M:Int8Array,"%Int16Array%":typeof Int16Array>"u"?M:Int16Array,"%Int32Array%":typeof Int32Array>"u"?M:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":i&&r?r(r([][Symbol.iterator]())):M,"%JSON%":typeof JSON=="object"?JSON:M,"%Map%":typeof Map>"u"?M:Map,"%MapIteratorPrototype%":typeof Map<"u"&&i&&r?r(new Map()[Symbol.iterator]()):M,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?M:Promise,"%Proxy%":typeof Proxy>"u"?M:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?M:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?M:Set,"%SetIteratorPrototype%":typeof Set<"u"&&i&&r?r(new Set()[Symbol.iterator]()):M,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?M:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":i&&r?r(""[Symbol.iterator]()):M,"%Symbol%":i?Symbol:M,"%SyntaxError%":k,"%ThrowTypeError%":t,"%TypedArray%":l,"%TypeError%":T,"%Uint8Array%":typeof Uint8Array>"u"?M:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?M:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?M:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?M:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?M:WeakMap,"%WeakRef%":typeof WeakRef>"u"?M:WeakRef,"%WeakSet%":typeof WeakSet>"u"?M:WeakSet};if(r)try{null.error}catch(C){var h=r(r(C));u["%Error.prototype%"]=h}var c=function C(O){var P;if(O==="%AsyncFunction%")P=b("async function () {}");else if(O==="%GeneratorFunction%")P=b("function* () {}");else if(O==="%AsyncGeneratorFunction%")P=b("async function* () {}");else if(O==="%AsyncGenerator%"){var z=C("%AsyncGeneratorFunction%");z&&(P=z.prototype)}else if(O==="%AsyncIteratorPrototype%"){var j=C("%AsyncGenerator%");j&&r&&(P=r(j.prototype))}return u[O]=P,P},x={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},p=e(8844),v=e(92064),g=p.call(Function.call,Array.prototype.concat),y=p.call(Function.apply,Array.prototype.splice),m=p.call(Function.call,String.prototype.replace),_=p.call(Function.call,String.prototype.slice),d=p.call(Function.call,RegExp.prototype.exec),S=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,w=/\\(\\)?/g,E=function(C,O){var P,z=C;if(v(x,z)&&(z="%"+(P=x[z])[0]+"%"),v(u,z)){var j=u[z];if(j===a&&(j=c(z)),j===void 0&&!O)throw new T("intrinsic "+C+" exists, but is not available. Please file an issue!");return{alias:P,name:z,value:j}}throw new k("intrinsic "+C+" does not exist!")};ee.exports=function(C,O){if(typeof C!="string"||C.length===0)throw new T("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof O!="boolean")throw new T('"allowMissing" argument must be a boolean');if(d(/^%?[^%]*%?$/,C)===null)throw new k("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var P=function(Z){var X=_(Z,0,1),te=_(Z,-1);if(X==="%"&&te!=="%")throw new k("invalid intrinsic syntax, expected closing `%`");if(te==="%"&&X!=="%")throw new k("invalid intrinsic syntax, expected opening `%`");var ae=[];return m(Z,S,function(se,ce,fe,pe){ae[ae.length]=fe?m(pe,w,"$1"):ce||se}),ae}(C),z=P.length>0?P[0]:"",j=E("%"+z+"%",O),I=j.name,N=j.value,W=!1,F=j.alias;F&&(z=F[0],y(P,g([0,1],F)));for(var U=1,H=!0;U<P.length;U+=1){var ne=P[U],$=_(ne,0,1),K=_(ne,-1);if(($==='"'||$==="'"||$==="`"||K==='"'||K==="'"||K==="`")&&$!==K)throw new k("property names with quotes must have matching quotes");if(ne!=="constructor"&&H||(W=!0),v(u,I="%"+(z+="."+ne)+"%"))N=u[I];else if(N!=null){if(!(ne in N)){if(!O)throw new T("base intrinsic for "+C+" exists, but the property is not available.");return}if(f&&U+1>=P.length){var Q=f(N,ne);N=(H=!!Q)&&"get"in Q&&!("originalValue"in Q.get)?Q.get:N[ne]}else H=v(N,ne),N=N[ne];H&&!W&&(u[I]=N)}}return N}},12408:function(ee){ee.exports=function(R,e){var M=e[0],k=e[1],s=e[2],T=e[3],b=e[4],f=e[5],o=e[6],t=e[7],i=e[8],n=e[9],r=e[10],a=e[11],l=e[12],u=e[13],h=e[14],c=e[15];return R[0]=f*(r*c-a*h)-n*(o*c-t*h)+u*(o*a-t*r),R[1]=-(k*(r*c-a*h)-n*(s*c-T*h)+u*(s*a-T*r)),R[2]=k*(o*c-t*h)-f*(s*c-T*h)+u*(s*t-T*o),R[3]=-(k*(o*a-t*r)-f*(s*a-T*r)+n*(s*t-T*o)),R[4]=-(b*(r*c-a*h)-i*(o*c-t*h)+l*(o*a-t*r)),R[5]=M*(r*c-a*h)-i*(s*c-T*h)+l*(s*a-T*r),R[6]=-(M*(o*c-t*h)-b*(s*c-T*h)+l*(s*t-T*o)),R[7]=M*(o*a-t*r)-b*(s*a-T*r)+i*(s*t-T*o),R[8]=b*(n*c-a*u)-i*(f*c-t*u)+l*(f*a-t*n),R[9]=-(M*(n*c-a*u)-i*(k*c-T*u)+l*(k*a-T*n)),R[10]=M*(f*c-t*u)-b*(k*c-T*u)+l*(k*t-T*f),R[11]=-(M*(f*a-t*n)-b*(k*a-T*n)+i*(k*t-T*f)),R[12]=-(b*(n*h-r*u)-i*(f*h-o*u)+l*(f*r-o*n)),R[13]=M*(n*h-r*u)-i*(k*h-s*u)+l*(k*r-s*n),R[14]=-(M*(f*h-o*u)-b*(k*h-s*u)+l*(k*o-s*f)),R[15]=M*(f*r-o*n)-b*(k*r-s*n)+i*(k*o-s*f),R}},76860:function(ee){ee.exports=function(R){var e=new Float32Array(16);return e[0]=R[0],e[1]=R[1],e[2]=R[2],e[3]=R[3],e[4]=R[4],e[5]=R[5],e[6]=R[6],e[7]=R[7],e[8]=R[8],e[9]=R[9],e[10]=R[10],e[11]=R[11],e[12]=R[12],e[13]=R[13],e[14]=R[14],e[15]=R[15],e}},64492:function(ee){ee.exports=function(R,e){return R[0]=e[0],R[1]=e[1],R[2]=e[2],R[3]=e[3],R[4]=e[4],R[5]=e[5],R[6]=e[6],R[7]=e[7],R[8]=e[8],R[9]=e[9],R[10]=e[10],R[11]=e[11],R[12]=e[12],R[13]=e[13],R[14]=e[14],R[15]=e[15],R}},54212:function(ee){ee.exports=function(){var R=new Float32Array(16);return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=1,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=1,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}},70800:function(ee){ee.exports=function(R){var e=R[0],M=R[1],k=R[2],s=R[3],T=R[4],b=R[5],f=R[6],o=R[7],t=R[8],i=R[9],n=R[10],r=R[11],a=R[12],l=R[13],u=R[14],h=R[15];return(e*b-M*T)*(n*h-r*u)-(e*f-k*T)*(i*h-r*l)+(e*o-s*T)*(i*u-n*l)+(M*f-k*b)*(t*h-r*a)-(M*o-s*b)*(t*u-n*a)+(k*o-s*f)*(t*l-i*a)}},61784:function(ee){ee.exports=function(R,e){var M=e[0],k=e[1],s=e[2],T=e[3],b=M+M,f=k+k,o=s+s,t=M*b,i=k*b,n=k*f,r=s*b,a=s*f,l=s*o,u=T*b,h=T*f,c=T*o;return R[0]=1-n-l,R[1]=i+c,R[2]=r-h,R[3]=0,R[4]=i-c,R[5]=1-t-l,R[6]=a+u,R[7]=0,R[8]=r+h,R[9]=a-u,R[10]=1-t-n,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}},91616:function(ee){ee.exports=function(R,e,M){var k,s,T,b=M[0],f=M[1],o=M[2],t=Math.sqrt(b*b+f*f+o*o);return Math.abs(t)<1e-6?null:(b*=t=1/t,f*=t,o*=t,k=Math.sin(e),T=1-(s=Math.cos(e)),R[0]=b*b*T+s,R[1]=f*b*T+o*k,R[2]=o*b*T-f*k,R[3]=0,R[4]=b*f*T-o*k,R[5]=f*f*T+s,R[6]=o*f*T+b*k,R[7]=0,R[8]=b*o*T+f*k,R[9]=f*o*T-b*k,R[10]=o*o*T+s,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R)}},51944:function(ee){ee.exports=function(R,e,M){var k=e[0],s=e[1],T=e[2],b=e[3],f=k+k,o=s+s,t=T+T,i=k*f,n=k*o,r=k*t,a=s*o,l=s*t,u=T*t,h=b*f,c=b*o,x=b*t;return R[0]=1-(a+u),R[1]=n+x,R[2]=r-c,R[3]=0,R[4]=n-x,R[5]=1-(i+u),R[6]=l+h,R[7]=0,R[8]=r+c,R[9]=l-h,R[10]=1-(i+a),R[11]=0,R[12]=M[0],R[13]=M[1],R[14]=M[2],R[15]=1,R}},69444:function(ee){ee.exports=function(R,e){return R[0]=e[0],R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=e[1],R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=e[2],R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}},48268:function(ee){ee.exports=function(R,e){return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=1,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=1,R[11]=0,R[12]=e[0],R[13]=e[1],R[14]=e[2],R[15]=1,R}},21856:function(ee){ee.exports=function(R,e){var M=Math.sin(e),k=Math.cos(e);return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=k,R[6]=M,R[7]=0,R[8]=0,R[9]=-M,R[10]=k,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}},79216:function(ee){ee.exports=function(R,e){var M=Math.sin(e),k=Math.cos(e);return R[0]=k,R[1]=0,R[2]=-M,R[3]=0,R[4]=0,R[5]=1,R[6]=0,R[7]=0,R[8]=M,R[9]=0,R[10]=k,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}},57736:function(ee){ee.exports=function(R,e){var M=Math.sin(e),k=Math.cos(e);return R[0]=k,R[1]=M,R[2]=0,R[3]=0,R[4]=-M,R[5]=k,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=1,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}},38848:function(ee){ee.exports=function(R,e,M,k,s,T,b){var f=1/(M-e),o=1/(s-k),t=1/(T-b);return R[0]=2*T*f,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=2*T*o,R[6]=0,R[7]=0,R[8]=(M+e)*f,R[9]=(s+k)*o,R[10]=(b+T)*t,R[11]=-1,R[12]=0,R[13]=0,R[14]=b*T*2*t,R[15]=0,R}},36635:function(ee){ee.exports=function(R){return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=1,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=1,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}},36524:function(ee,R,e){ee.exports={create:e(54212),clone:e(76860),copy:e(64492),identity:e(36635),transpose:e(86520),invert:e(4308),adjoint:e(12408),determinant:e(70800),multiply:e(80944),translate:e(35176),scale:e(68152),rotate:e(30016),rotateX:e(15456),rotateY:e(64840),rotateZ:e(4192),fromRotation:e(91616),fromRotationTranslation:e(51944),fromScaling:e(69444),fromTranslation:e(48268),fromXRotation:e(21856),fromYRotation:e(79216),fromZRotation:e(57736),fromQuat:e(61784),frustum:e(38848),perspective:e(51296),perspectiveFromFieldOfView:e(63688),ortho:e(97688),lookAt:e(56508),str:e(89412)}},4308:function(ee){ee.exports=function(R,e){var M=e[0],k=e[1],s=e[2],T=e[3],b=e[4],f=e[5],o=e[6],t=e[7],i=e[8],n=e[9],r=e[10],a=e[11],l=e[12],u=e[13],h=e[14],c=e[15],x=M*f-k*b,p=M*o-s*b,v=M*t-T*b,g=k*o-s*f,y=k*t-T*f,m=s*t-T*o,_=i*u-n*l,d=i*h-r*l,S=i*c-a*l,w=n*h-r*u,E=n*c-a*u,C=r*c-a*h,O=x*C-p*E+v*w+g*S-y*d+m*_;return O?(O=1/O,R[0]=(f*C-o*E+t*w)*O,R[1]=(s*E-k*C-T*w)*O,R[2]=(u*m-h*y+c*g)*O,R[3]=(r*y-n*m-a*g)*O,R[4]=(o*S-b*C-t*d)*O,R[5]=(M*C-s*S+T*d)*O,R[6]=(h*v-l*m-c*p)*O,R[7]=(i*m-r*v+a*p)*O,R[8]=(b*E-f*S+t*_)*O,R[9]=(k*S-M*E-T*_)*O,R[10]=(l*y-u*v+c*x)*O,R[11]=(n*v-i*y-a*x)*O,R[12]=(f*d-b*w-o*_)*O,R[13]=(M*w-k*d+s*_)*O,R[14]=(u*p-l*g-h*x)*O,R[15]=(i*g-n*p+r*x)*O,R):null}},56508:function(ee,R,e){var M=e(36635);ee.exports=function(k,s,T,b){var f,o,t,i,n,r,a,l,u,h,c=s[0],x=s[1],p=s[2],v=b[0],g=b[1],y=b[2],m=T[0],_=T[1],d=T[2];return Math.abs(c-m)<1e-6&&Math.abs(x-_)<1e-6&&Math.abs(p-d)<1e-6?M(k):(a=c-m,l=x-_,u=p-d,f=g*(u*=h=1/Math.sqrt(a*a+l*l+u*u))-y*(l*=h),o=y*(a*=h)-v*u,t=v*l-g*a,(h=Math.sqrt(f*f+o*o+t*t))?(f*=h=1/h,o*=h,t*=h):(f=0,o=0,t=0),i=l*t-u*o,n=u*f-a*t,r=a*o-l*f,(h=Math.sqrt(i*i+n*n+r*r))?(i*=h=1/h,n*=h,r*=h):(i=0,n=0,r=0),k[0]=f,k[1]=i,k[2]=a,k[3]=0,k[4]=o,k[5]=n,k[6]=l,k[7]=0,k[8]=t,k[9]=r,k[10]=u,k[11]=0,k[12]=-(f*c+o*x+t*p),k[13]=-(i*c+n*x+r*p),k[14]=-(a*c+l*x+u*p),k[15]=1,k)}},80944:function(ee){ee.exports=function(R,e,M){var k=e[0],s=e[1],T=e[2],b=e[3],f=e[4],o=e[5],t=e[6],i=e[7],n=e[8],r=e[9],a=e[10],l=e[11],u=e[12],h=e[13],c=e[14],x=e[15],p=M[0],v=M[1],g=M[2],y=M[3];return R[0]=p*k+v*f+g*n+y*u,R[1]=p*s+v*o+g*r+y*h,R[2]=p*T+v*t+g*a+y*c,R[3]=p*b+v*i+g*l+y*x,p=M[4],v=M[5],g=M[6],y=M[7],R[4]=p*k+v*f+g*n+y*u,R[5]=p*s+v*o+g*r+y*h,R[6]=p*T+v*t+g*a+y*c,R[7]=p*b+v*i+g*l+y*x,p=M[8],v=M[9],g=M[10],y=M[11],R[8]=p*k+v*f+g*n+y*u,R[9]=p*s+v*o+g*r+y*h,R[10]=p*T+v*t+g*a+y*c,R[11]=p*b+v*i+g*l+y*x,p=M[12],v=M[13],g=M[14],y=M[15],R[12]=p*k+v*f+g*n+y*u,R[13]=p*s+v*o+g*r+y*h,R[14]=p*T+v*t+g*a+y*c,R[15]=p*b+v*i+g*l+y*x,R}},97688:function(ee){ee.exports=function(R,e,M,k,s,T,b){var f=1/(e-M),o=1/(k-s),t=1/(T-b);return R[0]=-2*f,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=-2*o,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=2*t,R[11]=0,R[12]=(e+M)*f,R[13]=(s+k)*o,R[14]=(b+T)*t,R[15]=1,R}},51296:function(ee){ee.exports=function(R,e,M,k,s){var T=1/Math.tan(e/2),b=1/(k-s);return R[0]=T/M,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=T,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=(s+k)*b,R[11]=-1,R[12]=0,R[13]=0,R[14]=2*s*k*b,R[15]=0,R}},63688:function(ee){ee.exports=function(R,e,M,k){var s=Math.tan(e.upDegrees*Math.PI/180),T=Math.tan(e.downDegrees*Math.PI/180),b=Math.tan(e.leftDegrees*Math.PI/180),f=Math.tan(e.rightDegrees*Math.PI/180),o=2/(b+f),t=2/(s+T);return R[0]=o,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=t,R[6]=0,R[7]=0,R[8]=-(b-f)*o*.5,R[9]=(s-T)*t*.5,R[10]=k/(M-k),R[11]=-1,R[12]=0,R[13]=0,R[14]=k*M/(M-k),R[15]=0,R}},30016:function(ee){ee.exports=function(R,e,M,k){var s,T,b,f,o,t,i,n,r,a,l,u,h,c,x,p,v,g,y,m,_,d,S,w,E=k[0],C=k[1],O=k[2],P=Math.sqrt(E*E+C*C+O*O);return Math.abs(P)<1e-6?null:(E*=P=1/P,C*=P,O*=P,s=Math.sin(M),b=1-(T=Math.cos(M)),f=e[0],o=e[1],t=e[2],i=e[3],n=e[4],r=e[5],a=e[6],l=e[7],u=e[8],h=e[9],c=e[10],x=e[11],p=E*E*b+T,v=C*E*b+O*s,g=O*E*b-C*s,y=E*C*b-O*s,m=C*C*b+T,_=O*C*b+E*s,d=E*O*b+C*s,S=C*O*b-E*s,w=O*O*b+T,R[0]=f*p+n*v+u*g,R[1]=o*p+r*v+h*g,R[2]=t*p+a*v+c*g,R[3]=i*p+l*v+x*g,R[4]=f*y+n*m+u*_,R[5]=o*y+r*m+h*_,R[6]=t*y+a*m+c*_,R[7]=i*y+l*m+x*_,R[8]=f*d+n*S+u*w,R[9]=o*d+r*S+h*w,R[10]=t*d+a*S+c*w,R[11]=i*d+l*S+x*w,e!==R&&(R[12]=e[12],R[13]=e[13],R[14]=e[14],R[15]=e[15]),R)}},15456:function(ee){ee.exports=function(R,e,M){var k=Math.sin(M),s=Math.cos(M),T=e[4],b=e[5],f=e[6],o=e[7],t=e[8],i=e[9],n=e[10],r=e[11];return e!==R&&(R[0]=e[0],R[1]=e[1],R[2]=e[2],R[3]=e[3],R[12]=e[12],R[13]=e[13],R[14]=e[14],R[15]=e[15]),R[4]=T*s+t*k,R[5]=b*s+i*k,R[6]=f*s+n*k,R[7]=o*s+r*k,R[8]=t*s-T*k,R[9]=i*s-b*k,R[10]=n*s-f*k,R[11]=r*s-o*k,R}},64840:function(ee){ee.exports=function(R,e,M){var k=Math.sin(M),s=Math.cos(M),T=e[0],b=e[1],f=e[2],o=e[3],t=e[8],i=e[9],n=e[10],r=e[11];return e!==R&&(R[4]=e[4],R[5]=e[5],R[6]=e[6],R[7]=e[7],R[12]=e[12],R[13]=e[13],R[14]=e[14],R[15]=e[15]),R[0]=T*s-t*k,R[1]=b*s-i*k,R[2]=f*s-n*k,R[3]=o*s-r*k,R[8]=T*k+t*s,R[9]=b*k+i*s,R[10]=f*k+n*s,R[11]=o*k+r*s,R}},4192:function(ee){ee.exports=function(R,e,M){var k=Math.sin(M),s=Math.cos(M),T=e[0],b=e[1],f=e[2],o=e[3],t=e[4],i=e[5],n=e[6],r=e[7];return e!==R&&(R[8]=e[8],R[9]=e[9],R[10]=e[10],R[11]=e[11],R[12]=e[12],R[13]=e[13],R[14]=e[14],R[15]=e[15]),R[0]=T*s+t*k,R[1]=b*s+i*k,R[2]=f*s+n*k,R[3]=o*s+r*k,R[4]=t*s-T*k,R[5]=i*s-b*k,R[6]=n*s-f*k,R[7]=r*s-o*k,R}},68152:function(ee){ee.exports=function(R,e,M){var k=M[0],s=M[1],T=M[2];return R[0]=e[0]*k,R[1]=e[1]*k,R[2]=e[2]*k,R[3]=e[3]*k,R[4]=e[4]*s,R[5]=e[5]*s,R[6]=e[6]*s,R[7]=e[7]*s,R[8]=e[8]*T,R[9]=e[9]*T,R[10]=e[10]*T,R[11]=e[11]*T,R[12]=e[12],R[13]=e[13],R[14]=e[14],R[15]=e[15],R}},89412:function(ee){ee.exports=function(R){return"mat4("+R[0]+", "+R[1]+", "+R[2]+", "+R[3]+", "+R[4]+", "+R[5]+", "+R[6]+", "+R[7]+", "+R[8]+", "+R[9]+", "+R[10]+", "+R[11]+", "+R[12]+", "+R[13]+", "+R[14]+", "+R[15]+")"}},35176:function(ee){ee.exports=function(R,e,M){var k,s,T,b,f,o,t,i,n,r,a,l,u=M[0],h=M[1],c=M[2];return e===R?(R[12]=e[0]*u+e[4]*h+e[8]*c+e[12],R[13]=e[1]*u+e[5]*h+e[9]*c+e[13],R[14]=e[2]*u+e[6]*h+e[10]*c+e[14],R[15]=e[3]*u+e[7]*h+e[11]*c+e[15]):(k=e[0],s=e[1],T=e[2],b=e[3],f=e[4],o=e[5],t=e[6],i=e[7],n=e[8],r=e[9],a=e[10],l=e[11],R[0]=k,R[1]=s,R[2]=T,R[3]=b,R[4]=f,R[5]=o,R[6]=t,R[7]=i,R[8]=n,R[9]=r,R[10]=a,R[11]=l,R[12]=k*u+f*h+n*c+e[12],R[13]=s*u+o*h+r*c+e[13],R[14]=T*u+t*h+a*c+e[14],R[15]=b*u+i*h+l*c+e[15]),R}},86520:function(ee){ee.exports=function(R,e){if(R===e){var M=e[1],k=e[2],s=e[3],T=e[6],b=e[7],f=e[11];R[1]=e[4],R[2]=e[8],R[3]=e[12],R[4]=M,R[6]=e[9],R[7]=e[13],R[8]=k,R[9]=T,R[11]=e[14],R[12]=s,R[13]=b,R[14]=f}else R[0]=e[0],R[1]=e[4],R[2]=e[8],R[3]=e[12],R[4]=e[1],R[5]=e[5],R[6]=e[9],R[7]=e[13],R[8]=e[2],R[9]=e[6],R[10]=e[10],R[11]=e[14],R[12]=e[3],R[13]=e[7],R[14]=e[11],R[15]=e[15];return R}},23352:function(ee,R,e){var M=e(42771),k=e(55616),s=e(28624),T=e(55212),b=e(60463),f=e(72160),o=e(33888),t=e(14144),i=e(51160),n=e(58908),r=e(65819),a=e(23464),l=e(63768),u=e(50896),h=e(71920),c=e(47520),x=e(308).nextPow2,p=new b,v=!1;if(document.body){var g=document.body.appendChild(document.createElement("div"));g.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(g).fontStretch&&(v=!0),document.body.removeChild(g)}var y=function(m){(function(_){return typeof _=="function"&&_._gl&&_.prop&&_.texture&&_.buffer})(m)?(m={regl:m},this.gl=m.regl._gl):this.gl=T(m),this.shader=p.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=m.regl||s({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),p.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(n(m)?m:{})};y.prototype.createShader=function(){var m=this.regl,_=m({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:m.prop("count"),offset:m.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:m.this("sizeBuffer")},width:{offset:0,stride:8,buffer:m.this("sizeBuffer")},char:m.this("charBuffer"),position:m.this("position")},uniforms:{atlasSize:function(d,S){return[S.atlas.width,S.atlas.height]},atlasDim:function(d,S){return[S.atlas.cols,S.atlas.rows]},atlas:function(d,S){return S.atlas.texture},charStep:function(d,S){return S.atlas.step},em:function(d,S){return S.atlas.em},color:m.prop("color"),opacity:m.prop("opacity"),viewport:m.this("viewportArray"),scale:m.this("scale"),align:m.prop("align"),baseline:m.prop("baseline"),translate:m.this("translate"),positionOffset:m.prop("positionOffset")},primitive:"points",viewport:m.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`});return{regl:m,draw:_,atlas:{}}},y.prototype.update=function(m){var _=this;if(typeof m=="string")m={text:m};else if(!m)return;(m=k(m,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity!=null&&(Array.isArray(m.opacity)?this.opacity=m.opacity.map(function(he){return parseFloat(he)}):this.opacity=parseFloat(m.opacity)),m.viewport!=null&&(this.viewport=i(m.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),m.kerning!=null&&(this.kerning=m.kerning),m.offset!=null&&(typeof m.offset=="number"&&(m.offset=[m.offset,0]),this.positionOffset=c(m.offset)),m.direction&&(this.direction=m.direction),m.range&&(this.range=m.range,this.scale=[1/(m.range[2]-m.range[0]),1/(m.range[3]-m.range[1])],this.translate=[-m.range[0],-m.range[1]]),m.scale&&(this.scale=m.scale),m.translate&&(this.translate=m.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||m.font||(m.font=y.baseFontSize+"px sans-serif");var d,S=!1,w=!1;if(m.font&&(Array.isArray(m.font)?m.font:[m.font]).forEach(function(he,Se){if(typeof he=="string")try{he=M.parse(he)}catch{he=M.parse(y.baseFontSize+"px "+he)}else{var ye=he.style,we=he.weight,Me=he.stretch,Oe=he.variant;he=M.parse(M.stringify(he)),ye&&(he.style=ye),we&&(he.weight=we),Me&&(he.stretch=Me),Oe&&(he.variant=Oe)}var Ie=M.stringify({size:y.baseFontSize,family:he.family,stretch:v?he.stretch:void 0,variant:he.variant,weight:he.weight,style:he.style}),de=r(he.size),_e=Math.round(de[0]*a(de[1]));if(_e!==_.fontSize[Se]&&(w=!0,_.fontSize[Se]=_e),!(_.font[Se]&&Ie==_.font[Se].baseString||(S=!0,_.font[Se]=y.fonts[Ie],_.font[Se]))){var Ae=he.family.join(", "),Pe=[he.style];he.style!=he.variant&&Pe.push(he.variant),he.variant!=he.weight&&Pe.push(he.weight),v&&he.weight!=he.stretch&&Pe.push(he.stretch),_.font[Se]={baseString:Ie,family:Ae,weight:he.weight,stretch:he.stretch,style:he.style,variant:he.variant,width:{},kerning:{},metrics:h(Ae,{origin:"top",fontSize:y.baseFontSize,fontStyle:Pe.join(" ")})},y.fonts[Ie]=_.font[Se]}}),(S||w)&&this.font.forEach(function(he,Se){var ye=M.stringify({size:_.fontSize[Se],family:he.family,stretch:v?he.stretch:void 0,variant:he.variant,weight:he.weight,style:he.style});if(_.fontAtlas[Se]=_.shader.atlas[ye],!_.fontAtlas[Se]){var we=he.metrics;_.shader.atlas[ye]=_.fontAtlas[Se]={fontString:ye,step:2*Math.ceil(_.fontSize[Se]*we.bottom*.5),em:_.fontSize[Se],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:_.regl.texture()}}m.text==null&&(m.text=_.text)}),typeof m.text=="string"&&m.position&&m.position.length>2){for(var E=Array(.5*m.position.length),C=0;C<E.length;C++)E[C]=m.text;m.text=E}if(m.text!=null||S){if(this.textOffsets=[0],Array.isArray(m.text)){this.count=m.text[0].length,this.counts=[this.count];for(var O=1;O<m.text.length;O++)this.textOffsets[O]=this.textOffsets[O-1]+m.text[O-1].length,this.count+=m.text[O].length,this.counts.push(m.text[O].length);this.text=m.text.join("")}else this.text=m.text,this.count=this.text.length,this.counts=[this.count];d=[],this.font.forEach(function(he,Se){y.atlasContext.font=he.baseString;for(var ye=_.fontAtlas[Se],we=0;we<_.text.length;we++){var Me=_.text.charAt(we);if(ye.ids[Me]==null&&(ye.ids[Me]=ye.chars.length,ye.chars.push(Me),d.push(Me)),he.width[Me]==null&&(he.width[Me]=y.atlasContext.measureText(Me).width/y.baseFontSize,_.kerning)){var Oe=[];for(var Ie in he.width)Oe.push(Ie+Me,Me+Ie);u(he.kerning,l(he.family,{pairs:Oe}))}}})}if(m.position)if(m.position.length>2){for(var P=!m.position[0].length,z=t.mallocFloat(2*this.count),j=0,I=0;j<this.counts.length;j++){var N=this.counts[j];if(P)for(var W=0;W<N;W++)z[I++]=m.position[2*j],z[I++]=m.position[2*j+1];else for(var F=0;F<N;F++)z[I++]=m.position[j][0],z[I++]=m.position[j][1]}this.position.call?this.position({type:"float",data:z}):this.position=this.regl.buffer({type:"float",data:z}),t.freeFloat(z)}else this.position.destroy&&this.position.destroy(),this.position={constant:m.position};if(m.text||S){var U=t.mallocUint8(this.count),H=t.mallocFloat(2*this.count);this.textWidth=[];for(var ne=0,$=0;ne<this.counts.length;ne++){for(var K=this.counts[ne],Q=this.font[ne]||this.font[0],Z=this.fontAtlas[ne]||this.fontAtlas[0],X=0;X<K;X++){var te=this.text.charAt($),ae=this.text.charAt($-1);if(U[$]=Z.ids[te],H[2*$]=Q.width[te],X){var se=H[2*$-2],ce=H[2*$],fe=H[2*$-1]+.5*se+.5*ce;if(this.kerning){var pe=Q.kerning[ae+te];pe&&(fe+=.001*pe)}H[2*$+1]=fe}else H[2*$+1]=.5*H[2*$];$++}this.textWidth.push(H.length?.5*H[2*$-2]+H[2*$-1]:0)}m.align||(m.align=this.align),this.charBuffer({data:U,type:"uint8",usage:"stream"}),this.sizeBuffer({data:H,type:"float",usage:"stream"}),t.freeUint8(U),t.freeFloat(H),d.length&&this.font.forEach(function(he,Se){var ye=_.fontAtlas[Se],we=ye.step,Me=Math.floor(y.maxAtlasSize/we),Oe=Math.min(Me,ye.chars.length),Ie=Math.ceil(ye.chars.length/Oe),de=x(Oe*we),_e=x(Ie*we);ye.width=de,ye.height=_e,ye.rows=Ie,ye.cols=Oe,ye.em&&ye.texture({data:o({canvas:y.atlasCanvas,font:ye.fontString,chars:ye.chars,shape:[de,_e],step:[we,we]})})})}if(m.align&&(this.align=m.align,this.alignOffset=this.textWidth.map(function(he,Se){var ye=Array.isArray(_.align)?_.align.length>1?_.align[Se]:_.align[0]:_.align;if(typeof ye=="number")return ye;switch(ye){case"right":case"end":return-he;case"center":case"centre":case"middle":return .5*-he}return 0})),this.baseline==null&&m.baseline==null&&(m.baseline=0),m.baseline!=null&&(this.baseline=m.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(he,Se){var ye=(_.font[Se]||_.font[0]).metrics,we=0;return we+=.5*ye.bottom,-1*(we+=typeof he=="number"?he-ye.baseline:-ye[he])})),m.color!=null)if(m.color||(m.color="transparent"),typeof m.color!="string"&&isNaN(m.color)){var ge;if(typeof m.color[0]=="number"&&m.color.length>this.counts.length){var me=m.color.length;ge=t.mallocUint8(me);for(var be=(m.color.subarray||m.color.slice).bind(m.color),ke=0;ke<me;ke+=4)ge.set(f(be(ke,ke+4),"uint8"),ke)}else{var ze=m.color.length;ge=t.mallocUint8(4*ze);for(var ve=0;ve<ze;ve++)ge.set(f(m.color[ve]||0,"uint8"),4*ve)}this.color=ge}else this.color=f(m.color,"uint8");if(m.position||m.text||m.color||m.baseline||m.align||m.font||m.offset||m.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var oe=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(oe);for(var ie=0;ie<this.batch.length;ie++)this.batch[ie]={count:this.counts.length>1?this.counts[ie]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[ie]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*ie,4*ie+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[ie]:this.opacity,baseline:this.baselineOffset[ie]!=null?this.baselineOffset[ie]:this.baselineOffset[0],align:this.align?this.alignOffset[ie]!=null?this.alignOffset[ie]:this.alignOffset[0]:0,atlas:this.fontAtlas[ie]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*ie,2*ie+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]},y.prototype.destroy=function(){},y.prototype.kerning=!0,y.prototype.position={constant:new Float32Array(2)},y.prototype.translate=null,y.prototype.scale=null,y.prototype.font=null,y.prototype.text="",y.prototype.positionOffset=[0,0],y.prototype.opacity=1,y.prototype.color=new Uint8Array([0,0,0,255]),y.prototype.alignOffset=[0,0],y.maxAtlasSize=1024,y.atlasCanvas=document.createElement("canvas"),y.atlasContext=y.atlasCanvas.getContext("2d",{alpha:!1}),y.baseFontSize=64,y.fonts={},ee.exports=y},55212:function(ee,R,e){var M=e(55616);function k(b){if(b.container)if(b.container==document.body)document.body.style.width||(b.canvas.width=b.width||b.pixelRatio*e.g.innerWidth),document.body.style.height||(b.canvas.height=b.height||b.pixelRatio*e.g.innerHeight);else{var f=b.container.getBoundingClientRect();b.canvas.width=b.width||f.right-f.left,b.canvas.height=b.height||f.bottom-f.top}}function s(b){return typeof b.getContext=="function"&&"width"in b&&"height"in b}function T(){var b=document.createElement("canvas");return b.style.position="absolute",b.style.top=0,b.style.left=0,b}ee.exports=function(b){var f;if(b?typeof b=="string"&&(b={container:b}):b={},(b=s(b)||typeof(f=b).nodeName=="string"&&typeof f.appendChild=="function"&&typeof f.getBoundingClientRect=="function"?{container:b}:function(t){return typeof t.drawArrays=="function"||typeof t.drawElements=="function"}(b)?{gl:b}:M(b,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(b.pixelRatio=e.g.pixelRatio||1),b.gl)return b.gl;if(b.canvas&&(b.container=b.canvas.parentNode),b.container){if(typeof b.container=="string"){var o=document.querySelector(b.container);if(!o)throw Error("Element "+b.container+" is not found");b.container=o}s(b.container)?(b.canvas=b.container,b.container=b.canvas.parentNode):b.canvas||(b.canvas=T(),b.container.appendChild(b.canvas),k(b))}else if(!b.canvas){if(typeof document>"u")throw Error("Not DOM environment. Use headless-gl.");b.container=document.body||document.documentElement,b.canvas=T(),b.container.appendChild(b.canvas),k(b)}return b.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(t){try{b.gl=b.canvas.getContext(t,b.attrs)}catch{}return b.gl}),b.gl}},26444:function(ee){ee.exports=function(R){typeof R=="string"&&(R=[R]);for(var e=[].slice.call(arguments,1),M=[],k=0;k<R.length-1;k++)M.push(R[k],e[k]||"");return M.push(R[k]),M.join("")}},2304:function(ee,R,e){var M=e(53664)("%Object.getOwnPropertyDescriptor%",!0);if(M)try{M([],"length")}catch{M=null}ee.exports=M},52264:function(ee,R,e){var M,k=e(24200);M=typeof e.g.matchMedia=="function"?!e.g.matchMedia("(hover: none)").matches:k,ee.exports=M},89184:function(ee,R,e){var M=e(24200);ee.exports=M&&function(){var k=!1;try{var s=Object.defineProperty({},"passive",{get:function(){k=!0}});window.addEventListener("test",null,s),window.removeEventListener("test",null,s)}catch{k=!1}return k}()},39640:function(ee,R,e){var M=e(53664)("%Object.defineProperty%",!0),k=function(){if(M)try{return M({},"a",{value:1}),!0}catch{return!1}return!1};k.hasArrayLengthDefineBug=function(){if(!k())return null;try{return M([],"length",{value:1}).length!==1}catch{return!0}},ee.exports=k},69572:function(ee){var R={foo:{}},e=Object;ee.exports=function(){return{__proto__:R}.foo===R.foo&&!({__proto__:null}instanceof e)}},71080:function(ee,R,e){var M=typeof Symbol<"u"&&Symbol,k=e(89320);ee.exports=function(){return typeof M=="function"&&typeof Symbol=="function"&&typeof M("foo")=="symbol"&&typeof Symbol("bar")=="symbol"&&k()}},89320:function(ee){ee.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var R={},e=Symbol("test"),M=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(M)!=="[object Symbol]")return!1;for(e in R[e]=42,R)return!1;if(typeof Object.keys=="function"&&Object.keys(R).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(R).length!==0)return!1;var k=Object.getOwnPropertySymbols(R);if(k.length!==1||k[0]!==e||!Object.prototype.propertyIsEnumerable.call(R,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(R,e);if(s.value!==42||s.enumerable!==!0)return!1}return!0}},46672:function(ee,R,e){var M=e(89320);ee.exports=function(){return M()&&!!Symbol.toStringTag}},92064:function(ee,R,e){var M=Function.prototype.call,k=Object.prototype.hasOwnProperty,s=e(8844);ee.exports=s.call(M,k)},35984:function(ee,R){R.read=function(e,M,k,s,T){var b,f,o=8*T-s-1,t=(1<<o)-1,i=t>>1,n=-7,r=k?T-1:0,a=k?-1:1,l=e[M+r];for(r+=a,b=l&(1<<-n)-1,l>>=-n,n+=o;n>0;b=256*b+e[M+r],r+=a,n-=8);for(f=b&(1<<-n)-1,b>>=-n,n+=s;n>0;f=256*f+e[M+r],r+=a,n-=8);if(b===0)b=1-i;else{if(b===t)return f?NaN:1/0*(l?-1:1);f+=Math.pow(2,s),b-=i}return(l?-1:1)*f*Math.pow(2,b-s)},R.write=function(e,M,k,s,T,b){var f,o,t,i=8*b-T-1,n=(1<<i)-1,r=n>>1,a=T===23?Math.pow(2,-24)-Math.pow(2,-77):0,l=s?0:b-1,u=s?1:-1,h=M<0||M===0&&1/M<0?1:0;for(M=Math.abs(M),isNaN(M)||M===1/0?(o=isNaN(M)?1:0,f=n):(f=Math.floor(Math.log(M)/Math.LN2),M*(t=Math.pow(2,-f))<1&&(f--,t*=2),(M+=f+r>=1?a/t:a*Math.pow(2,1-r))*t>=2&&(f++,t/=2),f+r>=n?(o=0,f=n):f+r>=1?(o=(M*t-1)*Math.pow(2,T),f+=r):(o=M*Math.pow(2,r-1)*Math.pow(2,T),f=0));T>=8;e[k+l]=255&o,l+=u,o/=256,T-=8);for(f=f<<T|o,i+=T;i>0;e[k+l]=255&f,l+=u,f/=256,i-=8);e[k+l-u]|=128*h}},6768:function(ee){typeof Object.create=="function"?ee.exports=function(R,e){e&&(R.super_=e,R.prototype=Object.create(e.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}))}:ee.exports=function(R,e){if(e){R.super_=e;var M=function(){};M.prototype=e.prototype,R.prototype=new M,R.prototype.constructor=R}}},91148:function(ee,R,e){var M=e(46672)(),k=e(99676)("Object.prototype.toString"),s=function(f){return!(M&&f&&typeof f=="object"&&Symbol.toStringTag in f)&&k(f)==="[object Arguments]"},T=function(f){return!!s(f)||f!==null&&typeof f=="object"&&typeof f.length=="number"&&f.length>=0&&k(f)!=="[object Array]"&&k(f.callee)==="[object Function]"},b=function(){return s(arguments)}();s.isLegacyArguments=T,ee.exports=b?s:T},24200:function(ee){ee.exports=!0},90720:function(ee){var R,e,M=Function.prototype.toString,k=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply;if(typeof k=="function"&&typeof Object.defineProperty=="function")try{R=Object.defineProperty({},"length",{get:function(){throw e}}),e={},k(function(){throw 42},null,R)}catch(r){r!==e&&(k=null)}else k=null;var s=/^\s*class\b/,T=function(r){try{var a=M.call(r);return s.test(a)}catch{return!1}},b=function(r){try{return!T(r)&&(M.call(r),!0)}catch{return!1}},f=Object.prototype.toString,o=typeof Symbol=="function"&&!!Symbol.toStringTag,t=!(0 in[,]),i=function(){return!1};if(typeof document=="object"){var n=document.all;f.call(n)===f.call(document.all)&&(i=function(r){if((t||!r)&&(r===void 0||typeof r=="object"))try{var a=f.call(r);return(a==="[object HTMLAllCollection]"||a==="[object HTML document.all class]"||a==="[object HTMLCollection]"||a==="[object Object]")&&r("")==null}catch{}return!1})}ee.exports=k?function(r){if(i(r))return!0;if(!r||typeof r!="function"&&typeof r!="object")return!1;try{k(r,null,R)}catch(a){if(a!==e)return!1}return!T(r)&&b(r)}:function(r){if(i(r))return!0;if(!r||typeof r!="function"&&typeof r!="object")return!1;if(o)return b(r);if(T(r))return!1;var a=f.call(r);return!(a!=="[object Function]"&&a!=="[object GeneratorFunction]"&&!/^\[object HTML/.test(a))&&b(r)}},84420:function(ee,R,e){var M,k=Object.prototype.toString,s=Function.prototype.toString,T=/^\s*(?:function)?\*/,b=e(46672)(),f=Object.getPrototypeOf;ee.exports=function(o){if(typeof o!="function")return!1;if(T.test(s.call(o)))return!0;if(!b)return k.call(o)==="[object GeneratorFunction]";if(!f)return!1;if(M===void 0){var t=function(){if(!b)return!1;try{return Function("return function*() {}")()}catch{}}();M=!!t&&f(t)}return f(o)===M}},96604:function(ee){ee.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},85992:function(ee){ee.exports=function(R){return R!=R}},1560:function(ee,R,e){var M=e(57916),k=e(81288),s=e(85992),T=e(57740),b=e(59736),f=M(T(),Number);k(f,{getPolyfill:T,implementation:s,shim:b}),ee.exports=f},57740:function(ee,R,e){var M=e(85992);ee.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:M}},59736:function(ee,R,e){var M=e(81288),k=e(57740);ee.exports=function(){var s=k();return M(Number,{isNaN:s},{isNaN:function(){return Number.isNaN!==s}}),s}},18400:function(ee){ee.exports=function(R){var e=typeof R;return R!==null&&(e==="object"||e==="function")}},58908:function(ee){var R=Object.prototype.toString;ee.exports=function(e){var M;return R.call(e)==="[object Object]"&&((M=Object.getPrototypeOf(e))===null||M===Object.getPrototypeOf({}))}},94576:function(ee){ee.exports=function(R){for(var e,M=R.length,k=0;k<M;k++)if(((e=R.charCodeAt(k))<9||e>13)&&e!==32&&e!==133&&e!==160&&e!==5760&&e!==6158&&(e<8192||e>8205)&&e!==8232&&e!==8233&&e!==8239&&e!==8287&&e!==8288&&e!==12288&&e!==65279)return!1;return!0}},53520:function(ee){ee.exports=function(R){return typeof R=="string"&&(R=R.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(R)&&/[\dz]$/i.test(R)&&R.length>4))}},7728:function(ee,R,e){var M=e(46492),k=e(63436),s=e(99676),T=s("Object.prototype.toString"),b=e(46672)(),f=e(2304),o=typeof globalThis>"u"?e.g:globalThis,t=k(),i=s("Array.prototype.indexOf",!0)||function(l,u){for(var h=0;h<l.length;h+=1)if(l[h]===u)return h;return-1},n=s("String.prototype.slice"),r={},a=Object.getPrototypeOf;b&&f&&a&&M(t,function(l){var u=new o[l];if(Symbol.toStringTag in u){var h=a(u),c=f(h,Symbol.toStringTag);if(!c){var x=a(h);c=f(x,Symbol.toStringTag)}r[l]=c.get}}),ee.exports=function(l){if(!l||typeof l!="object")return!1;if(!b||!(Symbol.toStringTag in l)){var u=n(T(l),8,-1);return i(t,u)>-1}return!!f&&function(h){var c=!1;return M(r,function(x,p){if(!c)try{c=x.call(h)===p}catch{}}),c}(l)}},76244:function(ee){ee.exports=Math.log2||function(R){return Math.log(R)*Math.LOG2E}},62644:function(ee,R,e){ee.exports=function(k,s){s||(s=k,k=window);var T=0,b=0,f=0,o={shift:!1,alt:!1,control:!1,meta:!1},t=!1;function i(v){var g=!1;return"altKey"in v&&(g=g||v.altKey!==o.alt,o.alt=!!v.altKey),"shiftKey"in v&&(g=g||v.shiftKey!==o.shift,o.shift=!!v.shiftKey),"ctrlKey"in v&&(g=g||v.ctrlKey!==o.control,o.control=!!v.ctrlKey),"metaKey"in v&&(g=g||v.metaKey!==o.meta,o.meta=!!v.metaKey),g}function n(v,g){var y=M.x(g),m=M.y(g);"buttons"in g&&(v=0|g.buttons),(v!==T||y!==b||m!==f||i(g))&&(T=0|v,b=y||0,f=m||0,s&&s(T,b,f,o))}function r(v){n(0,v)}function a(){(T||b||f||o.shift||o.alt||o.meta||o.control)&&(b=f=0,T=0,o.shift=o.alt=o.control=o.meta=!1,s&&s(0,0,0,o))}function l(v){i(v)&&s&&s(T,b,f,o)}function u(v){M.buttons(v)===0?n(0,v):n(T,v)}function h(v){n(T|M.buttons(v),v)}function c(v){n(T&~M.buttons(v),v)}function x(){t||(t=!0,k.addEventListener("mousemove",u),k.addEventListener("mousedown",h),k.addEventListener("mouseup",c),k.addEventListener("mouseleave",r),k.addEventListener("mouseenter",r),k.addEventListener("mouseout",r),k.addEventListener("mouseover",r),k.addEventListener("blur",a),k.addEventListener("keyup",l),k.addEventListener("keydown",l),k.addEventListener("keypress",l),k!==window&&(window.addEventListener("blur",a),window.addEventListener("keyup",l),window.addEventListener("keydown",l),window.addEventListener("keypress",l)))}x();var p={element:k};return Object.defineProperties(p,{enabled:{get:function(){return t},set:function(v){v?x():t&&(t=!1,k.removeEventListener("mousemove",u),k.removeEventListener("mousedown",h),k.removeEventListener("mouseup",c),k.removeEventListener("mouseleave",r),k.removeEventListener("mouseenter",r),k.removeEventListener("mouseout",r),k.removeEventListener("mouseover",r),k.removeEventListener("blur",a),k.removeEventListener("keyup",l),k.removeEventListener("keydown",l),k.removeEventListener("keypress",l),k!==window&&(window.removeEventListener("blur",a),window.removeEventListener("keyup",l),window.removeEventListener("keydown",l),window.removeEventListener("keypress",l)))},enumerable:!0},buttons:{get:function(){return T},enumerable:!0},x:{get:function(){return b},enumerable:!0},y:{get:function(){return f},enumerable:!0},mods:{get:function(){return o},enumerable:!0}}),p};var M=e(93784)},29128:function(ee){var R={left:0,top:0};ee.exports=function(e,M,k){M=M||e.currentTarget||e.srcElement,Array.isArray(k)||(k=[0,0]);var s,T=e.clientX||0,b=e.clientY||0,f=(s=M)===window||s===document||s===document.body?R:s.getBoundingClientRect();return k[0]=T-f.left,k[1]=b-f.top,k}},93784:function(ee,R){function e(M){return M.target||M.srcElement||window}R.buttons=function(M){if(typeof M=="object"){if("buttons"in M)return M.buttons;if("which"in M){if((k=M.which)===2)return 4;if(k===3)return 2;if(k>0)return 1<<k-1}else if("button"in M){var k;if((k=M.button)===1)return 4;if(k===2)return 2;if(k>=0)return 1<<k}}return 0},R.element=e,R.x=function(M){if(typeof M=="object"){if("offsetX"in M)return M.offsetX;var k=e(M).getBoundingClientRect();return M.clientX-k.left}return 0},R.y=function(M){if(typeof M=="object"){if("offsetY"in M)return M.offsetY;var k=e(M).getBoundingClientRect();return M.clientY-k.top}return 0}},97264:function(ee,R,e){var M=e(23464);ee.exports=function(k,s,T){typeof k=="function"&&(T=!!s,s=k,k=window);var b=M("ex",k),f=function(o){T&&o.preventDefault();var t=o.deltaX||0,i=o.deltaY||0,n=o.deltaZ||0,r=1;switch(o.deltaMode){case 1:r=b;break;case 2:r=window.innerHeight}if(i*=r,n*=r,(t*=r)||i||n)return s(t,i,n,o)};return k.addEventListener("wheel",f),f}},88324:function(ee,R,e){var M;(function(k,s,T){s[k]=s[k]||function(){var b,f,o,t=Object.prototype.toString,i=typeof setImmediate<"u"?function(y){return setImmediate(y)}:setTimeout;try{Object.defineProperty({},"x",{}),b=function(y,m,_,d){return Object.defineProperty(y,m,{value:_,writable:!0,configurable:d!==!1})}}catch{b=function(m,_,d){return m[_]=d,m}}function n(y,m){o.add(y,m),f||(f=i(o.drain))}function r(y){var m,_=typeof y;return y==null||_!="object"&&_!="function"||(m=y.then),typeof m=="function"&&m}function a(){for(var y=0;y<this.chain.length;y++)l(this,this.state===1?this.chain[y].success:this.chain[y].failure,this.chain[y]);this.chain.length=0}function l(y,m,_){var d,S;try{m===!1?_.reject(y.msg):(d=m===!0?y.msg:m.call(void 0,y.msg))===_.promise?_.reject(TypeError("Promise-chain cycle")):(S=r(d))?S.call(d,_.resolve,_.reject):_.resolve(d)}catch(w){_.reject(w)}}function u(y){var m,_=this;if(!_.triggered){_.triggered=!0,_.def&&(_=_.def);try{(m=r(y))?n(function(){var d=new x(_);try{m.call(y,function(){u.apply(d,arguments)},function(){h.apply(d,arguments)})}catch(S){h.call(d,S)}}):(_.msg=y,_.state=1,_.chain.length>0&&n(a,_))}catch(d){h.call(new x(_),d)}}}function h(y){var m=this;m.triggered||(m.triggered=!0,m.def&&(m=m.def),m.msg=y,m.state=2,m.chain.length>0&&n(a,m))}function c(y,m,_,d){for(var S=0;S<m.length;S++)(function(w){y.resolve(m[w]).then(function(E){_(w,E)},d)})(S)}function x(y){this.def=y,this.triggered=!1}function p(y){this.promise=y,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function v(y){if(typeof y!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var m=new p(this);this.then=function(_,d){var S={success:typeof _!="function"||_,failure:typeof d=="function"&&d};return S.promise=new this.constructor(function(w,E){if(typeof w!="function"||typeof E!="function")throw TypeError("Not a function");S.resolve=w,S.reject=E}),m.chain.push(S),m.state!==0&&n(a,m),S.promise},this.catch=function(_){return this.then(void 0,_)};try{y.call(void 0,function(_){u.call(m,_)},function(_){h.call(m,_)})}catch(_){h.call(m,_)}}o=function(){var y,m,_;function d(S,w){this.fn=S,this.self=w,this.next=void 0}return{add:function(S,w){_=new d(S,w),m?m.next=_:y=_,m=_,_=void 0},drain:function(){var S=y;for(y=m=f=void 0;S;)S.fn.call(S.self),S=S.next}}}();var g=b({},"constructor",v,!1);return v.prototype=g,b(g,"__NPO__",0,!1),b(v,"resolve",function(y){return y&&typeof y=="object"&&y.__NPO__===1?y:new this(function(m,_){if(typeof m!="function"||typeof _!="function")throw TypeError("Not a function");m(y)})}),b(v,"reject",function(y){return new this(function(m,_){if(typeof m!="function"||typeof _!="function")throw TypeError("Not a function");_(y)})}),b(v,"all",function(y){var m=this;return t.call(y)!="[object Array]"?m.reject(TypeError("Not an array")):y.length===0?m.resolve([]):new m(function(_,d){if(typeof _!="function"||typeof d!="function")throw TypeError("Not a function");var S=y.length,w=Array(S),E=0;c(m,y,function(C,O){w[C]=O,++E===S&&_(w)},d)})}),b(v,"race",function(y){var m=this;return t.call(y)!="[object Array]"?m.reject(TypeError("Not an array")):new m(function(_,d){if(typeof _!="function"||typeof d!="function")throw TypeError("Not a function");c(m,y,function(S,w){_(w)},d)})}),v}(),ee.exports?ee.exports=s[k]:(M=(function(){return s[k]}).call(R,e,R,ee))===void 0||(ee.exports=M)})("Promise",e.g!==void 0?e.g:this)},48816:function(ee){var R=Math.PI,e=b(120);function M(f,o,t,i){return["C",f,o,t,i,t,i]}function k(f,o,t,i,n,r){return["C",f/3+.6666666666666666*t,o/3+.6666666666666666*i,n/3+.6666666666666666*t,r/3+.6666666666666666*i,n,r]}function s(f,o,t,i,n,r,a,l,u,h){if(h)S=h[0],w=h[1],_=h[2],d=h[3];else{var c=T(f,o,-n);f=c.x,o=c.y;var x=(f-(l=(c=T(l,u,-n)).x))/2,p=(o-(u=c.y))/2,v=x*x/(t*t)+p*p/(i*i);v>1&&(t*=v=Math.sqrt(v),i*=v);var g=t*t,y=i*i,m=(r==a?-1:1)*Math.sqrt(Math.abs((g*y-g*p*p-y*x*x)/(g*p*p+y*x*x)));m==1/0&&(m=1);var _=m*t*p/i+(f+l)/2,d=m*-i*x/t+(o+u)/2,S=Math.asin(((o-d)/i).toFixed(9)),w=Math.asin(((u-d)/i).toFixed(9));(S=f<_?R-S:S)<0&&(S=2*R+S),(w=l<_?R-w:w)<0&&(w=2*R+w),a&&S>w&&(S-=2*R),!a&&w>S&&(w-=2*R)}if(Math.abs(w-S)>e){var E=w,C=l,O=u;w=S+e*(a&&w>S?1:-1);var P=s(l=_+t*Math.cos(w),u=d+i*Math.sin(w),t,i,n,0,a,C,O,[w,E,_,d])}var z=Math.tan((w-S)/4),j=4/3*t*z,I=4/3*i*z,N=[2*f-(f+j*Math.sin(S)),2*o-(o-I*Math.cos(S)),l+j*Math.sin(w),u-I*Math.cos(w),l,u];if(h)return N;P&&(N=N.concat(P));for(var W=0;W<N.length;){var F=T(N[W],N[W+1],n);N[W++]=F.x,N[W++]=F.y}return N}function T(f,o,t){return{x:f*Math.cos(t)-o*Math.sin(t),y:f*Math.sin(t)+o*Math.cos(t)}}function b(f){return f*(R/180)}ee.exports=function(f){for(var o,t=[],i=0,n=0,r=0,a=0,l=null,u=null,h=0,c=0,x=0,p=f.length;x<p;x++){var v=f[x],g=v[0];switch(g){case"M":r=v[1],a=v[2];break;case"A":(v=s(h,c,v[1],v[2],b(v[3]),v[4],v[5],v[6],v[7])).unshift("C"),v.length>7&&(t.push(v.splice(0,7)),v.unshift("C"));break;case"S":var y=h,m=c;o!="C"&&o!="S"||(y+=y-i,m+=m-n),v=["C",y,m,v[1],v[2],v[3],v[4]];break;case"T":o=="Q"||o=="T"?(l=2*h-l,u=2*c-u):(l=h,u=c),v=k(h,c,l,u,v[1],v[2]);break;case"Q":l=v[1],u=v[2],v=k(h,c,v[1],v[2],v[3],v[4]);break;case"L":v=M(h,c,v[1],v[2]);break;case"H":v=M(h,c,v[1],c);break;case"V":v=M(h,c,h,v[1]);break;case"Z":v=M(h,c,r,a)}o=g,h=v[v.length-2],c=v[v.length-1],v.length>4?(i=v[v.length-4],n=v[v.length-3]):(i=h,n=c),t.push(v)}return t}},50896:function(ee){var R=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;ee.exports=function(){try{if(!Object.assign)return!1;var k=new String("abc");if(k[5]="de",Object.getOwnPropertyNames(k)[0]==="5")return!1;for(var s={},T=0;T<10;T++)s["_"+String.fromCharCode(T)]=T;if(Object.getOwnPropertyNames(s).map(function(f){return s[f]}).join("")!=="0123456789")return!1;var b={};return"abcdefghijklmnopqrst".split("").forEach(function(f){b[f]=f}),Object.keys(Object.assign({},b)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(k,s){for(var T,b,f=function(n){if(n==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}(k),o=1;o<arguments.length;o++){for(var t in T=Object(arguments[o]))e.call(T,t)&&(f[t]=T[t]);if(R){b=R(T);for(var i=0;i<b.length;i++)M.call(T,b[i])&&(f[b[i]]=T[b[i]])}}return f}},76835:function(ee){var R=function(e){return e!=e};ee.exports=function(e,M){return e===0&&M===0?1/e==1/M:e===M||!(!R(e)||!R(M))}},39896:function(ee,R,e){var M=e(81288),k=e(57916),s=e(76835),T=e(66148),b=e(16408),f=k(T(),Object);M(f,{getPolyfill:T,implementation:s,shim:b}),ee.exports=f},66148:function(ee,R,e){var M=e(76835);ee.exports=function(){return typeof Object.is=="function"?Object.is:M}},16408:function(ee,R,e){var M=e(66148),k=e(81288);ee.exports=function(){var s=M();return k(Object,{is:s},{is:function(){return Object.is!==s}}),s}},32764:function(ee,R,e){var M;if(!Object.keys){var k=Object.prototype.hasOwnProperty,s=Object.prototype.toString,T=e(97344),b=Object.prototype.propertyIsEnumerable,f=!b.call({toString:null},"toString"),o=b.call(function(){},"prototype"),t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=function(a){var l=a.constructor;return l&&l.prototype===a},n={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},r=function(){if(typeof window>"u")return!1;for(var a in window)try{if(!n["$"+a]&&k.call(window,a)&&window[a]!==null&&typeof window[a]=="object")try{i(window[a])}catch{return!0}}catch{return!0}return!1}();M=function(a){var l=a!==null&&typeof a=="object",u=s.call(a)==="[object Function]",h=T(a),c=l&&s.call(a)==="[object String]",x=[];if(!l&&!u&&!h)throw new TypeError("Object.keys called on a non-object");var p=o&&u;if(c&&a.length>0&&!k.call(a,0))for(var v=0;v<a.length;++v)x.push(String(v));if(h&&a.length>0)for(var g=0;g<a.length;++g)x.push(String(g));else for(var y in a)p&&y==="prototype"||!k.call(a,y)||x.push(String(y));if(f)for(var m=function(d){if(typeof window>"u"||!r)return i(d);try{return i(d)}catch{return!1}}(a),_=0;_<t.length;++_)m&&t[_]==="constructor"||!k.call(a,t[_])||x.push(t[_]);return x}}ee.exports=M},41820:function(ee,R,e){var M=Array.prototype.slice,k=e(97344),s=Object.keys,T=s?function(f){return s(f)}:e(32764),b=Object.keys;T.shim=function(){if(Object.keys){var f=function(){var o=Object.keys(arguments);return o&&o.length===arguments.length}(1,2);f||(Object.keys=function(o){return k(o)?b(M.call(o)):b(o)})}else Object.keys=T;return Object.keys||T},ee.exports=T},97344:function(ee){var R=Object.prototype.toString;ee.exports=function(e){var M=R.call(e),k=M==="[object Arguments]";return k||(k=M!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&R.call(e.callee)==="[object Function]"),k}},32868:function(ee){function R(k,s){if(typeof k!="string")return[k];var T=[k];typeof s=="string"||Array.isArray(s)?s={brackets:s}:s||(s={});var b=s.brackets?Array.isArray(s.brackets)?s.brackets:[s.brackets]:["{}","[]","()"],f=s.escape||"___",o=!!s.flat;b.forEach(function(i){var n=new RegExp(["\\",i[0],"[^\\",i[0],"\\",i[1],"]*\\",i[1]].join("")),r=[];function a(l,u,h){var c=T.push(l.slice(i[0].length,-i[1].length))-1;return r.push(c),f+c+f}T.forEach(function(l,u){for(var h,c=0;l!=h;)if(h=l,l=l.replace(n,a),c++>1e4)throw Error("References have circular dependency. Please, check them.");T[u]=l}),r=r.reverse(),T=T.map(function(l){return r.forEach(function(u){l=l.replace(new RegExp("(\\"+f+u+"\\"+f+")","g"),i[0]+"$1"+i[1])}),l})});var t=new RegExp("\\"+f+"([0-9]+)\\"+f);return o?T:function i(n,r,a){for(var l,u=[],h=0;l=t.exec(n);){if(h++>1e4)throw Error("Circular references in parenthesis");u.push(n.slice(0,l.index)),u.push(i(r[l[1]],r)),n=n.slice(l.index+l[0].length)}return u.push(n),u}(T[0],T)}function e(k,s){if(s&&s.flat){var T,b=s&&s.escape||"___",f=k[0];if(!f)return"";for(var o=new RegExp("\\"+b+"([0-9]+)\\"+b),t=0;f!=T;){if(t++>1e4)throw Error("Circular references in "+k);T=f,f=f.replace(o,i)}return f}return k.reduce(function n(r,a){return Array.isArray(a)&&(a=a.reduce(n,"")),r+a},"");function i(n,r){if(k[r]==null)throw Error("Reference "+r+"is undefined");return k[r]}}function M(k,s){return Array.isArray(k)?e(k,s):R(k,s)}M.parse=R,M.stringify=e,ee.exports=M},51160:function(ee,R,e){var M=e(55616);ee.exports=function(k){var s;return arguments.length>1&&(k=arguments),typeof k=="string"?k=k.split(/\s/).map(parseFloat):typeof k=="number"&&(k=[k]),k.length&&typeof k[0]=="number"?s=k.length===1?{width:k[0],height:k[0],x:0,y:0}:k.length===2?{width:k[0],height:k[1],x:0,y:0}:{x:k[0],y:k[1],width:k[2]-k[0]||0,height:k[3]-k[1]||0}:k&&(s={x:(k=M(k,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:k.top||0},k.width==null?k.right?s.width=k.right-s.x:s.width=0:s.width=k.width,k.height==null?k.bottom?s.height=k.bottom-s.y:s.height=0:s.height=k.height),s}},21984:function(ee){ee.exports=function(k){var s=[];return k.replace(e,function(T,b,f){var o=b.toLowerCase();for(f=function(t){var i=t.match(M);return i?i.map(Number):[]}(f),o=="m"&&f.length>2&&(s.push([b].concat(f.splice(0,2))),o="l",b=b=="m"?"l":"L");;){if(f.length==R[o])return f.unshift(b),s.push(f);if(f.length<R[o])throw new Error("malformed path data");s.push([b].concat(f.splice(0,R[o])))}}),s};var R={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/gi,M=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},65819:function(ee){ee.exports=function(R,e){e||(e=[0,""]),R=String(R);var M=parseFloat(R,10);return e[0]=M,e[1]=R.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},41984:function(ee,R,e){var M=e(4168);(function(){var k,s,T,b,f,o;typeof performance<"u"&&performance!==null&&performance.now?ee.exports=function(){return performance.now()}:M!=null&&M.hrtime?(ee.exports=function(){return(k()-f)/1e6},s=M.hrtime,b=(k=function(){var t;return 1e9*(t=s())[0]+t[1]})(),o=1e9*M.uptime(),f=b-o):Date.now?(ee.exports=function(){return Date.now()-T},T=Date.now()):(ee.exports=function(){return new Date().getTime()-T},T=new Date().getTime())}).call(this)},55616:function(ee){ee.exports=function(M,k,s){var T,b,f={};if(typeof k=="string"&&(k=e(k)),Array.isArray(k)){var o={};for(b=0;b<k.length;b++)o[k[b]]=!0;k=o}for(T in k)k[T]=e(k[T]);var t={};for(T in k){var i=k[T];if(Array.isArray(i))for(b=0;b<i.length;b++){var n=i[b];if(s&&(t[n]=!0),n in M){if(f[T]=M[n],s)for(var r=b;r<i.length;r++)t[i[r]]=!0;break}}else T in M&&(k[T]&&(f[T]=M[T]),s&&(t[T]=!0))}if(s)for(T in M)t[T]||(f[T]=M[T]);return f};var R={};function e(M){return R[M]?R[M]:(typeof M=="string"&&(M=R[M]=M.split(/\s*,\s*|\s+/)),M)}},61456:function(ee){ee.exports=function(R,e,M,k){var s=R[0],T=R[1],b=!1;M===void 0&&(M=0),k===void 0&&(k=e.length);for(var f=k-M,o=0,t=f-1;o<f;t=o++){var i=e[o+M][0],n=e[o+M][1],r=e[t+M][0],a=e[t+M][1];n>T!=a>T&&s<(r-i)*(T-n)/(a-n)+i&&(b=!b)}return b}},14756:function(ee,R,e){var M,k=e(7688),s=e(28648),T=e(72200),b=e(11403),f=e(82368),o=e(17792),t=!1,i=s();function n(r,a,l){var u=M.segments(r),h=M.segments(a),c=l(M.combine(u,h));return M.polygon(c)}M={buildLog:function(r){return r===!0?t=k():r===!1&&(t=!1),t!==!1&&t.list},epsilon:function(r){return i.epsilon(r)},segments:function(r){var a=T(!0,i,t);return r.regions.forEach(a.addRegion),{segments:a.calculate(r.inverted),inverted:r.inverted}},combine:function(r,a){return{combined:T(!1,i,t).calculate(r.segments,r.inverted,a.segments,a.inverted),inverted1:r.inverted,inverted2:a.inverted}},selectUnion:function(r){return{segments:f.union(r.combined,t),inverted:r.inverted1||r.inverted2}},selectIntersect:function(r){return{segments:f.intersect(r.combined,t),inverted:r.inverted1&&r.inverted2}},selectDifference:function(r){return{segments:f.difference(r.combined,t),inverted:r.inverted1&&!r.inverted2}},selectDifferenceRev:function(r){return{segments:f.differenceRev(r.combined,t),inverted:!r.inverted1&&r.inverted2}},selectXor:function(r){return{segments:f.xor(r.combined,t),inverted:r.inverted1!==r.inverted2}},polygon:function(r){return{regions:b(r.segments,i,t),inverted:r.inverted}},polygonFromGeoJSON:function(r){return o.toPolygon(M,r)},polygonToGeoJSON:function(r){return o.fromPolygon(M,i,r)},union:function(r,a){return n(r,a,M.selectUnion)},intersect:function(r,a){return n(r,a,M.selectIntersect)},difference:function(r,a){return n(r,a,M.selectDifference)},differenceRev:function(r,a){return n(r,a,M.selectDifferenceRev)},xor:function(r,a){return n(r,a,M.selectXor)}},typeof window=="object"&&(window.PolyBool=M),ee.exports=M},7688:function(ee){ee.exports=function(){var R,e=0,M=!1;function k(s,T){return R.list.push({type:s,data:T?JSON.parse(JSON.stringify(T)):void 0}),R}return R={list:[],segmentId:function(){return e++},checkIntersection:function(s,T){return k("check",{seg1:s,seg2:T})},segmentChop:function(s,T){return k("div_seg",{seg:s,pt:T}),k("chop",{seg:s,pt:T})},statusRemove:function(s){return k("pop_seg",{seg:s})},segmentUpdate:function(s){return k("seg_update",{seg:s})},segmentNew:function(s,T){return k("new_seg",{seg:s,primary:T})},segmentRemove:function(s){return k("rem_seg",{seg:s})},tempStatus:function(s,T,b){return k("temp_status",{seg:s,above:T,below:b})},rewind:function(s){return k("rewind",{seg:s})},status:function(s,T,b){return k("status",{seg:s,above:T,below:b})},vert:function(s){return s===M?R:(M=s,k("vert",{x:s}))},log:function(s){return typeof s!="string"&&(s=JSON.stringify(s,!1,"  ")),k("log",{txt:s})},reset:function(){return k("reset")},selected:function(s){return k("selected",{segs:s})},chainStart:function(s){return k("chain_start",{seg:s})},chainRemoveHead:function(s,T){return k("chain_rem_head",{index:s,pt:T})},chainRemoveTail:function(s,T){return k("chain_rem_tail",{index:s,pt:T})},chainNew:function(s,T){return k("chain_new",{pt1:s,pt2:T})},chainMatch:function(s){return k("chain_match",{index:s})},chainClose:function(s){return k("chain_close",{index:s})},chainAddHead:function(s,T){return k("chain_add_head",{index:s,pt:T})},chainAddTail:function(s,T){return k("chain_add_tail",{index:s,pt:T})},chainConnect:function(s,T){return k("chain_con",{index1:s,index2:T})},chainReverse:function(s){return k("chain_rev",{index:s})},chainJoin:function(s,T){return k("chain_join",{index1:s,index2:T})},done:function(){return k("done")}}}},28648:function(ee){ee.exports=function(R){typeof R!="number"&&(R=1e-10);var e={epsilon:function(M){return typeof M=="number"&&(R=M),R},pointAboveOrOnLine:function(M,k,s){var T=k[0],b=k[1],f=s[0],o=s[1],t=M[0];return(f-T)*(M[1]-b)-(o-b)*(t-T)>=-R},pointBetween:function(M,k,s){var T=M[1]-k[1],b=s[0]-k[0],f=M[0]-k[0],o=s[1]-k[1],t=f*b+T*o;return!(t<R||t-(b*b+o*o)>-R)},pointsSameX:function(M,k){return Math.abs(M[0]-k[0])<R},pointsSameY:function(M,k){return Math.abs(M[1]-k[1])<R},pointsSame:function(M,k){return e.pointsSameX(M,k)&&e.pointsSameY(M,k)},pointsCompare:function(M,k){return e.pointsSameX(M,k)?e.pointsSameY(M,k)?0:M[1]<k[1]?-1:1:M[0]<k[0]?-1:1},pointsCollinear:function(M,k,s){var T=M[0]-k[0],b=M[1]-k[1],f=k[0]-s[0],o=k[1]-s[1];return Math.abs(T*o-f*b)<R},linesIntersect:function(M,k,s,T){var b=k[0]-M[0],f=k[1]-M[1],o=T[0]-s[0],t=T[1]-s[1],i=b*t-f*o;if(Math.abs(i)<R)return!1;var n=M[0]-s[0],r=M[1]-s[1],a=(o*r-t*n)/i,l=(b*r-f*n)/i,u={alongA:0,alongB:0,pt:[M[0]+a*b,M[1]+a*f]};return u.alongA=a<=-R?-2:a<R?-1:a-1<=-R?0:a-1<R?1:2,u.alongB=l<=-R?-2:l<R?-1:l-1<=-R?0:l-1<R?1:2,u},pointInsideRegion:function(M,k){for(var s=M[0],T=M[1],b=k[k.length-1][0],f=k[k.length-1][1],o=!1,t=0;t<k.length;t++){var i=k[t][0],n=k[t][1];n-T>R!=f-T>R&&(b-i)*(T-n)/(f-n)+i-s>R&&(o=!o),b=i,f=n}return o}};return e}},17792:function(ee){var R={toPolygon:function(e,M){function k(b){if(b.length<=0)return e.segments({inverted:!1,regions:[]});function f(i){var n=i.slice(0,i.length-1);return e.segments({inverted:!1,regions:[n]})}for(var o=f(b[0]),t=1;t<b.length;t++)o=e.selectDifference(e.combine(o,f(b[t])));return o}if(M.type==="Polygon")return e.polygon(k(M.coordinates));if(M.type==="MultiPolygon"){for(var s=e.segments({inverted:!1,regions:[]}),T=0;T<M.coordinates.length;T++)s=e.selectUnion(e.combine(s,k(M.coordinates[T])));return e.polygon(s)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,M,k){function s(l,u){return M.pointInsideRegion([.5*(l[0][0]+l[1][0]),.5*(l[0][1]+l[1][1])],u)}function T(l){return{region:l,children:[]}}k=e.polygon(e.segments(k));var b=T(null);function f(l,u){for(var h=0;h<l.children.length;h++)if(s(u,(x=l.children[h]).region))return void f(x,u);var c=T(u);for(h=0;h<l.children.length;h++){var x;s((x=l.children[h]).region,u)&&(c.children.push(x),l.children.splice(h,1),h--)}l.children.push(c)}for(var o=0;o<k.regions.length;o++){var t=k.regions[o];t.length<3||f(b,t)}function i(l,u){for(var h=0,c=l[l.length-1][0],x=l[l.length-1][1],p=[],v=0;v<l.length;v++){var g=l[v][0],y=l[v][1];p.push([g,y]),h+=y*c-g*x,c=g,x=y}return h<0!==u&&p.reverse(),p.push([p[0][0],p[0][1]]),p}var n=[];function r(l){var u=[i(l.region,!1)];n.push(u);for(var h=0;h<l.children.length;h++)u.push(a(l.children[h]))}function a(l){for(var u=0;u<l.children.length;u++)r(l.children[u]);return i(l.region,!0)}for(o=0;o<b.children.length;o++)r(b.children[o]);return n.length<=0?{type:"Polygon",coordinates:[]}:n.length==1?{type:"Polygon",coordinates:n[0]}:{type:"MultiPolygon",coordinates:n}}};ee.exports=R},72200:function(ee,R,e){var M=e(48088);ee.exports=function(k,s,T){function b(r,a,l){return{id:T?T.segmentId():-1,start:r,end:a,myFill:{above:l.myFill.above,below:l.myFill.below},otherFill:null}}var f=M.create();function o(r,a){f.insertBefore(r,function(l){return u=r.isStart,h=r.pt,c=a,x=l.isStart,p=l.pt,v=l.other.pt,((g=s.pointsCompare(h,p))!==0?g:s.pointsSame(c,v)?0:u!==x?u?1:-1:s.pointAboveOrOnLine(c,x?p:v,x?v:p)?1:-1)<0;var u,h,c,x,p,v,g})}function t(r,a){var l=function(u,h){var c=M.node({isStart:!0,pt:u.start,seg:u,primary:h,other:null,status:null});return o(c,u.end),c}(r,a);return function(u,h,c){var x=M.node({isStart:!1,pt:h.end,seg:h,primary:c,other:u,status:null});u.other=x,o(x,u.pt)}(l,r,a),l}function i(r,a){var l=b(a,r.seg.end,r.seg);return function(u,h){T&&T.segmentChop(u.seg,h),u.other.remove(),u.seg.end=h,u.other.pt=h,o(u.other,u.pt)}(r,a),t(l,r.primary)}function n(r,a){var l=M.create();function u(w){return l.findTransition(function(E){var C,O,P,z,j,I;return C=w,O=E.ev,P=C.seg.start,z=C.seg.end,j=O.seg.start,I=O.seg.end,(s.pointsCollinear(P,j,I)?s.pointsCollinear(z,j,I)||s.pointAboveOrOnLine(z,j,I)?1:-1:s.pointAboveOrOnLine(P,j,I)?1:-1)>0})}function h(w,E){var C=w.seg,O=E.seg,P=C.start,z=C.end,j=O.start,I=O.end;T&&T.checkIntersection(C,O);var N=s.linesIntersect(P,z,j,I);if(N===!1){if(!s.pointsCollinear(P,z,j)||s.pointsSame(P,I)||s.pointsSame(z,j))return!1;var W=s.pointsSame(P,j),F=s.pointsSame(z,I);if(W&&F)return E;var U=!W&&s.pointBetween(P,j,I),H=!F&&s.pointBetween(z,j,I);if(W)return H?i(E,z):i(w,I),E;U&&(F||(H?i(E,z):i(w,I)),i(E,P))}else N.alongA===0&&(N.alongB===-1?i(w,j):N.alongB===0?i(w,N.pt):N.alongB===1&&i(w,I)),N.alongB===0&&(N.alongA===-1?i(E,P):N.alongA===0?i(E,N.pt):N.alongA===1&&i(E,z));return!1}for(var c=[];!f.isEmpty();){var x=f.getHead();if(T&&T.vert(x.pt[0]),x.isStart){let w=function(){if(v){var E=h(x,v);if(E)return E}return!!g&&h(x,g)};T&&T.segmentNew(x.seg,x.primary);var p=u(x),v=p.before?p.before.ev:null,g=p.after?p.after.ev:null;T&&T.tempStatus(x.seg,!!v&&v.seg,!!g&&g.seg);var y,m,_=w();if(_&&(k?(m=x.seg.myFill.below===null||x.seg.myFill.above!==x.seg.myFill.below)&&(_.seg.myFill.above=!_.seg.myFill.above):_.seg.otherFill=x.seg.myFill,T&&T.segmentUpdate(_.seg),x.other.remove(),x.remove()),f.getHead()!==x){T&&T.rewind(x.seg);continue}k?(m=x.seg.myFill.below===null||x.seg.myFill.above!==x.seg.myFill.below,x.seg.myFill.below=g?g.seg.myFill.above:r,x.seg.myFill.above=m?!x.seg.myFill.below:x.seg.myFill.below):x.seg.otherFill===null&&(y=g?x.primary===g.primary?g.seg.otherFill.above:g.seg.myFill.above:x.primary?a:r,x.seg.otherFill={above:y,below:y}),T&&T.status(x.seg,!!v&&v.seg,!!g&&g.seg),x.other.status=p.insert(M.node({ev:x}))}else{var d=x.status;if(d===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(l.exists(d.prev)&&l.exists(d.next)&&h(d.prev.ev,d.next.ev),T&&T.statusRemove(d.ev.seg),d.remove(),!x.primary){var S=x.seg.myFill;x.seg.myFill=x.seg.otherFill,x.seg.otherFill=S}c.push(x.seg)}f.getHead().remove()}return T&&T.done(),c}return k?{addRegion:function(r){for(var a,l,u,h=r[r.length-1],c=0;c<r.length;c++){a=h,h=r[c];var x=s.pointsCompare(a,h);x!==0&&t((l=x<0?a:h,u=x<0?h:a,{id:T?T.segmentId():-1,start:l,end:u,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(r){return n(r,!1)}}:{calculate:function(r,a,l,u){return r.forEach(function(h){t(b(h.start,h.end,h),!0)}),l.forEach(function(h){t(b(h.start,h.end,h),!1)}),n(a,u)}}}},48088:function(ee){ee.exports={create:function(){var R={root:{root:!0,next:null},exists:function(e){return e!==null&&e!==R.root},isEmpty:function(){return R.root.next===null},getHead:function(){return R.root.next},insertBefore:function(e,M){for(var k=R.root,s=R.root.next;s!==null;){if(M(s))return e.prev=s.prev,e.next=s,s.prev.next=e,void(s.prev=e);k=s,s=s.next}k.next=e,e.prev=k,e.next=null},findTransition:function(e){for(var M=R.root,k=R.root.next;k!==null&&!e(k);)M=k,k=k.next;return{before:M===R.root?null:M,after:k,insert:function(s){return s.prev=M,s.next=k,M.next=s,k!==null&&(k.prev=s),s}}}};return R},node:function(R){return R.prev=null,R.next=null,R.remove=function(){R.prev.next=R.next,R.next&&(R.next.prev=R.prev),R.prev=null,R.next=null},R}}},11403:function(ee){ee.exports=function(R,e,M){var k=[],s=[];return R.forEach(function(T){var b=T.start,f=T.end;if(e.pointsSame(b,f))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{M&&M.chainStart(T);for(var o={index:0,matches_head:!1,matches_pt1:!1},t={index:0,matches_head:!1,matches_pt1:!1},i=o,n=0;n<k.length;n++){var r=(c=k[n])[0],a=(c[1],c[c.length-1]);if(c[c.length-2],e.pointsSame(r,b)){if(d(n,!0,!0))break}else if(e.pointsSame(r,f)){if(d(n,!0,!1))break}else if(e.pointsSame(a,b)){if(d(n,!1,!0))break}else if(e.pointsSame(a,f)&&d(n,!1,!1))break}if(i===o)return k.push([b,f]),void(M&&M.chainNew(b,f));if(i===t){M&&M.chainMatch(o.index);var l=o.index,u=o.matches_pt1?f:b,h=o.matches_head,c=k[l],x=h?c[0]:c[c.length-1],p=h?c[1]:c[c.length-2],v=h?c[c.length-1]:c[0],g=h?c[c.length-2]:c[1];return e.pointsCollinear(p,x,u)&&(h?(M&&M.chainRemoveHead(o.index,u),c.shift()):(M&&M.chainRemoveTail(o.index,u),c.pop()),x=p),e.pointsSame(v,u)?(k.splice(l,1),e.pointsCollinear(g,v,x)&&(h?(M&&M.chainRemoveTail(o.index,x),c.pop()):(M&&M.chainRemoveHead(o.index,x),c.shift())),M&&M.chainClose(o.index),void s.push(c)):void(h?(M&&M.chainAddHead(o.index,u),c.unshift(u)):(M&&M.chainAddTail(o.index,u),c.push(u)))}var y=o.index,m=t.index;M&&M.chainConnect(y,m);var _=k[y].length<k[m].length;o.matches_head?t.matches_head?_?(S(y),w(y,m)):(S(m),w(m,y)):w(m,y):t.matches_head?w(y,m):_?(S(y),w(m,y)):(S(m),w(y,m))}function d(E,C,O){return i.index=E,i.matches_head=C,i.matches_pt1=O,i===o?(i=t,!1):(i=null,!0)}function S(E){M&&M.chainReverse(E),k[E].reverse()}function w(E,C){var O=k[E],P=k[C],z=O[O.length-1],j=O[O.length-2],I=P[0],N=P[1];e.pointsCollinear(j,z,I)&&(M&&M.chainRemoveTail(E,z),O.pop(),z=j),e.pointsCollinear(z,I,N)&&(M&&M.chainRemoveHead(C,I),P.shift()),M&&M.chainJoin(E,C),k[E]=O.concat(P),k.splice(C,1)}}),s}},82368:function(ee){function R(M,k,s){var T=[];return M.forEach(function(b){var f=(b.myFill.above?8:0)+(b.myFill.below?4:0)+(b.otherFill&&b.otherFill.above?2:0)+(b.otherFill&&b.otherFill.below?1:0);k[f]!==0&&T.push({id:s?s.segmentId():-1,start:b.start,end:b.end,myFill:{above:k[f]===1,below:k[f]===2},otherFill:null})}),s&&s.selected(T),T}var e={union:function(M,k){return R(M,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],k)},intersect:function(M,k){return R(M,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],k)},difference:function(M,k){return R(M,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],k)},differenceRev:function(M,k){return R(M,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],k)},xor:function(M,k){return R(M,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],k)}};ee.exports=e},9696:function(ee,R,e){var M=e(29936).Transform,k=e(55619);function s(){M.call(this,{readableObjectMode:!0})}function T(b,f,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=b,f&&(this.code=f),o&&(this.statusCode=o)}s.prototype=Object.create(M.prototype),s.prototype.constructor=s,k(s.prototype),R.gS=function(b,f,o){for(var t=f,i=0;i<o.length;)if(b[t++]!==o[i++])return!1;return!0},R.wR=function(b,f){var o=[],t=0;if(f&&f==="hex")for(;t<b.length;)o.push(parseInt(b.slice(t,t+2),16)),t+=2;else for(;t<b.length;t++)o.push(255&b.charCodeAt(t));return o},R.Bz=function(b,f){return b[f]|b[f+1]<<8},R.eW=function(b,f){return b[f+1]|b[f]<<8},R.st=function(b,f){return b[f]|b[f+1]<<8|b[f+2]<<16|16777216*b[f+3]},R.eI=function(b,f){return b[f+3]|b[f+2]<<8|b[f+1]<<16|16777216*b[f]},T.prototype=Object.create(Error.prototype),T.prototype.constructor=T},11688:function(ee){function R(k,s){var T=new Error(k);return T.code=s,T}function e(k){try{return decodeURIComponent(escape(k))}catch{return k}}function M(k,s,T){this.input=k.subarray(s,T),this.start=s;var b=String.fromCharCode.apply(null,this.input.subarray(0,4));if(b!=="II*\0"&&b!=="MM\0*")throw R("invalid TIFF signature","EBADDATA");this.big_endian=b[0]==="M"}M.prototype.each=function(k){this.aborted=!1;var s=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:s}];this.ifds_to_read.length>0&&!this.aborted;){var T=this.ifds_to_read.shift();T.offset&&this.scan_ifd(T.id,T.offset,k)}},M.prototype.read_uint16=function(k){var s=this.input;if(k+2>s.length)throw R("unexpected EOF","EBADDATA");return this.big_endian?256*s[k]+s[k+1]:s[k]+256*s[k+1]},M.prototype.read_uint32=function(k){var s=this.input;if(k+4>s.length)throw R("unexpected EOF","EBADDATA");return this.big_endian?16777216*s[k]+65536*s[k+1]+256*s[k+2]+s[k+3]:s[k]+256*s[k+1]+65536*s[k+2]+16777216*s[k+3]},M.prototype.is_subifd_link=function(k,s){return k===0&&s===34665||k===0&&s===34853||k===34665&&s===40965},M.prototype.exif_format_length=function(k){switch(k){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},M.prototype.exif_format_read=function(k,s){var T;switch(k){case 1:case 2:return this.input[s];case 6:return(T=this.input[s])|33554430*(128&T);case 3:return this.read_uint16(s);case 8:return(T=this.read_uint16(s))|131070*(32768&T);case 4:return this.read_uint32(s);case 9:return 0|this.read_uint32(s);default:return null}},M.prototype.scan_ifd=function(k,s,T){var b=this.read_uint16(s);s+=2;for(var f=0;f<b;f++){var o=this.read_uint16(s),t=this.read_uint16(s+2),i=this.read_uint32(s+4),n=this.exif_format_length(t),r=i*n,a=r<=4?s+8:this.read_uint32(s+8),l=!1;if(a+r>this.input.length)throw R("unexpected EOF","EBADDATA");for(var u=[],h=a,c=0;c<i;c++,h+=n){var x=this.exif_format_read(t,h);if(x===null){u=null;break}u.push(x)}if(Array.isArray(u)&&t===2&&(u=e(String.fromCharCode.apply(null,u)))&&u[u.length-1]==="\0"&&(u=u.slice(0,-1)),this.is_subifd_link(k,o)&&Array.isArray(u)&&Number.isInteger(u[0])&&u[0]>0&&(this.ifds_to_read.push({id:o,offset:u[0]}),l=!0),T({is_big_endian:this.big_endian,ifd:k,tag:o,format:t,count:i,entry_offset:s+this.start,data_length:r,data_offset:a+this.start,value:u,is_subifd_link:l})===!1)return void(this.aborted=!0);s+=12}k===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(s)})},ee.exports.ExifParser=M,ee.exports.get_orientation=function(k){var s=0;try{return new M(k,0,k.length).each(function(T){if(T.ifd===0&&T.tag===274&&Array.isArray(T.value))return s=T.value[0],!1}),s}catch{return-1}}},44600:function(ee,R,e){var M=e(9696).eW,k=e(9696).eI;function s(i,n){if(i.length<4+n)return null;var r=k(i,n);return i.length<r+n||r<8?null:{boxtype:String.fromCharCode.apply(null,i.slice(n+4,n+8)),data:i.slice(n+8,n+r),end:n+r}}function T(i,n){for(var r=0;;){var a=s(i,r);if(!a)break;switch(a.boxtype){case"ispe":n.sizes.push({width:k(a.data,4),height:k(a.data,8)});break;case"irot":n.transforms.push({type:"irot",value:3&a.data[0]});break;case"imir":n.transforms.push({type:"imir",value:1&a.data[0]})}r=a.end}}function b(i,n,r){for(var a=0,l=0;l<r;l++)a=256*a+(i[n+l]||0);return a}function f(i,n){for(var r=i[4]>>4&15,a=15&i[4],l=i[5]>>4&15,u=M(i,6),h=8,c=0;c<u;c++){var x=M(i,h),p=M(i,h+=2),v=b(i,h+=2,l),g=M(i,h+=l);if(h+=2,p===0&&g===1){var y=b(i,h,r),m=b(i,h+r,a);n.item_loc[x]={length:m,offset:y+v}}h+=g*(r+a)}}function o(i,n){for(var r=M(i,4),a=6,l=0;l<r;l++){var u=s(i,a);if(!u)break;if(u.boxtype==="infe"){for(var h=M(u.data,4),c="",x=8;x<u.data.length&&u.data[x];x++)c+=String.fromCharCode(u.data[x]);n.item_inf[c]=h}a=u.end}}function t(i,n){for(var r=0;;){var a=s(i,r);if(!a)break;a.boxtype==="ipco"&&T(a.data,n),r=a.end}}ee.exports.unbox=s,ee.exports.readSizeFromMeta=function(i){var n={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(x,p){for(var v=4;;){var g=s(x,v);if(!g)break;g.boxtype==="iprp"&&t(g.data,p),g.boxtype==="iloc"&&f(g.data,p),g.boxtype==="iinf"&&o(g.data,p),v=g.end}}(i,n),n.sizes.length){var r,a,l,u=(a=(r=n.sizes).reduce(function(x,p){return x.width>p.width||x.width===p.width&&x.height>p.height?x:p}),l=r.reduce(function(x,p){return x.height>p.height||x.height===p.height&&x.width>p.width?x:p}),a.width>l.height||a.width===l.height&&a.height>l.width?a:l),h=1;n.transforms.forEach(function(x){var p={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},v={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(x.type==="imir"&&(h=x.value===0?v[h]:p[h=p[h=v[h]]]),x.type==="irot")for(var g=0;g<x.value;g++)h=p[h]});var c=null;return n.item_inf.Exif&&(c=n.item_loc[n.item_inf.Exif]),{width:u.width,height:u.height,orientation:n.transforms.length?h:null,variants:n.sizes,exif_location:c}}},ee.exports.getMimeType=function(i){var n=String.fromCharCode.apply(null,i.slice(0,4)),r={};r[n]=!0;for(var a=8;a<i.length;a+=4)r[String.fromCharCode.apply(null,i.slice(a,a+4))]=!0;if(r.mif1||r.msf1||r.miaf)return n==="avif"||n==="avis"||n==="avio"?{type:"avif",mime:"image/avif"}:n==="heic"||n==="heix"?{type:"heic",mime:"image/heic"}:n==="hevc"||n==="hevx"?{type:"heic",mime:"image/heic-sequence"}:r.avif||r.avis?{type:"avif",mime:"image/avif"}:r.heic||r.heix||r.hevc||r.hevx||r.heis?r.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},40528:function(ee,R,e){var M=e(9696).wR,k=e(9696).gS,s=e(9696).eI,T=e(44600),b=e(11688),f=M("ftyp");ee.exports=function(o){if(k(o,4,f)){var t=T.unbox(o,0);if(t){var i=T.getMimeType(t.data);if(i){for(var n,r=t.end;;){var a=T.unbox(o,r);if(!a)break;if(r=a.end,a.boxtype==="mdat")return;if(a.boxtype==="meta"){n=a.data;break}}if(n){var l=T.readSizeFromMeta(n);if(l){var u={width:l.width,height:l.height,type:i.type,mime:i.mime,wUnits:"px",hUnits:"px"};if(l.variants.length>1&&(u.variants=l.variants),l.orientation&&(u.orientation=l.orientation),l.exif_location&&l.exif_location.offset+l.exif_location.length<=o.length){var h=s(o,l.exif_location.offset),c=o.slice(l.exif_location.offset+h+4,l.exif_location.offset+l.exif_location.length),x=b.get_orientation(c);x>0&&(u.orientation=x)}return u}}}}}}},38728:function(ee,R,e){var M=e(9696).wR,k=e(9696).gS,s=e(9696).Bz,T=M("BM");ee.exports=function(b){if(!(b.length<26)&&k(b,0,T))return{width:s(b,18),height:s(b,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},5588:function(ee,R,e){var M=e(9696).wR,k=e(9696).gS,s=e(9696).Bz,T=M("GIF87a"),b=M("GIF89a");ee.exports=function(f){if(!(f.length<10)&&(k(f,0,T)||k(f,0,b)))return{width:s(f,6),height:s(f,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},41924:function(ee,R,e){var M=e(9696).Bz;ee.exports=function(k){var s=M(k,0),T=M(k,2),b=M(k,4);if(s===0&&T===1&&b){for(var f=[],o={width:0,height:0},t=0;t<b;t++){var i=k[6+16*t]||256,n=k[6+16*t+1]||256,r={width:i,height:n};f.push(r),(i>o.width||n>o.height)&&(o=r)}return{width:o.width,height:o.height,variants:f,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},87968:function(ee,R,e){var M=e(9696).eW,k=e(9696).wR,s=e(9696).gS,T=e(11688),b=k("Exif\0\0");ee.exports=function(f){if(!(f.length<2)&&f[0]===255&&f[1]===216&&f[2]===255)for(var o=2;;){for(;;){if(f.length-o<2)return;if(f[o++]===255)break}for(var t,i,n=f[o++];n===255;)n=f[o++];if(208<=n&&n<=217||n===1)t=0;else{if(!(192<=n&&n<=254)||f.length-o<2)return;t=M(f,o)-2,o+=2}if(n===217||n===218)return;if(n===225&&t>=10&&s(f,o,b)&&(i=T.get_orientation(f.slice(o+6,o+t))),t>=5&&192<=n&&n<=207&&n!==196&&n!==200&&n!==204){if(f.length-o<t)return;var r={width:M(f,o+3),height:M(f,o+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return i>0&&(r.orientation=i),r}o+=t}}},37276:function(ee,R,e){var M=e(9696).wR,k=e(9696).gS,s=e(9696).eI,T=M(`PNG\r

`),b=M("IHDR");ee.exports=function(f){if(!(f.length<24)&&k(f,0,T)&&k(f,12,b))return{width:s(f,16),height:s(f,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},90328:function(ee,R,e){var M=e(9696).wR,k=e(9696).gS,s=e(9696).eI,T=M("8BPS\0");ee.exports=function(b){if(!(b.length<22)&&k(b,0,T))return{width:s(b,18),height:s(b,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},16024:function(ee){function R(o){return typeof o=="number"&&isFinite(o)&&o>0}var e=/<[-_.:a-zA-Z0-9][^>]*>/,M=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,k=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,s=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,T=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,b=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function f(o){return b.test(o)?o.match(b)[0]:"px"}ee.exports=function(o){if(function(v){var g,y=0,m=v.length;for(v[0]===239&&v[1]===187&&v[2]===191&&(y=3);y<m&&((g=v[y])===32||g===9||g===13||g===10);)y++;return y!==m&&v[y]===60}(o)){for(var t="",i=0;i<o.length;i++)t+=String.fromCharCode(o[i]);var n=(t.match(e)||[""])[0];if(M.test(n)){var r=function(v){var g=v.match(k),y=v.match(s),m=v.match(T);return{width:g&&(g[1]||g[2]),height:y&&(y[1]||y[2]),viewbox:m&&(m[1]||m[2])}}(n),a=parseFloat(r.width),l=parseFloat(r.height);if(r.width&&r.height)return!R(a)||!R(l)?void 0:{width:a,height:l,type:"svg",mime:"image/svg+xml",wUnits:f(r.width),hUnits:f(r.height)};var u=(r.viewbox||"").split(" "),h={width:u[2],height:u[3]},c=parseFloat(h.width),x=parseFloat(h.height);if(R(c)&&R(x)&&f(h.width)===f(h.height)){var p=c/x;return r.width?R(a)?{width:a,height:a/p,type:"svg",mime:"image/svg+xml",wUnits:f(r.width),hUnits:f(r.width)}:void 0:r.height?R(l)?{width:l*p,height:l,type:"svg",mime:"image/svg+xml",wUnits:f(r.height),hUnits:f(r.height)}:void 0:{width:c,height:x,type:"svg",mime:"image/svg+xml",wUnits:f(h.width),hUnits:f(h.height)}}}}}},98792:function(ee,R,e){var M=e(9696).wR,k=e(9696).gS,s=e(9696).Bz,T=e(9696).eW,b=e(9696).st,f=e(9696).eI,o=M("II*\0"),t=M("MM\0*");function i(a,l,u){return u?T(a,l):s(a,l)}function n(a,l,u){return u?f(a,l):b(a,l)}function r(a,l,u){var h=i(a,l+2,u);return n(a,l+4,u)!==1||h!==3&&h!==4?null:h===3?i(a,l+8,u):n(a,l+8,u)}ee.exports=function(a){if(!(a.length<8)&&(k(a,0,o)||k(a,0,t))){var l=a[0]===77,u=n(a,4,l)-8;if(!(u<0)){var h=u+8;if(!(a.length-h<2)){var c=12*i(a,h+0,l);if(!(c<=0||(h+=2,a.length-h<c))){var x,p,v,g;for(x=0;x<c;x+=12)(g=i(a,h+x,l))===256?p=r(a,h+x,l):g===257&&(v=r(a,h+x,l));return p&&v?{width:p,height:v,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},20704:function(ee,R,e){var M=e(9696).wR,k=e(9696).gS,s=e(9696).Bz,T=e(9696).st,b=e(11688),f=M("RIFF"),o=M("WEBP");function t(r,a){if(r[a+3]===157&&r[a+4]===1&&r[a+5]===42)return{width:16383&s(r,a+6),height:16383&s(r,a+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function i(r,a){if(r[a]===47){var l=T(r,a+1);return{width:1+(16383&l),height:1+(l>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function n(r,a){return{width:1+(r[a+6]<<16|r[a+5]<<8|r[a+4]),height:1+(r[a+9]<<a|r[a+8]<<8|r[a+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}ee.exports=function(r){if(!(r.length<16)&&(k(r,0,f)||k(r,8,o))){var a=12,l=null,u=0,h=T(r,4)+8;if(!(h>r.length)){for(;a+8<h;)if(r[a]!==0){var c=String.fromCharCode.apply(null,r.slice(a,a+4)),x=T(r,a+4);c==="VP8 "&&x>=10?l=l||t(r,a+8):c==="VP8L"&&x>=9?l=l||i(r,a+8):c==="VP8X"&&x>=10?l=l||n(r,a+8):c==="EXIF"&&(u=b.get_orientation(r.slice(a+8,a+8+x)),a=1/0),a+=8+x}else a++;if(l)return u>0&&(l.orientation=u),l}}}},87480:function(ee,R,e){ee.exports={avif:e(40528),bmp:e(38728),gif:e(5588),ico:e(41924),jpeg:e(87968),png:e(37276),psd:e(90328),svg:e(16024),tiff:e(98792),webp:e(20704)}},19480:function(ee,R,e){var M=e(87480);ee.exports=function(k){return function(s){for(var T=Object.keys(M),b=0;b<T.length;b++){var f=M[T[b]](s);if(f)return f}return null}(k)},ee.exports.parsers=M},4168:function(ee){var R,e,M=ee.exports={};function k(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function T(l){if(R===setTimeout)return setTimeout(l,0);if((R===k||!R)&&setTimeout)return R=setTimeout,setTimeout(l,0);try{return R(l,0)}catch{try{return R.call(null,l,0)}catch{return R.call(this,l,0)}}}(function(){try{R=typeof setTimeout=="function"?setTimeout:k}catch{R=k}try{e=typeof clearTimeout=="function"?clearTimeout:s}catch{e=s}})();var b,f=[],o=!1,t=-1;function i(){o&&b&&(o=!1,b.length?f=b.concat(f):t=-1,f.length&&n())}function n(){if(!o){var l=T(i);o=!0;for(var u=f.length;u;){for(b=f,f=[];++t<u;)b&&b[t].run();t=-1,u=f.length}b=null,o=!1,function(h){if(e===clearTimeout)return clearTimeout(h);if((e===s||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(h);try{return e(h)}catch{try{return e.call(null,h)}catch{return e.call(this,h)}}}(l)}}function r(l,u){this.fun=l,this.array=u}function a(){}M.nextTick=function(l){var u=new Array(arguments.length-1);if(arguments.length>1)for(var h=1;h<arguments.length;h++)u[h-1]=arguments[h];f.push(new r(l,u)),f.length!==1||o||T(n)},r.prototype.run=function(){this.fun.apply(null,this.array)},M.title="browser",M.browser=!0,M.env={},M.argv=[],M.version="",M.versions={},M.on=a,M.addListener=a,M.once=a,M.off=a,M.removeListener=a,M.removeAllListeners=a,M.emit=a,M.prependListener=a,M.prependOnceListener=a,M.listeners=function(l){return[]},M.binding=function(l){throw new Error("process.binding is not supported")},M.cwd=function(){return"/"},M.chdir=function(l){throw new Error("process.chdir is not supported")},M.umask=function(){return 0}},3951:function(ee,R,e){for(var M=e(41984),k=typeof window>"u"?e.g:window,s=["moz","webkit"],T="AnimationFrame",b=k["request"+T],f=k["cancel"+T]||k["cancelRequest"+T],o=0;!b&&o<s.length;o++)b=k[s[o]+"Request"+T],f=k[s[o]+"Cancel"+T]||k[s[o]+"CancelRequest"+T];if(!b||!f){var t=0,i=0,n=[];b=function(r){if(n.length===0){var a=M(),l=Math.max(0,16.666666666666668-(a-t));t=l+a,setTimeout(function(){var u=n.slice(0);n.length=0;for(var h=0;h<u.length;h++)if(!u[h].cancelled)try{u[h].callback(t)}catch(c){setTimeout(function(){throw c},0)}},Math.round(l))}return n.push({handle:++i,callback:r,cancelled:!1}),i},f=function(r){for(var a=0;a<n.length;a++)n[a].handle===r&&(n[a].cancelled=!0)}}ee.exports=function(r){return b.call(k,r)},ee.exports.cancel=function(){f.apply(k,arguments)},ee.exports.polyfill=function(r){r||(r=k),r.requestAnimationFrame=b,r.cancelAnimationFrame=f}},24544:function(ee,R,e){var M=e(76752),k=e(72160),s=e(45223),T=e(55616),b=e(50896),f=e(47520),o=e(37816),t=o.float32,i=o.fract32;ee.exports=function(r,a){if(typeof r=="function"?(a||(a={}),a.regl=r):a=r,a.length&&(a.positions=a),!(r=a.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var l,u,h,c,x,p,v=r._gl,g={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},y=[];return c=r.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),u=r.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),h=r.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),x=r.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),p=r.buffer({usage:"static",type:"float",data:n}),S(a),l=r({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:r.prop("range"),lineWidth:r.prop("lineWidth"),capSize:r.prop("capSize"),opacity:r.prop("opacity"),scale:r.prop("scale"),translate:r.prop("translate"),scaleFract:r.prop("scaleFract"),translateFract:r.prop("translateFract"),viewport:function(E,C){return[C.viewport.x,C.viewport.y,E.viewportWidth,E.viewportHeight]}},attributes:{color:{buffer:c,offset:function(E,C){return 4*C.offset},divisor:1},position:{buffer:u,offset:function(E,C){return 8*C.offset},divisor:1},positionFract:{buffer:h,offset:function(E,C){return 8*C.offset},divisor:1},error:{buffer:x,offset:function(E,C){return 16*C.offset},divisor:1},direction:{buffer:p,stride:24,offset:0},lineOffset:{buffer:p,stride:24,offset:8},capOffset:{buffer:p,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:r.prop("viewport")},viewport:r.prop("viewport"),stencil:!1,instances:r.prop("count"),count:n.length}),b(m,{update:S,draw:_,destroy:w,regl:r,gl:v,canvas:v.canvas,groups:y}),m;function m(E){E?S(E):E===null&&w(),_()}function _(E){if(typeof E=="number")return d(E);E&&!Array.isArray(E)&&(E=[E]),r._refresh(),y.forEach(function(C,O){C&&(E&&(E[O]?C.draw=!0:C.draw=!1),C.draw?d(O):C.draw=!0)})}function d(E){typeof E=="number"&&(E=y[E]),E!=null&&E&&E.count&&E.color&&E.opacity&&E.positions&&E.positions.length>1&&(E.scaleRatio=[E.scale[0]*E.viewport.width,E.scale[1]*E.viewport.height],l(E),E.after&&E.after(E))}function S(E){if(E){E.length!=null?typeof E[0]=="number"&&(E=[{positions:E}]):Array.isArray(E)||(E=[E]);var C=0,O=0;if(m.groups=y=E.map(function(F,U){var H=y[U];return F&&(typeof F=="function"?F={after:F}:typeof F[0]=="number"&&(F={positions:F}),F=T(F,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),H||(y[U]=H={id:U,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},F=b({},g,F)),s(H,F,[{lineWidth:function(ne){return .5*+ne},capSize:function(ne){return .5*+ne},opacity:parseFloat,errors:function(ne){return ne=f(ne),O+=ne.length,ne},positions:function(ne,$){return ne=f(ne,"float64"),$.count=Math.floor(ne.length/2),$.bounds=M(ne,2),$.offset=C,C+=$.count,ne}},{color:function(ne,$){var K=$.count;if(ne||(ne="transparent"),!Array.isArray(ne)||typeof ne[0]=="number"){var Q=ne;ne=Array(K);for(var Z=0;Z<K;Z++)ne[Z]=Q}if(ne.length<K)throw Error("Not enough colors");for(var X=new Uint8Array(4*K),te=0;te<K;te++){var ae=k(ne[te],"uint8");X.set(ae,4*te)}return X},range:function(ne,$,K){var Q=$.bounds;return ne||(ne=Q),$.scale=[1/(ne[2]-ne[0]),1/(ne[3]-ne[1])],$.translate=[-ne[0],-ne[1]],$.scaleFract=i($.scale),$.translateFract=i($.translate),ne},viewport:function(ne){var $;return Array.isArray(ne)?$={x:ne[0],y:ne[1],width:ne[2]-ne[0],height:ne[3]-ne[1]}:ne?($={x:ne.x||ne.left||0,y:ne.y||ne.top||0},ne.right?$.width=ne.right-$.x:$.width=ne.w||ne.width||0,ne.bottom?$.height=ne.bottom-$.y:$.height=ne.h||ne.height||0):$={x:0,y:0,width:v.drawingBufferWidth,height:v.drawingBufferHeight},$}}])),H}),C||O){var P=y.reduce(function(F,U,H){return F+(U?U.count:0)},0),z=new Float64Array(2*P),j=new Uint8Array(4*P),I=new Float32Array(4*P);y.forEach(function(F,U){if(F){var H=F.positions,ne=F.count,$=F.offset,K=F.color,Q=F.errors;ne&&(j.set(K,4*$),I.set(Q,4*$),z.set(H,2*$))}});var N=t(z);u(N);var W=i(z,N);h(W),c(j),x(I)}}}function w(){u.destroy(),h.destroy(),c.destroy(),x.destroy(),p.destroy()}};var n=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},13472:function(ee,R,e){var M=e(72160),k=e(76752),s=e(50896),T=e(55616),b=e(47520),f=e(28912),o=e(71152),t=e(37816),i=t.float32,n=t.fract32,r=e(60463),a=e(51160),l=e(10272);function u(h,c){if(!(this instanceof u))return new u(h,c);if(typeof h=="function"?(c||(c={}),c.regl=h):c=h,c.length&&(c.positions=c),!(h=c.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=h._gl,this.regl=h,this.passes=[],this.shaders=u.shaders.has(h)?u.shaders.get(h):u.shaders.set(h,u.createShaders(h)).get(h),this.update(c)}ee.exports=u,u.dashMult=2,u.maxPatternLength=256,u.precisionThreshold=3e6,u.maxPoints=1e4,u.maxLines=2048,u.shaders=new r,u.createShaders=function(h){var c,x=h.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),p={primitive:"triangle strip",instances:h.prop("count"),count:4,offset:0,uniforms:{miterMode:function(g,y){return y.join==="round"?2:1},miterLimit:h.prop("miterLimit"),scale:h.prop("scale"),scaleFract:h.prop("scaleFract"),translateFract:h.prop("translateFract"),translate:h.prop("translate"),thickness:h.prop("thickness"),dashTexture:h.prop("dashTexture"),opacity:h.prop("opacity"),pixelRatio:h.context("pixelRatio"),id:h.prop("id"),dashLength:h.prop("dashLength"),viewport:function(g,y){return[y.viewport.x,y.viewport.y,g.viewportWidth,g.viewportHeight]},depth:h.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(g,y){return!y.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:h.prop("viewport")},viewport:h.prop("viewport")},v=h(s({vert:`
precision highp float;

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`,frag:`
precision highp float;

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`,attributes:{lineEnd:{buffer:x,divisor:0,stride:8,offset:0},lineTop:{buffer:x,divisor:0,stride:8,offset:4},aCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:h.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:h.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:h.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},p));try{c=h(s({cull:{enable:!0,face:"back"},vert:`
precision highp float;

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);


	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`,frag:`
precision highp float;

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`,attributes:{lineEnd:{buffer:x,divisor:0,stride:8,offset:0},lineTop:{buffer:x,divisor:0,stride:8,offset:4},aColor:{buffer:h.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:h.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},p))}catch{c=v}return{fill:h({primitive:"triangle",elements:function(g,y){return y.triangles},offset:0,vert:`
precision highp float;

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`,frag:`
precision highp float;
varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`,uniforms:{scale:h.prop("scale"),color:h.prop("fill"),scaleFract:h.prop("scaleFract"),translateFract:h.prop("translateFract"),translate:h.prop("translate"),opacity:h.prop("opacity"),pixelRatio:h.context("pixelRatio"),id:h.prop("id"),viewport:function(g,y){return[y.viewport.x,y.viewport.y,g.viewportWidth,g.viewportHeight]}},attributes:{position:{buffer:h.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:h.prop("positionFractBuffer"),stride:8,offset:8}},blend:p.blend,depth:{enable:!1},scissor:p.scissor,stencil:p.stencil,viewport:p.viewport}),rect:v,miter:c}},u.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},u.prototype.render=function(){for(var h,c=[],x=arguments.length;x--;)c[x]=arguments[x];c.length&&(h=this).update.apply(h,c),this.draw()},u.prototype.draw=function(){for(var h=this,c=[],x=arguments.length;x--;)c[x]=arguments[x];return(c.length?c:this.passes).forEach(function(p,v){var g;if(p&&Array.isArray(p))return(g=h).draw.apply(g,p);typeof p=="number"&&(p=h.passes[p]),p&&p.count>1&&p.opacity&&(h.regl._refresh(),p.fill&&p.triangles&&p.triangles.length>2&&h.shaders.fill(p),p.thickness&&(p.scale[0]*p.viewport.width>u.precisionThreshold||p.scale[1]*p.viewport.height>u.precisionThreshold||p.join==="rect"||!p.join&&(p.thickness<=2||p.count>=u.maxPoints)?h.shaders.rect(p):h.shaders.miter(p)))}),this},u.prototype.update=function(h){var c=this;if(h){h.length!=null?typeof h[0]=="number"&&(h=[{positions:h}]):Array.isArray(h)||(h=[h]);var x=this.regl,p=this.gl;if(h.forEach(function(_,d){var S=c.passes[d];if(_!==void 0)if(_!==null){if(typeof _[0]=="number"&&(_={positions:_}),_=T(_,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),S||(c.passes[d]=S={id:d,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:x.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:x.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:x.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:x.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},_=s({},u.defaults,_)),_.thickness!=null&&(S.thickness=parseFloat(_.thickness)),_.opacity!=null&&(S.opacity=parseFloat(_.opacity)),_.miterLimit!=null&&(S.miterLimit=parseFloat(_.miterLimit)),_.overlay!=null&&(S.overlay=!!_.overlay,d<u.maxLines&&(S.depth=2*(u.maxLines-1-d%u.maxLines)/u.maxLines-1)),_.join!=null&&(S.join=_.join),_.hole!=null&&(S.hole=_.hole),_.fill!=null&&(S.fill=_.fill?M(_.fill,"uint8"):null),_.viewport!=null&&(S.viewport=a(_.viewport)),S.viewport||(S.viewport=a([p.drawingBufferWidth,p.drawingBufferHeight])),_.close!=null&&(S.close=_.close),_.positions===null&&(_.positions=[]),_.positions){var w,E;if(_.positions.x&&_.positions.y){var C=_.positions.x,O=_.positions.y;E=S.count=Math.max(C.length,O.length),w=new Float64Array(2*E);for(var P=0;P<E;P++)w[2*P]=C[P],w[2*P+1]=O[P]}else w=b(_.positions,"float64"),E=S.count=Math.floor(w.length/2);var z=S.bounds=k(w,2);if(S.fill){for(var j=[],I={},N=0,W=0,F=0,U=S.count;W<U;W++){var H=w[2*W],ne=w[2*W+1];isNaN(H)||isNaN(ne)||H==null||ne==null?(H=w[2*N],ne=w[2*N+1],I[W]=N):N=W,j[F++]=H,j[F++]=ne}if(_.splitNull){S.count-1 in I||(I[S.count]=S.count-1);var $=Object.keys(I).map(Number).sort(function(vt,pt){return vt-pt}),K=[],Q=0,Z=S.hole!=null?S.hole[0]:null;if(Z!=null){var X=l($,function(vt){return vt>=Z});($=$.slice(0,X)).push(Z)}for(var te=function(vt){var pt=j.slice(2*Q,2*$[vt]).concat(Z?j.slice(2*Z):[]),Qe=(S.hole||[]).map(function(Mt){return Mt-Z+($[vt]-Q)}),Ke=f(pt,Qe);Ke=Ke.map(function(Mt){return Mt+Q+(Mt+Q<$[vt]?0:Z-$[vt])}),K.push.apply(K,Ke),Q=$[vt]+1},ae=0;ae<$.length;ae++)te(ae);for(var se=0,ce=K.length;se<ce;se++)I[K[se]]!=null&&(K[se]=I[K[se]]);S.triangles=K}else{for(var fe=f(j,S.hole||[]),pe=0,ge=fe.length;pe<ge;pe++)I[fe[pe]]!=null&&(fe[pe]=I[fe[pe]]);S.triangles=fe}}var me=new Float64Array(w);o(me,2,z);var be=new Float64Array(2*E+6);S.close?w[0]===w[2*E-2]&&w[1]===w[2*E-1]?(be[0]=me[2*E-4],be[1]=me[2*E-3]):(be[0]=me[2*E-2],be[1]=me[2*E-1]):(be[0]=me[0],be[1]=me[1]),be.set(me,2),S.close?w[0]===w[2*E-2]&&w[1]===w[2*E-1]?(be[2*E+2]=me[2],be[2*E+3]=me[3],S.count-=1):(be[2*E+2]=me[0],be[2*E+3]=me[1],be[2*E+4]=me[2],be[2*E+5]=me[3]):(be[2*E+2]=me[2*E-2],be[2*E+3]=me[2*E-1],be[2*E+4]=me[2*E-2],be[2*E+5]=me[2*E-1]);var ke=i(be);S.positionBuffer(ke);var ze=n(be,ke);S.positionFractBuffer(ze)}if(_.range?S.range=_.range:S.range||(S.range=S.bounds),(_.range||_.positions)&&S.count){var ve=S.bounds,oe=ve[2]-ve[0],ie=ve[3]-ve[1],he=S.range[2]-S.range[0],Se=S.range[3]-S.range[1];S.scale=[oe/he,ie/Se],S.translate=[-S.range[0]/he+ve[0]/he||0,-S.range[1]/Se+ve[1]/Se||0],S.scaleFract=n(S.scale),S.translateFract=n(S.translate)}if(_.dashes){var ye,we=0;if(!_.dashes||_.dashes.length<2)we=1,ye=new Uint8Array([255,255,255,255,255,255,255,255]);else{we=0;for(var Me=0;Me<_.dashes.length;++Me)we+=_.dashes[Me];ye=new Uint8Array(we*u.dashMult);for(var Oe=0,Ie=255,de=0;de<2;de++)for(var _e=0;_e<_.dashes.length;++_e){for(var Ae=0,Pe=_.dashes[_e]*u.dashMult*.5;Ae<Pe;++Ae)ye[Oe++]=Ie;Ie^=255}}S.dashLength=we,S.dashTexture({channels:1,data:ye,width:ye.length,height:1,mag:"linear",min:"linear"},0,0)}if(_.color){var Ee=S.count,Fe=_.color;Fe||(Fe="transparent");var Ve=new Uint8Array(4*Ee+4);if(Array.isArray(Fe)&&typeof Fe[0]!="number"){for(var Ye=0;Ye<Ee;Ye++){var tt=M(Fe[Ye],"uint8");Ve.set(tt,4*Ye)}Ve.set(M(Fe[0],"uint8"),4*Ee)}else for(var nt=M(Fe,"uint8"),ht=0;ht<Ee+1;ht++)Ve.set(nt,4*ht);S.colorBuffer({usage:"dynamic",type:"uint8",data:Ve})}}else c.passes[d]=null}),h.length<this.passes.length){for(var v=h.length;v<this.passes.length;v++){var g=this.passes[v];g&&(g.colorBuffer.destroy(),g.positionBuffer.destroy(),g.dashTexture.destroy())}this.passes.length=h.length}for(var y=[],m=0;m<this.passes.length;m++)this.passes[m]!==null&&y.push(this.passes[m]);return this.passes=y,this}},u.prototype.destroy=function(){return this.passes.forEach(function(h){h.colorBuffer.destroy(),h.positionBuffer.destroy(),h.dashTexture.destroy()}),this.passes.length=0,this}},38540:function(ee,R,e){function M(v,g){return function(y){if(Array.isArray(y))return y}(v)||function(y,m){var _=y==null?null:typeof Symbol<"u"&&y[Symbol.iterator]||y["@@iterator"];if(_!=null){var d,S,w,E,C=[],O=!0,P=!1;try{if(w=(_=_.call(y)).next,m!==0)for(;!(O=(d=w.call(_)).done)&&(C.push(d.value),C.length!==m);O=!0);}catch(z){P=!0,S=z}finally{try{if(!O&&_.return!=null&&(E=_.return(),Object(E)!==E))return}finally{if(P)throw S}}return C}}(v,g)||k(v,g)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function k(v,g){if(v){if(typeof v=="string")return s(v,g);var y=Object.prototype.toString.call(v).slice(8,-1);return y==="Object"&&v.constructor&&(y=v.constructor.name),y==="Map"||y==="Set"?Array.from(v):y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y)?s(v,g):void 0}}function s(v,g){(g==null||g>v.length)&&(g=v.length);for(var y=0,m=new Array(g);y<g;y++)m[y]=v[y];return m}var T=e(72160),b=e(76752),f=e(3808),o=e(3108),t=e(50896),i=e(26444),n=e(55616),r=e(45223),a=e(47520),l=e(96604),u=e(37816),h=e(51160),c=x;function x(v,g){var y=this;if(!(this instanceof x))return new x(v,g);typeof v=="function"?(g||(g={}),g.regl=v):(g=v,v=null),g&&g.length&&(g.positions=g);var m,_=(v=g.regl)._gl,d=[];this.tooManyColors=l,m=v.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),t(this,{regl:v,gl:_,groups:[],markerCache:[null],markerTextures:[null],palette:d,paletteIds:{},paletteTexture:m,maxColors:255,maxSize:100,canvas:_.canvas}),this.update(g);var S={uniforms:{constPointSize:!!g.constPointSize,opacity:v.prop("opacity"),paletteSize:function(C,O){return[y.tooManyColors?0:255,m.height]},pixelRatio:v.context("pixelRatio"),scale:v.prop("scale"),scaleFract:v.prop("scaleFract"),translate:v.prop("translate"),translateFract:v.prop("translateFract"),markerTexture:v.prop("markerTexture"),paletteTexture:m},attributes:{x:function(C,O){return O.xAttr||{buffer:O.positionBuffer,stride:8,offset:0}},y:function(C,O){return O.yAttr||{buffer:O.positionBuffer,stride:8,offset:4}},xFract:function(C,O){return O.xAttr?{constant:[0,0]}:{buffer:O.positionFractBuffer,stride:8,offset:0}},yFract:function(C,O){return O.yAttr?{constant:[0,0]}:{buffer:O.positionFractBuffer,stride:8,offset:4}},size:function(C,O){return O.size.length?{buffer:O.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*O.size/y.maxSize)]}},borderSize:function(C,O){return O.borderSize.length?{buffer:O.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*O.borderSize/y.maxSize)]}},colorId:function(C,O){return O.color.length?{buffer:O.colorBuffer,stride:y.tooManyColors?8:4,offset:0}:{constant:y.tooManyColors?d.slice(4*O.color,4*O.color+4):[O.color]}},borderColorId:function(C,O){return O.borderColor.length?{buffer:O.colorBuffer,stride:y.tooManyColors?8:4,offset:y.tooManyColors?4:2}:{constant:y.tooManyColors?d.slice(4*O.borderColor,4*O.borderColor+4):[O.borderColor]}},isActive:function(C,O){return O.activation===!0?{constant:[1]}:O.activation?O.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:v.prop("viewport")},viewport:v.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:v.prop("elements"),count:v.prop("count"),offset:v.prop("offset"),primitive:"points"},w=t({},S);w.frag=i([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),w.vert=i([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}
`]),this.drawMarker=v(w);var E=t({},S);E.frag=i([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),E.vert=i([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),l&&(E.frag=E.frag.replace("smoothstep","smoothStep"),w.frag=w.frag.replace("smoothstep","smoothStep")),this.drawCircle=v(E)}x.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},x.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},x.prototype.draw=function(){for(var v=this,g=arguments.length,y=new Array(g),m=0;m<g;m++)y[m]=arguments[m];var _=this.groups;if(y.length===1&&Array.isArray(y[0])&&(y[0][0]===null||Array.isArray(y[0][0]))&&(y=y[0]),this.regl._refresh(),y.length)for(var d=0;d<y.length;d++)this.drawItem(d,y[d]);else _.forEach(function(S,w){v.drawItem(w)});return this},x.prototype.drawItem=function(v,g){var y,m=this.groups,_=m[v];if(typeof g=="number"&&(v=g,_=m[g],g=null),_&&_.count&&_.opacity){_.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,_,g));for(var d=[],S=1;S<_.activation.length;S++)_.activation[S]&&(_.activation[S]===!0||_.activation[S].data.length)&&d.push.apply(d,function(w){if(Array.isArray(w))return s(w)}(y=this.getMarkerDrawOptions(S,_,g))||function(w){if(typeof Symbol<"u"&&w[Symbol.iterator]!=null||w["@@iterator"]!=null)return Array.from(w)}(y)||k(y)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}());d.length&&this.drawMarker(d)}},x.prototype.getMarkerDrawOptions=function(v,g,y){var m=g.range,_=g.tree,d=g.viewport,S=g.activation,w=g.selectionBuffer,E=g.count;if(this.regl,!_)return y?[t({},g,{markerTexture:this.markerTextures[v],activation:S[v],count:y.length,elements:y,offset:0})]:[t({},g,{markerTexture:this.markerTextures[v],activation:S[v],offset:0})];var C=[],O=_.range(m,{lod:!0,px:[(m[2]-m[0])/d.width,(m[3]-m[1])/d.height]});if(y){for(var P=S[v].data,z=new Uint8Array(E),j=0;j<y.length;j++){var I=y[j];z[I]=P?P[I]:1}w.subdata(z)}for(var N=O.length;N--;){var W=M(O[N],2),F=W[0],U=W[1];C.push(t({},g,{markerTexture:this.markerTextures[v],activation:y?w:S[v],offset:F,count:U-F}))}return C},x.prototype.update=function(){for(var v=this,g=arguments.length,y=new Array(g),m=0;m<g;m++)y[m]=arguments[m];if(y.length){y.length===1&&Array.isArray(y[0])&&(y=y[0]);var _=this.groups,d=this.gl,S=this.regl,w=this.maxSize,E=this.maxColors,C=this.palette;this.groups=_=y.map(function(O,P){var z=_[P];if(O===void 0)return z;O===null?O={positions:null}:typeof O=="function"?O={ondraw:O}:typeof O[0]=="number"&&(O={positions:O}),(O=n(O,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions===null&&(O.positions=[]),O.tooManyColors!=null&&(v.tooManyColors=O.tooManyColors),z||(_[P]=z={id:P,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:S.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},O=t({},x.defaults,O)),O.positions&&!("marker"in O)&&(O.marker=z.marker,delete z.marker),O.marker&&!("positions"in O)&&(O.positions=z.positions,delete z.positions);var j=0,I=0;if(r(z,O,[{snap:!0,size:function(ge,me){return ge==null&&(ge=x.defaults.size),j+=ge&&ge.length?1:0,ge},borderSize:function(ge,me){return ge==null&&(ge=x.defaults.borderSize),j+=ge&&ge.length?1:0,ge},opacity:parseFloat,color:function(ge,me){return ge==null&&(ge=x.defaults.color),ge=v.updateColor(ge),I++,ge},borderColor:function(ge,me){return ge==null&&(ge=x.defaults.borderColor),ge=v.updateColor(ge),I++,ge},bounds:function(ge,me,be){return"range"in be||(be.range=null),ge},positions:function(ge,me,be){var ke=me.snap,ze=me.positionBuffer,ve=me.positionFractBuffer,oe=me.selectionBuffer;if(ge.x||ge.y)return ge.x.length?me.xAttr={buffer:S.buffer(ge.x),offset:0,stride:4,count:ge.x.length}:me.xAttr={buffer:ge.x.buffer,offset:4*ge.x.offset||0,stride:4*(ge.x.stride||1),count:ge.x.count},ge.y.length?me.yAttr={buffer:S.buffer(ge.y),offset:0,stride:4,count:ge.y.length}:me.yAttr={buffer:ge.y.buffer,offset:4*ge.y.offset||0,stride:4*(ge.y.stride||1),count:ge.y.count},me.count=Math.max(me.xAttr.count,me.yAttr.count),ge;ge=a(ge,"float64");var ie=me.count=Math.floor(ge.length/2),he=me.bounds=ie?b(ge,2):null;if(be.range||me.range||(delete me.range,be.range=he),be.marker||me.marker||(delete me.marker,be.marker=null),ke&&(ke===!0||ie>ke)?me.tree=o(ge,{bounds:he}):ke&&ke.length&&(me.tree=ke),me.tree){var Se={primitive:"points",usage:"static",data:me.tree,type:"uint32"};me.elements?me.elements(Se):me.elements=S.elements(Se)}var ye=u.float32(ge);return ze({data:ye,usage:"dynamic"}),ve({data:u.fract32(ge,ye),usage:"dynamic"}),oe({data:new Uint8Array(ie),type:"uint8",usage:"stream"}),ge}},{marker:function(ge,me,be){var ke=me.activation;if(ke.forEach(function(ye){return ye&&ye.destroy&&ye.destroy()}),ke.length=0,ge&&typeof ge[0]!="number"){for(var ze=[],ve=0,oe=Math.min(ge.length,me.count);ve<oe;ve++){var ie=v.addMarker(ge[ve]);ze[ie]||(ze[ie]=new Uint8Array(me.count)),ze[ie][ve]=1}for(var he=0;he<ze.length;he++)if(ze[he]){var Se={data:ze[he],type:"uint8",usage:"static"};ke[he]?ke[he](Se):ke[he]=S.buffer(Se),ke[he].data=ze[he]}}else ke[v.addMarker(ge)]=!0;return ge},range:function(ge,me,be){var ke=me.bounds;if(ke)return ge||(ge=ke),me.scale=[1/(ge[2]-ge[0]),1/(ge[3]-ge[1])],me.translate=[-ge[0],-ge[1]],me.scaleFract=u.fract(me.scale),me.translateFract=u.fract(me.translate),ge},viewport:function(ge){return h(ge||[d.drawingBufferWidth,d.drawingBufferHeight])}}]),j){var N=z,W=N.count,F=N.size,U=N.borderSize,H=N.sizeBuffer,ne=new Uint8Array(2*W);if(F.length||U.length)for(var $=0;$<W;$++)ne[2*$]=Math.round(255*(F[$]==null?F:F[$])/w),ne[2*$+1]=Math.round(255*(U[$]==null?U:U[$])/w);H({data:ne,usage:"dynamic"})}if(I){var K,Q=z,Z=Q.count,X=Q.color,te=Q.borderColor,ae=Q.colorBuffer;if(v.tooManyColors){if(X.length||te.length){K=new Uint8Array(8*Z);for(var se=0;se<Z;se++){var ce=X[se];K[8*se]=C[4*ce],K[8*se+1]=C[4*ce+1],K[8*se+2]=C[4*ce+2],K[8*se+3]=C[4*ce+3];var fe=te[se];K[8*se+4]=C[4*fe],K[8*se+5]=C[4*fe+1],K[8*se+6]=C[4*fe+2],K[8*se+7]=C[4*fe+3]}}}else if(X.length||te.length){K=new Uint8Array(4*Z+2);for(var pe=0;pe<Z;pe++)X[pe]!=null&&(K[4*pe]=X[pe]%E,K[4*pe+1]=Math.floor(X[pe]/E)),te[pe]!=null&&(K[4*pe+2]=te[pe]%E,K[4*pe+3]=Math.floor(te[pe]/E))}ae({data:K||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return z})}},x.prototype.addMarker=function(v){var g,y=this.markerTextures,m=this.regl,_=this.markerCache,d=v==null?0:_.indexOf(v);if(d>=0)return d;if(v instanceof Uint8Array||v instanceof Uint8ClampedArray)g=v;else{g=new Uint8Array(v.length);for(var S=0,w=v.length;S<w;S++)g[S]=255*v[S]}var E=Math.floor(Math.sqrt(g.length));return d=y.length,_.push(v),y.push(m.texture({channels:1,data:g,radius:E,mag:"linear",min:"linear"})),d},x.prototype.updateColor=function(v){var g=this.paletteIds,y=this.palette,m=this.maxColors;Array.isArray(v)||(v=[v]);var _=[];if(typeof v[0]=="number"){var d=[];if(Array.isArray(v))for(var S=0;S<v.length;S+=4)d.push(v.slice(S,S+4));else for(var w=0;w<v.length;w+=4)d.push(v.subarray(w,w+4));v=d}for(var E=0;E<v.length;E++){var C=v[E];C=T(C,"uint8");var O=f(C,!1);if(g[O]==null){var P=y.length;g[O]=Math.floor(P/4),y[P]=C[0],y[P+1]=C[1],y[P+2]=C[2],y[P+3]=C[3]}_[E]=g[O]}return!this.tooManyColors&&y.length>4*m&&(this.tooManyColors=!0),this.updatePalette(y),_.length===1?_[0]:_},x.prototype.updatePalette=function(v){if(!this.tooManyColors){var g=this.maxColors,y=this.paletteTexture,m=Math.ceil(.25*v.length/g);if(m>1)for(var _=.25*(v=v.slice()).length%g;_<m*g;_++)v.push(0,0,0,0);y.height<m&&y.resize(g,m),y.subimage({width:Math.min(.25*v.length,g),height:m,data:v},0,0)}},x.prototype.destroy=function(){return this.groups.forEach(function(v){v.sizeBuffer.destroy(),v.positionBuffer.destroy(),v.positionFractBuffer.destroy(),v.colorBuffer.destroy(),v.activation.forEach(function(g){return g&&g.destroy&&g.destroy()}),v.selectionBuffer.destroy(),v.elements&&v.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(v){return v&&v.destroy&&v.destroy()}),this};var p=e(50896);ee.exports=function(v,g){var y=new c(v,g),m=y.render.bind(y);return p(m,{render:m,update:y.update.bind(y),draw:y.draw.bind(y),destroy:y.destroy.bind(y),regl:y.regl,gl:y.gl,canvas:y.gl.canvas,groups:y.groups,markers:y.markerCache,palette:y.palette}),m}},55795:function(ee,R,e){var M=e(38540),k=e(55616),s=e(76752),T=e(3951),b=e(67752),f=e(51160),o=e(47520);function t(a,l){if(!(this instanceof t))return new t(a);this.traces=[],this.passes={},this.regl=a,this.scatter=M(a),this.canvas=this.scatter.canvas}function i(a,l,u){return(a.id!=null?a.id:a)<<16|(255&l)<<8|255&u}function n(a,l,u){var h,c,x,p,v=a[l],g=a[u];return v.length>2?(v[0],v[2],h=v[1],c=v[3]):v.length?(h=v[0],c=v[1]):(v.x,h=v.y,v.x,v.width,c=v.y+v.height),g.length>2?(x=g[0],p=g[2],g[1],g[3]):g.length?(x=g[0],p=g[1]):(x=g.x,g.y,p=g.x+g.width,g.y,g.height),[x,h,p,c]}function r(a){if(typeof a=="number")return[a,a,a,a];if(a.length===2)return[a[0],a[1],a[0],a[1]];var l=f(a);return[l.x,l.y,l.x+l.width,l.y+l.height]}ee.exports=t,t.prototype.render=function(){for(var a,l=this,u=[],h=arguments.length;h--;)u[h]=arguments[h];return u.length&&(a=this).update.apply(a,u),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=T(function(){l.draw(),l.dirty=!0,l.planned=null})):(this.draw(),this.dirty=!0,T(function(){l.dirty=!1})),this)},t.prototype.update=function(){for(var a,l=[],u=arguments.length;u--;)l[u]=arguments[u];if(l.length){for(var h=0;h<l.length;h++)this.updateItem(h,l[h]);this.traces=this.traces.filter(Boolean);for(var c=[],x=0,p=0;p<this.traces.length;p++){for(var v=this.traces[p],g=this.traces[p].passes,y=0;y<g.length;y++)c.push(this.passes[g[y]]);v.passOffset=x,x+=v.passes.length}return(a=this.scatter).update.apply(a,c),this}},t.prototype.updateItem=function(a,l){var u=this.regl;if(l===null)return this.traces[a]=null,this;if(!l)return this;var h,c=k(l,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),x=this.traces[a]||(this.traces[a]={id:a,buffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:f([u._gl.drawingBufferWidth,u._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(c.color!=null&&(x.color=c.color),c.size!=null&&(x.size=c.size),c.marker!=null&&(x.marker=c.marker),c.borderColor!=null&&(x.borderColor=c.borderColor),c.borderSize!=null&&(x.borderSize=c.borderSize),c.opacity!=null&&(x.opacity=c.opacity),c.viewport&&(x.viewport=f(c.viewport)),c.diagonal!=null&&(x.diagonal=c.diagonal),c.upper!=null&&(x.upper=c.upper),c.lower!=null&&(x.lower=c.lower),c.data){x.buffer(o(c.data)),x.columns=c.data.length,x.count=c.data[0].length,x.bounds=[];for(var p=0;p<x.columns;p++)x.bounds[p]=s(c.data[p],1)}c.range&&(x.range=c.range,h=x.range&&typeof x.range[0]!="number"),c.domain&&(x.domain=c.domain);var v=!1;c.padding!=null&&(Array.isArray(c.padding)&&c.padding.length===x.columns&&typeof c.padding[c.padding.length-1]=="number"?(x.padding=c.padding.map(r),v=!0):x.padding=r(c.padding));var g=x.columns,y=x.count,m=x.viewport.width,_=x.viewport.height,d=x.viewport.x,S=x.viewport.y,w=m/g,E=_/g;x.passes=[];for(var C=0;C<g;C++)for(var O=0;O<g;O++)if((x.diagonal||O!==C)&&(x.upper||!(C>O))&&(x.lower||!(C<O))){var P=i(x.id,C,O),z=this.passes[P]||(this.passes[P]={});if(c.data&&(c.transpose?z.positions={x:{buffer:x.buffer,offset:O,count:y,stride:g},y:{buffer:x.buffer,offset:C,count:y,stride:g}}:z.positions={x:{buffer:x.buffer,offset:O*y,count:y},y:{buffer:x.buffer,offset:C*y,count:y}},z.bounds=n(x.bounds,C,O)),c.domain||c.viewport||c.data){var j=v?n(x.padding,C,O):x.padding;if(x.domain){var I=n(x.domain,C,O),N=I[0],W=I[1],F=I[2],U=I[3];z.viewport=[d+N*m+j[0],S+W*_+j[1],d+F*m-j[2],S+U*_-j[3]]}else z.viewport=[d+O*w+w*j[0],S+C*E+E*j[1],d+(O+1)*w-w*j[2],S+(C+1)*E-E*j[3]]}c.color&&(z.color=x.color),c.size&&(z.size=x.size),c.marker&&(z.marker=x.marker),c.borderSize&&(z.borderSize=x.borderSize),c.borderColor&&(z.borderColor=x.borderColor),c.opacity&&(z.opacity=x.opacity),c.range&&(z.range=h?n(x.range,C,O):x.range||z.bounds),x.passes.push(P)}return this},t.prototype.draw=function(){for(var a,l=[],u=arguments.length;u--;)l[u]=arguments[u];if(l.length){for(var h=[],c=0;c<l.length;c++)if(typeof l[c]=="number"){var x=this.traces[l[c]],p=x.passes,v=x.passOffset;h.push.apply(h,b(v,v+p.length))}else if(l[c].length){var g=l[c],y=this.traces[c],m=y.passes,_=y.passOffset;m=m.map(function(d,S){h[_+S]=g})}(a=this.scatter).draw.apply(a,h)}else this.scatter.draw();return this},t.prototype.destroy=function(){return this.traces.forEach(function(a){a.buffer&&a.buffer.destroy&&a.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},28624:function(ee){ee.exports=function(){function R(Be,Ge){this.id=te++,this.type=Be,this.data=Ge}function e(Be){if(Be.length===0)return[];var Ge=Be.charAt(0),ot=Be.charAt(Be.length-1);if(1<Be.length&&Ge===ot&&(Ge==='"'||Ge==="'"))return['"'+Be.substr(1,Be.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Ge=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Be))return e(Be.substr(0,Ge.index)).concat(e(Ge[1])).concat(e(Be.substr(Ge.index+Ge[0].length)));if((Ge=Be.split(".")).length===1)return['"'+Be.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Be=[],ot=0;ot<Ge.length;++ot)Be=Be.concat(e(Ge[ot]));return Be}function M(Be){return"["+e(Be).join("][")+"]"}function k(Be){return typeof Be=="string"?Be.split():Be}function s(Be){return typeof Be=="string"?document.querySelector(Be):Be}function T(Be){var Ge,ot,it,dt,gt=Be||{};Be={};var je=[],Re=[],rt=typeof window>"u"?1:window.devicePixelRatio,ct=!1,ut={},et=function(mt){},xt=function(){};if(typeof gt=="string"?Ge=document.querySelector(gt):typeof gt=="object"&&(typeof gt.nodeName=="string"&&typeof gt.appendChild=="function"&&typeof gt.getBoundingClientRect=="function"?Ge=gt:typeof gt.drawArrays=="function"||typeof gt.drawElements=="function"?it=(dt=gt).canvas:("gl"in gt?dt=gt.gl:"canvas"in gt?it=s(gt.canvas):"container"in gt&&(ot=s(gt.container)),"attributes"in gt&&(Be=gt.attributes),"extensions"in gt&&(je=k(gt.extensions)),"optionalExtensions"in gt&&(Re=k(gt.optionalExtensions)),"onDone"in gt&&(et=gt.onDone),"profile"in gt&&(ct=!!gt.profile),"pixelRatio"in gt&&(rt=+gt.pixelRatio),"cachedCode"in gt&&(ut=gt.cachedCode))),Ge&&(Ge.nodeName.toLowerCase()==="canvas"?it=Ge:ot=Ge),!dt){if(!it){if(!(Ge=function(mt,Tt,yt){function bt(){var en=window.innerWidth,an=window.innerHeight;mt!==document.body&&(en=(an=Ut.getBoundingClientRect()).right-an.left,an=an.bottom-an.top),Ut.width=yt*en,Ut.height=yt*an}var zt,Ut=document.createElement("canvas");return X(Ut.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),mt.appendChild(Ut),mt===document.body&&(Ut.style.position="absolute",X(mt.style,{margin:0,padding:0})),mt!==document.body&&typeof ResizeObserver=="function"?(zt=new ResizeObserver(function(){setTimeout(bt)})).observe(mt):window.addEventListener("resize",bt,!1),bt(),{canvas:Ut,onDestroy:function(){zt?zt.disconnect():window.removeEventListener("resize",bt),mt.removeChild(Ut)}}}(ot||document.body,0,rt)))return null;it=Ge.canvas,xt=Ge.onDestroy}Be.premultipliedAlpha===void 0&&(Be.premultipliedAlpha=!0),dt=function(mt,Tt){function yt(bt){try{return mt.getContext(bt,Tt)}catch{return null}}return yt("webgl")||yt("experimental-webgl")||yt("webgl-experimental")}(it,Be)}return dt?{gl:dt,canvas:it,container:ot,extensions:je,optionalExtensions:Re,pixelRatio:rt,profile:ct,cachedCode:ut,onDone:et,onDestroy:xt}:(xt(),et("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function b(Be,Ge){for(var ot=Array(Be),it=0;it<Be;++it)ot[it]=Ge(it);return ot}function f(Be){var Ge,ot;return Ge=(65535<Be)<<4,Ge|=ot=(255<(Be>>>=Ge))<<3,(Ge|=ot=(15<(Be>>>=ot))<<2)|(ot=(3<(Be>>>=ot))<<1)|Be>>>ot>>1}function o(){function Be(it){e:{for(var dt=16;268435456>=dt;dt*=16)if(it<=dt){it=dt;break e}it=0}return 0<(dt=ot[f(it)>>2]).length?dt.pop():new ArrayBuffer(it)}function Ge(it){ot[f(it.byteLength)>>2].push(it)}var ot=b(8,function(){return[]});return{alloc:Be,free:Ge,allocType:function(it,dt){var gt=null;switch(it){case 5120:gt=new Int8Array(Be(dt),0,dt);break;case 5121:gt=new Uint8Array(Be(dt),0,dt);break;case 5122:gt=new Int16Array(Be(2*dt),0,dt);break;case 5123:gt=new Uint16Array(Be(2*dt),0,dt);break;case 5124:gt=new Int32Array(Be(4*dt),0,dt);break;case 5125:gt=new Uint32Array(Be(4*dt),0,dt);break;case 5126:gt=new Float32Array(Be(4*dt),0,dt);break;default:return null}return gt.length!==dt?gt.subarray(0,dt):gt},freeType:function(it){Ge(it.buffer)}}}function t(Be){return!!Be&&typeof Be=="object"&&Array.isArray(Be.shape)&&Array.isArray(Be.stride)&&typeof Be.offset=="number"&&Be.shape.length===Be.stride.length&&(Array.isArray(Be.data)||ge(Be.data))}function i(Be,Ge,ot,it,dt,gt){for(var je=0;je<Ge;++je)for(var Re=Be[je],rt=0;rt<ot;++rt)for(var ct=Re[rt],ut=0;ut<it;++ut)dt[gt++]=ct[ut]}function n(Be,Ge,ot,it,dt){for(var gt=1,je=ot+1;je<Ge.length;++je)gt*=Ge[je];var Re=Ge[ot];if(Ge.length-ot==4){var rt=Ge[ot+1],ct=Ge[ot+2];for(Ge=Ge[ot+3],je=0;je<Re;++je)i(Be[je],rt,ct,Ge,it,dt),dt+=gt}else for(je=0;je<Re;++je)n(Be[je],Ge,ot+1,it,dt),dt+=gt}function r(Be){return 0|ke[Object.prototype.toString.call(Be)]}function a(Be,Ge){for(var ot=0;ot<Ge.length;++ot)Be[ot]=Ge[ot]}function l(Be,Ge,ot,it,dt,gt,je){for(var Re=0,rt=0;rt<ot;++rt)for(var ct=0;ct<it;++ct)Be[Re++]=Ge[dt*rt+gt*ct+je]}function u(Be,Ge,ot,it){function dt(et){this.id=rt++,this.buffer=Be.createBuffer(),this.type=et,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,ot.profile&&(this.stats={size:0})}function gt(et,xt,mt){et.byteLength=xt.byteLength,Be.bufferData(et.type,xt,mt)}function je(et,xt,mt,Tt,yt,bt){if(et.usage=mt,Array.isArray(xt)){if(et.dtype=Tt||5126,0<xt.length)if(Array.isArray(xt[0])){yt=ie(xt);for(var zt=Tt=1;zt<yt.length;++zt)Tt*=yt[zt];et.dimension=Tt,gt(et,xt=oe(xt,yt,et.dtype),mt),bt?et.persistentData=xt:fe.freeType(xt)}else typeof xt[0]=="number"?(et.dimension=yt,a(yt=fe.allocType(et.dtype,xt.length),xt),gt(et,yt,mt),bt?et.persistentData=yt:fe.freeType(yt)):ge(xt[0])&&(et.dimension=xt[0].length,et.dtype=Tt||r(xt[0])||5126,gt(et,xt=oe(xt,[xt.length,xt[0].length],et.dtype),mt),bt?et.persistentData=xt:fe.freeType(xt))}else if(ge(xt))et.dtype=Tt||r(xt),et.dimension=yt,gt(et,xt,mt),bt&&(et.persistentData=new Uint8Array(new Uint8Array(xt.buffer)));else if(t(xt)){yt=xt.shape;var Ut=xt.stride,en=(zt=xt.offset,0),an=0,rn=0,qt=0;yt.length===1?(en=yt[0],an=1,rn=Ut[0],qt=0):yt.length===2&&(en=yt[0],an=yt[1],rn=Ut[0],qt=Ut[1]),et.dtype=Tt||r(xt.data)||5126,et.dimension=an,l(yt=fe.allocType(et.dtype,en*an),xt.data,en,an,rn,qt,zt),gt(et,yt,mt),bt?et.persistentData=yt:fe.freeType(yt)}else xt instanceof ArrayBuffer&&(et.dtype=5121,et.dimension=yt,gt(et,xt,mt),bt&&(et.persistentData=new Uint8Array(new Uint8Array(xt))))}function Re(et){Ge.bufferCount--,it(et),Be.deleteBuffer(et.buffer),et.buffer=null,delete ct[et.id]}var rt=0,ct={};dt.prototype.bind=function(){Be.bindBuffer(this.type,this.buffer)},dt.prototype.destroy=function(){Re(this)};var ut=[];return ot.profile&&(Ge.getTotalBufferSize=function(){var et=0;return Object.keys(ct).forEach(function(xt){et+=ct[xt].stats.size}),et}),{create:function(et,xt,mt,Tt){function yt(zt){var Ut=35044,en=null,an=0,rn=0,qt=1;return Array.isArray(zt)||ge(zt)||t(zt)||zt instanceof ArrayBuffer?en=zt:typeof zt=="number"?an=0|zt:zt&&("data"in zt&&(en=zt.data),"usage"in zt&&(Ut=ve[zt.usage]),"type"in zt&&(rn=ze[zt.type]),"dimension"in zt&&(qt=0|zt.dimension),"length"in zt&&(an=0|zt.length)),bt.bind(),en?je(bt,en,Ut,rn,qt,Tt):(an&&Be.bufferData(bt.type,an,Ut),bt.dtype=rn||5121,bt.usage=Ut,bt.dimension=qt,bt.byteLength=an),ot.profile&&(bt.stats.size=bt.byteLength*he[bt.dtype]),yt}Ge.bufferCount++;var bt=new dt(xt);return ct[bt.id]=bt,mt||yt(et),yt._reglType="buffer",yt._buffer=bt,yt.subdata=function(zt,Ut){var en,an=0|(Ut||0);if(bt.bind(),ge(zt)||zt instanceof ArrayBuffer)Be.bufferSubData(bt.type,an,zt);else if(Array.isArray(zt)){if(0<zt.length)if(typeof zt[0]=="number"){var rn=fe.allocType(bt.dtype,zt.length);a(rn,zt),Be.bufferSubData(bt.type,an,rn),fe.freeType(rn)}else(Array.isArray(zt[0])||ge(zt[0]))&&(en=ie(zt),rn=oe(zt,en,bt.dtype),Be.bufferSubData(bt.type,an,rn),fe.freeType(rn))}else if(t(zt)){en=zt.shape;var qt=zt.stride,Kt=rn=0,xn=0,on=0;en.length===1?(rn=en[0],Kt=1,xn=qt[0],on=0):en.length===2&&(rn=en[0],Kt=en[1],xn=qt[0],on=qt[1]),en=Array.isArray(zt.data)?bt.dtype:r(zt.data),l(en=fe.allocType(en,rn*Kt),zt.data,rn,Kt,xn,on,zt.offset),Be.bufferSubData(bt.type,an,en),fe.freeType(en)}return yt},ot.profile&&(yt.stats=bt.stats),yt.destroy=function(){Re(bt)},yt},createStream:function(et,xt){var mt=ut.pop();return mt||(mt=new dt(et)),mt.bind(),je(mt,xt,35040,0,1,!1),mt},destroyStream:function(et){ut.push(et)},clear:function(){me(ct).forEach(Re),ut.forEach(Re)},getBuffer:function(et){return et&&et._buffer instanceof dt?et._buffer:null},restore:function(){me(ct).forEach(function(et){et.buffer=Be.createBuffer(),Be.bindBuffer(et.type,et.buffer),Be.bufferData(et.type,et.persistentData||et.byteLength,et.usage)})},_initBuffer:je}}function h(Be,Ge,ot,it){function dt(et){this.id=rt++,Re[this.id]=this,this.buffer=et,this.primType=4,this.type=this.vertCount=0}function gt(et,xt,mt,Tt,yt,bt,zt){var Ut;if(et.buffer.bind(),xt?((Ut=zt)||ge(xt)&&(!t(xt)||ge(xt.data))||(Ut=Ge.oes_element_index_uint?5125:5123),ot._initBuffer(et.buffer,xt,mt,Ut,3)):(Be.bufferData(34963,bt,mt),et.buffer.dtype=Ut||5121,et.buffer.usage=mt,et.buffer.dimension=3,et.buffer.byteLength=bt),Ut=zt,!zt){switch(et.buffer.dtype){case 5121:case 5120:Ut=5121;break;case 5123:case 5122:Ut=5123;break;case 5125:case 5124:Ut=5125}et.buffer.dtype=Ut}et.type=Ut,0>(xt=yt)&&(xt=et.buffer.byteLength,Ut===5123?xt>>=1:Ut===5125&&(xt>>=2)),et.vertCount=xt,xt=Tt,0>Tt&&(xt=4,(Tt=et.buffer.dimension)===1&&(xt=0),Tt===2&&(xt=1),Tt===3&&(xt=4)),et.primType=xt}function je(et){it.elementsCount--,delete Re[et.id],et.buffer.destroy(),et.buffer=null}var Re={},rt=0,ct={uint8:5121,uint16:5123};Ge.oes_element_index_uint&&(ct.uint32=5125),dt.prototype.bind=function(){this.buffer.bind()};var ut=[];return{create:function(et,xt){function mt(bt){if(bt)if(typeof bt=="number")Tt(bt),yt.primType=4,yt.vertCount=0|bt,yt.type=5121;else{var zt=null,Ut=35044,en=-1,an=-1,rn=0,qt=0;Array.isArray(bt)||ge(bt)||t(bt)?zt=bt:("data"in bt&&(zt=bt.data),"usage"in bt&&(Ut=ve[bt.usage]),"primitive"in bt&&(en=Se[bt.primitive]),"count"in bt&&(an=0|bt.count),"type"in bt&&(qt=ct[bt.type]),"length"in bt?rn=0|bt.length:(rn=an,qt===5123||qt===5122?rn*=2:qt!==5125&&qt!==5124||(rn*=4))),gt(yt,zt,Ut,en,an,rn,qt)}else Tt(),yt.primType=4,yt.vertCount=0,yt.type=5121;return mt}var Tt=ot.create(null,34963,!0),yt=new dt(Tt._buffer);return it.elementsCount++,mt(et),mt._reglType="elements",mt._elements=yt,mt.subdata=function(bt,zt){return Tt.subdata(bt,zt),mt},mt.destroy=function(){je(yt)},mt},createStream:function(et){var xt=ut.pop();return xt||(xt=new dt(ot.create(null,34963,!0,!1)._buffer)),gt(xt,et,35040,-1,-1,0,0),xt},destroyStream:function(et){ut.push(et)},getElements:function(et){return typeof et=="function"&&et._elements instanceof dt?et._elements:null},clear:function(){me(Re).forEach(je)}}}function c(Be){for(var Ge=fe.allocType(5123,Be.length),ot=0;ot<Be.length;++ot)if(isNaN(Be[ot]))Ge[ot]=65535;else if(Be[ot]===1/0)Ge[ot]=31744;else if(Be[ot]===-1/0)Ge[ot]=64512;else{ye[0]=Be[ot];var it=(gt=we[0])>>>31<<15,dt=(gt<<1>>>24)-127,gt=gt>>13&1023;Ge[ot]=-24>dt?it:-14>dt?it+(gt+1024>>-14-dt):15<dt?it+31744:it+(dt+15<<10)+gt}return Ge}function x(Be){return Array.isArray(Be)||ge(Be)}function p(Be){return"[object "+Be+"]"}function v(Be){return Array.isArray(Be)&&(Be.length===0||typeof Be[0]=="number")}function g(Be){return!(!Array.isArray(Be)||Be.length===0||!x(Be[0]))}function y(Be){return Object.prototype.toString.call(Be)}function m(Be){if(!Be)return!1;var Ge=y(Be);return 0<=Ve.indexOf(Ge)||v(Be)||g(Be)||t(Be)}function _(Be,Ge){Be.type===36193?(Be.data=c(Ge),fe.freeType(Ge)):Be.data=Ge}function d(Be,Ge,ot,it,dt,gt){if(Be=tt[Be]!==void 0?tt[Be]:Ie[Be]*Ye[Ge],gt&&(Be*=6),dt){for(it=0;1<=ot;)it+=Be*ot*ot,ot/=2;return it}return Be*ot*it}function S(Be,Ge,ot,it,dt,gt,je){function Re(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function rt(Gt,gn){Gt.internalformat=gn.internalformat,Gt.format=gn.format,Gt.type=gn.type,Gt.compressed=gn.compressed,Gt.premultiplyAlpha=gn.premultiplyAlpha,Gt.flipY=gn.flipY,Gt.unpackAlignment=gn.unpackAlignment,Gt.colorSpace=gn.colorSpace,Gt.width=gn.width,Gt.height=gn.height,Gt.channels=gn.channels}function ct(Gt,gn){if(typeof gn=="object"&&gn){"premultiplyAlpha"in gn&&(Gt.premultiplyAlpha=gn.premultiplyAlpha),"flipY"in gn&&(Gt.flipY=gn.flipY),"alignment"in gn&&(Gt.unpackAlignment=gn.alignment),"colorSpace"in gn&&(Gt.colorSpace=yn[gn.colorSpace]),"type"in gn&&(Gt.type=Mn[gn.type]);var Ct=Gt.width,Rt=Gt.height,Zt=Gt.channels,cn=!1;"shape"in gn?(Ct=gn.shape[0],Rt=gn.shape[1],gn.shape.length===3&&(Zt=gn.shape[2],cn=!0)):("radius"in gn&&(Ct=Rt=gn.radius),"width"in gn&&(Ct=gn.width),"height"in gn&&(Rt=gn.height),"channels"in gn&&(Zt=gn.channels,cn=!0)),Gt.width=0|Ct,Gt.height=0|Rt,Gt.channels=0|Zt,Ct=!1,"format"in gn&&(Ct=gn.format,Rt=Gt.internalformat=zn[Ct],Gt.format=Sn[Rt],Ct in Mn&&!("type"in gn)&&(Gt.type=Mn[Ct]),Ct in Wn&&(Gt.compressed=!0),Ct=!0),!cn&&Ct?Gt.channels=Ie[Gt.format]:cn&&!Ct&&Gt.channels!==Oe[Gt.format]&&(Gt.format=Gt.internalformat=Oe[Gt.channels])}}function ut(Gt){Be.pixelStorei(37440,Gt.flipY),Be.pixelStorei(37441,Gt.premultiplyAlpha),Be.pixelStorei(37443,Gt.colorSpace),Be.pixelStorei(3317,Gt.unpackAlignment)}function et(){Re.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function xt(Gt,gn){var Ct=null;if(m(gn)?Ct=gn:gn&&(ct(Gt,gn),"x"in gn&&(Gt.xOffset=0|gn.x),"y"in gn&&(Gt.yOffset=0|gn.y),m(gn.data)&&(Ct=gn.data)),gn.copy){var Rt=dt.viewportWidth,Zt=dt.viewportHeight;Gt.width=Gt.width||Rt-Gt.xOffset,Gt.height=Gt.height||Zt-Gt.yOffset,Gt.needsCopy=!0}else if(Ct){if(ge(Ct))Gt.channels=Gt.channels||4,Gt.data=Ct,"type"in gn||Gt.type!==5121||(Gt.type=0|ke[Object.prototype.toString.call(Ct)]);else if(v(Ct)){switch(Gt.channels=Gt.channels||4,Zt=(Rt=Ct).length,Gt.type){case 5121:case 5123:case 5125:case 5126:(Zt=fe.allocType(Gt.type,Zt)).set(Rt),Gt.data=Zt;break;case 36193:Gt.data=c(Rt)}Gt.alignment=1,Gt.needsFree=!0}else if(t(Ct)){Rt=Ct.data,Array.isArray(Rt)||Gt.type!==5121||(Gt.type=0|ke[Object.prototype.toString.call(Rt)]),Zt=Ct.shape;var cn,fn,_n,pn,sn=Ct.stride;Zt.length===3?(_n=Zt[2],pn=sn[2]):pn=_n=1,cn=Zt[0],fn=Zt[1],Zt=sn[0],sn=sn[1],Gt.alignment=1,Gt.width=cn,Gt.height=fn,Gt.channels=_n,Gt.format=Gt.internalformat=Oe[_n],Gt.needsFree=!0,cn=pn,Ct=Ct.offset,_n=Gt.width,pn=Gt.height,fn=Gt.channels;for(var Nt=fe.allocType(Gt.type===36193?5126:Gt.type,_n*pn*fn),Ft=0,Qt=0;Qt<pn;++Qt)for(var Tn=0;Tn<_n;++Tn)for(var Pn=0;Pn<fn;++Pn)Nt[Ft++]=Rt[Zt*Tn+sn*Qt+cn*Pn+Ct];_(Gt,Nt)}else if(y(Ct)===de||y(Ct)===_e||y(Ct)===Ae)y(Ct)===de||y(Ct)===_e?Gt.element=Ct:Gt.element=Ct.canvas,Gt.width=Gt.element.width,Gt.height=Gt.element.height,Gt.channels=4;else if(y(Ct)===Pe)Gt.element=Ct,Gt.width=Ct.width,Gt.height=Ct.height,Gt.channels=4;else if(y(Ct)===Ee)Gt.element=Ct,Gt.width=Ct.naturalWidth,Gt.height=Ct.naturalHeight,Gt.channels=4;else if(y(Ct)===Fe)Gt.element=Ct,Gt.width=Ct.videoWidth,Gt.height=Ct.videoHeight,Gt.channels=4;else if(g(Ct)){for(Rt=Gt.width||Ct[0].length,Zt=Gt.height||Ct.length,sn=Gt.channels,sn=x(Ct[0][0])?sn||Ct[0][0].length:sn||1,cn=be.shape(Ct),_n=1,pn=0;pn<cn.length;++pn)_n*=cn[pn];_n=fe.allocType(Gt.type===36193?5126:Gt.type,_n),be.flatten(Ct,cn,"",_n),_(Gt,_n),Gt.alignment=1,Gt.width=Rt,Gt.height=Zt,Gt.channels=sn,Gt.format=Gt.internalformat=Oe[sn],Gt.needsFree=!0}}else Gt.width=Gt.width||1,Gt.height=Gt.height||1,Gt.channels=Gt.channels||4}function mt(Gt,gn,Ct,Rt,Zt){var cn=Gt.element,fn=Gt.data,_n=Gt.internalformat,pn=Gt.format,sn=Gt.type,Nt=Gt.width,Ft=Gt.height;ut(Gt),cn?Be.texSubImage2D(gn,Zt,Ct,Rt,pn,sn,cn):Gt.compressed?Be.compressedTexSubImage2D(gn,Zt,Ct,Rt,_n,Nt,Ft,fn):Gt.needsCopy?(it(),Be.copyTexSubImage2D(gn,Zt,Ct,Rt,Gt.xOffset,Gt.yOffset,Nt,Ft)):Be.texSubImage2D(gn,Zt,Ct,Rt,Nt,Ft,pn,sn,fn)}function Tt(){return dn.pop()||new et}function yt(Gt){Gt.needsFree&&fe.freeType(Gt.data),et.call(Gt),dn.push(Gt)}function bt(){Re.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function zt(Gt,gn,Ct){var Rt=Gt.images[0]=Tt();Gt.mipmask=1,Rt.width=Gt.width=gn,Rt.height=Gt.height=Ct,Rt.channels=Gt.channels=4}function Ut(Gt,gn){var Ct=null;if(m(gn))rt(Ct=Gt.images[0]=Tt(),Gt),xt(Ct,gn),Gt.mipmask=1;else if(ct(Gt,gn),Array.isArray(gn.mipmap))for(var Rt=gn.mipmap,Zt=0;Zt<Rt.length;++Zt)rt(Ct=Gt.images[Zt]=Tt(),Gt),Ct.width>>=Zt,Ct.height>>=Zt,xt(Ct,Rt[Zt]),Gt.mipmask|=1<<Zt;else rt(Ct=Gt.images[0]=Tt(),Gt),xt(Ct,gn),Gt.mipmask=1;rt(Gt,Gt.images[0])}function en(Gt,gn){for(var Ct=Gt.images,Rt=0;Rt<Ct.length&&Ct[Rt];++Rt){var Zt=Ct[Rt],cn=gn,fn=Rt,_n=Zt.element,pn=Zt.data,sn=Zt.internalformat,Nt=Zt.format,Ft=Zt.type,Qt=Zt.width,Tn=Zt.height;ut(Zt),_n?Be.texImage2D(cn,fn,Nt,Nt,Ft,_n):Zt.compressed?Be.compressedTexImage2D(cn,fn,sn,Qt,Tn,0,pn):Zt.needsCopy?(it(),Be.copyTexImage2D(cn,fn,Nt,Zt.xOffset,Zt.yOffset,Qt,Tn,0)):Be.texImage2D(cn,fn,Nt,Qt,Tn,0,Nt,Ft,pn||null)}}function an(){var Gt=En.pop()||new bt;Re.call(Gt);for(var gn=Gt.mipmask=0;16>gn;++gn)Gt.images[gn]=null;return Gt}function rn(Gt){for(var gn=Gt.images,Ct=0;Ct<gn.length;++Ct)gn[Ct]&&yt(gn[Ct]),gn[Ct]=null;En.push(Gt)}function qt(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Kt(Gt,gn){"min"in gn&&(Gt.minFilter=Cn[gn.min],0<=Me.indexOf(Gt.minFilter)&&!("faces"in gn)&&(Gt.genMipmaps=!0)),"mag"in gn&&(Gt.magFilter=mn[gn.mag]);var Ct=Gt.wrapS,Rt=Gt.wrapT;if("wrap"in gn){var Zt=gn.wrap;typeof Zt=="string"?Ct=Rt=wn[Zt]:Array.isArray(Zt)&&(Ct=wn[Zt[0]],Rt=wn[Zt[1]])}else"wrapS"in gn&&(Ct=wn[gn.wrapS]),"wrapT"in gn&&(Rt=wn[gn.wrapT]);if(Gt.wrapS=Ct,Gt.wrapT=Rt,"anisotropic"in gn&&(Gt.anisotropic=gn.anisotropic),"mipmap"in gn){switch(Ct=!1,typeof gn.mipmap){case"string":Gt.mipmapHint=tn[gn.mipmap],Ct=Gt.genMipmaps=!0;break;case"boolean":Ct=Gt.genMipmaps=gn.mipmap;break;case"object":Gt.genMipmaps=!1,Ct=!0}!Ct||"min"in gn||(Gt.minFilter=9984)}}function xn(Gt,gn){Be.texParameteri(gn,10241,Gt.minFilter),Be.texParameteri(gn,10240,Gt.magFilter),Be.texParameteri(gn,10242,Gt.wrapS),Be.texParameteri(gn,10243,Gt.wrapT),Ge.ext_texture_filter_anisotropic&&Be.texParameteri(gn,34046,Gt.anisotropic),Gt.genMipmaps&&(Be.hint(33170,Gt.mipmapHint),Be.generateMipmap(gn))}function on(Gt){Re.call(this),this.mipmask=0,this.internalformat=6408,this.id=Nn++,this.refCount=1,this.target=Gt,this.texture=Be.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new qt,je.profile&&(this.stats={size:0})}function Xt(Gt){Be.activeTexture(33984),Be.bindTexture(Gt.target,Gt.texture)}function ln(){var Gt=lr[0];Gt?Be.bindTexture(Gt.target,Gt.texture):Be.bindTexture(3553,null)}function Jt(Gt){var gn=Gt.texture,Ct=Gt.unit,Rt=Gt.target;0<=Ct&&(Be.activeTexture(33984+Ct),Be.bindTexture(Rt,null),lr[Ct]=null),Be.deleteTexture(gn),Gt.texture=null,Gt.params=null,Gt.pixels=null,Gt.refCount=0,delete Bn[Gt.id],gt.textureCount--}var tn={"don't care":4352,"dont care":4352,nice:4354,fast:4353},wn={repeat:10497,clamp:33071,mirror:33648},mn={nearest:9728,linear:9729},Cn=X({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},mn),yn={none:0,browser:37444},Mn={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},zn={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Wn={};Ge.ext_srgb&&(zn.srgb=35904,zn.srgba=35906),Ge.oes_texture_float&&(Mn.float32=Mn.float=5126),Ge.oes_texture_half_float&&(Mn.float16=Mn["half float"]=36193),Ge.webgl_depth_texture&&(X(zn,{depth:6402,"depth stencil":34041}),X(Mn,{uint16:5123,uint32:5125,"depth stencil":34042})),Ge.webgl_compressed_texture_s3tc&&X(Wn,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),Ge.webgl_compressed_texture_atc&&X(Wn,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),Ge.webgl_compressed_texture_pvrtc&&X(Wn,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),Ge.webgl_compressed_texture_etc1&&(Wn["rgb etc1"]=36196);var sr=Array.prototype.slice.call(Be.getParameter(34467));Object.keys(Wn).forEach(function(Gt){var gn=Wn[Gt];0<=sr.indexOf(gn)&&(zn[Gt]=gn)});var Fn=Object.keys(zn);ot.textureFormats=Fn;var Yn=[];Object.keys(zn).forEach(function(Gt){Yn[zn[Gt]]=Gt});var Xn=[];Object.keys(Mn).forEach(function(Gt){Xn[Mn[Gt]]=Gt});var rr=[];Object.keys(mn).forEach(function(Gt){rr[mn[Gt]]=Gt});var Yt=[];Object.keys(Cn).forEach(function(Gt){Yt[Cn[Gt]]=Gt});var $t=[];Object.keys(wn).forEach(function(Gt){$t[wn[Gt]]=Gt});var Sn=Fn.reduce(function(Gt,gn){var Ct=zn[gn];return Ct===6409||Ct===6406||Ct===6409||Ct===6410||Ct===6402||Ct===34041||Ge.ext_srgb&&(Ct===35904||Ct===35906)?Gt[Ct]=Ct:Ct===32855||0<=gn.indexOf("rgba")?Gt[Ct]=6408:Gt[Ct]=6407,Gt},{}),dn=[],En=[],Nn=0,Bn={},$n=ot.maxTextureUnits,lr=Array($n).map(function(){return null});return X(on.prototype,{bind:function(){this.bindCount+=1;var Gt=this.unit;if(0>Gt){for(var gn=0;gn<$n;++gn){var Ct=lr[gn];if(Ct){if(0<Ct.bindCount)continue;Ct.unit=-1}lr[gn]=this,Gt=gn;break}je.profile&&gt.maxTextureUnits<Gt+1&&(gt.maxTextureUnits=Gt+1),this.unit=Gt,Be.activeTexture(33984+Gt),Be.bindTexture(this.target,this.texture)}return Gt},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&Jt(this)}}),je.profile&&(gt.getTotalTextureSize=function(){var Gt=0;return Object.keys(Bn).forEach(function(gn){Gt+=Bn[gn].stats.size}),Gt}),{create2D:function(Gt,gn){function Ct(Zt,cn){var fn=Rt.texInfo;qt.call(fn);var _n=an();return typeof Zt=="number"?zt(_n,0|Zt,typeof cn=="number"?0|cn:0|Zt):Zt?(Kt(fn,Zt),Ut(_n,Zt)):zt(_n,1,1),fn.genMipmaps&&(_n.mipmask=(_n.width<<1)-1),Rt.mipmask=_n.mipmask,rt(Rt,_n),Rt.internalformat=_n.internalformat,Ct.width=_n.width,Ct.height=_n.height,Xt(Rt),en(_n,3553),xn(fn,3553),ln(),rn(_n),je.profile&&(Rt.stats.size=d(Rt.internalformat,Rt.type,_n.width,_n.height,fn.genMipmaps,!1)),Ct.format=Yn[Rt.internalformat],Ct.type=Xn[Rt.type],Ct.mag=rr[fn.magFilter],Ct.min=Yt[fn.minFilter],Ct.wrapS=$t[fn.wrapS],Ct.wrapT=$t[fn.wrapT],Ct}var Rt=new on(3553);return Bn[Rt.id]=Rt,gt.textureCount++,Ct(Gt,gn),Ct.subimage=function(Zt,cn,fn,_n){cn|=0,fn|=0,_n|=0;var pn=Tt();return rt(pn,Rt),pn.width=0,pn.height=0,xt(pn,Zt),pn.width=pn.width||(Rt.width>>_n)-cn,pn.height=pn.height||(Rt.height>>_n)-fn,Xt(Rt),mt(pn,3553,cn,fn,_n),ln(),yt(pn),Ct},Ct.resize=function(Zt,cn){var fn=0|Zt,_n=0|cn||fn;if(fn===Rt.width&&_n===Rt.height)return Ct;Ct.width=Rt.width=fn,Ct.height=Rt.height=_n,Xt(Rt);for(var pn=0;Rt.mipmask>>pn;++pn){var sn=fn>>pn,Nt=_n>>pn;if(!sn||!Nt)break;Be.texImage2D(3553,pn,Rt.format,sn,Nt,0,Rt.format,Rt.type,null)}return ln(),je.profile&&(Rt.stats.size=d(Rt.internalformat,Rt.type,fn,_n,!1,!1)),Ct},Ct._reglType="texture2d",Ct._texture=Rt,je.profile&&(Ct.stats=Rt.stats),Ct.destroy=function(){Rt.decRef()},Ct},createCube:function(Gt,gn,Ct,Rt,Zt,cn){function fn(sn,Nt,Ft,Qt,Tn,Pn){var On,Dn=_n.texInfo;for(qt.call(Dn),On=0;6>On;++On)pn[On]=an();if(typeof sn!="number"&&sn){if(typeof sn=="object")if(Nt)Ut(pn[0],sn),Ut(pn[1],Nt),Ut(pn[2],Ft),Ut(pn[3],Qt),Ut(pn[4],Tn),Ut(pn[5],Pn);else if(Kt(Dn,sn),ct(_n,sn),"faces"in sn)for(sn=sn.faces,On=0;6>On;++On)rt(pn[On],_n),Ut(pn[On],sn[On]);else for(On=0;6>On;++On)Ut(pn[On],sn)}else for(sn=0|sn||1,On=0;6>On;++On)zt(pn[On],sn,sn);for(rt(_n,pn[0]),_n.mipmask=Dn.genMipmaps?(pn[0].width<<1)-1:pn[0].mipmask,_n.internalformat=pn[0].internalformat,fn.width=pn[0].width,fn.height=pn[0].height,Xt(_n),On=0;6>On;++On)en(pn[On],34069+On);for(xn(Dn,34067),ln(),je.profile&&(_n.stats.size=d(_n.internalformat,_n.type,fn.width,fn.height,Dn.genMipmaps,!0)),fn.format=Yn[_n.internalformat],fn.type=Xn[_n.type],fn.mag=rr[Dn.magFilter],fn.min=Yt[Dn.minFilter],fn.wrapS=$t[Dn.wrapS],fn.wrapT=$t[Dn.wrapT],On=0;6>On;++On)rn(pn[On]);return fn}var _n=new on(34067);Bn[_n.id]=_n,gt.cubeCount++;var pn=Array(6);return fn(Gt,gn,Ct,Rt,Zt,cn),fn.subimage=function(sn,Nt,Ft,Qt,Tn){Ft|=0,Qt|=0,Tn|=0;var Pn=Tt();return rt(Pn,_n),Pn.width=0,Pn.height=0,xt(Pn,Nt),Pn.width=Pn.width||(_n.width>>Tn)-Ft,Pn.height=Pn.height||(_n.height>>Tn)-Qt,Xt(_n),mt(Pn,34069+sn,Ft,Qt,Tn),ln(),yt(Pn),fn},fn.resize=function(sn){if((sn|=0)!==_n.width){fn.width=_n.width=sn,fn.height=_n.height=sn,Xt(_n);for(var Nt=0;6>Nt;++Nt)for(var Ft=0;_n.mipmask>>Ft;++Ft)Be.texImage2D(34069+Nt,Ft,_n.format,sn>>Ft,sn>>Ft,0,_n.format,_n.type,null);return ln(),je.profile&&(_n.stats.size=d(_n.internalformat,_n.type,fn.width,fn.height,!1,!0)),fn}},fn._reglType="textureCube",fn._texture=_n,je.profile&&(fn.stats=_n.stats),fn.destroy=function(){_n.decRef()},fn},clear:function(){for(var Gt=0;Gt<$n;++Gt)Be.activeTexture(33984+Gt),Be.bindTexture(3553,null),lr[Gt]=null;me(Bn).forEach(Jt),gt.cubeCount=0,gt.textureCount=0},getTexture:function(Gt){return null},restore:function(){for(var Gt=0;Gt<$n;++Gt){var gn=lr[Gt];gn&&(gn.bindCount=0,gn.unit=-1,lr[Gt]=null)}me(Bn).forEach(function(Ct){Ct.texture=Be.createTexture(),Be.bindTexture(Ct.target,Ct.texture);for(var Rt=0;32>Rt;++Rt)if(Ct.mipmask&1<<Rt)if(Ct.target===3553)Be.texImage2D(3553,Rt,Ct.internalformat,Ct.width>>Rt,Ct.height>>Rt,0,Ct.internalformat,Ct.type,null);else for(var Zt=0;6>Zt;++Zt)Be.texImage2D(34069+Zt,Rt,Ct.internalformat,Ct.width>>Rt,Ct.height>>Rt,0,Ct.internalformat,Ct.type,null);xn(Ct.texInfo,Ct.target)})},refresh:function(){for(var Gt=0;Gt<$n;++Gt){var gn=lr[Gt];gn&&(gn.bindCount=0,gn.unit=-1,lr[Gt]=null),Be.activeTexture(33984+Gt),Be.bindTexture(3553,null),Be.bindTexture(34067,null)}}}}function w(Be,Ge,ot,it,dt,gt){function je(on,Xt,ln){this.target=on,this.texture=Xt,this.renderbuffer=ln;var Jt=on=0;Xt?(on=Xt.width,Jt=Xt.height):ln&&(on=ln.width,Jt=ln.height),this.width=on,this.height=Jt}function Re(on){on&&(on.texture&&on.texture._texture.decRef(),on.renderbuffer&&on.renderbuffer._renderbuffer.decRef())}function rt(on,Xt,ln){on&&(on.texture?on.texture._texture.refCount+=1:on.renderbuffer._renderbuffer.refCount+=1)}function ct(on,Xt){Xt&&(Xt.texture?Be.framebufferTexture2D(36160,on,Xt.target,Xt.texture._texture.texture,0):Be.framebufferRenderbuffer(36160,on,36161,Xt.renderbuffer._renderbuffer.renderbuffer))}function ut(on){var Xt=3553,ln=null,Jt=null,tn=on;return typeof on=="object"&&(tn=on.data,"target"in on&&(Xt=0|on.target)),(on=tn._reglType)==="texture2d"||on==="textureCube"?ln=tn:on==="renderbuffer"&&(Jt=tn,Xt=36161),new je(Xt,ln,Jt)}function et(on,Xt,ln,Jt,tn){return ln?((on=it.create2D({width:on,height:Xt,format:Jt,type:tn}))._texture.refCount=0,new je(3553,on,null)):((on=dt.create({width:on,height:Xt,format:Jt}))._renderbuffer.refCount=0,new je(36161,null,on))}function xt(on){return on&&(on.texture||on.renderbuffer)}function mt(on,Xt,ln){on&&(on.texture?on.texture.resize(Xt,ln):on.renderbuffer&&on.renderbuffer.resize(Xt,ln),on.width=Xt,on.height=ln)}function Tt(){this.id=Kt++,xn[this.id]=this,this.framebuffer=Be.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function yt(on){on.colorAttachments.forEach(Re),Re(on.depthAttachment),Re(on.stencilAttachment),Re(on.depthStencilAttachment)}function bt(on){Be.deleteFramebuffer(on.framebuffer),on.framebuffer=null,gt.framebufferCount--,delete xn[on.id]}function zt(on){var Xt;Be.bindFramebuffer(36160,on.framebuffer);var ln=on.colorAttachments;for(Xt=0;Xt<ln.length;++Xt)ct(36064+Xt,ln[Xt]);for(Xt=ln.length;Xt<ot.maxColorAttachments;++Xt)Be.framebufferTexture2D(36160,36064+Xt,3553,null,0);Be.framebufferTexture2D(36160,33306,3553,null,0),Be.framebufferTexture2D(36160,36096,3553,null,0),Be.framebufferTexture2D(36160,36128,3553,null,0),ct(36096,on.depthAttachment),ct(36128,on.stencilAttachment),ct(33306,on.depthStencilAttachment),Be.checkFramebufferStatus(36160),Be.isContextLost(),Be.bindFramebuffer(36160,en.next?en.next.framebuffer:null),en.cur=en.next,Be.getError()}function Ut(on,Xt){function ln(tn,wn){var mn,Cn=0,yn=0,Mn=!0,zn=!0;mn=null;var Wn=!0,sr="rgba",Fn="uint8",Yn=1,Xn=null,rr=null,Yt=null,$t=!1;typeof tn=="number"?(Cn=0|tn,yn=0|wn||Cn):tn?("shape"in tn?(Cn=(yn=tn.shape)[0],yn=yn[1]):("radius"in tn&&(Cn=yn=tn.radius),"width"in tn&&(Cn=tn.width),"height"in tn&&(yn=tn.height)),("color"in tn||"colors"in tn)&&(mn=tn.color||tn.colors,Array.isArray(mn)),mn||("colorCount"in tn&&(Yn=0|tn.colorCount),"colorTexture"in tn&&(Wn=!!tn.colorTexture,sr="rgba4"),"colorType"in tn&&(Fn=tn.colorType,!Wn)&&(Fn==="half float"||Fn==="float16"?sr="rgba16f":Fn!=="float"&&Fn!=="float32"||(sr="rgba32f")),"colorFormat"in tn&&(sr=tn.colorFormat,0<=an.indexOf(sr)?Wn=!0:0<=rn.indexOf(sr)&&(Wn=!1))),("depthTexture"in tn||"depthStencilTexture"in tn)&&($t=!(!tn.depthTexture&&!tn.depthStencilTexture)),"depth"in tn&&(typeof tn.depth=="boolean"?Mn=tn.depth:(Xn=tn.depth,zn=!1)),"stencil"in tn&&(typeof tn.stencil=="boolean"?zn=tn.stencil:(rr=tn.stencil,Mn=!1)),"depthStencil"in tn&&(typeof tn.depthStencil=="boolean"?Mn=zn=tn.depthStencil:(Yt=tn.depthStencil,zn=Mn=!1))):Cn=yn=1;var Sn=null,dn=null,En=null,Nn=null;if(Array.isArray(mn))Sn=mn.map(ut);else if(mn)Sn=[ut(mn)];else for(Sn=Array(Yn),mn=0;mn<Yn;++mn)Sn[mn]=et(Cn,yn,Wn,sr,Fn);for(Cn=Cn||Sn[0].width,yn=yn||Sn[0].height,Xn?dn=ut(Xn):Mn&&!zn&&(dn=et(Cn,yn,$t,"depth","uint32")),rr?En=ut(rr):zn&&!Mn&&(En=et(Cn,yn,!1,"stencil","uint8")),Yt?Nn=ut(Yt):!Xn&&!rr&&zn&&Mn&&(Nn=et(Cn,yn,$t,"depth stencil","depth stencil")),Mn=null,mn=0;mn<Sn.length;++mn)rt(Sn[mn]),Sn[mn]&&Sn[mn].texture&&(zn=vt[Sn[mn].texture._texture.format]*pt[Sn[mn].texture._texture.type],Mn===null&&(Mn=zn));return rt(dn),rt(En),rt(Nn),yt(Jt),Jt.width=Cn,Jt.height=yn,Jt.colorAttachments=Sn,Jt.depthAttachment=dn,Jt.stencilAttachment=En,Jt.depthStencilAttachment=Nn,ln.color=Sn.map(xt),ln.depth=xt(dn),ln.stencil=xt(En),ln.depthStencil=xt(Nn),ln.width=Jt.width,ln.height=Jt.height,zt(Jt),ln}var Jt=new Tt;return gt.framebufferCount++,ln(on,Xt),X(ln,{resize:function(tn,wn){var mn=Math.max(0|tn,1),Cn=Math.max(0|wn||mn,1);if(mn===Jt.width&&Cn===Jt.height)return ln;for(var yn=Jt.colorAttachments,Mn=0;Mn<yn.length;++Mn)mt(yn[Mn],mn,Cn);return mt(Jt.depthAttachment,mn,Cn),mt(Jt.stencilAttachment,mn,Cn),mt(Jt.depthStencilAttachment,mn,Cn),Jt.width=ln.width=mn,Jt.height=ln.height=Cn,zt(Jt),ln},_reglType:"framebuffer",_framebuffer:Jt,destroy:function(){bt(Jt),yt(Jt)},use:function(tn){en.setFBO({framebuffer:ln},tn)}})}var en={cur:null,next:null,dirty:!1,setFBO:null},an=["rgba"],rn=["rgba4","rgb565","rgb5 a1"];Ge.ext_srgb&&rn.push("srgba"),Ge.ext_color_buffer_half_float&&rn.push("rgba16f","rgb16f"),Ge.webgl_color_buffer_float&&rn.push("rgba32f");var qt=["uint8"];Ge.oes_texture_half_float&&qt.push("half float","float16"),Ge.oes_texture_float&&qt.push("float","float32");var Kt=0,xn={};return X(en,{getFramebuffer:function(on){return typeof on=="function"&&on._reglType==="framebuffer"&&(on=on._framebuffer)instanceof Tt?on:null},create:Ut,createCube:function(on){function Xt(Jt){var tn,wn={color:null},mn=0,Cn=null;tn="rgba";var yn="uint8",Mn=1;if(typeof Jt=="number"?mn=0|Jt:Jt?("shape"in Jt?mn=Jt.shape[0]:("radius"in Jt&&(mn=0|Jt.radius),"width"in Jt?mn=0|Jt.width:"height"in Jt&&(mn=0|Jt.height)),("color"in Jt||"colors"in Jt)&&(Cn=Jt.color||Jt.colors,Array.isArray(Cn)),Cn||("colorCount"in Jt&&(Mn=0|Jt.colorCount),"colorType"in Jt&&(yn=Jt.colorType),"colorFormat"in Jt&&(tn=Jt.colorFormat)),"depth"in Jt&&(wn.depth=Jt.depth),"stencil"in Jt&&(wn.stencil=Jt.stencil),"depthStencil"in Jt&&(wn.depthStencil=Jt.depthStencil)):mn=1,Cn)if(Array.isArray(Cn))for(Jt=[],tn=0;tn<Cn.length;++tn)Jt[tn]=Cn[tn];else Jt=[Cn];else for(Jt=Array(Mn),Cn={radius:mn,format:tn,type:yn},tn=0;tn<Mn;++tn)Jt[tn]=it.createCube(Cn);for(wn.color=Array(Jt.length),tn=0;tn<Jt.length;++tn)Mn=Jt[tn],mn=mn||Mn.width,wn.color[tn]={target:34069,data:Jt[tn]};for(tn=0;6>tn;++tn){for(Mn=0;Mn<Jt.length;++Mn)wn.color[Mn].target=34069+tn;0<tn&&(wn.depth=ln[0].depth,wn.stencil=ln[0].stencil,wn.depthStencil=ln[0].depthStencil),ln[tn]?ln[tn](wn):ln[tn]=Ut(wn)}return X(Xt,{width:mn,height:mn,color:Jt})}var ln=Array(6);return Xt(on),X(Xt,{faces:ln,resize:function(Jt){var tn=0|Jt;if(tn===Xt.width)return Xt;var wn=Xt.color;for(Jt=0;Jt<wn.length;++Jt)wn[Jt].resize(tn);for(Jt=0;6>Jt;++Jt)ln[Jt].resize(tn);return Xt.width=Xt.height=tn,Xt},_reglType:"framebufferCube",destroy:function(){ln.forEach(function(Jt){Jt.destroy()})}})},clear:function(){me(xn).forEach(bt)},restore:function(){en.cur=null,en.next=null,en.dirty=!0,me(xn).forEach(function(on){on.framebuffer=Be.createFramebuffer(),zt(on)})}})}function E(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function C(Be,Ge,ot,it,dt,gt,je){function Re(){this.id=++ut,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var mt=Ge.oes_vertex_array_object;this.vao=mt?mt.createVertexArrayOES():null,et[this.id]=this,this.buffers=[]}var rt=ot.maxAttributes,ct=Array(rt);for(ot=0;ot<rt;++ot)ct[ot]=new E;var ut=0,et={},xt={Record:E,scope:{},state:ct,currentVAO:null,targetVAO:null,restore:Ge.oes_vertex_array_object?function(){Ge.oes_vertex_array_object&&me(et).forEach(function(mt){mt.refresh()})}:function(){},createVAO:function(mt){function Tt(bt){var zt;Array.isArray(bt)?(zt=bt,yt.elements&&yt.ownsElements&&yt.elements.destroy(),yt.elements=null,yt.ownsElements=!1,yt.offset=0,yt.count=0,yt.instances=-1,yt.primitive=4):(bt.elements?(zt=bt.elements,yt.ownsElements?(typeof zt=="function"&&zt._reglType==="elements"?yt.elements.destroy():yt.elements(zt),yt.ownsElements=!1):gt.getElements(bt.elements)?(yt.elements=bt.elements,yt.ownsElements=!1):(yt.elements=gt.create(bt.elements),yt.ownsElements=!0)):(yt.elements=null,yt.ownsElements=!1),zt=bt.attributes,yt.offset=0,yt.count=-1,yt.instances=-1,yt.primitive=4,yt.elements&&(yt.count=yt.elements._elements.vertCount,yt.primitive=yt.elements._elements.primType),"offset"in bt&&(yt.offset=0|bt.offset),"count"in bt&&(yt.count=0|bt.count),"instances"in bt&&(yt.instances=0|bt.instances),"primitive"in bt&&(yt.primitive=Se[bt.primitive])),bt={};var Ut=yt.attributes;Ut.length=zt.length;for(var en=0;en<zt.length;++en){var an,rn=zt[en],qt=Ut[en]=new E,Kt=rn.data||rn;Array.isArray(Kt)||ge(Kt)||t(Kt)?(yt.buffers[en]&&(an=yt.buffers[en],ge(Kt)&&an._buffer.byteLength>=Kt.byteLength?an.subdata(Kt):(an.destroy(),yt.buffers[en]=null)),yt.buffers[en]||(an=yt.buffers[en]=dt.create(rn,34962,!1,!0)),qt.buffer=dt.getBuffer(an),qt.size=0|qt.buffer.dimension,qt.normalized=!1,qt.type=qt.buffer.dtype,qt.offset=0,qt.stride=0,qt.divisor=0,qt.state=1,bt[en]=1):dt.getBuffer(rn)?(qt.buffer=dt.getBuffer(rn),qt.size=0|qt.buffer.dimension,qt.normalized=!1,qt.type=qt.buffer.dtype,qt.offset=0,qt.stride=0,qt.divisor=0,qt.state=1):dt.getBuffer(rn.buffer)?(qt.buffer=dt.getBuffer(rn.buffer),qt.size=0|(+rn.size||qt.buffer.dimension),qt.normalized=!!rn.normalized||!1,qt.type="type"in rn?ze[rn.type]:qt.buffer.dtype,qt.offset=0|(rn.offset||0),qt.stride=0|(rn.stride||0),qt.divisor=0|(rn.divisor||0),qt.state=1):"x"in rn&&(qt.x=+rn.x||0,qt.y=+rn.y||0,qt.z=+rn.z||0,qt.w=+rn.w||0,qt.state=2)}for(an=0;an<yt.buffers.length;++an)!bt[an]&&yt.buffers[an]&&(yt.buffers[an].destroy(),yt.buffers[an]=null);return yt.refresh(),Tt}var yt=new Re;return it.vaoCount+=1,Tt.destroy=function(){for(var bt=0;bt<yt.buffers.length;++bt)yt.buffers[bt]&&yt.buffers[bt].destroy();yt.buffers.length=0,yt.ownsElements&&(yt.elements.destroy(),yt.elements=null,yt.ownsElements=!1),yt.destroy()},Tt._vao=yt,Tt._reglType="vao",Tt(mt)},getVAO:function(mt){return typeof mt=="function"&&mt._vao?mt._vao:null},destroyBuffer:function(mt){for(var Tt=0;Tt<ct.length;++Tt){var yt=ct[Tt];yt.buffer===mt&&(Be.disableVertexAttribArray(Tt),yt.buffer=null)}},setVAO:Ge.oes_vertex_array_object?function(mt){if(mt!==xt.currentVAO){var Tt=Ge.oes_vertex_array_object;mt?Tt.bindVertexArrayOES(mt.vao):Tt.bindVertexArrayOES(null),xt.currentVAO=mt}}:function(mt){if(mt!==xt.currentVAO){if(mt)mt.bindAttrs();else{for(var Tt=Ge.angle_instanced_arrays,yt=0;yt<ct.length;++yt){var bt=ct[yt];bt.buffer?(Be.enableVertexAttribArray(yt),bt.buffer.bind(),Be.vertexAttribPointer(yt,bt.size,bt.type,bt.normalized,bt.stride,bt.offfset),Tt&&bt.divisor&&Tt.vertexAttribDivisorANGLE(yt,bt.divisor)):(Be.disableVertexAttribArray(yt),Be.vertexAttrib4f(yt,bt.x,bt.y,bt.z,bt.w))}je.elements?Be.bindBuffer(34963,je.elements.buffer.buffer):Be.bindBuffer(34963,null)}xt.currentVAO=mt}},clear:Ge.oes_vertex_array_object?function(){me(et).forEach(function(mt){mt.destroy()})}:function(){}};return Re.prototype.bindAttrs=function(){for(var mt=Ge.angle_instanced_arrays,Tt=this.attributes,yt=0;yt<Tt.length;++yt){var bt=Tt[yt];bt.buffer?(Be.enableVertexAttribArray(yt),Be.bindBuffer(34962,bt.buffer.buffer),Be.vertexAttribPointer(yt,bt.size,bt.type,bt.normalized,bt.stride,bt.offset),mt&&bt.divisor&&mt.vertexAttribDivisorANGLE(yt,bt.divisor)):(Be.disableVertexAttribArray(yt),Be.vertexAttrib4f(yt,bt.x,bt.y,bt.z,bt.w))}for(mt=Tt.length;mt<rt;++mt)Be.disableVertexAttribArray(mt);(mt=gt.getElements(this.elements))?Be.bindBuffer(34963,mt.buffer.buffer):Be.bindBuffer(34963,null)},Re.prototype.refresh=function(){var mt=Ge.oes_vertex_array_object;mt&&(mt.bindVertexArrayOES(this.vao),this.bindAttrs(),xt.currentVAO=null,mt.bindVertexArrayOES(null))},Re.prototype.destroy=function(){if(this.vao){var mt=Ge.oes_vertex_array_object;this===xt.currentVAO&&(xt.currentVAO=null,mt.bindVertexArrayOES(null)),mt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),et[this.id]&&(delete et[this.id],--it.vaoCount)},xt}function O(Be,Ge,ot,it){function dt(Tt,yt,bt,zt){this.name=Tt,this.id=yt,this.location=bt,this.info=zt}function gt(Tt,yt){for(var bt=0;bt<Tt.length;++bt)if(Tt[bt].id===yt.id)return void(Tt[bt].location=yt.location);Tt.push(yt)}function je(Tt,yt,bt){if(!(Ut=(bt=Tt===35632?ct:ut)[yt])){var zt=Ge.str(yt),Ut=Be.createShader(Tt);Be.shaderSource(Ut,zt),Be.compileShader(Ut),bt[yt]=Ut}return Ut}function Re(Tt,yt){this.id=mt++,this.fragId=Tt,this.vertId=yt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,it.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function rt(Tt,yt,bt){var zt;zt=je(35632,Tt.fragId);var Ut=je(35633,Tt.vertId);if(yt=Tt.program=Be.createProgram(),Be.attachShader(yt,zt),Be.attachShader(yt,Ut),bt)for(zt=0;zt<bt.length;++zt)Ut=bt[zt],Be.bindAttribLocation(yt,Ut[0],Ut[1]);Be.linkProgram(yt),Ut=Be.getProgramParameter(yt,35718),it.profile&&(Tt.stats.uniformsCount=Ut);var en=Tt.uniforms;for(zt=0;zt<Ut;++zt)if(bt=Be.getActiveUniform(yt,zt))if(1<bt.size)for(var an=0;an<bt.size;++an){var rn=bt.name.replace("[0]","["+an+"]");gt(en,new dt(rn,Ge.id(rn),Be.getUniformLocation(yt,rn),bt))}else gt(en,new dt(bt.name,Ge.id(bt.name),Be.getUniformLocation(yt,bt.name),bt));for(Ut=Be.getProgramParameter(yt,35721),it.profile&&(Tt.stats.attributesCount=Ut),Tt=Tt.attributes,zt=0;zt<Ut;++zt)(bt=Be.getActiveAttrib(yt,zt))&&gt(Tt,new dt(bt.name,Ge.id(bt.name),Be.getAttribLocation(yt,bt.name),bt))}var ct={},ut={},et={},xt=[],mt=0;return it.profile&&(ot.getMaxUniformsCount=function(){var Tt=0;return xt.forEach(function(yt){yt.stats.uniformsCount>Tt&&(Tt=yt.stats.uniformsCount)}),Tt},ot.getMaxAttributesCount=function(){var Tt=0;return xt.forEach(function(yt){yt.stats.attributesCount>Tt&&(Tt=yt.stats.attributesCount)}),Tt}),{clear:function(){var Tt=Be.deleteShader.bind(Be);me(ct).forEach(Tt),ct={},me(ut).forEach(Tt),ut={},xt.forEach(function(yt){Be.deleteProgram(yt.program)}),xt.length=0,et={},ot.shaderCount=0},program:function(Tt,yt,bt,zt){var Ut=et[yt];Ut||(Ut=et[yt]={});var en=Ut[Tt];if(en&&(en.refCount++,!zt))return en;var an=new Re(yt,Tt);return ot.shaderCount++,rt(an,bt,zt),en||(Ut[Tt]=an),xt.push(an),X(an,{destroy:function(){if(an.refCount--,0>=an.refCount){Be.deleteProgram(an.program);var rn=xt.indexOf(an);xt.splice(rn,1),ot.shaderCount--}0>=Ut[an.vertId].refCount&&(Be.deleteShader(ut[an.vertId]),delete ut[an.vertId],delete et[an.fragId][an.vertId]),Object.keys(et[an.fragId]).length||(Be.deleteShader(ct[an.fragId]),delete ct[an.fragId],delete et[an.fragId])}})},restore:function(){ct={},ut={};for(var Tt=0;Tt<xt.length;++Tt)rt(xt[Tt],null,xt[Tt].attributes.map(function(yt){return[yt.location,yt.name]}))},shader:je,frag:-1,vert:-1}}function P(Be,Ge,ot,it,dt,gt,je){function Re(rt){var ct;ct=Ge.next===null?5121:Ge.next.colorAttachments[0].texture._texture.type;var ut=0,et=0,xt=it.framebufferWidth,mt=it.framebufferHeight,Tt=null;return ge(rt)?Tt=rt:rt&&(ut=0|rt.x,et=0|rt.y,xt=0|(rt.width||it.framebufferWidth-ut),mt=0|(rt.height||it.framebufferHeight-et),Tt=rt.data||null),ot(),rt=xt*mt*4,Tt||(ct===5121?Tt=new Uint8Array(rt):ct===5126&&(Tt=Tt||new Float32Array(rt))),Be.pixelStorei(3333,4),Be.readPixels(ut,et,xt,mt,6408,ct,Tt),Tt}return function(rt){return rt&&"framebuffer"in rt?function(ct){var ut;return Ge.setFBO({framebuffer:ct.framebuffer},function(){ut=Re(ct)}),ut}(rt):Re(rt)}}function z(Be,Ge){return Be>>>Ge|Be<<32-Ge}function j(Be,Ge){var ot=(65535&Be)+(65535&Ge);return(Be>>16)+(Ge>>16)+(ot>>16)<<16|65535&ot}function I(Be){return Array.prototype.slice.call(Be)}function N(Be){return I(Be).join("")}function W(Be){function Ge(){var ut=[],et=[];return X(function(){ut.push.apply(ut,I(arguments))},{def:function(){var xt="v"+dt++;return et.push(xt),0<arguments.length&&(ut.push(xt,"="),ut.push.apply(ut,I(arguments)),ut.push(";")),xt},toString:function(){return N([0<et.length?"var "+et.join(",")+";":"",N(ut)])}})}function ot(){function ut(yt,bt){xt(yt,bt,"=",et.def(yt,bt),";")}var et=Ge(),xt=Ge(),mt=et.toString,Tt=xt.toString;return X(function(){et.apply(et,I(arguments))},{def:et.def,entry:et,exit:xt,save:ut,set:function(yt,bt,zt){ut(yt,bt),et(yt,bt,"=",zt,";")},toString:function(){return mt()+Tt()}})}var it=Be&&Be.cache,dt=0,gt=[],je=[],Re=[],rt=Ge(),ct={};return{global:rt,link:function(ut,et){var xt=et&&et.stable;if(!xt){for(var mt=0;mt<je.length;++mt)if(je[mt]===ut&&!Re[mt])return gt[mt]}return mt="g"+dt++,gt.push(mt),je.push(ut),Re.push(xt),mt},block:Ge,proc:function(ut,et){function xt(){var bt="a"+mt.length;return mt.push(bt),bt}var mt=[];et=et||0;for(var Tt=0;Tt<et;++Tt)xt();var yt=(Tt=ot()).toString;return ct[ut]=X(Tt,{arg:xt,toString:function(){return N(["function(",mt.join(),"){",yt(),"}"])}})},scope:ot,cond:function(){var ut=N(arguments),et=ot(),xt=ot(),mt=et.toString,Tt=xt.toString;return X(et,{then:function(){return et.apply(et,I(arguments)),this},else:function(){return xt.apply(xt,I(arguments)),this},toString:function(){var yt=Tt();return yt&&(yt="else{"+yt+"}"),N(["if(",ut,"){",mt(),"}",yt])}})},compile:function(){var ut=['"use strict";',rt,"return {"];Object.keys(ct).forEach(function(mt){ut.push('"',mt,'":',ct[mt].toString(),",")}),ut.push("}");var et,xt=N(ut).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return it&&(et=function(mt){for(var Tt,yt="",bt=0;bt<mt.length;bt++)Tt=mt.charCodeAt(bt),yt+="0123456789abcdef".charAt(Tt>>>4&15)+"0123456789abcdef".charAt(15&Tt);return yt}(function(mt){for(var Tt=Array(mt.length>>2),yt=0;yt<Tt.length;yt++)Tt[yt]=0;for(yt=0;yt<8*mt.length;yt+=8)Tt[yt>>5]|=(255&mt.charCodeAt(yt/8))<<24-yt%32;var bt,zt,Ut,en,an,rn,qt,Kt,xn,on,Xt,ln=8*mt.length;for(mt=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],yt=Array(64),Tt[ln>>5]|=128<<24-ln%32,Tt[15+(ln+64>>9<<4)]=ln,Kt=0;Kt<Tt.length;Kt+=16){for(ln=mt[0],bt=mt[1],zt=mt[2],Ut=mt[3],en=mt[4],an=mt[5],rn=mt[6],qt=mt[7],xn=0;64>xn;xn++){var Jt;16>xn?yt[xn]=Tt[xn+Kt]:(on=xn,Xt=j(Xt=z(Xt=yt[xn-2],17)^z(Xt,19)^Xt>>>10,yt[xn-7]),Jt=z(Jt=yt[xn-15],7)^z(Jt,18)^Jt>>>3,yt[on]=j(j(Xt,Jt),yt[xn-16])),on=j(j(j(j(qt,on=z(on=en,6)^z(on,11)^z(on,25)),en&an^~en&rn),Qe[xn]),yt[xn]),Xt=j(qt=z(qt=ln,2)^z(qt,13)^z(qt,22),ln&bt^ln&zt^bt&zt),qt=rn,rn=an,an=en,en=j(Ut,on),Ut=zt,zt=bt,bt=ln,ln=j(on,Xt)}mt[0]=j(ln,mt[0]),mt[1]=j(bt,mt[1]),mt[2]=j(zt,mt[2]),mt[3]=j(Ut,mt[3]),mt[4]=j(en,mt[4]),mt[5]=j(an,mt[5]),mt[6]=j(rn,mt[6]),mt[7]=j(qt,mt[7])}for(Tt="",yt=0;yt<32*mt.length;yt+=8)Tt+=String.fromCharCode(mt[yt>>5]>>>24-yt%32&255);return Tt}(function(mt){for(var Tt,yt,bt="",zt=-1;++zt<mt.length;)Tt=mt.charCodeAt(zt),yt=zt+1<mt.length?mt.charCodeAt(zt+1):0,55296<=Tt&&56319>=Tt&&56320<=yt&&57343>=yt&&(Tt=65536+((1023&Tt)<<10)+(1023&yt),zt++),127>=Tt?bt+=String.fromCharCode(Tt):2047>=Tt?bt+=String.fromCharCode(192|Tt>>>6&31,128|63&Tt):65535>=Tt?bt+=String.fromCharCode(224|Tt>>>12&15,128|Tt>>>6&63,128|63&Tt):2097151>=Tt&&(bt+=String.fromCharCode(240|Tt>>>18&7,128|Tt>>>12&63,128|Tt>>>6&63,128|63&Tt));return bt}(xt))),it[et])?it[et].apply(null,je):(xt=Function.apply(null,gt.concat(xt)),it&&(it[et]=xt),xt.apply(null,je))}}}function F(Be){return Array.isArray(Be)||ge(Be)||t(Be)}function U(Be){return Be.sort(function(Ge,ot){return Ge==="viewport"?-1:ot==="viewport"?1:Ge<ot?-1:1})}function H(Be,Ge,ot,it){this.thisDep=Be,this.contextDep=Ge,this.propDep=ot,this.append=it}function ne(Be){return Be&&!(Be.thisDep||Be.contextDep||Be.propDep)}function $(Be){return new H(!1,!1,!1,Be)}function K(Be,Ge){var ot=Be.type;if(ot===0)return new H(!0,1<=(ot=Be.data.length),2<=ot,Ge);if(ot===4)return new H((ot=Be.data).thisDep,ot.contextDep,ot.propDep,Ge);if(ot===5)return new H(!1,!1,!1,Ge);if(ot===6){for(var it=ot=!1,dt=!1,gt=0;gt<Be.data.length;++gt){var je=Be.data[gt];je.type===1?dt=!0:je.type===2?it=!0:je.type===3?ot=!0:je.type===0?(ot=!0,1<=(je=je.data)&&(it=!0),2<=je&&(dt=!0)):je.type===4&&(ot=ot||je.data.thisDep,it=it||je.data.contextDep,dt=dt||je.data.propDep)}return new H(ot,it,dt,Ge)}return new H(ot===3,ot===2,ot===1,Ge)}function Q(Be,Ge,ot,it,dt,gt,je,Re,rt,ct,ut,et,xt,mt,Tt,yt){function bt(Ct){return Ct.replace(".","_")}function zt(Ct,Rt,Zt){var cn=bt(Ct);Nn.push(Ct),En[cn]=dn[cn]=!!Zt,Bn[cn]=Rt}function Ut(Ct,Rt,Zt){var cn=bt(Ct);Nn.push(Ct),Array.isArray(Zt)?(dn[cn]=Zt.slice(),En[cn]=Zt.slice()):dn[cn]=En[cn]=Zt,$n[cn]=Rt}function en(){var Ct=W({cache:Tt}),Rt=Ct.link,Zt=Ct.global;Ct.id=gn++,Ct.batchId="0";var cn=Rt(lr),fn=Ct.shared={props:"a0"};Object.keys(lr).forEach(function(Ft){fn[Ft]=Zt.def(cn,".",Ft)});var _n=Ct.next={},pn=Ct.current={};Object.keys($n).forEach(function(Ft){Array.isArray(dn[Ft])&&(_n[Ft]=Zt.def(fn.next,".",Ft),pn[Ft]=Zt.def(fn.current,".",Ft))});var sn=Ct.constants={};Object.keys(Gt).forEach(function(Ft){sn[Ft]=Zt.def(JSON.stringify(Gt[Ft]))}),Ct.invoke=function(Ft,Qt){switch(Qt.type){case 0:var Tn=["this",fn.context,fn.props,Ct.batchId];return Ft.def(Rt(Qt.data),".call(",Tn.slice(0,Math.max(Qt.data.length+1,4)),")");case 1:return Ft.def(fn.props,Qt.data);case 2:return Ft.def(fn.context,Qt.data);case 3:return Ft.def("this",Qt.data);case 4:return Qt.data.append(Ct,Ft),Qt.data.ref;case 5:return Qt.data.toString();case 6:return Qt.data.map(function(Pn){return Ct.invoke(Ft,Pn)})}},Ct.attribCache={};var Nt={};return Ct.scopeAttrib=function(Ft){if((Ft=Ge.id(Ft))in Nt)return Nt[Ft];var Qt=ct.scope[Ft];return Qt||(Qt=ct.scope[Ft]=new Xn),Nt[Ft]=Rt(Qt)},Ct}function an(Ct,Rt){var Zt=Ct.static,cn=Ct.dynamic;if("framebuffer"in Zt){var fn=Zt.framebuffer;return fn?(fn=Re.getFramebuffer(fn),$(function(pn,sn){var Nt=pn.link(fn),Ft=pn.shared;return sn.set(Ft.framebuffer,".next",Nt),Ft=Ft.context,sn.set(Ft,".framebufferWidth",Nt+".width"),sn.set(Ft,".framebufferHeight",Nt+".height"),Nt})):$(function(pn,sn){var Nt=pn.shared;return sn.set(Nt.framebuffer,".next","null"),Nt=Nt.context,sn.set(Nt,".framebufferWidth",Nt+".drawingBufferWidth"),sn.set(Nt,".framebufferHeight",Nt+".drawingBufferHeight"),"null"})}if("framebuffer"in cn){var _n=cn.framebuffer;return K(_n,function(pn,sn){var Nt=pn.invoke(sn,_n),Ft=pn.shared,Qt=Ft.framebuffer;return Nt=sn.def(Qt,".getFramebuffer(",Nt,")"),sn.set(Qt,".next",Nt),Ft=Ft.context,sn.set(Ft,".framebufferWidth",Nt+"?"+Nt+".width:"+Ft+".drawingBufferWidth"),sn.set(Ft,".framebufferHeight",Nt+"?"+Nt+".height:"+Ft+".drawingBufferHeight"),Nt})}return null}function rn(Ct,Rt,Zt){function cn(Ft){if(Ft in fn){var Qt=Ge.id(fn[Ft]);return(Ft=$(function(){return Qt})).id=Qt,Ft}if(Ft in _n){var Tn=_n[Ft];return K(Tn,function(Pn,On){var Dn=Pn.invoke(On,Tn);return On.def(Pn.shared.strings,".id(",Dn,")")})}return null}var fn=Ct.static,_n=Ct.dynamic,pn=cn("frag"),sn=cn("vert"),Nt=null;return ne(pn)&&ne(sn)?(Nt=ut.program(sn.id,pn.id,null,Zt),Ct=$(function(Ft,Qt){return Ft.link(Nt)})):Ct=new H(pn&&pn.thisDep||sn&&sn.thisDep,pn&&pn.contextDep||sn&&sn.contextDep,pn&&pn.propDep||sn&&sn.propDep,function(Ft,Qt){var Tn,Pn,On=Ft.shared.shader;return Tn=pn?pn.append(Ft,Qt):Qt.def(On,".","frag"),Pn=sn?sn.append(Ft,Qt):Qt.def(On,".","vert"),Qt.def(On+".program("+Pn+","+Tn+")")}),{frag:pn,vert:sn,progVar:Ct,program:Nt}}function qt(Ct,Rt){function Zt(Dn,Zn){if(Dn in cn){var qn=0|cn[Dn];return Zn?_n.offset=qn:_n.instances=qn,$(function(Un,Gn){return Zn&&(Un.OFFSET=qn),qn})}if(Dn in fn){var Kn=fn[Dn];return K(Kn,function(Un,Gn){var ir=Un.invoke(Gn,Kn);return Zn&&(Un.OFFSET=ir),ir})}if(Zn){if(Nt)return $(function(Un,Gn){return Un.OFFSET=0});if(pn)return new H(sn.thisDep,sn.contextDep,sn.propDep,function(Un,Gn){return Gn.def(Un.shared.vao+".currentVAO?"+Un.shared.vao+".currentVAO.offset:0")})}else if(pn)return new H(sn.thisDep,sn.contextDep,sn.propDep,function(Un,Gn){return Gn.def(Un.shared.vao+".currentVAO?"+Un.shared.vao+".currentVAO.instances:-1")});return null}var cn=Ct.static,fn=Ct.dynamic,_n={},pn=!1,sn=function(){if("vao"in cn){var Dn=cn.vao;return Dn!==null&&ct.getVAO(Dn)===null&&(Dn=ct.createVAO(Dn)),pn=!0,_n.vao=Dn,$(function(qn){var Kn=ct.getVAO(Dn);return Kn?qn.link(Kn):"null"})}if("vao"in fn){pn=!0;var Zn=fn.vao;return K(Zn,function(qn,Kn){var Un=qn.invoke(Kn,Zn);return Kn.def(qn.shared.vao+".getVAO("+Un+")")})}return null}(),Nt=!1,Ft=function(){if("elements"in cn){var Dn=cn.elements;if(_n.elements=Dn,F(Dn)){var Zn=_n.elements=gt.create(Dn,!0);Dn=gt.getElements(Zn),Nt=!0}else Dn&&(Dn=gt.getElements(Dn),Nt=!0);return Zn=$(function(Kn,Un){if(Dn){var Gn=Kn.link(Dn);return Kn.ELEMENTS=Gn}return Kn.ELEMENTS=null}),Zn.value=Dn,Zn}if("elements"in fn){Nt=!0;var qn=fn.elements;return K(qn,function(Kn,Un){var Gn=(ir=Kn.shared).isBufferArgs,ir=ir.elements,mr=Kn.invoke(Un,qn),ur=Un.def("null");return Gn=Un.def(Gn,"(",mr,")"),mr=Kn.cond(Gn).then(ur,"=",ir,".createStream(",mr,");").else(ur,"=",ir,".getElements(",mr,");"),Un.entry(mr),Un.exit(Kn.cond(Gn).then(ir,".destroyStream(",ur,");")),Kn.ELEMENTS=ur})}return pn?new H(sn.thisDep,sn.contextDep,sn.propDep,function(Kn,Un){return Un.def(Kn.shared.vao+".currentVAO?"+Kn.shared.elements+".getElements("+Kn.shared.vao+".currentVAO.elements):null")}):null}(),Qt=Zt("offset",!0),Tn=function(){if("primitive"in cn){var Dn=cn.primitive;return _n.primitive=Dn,$(function(qn,Kn){return Se[Dn]})}if("primitive"in fn){var Zn=fn.primitive;return K(Zn,function(qn,Kn){var Un=qn.constants.primTypes,Gn=qn.invoke(Kn,Zn);return Kn.def(Un,"[",Gn,"]")})}return Nt?ne(Ft)?Ft.value?$(function(qn,Kn){return Kn.def(qn.ELEMENTS,".primType")}):$(function(){return 4}):new H(Ft.thisDep,Ft.contextDep,Ft.propDep,function(qn,Kn){var Un=qn.ELEMENTS;return Kn.def(Un,"?",Un,".primType:",4)}):pn?new H(sn.thisDep,sn.contextDep,sn.propDep,function(qn,Kn){return Kn.def(qn.shared.vao+".currentVAO?"+qn.shared.vao+".currentVAO.primitive:4")}):null}(),Pn=function(){if("count"in cn){var Dn=0|cn.count;return _n.count=Dn,$(function(){return Dn})}if("count"in fn){var Zn=fn.count;return K(Zn,function(qn,Kn){return qn.invoke(Kn,Zn)})}return Nt?ne(Ft)?Ft?Qt?new H(Qt.thisDep,Qt.contextDep,Qt.propDep,function(qn,Kn){return Kn.def(qn.ELEMENTS,".vertCount-",qn.OFFSET)}):$(function(qn,Kn){return Kn.def(qn.ELEMENTS,".vertCount")}):$(function(){return-1}):new H(Ft.thisDep||Qt.thisDep,Ft.contextDep||Qt.contextDep,Ft.propDep||Qt.propDep,function(qn,Kn){var Un=qn.ELEMENTS;return qn.OFFSET?Kn.def(Un,"?",Un,".vertCount-",qn.OFFSET,":-1"):Kn.def(Un,"?",Un,".vertCount:-1")}):pn?new H(sn.thisDep,sn.contextDep,sn.propDep,function(qn,Kn){return Kn.def(qn.shared.vao,".currentVAO?",qn.shared.vao,".currentVAO.count:-1")}):null}(),On=Zt("instances",!1);return{elements:Ft,primitive:Tn,count:Pn,instances:On,offset:Qt,vao:sn,vaoActive:pn,elementsActive:Nt,static:_n}}function Kt(Ct,Rt){var Zt=Ct.static,cn=Ct.dynamic,fn={};return Object.keys(Zt).forEach(function(_n){var pn=Zt[_n],sn=Ge.id(_n),Nt=new Xn;if(F(pn))Nt.state=1,Nt.buffer=dt.getBuffer(dt.create(pn,34962,!1,!0)),Nt.type=0;else if(Qt=dt.getBuffer(pn))Nt.state=1,Nt.buffer=Qt,Nt.type=0;else if("constant"in pn){var Ft=pn.constant;Nt.buffer="null",Nt.state=2,typeof Ft=="number"?Nt.x=Ft:Ke.forEach(function(qn,Kn){Kn<Ft.length&&(Nt[qn]=Ft[Kn])})}else{var Qt=F(pn.buffer)?dt.getBuffer(dt.create(pn.buffer,34962,!1,!0)):dt.getBuffer(pn.buffer),Tn=0|pn.offset,Pn=0|pn.stride,On=0|pn.size,Dn=!!pn.normalized,Zn=0;"type"in pn&&(Zn=ze[pn.type]),pn=0|pn.divisor,Nt.buffer=Qt,Nt.state=1,Nt.size=On,Nt.normalized=Dn,Nt.type=Zn||Qt.dtype,Nt.offset=Tn,Nt.stride=Pn,Nt.divisor=pn}fn[_n]=$(function(qn,Kn){var Un=qn.attribCache;if(sn in Un)return Un[sn];var Gn={isStream:!1};return Object.keys(Nt).forEach(function(ir){Gn[ir]=Nt[ir]}),Nt.buffer&&(Gn.buffer=qn.link(Nt.buffer),Gn.type=Gn.type||Gn.buffer+".dtype"),Un[sn]=Gn})}),Object.keys(cn).forEach(function(_n){var pn=cn[_n];fn[_n]=K(pn,function(sn,Nt){function Ft(Un){Nt(Dn[Un],"=",Qt,".",Un,"|0;")}var Qt=sn.invoke(Nt,pn),Tn=sn.shared,Pn=sn.constants,On=Tn.isBufferArgs,Dn=(Tn=Tn.buffer,{isStream:Nt.def(!1)}),Zn=new Xn;Zn.state=1,Object.keys(Zn).forEach(function(Un){Dn[Un]=Nt.def(""+Zn[Un])});var qn=Dn.buffer,Kn=Dn.type;return Nt("if(",On,"(",Qt,")){",Dn.isStream,"=true;",qn,"=",Tn,".createStream(",34962,",",Qt,");",Kn,"=",qn,".dtype;","}else{",qn,"=",Tn,".getBuffer(",Qt,");","if(",qn,"){",Kn,"=",qn,".dtype;",'}else if("constant" in ',Qt,"){",Dn.state,"=",2,";","if(typeof "+Qt+'.constant === "number"){',Dn[Ke[0]],"=",Qt,".constant;",Ke.slice(1).map(function(Un){return Dn[Un]}).join("="),"=0;","}else{",Ke.map(function(Un,Gn){return Dn[Un]+"="+Qt+".constant.length>"+Gn+"?"+Qt+".constant["+Gn+"]:0;"}).join(""),"}}else{","if(",On,"(",Qt,".buffer)){",qn,"=",Tn,".createStream(",34962,",",Qt,".buffer);","}else{",qn,"=",Tn,".getBuffer(",Qt,".buffer);","}",Kn,'="type" in ',Qt,"?",Pn.glTypes,"[",Qt,".type]:",qn,".dtype;",Dn.normalized,"=!!",Qt,".normalized;"),Ft("size"),Ft("offset"),Ft("stride"),Ft("divisor"),Nt("}}"),Nt.exit("if(",Dn.isStream,"){",Tn,".destroyStream(",qn,");","}"),Dn})}),fn}function xn(Ct,Rt,Zt,cn,fn){function _n(Zn){var qn=sn[Zn];qn&&(Ft[Zn]=qn)}var pn=function(Zn,qn){if(typeof(Kn=Zn.static).frag=="string"&&typeof Kn.vert=="string"){if(0<Object.keys(qn.dynamic).length)return null;var Kn=qn.static,Un=Object.keys(Kn);if(0<Un.length&&typeof Kn[Un[0]]=="number"){for(var Gn=[],ir=0;ir<Un.length;++ir)Gn.push([0|Kn[Un[ir]],Un[ir]]);return Gn}}return null}(Ct,Rt),sn=function(Zn,qn,Kn){function Un(ur){if(ur in Gn){var Qn=Gn[ur];ur=!0;var pr,Tr,Or=0|Qn.x,oi=0|Qn.y;return"width"in Qn?pr=0|Qn.width:ur=!1,"height"in Qn?Tr=0|Qn.height:ur=!1,new H(!ur&&qn&&qn.thisDep,!ur&&qn&&qn.contextDep,!ur&&qn&&qn.propDep,function(Di,ii){var yi=Di.shared.context,oa=pr;"width"in Qn||(oa=ii.def(yi,".","framebufferWidth","-",Or));var Pr=Tr;return"height"in Qn||(Pr=ii.def(yi,".","framebufferHeight","-",oi)),[Or,oi,oa,Pr]})}if(ur in ir){var gi=ir[ur];return ur=K(gi,function(Di,ii){var yi=Di.invoke(ii,gi),oa=Di.shared.context,Pr=ii.def(yi,".x|0"),Ri=ii.def(yi,".y|0");return[Pr,Ri,ii.def('"width" in ',yi,"?",yi,".width|0:","(",oa,".","framebufferWidth","-",Pr,")"),yi=ii.def('"height" in ',yi,"?",yi,".height|0:","(",oa,".","framebufferHeight","-",Ri,")")]}),qn&&(ur.thisDep=ur.thisDep||qn.thisDep,ur.contextDep=ur.contextDep||qn.contextDep,ur.propDep=ur.propDep||qn.propDep),ur}return qn?new H(qn.thisDep,qn.contextDep,qn.propDep,function(Di,ii){var yi=Di.shared.context;return[0,0,ii.def(yi,".","framebufferWidth"),ii.def(yi,".","framebufferHeight")]}):null}var Gn=Zn.static,ir=Zn.dynamic;if(Zn=Un("viewport")){var mr=Zn;Zn=new H(Zn.thisDep,Zn.contextDep,Zn.propDep,function(ur,Qn){var pr=mr.append(ur,Qn),Tr=ur.shared.context;return Qn.set(Tr,".viewportWidth",pr[2]),Qn.set(Tr,".viewportHeight",pr[3]),pr})}return{viewport:Zn,scissor_box:Un("scissor.box")}}(Ct,Tn=an(Ct)),Nt=qt(Ct),Ft=function(Zn,qn){var Kn=Zn.static,Un=Zn.dynamic,Gn={};return Nn.forEach(function(ir){function mr(Qn,pr){if(ir in Kn){var Tr=Qn(Kn[ir]);Gn[ur]=$(function(){return Tr})}else if(ir in Un){var Or=Un[ir];Gn[ur]=K(Or,function(oi,gi){return pr(oi,gi,oi.invoke(gi,Or))})}}var ur=bt(ir);switch(ir){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return mr(function(Qn){return Qn},function(Qn,pr,Tr){return Tr});case"depth.func":return mr(function(Qn){return Pt[Qn]},function(Qn,pr,Tr){return pr.def(Qn.constants.compareFuncs,"[",Tr,"]")});case"depth.range":return mr(function(Qn){return Qn},function(Qn,pr,Tr){return[pr.def("+",Tr,"[0]"),pr=pr.def("+",Tr,"[1]")]});case"blend.func":return mr(function(Qn){return[Ot["srcRGB"in Qn?Qn.srcRGB:Qn.src],Ot["dstRGB"in Qn?Qn.dstRGB:Qn.dst],Ot["srcAlpha"in Qn?Qn.srcAlpha:Qn.src],Ot["dstAlpha"in Qn?Qn.dstAlpha:Qn.dst]]},function(Qn,pr,Tr){function Or(ii,yi){return pr.def('"',ii,yi,'" in ',Tr,"?",Tr,".",ii,yi,":",Tr,".",ii)}Qn=Qn.constants.blendFuncs;var oi=Or("src","RGB"),gi=Or("dst","RGB"),Di=(oi=pr.def(Qn,"[",oi,"]"),pr.def(Qn,"[",Or("src","Alpha"),"]"));return[oi,gi=pr.def(Qn,"[",gi,"]"),Di,Qn=pr.def(Qn,"[",Or("dst","Alpha"),"]")]});case"blend.equation":return mr(function(Qn){return typeof Qn=="string"?[rr[Qn],rr[Qn]]:typeof Qn=="object"?[rr[Qn.rgb],rr[Qn.alpha]]:void 0},function(Qn,pr,Tr){var Or=Qn.constants.blendEquations,oi=pr.def(),gi=pr.def();return(Qn=Qn.cond("typeof ",Tr,'==="string"')).then(oi,"=",gi,"=",Or,"[",Tr,"];"),Qn.else(oi,"=",Or,"[",Tr,".rgb];",gi,"=",Or,"[",Tr,".alpha];"),pr(Qn),[oi,gi]});case"blend.color":return mr(function(Qn){return b(4,function(pr){return+Qn[pr]})},function(Qn,pr,Tr){return b(4,function(Or){return pr.def("+",Tr,"[",Or,"]")})});case"stencil.mask":return mr(function(Qn){return 0|Qn},function(Qn,pr,Tr){return pr.def(Tr,"|0")});case"stencil.func":return mr(function(Qn){return[Pt[Qn.cmp||"keep"],Qn.ref||0,"mask"in Qn?Qn.mask:-1]},function(Qn,pr,Tr){return[Qn=pr.def('"cmp" in ',Tr,"?",Qn.constants.compareFuncs,"[",Tr,".cmp]",":",7680),pr.def(Tr,".ref|0"),pr=pr.def('"mask" in ',Tr,"?",Tr,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return mr(function(Qn){return[ir==="stencil.opBack"?1029:1028,St[Qn.fail||"keep"],St[Qn.zfail||"keep"],St[Qn.zpass||"keep"]]},function(Qn,pr,Tr){function Or(gi){return pr.def('"',gi,'" in ',Tr,"?",oi,"[",Tr,".",gi,"]:",7680)}var oi=Qn.constants.stencilOps;return[ir==="stencil.opBack"?1029:1028,Or("fail"),Or("zfail"),Or("zpass")]});case"polygonOffset.offset":return mr(function(Qn){return[0|Qn.factor,0|Qn.units]},function(Qn,pr,Tr){return[pr.def(Tr,".factor|0"),pr=pr.def(Tr,".units|0")]});case"cull.face":return mr(function(Qn){var pr=0;return Qn==="front"?pr=1028:Qn==="back"&&(pr=1029),pr},function(Qn,pr,Tr){return pr.def(Tr,'==="front"?',1028,":",1029)});case"frontFace":return mr(function(Qn){return He[Qn]},function(Qn,pr,Tr){return pr.def(Tr+'==="cw"?2304:2305')});case"colorMask":return mr(function(Qn){return Qn.map(function(pr){return!!pr})},function(Qn,pr,Tr){return b(4,function(Or){return"!!"+Tr+"["+Or+"]"})});case"sample.coverage":return mr(function(Qn){return["value"in Qn?Qn.value:1,!!Qn.invert]},function(Qn,pr,Tr){return[pr.def('"value" in ',Tr,"?+",Tr,".value:1"),pr=pr.def("!!",Tr,".invert")]})}}),Gn}(Ct),Qt=rn(Ct,0,pn);_n("viewport"),_n(bt("scissor.box"));var Tn,Pn=0<Object.keys(Ft).length;if((Tn={framebuffer:Tn,draw:Nt,shader:Qt,state:Ft,dirty:Pn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(Zn){var qn,Kn=Zn.static;if(Zn=Zn.dynamic,"profile"in Kn){var Un=!!Kn.profile;(qn=$(function(ir,mr){return Un})).enable=Un}else if("profile"in Zn){var Gn=Zn.profile;qn=K(Gn,function(ir,mr){return ir.invoke(mr,Gn)})}return qn}(Ct),Tn.uniforms=function(Zn,qn){var Kn=Zn.static,Un=Zn.dynamic,Gn={};return Object.keys(Kn).forEach(function(ir){var mr,ur=Kn[ir];if(typeof ur=="number"||typeof ur=="boolean")mr=$(function(){return ur});else if(typeof ur=="function"){var Qn=ur._reglType;Qn==="texture2d"||Qn==="textureCube"?mr=$(function(pr){return pr.link(ur)}):Qn!=="framebuffer"&&Qn!=="framebufferCube"||(mr=$(function(pr){return pr.link(ur.color[0])}))}else x(ur)&&(mr=$(function(pr){return pr.global.def("[",b(ur.length,function(Tr){return ur[Tr]}),"]")}));mr.value=ur,Gn[ir]=mr}),Object.keys(Un).forEach(function(ir){var mr=Un[ir];Gn[ir]=K(mr,function(ur,Qn){return ur.invoke(Qn,mr)})}),Gn}(Zt),Tn.drawVAO=Tn.scopeVAO=Nt.vao,!Tn.drawVAO&&Qt.program&&!pn&&ot.angle_instanced_arrays&&Nt.static.elements){var On=!0;if(Ct=Qt.program.attributes.map(function(Zn){return Zn=Rt.static[Zn],On=On&&!!Zn,Zn}),On&&0<Ct.length){var Dn=ct.getVAO(ct.createVAO({attributes:Ct,elements:Nt.static.elements}));Tn.drawVAO=new H(null,null,null,function(Zn,qn){return Zn.link(Dn)}),Tn.useVAO=!0}}return pn?Tn.useVAO=!0:Tn.attributes=Kt(Rt),Tn.context=function(Zn){var qn=Zn.static,Kn=Zn.dynamic,Un={};return Object.keys(qn).forEach(function(Gn){var ir=qn[Gn];Un[Gn]=$(function(mr,ur){return typeof ir=="number"||typeof ir=="boolean"?""+ir:mr.link(ir)})}),Object.keys(Kn).forEach(function(Gn){var ir=Kn[Gn];Un[Gn]=K(ir,function(mr,ur){return mr.invoke(ur,ir)})}),Un}(cn),Tn}function on(Ct,Rt,Zt){var cn=Ct.shared.context,fn=Ct.scope();Object.keys(Zt).forEach(function(_n){Rt.save(cn,"."+_n);var pn=Zt[_n].append(Ct,Rt);Array.isArray(pn)?fn(cn,".",_n,"=[",pn.join(),"];"):fn(cn,".",_n,"=",pn,";")}),Rt(fn)}function Xt(Ct,Rt,Zt,cn){var fn,_n=(sn=Ct.shared).gl,pn=sn.framebuffer;$t&&(fn=Rt.def(sn.extensions,".webgl_draw_buffers"));var sn=(Nt=Ct.constants).drawBuffer,Nt=Nt.backBuffer;Ct=Zt?Zt.append(Ct,Rt):Rt.def(pn,".next"),cn||Rt("if(",Ct,"!==",pn,".cur){"),Rt("if(",Ct,"){",_n,".bindFramebuffer(",36160,",",Ct,".framebuffer);"),$t&&Rt(fn,".drawBuffersWEBGL(",sn,"[",Ct,".colorAttachments.length]);"),Rt("}else{",_n,".bindFramebuffer(",36160,",null);"),$t&&Rt(fn,".drawBuffersWEBGL(",Nt,");"),Rt("}",pn,".cur=",Ct,";"),cn||Rt("}")}function ln(Ct,Rt,Zt){var cn=Ct.shared,fn=cn.gl,_n=Ct.current,pn=Ct.next,sn=cn.current,Nt=cn.next,Ft=Ct.cond(sn,".dirty");Nn.forEach(function(Qt){var Tn,Pn;if(!((Qt=bt(Qt))in Zt.state))if(Qt in pn){Tn=pn[Qt],Pn=_n[Qt];var On=b(dn[Qt].length,function(Dn){return Ft.def(Tn,"[",Dn,"]")});Ft(Ct.cond(On.map(function(Dn,Zn){return Dn+"!=="+Pn+"["+Zn+"]"}).join("||")).then(fn,".",$n[Qt],"(",On,");",On.map(function(Dn,Zn){return Pn+"["+Zn+"]="+Dn}).join(";"),";"))}else Tn=Ft.def(Nt,".",Qt),On=Ct.cond(Tn,"!==",sn,".",Qt),Ft(On),Qt in Bn?On(Ct.cond(Tn).then(fn,".enable(",Bn[Qt],");").else(fn,".disable(",Bn[Qt],");"),sn,".",Qt,"=",Tn,";"):On(fn,".",$n[Qt],"(",Tn,");",sn,".",Qt,"=",Tn,";")}),Object.keys(Zt.state).length===0&&Ft(sn,".dirty=false;"),Rt(Ft)}function Jt(Ct,Rt,Zt,cn){var fn,_n=Ct.shared,pn=Ct.current,sn=_n.current,Nt=_n.gl;U(Object.keys(Zt)).forEach(function(Ft){var Qt=Zt[Ft];if(!cn||cn(Qt)){var Tn=Qt.append(Ct,Rt);if(Bn[Ft]){var Pn=Bn[Ft];ne(Qt)?(fn=Ct.link(Tn,{stable:!0}),Rt(Ct.cond(fn).then(Nt,".enable(",Pn,");").else(Nt,".disable(",Pn,");")),Rt(sn,".",Ft,"=",fn,";")):(Rt(Ct.cond(Tn).then(Nt,".enable(",Pn,");").else(Nt,".disable(",Pn,");")),Rt(sn,".",Ft,"=",Tn,";"))}else if(x(Tn)){var On=pn[Ft];Rt(Nt,".",$n[Ft],"(",Tn,");",Tn.map(function(Dn,Zn){return On+"["+Zn+"]="+Dn}).join(";"),";")}else ne(Qt)?(fn=Ct.link(Tn,{stable:!0}),Rt(Nt,".",$n[Ft],"(",fn,");",sn,".",Ft,"=",fn,";")):Rt(Nt,".",$n[Ft],"(",Tn,");",sn,".",Ft,"=",Tn,";")}})}function tn(Ct,Rt){Yt&&(Ct.instancing=Rt.def(Ct.shared.extensions,".angle_instanced_arrays"))}function wn(Ct,Rt,Zt,cn,fn){function _n(){return typeof performance>"u"?"Date.now()":"performance.now()"}function pn(Zn){Zn(Ft=Rt.def(),"=",_n(),";"),typeof fn=="string"?Zn(Pn,".count+=",fn,";"):Zn(Pn,".count++;"),mt&&(cn?Zn(Qt=Rt.def(),"=",Dn,".getNumPendingQueries();"):Zn(Dn,".beginQuery(",Pn,");"))}function sn(Zn){Zn(Pn,".cpuTime+=",_n(),"-",Ft,";"),mt&&(cn?Zn(Dn,".pushScopeStats(",Qt,",",Dn,".getNumPendingQueries(),",Pn,");"):Zn(Dn,".endQuery();"))}function Nt(Zn){var qn=Rt.def(On,".profile");Rt(On,".profile=",Zn,";"),Rt.exit(On,".profile=",qn,";")}var Ft,Qt,Tn=Ct.shared,Pn=Ct.stats,On=Tn.current,Dn=Tn.timer;if(Zt=Zt.profile){if(ne(Zt))return void(Zt.enable?(pn(Rt),sn(Rt.exit),Nt("true")):Nt("false"));Nt(Zt=Zt.append(Ct,Rt))}else Zt=Rt.def(On,".profile");pn(Tn=Ct.block()),Rt("if(",Zt,"){",Tn,"}"),sn(Ct=Ct.block()),Rt.exit("if(",Zt,"){",Ct,"}")}function mn(Ct,Rt,Zt,cn,fn){function _n(sn,Nt,Ft){function Qt(){Rt("if(!",Dn,".buffer){",Pn,".enableVertexAttribArray(",On,");}");var Un,Gn=Ft.type;Un=Ft.size?Rt.def(Ft.size,"||",Nt):Nt,Rt("if(",Dn,".type!==",Gn,"||",Dn,".size!==",Un,"||",Kn.map(function(ir){return Dn+"."+ir+"!=="+Ft[ir]}).join("||"),"){",Pn,".bindBuffer(",34962,",",Zn,".buffer);",Pn,".vertexAttribPointer(",[On,Un,Gn,Ft.normalized,Ft.stride,Ft.offset],");",Dn,".type=",Gn,";",Dn,".size=",Un,";",Kn.map(function(ir){return Dn+"."+ir+"="+Ft[ir]+";"}).join(""),"}"),Yt&&(Gn=Ft.divisor,Rt("if(",Dn,".divisor!==",Gn,"){",Ct.instancing,".vertexAttribDivisorANGLE(",[On,Gn],");",Dn,".divisor=",Gn,";}"))}function Tn(){Rt("if(",Dn,".buffer){",Pn,".disableVertexAttribArray(",On,");",Dn,".buffer=null;","}if(",Ke.map(function(Un,Gn){return Dn+"."+Un+"!=="+qn[Gn]}).join("||"),"){",Pn,".vertexAttrib4f(",On,",",qn,");",Ke.map(function(Un,Gn){return Dn+"."+Un+"="+qn[Gn]+";"}).join(""),"}")}var Pn=pn.gl,On=Rt.def(sn,".location"),Dn=Rt.def(pn.attributes,"[",On,"]");sn=Ft.state;var Zn=Ft.buffer,qn=[Ft.x,Ft.y,Ft.z,Ft.w],Kn=["buffer","normalized","offset","stride"];sn===1?Qt():sn===2?Tn():(Rt("if(",sn,"===",1,"){"),Qt(),Rt("}else{"),Tn(),Rt("}"))}var pn=Ct.shared;cn.forEach(function(sn){var Nt,Ft=sn.name,Qt=Zt.attributes[Ft];if(Qt){if(!fn(Qt))return;Nt=Qt.append(Ct,Rt)}else{if(!fn(We))return;var Tn=Ct.scopeAttrib(Ft);Nt={},Object.keys(new Xn).forEach(function(Pn){Nt[Pn]=Rt.def(Tn,".",Pn)})}_n(Ct.link(sn),function(Pn){switch(Pn){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(sn.info.type),Nt)})}function Cn(Ct,Rt,Zt,cn,fn,_n){for(var pn,sn=Ct.shared,Nt=sn.gl,Ft=0;Ft<cn.length;++Ft){var Qt,Tn=(Dn=cn[Ft]).name,Pn=Dn.info.type,On=Zt.uniforms[Tn],Dn=Ct.link(Dn)+".location";if(On){if(!fn(On))continue;if(ne(On)){if(Tn=On.value,Pn===35678||Pn===35680)Rt(Nt,".uniform1i(",Dn,",",(Pn=Ct.link(Tn._texture||Tn.color[0]._texture))+".bind());"),Rt.exit(Pn,".unbind();");else if(Pn===35674||Pn===35675||Pn===35676)On=2,Pn===35675?On=3:Pn===35676&&(On=4),Rt(Nt,".uniformMatrix",On,"fv(",Dn,",false,",Tn=Ct.global.def("new Float32Array(["+Array.prototype.slice.call(Tn)+"])"),");");else{switch(Pn){case 5126:pn="1f";break;case 35664:pn="2f";break;case 35665:pn="3f";break;case 35666:pn="4f";break;case 35670:case 5124:pn="1i";break;case 35671:case 35667:pn="2i";break;case 35672:case 35668:pn="3i";break;case 35673:case 35669:pn="4i"}Rt(Nt,".uniform",pn,"(",Dn,",",x(Tn)?Array.prototype.slice.call(Tn):Tn,");")}continue}Qt=On.append(Ct,Rt)}else{if(!fn(We))continue;Qt=Rt.def(sn.uniforms,"[",Ge.id(Tn),"]")}switch(Pn===35678?Rt("if(",Qt,"&&",Qt,'._reglType==="framebuffer"){',Qt,"=",Qt,".color[0];","}"):Pn===35680&&Rt("if(",Qt,"&&",Qt,'._reglType==="framebufferCube"){',Qt,"=",Qt,".color[0];","}"),Tn=1,Pn){case 35678:case 35680:Pn=Rt.def(Qt,"._texture"),Rt(Nt,".uniform1i(",Dn,",",Pn,".bind());"),Rt.exit(Pn,".unbind();");continue;case 5124:case 35670:pn="1i";break;case 35667:case 35671:pn="2i",Tn=2;break;case 35668:case 35672:pn="3i",Tn=3;break;case 35669:case 35673:pn="4i",Tn=4;break;case 5126:pn="1f";break;case 35664:pn="2f",Tn=2;break;case 35665:pn="3f",Tn=3;break;case 35666:pn="4f",Tn=4;break;case 35674:pn="Matrix2fv";break;case 35675:pn="Matrix3fv";break;case 35676:pn="Matrix4fv"}if(pn.charAt(0)==="M"){Rt(Nt,".uniform",pn,"(",Dn,","),Dn=Math.pow(Pn-35674+2,2);var Zn=Ct.global.def("new Float32Array(",Dn,")");Array.isArray(Qt)?Rt("false,(",b(Dn,function(Kn){return Zn+"["+Kn+"]="+Qt[Kn]}),",",Zn,")"):Rt("false,(Array.isArray(",Qt,")||",Qt," instanceof Float32Array)?",Qt,":(",b(Dn,function(Kn){return Zn+"["+Kn+"]="+Qt+"["+Kn+"]"}),",",Zn,")"),Rt(");")}else{if(1<Tn){Pn=[];var qn=[];for(On=0;On<Tn;++On)Array.isArray(Qt)?qn.push(Qt[On]):qn.push(Rt.def(Qt+"["+On+"]")),_n&&Pn.push(Rt.def());_n&&Rt("if(!",Ct.batchId,"||",Pn.map(function(Kn,Un){return Kn+"!=="+qn[Un]}).join("||"),"){",Pn.map(function(Kn,Un){return Kn+"="+qn[Un]+";"}).join("")),Rt(Nt,".uniform",pn,"(",Dn,",",qn.join(","),");")}else _n&&(Pn=Rt.def(),Rt("if(!",Ct.batchId,"||",Pn,"!==",Qt,"){",Pn,"=",Qt,";")),Rt(Nt,".uniform",pn,"(",Dn,",",Qt,");");_n&&Rt("}")}}}function yn(Ct,Rt,Zt,cn){function fn(Gn){var ir=Pn[Gn];return ir?ir.contextDep&&cn.contextDynamic||ir.propDep?ir.append(Ct,Zt):ir.append(Ct,Rt):Rt.def(Tn,".",Gn)}function _n(){function Gn(){Zt(Nt,".drawElementsInstancedANGLE(",[Dn,qn,Kn,Zn+"<<(("+Kn+"-5121)>>1)",sn],");")}function ir(){Zt(Nt,".drawArraysInstancedANGLE(",[Dn,Zn,qn,sn],");")}On&&On!=="null"?Un?Gn():(Zt("if(",On,"){"),Gn(),Zt("}else{"),ir(),Zt("}")):ir()}function pn(){function Gn(){Zt(Qt+".drawElements("+[Dn,qn,Kn,Zn+"<<(("+Kn+"-5121)>>1)"]+");")}function ir(){Zt(Qt+".drawArrays("+[Dn,Zn,qn]+");")}On&&On!=="null"?Un?Gn():(Zt("if(",On,"){"),Gn(),Zt("}else{"),ir(),Zt("}")):ir()}var sn,Nt,Ft=Ct.shared,Qt=Ft.gl,Tn=Ft.draw,Pn=cn.draw,On=function(){var Gn=Pn.elements,ir=Rt;return Gn?((Gn.contextDep&&cn.contextDynamic||Gn.propDep)&&(ir=Zt),Gn=Gn.append(Ct,ir),Pn.elementsActive&&ir("if("+Gn+")"+Qt+".bindBuffer(34963,"+Gn+".buffer.buffer);")):(Gn=ir.def(),ir(Gn,"=",Tn,".","elements",";","if(",Gn,"){",Qt,".bindBuffer(",34963,",",Gn,".buffer.buffer);}","else if(",Ft.vao,".currentVAO){",Gn,"=",Ct.shared.elements+".getElements("+Ft.vao,".currentVAO.elements);",Sn?"":"if("+Gn+")"+Qt+".bindBuffer(34963,"+Gn+".buffer.buffer);","}")),Gn}(),Dn=fn("primitive"),Zn=fn("offset"),qn=function(){var Gn=Pn.count,ir=Rt;return Gn?((Gn.contextDep&&cn.contextDynamic||Gn.propDep)&&(ir=Zt),Gn=Gn.append(Ct,ir)):Gn=ir.def(Tn,".","count"),Gn}();if(typeof qn=="number"){if(qn===0)return}else Zt("if(",qn,"){"),Zt.exit("}");Yt&&(sn=fn("instances"),Nt=Ct.instancing);var Kn=On+".type",Un=Pn.elements&&ne(Pn.elements)&&!Pn.vaoActive;Yt&&(typeof sn!="number"||0<=sn)?typeof sn=="string"?(Zt("if(",sn,">0){"),_n(),Zt("}else if(",sn,"<0){"),pn(),Zt("}")):_n():pn()}function Mn(Ct,Rt,Zt,cn,fn){return fn=(Rt=en()).proc("body",fn),Yt&&(Rt.instancing=fn.def(Rt.shared.extensions,".angle_instanced_arrays")),Ct(Rt,fn,Zt,cn),Rt.compile().body}function zn(Ct,Rt,Zt,cn){tn(Ct,Rt),Zt.useVAO?Zt.drawVAO?Rt(Ct.shared.vao,".setVAO(",Zt.drawVAO.append(Ct,Rt),");"):Rt(Ct.shared.vao,".setVAO(",Ct.shared.vao,".targetVAO);"):(Rt(Ct.shared.vao,".setVAO(null);"),mn(Ct,Rt,Zt,cn.attributes,function(){return!0})),Cn(Ct,Rt,Zt,cn.uniforms,function(){return!0},!1),yn(Ct,Rt,Rt,Zt)}function Wn(Ct,Rt,Zt,cn){function fn(){return!0}Ct.batchId="a1",tn(Ct,Rt),mn(Ct,Rt,Zt,cn.attributes,fn),Cn(Ct,Rt,Zt,cn.uniforms,fn,!1),yn(Ct,Rt,Rt,Zt)}function sr(Ct,Rt,Zt,cn){function fn(Tn){return Tn.contextDep&&pn||Tn.propDep}function _n(Tn){return!fn(Tn)}tn(Ct,Rt);var pn=Zt.contextDep,sn=Rt.def(),Nt=Rt.def();Ct.shared.props=Nt,Ct.batchId=sn;var Ft=Ct.scope(),Qt=Ct.scope();Rt(Ft.entry,"for(",sn,"=0;",sn,"<","a1",";++",sn,"){",Nt,"=","a0","[",sn,"];",Qt,"}",Ft.exit),Zt.needsContext&&on(Ct,Qt,Zt.context),Zt.needsFramebuffer&&Xt(Ct,Qt,Zt.framebuffer),Jt(Ct,Qt,Zt.state,fn),Zt.profile&&fn(Zt.profile)&&wn(Ct,Qt,Zt,!1,!0),cn?(Zt.useVAO?Zt.drawVAO?fn(Zt.drawVAO)?Qt(Ct.shared.vao,".setVAO(",Zt.drawVAO.append(Ct,Qt),");"):Ft(Ct.shared.vao,".setVAO(",Zt.drawVAO.append(Ct,Ft),");"):Ft(Ct.shared.vao,".setVAO(",Ct.shared.vao,".targetVAO);"):(Ft(Ct.shared.vao,".setVAO(null);"),mn(Ct,Ft,Zt,cn.attributes,_n),mn(Ct,Qt,Zt,cn.attributes,fn)),Cn(Ct,Ft,Zt,cn.uniforms,_n,!1),Cn(Ct,Qt,Zt,cn.uniforms,fn,!0),yn(Ct,Ft,Qt,Zt)):(Rt=Ct.global.def("{}"),cn=Zt.shader.progVar.append(Ct,Qt),Nt=Qt.def(cn,".id"),Ft=Qt.def(Rt,"[",Nt,"]"),Qt(Ct.shared.gl,".useProgram(",cn,".program);","if(!",Ft,"){",Ft,"=",Rt,"[",Nt,"]=",Ct.link(function(Tn){return Mn(Wn,Ct,Zt,Tn,2)}),"(",cn,");}",Ft,".call(this,a0[",sn,"],",sn,");"))}function Fn(Ct,Rt){function Zt(sn){var Nt=Rt.shader[sn];Nt&&(Nt=Nt.append(Ct,cn),isNaN(Nt)?cn.set(fn.shader,"."+sn,Nt):cn.set(fn.shader,"."+sn,Ct.link(Nt,{stable:!0})))}var cn=Ct.proc("scope",3);Ct.batchId="a2";var fn=Ct.shared,_n=fn.current;if(on(Ct,cn,Rt.context),Rt.framebuffer&&Rt.framebuffer.append(Ct,cn),U(Object.keys(Rt.state)).forEach(function(sn){var Nt=Rt.state[sn],Ft=Nt.append(Ct,cn);x(Ft)?Ft.forEach(function(Qt,Tn){isNaN(Qt)?cn.set(Ct.next[sn],"["+Tn+"]",Qt):cn.set(Ct.next[sn],"["+Tn+"]",Ct.link(Qt,{stable:!0}))}):ne(Nt)?cn.set(fn.next,"."+sn,Ct.link(Ft,{stable:!0})):cn.set(fn.next,"."+sn,Ft)}),wn(Ct,cn,Rt,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(sn){var Nt=Rt.draw[sn];Nt&&(Nt=Nt.append(Ct,cn),isNaN(Nt)?cn.set(fn.draw,"."+sn,Nt):cn.set(fn.draw,"."+sn,Ct.link(Nt),{stable:!0}))}),Object.keys(Rt.uniforms).forEach(function(sn){var Nt=Rt.uniforms[sn].append(Ct,cn);Array.isArray(Nt)&&(Nt="["+Nt.map(function(Ft){return isNaN(Ft)?Ft:Ct.link(Ft,{stable:!0})})+"]"),cn.set(fn.uniforms,"["+Ct.link(Ge.id(sn),{stable:!0})+"]",Nt)}),Object.keys(Rt.attributes).forEach(function(sn){var Nt=Rt.attributes[sn].append(Ct,cn),Ft=Ct.scopeAttrib(sn);Object.keys(new Xn).forEach(function(Qt){cn.set(Ft,"."+Qt,Nt[Qt])})}),Rt.scopeVAO){var pn=Rt.scopeVAO.append(Ct,cn);isNaN(pn)?cn.set(fn.vao,".targetVAO",pn):cn.set(fn.vao,".targetVAO",Ct.link(pn,{stable:!0}))}Zt("vert"),Zt("frag"),0<Object.keys(Rt.state).length&&(cn(_n,".dirty=true;"),cn.exit(_n,".dirty=true;")),cn("a1(",Ct.shared.context,",a0,",Ct.batchId,");")}function Yn(Ct,Rt,Zt){var cn=Rt.static[Zt];if(cn&&function(Qt){if(typeof Qt=="object"&&!x(Qt)){for(var Tn=Object.keys(Qt),Pn=0;Pn<Tn.length;++Pn)if(ae.isDynamic(Qt[Tn[Pn]]))return!0;return!1}}(cn)){var fn=Ct.global,_n=Object.keys(cn),pn=!1,sn=!1,Nt=!1,Ft=Ct.global.def("{}");_n.forEach(function(Qt){var Tn=cn[Qt];if(ae.isDynamic(Tn))typeof Tn=="function"&&(Tn=cn[Qt]=ae.unbox(Tn)),Qt=K(Tn,null),pn=pn||Qt.thisDep,Nt=Nt||Qt.propDep,sn=sn||Qt.contextDep;else{switch(fn(Ft,".",Qt,"="),typeof Tn){case"number":fn(Tn);break;case"string":fn('"',Tn,'"');break;case"object":Array.isArray(Tn)&&fn("[",Tn.join(),"]");break;default:fn(Ct.link(Tn))}fn(";")}}),Rt.dynamic[Zt]=new ae.DynamicVariable(4,{thisDep:pn,contextDep:sn,propDep:Nt,ref:Ft,append:function(Qt,Tn){_n.forEach(function(Pn){var On=cn[Pn];ae.isDynamic(On)&&(On=Qt.invoke(Tn,On),Tn(Ft,".",Pn,"=",On,";"))})}}),delete Rt.static[Zt]}}var Xn=ct.Record,rr={add:32774,subtract:32778,"reverse subtract":32779};ot.ext_blend_minmax&&(rr.min=32775,rr.max=32776);var Yt=ot.angle_instanced_arrays,$t=ot.webgl_draw_buffers,Sn=ot.oes_vertex_array_object,dn={dirty:!0,profile:yt.profile},En={},Nn=[],Bn={},$n={};zt("dither",3024),zt("blend.enable",3042),Ut("blend.color","blendColor",[0,0,0,0]),Ut("blend.equation","blendEquationSeparate",[32774,32774]),Ut("blend.func","blendFuncSeparate",[1,0,1,0]),zt("depth.enable",2929,!0),Ut("depth.func","depthFunc",513),Ut("depth.range","depthRange",[0,1]),Ut("depth.mask","depthMask",!0),Ut("colorMask","colorMask",[!0,!0,!0,!0]),zt("cull.enable",2884),Ut("cull.face","cullFace",1029),Ut("frontFace","frontFace",2305),Ut("lineWidth","lineWidth",1),zt("polygonOffset.enable",32823),Ut("polygonOffset.offset","polygonOffset",[0,0]),zt("sample.alpha",32926),zt("sample.enable",32928),Ut("sample.coverage","sampleCoverage",[1,!1]),zt("stencil.enable",2960),Ut("stencil.mask","stencilMask",-1),Ut("stencil.func","stencilFunc",[519,0,-1]),Ut("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Ut("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),zt("scissor.enable",3089),Ut("scissor.box","scissor",[0,0,Be.drawingBufferWidth,Be.drawingBufferHeight]),Ut("viewport","viewport",[0,0,Be.drawingBufferWidth,Be.drawingBufferHeight]);var lr={gl:Be,context:xt,strings:Ge,next:En,current:dn,draw:et,elements:gt,buffer:dt,shader:ut,attributes:ct.state,vao:ct,uniforms:rt,framebuffer:Re,extensions:ot,timer:mt,isBufferArgs:F},Gt={primTypes:Se,compareFuncs:Pt,blendFuncs:Ot,blendEquations:rr,stencilOps:St,glTypes:ze,orientationType:He};$t&&(Gt.backBuffer=[1029],Gt.drawBuffer=b(it.maxDrawbuffers,function(Ct){return Ct===0?[0]:b(Ct,function(Rt){return 36064+Rt})}));var gn=0;return{next:En,current:dn,procs:function(){var Ct=en(),Rt=Ct.proc("poll"),Zt=Ct.proc("refresh"),cn=Ct.block();Rt(cn),Zt(cn);var fn,_n=(Nt=Ct.shared).gl,pn=Nt.next,sn=Nt.current;cn(sn,".dirty=false;"),Xt(Ct,Rt),Xt(Ct,Zt,null,!0),Yt&&(fn=Ct.link(Yt)),ot.oes_vertex_array_object&&Zt(Ct.link(ot.oes_vertex_array_object),".bindVertexArrayOES(null);");var Nt=Zt.def(Nt.attributes),Ft=Zt.def(0),Qt=Ct.cond(Ft,".buffer");Qt.then(_n,".enableVertexAttribArray(i);",_n,".bindBuffer(",34962,",",Ft,".buffer.buffer);",_n,".vertexAttribPointer(i,",Ft,".size,",Ft,".type,",Ft,".normalized,",Ft,".stride,",Ft,".offset);").else(_n,".disableVertexAttribArray(i);",_n,".vertexAttrib4f(i,",Ft,".x,",Ft,".y,",Ft,".z,",Ft,".w);",Ft,".buffer=null;");var Tn=Ct.link(it.maxAttributes,{stable:!0});return Zt("for(var i=0;i<",Tn,";++i){",Ft,"=",Nt,"[i];",Qt,"}"),Yt&&Zt("for(var i=0;i<",Tn,";++i){",fn,".vertexAttribDivisorANGLE(i,",Nt,"[i].divisor);","}"),Zt(Ct.shared.vao,".currentVAO=null;",Ct.shared.vao,".setVAO(",Ct.shared.vao,".targetVAO);"),Object.keys(Bn).forEach(function(Pn){var On=Bn[Pn],Dn=cn.def(pn,".",Pn),Zn=Ct.block();Zn("if(",Dn,"){",_n,".enable(",On,")}else{",_n,".disable(",On,")}",sn,".",Pn,"=",Dn,";"),Zt(Zn),Rt("if(",Dn,"!==",sn,".",Pn,"){",Zn,"}")}),Object.keys($n).forEach(function(Pn){var On,Dn,Zn=$n[Pn],qn=dn[Pn],Kn=Ct.block();Kn(_n,".",Zn,"("),x(qn)?(Zn=qn.length,On=Ct.global.def(pn,".",Pn),Dn=Ct.global.def(sn,".",Pn),Kn(b(Zn,function(Un){return On+"["+Un+"]"}),");",b(Zn,function(Un){return Dn+"["+Un+"]="+On+"["+Un+"];"}).join("")),Rt("if(",b(Zn,function(Un){return On+"["+Un+"]!=="+Dn+"["+Un+"]"}).join("||"),"){",Kn,"}")):(On=cn.def(pn,".",Pn),Dn=cn.def(sn,".",Pn),Kn(On,");",sn,".",Pn,"=",On,";"),Rt("if(",On,"!==",Dn,"){",Kn,"}")),Zt(Kn)}),Ct.compile()}(),compile:function(Ct,Rt,Zt,cn,fn){var _n=en();_n.stats=_n.link(fn),Object.keys(Rt.static).forEach(function(sn){Yn(_n,Rt,sn)}),Mt.forEach(function(sn){Yn(_n,Ct,sn)});var pn=xn(Ct,Rt,Zt,cn);return pn.shader.program&&(pn.shader.program.attributes.sort(function(sn,Nt){return sn.name<Nt.name?-1:1}),pn.shader.program.uniforms.sort(function(sn,Nt){return sn.name<Nt.name?-1:1})),function(sn,Nt){var Ft=sn.proc("draw",1);tn(sn,Ft),on(sn,Ft,Nt.context),Xt(sn,Ft,Nt.framebuffer),ln(sn,Ft,Nt),Jt(sn,Ft,Nt.state),wn(sn,Ft,Nt,!1,!0);var Qt=Nt.shader.progVar.append(sn,Ft);if(Ft(sn.shared.gl,".useProgram(",Qt,".program);"),Nt.shader.program)zn(sn,Ft,Nt,Nt.shader.program);else{Ft(sn.shared.vao,".setVAO(null);");var Tn=sn.global.def("{}"),Pn=Ft.def(Qt,".id"),On=Ft.def(Tn,"[",Pn,"]");Ft(sn.cond(On).then(On,".call(this,a0);").else(On,"=",Tn,"[",Pn,"]=",sn.link(function(Dn){return Mn(zn,sn,Nt,Dn,1)}),"(",Qt,");",On,".call(this,a0);"))}0<Object.keys(Nt.state).length&&Ft(sn.shared.current,".dirty=true;"),sn.shared.vao&&Ft(sn.shared.vao,".setVAO(null);")}(_n,pn),Fn(_n,pn),function(sn,Nt){function Ft(qn){return qn.contextDep&&Tn||qn.propDep}var Qt=sn.proc("batch",2);sn.batchId="0",tn(sn,Qt);var Tn=!1,Pn=!0;Object.keys(Nt.context).forEach(function(qn){Tn=Tn||Nt.context[qn].propDep}),Tn||(on(sn,Qt,Nt.context),Pn=!1);var On=!1;if((Dn=Nt.framebuffer)?(Dn.propDep?Tn=On=!0:Dn.contextDep&&Tn&&(On=!0),On||Xt(sn,Qt,Dn)):Xt(sn,Qt,null),Nt.state.viewport&&Nt.state.viewport.propDep&&(Tn=!0),ln(sn,Qt,Nt),Jt(sn,Qt,Nt.state,function(qn){return!Ft(qn)}),Nt.profile&&Ft(Nt.profile)||wn(sn,Qt,Nt,!1,"a1"),Nt.contextDep=Tn,Nt.needsContext=Pn,Nt.needsFramebuffer=On,(Pn=Nt.shader.progVar).contextDep&&Tn||Pn.propDep)sr(sn,Qt,Nt,null);else if(Pn=Pn.append(sn,Qt),Qt(sn.shared.gl,".useProgram(",Pn,".program);"),Nt.shader.program)sr(sn,Qt,Nt,Nt.shader.program);else{Qt(sn.shared.vao,".setVAO(null);");var Dn=sn.global.def("{}"),Zn=(On=Qt.def(Pn,".id"),Qt.def(Dn,"[",On,"]"));Qt(sn.cond(Zn).then(Zn,".call(this,a0,a1);").else(Zn,"=",Dn,"[",On,"]=",sn.link(function(qn){return Mn(sr,sn,Nt,qn,2)}),"(",Pn,");",Zn,".call(this,a0,a1);"))}0<Object.keys(Nt.state).length&&Qt(sn.shared.current,".dirty=true;"),sn.shared.vao&&Qt(sn.shared.vao,".setVAO(null);")}(_n,pn),X(_n.compile(),{destroy:function(){pn.shader.program.destroy()}})}}}function Z(Be,Ge){for(var ot=0;ot<Be.length;++ot)if(Be[ot]===Ge)return ot;return-1}var X=function(Be,Ge){for(var ot=Object.keys(Ge),it=0;it<ot.length;++it)Be[ot[it]]=Ge[ot[it]];return Be},te=0,ae={DynamicVariable:R,define:function(Be,Ge){return new R(Be,M(Ge+""))},isDynamic:function(Be){return typeof Be=="function"&&!Be._reglType||Be instanceof R},unbox:function Be(Ge,ot){return typeof Ge=="function"?new R(0,Ge):typeof Ge=="number"||typeof Ge=="boolean"?new R(5,Ge):Array.isArray(Ge)?new R(6,Ge.map(function(it,dt){return Be(it)})):Ge instanceof R?Ge:void 0},accessor:M},se={next:typeof requestAnimationFrame=="function"?function(Be){return requestAnimationFrame(Be)}:function(Be){return setTimeout(Be,16)},cancel:typeof cancelAnimationFrame=="function"?function(Be){return cancelAnimationFrame(Be)}:clearTimeout},ce=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},fe=o();fe.zero=o();var pe=function(Be,Ge){var ot=1;Ge.ext_texture_filter_anisotropic&&(ot=Be.getParameter(34047));var it=1,dt=1;Ge.webgl_draw_buffers&&(it=Be.getParameter(34852),dt=Be.getParameter(36063));var gt=!!Ge.oes_texture_float;if(gt){gt=Be.createTexture(),Be.bindTexture(3553,gt),Be.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var je=Be.createFramebuffer();if(Be.bindFramebuffer(36160,je),Be.framebufferTexture2D(36160,36064,3553,gt,0),Be.bindTexture(3553,null),Be.checkFramebufferStatus(36160)!==36053)gt=!1;else{Be.viewport(0,0,1,1),Be.clearColor(1,0,0,1),Be.clear(16384);var Re=fe.allocType(5126,4);Be.readPixels(0,0,1,1,6408,5126,Re),Be.getError()?gt=!1:(Be.deleteFramebuffer(je),Be.deleteTexture(gt),gt=Re[0]===1),fe.freeType(Re)}}return Re=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(Re=Be.createTexture(),je=fe.allocType(5121,36),Be.activeTexture(33984),Be.bindTexture(34067,Re),Be.texImage2D(34069,0,6408,3,3,0,6408,5121,je),fe.freeType(je),Be.bindTexture(34067,null),Be.deleteTexture(Re),Re=!Be.getError()),{colorBits:[Be.getParameter(3410),Be.getParameter(3411),Be.getParameter(3412),Be.getParameter(3413)],depthBits:Be.getParameter(3414),stencilBits:Be.getParameter(3415),subpixelBits:Be.getParameter(3408),extensions:Object.keys(Ge).filter(function(rt){return!!Ge[rt]}),maxAnisotropic:ot,maxDrawbuffers:it,maxColorAttachments:dt,pointSizeDims:Be.getParameter(33901),lineWidthDims:Be.getParameter(33902),maxViewportDims:Be.getParameter(3386),maxCombinedTextureUnits:Be.getParameter(35661),maxCubeMapSize:Be.getParameter(34076),maxRenderbufferSize:Be.getParameter(34024),maxTextureUnits:Be.getParameter(34930),maxTextureSize:Be.getParameter(3379),maxAttributes:Be.getParameter(34921),maxVertexUniforms:Be.getParameter(36347),maxVertexTextureUnits:Be.getParameter(35660),maxVaryingVectors:Be.getParameter(36348),maxFragmentUniforms:Be.getParameter(36349),glsl:Be.getParameter(35724),renderer:Be.getParameter(7937),vendor:Be.getParameter(7936),version:Be.getParameter(7938),readFloat:gt,npotTextureCube:Re}},ge=function(Be){return Be instanceof Uint8Array||Be instanceof Uint16Array||Be instanceof Uint32Array||Be instanceof Int8Array||Be instanceof Int16Array||Be instanceof Int32Array||Be instanceof Float32Array||Be instanceof Float64Array||Be instanceof Uint8ClampedArray},me=function(Be){return Object.keys(Be).map(function(Ge){return Be[Ge]})},be={shape:function(Be){for(var Ge=[];Be.length;Be=Be[0])Ge.push(Be.length);return Ge},flatten:function(Be,Ge,ot,it){var dt=1;if(Ge.length)for(var gt=0;gt<Ge.length;++gt)dt*=Ge[gt];else dt=0;switch(ot=it||fe.allocType(ot,dt),Ge.length){case 0:break;case 1:for(it=Ge[0],Ge=0;Ge<it;++Ge)ot[Ge]=Be[Ge];break;case 2:for(it=Ge[0],Ge=Ge[1],gt=dt=0;gt<it;++gt)for(var je=Be[gt],Re=0;Re<Ge;++Re)ot[dt++]=je[Re];break;case 3:i(Be,Ge[0],Ge[1],Ge[2],ot,0);break;default:n(Be,Ge,0,ot,0)}return ot}},ke={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},ze={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},ve={dynamic:35048,stream:35040,static:35044},oe=be.flatten,ie=be.shape,he=[];he[5120]=1,he[5122]=2,he[5124]=4,he[5121]=1,he[5123]=2,he[5125]=4,he[5126]=4;var Se={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},ye=new Float32Array(1),we=new Uint32Array(ye.buffer),Me=[9984,9986,9985,9987],Oe=[0,6409,6410,6407,6408],Ie={};Ie[6409]=Ie[6406]=Ie[6402]=1,Ie[34041]=Ie[6410]=2,Ie[6407]=Ie[35904]=3,Ie[6408]=Ie[35906]=4;var de=p("HTMLCanvasElement"),_e=p("OffscreenCanvas"),Ae=p("CanvasRenderingContext2D"),Pe=p("ImageBitmap"),Ee=p("HTMLImageElement"),Fe=p("HTMLVideoElement"),Ve=Object.keys(ke).concat([de,_e,Ae,Pe,Ee,Fe]),Ye=[];Ye[5121]=1,Ye[5126]=4,Ye[36193]=2,Ye[5123]=2,Ye[5125]=4;var tt=[];tt[32854]=2,tt[32855]=2,tt[36194]=2,tt[34041]=4,tt[33776]=.5,tt[33777]=.5,tt[33778]=1,tt[33779]=1,tt[35986]=.5,tt[35987]=1,tt[34798]=1,tt[35840]=.5,tt[35841]=.25,tt[35842]=.5,tt[35843]=.25,tt[36196]=.5;var nt=[];nt[32854]=2,nt[32855]=2,nt[36194]=2,nt[33189]=2,nt[36168]=1,nt[34041]=4,nt[35907]=4,nt[34836]=16,nt[34842]=8,nt[34843]=6;var ht=function(Be,Ge,ot,it,dt){function gt(et){this.id=ct++,this.refCount=1,this.renderbuffer=et,this.format=32854,this.height=this.width=0,dt.profile&&(this.stats={size:0})}function je(et){var xt=et.renderbuffer;Be.bindRenderbuffer(36161,null),Be.deleteRenderbuffer(xt),et.renderbuffer=null,et.refCount=0,delete ut[et.id],it.renderbufferCount--}var Re={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};Ge.ext_srgb&&(Re.srgba=35907),Ge.ext_color_buffer_half_float&&(Re.rgba16f=34842,Re.rgb16f=34843),Ge.webgl_color_buffer_float&&(Re.rgba32f=34836);var rt=[];Object.keys(Re).forEach(function(et){rt[Re[et]]=et});var ct=0,ut={};return gt.prototype.decRef=function(){0>=--this.refCount&&je(this)},dt.profile&&(it.getTotalRenderbufferSize=function(){var et=0;return Object.keys(ut).forEach(function(xt){et+=ut[xt].stats.size}),et}),{create:function(et,xt){function mt(yt,bt){var zt=0,Ut=0,en=32854;if(typeof yt=="object"&&yt?("shape"in yt?(zt=0|(Ut=yt.shape)[0],Ut=0|Ut[1]):("radius"in yt&&(zt=Ut=0|yt.radius),"width"in yt&&(zt=0|yt.width),"height"in yt&&(Ut=0|yt.height)),"format"in yt&&(en=Re[yt.format])):typeof yt=="number"?(zt=0|yt,Ut=typeof bt=="number"?0|bt:zt):yt||(zt=Ut=1),zt!==Tt.width||Ut!==Tt.height||en!==Tt.format)return mt.width=Tt.width=zt,mt.height=Tt.height=Ut,Tt.format=en,Be.bindRenderbuffer(36161,Tt.renderbuffer),Be.renderbufferStorage(36161,en,zt,Ut),dt.profile&&(Tt.stats.size=nt[Tt.format]*Tt.width*Tt.height),mt.format=rt[Tt.format],mt}var Tt=new gt(Be.createRenderbuffer());return ut[Tt.id]=Tt,it.renderbufferCount++,mt(et,xt),mt.resize=function(yt,bt){var zt=0|yt,Ut=0|bt||zt;return zt===Tt.width&&Ut===Tt.height||(mt.width=Tt.width=zt,mt.height=Tt.height=Ut,Be.bindRenderbuffer(36161,Tt.renderbuffer),Be.renderbufferStorage(36161,Tt.format,zt,Ut),dt.profile&&(Tt.stats.size=nt[Tt.format]*Tt.width*Tt.height)),mt},mt._reglType="renderbuffer",mt._renderbuffer=Tt,dt.profile&&(mt.stats=Tt.stats),mt.destroy=function(){Tt.decRef()},mt},clear:function(){me(ut).forEach(je)},restore:function(){me(ut).forEach(function(et){et.renderbuffer=Be.createRenderbuffer(),Be.bindRenderbuffer(36161,et.renderbuffer),Be.renderbufferStorage(36161,et.format,et.width,et.height)}),Be.bindRenderbuffer(36161,null)}}},vt=[];vt[6408]=4,vt[6407]=3;var pt=[];pt[5121]=1,pt[5126]=4,pt[36193]=2;var Qe=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Ke=["x","y","z","w"],Mt="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Ot={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Pt={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},St={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},He={cw:2304,ccw:2305},We=new H(!1,!1,!1,function(){});return function(Be){function Ge(){if(Wn.length===0)an&&an.update(),Xn=null;else{Xn=se.next(Ge),ut();for(var Yt=Wn.length-1;0<=Yt;--Yt){var $t=Wn[Yt];$t&&$t(xn,null,0)}mt.flush(),an&&an.update()}}function ot(){!Xn&&0<Wn.length&&(Xn=se.next(Ge))}function it(){Xn&&(se.cancel(Ge),Xn=null)}function dt(Yt){Yt.preventDefault(),it(),sr.forEach(function($t){$t()})}function gt(Yt){mt.getError(),yt.restore(),tn.restore(),Xt.restore(),wn.restore(),mn.restore(),Cn.restore(),Jt.restore(),an&&an.restore(),yn.procs.refresh(),ot(),Fn.forEach(function($t){$t()})}function je(Yt){function $t(Ct,Rt){var Zt={},cn={};return Object.keys(Ct).forEach(function(fn){var _n=Ct[fn];if(ae.isDynamic(_n))cn[fn]=ae.unbox(_n,fn);else{if(Rt&&Array.isArray(_n)){for(var pn=0;pn<_n.length;++pn)if(ae.isDynamic(_n[pn]))return void(cn[fn]=ae.unbox(_n,fn))}Zt[fn]=_n}}),{dynamic:cn,static:Zt}}var Sn=$t(Yt.context||{},!0),dn=$t(Yt.uniforms||{},!0),En=$t(Yt.attributes||{},!1);Yt=$t(function(Ct){function Rt(cn){if(cn in Zt){var fn=Zt[cn];delete Zt[cn],Object.keys(fn).forEach(function(_n){Zt[cn+"."+_n]=fn[_n]})}}var Zt=X({},Ct);return delete Zt.uniforms,delete Zt.attributes,delete Zt.context,delete Zt.vao,"stencil"in Zt&&Zt.stencil.op&&(Zt.stencil.opBack=Zt.stencil.opFront=Zt.stencil.op,delete Zt.stencil.op),Rt("blend"),Rt("depth"),Rt("cull"),Rt("stencil"),Rt("polygonOffset"),Rt("scissor"),Rt("sample"),"vao"in Ct&&(Zt.vao=Ct.vao),Zt}(Yt),!1);var Nn={gpuTime:0,cpuTime:0,count:0},Bn=yn.compile(Yt,En,dn,Sn,Nn),$n=Bn.draw,lr=Bn.batch,Gt=Bn.scope,gn=[];return X(function(Ct,Rt){var Zt;if(typeof Ct=="function")return Gt.call(this,null,Ct,0);if(typeof Rt=="function")if(typeof Ct=="number")for(Zt=0;Zt<Ct;++Zt)Gt.call(this,null,Rt,Zt);else{if(!Array.isArray(Ct))return Gt.call(this,Ct,Rt,0);for(Zt=0;Zt<Ct.length;++Zt)Gt.call(this,Ct[Zt],Rt,Zt)}else if(typeof Ct=="number"){if(0<Ct)return lr.call(this,function(cn){for(;gn.length<cn;)gn.push(null);return gn}(0|Ct),0|Ct)}else{if(!Array.isArray(Ct))return $n.call(this,Ct);if(Ct.length)return lr.call(this,Ct,Ct.length)}},{stats:Nn,destroy:function(){Bn.destroy()}})}function Re(Yt,$t){var Sn=0;yn.procs.poll();var dn=$t.color;dn&&(mt.clearColor(+dn[0]||0,+dn[1]||0,+dn[2]||0,+dn[3]||0),Sn|=16384),"depth"in $t&&(mt.clearDepth(+$t.depth),Sn|=256),"stencil"in $t&&(mt.clearStencil(0|$t.stencil),Sn|=1024),mt.clear(Sn)}function rt(Yt){return Wn.push(Yt),ot(),{cancel:function(){var $t=Z(Wn,Yt);Wn[$t]=function Sn(){var dn=Z(Wn,Sn);Wn[dn]=Wn[Wn.length-1],--Wn.length,0>=Wn.length&&it()}}}}function ct(){var Yt=Mn.viewport,$t=Mn.scissor_box;Yt[0]=Yt[1]=$t[0]=$t[1]=0,xn.viewportWidth=xn.framebufferWidth=xn.drawingBufferWidth=Yt[2]=$t[2]=mt.drawingBufferWidth,xn.viewportHeight=xn.framebufferHeight=xn.drawingBufferHeight=Yt[3]=$t[3]=mt.drawingBufferHeight}function ut(){xn.tick+=1,xn.time=xt(),ct(),yn.procs.poll()}function et(){wn.refresh(),ct(),yn.procs.refresh(),an&&an.update()}function xt(){return(ce()-rn)/1e3}if(!(Be=T(Be)))return null;var mt=Be.gl,Tt=mt.getContextAttributes();mt.isContextLost();var yt=function(Yt,$t){function Sn(Bn){var $n;Bn=Bn.toLowerCase();try{$n=dn[Bn]=Yt.getExtension(Bn)}catch{}return!!$n}for(var dn={},En=0;En<$t.extensions.length;++En){var Nn=$t.extensions[En];if(!Sn(Nn))return $t.onDestroy(),$t.onDone('"'+Nn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return $t.optionalExtensions.forEach(Sn),{extensions:dn,restore:function(){Object.keys(dn).forEach(function(Bn){if(dn[Bn]&&!Sn(Bn))throw Error("(regl): error restoring extension "+Bn)})}}}(mt,Be);if(!yt)return null;var bt=function(){var Yt={"":0},$t=[""];return{id:function(Sn){var dn=Yt[Sn];return dn||(dn=Yt[Sn]=$t.length,$t.push(Sn),dn)},str:function(Sn){return $t[Sn]}}}(),zt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Ut=Be.cachedCode||{},en=yt.extensions,an=function(Yt,$t){function Sn(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function dn(gn,Ct,Rt){var Zt=Bn.pop()||new Sn;Zt.startQueryIndex=gn,Zt.endQueryIndex=Ct,Zt.sum=0,Zt.stats=Rt,$n.push(Zt)}if(!$t.ext_disjoint_timer_query)return null;var En=[],Nn=[],Bn=[],$n=[],lr=[],Gt=[];return{beginQuery:function(gn){var Ct=En.pop()||$t.ext_disjoint_timer_query.createQueryEXT();$t.ext_disjoint_timer_query.beginQueryEXT(35007,Ct),Nn.push(Ct),dn(Nn.length-1,Nn.length,gn)},endQuery:function(){$t.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:dn,update:function(){var gn,Ct;if((gn=Nn.length)!==0){Gt.length=Math.max(Gt.length,gn+1),lr.length=Math.max(lr.length,gn+1),lr[0]=0;var Rt=Gt[0]=0;for(Ct=gn=0;Ct<Nn.length;++Ct){var Zt=Nn[Ct];$t.ext_disjoint_timer_query.getQueryObjectEXT(Zt,34919)?(Rt+=$t.ext_disjoint_timer_query.getQueryObjectEXT(Zt,34918),En.push(Zt)):Nn[gn++]=Zt,lr[Ct+1]=Rt,Gt[Ct+1]=gn}for(Nn.length=gn,Ct=gn=0;Ct<$n.length;++Ct){var cn=(Rt=$n[Ct]).startQueryIndex;Zt=Rt.endQueryIndex,Rt.sum+=lr[Zt]-lr[cn],cn=Gt[cn],(Zt=Gt[Zt])===cn?(Rt.stats.gpuTime+=Rt.sum/1e6,Bn.push(Rt)):(Rt.startQueryIndex=cn,Rt.endQueryIndex=Zt,$n[gn++]=Rt)}$n.length=gn}},getNumPendingQueries:function(){return Nn.length},clear:function(){En.push.apply(En,Nn);for(var gn=0;gn<En.length;gn++)$t.ext_disjoint_timer_query.deleteQueryEXT(En[gn]);Nn.length=0,En.length=0},restore:function(){Nn.length=0,En.length=0}}}(0,en),rn=ce(),qt=mt.drawingBufferWidth,Kt=mt.drawingBufferHeight,xn={tick:0,time:0,viewportWidth:qt,viewportHeight:Kt,framebufferWidth:qt,framebufferHeight:Kt,drawingBufferWidth:qt,drawingBufferHeight:Kt,pixelRatio:Be.pixelRatio},on=(qt={elements:null,primitive:4,count:-1,offset:0,instances:-1},pe(mt,en)),Xt=u(mt,zt,Be,function(Yt){return Jt.destroyBuffer(Yt)}),ln=h(mt,en,Xt,zt),Jt=C(mt,en,on,zt,Xt,ln,qt),tn=O(mt,bt,zt,Be),wn=S(mt,en,on,function(){yn.procs.poll()},xn,zt,Be),mn=ht(mt,en,0,zt,Be),Cn=w(mt,en,on,wn,mn,zt),yn=Q(mt,bt,en,on,Xt,ln,0,Cn,{},Jt,tn,qt,xn,an,Ut,Be),Mn=(bt=P(mt,Cn,yn.procs.poll,xn),yn.next),zn=mt.canvas,Wn=[],sr=[],Fn=[],Yn=[Be.onDestroy],Xn=null;zn&&(zn.addEventListener("webglcontextlost",dt,!1),zn.addEventListener("webglcontextrestored",gt,!1));var rr=Cn.setFBO=je({framebuffer:ae.define.call(null,1,"framebuffer")});return et(),Tt=X(je,{clear:function(Yt){if("framebuffer"in Yt)if(Yt.framebuffer&&Yt.framebuffer_reglType==="framebufferCube")for(var $t=0;6>$t;++$t)rr(X({framebuffer:Yt.framebuffer.faces[$t]},Yt),Re);else rr(Yt,Re);else Re(0,Yt)},prop:ae.define.bind(null,1),context:ae.define.bind(null,2),this:ae.define.bind(null,3),draw:je({}),buffer:function(Yt){return Xt.create(Yt,34962,!1,!1)},elements:function(Yt){return ln.create(Yt,!1)},texture:wn.create2D,cube:wn.createCube,renderbuffer:mn.create,framebuffer:Cn.create,framebufferCube:Cn.createCube,vao:Jt.createVAO,attributes:Tt,frame:rt,on:function(Yt,$t){var Sn;switch(Yt){case"frame":return rt($t);case"lost":Sn=sr;break;case"restore":Sn=Fn;break;case"destroy":Sn=Yn}return Sn.push($t),{cancel:function(){for(var dn=0;dn<Sn.length;++dn)if(Sn[dn]===$t){Sn[dn]=Sn[Sn.length-1],Sn.pop();break}}}},limits:on,hasExtension:function(Yt){return 0<=on.extensions.indexOf(Yt.toLowerCase())},read:bt,destroy:function(){Wn.length=0,it(),zn&&(zn.removeEventListener("webglcontextlost",dt),zn.removeEventListener("webglcontextrestored",gt)),tn.clear(),Cn.clear(),mn.clear(),Jt.clear(),wn.clear(),ln.clear(),Xt.clear(),an&&an.clear(),Yn.forEach(function(Yt){Yt()})},_gl:mt,_refresh:et,poll:function(){ut(),an&&an.update()},now:xt,stats:zt,getCachedCode:function(){return Ut},preloadCachedCode:function(Yt){Object.entries(Yt).forEach(function($t){Ut[$t[0]]=$t[1]})}}),Be.onDone(null,Tt),Tt}}()},30456:function(ee,R,e){var M=e(33576),k=M.Buffer;function s(b,f){for(var o in b)f[o]=b[o]}function T(b,f,o){return k(b,f,o)}k.from&&k.alloc&&k.allocUnsafe&&k.allocUnsafeSlow?ee.exports=M:(s(M,R),R.Buffer=T),T.prototype=Object.create(k.prototype),s(k,T),T.from=function(b,f,o){if(typeof b=="number")throw new TypeError("Argument must not be a number");return k(b,f,o)},T.alloc=function(b,f,o){if(typeof b!="number")throw new TypeError("Argument must be a number");var t=k(b);return f!==void 0?typeof o=="string"?t.fill(f,o):t.fill(f):t.fill(0),t},T.allocUnsafe=function(b){if(typeof b!="number")throw new TypeError("Argument must be a number");return k(b)},T.allocUnsafeSlow=function(b){if(typeof b!="number")throw new TypeError("Argument must be a number");return M.SlowBuffer(b)}},14500:function(ee,R,e){var M=e(53664),k=e(64348),s=e(39640)(),T=e(2304),b=M("%TypeError%"),f=M("%Math.floor%");ee.exports=function(o,t){if(typeof o!="function")throw new b("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||f(t)!==t)throw new b("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],n=!0,r=!0;if("length"in o&&T){var a=T(o,"length");a&&!a.configurable&&(n=!1),a&&!a.writable&&(r=!1)}return(n||r||!i)&&(s?k(o,"length",t,!0,!0):k(o,"length",t)),o}},29936:function(ee,R,e){ee.exports=k;var M=e(61252).EventEmitter;function k(){M.call(this)}e(6768)(k,M),k.Readable=e(12348),k.Writable=e(11288),k.Duplex=e(15316),k.Transform=e(22477),k.PassThrough=e(27136),k.finished=e(15932),k.pipeline=e(38180),k.Stream=k,k.prototype.pipe=function(s,T){var b=this;function f(l){s.writable&&s.write(l)===!1&&b.pause&&b.pause()}function o(){b.readable&&b.resume&&b.resume()}b.on("data",f),s.on("drain",o),s._isStdio||T&&T.end===!1||(b.on("end",i),b.on("close",n));var t=!1;function i(){t||(t=!0,s.end())}function n(){t||(t=!0,typeof s.destroy=="function"&&s.destroy())}function r(l){if(a(),M.listenerCount(this,"error")===0)throw l}function a(){b.removeListener("data",f),s.removeListener("drain",o),b.removeListener("end",i),b.removeListener("close",n),b.removeListener("error",r),s.removeListener("error",r),b.removeListener("end",a),b.removeListener("close",a),s.removeListener("close",a)}return b.on("error",r),s.on("error",r),b.on("end",a),b.on("close",a),s.on("close",a),s.emit("pipe",b),s}},92784:function(ee){var R={};function e(k,s,T){T||(T=Error);var b=function(f){var o,t;function i(n,r,a){return f.call(this,function(l,u,h){return typeof s=="string"?s:s(l,u,h)}(n,r,a))||this}return t=f,(o=i).prototype=Object.create(t.prototype),o.prototype.constructor=o,o.__proto__=t,i}(T);b.prototype.name=T.name,b.prototype.code=k,R[k]=b}function M(k,s){if(Array.isArray(k)){var T=k.length;return k=k.map(function(b){return String(b)}),T>2?"one of ".concat(s," ").concat(k.slice(0,T-1).join(", "),", or ")+k[T-1]:T===2?"one of ".concat(s," ").concat(k[0]," or ").concat(k[1]):"of ".concat(s," ").concat(k[0])}return"of ".concat(s," ").concat(String(k))}e("ERR_INVALID_OPT_VALUE",function(k,s){return'The value "'+s+'" is invalid for option "'+k+'"'},TypeError),e("ERR_INVALID_ARG_TYPE",function(k,s,T){var b,f,o,t,i;if(typeof s=="string"&&(f="not ",s.substr(0,4)===f)?(b="must not be",s=s.replace(/^not /,"")):b="must be",function(r,a,l){return(l===void 0||l>r.length)&&(l=r.length),r.substring(l-9,l)===a}(k," argument"))o="The ".concat(k," ").concat(b," ").concat(M(s,"type"));else{var n=(typeof i!="number"&&(i=0),i+1>(t=k).length||t.indexOf(".",i)===-1?"argument":"property");o='The "'.concat(k,'" ').concat(n," ").concat(b," ").concat(M(s,"type"))}return o+". Received type ".concat(typeof T)},TypeError),e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),e("ERR_METHOD_NOT_IMPLEMENTED",function(k){return"The "+k+" method is not implemented"}),e("ERR_STREAM_PREMATURE_CLOSE","Premature close"),e("ERR_STREAM_DESTROYED",function(k){return"Cannot call "+k+" after a stream was destroyed"}),e("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),e("ERR_STREAM_WRITE_AFTER_END","write after end"),e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),e("ERR_UNKNOWN_ENCODING",function(k){return"Unknown encoding: "+k},TypeError),e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),ee.exports.i=R},15316:function(ee,R,e){var M=e(4168),k=Object.keys||function(r){var a=[];for(var l in r)a.push(l);return a};ee.exports=t;var s=e(12348),T=e(11288);e(6768)(t,s);for(var b=k(T.prototype),f=0;f<b.length;f++){var o=b[f];t.prototype[o]||(t.prototype[o]=T.prototype[o])}function t(r){if(!(this instanceof t))return new t(r);s.call(this,r),T.call(this,r),this.allowHalfOpen=!0,r&&(r.readable===!1&&(this.readable=!1),r.writable===!1&&(this.writable=!1),r.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",i)))}function i(){this._writableState.ended||M.nextTick(n,this)}function n(r){r.end()}Object.defineProperty(t.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(t.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(t.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(t.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(r){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=r,this._writableState.destroyed=r)}})},27136:function(ee,R,e){ee.exports=k;var M=e(22477);function k(s){if(!(this instanceof k))return new k(s);M.call(this,s)}e(6768)(k,M),k.prototype._transform=function(s,T,b){b(null,s)}},12348:function(ee,R,e){var M,k=e(4168);ee.exports=_,_.ReadableState=m,e(61252).EventEmitter;var s,T=function($,K){return $.listeners(K).length},b=e(4776),f=e(33576).Buffer,o=e.g.Uint8Array||function(){},t=e(19768);s=t&&t.debuglog?t.debuglog("stream"):function(){};var i,n,r,a=e(47264),l=e(55324),u=e(24888).getHighWaterMark,h=e(92784).i,c=h.ERR_INVALID_ARG_TYPE,x=h.ERR_STREAM_PUSH_AFTER_EOF,p=h.ERR_METHOD_NOT_IMPLEMENTED,v=h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e(6768)(_,b);var g=l.errorOrDestroy,y=["error","close","destroy","pause","resume"];function m($,K,Q){M=M||e(15316),$=$||{},typeof Q!="boolean"&&(Q=K instanceof M),this.objectMode=!!$.objectMode,Q&&(this.objectMode=this.objectMode||!!$.readableObjectMode),this.highWaterMark=u(this,$,"readableHighWaterMark",Q),this.buffer=new a,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=$.emitClose!==!1,this.autoDestroy=!!$.autoDestroy,this.destroyed=!1,this.defaultEncoding=$.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,$.encoding&&(i||(i=e(86032).o),this.decoder=new i($.encoding),this.encoding=$.encoding)}function _($){if(M=M||e(15316),!(this instanceof _))return new _($);var K=this instanceof M;this._readableState=new m($,this,K),this.readable=!0,$&&(typeof $.read=="function"&&(this._read=$.read),typeof $.destroy=="function"&&(this._destroy=$.destroy)),b.call(this)}function d($,K,Q,Z,X){s("readableAddChunk",K);var te,ae=$._readableState;if(K===null)ae.reading=!1,function(se,ce){if(s("onEofChunk"),!ce.ended){if(ce.decoder){var fe=ce.decoder.end();fe&&fe.length&&(ce.buffer.push(fe),ce.length+=ce.objectMode?1:fe.length)}ce.ended=!0,ce.sync?C(se):(ce.needReadable=!1,ce.emittedReadable||(ce.emittedReadable=!0,O(se)))}}($,ae);else if(X||(te=function(se,ce){var fe,pe;return pe=ce,f.isBuffer(pe)||pe instanceof o||typeof ce=="string"||ce===void 0||se.objectMode||(fe=new c("chunk",["string","Buffer","Uint8Array"],ce)),fe}(ae,K)),te)g($,te);else if(ae.objectMode||K&&K.length>0)if(typeof K=="string"||ae.objectMode||Object.getPrototypeOf(K)===f.prototype||(K=function(se){return f.from(se)}(K)),Z)ae.endEmitted?g($,new v):S($,ae,K,!0);else if(ae.ended)g($,new x);else{if(ae.destroyed)return!1;ae.reading=!1,ae.decoder&&!Q?(K=ae.decoder.write(K),ae.objectMode||K.length!==0?S($,ae,K,!1):P($,ae)):S($,ae,K,!1)}else Z||(ae.reading=!1,P($,ae));return!ae.ended&&(ae.length<ae.highWaterMark||ae.length===0)}function S($,K,Q,Z){K.flowing&&K.length===0&&!K.sync?(K.awaitDrain=0,$.emit("data",Q)):(K.length+=K.objectMode?1:Q.length,Z?K.buffer.unshift(Q):K.buffer.push(Q),K.needReadable&&C($)),P($,K)}Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function($){this._readableState&&(this._readableState.destroyed=$)}}),_.prototype.destroy=l.destroy,_.prototype._undestroy=l.undestroy,_.prototype._destroy=function($,K){K($)},_.prototype.push=function($,K){var Q,Z=this._readableState;return Z.objectMode?Q=!0:typeof $=="string"&&((K=K||Z.defaultEncoding)!==Z.encoding&&($=f.from($,K),K=""),Q=!0),d(this,$,K,!1,Q)},_.prototype.unshift=function($){return d(this,$,null,!0,!1)},_.prototype.isPaused=function(){return this._readableState.flowing===!1},_.prototype.setEncoding=function($){i||(i=e(86032).o);var K=new i($);this._readableState.decoder=K,this._readableState.encoding=this._readableState.decoder.encoding;for(var Q=this._readableState.buffer.head,Z="";Q!==null;)Z+=K.write(Q.data),Q=Q.next;return this._readableState.buffer.clear(),Z!==""&&this._readableState.buffer.push(Z),this._readableState.length=Z.length,this};var w=1073741824;function E($,K){return $<=0||K.length===0&&K.ended?0:K.objectMode?1:$!=$?K.flowing&&K.length?K.buffer.head.data.length:K.length:($>K.highWaterMark&&(K.highWaterMark=function(Q){return Q>=w?Q=w:(Q--,Q|=Q>>>1,Q|=Q>>>2,Q|=Q>>>4,Q|=Q>>>8,Q|=Q>>>16,Q++),Q}($)),$<=K.length?$:K.ended?K.length:(K.needReadable=!0,0))}function C($){var K=$._readableState;s("emitReadable",K.needReadable,K.emittedReadable),K.needReadable=!1,K.emittedReadable||(s("emitReadable",K.flowing),K.emittedReadable=!0,k.nextTick(O,$))}function O($){var K=$._readableState;s("emitReadable_",K.destroyed,K.length,K.ended),K.destroyed||!K.length&&!K.ended||($.emit("readable"),K.emittedReadable=!1),K.needReadable=!K.flowing&&!K.ended&&K.length<=K.highWaterMark,W($)}function P($,K){K.readingMore||(K.readingMore=!0,k.nextTick(z,$,K))}function z($,K){for(;!K.reading&&!K.ended&&(K.length<K.highWaterMark||K.flowing&&K.length===0);){var Q=K.length;if(s("maybeReadMore read 0"),$.read(0),Q===K.length)break}K.readingMore=!1}function j($){var K=$._readableState;K.readableListening=$.listenerCount("readable")>0,K.resumeScheduled&&!K.paused?K.flowing=!0:$.listenerCount("data")>0&&$.resume()}function I($){s("readable nexttick read 0"),$.read(0)}function N($,K){s("resume",K.reading),K.reading||$.read(0),K.resumeScheduled=!1,$.emit("resume"),W($),K.flowing&&!K.reading&&$.read(0)}function W($){var K=$._readableState;for(s("flow",K.flowing);K.flowing&&$.read()!==null;);}function F($,K){return K.length===0?null:(K.objectMode?Q=K.buffer.shift():!$||$>=K.length?(Q=K.decoder?K.buffer.join(""):K.buffer.length===1?K.buffer.first():K.buffer.concat(K.length),K.buffer.clear()):Q=K.buffer.consume($,K.decoder),Q);var Q}function U($){var K=$._readableState;s("endReadable",K.endEmitted),K.endEmitted||(K.ended=!0,k.nextTick(H,K,$))}function H($,K){if(s("endReadableNT",$.endEmitted,$.length),!$.endEmitted&&$.length===0&&($.endEmitted=!0,K.readable=!1,K.emit("end"),$.autoDestroy)){var Q=K._writableState;(!Q||Q.autoDestroy&&Q.finished)&&K.destroy()}}function ne($,K){for(var Q=0,Z=$.length;Q<Z;Q++)if($[Q]===K)return Q;return-1}_.prototype.read=function($){s("read",$),$=parseInt($,10);var K=this._readableState,Q=$;if($!==0&&(K.emittedReadable=!1),$===0&&K.needReadable&&((K.highWaterMark!==0?K.length>=K.highWaterMark:K.length>0)||K.ended))return s("read: emitReadable",K.length,K.ended),K.length===0&&K.ended?U(this):C(this),null;if(($=E($,K))===0&&K.ended)return K.length===0&&U(this),null;var Z,X=K.needReadable;return s("need readable",X),(K.length===0||K.length-$<K.highWaterMark)&&s("length less than watermark",X=!0),K.ended||K.reading?s("reading or ended",X=!1):X&&(s("do read"),K.reading=!0,K.sync=!0,K.length===0&&(K.needReadable=!0),this._read(K.highWaterMark),K.sync=!1,K.reading||($=E(Q,K))),(Z=$>0?F($,K):null)===null?(K.needReadable=K.length<=K.highWaterMark,$=0):(K.length-=$,K.awaitDrain=0),K.length===0&&(K.ended||(K.needReadable=!0),Q!==$&&K.ended&&U(this)),Z!==null&&this.emit("data",Z),Z},_.prototype._read=function($){g(this,new p("_read()"))},_.prototype.pipe=function($,K){var Q=this,Z=this._readableState;switch(Z.pipesCount){case 0:Z.pipes=$;break;case 1:Z.pipes=[Z.pipes,$];break;default:Z.pipes.push($)}Z.pipesCount+=1,s("pipe count=%d opts=%j",Z.pipesCount,K);var X=K&&K.end===!1||$===k.stdout||$===k.stderr?me:te;function te(){s("onend"),$.end()}Z.endEmitted?k.nextTick(X):Q.once("end",X),$.on("unpipe",function be(ke,ze){s("onunpipe"),ke===Q&&ze&&ze.hasUnpiped===!1&&(ze.hasUnpiped=!0,s("cleanup"),$.removeListener("close",pe),$.removeListener("finish",ge),$.removeListener("drain",ae),$.removeListener("error",fe),$.removeListener("unpipe",be),Q.removeListener("end",te),Q.removeListener("end",me),Q.removeListener("data",ce),se=!0,!Z.awaitDrain||$._writableState&&!$._writableState.needDrain||ae())});var ae=function(be){return function(){var ke=be._readableState;s("pipeOnDrain",ke.awaitDrain),ke.awaitDrain&&ke.awaitDrain--,ke.awaitDrain===0&&T(be,"data")&&(ke.flowing=!0,W(be))}}(Q);$.on("drain",ae);var se=!1;function ce(be){s("ondata");var ke=$.write(be);s("dest.write",ke),ke===!1&&((Z.pipesCount===1&&Z.pipes===$||Z.pipesCount>1&&ne(Z.pipes,$)!==-1)&&!se&&(s("false write response, pause",Z.awaitDrain),Z.awaitDrain++),Q.pause())}function fe(be){s("onerror",be),me(),$.removeListener("error",fe),T($,"error")===0&&g($,be)}function pe(){$.removeListener("finish",ge),me()}function ge(){s("onfinish"),$.removeListener("close",pe),me()}function me(){s("unpipe"),Q.unpipe($)}return Q.on("data",ce),function(be,ke,ze){if(typeof be.prependListener=="function")return be.prependListener(ke,ze);be._events&&be._events[ke]?Array.isArray(be._events[ke])?be._events[ke].unshift(ze):be._events[ke]=[ze,be._events[ke]]:be.on(ke,ze)}($,"error",fe),$.once("close",pe),$.once("finish",ge),$.emit("pipe",Q),Z.flowing||(s("pipe resume"),Q.resume()),$},_.prototype.unpipe=function($){var K=this._readableState,Q={hasUnpiped:!1};if(K.pipesCount===0)return this;if(K.pipesCount===1)return $&&$!==K.pipes||($||($=K.pipes),K.pipes=null,K.pipesCount=0,K.flowing=!1,$&&$.emit("unpipe",this,Q)),this;if(!$){var Z=K.pipes,X=K.pipesCount;K.pipes=null,K.pipesCount=0,K.flowing=!1;for(var te=0;te<X;te++)Z[te].emit("unpipe",this,{hasUnpiped:!1});return this}var ae=ne(K.pipes,$);return ae===-1||(K.pipes.splice(ae,1),K.pipesCount-=1,K.pipesCount===1&&(K.pipes=K.pipes[0]),$.emit("unpipe",this,Q)),this},_.prototype.on=function($,K){var Q=b.prototype.on.call(this,$,K),Z=this._readableState;return $==="data"?(Z.readableListening=this.listenerCount("readable")>0,Z.flowing!==!1&&this.resume()):$==="readable"&&(Z.endEmitted||Z.readableListening||(Z.readableListening=Z.needReadable=!0,Z.flowing=!1,Z.emittedReadable=!1,s("on readable",Z.length,Z.reading),Z.length?C(this):Z.reading||k.nextTick(I,this))),Q},_.prototype.addListener=_.prototype.on,_.prototype.removeListener=function($,K){var Q=b.prototype.removeListener.call(this,$,K);return $==="readable"&&k.nextTick(j,this),Q},_.prototype.removeAllListeners=function($){var K=b.prototype.removeAllListeners.apply(this,arguments);return $!=="readable"&&$!==void 0||k.nextTick(j,this),K},_.prototype.resume=function(){var $=this._readableState;return $.flowing||(s("resume"),$.flowing=!$.readableListening,function(K,Q){Q.resumeScheduled||(Q.resumeScheduled=!0,k.nextTick(N,K,Q))}(this,$)),$.paused=!1,this},_.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},_.prototype.wrap=function($){var K=this,Q=this._readableState,Z=!1;for(var X in $.on("end",function(){if(s("wrapped end"),Q.decoder&&!Q.ended){var ae=Q.decoder.end();ae&&ae.length&&K.push(ae)}K.push(null)}),$.on("data",function(ae){s("wrapped data"),Q.decoder&&(ae=Q.decoder.write(ae)),Q.objectMode&&ae==null||(Q.objectMode||ae&&ae.length)&&(K.push(ae)||(Z=!0,$.pause()))}),$)this[X]===void 0&&typeof $[X]=="function"&&(this[X]=function(ae){return function(){return $[ae].apply($,arguments)}}(X));for(var te=0;te<y.length;te++)$.on(y[te],this.emit.bind(this,y[te]));return this._read=function(ae){s("wrapped _read",ae),Z&&(Z=!1,$.resume())},this},typeof Symbol=="function"&&(_.prototype[Symbol.asyncIterator]=function(){return n===void 0&&(n=e(60328)),n(this)}),Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(_.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(_.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function($){this._readableState&&(this._readableState.flowing=$)}}),_._fromList=F,Object.defineProperty(_.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(_.from=function($,K){return r===void 0&&(r=e(90555)),r(_,$,K)})},22477:function(ee,R,e){ee.exports=t;var M=e(92784).i,k=M.ERR_METHOD_NOT_IMPLEMENTED,s=M.ERR_MULTIPLE_CALLBACK,T=M.ERR_TRANSFORM_ALREADY_TRANSFORMING,b=M.ERR_TRANSFORM_WITH_LENGTH_0,f=e(15316);function o(r,a){var l=this._transformState;l.transforming=!1;var u=l.writecb;if(u===null)return this.emit("error",new s);l.writechunk=null,l.writecb=null,a!=null&&this.push(a),u(r);var h=this._readableState;h.reading=!1,(h.needReadable||h.length<h.highWaterMark)&&this._read(h.highWaterMark)}function t(r){if(!(this instanceof t))return new t(r);f.call(this,r),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&(typeof r.transform=="function"&&(this._transform=r.transform),typeof r.flush=="function"&&(this._flush=r.flush)),this.on("prefinish",i)}function i(){var r=this;typeof this._flush!="function"||this._readableState.destroyed?n(this,null,null):this._flush(function(a,l){n(r,a,l)})}function n(r,a,l){if(a)return r.emit("error",a);if(l!=null&&r.push(l),r._writableState.length)throw new b;if(r._transformState.transforming)throw new T;return r.push(null)}e(6768)(t,f),t.prototype.push=function(r,a){return this._transformState.needTransform=!1,f.prototype.push.call(this,r,a)},t.prototype._transform=function(r,a,l){l(new k("_transform()"))},t.prototype._write=function(r,a,l){var u=this._transformState;if(u.writecb=l,u.writechunk=r,u.writeencoding=a,!u.transforming){var h=this._readableState;(u.needTransform||h.needReadable||h.length<h.highWaterMark)&&this._read(h.highWaterMark)}},t.prototype._read=function(r){var a=this._transformState;a.writechunk===null||a.transforming?a.needTransform=!0:(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform))},t.prototype._destroy=function(r,a){f.prototype._destroy.call(this,r,function(l){a(l)})}},11288:function(ee,R,e){var M,k=e(4168);function s(P){var z=this;this.next=null,this.entry=null,this.finish=function(){(function(j,I,N){var W=j.entry;for(j.entry=null;W;){var F=W.callback;I.pendingcb--,F(void 0),W=W.next}I.corkedRequestsFree.next=j})(z,P)}}ee.exports=_,_.WritableState=m;var T,b={deprecate:e(96656)},f=e(4776),o=e(33576).Buffer,t=e.g.Uint8Array||function(){},i=e(55324),n=e(24888).getHighWaterMark,r=e(92784).i,a=r.ERR_INVALID_ARG_TYPE,l=r.ERR_METHOD_NOT_IMPLEMENTED,u=r.ERR_MULTIPLE_CALLBACK,h=r.ERR_STREAM_CANNOT_PIPE,c=r.ERR_STREAM_DESTROYED,x=r.ERR_STREAM_NULL_VALUES,p=r.ERR_STREAM_WRITE_AFTER_END,v=r.ERR_UNKNOWN_ENCODING,g=i.errorOrDestroy;function y(){}function m(P,z,j){M=M||e(15316),P=P||{},typeof j!="boolean"&&(j=z instanceof M),this.objectMode=!!P.objectMode,j&&(this.objectMode=this.objectMode||!!P.writableObjectMode),this.highWaterMark=n(this,P,"writableHighWaterMark",j),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var I=P.decodeStrings===!1;this.decodeStrings=!I,this.defaultEncoding=P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(N){(function(W,F){var U=W._writableState,H=U.sync,ne=U.writecb;if(typeof ne!="function")throw new u;if(function(K){K.writing=!1,K.writecb=null,K.length-=K.writelen,K.writelen=0}(U),F)(function(K,Q,Z,X,te){--Q.pendingcb,Z?(k.nextTick(te,X),k.nextTick(O,K,Q),K._writableState.errorEmitted=!0,g(K,X)):(te(X),K._writableState.errorEmitted=!0,g(K,X),O(K,Q))})(W,U,H,F,ne);else{var $=E(U)||W.destroyed;$||U.corked||U.bufferProcessing||!U.bufferedRequest||w(W,U),H?k.nextTick(S,W,U,$,ne):S(W,U,$,ne)}})(z,N)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=P.emitClose!==!1,this.autoDestroy=!!P.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function _(P){var z=this instanceof(M=M||e(15316));if(!z&&!T.call(_,this))return new _(P);this._writableState=new m(P,this,z),this.writable=!0,P&&(typeof P.write=="function"&&(this._write=P.write),typeof P.writev=="function"&&(this._writev=P.writev),typeof P.destroy=="function"&&(this._destroy=P.destroy),typeof P.final=="function"&&(this._final=P.final)),f.call(this)}function d(P,z,j,I,N,W,F){z.writelen=I,z.writecb=F,z.writing=!0,z.sync=!0,z.destroyed?z.onwrite(new c("write")):j?P._writev(N,z.onwrite):P._write(N,W,z.onwrite),z.sync=!1}function S(P,z,j,I){j||function(N,W){W.length===0&&W.needDrain&&(W.needDrain=!1,N.emit("drain"))}(P,z),z.pendingcb--,I(),O(P,z)}function w(P,z){z.bufferProcessing=!0;var j=z.bufferedRequest;if(P._writev&&j&&j.next){var I=z.bufferedRequestCount,N=new Array(I),W=z.corkedRequestsFree;W.entry=j;for(var F=0,U=!0;j;)N[F]=j,j.isBuf||(U=!1),j=j.next,F+=1;N.allBuffers=U,d(P,z,!0,z.length,N,"",W.finish),z.pendingcb++,z.lastBufferedRequest=null,W.next?(z.corkedRequestsFree=W.next,W.next=null):z.corkedRequestsFree=new s(z),z.bufferedRequestCount=0}else{for(;j;){var H=j.chunk,ne=j.encoding,$=j.callback;if(d(P,z,!1,z.objectMode?1:H.length,H,ne,$),j=j.next,z.bufferedRequestCount--,z.writing)break}j===null&&(z.lastBufferedRequest=null)}z.bufferedRequest=j,z.bufferProcessing=!1}function E(P){return P.ending&&P.length===0&&P.bufferedRequest===null&&!P.finished&&!P.writing}function C(P,z){P._final(function(j){z.pendingcb--,j&&g(P,j),z.prefinished=!0,P.emit("prefinish"),O(P,z)})}function O(P,z){var j=E(z);if(j&&(function(N,W){W.prefinished||W.finalCalled||(typeof N._final!="function"||W.destroyed?(W.prefinished=!0,N.emit("prefinish")):(W.pendingcb++,W.finalCalled=!0,k.nextTick(C,N,W)))}(P,z),z.pendingcb===0&&(z.finished=!0,P.emit("finish"),z.autoDestroy))){var I=P._readableState;(!I||I.autoDestroy&&I.endEmitted)&&P.destroy()}return j}e(6768)(_,f),m.prototype.getBuffer=function(){for(var P=this.bufferedRequest,z=[];P;)z.push(P),P=P.next;return z},function(){try{Object.defineProperty(m.prototype,"buffer",{get:b.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(T=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(P){return!!T.call(this,P)||this===_&&P&&P._writableState instanceof m}})):T=function(P){return P instanceof this},_.prototype.pipe=function(){g(this,new h)},_.prototype.write=function(P,z,j){var I,N=this._writableState,W=!1,F=!N.objectMode&&(I=P,o.isBuffer(I)||I instanceof t);return F&&!o.isBuffer(P)&&(P=function(U){return o.from(U)}(P)),typeof z=="function"&&(j=z,z=null),F?z="buffer":z||(z=N.defaultEncoding),typeof j!="function"&&(j=y),N.ending?function(U,H){var ne=new p;g(U,ne),k.nextTick(H,ne)}(this,j):(F||function(U,H,ne,$){var K;return ne===null?K=new x:typeof ne=="string"||H.objectMode||(K=new a("chunk",["string","Buffer"],ne)),!K||(g(U,K),k.nextTick($,K),!1)}(this,N,P,j))&&(N.pendingcb++,W=function(U,H,ne,$,K,Q){if(!ne){var Z=function(se,ce,fe){return se.objectMode||se.decodeStrings===!1||typeof ce!="string"||(ce=o.from(ce,fe)),ce}(H,$,K);$!==Z&&(ne=!0,K="buffer",$=Z)}var X=H.objectMode?1:$.length;H.length+=X;var te=H.length<H.highWaterMark;if(te||(H.needDrain=!0),H.writing||H.corked){var ae=H.lastBufferedRequest;H.lastBufferedRequest={chunk:$,encoding:K,isBuf:ne,callback:Q,next:null},ae?ae.next=H.lastBufferedRequest:H.bufferedRequest=H.lastBufferedRequest,H.bufferedRequestCount+=1}else d(U,H,!1,X,$,K,Q);return te}(this,N,F,P,z,j)),W},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var P=this._writableState;P.corked&&(P.corked--,P.writing||P.corked||P.bufferProcessing||!P.bufferedRequest||w(this,P))},_.prototype.setDefaultEncoding=function(P){if(typeof P=="string"&&(P=P.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((P+"").toLowerCase())>-1))throw new v(P);return this._writableState.defaultEncoding=P,this},Object.defineProperty(_.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(P,z,j){j(new l("_write()"))},_.prototype._writev=null,_.prototype.end=function(P,z,j){var I=this._writableState;return typeof P=="function"?(j=P,P=null,z=null):typeof z=="function"&&(j=z,z=null),P!=null&&this.write(P,z),I.corked&&(I.corked=1,this.uncork()),I.ending||function(N,W,F){W.ending=!0,O(N,W),F&&(W.finished?k.nextTick(F):N.once("finish",F)),W.ended=!0,N.writable=!1}(this,I,j),this},Object.defineProperty(_.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(P){this._writableState&&(this._writableState.destroyed=P)}}),_.prototype.destroy=i.destroy,_.prototype._undestroy=i.undestroy,_.prototype._destroy=function(P,z){z(P)}},60328:function(ee,R,e){var M,k=e(4168);function s(x,p,v){return p in x?Object.defineProperty(x,p,{value:v,enumerable:!0,configurable:!0,writable:!0}):x[p]=v,x}var T=e(15932),b=Symbol("lastResolve"),f=Symbol("lastReject"),o=Symbol("error"),t=Symbol("ended"),i=Symbol("lastPromise"),n=Symbol("handlePromise"),r=Symbol("stream");function a(x,p){return{value:x,done:p}}function l(x){var p=x[b];if(p!==null){var v=x[r].read();v!==null&&(x[i]=null,x[b]=null,x[f]=null,p(a(v,!1)))}}function u(x){k.nextTick(l,x)}var h=Object.getPrototypeOf(function(){}),c=Object.setPrototypeOf((s(M={get stream(){return this[r]},next:function(){var x=this,p=this[o];if(p!==null)return Promise.reject(p);if(this[t])return Promise.resolve(a(void 0,!0));if(this[r].destroyed)return new Promise(function(m,_){k.nextTick(function(){x[o]?_(x[o]):m(a(void 0,!0))})});var v,g=this[i];if(g)v=new Promise(function(m,_){return function(d,S){m.then(function(){_[t]?d(a(void 0,!0)):_[n](d,S)},S)}}(g,this));else{var y=this[r].read();if(y!==null)return Promise.resolve(a(y,!1));v=new Promise(this[n])}return this[i]=v,v}},Symbol.asyncIterator,function(){return this}),s(M,"return",function(){var x=this;return new Promise(function(p,v){x[r].destroy(null,function(g){g?v(g):p(a(void 0,!0))})})}),M),h);ee.exports=function(x){var p,v=Object.create(c,(s(p={},r,{value:x,writable:!0}),s(p,b,{value:null,writable:!0}),s(p,f,{value:null,writable:!0}),s(p,o,{value:null,writable:!0}),s(p,t,{value:x._readableState.endEmitted,writable:!0}),s(p,n,{value:function(g,y){var m=v[r].read();m?(v[i]=null,v[b]=null,v[f]=null,g(a(m,!1))):(v[b]=g,v[f]=y)},writable:!0}),p));return v[i]=null,T(x,function(g){if(g&&g.code!=="ERR_STREAM_PREMATURE_CLOSE"){var y=v[f];return y!==null&&(v[i]=null,v[b]=null,v[f]=null,y(g)),void(v[o]=g)}var m=v[b];m!==null&&(v[i]=null,v[b]=null,v[f]=null,m(a(void 0,!0))),v[t]=!0}),x.on("readable",u.bind(null,v)),v}},47264:function(ee,R,e){function M(o,t){var i=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable})),i.push.apply(i,n)}return i}function k(o,t,i){return t in o?Object.defineProperty(o,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[t]=i,o}function s(o,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(o,n.key,n)}}var T=e(33576).Buffer,b=e(21576).inspect,f=b&&b.custom||"inspect";ee.exports=function(){function o(){(function(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")})(this,o),this.head=null,this.tail=null,this.length=0}var t,i;return t=o,i=[{key:"push",value:function(n){var r={data:n,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}},{key:"unshift",value:function(n){var r={data:n,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}},{key:"shift",value:function(){if(this.length!==0){var n=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,n}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(n){if(this.length===0)return"";for(var r=this.head,a=""+r.data;r=r.next;)a+=n+r.data;return a}},{key:"concat",value:function(n){if(this.length===0)return T.alloc(0);for(var r,a,l,u=T.allocUnsafe(n>>>0),h=this.head,c=0;h;)r=h.data,a=u,l=c,T.prototype.copy.call(r,a,l),c+=h.data.length,h=h.next;return u}},{key:"consume",value:function(n,r){var a;return n<this.head.data.length?(a=this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):a=n===this.head.data.length?this.shift():r?this._getString(n):this._getBuffer(n),a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(n){var r=this.head,a=1,l=r.data;for(n-=l.length;r=r.next;){var u=r.data,h=n>u.length?u.length:n;if(h===u.length?l+=u:l+=u.slice(0,n),(n-=h)==0){h===u.length?(++a,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=u.slice(h));break}++a}return this.length-=a,l}},{key:"_getBuffer",value:function(n){var r=T.allocUnsafe(n),a=this.head,l=1;for(a.data.copy(r),n-=a.data.length;a=a.next;){var u=a.data,h=n>u.length?u.length:n;if(u.copy(r,r.length-n,0,h),(n-=h)==0){h===u.length?(++l,a.next?this.head=a.next:this.head=this.tail=null):(this.head=a,a.data=u.slice(h));break}++l}return this.length-=l,r}},{key:f,value:function(n,r){return b(this,function(a){for(var l=1;l<arguments.length;l++){var u=arguments[l]!=null?arguments[l]:{};l%2?M(Object(u),!0).forEach(function(h){k(a,h,u[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(u)):M(Object(u)).forEach(function(h){Object.defineProperty(a,h,Object.getOwnPropertyDescriptor(u,h))})}return a}({},r,{depth:0,customInspect:!1}))}}],i&&s(t.prototype,i),o}()},55324:function(ee,R,e){var M=e(4168);function k(b,f){T(b,f),s(b)}function s(b){b._writableState&&!b._writableState.emitClose||b._readableState&&!b._readableState.emitClose||b.emit("close")}function T(b,f){b.emit("error",f)}ee.exports={destroy:function(b,f){var o=this,t=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return t||i?(f?f(b):b&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,M.nextTick(T,this,b)):M.nextTick(T,this,b)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(b||null,function(n){!f&&n?o._writableState?o._writableState.errorEmitted?M.nextTick(s,o):(o._writableState.errorEmitted=!0,M.nextTick(k,o,n)):M.nextTick(k,o,n):f?(M.nextTick(s,o),f(n)):M.nextTick(s,o)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(b,f){var o=b._readableState,t=b._writableState;o&&o.autoDestroy||t&&t.autoDestroy?b.destroy(f):b.emit("error",f)}}},15932:function(ee,R,e){var M=e(92784).i.ERR_STREAM_PREMATURE_CLOSE;function k(){}ee.exports=function s(T,b,f){if(typeof b=="function")return s(T,null,b);b||(b={}),f=function(x){var p=!1;return function(){if(!p){p=!0;for(var v=arguments.length,g=new Array(v),y=0;y<v;y++)g[y]=arguments[y];x.apply(this,g)}}}(f||k);var o=b.readable||b.readable!==!1&&T.readable,t=b.writable||b.writable!==!1&&T.writable,i=function(){T.writable||r()},n=T._writableState&&T._writableState.finished,r=function(){t=!1,n=!0,o||f.call(T)},a=T._readableState&&T._readableState.endEmitted,l=function(){o=!1,a=!0,t||f.call(T)},u=function(x){f.call(T,x)},h=function(){var x;return o&&!a?(T._readableState&&T._readableState.ended||(x=new M),f.call(T,x)):t&&!n?(T._writableState&&T._writableState.ended||(x=new M),f.call(T,x)):void 0},c=function(){T.req.on("finish",r)};return function(x){return x.setHeader&&typeof x.abort=="function"}(T)?(T.on("complete",r),T.on("abort",h),T.req?c():T.on("request",c)):t&&!T._writableState&&(T.on("end",i),T.on("close",i)),T.on("end",l),T.on("finish",r),b.error!==!1&&T.on("error",u),T.on("close",h),function(){T.removeListener("complete",r),T.removeListener("abort",h),T.removeListener("request",c),T.req&&T.req.removeListener("finish",r),T.removeListener("end",i),T.removeListener("close",i),T.removeListener("finish",r),T.removeListener("end",l),T.removeListener("error",u),T.removeListener("close",h)}}},90555:function(ee){ee.exports=function(){throw new Error("Readable.from is not available in the browser")}},38180:function(ee,R,e){var M,k=e(92784).i,s=k.ERR_MISSING_ARGS,T=k.ERR_STREAM_DESTROYED;function b(t){if(t)throw t}function f(t){t()}function o(t,i){return t.pipe(i)}ee.exports=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var r,a=function(u){return u.length?typeof u[u.length-1]!="function"?b:u.pop():b}(i);if(Array.isArray(i[0])&&(i=i[0]),i.length<2)throw new s("streams");var l=i.map(function(u,h){var c=h<i.length-1;return function(x,p,v,g){g=function(_){var d=!1;return function(){d||(d=!0,_.apply(void 0,arguments))}}(g);var y=!1;x.on("close",function(){y=!0}),M===void 0&&(M=e(15932)),M(x,{readable:p,writable:v},function(_){if(_)return g(_);y=!0,g()});var m=!1;return function(_){if(!y&&!m)return m=!0,function(d){return d.setHeader&&typeof d.abort=="function"}(x)?x.abort():typeof x.destroy=="function"?x.destroy():void g(_||new T("pipe"))}}(u,c,h>0,function(x){r||(r=x),x&&l.forEach(f),c||(l.forEach(f),a(r))})});return i.reduce(o)}},24888:function(ee,R,e){var M=e(92784).i.ERR_INVALID_OPT_VALUE;ee.exports={getHighWaterMark:function(k,s,T,b){var f=function(o,t,i){return o.highWaterMark!=null?o.highWaterMark:t?o[i]:null}(s,b,T);if(f!=null){if(!isFinite(f)||Math.floor(f)!==f||f<0)throw new M(b?T:"highWaterMark",f);return Math.floor(f)}return k.objectMode?16:16384}}},4776:function(ee,R,e){ee.exports=e(61252).EventEmitter},86032:function(ee,R,e){var M=e(30456).Buffer,k=M.isEncoding||function(a){switch((a=""+a)&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(a){var l;switch(this.encoding=function(u){var h=function(c){if(!c)return"utf8";for(var x;;)switch(c){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return c;default:if(x)return;c=(""+c).toLowerCase(),x=!0}}(u);if(typeof h!="string"&&(M.isEncoding===k||!k(u)))throw new Error("Unknown encoding: "+u);return h||u}(a),this.encoding){case"utf16le":this.text=f,this.end=o,l=4;break;case"utf8":this.fillLast=b,l=4;break;case"base64":this.text=t,this.end=i,l=3;break;default:return this.write=n,void(this.end=r)}this.lastNeed=0,this.lastTotal=0,this.lastChar=M.allocUnsafe(l)}function T(a){return a<=127?0:a>>5==6?2:a>>4==14?3:a>>3==30?4:a>>6==2?-1:-2}function b(a){var l=this.lastTotal-this.lastNeed,u=function(h,c,x){if((192&c[0])!=128)return h.lastNeed=0,"";if(h.lastNeed>1&&c.length>1){if((192&c[1])!=128)return h.lastNeed=1,"";if(h.lastNeed>2&&c.length>2&&(192&c[2])!=128)return h.lastNeed=2,""}}(this,a);return u!==void 0?u:this.lastNeed<=a.length?(a.copy(this.lastChar,l,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(a.copy(this.lastChar,l,0,a.length),void(this.lastNeed-=a.length))}function f(a,l){if((a.length-l)%2==0){var u=a.toString("utf16le",l);if(u){var h=u.charCodeAt(u.length-1);if(h>=55296&&h<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],u.slice(0,-1)}return u}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=a[a.length-1],a.toString("utf16le",l,a.length-1)}function o(a){var l=a&&a.length?this.write(a):"";if(this.lastNeed){var u=this.lastTotal-this.lastNeed;return l+this.lastChar.toString("utf16le",0,u)}return l}function t(a,l){var u=(a.length-l)%3;return u===0?a.toString("base64",l):(this.lastNeed=3-u,this.lastTotal=3,u===1?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]),a.toString("base64",l,a.length-u))}function i(a){var l=a&&a.length?this.write(a):"";return this.lastNeed?l+this.lastChar.toString("base64",0,3-this.lastNeed):l}function n(a){return a.toString(this.encoding)}function r(a){return a&&a.length?this.write(a):""}R.o=s,s.prototype.write=function(a){if(a.length===0)return"";var l,u;if(this.lastNeed){if((l=this.fillLast(a))===void 0)return"";u=this.lastNeed,this.lastNeed=0}else u=0;return u<a.length?l?l+this.text(a,u):this.text(a,u):l||""},s.prototype.end=function(a){var l=a&&a.length?this.write(a):"";return this.lastNeed?l+"":l},s.prototype.text=function(a,l){var u=function(c,x,p){var v=x.length-1;if(v<p)return 0;var g=T(x[v]);return g>=0?(g>0&&(c.lastNeed=g-1),g):--v<p||g===-2?0:(g=T(x[v]))>=0?(g>0&&(c.lastNeed=g-2),g):--v<p||g===-2?0:(g=T(x[v]))>=0?(g>0&&(g===2?g=0:c.lastNeed=g-3),g):0}(this,a,l);if(!this.lastNeed)return a.toString("utf8",l);this.lastTotal=u;var h=a.length-(u-this.lastNeed);return a.copy(this.lastChar,0,h),a.toString("utf8",l,h)},s.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length),this.lastNeed-=a.length}},55619:function(ee,R,e){var M=e(45408),k=e(86844)("stream-parser");ee.exports=function(c){var x=c&&typeof c._transform=="function",p=c&&typeof c._write=="function";if(!x&&!p)throw new Error("must pass a Writable or Transform stream in");k("extending Parser into stream"),c._bytes=t,c._skipBytes=i,x&&(c._passthrough=n),x?c._transform=a:c._write=r};var s=-1,T=0,b=1,f=2;function o(c){k("initializing parser stream"),c._parserBytesLeft=0,c._parserBuffers=[],c._parserBuffered=0,c._parserState=s,c._parserCallback=null,typeof c.push=="function"&&(c._parserOutput=c.push.bind(c)),c._parserInit=!0}function t(c,x){M(!this._parserCallback,'there is already a "callback" set!'),M(isFinite(c)&&c>0,'can only buffer a finite number of bytes > 0, got "'+c+'"'),this._parserInit||o(this),k("buffering %o bytes",c),this._parserBytesLeft=c,this._parserCallback=x,this._parserState=T}function i(c,x){M(!this._parserCallback,'there is already a "callback" set!'),M(c>0,'can only skip > 0 bytes, got "'+c+'"'),this._parserInit||o(this),k("skipping %o bytes",c),this._parserBytesLeft=c,this._parserCallback=x,this._parserState=b}function n(c,x){M(!this._parserCallback,'There is already a "callback" set!'),M(c>0,'can only pass through > 0 bytes, got "'+c+'"'),this._parserInit||o(this),k("passing through %o bytes",c),this._parserBytesLeft=c,this._parserCallback=x,this._parserState=f}function r(c,x,p){this._parserInit||o(this),k("write(%o bytes)",c.length),typeof x=="function"&&(p=x),u(this,c,null,p)}function a(c,x,p){this._parserInit||o(this),k("transform(%o bytes)",c.length),typeof x!="function"&&(x=this._parserOutput),u(this,c,x,p)}function l(c,x,p,v){if(c._parserBytesLeft-=x.length,k("%o bytes left for stream piece",c._parserBytesLeft),c._parserState===T?(c._parserBuffers.push(x),c._parserBuffered+=x.length):c._parserState===f&&p(x),c._parserBytesLeft!==0)return v;var g=c._parserCallback;if(g&&c._parserState===T&&c._parserBuffers.length>1&&(x=Buffer.concat(c._parserBuffers,c._parserBuffered)),c._parserState!==T&&(x=null),c._parserCallback=null,c._parserBuffered=0,c._parserState=s,c._parserBuffers.splice(0),g){var y=[];x&&y.push(x),p&&y.push(p);var m=g.length>y.length;m&&y.push(h(v));var _=g.apply(c,y);if(!m||v===_)return v}}var u=h(function c(x,p,v,g){return x._parserBytesLeft<=0?g(new Error("got data but not currently parsing anything")):p.length<=x._parserBytesLeft?function(){return l(x,p,v,g)}:function(){var y=p.slice(0,x._parserBytesLeft);return l(x,y,v,function(m){return m?g(m):p.length>y.length?function(){return c(x,p.slice(y.length),v,g)}:void 0})}});function h(c){return function(){for(var x=c.apply(this,arguments);typeof x=="function";)x=x();return x}}},86844:function(ee,R,e){var M=e(4168);function k(){var s;try{s=R.storage.debug}catch{}return!s&&M!==void 0&&"env"in M&&(s=M.env.DEBUG),s}(R=ee.exports=e(89416)).log=function(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},R.formatArgs=function(s){var T=this.useColors;if(s[0]=(T?"%c":"")+this.namespace+(T?" %c":" ")+s[0]+(T?"%c ":" ")+"+"+R.humanize(this.diff),T){var b="color: "+this.color;s.splice(1,0,b,"color: inherit");var f=0,o=0;s[0].replace(/%[a-zA-Z%]/g,function(t){t!=="%%"&&(f++,t==="%c"&&(o=f))}),s.splice(o,0,b)}},R.save=function(s){try{s==null?R.storage.removeItem("debug"):R.storage.debug=s}catch{}},R.load=k,R.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer")||typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},R.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),R.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],R.formatters.j=function(s){try{return JSON.stringify(s)}catch(T){return"[UnexpectedJSONParseError]: "+T.message}},R.enable(k())},89416:function(ee,R,e){var M;function k(s){function T(){if(T.enabled){var b=T,f=+new Date,o=f-(M||f);b.diff=o,b.prev=M,b.curr=f,M=f;for(var t=new Array(arguments.length),i=0;i<t.length;i++)t[i]=arguments[i];t[0]=R.coerce(t[0]),typeof t[0]!="string"&&t.unshift("%O");var n=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(r,a){if(r==="%%")return r;n++;var l=R.formatters[a];if(typeof l=="function"){var u=t[n];r=l.call(b,u),t.splice(n,1),n--}return r}),R.formatArgs.call(b,t),(T.log||R.log||console.log.bind(console)).apply(b,t)}}return T.namespace=s,T.enabled=R.enabled(s),T.useColors=R.useColors(),T.color=function(b){var f,o=0;for(f in b)o=(o<<5)-o+b.charCodeAt(f),o|=0;return R.colors[Math.abs(o)%R.colors.length]}(s),typeof R.init=="function"&&R.init(T),T}(R=ee.exports=k.debug=k.default=k).coerce=function(s){return s instanceof Error?s.stack||s.message:s},R.disable=function(){R.enable("")},R.enable=function(s){R.save(s),R.names=[],R.skips=[];for(var T=(typeof s=="string"?s:"").split(/[\s,]+/),b=T.length,f=0;f<b;f++)T[f]&&((s=T[f].replace(/\*/g,".*?"))[0]==="-"?R.skips.push(new RegExp("^"+s.substr(1)+"$")):R.names.push(new RegExp("^"+s+"$")))},R.enabled=function(s){var T,b;for(T=0,b=R.skips.length;T<b;T++)if(R.skips[T].test(s))return!1;for(T=0,b=R.names.length;T<b;T++)if(R.names[T].test(s))return!0;return!1},R.humanize=e(93744),R.names=[],R.skips=[],R.formatters={}},93744:function(ee){var R=1e3,e=60*R,M=60*e,k=24*M;function s(T,b,f){if(!(T<b))return T<1.5*b?Math.floor(T/b)+" "+f:Math.ceil(T/b)+" "+f+"s"}ee.exports=function(T,b){b=b||{};var f,o=typeof T;if(o==="string"&&T.length>0)return function(t){if(!((t=String(t)).length>100)){var i=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(i){var n=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"days":case"day":case"d":return n*k;case"hours":case"hour":case"hrs":case"hr":case"h":return n*M;case"minutes":case"minute":case"mins":case"min":case"m":return n*e;case"seconds":case"second":case"secs":case"sec":case"s":return n*R;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(T);if(o==="number"&&isNaN(T)===!1)return b.long?s(f=T,k,"day")||s(f,M,"hour")||s(f,e,"minute")||s(f,R,"second")||f+" ms":function(t){return t>=k?Math.round(t/k)+"d":t>=M?Math.round(t/M)+"h":t>=e?Math.round(t/e)+"m":t>=R?Math.round(t/R)+"s":t+"ms"}(T);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(T))}},39956:function(ee,R,e){var M=e(32868);ee.exports=function(k,s,T){if(k==null)throw Error("First argument should be a string");if(s==null)throw Error("Separator should be a string or a RegExp");T?(typeof T=="string"||Array.isArray(T))&&(T={ignore:T}):T={},T.escape==null&&(T.escape=!0),T.ignore==null?T.ignore=["[]","()","{}","<>",'""',"''","``","",""]:(typeof T.ignore=="string"&&(T.ignore=[T.ignore]),T.ignore=T.ignore.map(function(r){return r.length===1&&(r+=r),r}));var b=M.parse(k,{flat:!0,brackets:T.ignore}),f=b[0].split(s);if(T.escape){for(var o=[],t=0;t<f.length;t++){var i=f[t],n=f[t+1];i[i.length-1]==="\\"&&i[i.length-2]!=="\\"?(o.push(i+s+n),t++):o.push(i)}f=o}for(t=0;t<f.length;t++)b[0]=f[t],f[t]=M.stringify(b,{flat:!0});return f}},78484:function(ee){ee.exports=function(R){for(var e=R.length,M=new Array(e),k=new Array(e),s=new Array(e),T=new Array(e),b=new Array(e),f=new Array(e),o=0;o<e;++o)M[o]=-1,k[o]=0,s[o]=!1,T[o]=0,b[o]=-1,f[o]=[];var t,i=0,n=[],r=[];function a(h){var c=[h],x=[h];for(M[h]=k[h]=i,s[h]=!0,i+=1;x.length>0;){h=x[x.length-1];var p=R[h];if(T[h]<p.length){for(var v=T[h];v<p.length;++v){var g=p[v];if(M[g]<0){M[g]=k[g]=i,s[g]=!0,i+=1,c.push(g),x.push(g);break}s[g]&&(k[h]=0|Math.min(k[h],k[g])),b[g]>=0&&f[h].push(b[g])}T[h]=v}else{if(k[h]===M[h]){var y=[],m=[],_=0;for(v=c.length-1;v>=0;--v){var d=c[v];if(s[d]=!1,y.push(d),m.push(f[d]),_+=f[d].length,b[d]=n.length,d===h){c.length=v;break}}n.push(y);var S=new Array(_);for(v=0;v<m.length;v++)for(var w=0;w<m[v].length;w++)S[--_]=m[v][w];r.push(S)}x.pop()}}}for(o=0;o<e;++o)M[o]<0&&a(o);for(o=0;o<r.length;o++){var l=r[o];if(l.length!==0){l.sort(function(h,c){return h-c}),t=[l[0]];for(var u=1;u<l.length;u++)l[u]!==l[u-1]&&t.push(l[u]);r[o]=t}}return{components:n,adjacencyList:r}}},92848:function(ee,R,e){e.r(R);var M=2*Math.PI,k=function(b,f,o,t,i,n,r){var a=b.x,l=b.y;return{x:t*(a*=f)-i*(l*=o)+n,y:i*a+t*l+r}},s=function(b,f){var o=f===1.5707963267948966?.551915024494:f===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(f/4),t=Math.cos(b),i=Math.sin(b),n=Math.cos(b+f),r=Math.sin(b+f);return[{x:t-i*o,y:i+t*o},{x:n+r*o,y:r-n*o},{x:n,y:r}]},T=function(b,f,o,t){var i=b*o+f*t;return i>1&&(i=1),i<-1&&(i=-1),(b*t-f*o<0?-1:1)*Math.acos(i)};R.default=function(b){var f=b.px,o=b.py,t=b.cx,i=b.cy,n=b.rx,r=b.ry,a=b.xAxisRotation,l=a===void 0?0:a,u=b.largeArcFlag,h=u===void 0?0:u,c=b.sweepFlag,x=c===void 0?0:c,p=[];if(n===0||r===0)return[];var v=Math.sin(l*M/360),g=Math.cos(l*M/360),y=g*(f-t)/2+v*(o-i)/2,m=-v*(f-t)/2+g*(o-i)/2;if(y===0&&m===0)return[];n=Math.abs(n),r=Math.abs(r);var _=Math.pow(y,2)/Math.pow(n,2)+Math.pow(m,2)/Math.pow(r,2);_>1&&(n*=Math.sqrt(_),r*=Math.sqrt(_));var d=function(I,N,W,F,U,H,ne,$,K,Q,Z,X){var te=Math.pow(U,2),ae=Math.pow(H,2),se=Math.pow(Z,2),ce=Math.pow(X,2),fe=te*ae-te*ce-ae*se;fe<0&&(fe=0),fe/=te*ce+ae*se;var pe=(fe=Math.sqrt(fe)*(ne===$?-1:1))*U/H*X,ge=fe*-H/U*Z,me=Q*pe-K*ge+(I+W)/2,be=K*pe+Q*ge+(N+F)/2,ke=(Z-pe)/U,ze=(X-ge)/H,ve=(-Z-pe)/U,oe=(-X-ge)/H,ie=T(1,0,ke,ze),he=T(ke,ze,ve,oe);return $===0&&he>0&&(he-=M),$===1&&he<0&&(he+=M),[me,be,ie,he]}(f,o,t,i,n,r,h,x,v,g,y,m),S=function(I,N){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return function(W,F){var U=[],H=!0,ne=!1,$=void 0;try{for(var K,Q=W[Symbol.iterator]();!(H=(K=Q.next()).done)&&(U.push(K.value),!F||U.length!==F);H=!0);}catch(Z){ne=!0,$=Z}finally{try{!H&&Q.return&&Q.return()}finally{if(ne)throw $}}return U}(I,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(d,4),w=S[0],E=S[1],C=S[2],O=S[3],P=Math.abs(O)/(M/4);Math.abs(1-P)<1e-7&&(P=1);var z=Math.max(Math.ceil(P),1);O/=z;for(var j=0;j<z;j++)p.push(s(C,O)),C+=O;return p.map(function(I){var N=k(I[0],n,r,g,v,w,E),W=N.x,F=N.y,U=k(I[1],n,r,g,v,w,E),H=U.x,ne=U.y,$=k(I[2],n,r,g,v,w,E);return{x1:W,y1:F,x2:H,y2:ne,x:$.x,y:$.y}})}},74840:function(ee,R,e){var M=e(21984),k=e(49972),s=e(41976),T=e(53520),b=e(45408);ee.exports=function(f){if(Array.isArray(f)&&f.length===1&&typeof f[0]=="string"&&(f=f[0]),typeof f=="string"&&(b(T(f),"String is not an SVG path."),f=M(f)),b(Array.isArray(f),"Argument should be a string or an array of path segments."),f=k(f),!(f=s(f)).length)return[0,0,0,0];for(var o=[1/0,1/0,-1/0,-1/0],t=0,i=f.length;t<i;t++)for(var n=f[t].slice(1),r=0;r<n.length;r+=2)n[r+0]<o[0]&&(o[0]=n[r+0]),n[r+1]<o[1]&&(o[1]=n[r+1]),n[r+0]>o[2]&&(o[2]=n[r+0]),n[r+1]>o[3]&&(o[3]=n[r+1]);return o}},41976:function(ee,R,e){ee.exports=function(T){for(var b,f=[],o=0,t=0,i=0,n=0,r=null,a=null,l=0,u=0,h=0,c=T.length;h<c;h++){var x=T[h],p=x[0];switch(p){case"M":i=x[1],n=x[2];break;case"A":var v=M({px:l,py:u,cx:x[6],cy:x[7],rx:x[1],ry:x[2],xAxisRotation:x[3],largeArcFlag:x[4],sweepFlag:x[5]});if(!v.length)continue;for(var g,y=0;y<v.length;y++)x=["C",(g=v[y]).x1,g.y1,g.x2,g.y2,g.x,g.y],y<v.length-1&&f.push(x);break;case"S":var m=l,_=u;b!="C"&&b!="S"||(m+=m-o,_+=_-t),x=["C",m,_,x[1],x[2],x[3],x[4]];break;case"T":b=="Q"||b=="T"?(r=2*l-r,a=2*u-a):(r=l,a=u),x=s(l,u,r,a,x[1],x[2]);break;case"Q":r=x[1],a=x[2],x=s(l,u,x[1],x[2],x[3],x[4]);break;case"L":x=k(l,u,x[1],x[2]);break;case"H":x=k(l,u,x[1],u);break;case"V":x=k(l,u,l,x[1]);break;case"Z":x=k(l,u,i,n)}b=p,l=x[x.length-2],u=x[x.length-1],x.length>4?(o=x[x.length-4],t=x[x.length-3]):(o=l,t=u),f.push(x)}return f};var M=e(92848);function k(T,b,f,o){return["C",T,b,f,o,f,o]}function s(T,b,f,o,t,i){return["C",T/3+.6666666666666666*f,b/3+.6666666666666666*o,t/3+.6666666666666666*f,i/3+.6666666666666666*o,t,i]}},20472:function(ee,R,e){var M,k=e(74840),s=e(21984),T=e(22235),b=e(53520),f=e(29620),o=document.createElement("canvas"),t=o.getContext("2d");ee.exports=function(i,n){if(!b(i))throw Error("Argument should be valid svg path string");var r,a;n||(n={}),n.shape?(r=n.shape[0],a=n.shape[1]):(r=o.width=n.w||n.width||200,a=o.height=n.h||n.height||200);var l=Math.min(r,a),u=n.stroke||0,h=n.viewbox||n.viewBox||k(i),c=[r/(h[2]-h[0]),a/(h[3]-h[1])],x=Math.min(c[0]||0,c[1]||0)/2;if(t.fillStyle="black",t.fillRect(0,0,r,a),t.fillStyle="white",u&&(typeof u!="number"&&(u=1),t.strokeStyle=u>0?"white":"black",t.lineWidth=Math.abs(u)),t.translate(.5*r,.5*a),t.scale(x,x),function(){if(M!=null)return M;var g=document.createElement("canvas").getContext("2d");if(g.canvas.width=g.canvas.height=1,!window.Path2D)return M=!1;var y=new Path2D("M0,0h1v1h-1v-1Z");g.fillStyle="black",g.fill(y);var m=g.getImageData(0,0,1,1);return M=m&&m.data&&m.data[3]===255}()){var p=new Path2D(i);t.fill(p),u&&t.stroke(p)}else{var v=s(i);T(t,v),t.fill(),u&&t.stroke()}return t.setTransform(1,0,0,1,0,0),f(t,{cutoff:n.cutoff!=null?n.cutoff:.5,radius:n.radius!=null?n.radius:.5*l})}},49760:function(ee,R,e){var M;(function(k){var s=/^\s+/,T=/\s+$/,b=0,f=k.round,o=k.min,t=k.max,i=k.random;function n(Z,X){if(X=X||{},(Z=Z||"")instanceof n)return Z;if(!(this instanceof n))return new n(Z,X);var te=function(ae){var se,ce,fe,pe={r:0,g:0,b:0},ge=1,me=null,be=null,ke=null,ze=!1,ve=!1;return typeof ae=="string"&&(ae=function(oe){oe=oe.replace(s,"").replace(T,"").toLowerCase();var ie,he=!1;if(C[oe])oe=C[oe],he=!0;else if(oe=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(ie=K.rgb.exec(oe))?{r:ie[1],g:ie[2],b:ie[3]}:(ie=K.rgba.exec(oe))?{r:ie[1],g:ie[2],b:ie[3],a:ie[4]}:(ie=K.hsl.exec(oe))?{h:ie[1],s:ie[2],l:ie[3]}:(ie=K.hsla.exec(oe))?{h:ie[1],s:ie[2],l:ie[3],a:ie[4]}:(ie=K.hsv.exec(oe))?{h:ie[1],s:ie[2],v:ie[3]}:(ie=K.hsva.exec(oe))?{h:ie[1],s:ie[2],v:ie[3],a:ie[4]}:(ie=K.hex8.exec(oe))?{r:I(ie[1]),g:I(ie[2]),b:I(ie[3]),a:U(ie[4]),format:he?"name":"hex8"}:(ie=K.hex6.exec(oe))?{r:I(ie[1]),g:I(ie[2]),b:I(ie[3]),format:he?"name":"hex"}:(ie=K.hex4.exec(oe))?{r:I(ie[1]+""+ie[1]),g:I(ie[2]+""+ie[2]),b:I(ie[3]+""+ie[3]),a:U(ie[4]+""+ie[4]),format:he?"name":"hex8"}:!!(ie=K.hex3.exec(oe))&&{r:I(ie[1]+""+ie[1]),g:I(ie[2]+""+ie[2]),b:I(ie[3]+""+ie[3]),format:he?"name":"hex"}}(ae)),typeof ae=="object"&&(Q(ae.r)&&Q(ae.g)&&Q(ae.b)?(se=ae.r,ce=ae.g,fe=ae.b,pe={r:255*z(se,255),g:255*z(ce,255),b:255*z(fe,255)},ze=!0,ve=String(ae.r).substr(-1)==="%"?"prgb":"rgb"):Q(ae.h)&&Q(ae.s)&&Q(ae.v)?(me=W(ae.s),be=W(ae.v),pe=function(oe,ie,he){oe=6*z(oe,360),ie=z(ie,100),he=z(he,100);var Se=k.floor(oe),ye=oe-Se,we=he*(1-ie),Me=he*(1-ye*ie),Oe=he*(1-(1-ye)*ie),Ie=Se%6;return{r:255*[he,Me,we,we,Oe,he][Ie],g:255*[Oe,he,he,Me,we,we][Ie],b:255*[we,we,Oe,he,he,Me][Ie]}}(ae.h,me,be),ze=!0,ve="hsv"):Q(ae.h)&&Q(ae.s)&&Q(ae.l)&&(me=W(ae.s),ke=W(ae.l),pe=function(oe,ie,he){var Se,ye,we;function Me(de,_e,Ae){return Ae<0&&(Ae+=1),Ae>1&&(Ae-=1),Ae<1/6?de+6*(_e-de)*Ae:Ae<.5?_e:Ae<2/3?de+(_e-de)*(2/3-Ae)*6:de}if(oe=z(oe,360),ie=z(ie,100),he=z(he,100),ie===0)Se=ye=we=he;else{var Oe=he<.5?he*(1+ie):he+ie-he*ie,Ie=2*he-Oe;Se=Me(Ie,Oe,oe+1/3),ye=Me(Ie,Oe,oe),we=Me(Ie,Oe,oe-1/3)}return{r:255*Se,g:255*ye,b:255*we}}(ae.h,me,ke),ze=!0,ve="hsl"),ae.hasOwnProperty("a")&&(ge=ae.a)),ge=P(ge),{ok:ze,format:ae.format||ve,r:o(255,t(pe.r,0)),g:o(255,t(pe.g,0)),b:o(255,t(pe.b,0)),a:ge}}(Z);this._originalInput=Z,this._r=te.r,this._g=te.g,this._b=te.b,this._a=te.a,this._roundA=f(100*this._a)/100,this._format=X.format||te.format,this._gradientType=X.gradientType,this._r<1&&(this._r=f(this._r)),this._g<1&&(this._g=f(this._g)),this._b<1&&(this._b=f(this._b)),this._ok=te.ok,this._tc_id=b++}function r(Z,X,te){Z=z(Z,255),X=z(X,255),te=z(te,255);var ae,se,ce=t(Z,X,te),fe=o(Z,X,te),pe=(ce+fe)/2;if(ce==fe)ae=se=0;else{var ge=ce-fe;switch(se=pe>.5?ge/(2-ce-fe):ge/(ce+fe),ce){case Z:ae=(X-te)/ge+(X<te?6:0);break;case X:ae=(te-Z)/ge+2;break;case te:ae=(Z-X)/ge+4}ae/=6}return{h:ae,s:se,l:pe}}function a(Z,X,te){Z=z(Z,255),X=z(X,255),te=z(te,255);var ae,se,ce=t(Z,X,te),fe=o(Z,X,te),pe=ce,ge=ce-fe;if(se=ce===0?0:ge/ce,ce==fe)ae=0;else{switch(ce){case Z:ae=(X-te)/ge+(X<te?6:0);break;case X:ae=(te-Z)/ge+2;break;case te:ae=(Z-X)/ge+4}ae/=6}return{h:ae,s:se,v:pe}}function l(Z,X,te,ae){var se=[N(f(Z).toString(16)),N(f(X).toString(16)),N(f(te).toString(16))];return ae&&se[0].charAt(0)==se[0].charAt(1)&&se[1].charAt(0)==se[1].charAt(1)&&se[2].charAt(0)==se[2].charAt(1)?se[0].charAt(0)+se[1].charAt(0)+se[2].charAt(0):se.join("")}function u(Z,X,te,ae){return[N(F(ae)),N(f(Z).toString(16)),N(f(X).toString(16)),N(f(te).toString(16))].join("")}function h(Z,X){X=X===0?0:X||10;var te=n(Z).toHsl();return te.s-=X/100,te.s=j(te.s),n(te)}function c(Z,X){X=X===0?0:X||10;var te=n(Z).toHsl();return te.s+=X/100,te.s=j(te.s),n(te)}function x(Z){return n(Z).desaturate(100)}function p(Z,X){X=X===0?0:X||10;var te=n(Z).toHsl();return te.l+=X/100,te.l=j(te.l),n(te)}function v(Z,X){X=X===0?0:X||10;var te=n(Z).toRgb();return te.r=t(0,o(255,te.r-f(-X/100*255))),te.g=t(0,o(255,te.g-f(-X/100*255))),te.b=t(0,o(255,te.b-f(-X/100*255))),n(te)}function g(Z,X){X=X===0?0:X||10;var te=n(Z).toHsl();return te.l-=X/100,te.l=j(te.l),n(te)}function y(Z,X){var te=n(Z).toHsl(),ae=(te.h+X)%360;return te.h=ae<0?360+ae:ae,n(te)}function m(Z){var X=n(Z).toHsl();return X.h=(X.h+180)%360,n(X)}function _(Z){var X=n(Z).toHsl(),te=X.h;return[n(Z),n({h:(te+120)%360,s:X.s,l:X.l}),n({h:(te+240)%360,s:X.s,l:X.l})]}function d(Z){var X=n(Z).toHsl(),te=X.h;return[n(Z),n({h:(te+90)%360,s:X.s,l:X.l}),n({h:(te+180)%360,s:X.s,l:X.l}),n({h:(te+270)%360,s:X.s,l:X.l})]}function S(Z){var X=n(Z).toHsl(),te=X.h;return[n(Z),n({h:(te+72)%360,s:X.s,l:X.l}),n({h:(te+216)%360,s:X.s,l:X.l})]}function w(Z,X,te){X=X||6,te=te||30;var ae=n(Z).toHsl(),se=360/te,ce=[n(Z)];for(ae.h=(ae.h-(se*X>>1)+720)%360;--X;)ae.h=(ae.h+se)%360,ce.push(n(ae));return ce}function E(Z,X){X=X||6;for(var te=n(Z).toHsv(),ae=te.h,se=te.s,ce=te.v,fe=[],pe=1/X;X--;)fe.push(n({h:ae,s:se,v:ce})),ce=(ce+pe)%1;return fe}n.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Z=this.toRgb();return(299*Z.r+587*Z.g+114*Z.b)/1e3},getLuminance:function(){var Z,X,te,ae=this.toRgb();return Z=ae.r/255,X=ae.g/255,te=ae.b/255,.2126*(Z<=.03928?Z/12.92:k.pow((Z+.055)/1.055,2.4))+.7152*(X<=.03928?X/12.92:k.pow((X+.055)/1.055,2.4))+.0722*(te<=.03928?te/12.92:k.pow((te+.055)/1.055,2.4))},setAlpha:function(Z){return this._a=P(Z),this._roundA=f(100*this._a)/100,this},toHsv:function(){var Z=a(this._r,this._g,this._b);return{h:360*Z.h,s:Z.s,v:Z.v,a:this._a}},toHsvString:function(){var Z=a(this._r,this._g,this._b),X=f(360*Z.h),te=f(100*Z.s),ae=f(100*Z.v);return this._a==1?"hsv("+X+", "+te+"%, "+ae+"%)":"hsva("+X+", "+te+"%, "+ae+"%, "+this._roundA+")"},toHsl:function(){var Z=r(this._r,this._g,this._b);return{h:360*Z.h,s:Z.s,l:Z.l,a:this._a}},toHslString:function(){var Z=r(this._r,this._g,this._b),X=f(360*Z.h),te=f(100*Z.s),ae=f(100*Z.l);return this._a==1?"hsl("+X+", "+te+"%, "+ae+"%)":"hsla("+X+", "+te+"%, "+ae+"%, "+this._roundA+")"},toHex:function(Z){return l(this._r,this._g,this._b,Z)},toHexString:function(Z){return"#"+this.toHex(Z)},toHex8:function(Z){return function(X,te,ae,se,ce){var fe=[N(f(X).toString(16)),N(f(te).toString(16)),N(f(ae).toString(16)),N(F(se))];return ce&&fe[0].charAt(0)==fe[0].charAt(1)&&fe[1].charAt(0)==fe[1].charAt(1)&&fe[2].charAt(0)==fe[2].charAt(1)&&fe[3].charAt(0)==fe[3].charAt(1)?fe[0].charAt(0)+fe[1].charAt(0)+fe[2].charAt(0)+fe[3].charAt(0):fe.join("")}(this._r,this._g,this._b,this._a,Z)},toHex8String:function(Z){return"#"+this.toHex8(Z)},toRgb:function(){return{r:f(this._r),g:f(this._g),b:f(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+f(this._r)+", "+f(this._g)+", "+f(this._b)+")":"rgba("+f(this._r)+", "+f(this._g)+", "+f(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:f(100*z(this._r,255))+"%",g:f(100*z(this._g,255))+"%",b:f(100*z(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+f(100*z(this._r,255))+"%, "+f(100*z(this._g,255))+"%, "+f(100*z(this._b,255))+"%)":"rgba("+f(100*z(this._r,255))+"%, "+f(100*z(this._g,255))+"%, "+f(100*z(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(O[l(this._r,this._g,this._b,!0)]||!1)},toFilter:function(Z){var X="#"+u(this._r,this._g,this._b,this._a),te=X,ae=this._gradientType?"GradientType = 1, ":"";if(Z){var se=n(Z);te="#"+u(se._r,se._g,se._b,se._a)}return"progid:DXImageTransform.Microsoft.gradient("+ae+"startColorstr="+X+",endColorstr="+te+")"},toString:function(Z){var X=!!Z;Z=Z||this._format;var te=!1,ae=this._a<1&&this._a>=0;return X||!ae||Z!=="hex"&&Z!=="hex6"&&Z!=="hex3"&&Z!=="hex4"&&Z!=="hex8"&&Z!=="name"?(Z==="rgb"&&(te=this.toRgbString()),Z==="prgb"&&(te=this.toPercentageRgbString()),Z!=="hex"&&Z!=="hex6"||(te=this.toHexString()),Z==="hex3"&&(te=this.toHexString(!0)),Z==="hex4"&&(te=this.toHex8String(!0)),Z==="hex8"&&(te=this.toHex8String()),Z==="name"&&(te=this.toName()),Z==="hsl"&&(te=this.toHslString()),Z==="hsv"&&(te=this.toHsvString()),te||this.toHexString()):Z==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return n(this.toString())},_applyModification:function(Z,X){var te=Z.apply(null,[this].concat([].slice.call(X)));return this._r=te._r,this._g=te._g,this._b=te._b,this.setAlpha(te._a),this},lighten:function(){return this._applyModification(p,arguments)},brighten:function(){return this._applyModification(v,arguments)},darken:function(){return this._applyModification(g,arguments)},desaturate:function(){return this._applyModification(h,arguments)},saturate:function(){return this._applyModification(c,arguments)},greyscale:function(){return this._applyModification(x,arguments)},spin:function(){return this._applyModification(y,arguments)},_applyCombination:function(Z,X){return Z.apply(null,[this].concat([].slice.call(X)))},analogous:function(){return this._applyCombination(w,arguments)},complement:function(){return this._applyCombination(m,arguments)},monochromatic:function(){return this._applyCombination(E,arguments)},splitcomplement:function(){return this._applyCombination(S,arguments)},triad:function(){return this._applyCombination(_,arguments)},tetrad:function(){return this._applyCombination(d,arguments)}},n.fromRatio=function(Z,X){if(typeof Z=="object"){var te={};for(var ae in Z)Z.hasOwnProperty(ae)&&(te[ae]=ae==="a"?Z[ae]:W(Z[ae]));Z=te}return n(Z,X)},n.equals=function(Z,X){return!(!Z||!X)&&n(Z).toRgbString()==n(X).toRgbString()},n.random=function(){return n.fromRatio({r:i(),g:i(),b:i()})},n.mix=function(Z,X,te){te=te===0?0:te||50;var ae=n(Z).toRgb(),se=n(X).toRgb(),ce=te/100;return n({r:(se.r-ae.r)*ce+ae.r,g:(se.g-ae.g)*ce+ae.g,b:(se.b-ae.b)*ce+ae.b,a:(se.a-ae.a)*ce+ae.a})},n.readability=function(Z,X){var te=n(Z),ae=n(X);return(k.max(te.getLuminance(),ae.getLuminance())+.05)/(k.min(te.getLuminance(),ae.getLuminance())+.05)},n.isReadable=function(Z,X,te){var ae,se,ce,fe,pe,ge=n.readability(Z,X);switch(se=!1,(ce=te,(fe=((ce=ce||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&fe!=="AAA"&&(fe="AA"),(pe=(ce.size||"small").toLowerCase())!=="small"&&pe!=="large"&&(pe="small"),ae={level:fe,size:pe}).level+ae.size){case"AAsmall":case"AAAlarge":se=ge>=4.5;break;case"AAlarge":se=ge>=3;break;case"AAAsmall":se=ge>=7}return se},n.mostReadable=function(Z,X,te){var ae,se,ce,fe,pe=null,ge=0;se=(te=te||{}).includeFallbackColors,ce=te.level,fe=te.size;for(var me=0;me<X.length;me++)(ae=n.readability(Z,X[me]))>ge&&(ge=ae,pe=n(X[me]));return n.isReadable(Z,pe,{level:ce,size:fe})||!se?pe:(te.includeFallbackColors=!1,n.mostReadable(Z,["#fff","#000"],te))};var C=n.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},O=n.hexNames=function(Z){var X={};for(var te in Z)Z.hasOwnProperty(te)&&(X[Z[te]]=te);return X}(C);function P(Z){return Z=parseFloat(Z),(isNaN(Z)||Z<0||Z>1)&&(Z=1),Z}function z(Z,X){(function(ae){return typeof ae=="string"&&ae.indexOf(".")!=-1&&parseFloat(ae)===1})(Z)&&(Z="100%");var te=function(ae){return typeof ae=="string"&&ae.indexOf("%")!=-1}(Z);return Z=o(X,t(0,parseFloat(Z))),te&&(Z=parseInt(Z*X,10)/100),k.abs(Z-X)<1e-6?1:Z%X/parseFloat(X)}function j(Z){return o(1,t(0,Z))}function I(Z){return parseInt(Z,16)}function N(Z){return Z.length==1?"0"+Z:""+Z}function W(Z){return Z<=1&&(Z=100*Z+"%"),Z}function F(Z){return k.round(255*parseFloat(Z)).toString(16)}function U(Z){return I(Z)/255}var H,ne,$,K=(ne="[\\s|\\(]+("+(H="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+H+")[,|\\s]+("+H+")\\s*\\)?",$="[\\s|\\(]+("+H+")[,|\\s]+("+H+")[,|\\s]+("+H+")[,|\\s]+("+H+")\\s*\\)?",{CSS_UNIT:new RegExp(H),rgb:new RegExp("rgb"+ne),rgba:new RegExp("rgba"+$),hsl:new RegExp("hsl"+ne),hsla:new RegExp("hsla"+$),hsv:new RegExp("hsv"+ne),hsva:new RegExp("hsva"+$),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function Q(Z){return!!K.CSS_UNIT.exec(Z)}ee.exports?ee.exports=n:(M=(function(){return n}).call(R,e,R,ee))===void 0||(ee.exports=M)})(Math)},37816:function(ee){ee.exports=e,ee.exports.float32=ee.exports.float=e,ee.exports.fract32=ee.exports.fract=function(M,k){if(M.length){if(M instanceof Float32Array)return new Float32Array(M.length);k instanceof Float32Array||(k=e(M));for(var s=0,T=k.length;s<T;s++)k[s]=M[s]-k[s];return k}return e(M-e(M))};var R=new Float32Array(1);function e(M){return M.length?M instanceof Float32Array?M:new Float32Array(M):(R[0]=M,R[0])}},23464:function(ee,R,e){var M=e(65819);ee.exports=T;var k=96;function s(b,f){var o=M(getComputedStyle(b).getPropertyValue(f));return o[0]*T(o[1],b)}function T(b,f){switch(f=f||document.body,b=(b||"px").trim().toLowerCase(),f!==window&&f!==document||(f=document.body),b){case"%":return f.clientHeight/100;case"ch":case"ex":return function(o,t){var i=document.createElement("div");i.style["font-size"]="128"+o,t.appendChild(i);var n=s(i,"font-size")/128;return t.removeChild(i),n}(b,f);case"em":return s(f,"font-size");case"rem":return s(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return k;case"cm":return k/2.54;case"mm":return k/25.4;case"pt":return k/72;case"pc":return k/6}return 1}},55712:function(ee,R,e){function M(T){return T}function k(T,b){return typeof b=="string"&&(b=T.objects[b]),b.type==="GeometryCollection"?{type:"FeatureCollection",features:b.geometries.map(function(f){return s(T,f)})}:s(T,b)}function s(T,b){var f=b.id,o=b.bbox,t=b.properties==null?{}:b.properties,i=function(n,r){var a=function(v){if(v==null)return M;var g,y,m=v.scale[0],_=v.scale[1],d=v.translate[0],S=v.translate[1];return function(w,E){E||(g=y=0);var C=2,O=w.length,P=new Array(O);for(P[0]=(g+=w[0])*m+d,P[1]=(y+=w[1])*_+S;C<O;)P[C]=w[C],++C;return P}}(n.transform),l=n.arcs;function u(v,g){g.length&&g.pop();for(var y=l[v<0?~v:v],m=0,_=y.length;m<_;++m)g.push(a(y[m],m));v<0&&function(d,S){for(var w,E=d.length,C=E-S;C<--E;)w=d[C],d[C++]=d[E],d[E]=w}(g,_)}function h(v){return a(v)}function c(v){for(var g=[],y=0,m=v.length;y<m;++y)u(v[y],g);return g.length<2&&g.push(g[0]),g}function x(v){for(var g=c(v);g.length<4;)g.push(g[0]);return g}function p(v){return v.map(x)}return function v(g){var y,m=g.type;switch(m){case"GeometryCollection":return{type:m,geometries:g.geometries.map(v)};case"Point":y=h(g.coordinates);break;case"MultiPoint":y=g.coordinates.map(h);break;case"LineString":y=c(g.arcs);break;case"MultiLineString":y=g.arcs.map(c);break;case"Polygon":y=p(g.arcs);break;case"MultiPolygon":y=g.arcs.map(p);break;default:return null}return{type:m,coordinates:y}}(r)}(T,b);return f==null&&o==null?{type:"Feature",properties:t,geometry:i}:o==null?{type:"Feature",id:f,properties:t,geometry:i}:{type:"Feature",id:f,bbox:o,properties:t,geometry:i}}e.d(R,{NO:function(){return k}})},73384:function(ee,R,e){var M=e(54612);ee.exports=function(k){if(typeof k!="function"||!hasOwnProperty.call(k,"length"))return!1;try{if(typeof k.length!="number"||typeof k.call!="function"||typeof k.apply!="function")return!1}catch{return!1}return!M(k)}},57980:function(ee,R,e){var M=e(81680),k=e(7328),s=e(33940),T=e(18856),b=function(f,o){return f.replace("%v",T(o))};ee.exports=function(f,o,t){if(!k(t))throw new TypeError(b(o,f));if(!M(f)){if("default"in t)return t.default;if(t.isOptional)return null}var i=s(t.errorMessage);throw M(i)||(i=o),new TypeError(b(i,f))}},32336:function(ee){ee.exports=function(R){try{return R.toString()}catch{try{return String(R)}catch{return null}}}},18856:function(ee,R,e){var M=e(32336),k=/[\n\r\u2028\u2029]/g;ee.exports=function(s){var T=M(s);return T===null?"<Non-coercible to string value>":(T.length>100&&(T=T.slice(0,99)+""),T=T.replace(k,function(b){switch(b){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},7328:function(ee,R,e){var M=e(81680),k={object:!0,function:!0,undefined:!0};ee.exports=function(s){return!!M(s)&&hasOwnProperty.call(k,typeof s)}},87396:function(ee,R,e){var M=e(57980),k=e(85488);ee.exports=function(s){return k(s)?s:M(s,"%v is not a plain function",arguments[1])}},85488:function(ee,R,e){var M=e(73384),k=/^\s*class[\s{/}]/,s=Function.prototype.toString;ee.exports=function(T){return!!M(T)&&!k.test(s.call(T))}},54612:function(ee,R,e){var M=e(7328);ee.exports=function(k){if(!M(k))return!1;try{return!!k.constructor&&k.constructor.prototype===k}catch{return!1}}},33940:function(ee,R,e){var M=e(81680),k=e(7328),s=Object.prototype.toString;ee.exports=function(T){if(!M(T))return null;if(k(T)){var b=T.toString;if(typeof b!="function"||b===s)return null}try{return""+T}catch{return null}}},18496:function(ee,R,e){var M=e(57980),k=e(81680);ee.exports=function(s){return k(s)?s:M(s,"Cannot use %v",arguments[1])}},81680:function(ee){ee.exports=function(R){return R!=null}},14144:function(ee,R,e){var M=e(308),k=e(10352),s=e(33576).Buffer;e.g.__TYPEDARRAY_POOL||(e.g.__TYPEDARRAY_POOL={UINT8:k([32,0]),UINT16:k([32,0]),UINT32:k([32,0]),BIGUINT64:k([32,0]),INT8:k([32,0]),INT16:k([32,0]),INT32:k([32,0]),BIGINT64:k([32,0]),FLOAT:k([32,0]),DOUBLE:k([32,0]),DATA:k([32,0]),UINT8C:k([32,0]),BUFFER:k([32,0])});var T=typeof Uint8ClampedArray<"u",b=typeof BigUint64Array<"u",f=typeof BigInt64Array<"u",o=e.g.__TYPEDARRAY_POOL;o.UINT8C||(o.UINT8C=k([32,0])),o.BIGUINT64||(o.BIGUINT64=k([32,0])),o.BIGINT64||(o.BIGINT64=k([32,0])),o.BUFFER||(o.BUFFER=k([32,0]));var t=o.DATA,i=o.BUFFER;function n(S){if(S){var w=S.length||S.byteLength,E=M.log2(w);t[E].push(S)}}function r(S){S=M.nextPow2(S);var w=M.log2(S),E=t[w];return E.length>0?E.pop():new ArrayBuffer(S)}function a(S){return new Uint8Array(r(S),0,S)}function l(S){return new Uint16Array(r(2*S),0,S)}function u(S){return new Uint32Array(r(4*S),0,S)}function h(S){return new Int8Array(r(S),0,S)}function c(S){return new Int16Array(r(2*S),0,S)}function x(S){return new Int32Array(r(4*S),0,S)}function p(S){return new Float32Array(r(4*S),0,S)}function v(S){return new Float64Array(r(8*S),0,S)}function g(S){return T?new Uint8ClampedArray(r(S),0,S):a(S)}function y(S){return b?new BigUint64Array(r(8*S),0,S):null}function m(S){return f?new BigInt64Array(r(8*S),0,S):null}function _(S){return new DataView(r(S),0,S)}function d(S){S=M.nextPow2(S);var w=M.log2(S),E=i[w];return E.length>0?E.pop():new s(S)}R.free=function(S){if(s.isBuffer(S))i[M.log2(S.length)].push(S);else{if(Object.prototype.toString.call(S)!=="[object ArrayBuffer]"&&(S=S.buffer),!S)return;var w=S.length||S.byteLength,E=0|M.log2(w);t[E].push(S)}},R.freeUint8=R.freeUint16=R.freeUint32=R.freeBigUint64=R.freeInt8=R.freeInt16=R.freeInt32=R.freeBigInt64=R.freeFloat32=R.freeFloat=R.freeFloat64=R.freeDouble=R.freeUint8Clamped=R.freeDataView=function(S){n(S.buffer)},R.freeArrayBuffer=n,R.freeBuffer=function(S){i[M.log2(S.length)].push(S)},R.malloc=function(S,w){if(w===void 0||w==="arraybuffer")return r(S);switch(w){case"uint8":return a(S);case"uint16":return l(S);case"uint32":return u(S);case"int8":return h(S);case"int16":return c(S);case"int32":return x(S);case"float":case"float32":return p(S);case"double":case"float64":return v(S);case"uint8_clamped":return g(S);case"bigint64":return m(S);case"biguint64":return y(S);case"buffer":return d(S);case"data":case"dataview":return _(S);default:return null}return null},R.mallocArrayBuffer=r,R.mallocUint8=a,R.mallocUint16=l,R.mallocUint32=u,R.mallocInt8=h,R.mallocInt16=c,R.mallocInt32=x,R.mallocFloat32=R.mallocFloat=p,R.mallocFloat64=R.mallocDouble=v,R.mallocUint8Clamped=g,R.mallocBigUint64=y,R.mallocBigInt64=m,R.mallocDataView=_,R.mallocBuffer=d,R.clearCache=function(){for(var S=0;S<32;++S)o.UINT8[S].length=0,o.UINT16[S].length=0,o.UINT32[S].length=0,o.INT8[S].length=0,o.INT16[S].length=0,o.INT32[S].length=0,o.FLOAT[S].length=0,o.DOUBLE[S].length=0,o.BIGUINT64[S].length=0,o.BIGINT64[S].length=0,o.UINT8C[S].length=0,t[S].length=0,i[S].length=0}},92384:function(ee){var R=/[\'\"]/;ee.exports=function(e){return e?(R.test(e.charAt(0))&&(e=e.substr(1)),R.test(e.charAt(e.length-1))&&(e=e.substr(0,e.length-1)),e):""}},45223:function(ee){ee.exports=function(R,e,M){Array.isArray(M)||(M=[].slice.call(arguments,2));for(var k=0,s=M.length;k<s;k++){var T=M[k];for(var b in T)if((e[b]===void 0||Array.isArray(e[b])||R[b]!==e[b])&&b in e){var f;if(T[b]===!0)f=e[b];else if(T[b]===!1||typeof T[b]=="function"&&(f=T[b](e[b],R,e))===void 0)continue;R[b]=f}}return R}},96656:function(ee,R,e){function M(k){try{if(!e.g.localStorage)return!1}catch{return!1}var s=e.g.localStorage[k];return s!=null&&String(s).toLowerCase()==="true"}ee.exports=function(k,s){if(M("noDeprecation"))return k;var T=!1;return function(){if(!T){if(M("throwDeprecation"))throw new Error(s);M("traceDeprecation")?console.trace(s):console.warn(s),T=!0}return k.apply(this,arguments)}}},75272:function(ee){ee.exports=function(R){return R&&typeof R=="object"&&typeof R.copy=="function"&&typeof R.fill=="function"&&typeof R.readUInt8=="function"}},41088:function(ee,R,e){var M=e(91148),k=e(84420),s=e(96632),T=e(7728);function b(z){return z.call.bind(z)}var f=typeof BigInt<"u",o=typeof Symbol<"u",t=b(Object.prototype.toString),i=b(Number.prototype.valueOf),n=b(String.prototype.valueOf),r=b(Boolean.prototype.valueOf);if(f)var a=b(BigInt.prototype.valueOf);if(o)var l=b(Symbol.prototype.valueOf);function u(z,j){if(typeof z!="object")return!1;try{return j(z),!0}catch{return!1}}function h(z){return t(z)==="[object Map]"}function c(z){return t(z)==="[object Set]"}function x(z){return t(z)==="[object WeakMap]"}function p(z){return t(z)==="[object WeakSet]"}function v(z){return t(z)==="[object ArrayBuffer]"}function g(z){return typeof ArrayBuffer<"u"&&(v.working?v(z):z instanceof ArrayBuffer)}function y(z){return t(z)==="[object DataView]"}function m(z){return typeof DataView<"u"&&(y.working?y(z):z instanceof DataView)}R.isArgumentsObject=M,R.isGeneratorFunction=k,R.isTypedArray=T,R.isPromise=function(z){return typeof Promise<"u"&&z instanceof Promise||z!==null&&typeof z=="object"&&typeof z.then=="function"&&typeof z.catch=="function"},R.isArrayBufferView=function(z){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(z):T(z)||m(z)},R.isUint8Array=function(z){return s(z)==="Uint8Array"},R.isUint8ClampedArray=function(z){return s(z)==="Uint8ClampedArray"},R.isUint16Array=function(z){return s(z)==="Uint16Array"},R.isUint32Array=function(z){return s(z)==="Uint32Array"},R.isInt8Array=function(z){return s(z)==="Int8Array"},R.isInt16Array=function(z){return s(z)==="Int16Array"},R.isInt32Array=function(z){return s(z)==="Int32Array"},R.isFloat32Array=function(z){return s(z)==="Float32Array"},R.isFloat64Array=function(z){return s(z)==="Float64Array"},R.isBigInt64Array=function(z){return s(z)==="BigInt64Array"},R.isBigUint64Array=function(z){return s(z)==="BigUint64Array"},h.working=typeof Map<"u"&&h(new Map),R.isMap=function(z){return typeof Map<"u"&&(h.working?h(z):z instanceof Map)},c.working=typeof Set<"u"&&c(new Set),R.isSet=function(z){return typeof Set<"u"&&(c.working?c(z):z instanceof Set)},x.working=typeof WeakMap<"u"&&x(new WeakMap),R.isWeakMap=function(z){return typeof WeakMap<"u"&&(x.working?x(z):z instanceof WeakMap)},p.working=typeof WeakSet<"u"&&p(new WeakSet),R.isWeakSet=function(z){return p(z)},v.working=typeof ArrayBuffer<"u"&&v(new ArrayBuffer),R.isArrayBuffer=g,y.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&y(new DataView(new ArrayBuffer(1),0,1)),R.isDataView=m;var _=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function d(z){return t(z)==="[object SharedArrayBuffer]"}function S(z){return _!==void 0&&(d.working===void 0&&(d.working=d(new _)),d.working?d(z):z instanceof _)}function w(z){return u(z,i)}function E(z){return u(z,n)}function C(z){return u(z,r)}function O(z){return f&&u(z,a)}function P(z){return o&&u(z,l)}R.isSharedArrayBuffer=S,R.isAsyncFunction=function(z){return t(z)==="[object AsyncFunction]"},R.isMapIterator=function(z){return t(z)==="[object Map Iterator]"},R.isSetIterator=function(z){return t(z)==="[object Set Iterator]"},R.isGeneratorObject=function(z){return t(z)==="[object Generator]"},R.isWebAssemblyCompiledModule=function(z){return t(z)==="[object WebAssembly.Module]"},R.isNumberObject=w,R.isStringObject=E,R.isBooleanObject=C,R.isBigIntObject=O,R.isSymbolObject=P,R.isBoxedPrimitive=function(z){return w(z)||E(z)||C(z)||O(z)||P(z)},R.isAnyArrayBuffer=function(z){return typeof Uint8Array<"u"&&(g(z)||S(z))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(z){Object.defineProperty(R,z,{enumerable:!1,value:function(){throw new Error(z+" is not supported in userland")}})})},35840:function(ee,R,e){var M=e(4168),k=Object.getOwnPropertyDescriptors||function(P){for(var z=Object.keys(P),j={},I=0;I<z.length;I++)j[z[I]]=Object.getOwnPropertyDescriptor(P,z[I]);return j},s=/%[sdj%]/g;R.format=function(P){if(!x(P)){for(var z=[],j=0;j<arguments.length;j++)z.push(o(arguments[j]));return z.join(" ")}j=1;for(var I=arguments,N=I.length,W=String(P).replace(s,function(U){if(U==="%%")return"%";if(j>=N)return U;switch(U){case"%s":return String(I[j++]);case"%d":return Number(I[j++]);case"%j":try{return JSON.stringify(I[j++])}catch{return"[Circular]"}default:return U}}),F=I[j];j<N;F=I[++j])h(F)||!g(F)?W+=" "+F:W+=" "+o(F);return W},R.deprecate=function(P,z){if(M!==void 0&&M.noDeprecation===!0)return P;if(M===void 0)return function(){return R.deprecate(P,z).apply(this,arguments)};var j=!1;return function(){if(!j){if(M.throwDeprecation)throw new Error(z);M.traceDeprecation?console.trace(z):console.error(z),j=!0}return P.apply(this,arguments)}};var T={},b=/^$/;if(M.env.NODE_DEBUG){var f=M.env.NODE_DEBUG;f=f.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),b=new RegExp("^"+f+"$","i")}function o(P,z){var j={seen:[],stylize:i};return arguments.length>=3&&(j.depth=arguments[2]),arguments.length>=4&&(j.colors=arguments[3]),u(z)?j.showHidden=z:z&&R._extend(j,z),p(j.showHidden)&&(j.showHidden=!1),p(j.depth)&&(j.depth=2),p(j.colors)&&(j.colors=!1),p(j.customInspect)&&(j.customInspect=!0),j.colors&&(j.stylize=t),n(j,P,j.depth)}function t(P,z){var j=o.styles[z];return j?"\x1B["+o.colors[j][0]+"m"+P+"\x1B["+o.colors[j][1]+"m":P}function i(P,z){return P}function n(P,z,j){if(P.customInspect&&z&&_(z.inspect)&&z.inspect!==R.inspect&&(!z.constructor||z.constructor.prototype!==z)){var I=z.inspect(j,P);return x(I)||(I=n(P,I,j)),I}var N=function(Q,Z){if(p(Z))return Q.stylize("undefined","undefined");if(x(Z)){var X="'"+JSON.stringify(Z).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return Q.stylize(X,"string")}return c(Z)?Q.stylize(""+Z,"number"):u(Z)?Q.stylize(""+Z,"boolean"):h(Z)?Q.stylize("null","null"):void 0}(P,z);if(N)return N;var W=Object.keys(z),F=function(Q){var Z={};return Q.forEach(function(X,te){Z[X]=!0}),Z}(W);if(P.showHidden&&(W=Object.getOwnPropertyNames(z)),m(z)&&(W.indexOf("message")>=0||W.indexOf("description")>=0))return r(z);if(W.length===0){if(_(z)){var U=z.name?": "+z.name:"";return P.stylize("[Function"+U+"]","special")}if(v(z))return P.stylize(RegExp.prototype.toString.call(z),"regexp");if(y(z))return P.stylize(Date.prototype.toString.call(z),"date");if(m(z))return r(z)}var H,ne="",$=!1,K=["{","}"];return l(z)&&($=!0,K=["[","]"]),_(z)&&(ne=" [Function"+(z.name?": "+z.name:"")+"]"),v(z)&&(ne=" "+RegExp.prototype.toString.call(z)),y(z)&&(ne=" "+Date.prototype.toUTCString.call(z)),m(z)&&(ne=" "+r(z)),W.length!==0||$&&z.length!=0?j<0?v(z)?P.stylize(RegExp.prototype.toString.call(z),"regexp"):P.stylize("[Object]","special"):(P.seen.push(z),H=$?function(Q,Z,X,te,ae){for(var se=[],ce=0,fe=Z.length;ce<fe;++ce)E(Z,String(ce))?se.push(a(Q,Z,X,te,String(ce),!0)):se.push("");return ae.forEach(function(pe){pe.match(/^\d+$/)||se.push(a(Q,Z,X,te,pe,!0))}),se}(P,z,j,F,W):W.map(function(Q){return a(P,z,j,F,Q,$)}),P.seen.pop(),function(Q,Z,X){return Q.reduce(function(te,ae){return ae.indexOf(`
`),te+ae.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?X[0]+(Z===""?"":Z+`
 `)+" "+Q.join(`,
  `)+" "+X[1]:X[0]+Z+" "+Q.join(", ")+" "+X[1]}(H,ne,K)):K[0]+ne+K[1]}function r(P){return"["+Error.prototype.toString.call(P)+"]"}function a(P,z,j,I,N,W){var F,U,H;if((H=Object.getOwnPropertyDescriptor(z,N)||{value:z[N]}).get?U=H.set?P.stylize("[Getter/Setter]","special"):P.stylize("[Getter]","special"):H.set&&(U=P.stylize("[Setter]","special")),E(I,N)||(F="["+N+"]"),U||(P.seen.indexOf(H.value)<0?(U=h(j)?n(P,H.value,null):n(P,H.value,j-1)).indexOf(`
`)>-1&&(U=W?U.split(`
`).map(function(ne){return"  "+ne}).join(`
`).slice(2):`
`+U.split(`
`).map(function(ne){return"   "+ne}).join(`
`)):U=P.stylize("[Circular]","special")),p(F)){if(W&&N.match(/^\d+$/))return U;(F=JSON.stringify(""+N)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(F=F.slice(1,-1),F=P.stylize(F,"name")):(F=F.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),F=P.stylize(F,"string"))}return F+": "+U}function l(P){return Array.isArray(P)}function u(P){return typeof P=="boolean"}function h(P){return P===null}function c(P){return typeof P=="number"}function x(P){return typeof P=="string"}function p(P){return P===void 0}function v(P){return g(P)&&d(P)==="[object RegExp]"}function g(P){return typeof P=="object"&&P!==null}function y(P){return g(P)&&d(P)==="[object Date]"}function m(P){return g(P)&&(d(P)==="[object Error]"||P instanceof Error)}function _(P){return typeof P=="function"}function d(P){return Object.prototype.toString.call(P)}function S(P){return P<10?"0"+P.toString(10):P.toString(10)}R.debuglog=function(P){if(P=P.toUpperCase(),!T[P])if(b.test(P)){var z=M.pid;T[P]=function(){var j=R.format.apply(R,arguments);console.error("%s %d: %s",P,z,j)}}else T[P]=function(){};return T[P]},R.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},R.types=e(41088),R.isArray=l,R.isBoolean=u,R.isNull=h,R.isNullOrUndefined=function(P){return P==null},R.isNumber=c,R.isString=x,R.isSymbol=function(P){return typeof P=="symbol"},R.isUndefined=p,R.isRegExp=v,R.types.isRegExp=v,R.isObject=g,R.isDate=y,R.types.isDate=y,R.isError=m,R.types.isNativeError=m,R.isFunction=_,R.isPrimitive=function(P){return P===null||typeof P=="boolean"||typeof P=="number"||typeof P=="string"||typeof P=="symbol"||P===void 0},R.isBuffer=e(75272);var w=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(P,z){return Object.prototype.hasOwnProperty.call(P,z)}R.log=function(){var P,z;console.log("%s - %s",(z=[S((P=new Date).getHours()),S(P.getMinutes()),S(P.getSeconds())].join(":"),[P.getDate(),w[P.getMonth()],z].join(" ")),R.format.apply(R,arguments))},R.inherits=e(6768),R._extend=function(P,z){if(!z||!g(z))return P;for(var j=Object.keys(z),I=j.length;I--;)P[j[I]]=z[j[I]];return P};var C=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function O(P,z){if(!P){var j=new Error("Promise was rejected with a falsy value");j.reason=P,P=j}return z(P)}R.promisify=function(P){if(typeof P!="function")throw new TypeError('The "original" argument must be of type Function');if(C&&P[C]){var z;if(typeof(z=P[C])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(z,C,{value:z,enumerable:!1,writable:!1,configurable:!0}),z}function z(){for(var j,I,N=new Promise(function(U,H){j=U,I=H}),W=[],F=0;F<arguments.length;F++)W.push(arguments[F]);W.push(function(U,H){U?I(U):j(H)});try{P.apply(this,W)}catch(U){I(U)}return N}return Object.setPrototypeOf(z,Object.getPrototypeOf(P)),C&&Object.defineProperty(z,C,{value:z,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(z,k(P))},R.promisify.custom=C,R.callbackify=function(P){if(typeof P!="function")throw new TypeError('The "original" argument must be of type Function');function z(){for(var j=[],I=0;I<arguments.length;I++)j.push(arguments[I]);var N=j.pop();if(typeof N!="function")throw new TypeError("The last argument must be of type Function");var W=this,F=function(){return N.apply(W,arguments)};P.apply(this,j).then(function(U){M.nextTick(F.bind(null,null,U))},function(U){M.nextTick(O.bind(null,U,F))})}return Object.setPrototypeOf(z,Object.getPrototypeOf(P)),Object.defineProperties(z,k(P)),z}},5408:function(ee,R,e){var M=e(13380);ee.exports=function(k){return M("webgl",k)}},96632:function(ee,R,e){var M=e(46492),k=e(63436),s=e(57916),T=e(99676),b=e(2304),f=T("Object.prototype.toString"),o=e(46672)(),t=typeof globalThis>"u"?e.g:globalThis,i=k(),n=T("String.prototype.slice"),r=Object.getPrototypeOf,a=T("Array.prototype.indexOf",!0)||function(u,h){for(var c=0;c<u.length;c+=1)if(u[c]===h)return c;return-1},l={__proto__:null};M(i,o&&b&&r?function(u){var h=new t[u];if(Symbol.toStringTag in h){var c=r(h),x=b(c,Symbol.toStringTag);if(!x){var p=r(c);x=b(p,Symbol.toStringTag)}l["$"+u]=s(x.get)}}:function(u){var h=new t[u],c=h.slice||h.set;c&&(l["$"+u]=s(c))}),ee.exports=function(u){if(!u||typeof u!="object")return!1;if(!o){var h=n(f(u),8,-1);return a(i,h)>-1?h:h==="Object"&&function(c){var x=!1;return M(l,function(p,v){if(!x)try{p(c),x=n(v,1)}catch{}}),x}(u)}return b?function(c){var x=!1;return M(l,function(p,v){if(!x)try{"$"+p(c)===v&&(x=n(v,1))}catch{}}),x}(u):null}},67020:function(ee,R,e){var M=e(38700),k=e(50896),s=M.instance();function T(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}T.prototype=new M.baseCalendar,k(T.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(r,a){if(typeof r=="string"){var l=r.match(f);return l?l[0]:""}var u=this._validateYear(r),h=r.month(),c=""+this.toChineseMonth(u,h);return a&&c.length<2&&(c="0"+c),this.isIntercalaryMonth(u,h)&&(c+="i"),c},monthNames:function(r){if(typeof r=="string"){var a=r.match(o);return a?a[0]:""}var l=this._validateYear(r),u=r.month(),h=["","","","","","","","","","","",""][this.toChineseMonth(l,u)-1];return this.isIntercalaryMonth(l,u)&&(h=""+h),h},monthNamesShort:function(r){if(typeof r=="string"){var a=r.match(t);return a?a[0]:""}var l=this._validateYear(r),u=r.month(),h=["","","","","","","","","","","",""][this.toChineseMonth(l,u)-1];return this.isIntercalaryMonth(l,u)&&(h=""+h),h},parseMonth:function(r,a){r=this._validateYear(r);var l,u=parseInt(a);if(isNaN(u))a[0]===""&&(l=!0,a=a.substring(1)),a[a.length-1]===""&&(a=a.substring(0,a.length-1)),u=1+["","","","","","","","","","","",""].indexOf(a);else{var h=a[a.length-1];l=h==="i"||h==="I"}return this.toMonthIndex(r,u,l)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(r,a){if(r.year&&(r=r.year()),typeof r!="number"||r<1888||r>2111)throw a.replace(/\{0\}/,this.local.name);return r},toMonthIndex:function(r,a,l){var u=this.intercalaryMonth(r);if(l&&a!==u||a<1||a>12)throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);return u?!l&&a<=u?a-1:a:a-1},toChineseMonth:function(r,a){r.year&&(a=(r=r.year()).month());var l=this.intercalaryMonth(r);if(a<0||a>(l?12:11))throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);return l?a<l?a+1:a:a+1},intercalaryMonth:function(r){return r=this._validateYear(r),i[r-i[0]]>>13},isIntercalaryMonth:function(r,a){r.year&&(a=(r=r.year()).month());var l=this.intercalaryMonth(r);return!!l&&l===a},leapYear:function(r){return this.intercalaryMonth(r)!==0},weekOfYear:function(r,a,l){var u,h=this._validateYear(r,M.local.invalidyear),c=n[h-n[0]],x=c>>9&4095,p=c>>5&15,v=31&c;(u=s.newDate(x,p,v)).add(4-(u.dayOfWeek()||7),"d");var g=this.toJD(r,a,l)-u.toJD();return 1+Math.floor(g/7)},monthsInYear:function(r){return this.leapYear(r)?13:12},daysInMonth:function(r,a){r.year&&(a=r.month(),r=r.year()),r=this._validateYear(r);var l=i[r-i[0]];if(a>(l>>13?12:11))throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);return l&1<<12-a?30:29},weekDay:function(r,a,l){return(this.dayOfWeek(r,a,l)||7)<6},toJD:function(r,a,l){var u=this._validate(r,c,l,M.local.invalidDate);r=this._validateYear(u.year()),a=u.month(),l=u.day();var h=this.isIntercalaryMonth(r,a),c=this.toChineseMonth(r,a),x=function(p,v,g,y,m){var _,d,S;if(typeof p=="object")d=p,_=v||{};else{var w;if(!(typeof p=="number"&&p>=1888&&p<=2111))throw new Error("Lunar year outside range 1888-2111");if(!(typeof v=="number"&&v>=1&&v<=12))throw new Error("Lunar month outside range 1 - 12");if(!(typeof g=="number"&&g>=1&&g<=30))throw new Error("Lunar day outside range 1 - 30");typeof y=="object"?(w=!1,_=y):(w=!!y,_={}),d={year:p,month:v,day:g,isIntercalary:w}}S=d.day-1;var E,C=i[d.year-i[0]],O=C>>13;E=O&&(d.month>O||d.isIntercalary)?d.month:d.month-1;for(var P=0;P<E;P++)S+=C&1<<12-P?30:29;var z=n[d.year-n[0]],j=new Date(z>>9&4095,(z>>5&15)-1,(31&z)+S);return _.year=j.getFullYear(),_.month=1+j.getMonth(),_.day=j.getDate(),_}(r,c,l,h);return s.toJD(x.year,x.month,x.day)},fromJD:function(r){var a=s.fromJD(r),l=function(h,c,x,p){var v,g;if(typeof h=="object")v=h,g=c||{};else{if(!(typeof h=="number"&&h>=1888&&h<=2111))throw new Error("Solar year outside range 1888-2111");if(!(typeof c=="number"&&c>=1&&c<=12))throw new Error("Solar month outside range 1 - 12");if(!(typeof x=="number"&&x>=1&&x<=31))throw new Error("Solar day outside range 1 - 31");v={year:h,month:c,day:x},g={}}var y=n[v.year-n[0]],m=v.year<<9|v.month<<5|v.day;g.year=m>=y?v.year:v.year-1,y=n[g.year-n[0]];var _,d=new Date(y>>9&4095,(y>>5&15)-1,31&y),S=new Date(v.year,v.month-1,v.day);_=Math.round((S-d)/864e5);var w,E=i[g.year-i[0]];for(w=0;w<13;w++){var C=E&1<<12-w?30:29;if(_<C)break;_-=C}var O=E>>13;return!O||w<O?(g.isIntercalary=!1,g.month=1+w):w===O?(g.isIntercalary=!0,g.month=w):(g.isIntercalary=!1,g.month=w),g.day=1+_,g}(a.year(),a.month(),a.day()),u=this.toMonthIndex(l.year,l.month,l.isIntercalary);return this.newDate(l.year,u,l.day)},fromString:function(r){var a=r.match(b),l=this._validateYear(+a[1]),u=+a[2],h=!!a[3],c=this.toMonthIndex(l,u,h),x=+a[4];return this.newDate(l,c,x)},add:function(r,a,l){var u=r.year(),h=r.month(),c=this.isIntercalaryMonth(u,h),x=this.toChineseMonth(u,h),p=Object.getPrototypeOf(T.prototype).add.call(this,r,a,l);if(l==="y"){var v=p.year(),g=p.month(),y=this.isIntercalaryMonth(v,x),m=c&&y?this.toMonthIndex(v,x,!0):this.toMonthIndex(v,x,!1);m!==g&&p.month(m)}return p}});var b=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,f=/^\d?\d[iI]?/m,o=/^??[]?/m,t=/^??[]?/m;M.calendars.chinese=T;var i=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],n=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},89792:function(ee,R,e){var M=e(38700),k=e(50896);function s(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}s.prototype=new M.baseCalendar,k(s.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var b=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear);return(T=b.year()+(b.year()<0?1:0))%4==3||T%4==-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear),13},weekOfYear:function(T,b,f){var o=this.newDate(T,b,f);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInMonth:function(T,b){var f=this._validate(T,b,this.minDay,M.local.invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===13&&this.leapYear(f.year())?1:0)},weekDay:function(T,b,f){return(this.dayOfWeek(T,b,f)||7)<6},toJD:function(T,b,f){var o=this._validate(T,b,f,M.local.invalidDate);return(T=o.year())<0&&T++,o.day()+30*(o.month()-1)+365*(T-1)+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var b=Math.floor(T)+.5-this.jdEpoch,f=Math.floor((b-Math.floor((b+366)/1461))/365)+1;f<=0&&f--,b=Math.floor(T)+.5-this.newDate(f,1,1).toJD();var o=Math.floor(b/30)+1,t=b-30*(o-1)+1;return this.newDate(f,o,t)}}),M.calendars.coptic=s},55668:function(ee,R,e){var M=e(38700),k=e(50896);function s(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}s.prototype=new M.baseCalendar,k(s.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(b){return this._validate(b,this.minMonth,this.minDay,M.local.invalidYear),!1},monthsInYear:function(b){return this._validate(b,this.minMonth,this.minDay,M.local.invalidYear),13},daysInYear:function(b){return this._validate(b,this.minMonth,this.minDay,M.local.invalidYear),400},weekOfYear:function(b,f,o){var t=this.newDate(b,f,o);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/8)+1},daysInMonth:function(b,f){var o=this._validate(b,f,this.minDay,M.local.invalidMonth);return this.daysPerMonth[o.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(b,f,o){return(this._validate(b,f,o,M.local.invalidDate).day()+1)%8},weekDay:function(b,f,o){var t=this.dayOfWeek(b,f,o);return t>=2&&t<=6},extraInfo:function(b,f,o){var t=this._validate(b,f,o,M.local.invalidDate);return{century:T[Math.floor((t.year()-1)/100)+1]||""}},toJD:function(b,f,o){var t=this._validate(b,f,o,M.local.invalidDate);return b=t.year()+(t.year()<0?1:0),f=t.month(),(o=t.day())+(f>1?16:0)+(f>2?32*(f-2):0)+400*(b-1)+this.jdEpoch-1},fromJD:function(b){b=Math.floor(b+.5)-Math.floor(this.jdEpoch)-1;var f=Math.floor(b/400)+1;b-=400*(f-1),b+=b>15?16:0;var o=Math.floor(b/32)+1,t=b-32*(o-1)+1;return this.newDate(f<=0?f-1:f,o,t)}});var T={20:"Fruitbat",21:"Anchovy"};M.calendars.discworld=s},65168:function(ee,R,e){var M=e(38700),k=e(50896);function s(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}s.prototype=new M.baseCalendar,k(s.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var b=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear);return(T=b.year()+(b.year()<0?1:0))%4==3||T%4==-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear),13},weekOfYear:function(T,b,f){var o=this.newDate(T,b,f);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInMonth:function(T,b){var f=this._validate(T,b,this.minDay,M.local.invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===13&&this.leapYear(f.year())?1:0)},weekDay:function(T,b,f){return(this.dayOfWeek(T,b,f)||7)<6},toJD:function(T,b,f){var o=this._validate(T,b,f,M.local.invalidDate);return(T=o.year())<0&&T++,o.day()+30*(o.month()-1)+365*(T-1)+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var b=Math.floor(T)+.5-this.jdEpoch,f=Math.floor((b-Math.floor((b+366)/1461))/365)+1;f<=0&&f--,b=Math.floor(T)+.5-this.newDate(f,1,1).toJD();var o=Math.floor(b/30)+1,t=b-30*(o-1)+1;return this.newDate(f,o,t)}}),M.calendars.ethiopian=s},2084:function(ee,R,e){var M=e(38700),k=e(50896);function s(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}function T(b,f){return b-f*Math.floor(b/f)}s.prototype=new M.baseCalendar,k(s.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var f=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear);return this._leapYear(f.year())},_leapYear:function(b){return T(7*(b=b<0?b+1:b)+1,19)<7},monthsInYear:function(b){return this._validate(b,this.minMonth,this.minDay,M.local.invalidYear),this._leapYear(b.year?b.year():b)?13:12},weekOfYear:function(b,f,o){var t=this.newDate(b,f,o);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(b){return b=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear).year(),this.toJD(b===-1?1:b+1,7,1)-this.toJD(b,7,1)},daysInMonth:function(b,f){return b.year&&(f=b.month(),b=b.year()),this._validate(b,f,this.minDay,M.local.invalidMonth),f===12&&this.leapYear(b)||f===8&&T(this.daysInYear(b),10)===5?30:f===9&&T(this.daysInYear(b),10)===3?29:this.daysPerMonth[f-1]},weekDay:function(b,f,o){return this.dayOfWeek(b,f,o)!==6},extraInfo:function(b,f,o){var t=this._validate(b,f,o,M.local.invalidDate);return{yearType:(this.leapYear(t)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(t)%10-3]}},toJD:function(b,f,o){var t=this._validate(b,f,o,M.local.invalidDate);b=t.year(),f=t.month(),o=t.day();var i=b<=0?b+1:b,n=this.jdEpoch+this._delay1(i)+this._delay2(i)+o+1;if(f<7){for(var r=7;r<=this.monthsInYear(b);r++)n+=this.daysInMonth(b,r);for(r=1;r<f;r++)n+=this.daysInMonth(b,r)}else for(r=7;r<f;r++)n+=this.daysInMonth(b,r);return n},_delay1:function(b){var f=Math.floor((235*b-234)/19),o=12084+13753*f,t=29*f+Math.floor(o/25920);return T(3*(t+1),7)<3&&t++,t},_delay2:function(b){var f=this._delay1(b-1),o=this._delay1(b);return this._delay1(b+1)-o==356?2:o-f==382?1:0},fromJD:function(b){b=Math.floor(b)+.5;for(var f=Math.floor(98496*(b-this.jdEpoch)/35975351)-1;b>=this.toJD(f===-1?1:f+1,7,1);)f++;for(var o=b<this.toJD(f,1,1)?7:1;b>this.toJD(f,o,this.daysInMonth(f,o));)o++;var t=b-this.toJD(f,o,1)+1;return this.newDate(f,o,t)}}),M.calendars.hebrew=s},26368:function(ee,R,e){var M=e(38700),k=e(50896);function s(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}s.prototype=new M.baseCalendar,k(s.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khams","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(T){return(11*this._validate(T,this.minMonth,this.minDay,M.local.invalidYear).year()+14)%30<11},weekOfYear:function(T,b,f){var o=this.newDate(T,b,f);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInYear:function(T){return this.leapYear(T)?355:354},daysInMonth:function(T,b){var f=this._validate(T,b,this.minDay,M.local.invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===12&&this.leapYear(f.year())?1:0)},weekDay:function(T,b,f){return this.dayOfWeek(T,b,f)!==5},toJD:function(T,b,f){var o=this._validate(T,b,f,M.local.invalidDate);return T=o.year(),b=o.month(),T=T<=0?T+1:T,(f=o.day())+Math.ceil(29.5*(b-1))+354*(T-1)+Math.floor((3+11*T)/30)+this.jdEpoch-1},fromJD:function(T){T=Math.floor(T)+.5;var b=Math.floor((30*(T-this.jdEpoch)+10646)/10631);b=b<=0?b-1:b;var f=Math.min(12,Math.ceil((T-29-this.toJD(b,1,1))/29.5)+1),o=T-this.toJD(b,f,1)+1;return this.newDate(b,f,o)}}),M.calendars.islamic=s},24747:function(ee,R,e){var M=e(38700),k=e(50896);function s(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}s.prototype=new M.baseCalendar,k(s.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var b=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear);return(T=b.year()<0?b.year()+1:b.year())%4==0},weekOfYear:function(T,b,f){var o=this.newDate(T,b,f);return o.add(4-(o.dayOfWeek()||7),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInMonth:function(T,b){var f=this._validate(T,b,this.minDay,M.local.invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===2&&this.leapYear(f.year())?1:0)},weekDay:function(T,b,f){return(this.dayOfWeek(T,b,f)||7)<6},toJD:function(T,b,f){var o=this._validate(T,b,f,M.local.invalidDate);return T=o.year(),b=o.month(),f=o.day(),T<0&&T++,b<=2&&(T--,b+=12),Math.floor(365.25*(T+4716))+Math.floor(30.6001*(b+1))+f-1524.5},fromJD:function(T){var b=Math.floor(T+.5)+1524,f=Math.floor((b-122.1)/365.25),o=Math.floor(365.25*f),t=Math.floor((b-o)/30.6001),i=t-Math.floor(t<14?1:13),n=f-Math.floor(i>2?4716:4715),r=b-o-Math.floor(30.6001*t);return n<=0&&n--,this.newDate(n,i,r)}}),M.calendars.julian=s},65616:function(ee,R,e){var M=e(38700),k=e(50896);function s(f){this.local=this.regionalOptions[f||""]||this.regionalOptions[""]}function T(f,o){return f-o*Math.floor(f/o)}function b(f,o){return T(f-1,o)+1}s.prototype=new M.baseCalendar,k(s.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(f){return this._validate(f,this.minMonth,this.minDay,M.local.invalidYear),!1},formatYear:function(f){f=this._validate(f,this.minMonth,this.minDay,M.local.invalidYear).year();var o=Math.floor(f/400);return f%=400,f+=f<0?400:0,o+"."+Math.floor(f/20)+"."+f%20},forYear:function(f){if((f=f.split(".")).length<3)throw"Invalid Mayan year";for(var o=0,t=0;t<f.length;t++){var i=parseInt(f[t],10);if(Math.abs(i)>19||t>0&&i<0)throw"Invalid Mayan year";o=20*o+i}return o},monthsInYear:function(f){return this._validate(f,this.minMonth,this.minDay,M.local.invalidYear),18},weekOfYear:function(f,o,t){return this._validate(f,o,t,M.local.invalidDate),0},daysInYear:function(f){return this._validate(f,this.minMonth,this.minDay,M.local.invalidYear),360},daysInMonth:function(f,o){return this._validate(f,o,this.minDay,M.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(f,o,t){return this._validate(f,o,t,M.local.invalidDate).day()},weekDay:function(f,o,t){return this._validate(f,o,t,M.local.invalidDate),!0},extraInfo:function(f,o,t){var i=this._validate(f,o,t,M.local.invalidDate).toJD(),n=this._toHaab(i),r=this._toTzolkin(i);return{haabMonthName:this.local.haabMonths[n[0]-1],haabMonth:n[0],haabDay:n[1],tzolkinDayName:this.local.tzolkinMonths[r[0]-1],tzolkinDay:r[0],tzolkinTrecena:r[1]}},_toHaab:function(f){var o=T(8+(f-=this.jdEpoch)+340,365);return[Math.floor(o/20)+1,T(o,20)]},_toTzolkin:function(f){return[b(20+(f-=this.jdEpoch),20),b(f+4,13)]},toJD:function(f,o,t){var i=this._validate(f,o,t,M.local.invalidDate);return i.day()+20*i.month()+360*i.year()+this.jdEpoch},fromJD:function(f){f=Math.floor(f)+.5-this.jdEpoch;var o=Math.floor(f/360);f%=360,f+=f<0?360:0;var t=Math.floor(f/20),i=f%20;return this.newDate(o,t,i)}}),M.calendars.mayan=s},30632:function(ee,R,e){var M=e(38700),k=e(50896);function s(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}s.prototype=new M.baseCalendar;var T=M.instance("gregorian");k(s.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var f=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear);return T.leapYear(f.year()+(f.year()<1?1:0)+1469)},weekOfYear:function(b,f,o){var t=this.newDate(b,f,o);return t.add(1-(t.dayOfWeek()||7),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(b,f){var o=this._validate(b,f,this.minDay,M.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(o.month()===12&&this.leapYear(o.year())?1:0)},weekDay:function(b,f,o){return(this.dayOfWeek(b,f,o)||7)<6},toJD:function(b,f,o){var t=this._validate(b,f,o,M.local.invalidMonth);(b=t.year())<0&&b++;for(var i=t.day(),n=1;n<t.month();n++)i+=this.daysPerMonth[n-1];return i+T.toJD(b+1468,3,13)},fromJD:function(b){b=Math.floor(b+.5);for(var f=Math.floor((b-(this.jdEpoch-1))/366);b>=this.toJD(f+1,1,1);)f++;for(var o=b-Math.floor(this.toJD(f,1,1)+.5)+1,t=1;o>this.daysInMonth(f,t);)o-=this.daysInMonth(f,t),t++;return this.newDate(f,t,o)}}),M.calendars.nanakshahi=s},73040:function(ee,R,e){var M=e(38700),k=e(50896);function s(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}s.prototype=new M.baseCalendar,k(s.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(T){return this.daysInYear(T)!==this.daysPerYear},weekOfYear:function(T,b,f){var o=this.newDate(T,b,f);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInYear:function(T){if(T=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear).year(),this.NEPALI_CALENDAR_DATA[T]===void 0)return this.daysPerYear;for(var b=0,f=this.minMonth;f<=12;f++)b+=this.NEPALI_CALENDAR_DATA[T][f];return b},daysInMonth:function(T,b){return T.year&&(b=T.month(),T=T.year()),this._validate(T,b,this.minDay,M.local.invalidMonth),this.NEPALI_CALENDAR_DATA[T]===void 0?this.daysPerMonth[b-1]:this.NEPALI_CALENDAR_DATA[T][b]},weekDay:function(T,b,f){return this.dayOfWeek(T,b,f)!==6},toJD:function(T,b,f){var o=this._validate(T,b,f,M.local.invalidDate);T=o.year(),b=o.month(),f=o.day();var t=M.instance(),i=0,n=b,r=T;this._createMissingCalendarData(T);var a=T-(n>9||n===9&&f>=this.NEPALI_CALENDAR_DATA[r][0]?56:57);for(b!==9&&(i=f,n--);n!==9;)n<=0&&(n=12,r--),i+=this.NEPALI_CALENDAR_DATA[r][n],n--;return b===9?(i+=f-this.NEPALI_CALENDAR_DATA[r][0])<0&&(i+=t.daysInYear(a)):i+=this.NEPALI_CALENDAR_DATA[r][9]-this.NEPALI_CALENDAR_DATA[r][0],t.newDate(a,1,1).add(i,"d").toJD()},fromJD:function(T){var b=M.instance().fromJD(T),f=b.year(),o=b.dayOfYear(),t=f+56;this._createMissingCalendarData(t);for(var i=9,n=this.NEPALI_CALENDAR_DATA[t][0],r=this.NEPALI_CALENDAR_DATA[t][i]-n+1;o>r;)++i>12&&(i=1,t++),r+=this.NEPALI_CALENDAR_DATA[t][i];var a=this.NEPALI_CALENDAR_DATA[t][i]-(r-o);return this.newDate(t,i,a)},_createMissingCalendarData:function(T){var b=this.daysPerMonth.slice(0);b.unshift(17);for(var f=T-1;f<T+2;f++)this.NEPALI_CALENDAR_DATA[f]===void 0&&(this.NEPALI_CALENDAR_DATA[f]=b)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),M.calendars.nepali=s},1104:function(ee,R,e){var M=e(38700),k=e(50896);function s(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}function T(b,f){return b-f*Math.floor(b/f)}s.prototype=new M.baseCalendar,k(s.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(b){var f=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear);return 682*((f.year()-(f.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(b,f,o){var t=this.newDate(b,f,o);return t.add(-(t.dayOfWeek()+1)%7,"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(b,f){var o=this._validate(b,f,this.minDay,M.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(o.month()===12&&this.leapYear(o.year())?1:0)},weekDay:function(b,f,o){return this.dayOfWeek(b,f,o)!==5},toJD:function(b,f,o){var t=this._validate(b,f,o,M.local.invalidDate);b=t.year(),f=t.month(),o=t.day();var i=b-(b>=0?474:473),n=474+T(i,2820);return o+(f<=7?31*(f-1):30*(f-1)+6)+Math.floor((682*n-110)/2816)+365*(n-1)+1029983*Math.floor(i/2820)+this.jdEpoch-1},fromJD:function(b){var f=(b=Math.floor(b)+.5)-this.toJD(475,1,1),o=Math.floor(f/1029983),t=T(f,1029983),i=2820;if(t!==1029982){var n=Math.floor(t/366),r=T(t,366);i=Math.floor((2134*n+2816*r+2815)/1028522)+n+1}var a=i+2820*o+474;a=a<=0?a-1:a;var l=b-this.toJD(a,1,1)+1,u=l<=186?Math.ceil(l/31):Math.ceil((l-6)/30),h=b-this.toJD(a,u,1)+1;return this.newDate(a,u,h)}}),M.calendars.persian=s,M.calendars.jalali=s},51456:function(ee,R,e){var M=e(38700),k=e(50896),s=M.instance();function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}T.prototype=new M.baseCalendar,k(T.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(b){var f=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear);return b=this._t2gYear(f.year()),s.leapYear(b)},weekOfYear:function(b,f,o){var t=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear);return b=this._t2gYear(t.year()),s.weekOfYear(b,t.month(),t.day())},daysInMonth:function(b,f){var o=this._validate(b,f,this.minDay,M.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(o.month()===2&&this.leapYear(o.year())?1:0)},weekDay:function(b,f,o){return(this.dayOfWeek(b,f,o)||7)<6},toJD:function(b,f,o){var t=this._validate(b,f,o,M.local.invalidDate);return b=this._t2gYear(t.year()),s.toJD(b,t.month(),t.day())},fromJD:function(b){var f=s.fromJD(b),o=this._g2tYear(f.year());return this.newDate(o,f.month(),f.day())},_t2gYear:function(b){return b+this.yearsOffset+(b>=-this.yearsOffset&&b<=-1?1:0)},_g2tYear:function(b){return b-this.yearsOffset-(b>=1&&b<=this.yearsOffset?1:0)}}),M.calendars.taiwan=T},4592:function(ee,R,e){var M=e(38700),k=e(50896),s=M.instance();function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}T.prototype=new M.baseCalendar,k(T.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var f=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear);return b=this._t2gYear(f.year()),s.leapYear(b)},weekOfYear:function(b,f,o){var t=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear);return b=this._t2gYear(t.year()),s.weekOfYear(b,t.month(),t.day())},daysInMonth:function(b,f){var o=this._validate(b,f,this.minDay,M.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(o.month()===2&&this.leapYear(o.year())?1:0)},weekDay:function(b,f,o){return(this.dayOfWeek(b,f,o)||7)<6},toJD:function(b,f,o){var t=this._validate(b,f,o,M.local.invalidDate);return b=this._t2gYear(t.year()),s.toJD(b,t.month(),t.day())},fromJD:function(b){var f=s.fromJD(b),o=this._g2tYear(f.year());return this.newDate(o,f.month(),f.day())},_t2gYear:function(b){return b-this.yearsOffset-(b>=1&&b<=this.yearsOffset?1:0)},_g2tYear:function(b){return b+this.yearsOffset+(b>=-this.yearsOffset&&b<=-1?1:0)}}),M.calendars.thai=T},45348:function(ee,R,e){var M=e(38700),k=e(50896);function s(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}s.prototype=new M.baseCalendar,k(s.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalth","Yawm al-Arba","Yawm al-Khams","Yawm al-Juma","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(b){var f=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear);return this.daysInYear(f.year())===355},weekOfYear:function(b,f,o){var t=this.newDate(b,f,o);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(b){for(var f=0,o=1;o<=12;o++)f+=this.daysInMonth(b,o);return f},daysInMonth:function(b,f){for(var o=this._validate(b,f,this.minDay,M.local.invalidMonth).toJD()-24e5+.5,t=0,i=0;i<T.length;i++){if(T[i]>o)return T[t]-T[t-1];t++}return 30},weekDay:function(b,f,o){return this.dayOfWeek(b,f,o)!==5},toJD:function(b,f,o){var t=this._validate(b,f,o,M.local.invalidDate),i=12*(t.year()-1)+t.month()-15292;return t.day()+T[i-1]-1+24e5-.5},fromJD:function(b){for(var f=b-24e5+.5,o=0,t=0;t<T.length&&!(T[t]>f);t++)o++;var i=o+15292,n=Math.floor((i-1)/12),r=n+1,a=i-12*n,l=f-T[o-1]+1;return this.newDate(r,a,l)},isValid:function(b,f,o){var t=M.baseCalendar.prototype.isValid.apply(this,arguments);return t&&(t=(b=b.year!=null?b.year:b)>=1276&&b<=1500),t},_validate:function(b,f,o,t){var i=M.baseCalendar.prototype._validate.apply(this,arguments);if(i.year<1276||i.year>1500)throw t.replace(/\{0\}/,this.local.name);return i}}),M.calendars.ummalqura=s;var T=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},38700:function(ee,R,e){var M=e(50896);function k(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function s(t,i,n,r){if(this._calendar=t,this._year=i,this._month=n,this._day=r,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(o.local.invalidDate||o.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function T(t,i){return"000000".substring(0,i-(t=""+t).length)+t}function b(){this.shortYearCutoff="+10"}function f(t){this.local=this.regionalOptions[t]||this.regionalOptions[""]}M(k.prototype,{instance:function(t,i){t=(t||"gregorian").toLowerCase(),i=i||"";var n=this._localCals[t+"-"+i];if(!n&&this.calendars[t]&&(n=new this.calendars[t](i),this._localCals[t+"-"+i]=n),!n)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,t);return n},newDate:function(t,i,n,r,a){return(r=(t!=null&&t.year?t.calendar():typeof r=="string"?this.instance(r,a):r)||this.instance()).newDate(t,i,n)},substituteDigits:function(t){return function(i){return(i+"").replace(/[0-9]/g,function(n){return t[n]})}},substituteChineseDigits:function(t,i){return function(n){for(var r="",a=0;n>0;){var l=n%10;r=(l===0?"":t[l]+i[a])+r,a++,n=Math.floor(n/10)}return r.indexOf(t[1]+i[1])===0&&(r=r.substr(1)),r||t[0]}}}),M(s.prototype,{newDate:function(t,i,n){return this._calendar.newDate(t??this,i,n)},year:function(t){return arguments.length===0?this._year:this.set(t,"y")},month:function(t){return arguments.length===0?this._month:this.set(t,"m")},day:function(t){return arguments.length===0?this._day:this.set(t,"d")},date:function(t,i,n){if(!this._calendar.isValid(t,i,n))throw(o.local.invalidDate||o.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=t,this._month=i,this._day=n,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(t,i){return this._calendar.add(this,t,i)},set:function(t,i){return this._calendar.set(this,t,i)},compareTo:function(t){if(this._calendar.name!==t._calendar.name)throw(o.local.differentCalendars||o.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,t._calendar.local.name);var i=this._year!==t._year?this._year-t._year:this._month!==t._month?this.monthOfYear()-t.monthOfYear():this._day-t._day;return i===0?0:i<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(t){return this._calendar.fromJD(t)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(t){return this._calendar.fromJSDate(t)},toString:function(){return(this.year()<0?"-":"")+T(Math.abs(this.year()),4)+"-"+T(this.month(),2)+"-"+T(this.day(),2)}}),M(b.prototype,{_validateLevel:0,newDate:function(t,i,n){return t==null?this.today():(t.year&&(this._validate(t,i,n,o.local.invalidDate||o.regionalOptions[""].invalidDate),n=t.day(),i=t.month(),t=t.year()),new s(this,t,i,n))},today:function(){return this.fromJSDate(new Date)},epoch:function(t){return this._validate(t,this.minMonth,this.minDay,o.local.invalidYear||o.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,o.local.invalidYear||o.regionalOptions[""].invalidYear);return(i.year()<0?"-":"")+T(Math.abs(i.year()),4)},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,o.local.invalidYear||o.regionalOptions[""].invalidYear),12},monthOfYear:function(t,i){var n=this._validate(t,i,this.minDay,o.local.invalidMonth||o.regionalOptions[""].invalidMonth);return(n.month()+this.monthsInYear(n)-this.firstMonth)%this.monthsInYear(n)+this.minMonth},fromMonthOfYear:function(t,i){var n=(i+this.firstMonth-2*this.minMonth)%this.monthsInYear(t)+this.minMonth;return this._validate(t,n,this.minDay,o.local.invalidMonth||o.regionalOptions[""].invalidMonth),n},daysInYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,o.local.invalidYear||o.regionalOptions[""].invalidYear);return this.leapYear(i)?366:365},dayOfYear:function(t,i,n){var r=this._validate(t,i,n,o.local.invalidDate||o.regionalOptions[""].invalidDate);return r.toJD()-this.newDate(r.year(),this.fromMonthOfYear(r.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(t,i,n){var r=this._validate(t,i,n,o.local.invalidDate||o.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(r))+2)%this.daysInWeek()},extraInfo:function(t,i,n){return this._validate(t,i,n,o.local.invalidDate||o.regionalOptions[""].invalidDate),{}},add:function(t,i,n){return this._validate(t,this.minMonth,this.minDay,o.local.invalidDate||o.regionalOptions[""].invalidDate),this._correctAdd(t,this._add(t,i,n),i,n)},_add:function(t,i,n){if(this._validateLevel++,n==="d"||n==="w"){var r=t.toJD()+i*(n==="w"?this.daysInWeek():1),a=t.calendar().fromJD(r);return this._validateLevel--,[a.year(),a.month(),a.day()]}try{var l=t.year()+(n==="y"?i:0),u=t.monthOfYear()+(n==="m"?i:0);a=t.day(),n==="y"?(t.month()!==this.fromMonthOfYear(l,u)&&(u=this.newDate(l,t.month(),this.minDay).monthOfYear()),u=Math.min(u,this.monthsInYear(l)),a=Math.min(a,this.daysInMonth(l,this.fromMonthOfYear(l,u)))):n==="m"&&(function(c){for(;u<c.minMonth;)l--,u+=c.monthsInYear(l);for(var x=c.monthsInYear(l);u>x-1+c.minMonth;)l++,u-=x,x=c.monthsInYear(l)}(this),a=Math.min(a,this.daysInMonth(l,this.fromMonthOfYear(l,u))));var h=[l,this.fromMonthOfYear(l,u),a];return this._validateLevel--,h}catch(c){throw this._validateLevel--,c}},_correctAdd:function(t,i,n,r){if(!(this.hasYearZero||r!=="y"&&r!=="m"||i[0]!==0&&t.year()>0==i[0]>0)){var a={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[r],l=n<0?-1:1;i=this._add(t,n*a[0]+l*a[1],a[2])}return t.date(i[0],i[1],i[2])},set:function(t,i,n){this._validate(t,this.minMonth,this.minDay,o.local.invalidDate||o.regionalOptions[""].invalidDate);var r=n==="y"?i:t.year(),a=n==="m"?i:t.month(),l=n==="d"?i:t.day();return n!=="y"&&n!=="m"||(l=Math.min(l,this.daysInMonth(r,a))),t.date(r,a,l)},isValid:function(t,i,n){this._validateLevel++;var r=this.hasYearZero||t!==0;if(r){var a=this.newDate(t,i,this.minDay);r=i>=this.minMonth&&i-this.minMonth<this.monthsInYear(a)&&n>=this.minDay&&n-this.minDay<this.daysInMonth(a)}return this._validateLevel--,r},toJSDate:function(t,i,n){var r=this._validate(t,i,n,o.local.invalidDate||o.regionalOptions[""].invalidDate);return o.instance().fromJD(this.toJD(r)).toJSDate()},fromJSDate:function(t){return this.fromJD(o.instance().fromJSDate(t).toJD())},_validate:function(t,i,n,r){if(t.year){if(this._validateLevel===0&&this.name!==t.calendar().name)throw(o.local.differentCalendars||o.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,t.calendar().local.name);return t}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(t,i,n))throw r.replace(/\{0\}/,this.local.name);var a=this.newDate(t,i,n);return this._validateLevel--,a}catch(l){throw this._validateLevel--,l}}}),f.prototype=new b,M(f.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,o.local.invalidYear||o.regionalOptions[""].invalidYear);return(t=i.year()+(i.year()<0?1:0))%4==0&&(t%100!=0||t%400==0)},weekOfYear:function(t,i,n){var r=this.newDate(t,i,n);return r.add(4-(r.dayOfWeek()||7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(t,i){var n=this._validate(t,i,this.minDay,o.local.invalidMonth||o.regionalOptions[""].invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===2&&this.leapYear(n.year())?1:0)},weekDay:function(t,i,n){return(this.dayOfWeek(t,i,n)||7)<6},toJD:function(t,i,n){var r=this._validate(t,i,n,o.local.invalidDate||o.regionalOptions[""].invalidDate);t=r.year(),i=r.month(),n=r.day(),t<0&&t++,i<3&&(i+=12,t--);var a=Math.floor(t/100),l=2-a+Math.floor(a/4);return Math.floor(365.25*(t+4716))+Math.floor(30.6001*(i+1))+n+l-1524.5},fromJD:function(t){var i=Math.floor(t+.5),n=Math.floor((i-186721625e-2)/36524.25),r=1524+(n=i+1+n-Math.floor(n/4)),a=Math.floor((r-122.1)/365.25),l=Math.floor(365.25*a),u=Math.floor((r-l)/30.6001),h=r-l-Math.floor(30.6001*u),c=u-(u>13.5?13:1),x=a-(c>2.5?4716:4715);return x<=0&&x--,this.newDate(x,c,h)},toJSDate:function(t,i,n){var r=this._validate(t,i,n,o.local.invalidDate||o.regionalOptions[""].invalidDate),a=new Date(r.year(),r.month()-1,r.day());return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a.setHours(a.getHours()>12?a.getHours()+2:0),a},fromJSDate:function(t){return this.newDate(t.getFullYear(),t.getMonth()+1,t.getDate())}});var o=ee.exports=new k;o.cdate=s,o.baseCalendar=b,o.calendars.gregorian=f},15168:function(ee,R,e){var M=e(50896),k=e(38700);M(k.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),k.local=k.regionalOptions[""],M(k.cdate.prototype,{formatDate:function(s,T){return typeof s!="string"&&(T=s,s=""),this._calendar.formatDate(s||"",this,T)}}),M(k.baseCalendar.prototype,{UNIX_EPOCH:k.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:k.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(s,T,b){if(typeof s!="string"&&(b=T,T=s,s=""),!T)return"";if(T.calendar()!==this)throw k.local.invalidFormat||k.regionalOptions[""].invalidFormat;s=s||this.local.dateFormat;for(var f,o,t,i=(b=b||{}).dayNamesShort||this.local.dayNamesShort,n=b.dayNames||this.local.dayNames,r=b.monthNumbers||this.local.monthNumbers,a=b.monthNamesShort||this.local.monthNamesShort,l=b.monthNames||this.local.monthNames,u=(b.calculateWeek||this.local.calculateWeek,function(d,S){for(var w=1;_+w<s.length&&s.charAt(_+w)===d;)w++;return _+=w-1,Math.floor(w/(S||1))>1}),h=function(d,S,w,E){var C=""+S;if(u(d,E))for(;C.length<w;)C="0"+C;return C},c=this,x=function(d){return typeof r=="function"?r.call(c,d,u("m")):g(h("m",d.month(),2))},p=function(d,S){return S?typeof l=="function"?l.call(c,d):l[d.month()-c.minMonth]:typeof a=="function"?a.call(c,d):a[d.month()-c.minMonth]},v=this.local.digits,g=function(d){return b.localNumbers&&v?v(d):d},y="",m=!1,_=0;_<s.length;_++)if(m)s.charAt(_)!=="'"||u("'")?y+=s.charAt(_):m=!1;else switch(s.charAt(_)){case"d":y+=g(h("d",T.day(),2));break;case"D":y+=(f=T.dayOfWeek(),o=i,t=n,u("D")?t[f]:o[f]);break;case"o":y+=h("o",T.dayOfYear(),3);break;case"w":y+=h("w",T.weekOfYear(),2);break;case"m":y+=x(T);break;case"M":y+=p(T,u("M"));break;case"y":y+=u("y",2)?T.year():(T.year()%100<10?"0":"")+T.year()%100;break;case"Y":u("Y",2),y+=T.formatYear();break;case"J":y+=T.toJD();break;case"@":y+=(T.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":y+=(T.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":u("'")?y+="'":m=!0;break;default:y+=s.charAt(_)}return y},parseDate:function(s,T,b){if(T==null)throw k.local.invalidArguments||k.regionalOptions[""].invalidArguments;if((T=typeof T=="object"?T.toString():T+"")==="")return null;s=s||this.local.dateFormat;var f=(b=b||{}).shortYearCutoff||this.shortYearCutoff;f=typeof f!="string"?f:this.today().year()%100+parseInt(f,10);for(var o=b.dayNamesShort||this.local.dayNamesShort,t=b.dayNames||this.local.dayNames,i=b.parseMonth||this.local.parseMonth,n=b.monthNumbers||this.local.monthNumbers,r=b.monthNamesShort||this.local.monthNamesShort,a=b.monthNames||this.local.monthNames,l=-1,u=-1,h=-1,c=-1,x=-1,p=!1,v=!1,g=function(z,j){for(var I=1;C+I<s.length&&s.charAt(C+I)===z;)I++;return C+=I-1,Math.floor(I/(j||1))>1},y=function(z,j){var I=g(z,j),N=[2,3,I?4:2,I?4:2,10,11,20]["oyYJ@!".indexOf(z)+1],W=new RegExp("^-?\\d{1,"+N+"}"),F=T.substring(E).match(W);if(!F)throw(k.local.missingNumberAt||k.regionalOptions[""].missingNumberAt).replace(/\{0\}/,E);return E+=F[0].length,parseInt(F[0],10)},m=this,_=function(){if(typeof n=="function"){g("m");var z=n.call(m,T.substring(E));return E+=z.length,z}return y("m")},d=function(z,j,I,N){for(var W=g(z,N)?I:j,F=0;F<W.length;F++)if(T.substr(E,W[F].length).toLowerCase()===W[F].toLowerCase())return E+=W[F].length,F+m.minMonth;throw(k.local.unknownNameAt||k.regionalOptions[""].unknownNameAt).replace(/\{0\}/,E)},S=function(){if(typeof a=="function"){var z=g("M")?a.call(m,T.substring(E)):r.call(m,T.substring(E));return E+=z.length,z}return d("M",r,a)},w=function(){if(T.charAt(E)!==s.charAt(C))throw(k.local.unexpectedLiteralAt||k.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,E);E++},E=0,C=0;C<s.length;C++)if(v)s.charAt(C)!=="'"||g("'")?w():v=!1;else switch(s.charAt(C)){case"d":c=y("d");break;case"D":d("D",o,t);break;case"o":x=y("o");break;case"w":y("w");break;case"m":h=_();break;case"M":h=S();break;case"y":var O=C;p=!g("y",2),C=O,u=y("y",2);break;case"Y":u=y("Y",2);break;case"J":l=y("J")+.5,T.charAt(E)==="."&&(E++,y("J"));break;case"@":l=y("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":l=y("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":E=T.length;break;case"'":g("'")?w():v=!0;break;default:w()}if(E<T.length)throw k.local.unexpectedText||k.regionalOptions[""].unexpectedText;if(u===-1?u=this.today().year():u<100&&p&&(u+=f===-1?1900:this.today().year()-this.today().year()%100-(u<=f?0:100)),typeof h=="string"&&(h=i.call(this,u,h)),x>-1){h=1,c=x;for(var P=this.daysInMonth(u,h);c>P;P=this.daysInMonth(u,h))h++,c-=P}return l>-1?this.fromJD(l):this.newDate(u,h,c)},determineDate:function(s,T,b,f,o){b&&typeof b!="object"&&(o=f,f=b,b=null),typeof f!="string"&&(o=f,f="");var t=this;return T=T?T.newDate():null,s==null?T:typeof s=="string"?function(i){try{return t.parseDate(f,i,o)}catch{}for(var n=((i=i.toLowerCase()).match(/^c/)&&b?b.newDate():null)||t.today(),r=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,a=r.exec(i);a;)n.add(parseInt(a[1],10),a[2]||"d"),a=r.exec(i);return n}(s):typeof s=="number"?isNaN(s)||s===1/0||s===-1/0?T:t.today().add(s,"d"):t.newDate(s)}})},21576:function(){},19768:function(){},63436:function(ee,R,e){var M=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],k=typeof globalThis>"u"?e.g:globalThis;ee.exports=function(){for(var s=[],T=0;T<M.length;T++)typeof k[M[T]]=="function"&&(s[s.length]=M[T]);return s}},67756:function(ee,R,e){function M(fe,pe,ge){fe.prototype=pe.prototype=ge,ge.constructor=fe}function k(fe,pe){var ge=Object.create(fe.prototype);for(var me in pe)ge[me]=pe[me];return ge}function s(){}e.d(R,{qy:function(){return ce},Gz:function(){return $}});var T=.7,b=1/T,f="\\s*([+-]?\\d+)\\s*",o="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",i=/^#([0-9a-f]{3,8})$/,n=new RegExp("^rgb\\(".concat(f,",").concat(f,",").concat(f,"\\)$")),r=new RegExp("^rgb\\(".concat(t,",").concat(t,",").concat(t,"\\)$")),a=new RegExp("^rgba\\(".concat(f,",").concat(f,",").concat(f,",").concat(o,"\\)$")),l=new RegExp("^rgba\\(".concat(t,",").concat(t,",").concat(t,",").concat(o,"\\)$")),u=new RegExp("^hsl\\(".concat(o,",").concat(t,",").concat(t,"\\)$")),h=new RegExp("^hsla\\(".concat(o,",").concat(t,",").concat(t,",").concat(o,"\\)$")),c={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function x(){return this.rgb().formatHex()}function p(){return this.rgb().formatRgb()}function v(fe){var pe,ge;return fe=(fe+"").trim().toLowerCase(),(pe=i.exec(fe))?(ge=pe[1].length,pe=parseInt(pe[1],16),ge===6?g(pe):ge===3?new _(pe>>8&15|pe>>4&240,pe>>4&15|240&pe,(15&pe)<<4|15&pe,1):ge===8?y(pe>>24&255,pe>>16&255,pe>>8&255,(255&pe)/255):ge===4?y(pe>>12&15|pe>>8&240,pe>>8&15|pe>>4&240,pe>>4&15|240&pe,((15&pe)<<4|15&pe)/255):null):(pe=n.exec(fe))?new _(pe[1],pe[2],pe[3],1):(pe=r.exec(fe))?new _(255*pe[1]/100,255*pe[2]/100,255*pe[3]/100,1):(pe=a.exec(fe))?y(pe[1],pe[2],pe[3],pe[4]):(pe=l.exec(fe))?y(255*pe[1]/100,255*pe[2]/100,255*pe[3]/100,pe[4]):(pe=u.exec(fe))?O(pe[1],pe[2]/100,pe[3]/100,1):(pe=h.exec(fe))?O(pe[1],pe[2]/100,pe[3]/100,pe[4]):c.hasOwnProperty(fe)?g(c[fe]):fe==="transparent"?new _(NaN,NaN,NaN,0):null}function g(fe){return new _(fe>>16&255,fe>>8&255,255&fe,1)}function y(fe,pe,ge,me){return me<=0&&(fe=pe=ge=NaN),new _(fe,pe,ge,me)}function m(fe,pe,ge,me){return arguments.length===1?((be=fe)instanceof s||(be=v(be)),be?new _((be=be.rgb()).r,be.g,be.b,be.opacity):new _):new _(fe,pe,ge,me??1);var be}function _(fe,pe,ge,me){this.r=+fe,this.g=+pe,this.b=+ge,this.opacity=+me}function d(){return"#".concat(C(this.r)).concat(C(this.g)).concat(C(this.b))}function S(){var fe=w(this.opacity);return"".concat(fe===1?"rgb(":"rgba(").concat(E(this.r),", ").concat(E(this.g),", ").concat(E(this.b)).concat(fe===1?")":", ".concat(fe,")"))}function w(fe){return isNaN(fe)?1:Math.max(0,Math.min(1,fe))}function E(fe){return Math.max(0,Math.min(255,Math.round(fe)||0))}function C(fe){return((fe=E(fe))<16?"0":"")+fe.toString(16)}function O(fe,pe,ge,me){return me<=0?fe=pe=ge=NaN:ge<=0||ge>=1?fe=pe=NaN:pe<=0&&(fe=NaN),new z(fe,pe,ge,me)}function P(fe){if(fe instanceof z)return new z(fe.h,fe.s,fe.l,fe.opacity);if(fe instanceof s||(fe=v(fe)),!fe)return new z;if(fe instanceof z)return fe;var pe=(fe=fe.rgb()).r/255,ge=fe.g/255,me=fe.b/255,be=Math.min(pe,ge,me),ke=Math.max(pe,ge,me),ze=NaN,ve=ke-be,oe=(ke+be)/2;return ve?(ze=pe===ke?(ge-me)/ve+6*(ge<me):ge===ke?(me-pe)/ve+2:(pe-ge)/ve+4,ve/=oe<.5?ke+be:2-ke-be,ze*=60):ve=oe>0&&oe<1?0:ze,new z(ze,ve,oe,fe.opacity)}function z(fe,pe,ge,me){this.h=+fe,this.s=+pe,this.l=+ge,this.opacity=+me}function j(fe){return(fe=(fe||0)%360)<0?fe+360:fe}function I(fe){return Math.max(0,Math.min(1,fe||0))}function N(fe,pe,ge){return 255*(fe<60?pe+(ge-pe)*fe/60:fe<180?ge:fe<240?pe+(ge-pe)*(240-fe)/60:pe)}M(s,v,{copy:function(fe){return Object.assign(new this.constructor,this,fe)},displayable:function(){return this.rgb().displayable()},hex:x,formatHex:x,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return P(this).formatHsl()},formatRgb:p,toString:p}),M(_,m,k(s,{brighter:function(fe){return fe=fe==null?b:Math.pow(b,fe),new _(this.r*fe,this.g*fe,this.b*fe,this.opacity)},darker:function(fe){return fe=fe==null?T:Math.pow(T,fe),new _(this.r*fe,this.g*fe,this.b*fe,this.opacity)},rgb:function(){return this},clamp:function(){return new _(E(this.r),E(this.g),E(this.b),w(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:d,formatHex:d,formatHex8:function(){return"#".concat(C(this.r)).concat(C(this.g)).concat(C(this.b)).concat(C(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:S,toString:S})),M(z,function(fe,pe,ge,me){return arguments.length===1?P(fe):new z(fe,pe,ge,me??1)},k(s,{brighter:function(fe){return fe=fe==null?b:Math.pow(b,fe),new z(this.h,this.s,this.l*fe,this.opacity)},darker:function(fe){return fe=fe==null?T:Math.pow(T,fe),new z(this.h,this.s,this.l*fe,this.opacity)},rgb:function(){var fe=this.h%360+360*(this.h<0),pe=isNaN(fe)||isNaN(this.s)?0:this.s,ge=this.l,me=ge+(ge<.5?ge:1-ge)*pe,be=2*ge-me;return new _(N(fe>=240?fe-240:fe+120,be,me),N(fe,be,me),N(fe<120?fe+240:fe-120,be,me),this.opacity)},clamp:function(){return new z(j(this.h),I(this.s),I(this.l),w(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var fe=w(this.opacity);return"".concat(fe===1?"hsl(":"hsla(").concat(j(this.h),", ").concat(100*I(this.s),"%, ").concat(100*I(this.l),"%").concat(fe===1?")":", ".concat(fe,")"))}}));var W=function(fe){return function(){return fe}};function F(fe,pe){var ge=pe-fe;return ge?function(me,be){return function(ke){return me+ke*be}}(fe,ge):W(isNaN(fe)?pe:fe)}var U=function fe(pe){var ge=function(be){return(be=+be)==1?F:function(ke,ze){return ze-ke?function(ve,oe,ie){return ve=Math.pow(ve,ie),oe=Math.pow(oe,ie)-ve,ie=1/ie,function(he){return Math.pow(ve+he*oe,ie)}}(ke,ze,be):W(isNaN(ke)?ze:ke)}}(pe);function me(be,ke){var ze=ge((be=m(be)).r,(ke=m(ke)).r),ve=ge(be.g,ke.g),oe=ge(be.b,ke.b),ie=F(be.opacity,ke.opacity);return function(he){return be.r=ze(he),be.g=ve(he),be.b=oe(he),be.opacity=ie(he),be+""}}return me.gamma=fe,me}(1);function H(fe,pe){var ge,me=pe?pe.length:0,be=fe?Math.min(me,fe.length):0,ke=new Array(be),ze=new Array(me);for(ge=0;ge<be;++ge)ke[ge]=ce(fe[ge],pe[ge]);for(;ge<me;++ge)ze[ge]=pe[ge];return function(ve){for(ge=0;ge<be;++ge)ze[ge]=ke[ge](ve);return ze}}function ne(fe,pe){var ge=new Date;return fe=+fe,pe=+pe,function(me){return ge.setTime(fe*(1-me)+pe*me),ge}}function $(fe,pe){return fe=+fe,pe=+pe,function(ge){return fe*(1-ge)+pe*ge}}function K(fe){return K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pe){return typeof pe}:function(pe){return pe&&typeof Symbol=="function"&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe},K(fe)}function Q(fe,pe){var ge,me={},be={};for(ge in fe!==null&&K(fe)==="object"||(fe={}),pe!==null&&K(pe)==="object"||(pe={}),pe)ge in fe?me[ge]=ce(fe[ge],pe[ge]):be[ge]=pe[ge];return function(ke){for(ge in me)be[ge]=me[ge](ke);return be}}var Z=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,X=new RegExp(Z.source,"g");function te(fe,pe){var ge,me,be,ke=Z.lastIndex=X.lastIndex=0,ze=-1,ve=[],oe=[];for(fe+="",pe+="";(ge=Z.exec(fe))&&(me=X.exec(pe));)(be=me.index)>ke&&(be=pe.slice(ke,be),ve[ze]?ve[ze]+=be:ve[++ze]=be),(ge=ge[0])===(me=me[0])?ve[ze]?ve[ze]+=me:ve[++ze]=me:(ve[++ze]=null,oe.push({i:ze,x:$(ge,me)})),ke=X.lastIndex;return ke<pe.length&&(be=pe.slice(ke),ve[ze]?ve[ze]+=be:ve[++ze]=be),ve.length<2?oe[0]?function(ie){return function(he){return ie(he)+""}}(oe[0].x):function(ie){return function(){return ie}}(pe):(pe=oe.length,function(ie){for(var he,Se=0;Se<pe;++Se)ve[(he=oe[Se]).i]=he.x(ie);return ve.join("")})}function ae(fe,pe){pe||(pe=[]);var ge,me=fe?Math.min(pe.length,fe.length):0,be=pe.slice();return function(ke){for(ge=0;ge<me;++ge)be[ge]=fe[ge]*(1-ke)+pe[ge]*ke;return be}}function se(fe){return se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pe){return typeof pe}:function(pe){return pe&&typeof Symbol=="function"&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe},se(fe)}function ce(fe,pe){var ge,me,be=se(pe);return pe==null||be==="boolean"?W(pe):(be==="number"?$:be==="string"?(ge=v(pe))?(pe=ge,U):te:pe instanceof v?U:pe instanceof Date?ne:(me=pe,!ArrayBuffer.isView(me)||me instanceof DataView?Array.isArray(pe)?H:typeof pe.valueOf!="function"&&typeof pe.toString!="function"||isNaN(pe)?Q:$:ae))(fe,pe)}},30584:function(ee){ee.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},7294:function(ee){ee.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},47916:function(ee){ee.exports=JSON.parse('["normal","italic","oblique"]')},2904:function(ee){ee.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},68194:function(ee){ee.exports=JSON.parse('["inherit","initial","unset"]')},3748:function(ee){ee.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},Ou={};function Fs(ee){var R=Ou[ee];if(R!==void 0)return R.exports;var e=Ou[ee]={exports:{}};return of[ee].call(e.exports,e,e.exports,Fs),e.exports}return Fs.n=function(ee){var R=ee&&ee.__esModule?function(){return ee.default}:function(){return ee};return Fs.d(R,{a:R}),R},Fs.d=function(ee,R){for(var e in R)Fs.o(R,e)&&!Fs.o(ee,e)&&Object.defineProperty(ee,e,{enumerable:!0,get:R[e]})},Fs.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),Fs.o=function(ee,R){return Object.prototype.hasOwnProperty.call(ee,R)},Fs.r=function(ee){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(ee,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ee,"__esModule",{value:!0})},Fs(13792)}()})})(Nh);var Ld=Nh.exports;export{Ed as g,Ld as p};
//# sourceMappingURL=plotly-EwCvw_jj.js.map
